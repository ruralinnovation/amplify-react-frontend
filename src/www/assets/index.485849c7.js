(function(){const D=document.createElement("link").relList;if(D&&D.supports&&D.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))d(S);new MutationObserver(S=>{for(const r of S)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&d(a)}).observe(document,{childList:!0,subtree:!0});function e(S){const r={};return S.integrity&&(r.integrity=S.integrity),S.referrerpolicy&&(r.referrerPolicy=S.referrerpolicy),S.crossorigin==="use-credentials"?r.credentials="include":S.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(S){if(S.ep)return;S.ep=!0;const r=e(S);fetch(S.href,r)}})();var Fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xw(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Nn={exports:{}},Di={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=Symbol.for("react.element"),aM=Symbol.for("react.portal"),iM=Symbol.for("react.fragment"),oM=Symbol.for("react.strict_mode"),sM=Symbol.for("react.profiler"),lM=Symbol.for("react.provider"),uM=Symbol.for("react.context"),cM=Symbol.for("react.forward_ref"),fM=Symbol.for("react.suspense"),hM=Symbol.for("react.memo"),pM=Symbol.for("react.lazy"),H2=Symbol.iterator;function vM(A){return A===null||typeof A!="object"?null:(A=H2&&A[H2]||A["@@iterator"],typeof A=="function"?A:null)}var Zw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kw=Object.assign,Jw={};function p0(A,D,e){this.props=A,this.context=D,this.refs=Jw,this.updater=e||Zw}p0.prototype.isReactComponent={};p0.prototype.setState=function(A,D){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,D,"setState")};p0.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function $w(){}$w.prototype=p0.prototype;function _b(A,D,e){this.props=A,this.context=D,this.refs=Jw,this.updater=e||Zw}var wb=_b.prototype=new $w;wb.constructor=_b;Kw(wb,p0.prototype);wb.isPureReactComponent=!0;var G2=Array.isArray,Qw=Object.prototype.hasOwnProperty,Tb={current:null},qw={key:!0,ref:!0,__self:!0,__source:!0};function e3(A,D,e){var d,S={},r=null,a=null;if(D!=null)for(d in D.ref!==void 0&&(a=D.ref),D.key!==void 0&&(r=""+D.key),D)Qw.call(D,d)&&!qw.hasOwnProperty(d)&&(S[d]=D[d]);var u=arguments.length-2;if(u===1)S.children=e;else if(1<u){for(var c=Array(u),t=0;t<u;t++)c[t]=arguments[t+2];S.children=c}if(A&&A.defaultProps)for(d in u=A.defaultProps,u)S[d]===void 0&&(S[d]=u[d]);return{$$typeof:Lm,type:A,key:r,ref:a,props:S,_owner:Tb.current}}function dM(A,D){return{$$typeof:Lm,type:A.type,key:D,ref:A.ref,props:A.props,_owner:A._owner}}function Ab(A){return typeof A=="object"&&A!==null&&A.$$typeof===Lm}function mM(A){var D={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(e){return D[e]})}var j2=/\/+/g;function v1(A,D){return typeof A=="object"&&A!==null&&A.key!=null?mM(""+A.key):D.toString(36)}function Cg(A,D,e,d,S){var r=typeof A;(r==="undefined"||r==="boolean")&&(A=null);var a=!1;if(A===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(A.$$typeof){case Lm:case aM:a=!0}}if(a)return a=A,S=S(a),A=d===""?"."+v1(a,0):d,G2(S)?(e="",A!=null&&(e=A.replace(j2,"$&/")+"/"),Cg(S,D,e,"",function(t){return t})):S!=null&&(Ab(S)&&(S=dM(S,e+(!S.key||a&&a.key===S.key?"":(""+S.key).replace(j2,"$&/")+"/")+A)),D.push(S)),1;if(a=0,d=d===""?".":d+":",G2(A))for(var u=0;u<A.length;u++){r=A[u];var c=d+v1(r,u);a+=Cg(r,D,e,c,S)}else if(c=vM(A),typeof c=="function")for(A=c.call(A),u=0;!(r=A.next()).done;)r=r.value,c=d+v1(r,u++),a+=Cg(r,D,e,c,S);else if(r==="object")throw D=String(A),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return a}function lg(A,D,e){if(A==null)return A;var d=[],S=0;return Cg(A,d,"","",function(r){return D.call(e,r,S++)}),d}function gM(A){if(A._status===-1){var D=A._result;D=D(),D.then(function(e){(A._status===0||A._status===-1)&&(A._status=1,A._result=e)},function(e){(A._status===0||A._status===-1)&&(A._status=2,A._result=e)}),A._status===-1&&(A._status=0,A._result=D)}if(A._status===1)return A._result.default;throw A._result}var Au={current:null},Eg={transition:null},yM={ReactCurrentDispatcher:Au,ReactCurrentBatchConfig:Eg,ReactCurrentOwner:Tb};Di.Children={map:lg,forEach:function(A,D,e){lg(A,function(){D.apply(this,arguments)},e)},count:function(A){var D=0;return lg(A,function(){D++}),D},toArray:function(A){return lg(A,function(D){return D})||[]},only:function(A){if(!Ab(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};Di.Component=p0;Di.Fragment=iM;Di.Profiler=sM;Di.PureComponent=_b;Di.StrictMode=oM;Di.Suspense=fM;Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yM;Di.cloneElement=function(A,D,e){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var d=Kw({},A.props),S=A.key,r=A.ref,a=A._owner;if(D!=null){if(D.ref!==void 0&&(r=D.ref,a=Tb.current),D.key!==void 0&&(S=""+D.key),A.type&&A.type.defaultProps)var u=A.type.defaultProps;for(c in D)Qw.call(D,c)&&!qw.hasOwnProperty(c)&&(d[c]=D[c]===void 0&&u!==void 0?u[c]:D[c])}var c=arguments.length-2;if(c===1)d.children=e;else if(1<c){u=Array(c);for(var t=0;t<c;t++)u[t]=arguments[t+2];d.children=u}return{$$typeof:Lm,type:A.type,key:S,ref:r,props:d,_owner:a}};Di.createContext=function(A){return A={$$typeof:uM,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:lM,_context:A},A.Consumer=A};Di.createElement=e3;Di.createFactory=function(A){var D=e3.bind(null,A);return D.type=A,D};Di.createRef=function(){return{current:null}};Di.forwardRef=function(A){return{$$typeof:cM,render:A}};Di.isValidElement=Ab;Di.lazy=function(A){return{$$typeof:pM,_payload:{_status:-1,_result:A},_init:gM}};Di.memo=function(A,D){return{$$typeof:hM,type:A,compare:D===void 0?null:D}};Di.startTransition=function(A){var D=Eg.transition;Eg.transition={};try{A()}finally{Eg.transition=D}};Di.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Di.useCallback=function(A,D){return Au.current.useCallback(A,D)};Di.useContext=function(A){return Au.current.useContext(A)};Di.useDebugValue=function(){};Di.useDeferredValue=function(A){return Au.current.useDeferredValue(A)};Di.useEffect=function(A,D){return Au.current.useEffect(A,D)};Di.useId=function(){return Au.current.useId()};Di.useImperativeHandle=function(A,D,e){return Au.current.useImperativeHandle(A,D,e)};Di.useInsertionEffect=function(A,D){return Au.current.useInsertionEffect(A,D)};Di.useLayoutEffect=function(A,D){return Au.current.useLayoutEffect(A,D)};Di.useMemo=function(A,D){return Au.current.useMemo(A,D)};Di.useReducer=function(A,D,e){return Au.current.useReducer(A,D,e)};Di.useRef=function(A){return Au.current.useRef(A)};Di.useState=function(A){return Au.current.useState(A)};Di.useSyncExternalStore=function(A,D,e){return Au.current.useSyncExternalStore(A,D,e)};Di.useTransition=function(){return Au.current.useTransition()};Di.version="18.2.0";(function(A){A.exports=Di})(Nn);const $l=Xw(Nn.exports);var xy={exports:{}},Ac={},t3={exports:{}},r3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(A){function D(O,N){var G=O.length;O.push(N);e:for(;0<G;){var U=G-1>>>1,Y=O[U];if(0<S(Y,N))O[U]=N,O[G]=Y,G=U;else break e}}function e(O){return O.length===0?null:O[0]}function d(O){if(O.length===0)return null;var N=O[0],G=O.pop();if(G!==N){O[0]=G;e:for(var U=0,Y=O.length,z=Y>>>1;U<z;){var B=2*(U+1)-1,H=O[B],V=B+1,Z=O[V];if(0>S(H,G))V<Y&&0>S(Z,H)?(O[U]=Z,O[V]=G,U=V):(O[U]=H,O[B]=G,U=B);else if(V<Y&&0>S(Z,G))O[U]=Z,O[V]=G,U=V;else break e}}return N}function S(O,N){var G=O.sortIndex-N.sortIndex;return G!==0?G:O.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;A.unstable_now=function(){return r.now()}}else{var a=Date,u=a.now();A.unstable_now=function(){return a.now()-u}}var c=[],t=[],f=1,n=null,o=3,l=!1,h=!1,i=!1,s=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(O){for(var N=e(t);N!==null;){if(N.callback===null)d(t);else if(N.startTime<=O)d(t),N.sortIndex=N.expirationTime,D(c,N);else break;N=e(t)}}function b(O){if(i=!1,m(O),!h)if(e(c)!==null)h=!0,E(y);else{var N=e(t);N!==null&&R(b,N.startTime-O)}}function y(O,N){h=!1,i&&(i=!1,p(g),g=-1),l=!0;var G=o;try{for(m(N),n=e(c);n!==null&&(!(n.expirationTime>N)||O&&!P());){var U=n.callback;if(typeof U=="function"){n.callback=null,o=n.priorityLevel;var Y=U(n.expirationTime<=N);N=A.unstable_now(),typeof Y=="function"?n.callback=Y:n===e(c)&&d(c),m(N)}else d(c);n=e(c)}if(n!==null)var z=!0;else{var B=e(t);B!==null&&R(b,B.startTime-N),z=!1}return z}finally{n=null,o=G,l=!1}}var x=!1,w=null,g=-1,T=5,M=-1;function P(){return!(A.unstable_now()-M<T)}function L(){if(w!==null){var O=A.unstable_now();M=O;var N=!0;try{N=w(!0,O)}finally{N?I():(x=!1,w=null)}}else x=!1}var I;if(typeof v=="function")I=function(){v(L)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,k=C.port2;C.port1.onmessage=L,I=function(){k.postMessage(null)}}else I=function(){s(L,0)};function E(O){w=O,x||(x=!0,I())}function R(O,N){g=s(function(){O(A.unstable_now())},N)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(O){O.callback=null},A.unstable_continueExecution=function(){h||l||(h=!0,E(y))},A.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},A.unstable_getCurrentPriorityLevel=function(){return o},A.unstable_getFirstCallbackNode=function(){return e(c)},A.unstable_next=function(O){switch(o){case 1:case 2:case 3:var N=3;break;default:N=o}var G=o;o=N;try{return O()}finally{o=G}},A.unstable_pauseExecution=function(){},A.unstable_requestPaint=function(){},A.unstable_runWithPriority=function(O,N){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=o;o=O;try{return N()}finally{o=G}},A.unstable_scheduleCallback=function(O,N,G){var U=A.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?U+G:U):G=U,O){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,O={id:f++,callback:N,priorityLevel:O,startTime:G,expirationTime:Y,sortIndex:-1},G>U?(O.sortIndex=G,D(t,O),e(c)===null&&O===e(t)&&(i?(p(g),g=-1):i=!0,R(b,G-U))):(O.sortIndex=Y,D(c,O),h||l||(h=!0,E(y))),O},A.unstable_shouldYield=P,A.unstable_wrapCallback=function(O){var N=o;return function(){var G=o;o=N;try{return O.apply(this,arguments)}finally{o=G}}}})(r3);(function(A){A.exports=r3})(t3);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n3=Nn.exports,Tc=t3.exports;function la(A){for(var D="https://reactjs.org/docs/error-decoder.html?invariant="+A,e=1;e<arguments.length;e++)D+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+A+"; visit "+D+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a3=new Set,fm={};function Kv(A,D){a0(A,D),a0(A+"Capture",D)}function a0(A,D){for(fm[A]=D,A=0;A<D.length;A++)a3.add(D[A])}var ep=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ux=Object.prototype.hasOwnProperty,xM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W2={},Y2={};function bM(A){return ux.call(Y2,A)?!0:ux.call(W2,A)?!1:xM.test(A)?Y2[A]=!0:(W2[A]=!0,!1)}function _M(A,D,e,d){if(e!==null&&e.type===0)return!1;switch(typeof D){case"function":case"symbol":return!0;case"boolean":return d?!1:e!==null?!e.acceptsBooleans:(A=A.toLowerCase().slice(0,5),A!=="data-"&&A!=="aria-");default:return!1}}function wM(A,D,e,d){if(D===null||typeof D>"u"||_M(A,D,e,d))return!0;if(d)return!1;if(e!==null)switch(e.type){case 3:return!D;case 4:return D===!1;case 5:return isNaN(D);case 6:return isNaN(D)||1>D}return!1}function Mu(A,D,e,d,S,r,a){this.acceptsBooleans=D===2||D===3||D===4,this.attributeName=d,this.attributeNamespace=S,this.mustUseProperty=e,this.propertyName=A,this.type=D,this.sanitizeURL=r,this.removeEmptyString=a}var Il={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(A){Il[A]=new Mu(A,0,!1,A,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(A){var D=A[0];Il[D]=new Mu(D,1,!1,A[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(A){Il[A]=new Mu(A,2,!1,A.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(A){Il[A]=new Mu(A,2,!1,A,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(A){Il[A]=new Mu(A,3,!1,A.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(A){Il[A]=new Mu(A,3,!0,A,null,!1,!1)});["capture","download"].forEach(function(A){Il[A]=new Mu(A,4,!1,A,null,!1,!1)});["cols","rows","size","span"].forEach(function(A){Il[A]=new Mu(A,6,!1,A,null,!1,!1)});["rowSpan","start"].forEach(function(A){Il[A]=new Mu(A,5,!1,A.toLowerCase(),null,!1,!1)});var Mb=/[\-:]([a-z])/g;function kb(A){return A[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(A){var D=A.replace(Mb,kb);Il[D]=new Mu(D,1,!1,A,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(A){var D=A.replace(Mb,kb);Il[D]=new Mu(D,1,!1,A,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(A){var D=A.replace(Mb,kb);Il[D]=new Mu(D,1,!1,A,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(A){Il[A]=new Mu(A,1,!1,A.toLowerCase(),null,!1,!1)});Il.xlinkHref=new Mu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(A){Il[A]=new Mu(A,1,!1,A.toLowerCase(),null,!0,!0)});function Sb(A,D,e,d){var S=Il.hasOwnProperty(D)?Il[D]:null;(S!==null?S.type!==0:d||!(2<D.length)||D[0]!=="o"&&D[0]!=="O"||D[1]!=="n"&&D[1]!=="N")&&(wM(D,e,S,d)&&(e=null),d||S===null?bM(D)&&(e===null?A.removeAttribute(D):A.setAttribute(D,""+e)):S.mustUseProperty?A[S.propertyName]=e===null?S.type===3?!1:"":e:(D=S.attributeName,d=S.attributeNamespace,e===null?A.removeAttribute(D):(S=S.type,e=S===3||S===4&&e===!0?"":""+e,d?A.setAttributeNS(d,D,e):A.setAttribute(D,e))))}var ap=n3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ug=Symbol.for("react.element"),Nd=Symbol.for("react.portal"),Bd=Symbol.for("react.fragment"),Cb=Symbol.for("react.strict_mode"),cx=Symbol.for("react.profiler"),i3=Symbol.for("react.provider"),o3=Symbol.for("react.context"),Eb=Symbol.for("react.forward_ref"),fx=Symbol.for("react.suspense"),hx=Symbol.for("react.suspense_list"),Lb=Symbol.for("react.memo"),Np=Symbol.for("react.lazy"),s3=Symbol.for("react.offscreen"),X2=Symbol.iterator;function O0(A){return A===null||typeof A!="object"?null:(A=X2&&A[X2]||A["@@iterator"],typeof A=="function"?A:null)}var is=Object.assign,d1;function X0(A){if(d1===void 0)try{throw Error()}catch(e){var D=e.stack.trim().match(/\n( *(at )?)/);d1=D&&D[1]||""}return`
`+d1+A}var m1=!1;function g1(A,D){if(!A||m1)return"";m1=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(D)if(D=function(){throw Error()},Object.defineProperty(D.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(D,[])}catch(t){var d=t}Reflect.construct(A,[],D)}else{try{D.call()}catch(t){d=t}A.call(D.prototype)}else{try{throw Error()}catch(t){d=t}A()}}catch(t){if(t&&d&&typeof t.stack=="string"){for(var S=t.stack.split(`
`),r=d.stack.split(`
`),a=S.length-1,u=r.length-1;1<=a&&0<=u&&S[a]!==r[u];)u--;for(;1<=a&&0<=u;a--,u--)if(S[a]!==r[u]){if(a!==1||u!==1)do if(a--,u--,0>u||S[a]!==r[u]){var c=`
`+S[a].replace(" at new "," at ");return A.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",A.displayName)),c}while(1<=a&&0<=u);break}}}finally{m1=!1,Error.prepareStackTrace=e}return(A=A?A.displayName||A.name:"")?X0(A):""}function TM(A){switch(A.tag){case 5:return X0(A.type);case 16:return X0("Lazy");case 13:return X0("Suspense");case 19:return X0("SuspenseList");case 0:case 2:case 15:return A=g1(A.type,!1),A;case 11:return A=g1(A.type.render,!1),A;case 1:return A=g1(A.type,!0),A;default:return""}}function px(A){if(A==null)return null;if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case Bd:return"Fragment";case Nd:return"Portal";case cx:return"Profiler";case Cb:return"StrictMode";case fx:return"Suspense";case hx:return"SuspenseList"}if(typeof A=="object")switch(A.$$typeof){case o3:return(A.displayName||"Context")+".Consumer";case i3:return(A._context.displayName||"Context")+".Provider";case Eb:var D=A.render;return A=A.displayName,A||(A=D.displayName||D.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case Lb:return D=A.displayName||null,D!==null?D:px(A.type)||"Memo";case Np:D=A._payload,A=A._init;try{return px(A(D))}catch{}}return null}function AM(A){var D=A.type;switch(A.tag){case 24:return"Cache";case 9:return(D.displayName||"Context")+".Consumer";case 10:return(D._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return A=D.render,A=A.displayName||A.name||"",D.displayName||(A!==""?"ForwardRef("+A+")":"ForwardRef");case 7:return"Fragment";case 5:return D;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return px(D);case 8:return D===Cb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D}return null}function qp(A){switch(typeof A){case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function l3(A){var D=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(D==="checkbox"||D==="radio")}function MM(A){var D=l3(A)?"checked":"value",e=Object.getOwnPropertyDescriptor(A.constructor.prototype,D),d=""+A[D];if(!A.hasOwnProperty(D)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var S=e.get,r=e.set;return Object.defineProperty(A,D,{configurable:!0,get:function(){return S.call(this)},set:function(a){d=""+a,r.call(this,a)}}),Object.defineProperty(A,D,{enumerable:e.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){A._valueTracker=null,delete A[D]}}}}function cg(A){A._valueTracker||(A._valueTracker=MM(A))}function u3(A){if(!A)return!1;var D=A._valueTracker;if(!D)return!0;var e=D.getValue(),d="";return A&&(d=l3(A)?A.checked?"true":"false":A.value),A=d,A!==e?(D.setValue(A),!0):!1}function Wg(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}function vx(A,D){var e=D.checked;return is({},D,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e!=null?e:A._wrapperState.initialChecked})}function Z2(A,D){var e=D.defaultValue==null?"":D.defaultValue,d=D.checked!=null?D.checked:D.defaultChecked;e=qp(D.value!=null?D.value:e),A._wrapperState={initialChecked:d,initialValue:e,controlled:D.type==="checkbox"||D.type==="radio"?D.checked!=null:D.value!=null}}function c3(A,D){D=D.checked,D!=null&&Sb(A,"checked",D,!1)}function dx(A,D){c3(A,D);var e=qp(D.value),d=D.type;if(e!=null)d==="number"?(e===0&&A.value===""||A.value!=e)&&(A.value=""+e):A.value!==""+e&&(A.value=""+e);else if(d==="submit"||d==="reset"){A.removeAttribute("value");return}D.hasOwnProperty("value")?mx(A,D.type,e):D.hasOwnProperty("defaultValue")&&mx(A,D.type,qp(D.defaultValue)),D.checked==null&&D.defaultChecked!=null&&(A.defaultChecked=!!D.defaultChecked)}function K2(A,D,e){if(D.hasOwnProperty("value")||D.hasOwnProperty("defaultValue")){var d=D.type;if(!(d!=="submit"&&d!=="reset"||D.value!==void 0&&D.value!==null))return;D=""+A._wrapperState.initialValue,e||D===A.value||(A.value=D),A.defaultValue=D}e=A.name,e!==""&&(A.name=""),A.defaultChecked=!!A._wrapperState.initialChecked,e!==""&&(A.name=e)}function mx(A,D,e){(D!=="number"||Wg(A.ownerDocument)!==A)&&(e==null?A.defaultValue=""+A._wrapperState.initialValue:A.defaultValue!==""+e&&(A.defaultValue=""+e))}var Z0=Array.isArray;function Qd(A,D,e,d){if(A=A.options,D){D={};for(var S=0;S<e.length;S++)D["$"+e[S]]=!0;for(e=0;e<A.length;e++)S=D.hasOwnProperty("$"+A[e].value),A[e].selected!==S&&(A[e].selected=S),S&&d&&(A[e].defaultSelected=!0)}else{for(e=""+qp(e),D=null,S=0;S<A.length;S++){if(A[S].value===e){A[S].selected=!0,d&&(A[S].defaultSelected=!0);return}D!==null||A[S].disabled||(D=A[S])}D!==null&&(D.selected=!0)}}function gx(A,D){if(D.dangerouslySetInnerHTML!=null)throw Error(la(91));return is({},D,{value:void 0,defaultValue:void 0,children:""+A._wrapperState.initialValue})}function J2(A,D){var e=D.value;if(e==null){if(e=D.children,D=D.defaultValue,e!=null){if(D!=null)throw Error(la(92));if(Z0(e)){if(1<e.length)throw Error(la(93));e=e[0]}D=e}D==null&&(D=""),e=D}A._wrapperState={initialValue:qp(e)}}function f3(A,D){var e=qp(D.value),d=qp(D.defaultValue);e!=null&&(e=""+e,e!==A.value&&(A.value=e),D.defaultValue==null&&A.defaultValue!==e&&(A.defaultValue=e)),d!=null&&(A.defaultValue=""+d)}function $2(A){var D=A.textContent;D===A._wrapperState.initialValue&&D!==""&&D!==null&&(A.value=D)}function h3(A){switch(A){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yx(A,D){return A==null||A==="http://www.w3.org/1999/xhtml"?h3(D):A==="http://www.w3.org/2000/svg"&&D==="foreignObject"?"http://www.w3.org/1999/xhtml":A}var fg,p3=function(A){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(D,e,d,S){MSApp.execUnsafeLocalFunction(function(){return A(D,e,d,S)})}:A}(function(A,D){if(A.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in A)A.innerHTML=D;else{for(fg=fg||document.createElement("div"),fg.innerHTML="<svg>"+D.valueOf().toString()+"</svg>",D=fg.firstChild;A.firstChild;)A.removeChild(A.firstChild);for(;D.firstChild;)A.appendChild(D.firstChild)}});function hm(A,D){if(D){var e=A.firstChild;if(e&&e===A.lastChild&&e.nodeType===3){e.nodeValue=D;return}}A.textContent=D}var em={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kM=["Webkit","ms","Moz","O"];Object.keys(em).forEach(function(A){kM.forEach(function(D){D=D+A.charAt(0).toUpperCase()+A.substring(1),em[D]=em[A]})});function v3(A,D,e){return D==null||typeof D=="boolean"||D===""?"":e||typeof D!="number"||D===0||em.hasOwnProperty(A)&&em[A]?(""+D).trim():D+"px"}function d3(A,D){A=A.style;for(var e in D)if(D.hasOwnProperty(e)){var d=e.indexOf("--")===0,S=v3(e,D[e],d);e==="float"&&(e="cssFloat"),d?A.setProperty(e,S):A[e]=S}}var SM=is({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xx(A,D){if(D){if(SM[A]&&(D.children!=null||D.dangerouslySetInnerHTML!=null))throw Error(la(137,A));if(D.dangerouslySetInnerHTML!=null){if(D.children!=null)throw Error(la(60));if(typeof D.dangerouslySetInnerHTML!="object"||!("__html"in D.dangerouslySetInnerHTML))throw Error(la(61))}if(D.style!=null&&typeof D.style!="object")throw Error(la(62))}}function bx(A,D){if(A.indexOf("-")===-1)return typeof D.is=="string";switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _x=null;function Pb(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var wx=null,qd=null,e0=null;function Q2(A){if(A=Dm(A)){if(typeof wx!="function")throw Error(la(280));var D=A.stateNode;D&&(D=Ay(D),wx(A.stateNode,A.type,D))}}function m3(A){qd?e0?e0.push(A):e0=[A]:qd=A}function g3(){if(qd){var A=qd,D=e0;if(e0=qd=null,Q2(A),D)for(A=0;A<D.length;A++)Q2(D[A])}}function y3(A,D){return A(D)}function x3(){}var y1=!1;function b3(A,D,e){if(y1)return A(D,e);y1=!0;try{return y3(A,D,e)}finally{y1=!1,(qd!==null||e0!==null)&&(x3(),g3())}}function pm(A,D){var e=A.stateNode;if(e===null)return null;var d=Ay(e);if(d===null)return null;e=d[D];e:switch(D){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(A=A.type,d=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!d;break e;default:A=!1}if(A)return null;if(e&&typeof e!="function")throw Error(la(231,D,typeof e));return e}var Tx=!1;if(ep)try{var N0={};Object.defineProperty(N0,"passive",{get:function(){Tx=!0}}),window.addEventListener("test",N0,N0),window.removeEventListener("test",N0,N0)}catch{Tx=!1}function CM(A,D,e,d,S,r,a,u,c){var t=Array.prototype.slice.call(arguments,3);try{D.apply(e,t)}catch(f){this.onError(f)}}var tm=!1,Yg=null,Xg=!1,Ax=null,EM={onError:function(A){tm=!0,Yg=A}};function LM(A,D,e,d,S,r,a,u,c){tm=!1,Yg=null,CM.apply(EM,arguments)}function PM(A,D,e,d,S,r,a,u,c){if(LM.apply(this,arguments),tm){if(tm){var t=Yg;tm=!1,Yg=null}else throw Error(la(198));Xg||(Xg=!0,Ax=t)}}function Jv(A){var D=A,e=A;if(A.alternate)for(;D.return;)D=D.return;else{A=D;do D=A,(D.flags&4098)!==0&&(e=D.return),A=D.return;while(A)}return D.tag===3?e:null}function _3(A){if(A.tag===13){var D=A.memoizedState;if(D===null&&(A=A.alternate,A!==null&&(D=A.memoizedState)),D!==null)return D.dehydrated}return null}function q2(A){if(Jv(A)!==A)throw Error(la(188))}function RM(A){var D=A.alternate;if(!D){if(D=Jv(A),D===null)throw Error(la(188));return D!==A?null:A}for(var e=A,d=D;;){var S=e.return;if(S===null)break;var r=S.alternate;if(r===null){if(d=S.return,d!==null){e=d;continue}break}if(S.child===r.child){for(r=S.child;r;){if(r===e)return q2(S),A;if(r===d)return q2(S),D;r=r.sibling}throw Error(la(188))}if(e.return!==d.return)e=S,d=r;else{for(var a=!1,u=S.child;u;){if(u===e){a=!0,e=S,d=r;break}if(u===d){a=!0,d=S,e=r;break}u=u.sibling}if(!a){for(u=r.child;u;){if(u===e){a=!0,e=r,d=S;break}if(u===d){a=!0,d=r,e=S;break}u=u.sibling}if(!a)throw Error(la(189))}}if(e.alternate!==d)throw Error(la(190))}if(e.tag!==3)throw Error(la(188));return e.stateNode.current===e?A:D}function w3(A){return A=RM(A),A!==null?T3(A):null}function T3(A){if(A.tag===5||A.tag===6)return A;for(A=A.child;A!==null;){var D=T3(A);if(D!==null)return D;A=A.sibling}return null}var A3=Tc.unstable_scheduleCallback,e_=Tc.unstable_cancelCallback,DM=Tc.unstable_shouldYield,IM=Tc.unstable_requestPaint,ks=Tc.unstable_now,zM=Tc.unstable_getCurrentPriorityLevel,Rb=Tc.unstable_ImmediatePriority,M3=Tc.unstable_UserBlockingPriority,Zg=Tc.unstable_NormalPriority,FM=Tc.unstable_LowPriority,k3=Tc.unstable_IdlePriority,by=null,yh=null;function OM(A){if(yh&&typeof yh.onCommitFiberRoot=="function")try{yh.onCommitFiberRoot(by,A,void 0,(A.current.flags&128)===128)}catch{}}var Uf=Math.clz32?Math.clz32:UM,NM=Math.log,BM=Math.LN2;function UM(A){return A>>>=0,A===0?32:31-(NM(A)/BM|0)|0}var hg=64,pg=4194304;function K0(A){switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return A&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return A}}function Kg(A,D){var e=A.pendingLanes;if(e===0)return 0;var d=0,S=A.suspendedLanes,r=A.pingedLanes,a=e&268435455;if(a!==0){var u=a&~S;u!==0?d=K0(u):(r&=a,r!==0&&(d=K0(r)))}else a=e&~S,a!==0?d=K0(a):r!==0&&(d=K0(r));if(d===0)return 0;if(D!==0&&D!==d&&(D&S)===0&&(S=d&-d,r=D&-D,S>=r||S===16&&(r&4194240)!==0))return D;if((d&4)!==0&&(d|=e&16),D=A.entangledLanes,D!==0)for(A=A.entanglements,D&=d;0<D;)e=31-Uf(D),S=1<<e,d|=A[e],D&=~S;return d}function VM(A,D){switch(A){case 1:case 2:case 4:return D+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return D+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HM(A,D){for(var e=A.suspendedLanes,d=A.pingedLanes,S=A.expirationTimes,r=A.pendingLanes;0<r;){var a=31-Uf(r),u=1<<a,c=S[a];c===-1?((u&e)===0||(u&d)!==0)&&(S[a]=VM(u,D)):c<=D&&(A.expiredLanes|=u),r&=~u}}function Mx(A){return A=A.pendingLanes&-1073741825,A!==0?A:A&1073741824?1073741824:0}function S3(){var A=hg;return hg<<=1,(hg&4194240)===0&&(hg=64),A}function x1(A){for(var D=[],e=0;31>e;e++)D.push(A);return D}function Pm(A,D,e){A.pendingLanes|=D,D!==536870912&&(A.suspendedLanes=0,A.pingedLanes=0),A=A.eventTimes,D=31-Uf(D),A[D]=e}function GM(A,D){var e=A.pendingLanes&~D;A.pendingLanes=D,A.suspendedLanes=0,A.pingedLanes=0,A.expiredLanes&=D,A.mutableReadLanes&=D,A.entangledLanes&=D,D=A.entanglements;var d=A.eventTimes;for(A=A.expirationTimes;0<e;){var S=31-Uf(e),r=1<<S;D[S]=0,d[S]=-1,A[S]=-1,e&=~r}}function Db(A,D){var e=A.entangledLanes|=D;for(A=A.entanglements;e;){var d=31-Uf(e),S=1<<d;S&D|A[d]&D&&(A[d]|=D),e&=~S}}var lo=0;function C3(A){return A&=-A,1<A?4<A?(A&268435455)!==0?16:536870912:4:1}var E3,Ib,L3,P3,R3,kx=!1,vg=[],jp=null,Wp=null,Yp=null,vm=new Map,dm=new Map,Up=[],jM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t_(A,D){switch(A){case"focusin":case"focusout":jp=null;break;case"dragenter":case"dragleave":Wp=null;break;case"mouseover":case"mouseout":Yp=null;break;case"pointerover":case"pointerout":vm.delete(D.pointerId);break;case"gotpointercapture":case"lostpointercapture":dm.delete(D.pointerId)}}function B0(A,D,e,d,S,r){return A===null||A.nativeEvent!==r?(A={blockedOn:D,domEventName:e,eventSystemFlags:d,nativeEvent:r,targetContainers:[S]},D!==null&&(D=Dm(D),D!==null&&Ib(D)),A):(A.eventSystemFlags|=d,D=A.targetContainers,S!==null&&D.indexOf(S)===-1&&D.push(S),A)}function WM(A,D,e,d,S){switch(D){case"focusin":return jp=B0(jp,A,D,e,d,S),!0;case"dragenter":return Wp=B0(Wp,A,D,e,d,S),!0;case"mouseover":return Yp=B0(Yp,A,D,e,d,S),!0;case"pointerover":var r=S.pointerId;return vm.set(r,B0(vm.get(r)||null,A,D,e,d,S)),!0;case"gotpointercapture":return r=S.pointerId,dm.set(r,B0(dm.get(r)||null,A,D,e,d,S)),!0}return!1}function D3(A){var D=Iv(A.target);if(D!==null){var e=Jv(D);if(e!==null){if(D=e.tag,D===13){if(D=_3(e),D!==null){A.blockedOn=D,R3(A.priority,function(){L3(e)});return}}else if(D===3&&e.stateNode.current.memoizedState.isDehydrated){A.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Lg(A){if(A.blockedOn!==null)return!1;for(var D=A.targetContainers;0<D.length;){var e=Sx(A.domEventName,A.eventSystemFlags,D[0],A.nativeEvent);if(e===null){e=A.nativeEvent;var d=new e.constructor(e.type,e);_x=d,e.target.dispatchEvent(d),_x=null}else return D=Dm(e),D!==null&&Ib(D),A.blockedOn=e,!1;D.shift()}return!0}function r_(A,D,e){Lg(A)&&e.delete(D)}function YM(){kx=!1,jp!==null&&Lg(jp)&&(jp=null),Wp!==null&&Lg(Wp)&&(Wp=null),Yp!==null&&Lg(Yp)&&(Yp=null),vm.forEach(r_),dm.forEach(r_)}function U0(A,D){A.blockedOn===D&&(A.blockedOn=null,kx||(kx=!0,Tc.unstable_scheduleCallback(Tc.unstable_NormalPriority,YM)))}function mm(A){function D(S){return U0(S,A)}if(0<vg.length){U0(vg[0],A);for(var e=1;e<vg.length;e++){var d=vg[e];d.blockedOn===A&&(d.blockedOn=null)}}for(jp!==null&&U0(jp,A),Wp!==null&&U0(Wp,A),Yp!==null&&U0(Yp,A),vm.forEach(D),dm.forEach(D),e=0;e<Up.length;e++)d=Up[e],d.blockedOn===A&&(d.blockedOn=null);for(;0<Up.length&&(e=Up[0],e.blockedOn===null);)D3(e),e.blockedOn===null&&Up.shift()}var t0=ap.ReactCurrentBatchConfig,Jg=!0;function XM(A,D,e,d){var S=lo,r=t0.transition;t0.transition=null;try{lo=1,zb(A,D,e,d)}finally{lo=S,t0.transition=r}}function ZM(A,D,e,d){var S=lo,r=t0.transition;t0.transition=null;try{lo=4,zb(A,D,e,d)}finally{lo=S,t0.transition=r}}function zb(A,D,e,d){if(Jg){var S=Sx(A,D,e,d);if(S===null)E1(A,D,d,$g,e),t_(A,d);else if(WM(S,A,D,e,d))d.stopPropagation();else if(t_(A,d),D&4&&-1<jM.indexOf(A)){for(;S!==null;){var r=Dm(S);if(r!==null&&E3(r),r=Sx(A,D,e,d),r===null&&E1(A,D,d,$g,e),r===S)break;S=r}S!==null&&d.stopPropagation()}else E1(A,D,d,null,e)}}var $g=null;function Sx(A,D,e,d){if($g=null,A=Pb(d),A=Iv(A),A!==null)if(D=Jv(A),D===null)A=null;else if(e=D.tag,e===13){if(A=_3(D),A!==null)return A;A=null}else if(e===3){if(D.stateNode.current.memoizedState.isDehydrated)return D.tag===3?D.stateNode.containerInfo:null;A=null}else D!==A&&(A=null);return $g=A,null}function I3(A){switch(A){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zM()){case Rb:return 1;case M3:return 4;case Zg:case FM:return 16;case k3:return 536870912;default:return 16}default:return 16}}var Hp=null,Fb=null,Pg=null;function z3(){if(Pg)return Pg;var A,D=Fb,e=D.length,d,S="value"in Hp?Hp.value:Hp.textContent,r=S.length;for(A=0;A<e&&D[A]===S[A];A++);var a=e-A;for(d=1;d<=a&&D[e-d]===S[r-d];d++);return Pg=S.slice(A,1<d?1-d:void 0)}function Rg(A){var D=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&D===13&&(A=13)):A=D,A===10&&(A=13),32<=A||A===13?A:0}function dg(){return!0}function n_(){return!1}function Mc(A){function D(e,d,S,r,a){this._reactName=e,this._targetInst=S,this.type=d,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var u in A)A.hasOwnProperty(u)&&(e=A[u],this[u]=e?e(r):r[u]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?dg:n_,this.isPropagationStopped=n_,this}return is(D.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=dg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=dg)},persist:function(){},isPersistent:dg}),D}var v0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ob=Mc(v0),Rm=is({},v0,{view:0,detail:0}),KM=Mc(Rm),b1,_1,V0,_y=is({},Rm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nb,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==V0&&(V0&&A.type==="mousemove"?(b1=A.screenX-V0.screenX,_1=A.screenY-V0.screenY):_1=b1=0,V0=A),b1)},movementY:function(A){return"movementY"in A?A.movementY:_1}}),a_=Mc(_y),JM=is({},_y,{dataTransfer:0}),$M=Mc(JM),QM=is({},Rm,{relatedTarget:0}),w1=Mc(QM),qM=is({},v0,{animationName:0,elapsedTime:0,pseudoElement:0}),ek=Mc(qM),tk=is({},v0,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),rk=Mc(tk),nk=is({},v0,{data:0}),i_=Mc(nk),ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ok={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sk(A){var D=this.nativeEvent;return D.getModifierState?D.getModifierState(A):(A=ok[A])?!!D[A]:!1}function Nb(){return sk}var lk=is({},Rm,{key:function(A){if(A.key){var D=ak[A.key]||A.key;if(D!=="Unidentified")return D}return A.type==="keypress"?(A=Rg(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?ik[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nb,charCode:function(A){return A.type==="keypress"?Rg(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Rg(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),uk=Mc(lk),ck=is({},_y,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o_=Mc(ck),fk=is({},Rm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nb}),hk=Mc(fk),pk=is({},v0,{propertyName:0,elapsedTime:0,pseudoElement:0}),vk=Mc(pk),dk=is({},_y,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),mk=Mc(dk),gk=[9,13,27,32],Bb=ep&&"CompositionEvent"in window,rm=null;ep&&"documentMode"in document&&(rm=document.documentMode);var yk=ep&&"TextEvent"in window&&!rm,F3=ep&&(!Bb||rm&&8<rm&&11>=rm),s_=String.fromCharCode(32),l_=!1;function O3(A,D){switch(A){case"keyup":return gk.indexOf(D.keyCode)!==-1;case"keydown":return D.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N3(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Ud=!1;function xk(A,D){switch(A){case"compositionend":return N3(D);case"keypress":return D.which!==32?null:(l_=!0,s_);case"textInput":return A=D.data,A===s_&&l_?null:A;default:return null}}function bk(A,D){if(Ud)return A==="compositionend"||!Bb&&O3(A,D)?(A=z3(),Pg=Fb=Hp=null,Ud=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(D.ctrlKey||D.altKey||D.metaKey)||D.ctrlKey&&D.altKey){if(D.char&&1<D.char.length)return D.char;if(D.which)return String.fromCharCode(D.which)}return null;case"compositionend":return F3&&D.locale!=="ko"?null:D.data;default:return null}}var _k={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u_(A){var D=A&&A.nodeName&&A.nodeName.toLowerCase();return D==="input"?!!_k[A.type]:D==="textarea"}function B3(A,D,e,d){m3(d),D=Qg(D,"onChange"),0<D.length&&(e=new Ob("onChange","change",null,e,d),A.push({event:e,listeners:D}))}var nm=null,gm=null;function wk(A){J3(A,0)}function wy(A){var D=Gd(A);if(u3(D))return A}function Tk(A,D){if(A==="change")return D}var U3=!1;if(ep){var T1;if(ep){var A1="oninput"in document;if(!A1){var c_=document.createElement("div");c_.setAttribute("oninput","return;"),A1=typeof c_.oninput=="function"}T1=A1}else T1=!1;U3=T1&&(!document.documentMode||9<document.documentMode)}function f_(){nm&&(nm.detachEvent("onpropertychange",V3),gm=nm=null)}function V3(A){if(A.propertyName==="value"&&wy(gm)){var D=[];B3(D,gm,A,Pb(A)),b3(wk,D)}}function Ak(A,D,e){A==="focusin"?(f_(),nm=D,gm=e,nm.attachEvent("onpropertychange",V3)):A==="focusout"&&f_()}function Mk(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return wy(gm)}function kk(A,D){if(A==="click")return wy(D)}function Sk(A,D){if(A==="input"||A==="change")return wy(D)}function Ck(A,D){return A===D&&(A!==0||1/A===1/D)||A!==A&&D!==D}var Hf=typeof Object.is=="function"?Object.is:Ck;function ym(A,D){if(Hf(A,D))return!0;if(typeof A!="object"||A===null||typeof D!="object"||D===null)return!1;var e=Object.keys(A),d=Object.keys(D);if(e.length!==d.length)return!1;for(d=0;d<e.length;d++){var S=e[d];if(!ux.call(D,S)||!Hf(A[S],D[S]))return!1}return!0}function h_(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function p_(A,D){var e=h_(A);A=0;for(var d;e;){if(e.nodeType===3){if(d=A+e.textContent.length,A<=D&&d>=D)return{node:e,offset:D-A};A=d}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=h_(e)}}function H3(A,D){return A&&D?A===D?!0:A&&A.nodeType===3?!1:D&&D.nodeType===3?H3(A,D.parentNode):"contains"in A?A.contains(D):A.compareDocumentPosition?!!(A.compareDocumentPosition(D)&16):!1:!1}function G3(){for(var A=window,D=Wg();D instanceof A.HTMLIFrameElement;){try{var e=typeof D.contentWindow.location.href=="string"}catch{e=!1}if(e)A=D.contentWindow;else break;D=Wg(A.document)}return D}function Ub(A){var D=A&&A.nodeName&&A.nodeName.toLowerCase();return D&&(D==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||D==="textarea"||A.contentEditable==="true")}function Ek(A){var D=G3(),e=A.focusedElem,d=A.selectionRange;if(D!==e&&e&&e.ownerDocument&&H3(e.ownerDocument.documentElement,e)){if(d!==null&&Ub(e)){if(D=d.start,A=d.end,A===void 0&&(A=D),"selectionStart"in e)e.selectionStart=D,e.selectionEnd=Math.min(A,e.value.length);else if(A=(D=e.ownerDocument||document)&&D.defaultView||window,A.getSelection){A=A.getSelection();var S=e.textContent.length,r=Math.min(d.start,S);d=d.end===void 0?r:Math.min(d.end,S),!A.extend&&r>d&&(S=d,d=r,r=S),S=p_(e,r);var a=p_(e,d);S&&a&&(A.rangeCount!==1||A.anchorNode!==S.node||A.anchorOffset!==S.offset||A.focusNode!==a.node||A.focusOffset!==a.offset)&&(D=D.createRange(),D.setStart(S.node,S.offset),A.removeAllRanges(),r>d?(A.addRange(D),A.extend(a.node,a.offset)):(D.setEnd(a.node,a.offset),A.addRange(D)))}}for(D=[],A=e;A=A.parentNode;)A.nodeType===1&&D.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<D.length;e++)A=D[e],A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}var Lk=ep&&"documentMode"in document&&11>=document.documentMode,Vd=null,Cx=null,am=null,Ex=!1;function v_(A,D,e){var d=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Ex||Vd==null||Vd!==Wg(d)||(d=Vd,"selectionStart"in d&&Ub(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),am&&ym(am,d)||(am=d,d=Qg(Cx,"onSelect"),0<d.length&&(D=new Ob("onSelect","select",null,D,e),A.push({event:D,listeners:d}),D.target=Vd)))}function mg(A,D){var e={};return e[A.toLowerCase()]=D.toLowerCase(),e["Webkit"+A]="webkit"+D,e["Moz"+A]="moz"+D,e}var Hd={animationend:mg("Animation","AnimationEnd"),animationiteration:mg("Animation","AnimationIteration"),animationstart:mg("Animation","AnimationStart"),transitionend:mg("Transition","TransitionEnd")},M1={},j3={};ep&&(j3=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function Ty(A){if(M1[A])return M1[A];if(!Hd[A])return A;var D=Hd[A],e;for(e in D)if(D.hasOwnProperty(e)&&e in j3)return M1[A]=D[e];return A}var W3=Ty("animationend"),Y3=Ty("animationiteration"),X3=Ty("animationstart"),Z3=Ty("transitionend"),K3=new Map,d_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rv(A,D){K3.set(A,D),Kv(D,[A])}for(var k1=0;k1<d_.length;k1++){var S1=d_[k1],Pk=S1.toLowerCase(),Rk=S1[0].toUpperCase()+S1.slice(1);rv(Pk,"on"+Rk)}rv(W3,"onAnimationEnd");rv(Y3,"onAnimationIteration");rv(X3,"onAnimationStart");rv("dblclick","onDoubleClick");rv("focusin","onFocus");rv("focusout","onBlur");rv(Z3,"onTransitionEnd");a0("onMouseEnter",["mouseout","mouseover"]);a0("onMouseLeave",["mouseout","mouseover"]);a0("onPointerEnter",["pointerout","pointerover"]);a0("onPointerLeave",["pointerout","pointerover"]);Kv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kv("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var J0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("cancel close invalid load scroll toggle".split(" ").concat(J0));function m_(A,D,e){var d=A.type||"unknown-event";A.currentTarget=e,PM(d,D,void 0,A),A.currentTarget=null}function J3(A,D){D=(D&4)!==0;for(var e=0;e<A.length;e++){var d=A[e],S=d.event;d=d.listeners;e:{var r=void 0;if(D)for(var a=d.length-1;0<=a;a--){var u=d[a],c=u.instance,t=u.currentTarget;if(u=u.listener,c!==r&&S.isPropagationStopped())break e;m_(S,u,t),r=c}else for(a=0;a<d.length;a++){if(u=d[a],c=u.instance,t=u.currentTarget,u=u.listener,c!==r&&S.isPropagationStopped())break e;m_(S,u,t),r=c}}}if(Xg)throw A=Ax,Xg=!1,Ax=null,A}function zo(A,D){var e=D[Ix];e===void 0&&(e=D[Ix]=new Set);var d=A+"__bubble";e.has(d)||($3(D,A,2,!1),e.add(d))}function C1(A,D,e){var d=0;D&&(d|=4),$3(e,A,d,D)}var gg="_reactListening"+Math.random().toString(36).slice(2);function xm(A){if(!A[gg]){A[gg]=!0,a3.forEach(function(e){e!=="selectionchange"&&(Dk.has(e)||C1(e,!1,A),C1(e,!0,A))});var D=A.nodeType===9?A:A.ownerDocument;D===null||D[gg]||(D[gg]=!0,C1("selectionchange",!1,D))}}function $3(A,D,e,d){switch(I3(D)){case 1:var S=XM;break;case 4:S=ZM;break;default:S=zb}e=S.bind(null,D,e,A),S=void 0,!Tx||D!=="touchstart"&&D!=="touchmove"&&D!=="wheel"||(S=!0),d?S!==void 0?A.addEventListener(D,e,{capture:!0,passive:S}):A.addEventListener(D,e,!0):S!==void 0?A.addEventListener(D,e,{passive:S}):A.addEventListener(D,e,!1)}function E1(A,D,e,d,S){var r=d;if((D&1)===0&&(D&2)===0&&d!==null)e:for(;;){if(d===null)return;var a=d.tag;if(a===3||a===4){var u=d.stateNode.containerInfo;if(u===S||u.nodeType===8&&u.parentNode===S)break;if(a===4)for(a=d.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===S||c.nodeType===8&&c.parentNode===S))return;a=a.return}for(;u!==null;){if(a=Iv(u),a===null)return;if(c=a.tag,c===5||c===6){d=r=a;continue e}u=u.parentNode}}d=d.return}b3(function(){var t=r,f=Pb(e),n=[];e:{var o=K3.get(A);if(o!==void 0){var l=Ob,h=A;switch(A){case"keypress":if(Rg(e)===0)break e;case"keydown":case"keyup":l=uk;break;case"focusin":h="focus",l=w1;break;case"focusout":h="blur",l=w1;break;case"beforeblur":case"afterblur":l=w1;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=$M;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=hk;break;case W3:case Y3:case X3:l=ek;break;case Z3:l=vk;break;case"scroll":l=KM;break;case"wheel":l=mk;break;case"copy":case"cut":case"paste":l=rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=o_}var i=(D&4)!==0,s=!i&&A==="scroll",p=i?o!==null?o+"Capture":null:o;i=[];for(var v=t,m;v!==null;){m=v;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,p!==null&&(b=pm(v,p),b!=null&&i.push(bm(v,b,m)))),s)break;v=v.return}0<i.length&&(o=new l(o,h,null,e,f),n.push({event:o,listeners:i}))}}if((D&7)===0){e:{if(o=A==="mouseover"||A==="pointerover",l=A==="mouseout"||A==="pointerout",o&&e!==_x&&(h=e.relatedTarget||e.fromElement)&&(Iv(h)||h[tp]))break e;if((l||o)&&(o=f.window===f?f:(o=f.ownerDocument)?o.defaultView||o.parentWindow:window,l?(h=e.relatedTarget||e.toElement,l=t,h=h?Iv(h):null,h!==null&&(s=Jv(h),h!==s||h.tag!==5&&h.tag!==6)&&(h=null)):(l=null,h=t),l!==h)){if(i=a_,b="onMouseLeave",p="onMouseEnter",v="mouse",(A==="pointerout"||A==="pointerover")&&(i=o_,b="onPointerLeave",p="onPointerEnter",v="pointer"),s=l==null?o:Gd(l),m=h==null?o:Gd(h),o=new i(b,v+"leave",l,e,f),o.target=s,o.relatedTarget=m,b=null,Iv(f)===t&&(i=new i(p,v+"enter",h,e,f),i.target=m,i.relatedTarget=s,b=i),s=b,l&&h)t:{for(i=l,p=h,v=0,m=i;m;m=Id(m))v++;for(m=0,b=p;b;b=Id(b))m++;for(;0<v-m;)i=Id(i),v--;for(;0<m-v;)p=Id(p),m--;for(;v--;){if(i===p||p!==null&&i===p.alternate)break t;i=Id(i),p=Id(p)}i=null}else i=null;l!==null&&g_(n,o,l,i,!1),h!==null&&s!==null&&g_(n,s,h,i,!0)}}e:{if(o=t?Gd(t):window,l=o.nodeName&&o.nodeName.toLowerCase(),l==="select"||l==="input"&&o.type==="file")var y=Tk;else if(u_(o))if(U3)y=Sk;else{y=Mk;var x=Ak}else(l=o.nodeName)&&l.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(y=kk);if(y&&(y=y(A,t))){B3(n,y,e,f);break e}x&&x(A,o,t),A==="focusout"&&(x=o._wrapperState)&&x.controlled&&o.type==="number"&&mx(o,"number",o.value)}switch(x=t?Gd(t):window,A){case"focusin":(u_(x)||x.contentEditable==="true")&&(Vd=x,Cx=t,am=null);break;case"focusout":am=Cx=Vd=null;break;case"mousedown":Ex=!0;break;case"contextmenu":case"mouseup":case"dragend":Ex=!1,v_(n,e,f);break;case"selectionchange":if(Lk)break;case"keydown":case"keyup":v_(n,e,f)}var w;if(Bb)e:{switch(A){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ud?O3(A,e)&&(g="onCompositionEnd"):A==="keydown"&&e.keyCode===229&&(g="onCompositionStart");g&&(F3&&e.locale!=="ko"&&(Ud||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ud&&(w=z3()):(Hp=f,Fb="value"in Hp?Hp.value:Hp.textContent,Ud=!0)),x=Qg(t,g),0<x.length&&(g=new i_(g,A,null,e,f),n.push({event:g,listeners:x}),w?g.data=w:(w=N3(e),w!==null&&(g.data=w)))),(w=yk?xk(A,e):bk(A,e))&&(t=Qg(t,"onBeforeInput"),0<t.length&&(f=new i_("onBeforeInput","beforeinput",null,e,f),n.push({event:f,listeners:t}),f.data=w))}J3(n,D)})}function bm(A,D,e){return{instance:A,listener:D,currentTarget:e}}function Qg(A,D){for(var e=D+"Capture",d=[];A!==null;){var S=A,r=S.stateNode;S.tag===5&&r!==null&&(S=r,r=pm(A,e),r!=null&&d.unshift(bm(A,r,S)),r=pm(A,D),r!=null&&d.push(bm(A,r,S))),A=A.return}return d}function Id(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5);return A||null}function g_(A,D,e,d,S){for(var r=D._reactName,a=[];e!==null&&e!==d;){var u=e,c=u.alternate,t=u.stateNode;if(c!==null&&c===d)break;u.tag===5&&t!==null&&(u=t,S?(c=pm(e,r),c!=null&&a.unshift(bm(e,c,u))):S||(c=pm(e,r),c!=null&&a.push(bm(e,c,u)))),e=e.return}a.length!==0&&A.push({event:D,listeners:a})}var Ik=/\r\n?/g,zk=/\u0000|\uFFFD/g;function y_(A){return(typeof A=="string"?A:""+A).replace(Ik,`
`).replace(zk,"")}function yg(A,D,e){if(D=y_(D),y_(A)!==D&&e)throw Error(la(425))}function qg(){}var Lx=null,Px=null;function Rx(A,D){return A==="textarea"||A==="noscript"||typeof D.children=="string"||typeof D.children=="number"||typeof D.dangerouslySetInnerHTML=="object"&&D.dangerouslySetInnerHTML!==null&&D.dangerouslySetInnerHTML.__html!=null}var Dx=typeof setTimeout=="function"?setTimeout:void 0,Fk=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(A){return x_.resolve(null).then(A).catch(Nk)}:Dx;function Nk(A){setTimeout(function(){throw A})}function L1(A,D){var e=D,d=0;do{var S=e.nextSibling;if(A.removeChild(e),S&&S.nodeType===8)if(e=S.data,e==="/$"){if(d===0){A.removeChild(S),mm(D);return}d--}else e!=="$"&&e!=="$?"&&e!=="$!"||d++;e=S}while(e);mm(D)}function Xp(A){for(;A!=null;A=A.nextSibling){var D=A.nodeType;if(D===1||D===3)break;if(D===8){if(D=A.data,D==="$"||D==="$!"||D==="$?")break;if(D==="/$")return null}}return A}function b_(A){A=A.previousSibling;for(var D=0;A;){if(A.nodeType===8){var e=A.data;if(e==="$"||e==="$!"||e==="$?"){if(D===0)return A;D--}else e==="/$"&&D++}A=A.previousSibling}return null}var d0=Math.random().toString(36).slice(2),vh="__reactFiber$"+d0,_m="__reactProps$"+d0,tp="__reactContainer$"+d0,Ix="__reactEvents$"+d0,Bk="__reactListeners$"+d0,Uk="__reactHandles$"+d0;function Iv(A){var D=A[vh];if(D)return D;for(var e=A.parentNode;e;){if(D=e[tp]||e[vh]){if(e=D.alternate,D.child!==null||e!==null&&e.child!==null)for(A=b_(A);A!==null;){if(e=A[vh])return e;A=b_(A)}return D}A=e,e=A.parentNode}return null}function Dm(A){return A=A[vh]||A[tp],!A||A.tag!==5&&A.tag!==6&&A.tag!==13&&A.tag!==3?null:A}function Gd(A){if(A.tag===5||A.tag===6)return A.stateNode;throw Error(la(33))}function Ay(A){return A[_m]||null}var zx=[],jd=-1;function nv(A){return{current:A}}function Oo(A){0>jd||(A.current=zx[jd],zx[jd]=null,jd--)}function ko(A,D){jd++,zx[jd]=A.current,A.current=D}var ev={},Ql=nv(ev),Ku=nv(!1),Vv=ev;function i0(A,D){var e=A.type.contextTypes;if(!e)return ev;var d=A.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===D)return d.__reactInternalMemoizedMaskedChildContext;var S={},r;for(r in e)S[r]=D[r];return d&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=D,A.__reactInternalMemoizedMaskedChildContext=S),S}function Ju(A){return A=A.childContextTypes,A!=null}function ey(){Oo(Ku),Oo(Ql)}function __(A,D,e){if(Ql.current!==ev)throw Error(la(168));ko(Ql,D),ko(Ku,e)}function Q3(A,D,e){var d=A.stateNode;if(D=D.childContextTypes,typeof d.getChildContext!="function")return e;d=d.getChildContext();for(var S in d)if(!(S in D))throw Error(la(108,AM(A)||"Unknown",S));return is({},e,d)}function ty(A){return A=(A=A.stateNode)&&A.__reactInternalMemoizedMergedChildContext||ev,Vv=Ql.current,ko(Ql,A),ko(Ku,Ku.current),!0}function w_(A,D,e){var d=A.stateNode;if(!d)throw Error(la(169));e?(A=Q3(A,D,Vv),d.__reactInternalMemoizedMergedChildContext=A,Oo(Ku),Oo(Ql),ko(Ql,A)):Oo(Ku),ko(Ku,e)}var Kh=null,My=!1,P1=!1;function q3(A){Kh===null?Kh=[A]:Kh.push(A)}function Vk(A){My=!0,q3(A)}function av(){if(!P1&&Kh!==null){P1=!0;var A=0,D=lo;try{var e=Kh;for(lo=1;A<e.length;A++){var d=e[A];do d=d(!0);while(d!==null)}Kh=null,My=!1}catch(S){throw Kh!==null&&(Kh=Kh.slice(A+1)),A3(Rb,av),S}finally{lo=D,P1=!1}}return null}var Wd=[],Yd=0,ry=null,ny=0,tf=[],rf=0,Hv=null,Jh=1,$h="";function Pv(A,D){Wd[Yd++]=ny,Wd[Yd++]=ry,ry=A,ny=D}function eT(A,D,e){tf[rf++]=Jh,tf[rf++]=$h,tf[rf++]=Hv,Hv=A;var d=Jh;A=$h;var S=32-Uf(d)-1;d&=~(1<<S),e+=1;var r=32-Uf(D)+S;if(30<r){var a=S-S%5;r=(d&(1<<a)-1).toString(32),d>>=a,S-=a,Jh=1<<32-Uf(D)+S|e<<S|d,$h=r+A}else Jh=1<<r|e<<S|d,$h=A}function Vb(A){A.return!==null&&(Pv(A,1),eT(A,1,0))}function Hb(A){for(;A===ry;)ry=Wd[--Yd],Wd[Yd]=null,ny=Wd[--Yd],Wd[Yd]=null;for(;A===Hv;)Hv=tf[--rf],tf[rf]=null,$h=tf[--rf],tf[rf]=null,Jh=tf[--rf],tf[rf]=null}var wc=null,_c=null,ts=!1,Bf=null;function tT(A,D){var e=nf(5,null,null,0);e.elementType="DELETED",e.stateNode=D,e.return=A,D=A.deletions,D===null?(A.deletions=[e],A.flags|=16):D.push(e)}function T_(A,D){switch(A.tag){case 5:var e=A.type;return D=D.nodeType!==1||e.toLowerCase()!==D.nodeName.toLowerCase()?null:D,D!==null?(A.stateNode=D,wc=A,_c=Xp(D.firstChild),!0):!1;case 6:return D=A.pendingProps===""||D.nodeType!==3?null:D,D!==null?(A.stateNode=D,wc=A,_c=null,!0):!1;case 13:return D=D.nodeType!==8?null:D,D!==null?(e=Hv!==null?{id:Jh,overflow:$h}:null,A.memoizedState={dehydrated:D,treeContext:e,retryLane:1073741824},e=nf(18,null,null,0),e.stateNode=D,e.return=A,A.child=e,wc=A,_c=null,!0):!1;default:return!1}}function Fx(A){return(A.mode&1)!==0&&(A.flags&128)===0}function Ox(A){if(ts){var D=_c;if(D){var e=D;if(!T_(A,D)){if(Fx(A))throw Error(la(418));D=Xp(e.nextSibling);var d=wc;D&&T_(A,D)?tT(d,e):(A.flags=A.flags&-4097|2,ts=!1,wc=A)}}else{if(Fx(A))throw Error(la(418));A.flags=A.flags&-4097|2,ts=!1,wc=A}}}function A_(A){for(A=A.return;A!==null&&A.tag!==5&&A.tag!==3&&A.tag!==13;)A=A.return;wc=A}function xg(A){if(A!==wc)return!1;if(!ts)return A_(A),ts=!0,!1;var D;if((D=A.tag!==3)&&!(D=A.tag!==5)&&(D=A.type,D=D!=="head"&&D!=="body"&&!Rx(A.type,A.memoizedProps)),D&&(D=_c)){if(Fx(A))throw rT(),Error(la(418));for(;D;)tT(A,D),D=Xp(D.nextSibling)}if(A_(A),A.tag===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(la(317));e:{for(A=A.nextSibling,D=0;A;){if(A.nodeType===8){var e=A.data;if(e==="/$"){if(D===0){_c=Xp(A.nextSibling);break e}D--}else e!=="$"&&e!=="$!"&&e!=="$?"||D++}A=A.nextSibling}_c=null}}else _c=wc?Xp(A.stateNode.nextSibling):null;return!0}function rT(){for(var A=_c;A;)A=Xp(A.nextSibling)}function o0(){_c=wc=null,ts=!1}function Gb(A){Bf===null?Bf=[A]:Bf.push(A)}var Hk=ap.ReactCurrentBatchConfig;function Of(A,D){if(A&&A.defaultProps){D=is({},D),A=A.defaultProps;for(var e in A)D[e]===void 0&&(D[e]=A[e]);return D}return D}var ay=nv(null),iy=null,Xd=null,jb=null;function Wb(){jb=Xd=iy=null}function Yb(A){var D=ay.current;Oo(ay),A._currentValue=D}function Nx(A,D,e){for(;A!==null;){var d=A.alternate;if((A.childLanes&D)!==D?(A.childLanes|=D,d!==null&&(d.childLanes|=D)):d!==null&&(d.childLanes&D)!==D&&(d.childLanes|=D),A===e)break;A=A.return}}function r0(A,D){iy=A,jb=Xd=null,A=A.dependencies,A!==null&&A.firstContext!==null&&((A.lanes&D)!==0&&(Zu=!0),A.firstContext=null)}function sf(A){var D=A._currentValue;if(jb!==A)if(A={context:A,memoizedValue:D,next:null},Xd===null){if(iy===null)throw Error(la(308));Xd=A,iy.dependencies={lanes:0,firstContext:A}}else Xd=Xd.next=A;return D}var zv=null;function Xb(A){zv===null?zv=[A]:zv.push(A)}function nT(A,D,e,d){var S=D.interleaved;return S===null?(e.next=e,Xb(D)):(e.next=S.next,S.next=e),D.interleaved=e,rp(A,d)}function rp(A,D){A.lanes|=D;var e=A.alternate;for(e!==null&&(e.lanes|=D),e=A,A=A.return;A!==null;)A.childLanes|=D,e=A.alternate,e!==null&&(e.childLanes|=D),e=A,A=A.return;return e.tag===3?e.stateNode:null}var Bp=!1;function Zb(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aT(A,D){A=A.updateQueue,D.updateQueue===A&&(D.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,effects:A.effects})}function Qh(A,D){return{eventTime:A,lane:D,tag:0,payload:null,callback:null,next:null}}function Zp(A,D,e){var d=A.updateQueue;if(d===null)return null;if(d=d.shared,(Wi&2)!==0){var S=d.pending;return S===null?D.next=D:(D.next=S.next,S.next=D),d.pending=D,rp(A,e)}return S=d.interleaved,S===null?(D.next=D,Xb(d)):(D.next=S.next,S.next=D),d.interleaved=D,rp(A,e)}function Dg(A,D,e){if(D=D.updateQueue,D!==null&&(D=D.shared,(e&4194240)!==0)){var d=D.lanes;d&=A.pendingLanes,e|=d,D.lanes=e,Db(A,e)}}function M_(A,D){var e=A.updateQueue,d=A.alternate;if(d!==null&&(d=d.updateQueue,e===d)){var S=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?S=r=a:r=r.next=a,e=e.next}while(e!==null);r===null?S=r=D:r=r.next=D}else S=r=D;e={baseState:d.baseState,firstBaseUpdate:S,lastBaseUpdate:r,shared:d.shared,effects:d.effects},A.updateQueue=e;return}A=e.lastBaseUpdate,A===null?e.firstBaseUpdate=D:A.next=D,e.lastBaseUpdate=D}function oy(A,D,e,d){var S=A.updateQueue;Bp=!1;var r=S.firstBaseUpdate,a=S.lastBaseUpdate,u=S.shared.pending;if(u!==null){S.shared.pending=null;var c=u,t=c.next;c.next=null,a===null?r=t:a.next=t,a=c;var f=A.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==a&&(u===null?f.firstBaseUpdate=t:u.next=t,f.lastBaseUpdate=c))}if(r!==null){var n=S.baseState;a=0,f=t=c=null,u=r;do{var o=u.lane,l=u.eventTime;if((d&o)===o){f!==null&&(f=f.next={eventTime:l,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var h=A,i=u;switch(o=D,l=e,i.tag){case 1:if(h=i.payload,typeof h=="function"){n=h.call(l,n,o);break e}n=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=i.payload,o=typeof h=="function"?h.call(l,n,o):h,o==null)break e;n=is({},n,o);break e;case 2:Bp=!0}}u.callback!==null&&u.lane!==0&&(A.flags|=64,o=S.effects,o===null?S.effects=[u]:o.push(u))}else l={eventTime:l,lane:o,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(t=f=l,c=n):f=f.next=l,a|=o;if(u=u.next,u===null){if(u=S.shared.pending,u===null)break;o=u,u=o.next,o.next=null,S.lastBaseUpdate=o,S.shared.pending=null}}while(1);if(f===null&&(c=n),S.baseState=c,S.firstBaseUpdate=t,S.lastBaseUpdate=f,D=S.shared.interleaved,D!==null){S=D;do a|=S.lane,S=S.next;while(S!==D)}else r===null&&(S.shared.lanes=0);jv|=a,A.lanes=a,A.memoizedState=n}}function k_(A,D,e){if(A=D.effects,D.effects=null,A!==null)for(D=0;D<A.length;D++){var d=A[D],S=d.callback;if(S!==null){if(d.callback=null,d=e,typeof S!="function")throw Error(la(191,S));S.call(d)}}}var iT=new n3.Component().refs;function Bx(A,D,e,d){D=A.memoizedState,e=e(d,D),e=e==null?D:is({},D,e),A.memoizedState=e,A.lanes===0&&(A.updateQueue.baseState=e)}var ky={isMounted:function(A){return(A=A._reactInternals)?Jv(A)===A:!1},enqueueSetState:function(A,D,e){A=A._reactInternals;var d=Tu(),S=Jp(A),r=Qh(d,S);r.payload=D,e!=null&&(r.callback=e),D=Zp(A,r,S),D!==null&&(Vf(D,A,S,d),Dg(D,A,S))},enqueueReplaceState:function(A,D,e){A=A._reactInternals;var d=Tu(),S=Jp(A),r=Qh(d,S);r.tag=1,r.payload=D,e!=null&&(r.callback=e),D=Zp(A,r,S),D!==null&&(Vf(D,A,S,d),Dg(D,A,S))},enqueueForceUpdate:function(A,D){A=A._reactInternals;var e=Tu(),d=Jp(A),S=Qh(e,d);S.tag=2,D!=null&&(S.callback=D),D=Zp(A,S,d),D!==null&&(Vf(D,A,d,e),Dg(D,A,d))}};function S_(A,D,e,d,S,r,a){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(d,r,a):D.prototype&&D.prototype.isPureReactComponent?!ym(e,d)||!ym(S,r):!0}function oT(A,D,e){var d=!1,S=ev,r=D.contextType;return typeof r=="object"&&r!==null?r=sf(r):(S=Ju(D)?Vv:Ql.current,d=D.contextTypes,r=(d=d!=null)?i0(A,S):ev),D=new D(e,r),A.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=ky,A.stateNode=D,D._reactInternals=A,d&&(A=A.stateNode,A.__reactInternalMemoizedUnmaskedChildContext=S,A.__reactInternalMemoizedMaskedChildContext=r),D}function C_(A,D,e,d){A=D.state,typeof D.componentWillReceiveProps=="function"&&D.componentWillReceiveProps(e,d),typeof D.UNSAFE_componentWillReceiveProps=="function"&&D.UNSAFE_componentWillReceiveProps(e,d),D.state!==A&&ky.enqueueReplaceState(D,D.state,null)}function Ux(A,D,e,d){var S=A.stateNode;S.props=e,S.state=A.memoizedState,S.refs=iT,Zb(A);var r=D.contextType;typeof r=="object"&&r!==null?S.context=sf(r):(r=Ju(D)?Vv:Ql.current,S.context=i0(A,r)),S.state=A.memoizedState,r=D.getDerivedStateFromProps,typeof r=="function"&&(Bx(A,D,r,e),S.state=A.memoizedState),typeof D.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(D=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),D!==S.state&&ky.enqueueReplaceState(S,S.state,null),oy(A,e,S,d),S.state=A.memoizedState),typeof S.componentDidMount=="function"&&(A.flags|=4194308)}function H0(A,D,e){if(A=e.ref,A!==null&&typeof A!="function"&&typeof A!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(la(309));var d=e.stateNode}if(!d)throw Error(la(147,A));var S=d,r=""+A;return D!==null&&D.ref!==null&&typeof D.ref=="function"&&D.ref._stringRef===r?D.ref:(D=function(a){var u=S.refs;u===iT&&(u=S.refs={}),a===null?delete u[r]:u[r]=a},D._stringRef=r,D)}if(typeof A!="string")throw Error(la(284));if(!e._owner)throw Error(la(290,A))}return A}function bg(A,D){throw A=Object.prototype.toString.call(D),Error(la(31,A==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":A))}function E_(A){var D=A._init;return D(A._payload)}function sT(A){function D(p,v){if(A){var m=p.deletions;m===null?(p.deletions=[v],p.flags|=16):m.push(v)}}function e(p,v){if(!A)return null;for(;v!==null;)D(p,v),v=v.sibling;return null}function d(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function S(p,v){return p=$p(p,v),p.index=0,p.sibling=null,p}function r(p,v,m){return p.index=m,A?(m=p.alternate,m!==null?(m=m.index,m<v?(p.flags|=2,v):m):(p.flags|=2,v)):(p.flags|=1048576,v)}function a(p){return A&&p.alternate===null&&(p.flags|=2),p}function u(p,v,m,b){return v===null||v.tag!==6?(v=N1(m,p.mode,b),v.return=p,v):(v=S(v,m),v.return=p,v)}function c(p,v,m,b){var y=m.type;return y===Bd?f(p,v,m.props.children,b,m.key):v!==null&&(v.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Np&&E_(y)===v.type)?(b=S(v,m.props),b.ref=H0(p,v,m),b.return=p,b):(b=Bg(m.type,m.key,m.props,null,p.mode,b),b.ref=H0(p,v,m),b.return=p,b)}function t(p,v,m,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==m.containerInfo||v.stateNode.implementation!==m.implementation?(v=B1(m,p.mode,b),v.return=p,v):(v=S(v,m.children||[]),v.return=p,v)}function f(p,v,m,b,y){return v===null||v.tag!==7?(v=Bv(m,p.mode,b,y),v.return=p,v):(v=S(v,m),v.return=p,v)}function n(p,v,m){if(typeof v=="string"&&v!==""||typeof v=="number")return v=N1(""+v,p.mode,m),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ug:return m=Bg(v.type,v.key,v.props,null,p.mode,m),m.ref=H0(p,null,v),m.return=p,m;case Nd:return v=B1(v,p.mode,m),v.return=p,v;case Np:var b=v._init;return n(p,b(v._payload),m)}if(Z0(v)||O0(v))return v=Bv(v,p.mode,m,null),v.return=p,v;bg(p,v)}return null}function o(p,v,m,b){var y=v!==null?v.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return y!==null?null:u(p,v,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ug:return m.key===y?c(p,v,m,b):null;case Nd:return m.key===y?t(p,v,m,b):null;case Np:return y=m._init,o(p,v,y(m._payload),b)}if(Z0(m)||O0(m))return y!==null?null:f(p,v,m,b,null);bg(p,m)}return null}function l(p,v,m,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(m)||null,u(v,p,""+b,y);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ug:return p=p.get(b.key===null?m:b.key)||null,c(v,p,b,y);case Nd:return p=p.get(b.key===null?m:b.key)||null,t(v,p,b,y);case Np:var x=b._init;return l(p,v,m,x(b._payload),y)}if(Z0(b)||O0(b))return p=p.get(m)||null,f(v,p,b,y,null);bg(v,b)}return null}function h(p,v,m,b){for(var y=null,x=null,w=v,g=v=0,T=null;w!==null&&g<m.length;g++){w.index>g?(T=w,w=null):T=w.sibling;var M=o(p,w,m[g],b);if(M===null){w===null&&(w=T);break}A&&w&&M.alternate===null&&D(p,w),v=r(M,v,g),x===null?y=M:x.sibling=M,x=M,w=T}if(g===m.length)return e(p,w),ts&&Pv(p,g),y;if(w===null){for(;g<m.length;g++)w=n(p,m[g],b),w!==null&&(v=r(w,v,g),x===null?y=w:x.sibling=w,x=w);return ts&&Pv(p,g),y}for(w=d(p,w);g<m.length;g++)T=l(w,p,g,m[g],b),T!==null&&(A&&T.alternate!==null&&w.delete(T.key===null?g:T.key),v=r(T,v,g),x===null?y=T:x.sibling=T,x=T);return A&&w.forEach(function(P){return D(p,P)}),ts&&Pv(p,g),y}function i(p,v,m,b){var y=O0(m);if(typeof y!="function")throw Error(la(150));if(m=y.call(m),m==null)throw Error(la(151));for(var x=y=null,w=v,g=v=0,T=null,M=m.next();w!==null&&!M.done;g++,M=m.next()){w.index>g?(T=w,w=null):T=w.sibling;var P=o(p,w,M.value,b);if(P===null){w===null&&(w=T);break}A&&w&&P.alternate===null&&D(p,w),v=r(P,v,g),x===null?y=P:x.sibling=P,x=P,w=T}if(M.done)return e(p,w),ts&&Pv(p,g),y;if(w===null){for(;!M.done;g++,M=m.next())M=n(p,M.value,b),M!==null&&(v=r(M,v,g),x===null?y=M:x.sibling=M,x=M);return ts&&Pv(p,g),y}for(w=d(p,w);!M.done;g++,M=m.next())M=l(w,p,g,M.value,b),M!==null&&(A&&M.alternate!==null&&w.delete(M.key===null?g:M.key),v=r(M,v,g),x===null?y=M:x.sibling=M,x=M);return A&&w.forEach(function(L){return D(p,L)}),ts&&Pv(p,g),y}function s(p,v,m,b){if(typeof m=="object"&&m!==null&&m.type===Bd&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ug:e:{for(var y=m.key,x=v;x!==null;){if(x.key===y){if(y=m.type,y===Bd){if(x.tag===7){e(p,x.sibling),v=S(x,m.props.children),v.return=p,p=v;break e}}else if(x.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===Np&&E_(y)===x.type){e(p,x.sibling),v=S(x,m.props),v.ref=H0(p,x,m),v.return=p,p=v;break e}e(p,x);break}else D(p,x);x=x.sibling}m.type===Bd?(v=Bv(m.props.children,p.mode,b,m.key),v.return=p,p=v):(b=Bg(m.type,m.key,m.props,null,p.mode,b),b.ref=H0(p,v,m),b.return=p,p=b)}return a(p);case Nd:e:{for(x=m.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===m.containerInfo&&v.stateNode.implementation===m.implementation){e(p,v.sibling),v=S(v,m.children||[]),v.return=p,p=v;break e}else{e(p,v);break}else D(p,v);v=v.sibling}v=B1(m,p.mode,b),v.return=p,p=v}return a(p);case Np:return x=m._init,s(p,v,x(m._payload),b)}if(Z0(m))return h(p,v,m,b);if(O0(m))return i(p,v,m,b);bg(p,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,v!==null&&v.tag===6?(e(p,v.sibling),v=S(v,m),v.return=p,p=v):(e(p,v),v=N1(m,p.mode,b),v.return=p,p=v),a(p)):e(p,v)}return s}var s0=sT(!0),lT=sT(!1),Im={},xh=nv(Im),wm=nv(Im),Tm=nv(Im);function Fv(A){if(A===Im)throw Error(la(174));return A}function Kb(A,D){switch(ko(Tm,D),ko(wm,A),ko(xh,Im),A=D.nodeType,A){case 9:case 11:D=(D=D.documentElement)?D.namespaceURI:yx(null,"");break;default:A=A===8?D.parentNode:D,D=A.namespaceURI||null,A=A.tagName,D=yx(D,A)}Oo(xh),ko(xh,D)}function l0(){Oo(xh),Oo(wm),Oo(Tm)}function uT(A){Fv(Tm.current);var D=Fv(xh.current),e=yx(D,A.type);D!==e&&(ko(wm,A),ko(xh,e))}function Jb(A){wm.current===A&&(Oo(xh),Oo(wm))}var ns=nv(0);function sy(A){for(var D=A;D!==null;){if(D.tag===13){var e=D.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return D}else if(D.tag===19&&D.memoizedProps.revealOrder!==void 0){if((D.flags&128)!==0)return D}else if(D.child!==null){D.child.return=D,D=D.child;continue}if(D===A)break;for(;D.sibling===null;){if(D.return===null||D.return===A)return null;D=D.return}D.sibling.return=D.return,D=D.sibling}return null}var R1=[];function $b(){for(var A=0;A<R1.length;A++)R1[A]._workInProgressVersionPrimary=null;R1.length=0}var Ig=ap.ReactCurrentDispatcher,D1=ap.ReactCurrentBatchConfig,Gv=0,as=null,al=null,vl=null,ly=!1,im=!1,Am=0,Gk=0;function Zl(){throw Error(la(321))}function Qb(A,D){if(D===null)return!1;for(var e=0;e<D.length&&e<A.length;e++)if(!Hf(A[e],D[e]))return!1;return!0}function qb(A,D,e,d,S,r){if(Gv=r,as=D,D.memoizedState=null,D.updateQueue=null,D.lanes=0,Ig.current=A===null||A.memoizedState===null?Xk:Zk,A=e(d,S),im){r=0;do{if(im=!1,Am=0,25<=r)throw Error(la(301));r+=1,vl=al=null,D.updateQueue=null,Ig.current=Kk,A=e(d,S)}while(im)}if(Ig.current=uy,D=al!==null&&al.next!==null,Gv=0,vl=al=as=null,ly=!1,D)throw Error(la(300));return A}function e2(){var A=Am!==0;return Am=0,A}function ph(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vl===null?as.memoizedState=vl=A:vl=vl.next=A,vl}function lf(){if(al===null){var A=as.alternate;A=A!==null?A.memoizedState:null}else A=al.next;var D=vl===null?as.memoizedState:vl.next;if(D!==null)vl=D,al=A;else{if(A===null)throw Error(la(310));al=A,A={memoizedState:al.memoizedState,baseState:al.baseState,baseQueue:al.baseQueue,queue:al.queue,next:null},vl===null?as.memoizedState=vl=A:vl=vl.next=A}return vl}function Mm(A,D){return typeof D=="function"?D(A):D}function I1(A){var D=lf(),e=D.queue;if(e===null)throw Error(la(311));e.lastRenderedReducer=A;var d=al,S=d.baseQueue,r=e.pending;if(r!==null){if(S!==null){var a=S.next;S.next=r.next,r.next=a}d.baseQueue=S=r,e.pending=null}if(S!==null){r=S.next,d=d.baseState;var u=a=null,c=null,t=r;do{var f=t.lane;if((Gv&f)===f)c!==null&&(c=c.next={lane:0,action:t.action,hasEagerState:t.hasEagerState,eagerState:t.eagerState,next:null}),d=t.hasEagerState?t.eagerState:A(d,t.action);else{var n={lane:f,action:t.action,hasEagerState:t.hasEagerState,eagerState:t.eagerState,next:null};c===null?(u=c=n,a=d):c=c.next=n,as.lanes|=f,jv|=f}t=t.next}while(t!==null&&t!==r);c===null?a=d:c.next=u,Hf(d,D.memoizedState)||(Zu=!0),D.memoizedState=d,D.baseState=a,D.baseQueue=c,e.lastRenderedState=d}if(A=e.interleaved,A!==null){S=A;do r=S.lane,as.lanes|=r,jv|=r,S=S.next;while(S!==A)}else S===null&&(e.lanes=0);return[D.memoizedState,e.dispatch]}function z1(A){var D=lf(),e=D.queue;if(e===null)throw Error(la(311));e.lastRenderedReducer=A;var d=e.dispatch,S=e.pending,r=D.memoizedState;if(S!==null){e.pending=null;var a=S=S.next;do r=A(r,a.action),a=a.next;while(a!==S);Hf(r,D.memoizedState)||(Zu=!0),D.memoizedState=r,D.baseQueue===null&&(D.baseState=r),e.lastRenderedState=r}return[r,d]}function cT(){}function fT(A,D){var e=as,d=lf(),S=D(),r=!Hf(d.memoizedState,S);if(r&&(d.memoizedState=S,Zu=!0),d=d.queue,t2(vT.bind(null,e,d,A),[A]),d.getSnapshot!==D||r||vl!==null&&vl.memoizedState.tag&1){if(e.flags|=2048,km(9,pT.bind(null,e,d,S,D),void 0,null),dl===null)throw Error(la(349));(Gv&30)!==0||hT(e,D,S)}return S}function hT(A,D,e){A.flags|=16384,A={getSnapshot:D,value:e},D=as.updateQueue,D===null?(D={lastEffect:null,stores:null},as.updateQueue=D,D.stores=[A]):(e=D.stores,e===null?D.stores=[A]:e.push(A))}function pT(A,D,e,d){D.value=e,D.getSnapshot=d,dT(D)&&mT(A)}function vT(A,D,e){return e(function(){dT(D)&&mT(A)})}function dT(A){var D=A.getSnapshot;A=A.value;try{var e=D();return!Hf(A,e)}catch{return!0}}function mT(A){var D=rp(A,1);D!==null&&Vf(D,A,1,-1)}function L_(A){var D=ph();return typeof A=="function"&&(A=A()),D.memoizedState=D.baseState=A,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mm,lastRenderedState:A},D.queue=A,A=A.dispatch=Yk.bind(null,as,A),[D.memoizedState,A]}function km(A,D,e,d){return A={tag:A,create:D,destroy:e,deps:d,next:null},D=as.updateQueue,D===null?(D={lastEffect:null,stores:null},as.updateQueue=D,D.lastEffect=A.next=A):(e=D.lastEffect,e===null?D.lastEffect=A.next=A:(d=e.next,e.next=A,A.next=d,D.lastEffect=A)),A}function gT(){return lf().memoizedState}function zg(A,D,e,d){var S=ph();as.flags|=A,S.memoizedState=km(1|D,e,void 0,d===void 0?null:d)}function Sy(A,D,e,d){var S=lf();d=d===void 0?null:d;var r=void 0;if(al!==null){var a=al.memoizedState;if(r=a.destroy,d!==null&&Qb(d,a.deps)){S.memoizedState=km(D,e,r,d);return}}as.flags|=A,S.memoizedState=km(1|D,e,r,d)}function P_(A,D){return zg(8390656,8,A,D)}function t2(A,D){return Sy(2048,8,A,D)}function yT(A,D){return Sy(4,2,A,D)}function xT(A,D){return Sy(4,4,A,D)}function bT(A,D){if(typeof D=="function")return A=A(),D(A),function(){D(null)};if(D!=null)return A=A(),D.current=A,function(){D.current=null}}function _T(A,D,e){return e=e!=null?e.concat([A]):null,Sy(4,4,bT.bind(null,D,A),e)}function r2(){}function wT(A,D){var e=lf();D=D===void 0?null:D;var d=e.memoizedState;return d!==null&&D!==null&&Qb(D,d[1])?d[0]:(e.memoizedState=[A,D],A)}function TT(A,D){var e=lf();D=D===void 0?null:D;var d=e.memoizedState;return d!==null&&D!==null&&Qb(D,d[1])?d[0]:(A=A(),e.memoizedState=[A,D],A)}function AT(A,D,e){return(Gv&21)===0?(A.baseState&&(A.baseState=!1,Zu=!0),A.memoizedState=e):(Hf(e,D)||(e=S3(),as.lanes|=e,jv|=e,A.baseState=!0),D)}function jk(A,D){var e=lo;lo=e!==0&&4>e?e:4,A(!0);var d=D1.transition;D1.transition={};try{A(!1),D()}finally{lo=e,D1.transition=d}}function MT(){return lf().memoizedState}function Wk(A,D,e){var d=Jp(A);if(e={lane:d,action:e,hasEagerState:!1,eagerState:null,next:null},kT(A))ST(D,e);else if(e=nT(A,D,e,d),e!==null){var S=Tu();Vf(e,A,d,S),CT(e,D,d)}}function Yk(A,D,e){var d=Jp(A),S={lane:d,action:e,hasEagerState:!1,eagerState:null,next:null};if(kT(A))ST(D,S);else{var r=A.alternate;if(A.lanes===0&&(r===null||r.lanes===0)&&(r=D.lastRenderedReducer,r!==null))try{var a=D.lastRenderedState,u=r(a,e);if(S.hasEagerState=!0,S.eagerState=u,Hf(u,a)){var c=D.interleaved;c===null?(S.next=S,Xb(D)):(S.next=c.next,c.next=S),D.interleaved=S;return}}catch{}finally{}e=nT(A,D,S,d),e!==null&&(S=Tu(),Vf(e,A,d,S),CT(e,D,d))}}function kT(A){var D=A.alternate;return A===as||D!==null&&D===as}function ST(A,D){im=ly=!0;var e=A.pending;e===null?D.next=D:(D.next=e.next,e.next=D),A.pending=D}function CT(A,D,e){if((e&4194240)!==0){var d=D.lanes;d&=A.pendingLanes,e|=d,D.lanes=e,Db(A,e)}}var uy={readContext:sf,useCallback:Zl,useContext:Zl,useEffect:Zl,useImperativeHandle:Zl,useInsertionEffect:Zl,useLayoutEffect:Zl,useMemo:Zl,useReducer:Zl,useRef:Zl,useState:Zl,useDebugValue:Zl,useDeferredValue:Zl,useTransition:Zl,useMutableSource:Zl,useSyncExternalStore:Zl,useId:Zl,unstable_isNewReconciler:!1},Xk={readContext:sf,useCallback:function(A,D){return ph().memoizedState=[A,D===void 0?null:D],A},useContext:sf,useEffect:P_,useImperativeHandle:function(A,D,e){return e=e!=null?e.concat([A]):null,zg(4194308,4,bT.bind(null,D,A),e)},useLayoutEffect:function(A,D){return zg(4194308,4,A,D)},useInsertionEffect:function(A,D){return zg(4,2,A,D)},useMemo:function(A,D){var e=ph();return D=D===void 0?null:D,A=A(),e.memoizedState=[A,D],A},useReducer:function(A,D,e){var d=ph();return D=e!==void 0?e(D):D,d.memoizedState=d.baseState=D,A={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:D},d.queue=A,A=A.dispatch=Wk.bind(null,as,A),[d.memoizedState,A]},useRef:function(A){var D=ph();return A={current:A},D.memoizedState=A},useState:L_,useDebugValue:r2,useDeferredValue:function(A){return ph().memoizedState=A},useTransition:function(){var A=L_(!1),D=A[0];return A=jk.bind(null,A[1]),ph().memoizedState=A,[D,A]},useMutableSource:function(){},useSyncExternalStore:function(A,D,e){var d=as,S=ph();if(ts){if(e===void 0)throw Error(la(407));e=e()}else{if(e=D(),dl===null)throw Error(la(349));(Gv&30)!==0||hT(d,D,e)}S.memoizedState=e;var r={value:e,getSnapshot:D};return S.queue=r,P_(vT.bind(null,d,r,A),[A]),d.flags|=2048,km(9,pT.bind(null,d,r,e,D),void 0,null),e},useId:function(){var A=ph(),D=dl.identifierPrefix;if(ts){var e=$h,d=Jh;e=(d&~(1<<32-Uf(d)-1)).toString(32)+e,D=":"+D+"R"+e,e=Am++,0<e&&(D+="H"+e.toString(32)),D+=":"}else e=Gk++,D=":"+D+"r"+e.toString(32)+":";return A.memoizedState=D},unstable_isNewReconciler:!1},Zk={readContext:sf,useCallback:wT,useContext:sf,useEffect:t2,useImperativeHandle:_T,useInsertionEffect:yT,useLayoutEffect:xT,useMemo:TT,useReducer:I1,useRef:gT,useState:function(){return I1(Mm)},useDebugValue:r2,useDeferredValue:function(A){var D=lf();return AT(D,al.memoizedState,A)},useTransition:function(){var A=I1(Mm)[0],D=lf().memoizedState;return[A,D]},useMutableSource:cT,useSyncExternalStore:fT,useId:MT,unstable_isNewReconciler:!1},Kk={readContext:sf,useCallback:wT,useContext:sf,useEffect:t2,useImperativeHandle:_T,useInsertionEffect:yT,useLayoutEffect:xT,useMemo:TT,useReducer:z1,useRef:gT,useState:function(){return z1(Mm)},useDebugValue:r2,useDeferredValue:function(A){var D=lf();return al===null?D.memoizedState=A:AT(D,al.memoizedState,A)},useTransition:function(){var A=z1(Mm)[0],D=lf().memoizedState;return[A,D]},useMutableSource:cT,useSyncExternalStore:fT,useId:MT,unstable_isNewReconciler:!1};function u0(A,D){try{var e="",d=D;do e+=TM(d),d=d.return;while(d);var S=e}catch(r){S=`
Error generating stack: `+r.message+`
`+r.stack}return{value:A,source:D,stack:S,digest:null}}function F1(A,D,e){return{value:A,source:null,stack:e!=null?e:null,digest:D!=null?D:null}}function Vx(A,D){try{console.error(D.value)}catch(e){setTimeout(function(){throw e})}}var Jk=typeof WeakMap=="function"?WeakMap:Map;function ET(A,D,e){e=Qh(-1,e),e.tag=3,e.payload={element:null};var d=D.value;return e.callback=function(){fy||(fy=!0,$x=d),Vx(A,D)},e}function LT(A,D,e){e=Qh(-1,e),e.tag=3;var d=A.type.getDerivedStateFromError;if(typeof d=="function"){var S=D.value;e.payload=function(){return d(S)},e.callback=function(){Vx(A,D)}}var r=A.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Vx(A,D),typeof d!="function"&&(Kp===null?Kp=new Set([this]):Kp.add(this));var a=D.stack;this.componentDidCatch(D.value,{componentStack:a!==null?a:""})}),e}function R_(A,D,e){var d=A.pingCache;if(d===null){d=A.pingCache=new Jk;var S=new Set;d.set(D,S)}else S=d.get(D),S===void 0&&(S=new Set,d.set(D,S));S.has(e)||(S.add(e),A=cS.bind(null,A,D,e),D.then(A,A))}function D_(A){do{var D;if((D=A.tag===13)&&(D=A.memoizedState,D=D!==null?D.dehydrated!==null:!0),D)return A;A=A.return}while(A!==null);return null}function I_(A,D,e,d,S){return(A.mode&1)===0?(A===D?A.flags|=65536:(A.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(D=Qh(-1,1),D.tag=2,Zp(e,D,1))),e.lanes|=1),A):(A.flags|=65536,A.lanes=S,A)}var $k=ap.ReactCurrentOwner,Zu=!1;function wu(A,D,e,d){D.child=A===null?lT(D,null,e,d):s0(D,A.child,e,d)}function z_(A,D,e,d,S){e=e.render;var r=D.ref;return r0(D,S),d=qb(A,D,e,d,r,S),e=e2(),A!==null&&!Zu?(D.updateQueue=A.updateQueue,D.flags&=-2053,A.lanes&=~S,np(A,D,S)):(ts&&e&&Vb(D),D.flags|=1,wu(A,D,d,S),D.child)}function F_(A,D,e,d,S){if(A===null){var r=e.type;return typeof r=="function"&&!c2(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(D.tag=15,D.type=r,PT(A,D,r,d,S)):(A=Bg(e.type,null,d,D,D.mode,S),A.ref=D.ref,A.return=D,D.child=A)}if(r=A.child,(A.lanes&S)===0){var a=r.memoizedProps;if(e=e.compare,e=e!==null?e:ym,e(a,d)&&A.ref===D.ref)return np(A,D,S)}return D.flags|=1,A=$p(r,d),A.ref=D.ref,A.return=D,D.child=A}function PT(A,D,e,d,S){if(A!==null){var r=A.memoizedProps;if(ym(r,d)&&A.ref===D.ref)if(Zu=!1,D.pendingProps=d=r,(A.lanes&S)!==0)(A.flags&131072)!==0&&(Zu=!0);else return D.lanes=A.lanes,np(A,D,S)}return Hx(A,D,e,d,S)}function RT(A,D,e){var d=D.pendingProps,S=d.children,r=A!==null?A.memoizedState:null;if(d.mode==="hidden")if((D.mode&1)===0)D.memoizedState={baseLanes:0,cachePool:null,transitions:null},ko(Kd,xc),xc|=e;else{if((e&1073741824)===0)return A=r!==null?r.baseLanes|e:e,D.lanes=D.childLanes=1073741824,D.memoizedState={baseLanes:A,cachePool:null,transitions:null},D.updateQueue=null,ko(Kd,xc),xc|=A,null;D.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=r!==null?r.baseLanes:e,ko(Kd,xc),xc|=d}else r!==null?(d=r.baseLanes|e,D.memoizedState=null):d=e,ko(Kd,xc),xc|=d;return wu(A,D,S,e),D.child}function DT(A,D){var e=D.ref;(A===null&&e!==null||A!==null&&A.ref!==e)&&(D.flags|=512,D.flags|=2097152)}function Hx(A,D,e,d,S){var r=Ju(e)?Vv:Ql.current;return r=i0(D,r),r0(D,S),e=qb(A,D,e,d,r,S),d=e2(),A!==null&&!Zu?(D.updateQueue=A.updateQueue,D.flags&=-2053,A.lanes&=~S,np(A,D,S)):(ts&&d&&Vb(D),D.flags|=1,wu(A,D,e,S),D.child)}function O_(A,D,e,d,S){if(Ju(e)){var r=!0;ty(D)}else r=!1;if(r0(D,S),D.stateNode===null)Fg(A,D),oT(D,e,d),Ux(D,e,d,S),d=!0;else if(A===null){var a=D.stateNode,u=D.memoizedProps;a.props=u;var c=a.context,t=e.contextType;typeof t=="object"&&t!==null?t=sf(t):(t=Ju(e)?Vv:Ql.current,t=i0(D,t));var f=e.getDerivedStateFromProps,n=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";n||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==d||c!==t)&&C_(D,a,d,t),Bp=!1;var o=D.memoizedState;a.state=o,oy(D,d,a,S),c=D.memoizedState,u!==d||o!==c||Ku.current||Bp?(typeof f=="function"&&(Bx(D,e,f,d),c=D.memoizedState),(u=Bp||S_(D,e,u,d,o,c,t))?(n||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(D.flags|=4194308)):(typeof a.componentDidMount=="function"&&(D.flags|=4194308),D.memoizedProps=d,D.memoizedState=c),a.props=d,a.state=c,a.context=t,d=u):(typeof a.componentDidMount=="function"&&(D.flags|=4194308),d=!1)}else{a=D.stateNode,aT(A,D),u=D.memoizedProps,t=D.type===D.elementType?u:Of(D.type,u),a.props=t,n=D.pendingProps,o=a.context,c=e.contextType,typeof c=="object"&&c!==null?c=sf(c):(c=Ju(e)?Vv:Ql.current,c=i0(D,c));var l=e.getDerivedStateFromProps;(f=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==n||o!==c)&&C_(D,a,d,c),Bp=!1,o=D.memoizedState,a.state=o,oy(D,d,a,S);var h=D.memoizedState;u!==n||o!==h||Ku.current||Bp?(typeof l=="function"&&(Bx(D,e,l,d),h=D.memoizedState),(t=Bp||S_(D,e,t,d,o,h,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(d,h,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(d,h,c)),typeof a.componentDidUpdate=="function"&&(D.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(D.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(D.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(D.flags|=1024),D.memoizedProps=d,D.memoizedState=h),a.props=d,a.state=h,a.context=c,d=t):(typeof a.componentDidUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(D.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===A.memoizedProps&&o===A.memoizedState||(D.flags|=1024),d=!1)}return Gx(A,D,e,d,r,S)}function Gx(A,D,e,d,S,r){DT(A,D);var a=(D.flags&128)!==0;if(!d&&!a)return S&&w_(D,e,!1),np(A,D,r);d=D.stateNode,$k.current=D;var u=a&&typeof e.getDerivedStateFromError!="function"?null:d.render();return D.flags|=1,A!==null&&a?(D.child=s0(D,A.child,null,r),D.child=s0(D,null,u,r)):wu(A,D,u,r),D.memoizedState=d.state,S&&w_(D,e,!0),D.child}function IT(A){var D=A.stateNode;D.pendingContext?__(A,D.pendingContext,D.pendingContext!==D.context):D.context&&__(A,D.context,!1),Kb(A,D.containerInfo)}function N_(A,D,e,d,S){return o0(),Gb(S),D.flags|=256,wu(A,D,e,d),D.child}var jx={dehydrated:null,treeContext:null,retryLane:0};function Wx(A){return{baseLanes:A,cachePool:null,transitions:null}}function zT(A,D,e){var d=D.pendingProps,S=ns.current,r=!1,a=(D.flags&128)!==0,u;if((u=a)||(u=A!==null&&A.memoizedState===null?!1:(S&2)!==0),u?(r=!0,D.flags&=-129):(A===null||A.memoizedState!==null)&&(S|=1),ko(ns,S&1),A===null)return Ox(D),A=D.memoizedState,A!==null&&(A=A.dehydrated,A!==null)?((D.mode&1)===0?D.lanes=1:A.data==="$!"?D.lanes=8:D.lanes=1073741824,null):(a=d.children,A=d.fallback,r?(d=D.mode,r=D.child,a={mode:"hidden",children:a},(d&1)===0&&r!==null?(r.childLanes=0,r.pendingProps=a):r=Ly(a,d,0,null),A=Bv(A,d,e,null),r.return=D,A.return=D,r.sibling=A,D.child=r,D.child.memoizedState=Wx(e),D.memoizedState=jx,A):n2(D,a));if(S=A.memoizedState,S!==null&&(u=S.dehydrated,u!==null))return Qk(A,D,a,d,u,S,e);if(r){r=d.fallback,a=D.mode,S=A.child,u=S.sibling;var c={mode:"hidden",children:d.children};return(a&1)===0&&D.child!==S?(d=D.child,d.childLanes=0,d.pendingProps=c,D.deletions=null):(d=$p(S,c),d.subtreeFlags=S.subtreeFlags&14680064),u!==null?r=$p(u,r):(r=Bv(r,a,e,null),r.flags|=2),r.return=D,d.return=D,d.sibling=r,D.child=d,d=r,r=D.child,a=A.child.memoizedState,a=a===null?Wx(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=A.childLanes&~e,D.memoizedState=jx,d}return r=A.child,A=r.sibling,d=$p(r,{mode:"visible",children:d.children}),(D.mode&1)===0&&(d.lanes=e),d.return=D,d.sibling=null,A!==null&&(e=D.deletions,e===null?(D.deletions=[A],D.flags|=16):e.push(A)),D.child=d,D.memoizedState=null,d}function n2(A,D){return D=Ly({mode:"visible",children:D},A.mode,0,null),D.return=A,A.child=D}function _g(A,D,e,d){return d!==null&&Gb(d),s0(D,A.child,null,e),A=n2(D,D.pendingProps.children),A.flags|=2,D.memoizedState=null,A}function Qk(A,D,e,d,S,r,a){if(e)return D.flags&256?(D.flags&=-257,d=F1(Error(la(422))),_g(A,D,a,d)):D.memoizedState!==null?(D.child=A.child,D.flags|=128,null):(r=d.fallback,S=D.mode,d=Ly({mode:"visible",children:d.children},S,0,null),r=Bv(r,S,a,null),r.flags|=2,d.return=D,r.return=D,d.sibling=r,D.child=d,(D.mode&1)!==0&&s0(D,A.child,null,a),D.child.memoizedState=Wx(a),D.memoizedState=jx,r);if((D.mode&1)===0)return _g(A,D,a,null);if(S.data==="$!"){if(d=S.nextSibling&&S.nextSibling.dataset,d)var u=d.dgst;return d=u,r=Error(la(419)),d=F1(r,d,void 0),_g(A,D,a,d)}if(u=(a&A.childLanes)!==0,Zu||u){if(d=dl,d!==null){switch(a&-a){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(d.suspendedLanes|a))!==0?0:S,S!==0&&S!==r.retryLane&&(r.retryLane=S,rp(A,S),Vf(d,A,S,-1))}return u2(),d=F1(Error(la(421))),_g(A,D,a,d)}return S.data==="$?"?(D.flags|=128,D.child=A.child,D=fS.bind(null,A),S._reactRetry=D,null):(A=r.treeContext,_c=Xp(S.nextSibling),wc=D,ts=!0,Bf=null,A!==null&&(tf[rf++]=Jh,tf[rf++]=$h,tf[rf++]=Hv,Jh=A.id,$h=A.overflow,Hv=D),D=n2(D,d.children),D.flags|=4096,D)}function B_(A,D,e){A.lanes|=D;var d=A.alternate;d!==null&&(d.lanes|=D),Nx(A.return,D,e)}function O1(A,D,e,d,S){var r=A.memoizedState;r===null?A.memoizedState={isBackwards:D,rendering:null,renderingStartTime:0,last:d,tail:e,tailMode:S}:(r.isBackwards=D,r.rendering=null,r.renderingStartTime=0,r.last=d,r.tail=e,r.tailMode=S)}function FT(A,D,e){var d=D.pendingProps,S=d.revealOrder,r=d.tail;if(wu(A,D,d.children,e),d=ns.current,(d&2)!==0)d=d&1|2,D.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=D.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&B_(A,e,D);else if(A.tag===19)B_(A,e,D);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===D)break e;for(;A.sibling===null;){if(A.return===null||A.return===D)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}d&=1}if(ko(ns,d),(D.mode&1)===0)D.memoizedState=null;else switch(S){case"forwards":for(e=D.child,S=null;e!==null;)A=e.alternate,A!==null&&sy(A)===null&&(S=e),e=e.sibling;e=S,e===null?(S=D.child,D.child=null):(S=e.sibling,e.sibling=null),O1(D,!1,S,e,r);break;case"backwards":for(e=null,S=D.child,D.child=null;S!==null;){if(A=S.alternate,A!==null&&sy(A)===null){D.child=S;break}A=S.sibling,S.sibling=e,e=S,S=A}O1(D,!0,e,null,r);break;case"together":O1(D,!1,null,null,void 0);break;default:D.memoizedState=null}return D.child}function Fg(A,D){(D.mode&1)===0&&A!==null&&(A.alternate=null,D.alternate=null,D.flags|=2)}function np(A,D,e){if(A!==null&&(D.dependencies=A.dependencies),jv|=D.lanes,(e&D.childLanes)===0)return null;if(A!==null&&D.child!==A.child)throw Error(la(153));if(D.child!==null){for(A=D.child,e=$p(A,A.pendingProps),D.child=e,e.return=D;A.sibling!==null;)A=A.sibling,e=e.sibling=$p(A,A.pendingProps),e.return=D;e.sibling=null}return D.child}function qk(A,D,e){switch(D.tag){case 3:IT(D),o0();break;case 5:uT(D);break;case 1:Ju(D.type)&&ty(D);break;case 4:Kb(D,D.stateNode.containerInfo);break;case 10:var d=D.type._context,S=D.memoizedProps.value;ko(ay,d._currentValue),d._currentValue=S;break;case 13:if(d=D.memoizedState,d!==null)return d.dehydrated!==null?(ko(ns,ns.current&1),D.flags|=128,null):(e&D.child.childLanes)!==0?zT(A,D,e):(ko(ns,ns.current&1),A=np(A,D,e),A!==null?A.sibling:null);ko(ns,ns.current&1);break;case 19:if(d=(e&D.childLanes)!==0,(A.flags&128)!==0){if(d)return FT(A,D,e);D.flags|=128}if(S=D.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),ko(ns,ns.current),d)break;return null;case 22:case 23:return D.lanes=0,RT(A,D,e)}return np(A,D,e)}var OT,Yx,NT,BT;OT=function(A,D){for(var e=D.child;e!==null;){if(e.tag===5||e.tag===6)A.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===D)break;for(;e.sibling===null;){if(e.return===null||e.return===D)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Yx=function(){};NT=function(A,D,e,d){var S=A.memoizedProps;if(S!==d){A=D.stateNode,Fv(xh.current);var r=null;switch(e){case"input":S=vx(A,S),d=vx(A,d),r=[];break;case"select":S=is({},S,{value:void 0}),d=is({},d,{value:void 0}),r=[];break;case"textarea":S=gx(A,S),d=gx(A,d),r=[];break;default:typeof S.onClick!="function"&&typeof d.onClick=="function"&&(A.onclick=qg)}xx(e,d);var a;e=null;for(t in S)if(!d.hasOwnProperty(t)&&S.hasOwnProperty(t)&&S[t]!=null)if(t==="style"){var u=S[t];for(a in u)u.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else t!=="dangerouslySetInnerHTML"&&t!=="children"&&t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&t!=="autoFocus"&&(fm.hasOwnProperty(t)?r||(r=[]):(r=r||[]).push(t,null));for(t in d){var c=d[t];if(u=S!=null?S[t]:void 0,d.hasOwnProperty(t)&&c!==u&&(c!=null||u!=null))if(t==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(e||(e={}),e[a]=c[a])}else e||(r||(r=[]),r.push(t,e)),e=c;else t==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(r=r||[]).push(t,c)):t==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(t,""+c):t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&(fm.hasOwnProperty(t)?(c!=null&&t==="onScroll"&&zo("scroll",A),r||u===c||(r=[])):(r=r||[]).push(t,c))}e&&(r=r||[]).push("style",e);var t=r;(D.updateQueue=t)&&(D.flags|=4)}};BT=function(A,D,e,d){e!==d&&(D.flags|=4)};function G0(A,D){if(!ts)switch(A.tailMode){case"hidden":D=A.tail;for(var e=null;D!==null;)D.alternate!==null&&(e=D),D=D.sibling;e===null?A.tail=null:e.sibling=null;break;case"collapsed":e=A.tail;for(var d=null;e!==null;)e.alternate!==null&&(d=e),e=e.sibling;d===null?D||A.tail===null?A.tail=null:A.tail.sibling=null:d.sibling=null}}function Kl(A){var D=A.alternate!==null&&A.alternate.child===A.child,e=0,d=0;if(D)for(var S=A.child;S!==null;)e|=S.lanes|S.childLanes,d|=S.subtreeFlags&14680064,d|=S.flags&14680064,S.return=A,S=S.sibling;else for(S=A.child;S!==null;)e|=S.lanes|S.childLanes,d|=S.subtreeFlags,d|=S.flags,S.return=A,S=S.sibling;return A.subtreeFlags|=d,A.childLanes=e,D}function eS(A,D,e){var d=D.pendingProps;switch(Hb(D),D.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kl(D),null;case 1:return Ju(D.type)&&ey(),Kl(D),null;case 3:return d=D.stateNode,l0(),Oo(Ku),Oo(Ql),$b(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(A===null||A.child===null)&&(xg(D)?D.flags|=4:A===null||A.memoizedState.isDehydrated&&(D.flags&256)===0||(D.flags|=1024,Bf!==null&&(eb(Bf),Bf=null))),Yx(A,D),Kl(D),null;case 5:Jb(D);var S=Fv(Tm.current);if(e=D.type,A!==null&&D.stateNode!=null)NT(A,D,e,d,S),A.ref!==D.ref&&(D.flags|=512,D.flags|=2097152);else{if(!d){if(D.stateNode===null)throw Error(la(166));return Kl(D),null}if(A=Fv(xh.current),xg(D)){d=D.stateNode,e=D.type;var r=D.memoizedProps;switch(d[vh]=D,d[_m]=r,A=(D.mode&1)!==0,e){case"dialog":zo("cancel",d),zo("close",d);break;case"iframe":case"object":case"embed":zo("load",d);break;case"video":case"audio":for(S=0;S<J0.length;S++)zo(J0[S],d);break;case"source":zo("error",d);break;case"img":case"image":case"link":zo("error",d),zo("load",d);break;case"details":zo("toggle",d);break;case"input":Z2(d,r),zo("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!r.multiple},zo("invalid",d);break;case"textarea":J2(d,r),zo("invalid",d)}xx(e,r),S=null;for(var a in r)if(r.hasOwnProperty(a)){var u=r[a];a==="children"?typeof u=="string"?d.textContent!==u&&(r.suppressHydrationWarning!==!0&&yg(d.textContent,u,A),S=["children",u]):typeof u=="number"&&d.textContent!==""+u&&(r.suppressHydrationWarning!==!0&&yg(d.textContent,u,A),S=["children",""+u]):fm.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&zo("scroll",d)}switch(e){case"input":cg(d),K2(d,r,!0);break;case"textarea":cg(d),$2(d);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(d.onclick=qg)}d=S,D.updateQueue=d,d!==null&&(D.flags|=4)}else{a=S.nodeType===9?S:S.ownerDocument,A==="http://www.w3.org/1999/xhtml"&&(A=h3(e)),A==="http://www.w3.org/1999/xhtml"?e==="script"?(A=a.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild)):typeof d.is=="string"?A=a.createElement(e,{is:d.is}):(A=a.createElement(e),e==="select"&&(a=A,d.multiple?a.multiple=!0:d.size&&(a.size=d.size))):A=a.createElementNS(A,e),A[vh]=D,A[_m]=d,OT(A,D,!1,!1),D.stateNode=A;e:{switch(a=bx(e,d),e){case"dialog":zo("cancel",A),zo("close",A),S=d;break;case"iframe":case"object":case"embed":zo("load",A),S=d;break;case"video":case"audio":for(S=0;S<J0.length;S++)zo(J0[S],A);S=d;break;case"source":zo("error",A),S=d;break;case"img":case"image":case"link":zo("error",A),zo("load",A),S=d;break;case"details":zo("toggle",A),S=d;break;case"input":Z2(A,d),S=vx(A,d),zo("invalid",A);break;case"option":S=d;break;case"select":A._wrapperState={wasMultiple:!!d.multiple},S=is({},d,{value:void 0}),zo("invalid",A);break;case"textarea":J2(A,d),S=gx(A,d),zo("invalid",A);break;default:S=d}xx(e,S),u=S;for(r in u)if(u.hasOwnProperty(r)){var c=u[r];r==="style"?d3(A,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&p3(A,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&hm(A,c):typeof c=="number"&&hm(A,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(fm.hasOwnProperty(r)?c!=null&&r==="onScroll"&&zo("scroll",A):c!=null&&Sb(A,r,c,a))}switch(e){case"input":cg(A),K2(A,d,!1);break;case"textarea":cg(A),$2(A);break;case"option":d.value!=null&&A.setAttribute("value",""+qp(d.value));break;case"select":A.multiple=!!d.multiple,r=d.value,r!=null?Qd(A,!!d.multiple,r,!1):d.defaultValue!=null&&Qd(A,!!d.multiple,d.defaultValue,!0);break;default:typeof S.onClick=="function"&&(A.onclick=qg)}switch(e){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(D.flags|=4)}D.ref!==null&&(D.flags|=512,D.flags|=2097152)}return Kl(D),null;case 6:if(A&&D.stateNode!=null)BT(A,D,A.memoizedProps,d);else{if(typeof d!="string"&&D.stateNode===null)throw Error(la(166));if(e=Fv(Tm.current),Fv(xh.current),xg(D)){if(d=D.stateNode,e=D.memoizedProps,d[vh]=D,(r=d.nodeValue!==e)&&(A=wc,A!==null))switch(A.tag){case 3:yg(d.nodeValue,e,(A.mode&1)!==0);break;case 5:A.memoizedProps.suppressHydrationWarning!==!0&&yg(d.nodeValue,e,(A.mode&1)!==0)}r&&(D.flags|=4)}else d=(e.nodeType===9?e:e.ownerDocument).createTextNode(d),d[vh]=D,D.stateNode=d}return Kl(D),null;case 13:if(Oo(ns),d=D.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(ts&&_c!==null&&(D.mode&1)!==0&&(D.flags&128)===0)rT(),o0(),D.flags|=98560,r=!1;else if(r=xg(D),d!==null&&d.dehydrated!==null){if(A===null){if(!r)throw Error(la(318));if(r=D.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(la(317));r[vh]=D}else o0(),(D.flags&128)===0&&(D.memoizedState=null),D.flags|=4;Kl(D),r=!1}else Bf!==null&&(eb(Bf),Bf=null),r=!0;if(!r)return D.flags&65536?D:null}return(D.flags&128)!==0?(D.lanes=e,D):(d=d!==null,d!==(A!==null&&A.memoizedState!==null)&&d&&(D.child.flags|=8192,(D.mode&1)!==0&&(A===null||(ns.current&1)!==0?il===0&&(il=3):u2())),D.updateQueue!==null&&(D.flags|=4),Kl(D),null);case 4:return l0(),Yx(A,D),A===null&&xm(D.stateNode.containerInfo),Kl(D),null;case 10:return Yb(D.type._context),Kl(D),null;case 17:return Ju(D.type)&&ey(),Kl(D),null;case 19:if(Oo(ns),r=D.memoizedState,r===null)return Kl(D),null;if(d=(D.flags&128)!==0,a=r.rendering,a===null)if(d)G0(r,!1);else{if(il!==0||A!==null&&(A.flags&128)!==0)for(A=D.child;A!==null;){if(a=sy(A),a!==null){for(D.flags|=128,G0(r,!1),d=a.updateQueue,d!==null&&(D.updateQueue=d,D.flags|=4),D.subtreeFlags=0,d=e,e=D.child;e!==null;)r=e,A=d,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=A,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,A=a.dependencies,r.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),e=e.sibling;return ko(ns,ns.current&1|2),D.child}A=A.sibling}r.tail!==null&&ks()>c0&&(D.flags|=128,d=!0,G0(r,!1),D.lanes=4194304)}else{if(!d)if(A=sy(a),A!==null){if(D.flags|=128,d=!0,e=A.updateQueue,e!==null&&(D.updateQueue=e,D.flags|=4),G0(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!ts)return Kl(D),null}else 2*ks()-r.renderingStartTime>c0&&e!==1073741824&&(D.flags|=128,d=!0,G0(r,!1),D.lanes=4194304);r.isBackwards?(a.sibling=D.child,D.child=a):(e=r.last,e!==null?e.sibling=a:D.child=a,r.last=a)}return r.tail!==null?(D=r.tail,r.rendering=D,r.tail=D.sibling,r.renderingStartTime=ks(),D.sibling=null,e=ns.current,ko(ns,d?e&1|2:e&1),D):(Kl(D),null);case 22:case 23:return l2(),d=D.memoizedState!==null,A!==null&&A.memoizedState!==null!==d&&(D.flags|=8192),d&&(D.mode&1)!==0?(xc&1073741824)!==0&&(Kl(D),D.subtreeFlags&6&&(D.flags|=8192)):Kl(D),null;case 24:return null;case 25:return null}throw Error(la(156,D.tag))}function tS(A,D){switch(Hb(D),D.tag){case 1:return Ju(D.type)&&ey(),A=D.flags,A&65536?(D.flags=A&-65537|128,D):null;case 3:return l0(),Oo(Ku),Oo(Ql),$b(),A=D.flags,(A&65536)!==0&&(A&128)===0?(D.flags=A&-65537|128,D):null;case 5:return Jb(D),null;case 13:if(Oo(ns),A=D.memoizedState,A!==null&&A.dehydrated!==null){if(D.alternate===null)throw Error(la(340));o0()}return A=D.flags,A&65536?(D.flags=A&-65537|128,D):null;case 19:return Oo(ns),null;case 4:return l0(),null;case 10:return Yb(D.type._context),null;case 22:case 23:return l2(),null;case 24:return null;default:return null}}var wg=!1,Jl=!1,rS=typeof WeakSet=="function"?WeakSet:Set,Pa=null;function Zd(A,D){var e=A.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(d){vs(A,D,d)}else e.current=null}function Xx(A,D,e){try{e()}catch(d){vs(A,D,d)}}var U_=!1;function nS(A,D){if(Lx=Jg,A=G3(),Ub(A)){if("selectionStart"in A)var e={start:A.selectionStart,end:A.selectionEnd};else e:{e=(e=A.ownerDocument)&&e.defaultView||window;var d=e.getSelection&&e.getSelection();if(d&&d.rangeCount!==0){e=d.anchorNode;var S=d.anchorOffset,r=d.focusNode;d=d.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break e}var a=0,u=-1,c=-1,t=0,f=0,n=A,o=null;t:for(;;){for(var l;n!==e||S!==0&&n.nodeType!==3||(u=a+S),n!==r||d!==0&&n.nodeType!==3||(c=a+d),n.nodeType===3&&(a+=n.nodeValue.length),(l=n.firstChild)!==null;)o=n,n=l;for(;;){if(n===A)break t;if(o===e&&++t===S&&(u=a),o===r&&++f===d&&(c=a),(l=n.nextSibling)!==null)break;n=o,o=n.parentNode}n=l}e=u===-1||c===-1?null:{start:u,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(Px={focusedElem:A,selectionRange:e},Jg=!1,Pa=D;Pa!==null;)if(D=Pa,A=D.child,(D.subtreeFlags&1028)!==0&&A!==null)A.return=D,Pa=A;else for(;Pa!==null;){D=Pa;try{var h=D.alternate;if((D.flags&1024)!==0)switch(D.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var i=h.memoizedProps,s=h.memoizedState,p=D.stateNode,v=p.getSnapshotBeforeUpdate(D.elementType===D.type?i:Of(D.type,i),s);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var m=D.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(la(163))}}catch(b){vs(D,D.return,b)}if(A=D.sibling,A!==null){A.return=D.return,Pa=A;break}Pa=D.return}return h=U_,U_=!1,h}function om(A,D,e){var d=D.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var S=d=d.next;do{if((S.tag&A)===A){var r=S.destroy;S.destroy=void 0,r!==void 0&&Xx(D,e,r)}S=S.next}while(S!==d)}}function Cy(A,D){if(D=D.updateQueue,D=D!==null?D.lastEffect:null,D!==null){var e=D=D.next;do{if((e.tag&A)===A){var d=e.create;e.destroy=d()}e=e.next}while(e!==D)}}function Zx(A){var D=A.ref;if(D!==null){var e=A.stateNode;switch(A.tag){case 5:A=e;break;default:A=e}typeof D=="function"?D(A):D.current=A}}function UT(A){var D=A.alternate;D!==null&&(A.alternate=null,UT(D)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(D=A.stateNode,D!==null&&(delete D[vh],delete D[_m],delete D[Ix],delete D[Bk],delete D[Uk])),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function VT(A){return A.tag===5||A.tag===3||A.tag===4}function V_(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||VT(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Kx(A,D,e){var d=A.tag;if(d===5||d===6)A=A.stateNode,D?e.nodeType===8?e.parentNode.insertBefore(A,D):e.insertBefore(A,D):(e.nodeType===8?(D=e.parentNode,D.insertBefore(A,e)):(D=e,D.appendChild(A)),e=e._reactRootContainer,e!=null||D.onclick!==null||(D.onclick=qg));else if(d!==4&&(A=A.child,A!==null))for(Kx(A,D,e),A=A.sibling;A!==null;)Kx(A,D,e),A=A.sibling}function Jx(A,D,e){var d=A.tag;if(d===5||d===6)A=A.stateNode,D?e.insertBefore(A,D):e.appendChild(A);else if(d!==4&&(A=A.child,A!==null))for(Jx(A,D,e),A=A.sibling;A!==null;)Jx(A,D,e),A=A.sibling}var Rl=null,Nf=!1;function Ip(A,D,e){for(e=e.child;e!==null;)HT(A,D,e),e=e.sibling}function HT(A,D,e){if(yh&&typeof yh.onCommitFiberUnmount=="function")try{yh.onCommitFiberUnmount(by,e)}catch{}switch(e.tag){case 5:Jl||Zd(e,D);case 6:var d=Rl,S=Nf;Rl=null,Ip(A,D,e),Rl=d,Nf=S,Rl!==null&&(Nf?(A=Rl,e=e.stateNode,A.nodeType===8?A.parentNode.removeChild(e):A.removeChild(e)):Rl.removeChild(e.stateNode));break;case 18:Rl!==null&&(Nf?(A=Rl,e=e.stateNode,A.nodeType===8?L1(A.parentNode,e):A.nodeType===1&&L1(A,e),mm(A)):L1(Rl,e.stateNode));break;case 4:d=Rl,S=Nf,Rl=e.stateNode.containerInfo,Nf=!0,Ip(A,D,e),Rl=d,Nf=S;break;case 0:case 11:case 14:case 15:if(!Jl&&(d=e.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){S=d=d.next;do{var r=S,a=r.destroy;r=r.tag,a!==void 0&&((r&2)!==0||(r&4)!==0)&&Xx(e,D,a),S=S.next}while(S!==d)}Ip(A,D,e);break;case 1:if(!Jl&&(Zd(e,D),d=e.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=e.memoizedProps,d.state=e.memoizedState,d.componentWillUnmount()}catch(u){vs(e,D,u)}Ip(A,D,e);break;case 21:Ip(A,D,e);break;case 22:e.mode&1?(Jl=(d=Jl)||e.memoizedState!==null,Ip(A,D,e),Jl=d):Ip(A,D,e);break;default:Ip(A,D,e)}}function H_(A){var D=A.updateQueue;if(D!==null){A.updateQueue=null;var e=A.stateNode;e===null&&(e=A.stateNode=new rS),D.forEach(function(d){var S=hS.bind(null,A,d);e.has(d)||(e.add(d),d.then(S,S))})}}function Ff(A,D){var e=D.deletions;if(e!==null)for(var d=0;d<e.length;d++){var S=e[d];try{var r=A,a=D,u=a;e:for(;u!==null;){switch(u.tag){case 5:Rl=u.stateNode,Nf=!1;break e;case 3:Rl=u.stateNode.containerInfo,Nf=!0;break e;case 4:Rl=u.stateNode.containerInfo,Nf=!0;break e}u=u.return}if(Rl===null)throw Error(la(160));HT(r,a,S),Rl=null,Nf=!1;var c=S.alternate;c!==null&&(c.return=null),S.return=null}catch(t){vs(S,D,t)}}if(D.subtreeFlags&12854)for(D=D.child;D!==null;)GT(D,A),D=D.sibling}function GT(A,D){var e=A.alternate,d=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:if(Ff(D,A),hh(A),d&4){try{om(3,A,A.return),Cy(3,A)}catch(i){vs(A,A.return,i)}try{om(5,A,A.return)}catch(i){vs(A,A.return,i)}}break;case 1:Ff(D,A),hh(A),d&512&&e!==null&&Zd(e,e.return);break;case 5:if(Ff(D,A),hh(A),d&512&&e!==null&&Zd(e,e.return),A.flags&32){var S=A.stateNode;try{hm(S,"")}catch(i){vs(A,A.return,i)}}if(d&4&&(S=A.stateNode,S!=null)){var r=A.memoizedProps,a=e!==null?e.memoizedProps:r,u=A.type,c=A.updateQueue;if(A.updateQueue=null,c!==null)try{u==="input"&&r.type==="radio"&&r.name!=null&&c3(S,r),bx(u,a);var t=bx(u,r);for(a=0;a<c.length;a+=2){var f=c[a],n=c[a+1];f==="style"?d3(S,n):f==="dangerouslySetInnerHTML"?p3(S,n):f==="children"?hm(S,n):Sb(S,f,n,t)}switch(u){case"input":dx(S,r);break;case"textarea":f3(S,r);break;case"select":var o=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!r.multiple;var l=r.value;l!=null?Qd(S,!!r.multiple,l,!1):o!==!!r.multiple&&(r.defaultValue!=null?Qd(S,!!r.multiple,r.defaultValue,!0):Qd(S,!!r.multiple,r.multiple?[]:"",!1))}S[_m]=r}catch(i){vs(A,A.return,i)}}break;case 6:if(Ff(D,A),hh(A),d&4){if(A.stateNode===null)throw Error(la(162));S=A.stateNode,r=A.memoizedProps;try{S.nodeValue=r}catch(i){vs(A,A.return,i)}}break;case 3:if(Ff(D,A),hh(A),d&4&&e!==null&&e.memoizedState.isDehydrated)try{mm(D.containerInfo)}catch(i){vs(A,A.return,i)}break;case 4:Ff(D,A),hh(A);break;case 13:Ff(D,A),hh(A),S=A.child,S.flags&8192&&(r=S.memoizedState!==null,S.stateNode.isHidden=r,!r||S.alternate!==null&&S.alternate.memoizedState!==null||(o2=ks())),d&4&&H_(A);break;case 22:if(f=e!==null&&e.memoizedState!==null,A.mode&1?(Jl=(t=Jl)||f,Ff(D,A),Jl=t):Ff(D,A),hh(A),d&8192){if(t=A.memoizedState!==null,(A.stateNode.isHidden=t)&&!f&&(A.mode&1)!==0)for(Pa=A,f=A.child;f!==null;){for(n=Pa=f;Pa!==null;){switch(o=Pa,l=o.child,o.tag){case 0:case 11:case 14:case 15:om(4,o,o.return);break;case 1:Zd(o,o.return);var h=o.stateNode;if(typeof h.componentWillUnmount=="function"){d=o,e=o.return;try{D=d,h.props=D.memoizedProps,h.state=D.memoizedState,h.componentWillUnmount()}catch(i){vs(d,e,i)}}break;case 5:Zd(o,o.return);break;case 22:if(o.memoizedState!==null){j_(n);continue}}l!==null?(l.return=o,Pa=l):j_(n)}f=f.sibling}e:for(f=null,n=A;;){if(n.tag===5){if(f===null){f=n;try{S=n.stateNode,t?(r=S.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(u=n.stateNode,c=n.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=v3("display",a))}catch(i){vs(A,A.return,i)}}}else if(n.tag===6){if(f===null)try{n.stateNode.nodeValue=t?"":n.memoizedProps}catch(i){vs(A,A.return,i)}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===A)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===A)break e;for(;n.sibling===null;){if(n.return===null||n.return===A)break e;f===n&&(f=null),n=n.return}f===n&&(f=null),n.sibling.return=n.return,n=n.sibling}}break;case 19:Ff(D,A),hh(A),d&4&&H_(A);break;case 21:break;default:Ff(D,A),hh(A)}}function hh(A){var D=A.flags;if(D&2){try{e:{for(var e=A.return;e!==null;){if(VT(e)){var d=e;break e}e=e.return}throw Error(la(160))}switch(d.tag){case 5:var S=d.stateNode;d.flags&32&&(hm(S,""),d.flags&=-33);var r=V_(A);Jx(A,r,S);break;case 3:case 4:var a=d.stateNode.containerInfo,u=V_(A);Kx(A,u,a);break;default:throw Error(la(161))}}catch(c){vs(A,A.return,c)}A.flags&=-3}D&4096&&(A.flags&=-4097)}function aS(A,D,e){Pa=A,jT(A)}function jT(A,D,e){for(var d=(A.mode&1)!==0;Pa!==null;){var S=Pa,r=S.child;if(S.tag===22&&d){var a=S.memoizedState!==null||wg;if(!a){var u=S.alternate,c=u!==null&&u.memoizedState!==null||Jl;u=wg;var t=Jl;if(wg=a,(Jl=c)&&!t)for(Pa=S;Pa!==null;)a=Pa,c=a.child,a.tag===22&&a.memoizedState!==null?W_(S):c!==null?(c.return=a,Pa=c):W_(S);for(;r!==null;)Pa=r,jT(r),r=r.sibling;Pa=S,wg=u,Jl=t}G_(A)}else(S.subtreeFlags&8772)!==0&&r!==null?(r.return=S,Pa=r):G_(A)}}function G_(A){for(;Pa!==null;){var D=Pa;if((D.flags&8772)!==0){var e=D.alternate;try{if((D.flags&8772)!==0)switch(D.tag){case 0:case 11:case 15:Jl||Cy(5,D);break;case 1:var d=D.stateNode;if(D.flags&4&&!Jl)if(e===null)d.componentDidMount();else{var S=D.elementType===D.type?e.memoizedProps:Of(D.type,e.memoizedProps);d.componentDidUpdate(S,e.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var r=D.updateQueue;r!==null&&k_(D,r,d);break;case 3:var a=D.updateQueue;if(a!==null){if(e=null,D.child!==null)switch(D.child.tag){case 5:e=D.child.stateNode;break;case 1:e=D.child.stateNode}k_(D,a,e)}break;case 5:var u=D.stateNode;if(e===null&&D.flags&4){e=u;var c=D.memoizedProps;switch(D.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(D.memoizedState===null){var t=D.alternate;if(t!==null){var f=t.memoizedState;if(f!==null){var n=f.dehydrated;n!==null&&mm(n)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(la(163))}Jl||D.flags&512&&Zx(D)}catch(o){vs(D,D.return,o)}}if(D===A){Pa=null;break}if(e=D.sibling,e!==null){e.return=D.return,Pa=e;break}Pa=D.return}}function j_(A){for(;Pa!==null;){var D=Pa;if(D===A){Pa=null;break}var e=D.sibling;if(e!==null){e.return=D.return,Pa=e;break}Pa=D.return}}function W_(A){for(;Pa!==null;){var D=Pa;try{switch(D.tag){case 0:case 11:case 15:var e=D.return;try{Cy(4,D)}catch(c){vs(D,e,c)}break;case 1:var d=D.stateNode;if(typeof d.componentDidMount=="function"){var S=D.return;try{d.componentDidMount()}catch(c){vs(D,S,c)}}var r=D.return;try{Zx(D)}catch(c){vs(D,r,c)}break;case 5:var a=D.return;try{Zx(D)}catch(c){vs(D,a,c)}}}catch(c){vs(D,D.return,c)}if(D===A){Pa=null;break}var u=D.sibling;if(u!==null){u.return=D.return,Pa=u;break}Pa=D.return}}var iS=Math.ceil,cy=ap.ReactCurrentDispatcher,a2=ap.ReactCurrentOwner,of=ap.ReactCurrentBatchConfig,Wi=0,dl=null,Vs=null,Dl=0,xc=0,Kd=nv(0),il=0,Sm=null,jv=0,Ey=0,i2=0,sm=null,Xu=null,o2=0,c0=1/0,Xh=null,fy=!1,$x=null,Kp=null,Tg=!1,Gp=null,hy=0,lm=0,Qx=null,Og=-1,Ng=0;function Tu(){return(Wi&6)!==0?ks():Og!==-1?Og:Og=ks()}function Jp(A){return(A.mode&1)===0?1:(Wi&2)!==0&&Dl!==0?Dl&-Dl:Hk.transition!==null?(Ng===0&&(Ng=S3()),Ng):(A=lo,A!==0||(A=window.event,A=A===void 0?16:I3(A.type)),A)}function Vf(A,D,e,d){if(50<lm)throw lm=0,Qx=null,Error(la(185));Pm(A,e,d),((Wi&2)===0||A!==dl)&&(A===dl&&((Wi&2)===0&&(Ey|=e),il===4&&Vp(A,Dl)),$u(A,d),e===1&&Wi===0&&(D.mode&1)===0&&(c0=ks()+500,My&&av()))}function $u(A,D){var e=A.callbackNode;HM(A,D);var d=Kg(A,A===dl?Dl:0);if(d===0)e!==null&&e_(e),A.callbackNode=null,A.callbackPriority=0;else if(D=d&-d,A.callbackPriority!==D){if(e!=null&&e_(e),D===1)A.tag===0?Vk(Y_.bind(null,A)):q3(Y_.bind(null,A)),Ok(function(){(Wi&6)===0&&av()}),e=null;else{switch(C3(d)){case 1:e=Rb;break;case 4:e=M3;break;case 16:e=Zg;break;case 536870912:e=k3;break;default:e=Zg}e=QT(e,WT.bind(null,A))}A.callbackPriority=D,A.callbackNode=e}}function WT(A,D){if(Og=-1,Ng=0,(Wi&6)!==0)throw Error(la(327));var e=A.callbackNode;if(n0()&&A.callbackNode!==e)return null;var d=Kg(A,A===dl?Dl:0);if(d===0)return null;if((d&30)!==0||(d&A.expiredLanes)!==0||D)D=py(A,d);else{D=d;var S=Wi;Wi|=2;var r=XT();(dl!==A||Dl!==D)&&(Xh=null,c0=ks()+500,Nv(A,D));do try{lS();break}catch(u){YT(A,u)}while(1);Wb(),cy.current=r,Wi=S,Vs!==null?D=0:(dl=null,Dl=0,D=il)}if(D!==0){if(D===2&&(S=Mx(A),S!==0&&(d=S,D=qx(A,S))),D===1)throw e=Sm,Nv(A,0),Vp(A,d),$u(A,ks()),e;if(D===6)Vp(A,d);else{if(S=A.current.alternate,(d&30)===0&&!oS(S)&&(D=py(A,d),D===2&&(r=Mx(A),r!==0&&(d=r,D=qx(A,r))),D===1))throw e=Sm,Nv(A,0),Vp(A,d),$u(A,ks()),e;switch(A.finishedWork=S,A.finishedLanes=d,D){case 0:case 1:throw Error(la(345));case 2:Rv(A,Xu,Xh);break;case 3:if(Vp(A,d),(d&130023424)===d&&(D=o2+500-ks(),10<D)){if(Kg(A,0)!==0)break;if(S=A.suspendedLanes,(S&d)!==d){Tu(),A.pingedLanes|=A.suspendedLanes&S;break}A.timeoutHandle=Dx(Rv.bind(null,A,Xu,Xh),D);break}Rv(A,Xu,Xh);break;case 4:if(Vp(A,d),(d&4194240)===d)break;for(D=A.eventTimes,S=-1;0<d;){var a=31-Uf(d);r=1<<a,a=D[a],a>S&&(S=a),d&=~r}if(d=S,d=ks()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*iS(d/1960))-d,10<d){A.timeoutHandle=Dx(Rv.bind(null,A,Xu,Xh),d);break}Rv(A,Xu,Xh);break;case 5:Rv(A,Xu,Xh);break;default:throw Error(la(329))}}}return $u(A,ks()),A.callbackNode===e?WT.bind(null,A):null}function qx(A,D){var e=sm;return A.current.memoizedState.isDehydrated&&(Nv(A,D).flags|=256),A=py(A,D),A!==2&&(D=Xu,Xu=e,D!==null&&eb(D)),A}function eb(A){Xu===null?Xu=A:Xu.push.apply(Xu,A)}function oS(A){for(var D=A;;){if(D.flags&16384){var e=D.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var d=0;d<e.length;d++){var S=e[d],r=S.getSnapshot;S=S.value;try{if(!Hf(r(),S))return!1}catch{return!1}}}if(e=D.child,D.subtreeFlags&16384&&e!==null)e.return=D,D=e;else{if(D===A)break;for(;D.sibling===null;){if(D.return===null||D.return===A)return!0;D=D.return}D.sibling.return=D.return,D=D.sibling}}return!0}function Vp(A,D){for(D&=~i2,D&=~Ey,A.suspendedLanes|=D,A.pingedLanes&=~D,A=A.expirationTimes;0<D;){var e=31-Uf(D),d=1<<e;A[e]=-1,D&=~d}}function Y_(A){if((Wi&6)!==0)throw Error(la(327));n0();var D=Kg(A,0);if((D&1)===0)return $u(A,ks()),null;var e=py(A,D);if(A.tag!==0&&e===2){var d=Mx(A);d!==0&&(D=d,e=qx(A,d))}if(e===1)throw e=Sm,Nv(A,0),Vp(A,D),$u(A,ks()),e;if(e===6)throw Error(la(345));return A.finishedWork=A.current.alternate,A.finishedLanes=D,Rv(A,Xu,Xh),$u(A,ks()),null}function s2(A,D){var e=Wi;Wi|=1;try{return A(D)}finally{Wi=e,Wi===0&&(c0=ks()+500,My&&av())}}function Wv(A){Gp!==null&&Gp.tag===0&&(Wi&6)===0&&n0();var D=Wi;Wi|=1;var e=of.transition,d=lo;try{if(of.transition=null,lo=1,A)return A()}finally{lo=d,of.transition=e,Wi=D,(Wi&6)===0&&av()}}function l2(){xc=Kd.current,Oo(Kd)}function Nv(A,D){A.finishedWork=null,A.finishedLanes=0;var e=A.timeoutHandle;if(e!==-1&&(A.timeoutHandle=-1,Fk(e)),Vs!==null)for(e=Vs.return;e!==null;){var d=e;switch(Hb(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ey();break;case 3:l0(),Oo(Ku),Oo(Ql),$b();break;case 5:Jb(d);break;case 4:l0();break;case 13:Oo(ns);break;case 19:Oo(ns);break;case 10:Yb(d.type._context);break;case 22:case 23:l2()}e=e.return}if(dl=A,Vs=A=$p(A.current,null),Dl=xc=D,il=0,Sm=null,i2=Ey=jv=0,Xu=sm=null,zv!==null){for(D=0;D<zv.length;D++)if(e=zv[D],d=e.interleaved,d!==null){e.interleaved=null;var S=d.next,r=e.pending;if(r!==null){var a=r.next;r.next=S,d.next=a}e.pending=d}zv=null}return A}function YT(A,D){do{var e=Vs;try{if(Wb(),Ig.current=uy,ly){for(var d=as.memoizedState;d!==null;){var S=d.queue;S!==null&&(S.pending=null),d=d.next}ly=!1}if(Gv=0,vl=al=as=null,im=!1,Am=0,a2.current=null,e===null||e.return===null){il=1,Sm=D,Vs=null;break}e:{var r=A,a=e.return,u=e,c=D;if(D=Dl,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var t=c,f=u,n=f.tag;if((f.mode&1)===0&&(n===0||n===11||n===15)){var o=f.alternate;o?(f.updateQueue=o.updateQueue,f.memoizedState=o.memoizedState,f.lanes=o.lanes):(f.updateQueue=null,f.memoizedState=null)}var l=D_(a);if(l!==null){l.flags&=-257,I_(l,a,u,r,D),l.mode&1&&R_(r,t,D),D=l,c=t;var h=D.updateQueue;if(h===null){var i=new Set;i.add(c),D.updateQueue=i}else h.add(c);break e}else{if((D&1)===0){R_(r,t,D),u2();break e}c=Error(la(426))}}else if(ts&&u.mode&1){var s=D_(a);if(s!==null){(s.flags&65536)===0&&(s.flags|=256),I_(s,a,u,r,D),Gb(u0(c,u));break e}}r=c=u0(c,u),il!==4&&(il=2),sm===null?sm=[r]:sm.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,D&=-D,r.lanes|=D;var p=ET(r,c,D);M_(r,p);break e;case 1:u=c;var v=r.type,m=r.stateNode;if((r.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Kp===null||!Kp.has(m)))){r.flags|=65536,D&=-D,r.lanes|=D;var b=LT(r,u,D);M_(r,b);break e}}r=r.return}while(r!==null)}KT(e)}catch(y){D=y,Vs===e&&e!==null&&(Vs=e=e.return);continue}break}while(1)}function XT(){var A=cy.current;return cy.current=uy,A===null?uy:A}function u2(){(il===0||il===3||il===2)&&(il=4),dl===null||(jv&268435455)===0&&(Ey&268435455)===0||Vp(dl,Dl)}function py(A,D){var e=Wi;Wi|=2;var d=XT();(dl!==A||Dl!==D)&&(Xh=null,Nv(A,D));do try{sS();break}catch(S){YT(A,S)}while(1);if(Wb(),Wi=e,cy.current=d,Vs!==null)throw Error(la(261));return dl=null,Dl=0,il}function sS(){for(;Vs!==null;)ZT(Vs)}function lS(){for(;Vs!==null&&!DM();)ZT(Vs)}function ZT(A){var D=$T(A.alternate,A,xc);A.memoizedProps=A.pendingProps,D===null?KT(A):Vs=D,a2.current=null}function KT(A){var D=A;do{var e=D.alternate;if(A=D.return,(D.flags&32768)===0){if(e=eS(e,D,xc),e!==null){Vs=e;return}}else{if(e=tS(e,D),e!==null){e.flags&=32767,Vs=e;return}if(A!==null)A.flags|=32768,A.subtreeFlags=0,A.deletions=null;else{il=6,Vs=null;return}}if(D=D.sibling,D!==null){Vs=D;return}Vs=D=A}while(D!==null);il===0&&(il=5)}function Rv(A,D,e){var d=lo,S=of.transition;try{of.transition=null,lo=1,uS(A,D,e,d)}finally{of.transition=S,lo=d}return null}function uS(A,D,e,d){do n0();while(Gp!==null);if((Wi&6)!==0)throw Error(la(327));e=A.finishedWork;var S=A.finishedLanes;if(e===null)return null;if(A.finishedWork=null,A.finishedLanes=0,e===A.current)throw Error(la(177));A.callbackNode=null,A.callbackPriority=0;var r=e.lanes|e.childLanes;if(GM(A,r),A===dl&&(Vs=dl=null,Dl=0),(e.subtreeFlags&2064)===0&&(e.flags&2064)===0||Tg||(Tg=!0,QT(Zg,function(){return n0(),null})),r=(e.flags&15990)!==0,(e.subtreeFlags&15990)!==0||r){r=of.transition,of.transition=null;var a=lo;lo=1;var u=Wi;Wi|=4,a2.current=null,nS(A,e),GT(e,A),Ek(Px),Jg=!!Lx,Px=Lx=null,A.current=e,aS(e),IM(),Wi=u,lo=a,of.transition=r}else A.current=e;if(Tg&&(Tg=!1,Gp=A,hy=S),r=A.pendingLanes,r===0&&(Kp=null),OM(e.stateNode),$u(A,ks()),D!==null)for(d=A.onRecoverableError,e=0;e<D.length;e++)S=D[e],d(S.value,{componentStack:S.stack,digest:S.digest});if(fy)throw fy=!1,A=$x,$x=null,A;return(hy&1)!==0&&A.tag!==0&&n0(),r=A.pendingLanes,(r&1)!==0?A===Qx?lm++:(lm=0,Qx=A):lm=0,av(),null}function n0(){if(Gp!==null){var A=C3(hy),D=of.transition,e=lo;try{if(of.transition=null,lo=16>A?16:A,Gp===null)var d=!1;else{if(A=Gp,Gp=null,hy=0,(Wi&6)!==0)throw Error(la(331));var S=Wi;for(Wi|=4,Pa=A.current;Pa!==null;){var r=Pa,a=r.child;if((Pa.flags&16)!==0){var u=r.deletions;if(u!==null){for(var c=0;c<u.length;c++){var t=u[c];for(Pa=t;Pa!==null;){var f=Pa;switch(f.tag){case 0:case 11:case 15:om(8,f,r)}var n=f.child;if(n!==null)n.return=f,Pa=n;else for(;Pa!==null;){f=Pa;var o=f.sibling,l=f.return;if(UT(f),f===t){Pa=null;break}if(o!==null){o.return=l,Pa=o;break}Pa=l}}}var h=r.alternate;if(h!==null){var i=h.child;if(i!==null){h.child=null;do{var s=i.sibling;i.sibling=null,i=s}while(i!==null)}}Pa=r}}if((r.subtreeFlags&2064)!==0&&a!==null)a.return=r,Pa=a;else e:for(;Pa!==null;){if(r=Pa,(r.flags&2048)!==0)switch(r.tag){case 0:case 11:case 15:om(9,r,r.return)}var p=r.sibling;if(p!==null){p.return=r.return,Pa=p;break e}Pa=r.return}}var v=A.current;for(Pa=v;Pa!==null;){a=Pa;var m=a.child;if((a.subtreeFlags&2064)!==0&&m!==null)m.return=a,Pa=m;else e:for(a=v;Pa!==null;){if(u=Pa,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:Cy(9,u)}}catch(y){vs(u,u.return,y)}if(u===a){Pa=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,Pa=b;break e}Pa=u.return}}if(Wi=S,av(),yh&&typeof yh.onPostCommitFiberRoot=="function")try{yh.onPostCommitFiberRoot(by,A)}catch{}d=!0}return d}finally{lo=e,of.transition=D}}return!1}function X_(A,D,e){D=u0(e,D),D=ET(A,D,1),A=Zp(A,D,1),D=Tu(),A!==null&&(Pm(A,1,D),$u(A,D))}function vs(A,D,e){if(A.tag===3)X_(A,A,e);else for(;D!==null;){if(D.tag===3){X_(D,A,e);break}else if(D.tag===1){var d=D.stateNode;if(typeof D.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Kp===null||!Kp.has(d))){A=u0(e,A),A=LT(D,A,1),D=Zp(D,A,1),A=Tu(),D!==null&&(Pm(D,1,A),$u(D,A));break}}D=D.return}}function cS(A,D,e){var d=A.pingCache;d!==null&&d.delete(D),D=Tu(),A.pingedLanes|=A.suspendedLanes&e,dl===A&&(Dl&e)===e&&(il===4||il===3&&(Dl&130023424)===Dl&&500>ks()-o2?Nv(A,0):i2|=e),$u(A,D)}function JT(A,D){D===0&&((A.mode&1)===0?D=1:(D=pg,pg<<=1,(pg&130023424)===0&&(pg=4194304)));var e=Tu();A=rp(A,D),A!==null&&(Pm(A,D,e),$u(A,e))}function fS(A){var D=A.memoizedState,e=0;D!==null&&(e=D.retryLane),JT(A,e)}function hS(A,D){var e=0;switch(A.tag){case 13:var d=A.stateNode,S=A.memoizedState;S!==null&&(e=S.retryLane);break;case 19:d=A.stateNode;break;default:throw Error(la(314))}d!==null&&d.delete(D),JT(A,e)}var $T;$T=function(A,D,e){if(A!==null)if(A.memoizedProps!==D.pendingProps||Ku.current)Zu=!0;else{if((A.lanes&e)===0&&(D.flags&128)===0)return Zu=!1,qk(A,D,e);Zu=(A.flags&131072)!==0}else Zu=!1,ts&&(D.flags&1048576)!==0&&eT(D,ny,D.index);switch(D.lanes=0,D.tag){case 2:var d=D.type;Fg(A,D),A=D.pendingProps;var S=i0(D,Ql.current);r0(D,e),S=qb(null,D,d,A,S,e);var r=e2();return D.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(D.tag=1,D.memoizedState=null,D.updateQueue=null,Ju(d)?(r=!0,ty(D)):r=!1,D.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Zb(D),S.updater=ky,D.stateNode=S,S._reactInternals=D,Ux(D,d,A,e),D=Gx(null,D,d,!0,r,e)):(D.tag=0,ts&&r&&Vb(D),wu(null,D,S,e),D=D.child),D;case 16:d=D.elementType;e:{switch(Fg(A,D),A=D.pendingProps,S=d._init,d=S(d._payload),D.type=d,S=D.tag=vS(d),A=Of(d,A),S){case 0:D=Hx(null,D,d,A,e);break e;case 1:D=O_(null,D,d,A,e);break e;case 11:D=z_(null,D,d,A,e);break e;case 14:D=F_(null,D,d,Of(d.type,A),e);break e}throw Error(la(306,d,""))}return D;case 0:return d=D.type,S=D.pendingProps,S=D.elementType===d?S:Of(d,S),Hx(A,D,d,S,e);case 1:return d=D.type,S=D.pendingProps,S=D.elementType===d?S:Of(d,S),O_(A,D,d,S,e);case 3:e:{if(IT(D),A===null)throw Error(la(387));d=D.pendingProps,r=D.memoizedState,S=r.element,aT(A,D),oy(D,d,null,e);var a=D.memoizedState;if(d=a.element,r.isDehydrated)if(r={element:d,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},D.updateQueue.baseState=r,D.memoizedState=r,D.flags&256){S=u0(Error(la(423)),D),D=N_(A,D,d,e,S);break e}else if(d!==S){S=u0(Error(la(424)),D),D=N_(A,D,d,e,S);break e}else for(_c=Xp(D.stateNode.containerInfo.firstChild),wc=D,ts=!0,Bf=null,e=lT(D,null,d,e),D.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(o0(),d===S){D=np(A,D,e);break e}wu(A,D,d,e)}D=D.child}return D;case 5:return uT(D),A===null&&Ox(D),d=D.type,S=D.pendingProps,r=A!==null?A.memoizedProps:null,a=S.children,Rx(d,S)?a=null:r!==null&&Rx(d,r)&&(D.flags|=32),DT(A,D),wu(A,D,a,e),D.child;case 6:return A===null&&Ox(D),null;case 13:return zT(A,D,e);case 4:return Kb(D,D.stateNode.containerInfo),d=D.pendingProps,A===null?D.child=s0(D,null,d,e):wu(A,D,d,e),D.child;case 11:return d=D.type,S=D.pendingProps,S=D.elementType===d?S:Of(d,S),z_(A,D,d,S,e);case 7:return wu(A,D,D.pendingProps,e),D.child;case 8:return wu(A,D,D.pendingProps.children,e),D.child;case 12:return wu(A,D,D.pendingProps.children,e),D.child;case 10:e:{if(d=D.type._context,S=D.pendingProps,r=D.memoizedProps,a=S.value,ko(ay,d._currentValue),d._currentValue=a,r!==null)if(Hf(r.value,a)){if(r.children===S.children&&!Ku.current){D=np(A,D,e);break e}}else for(r=D.child,r!==null&&(r.return=D);r!==null;){var u=r.dependencies;if(u!==null){a=r.child;for(var c=u.firstContext;c!==null;){if(c.context===d){if(r.tag===1){c=Qh(-1,e&-e),c.tag=2;var t=r.updateQueue;if(t!==null){t=t.shared;var f=t.pending;f===null?c.next=c:(c.next=f.next,f.next=c),t.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),Nx(r.return,e,D),u.lanes|=e;break}c=c.next}}else if(r.tag===10)a=r.type===D.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(la(341));a.lanes|=e,u=a.alternate,u!==null&&(u.lanes|=e),Nx(a,e,D),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===D){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}wu(A,D,S.children,e),D=D.child}return D;case 9:return S=D.type,d=D.pendingProps.children,r0(D,e),S=sf(S),d=d(S),D.flags|=1,wu(A,D,d,e),D.child;case 14:return d=D.type,S=Of(d,D.pendingProps),S=Of(d.type,S),F_(A,D,d,S,e);case 15:return PT(A,D,D.type,D.pendingProps,e);case 17:return d=D.type,S=D.pendingProps,S=D.elementType===d?S:Of(d,S),Fg(A,D),D.tag=1,Ju(d)?(A=!0,ty(D)):A=!1,r0(D,e),oT(D,d,S),Ux(D,d,S,e),Gx(null,D,d,!0,A,e);case 19:return FT(A,D,e);case 22:return RT(A,D,e)}throw Error(la(156,D.tag))};function QT(A,D){return A3(A,D)}function pS(A,D,e,d){this.tag=A,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=D,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nf(A,D,e,d){return new pS(A,D,e,d)}function c2(A){return A=A.prototype,!(!A||!A.isReactComponent)}function vS(A){if(typeof A=="function")return c2(A)?1:0;if(A!=null){if(A=A.$$typeof,A===Eb)return 11;if(A===Lb)return 14}return 2}function $p(A,D){var e=A.alternate;return e===null?(e=nf(A.tag,D,A.key,A.mode),e.elementType=A.elementType,e.type=A.type,e.stateNode=A.stateNode,e.alternate=A,A.alternate=e):(e.pendingProps=D,e.type=A.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=A.flags&14680064,e.childLanes=A.childLanes,e.lanes=A.lanes,e.child=A.child,e.memoizedProps=A.memoizedProps,e.memoizedState=A.memoizedState,e.updateQueue=A.updateQueue,D=A.dependencies,e.dependencies=D===null?null:{lanes:D.lanes,firstContext:D.firstContext},e.sibling=A.sibling,e.index=A.index,e.ref=A.ref,e}function Bg(A,D,e,d,S,r){var a=2;if(d=A,typeof A=="function")c2(A)&&(a=1);else if(typeof A=="string")a=5;else e:switch(A){case Bd:return Bv(e.children,S,r,D);case Cb:a=8,S|=8;break;case cx:return A=nf(12,e,D,S|2),A.elementType=cx,A.lanes=r,A;case fx:return A=nf(13,e,D,S),A.elementType=fx,A.lanes=r,A;case hx:return A=nf(19,e,D,S),A.elementType=hx,A.lanes=r,A;case s3:return Ly(e,S,r,D);default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case i3:a=10;break e;case o3:a=9;break e;case Eb:a=11;break e;case Lb:a=14;break e;case Np:a=16,d=null;break e}throw Error(la(130,A==null?A:typeof A,""))}return D=nf(a,e,D,S),D.elementType=A,D.type=d,D.lanes=r,D}function Bv(A,D,e,d){return A=nf(7,A,d,D),A.lanes=e,A}function Ly(A,D,e,d){return A=nf(22,A,d,D),A.elementType=s3,A.lanes=e,A.stateNode={isHidden:!1},A}function N1(A,D,e){return A=nf(6,A,null,D),A.lanes=e,A}function B1(A,D,e){return D=nf(4,A.children!==null?A.children:[],A.key,D),D.lanes=e,D.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},D}function dS(A,D,e,d,S){this.tag=D,this.containerInfo=A,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x1(0),this.expirationTimes=x1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x1(0),this.identifierPrefix=d,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function f2(A,D,e,d,S,r,a,u,c){return A=new dS(A,D,e,u,c),D===1?(D=1,r===!0&&(D|=8)):D=0,r=nf(3,null,null,D),A.current=r,r.stateNode=A,r.memoizedState={element:d,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zb(r),A}function mS(A,D,e){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nd,key:d==null?null:""+d,children:A,containerInfo:D,implementation:e}}function qT(A){if(!A)return ev;A=A._reactInternals;e:{if(Jv(A)!==A||A.tag!==1)throw Error(la(170));var D=A;do{switch(D.tag){case 3:D=D.stateNode.context;break e;case 1:if(Ju(D.type)){D=D.stateNode.__reactInternalMemoizedMergedChildContext;break e}}D=D.return}while(D!==null);throw Error(la(171))}if(A.tag===1){var e=A.type;if(Ju(e))return Q3(A,e,D)}return D}function eA(A,D,e,d,S,r,a,u,c){return A=f2(e,d,!0,A,S,r,a,u,c),A.context=qT(null),e=A.current,d=Tu(),S=Jp(e),r=Qh(d,S),r.callback=D!=null?D:null,Zp(e,r,S),A.current.lanes=S,Pm(A,S,d),$u(A,d),A}function Py(A,D,e,d){var S=D.current,r=Tu(),a=Jp(S);return e=qT(e),D.context===null?D.context=e:D.pendingContext=e,D=Qh(r,a),D.payload={element:A},d=d===void 0?null:d,d!==null&&(D.callback=d),A=Zp(S,D,a),A!==null&&(Vf(A,S,a,r),Dg(A,S,a)),a}function vy(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 5:return A.child.stateNode;default:return A.child.stateNode}}function Z_(A,D){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var e=A.retryLane;A.retryLane=e!==0&&e<D?e:D}}function h2(A,D){Z_(A,D),(A=A.alternate)&&Z_(A,D)}function gS(){return null}var tA=typeof reportError=="function"?reportError:function(A){console.error(A)};function p2(A){this._internalRoot=A}Ry.prototype.render=p2.prototype.render=function(A){var D=this._internalRoot;if(D===null)throw Error(la(409));Py(A,D,null,null)};Ry.prototype.unmount=p2.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var D=A.containerInfo;Wv(function(){Py(null,A,null,null)}),D[tp]=null}};function Ry(A){this._internalRoot=A}Ry.prototype.unstable_scheduleHydration=function(A){if(A){var D=P3();A={blockedOn:null,target:A,priority:D};for(var e=0;e<Up.length&&D!==0&&D<Up[e].priority;e++);Up.splice(e,0,A),e===0&&D3(A)}};function v2(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function Dy(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11&&(A.nodeType!==8||A.nodeValue!==" react-mount-point-unstable "))}function K_(){}function yS(A,D,e,d,S){if(S){if(typeof d=="function"){var r=d;d=function(){var t=vy(a);r.call(t)}}var a=eA(D,d,A,0,null,!1,!1,"",K_);return A._reactRootContainer=a,A[tp]=a.current,xm(A.nodeType===8?A.parentNode:A),Wv(),a}for(;S=A.lastChild;)A.removeChild(S);if(typeof d=="function"){var u=d;d=function(){var t=vy(c);u.call(t)}}var c=f2(A,0,!1,null,null,!1,!1,"",K_);return A._reactRootContainer=c,A[tp]=c.current,xm(A.nodeType===8?A.parentNode:A),Wv(function(){Py(D,c,e,d)}),c}function Iy(A,D,e,d,S){var r=e._reactRootContainer;if(r){var a=r;if(typeof S=="function"){var u=S;S=function(){var c=vy(a);u.call(c)}}Py(D,a,A,S)}else a=yS(e,D,A,S,d);return vy(a)}E3=function(A){switch(A.tag){case 3:var D=A.stateNode;if(D.current.memoizedState.isDehydrated){var e=K0(D.pendingLanes);e!==0&&(Db(D,e|1),$u(D,ks()),(Wi&6)===0&&(c0=ks()+500,av()))}break;case 13:Wv(function(){var d=rp(A,1);if(d!==null){var S=Tu();Vf(d,A,1,S)}}),h2(A,1)}};Ib=function(A){if(A.tag===13){var D=rp(A,134217728);if(D!==null){var e=Tu();Vf(D,A,134217728,e)}h2(A,134217728)}};L3=function(A){if(A.tag===13){var D=Jp(A),e=rp(A,D);if(e!==null){var d=Tu();Vf(e,A,D,d)}h2(A,D)}};P3=function(){return lo};R3=function(A,D){var e=lo;try{return lo=A,D()}finally{lo=e}};wx=function(A,D,e){switch(D){case"input":if(dx(A,e),D=e.name,e.type==="radio"&&D!=null){for(e=A;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+D)+'][type="radio"]'),D=0;D<e.length;D++){var d=e[D];if(d!==A&&d.form===A.form){var S=Ay(d);if(!S)throw Error(la(90));u3(d),dx(d,S)}}}break;case"textarea":f3(A,e);break;case"select":D=e.value,D!=null&&Qd(A,!!e.multiple,D,!1)}};y3=s2;x3=Wv;var xS={usingClientEntryPoint:!1,Events:[Dm,Gd,Ay,m3,g3,s2]},j0={findFiberByHostInstance:Iv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bS={bundleType:j0.bundleType,version:j0.version,rendererPackageName:j0.rendererPackageName,rendererConfig:j0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ap.ReactCurrentDispatcher,findHostInstanceByFiber:function(A){return A=w3(A),A===null?null:A.stateNode},findFiberByHostInstance:j0.findFiberByHostInstance||gS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ag=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ag.isDisabled&&Ag.supportsFiber)try{by=Ag.inject(bS),yh=Ag}catch{}}Ac.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;Ac.createPortal=function(A,D){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v2(D))throw Error(la(200));return mS(A,D,null,e)};Ac.createRoot=function(A,D){if(!v2(A))throw Error(la(299));var e=!1,d="",S=tA;return D!=null&&(D.unstable_strictMode===!0&&(e=!0),D.identifierPrefix!==void 0&&(d=D.identifierPrefix),D.onRecoverableError!==void 0&&(S=D.onRecoverableError)),D=f2(A,1,!1,null,null,e,!1,d,S),A[tp]=D.current,xm(A.nodeType===8?A.parentNode:A),new p2(D)};Ac.findDOMNode=function(A){if(A==null)return null;if(A.nodeType===1)return A;var D=A._reactInternals;if(D===void 0)throw typeof A.render=="function"?Error(la(188)):(A=Object.keys(A).join(","),Error(la(268,A)));return A=w3(D),A=A===null?null:A.stateNode,A};Ac.flushSync=function(A){return Wv(A)};Ac.hydrate=function(A,D,e){if(!Dy(D))throw Error(la(200));return Iy(null,A,D,!0,e)};Ac.hydrateRoot=function(A,D,e){if(!v2(A))throw Error(la(405));var d=e!=null&&e.hydratedSources||null,S=!1,r="",a=tA;if(e!=null&&(e.unstable_strictMode===!0&&(S=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),D=eA(D,null,A,1,e!=null?e:null,S,!1,r,a),A[tp]=D.current,xm(A),d)for(A=0;A<d.length;A++)e=d[A],S=e._getVersion,S=S(e._source),D.mutableSourceEagerHydrationData==null?D.mutableSourceEagerHydrationData=[e,S]:D.mutableSourceEagerHydrationData.push(e,S);return new Ry(D)};Ac.render=function(A,D,e){if(!Dy(D))throw Error(la(200));return Iy(null,A,D,!1,e)};Ac.unmountComponentAtNode=function(A){if(!Dy(A))throw Error(la(40));return A._reactRootContainer?(Wv(function(){Iy(null,null,A,!1,function(){A._reactRootContainer=null,A[tp]=null})}),!0):!1};Ac.unstable_batchedUpdates=s2;Ac.unstable_renderSubtreeIntoContainer=function(A,D,e,d){if(!Dy(e))throw Error(la(200));if(A==null||A._reactInternals===void 0)throw Error(la(38));return Iy(A,D,e,!1,d)};Ac.version="18.2.0-next-9e3b772b8-20220608";(function(A){function D(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D)}catch(e){console.error(e)}}D(),A.exports=Ac})(xy);var rA,J_=xy.exports;rA=J_.createRoot,J_.hydrateRoot;const _S="/assets/react.35ef61ed.svg";function mi(){return mi=Object.assign?Object.assign.bind():function(A){for(var D=1;D<arguments.length;D++){var e=arguments[D];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(A[d]=e[d])}return A},mi.apply(this,arguments)}function Yv(A){return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},Yv(A)}function U1(A){return A&&Yv(A)==="object"&&A.constructor===Object}function f0(A,D){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{clone:!0},d=e.clone?mi({},A):A;return U1(A)&&U1(D)&&Object.keys(D).forEach(function(S){S!=="__proto__"&&(U1(D[S])&&S in A?d[S]=f0(A[S],D[S],e):d[S]=D[S])}),d}var nA={exports:{}},wS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",TS=wS,AS=TS;function aA(){}function iA(){}iA.resetWarningCache=aA;var MS=function(){function A(d,S,r,a,u,c){if(c!==AS){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}}A.isRequired=A;function D(){return A}var e={array:A,bigint:A,bool:A,func:A,number:A,object:A,string:A,symbol:A,any:A,arrayOf:D,element:A,elementType:A,instanceOf:D,node:A,objectOf:D,oneOf:D,oneOfType:D,shape:D,exact:D,checkPropTypes:iA,resetWarningCache:aA};return e.PropTypes=e,e};nA.exports=MS();function kS(A,D){if(Yv(A)!=="object"||A===null)return A;var e=A[Symbol.toPrimitive];if(e!==void 0){var d=e.call(A,D||"default");if(Yv(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(D==="string"?String:Number)(A)}function oA(A){var D=kS(A,"string");return Yv(D)==="symbol"?D:String(D)}function af(A,D,e){return D=oA(D),D in A?Object.defineProperty(A,D,{value:e,enumerable:!0,configurable:!0,writable:!0}):A[D]=e,A}function dy(A){for(var D="https://mui.com/production-error/?code="+A,e=1;e<arguments.length;e+=1)D+="&args[]="+encodeURIComponent(arguments[e]);return"Minified Material-UI error #"+A+"; visit "+D+" for the full message."}var sA={exports:{}},uo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=typeof Symbol=="function"&&Symbol.for,d2=yl?Symbol.for("react.element"):60103,m2=yl?Symbol.for("react.portal"):60106,zy=yl?Symbol.for("react.fragment"):60107,Fy=yl?Symbol.for("react.strict_mode"):60108,Oy=yl?Symbol.for("react.profiler"):60114,Ny=yl?Symbol.for("react.provider"):60109,By=yl?Symbol.for("react.context"):60110,g2=yl?Symbol.for("react.async_mode"):60111,Uy=yl?Symbol.for("react.concurrent_mode"):60111,Vy=yl?Symbol.for("react.forward_ref"):60112,Hy=yl?Symbol.for("react.suspense"):60113,SS=yl?Symbol.for("react.suspense_list"):60120,Gy=yl?Symbol.for("react.memo"):60115,jy=yl?Symbol.for("react.lazy"):60116,CS=yl?Symbol.for("react.block"):60121,ES=yl?Symbol.for("react.fundamental"):60117,LS=yl?Symbol.for("react.responder"):60118,PS=yl?Symbol.for("react.scope"):60119;function kc(A){if(typeof A=="object"&&A!==null){var D=A.$$typeof;switch(D){case d2:switch(A=A.type,A){case g2:case Uy:case zy:case Oy:case Fy:case Hy:return A;default:switch(A=A&&A.$$typeof,A){case By:case Vy:case jy:case Gy:case Ny:return A;default:return D}}case m2:return D}}}function lA(A){return kc(A)===Uy}uo.AsyncMode=g2;uo.ConcurrentMode=Uy;uo.ContextConsumer=By;uo.ContextProvider=Ny;uo.Element=d2;uo.ForwardRef=Vy;uo.Fragment=zy;uo.Lazy=jy;uo.Memo=Gy;uo.Portal=m2;uo.Profiler=Oy;uo.StrictMode=Fy;uo.Suspense=Hy;uo.isAsyncMode=function(A){return lA(A)||kc(A)===g2};uo.isConcurrentMode=lA;uo.isContextConsumer=function(A){return kc(A)===By};uo.isContextProvider=function(A){return kc(A)===Ny};uo.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===d2};uo.isForwardRef=function(A){return kc(A)===Vy};uo.isFragment=function(A){return kc(A)===zy};uo.isLazy=function(A){return kc(A)===jy};uo.isMemo=function(A){return kc(A)===Gy};uo.isPortal=function(A){return kc(A)===m2};uo.isProfiler=function(A){return kc(A)===Oy};uo.isStrictMode=function(A){return kc(A)===Fy};uo.isSuspense=function(A){return kc(A)===Hy};uo.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===zy||A===Uy||A===Oy||A===Fy||A===Hy||A===SS||typeof A=="object"&&A!==null&&(A.$$typeof===jy||A.$$typeof===Gy||A.$$typeof===Ny||A.$$typeof===By||A.$$typeof===Vy||A.$$typeof===ES||A.$$typeof===LS||A.$$typeof===PS||A.$$typeof===CS)};uo.typeOf=kc;(function(A){A.exports=uo})(sA);function y2(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(D,A),e)}function RS(A){A=A.substr(1);var D=new RegExp(".{1,".concat(A.length>=6?2:1,"}"),"g"),e=A.match(D);return e&&e[0].length===1&&(e=e.map(function(d){return d+d})),e?"rgb".concat(e.length===4?"a":"","(").concat(e.map(function(d,S){return S<3?parseInt(d,16):Math.round(parseInt(d,16)/255*1e3)/1e3}).join(", "),")"):""}function DS(A){A=Xv(A);var D=A,e=D.values,d=e[0],S=e[1]/100,r=e[2]/100,a=S*Math.min(r,1-r),u=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(n+d/30)%12;return r-a*Math.max(Math.min(o-3,9-o,1),-1)},c="rgb",t=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return A.type==="hsla"&&(c+="a",t.push(e[3])),Wy({type:c,values:t})}function Xv(A){if(A.type)return A;if(A.charAt(0)==="#")return Xv(RS(A));var D=A.indexOf("("),e=A.substring(0,D);if(["rgb","rgba","hsl","hsla"].indexOf(e)===-1)throw new Error(dy(3,A));var d=A.substring(D+1,A.length-1).split(",");return d=d.map(function(S){return parseFloat(S)}),{type:e,values:d}}function Wy(A){var D=A.type,e=A.values;return D.indexOf("rgb")!==-1?e=e.map(function(d,S){return S<3?parseInt(d,10):d}):D.indexOf("hsl")!==-1&&(e[1]="".concat(e[1],"%"),e[2]="".concat(e[2],"%")),"".concat(D,"(").concat(e.join(", "),")")}function IS(A,D){var e=tb(A),d=tb(D);return(Math.max(e,d)+.05)/(Math.min(e,d)+.05)}function tb(A){A=Xv(A);var D=A.type==="hsl"?Xv(DS(A)).values:A.values;return D=D.map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}),Number((.2126*D[0]+.7152*D[1]+.0722*D[2]).toFixed(3))}function zd(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.15;return tb(A)>.5?uA(A,D):cA(A,D)}function Yh(A,D){return A=Xv(A),D=y2(D),(A.type==="rgb"||A.type==="hsl")&&(A.type+="a"),A.values[3]=D,Wy(A)}function uA(A,D){if(A=Xv(A),D=y2(D),A.type.indexOf("hsl")!==-1)A.values[2]*=1-D;else if(A.type.indexOf("rgb")!==-1)for(var e=0;e<3;e+=1)A.values[e]*=1-D;return Wy(A)}function cA(A,D){if(A=Xv(A),D=y2(D),A.type.indexOf("hsl")!==-1)A.values[2]+=(100-A.values[2])*D;else if(A.type.indexOf("rgb")!==-1)for(var e=0;e<3;e+=1)A.values[e]+=(255-A.values[e])*D;return Wy(A)}function x2(A,D){if(A==null)return{};var e={},d=Object.keys(A),S,r;for(r=0;r<d.length;r++)S=d[r],!(D.indexOf(S)>=0)&&(e[S]=A[S]);return e}function ql(A,D){if(A==null)return{};var e=x2(A,D),d,S;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(A);for(S=0;S<r.length;S++)d=r[S],!(D.indexOf(d)>=0)&&(!Object.prototype.propertyIsEnumerable.call(A,d)||(e[d]=A[d]))}return e}var zp=["xs","sm","md","lg","xl"];function zS(A){var D=A.values,e=D===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:D,d=A.unit,S=d===void 0?"px":d,r=A.step,a=r===void 0?5:r,u=ql(A,["values","unit","step"]);function c(l){var h=typeof e[l]=="number"?e[l]:l;return"@media (min-width:".concat(h).concat(S,")")}function t(l){var h=zp.indexOf(l)+1,i=e[zp[h]];if(h===zp.length)return c("xs");var s=typeof i=="number"&&h>0?i:l;return"@media (max-width:".concat(s-a/100).concat(S,")")}function f(l,h){var i=zp.indexOf(h);return i===zp.length-1?c(l):"@media (min-width:".concat(typeof e[l]=="number"?e[l]:l).concat(S,") and ")+"(max-width:".concat((i!==-1&&typeof e[zp[i+1]]=="number"?e[zp[i+1]]:h)-a/100).concat(S,")")}function n(l){return f(l,l)}function o(l){return e[l]}return mi({keys:zp,values:e,up:c,down:t,between:f,only:n,width:o},u)}function FS(A,D,e){var d;return mi({gutters:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:",`
      paddingLeft: theme.spacing(2),
      paddingRight: theme.spacing(2),
      [theme.breakpoints.up('sm')]: {
        paddingLeft: theme.spacing(3),
        paddingRight: theme.spacing(3),
      },
      `].join(`
`)),mi({paddingLeft:D(2),paddingRight:D(2)},r,af({},A.up("sm"),mi({paddingLeft:D(3),paddingRight:D(3)},r[A.up("sm")])))},toolbar:(d={minHeight:56},af(d,"".concat(A.up("xs")," and (orientation: landscape)"),{minHeight:48}),af(d,A.up("sm"),{minHeight:64}),d)},e)}var OS={black:"#000",white:"#fff"};const my=OS;var NS={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const b2=NS;var BS={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const V1=BS;var US={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const H1=US;var VS={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const G1=VS;var HS={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const j1=HS;var GS={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const W1=GS;var jS={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const Y1=jS;var $_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:my.white,default:b2[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},X1={text:{primary:my.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:b2[800],default:"#303030"},action:{active:my.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Q_(A,D,e,d){var S=d.light||d,r=d.dark||d*1.5;A[D]||(A.hasOwnProperty(e)?A[D]=A[e]:D==="light"?A.light=cA(A.main,S):D==="dark"&&(A.dark=uA(A.main,r)))}function WS(A){var D=A.primary,e=D===void 0?{light:V1[300],main:V1[500],dark:V1[700]}:D,d=A.secondary,S=d===void 0?{light:H1.A200,main:H1.A400,dark:H1.A700}:d,r=A.error,a=r===void 0?{light:G1[300],main:G1[500],dark:G1[700]}:r,u=A.warning,c=u===void 0?{light:j1[300],main:j1[500],dark:j1[700]}:u,t=A.info,f=t===void 0?{light:W1[300],main:W1[500],dark:W1[700]}:t,n=A.success,o=n===void 0?{light:Y1[300],main:Y1[500],dark:Y1[700]}:n,l=A.type,h=l===void 0?"light":l,i=A.contrastThreshold,s=i===void 0?3:i,p=A.tonalOffset,v=p===void 0?.2:p,m=ql(A,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(g){var T=IS(g,X1.text.primary)>=s?X1.text.primary:$_.text.primary;return T}var y=function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:700;if(T=mi({},T),!T.main&&T[M]&&(T.main=T[M]),!T.main)throw new Error(dy(4,M));if(typeof T.main!="string")throw new Error(dy(5,JSON.stringify(T.main)));return Q_(T,"light",P,v),Q_(T,"dark",L,v),T.contrastText||(T.contrastText=b(T.main)),T},x={dark:X1,light:$_},w=f0(mi({common:my,type:h,primary:y(e),secondary:y(S,"A400","A200","A700"),error:y(a),warning:y(c),info:y(f),success:y(o),grey:b2,contrastThreshold:s,getContrastText:b,augmentColor:y,tonalOffset:v},x[h]),m);return w}function fA(A){return Math.round(A*1e5)/1e5}function YS(A){return fA(A)}var q_={textTransform:"uppercase"},ew='"Roboto", "Helvetica", "Arial", sans-serif';function XS(A,D){var e=typeof D=="function"?D(A):D,d=e.fontFamily,S=d===void 0?ew:d,r=e.fontSize,a=r===void 0?14:r,u=e.fontWeightLight,c=u===void 0?300:u,t=e.fontWeightRegular,f=t===void 0?400:t,n=e.fontWeightMedium,o=n===void 0?500:n,l=e.fontWeightBold,h=l===void 0?700:l,i=e.htmlFontSize,s=i===void 0?16:i,p=e.allVariants,v=e.pxToRem,m=ql(e,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),b=a/14,y=v||function(g){return"".concat(g/s*b,"rem")},x=function(T,M,P,L,I){return mi({fontFamily:S,fontWeight:T,fontSize:y(M),lineHeight:P},S===ew?{letterSpacing:"".concat(fA(L/M),"em")}:{},I,p)},w={h1:x(c,96,1.167,-1.5),h2:x(c,60,1.2,-.5),h3:x(f,48,1.167,0),h4:x(f,34,1.235,.25),h5:x(f,24,1.334,0),h6:x(o,20,1.6,.15),subtitle1:x(f,16,1.75,.15),subtitle2:x(o,14,1.57,.1),body1:x(f,16,1.5,.15),body2:x(f,14,1.43,.15),button:x(o,14,1.75,.4,q_),caption:x(f,12,1.66,.4),overline:x(f,12,2.66,1,q_)};return f0(mi({htmlFontSize:s,pxToRem:y,round:YS,fontFamily:S,fontSize:a,fontWeightLight:c,fontWeightRegular:f,fontWeightMedium:o,fontWeightBold:h},w),m,{clone:!1})}var ZS=.2,KS=.14,JS=.12;function qo(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(ZS,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(KS,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(JS,")")].join(",")}var $S=["none",qo(0,2,1,-1,0,1,1,0,0,1,3,0),qo(0,3,1,-2,0,2,2,0,0,1,5,0),qo(0,3,3,-2,0,3,4,0,0,1,8,0),qo(0,2,4,-1,0,4,5,0,0,1,10,0),qo(0,3,5,-1,0,5,8,0,0,1,14,0),qo(0,3,5,-1,0,6,10,0,0,1,18,0),qo(0,4,5,-2,0,7,10,1,0,2,16,1),qo(0,5,5,-3,0,8,10,1,0,3,14,2),qo(0,5,6,-3,0,9,12,1,0,3,16,2),qo(0,6,6,-3,0,10,14,1,0,4,18,3),qo(0,6,7,-4,0,11,15,1,0,4,20,3),qo(0,7,8,-4,0,12,17,2,0,5,22,4),qo(0,7,8,-4,0,13,19,2,0,5,24,4),qo(0,7,9,-4,0,14,21,2,0,5,26,4),qo(0,8,9,-5,0,15,22,2,0,6,28,5),qo(0,8,10,-5,0,16,24,2,0,6,30,5),qo(0,8,11,-5,0,17,26,2,0,6,32,5),qo(0,9,11,-5,0,18,28,2,0,7,34,6),qo(0,9,12,-6,0,19,29,2,0,7,36,6),qo(0,10,13,-6,0,20,31,3,0,8,38,7),qo(0,10,13,-6,0,21,33,3,0,8,40,7),qo(0,10,14,-6,0,22,35,3,0,8,42,7),qo(0,11,14,-7,0,23,36,3,0,9,44,8),qo(0,11,15,-7,0,24,38,3,0,9,46,8)];const QS=$S;var qS={borderRadius:4};const e4=qS;function rb(A,D){(D==null||D>A.length)&&(D=A.length);for(var e=0,d=new Array(D);e<D;e++)d[e]=A[e];return d}function t4(A){if(Array.isArray(A))return rb(A)}function r4(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}function hA(A,D){if(!!A){if(typeof A=="string")return rb(A,D);var e=Object.prototype.toString.call(A).slice(8,-1);if(e==="Object"&&A.constructor&&(e=A.constructor.name),e==="Map"||e==="Set")return Array.from(A);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return rb(A,D)}}function n4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dh(A){return t4(A)||r4(A)||hA(A)||n4()}function a4(A){if(Array.isArray(A))return A}function i4(A,D){var e=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(e!=null){var d,S,r,a,u=[],c=!0,t=!1;try{if(r=(e=e.call(A)).next,D===0){if(Object(e)!==e)return;c=!1}else for(;!(c=(d=r.call(e)).done)&&(u.push(d.value),u.length!==D);c=!0);}catch(f){t=!0,S=f}finally{try{if(!c&&e.return!=null&&(a=e.return(),Object(a)!==a))return}finally{if(t)throw S}}return u}}function o4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bc(A,D){return a4(A)||i4(A,D)||hA(A,D)||o4()}function s4(A){var D=A.spacing||8;return typeof D=="number"?function(e){return D*e}:Array.isArray(D)?function(e){return D[e]}:typeof D=="function"?D:function(){}}function l4(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8;if(A.mui)return A;var D=s4({spacing:A}),e=function(){for(var S=arguments.length,r=new Array(S),a=0;a<S;a++)r[a]=arguments[a];return r.length===0?D(1):r.length===1?D(r[0]):r.map(function(u){if(typeof u=="string")return u;var c=D(u);return typeof c=="number"?"".concat(c,"px"):c}).join(" ")};return Object.defineProperty(e,"unit",{get:function(){return A}}),e.mui=!0,e}var tw={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rw={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function nw(A){return"".concat(Math.round(A),"ms")}const u4={easing:tw,duration:rw,create:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["all"],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=e.duration,S=d===void 0?rw.standard:d,r=e.easing,a=r===void 0?tw.easeInOut:r,u=e.delay,c=u===void 0?0:u;return ql(e,["duration","easing","delay"]),(Array.isArray(D)?D:[D]).map(function(t){return"".concat(t," ").concat(typeof S=="string"?S:nw(S)," ").concat(a," ").concat(typeof c=="string"?c:nw(c))}).join(",")},getAutoHeightDuration:function(D){if(!D)return 0;var e=D/36;return Math.round((4+15*Math.pow(e,.25)+e/5)*10)}};var c4={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const f4=c4;function h4(){for(var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=A.breakpoints,e=D===void 0?{}:D,d=A.mixins,S=d===void 0?{}:d,r=A.palette,a=r===void 0?{}:r,u=A.spacing,c=A.typography,t=c===void 0?{}:c,f=ql(A,["breakpoints","mixins","palette","spacing","typography"]),n=WS(a),o=zS(e),l=l4(u),h=f0({breakpoints:o,direction:"ltr",mixins:FS(o,l,S),overrides:{},palette:n,props:{},shadows:QS,typography:XS(n,t),spacing:l,shape:e4,transitions:u4,zIndex:f4},f),i=arguments.length,s=new Array(i>1?i-1:0),p=1;p<i;p++)s[p-1]=arguments[p];return h=s.reduce(function(v,m){return f0(v,m)},h),h}var p4=typeof Symbol=="function"&&Symbol.for;const v4=p4?Symbol.for("mui.nested"):"__THEME_NESTED__";var d4=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function m4(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=A.disableGlobal,e=D===void 0?!1:D,d=A.productionPrefix,S=d===void 0?"jss":d,r=A.seed,a=r===void 0?"":r,u=a===""?"":"".concat(a,"-"),c=0,t=function(){return c+=1,c};return function(f,n){var o=n.options.name;if(o&&o.indexOf("Mui")===0&&!n.options.link&&!e){if(d4.indexOf(f.key)!==-1)return"Mui-".concat(f.key);var l="".concat(u).concat(o,"-").concat(f.key);return!n.options.theme[v4]||a!==""?l:"".concat(l,"-").concat(t())}return"".concat(u).concat(S).concat(t())}}function g4(A){var D=A.theme,e=A.name,d=A.props;if(!D||!D.props||!D.props[e])return d;var S=D.props[e],r;for(r in S)d[r]===void 0&&(d[r]=S[r]);return d}var aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},zm=(typeof window>"u"?"undefined":aw(window))==="object"&&(typeof document>"u"?"undefined":aw(document))==="object"&&document.nodeType===9;function iw(A,D){for(var e=0;e<D.length;e++){var d=D[e];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(A,oA(d.key),d)}}function pA(A,D,e){return D&&iw(A.prototype,D),e&&iw(A,e),Object.defineProperty(A,"prototype",{writable:!1}),A}function nb(A,D){return nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,S){return d.__proto__=S,d},nb(A,D)}function _2(A,D){A.prototype=Object.create(D.prototype),A.prototype.constructor=A,nb(A,D)}function ab(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}var y4={}.constructor;function ib(A){if(A==null||typeof A!="object")return A;if(Array.isArray(A))return A.map(ib);if(A.constructor!==y4)return A;var D={};for(var e in A)D[e]=ib(A[e]);return D}function w2(A,D,e){A===void 0&&(A="unnamed");var d=e.jss,S=ib(D),r=d.plugins.onCreateRule(A,S,e);return r||(A[0],null)}var ow=function(D,e){for(var d="",S=0;S<D.length&&D[S]!=="!important";S++)d&&(d+=e),d+=D[S];return d},Uv=function(D){if(!Array.isArray(D))return D;var e="";if(Array.isArray(D[0]))for(var d=0;d<D.length&&D[d]!=="!important";d++)e&&(e+=", "),e+=ow(D[d]," ");else e=ow(D,", ");return D[D.length-1]==="!important"&&(e+=" !important"),e};function m0(A){return A&&A.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function W0(A,D){for(var e="",d=0;d<D;d++)e+="  ";return e+A}function Cm(A,D,e){e===void 0&&(e={});var d="";if(!D)return d;var S=e,r=S.indent,a=r===void 0?0:r,u=D.fallbacks;e.format===!1&&(a=-1/0);var c=m0(e),t=c.linebreak,f=c.space;if(A&&a++,u)if(Array.isArray(u))for(var n=0;n<u.length;n++){var o=u[n];for(var l in o){var h=o[l];h!=null&&(d&&(d+=t),d+=W0(l+":"+f+Uv(h)+";",a))}}else for(var i in u){var s=u[i];s!=null&&(d&&(d+=t),d+=W0(i+":"+f+Uv(s)+";",a))}for(var p in D){var v=D[p];v!=null&&p!=="fallbacks"&&(d&&(d+=t),d+=W0(p+":"+f+Uv(v)+";",a))}return!d&&!e.allowEmpty||!A?d:(a--,d&&(d=""+t+d+t),W0(""+A+f+"{"+d,a)+W0("}",a))}var x4=/([[\].#*$><+~=|^:(),"'`\s])/g,sw=typeof CSS<"u"&&CSS.escape,T2=function(A){return sw?sw(A):A.replace(x4,"\\$1")},vA=function(){function A(e,d,S){this.type="style",this.isProcessed=!1;var r=S.sheet,a=S.Renderer;this.key=e,this.options=S,this.style=d,r?this.renderer=r.renderer:a&&(this.renderer=new a)}var D=A.prototype;return D.prop=function(d,S,r){if(S===void 0)return this.style[d];var a=r?r.force:!1;if(!a&&this.style[d]===S)return this;var u=S;(!r||r.process!==!1)&&(u=this.options.jss.plugins.onChangeValue(S,d,this));var c=u==null||u===!1,t=d in this.style;if(c&&!t&&!a)return this;var f=c&&t;if(f?delete this.style[d]:this.style[d]=u,this.renderable&&this.renderer)return f?this.renderer.removeProperty(this.renderable,d):this.renderer.setProperty(this.renderable,d,u),this;var n=this.options.sheet;return n&&n.attached,this},A}(),ob=function(A){_2(D,A);function D(d,S,r){var a;a=A.call(this,d,S,r)||this;var u=r.selector,c=r.scoped,t=r.sheet,f=r.generateId;return u?a.selectorText=u:c!==!1&&(a.id=f(ab(ab(a)),t),a.selectorText="."+T2(a.id)),a}var e=D.prototype;return e.applyTo=function(S){var r=this.renderer;if(r){var a=this.toJSON();for(var u in a)r.setProperty(S,u,a[u])}return this},e.toJSON=function(){var S={};for(var r in this.style){var a=this.style[r];typeof a!="object"?S[r]=a:Array.isArray(a)&&(S[r]=Uv(a))}return S},e.toString=function(S){var r=this.options.sheet,a=r?r.options.link:!1,u=a?mi({},S,{allowEmpty:!0}):S;return Cm(this.selectorText,this.style,u)},pA(D,[{key:"selector",set:function(S){if(S!==this.selectorText){this.selectorText=S;var r=this.renderer,a=this.renderable;if(!(!a||!r)){var u=r.setSelector(a,S);u||r.replaceRule(a,this)}}},get:function(){return this.selectorText}}]),D}(vA),b4={onCreateRule:function(D,e,d){return D[0]==="@"||d.parent&&d.parent.type==="keyframes"?null:new ob(D,e,d)}},Z1={indent:1,children:!0},_4=/@([\w-]+)/,w4=function(){function A(e,d,S){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(_4);this.at=r?r[1]:"unknown",this.query=S.name||"@"+this.at,this.options=S,this.rules=new Yy(mi({},S,{parent:this}));for(var a in d)this.rules.add(a,d[a]);this.rules.process()}var D=A.prototype;return D.getRule=function(d){return this.rules.get(d)},D.indexOf=function(d){return this.rules.indexOf(d)},D.addRule=function(d,S,r){var a=this.rules.add(d,S,r);return a?(this.options.jss.plugins.onProcessRule(a),a):null},D.replaceRule=function(d,S,r){var a=this.rules.replace(d,S,r);return a&&this.options.jss.plugins.onProcessRule(a),a},D.toString=function(d){d===void 0&&(d=Z1);var S=m0(d),r=S.linebreak;if(d.indent==null&&(d.indent=Z1.indent),d.children==null&&(d.children=Z1.children),d.children===!1)return this.query+" {}";var a=this.rules.toString(d);return a?this.query+" {"+r+a+r+"}":""},A}(),T4=/@media|@supports\s+/,A4={onCreateRule:function(D,e,d){return T4.test(D)?new w4(D,e,d):null}},K1={indent:1,children:!0},M4=/@keyframes\s+([\w-]+)/,sb=function(){function A(e,d,S){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(M4);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=S;var a=S.scoped,u=S.sheet,c=S.generateId;this.id=a===!1?this.name:T2(c(this,u)),this.rules=new Yy(mi({},S,{parent:this}));for(var t in d)this.rules.add(t,d[t],mi({},S,{parent:this}));this.rules.process()}var D=A.prototype;return D.toString=function(d){d===void 0&&(d=K1);var S=m0(d),r=S.linebreak;if(d.indent==null&&(d.indent=K1.indent),d.children==null&&(d.children=K1.children),d.children===!1)return this.at+" "+this.id+" {}";var a=this.rules.toString(d);return a&&(a=""+r+a+r),this.at+" "+this.id+" {"+a+"}"},A}(),k4=/@keyframes\s+/,S4=/\$([\w-]+)/g,lb=function(D,e){return typeof D=="string"?D.replace(S4,function(d,S){return S in e?e[S]:d}):D},lw=function(D,e,d){var S=D[e],r=lb(S,d);r!==S&&(D[e]=r)},C4={onCreateRule:function(D,e,d){return typeof D=="string"&&k4.test(D)?new sb(D,e,d):null},onProcessStyle:function(D,e,d){return e.type!=="style"||!d||("animation-name"in D&&lw(D,"animation-name",d.keyframes),"animation"in D&&lw(D,"animation",d.keyframes)),D},onChangeValue:function(D,e,d){var S=d.options.sheet;if(!S)return D;switch(e){case"animation":return lb(D,S.keyframes);case"animation-name":return lb(D,S.keyframes);default:return D}}},E4=function(A){_2(D,A);function D(){return A.apply(this,arguments)||this}var e=D.prototype;return e.toString=function(S){var r=this.options.sheet,a=r?r.options.link:!1,u=a?mi({},S,{allowEmpty:!0}):S;return Cm(this.key,this.style,u)},D}(vA),L4={onCreateRule:function(D,e,d){return d.parent&&d.parent.type==="keyframes"?new E4(D,e,d):null}},P4=function(){function A(e,d,S){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=d,this.options=S}var D=A.prototype;return D.toString=function(d){var S=m0(d),r=S.linebreak;if(Array.isArray(this.style)){for(var a="",u=0;u<this.style.length;u++)a+=Cm(this.at,this.style[u]),this.style[u+1]&&(a+=r);return a}return Cm(this.at,this.style,d)},A}(),R4=/@font-face/,D4={onCreateRule:function(D,e,d){return R4.test(D)?new P4(D,e,d):null}},I4=function(){function A(e,d,S){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=d,this.options=S}var D=A.prototype;return D.toString=function(d){return Cm(this.key,this.style,d)},A}(),z4={onCreateRule:function(D,e,d){return D==="@viewport"||D==="@-ms-viewport"?new I4(D,e,d):null}},F4=function(){function A(e,d,S){this.type="simple",this.isProcessed=!1,this.key=e,this.value=d,this.options=S}var D=A.prototype;return D.toString=function(d){if(Array.isArray(this.value)){for(var S="",r=0;r<this.value.length;r++)S+=this.key+" "+this.value[r]+";",this.value[r+1]&&(S+=`
`);return S}return this.key+" "+this.value+";"},A}(),O4={"@charset":!0,"@import":!0,"@namespace":!0},N4={onCreateRule:function(D,e,d){return D in O4?new F4(D,e,d):null}},uw=[b4,A4,C4,L4,D4,z4,N4],B4={process:!0},cw={force:!0,process:!0},Yy=function(){function A(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var D=A.prototype;return D.add=function(d,S,r){var a=this.options,u=a.parent,c=a.sheet,t=a.jss,f=a.Renderer,n=a.generateId,o=a.scoped,l=mi({classes:this.classes,parent:u,sheet:c,jss:t,Renderer:f,generateId:n,scoped:o,name:d,keyframes:this.keyframes,selector:void 0},r),h=d;d in this.raw&&(h=d+"-d"+this.counter++),this.raw[h]=S,h in this.classes&&(l.selector="."+T2(this.classes[h]));var i=w2(h,S,l);if(!i)return null;this.register(i);var s=l.index===void 0?this.index.length:l.index;return this.index.splice(s,0,i),i},D.replace=function(d,S,r){var a=this.get(d),u=this.index.indexOf(a);a&&this.remove(a);var c=r;return u!==-1&&(c=mi({},r,{index:u})),this.add(d,S,c)},D.get=function(d){return this.map[d]},D.remove=function(d){this.unregister(d),delete this.raw[d.key],this.index.splice(this.index.indexOf(d),1)},D.indexOf=function(d){return this.index.indexOf(d)},D.process=function(){var d=this.options.jss.plugins;this.index.slice(0).forEach(d.onProcessRule,d)},D.register=function(d){this.map[d.key]=d,d instanceof ob?(this.map[d.selector]=d,d.id&&(this.classes[d.key]=d.id)):d instanceof sb&&this.keyframes&&(this.keyframes[d.name]=d.id)},D.unregister=function(d){delete this.map[d.key],d instanceof ob?(delete this.map[d.selector],delete this.classes[d.key]):d instanceof sb&&delete this.keyframes[d.name]},D.update=function(){var d,S,r;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(d=arguments.length<=0?void 0:arguments[0],S=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):(S=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],d=null),d)this.updateOne(this.get(d),S,r);else for(var a=0;a<this.index.length;a++)this.updateOne(this.index[a],S,r)},D.updateOne=function(d,S,r){r===void 0&&(r=B4);var a=this.options,u=a.jss.plugins,c=a.sheet;if(d.rules instanceof A){d.rules.update(S,r);return}var t=d.style;if(u.onUpdate(S,d,c,r),r.process&&t&&t!==d.style){u.onProcessStyle(d.style,d,c);for(var f in d.style){var n=d.style[f],o=t[f];n!==o&&d.prop(f,n,cw)}for(var l in t){var h=d.style[l],i=t[l];h==null&&h!==i&&d.prop(l,null,cw)}}},D.toString=function(d){for(var S="",r=this.options.sheet,a=r?r.options.link:!1,u=m0(d),c=u.linebreak,t=0;t<this.index.length;t++){var f=this.index[t],n=f.toString(d);!n&&!a||(S&&(S+=c),S+=n)}return S},A}(),dA=function(){function A(e,d){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=mi({},d,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),d.Renderer&&(this.renderer=new d.Renderer(this)),this.rules=new Yy(this.options);for(var S in e)this.rules.add(S,e[S]);this.rules.process()}var D=A.prototype;return D.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},D.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},D.addRule=function(d,S,r){var a=this.queue;this.attached&&!a&&(this.queue=[]);var u=this.rules.add(d,S,r);return u?(this.options.jss.plugins.onProcessRule(u),this.attached?(this.deployed&&(a?a.push(u):(this.insertRule(u),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),u):(this.deployed=!1,u)):null},D.replaceRule=function(d,S,r){var a=this.rules.get(d);if(!a)return this.addRule(d,S,r);var u=this.rules.replace(d,S,r);return u&&this.options.jss.plugins.onProcessRule(u),this.attached?(this.deployed&&this.renderer&&(u?a.renderable&&this.renderer.replaceRule(a.renderable,u):this.renderer.deleteRule(a)),u):(this.deployed=!1,u)},D.insertRule=function(d){this.renderer&&this.renderer.insertRule(d)},D.addRules=function(d,S){var r=[];for(var a in d){var u=this.addRule(a,d[a],S);u&&r.push(u)}return r},D.getRule=function(d){return this.rules.get(d)},D.deleteRule=function(d){var S=typeof d=="object"?d:this.rules.get(d);return!S||this.attached&&!S.renderable?!1:(this.rules.remove(S),this.attached&&S.renderable&&this.renderer?this.renderer.deleteRule(S.renderable):!0)},D.indexOf=function(d){return this.rules.indexOf(d)},D.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},D.update=function(){var d;return(d=this.rules).update.apply(d,arguments),this},D.updateOne=function(d,S,r){return this.rules.updateOne(d,S,r),this},D.toString=function(d){return this.rules.toString(d)},A}(),U4=function(){function A(){this.plugins={internal:[],external:[]},this.registry={}}var D=A.prototype;return D.onCreateRule=function(d,S,r){for(var a=0;a<this.registry.onCreateRule.length;a++){var u=this.registry.onCreateRule[a](d,S,r);if(u)return u}return null},D.onProcessRule=function(d){if(!d.isProcessed){for(var S=d.options.sheet,r=0;r<this.registry.onProcessRule.length;r++)this.registry.onProcessRule[r](d,S);d.style&&this.onProcessStyle(d.style,d,S),d.isProcessed=!0}},D.onProcessStyle=function(d,S,r){for(var a=0;a<this.registry.onProcessStyle.length;a++)S.style=this.registry.onProcessStyle[a](S.style,S,r)},D.onProcessSheet=function(d){for(var S=0;S<this.registry.onProcessSheet.length;S++)this.registry.onProcessSheet[S](d)},D.onUpdate=function(d,S,r,a){for(var u=0;u<this.registry.onUpdate.length;u++)this.registry.onUpdate[u](d,S,r,a)},D.onChangeValue=function(d,S,r){for(var a=d,u=0;u<this.registry.onChangeValue.length;u++)a=this.registry.onChangeValue[u](a,S,r);return a},D.use=function(d,S){S===void 0&&(S={queue:"external"});var r=this.plugins[S.queue];r.indexOf(d)===-1&&(r.push(d),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(a,u){for(var c in u)c in a&&a[c].push(u[c]);return a},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},A}(),V4=function(){function A(){this.registry=[]}var D=A.prototype;return D.add=function(d){var S=this.registry,r=d.options.index;if(S.indexOf(d)===-1){if(S.length===0||r>=this.index){S.push(d);return}for(var a=0;a<S.length;a++)if(S[a].options.index>r){S.splice(a,0,d);return}}},D.reset=function(){this.registry=[]},D.remove=function(d){var S=this.registry.indexOf(d);this.registry.splice(S,1)},D.toString=function(d){for(var S=d===void 0?{}:d,r=S.attached,a=x2(S,["attached"]),u=m0(a),c=u.linebreak,t="",f=0;f<this.registry.length;f++){var n=this.registry[f];r!=null&&n.attached!==r||(t&&(t+=c),t+=n.toString(a))}return t},pA(A,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),A}(),um=new V4,ub=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),cb="2f1acc6c3a606b082e5eef5e54414ffb";ub[cb]==null&&(ub[cb]=0);var fw=ub[cb]++,hw=function(D){D===void 0&&(D={});var e=0,d=function(r,a){e+=1;var u="",c="";return a&&(a.options.classNamePrefix&&(c=a.options.classNamePrefix),a.options.jss.id!=null&&(u=String(a.options.jss.id))),D.minify?""+(c||"c")+fw+u+e:c+r.key+"-"+fw+(u?"-"+u:"")+"-"+e};return d},mA=function(D){var e;return function(){return e||(e=D()),e}},H4=function(D,e){try{return D.attributeStyleMap?D.attributeStyleMap.get(e):D.style.getPropertyValue(e)}catch{return""}},G4=function(D,e,d){try{var S=d;if(Array.isArray(d)&&(S=Uv(d)),D.attributeStyleMap)D.attributeStyleMap.set(e,S);else{var r=S?S.indexOf("!important"):-1,a=r>-1?S.substr(0,r-1):S;D.style.setProperty(e,a,r>-1?"important":"")}}catch{return!1}return!0},j4=function(D,e){try{D.attributeStyleMap?D.attributeStyleMap.delete(e):D.style.removeProperty(e)}catch{}},W4=function(D,e){return D.selectorText=e,D.selectorText===e},gA=mA(function(){return document.querySelector("head")});function Y4(A,D){for(var e=0;e<A.length;e++){var d=A[e];if(d.attached&&d.options.index>D.index&&d.options.insertionPoint===D.insertionPoint)return d}return null}function X4(A,D){for(var e=A.length-1;e>=0;e--){var d=A[e];if(d.attached&&d.options.insertionPoint===D.insertionPoint)return d}return null}function Z4(A){for(var D=gA(),e=0;e<D.childNodes.length;e++){var d=D.childNodes[e];if(d.nodeType===8&&d.nodeValue.trim()===A)return d}return null}function K4(A){var D=um.registry;if(D.length>0){var e=Y4(D,A);if(e&&e.renderer)return{parent:e.renderer.element.parentNode,node:e.renderer.element};if(e=X4(D,A),e&&e.renderer)return{parent:e.renderer.element.parentNode,node:e.renderer.element.nextSibling}}var d=A.insertionPoint;if(d&&typeof d=="string"){var S=Z4(d);if(S)return{parent:S.parentNode,node:S.nextSibling}}return!1}function J4(A,D){var e=D.insertionPoint,d=K4(D);if(d!==!1&&d.parent){d.parent.insertBefore(A,d.node);return}if(e&&typeof e.nodeType=="number"){var S=e,r=S.parentNode;r&&r.insertBefore(A,S.nextSibling);return}gA().appendChild(A)}var $4=mA(function(){var A=document.querySelector('meta[property="csp-nonce"]');return A?A.getAttribute("content"):null}),pw=function(D,e,d){try{"insertRule"in D?D.insertRule(e,d):"appendRule"in D&&D.appendRule(e)}catch{return!1}return D.cssRules[d]},vw=function(D,e){var d=D.cssRules.length;return e===void 0||e>d?d:e},Q4=function(){var D=document.createElement("style");return D.textContent=`
`,D},q4=function(){function A(e){this.getPropertyValue=H4,this.setProperty=G4,this.removeProperty=j4,this.setSelector=W4,this.hasInsertedRules=!1,this.cssRules=[],e&&um.add(e),this.sheet=e;var d=this.sheet?this.sheet.options:{},S=d.media,r=d.meta,a=d.element;this.element=a||Q4(),this.element.setAttribute("data-jss",""),S&&this.element.setAttribute("media",S),r&&this.element.setAttribute("data-meta",r);var u=$4();u&&this.element.setAttribute("nonce",u)}var D=A.prototype;return D.attach=function(){if(!(this.element.parentNode||!this.sheet)){J4(this.element,this.sheet.options);var d=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&d&&(this.hasInsertedRules=!1,this.deploy())}},D.detach=function(){if(!!this.sheet){var d=this.element.parentNode;d&&d.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},D.deploy=function(){var d=this.sheet;if(!!d){if(d.options.link){this.insertRules(d.rules);return}this.element.textContent=`
`+d.toString()+`
`}},D.insertRules=function(d,S){for(var r=0;r<d.index.length;r++)this.insertRule(d.index[r],r,S)},D.insertRule=function(d,S,r){if(r===void 0&&(r=this.element.sheet),d.rules){var a=d,u=r;if(d.type==="conditional"||d.type==="keyframes"){var c=vw(r,S);if(u=pw(r,a.toString({children:!1}),c),u===!1)return!1;this.refCssRule(d,c,u)}return this.insertRules(a.rules,u),u}var t=d.toString();if(!t)return!1;var f=vw(r,S),n=pw(r,t,f);return n===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(d,f,n),n)},D.refCssRule=function(d,S,r){d.renderable=r,d.options.parent instanceof dA&&this.cssRules.splice(S,0,r)},D.deleteRule=function(d){var S=this.element.sheet,r=this.indexOf(d);return r===-1?!1:(S.deleteRule(r),this.cssRules.splice(r,1),!0)},D.indexOf=function(d){return this.cssRules.indexOf(d)},D.replaceRule=function(d,S){var r=this.indexOf(d);return r===-1?!1:(this.element.sheet.deleteRule(r),this.cssRules.splice(r,1),this.insertRule(S,r))},D.getRules=function(){return this.element.sheet.cssRules},A}(),eC=0,tC=function(){function A(e){this.id=eC++,this.version="10.9.2",this.plugins=new U4,this.options={id:{minify:!1},createGenerateId:hw,Renderer:zm?q4:null,plugins:[]},this.generateId=hw({minify:!1});for(var d=0;d<uw.length;d++)this.plugins.use(uw[d],{queue:"internal"});this.setup(e)}var D=A.prototype;return D.setup=function(d){return d===void 0&&(d={}),d.createGenerateId&&(this.options.createGenerateId=d.createGenerateId),d.id&&(this.options.id=mi({},this.options.id,d.id)),(d.createGenerateId||d.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),d.insertionPoint!=null&&(this.options.insertionPoint=d.insertionPoint),"Renderer"in d&&(this.options.Renderer=d.Renderer),d.plugins&&this.use.apply(this,d.plugins),this},D.createStyleSheet=function(d,S){S===void 0&&(S={});var r=S,a=r.index;typeof a!="number"&&(a=um.index===0?0:um.index+1);var u=new dA(d,mi({},S,{jss:this,generateId:S.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:a}));return this.plugins.onProcessSheet(u),u},D.removeStyleSheet=function(d){return d.detach(),um.remove(d),this},D.createRule=function(d,S,r){if(S===void 0&&(S={}),r===void 0&&(r={}),typeof d=="object")return this.createRule(void 0,d,S);var a=mi({},r,{name:d,jss:this,Renderer:this.options.Renderer});a.generateId||(a.generateId=this.generateId),a.classes||(a.classes={}),a.keyframes||(a.keyframes={});var u=w2(d,S,a);return u&&this.plugins.onProcessRule(u),u},D.use=function(){for(var d=this,S=arguments.length,r=new Array(S),a=0;a<S;a++)r[a]=arguments[a];return r.forEach(function(u){d.plugins.use(u)}),this},A}(),yA=function(D){return new tC(D)},A2=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function xA(A){var D=null;for(var e in A){var d=A[e],S=typeof d;if(S==="function")D||(D={}),D[e]=d;else if(S==="object"&&d!==null&&!Array.isArray(d)){var r=xA(d);r&&(D||(D={}),D[e]=r)}}return D}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */yA();var bA=Date.now(),J1="fnValues"+bA,$1="fnStyle"+ ++bA,rC=function(){return{onCreateRule:function(e,d,S){if(typeof d!="function")return null;var r=w2(e,{},S);return r[$1]=d,r},onProcessStyle:function(e,d){if(J1 in d||$1 in d)return e;var S={};for(var r in e){var a=e[r];typeof a=="function"&&(delete e[r],S[r]=a)}return d[J1]=S,e},onUpdate:function(e,d,S,r){var a=d,u=a[$1];u&&(a.style=u(e)||{});var c=a[J1];if(c)for(var t in c)a.prop(t,c[t](e),r)}}};const nC=rC;var Qp="@global",fb="@global ",aC=function(){function A(e,d,S){this.type="global",this.at=Qp,this.isProcessed=!1,this.key=e,this.options=S,this.rules=new Yy(mi({},S,{parent:this}));for(var r in d)this.rules.add(r,d[r]);this.rules.process()}var D=A.prototype;return D.getRule=function(d){return this.rules.get(d)},D.addRule=function(d,S,r){var a=this.rules.add(d,S,r);return a&&this.options.jss.plugins.onProcessRule(a),a},D.replaceRule=function(d,S,r){var a=this.rules.replace(d,S,r);return a&&this.options.jss.plugins.onProcessRule(a),a},D.indexOf=function(d){return this.rules.indexOf(d)},D.toString=function(d){return this.rules.toString(d)},A}(),iC=function(){function A(e,d,S){this.type="global",this.at=Qp,this.isProcessed=!1,this.key=e,this.options=S;var r=e.substr(fb.length);this.rule=S.jss.createRule(r,d,mi({},S,{parent:this}))}var D=A.prototype;return D.toString=function(d){return this.rule?this.rule.toString(d):""},A}(),oC=/\s*,\s*/g;function _A(A,D){for(var e=A.split(oC),d="",S=0;S<e.length;S++)d+=D+" "+e[S].trim(),e[S+1]&&(d+=", ");return d}function sC(A,D){var e=A.options,d=A.style,S=d?d[Qp]:null;if(!!S){for(var r in S)D.addRule(r,S[r],mi({},e,{selector:_A(r,A.selector)}));delete d[Qp]}}function lC(A,D){var e=A.options,d=A.style;for(var S in d)if(!(S[0]!=="@"||S.substr(0,Qp.length)!==Qp)){var r=_A(S.substr(Qp.length),A.selector);D.addRule(r,d[S],mi({},e,{selector:r})),delete d[S]}}function uC(){function A(e,d,S){if(!e)return null;if(e===Qp)return new aC(e,d,S);if(e[0]==="@"&&e.substr(0,fb.length)===fb)return new iC(e,d,S);var r=S.parent;return r&&(r.type==="global"||r.options.parent&&r.options.parent.type==="global")&&(S.scoped=!1),!S.selector&&S.scoped===!1&&(S.selector=e),null}function D(e,d){e.type!=="style"||!d||(sC(e,d),lC(e,d))}return{onCreateRule:A,onProcessRule:D}}var dw=/\s*,\s*/g,cC=/&/g,fC=/\$([\w-]+)/g;function hC(){function A(S,r){return function(a,u){var c=S.getRule(u)||r&&r.getRule(u);return c?c.selector:u}}function D(S,r){for(var a=r.split(dw),u=S.split(dw),c="",t=0;t<a.length;t++)for(var f=a[t],n=0;n<u.length;n++){var o=u[n];c&&(c+=", "),c+=o.indexOf("&")!==-1?o.replace(cC,f):f+" "+o}return c}function e(S,r,a){if(a)return mi({},a,{index:a.index+1});var u=S.options.nestingLevel;u=u===void 0?1:u+1;var c=mi({},S.options,{nestingLevel:u,index:r.indexOf(S)+1});return delete c.name,c}function d(S,r,a){if(r.type!=="style")return S;var u=r,c=u.options.parent,t,f;for(var n in S){var o=n.indexOf("&")!==-1,l=n[0]==="@";if(!(!o&&!l)){if(t=e(u,c,t),o){var h=D(n,u.selector);f||(f=A(c,a)),h=h.replace(fC,f);var i=u.key+"-"+n;"replaceRule"in c?c.replaceRule(i,S[n],mi({},t,{selector:h})):c.addRule(i,S[n],mi({},t,{selector:h}))}else l&&c.addRule(n,{},t).addRule(u.key,S[n],{selector:u.selector});delete S[n]}}return S}return{onProcessStyle:d}}var pC=/[A-Z]/g,vC=/^ms-/,Q1={};function dC(A){return"-"+A.toLowerCase()}function wA(A){if(Q1.hasOwnProperty(A))return Q1[A];var D=A.replace(pC,dC);return Q1[A]=vC.test(D)?"-"+D:D}function gy(A){var D={};for(var e in A){var d=e.indexOf("--")===0?e:wA(e);D[d]=A[e]}return A.fallbacks&&(Array.isArray(A.fallbacks)?D.fallbacks=A.fallbacks.map(gy):D.fallbacks=gy(A.fallbacks)),D}function mC(){function A(e){if(Array.isArray(e)){for(var d=0;d<e.length;d++)e[d]=gy(e[d]);return e}return gy(e)}function D(e,d,S){if(d.indexOf("--")===0)return e;var r=wA(d);return d===r?e:(S.prop(r,e),null)}return{onProcessStyle:A,onChangeValue:D}}var Bn=A2&&CSS?CSS.px:"px",Mg=A2&&CSS?CSS.ms:"ms",Fd=A2&&CSS?CSS.percent:"%",gC={"animation-delay":Mg,"animation-duration":Mg,"background-position":Bn,"background-position-x":Bn,"background-position-y":Bn,"background-size":Bn,border:Bn,"border-bottom":Bn,"border-bottom-left-radius":Bn,"border-bottom-right-radius":Bn,"border-bottom-width":Bn,"border-left":Bn,"border-left-width":Bn,"border-radius":Bn,"border-right":Bn,"border-right-width":Bn,"border-top":Bn,"border-top-left-radius":Bn,"border-top-right-radius":Bn,"border-top-width":Bn,"border-width":Bn,"border-block":Bn,"border-block-end":Bn,"border-block-end-width":Bn,"border-block-start":Bn,"border-block-start-width":Bn,"border-block-width":Bn,"border-inline":Bn,"border-inline-end":Bn,"border-inline-end-width":Bn,"border-inline-start":Bn,"border-inline-start-width":Bn,"border-inline-width":Bn,"border-start-start-radius":Bn,"border-start-end-radius":Bn,"border-end-start-radius":Bn,"border-end-end-radius":Bn,margin:Bn,"margin-bottom":Bn,"margin-left":Bn,"margin-right":Bn,"margin-top":Bn,"margin-block":Bn,"margin-block-end":Bn,"margin-block-start":Bn,"margin-inline":Bn,"margin-inline-end":Bn,"margin-inline-start":Bn,padding:Bn,"padding-bottom":Bn,"padding-left":Bn,"padding-right":Bn,"padding-top":Bn,"padding-block":Bn,"padding-block-end":Bn,"padding-block-start":Bn,"padding-inline":Bn,"padding-inline-end":Bn,"padding-inline-start":Bn,"mask-position-x":Bn,"mask-position-y":Bn,"mask-size":Bn,height:Bn,width:Bn,"min-height":Bn,"max-height":Bn,"min-width":Bn,"max-width":Bn,bottom:Bn,left:Bn,top:Bn,right:Bn,inset:Bn,"inset-block":Bn,"inset-block-end":Bn,"inset-block-start":Bn,"inset-inline":Bn,"inset-inline-end":Bn,"inset-inline-start":Bn,"box-shadow":Bn,"text-shadow":Bn,"column-gap":Bn,"column-rule":Bn,"column-rule-width":Bn,"column-width":Bn,"font-size":Bn,"font-size-delta":Bn,"letter-spacing":Bn,"text-decoration-thickness":Bn,"text-indent":Bn,"text-stroke":Bn,"text-stroke-width":Bn,"word-spacing":Bn,motion:Bn,"motion-offset":Bn,outline:Bn,"outline-offset":Bn,"outline-width":Bn,perspective:Bn,"perspective-origin-x":Fd,"perspective-origin-y":Fd,"transform-origin":Fd,"transform-origin-x":Fd,"transform-origin-y":Fd,"transform-origin-z":Fd,"transition-delay":Mg,"transition-duration":Mg,"vertical-align":Bn,"flex-basis":Bn,"shape-margin":Bn,size:Bn,gap:Bn,grid:Bn,"grid-gap":Bn,"row-gap":Bn,"grid-row-gap":Bn,"grid-column-gap":Bn,"grid-template-rows":Bn,"grid-template-columns":Bn,"grid-auto-rows":Bn,"grid-auto-columns":Bn,"box-shadow-x":Bn,"box-shadow-y":Bn,"box-shadow-blur":Bn,"box-shadow-spread":Bn,"font-line-height":Bn,"text-shadow-x":Bn,"text-shadow-y":Bn,"text-shadow-blur":Bn};function TA(A){var D=/(-[a-z])/g,e=function(a){return a[1].toUpperCase()},d={};for(var S in A)d[S]=A[S],d[S.replace(D,e)]=A[S];return d}var yC=TA(gC);function cm(A,D,e){if(D==null)return D;if(Array.isArray(D))for(var d=0;d<D.length;d++)D[d]=cm(A,D[d],e);else if(typeof D=="object")if(A==="fallbacks")for(var S in D)D[S]=cm(S,D[S],e);else for(var r in D)D[r]=cm(A+"-"+r,D[r],e);else if(typeof D=="number"&&isNaN(D)===!1){var a=e[A]||yC[A];return a&&!(D===0&&a===Bn)?typeof a=="function"?a(D).toString():""+D+a:D.toString()}return D}function xC(A){A===void 0&&(A={});var D=TA(A);function e(S,r){if(r.type!=="style")return S;for(var a in S)S[a]=cm(a,S[a],D);return S}function d(S,r){return cm(r,S,D)}return{onProcessStyle:e,onChangeValue:d}}var $0="",hb="",AA="",MA="",bC=zm&&"ontouchstart"in document.documentElement;if(zm){var q1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},_C=document.createElement("p"),ex=_C.style,wC="Transform";for(var tx in q1)if(tx+wC in ex){$0=tx,hb=q1[tx];break}$0==="Webkit"&&"msHyphens"in ex&&($0="ms",hb=q1.ms,MA="edge"),$0==="Webkit"&&"-apple-trailing-word"in ex&&(AA="apple")}var gi={js:$0,css:hb,vendor:AA,browser:MA,isTouch:bC};function TC(A){return A[1]==="-"||gi.js==="ms"?A:"@"+gi.css+"keyframes"+A.substr(10)}var AC={noPrefill:["appearance"],supportedProperty:function(D){return D!=="appearance"?!1:gi.js==="ms"?"-webkit-"+D:gi.css+D}},MC={noPrefill:["color-adjust"],supportedProperty:function(D){return D!=="color-adjust"?!1:gi.js==="Webkit"?gi.css+"print-"+D:D}},kC=/[-\s]+(.)?/g;function SC(A,D){return D?D.toUpperCase():""}function M2(A){return A.replace(kC,SC)}function tv(A){return M2("-"+A)}var CC={noPrefill:["mask"],supportedProperty:function(D,e){if(!/^mask/.test(D))return!1;if(gi.js==="Webkit"){var d="mask-image";if(M2(d)in e)return D;if(gi.js+tv(d)in e)return gi.css+D}return D}},EC={noPrefill:["text-orientation"],supportedProperty:function(D){return D!=="text-orientation"?!1:gi.vendor==="apple"&&!gi.isTouch?gi.css+D:D}},LC={noPrefill:["transform"],supportedProperty:function(D,e,d){return D!=="transform"?!1:d.transform?D:gi.css+D}},PC={noPrefill:["transition"],supportedProperty:function(D,e,d){return D!=="transition"?!1:d.transition?D:gi.css+D}},RC={noPrefill:["writing-mode"],supportedProperty:function(D){return D!=="writing-mode"?!1:gi.js==="Webkit"||gi.js==="ms"&&gi.browser!=="edge"?gi.css+D:D}},DC={noPrefill:["user-select"],supportedProperty:function(D){return D!=="user-select"?!1:gi.js==="Moz"||gi.js==="ms"||gi.vendor==="apple"?gi.css+D:D}},IC={supportedProperty:function(D,e){if(!/^break-/.test(D))return!1;if(gi.js==="Webkit"){var d="WebkitColumn"+tv(D);return d in e?gi.css+"column-"+D:!1}if(gi.js==="Moz"){var S="page"+tv(D);return S in e?"page-"+D:!1}return!1}},zC={supportedProperty:function(D,e){if(!/^(border|margin|padding)-inline/.test(D))return!1;if(gi.js==="Moz")return D;var d=D.replace("-inline","");return gi.js+tv(d)in e?gi.css+d:!1}},FC={supportedProperty:function(D,e){return M2(D)in e?D:!1}},OC={supportedProperty:function(D,e){var d=tv(D);return D[0]==="-"||D[0]==="-"&&D[1]==="-"?D:gi.js+d in e?gi.css+D:gi.js!=="Webkit"&&"Webkit"+d in e?"-webkit-"+D:!1}},NC={supportedProperty:function(D){return D.substring(0,11)!=="scroll-snap"?!1:gi.js==="ms"?""+gi.css+D:D}},BC={supportedProperty:function(D){return D!=="overscroll-behavior"?!1:gi.js==="ms"?gi.css+"scroll-chaining":D}},UC={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},VC={supportedProperty:function(D,e){var d=UC[D];return d&&gi.js+tv(d)in e?gi.css+d:!1}},kA={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},HC=Object.keys(kA),GC=function(D){return gi.css+D},jC={supportedProperty:function(D,e,d){var S=d.multiple;if(HC.indexOf(D)>-1){var r=kA[D];if(!Array.isArray(r))return gi.js+tv(r)in e?gi.css+r:!1;if(!S)return!1;for(var a=0;a<r.length;a++)if(!(gi.js+tv(r[0])in e))return!1;return r.map(GC)}return!1}},SA=[AC,MC,CC,EC,LC,PC,RC,DC,IC,zC,FC,OC,NC,BC,VC,jC],mw=SA.filter(function(A){return A.supportedProperty}).map(function(A){return A.supportedProperty}),WC=SA.filter(function(A){return A.noPrefill}).reduce(function(A,D){return A.push.apply(A,dh(D.noPrefill)),A},[]),Q0,Dv={};if(zm){Q0=document.createElement("p");var rx=window.getComputedStyle(document.documentElement,"");for(var nx in rx)isNaN(nx)||(Dv[rx[nx]]=rx[nx]);WC.forEach(function(A){return delete Dv[A]})}function pb(A,D){if(D===void 0&&(D={}),!Q0)return A;if(Dv[A]!=null)return Dv[A];(A==="transition"||A==="transform")&&(D[A]=A in Q0.style);for(var e=0;e<mw.length&&(Dv[A]=mw[e](A,Q0.style,D),!Dv[A]);e++);try{Q0.style[A]=""}catch{return!1}return Dv[A]}var Od={},YC={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},XC=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Op;function ZC(A,D,e){if(D==="var")return"var";if(D==="all")return"all";if(e==="all")return", all";var d=D?pb(D):", "+pb(e);return d||D||e}zm&&(Op=document.createElement("p"));function gw(A,D){var e=D;if(!Op||A==="content")return D;if(typeof e!="string"||!isNaN(parseInt(e,10)))return e;var d=A+e;if(Od[d]!=null)return Od[d];try{Op.style[A]=e}catch{return Od[d]=!1,!1}if(YC[A])e=e.replace(XC,ZC);else if(Op.style[A]===""&&(e=gi.css+e,e==="-ms-flex"&&(Op.style[A]="-ms-flexbox"),Op.style[A]=e,Op.style[A]===""))return Od[d]=!1,!1;return Op.style[A]="",Od[d]=e,Od[d]}function KC(){function A(S){if(S.type==="keyframes"){var r=S;r.at=TC(r.at)}}function D(S){for(var r in S){var a=S[r];if(r==="fallbacks"&&Array.isArray(a)){S[r]=a.map(D);continue}var u=!1,c=pb(r);c&&c!==r&&(u=!0);var t=!1,f=gw(c,Uv(a));f&&f!==a&&(t=!0),(u||t)&&(u&&delete S[r],S[c||r]=f||a)}return S}function e(S,r){return r.type!=="style"?S:D(S)}function d(S,r){return gw(r,Uv(S))||S}return{onProcessRule:A,onProcessStyle:e,onChangeValue:d}}function JC(){var A=function(e,d){return e.length===d.length?e>d?1:-1:e.length-d.length};return{onProcessStyle:function(e,d){if(d.type!=="style")return e;for(var S={},r=Object.keys(e).sort(A),a=0;a<r.length;a++)S[r[a]]=e[r[a]];return S}}}function $C(){return{plugins:[nC(),uC(),hC(),mC(),xC(),typeof window>"u"?null:KC(),JC()]}}function CA(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=A.baseClasses,e=A.newClasses;if(A.Component,!e)return D;var d=mi({},D);return Object.keys(e).forEach(function(S){e[S]&&(d[S]="".concat(D[S]," ").concat(e[S]))}),d}var QC={set:function(D,e,d,S){var r=D.get(e);r||(r=new Map,D.set(e,r)),r.set(d,S)},get:function(D,e,d){var S=D.get(e);return S?S.get(d):void 0},delete:function(D,e,d){var S=D.get(e);S.delete(d)}};const Jd=QC;var qC=$l.createContext(null);const e6=qC;function EA(){var A=$l.useContext(e6);return A}var Xy={exports:{}},Zy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=Nn.exports,r6=Symbol.for("react.element"),n6=Symbol.for("react.fragment"),a6=Object.prototype.hasOwnProperty,i6=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o6={key:!0,ref:!0,__self:!0,__source:!0};function LA(A,D,e){var d,S={},r=null,a=null;e!==void 0&&(r=""+e),D.key!==void 0&&(r=""+D.key),D.ref!==void 0&&(a=D.ref);for(d in D)a6.call(D,d)&&!o6.hasOwnProperty(d)&&(S[d]=D[d]);if(A&&A.defaultProps)for(d in D=A.defaultProps,D)S[d]===void 0&&(S[d]=D[d]);return{$$typeof:r6,type:A,key:r,ref:a,props:S,_owner:i6.current}}Zy.Fragment=n6;Zy.jsx=LA;Zy.jsxs=LA;(function(A){A.exports=Zy})(Xy);const s6=Xy.exports.Fragment,wn=Xy.exports.jsx,Gi=Xy.exports.jsxs;var l6=yA($C()),u6=m4(),c6=new Map,f6={disableGeneration:!1,generateClassName:u6,jss:l6,sheetsCache:null,sheetsManager:c6,sheetsRegistry:null},h6=$l.createContext(f6),yw=-1e9;function p6(){return yw+=1,yw}var v6={};const d6=v6;function m6(A){var D=typeof A=="function";return{create:function(d,S){var r;try{r=D?A(d):A}catch(c){throw c}if(!S||!d.overrides||!d.overrides[S])return r;var a=d.overrides[S],u=mi({},r);return Object.keys(a).forEach(function(c){u[c]=f0(u[c],a[c])}),u},options:{}}}function g6(A,D,e){var d=A.state,S=A.stylesOptions;if(S.disableGeneration)return D||{};d.cacheClasses||(d.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return d.classes!==d.cacheClasses.lastJSS&&(d.cacheClasses.lastJSS=d.classes,r=!0),D!==d.cacheClasses.lastProp&&(d.cacheClasses.lastProp=D,r=!0),r&&(d.cacheClasses.value=CA({baseClasses:d.cacheClasses.lastJSS,newClasses:D,Component:e})),d.cacheClasses.value}function y6(A,D){var e=A.state,d=A.theme,S=A.stylesOptions,r=A.stylesCreator,a=A.name;if(!S.disableGeneration){var u=Jd.get(S.sheetsManager,r,d);u||(u={refs:0,staticSheet:null,dynamicStyles:null},Jd.set(S.sheetsManager,r,d,u));var c=mi({},r.options,S,{theme:d,flip:typeof S.flip=="boolean"?S.flip:d.direction==="rtl"});c.generateId=c.serverGenerateClassName||c.generateClassName;var t=S.sheetsRegistry;if(u.refs===0){var f;S.sheetsCache&&(f=Jd.get(S.sheetsCache,r,d));var n=r.create(d,a);f||(f=S.jss.createStyleSheet(n,mi({link:!1},c)),f.attach(),S.sheetsCache&&Jd.set(S.sheetsCache,r,d,f)),t&&t.add(f),u.staticSheet=f,u.dynamicStyles=xA(n)}if(u.dynamicStyles){var o=S.jss.createStyleSheet(u.dynamicStyles,mi({link:!0},c));o.update(D),o.attach(),e.dynamicSheet=o,e.classes=CA({baseClasses:u.staticSheet.classes,newClasses:o.classes}),t&&t.add(o)}else e.classes=u.staticSheet.classes;u.refs+=1}}function x6(A,D){var e=A.state;e.dynamicSheet&&e.dynamicSheet.update(D)}function b6(A){var D=A.state,e=A.theme,d=A.stylesOptions,S=A.stylesCreator;if(!d.disableGeneration){var r=Jd.get(d.sheetsManager,S,e);r.refs-=1;var a=d.sheetsRegistry;r.refs===0&&(Jd.delete(d.sheetsManager,S,e),d.jss.removeStyleSheet(r.staticSheet),a&&a.remove(r.staticSheet)),D.dynamicSheet&&(d.jss.removeStyleSheet(D.dynamicSheet),a&&a.remove(D.dynamicSheet))}}function _6(A,D){var e=$l.useRef([]),d,S=$l.useMemo(function(){return{}},D);e.current!==S&&(e.current=S,d=A()),$l.useEffect(function(){return function(){d&&d()}},[S])}function w6(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=D.name,d=D.classNamePrefix,S=D.Component,r=D.defaultTheme,a=r===void 0?d6:r,u=ql(D,["name","classNamePrefix","Component","defaultTheme"]),c=m6(A),t=e||d||"makeStyles";c.options={index:p6(),name:e,meta:t,classNamePrefix:t};var f=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=EA()||a,h=mi({},$l.useContext(h6),u),i=$l.useRef(),s=$l.useRef();_6(function(){var v={name:e,state:{},stylesCreator:c,stylesOptions:h,theme:l};return y6(v,o),s.current=!1,i.current=v,function(){b6(v)}},[l,c]),$l.useEffect(function(){s.current&&x6(i.current,o),s.current=!0});var p=g6(i.current,o.classes,S);return p};return f}function PA(A){var D,e,d="";if(typeof A=="string"||typeof A=="number")d+=A;else if(typeof A=="object")if(Array.isArray(A))for(D=0;D<A.length;D++)A[D]&&(e=PA(A[D]))&&(d&&(d+=" "),d+=e);else for(D in A)A[D]&&(d&&(d+=" "),d+=D);return d}function Yu(){for(var A,D,e=0,d="";e<arguments.length;)(A=arguments[e++])&&(D=PA(A))&&(d&&(d+=" "),d+=D);return d}var k2=sA.exports,T6={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},A6={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},M6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},RA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},S2={};S2[k2.ForwardRef]=M6;S2[k2.Memo]=RA;function xw(A){return k2.isMemo(A)?RA:S2[A.$$typeof]||T6}var k6=Object.defineProperty,S6=Object.getOwnPropertyNames,bw=Object.getOwnPropertySymbols,C6=Object.getOwnPropertyDescriptor,E6=Object.getPrototypeOf,_w=Object.prototype;function DA(A,D,e){if(typeof D!="string"){if(_w){var d=E6(D);d&&d!==_w&&DA(A,d,e)}var S=S6(D);bw&&(S=S.concat(bw(D)));for(var r=xw(A),a=xw(D),u=0;u<S.length;++u){var c=S[u];if(!A6[c]&&!(e&&e[c])&&!(a&&a[c])&&!(r&&r[c])){var t=C6(D,c);try{k6(A,c,t)}catch{}}}}return A}var L6=DA,P6=function(D){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(d){var S=e.defaultTheme,r=e.withTheme,a=r===void 0?!1:r,u=e.name,c=ql(e,["defaultTheme","withTheme","name"]),t=u,f=w6(D,mi({defaultTheme:S,Component:d,name:u||d.displayName,classNamePrefix:t},c)),n=$l.forwardRef(function(l,h){l.classes;var i=l.innerRef,s=ql(l,["classes","innerRef"]),p=f(mi({},d.defaultProps,l)),v,m=s;return(typeof u=="string"||a)&&(v=EA()||S,u&&(m=g4({theme:v,name:u,props:s})),a&&!m.theme&&(m.theme=v)),wn(d,{ref:i||h,classes:p,...m})});return L6(n,d),n}};const R6=P6;var D6=h4();const I6=D6;function ip(A,D){return R6(A,mi({defaultTheme:I6},D))}var z6=function(D){var e={};return D.shadows.forEach(function(d,S){e["elevation".concat(S)]={boxShadow:d}}),mi({root:{backgroundColor:D.palette.background.paper,color:D.palette.text.primary,transition:D.transitions.create("box-shadow")},rounded:{borderRadius:D.shape.borderRadius},outlined:{border:"1px solid ".concat(D.palette.divider)}},e)},F6=Nn.exports.forwardRef(function(D,e){var d=D.classes,S=D.className,r=D.component,a=r===void 0?"div":r,u=D.square,c=u===void 0?!1:u,t=D.elevation,f=t===void 0?1:t,n=D.variant,o=n===void 0?"elevation":n,l=ql(D,["classes","className","component","square","elevation","variant"]);return wn(a,{className:Yu(d.root,S,o==="outlined"?d.outlined:d["elevation".concat(f)],!c&&d.rounded),ref:e,...l})});const es=ip(z6,{name:"MuiPaper"})(F6);var O6=[0,1,2,3,4,5,6,7,8,9,10],N6=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function B6(A,D,e){var d={};N6.forEach(function(S){var r="grid-".concat(e,"-").concat(S);if(S===!0){d[r]={flexBasis:0,flexGrow:1,maxWidth:"100%"};return}if(S==="auto"){d[r]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};return}var a="".concat(Math.round(S/12*1e8)/1e6,"%");d[r]={flexBasis:a,flexGrow:0,maxWidth:a}}),e==="xs"?mi(A,d):A[D.breakpoints.up(e)]=d}function ax(A){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=parseFloat(A);return"".concat(e/D).concat(String(A).replace(String(e),"")||"px")}function U6(A,D){var e={};return O6.forEach(function(d){var S=A.spacing(d);S!==0&&(e["spacing-".concat(D,"-").concat(d)]={margin:"-".concat(ax(S,2)),width:"calc(100% + ".concat(ax(S),")"),"& > $item":{padding:ax(S,2)}})}),e}var V6=function(D){return mi({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},U6(D,"xs"),D.breakpoints.keys.reduce(function(e,d){return B6(e,D,d),e},{}))},H6=Nn.exports.forwardRef(function(D,e){var d=D.alignContent,S=d===void 0?"stretch":d,r=D.alignItems,a=r===void 0?"stretch":r,u=D.classes,c=D.className,t=D.component,f=t===void 0?"div":t,n=D.container,o=n===void 0?!1:n,l=D.direction,h=l===void 0?"row":l,i=D.item,s=i===void 0?!1:i,p=D.justify,v=D.justifyContent,m=v===void 0?"flex-start":v,b=D.lg,y=b===void 0?!1:b,x=D.md,w=x===void 0?!1:x,g=D.sm,T=g===void 0?!1:g,M=D.spacing,P=M===void 0?0:M,L=D.wrap,I=L===void 0?"wrap":L,C=D.xl,k=C===void 0?!1:C,E=D.xs,R=E===void 0?!1:E,O=D.zeroMinWidth,N=O===void 0?!1:O,G=ql(D,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),U=Yu(u.root,c,o&&[u.container,P!==0&&u["spacing-xs-".concat(String(P))]],s&&u.item,N&&u.zeroMinWidth,h!=="row"&&u["direction-xs-".concat(String(h))],I!=="wrap"&&u["wrap-xs-".concat(String(I))],a!=="stretch"&&u["align-items-xs-".concat(String(a))],S!=="stretch"&&u["align-content-xs-".concat(String(S))],(p||m)!=="flex-start"&&u["justify-content-xs-".concat(String(p||m))],R!==!1&&u["grid-xs-".concat(String(R))],T!==!1&&u["grid-sm-".concat(String(T))],w!==!1&&u["grid-md-".concat(String(w))],y!==!1&&u["grid-lg-".concat(String(y))],k!==!1&&u["grid-xl-".concat(String(k))]);return wn(f,{className:U,ref:e,...G})}),G6=ip(V6,{name:"MuiGrid"})(H6);const di=G6;function Zh(A){if(typeof A!="string")throw new Error(dy(7));return A.charAt(0).toUpperCase()+A.slice(1)}var j6=function(D){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:D.typography.pxToRem(24),transition:D.transitions.create("fill",{duration:D.transitions.duration.shorter})},colorPrimary:{color:D.palette.primary.main},colorSecondary:{color:D.palette.secondary.main},colorAction:{color:D.palette.action.active},colorError:{color:D.palette.error.main},colorDisabled:{color:D.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:D.typography.pxToRem(20)},fontSizeLarge:{fontSize:D.typography.pxToRem(35)}}},IA=Nn.exports.forwardRef(function(D,e){var d=D.children,S=D.classes,r=D.className,a=D.color,u=a===void 0?"inherit":a,c=D.component,t=c===void 0?"svg":c,f=D.fontSize,n=f===void 0?"medium":f,o=D.htmlColor,l=D.titleAccess,h=D.viewBox,i=h===void 0?"0 0 24 24":h,s=ql(D,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return Gi(t,{className:Yu(S.root,r,u!=="inherit"&&S["color".concat(Zh(u))],n!=="default"&&n!=="medium"&&S["fontSize".concat(Zh(n))]),focusable:"false",viewBox:i,color:o,"aria-hidden":l?void 0:!0,role:l?"img":void 0,ref:e,...s,children:[d,l?wn("title",{children:l}):null]})});IA.muiName="SvgIcon";const ww=ip(j6,{name:"MuiSvgIcon"})(IA);function W6(A,D){var e=function(S,r){return wn(ww,{ref:r,...S,children:A})};return e.muiName=ww.muiName,$l.memo($l.forwardRef(e))}const Y6=W6(wn("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function Tw(A,D){typeof A=="function"?A(D):A&&(A.current=D)}function Ug(A,D){return Nn.exports.useMemo(function(){return A==null&&D==null?null:function(e){Tw(A,e),Tw(D,e)}},[A,D])}var X6=typeof window<"u"?Nn.exports.useLayoutEffect:Nn.exports.useEffect;function q0(A){var D=Nn.exports.useRef(A);return X6(function(){D.current=A}),Nn.exports.useCallback(function(){return D.current.apply(void 0,arguments)},[])}var Ky=!0,vb=!1,Aw=null,Z6={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function K6(A){var D=A.type,e=A.tagName;return!!(e==="INPUT"&&Z6[D]&&!A.readOnly||e==="TEXTAREA"&&!A.readOnly||A.isContentEditable)}function J6(A){A.metaKey||A.altKey||A.ctrlKey||(Ky=!0)}function ix(){Ky=!1}function $6(){this.visibilityState==="hidden"&&vb&&(Ky=!0)}function Q6(A){A.addEventListener("keydown",J6,!0),A.addEventListener("mousedown",ix,!0),A.addEventListener("pointerdown",ix,!0),A.addEventListener("touchstart",ix,!0),A.addEventListener("visibilitychange",$6,!0)}function q6(A){var D=A.target;try{return D.matches(":focus-visible")}catch{}return Ky||K6(D)}function eE(){vb=!0,window.clearTimeout(Aw),Aw=window.setTimeout(function(){vb=!1},100)}function tE(){var A=Nn.exports.useCallback(function(D){var e=xy.exports.findDOMNode(D);e!=null&&Q6(e.ownerDocument)},[]);return{isFocusVisible:q6,onBlurVisible:eE,ref:A}}const Mw=$l.createContext(null);function C2(A,D){var e=function(r){return D&&Nn.exports.isValidElement(r)?D(r):r},d=Object.create(null);return A&&Nn.exports.Children.map(A,function(S){return S}).forEach(function(S){d[S.key]=e(S)}),d}function rE(A,D){A=A||{},D=D||{};function e(f){return f in D?D[f]:A[f]}var d=Object.create(null),S=[];for(var r in A)r in D?S.length&&(d[r]=S,S=[]):S.push(r);var a,u={};for(var c in D){if(d[c])for(a=0;a<d[c].length;a++){var t=d[c][a];u[d[c][a]]=e(t)}u[c]=e(c)}for(a=0;a<S.length;a++)u[S[a]]=e(S[a]);return u}function Ov(A,D,e){return e[D]!=null?e[D]:A.props[D]}function nE(A,D){return C2(A.children,function(e){return Nn.exports.cloneElement(e,{onExited:D.bind(null,e),in:!0,appear:Ov(e,"appear",A),enter:Ov(e,"enter",A),exit:Ov(e,"exit",A)})})}function aE(A,D,e){var d=C2(A.children),S=rE(D,d);return Object.keys(S).forEach(function(r){var a=S[r];if(!!Nn.exports.isValidElement(a)){var u=r in D,c=r in d,t=D[r],f=Nn.exports.isValidElement(t)&&!t.props.in;c&&(!u||f)?S[r]=Nn.exports.cloneElement(a,{onExited:e.bind(null,a),in:!0,exit:Ov(a,"exit",A),enter:Ov(a,"enter",A)}):!c&&u&&!f?S[r]=Nn.exports.cloneElement(a,{in:!1}):c&&u&&Nn.exports.isValidElement(t)&&(S[r]=Nn.exports.cloneElement(a,{onExited:e.bind(null,a),in:t.props.in,exit:Ov(a,"exit",A),enter:Ov(a,"enter",A)}))}}),S}var iE=Object.values||function(A){return Object.keys(A).map(function(D){return A[D]})},oE={component:"div",childFactory:function(D){return D}},E2=function(A){_2(D,A);function D(d,S){var r;r=A.call(this,d,S)||this;var a=r.handleExited.bind(ab(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}var e=D.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},D.getDerivedStateFromProps=function(S,r){var a=r.children,u=r.handleExited,c=r.firstRender;return{children:c?nE(S,u):aE(S,a,u),firstRender:!1}},e.handleExited=function(S,r){var a=C2(this.props.children);S.key in a||(S.props.onExited&&S.props.onExited(r),this.mounted&&this.setState(function(u){var c=mi({},u.children);return delete c[S.key],{children:c}}))},e.render=function(){var S=this.props,r=S.component,a=S.childFactory,u=x2(S,["component","childFactory"]),c=this.state.contextValue,t=iE(this.state.children).map(a);return delete u.appear,delete u.enter,delete u.exit,r===null?wn(Mw.Provider,{value:c,children:t}):wn(Mw.Provider,{value:c,children:wn(r,{...u,children:t})})},D}($l.Component);E2.propTypes={};E2.defaultProps=oE;const sE=E2;var lE=typeof window>"u"?Nn.exports.useEffect:Nn.exports.useLayoutEffect;function uE(A){var D=A.classes,e=A.pulsate,d=e===void 0?!1:e,S=A.rippleX,r=A.rippleY,a=A.rippleSize,u=A.in,c=A.onExited,t=c===void 0?function(){}:c,f=A.timeout,n=Nn.exports.useState(!1),o=n[0],l=n[1],h=Yu(D.ripple,D.rippleVisible,d&&D.ripplePulsate),i={width:a,height:a,top:-(a/2)+r,left:-(a/2)+S},s=Yu(D.child,o&&D.childLeaving,d&&D.childPulsate),p=q0(t);return lE(function(){if(!u){l(!0);var v=setTimeout(p,f);return function(){clearTimeout(v)}}},[p,u,f]),wn("span",{className:h,style:i,children:wn("span",{className:s})})}var db=550,cE=80,fE=function(D){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(db,"ms ").concat(D.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(D.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(db,"ms ").concat(D.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(D.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},hE=Nn.exports.forwardRef(function(D,e){var d=D.center,S=d===void 0?!1:d,r=D.classes,a=D.className,u=ql(D,["center","classes","className"]),c=Nn.exports.useState([]),t=c[0],f=c[1],n=Nn.exports.useRef(0),o=Nn.exports.useRef(null);Nn.exports.useEffect(function(){o.current&&(o.current(),o.current=null)},[t]);var l=Nn.exports.useRef(!1),h=Nn.exports.useRef(null),i=Nn.exports.useRef(null),s=Nn.exports.useRef(null);Nn.exports.useEffect(function(){return function(){clearTimeout(h.current)}},[]);var p=Nn.exports.useCallback(function(y){var x=y.pulsate,w=y.rippleX,g=y.rippleY,T=y.rippleSize,M=y.cb;f(function(P){return[].concat(dh(P),[wn(uE,{classes:r,timeout:db,pulsate:x,rippleX:w,rippleY:g,rippleSize:T},n.current)])}),n.current+=1,o.current=M},[r]),v=Nn.exports.useCallback(function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=arguments.length>2?arguments[2]:void 0,g=x.pulsate,T=g===void 0?!1:g,M=x.center,P=M===void 0?S||x.pulsate:M,L=x.fakeElement,I=L===void 0?!1:L;if(y.type==="mousedown"&&l.current){l.current=!1;return}y.type==="touchstart"&&(l.current=!0);var C=I?null:s.current,k=C?C.getBoundingClientRect():{width:0,height:0,left:0,top:0},E,R,O;if(P||y.clientX===0&&y.clientY===0||!y.clientX&&!y.touches)E=Math.round(k.width/2),R=Math.round(k.height/2);else{var N=y.touches?y.touches[0]:y,G=N.clientX,U=N.clientY;E=Math.round(G-k.left),R=Math.round(U-k.top)}if(P)O=Math.sqrt((2*Math.pow(k.width,2)+Math.pow(k.height,2))/3),O%2===0&&(O+=1);else{var Y=Math.max(Math.abs((C?C.clientWidth:0)-E),E)*2+2,z=Math.max(Math.abs((C?C.clientHeight:0)-R),R)*2+2;O=Math.sqrt(Math.pow(Y,2)+Math.pow(z,2))}y.touches?i.current===null&&(i.current=function(){p({pulsate:T,rippleX:E,rippleY:R,rippleSize:O,cb:w})},h.current=setTimeout(function(){i.current&&(i.current(),i.current=null)},cE)):p({pulsate:T,rippleX:E,rippleY:R,rippleSize:O,cb:w})},[S,p]),m=Nn.exports.useCallback(function(){v({},{pulsate:!0})},[v]),b=Nn.exports.useCallback(function(y,x){if(clearTimeout(h.current),y.type==="touchend"&&i.current){y.persist(),i.current(),i.current=null,h.current=setTimeout(function(){b(y,x)});return}i.current=null,f(function(w){return w.length>0?w.slice(1):w}),o.current=x},[]);return Nn.exports.useImperativeHandle(e,function(){return{pulsate:m,start:v,stop:b}},[m,v,b]),wn("span",{className:Yu(r.root,a),ref:s,...u,children:wn(sE,{component:null,exit:!0,children:t})})});const pE=ip(fE,{flip:!1,name:"MuiTouchRipple"})(Nn.exports.memo(hE));var vE={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},dE=Nn.exports.forwardRef(function(D,e){var d=D.action,S=D.buttonRef,r=D.centerRipple,a=r===void 0?!1:r,u=D.children,c=D.classes,t=D.className,f=D.component,n=f===void 0?"button":f,o=D.disabled,l=o===void 0?!1:o,h=D.disableRipple,i=h===void 0?!1:h,s=D.disableTouchRipple,p=s===void 0?!1:s,v=D.focusRipple,m=v===void 0?!1:v,b=D.focusVisibleClassName,y=D.onBlur,x=D.onClick,w=D.onFocus,g=D.onFocusVisible,T=D.onKeyDown,M=D.onKeyUp,P=D.onMouseDown,L=D.onMouseLeave,I=D.onMouseUp,C=D.onTouchEnd,k=D.onTouchMove,E=D.onTouchStart,R=D.onDragLeave,O=D.tabIndex,N=O===void 0?0:O,G=D.TouchRippleProps,U=D.type,Y=U===void 0?"button":U,z=ql(D,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),B=Nn.exports.useRef(null);function H(){return xy.exports.findDOMNode(B.current)}var V=Nn.exports.useRef(null),Z=Nn.exports.useState(!1),q=Z[0],J=Z[1];l&&q&&J(!1);var ne=tE(),ve=ne.isFocusVisible,$=ne.onBlurVisible,j=ne.ref;Nn.exports.useImperativeHandle(d,function(){return{focusVisible:function(){J(!0),B.current.focus()}}},[]),Nn.exports.useEffect(function(){q&&m&&!i&&V.current.pulsate()},[i,m,q]);function ae(Ne,st){var _t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;return q0(function(Ot){st&&st(Ot);var Wt=_t;return!Wt&&V.current&&V.current[Ne](Ot),!0})}var ie=ae("start",P),te=ae("stop",R),re=ae("stop",I),ce=ae("stop",function(Ne){q&&Ne.preventDefault(),L&&L(Ne)}),pe=ae("start",E),fe=ae("stop",C),se=ae("stop",k),de=ae("stop",function(Ne){q&&($(Ne),J(!1)),y&&y(Ne)},!1),be=q0(function(Ne){B.current||(B.current=Ne.currentTarget),ve(Ne)&&(J(!0),g&&g(Ne)),w&&w(Ne)}),xe=function(){var st=H();return n&&n!=="button"&&!(st.tagName==="A"&&st.href)},ke=Nn.exports.useRef(!1),Re=q0(function(Ne){m&&!ke.current&&q&&V.current&&Ne.key===" "&&(ke.current=!0,Ne.persist(),V.current.stop(Ne,function(){V.current.start(Ne)})),Ne.target===Ne.currentTarget&&xe()&&Ne.key===" "&&Ne.preventDefault(),T&&T(Ne),Ne.target===Ne.currentTarget&&xe()&&Ne.key==="Enter"&&!l&&(Ne.preventDefault(),x&&x(Ne))}),Ke=q0(function(Ne){m&&Ne.key===" "&&V.current&&q&&!Ne.defaultPrevented&&(ke.current=!1,Ne.persist(),V.current.stop(Ne,function(){V.current.pulsate(Ne)})),M&&M(Ne),x&&Ne.target===Ne.currentTarget&&xe()&&Ne.key===" "&&!Ne.defaultPrevented&&x(Ne)}),ze=n;ze==="button"&&z.href&&(ze="a");var Je={};ze==="button"?(Je.type=Y,Je.disabled=l):((ze!=="a"||!z.href)&&(Je.role="button"),Je["aria-disabled"]=l);var qe=Ug(S,e),Ee=Ug(j,B),Ae=Ug(qe,Ee),Be=Nn.exports.useState(!1),$e=Be[0],xt=Be[1];Nn.exports.useEffect(function(){xt(!0)},[]);var bt=$e&&!i&&!l;return Gi(ze,{className:Yu(c.root,t,q&&[c.focusVisible,b],l&&c.disabled),onBlur:de,onClick:x,onFocus:be,onKeyDown:Re,onKeyUp:Ke,onMouseDown:ie,onMouseLeave:ce,onMouseUp:re,onDragLeave:te,onTouchEnd:fe,onTouchMove:se,onTouchStart:pe,ref:Ae,tabIndex:l?-1:N,...Je,...z,children:[u,bt?wn(pE,{ref:V,center:a,...G}):null]})});const kw=ip(vE,{name:"MuiButtonBase"})(dE);var mE=function(D){var e=D.palette.type==="light"?D.palette.grey[300]:D.palette.grey[700],d=Yh(D.palette.text.primary,.26);return{root:{fontFamily:D.typography.fontFamily,fontSize:D.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:D.palette.getContrastText(e),backgroundColor:e,borderRadius:32/2,whiteSpace:"nowrap",transition:D.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:D.palette.type==="light"?D.palette.grey[700]:D.palette.grey[300],fontSize:D.typography.pxToRem(12)},"& $avatarColorPrimary":{color:D.palette.primary.contrastText,backgroundColor:D.palette.primary.dark},"& $avatarColorSecondary":{color:D.palette.secondary.contrastText,backgroundColor:D.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:D.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:D.palette.primary.main,color:D.palette.primary.contrastText},colorSecondary:{backgroundColor:D.palette.secondary.main,color:D.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:zd(e,.08)},"&:active":{boxShadow:D.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:zd(D.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:zd(D.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:zd(e,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:zd(D.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:zd(D.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat(D.palette.type==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Yh(D.palette.text.primary,D.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:D.palette.primary.main,border:"1px solid ".concat(D.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Yh(D.palette.primary.main,D.palette.action.hoverOpacity)}},outlinedSecondary:{color:D.palette.secondary.main,border:"1px solid ".concat(D.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Yh(D.palette.secondary.main,D.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:D.palette.type==="light"?D.palette.grey[700]:D.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:d,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:Yh(d,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:Yh(D.palette.primary.contrastText,.7),"&:hover, &:active":{color:D.palette.primary.contrastText}},deleteIconColorSecondary:{color:Yh(D.palette.secondary.contrastText,.7),"&:hover, &:active":{color:D.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:Yh(D.palette.primary.main,.7),"&:hover, &:active":{color:D.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:Yh(D.palette.secondary.main,.7),"&:hover, &:active":{color:D.palette.secondary.main}}}};function Sw(A){return A.key==="Backspace"||A.key==="Delete"}var gE=Nn.exports.forwardRef(function(D,e){var d=D.avatar,S=D.classes,r=D.className,a=D.clickable,u=D.color,c=u===void 0?"default":u,t=D.component,f=D.deleteIcon,n=D.disabled,o=n===void 0?!1:n,l=D.icon,h=D.label,i=D.onClick,s=D.onDelete,p=D.onKeyDown,v=D.onKeyUp,m=D.size,b=m===void 0?"medium":m,y=D.variant,x=y===void 0?"default":y,w=ql(D,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),g=Nn.exports.useRef(null),T=Ug(g,e),M=function(Y){Y.stopPropagation(),s&&s(Y)},P=function(Y){Y.currentTarget===Y.target&&Sw(Y)&&Y.preventDefault(),p&&p(Y)},L=function(Y){Y.currentTarget===Y.target&&(s&&Sw(Y)?s(Y):Y.key==="Escape"&&g.current&&g.current.blur()),v&&v(Y)},I=a!==!1&&i?!0:a,C=b==="small",k=t||(I?kw:"div"),E=k===kw?{component:"div"}:{},R=null;if(s){var O=Yu(c!=="default"&&(x==="default"?S["deleteIconColor".concat(Zh(c))]:S["deleteIconOutlinedColor".concat(Zh(c))]),C&&S.deleteIconSmall);R=f&&Nn.exports.isValidElement(f)?Nn.exports.cloneElement(f,{className:Yu(f.props.className,S.deleteIcon,O),onClick:M}):wn(Y6,{className:Yu(S.deleteIcon,O),onClick:M})}var N=null;d&&Nn.exports.isValidElement(d)&&(N=Nn.exports.cloneElement(d,{className:Yu(S.avatar,d.props.className,C&&S.avatarSmall,c!=="default"&&S["avatarColor".concat(Zh(c))])}));var G=null;return l&&Nn.exports.isValidElement(l)&&(G=Nn.exports.cloneElement(l,{className:Yu(S.icon,l.props.className,C&&S.iconSmall,c!=="default"&&S["iconColor".concat(Zh(c))])})),Gi(k,{role:I||s?"button":void 0,className:Yu(S.root,r,c!=="default"&&[S["color".concat(Zh(c))],I&&S["clickableColor".concat(Zh(c))],s&&S["deletableColor".concat(Zh(c))]],x!=="default"&&[S.outlined,{primary:S.outlinedPrimary,secondary:S.outlinedSecondary}[c]],o&&S.disabled,C&&S.sizeSmall,I&&S.clickable,s&&S.deletable),"aria-disabled":o?!0:void 0,tabIndex:I||s?0:void 0,onClick:i,onKeyDown:P,onKeyUp:L,ref:T,...E,...w,children:[N||G,wn("span",{className:Yu(S.label,C&&S.labelSmall),children:h}),R]})});const oi=ip(mE,{name:"MuiChip"})(gE),yE=A=>({root:{textAlign:"center"},paper:{padding:A.spacing(2),textAlign:"center",color:A.palette.text.secondary}}),xE=A=>wn(di,{container:!0,spacing:4,...A}),kg=A=>wn(di,{item:!0,xs:12,sm:9,md:6,...A});ip(yE)(({classes:A,justify:D})=>Gi("div",{className:A.root,children:[wn("h3",{children:"Abstract Container (Grid) with abstract component Items (Grids)"}),Gi(xE,{children:[wn(kg,{children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-between",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(kg,{children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-between",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(kg,{children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-between",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(kg,{children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-between",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})})]})]}));const bE=A=>({root:{textAlign:"center"},paper:{padding:A.spacing(2),textAlign:"center",color:A.palette.text.secondary}});ip(bE)(({classes:A,justify:D})=>Gi("div",{className:A.root,children:[wn("h3",{children:'Grid with component grids set to "justify" contents'}),Gi(di,{container:!0,spacing:4,children:[wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:D,children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:D,children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:D,children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:D,children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})})]}),wn("h3",{children:'Grid with component grids set to "center" contents'}),Gi(di,{container:!0,spacing:4,children:[wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"center",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"center",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"center",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"center",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})})]}),wn("h3",{children:'Grid with component grids set to "space-around" contents'}),Gi(di,{container:!0,spacing:4,children:[wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-around",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-around",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-around",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:Gi(di,{container:!0,justifyContent:"space-around",children:[wn(oi,{label:"xs=12"}),wn(oi,{label:"sm=9"}),wn(oi,{label:"md=6"})]})})})]})]}));const _E=A=>({root:{textAlign:"center"},paper:{padding:A.spacing(2),textAlign:"center",color:A.palette.text.secondary}});ip(_E)(({classes:A})=>Gi("div",{className:A.root,children:[wn("h3",{children:'Grid with "auto" screen widths'}),Gi(di,{container:!0,spacing:4,children:[wn(di,{item:!0,xs:"auto",sm:"auto",md:"auto",children:wn(es,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})}),wn(di,{item:!0,xs:"auto",sm:"auto",md:"auto",children:wn(es,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})}),wn(di,{item:!0,xs:"auto",sm:"auto",md:"auto",children:wn(es,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})}),wn(di,{item:!0,xs:"auto",sm:"auto",md:"auto",children:wn(es,{className:A.paper,children:'xs="auto" sm="auto" md="auto"'})})]}),wn("h3",{children:"Grid with proportional (1-12/12) screen widths"}),Gi(di,{container:!0,spacing:4,children:[wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:"xs=12 sm=9 md=6"})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:"xs=12 sm=9 md=6"})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:"xs=12 sm=9 md=6"})}),wn(di,{item:!0,xs:12,sm:9,md:6,children:wn(es,{className:A.paper,children:"xs=12 sm=9 md=6"})})]})]}));function zA(A,D){return function(){return A.apply(D,arguments)}}const{toString:FA}=Object.prototype,{getPrototypeOf:L2}=Object,P2=(A=>D=>{const e=FA.call(D);return A[e]||(A[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),op=A=>(A=A.toLowerCase(),D=>P2(D)===A),Jy=A=>D=>typeof D===A,{isArray:g0}=Array,Em=Jy("undefined");function wE(A){return A!==null&&!Em(A)&&A.constructor!==null&&!Em(A.constructor)&&Zv(A.constructor.isBuffer)&&A.constructor.isBuffer(A)}const OA=op("ArrayBuffer");function TE(A){let D;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?D=ArrayBuffer.isView(A):D=A&&A.buffer&&OA(A.buffer),D}const AE=Jy("string"),Zv=Jy("function"),NA=Jy("number"),R2=A=>A!==null&&typeof A=="object",ME=A=>A===!0||A===!1,Vg=A=>{if(P2(A)!=="object")return!1;const D=L2(A);return(D===null||D===Object.prototype||Object.getPrototypeOf(D)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)},kE=op("Date"),SE=op("File"),CE=op("Blob"),EE=op("FileList"),LE=A=>R2(A)&&Zv(A.pipe),PE=A=>{const D="[object FormData]";return A&&(typeof FormData=="function"&&A instanceof FormData||FA.call(A)===D||Zv(A.toString)&&A.toString()===D)},RE=op("URLSearchParams"),DE=A=>A.trim?A.trim():A.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fm(A,D,{allOwnKeys:e=!1}={}){if(A===null||typeof A>"u")return;let d,S;if(typeof A!="object"&&(A=[A]),g0(A))for(d=0,S=A.length;d<S;d++)D.call(null,A[d],d,A);else{const r=e?Object.getOwnPropertyNames(A):Object.keys(A),a=r.length;let u;for(d=0;d<a;d++)u=r[d],D.call(null,A[u],u,A)}}function BA(A,D){D=D.toLowerCase();const e=Object.keys(A);let d=e.length,S;for(;d-- >0;)if(S=e[d],D===S.toLowerCase())return S;return null}const UA=typeof self>"u"?typeof global>"u"?globalThis:global:self,VA=A=>!Em(A)&&A!==UA;function mb(){const{caseless:A}=VA(this)&&this||{},D={},e=(d,S)=>{const r=A&&BA(D,S)||S;Vg(D[r])&&Vg(d)?D[r]=mb(D[r],d):Vg(d)?D[r]=mb({},d):g0(d)?D[r]=d.slice():D[r]=d};for(let d=0,S=arguments.length;d<S;d++)arguments[d]&&Fm(arguments[d],e);return D}const IE=(A,D,e,{allOwnKeys:d}={})=>(Fm(D,(S,r)=>{e&&Zv(S)?A[r]=zA(S,e):A[r]=S},{allOwnKeys:d}),A),zE=A=>(A.charCodeAt(0)===65279&&(A=A.slice(1)),A),FE=(A,D,e,d)=>{A.prototype=Object.create(D.prototype,d),A.prototype.constructor=A,Object.defineProperty(A,"super",{value:D.prototype}),e&&Object.assign(A.prototype,e)},OE=(A,D,e,d)=>{let S,r,a;const u={};if(D=D||{},A==null)return D;do{for(S=Object.getOwnPropertyNames(A),r=S.length;r-- >0;)a=S[r],(!d||d(a,A,D))&&!u[a]&&(D[a]=A[a],u[a]=!0);A=e!==!1&&L2(A)}while(A&&(!e||e(A,D))&&A!==Object.prototype);return D},NE=(A,D,e)=>{A=String(A),(e===void 0||e>A.length)&&(e=A.length),e-=D.length;const d=A.indexOf(D,e);return d!==-1&&d===e},BE=A=>{if(!A)return null;if(g0(A))return A;let D=A.length;if(!NA(D))return null;const e=new Array(D);for(;D-- >0;)e[D]=A[D];return e},UE=(A=>D=>A&&D instanceof A)(typeof Uint8Array<"u"&&L2(Uint8Array)),VE=(A,D)=>{const d=(A&&A[Symbol.iterator]).call(A);let S;for(;(S=d.next())&&!S.done;){const r=S.value;D.call(A,r[0],r[1])}},HE=(A,D)=>{let e;const d=[];for(;(e=A.exec(D))!==null;)d.push(e);return d},GE=op("HTMLFormElement"),jE=A=>A.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(e,d,S){return d.toUpperCase()+S}),Cw=(({hasOwnProperty:A})=>(D,e)=>A.call(D,e))(Object.prototype),WE=op("RegExp"),HA=(A,D)=>{const e=Object.getOwnPropertyDescriptors(A),d={};Fm(e,(S,r)=>{D(S,r,A)!==!1&&(d[r]=S)}),Object.defineProperties(A,d)},YE=A=>{HA(A,(D,e)=>{if(Zv(A)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const d=A[e];if(!!Zv(d)){if(D.enumerable=!1,"writable"in D){D.writable=!1;return}D.set||(D.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},XE=(A,D)=>{const e={},d=S=>{S.forEach(r=>{e[r]=!0})};return g0(A)?d(A):d(String(A).split(D)),e},ZE=()=>{},KE=(A,D)=>(A=+A,Number.isFinite(A)?A:D),JE=A=>{const D=new Array(10),e=(d,S)=>{if(R2(d)){if(D.indexOf(d)>=0)return;if(!("toJSON"in d)){D[S]=d;const r=g0(d)?[]:{};return Fm(d,(a,u)=>{const c=e(a,S+1);!Em(c)&&(r[u]=c)}),D[S]=void 0,r}}return d};return e(A,0)},Gn={isArray:g0,isArrayBuffer:OA,isBuffer:wE,isFormData:PE,isArrayBufferView:TE,isString:AE,isNumber:NA,isBoolean:ME,isObject:R2,isPlainObject:Vg,isUndefined:Em,isDate:kE,isFile:SE,isBlob:CE,isRegExp:WE,isFunction:Zv,isStream:LE,isURLSearchParams:RE,isTypedArray:UE,isFileList:EE,forEach:Fm,merge:mb,extend:IE,trim:DE,stripBOM:zE,inherits:FE,toFlatObject:OE,kindOf:P2,kindOfTest:op,endsWith:NE,toArray:BE,forEachEntry:VE,matchAll:HE,isHTMLForm:GE,hasOwnProperty:Cw,hasOwnProp:Cw,reduceDescriptors:HA,freezeMethods:YE,toObjectSet:XE,toCamelCase:jE,noop:ZE,toFiniteNumber:KE,findKey:BA,global:UA,isContextDefined:VA,toJSONObject:JE};function ji(A,D,e,d,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=A,this.name="AxiosError",D&&(this.code=D),e&&(this.config=e),d&&(this.request=d),S&&(this.response=S)}Gn.inherits(ji,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gn.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const GA=ji.prototype,jA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(A=>{jA[A]={value:A}});Object.defineProperties(ji,jA);Object.defineProperty(GA,"isAxiosError",{value:!0});ji.from=(A,D,e,d,S,r)=>{const a=Object.create(GA);return Gn.toFlatObject(A,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),ji.call(a,A.message,D,e,d,S),a.cause=A,a.name=A.name,r&&Object.assign(a,r),a};var $E=typeof self=="object"?self.FormData:window.FormData;const QE=$E;function gb(A){return Gn.isPlainObject(A)||Gn.isArray(A)}function WA(A){return Gn.endsWith(A,"[]")?A.slice(0,-2):A}function Ew(A,D,e){return A?A.concat(D).map(function(S,r){return S=WA(S),!e&&r?"["+S+"]":S}).join(e?".":""):D}function qE(A){return Gn.isArray(A)&&!A.some(gb)}const e8=Gn.toFlatObject(Gn,{},null,function(D){return/^is[A-Z]/.test(D)});function t8(A){return A&&Gn.isFunction(A.append)&&A[Symbol.toStringTag]==="FormData"&&A[Symbol.iterator]}function $y(A,D,e){if(!Gn.isObject(A))throw new TypeError("target must be an object");D=D||new(QE||FormData),e=Gn.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(i,s){return!Gn.isUndefined(s[i])});const d=e.metaTokens,S=e.visitor||f,r=e.dots,a=e.indexes,c=(e.Blob||typeof Blob<"u"&&Blob)&&t8(D);if(!Gn.isFunction(S))throw new TypeError("visitor must be a function");function t(h){if(h===null)return"";if(Gn.isDate(h))return h.toISOString();if(!c&&Gn.isBlob(h))throw new ji("Blob is not supported. Use a Buffer instead.");return Gn.isArrayBuffer(h)||Gn.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function f(h,i,s){let p=h;if(h&&!s&&typeof h=="object"){if(Gn.endsWith(i,"{}"))i=d?i:i.slice(0,-2),h=JSON.stringify(h);else if(Gn.isArray(h)&&qE(h)||Gn.isFileList(h)||Gn.endsWith(i,"[]")&&(p=Gn.toArray(h)))return i=WA(i),p.forEach(function(m,b){!(Gn.isUndefined(m)||m===null)&&D.append(a===!0?Ew([i],b,r):a===null?i:i+"[]",t(m))}),!1}return gb(h)?!0:(D.append(Ew(s,i,r),t(h)),!1)}const n=[],o=Object.assign(e8,{defaultVisitor:f,convertValue:t,isVisitable:gb});function l(h,i){if(!Gn.isUndefined(h)){if(n.indexOf(h)!==-1)throw Error("Circular reference detected in "+i.join("."));n.push(h),Gn.forEach(h,function(p,v){(!(Gn.isUndefined(p)||p===null)&&S.call(D,p,Gn.isString(v)?v.trim():v,i,o))===!0&&l(p,i?i.concat(v):[v])}),n.pop()}}if(!Gn.isObject(A))throw new TypeError("data must be an object");return l(A),D}function Lw(A){const D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(A).replace(/[!'()~]|%20|%00/g,function(d){return D[d]})}function D2(A,D){this._pairs=[],A&&$y(A,this,D)}const YA=D2.prototype;YA.append=function(D,e){this._pairs.push([D,e])};YA.toString=function(D){const e=D?function(d){return D.call(this,d,Lw)}:Lw;return this._pairs.map(function(S){return e(S[0])+"="+e(S[1])},"").join("&")};function r8(A){return encodeURIComponent(A).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function XA(A,D,e){if(!D)return A;const d=e&&e.encode||r8,S=e&&e.serialize;let r;if(S?r=S(D,e):r=Gn.isURLSearchParams(D)?D.toString():new D2(D,e).toString(d),r){const a=A.indexOf("#");a!==-1&&(A=A.slice(0,a)),A+=(A.indexOf("?")===-1?"?":"&")+r}return A}class n8{constructor(){this.handlers=[]}use(D,e,d){return this.handlers.push({fulfilled:D,rejected:e,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(D){this.handlers[D]&&(this.handlers[D]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(D){Gn.forEach(this.handlers,function(d){d!==null&&D(d)})}}const Pw=n8,ZA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a8=typeof URLSearchParams<"u"?URLSearchParams:D2,i8=FormData,o8=(()=>{let A;return typeof navigator<"u"&&((A=navigator.product)==="ReactNative"||A==="NativeScript"||A==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),s8=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),mh={isBrowser:!0,classes:{URLSearchParams:a8,FormData:i8,Blob},isStandardBrowserEnv:o8,isStandardBrowserWebWorkerEnv:s8,protocols:["http","https","file","blob","url","data"]};function l8(A,D){return $y(A,new mh.classes.URLSearchParams,Object.assign({visitor:function(e,d,S,r){return mh.isNode&&Gn.isBuffer(e)?(this.append(d,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},D))}function u8(A){return Gn.matchAll(/\w+|\[(\w*)]/g,A).map(D=>D[0]==="[]"?"":D[1]||D[0])}function c8(A){const D={},e=Object.keys(A);let d;const S=e.length;let r;for(d=0;d<S;d++)r=e[d],D[r]=A[r];return D}function KA(A){function D(e,d,S,r){let a=e[r++];const u=Number.isFinite(+a),c=r>=e.length;return a=!a&&Gn.isArray(S)?S.length:a,c?(Gn.hasOwnProp(S,a)?S[a]=[S[a],d]:S[a]=d,!u):((!S[a]||!Gn.isObject(S[a]))&&(S[a]=[]),D(e,d,S[a],r)&&Gn.isArray(S[a])&&(S[a]=c8(S[a])),!u)}if(Gn.isFormData(A)&&Gn.isFunction(A.entries)){const e={};return Gn.forEachEntry(A,(d,S)=>{D(u8(d),S,e,0)}),e}return null}const f8={"Content-Type":void 0};function h8(A,D,e){if(Gn.isString(A))try{return(D||JSON.parse)(A),Gn.trim(A)}catch(d){if(d.name!=="SyntaxError")throw d}return(e||JSON.stringify)(A)}const Qy={transitional:ZA,adapter:["xhr","http"],transformRequest:[function(D,e){const d=e.getContentType()||"",S=d.indexOf("application/json")>-1,r=Gn.isObject(D);if(r&&Gn.isHTMLForm(D)&&(D=new FormData(D)),Gn.isFormData(D))return S&&S?JSON.stringify(KA(D)):D;if(Gn.isArrayBuffer(D)||Gn.isBuffer(D)||Gn.isStream(D)||Gn.isFile(D)||Gn.isBlob(D))return D;if(Gn.isArrayBufferView(D))return D.buffer;if(Gn.isURLSearchParams(D))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),D.toString();let u;if(r){if(d.indexOf("application/x-www-form-urlencoded")>-1)return l8(D,this.formSerializer).toString();if((u=Gn.isFileList(D))||d.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return $y(u?{"files[]":D}:D,c&&new c,this.formSerializer)}}return r||S?(e.setContentType("application/json",!1),h8(D)):D}],transformResponse:[function(D){const e=this.transitional||Qy.transitional,d=e&&e.forcedJSONParsing,S=this.responseType==="json";if(D&&Gn.isString(D)&&(d&&!this.responseType||S)){const a=!(e&&e.silentJSONParsing)&&S;try{return JSON.parse(D)}catch(u){if(a)throw u.name==="SyntaxError"?ji.from(u,ji.ERR_BAD_RESPONSE,this,null,this.response):u}}return D}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mh.classes.FormData,Blob:mh.classes.Blob},validateStatus:function(D){return D>=200&&D<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Gn.forEach(["delete","get","head"],function(D){Qy.headers[D]={}});Gn.forEach(["post","put","patch"],function(D){Qy.headers[D]=Gn.merge(f8)});const I2=Qy,p8=Gn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),v8=A=>{const D={};let e,d,S;return A&&A.split(`
`).forEach(function(a){S=a.indexOf(":"),e=a.substring(0,S).trim().toLowerCase(),d=a.substring(S+1).trim(),!(!e||D[e]&&p8[e])&&(e==="set-cookie"?D[e]?D[e].push(d):D[e]=[d]:D[e]=D[e]?D[e]+", "+d:d)}),D},Rw=Symbol("internals");function Y0(A){return A&&String(A).trim().toLowerCase()}function Hg(A){return A===!1||A==null?A:Gn.isArray(A)?A.map(Hg):String(A)}function d8(A){const D=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=e.exec(A);)D[d[1]]=d[2];return D}function m8(A){return/^[-_a-zA-Z]+$/.test(A.trim())}function Dw(A,D,e,d){if(Gn.isFunction(d))return d.call(this,D,e);if(!!Gn.isString(D)){if(Gn.isString(d))return D.indexOf(d)!==-1;if(Gn.isRegExp(d))return d.test(D)}}function g8(A){return A.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(D,e,d)=>e.toUpperCase()+d)}function y8(A,D){const e=Gn.toCamelCase(" "+D);["get","set","has"].forEach(d=>{Object.defineProperty(A,d+e,{value:function(S,r,a){return this[d].call(this,D,S,r,a)},configurable:!0})})}class qy{constructor(D){D&&this.set(D)}set(D,e,d){const S=this;function r(u,c,t){const f=Y0(c);if(!f)throw new Error("header name must be a non-empty string");const n=Gn.findKey(S,f);(!n||S[n]===void 0||t===!0||t===void 0&&S[n]!==!1)&&(S[n||c]=Hg(u))}const a=(u,c)=>Gn.forEach(u,(t,f)=>r(t,f,c));return Gn.isPlainObject(D)||D instanceof this.constructor?a(D,e):Gn.isString(D)&&(D=D.trim())&&!m8(D)?a(v8(D),e):D!=null&&r(e,D,d),this}get(D,e){if(D=Y0(D),D){const d=Gn.findKey(this,D);if(d){const S=this[d];if(!e)return S;if(e===!0)return d8(S);if(Gn.isFunction(e))return e.call(this,S,d);if(Gn.isRegExp(e))return e.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(D,e){if(D=Y0(D),D){const d=Gn.findKey(this,D);return!!(d&&(!e||Dw(this,this[d],d,e)))}return!1}delete(D,e){const d=this;let S=!1;function r(a){if(a=Y0(a),a){const u=Gn.findKey(d,a);u&&(!e||Dw(d,d[u],u,e))&&(delete d[u],S=!0)}}return Gn.isArray(D)?D.forEach(r):r(D),S}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(D){const e=this,d={};return Gn.forEach(this,(S,r)=>{const a=Gn.findKey(d,r);if(a){e[a]=Hg(S),delete e[r];return}const u=D?g8(r):String(r).trim();u!==r&&delete e[r],e[u]=Hg(S),d[u]=!0}),this}concat(...D){return this.constructor.concat(this,...D)}toJSON(D){const e=Object.create(null);return Gn.forEach(this,(d,S)=>{d!=null&&d!==!1&&(e[S]=D&&Gn.isArray(d)?d.join(", "):d)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([D,e])=>D+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(D){return D instanceof this?D:new this(D)}static concat(D,...e){const d=new this(D);return e.forEach(S=>d.set(S)),d}static accessor(D){const d=(this[Rw]=this[Rw]={accessors:{}}).accessors,S=this.prototype;function r(a){const u=Y0(a);d[u]||(y8(S,a),d[u]=!0)}return Gn.isArray(D)?D.forEach(r):r(D),this}}qy.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);Gn.freezeMethods(qy.prototype);Gn.freezeMethods(qy);const qh=qy;function ox(A,D){const e=this||I2,d=D||e,S=qh.from(d.headers);let r=d.data;return Gn.forEach(A,function(u){r=u.call(e,r,S.normalize(),D?D.status:void 0)}),S.normalize(),r}function JA(A){return!!(A&&A.__CANCEL__)}function Om(A,D,e){ji.call(this,A==null?"canceled":A,ji.ERR_CANCELED,D,e),this.name="CanceledError"}Gn.inherits(Om,ji,{__CANCEL__:!0});const x8=null;function b8(A,D,e){const d=e.config.validateStatus;!e.status||!d||d(e.status)?A(e):D(new ji("Request failed with status code "+e.status,[ji.ERR_BAD_REQUEST,ji.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const _8=mh.isStandardBrowserEnv?function(){return{write:function(e,d,S,r,a,u){const c=[];c.push(e+"="+encodeURIComponent(d)),Gn.isNumber(S)&&c.push("expires="+new Date(S).toGMTString()),Gn.isString(r)&&c.push("path="+r),Gn.isString(a)&&c.push("domain="+a),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const d=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return d?decodeURIComponent(d[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function w8(A){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(A)}function T8(A,D){return D?A.replace(/\/+$/,"")+"/"+D.replace(/^\/+/,""):A}function $A(A,D){return A&&!w8(D)?T8(A,D):D}const A8=mh.isStandardBrowserEnv?function(){const D=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let d;function S(r){let a=r;return D&&(e.setAttribute("href",a),a=e.href),e.setAttribute("href",a),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return d=S(window.location.href),function(a){const u=Gn.isString(a)?S(a):a;return u.protocol===d.protocol&&u.host===d.host}}():function(){return function(){return!0}}();function M8(A){const D=/^([-+\w]{1,25})(:?\/\/|:)/.exec(A);return D&&D[1]||""}function k8(A,D){A=A||10;const e=new Array(A),d=new Array(A);let S=0,r=0,a;return D=D!==void 0?D:1e3,function(c){const t=Date.now(),f=d[r];a||(a=t),e[S]=c,d[S]=t;let n=r,o=0;for(;n!==S;)o+=e[n++],n=n%A;if(S=(S+1)%A,S===r&&(r=(r+1)%A),t-a<D)return;const l=f&&t-f;return l?Math.round(o*1e3/l):void 0}}function Iw(A,D){let e=0;const d=k8(50,250);return S=>{const r=S.loaded,a=S.lengthComputable?S.total:void 0,u=r-e,c=d(u),t=r<=a;e=r;const f={loaded:r,total:a,progress:a?r/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&t?(a-r)/c:void 0,event:S};f[D?"download":"upload"]=!0,A(f)}}const S8=typeof XMLHttpRequest<"u",C8=S8&&function(A){return new Promise(function(e,d){let S=A.data;const r=qh.from(A.headers).normalize(),a=A.responseType;let u;function c(){A.cancelToken&&A.cancelToken.unsubscribe(u),A.signal&&A.signal.removeEventListener("abort",u)}Gn.isFormData(S)&&(mh.isStandardBrowserEnv||mh.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let t=new XMLHttpRequest;if(A.auth){const l=A.auth.username||"",h=A.auth.password?unescape(encodeURIComponent(A.auth.password)):"";r.set("Authorization","Basic "+btoa(l+":"+h))}const f=$A(A.baseURL,A.url);t.open(A.method.toUpperCase(),XA(f,A.params,A.paramsSerializer),!0),t.timeout=A.timeout;function n(){if(!t)return;const l=qh.from("getAllResponseHeaders"in t&&t.getAllResponseHeaders()),i={data:!a||a==="text"||a==="json"?t.responseText:t.response,status:t.status,statusText:t.statusText,headers:l,config:A,request:t};b8(function(p){e(p),c()},function(p){d(p),c()},i),t=null}if("onloadend"in t?t.onloadend=n:t.onreadystatechange=function(){!t||t.readyState!==4||t.status===0&&!(t.responseURL&&t.responseURL.indexOf("file:")===0)||setTimeout(n)},t.onabort=function(){!t||(d(new ji("Request aborted",ji.ECONNABORTED,A,t)),t=null)},t.onerror=function(){d(new ji("Network Error",ji.ERR_NETWORK,A,t)),t=null},t.ontimeout=function(){let h=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded";const i=A.transitional||ZA;A.timeoutErrorMessage&&(h=A.timeoutErrorMessage),d(new ji(h,i.clarifyTimeoutError?ji.ETIMEDOUT:ji.ECONNABORTED,A,t)),t=null},mh.isStandardBrowserEnv){const l=(A.withCredentials||A8(f))&&A.xsrfCookieName&&_8.read(A.xsrfCookieName);l&&r.set(A.xsrfHeaderName,l)}S===void 0&&r.setContentType(null),"setRequestHeader"in t&&Gn.forEach(r.toJSON(),function(h,i){t.setRequestHeader(i,h)}),Gn.isUndefined(A.withCredentials)||(t.withCredentials=!!A.withCredentials),a&&a!=="json"&&(t.responseType=A.responseType),typeof A.onDownloadProgress=="function"&&t.addEventListener("progress",Iw(A.onDownloadProgress,!0)),typeof A.onUploadProgress=="function"&&t.upload&&t.upload.addEventListener("progress",Iw(A.onUploadProgress)),(A.cancelToken||A.signal)&&(u=l=>{!t||(d(!l||l.type?new Om(null,A,t):l),t.abort(),t=null)},A.cancelToken&&A.cancelToken.subscribe(u),A.signal&&(A.signal.aborted?u():A.signal.addEventListener("abort",u)));const o=M8(f);if(o&&mh.protocols.indexOf(o)===-1){d(new ji("Unsupported protocol "+o+":",ji.ERR_BAD_REQUEST,A));return}t.send(S||null)})},Gg={http:x8,xhr:C8};Gn.forEach(Gg,(A,D)=>{if(A){try{Object.defineProperty(A,"name",{value:D})}catch{}Object.defineProperty(A,"adapterName",{value:D})}});const E8={getAdapter:A=>{A=Gn.isArray(A)?A:[A];const{length:D}=A;let e,d;for(let S=0;S<D&&(e=A[S],!(d=Gn.isString(e)?Gg[e.toLowerCase()]:e));S++);if(!d)throw d===!1?new ji(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Gn.hasOwnProp(Gg,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!Gn.isFunction(d))throw new TypeError("adapter is not a function");return d},adapters:Gg};function sx(A){if(A.cancelToken&&A.cancelToken.throwIfRequested(),A.signal&&A.signal.aborted)throw new Om(null,A)}function zw(A){return sx(A),A.headers=qh.from(A.headers),A.data=ox.call(A,A.transformRequest),["post","put","patch"].indexOf(A.method)!==-1&&A.headers.setContentType("application/x-www-form-urlencoded",!1),E8.getAdapter(A.adapter||I2.adapter)(A).then(function(d){return sx(A),d.data=ox.call(A,A.transformResponse,d),d.headers=qh.from(d.headers),d},function(d){return JA(d)||(sx(A),d&&d.response&&(d.response.data=ox.call(A,A.transformResponse,d.response),d.response.headers=qh.from(d.response.headers))),Promise.reject(d)})}const Fw=A=>A instanceof qh?A.toJSON():A;function h0(A,D){D=D||{};const e={};function d(t,f,n){return Gn.isPlainObject(t)&&Gn.isPlainObject(f)?Gn.merge.call({caseless:n},t,f):Gn.isPlainObject(f)?Gn.merge({},f):Gn.isArray(f)?f.slice():f}function S(t,f,n){if(Gn.isUndefined(f)){if(!Gn.isUndefined(t))return d(void 0,t,n)}else return d(t,f,n)}function r(t,f){if(!Gn.isUndefined(f))return d(void 0,f)}function a(t,f){if(Gn.isUndefined(f)){if(!Gn.isUndefined(t))return d(void 0,t)}else return d(void 0,f)}function u(t,f,n){if(n in D)return d(t,f);if(n in A)return d(void 0,t)}const c={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(t,f)=>S(Fw(t),Fw(f),!0)};return Gn.forEach(Object.keys(A).concat(Object.keys(D)),function(f){const n=c[f]||S,o=n(A[f],D[f],f);Gn.isUndefined(o)&&n!==u||(e[f]=o)}),e}const QA="1.2.1",z2={};["object","boolean","number","function","string","symbol"].forEach((A,D)=>{z2[A]=function(d){return typeof d===A||"a"+(D<1?"n ":" ")+A}});const Ow={};z2.transitional=function(D,e,d){function S(r,a){return"[Axios v"+QA+"] Transitional option '"+r+"'"+a+(d?". "+d:"")}return(r,a,u)=>{if(D===!1)throw new ji(S(a," has been removed"+(e?" in "+e:"")),ji.ERR_DEPRECATED);return e&&!Ow[a]&&(Ow[a]=!0,console.warn(S(a," has been deprecated since v"+e+" and will be removed in the near future"))),D?D(r,a,u):!0}};function L8(A,D,e){if(typeof A!="object")throw new ji("options must be an object",ji.ERR_BAD_OPTION_VALUE);const d=Object.keys(A);let S=d.length;for(;S-- >0;){const r=d[S],a=D[r];if(a){const u=A[r],c=u===void 0||a(u,r,A);if(c!==!0)throw new ji("option "+r+" must be "+c,ji.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new ji("Unknown option "+r,ji.ERR_BAD_OPTION)}}const yb={assertOptions:L8,validators:z2},Fp=yb.validators;class yy{constructor(D){this.defaults=D,this.interceptors={request:new Pw,response:new Pw}}request(D,e){typeof D=="string"?(e=e||{},e.url=D):e=D||{},e=h0(this.defaults,e);const{transitional:d,paramsSerializer:S,headers:r}=e;d!==void 0&&yb.assertOptions(d,{silentJSONParsing:Fp.transitional(Fp.boolean),forcedJSONParsing:Fp.transitional(Fp.boolean),clarifyTimeoutError:Fp.transitional(Fp.boolean)},!1),S!==void 0&&yb.assertOptions(S,{encode:Fp.function,serialize:Fp.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a;a=r&&Gn.merge(r.common,r[e.method]),a&&Gn.forEach(["delete","get","head","post","put","patch","common"],h=>{delete r[h]}),e.headers=qh.concat(a,r);const u=[];let c=!0;this.interceptors.request.forEach(function(i){typeof i.runWhen=="function"&&i.runWhen(e)===!1||(c=c&&i.synchronous,u.unshift(i.fulfilled,i.rejected))});const t=[];this.interceptors.response.forEach(function(i){t.push(i.fulfilled,i.rejected)});let f,n=0,o;if(!c){const h=[zw.bind(this),void 0];for(h.unshift.apply(h,u),h.push.apply(h,t),o=h.length,f=Promise.resolve(e);n<o;)f=f.then(h[n++],h[n++]);return f}o=u.length;let l=e;for(n=0;n<o;){const h=u[n++],i=u[n++];try{l=h(l)}catch(s){i.call(this,s);break}}try{f=zw.call(this,l)}catch(h){return Promise.reject(h)}for(n=0,o=t.length;n<o;)f=f.then(t[n++],t[n++]);return f}getUri(D){D=h0(this.defaults,D);const e=$A(D.baseURL,D.url);return XA(e,D.params,D.paramsSerializer)}}Gn.forEach(["delete","get","head","options"],function(D){yy.prototype[D]=function(e,d){return this.request(h0(d||{},{method:D,url:e,data:(d||{}).data}))}});Gn.forEach(["post","put","patch"],function(D){function e(d){return function(r,a,u){return this.request(h0(u||{},{method:D,headers:d?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}yy.prototype[D]=e(),yy.prototype[D+"Form"]=e(!0)});const jg=yy;class F2{constructor(D){if(typeof D!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const d=this;this.promise.then(S=>{if(!d._listeners)return;let r=d._listeners.length;for(;r-- >0;)d._listeners[r](S);d._listeners=null}),this.promise.then=S=>{let r;const a=new Promise(u=>{d.subscribe(u),r=u}).then(S);return a.cancel=function(){d.unsubscribe(r)},a},D(function(r,a,u){d.reason||(d.reason=new Om(r,a,u),e(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(D){if(this.reason){D(this.reason);return}this._listeners?this._listeners.push(D):this._listeners=[D]}unsubscribe(D){if(!this._listeners)return;const e=this._listeners.indexOf(D);e!==-1&&this._listeners.splice(e,1)}static source(){let D;return{token:new F2(function(S){D=S}),cancel:D}}}const P8=F2;function R8(A){return function(e){return A.apply(null,e)}}function D8(A){return Gn.isObject(A)&&A.isAxiosError===!0}function qA(A){const D=new jg(A),e=zA(jg.prototype.request,D);return Gn.extend(e,jg.prototype,D,{allOwnKeys:!0}),Gn.extend(e,D,null,{allOwnKeys:!0}),e.create=function(S){return qA(h0(A,S))},e}const ml=qA(I2);ml.Axios=jg;ml.CanceledError=Om;ml.CancelToken=P8;ml.isCancel=JA;ml.VERSION=QA;ml.toFormData=$y;ml.AxiosError=ji;ml.Cancel=ml.CanceledError;ml.all=function(D){return Promise.all(D)};ml.spread=R8;ml.isAxiosError=D8;ml.mergeConfig=h0;ml.AxiosHeaders=qh;ml.formToJSON=A=>KA(Gn.isHTMLForm(A)?new FormData(A):A);ml.default=ml;const I8=ml;var xb={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(A,D){(function(){var e,d="4.17.21",S=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",t=500,f="__lodash_placeholder__",n=1,o=2,l=4,h=1,i=2,s=1,p=2,v=4,m=8,b=16,y=32,x=64,w=128,g=256,T=512,M=30,P="...",L=800,I=16,C=1,k=2,E=3,R=1/0,O=9007199254740991,N=17976931348623157e292,G=0/0,U=4294967295,Y=U-1,z=U>>>1,B=[["ary",w],["bind",s],["bindKey",p],["curry",m],["curryRight",b],["flip",T],["partial",y],["partialRight",x],["rearg",g]],H="[object Arguments]",V="[object Array]",Z="[object AsyncFunction]",q="[object Boolean]",J="[object Date]",ne="[object DOMException]",ve="[object Error]",$="[object Function]",j="[object GeneratorFunction]",ae="[object Map]",ie="[object Number]",te="[object Null]",re="[object Object]",ce="[object Promise]",pe="[object Proxy]",fe="[object RegExp]",se="[object Set]",de="[object String]",be="[object Symbol]",xe="[object Undefined]",ke="[object WeakMap]",Re="[object WeakSet]",Ke="[object ArrayBuffer]",ze="[object DataView]",Je="[object Float32Array]",qe="[object Float64Array]",Ee="[object Int8Array]",Ae="[object Int16Array]",Be="[object Int32Array]",$e="[object Uint8Array]",xt="[object Uint8ClampedArray]",bt="[object Uint16Array]",Ne="[object Uint32Array]",st=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,Ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wt=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,jt=RegExp(Wt.source),Zt=RegExp(Et.source),Mt=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,ft=/<%=([\s\S]+?)%>/g,ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/[\\^$.*+?()[\]{}|]/g,Qe=RegExp(Ve.source),Me=/^\s+/,Ie=/\s/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/[()=,{}\[\]\/\s]/,at=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lt=/\w*$/,Ct=/^[-+]0x[0-9a-f]+$/i,Pt=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,je=/^0o[0-7]+$/i,Oe=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",kt="\\u0300-\\u036f",Rt="\\ufe20-\\ufe2f",zt="\\u20d0-\\u20ff",Xt=kt+Rt+zt,Yt="\\u2700-\\u27bf",Vt="a-z\\xdf-\\xf6\\xf8-\\xff",cr="\\xac\\xb1\\xd7\\xf7",Or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kr="\\u2000-\\u206f",Sr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vn="A-Z\\xc0-\\xd6\\xd8-\\xde",Rn="\\ufe0e\\ufe0f",hn=cr+Or+kr+Sr,An="['\u2019]",En="["+St+"]",Mr="["+hn+"]",xr="["+Xt+"]",dn="\\d+",qr="["+Yt+"]",on="["+Vt+"]",Vr="[^"+St+hn+dn+Yt+Vt+vn+"]",ln="\\ud83c[\\udffb-\\udfff]",cn="(?:"+xr+"|"+ln+")",Zr="[^"+St+"]",ht="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",rr="["+vn+"]",mr="\\u200d",Rr="(?:"+on+"|"+Vr+")",Er="(?:"+rr+"|"+Vr+")",Br="(?:"+An+"(?:d|ll|m|re|s|t|ve))?",Lr="(?:"+An+"(?:D|LL|M|RE|S|T|VE))?",pn=cn+"?",On="["+Rn+"]?",Fn="(?:"+mr+"(?:"+[Zr,ht,Nt].join("|")+")"+On+pn+")*",Qn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ya="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sa=On+pn+Fn,ar="(?:"+[qr,ht,Nt].join("|")+")"+Sa,Wr="(?:"+[Zr+xr+"?",xr,ht,Nt,En].join("|")+")",Fr=RegExp(An,"g"),yn=RegExp(xr,"g"),Sn=RegExp(ln+"(?="+ln+")|"+Wr+Sa,"g"),aa=RegExp([rr+"?"+on+"+"+Br+"(?="+[Mr,rr,"$"].join("|")+")",Er+"+"+Lr+"(?="+[Mr,rr+Rr,"$"].join("|")+")",rr+"?"+Rr+"+"+Br,rr+"+"+Lr,ya,Qn,dn,ar].join("|"),"g"),Xn=RegExp("["+mr+St+Xt+Rn+"]"),ra=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ba=-1,Ut={};Ut[Je]=Ut[qe]=Ut[Ee]=Ut[Ae]=Ut[Be]=Ut[$e]=Ut[xt]=Ut[bt]=Ut[Ne]=!0,Ut[H]=Ut[V]=Ut[Ke]=Ut[q]=Ut[ze]=Ut[J]=Ut[ve]=Ut[$]=Ut[ae]=Ut[ie]=Ut[re]=Ut[fe]=Ut[se]=Ut[de]=Ut[ke]=!1;var lr={};lr[H]=lr[V]=lr[Ke]=lr[ze]=lr[q]=lr[J]=lr[Je]=lr[qe]=lr[Ee]=lr[Ae]=lr[Be]=lr[ae]=lr[ie]=lr[re]=lr[fe]=lr[se]=lr[de]=lr[be]=lr[$e]=lr[xt]=lr[bt]=lr[Ne]=!0,lr[ve]=lr[$]=lr[ke]=!1;var Ir={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Kr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ur={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Gr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$r=parseFloat,Hr=parseInt,fr=typeof Fo=="object"&&Fo&&Fo.Object===Object&&Fo,Tr=typeof self=="object"&&self&&self.Object===Object&&self,hr=fr||Tr||Function("return this")(),Mn=D&&!D.nodeType&&D,Cn=Mn&&!0&&A&&!A.nodeType&&A,jn=Cn&&Cn.exports===Mn,sa=jn&&fr.process,Un=function(){try{var tn=Cn&&Cn.require&&Cn.require("util").types;return tn||sa&&sa.binding&&sa.binding("util")}catch{}}(),Ea=Un&&Un.isArrayBuffer,Ga=Un&&Un.isDate,ai=Un&&Un.isMap,Ma=Un&&Un.isRegExp,Va=Un&&Un.isSet,No=Un&&Un.isTypedArray;function co(tn,Dn,_n){switch(_n.length){case 0:return tn.call(Dn);case 1:return tn.call(Dn,_n[0]);case 2:return tn.call(Dn,_n[0],_n[1]);case 3:return tn.call(Dn,_n[0],_n[1],_n[2])}return tn.apply(Dn,_n)}function eu(tn,Dn,_n,xa){for(var Ja=-1,Ra=tn==null?0:tn.length;++Ja<Ra;){var ao=tn[Ja];Dn(xa,ao,_n(ao),tn)}return xa}function Bo(tn,Dn){for(var _n=-1,xa=tn==null?0:tn.length;++_n<xa&&Dn(tn[_n],_n,tn)!==!1;);return tn}function Qu(tn,Dn){for(var _n=tn==null?0:tn.length;_n--&&Dn(tn[_n],_n,tn)!==!1;);return tn}function tu(tn,Dn){for(var _n=-1,xa=tn==null?0:tn.length;++_n<xa;)if(!Dn(tn[_n],_n,tn))return!1;return!0}function ru(tn,Dn){for(var _n=-1,xa=tn==null?0:tn.length,Ja=0,Ra=[];++_n<xa;){var ao=tn[_n];Dn(ao,_n,tn)&&(Ra[Ja++]=ao)}return Ra}function uf(tn,Dn){var _n=tn==null?0:tn.length;return!!_n&&Ss(tn,Dn,0)>-1}function ku(tn,Dn,_n){for(var xa=-1,Ja=tn==null?0:tn.length;++xa<Ja;)if(_n(Dn,tn[xa]))return!0;return!1}function Ji(tn,Dn){for(var _n=-1,xa=tn==null?0:tn.length,Ja=Array(xa);++_n<xa;)Ja[_n]=Dn(tn[_n],_n,tn);return Ja}function zl(tn,Dn){for(var _n=-1,xa=Dn.length,Ja=tn.length;++_n<xa;)tn[Ja+_n]=Dn[_n];return tn}function ki(tn,Dn,_n,xa){var Ja=-1,Ra=tn==null?0:tn.length;for(xa&&Ra&&(_n=tn[++Ja]);++Ja<Ra;)_n=Dn(_n,tn[Ja],Ja,tn);return _n}function sp(tn,Dn,_n,xa){var Ja=tn==null?0:tn.length;for(xa&&Ja&&(_n=tn[--Ja]);Ja--;)_n=Dn(_n,tn[Ja],Ja,tn);return _n}function nu(tn,Dn){for(var _n=-1,xa=tn==null?0:tn.length;++_n<xa;)if(Dn(tn[_n],_n,tn))return!0;return!1}var bh=xl("length");function au(tn){return tn.split("")}function Fl(tn){return tn.match(nt)||[]}function Su(tn,Dn,_n){var xa;return _n(tn,function(Ja,Ra,ao){if(Dn(Ja,Ra,ao))return xa=Ra,!1}),xa}function iu(tn,Dn,_n,xa){for(var Ja=tn.length,Ra=_n+(xa?1:-1);xa?Ra--:++Ra<Ja;)if(Dn(tn[Ra],Ra,tn))return Ra;return-1}function Ss(tn,Dn,_n){return Dn===Dn?_h(tn,Dn,_n):iu(tn,Cu,_n)}function ds(tn,Dn,_n,xa){for(var Ja=_n-1,Ra=tn.length;++Ja<Ra;)if(xa(tn[Ja],Dn))return Ja;return-1}function Cu(tn){return tn!==tn}function ou(tn,Dn){var _n=tn==null?0:tn.length;return _n?xi(tn,Dn)/_n:G}function xl(tn){return function(Dn){return Dn==null?e:Dn[tn]}}function Hs(tn){return function(Dn){return tn==null?e:tn[Dn]}}function Sc(tn,Dn,_n,xa,Ja){return Ja(tn,function(Ra,ao,ei){_n=xa?(xa=!1,Ra):Dn(_n,Ra,ao,ei)}),_n}function qu(tn,Dn){var _n=tn.length;for(tn.sort(Dn);_n--;)tn[_n]=tn[_n].value;return tn}function xi(tn,Dn){for(var _n,xa=-1,Ja=tn.length;++xa<Ja;){var Ra=Dn(tn[xa]);Ra!==e&&(_n=_n===e?Ra:_n+Ra)}return _n}function bl(tn,Dn){for(var _n=-1,xa=Array(tn);++_n<tn;)xa[_n]=Dn(_n);return xa}function Gf(tn,Dn){return Ji(Dn,function(_n){return[_n,tn[_n]]})}function Ol(tn){return tn&&tn.slice(0,Wf(tn)+1).replace(Me,"")}function os(tn){return function(Dn){return tn(Dn)}}function Nl(tn,Dn){return Ji(Dn,function(_n){return tn[_n]})}function Gs(tn,Dn){return tn.has(Dn)}function Bl(tn,Dn){for(var _n=-1,xa=tn.length;++_n<xa&&Ss(Dn,tn[_n],0)>-1;);return _n}function js(tn,Dn){for(var _n=tn.length;_n--&&Ss(Dn,tn[_n],0)>-1;);return _n}function Cs(tn,Dn){for(var _n=tn.length,xa=0;_n--;)tn[_n]===Dn&&++xa;return xa}var Es=Hs(Ir),_l=Hs(Kr);function wl(tn){return"\\"+Gr[tn]}function su(tn,Dn){return tn==null?e:tn[Dn]}function bo(tn){return Xn.test(tn)}function Ws(tn){return ra.test(tn)}function ec(tn){for(var Dn,_n=[];!(Dn=tn.next()).done;)_n.push(Dn.value);return _n}function cf(tn){var Dn=-1,_n=Array(tn.size);return tn.forEach(function(xa,Ja){_n[++Dn]=[Ja,xa]}),_n}function jf(tn,Dn){return function(_n){return tn(Dn(_n))}}function Ys(tn,Dn){for(var _n=-1,xa=tn.length,Ja=0,Ra=[];++_n<xa;){var ao=tn[_n];(ao===Dn||ao===f)&&(tn[_n]=f,Ra[Ja++]=_n)}return Ra}function Eu(tn){var Dn=-1,_n=Array(tn.size);return tn.forEach(function(xa){_n[++Dn]=xa}),_n}function Lu(tn){var Dn=-1,_n=Array(tn.size);return tn.forEach(function(xa){_n[++Dn]=[xa,xa]}),_n}function _h(tn,Dn,_n){for(var xa=_n-1,Ja=tn.length;++xa<Ja;)if(tn[xa]===Dn)return xa;return-1}function Cc(tn,Dn,_n){for(var xa=_n+1;xa--;)if(tn[xa]===Dn)return xa;return xa}function Tl(tn){return bo(tn)?lp(tn):bh(tn)}function ms(tn){return bo(tn)?ff(tn):au(tn)}function Wf(tn){for(var Dn=tn.length;Dn--&&Ie.test(tn.charAt(Dn)););return Dn}var wh=Hs(Ur);function lp(tn){for(var Dn=Sn.lastIndex=0;Sn.test(tn);)++Dn;return Dn}function ff(tn){return tn.match(Sn)||[]}function Th(tn){return tn.match(aa)||[]}var up=function tn(Dn){Dn=Dn==null?hr:tc.defaults(hr.Object(),Dn,tc.pick(hr,na));var _n=Dn.Array,xa=Dn.Date,Ja=Dn.Error,Ra=Dn.Function,ao=Dn.Math,ei=Dn.Object,Al=Dn.RegExp,ti=Dn.String,si=Dn.TypeError,Uo=_n.prototype,Ml=Ra.prototype,lu=ei.prototype,rc=Dn["__core-js_shared__"],Yf=Ml.toString,Li=lu.hasOwnProperty,Ul=0,gs=function(){var oe=/[^.]+$/.exec(rc&&rc.keys&&rc.keys.IE_PROTO||"");return oe?"Symbol(src)_1."+oe:""}(),Vo=lu.toString,So=Yf.call(ei),uu=hr._,ga=Al("^"+Yf.call(Li).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=jn?Dn.Buffer:e,Ho=Dn.Symbol,ss=Dn.Uint8Array,Pu=io?io.allocUnsafe:e,Xs=jf(ei.getPrototypeOf,ei),kl=ei.create,ea=lu.propertyIsEnumerable,_o=Uo.splice,hf=Ho?Ho.isConcatSpreadable:e,Sl=Ho?Ho.iterator:e,Vl=Ho?Ho.toStringTag:e,ls=function(){try{var oe=hc(ei,"defineProperty");return oe({},"",{}),oe}catch{}}(),ys=Dn.clearTimeout!==hr.clearTimeout&&Dn.clearTimeout,nc=xa&&xa.now!==hr.Date.now&&xa.now,us=Dn.setTimeout!==hr.setTimeout&&Dn.setTimeout,Zs=ao.ceil,ac=ao.floor,Ec=ei.getOwnPropertySymbols,Lc=io?io.isBuffer:e,Pc=Dn.isFinite,Xf=Uo.join,Co=jf(ei.keys,ei),Za=ao.max,ui=ao.min,cu=xa.now,Eo=Dn.parseInt,Ls=ao.random,fu=Uo.reverse,ol=hc(Dn,"DataView"),eo=hc(Dn,"Map"),Cl=hc(Dn,"Promise"),ma=hc(Dn,"Set"),ka=hc(Dn,"WeakMap"),Bi=hc(ei,"create"),Hl=ka&&new ka,wo={},$i=Yc(ol),Go=Yc(eo),cp=Yc(Cl),Rc=Yc(ma),Ti=Yc(ka),Oi=Ho?Ho.prototype:e,Ru=Oi?Oi.valueOf:e,ic=Oi?Oi.toString:e;function er(oe){if(xo(oe)&&!Ka(oe)&&!(oe instanceof li)){if(oe instanceof Si)return oe;if(Li.call(oe,"__wrapped__"))return Vh(oe)}return new Si(oe)}var Ps=function(){function oe(){}return function(me){if(!no(me))return{};if(kl)return kl(me);oe.prototype=me;var Ue=new oe;return oe.prototype=e,Ue}}();function rs(){}function Si(oe,me){this.__wrapped__=oe,this.__actions__=[],this.__chain__=!!me,this.__index__=0,this.__values__=e}er.templateSettings={escape:Mt,evaluate:At,interpolate:ft,variable:"",imports:{_:er}},er.prototype=rs.prototype,er.prototype.constructor=er,Si.prototype=Ps(rs.prototype),Si.prototype.constructor=Si;function li(oe){this.__wrapped__=oe,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function hu(){var oe=new li(this.__wrapped__);return oe.__actions__=Is(this.__actions__),oe.__dir__=this.__dir__,oe.__filtered__=this.__filtered__,oe.__iteratees__=Is(this.__iteratees__),oe.__takeCount__=this.__takeCount__,oe.__views__=Is(this.__views__),oe}function pf(){if(this.__filtered__){var oe=new li(this);oe.__dir__=-1,oe.__filtered__=!0}else oe=this.clone(),oe.__dir__*=-1;return oe}function Dc(){var oe=this.__wrapped__.value(),me=this.__dir__,Ue=Ka(oe),vt=me<0,Ht=Ue?oe.length:0,or=Wl(0,Ht,this.__views__),Dr=or.start,jr=or.end,sn=jr-Dr,Yn=vt?jr:Dr-1,Kn=this.__iteratees__,ta=Kn.length,Ta=0,Ha=ui(sn,this.__takeCount__);if(!Ue||!vt&&Ht==sn&&Ha==sn)return Qf(oe,this.__actions__);var ri=[];e:for(;sn--&&Ta<Ha;){Yn+=me;for(var wi=-1,ni=oe[Yn];++wi<ta;){var Ei=Kn[wi],Fi=Ei.iteratee,gc=Ei.type,_u=Fi(ni);if(gc==k)ni=_u;else if(!_u){if(gc==C)continue e;break e}}ri[Ta++]=ni}return ri}li.prototype=Ps(rs.prototype),li.prototype.constructor=li;function Ks(oe){var me=-1,Ue=oe==null?0:oe.length;for(this.clear();++me<Ue;){var vt=oe[me];this.set(vt[0],vt[1])}}function vf(){this.__data__=Bi?Bi(null):{},this.size=0}function df(oe){var me=this.has(oe)&&delete this.__data__[oe];return this.size-=me?1:0,me}function sl(oe){var me=this.__data__;if(Bi){var Ue=me[oe];return Ue===c?e:Ue}return Li.call(me,oe)?me[oe]:e}function Zf(oe){var me=this.__data__;return Bi?me[oe]!==e:Li.call(me,oe)}function Ah(oe,me){var Ue=this.__data__;return this.size+=this.has(oe)?0:1,Ue[oe]=Bi&&me===e?c:me,this}Ks.prototype.clear=vf,Ks.prototype.delete=df,Ks.prototype.get=sl,Ks.prototype.has=Zf,Ks.prototype.set=Ah;function jo(oe){var me=-1,Ue=oe==null?0:oe.length;for(this.clear();++me<Ue;){var vt=oe[me];this.set(vt[0],vt[1])}}function Kf(){this.__data__=[],this.size=0}function Du(oe){var me=this.__data__,Ue=bn(me,oe);if(Ue<0)return!1;var vt=me.length-1;return Ue==vt?me.pop():_o.call(me,Ue,1),--this.size,!0}function Rs(oe){var me=this.__data__,Ue=bn(me,oe);return Ue<0?e:me[Ue][1]}function Iu(oe){return bn(this.__data__,oe)>-1}function pu(oe,me){var Ue=this.__data__,vt=bn(Ue,oe);return vt<0?(++this.size,Ue.push([oe,me])):Ue[vt][1]=me,this}jo.prototype.clear=Kf,jo.prototype.delete=Du,jo.prototype.get=Rs,jo.prototype.has=Iu,jo.prototype.set=pu;function ll(oe){var me=-1,Ue=oe==null?0:oe.length;for(this.clear();++me<Ue;){var vt=oe[me];this.set(vt[0],vt[1])}}function K(){this.size=0,this.__data__={hash:new Ks,map:new(eo||jo),string:new Ks}}function ee(oe){var me=fc(this,oe).delete(oe);return this.size-=me?1:0,me}function Q(oe){return fc(this,oe).get(oe)}function he(oe){return fc(this,oe).has(oe)}function Se(oe,me){var Ue=fc(this,oe),vt=Ue.size;return Ue.set(oe,me),this.size+=Ue.size==vt?0:1,this}ll.prototype.clear=K,ll.prototype.delete=ee,ll.prototype.get=Q,ll.prototype.has=he,ll.prototype.set=Se;function Fe(oe){var me=-1,Ue=oe==null?0:oe.length;for(this.__data__=new ll;++me<Ue;)this.add(oe[me])}function We(oe){return this.__data__.set(oe,c),this}function it(oe){return this.__data__.has(oe)}Fe.prototype.add=Fe.prototype.push=We,Fe.prototype.has=it;function dt(oe){var me=this.__data__=new jo(oe);this.size=me.size}function Ft(){this.__data__=new jo,this.size=0}function Qt(oe){var me=this.__data__,Ue=me.delete(oe);return this.size=me.size,Ue}function nr(oe){return this.__data__.get(oe)}function ur(oe){return this.__data__.has(oe)}function yr(oe,me){var Ue=this.__data__;if(Ue instanceof jo){var vt=Ue.__data__;if(!eo||vt.length<S-1)return vt.push([oe,me]),this.size=++Ue.size,this;Ue=this.__data__=new ll(vt)}return Ue.set(oe,me),this.size=Ue.size,this}dt.prototype.clear=Ft,dt.prototype.delete=Qt,dt.prototype.get=nr,dt.prototype.has=ur,dt.prototype.set=yr;function br(oe,me){var Ue=Ka(oe),vt=!Ue&&Vi(oe),Ht=!Ue&&!vt&&pl(oe),or=!Ue&&!vt&&!Ht&&dc(oe),Dr=Ue||vt||Ht||or,jr=Dr?bl(oe.length,ti):[],sn=jr.length;for(var Yn in oe)(me||Li.call(oe,Yn))&&!(Dr&&(Yn=="length"||Ht&&(Yn=="offset"||Yn=="parent")||or&&(Yn=="buffer"||Yn=="byteLength"||Yn=="byteOffset")||pc(Yn,sn)))&&jr.push(Yn);return jr}function Pr(oe){var me=oe.length;return me?oe[Sh(0,me-1)]:e}function gr(oe,me){return lh(Is(oe),qn(me,0,oe.length))}function Cr(oe){return lh(Is(oe))}function Nr(oe,me,Ue){(Ue!==e&&!Ci(oe[me],Ue)||Ue===e&&!(me in oe))&&Jn(oe,me,Ue)}function Qr(oe,me,Ue){var vt=oe[me];(!(Li.call(oe,me)&&Ci(vt,Ue))||Ue===e&&!(me in oe))&&Jn(oe,me,Ue)}function bn(oe,me){for(var Ue=oe.length;Ue--;)if(Ci(oe[Ue][0],me))return Ue;return-1}function un(oe,me,Ue,vt){return Ba(oe,function(Ht,or,Dr){me(vt,Ht,Ue(Ht),Dr)}),vt}function xn(oe,me){return oe&&_s(me,Io(me),oe)}function zn(oe,me){return oe&&_s(me,As(me),oe)}function Jn(oe,me,Ue){me=="__proto__"&&ls?ls(oe,me,{configurable:!0,enumerable:!0,value:Ue,writable:!0}):oe[me]=Ue}function Hn(oe,me){for(var Ue=-1,vt=me.length,Ht=_n(vt),or=oe==null;++Ue<vt;)Ht[Ue]=or?e:Ld(oe,me[Ue]);return Ht}function qn(oe,me,Ue){return oe===oe&&(Ue!==e&&(oe=oe<=Ue?oe:Ue),me!==e&&(oe=oe>=me?oe:me)),oe}function ua(oe,me,Ue,vt,Ht,or){var Dr,jr=me&n,sn=me&o,Yn=me&l;if(Ue&&(Dr=Ht?Ue(oe,vt,Ht,or):Ue(oe)),Dr!==e)return Dr;if(!no(oe))return oe;var Kn=Ka(oe);if(Kn){if(Dr=Vc(oe),!jr)return Is(oe,Dr)}else{var ta=zs(oe),Ta=ta==$||ta==j;if(pl(oe))return uv(oe,jr);if(ta==re||ta==H||Ta&&!Ht){if(Dr=sn||Ta?{}:Sf(oe),!jr)return sn?eh(oe,zn(Dr,oe)):id(oe,xn(Dr,oe))}else{if(!lr[ta])return Ht?oe:{};Dr=Hc(oe,ta,jr)}}or||(or=new dt);var Ha=or.get(oe);if(Ha)return Ha;or.set(oe,Dr),Pp(oe)?oe.forEach(function(ni){Dr.add(ua(ni,me,Ue,ni,oe,or))}):_v(oe)&&oe.forEach(function(ni,Ei){Dr.set(Ei,ua(ni,me,Ue,Ei,oe,or))});var ri=Yn?sn?xp:Fh:sn?As:Io,wi=Kn?e:ri(oe);return Bo(wi||oe,function(ni,Ei){wi&&(Ei=ni,ni=oe[Ei]),Qr(Dr,Ei,ua(ni,me,Ue,Ei,oe,or))}),Dr}function za(oe){var me=Io(oe);return function(Ue){return Ca(Ue,oe,me)}}function Ca(oe,me,Ue){var vt=Ue.length;if(oe==null)return!vt;for(oe=ei(oe);vt--;){var Ht=Ue[vt],or=me[Ht],Dr=oe[Ht];if(Dr===e&&!(Ht in oe)||!or(Dr))return!1}return!0}function qa(oe,me,Ue){if(typeof oe!="function")throw new si(a);return jc(function(){oe.apply(e,Ue)},me)}function ha(oe,me,Ue,vt){var Ht=-1,or=uf,Dr=!0,jr=oe.length,sn=[],Yn=me.length;if(!jr)return sn;Ue&&(me=Ji(me,os(Ue))),vt?(or=ku,Dr=!1):me.length>=S&&(or=Gs,Dr=!1,me=new Fe(me));e:for(;++Ht<jr;){var Kn=oe[Ht],ta=Ue==null?Kn:Ue(Kn);if(Kn=vt||Kn!==0?Kn:0,Dr&&ta===ta){for(var Ta=Yn;Ta--;)if(me[Ta]===ta)continue e;sn.push(Kn)}else or(me,ta,vt)||sn.push(Kn)}return sn}var Ba=od(Pi),$a=od(Ai,!0);function Ua(oe,me){var Ue=!0;return Ba(oe,function(vt,Ht,or){return Ue=!!me(vt,Ht,or),Ue}),Ue}function Da(oe,me,Ue){for(var vt=-1,Ht=oe.length;++vt<Ht;){var or=oe[vt],Dr=me(or);if(Dr!=null&&(jr===e?Dr===Dr&&!nl(Dr):Ue(Dr,jr)))var jr=Dr,sn=or}return sn}function Qa(oe,me,Ue,vt){var Ht=oe.length;for(Ue=La(Ue),Ue<0&&(Ue=-Ue>Ht?0:Ht+Ue),vt=vt===e||vt>Ht?Ht:La(vt),vt<0&&(vt+=Ht),vt=Ue>vt?0:Gu(vt);Ue<vt;)oe[Ue++]=me;return oe}function Ia(oe,me){var Ue=[];return Ba(oe,function(vt,Ht,or){me(vt,Ht,or)&&Ue.push(vt)}),Ue}function pa(oe,me,Ue,vt,Ht){var or=-1,Dr=oe.length;for(Ue||(Ue=T0),Ht||(Ht=[]);++or<Dr;){var jr=oe[or];me>0&&Ue(jr)?me>1?pa(jr,me-1,Ue,vt,Ht):zl(Ht,jr):vt||(Ht[Ht.length]=jr)}return Ht}var po=Ph(),Qi=Ph(!0);function Pi(oe,me){return oe&&po(oe,me,Io)}function Ai(oe,me){return oe&&Qi(oe,me,Io)}function qi(oe,me){return ru(me,function(Ue){return xu(oe[Ue])})}function Mi(oe,me){me=Uu(me,oe);for(var Ue=0,vt=me.length;oe!=null&&Ue<vt;)oe=oe[gu(me[Ue++])];return Ue&&Ue==vt?oe:e}function ul(oe,me,Ue){var vt=me(oe);return Ka(oe)?vt:zl(vt,Ue(oe))}function vo(oe){return oe==null?oe===e?xe:te:Vl&&Vl in ei(oe)?pd(oe):mv(oe)}function Js(oe,me){return oe>me}function cs(oe,me){return oe!=null&&Li.call(oe,me)}function $s(oe,me){return oe!=null&&me in ei(oe)}function El(oe,me,Ue){return oe>=ui(me,Ue)&&oe<Za(me,Ue)}function zu(oe,me,Ue){for(var vt=Ue?ku:uf,Ht=oe[0].length,or=oe.length,Dr=or,jr=_n(or),sn=1/0,Yn=[];Dr--;){var Kn=oe[Dr];Dr&&me&&(Kn=Ji(Kn,os(me))),sn=ui(Kn.length,sn),jr[Dr]=!Ue&&(me||Ht>=120&&Kn.length>=120)?new Fe(Dr&&Kn):e}Kn=oe[0];var ta=-1,Ta=jr[0];e:for(;++ta<Ht&&Yn.length<sn;){var Ha=Kn[ta],ri=me?me(Ha):Ha;if(Ha=Ue||Ha!==0?Ha:0,!(Ta?Gs(Ta,ri):vt(Yn,ri,Ue))){for(Dr=or;--Dr;){var wi=jr[Dr];if(!(wi?Gs(wi,ri):vt(oe[Dr],ri,Ue)))continue e}Ta&&Ta.push(ri),Yn.push(Ha)}}return Yn}function Fu(oe,me,Ue,vt){return Pi(oe,function(Ht,or,Dr){me(vt,Ue(Ht),or,Dr)}),vt}function xs(oe,me,Ue){me=Uu(me,oe),oe=yo(oe,me);var vt=oe==null?oe:oe[gu(gt(me))];return vt==null?e:co(vt,oe,Ue)}function Ll(oe){return xo(oe)&&vo(oe)==H}function mf(oe){return xo(oe)&&vo(oe)==Ke}function Ou(oe){return xo(oe)&&vo(oe)==J}function Qs(oe,me,Ue,vt,Ht){return oe===me?!0:oe==null||me==null||!xo(oe)&&!xo(me)?oe!==oe&&me!==me:mo(oe,me,Ue,vt,Qs,Ht)}function mo(oe,me,Ue,vt,Ht,or){var Dr=Ka(oe),jr=Ka(me),sn=Dr?V:zs(oe),Yn=jr?V:zs(me);sn=sn==H?re:sn,Yn=Yn==H?re:Yn;var Kn=sn==re,ta=Yn==re,Ta=sn==Yn;if(Ta&&pl(oe)){if(!pl(me))return!1;Dr=!0,Kn=!1}if(Ta&&!Kn)return or||(or=new dt),Dr||dc(oe)?nh(oe,me,Ue,vt,Ht,or):hd(oe,me,sn,Ue,vt,Ht,or);if(!(Ue&h)){var Ha=Kn&&Li.call(oe,"__wrapped__"),ri=ta&&Li.call(me,"__wrapped__");if(Ha||ri){var wi=Ha?oe.value():oe,ni=ri?me.value():me;return or||(or=new dt),Ht(wi,ni,Ue,vt,or)}}return Ta?(or||(or=new dt),pv(oe,me,Ue,vt,Ht,or)):!1}function Ic(oe){return xo(oe)&&zs(oe)==ae}function zc(oe,me,Ue,vt){var Ht=Ue.length,or=Ht,Dr=!vt;if(oe==null)return!or;for(oe=ei(oe);Ht--;){var jr=Ue[Ht];if(Dr&&jr[2]?jr[1]!==oe[jr[0]]:!(jr[0]in oe))return!1}for(;++Ht<or;){jr=Ue[Ht];var sn=jr[0],Yn=oe[sn],Kn=jr[1];if(Dr&&jr[2]){if(Yn===e&&!(sn in oe))return!1}else{var ta=new dt;if(vt)var Ta=vt(Yn,Kn,sn,oe,me,ta);if(!(Ta===e?Qs(Kn,Yn,h|i,vt,ta):Ta))return!1}}return!0}function fo(oe){if(!no(oe)||Nh(oe))return!1;var me=xu(oe)?ga:$t;return me.test(Yc(oe))}function Nu(oe){return xo(oe)&&vo(oe)==fe}function to(oe){return xo(oe)&&zs(oe)==se}function Ds(oe){return xo(oe)&&vc(oe.length)&&!!Ut[vo(oe)]}function bs(oe){return typeof oe=="function"?oe:oe==null?Wu:typeof oe=="object"?Ka(oe)?kh(oe[0],oe[1]):oc(oe):U2(oe)}function vu(oe){if(!Vu(oe))return Co(oe);var me=[];for(var Ue in ei(oe))Li.call(oe,Ue)&&Ue!="constructor"&&me.push(Ue);return me}function iv(oe){if(!no(oe))return Bh(oe);var me=Vu(oe),Ue=[];for(var vt in oe)vt=="constructor"&&(me||!Li.call(oe,vt))||Ue.push(vt);return Ue}function gf(oe,me){return oe<me}function Mh(oe,me){var Ue=-1,vt=Ts(oe)?_n(oe.length):[];return Ba(oe,function(Ht,or,Dr){vt[++Ue]=me(Ht,or,Dr)}),vt}function oc(oe){var me=kf(oe);return me.length==1&&me[0][2]?ah(me[0][0],me[0][1]):function(Ue){return Ue===oe||zc(Ue,oe,me)}}function kh(oe,me){return Oh(oe)&&Yo(me)?ah(gu(oe),me):function(Ue){var vt=Ld(Ue,oe);return vt===e&&vt===me?E0(Ue,oe):Qs(me,vt,h|i)}}function qs(oe,me,Ue,vt,Ht){oe!==me&&po(me,function(or,Dr){if(Ht||(Ht=new dt),no(or))el(oe,me,Dr,Ue,qs,vt,Ht);else{var jr=vt?vt(mu(oe,Dr),or,Dr+"",oe,me,Ht):e;jr===e&&(jr=or),Nr(oe,Dr,jr)}},As)}function el(oe,me,Ue,vt,Ht,or,Dr){var jr=mu(oe,Ue),sn=mu(me,Ue),Yn=Dr.get(sn);if(Yn){Nr(oe,Ue,Yn);return}var Kn=or?or(jr,sn,Ue+"",oe,me,Dr):e,ta=Kn===e;if(ta){var Ta=Ka(sn),Ha=!Ta&&pl(sn),ri=!Ta&&!Ha&&dc(sn);Kn=sn,Ta||Ha||ri?Ka(jr)?Kn=jr:so(jr)?Kn=Is(jr):Ha?(ta=!1,Kn=uv(sn,!0)):ri?(ta=!1,Kn=Gl(sn,!0)):Kn=[]:Kc(sn)||Vi(sn)?(Kn=jr,Vi(jr)?Kn=If(jr):(!no(jr)||xu(jr))&&(Kn=Sf(sn))):ta=!1}ta&&(Dr.set(sn,Kn),Ht(Kn,sn,vt,or,Dr),Dr.delete(sn)),Nr(oe,Ue,Kn)}function ro(oe,me){var Ue=oe.length;if(!!Ue)return me+=me<0?Ue:0,pc(me,Ue)?oe[me]:e}function Qv(oe,me,Ue){me.length?me=Ji(me,function(or){return Ka(or)?function(Dr){return Mi(Dr,or.length===1?or[0]:or)}:or}):me=[Wu];var vt=-1;me=Ji(me,os(Na()));var Ht=Mh(oe,function(or,Dr,jr){var sn=Ji(me,function(Yn){return Yn(or)});return{criteria:sn,index:++vt,value:or}});return qu(Ht,function(or,Dr){return nd(or,Dr,Ue)})}function qv(oe,me){return ed(oe,me,function(Ue,vt){return E0(oe,vt)})}function ed(oe,me,Ue){for(var vt=-1,Ht=me.length,or={};++vt<Ht;){var Dr=me[vt],jr=Mi(oe,Dr);Ue(jr,Dr)&&Ch(or,Uu(Dr,oe),jr)}return or}function y0(oe){return function(me){return Mi(me,oe)}}function fp(oe,me,Ue,vt){var Ht=vt?ds:Ss,or=-1,Dr=me.length,jr=oe;for(oe===me&&(me=Is(me)),Ue&&(jr=Ji(oe,os(Ue)));++or<Dr;)for(var sn=0,Yn=me[or],Kn=Ue?Ue(Yn):Yn;(sn=Ht(jr,Kn,sn,vt))>-1;)jr!==oe&&_o.call(jr,sn,1),_o.call(oe,sn,1);return oe}function ov(oe,me){for(var Ue=oe?me.length:0,vt=Ue-1;Ue--;){var Ht=me[Ue];if(Ue==vt||Ht!==or){var or=Ht;pc(Ht)?_o.call(oe,Ht,1):$f(oe,Ht)}}return oe}function Sh(oe,me){return oe+ac(Ls()*(me-oe+1))}function x0(oe,me,Ue,vt){for(var Ht=-1,or=Za(Zs((me-oe)/(Ue||1)),0),Dr=_n(or);or--;)Dr[vt?or:++Ht]=oe,oe+=Ue;return Dr}function Jf(oe,me){var Ue="";if(!oe||me<1||me>O)return Ue;do me%2&&(Ue+=oe),me=ac(me/2),me&&(oe+=oe);while(me);return Ue}function fi(oe,me){return Wc(ih(oe,me,Wu),oe+"")}function Bu(oe){return Pr(qc(oe))}function yf(oe,me){var Ue=qc(oe);return lh(Ue,qn(me,0,Ue.length))}function Ch(oe,me,Ue,vt){if(!no(oe))return oe;me=Uu(me,oe);for(var Ht=-1,or=me.length,Dr=or-1,jr=oe;jr!=null&&++Ht<or;){var sn=gu(me[Ht]),Yn=Ue;if(sn==="__proto__"||sn==="constructor"||sn==="prototype")return oe;if(Ht!=Dr){var Kn=jr[sn];Yn=vt?vt(Kn,sn,jr):e,Yn===e&&(Yn=no(Kn)?Kn:pc(me[Ht+1])?[]:{})}Qr(jr,sn,Yn),jr=jr[sn]}return oe}var td=Hl?function(oe,me){return Hl.set(oe,me),oe}:Wu,b0=ls?function(oe,me){return ls(oe,"toString",{configurable:!0,enumerable:!1,value:l1(me),writable:!0})}:Wu;function _0(oe){return lh(qc(oe))}function Pl(oe,me,Ue){var vt=-1,Ht=oe.length;me<0&&(me=-me>Ht?0:Ht+me),Ue=Ue>Ht?Ht:Ue,Ue<0&&(Ue+=Ht),Ht=me>Ue?0:Ue-me>>>0,me>>>=0;for(var or=_n(Ht);++vt<Ht;)or[vt]=oe[vt+me];return or}function w0(oe,me){var Ue;return Ba(oe,function(vt,Ht,or){return Ue=me(vt,Ht,or),!Ue}),!!Ue}function hp(oe,me,Ue){var vt=0,Ht=oe==null?vt:oe.length;if(typeof me=="number"&&me===me&&Ht<=z){for(;vt<Ht;){var or=vt+Ht>>>1,Dr=oe[or];Dr!==null&&!nl(Dr)&&(Ue?Dr<=me:Dr<me)?vt=or+1:Ht=or}return Ht}return xf(oe,me,Wu,Ue)}function xf(oe,me,Ue,vt){var Ht=0,or=oe==null?0:oe.length;if(or===0)return 0;me=Ue(me);for(var Dr=me!==me,jr=me===null,sn=nl(me),Yn=me===e;Ht<or;){var Kn=ac((Ht+or)/2),ta=Ue(oe[Kn]),Ta=ta!==e,Ha=ta===null,ri=ta===ta,wi=nl(ta);if(Dr)var ni=vt||ri;else Yn?ni=ri&&(vt||Ta):jr?ni=ri&&Ta&&(vt||!Ha):sn?ni=ri&&Ta&&!Ha&&(vt||!wi):Ha||wi?ni=!1:ni=vt?ta<=me:ta<me;ni?Ht=Kn+1:or=Kn}return ui(or,Y)}function sv(oe,me){for(var Ue=-1,vt=oe.length,Ht=0,or=[];++Ue<vt;){var Dr=oe[Ue],jr=me?me(Dr):Dr;if(!Ue||!Ci(jr,sn)){var sn=jr;or[Ht++]=Dr===0?0:Dr}}return or}function Fc(oe){return typeof oe=="number"?oe:nl(oe)?G:+oe}function cl(oe){if(typeof oe=="string")return oe;if(Ka(oe))return Ji(oe,cl)+"";if(nl(oe))return ic?ic.call(oe):"";var me=oe+"";return me=="0"&&1/oe==-R?"-0":me}function Ni(oe,me,Ue){var vt=-1,Ht=uf,or=oe.length,Dr=!0,jr=[],sn=jr;if(Ue)Dr=!1,Ht=ku;else if(or>=S){var Yn=me?null:ud(oe);if(Yn)return Eu(Yn);Dr=!1,Ht=Gs,sn=new Fe}else sn=me?[]:jr;e:for(;++vt<or;){var Kn=oe[vt],ta=me?me(Kn):Kn;if(Kn=Ue||Kn!==0?Kn:0,Dr&&ta===ta){for(var Ta=sn.length;Ta--;)if(sn[Ta]===ta)continue e;me&&sn.push(ta),jr.push(Kn)}else Ht(sn,ta,Ue)||(sn!==jr&&sn.push(ta),jr.push(Kn))}return jr}function $f(oe,me){return me=Uu(me,oe),oe=yo(oe,me),oe==null||delete oe[gu(gt(me))]}function pp(oe,me,Ue,vt){return Ch(oe,me,Ue(Mi(oe,me)),vt)}function Oc(oe,me,Ue,vt){for(var Ht=oe.length,or=vt?Ht:-1;(vt?or--:++or<Ht)&&me(oe[or],or,oe););return Ue?Pl(oe,vt?0:or,vt?or+1:Ht):Pl(oe,vt?or+1:0,vt?Ht:or)}function Qf(oe,me){var Ue=oe;return Ue instanceof li&&(Ue=Ue.value()),ki(me,function(vt,Ht){return Ht.func.apply(Ht.thisArg,zl([vt],Ht.args))},Ue)}function sc(oe,me,Ue){var vt=oe.length;if(vt<2)return vt?Ni(oe[0]):[];for(var Ht=-1,or=_n(vt);++Ht<vt;)for(var Dr=oe[Ht],jr=-1;++jr<vt;)jr!=Ht&&(or[Ht]=ha(or[Ht]||Dr,oe[jr],me,Ue));return Ni(pa(or,1),me,Ue)}function Eh(oe,me,Ue){for(var vt=-1,Ht=oe.length,or=me.length,Dr={};++vt<Ht;){var jr=vt<or?me[vt]:e;Ue(Dr,oe[vt],jr)}return Dr}function vp(oe){return so(oe)?oe:[]}function bf(oe){return typeof oe=="function"?oe:Wu}function Uu(oe,me){return Ka(oe)?oe:Oh(oe,me)?[oe]:gd(Hi(oe))}var lv=fi;function Nc(oe,me,Ue){var vt=oe.length;return Ue=Ue===e?vt:Ue,!me&&Ue>=vt?oe:Pl(oe,me,Ue)}var _f=ys||function(oe){return hr.clearTimeout(oe)};function uv(oe,me){if(me)return oe.slice();var Ue=oe.length,vt=Pu?Pu(Ue):new oe.constructor(Ue);return oe.copy(vt),vt}function wf(oe){var me=new oe.constructor(oe.byteLength);return new ss(me).set(new ss(oe)),me}function rd(oe,me){var Ue=me?wf(oe.buffer):oe.buffer;return new oe.constructor(Ue,oe.byteOffset,oe.byteLength)}function Bc(oe){var me=new oe.constructor(oe.source,lt.exec(oe));return me.lastIndex=oe.lastIndex,me}function qf(oe){return Ru?ei(Ru.call(oe)):{}}function Gl(oe,me){var Ue=me?wf(oe.buffer):oe.buffer;return new oe.constructor(Ue,oe.byteOffset,oe.length)}function Lh(oe,me){if(oe!==me){var Ue=oe!==e,vt=oe===null,Ht=oe===oe,or=nl(oe),Dr=me!==e,jr=me===null,sn=me===me,Yn=nl(me);if(!jr&&!Yn&&!or&&oe>me||or&&Dr&&sn&&!jr&&!Yn||vt&&Dr&&sn||!Ue&&sn||!Ht)return 1;if(!vt&&!or&&!Yn&&oe<me||Yn&&Ue&&Ht&&!vt&&!or||jr&&Ue&&Ht||!Dr&&Ht||!sn)return-1}return 0}function nd(oe,me,Ue){for(var vt=-1,Ht=oe.criteria,or=me.criteria,Dr=Ht.length,jr=Ue.length;++vt<Dr;){var sn=Lh(Ht[vt],or[vt]);if(sn){if(vt>=jr)return sn;var Yn=Ue[vt];return sn*(Yn=="desc"?-1:1)}}return oe.index-me.index}function ad(oe,me,Ue,vt){for(var Ht=-1,or=oe.length,Dr=Ue.length,jr=-1,sn=me.length,Yn=Za(or-Dr,0),Kn=_n(sn+Yn),ta=!vt;++jr<sn;)Kn[jr]=me[jr];for(;++Ht<Dr;)(ta||Ht<or)&&(Kn[Ue[Ht]]=oe[Ht]);for(;Yn--;)Kn[jr++]=oe[Ht++];return Kn}function cv(oe,me,Ue,vt){for(var Ht=-1,or=oe.length,Dr=-1,jr=Ue.length,sn=-1,Yn=me.length,Kn=Za(or-jr,0),ta=_n(Kn+Yn),Ta=!vt;++Ht<Kn;)ta[Ht]=oe[Ht];for(var Ha=Ht;++sn<Yn;)ta[Ha+sn]=me[sn];for(;++Dr<jr;)(Ta||Ht<or)&&(ta[Ha+Ue[Dr]]=oe[Ht++]);return ta}function Is(oe,me){var Ue=-1,vt=oe.length;for(me||(me=_n(vt));++Ue<vt;)me[Ue]=oe[Ue];return me}function _s(oe,me,Ue,vt){var Ht=!Ue;Ue||(Ue={});for(var or=-1,Dr=me.length;++or<Dr;){var jr=me[or],sn=vt?vt(Ue[jr],oe[jr],jr,Ue,oe):e;sn===e&&(sn=oe[jr]),Ht?Jn(Ue,jr,sn):Qr(Ue,jr,sn)}return Ue}function id(oe,me){return _s(oe,vv(oe),me)}function eh(oe,me){return _s(oe,vd(oe),me)}function Tf(oe,me){return function(Ue,vt){var Ht=Ka(Ue)?eu:un,or=me?me():{};return Ht(Ue,oe,Na(vt,2),or)}}function lc(oe){return fi(function(me,Ue){var vt=-1,Ht=Ue.length,or=Ht>1?Ue[Ht-1]:e,Dr=Ht>2?Ue[2]:e;for(or=oe.length>3&&typeof or=="function"?(Ht--,or):e,Dr&&Fs(Ue[0],Ue[1],Dr)&&(or=Ht<3?e:or,Ht=1),me=ei(me);++vt<Ht;){var jr=Ue[vt];jr&&oe(me,jr,vt,or)}return me})}function od(oe,me){return function(Ue,vt){if(Ue==null)return Ue;if(!Ts(Ue))return oe(Ue,vt);for(var Ht=Ue.length,or=me?Ht:-1,Dr=ei(Ue);(me?or--:++or<Ht)&&vt(Dr[or],or,Dr)!==!1;);return Ue}}function Ph(oe){return function(me,Ue,vt){for(var Ht=-1,or=ei(me),Dr=vt(me),jr=Dr.length;jr--;){var sn=Dr[oe?jr:++Ht];if(Ue(or[sn],sn,or)===!1)break}return me}}function th(oe,me,Ue){var vt=me&s,Ht=cc(oe);function or(){var Dr=this&&this!==hr&&this instanceof or?Ht:oe;return Dr.apply(vt?Ue:this,arguments)}return or}function fv(oe){return function(me){me=Hi(me);var Ue=bo(me)?ms(me):e,vt=Ue?Ue[0]:me.charAt(0),Ht=Ue?Nc(Ue,1).join(""):me.slice(1);return vt[oe]()+Ht}}function uc(oe){return function(me){return ki(N2(ig(me).replace(Fr,"")),oe,"")}}function cc(oe){return function(){var me=arguments;switch(me.length){case 0:return new oe;case 1:return new oe(me[0]);case 2:return new oe(me[0],me[1]);case 3:return new oe(me[0],me[1],me[2]);case 4:return new oe(me[0],me[1],me[2],me[3]);case 5:return new oe(me[0],me[1],me[2],me[3],me[4]);case 6:return new oe(me[0],me[1],me[2],me[3],me[4],me[5]);case 7:return new oe(me[0],me[1],me[2],me[3],me[4],me[5],me[6])}var Ue=Ps(oe.prototype),vt=oe.apply(Ue,me);return no(vt)?vt:Ue}}function jl(oe,me,Ue){var vt=cc(oe);function Ht(){for(var or=arguments.length,Dr=_n(or),jr=or,sn=Mf(Ht);jr--;)Dr[jr]=arguments[jr];var Yn=or<3&&Dr[0]!==sn&&Dr[or-1]!==sn?[]:Ys(Dr,sn);if(or-=Yn.length,or<Ue)return ld(oe,me,dp,Ht.placeholder,e,Dr,Yn,e,e,Ue-or);var Kn=this&&this!==hr&&this instanceof Ht?vt:oe;return co(Kn,this,Dr)}return Ht}function Rh(oe){return function(me,Ue,vt){var Ht=ei(me);if(!Ts(me)){var or=Na(Ue,3);me=Io(me),Ue=function(jr){return or(Ht[jr],jr,Ht)}}var Dr=oe(me,Ue,vt);return Dr>-1?Ht[or?me[Dr]:Dr]:e}}function hv(oe){return go(function(me){var Ue=me.length,vt=Ue,Ht=Si.prototype.thru;for(oe&&me.reverse();vt--;){var or=me[vt];if(typeof or!="function")throw new si(a);if(Ht&&!Dr&&bi(or)=="wrapper")var Dr=new Si([],!0)}for(vt=Dr?vt:Ue;++vt<Ue;){or=me[vt];var jr=bi(or),sn=jr=="wrapper"?Uc(or):e;sn&&Gc(sn[0])&&sn[1]==(w|m|y|g)&&!sn[4].length&&sn[9]==1?Dr=Dr[bi(sn[0])].apply(Dr,sn[3]):Dr=or.length==1&&Gc(or)?Dr[jr]():Dr.thru(or)}return function(){var Yn=arguments,Kn=Yn[0];if(Dr&&Yn.length==1&&Ka(Kn))return Dr.plant(Kn).value();for(var ta=0,Ta=Ue?me[ta].apply(this,Yn):Kn;++ta<Ue;)Ta=me[ta].call(this,Ta);return Ta}})}function dp(oe,me,Ue,vt,Ht,or,Dr,jr,sn,Yn){var Kn=me&w,ta=me&s,Ta=me&p,Ha=me&(m|b),ri=me&T,wi=Ta?e:cc(oe);function ni(){for(var Ei=arguments.length,Fi=_n(Ei),gc=Ei;gc--;)Fi[gc]=arguments[gc];if(Ha)var _u=Mf(ni),yc=Cs(Fi,_u);if(vt&&(Fi=ad(Fi,vt,Ht,Ha)),or&&(Fi=cv(Fi,or,Dr,Ha)),Ei-=yc,Ha&&Ei<Yn){var Ms=Ys(Fi,_u);return ld(oe,me,dp,ni.placeholder,Ue,Fi,Ms,jr,sn,Yn-Ei)}var zf=ta?Ue:this,Wh=Ta?zf[oe]:oe;return Ei=Fi.length,jr?Fi=_p(Fi,jr):ri&&Ei>1&&Fi.reverse(),Kn&&sn<Ei&&(Fi.length=sn),this&&this!==hr&&this instanceof ni&&(Wh=wi||cc(Wh)),Wh.apply(zf,Fi)}return ni}function rh(oe,me){return function(Ue,vt){return Fu(Ue,oe,me(vt),{})}}function Dh(oe,me){return function(Ue,vt){var Ht;if(Ue===e&&vt===e)return me;if(Ue!==e&&(Ht=Ue),vt!==e){if(Ht===e)return vt;typeof Ue=="string"||typeof vt=="string"?(Ue=cl(Ue),vt=cl(vt)):(Ue=Fc(Ue),vt=Fc(vt)),Ht=oe(Ue,vt)}return Ht}}function mp(oe){return go(function(me){return me=Ji(me,os(Na())),fi(function(Ue){var vt=this;return oe(me,function(Ht){return co(Ht,vt,Ue)})})})}function Ih(oe,me){me=me===e?" ":cl(me);var Ue=me.length;if(Ue<2)return Ue?Jf(me,oe):me;var vt=Jf(me,Zs(oe/Tl(me)));return bo(me)?Nc(ms(vt),0,oe).join(""):vt.slice(0,oe)}function sd(oe,me,Ue,vt){var Ht=me&s,or=cc(oe);function Dr(){for(var jr=-1,sn=arguments.length,Yn=-1,Kn=vt.length,ta=_n(Kn+sn),Ta=this&&this!==hr&&this instanceof Dr?or:oe;++Yn<Kn;)ta[Yn]=vt[Yn];for(;sn--;)ta[Yn++]=arguments[++jr];return co(Ta,Ht?Ue:this,ta)}return Dr}function gp(oe){return function(me,Ue,vt){return vt&&typeof vt!="number"&&Fs(me,Ue,vt)&&(Ue=vt=e),me=bu(me),Ue===e?(Ue=me,me=0):Ue=bu(Ue),vt=vt===e?me<Ue?1:-1:bu(vt),x0(me,Ue,vt,oe)}}function Wo(oe){return function(me,Ue){return typeof me=="string"&&typeof Ue=="string"||(me=ju(me),Ue=ju(Ue)),oe(me,Ue)}}function ld(oe,me,Ue,vt,Ht,or,Dr,jr,sn,Yn){var Kn=me&m,ta=Kn?Dr:e,Ta=Kn?e:Dr,Ha=Kn?or:e,ri=Kn?e:or;me|=Kn?y:x,me&=~(Kn?x:y),me&v||(me&=~(s|p));var wi=[oe,me,Ht,Ha,ta,ri,Ta,jr,sn,Yn],ni=Ue.apply(e,wi);return Gc(oe)&&Uh(ni,wi),ni.placeholder=vt,oh(ni,oe,me)}function Af(oe){var me=ao[oe];return function(Ue,vt){if(Ue=ju(Ue),vt=vt==null?0:ui(La(vt),292),vt&&Pc(Ue)){var Ht=(Hi(Ue)+"e").split("e"),or=me(Ht[0]+"e"+(+Ht[1]+vt));return Ht=(Hi(or)+"e").split("e"),+(Ht[0]+"e"+(+Ht[1]-vt))}return me(Ue)}}var ud=ma&&1/Eu(new ma([,-0]))[1]==R?function(oe){return new ma(oe)}:f1;function cd(oe){return function(me){var Ue=zs(me);return Ue==ae?cf(me):Ue==se?Lu(me):Gf(me,oe(me))}}function du(oe,me,Ue,vt,Ht,or,Dr,jr){var sn=me&p;if(!sn&&typeof oe!="function")throw new si(a);var Yn=vt?vt.length:0;if(Yn||(me&=~(y|x),vt=Ht=e),Dr=Dr===e?Dr:Za(La(Dr),0),jr=jr===e?jr:La(jr),Yn-=Ht?Ht.length:0,me&x){var Kn=vt,ta=Ht;vt=Ht=e}var Ta=sn?e:Uc(oe),Ha=[oe,me,Ue,vt,Ht,Kn,ta,or,Dr,jr];if(Ta&&Os(Ha,Ta),oe=Ha[0],me=Ha[1],Ue=Ha[2],vt=Ha[3],Ht=Ha[4],jr=Ha[9]=Ha[9]===e?sn?0:oe.length:Za(Ha[9]-Yn,0),!jr&&me&(m|b)&&(me&=~(m|b)),!me||me==s)var ri=th(oe,me,Ue);else me==m||me==b?ri=jl(oe,me,jr):(me==y||me==(s|y))&&!Ht.length?ri=sd(oe,me,Ue,vt):ri=dp.apply(e,Ha);var wi=Ta?td:Uh;return oh(wi(ri,Ha),oe,me)}function zh(oe,me,Ue,vt){return oe===e||Ci(oe,lu[Ue])&&!Li.call(vt,Ue)?me:oe}function fd(oe,me,Ue,vt,Ht,or){return no(oe)&&no(me)&&(or.set(me,oe),qs(oe,me,e,fd,or),or.delete(me)),oe}function yp(oe){return Kc(oe)?e:oe}function nh(oe,me,Ue,vt,Ht,or){var Dr=Ue&h,jr=oe.length,sn=me.length;if(jr!=sn&&!(Dr&&sn>jr))return!1;var Yn=or.get(oe),Kn=or.get(me);if(Yn&&Kn)return Yn==me&&Kn==oe;var ta=-1,Ta=!0,Ha=Ue&i?new Fe:e;for(or.set(oe,me),or.set(me,oe);++ta<jr;){var ri=oe[ta],wi=me[ta];if(vt)var ni=Dr?vt(wi,ri,ta,me,oe,or):vt(ri,wi,ta,oe,me,or);if(ni!==e){if(ni)continue;Ta=!1;break}if(Ha){if(!nu(me,function(Ei,Fi){if(!Gs(Ha,Fi)&&(ri===Ei||Ht(ri,Ei,Ue,vt,or)))return Ha.push(Fi)})){Ta=!1;break}}else if(!(ri===wi||Ht(ri,wi,Ue,vt,or))){Ta=!1;break}}return or.delete(oe),or.delete(me),Ta}function hd(oe,me,Ue,vt,Ht,or,Dr){switch(Ue){case ze:if(oe.byteLength!=me.byteLength||oe.byteOffset!=me.byteOffset)return!1;oe=oe.buffer,me=me.buffer;case Ke:return!(oe.byteLength!=me.byteLength||!or(new ss(oe),new ss(me)));case q:case J:case ie:return Ci(+oe,+me);case ve:return oe.name==me.name&&oe.message==me.message;case fe:case de:return oe==me+"";case ae:var jr=cf;case se:var sn=vt&h;if(jr||(jr=Eu),oe.size!=me.size&&!sn)return!1;var Yn=Dr.get(oe);if(Yn)return Yn==me;vt|=i,Dr.set(oe,me);var Kn=nh(jr(oe),jr(me),vt,Ht,or,Dr);return Dr.delete(oe),Kn;case be:if(Ru)return Ru.call(oe)==Ru.call(me)}return!1}function pv(oe,me,Ue,vt,Ht,or){var Dr=Ue&h,jr=Fh(oe),sn=jr.length,Yn=Fh(me),Kn=Yn.length;if(sn!=Kn&&!Dr)return!1;for(var ta=sn;ta--;){var Ta=jr[ta];if(!(Dr?Ta in me:Li.call(me,Ta)))return!1}var Ha=or.get(oe),ri=or.get(me);if(Ha&&ri)return Ha==me&&ri==oe;var wi=!0;or.set(oe,me),or.set(me,oe);for(var ni=Dr;++ta<sn;){Ta=jr[ta];var Ei=oe[Ta],Fi=me[Ta];if(vt)var gc=Dr?vt(Fi,Ei,Ta,me,oe,or):vt(Ei,Fi,Ta,oe,me,or);if(!(gc===e?Ei===Fi||Ht(Ei,Fi,Ue,vt,or):gc)){wi=!1;break}ni||(ni=Ta=="constructor")}if(wi&&!ni){var _u=oe.constructor,yc=me.constructor;_u!=yc&&"constructor"in oe&&"constructor"in me&&!(typeof _u=="function"&&_u instanceof _u&&typeof yc=="function"&&yc instanceof yc)&&(wi=!1)}return or.delete(oe),or.delete(me),wi}function go(oe){return Wc(ih(oe,e,Lf),oe+"")}function Fh(oe){return ul(oe,Io,vv)}function xp(oe){return ul(oe,As,vd)}var Uc=Hl?function(oe){return Hl.get(oe)}:f1;function bi(oe){for(var me=oe.name+"",Ue=wo[me],vt=Li.call(wo,me)?Ue.length:0;vt--;){var Ht=Ue[vt],or=Ht.func;if(or==null||or==oe)return Ht.name}return me}function Mf(oe){var me=Li.call(er,"placeholder")?er:oe;return me.placeholder}function Na(){var oe=er.iteratee||u1;return oe=oe===u1?bs:oe,arguments.length?oe(arguments[0],arguments[1]):oe}function fc(oe,me){var Ue=oe.__data__;return bp(me)?Ue[typeof me=="string"?"string":"hash"]:Ue.map}function kf(oe){for(var me=Io(oe),Ue=me.length;Ue--;){var vt=me[Ue],Ht=oe[vt];me[Ue]=[vt,Ht,Yo(Ht)]}return me}function hc(oe,me){var Ue=su(oe,me);return fo(Ue)?Ue:e}function pd(oe){var me=Li.call(oe,Vl),Ue=oe[Vl];try{oe[Vl]=e;var vt=!0}catch{}var Ht=Vo.call(oe);return vt&&(me?oe[Vl]=Ue:delete oe[Vl]),Ht}var vv=Ec?function(oe){return oe==null?[]:(oe=ei(oe),ru(Ec(oe),function(me){return ea.call(oe,me)}))}:h1,vd=Ec?function(oe){for(var me=[];oe;)zl(me,vv(oe)),oe=Xs(oe);return me}:h1,zs=vo;(ol&&zs(new ol(new ArrayBuffer(1)))!=ze||eo&&zs(new eo)!=ae||Cl&&zs(Cl.resolve())!=ce||ma&&zs(new ma)!=se||ka&&zs(new ka)!=ke)&&(zs=function(oe){var me=vo(oe),Ue=me==re?oe.constructor:e,vt=Ue?Yc(Ue):"";if(vt)switch(vt){case $i:return ze;case Go:return ae;case cp:return ce;case Rc:return se;case Ti:return ke}return me});function Wl(oe,me,Ue){for(var vt=-1,Ht=Ue.length;++vt<Ht;){var or=Ue[vt],Dr=or.size;switch(or.type){case"drop":oe+=Dr;break;case"dropRight":me-=Dr;break;case"take":me=ui(me,oe+Dr);break;case"takeRight":oe=Za(oe,me-Dr);break}}return{start:oe,end:me}}function dd(oe){var me=oe.match(Ye);return me?me[1].split(ut):[]}function dv(oe,me,Ue){me=Uu(me,oe);for(var vt=-1,Ht=me.length,or=!1;++vt<Ht;){var Dr=gu(me[vt]);if(!(or=oe!=null&&Ue(oe,Dr)))break;oe=oe[Dr]}return or||++vt!=Ht?or:(Ht=oe==null?0:oe.length,!!Ht&&vc(Ht)&&pc(Dr,Ht)&&(Ka(oe)||Vi(oe)))}function Vc(oe){var me=oe.length,Ue=new oe.constructor(me);return me&&typeof oe[0]=="string"&&Li.call(oe,"index")&&(Ue.index=oe.index,Ue.input=oe.input),Ue}function Sf(oe){return typeof oe.constructor=="function"&&!Vu(oe)?Ps(Xs(oe)):{}}function Hc(oe,me,Ue){var vt=oe.constructor;switch(me){case Ke:return wf(oe);case q:case J:return new vt(+oe);case ze:return rd(oe,Ue);case Je:case qe:case Ee:case Ae:case Be:case $e:case xt:case bt:case Ne:return Gl(oe,Ue);case ae:return new vt;case ie:case de:return new vt(oe);case fe:return Bc(oe);case se:return new vt;case be:return qf(oe)}}function md(oe,me){var Ue=me.length;if(!Ue)return oe;var vt=Ue-1;return me[vt]=(Ue>1?"& ":"")+me[vt],me=me.join(Ue>2?", ":" "),oe.replace(He,`{
/* [wrapped with `+me+`] */
`)}function T0(oe){return Ka(oe)||Vi(oe)||!!(hf&&oe&&oe[hf])}function pc(oe,me){var Ue=typeof oe;return me=me==null?O:me,!!me&&(Ue=="number"||Ue!="symbol"&&Oe.test(oe))&&oe>-1&&oe%1==0&&oe<me}function Fs(oe,me,Ue){if(!no(Ue))return!1;var vt=typeof me;return(vt=="number"?Ts(Ue)&&pc(me,Ue.length):vt=="string"&&me in Ue)?Ci(Ue[me],oe):!1}function Oh(oe,me){if(Ka(oe))return!1;var Ue=typeof oe;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||oe==null||nl(oe)?!0:Te.test(oe)||!ot.test(oe)||me!=null&&oe in ei(me)}function bp(oe){var me=typeof oe;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?oe!=="__proto__":oe===null}function Gc(oe){var me=bi(oe),Ue=er[me];if(typeof Ue!="function"||!(me in li.prototype))return!1;if(oe===Ue)return!0;var vt=Uc(Ue);return!!vt&&oe===vt[0]}function Nh(oe){return!!gs&&gs in oe}var fl=rc?xu:p1;function Vu(oe){var me=oe&&oe.constructor,Ue=typeof me=="function"&&me.prototype||lu;return oe===Ue}function Yo(oe){return oe===oe&&!no(oe)}function ah(oe,me){return function(Ue){return Ue==null?!1:Ue[oe]===me&&(me!==e||oe in ei(Ue))}}function Cf(oe){var me=oo(oe,function(vt){return Ue.size===t&&Ue.clear(),vt}),Ue=me.cache;return me}function Os(oe,me){var Ue=oe[1],vt=me[1],Ht=Ue|vt,or=Ht<(s|p|w),Dr=vt==w&&Ue==m||vt==w&&Ue==g&&oe[7].length<=me[8]||vt==(w|g)&&me[7].length<=me[8]&&Ue==m;if(!(or||Dr))return oe;vt&s&&(oe[2]=me[2],Ht|=Ue&s?0:v);var jr=me[3];if(jr){var sn=oe[3];oe[3]=sn?ad(sn,jr,me[4]):jr,oe[4]=sn?Ys(oe[3],f):me[4]}return jr=me[5],jr&&(sn=oe[5],oe[5]=sn?cv(sn,jr,me[6]):jr,oe[6]=sn?Ys(oe[5],f):me[6]),jr=me[7],jr&&(oe[7]=jr),vt&w&&(oe[8]=oe[8]==null?me[8]:ui(oe[8],me[8])),oe[9]==null&&(oe[9]=me[9]),oe[0]=me[0],oe[1]=Ht,oe}function Bh(oe){var me=[];if(oe!=null)for(var Ue in ei(oe))me.push(Ue);return me}function mv(oe){return Vo.call(oe)}function ih(oe,me,Ue){return me=Za(me===e?oe.length-1:me,0),function(){for(var vt=arguments,Ht=-1,or=Za(vt.length-me,0),Dr=_n(or);++Ht<or;)Dr[Ht]=vt[me+Ht];Ht=-1;for(var jr=_n(me+1);++Ht<me;)jr[Ht]=vt[Ht];return jr[me]=Ue(Dr),co(oe,this,jr)}}function yo(oe,me){return me.length<2?oe:Mi(oe,Pl(me,0,-1))}function _p(oe,me){for(var Ue=oe.length,vt=ui(me.length,Ue),Ht=Is(oe);vt--;){var or=me[vt];oe[vt]=pc(or,Ue)?Ht[or]:e}return oe}function mu(oe,me){if(!(me==="constructor"&&typeof oe[me]=="function")&&me!="__proto__")return oe[me]}var Uh=sh(td),jc=us||function(oe,me){return hr.setTimeout(oe,me)},Wc=sh(b0);function oh(oe,me,Ue){var vt=me+"";return Wc(oe,md(vt,yd(dd(vt),Ue)))}function sh(oe){var me=0,Ue=0;return function(){var vt=cu(),Ht=I-(vt-Ue);if(Ue=vt,Ht>0){if(++me>=L)return arguments[0]}else me=0;return oe.apply(e,arguments)}}function lh(oe,me){var Ue=-1,vt=oe.length,Ht=vt-1;for(me=me===e?vt:me;++Ue<me;){var or=Sh(Ue,Ht),Dr=oe[or];oe[or]=oe[Ue],oe[Ue]=Dr}return oe.length=me,oe}var gd=Cf(function(oe){var me=[];return oe.charCodeAt(0)===46&&me.push(""),oe.replace(Le,function(Ue,vt,Ht,or){me.push(Ht?or.replace(at,"$1"):vt||Ue)}),me});function gu(oe){if(typeof oe=="string"||nl(oe))return oe;var me=oe+"";return me=="0"&&1/oe==-R?"-0":me}function Yc(oe){if(oe!=null){try{return Yf.call(oe)}catch{}try{return oe+""}catch{}}return""}function yd(oe,me){return Bo(B,function(Ue){var vt="_."+Ue[0];me&Ue[1]&&!uf(oe,vt)&&oe.push(vt)}),oe.sort()}function Vh(oe){if(oe instanceof li)return oe.clone();var me=new Si(oe.__wrapped__,oe.__chain__);return me.__actions__=Is(oe.__actions__),me.__index__=oe.__index__,me.__values__=oe.__values__,me}function gv(oe,me,Ue){(Ue?Fs(oe,me,Ue):me===e)?me=1:me=Za(La(me),0);var vt=oe==null?0:oe.length;if(!vt||me<1)return[];for(var Ht=0,or=0,Dr=_n(Zs(vt/me));Ht<vt;)Dr[or++]=Pl(oe,Ht,Ht+=me);return Dr}function xd(oe){for(var me=-1,Ue=oe==null?0:oe.length,vt=0,Ht=[];++me<Ue;){var or=oe[me];or&&(Ht[vt++]=or)}return Ht}function yv(){var oe=arguments.length;if(!oe)return[];for(var me=_n(oe-1),Ue=arguments[0],vt=oe;vt--;)me[vt-1]=arguments[vt];return zl(Ka(Ue)?Is(Ue):[Ue],pa(me,1))}var wp=fi(function(oe,me){return so(oe)?ha(oe,pa(me,1,so,!0)):[]}),uh=fi(function(oe,me){var Ue=gt(me);return so(Ue)&&(Ue=e),so(oe)?ha(oe,pa(me,1,so,!0),Na(Ue,2)):[]}),Xc=fi(function(oe,me){var Ue=gt(me);return so(Ue)&&(Ue=e),so(oe)?ha(oe,pa(me,1,so,!0),e,Ue):[]});function Ef(oe,me,Ue){var vt=oe==null?0:oe.length;return vt?(me=Ue||me===e?1:La(me),Pl(oe,me<0?0:me,vt)):[]}function ch(oe,me,Ue){var vt=oe==null?0:oe.length;return vt?(me=Ue||me===e?1:La(me),me=vt-me,Pl(oe,0,me<0?0:me)):[]}function Tp(oe,me){return oe&&oe.length?Oc(oe,Na(me,3),!0,!0):[]}function fh(oe,me){return oe&&oe.length?Oc(oe,Na(me,3),!0):[]}function bd(oe,me,Ue,vt){var Ht=oe==null?0:oe.length;return Ht?(Ue&&typeof Ue!="number"&&Fs(oe,me,Ue)&&(Ue=0,vt=Ht),Qa(oe,me,Ue,vt)):[]}function _d(oe,me,Ue){var vt=oe==null?0:oe.length;if(!vt)return-1;var Ht=Ue==null?0:La(Ue);return Ht<0&&(Ht=Za(vt+Ht,0)),iu(oe,Na(me,3),Ht)}function wd(oe,me,Ue){var vt=oe==null?0:oe.length;if(!vt)return-1;var Ht=vt-1;return Ue!==e&&(Ht=La(Ue),Ht=Ue<0?Za(vt+Ht,0):ui(Ht,vt-1)),iu(oe,Na(me,3),Ht,!0)}function Lf(oe){var me=oe==null?0:oe.length;return me?pa(oe,1):[]}function W(oe){var me=oe==null?0:oe.length;return me?pa(oe,R):[]}function ue(oe,me){var Ue=oe==null?0:oe.length;return Ue?(me=me===e?1:La(me),pa(oe,me)):[]}function ge(oe){for(var me=-1,Ue=oe==null?0:oe.length,vt={};++me<Ue;){var Ht=oe[me];vt[Ht[0]]=Ht[1]}return vt}function _e(oe){return oe&&oe.length?oe[0]:e}function Ce(oe,me,Ue){var vt=oe==null?0:oe.length;if(!vt)return-1;var Ht=Ue==null?0:La(Ue);return Ht<0&&(Ht=Za(vt+Ht,0)),Ss(oe,me,Ht)}function De(oe){var me=oe==null?0:oe.length;return me?Pl(oe,0,-1):[]}var tt=fi(function(oe){var me=Ji(oe,vp);return me.length&&me[0]===oe[0]?zu(me):[]}),Ze=fi(function(oe){var me=gt(oe),Ue=Ji(oe,vp);return me===gt(Ue)?me=e:Ue.pop(),Ue.length&&Ue[0]===oe[0]?zu(Ue,Na(me,2)):[]}),rt=fi(function(oe){var me=gt(oe),Ue=Ji(oe,vp);return me=typeof me=="function"?me:e,me&&Ue.pop(),Ue.length&&Ue[0]===oe[0]?zu(Ue,e,me):[]});function pt(oe,me){return oe==null?"":Xf.call(oe,me)}function gt(oe){var me=oe==null?0:oe.length;return me?oe[me-1]:e}function Dt(oe,me,Ue){var vt=oe==null?0:oe.length;if(!vt)return-1;var Ht=vt;return Ue!==e&&(Ht=La(Ue),Ht=Ht<0?Za(vt+Ht,0):ui(Ht,vt-1)),me===me?Cc(oe,me,Ht):iu(oe,Cu,Ht,!0)}function Bt(oe,me){return oe&&oe.length?ro(oe,La(me)):e}var qt=fi(_r);function _r(oe,me){return oe&&oe.length&&me&&me.length?fp(oe,me):oe}function Kt(oe,me,Ue){return oe&&oe.length&&me&&me.length?fp(oe,me,Na(Ue,2)):oe}function tr(oe,me,Ue){return oe&&oe.length&&me&&me.length?fp(oe,me,e,Ue):oe}var ir=go(function(oe,me){var Ue=oe==null?0:oe.length,vt=Hn(oe,me);return ov(oe,Ji(me,function(Ht){return pc(Ht,Ue)?+Ht:Ht}).sort(Lh)),vt});function wr(oe,me){var Ue=[];if(!(oe&&oe.length))return Ue;var vt=-1,Ht=[],or=oe.length;for(me=Na(me,3);++vt<or;){var Dr=oe[vt];me(Dr,vt,oe)&&(Ue.push(Dr),Ht.push(vt))}return ov(oe,Ht),Ue}function sr(oe){return oe==null?oe:fu.call(oe)}function vr(oe,me,Ue){var vt=oe==null?0:oe.length;return vt?(Ue&&typeof Ue!="number"&&Fs(oe,me,Ue)?(me=0,Ue=vt):(me=me==null?0:La(me),Ue=Ue===e?vt:La(Ue)),Pl(oe,me,Ue)):[]}function nn(oe,me){return hp(oe,me)}function en(oe,me,Ue){return xf(oe,me,Na(Ue,2))}function Jr(oe,me){var Ue=oe==null?0:oe.length;if(Ue){var vt=hp(oe,me);if(vt<Ue&&Ci(oe[vt],me))return vt}return-1}function Yr(oe,me){return hp(oe,me,!0)}function kn(oe,me,Ue){return xf(oe,me,Na(Ue,2),!0)}function In(oe,me){var Ue=oe==null?0:oe.length;if(Ue){var vt=hp(oe,me,!0)-1;if(Ci(oe[vt],me))return vt}return-1}function ia(oe){return oe&&oe.length?sv(oe):[]}function Wn(oe,me){return oe&&oe.length?sv(oe,Na(me,2)):[]}function Zn(oe){var me=oe==null?0:oe.length;return me?Pl(oe,1,me):[]}function fn(oe,me,Ue){return oe&&oe.length?(me=Ue||me===e?1:La(me),Pl(oe,0,me<0?0:me)):[]}function Pn(oe,me,Ue){var vt=oe==null?0:oe.length;return vt?(me=Ue||me===e?1:La(me),me=vt-me,Pl(oe,me<0?0:me,vt)):[]}function Vn(oe,me){return oe&&oe.length?Oc(oe,Na(me,3),!1,!0):[]}function an(oe,me){return oe&&oe.length?Oc(oe,Na(me,3)):[]}var Tn=fi(function(oe){return Ni(pa(oe,1,so,!0))}),va=fi(function(oe){var me=gt(oe);return so(me)&&(me=e),Ni(pa(oe,1,so,!0),Na(me,2))}),Fa=fi(function(oe){var me=gt(oe);return me=typeof me=="function"?me:e,Ni(pa(oe,1,so,!0),e,me)});function Wa(oe){return oe&&oe.length?Ni(oe):[]}function _i(oe,me){return oe&&oe.length?Ni(oe,Na(me,2)):[]}function Ii(oe,me){return me=typeof me=="function"?me:e,oe&&oe.length?Ni(oe,e,me):[]}function Xo(oe){if(!(oe&&oe.length))return[];var me=0;return oe=ru(oe,function(Ue){if(so(Ue))return me=Za(Ue.length,me),!0}),bl(me,function(Ue){return Ji(oe,xl(Ue))})}function To(oe,me){if(!(oe&&oe.length))return[];var Ue=Xo(oe);return me==null?Ue:Ji(Ue,function(vt){return co(me,e,vt)})}var Ao=fi(function(oe,me){return so(oe)?ha(oe,me):[]}),tl=fi(function(oe){return sc(ru(oe,so))}),hi=fi(function(oe){var me=gt(oe);return so(me)&&(me=e),sc(ru(oe,so),Na(me,2))}),fs=fi(function(oe){var me=gt(oe);return me=typeof me=="function"?me:e,sc(ru(oe,so),e,me)}),rl=fi(Xo);function Ap(oe,me){return Eh(oe||[],me||[],Qr)}function hl(oe,me){return Eh(oe||[],me||[],Ch)}var Zo=fi(function(oe){var me=oe.length,Ue=me>1?oe[me-1]:e;return Ue=typeof Ue=="function"?(oe.pop(),Ue):e,To(oe,Ue)});function hs(oe){var me=er(oe);return me.__chain__=!0,me}function ps(oe,me){return me(oe),oe}function Ns(oe,me){return me(oe)}var Pf=go(function(oe){var me=oe.length,Ue=me?oe[0]:0,vt=this.__wrapped__,Ht=function(or){return Hn(or,oe)};return me>1||this.__actions__.length||!(vt instanceof li)||!pc(Ue)?this.thru(Ht):(vt=vt.slice(Ue,+Ue+(me?1:0)),vt.__actions__.push({func:Ns,args:[Ht],thisArg:e}),new Si(vt,this.__chain__).thru(function(or){return me&&!or.length&&or.push(e),or}))});function Rf(){return hs(this)}function Yi(){return new Si(this.value(),this.__chain__)}function yu(){this.__values__===e&&(this.__values__=Vm(this.value()));var oe=this.__index__>=this.__values__.length,me=oe?e:this.__values__[this.__index__++];return{done:oe,value:me}}function xv(){return this}function _(oe){for(var me,Ue=this;Ue instanceof rs;){var vt=Vh(Ue);vt.__index__=0,vt.__values__=e,me?Ht.__wrapped__=vt:me=vt;var Ht=vt;Ue=Ue.__wrapped__}return Ht.__wrapped__=oe,me}function F(){var oe=this.__wrapped__;if(oe instanceof li){var me=oe;return this.__actions__.length&&(me=new li(this)),me=me.reverse(),me.__actions__.push({func:Ns,args:[sr],thisArg:e}),new Si(me,this.__chain__)}return this.thru(sr)}function X(){return Qf(this.__wrapped__,this.__actions__)}var le=Tf(function(oe,me,Ue){Li.call(oe,Ue)?++oe[Ue]:Jn(oe,Ue,1)});function ye(oe,me,Ue){var vt=Ka(oe)?tu:Ua;return Ue&&Fs(oe,me,Ue)&&(me=e),vt(oe,Na(me,3))}function we(oe,me){var Ue=Ka(oe)?ru:Ia;return Ue(oe,Na(me,3))}var Pe=Rh(_d),Xe=Rh(wd);function ct(oe,me){return pa(Ar(oe,me),1)}function Tt(oe,me){return pa(Ar(oe,me),R)}function Lt(oe,me,Ue){return Ue=Ue===e?1:La(Ue),pa(Ar(oe,me),Ue)}function It(oe,me){var Ue=Ka(oe)?Bo:Ba;return Ue(oe,Na(me,3))}function Gt(oe,me){var Ue=Ka(oe)?Qu:$a;return Ue(oe,Na(me,3))}var Jt=Tf(function(oe,me,Ue){Li.call(oe,Ue)?oe[Ue].push(me):Jn(oe,Ue,[me])});function pr(oe,me,Ue,vt){oe=Ts(oe)?oe:qc(oe),Ue=Ue&&!vt?La(Ue):0;var Ht=oe.length;return Ue<0&&(Ue=Za(Ht+Ue,0)),Jc(oe)?Ue<=Ht&&oe.indexOf(me,Ue)>-1:!!Ht&&Ss(oe,me,Ue)>-1}var dr=fi(function(oe,me,Ue){var vt=-1,Ht=typeof me=="function",or=Ts(oe)?_n(oe.length):[];return Ba(oe,function(Dr){or[++vt]=Ht?co(me,Dr,Ue):xs(Dr,me,Ue)}),or}),zr=Tf(function(oe,me,Ue){Jn(oe,Ue,me)});function Ar(oe,me){var Ue=Ka(oe)?Ji:Mh;return Ue(oe,Na(me,3))}function Xr(oe,me,Ue,vt){return oe==null?[]:(Ka(me)||(me=me==null?[]:[me]),Ue=vt?e:Ue,Ka(Ue)||(Ue=Ue==null?[]:[Ue]),Qv(oe,me,Ue))}var rn=Tf(function(oe,me,Ue){oe[Ue?0:1].push(me)},function(){return[[],[]]});function mn(oe,me,Ue){var vt=Ka(oe)?ki:Sc,Ht=arguments.length<3;return vt(oe,Na(me,4),Ue,Ht,Ba)}function gn(oe,me,Ue){var vt=Ka(oe)?sp:Sc,Ht=arguments.length<3;return vt(oe,Na(me,4),Ue,Ht,$a)}function Ln(oe,me){var Ue=Ka(oe)?ru:Ia;return Ue(oe,zi(Na(me,3)))}function $n(oe){var me=Ka(oe)?Pr:Bu;return me(oe)}function oa(oe,me,Ue){(Ue?Fs(oe,me,Ue):me===e)?me=1:me=La(me);var vt=Ka(oe)?gr:yf;return vt(oe,me)}function _a(oe){var me=Ka(oe)?Cr:_0;return me(oe)}function fa(oe){if(oe==null)return 0;if(Ts(oe))return Jc(oe)?Tl(oe):oe.length;var me=zs(oe);return me==ae||me==se?oe.size:vu(oe).length}function Aa(oe,me,Ue){var vt=Ka(oe)?nu:w0;return Ue&&Fs(oe,me,Ue)&&(me=e),vt(oe,Na(me,3))}var ca=fi(function(oe,me){if(oe==null)return[];var Ue=me.length;return Ue>1&&Fs(oe,me[0],me[1])?me=[]:Ue>2&&Fs(me[0],me[1],me[2])&&(me=[me[0]]),Qv(oe,pa(me,1),[])}),Xa=nc||function(){return hr.Date.now()};function Oa(oe,me){if(typeof me!="function")throw new si(a);return oe=La(oe),function(){if(--oe<1)return me.apply(this,arguments)}}function da(oe,me,Ue){return me=Ue?e:me,me=oe&&me==null?oe.length:me,du(oe,w,e,e,e,e,me)}function ii(oe,me){var Ue;if(typeof me!="function")throw new si(a);return oe=La(oe),function(){return--oe>0&&(Ue=me.apply(this,arguments)),oe<=1&&(me=e),Ue}}var ja=fi(function(oe,me,Ue){var vt=s;if(Ue.length){var Ht=Ys(Ue,Mf(ja));vt|=y}return du(oe,vt,me,Ue,Ht)}),pi=fi(function(oe,me,Ue){var vt=s|p;if(Ue.length){var Ht=Ys(Ue,Mf(pi));vt|=y}return du(me,vt,oe,Ue,Ht)});function wa(oe,me,Ue){me=Ue?e:me;var vt=du(oe,m,e,e,e,e,e,me);return vt.placeholder=wa.placeholder,vt}function yi(oe,me,Ue){me=Ue?e:me;var vt=du(oe,b,e,e,e,e,e,me);return vt.placeholder=yi.placeholder,vt}function Ui(oe,me,Ue){var vt,Ht,or,Dr,jr,sn,Yn=0,Kn=!1,ta=!1,Ta=!0;if(typeof oe!="function")throw new si(a);me=ju(me)||0,no(Ue)&&(Kn=!!Ue.leading,ta="maxWait"in Ue,or=ta?Za(ju(Ue.maxWait)||0,me):or,Ta="trailing"in Ue?!!Ue.trailing:Ta);function Ha(Ms){var zf=vt,Wh=Ht;return vt=Ht=e,Yn=Ms,Dr=oe.apply(Wh,zf),Dr}function ri(Ms){return Yn=Ms,jr=jc(Ei,me),Kn?Ha(Ms):Dr}function wi(Ms){var zf=Ms-sn,Wh=Ms-Yn,V2=me-zf;return ta?ui(V2,or-Wh):V2}function ni(Ms){var zf=Ms-sn,Wh=Ms-Yn;return sn===e||zf>=me||zf<0||ta&&Wh>=or}function Ei(){var Ms=Xa();if(ni(Ms))return Fi(Ms);jr=jc(Ei,wi(Ms))}function Fi(Ms){return jr=e,Ta&&vt?Ha(Ms):(vt=Ht=e,Dr)}function gc(){jr!==e&&_f(jr),Yn=0,vt=sn=Ht=jr=e}function _u(){return jr===e?Dr:Fi(Xa())}function yc(){var Ms=Xa(),zf=ni(Ms);if(vt=arguments,Ht=this,sn=Ms,zf){if(jr===e)return ri(sn);if(ta)return _f(jr),jr=jc(Ei,me),Ha(sn)}return jr===e&&(jr=jc(Ei,me)),Dr}return yc.cancel=gc,yc.flush=_u,yc}var Ko=fi(function(oe,me){return qa(oe,1,me)}),Jo=fi(function(oe,me,Ue){return qa(oe,ju(me)||0,Ue)});function Xi(oe){return du(oe,T)}function oo(oe,me){if(typeof oe!="function"||me!=null&&typeof me!="function")throw new si(a);var Ue=function(){var vt=arguments,Ht=me?me.apply(this,vt):vt[0],or=Ue.cache;if(or.has(Ht))return or.get(Ht);var Dr=oe.apply(this,vt);return Ue.cache=or.set(Ht,Dr)||or,Dr};return Ue.cache=new(oo.Cache||ll),Ue}oo.Cache=ll;function zi(oe){if(typeof oe!="function")throw new si(a);return function(){var me=arguments;switch(me.length){case 0:return!oe.call(this);case 1:return!oe.call(this,me[0]);case 2:return!oe.call(this,me[0],me[1]);case 3:return!oe.call(this,me[0],me[1],me[2])}return!oe.apply(this,me)}}function Lo(oe){return ii(2,oe)}var Bs=lv(function(oe,me){me=me.length==1&&Ka(me[0])?Ji(me[0],os(Na())):Ji(pa(me,1),os(Na()));var Ue=me.length;return fi(function(vt){for(var Ht=-1,or=ui(vt.length,Ue);++Ht<or;)vt[Ht]=me[Ht].call(this,vt[Ht]);return co(oe,this,vt)})}),Po=fi(function(oe,me){var Ue=Ys(me,Mf(Po));return du(oe,y,e,me,Ue)}),Us=fi(function(oe,me){var Ue=Ys(me,Mf(Us));return du(oe,x,e,me,Ue)}),Ro=go(function(oe,me){return du(oe,g,e,e,e,me)});function Do(oe,me){if(typeof oe!="function")throw new si(a);return me=me===e?me:La(me),fi(oe,me)}function ci(oe,me){if(typeof oe!="function")throw new si(a);return me=me==null?0:Za(La(me),0),fi(function(Ue){var vt=Ue[me],Ht=Nc(Ue,0,me);return vt&&zl(Ht,vt),co(oe,this,Ht)})}function Ri(oe,me,Ue){var vt=!0,Ht=!0;if(typeof oe!="function")throw new si(a);return no(Ue)&&(vt="leading"in Ue?!!Ue.leading:vt,Ht="trailing"in Ue?!!Ue.trailing:Ht),Ui(oe,me,{leading:vt,maxWait:me,trailing:Ht})}function Zi(oe){return da(oe,1)}function vi(oe,me){return Po(bf(me),oe)}function Mo(){if(!arguments.length)return[];var oe=arguments[0];return Ka(oe)?oe:[oe]}function ws(oe){return ua(oe,l)}function $o(oe,me){return me=typeof me=="function"?me:e,ua(oe,l,me)}function ho(oe){return ua(oe,n|l)}function Qo(oe,me){return me=typeof me=="function"?me:e,ua(oe,n|l,me)}function Ki(oe,me){return me==null||Ca(oe,me,Io(me))}function Ci(oe,me){return oe===me||oe!==oe&&me!==me}var Yl=Wo(Js),Zc=Wo(function(oe,me){return oe>=me}),Vi=Ll(function(){return arguments}())?Ll:function(oe){return xo(oe)&&Li.call(oe,"callee")&&!ea.call(oe,"callee")},Ka=_n.isArray,Hu=Ea?os(Ea):mf;function Ts(oe){return oe!=null&&vc(oe.length)&&!xu(oe)}function so(oe){return xo(oe)&&Ts(oe)}function Mp(oe){return oe===!0||oe===!1||xo(oe)&&vo(oe)==q}var pl=Lc||p1,kp=Ga?os(Ga):Ou;function Td(oe){return xo(oe)&&oe.nodeType===1&&!Kc(oe)}function Sp(oe){if(oe==null)return!0;if(Ts(oe)&&(Ka(oe)||typeof oe=="string"||typeof oe.splice=="function"||pl(oe)||dc(oe)||Vi(oe)))return!oe.length;var me=zs(oe);if(me==ae||me==se)return!oe.size;if(Vu(oe))return!vu(oe).length;for(var Ue in oe)if(Li.call(oe,Ue))return!1;return!0}function bv(oe,me){return Qs(oe,me)}function Ad(oe,me,Ue){Ue=typeof Ue=="function"?Ue:e;var vt=Ue?Ue(oe,me):e;return vt===e?Qs(oe,me,e,Ue):!!vt}function Cp(oe){if(!xo(oe))return!1;var me=vo(oe);return me==ve||me==ne||typeof oe.message=="string"&&typeof oe.name=="string"&&!Kc(oe)}function Df(oe){return typeof oe=="number"&&Pc(oe)}function xu(oe){if(!no(oe))return!1;var me=vo(oe);return me==$||me==j||me==Z||me==pe}function Hh(oe){return typeof oe=="number"&&oe==La(oe)}function vc(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=O}function no(oe){var me=typeof oe;return oe!=null&&(me=="object"||me=="function")}function xo(oe){return oe!=null&&typeof oe=="object"}var _v=ai?os(ai):Ic;function wv(oe,me){return oe===me||zc(oe,me,kf(me))}function Tv(oe,me,Ue){return Ue=typeof Ue=="function"?Ue:e,zc(oe,me,kf(me),Ue)}function Md(oe){return Sv(oe)&&oe!=+oe}function Av(oe){if(fl(oe))throw new Ja(r);return fo(oe)}function Mv(oe){return oe===null}function kv(oe){return oe==null}function Sv(oe){return typeof oe=="number"||xo(oe)&&vo(oe)==ie}function Kc(oe){if(!xo(oe)||vo(oe)!=re)return!1;var me=Xs(oe);if(me===null)return!0;var Ue=Li.call(me,"constructor")&&me.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&Yf.call(Ue)==So}var Ep=Ma?os(Ma):Nu;function Lp(oe){return Hh(oe)&&oe>=-O&&oe<=O}var Pp=Va?os(Va):to;function Jc(oe){return typeof oe=="string"||!Ka(oe)&&xo(oe)&&vo(oe)==de}function nl(oe){return typeof oe=="symbol"||xo(oe)&&vo(oe)==be}var dc=No?os(No):Ds;function A0(oe){return oe===e}function Bm(oe){return xo(oe)&&zs(oe)==ke}function M0(oe){return xo(oe)&&vo(oe)==Re}var Um=Wo(gf),k0=Wo(function(oe,me){return oe<=me});function Vm(oe){if(!oe)return[];if(Ts(oe))return Jc(oe)?ms(oe):Is(oe);if(Sl&&oe[Sl])return ec(oe[Sl]());var me=zs(oe),Ue=me==ae?cf:me==se?Eu:qc;return Ue(oe)}function bu(oe){if(!oe)return oe===0?oe:0;if(oe=ju(oe),oe===R||oe===-R){var me=oe<0?-1:1;return me*N}return oe===oe?oe:0}function La(oe){var me=bu(oe),Ue=me%1;return me===me?Ue?me-Ue:me:0}function Gu(oe){return oe?qn(La(oe),0,U):0}function ju(oe){if(typeof oe=="number")return oe;if(nl(oe))return G;if(no(oe)){var me=typeof oe.valueOf=="function"?oe.valueOf():oe;oe=no(me)?me+"":me}if(typeof oe!="string")return oe===0?oe:+oe;oe=Ol(oe);var Ue=Pt.test(oe);return Ue||je.test(oe)?Hr(oe.slice(2),Ue?2:8):Ct.test(oe)?G:+oe}function If(oe){return _s(oe,As(oe))}function S0(oe){return oe?qn(La(oe),-O,O):oe===0?oe:0}function Hi(oe){return oe==null?"":cl(oe)}var kd=lc(function(oe,me){if(Vu(me)||Ts(me)){_s(me,Io(me),oe);return}for(var Ue in me)Li.call(me,Ue)&&Qr(oe,Ue,me[Ue])}),mc=lc(function(oe,me){_s(me,As(me),oe)}),Gh=lc(function(oe,me,Ue,vt){_s(me,As(me),oe,vt)}),Cv=lc(function(oe,me,Ue,vt){_s(me,Io(me),oe,vt)}),Sd=go(Hn);function Cd(oe,me){var Ue=Ps(oe);return me==null?Ue:xn(Ue,me)}var C0=fi(function(oe,me){oe=ei(oe);var Ue=-1,vt=me.length,Ht=vt>2?me[2]:e;for(Ht&&Fs(me[0],me[1],Ht)&&(vt=1);++Ue<vt;)for(var or=me[Ue],Dr=As(or),jr=-1,sn=Dr.length;++jr<sn;){var Yn=Dr[jr],Kn=oe[Yn];(Kn===e||Ci(Kn,lu[Yn])&&!Li.call(oe,Yn))&&(oe[Yn]=or[Yn])}return oe}),Hm=fi(function(oe){return oe.push(e,fd),co(L0,e,oe)});function Ev(oe,me){return Su(oe,Na(me,3),Pi)}function Gm(oe,me){return Su(oe,Na(me,3),Ai)}function jm(oe,me){return oe==null?oe:po(oe,Na(me,3),As)}function Wm(oe,me){return oe==null?oe:Qi(oe,Na(me,3),As)}function Ym(oe,me){return oe&&Pi(oe,Na(me,3))}function Xm(oe,me){return oe&&Ai(oe,Na(me,3))}function Xl(oe){return oe==null?[]:qi(oe,Io(oe))}function Ed(oe){return oe==null?[]:qi(oe,As(oe))}function Ld(oe,me,Ue){var vt=oe==null?e:Mi(oe,me);return vt===e?Ue:vt}function $c(oe,me){return oe!=null&&dv(oe,me,cs)}function E0(oe,me){return oe!=null&&dv(oe,me,$s)}var Zm=rh(function(oe,me,Ue){me!=null&&typeof me.toString!="function"&&(me=Vo.call(me)),oe[me]=Ue},l1(Wu)),jh=rh(function(oe,me,Ue){me!=null&&typeof me.toString!="function"&&(me=Vo.call(me)),Li.call(oe,me)?oe[me].push(Ue):oe[me]=[Ue]},Na),Rp=fi(xs);function Io(oe){return Ts(oe)?br(oe):vu(oe)}function As(oe){return Ts(oe)?br(oe,!0):iv(oe)}function Dp(oe,me){var Ue={};return me=Na(me,3),Pi(oe,function(vt,Ht,or){Jn(Ue,me(vt,Ht,or),vt)}),Ue}function Km(oe,me){var Ue={};return me=Na(me,3),Pi(oe,function(vt,Ht,or){Jn(Ue,Ht,me(vt,Ht,or))}),Ue}var Jm=lc(function(oe,me,Ue){qs(oe,me,Ue)}),L0=lc(function(oe,me,Ue,vt){qs(oe,me,Ue,vt)}),$m=go(function(oe,me){var Ue={};if(oe==null)return Ue;var vt=!1;me=Ji(me,function(or){return or=Uu(or,oe),vt||(vt=or.length>1),or}),_s(oe,xp(oe),Ue),vt&&(Ue=ua(Ue,n|o|l,yp));for(var Ht=me.length;Ht--;)$f(Ue,me[Ht]);return Ue});function P0(oe,me){return Qc(oe,zi(Na(me)))}var R0=go(function(oe,me){return oe==null?{}:qv(oe,me)});function Qc(oe,me){if(oe==null)return{};var Ue=Ji(xp(oe),function(vt){return[vt]});return me=Na(me),ed(oe,Ue,function(vt,Ht){return me(vt,Ht[0])})}function Qm(oe,me,Ue){me=Uu(me,oe);var vt=-1,Ht=me.length;for(Ht||(Ht=1,oe=e);++vt<Ht;){var or=oe==null?e:oe[gu(me[vt])];or===e&&(vt=Ht,or=Ue),oe=xu(or)?or.call(oe):or}return oe}function D0(oe,me,Ue){return oe==null?oe:Ch(oe,me,Ue)}function I0(oe,me,Ue,vt){return vt=typeof vt=="function"?vt:e,oe==null?oe:Ch(oe,me,Ue,vt)}var z0=cd(Io),Pd=cd(As);function qm(oe,me,Ue){var vt=Ka(oe),Ht=vt||pl(oe)||dc(oe);if(me=Na(me,4),Ue==null){var or=oe&&oe.constructor;Ht?Ue=vt?new or:[]:no(oe)?Ue=xu(or)?Ps(Xs(oe)):{}:Ue={}}return(Ht?Bo:Pi)(oe,function(Dr,jr,sn){return me(Ue,Dr,jr,sn)}),Ue}function eg(oe,me){return oe==null?!0:$f(oe,me)}function F0(oe,me,Ue){return oe==null?oe:pp(oe,me,bf(Ue))}function tg(oe,me,Ue,vt){return vt=typeof vt=="function"?vt:e,oe==null?oe:pp(oe,me,bf(Ue),vt)}function qc(oe){return oe==null?[]:Nl(oe,Io(oe))}function rg(oe){return oe==null?[]:Nl(oe,As(oe))}function Rd(oe,me,Ue){return Ue===e&&(Ue=me,me=e),Ue!==e&&(Ue=ju(Ue),Ue=Ue===Ue?Ue:0),me!==e&&(me=ju(me),me=me===me?me:0),qn(ju(oe),me,Ue)}function e1(oe,me,Ue){return me=bu(me),Ue===e?(Ue=me,me=0):Ue=bu(Ue),oe=ju(oe),El(oe,me,Ue)}function ng(oe,me,Ue){if(Ue&&typeof Ue!="boolean"&&Fs(oe,me,Ue)&&(me=Ue=e),Ue===e&&(typeof me=="boolean"?(Ue=me,me=e):typeof oe=="boolean"&&(Ue=oe,oe=e)),oe===e&&me===e?(oe=0,me=1):(oe=bu(oe),me===e?(me=oe,oe=0):me=bu(me)),oe>me){var vt=oe;oe=me,me=vt}if(Ue||oe%1||me%1){var Ht=Ls();return ui(oe+Ht*(me-oe+$r("1e-"+((Ht+"").length-1))),me)}return Sh(oe,me)}var t1=uc(function(oe,me,Ue){return me=me.toLowerCase(),oe+(Ue?ag(me):me)});function ag(oe){return s1(Hi(oe).toLowerCase())}function ig(oe){return oe=Hi(oe),oe&&oe.replace(mt,Es).replace(yn,"")}function r1(oe,me,Ue){oe=Hi(oe),me=cl(me);var vt=oe.length;Ue=Ue===e?vt:qn(La(Ue),0,vt);var Ht=Ue;return Ue-=me.length,Ue>=0&&oe.slice(Ue,Ht)==me}function n1(oe){return oe=Hi(oe),oe&&Zt.test(oe)?oe.replace(Et,_l):oe}function a1(oe){return oe=Hi(oe),oe&&Qe.test(oe)?oe.replace(Ve,"\\$&"):oe}var i1=uc(function(oe,me,Ue){return oe+(Ue?"-":"")+me.toLowerCase()}),o1=uc(function(oe,me,Ue){return oe+(Ue?" ":"")+me.toLowerCase()}),ef=fv("toLowerCase");function Dd(oe,me,Ue){oe=Hi(oe),me=La(me);var vt=me?Tl(oe):0;if(!me||vt>=me)return oe;var Ht=(me-vt)/2;return Ih(ac(Ht),Ue)+oe+Ih(Zs(Ht),Ue)}function og(oe,me,Ue){oe=Hi(oe),me=La(me);var vt=me?Tl(oe):0;return me&&vt<me?oe+Ih(me-vt,Ue):oe}function Lv(oe,me,Ue){oe=Hi(oe),me=La(me);var vt=me?Tl(oe):0;return me&&vt<me?Ih(me-vt,Ue)+oe:oe}function sg(oe,me,Ue){return Ue||me==null?me=0:me&&(me=+me),Eo(Hi(oe).replace(Me,""),me||0)}function a5(oe,me,Ue){return(Ue?Fs(oe,me,Ue):me===e)?me=1:me=La(me),Jf(Hi(oe),me)}function i5(){var oe=arguments,me=Hi(oe[0]);return oe.length<3?me:me.replace(oe[1],oe[2])}var o5=uc(function(oe,me,Ue){return oe+(Ue?"_":"")+me.toLowerCase()});function s5(oe,me,Ue){return Ue&&typeof Ue!="number"&&Fs(oe,me,Ue)&&(me=Ue=e),Ue=Ue===e?U:Ue>>>0,Ue?(oe=Hi(oe),oe&&(typeof me=="string"||me!=null&&!Ep(me))&&(me=cl(me),!me&&bo(oe))?Nc(ms(oe),0,Ue):oe.split(me,Ue)):[]}var l5=uc(function(oe,me,Ue){return oe+(Ue?" ":"")+s1(me)});function u5(oe,me,Ue){return oe=Hi(oe),Ue=Ue==null?0:qn(La(Ue),0,oe.length),me=cl(me),oe.slice(Ue,Ue+me.length)==me}function c5(oe,me,Ue){var vt=er.templateSettings;Ue&&Fs(oe,me,Ue)&&(me=e),oe=Hi(oe),me=Gh({},me,vt,zh);var Ht=Gh({},me.imports,vt.imports,zh),or=Io(Ht),Dr=Nl(Ht,or),jr,sn,Yn=0,Kn=me.interpolate||wt,ta="__p += '",Ta=Al((me.escape||wt).source+"|"+Kn.source+"|"+(Kn===ft?et:wt).source+"|"+(me.evaluate||wt).source+"|$","g"),Ha="//# sourceURL="+(Li.call(me,"sourceURL")?(me.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ba+"]")+`
`;oe.replace(Ta,function(ni,Ei,Fi,gc,_u,yc){return Fi||(Fi=gc),ta+=oe.slice(Yn,yc).replace(yt,wl),Ei&&(jr=!0,ta+=`' +
__e(`+Ei+`) +
'`),_u&&(sn=!0,ta+=`';
`+_u+`;
__p += '`),Fi&&(ta+=`' +
((__t = (`+Fi+`)) == null ? '' : __t) +
'`),Yn=yc+ni.length,ni}),ta+=`';
`;var ri=Li.call(me,"variable")&&me.variable;if(!ri)ta=`with (obj) {
`+ta+`
}
`;else if(Ge.test(ri))throw new Ja(u);ta=(sn?ta.replace(st,""):ta).replace(_t,"$1").replace(Ot,"$1;"),ta="function("+(ri||"obj")+`) {
`+(ri?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(jr?", __e = _.escape":"")+(sn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ta+`return __p
}`;var wi=B2(function(){return Ra(or,Ha+"return "+ta).apply(e,Dr)});if(wi.source=ta,Cp(wi))throw wi;return wi}function f5(oe){return Hi(oe).toLowerCase()}function h5(oe){return Hi(oe).toUpperCase()}function p5(oe,me,Ue){if(oe=Hi(oe),oe&&(Ue||me===e))return Ol(oe);if(!oe||!(me=cl(me)))return oe;var vt=ms(oe),Ht=ms(me),or=Bl(vt,Ht),Dr=js(vt,Ht)+1;return Nc(vt,or,Dr).join("")}function v5(oe,me,Ue){if(oe=Hi(oe),oe&&(Ue||me===e))return oe.slice(0,Wf(oe)+1);if(!oe||!(me=cl(me)))return oe;var vt=ms(oe),Ht=js(vt,ms(me))+1;return Nc(vt,0,Ht).join("")}function d5(oe,me,Ue){if(oe=Hi(oe),oe&&(Ue||me===e))return oe.replace(Me,"");if(!oe||!(me=cl(me)))return oe;var vt=ms(oe),Ht=Bl(vt,ms(me));return Nc(vt,Ht).join("")}function m5(oe,me){var Ue=M,vt=P;if(no(me)){var Ht="separator"in me?me.separator:Ht;Ue="length"in me?La(me.length):Ue,vt="omission"in me?cl(me.omission):vt}oe=Hi(oe);var or=oe.length;if(bo(oe)){var Dr=ms(oe);or=Dr.length}if(Ue>=or)return oe;var jr=Ue-Tl(vt);if(jr<1)return vt;var sn=Dr?Nc(Dr,0,jr).join(""):oe.slice(0,jr);if(Ht===e)return sn+vt;if(Dr&&(jr+=sn.length-jr),Ep(Ht)){if(oe.slice(jr).search(Ht)){var Yn,Kn=sn;for(Ht.global||(Ht=Al(Ht.source,Hi(lt.exec(Ht))+"g")),Ht.lastIndex=0;Yn=Ht.exec(Kn);)var ta=Yn.index;sn=sn.slice(0,ta===e?jr:ta)}}else if(oe.indexOf(cl(Ht),jr)!=jr){var Ta=sn.lastIndexOf(Ht);Ta>-1&&(sn=sn.slice(0,Ta))}return sn+vt}function g5(oe){return oe=Hi(oe),oe&&jt.test(oe)?oe.replace(Wt,wh):oe}var y5=uc(function(oe,me,Ue){return oe+(Ue?" ":"")+me.toUpperCase()}),s1=fv("toUpperCase");function N2(oe,me,Ue){return oe=Hi(oe),me=Ue?e:me,me===e?Ws(oe)?Th(oe):Fl(oe):oe.match(me)||[]}var B2=fi(function(oe,me){try{return co(oe,e,me)}catch(Ue){return Cp(Ue)?Ue:new Ja(Ue)}}),x5=go(function(oe,me){return Bo(me,function(Ue){Ue=gu(Ue),Jn(oe,Ue,ja(oe[Ue],oe))}),oe});function b5(oe){var me=oe==null?0:oe.length,Ue=Na();return oe=me?Ji(oe,function(vt){if(typeof vt[1]!="function")throw new si(a);return[Ue(vt[0]),vt[1]]}):[],fi(function(vt){for(var Ht=-1;++Ht<me;){var or=oe[Ht];if(co(or[0],this,vt))return co(or[1],this,vt)}})}function _5(oe){return za(ua(oe,n))}function l1(oe){return function(){return oe}}function w5(oe,me){return oe==null||oe!==oe?me:oe}var T5=hv(),A5=hv(!0);function Wu(oe){return oe}function u1(oe){return bs(typeof oe=="function"?oe:ua(oe,n))}function M5(oe){return oc(ua(oe,n))}function k5(oe,me){return kh(oe,ua(me,n))}var S5=fi(function(oe,me){return function(Ue){return xs(Ue,oe,me)}}),C5=fi(function(oe,me){return function(Ue){return xs(oe,Ue,me)}});function c1(oe,me,Ue){var vt=Io(me),Ht=qi(me,vt);Ue==null&&!(no(me)&&(Ht.length||!vt.length))&&(Ue=me,me=oe,oe=this,Ht=qi(me,Io(me)));var or=!(no(Ue)&&"chain"in Ue)||!!Ue.chain,Dr=xu(oe);return Bo(Ht,function(jr){var sn=me[jr];oe[jr]=sn,Dr&&(oe.prototype[jr]=function(){var Yn=this.__chain__;if(or||Yn){var Kn=oe(this.__wrapped__),ta=Kn.__actions__=Is(this.__actions__);return ta.push({func:sn,args:arguments,thisArg:oe}),Kn.__chain__=Yn,Kn}return sn.apply(oe,zl([this.value()],arguments))})}),oe}function E5(){return hr._===this&&(hr._=uu),this}function f1(){}function L5(oe){return oe=La(oe),fi(function(me){return ro(me,oe)})}var P5=mp(Ji),R5=mp(tu),D5=mp(nu);function U2(oe){return Oh(oe)?xl(gu(oe)):y0(oe)}function I5(oe){return function(me){return oe==null?e:Mi(oe,me)}}var z5=gp(),F5=gp(!0);function h1(){return[]}function p1(){return!1}function O5(){return{}}function N5(){return""}function B5(){return!0}function U5(oe,me){if(oe=La(oe),oe<1||oe>O)return[];var Ue=U,vt=ui(oe,U);me=Na(me),oe-=U;for(var Ht=bl(vt,me);++Ue<oe;)me(Ue);return Ht}function V5(oe){return Ka(oe)?Ji(oe,gu):nl(oe)?[oe]:Is(gd(Hi(oe)))}function H5(oe){var me=++Ul;return Hi(oe)+me}var G5=Dh(function(oe,me){return oe+me},0),j5=Af("ceil"),W5=Dh(function(oe,me){return oe/me},1),Y5=Af("floor");function X5(oe){return oe&&oe.length?Da(oe,Wu,Js):e}function Z5(oe,me){return oe&&oe.length?Da(oe,Na(me,2),Js):e}function K5(oe){return ou(oe,Wu)}function J5(oe,me){return ou(oe,Na(me,2))}function $5(oe){return oe&&oe.length?Da(oe,Wu,gf):e}function Q5(oe,me){return oe&&oe.length?Da(oe,Na(me,2),gf):e}var q5=Dh(function(oe,me){return oe*me},1),eM=Af("round"),tM=Dh(function(oe,me){return oe-me},0);function rM(oe){return oe&&oe.length?xi(oe,Wu):0}function nM(oe,me){return oe&&oe.length?xi(oe,Na(me,2)):0}return er.after=Oa,er.ary=da,er.assign=kd,er.assignIn=mc,er.assignInWith=Gh,er.assignWith=Cv,er.at=Sd,er.before=ii,er.bind=ja,er.bindAll=x5,er.bindKey=pi,er.castArray=Mo,er.chain=hs,er.chunk=gv,er.compact=xd,er.concat=yv,er.cond=b5,er.conforms=_5,er.constant=l1,er.countBy=le,er.create=Cd,er.curry=wa,er.curryRight=yi,er.debounce=Ui,er.defaults=C0,er.defaultsDeep=Hm,er.defer=Ko,er.delay=Jo,er.difference=wp,er.differenceBy=uh,er.differenceWith=Xc,er.drop=Ef,er.dropRight=ch,er.dropRightWhile=Tp,er.dropWhile=fh,er.fill=bd,er.filter=we,er.flatMap=ct,er.flatMapDeep=Tt,er.flatMapDepth=Lt,er.flatten=Lf,er.flattenDeep=W,er.flattenDepth=ue,er.flip=Xi,er.flow=T5,er.flowRight=A5,er.fromPairs=ge,er.functions=Xl,er.functionsIn=Ed,er.groupBy=Jt,er.initial=De,er.intersection=tt,er.intersectionBy=Ze,er.intersectionWith=rt,er.invert=Zm,er.invertBy=jh,er.invokeMap=dr,er.iteratee=u1,er.keyBy=zr,er.keys=Io,er.keysIn=As,er.map=Ar,er.mapKeys=Dp,er.mapValues=Km,er.matches=M5,er.matchesProperty=k5,er.memoize=oo,er.merge=Jm,er.mergeWith=L0,er.method=S5,er.methodOf=C5,er.mixin=c1,er.negate=zi,er.nthArg=L5,er.omit=$m,er.omitBy=P0,er.once=Lo,er.orderBy=Xr,er.over=P5,er.overArgs=Bs,er.overEvery=R5,er.overSome=D5,er.partial=Po,er.partialRight=Us,er.partition=rn,er.pick=R0,er.pickBy=Qc,er.property=U2,er.propertyOf=I5,er.pull=qt,er.pullAll=_r,er.pullAllBy=Kt,er.pullAllWith=tr,er.pullAt=ir,er.range=z5,er.rangeRight=F5,er.rearg=Ro,er.reject=Ln,er.remove=wr,er.rest=Do,er.reverse=sr,er.sampleSize=oa,er.set=D0,er.setWith=I0,er.shuffle=_a,er.slice=vr,er.sortBy=ca,er.sortedUniq=ia,er.sortedUniqBy=Wn,er.split=s5,er.spread=ci,er.tail=Zn,er.take=fn,er.takeRight=Pn,er.takeRightWhile=Vn,er.takeWhile=an,er.tap=ps,er.throttle=Ri,er.thru=Ns,er.toArray=Vm,er.toPairs=z0,er.toPairsIn=Pd,er.toPath=V5,er.toPlainObject=If,er.transform=qm,er.unary=Zi,er.union=Tn,er.unionBy=va,er.unionWith=Fa,er.uniq=Wa,er.uniqBy=_i,er.uniqWith=Ii,er.unset=eg,er.unzip=Xo,er.unzipWith=To,er.update=F0,er.updateWith=tg,er.values=qc,er.valuesIn=rg,er.without=Ao,er.words=N2,er.wrap=vi,er.xor=tl,er.xorBy=hi,er.xorWith=fs,er.zip=rl,er.zipObject=Ap,er.zipObjectDeep=hl,er.zipWith=Zo,er.entries=z0,er.entriesIn=Pd,er.extend=mc,er.extendWith=Gh,c1(er,er),er.add=G5,er.attempt=B2,er.camelCase=t1,er.capitalize=ag,er.ceil=j5,er.clamp=Rd,er.clone=ws,er.cloneDeep=ho,er.cloneDeepWith=Qo,er.cloneWith=$o,er.conformsTo=Ki,er.deburr=ig,er.defaultTo=w5,er.divide=W5,er.endsWith=r1,er.eq=Ci,er.escape=n1,er.escapeRegExp=a1,er.every=ye,er.find=Pe,er.findIndex=_d,er.findKey=Ev,er.findLast=Xe,er.findLastIndex=wd,er.findLastKey=Gm,er.floor=Y5,er.forEach=It,er.forEachRight=Gt,er.forIn=jm,er.forInRight=Wm,er.forOwn=Ym,er.forOwnRight=Xm,er.get=Ld,er.gt=Yl,er.gte=Zc,er.has=$c,er.hasIn=E0,er.head=_e,er.identity=Wu,er.includes=pr,er.indexOf=Ce,er.inRange=e1,er.invoke=Rp,er.isArguments=Vi,er.isArray=Ka,er.isArrayBuffer=Hu,er.isArrayLike=Ts,er.isArrayLikeObject=so,er.isBoolean=Mp,er.isBuffer=pl,er.isDate=kp,er.isElement=Td,er.isEmpty=Sp,er.isEqual=bv,er.isEqualWith=Ad,er.isError=Cp,er.isFinite=Df,er.isFunction=xu,er.isInteger=Hh,er.isLength=vc,er.isMap=_v,er.isMatch=wv,er.isMatchWith=Tv,er.isNaN=Md,er.isNative=Av,er.isNil=kv,er.isNull=Mv,er.isNumber=Sv,er.isObject=no,er.isObjectLike=xo,er.isPlainObject=Kc,er.isRegExp=Ep,er.isSafeInteger=Lp,er.isSet=Pp,er.isString=Jc,er.isSymbol=nl,er.isTypedArray=dc,er.isUndefined=A0,er.isWeakMap=Bm,er.isWeakSet=M0,er.join=pt,er.kebabCase=i1,er.last=gt,er.lastIndexOf=Dt,er.lowerCase=o1,er.lowerFirst=ef,er.lt=Um,er.lte=k0,er.max=X5,er.maxBy=Z5,er.mean=K5,er.meanBy=J5,er.min=$5,er.minBy=Q5,er.stubArray=h1,er.stubFalse=p1,er.stubObject=O5,er.stubString=N5,er.stubTrue=B5,er.multiply=q5,er.nth=Bt,er.noConflict=E5,er.noop=f1,er.now=Xa,er.pad=Dd,er.padEnd=og,er.padStart=Lv,er.parseInt=sg,er.random=ng,er.reduce=mn,er.reduceRight=gn,er.repeat=a5,er.replace=i5,er.result=Qm,er.round=eM,er.runInContext=tn,er.sample=$n,er.size=fa,er.snakeCase=o5,er.some=Aa,er.sortedIndex=nn,er.sortedIndexBy=en,er.sortedIndexOf=Jr,er.sortedLastIndex=Yr,er.sortedLastIndexBy=kn,er.sortedLastIndexOf=In,er.startCase=l5,er.startsWith=u5,er.subtract=tM,er.sum=rM,er.sumBy=nM,er.template=c5,er.times=U5,er.toFinite=bu,er.toInteger=La,er.toLength=Gu,er.toLower=f5,er.toNumber=ju,er.toSafeInteger=S0,er.toString=Hi,er.toUpper=h5,er.trim=p5,er.trimEnd=v5,er.trimStart=d5,er.truncate=m5,er.unescape=g5,er.uniqueId=H5,er.upperCase=y5,er.upperFirst=s1,er.each=It,er.eachRight=Gt,er.first=_e,c1(er,function(){var oe={};return Pi(er,function(me,Ue){Li.call(er.prototype,Ue)||(oe[Ue]=me)}),oe}(),{chain:!1}),er.VERSION=d,Bo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(oe){er[oe].placeholder=er}),Bo(["drop","take"],function(oe,me){li.prototype[oe]=function(Ue){Ue=Ue===e?1:Za(La(Ue),0);var vt=this.__filtered__&&!me?new li(this):this.clone();return vt.__filtered__?vt.__takeCount__=ui(Ue,vt.__takeCount__):vt.__views__.push({size:ui(Ue,U),type:oe+(vt.__dir__<0?"Right":"")}),vt},li.prototype[oe+"Right"]=function(Ue){return this.reverse()[oe](Ue).reverse()}}),Bo(["filter","map","takeWhile"],function(oe,me){var Ue=me+1,vt=Ue==C||Ue==E;li.prototype[oe]=function(Ht){var or=this.clone();return or.__iteratees__.push({iteratee:Na(Ht,3),type:Ue}),or.__filtered__=or.__filtered__||vt,or}}),Bo(["head","last"],function(oe,me){var Ue="take"+(me?"Right":"");li.prototype[oe]=function(){return this[Ue](1).value()[0]}}),Bo(["initial","tail"],function(oe,me){var Ue="drop"+(me?"":"Right");li.prototype[oe]=function(){return this.__filtered__?new li(this):this[Ue](1)}}),li.prototype.compact=function(){return this.filter(Wu)},li.prototype.find=function(oe){return this.filter(oe).head()},li.prototype.findLast=function(oe){return this.reverse().find(oe)},li.prototype.invokeMap=fi(function(oe,me){return typeof oe=="function"?new li(this):this.map(function(Ue){return xs(Ue,oe,me)})}),li.prototype.reject=function(oe){return this.filter(zi(Na(oe)))},li.prototype.slice=function(oe,me){oe=La(oe);var Ue=this;return Ue.__filtered__&&(oe>0||me<0)?new li(Ue):(oe<0?Ue=Ue.takeRight(-oe):oe&&(Ue=Ue.drop(oe)),me!==e&&(me=La(me),Ue=me<0?Ue.dropRight(-me):Ue.take(me-oe)),Ue)},li.prototype.takeRightWhile=function(oe){return this.reverse().takeWhile(oe).reverse()},li.prototype.toArray=function(){return this.take(U)},Pi(li.prototype,function(oe,me){var Ue=/^(?:filter|find|map|reject)|While$/.test(me),vt=/^(?:head|last)$/.test(me),Ht=er[vt?"take"+(me=="last"?"Right":""):me],or=vt||/^find/.test(me);!Ht||(er.prototype[me]=function(){var Dr=this.__wrapped__,jr=vt?[1]:arguments,sn=Dr instanceof li,Yn=jr[0],Kn=sn||Ka(Dr),ta=function(Ei){var Fi=Ht.apply(er,zl([Ei],jr));return vt&&Ta?Fi[0]:Fi};Kn&&Ue&&typeof Yn=="function"&&Yn.length!=1&&(sn=Kn=!1);var Ta=this.__chain__,Ha=!!this.__actions__.length,ri=or&&!Ta,wi=sn&&!Ha;if(!or&&Kn){Dr=wi?Dr:new li(this);var ni=oe.apply(Dr,jr);return ni.__actions__.push({func:Ns,args:[ta],thisArg:e}),new Si(ni,Ta)}return ri&&wi?oe.apply(this,jr):(ni=this.thru(ta),ri?vt?ni.value()[0]:ni.value():ni)})}),Bo(["pop","push","shift","sort","splice","unshift"],function(oe){var me=Uo[oe],Ue=/^(?:push|sort|unshift)$/.test(oe)?"tap":"thru",vt=/^(?:pop|shift)$/.test(oe);er.prototype[oe]=function(){var Ht=arguments;if(vt&&!this.__chain__){var or=this.value();return me.apply(Ka(or)?or:[],Ht)}return this[Ue](function(Dr){return me.apply(Ka(Dr)?Dr:[],Ht)})}}),Pi(li.prototype,function(oe,me){var Ue=er[me];if(Ue){var vt=Ue.name+"";Li.call(wo,vt)||(wo[vt]=[]),wo[vt].push({name:me,func:Ue})}}),wo[dp(e,p).name]=[{name:"wrapper",func:e}],li.prototype.clone=hu,li.prototype.reverse=pf,li.prototype.value=Dc,er.prototype.at=Pf,er.prototype.chain=Rf,er.prototype.commit=Yi,er.prototype.next=yu,er.prototype.plant=_,er.prototype.reverse=F,er.prototype.toJSON=er.prototype.valueOf=er.prototype.value=X,er.prototype.first=er.prototype.head,Sl&&(er.prototype[Sl]=xv),er},tc=up();Cn?((Cn.exports=tc)._=tc,Mn._=tc):hr._=tc}).call(Fo)})(xb,xb.exports);var e5={},t5={};(function(A){function D(y){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},D(y)}Object.defineProperty(A,"__esModule",{value:!0}),A.default=b;var e=a(Nn.exports),d=S(nA.exports);function S(y){return y&&y.__esModule?y:{default:y}}function r(y){if(typeof WeakMap!="function")return null;var x=new WeakMap,w=new WeakMap;return(r=function(T){return T?w:x})(y)}function a(y,x){if(!x&&y&&y.__esModule)return y;if(y===null||D(y)!=="object"&&typeof y!="function")return{default:y};var w=r(x);if(w&&w.has(y))return w.get(y);var g={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in y)if(M!=="default"&&Object.prototype.hasOwnProperty.call(y,M)){var P=T?Object.getOwnPropertyDescriptor(y,M):null;P&&(P.get||P.set)?Object.defineProperty(g,M,P):g[M]=y[M]}return g.default=y,w&&w.set(y,g),g}function u(y,x){if(!(y instanceof x))throw new TypeError("Cannot call a class as a function")}function c(y,x){for(var w=0;w<x.length;w++){var g=x[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}function t(y,x,w){return x&&c(y.prototype,x),w&&c(y,w),Object.defineProperty(y,"prototype",{writable:!1}),y}function f(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(x&&x.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),x&&n(y,x)}function n(y,x){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,T){return g.__proto__=T,g},n(y,x)}function o(y){var x=i();return function(){var g=s(y),T;if(x){var M=s(this).constructor;T=Reflect.construct(g,arguments,M)}else T=g.apply(this,arguments);return l(this,T)}}function l(y,x){if(x&&(D(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(y)}function h(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(y){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},s(y)}var p=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover","WebGlContextLost"],v=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],m=typeof window<"u";function b(y){var x=function(w){f(T,w);var g=o(T);function T(M){var P;return u(this,T),P=g.call(this,M),P.p=Promise.resolve(),P.resizeHandler=null,P.handlers={},P.syncWindowResize=P.syncWindowResize.bind(h(P)),P.syncEventHandlers=P.syncEventHandlers.bind(h(P)),P.attachUpdateEvents=P.attachUpdateEvents.bind(h(P)),P.getRef=P.getRef.bind(h(P)),P.handleUpdate=P.handleUpdate.bind(h(P)),P.figureCallback=P.figureCallback.bind(h(P)),P.updatePlotly=P.updatePlotly.bind(h(P)),P}return t(T,[{key:"updatePlotly",value:function(P,L,I){var C=this;this.p=this.p.then(function(){if(!C.unmounting){if(!C.el)throw new Error("Missing element reference");return y.react(C.el,{data:C.props.data,layout:C.props.layout,config:C.props.config,frames:C.props.frames})}}).then(function(){C.unmounting||(C.syncWindowResize(P),C.syncEventHandlers(),C.figureCallback(L),I&&C.attachUpdateEvents())}).catch(function(k){C.props.onError&&C.props.onError(k)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(P){this.unmounting=!1;var L=P.frames&&P.frames.length?P.frames.length:0,I=this.props.frames&&this.props.frames.length?this.props.frames.length:0,C=!(P.layout===this.props.layout&&P.data===this.props.data&&P.config===this.props.config&&I===L),k=P.revision!==void 0,E=P.revision!==this.props.revision;!C&&(!k||k&&!E)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&m&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),y.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var P=this;!this.el||!this.el.removeListener||v.forEach(function(L){P.el.on(L,P.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var P=this;!this.el||!this.el.removeListener||v.forEach(function(L){P.el.removeListener(L,P.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(P){if(typeof P=="function"){var L=this.el,I=L.data,C=L.layout,k=this.el._transitionData?this.el._transitionData._frames:null,E={data:I,layout:C,frames:k};P(E,this.el)}}},{key:"syncWindowResize",value:function(P){var L=this;!m||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return y.Plots.resize(L.el)},window.addEventListener("resize",this.resizeHandler),P&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(P){this.el=P,this.props.debug&&m&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var P=this;p.forEach(function(L){var I=P.props["on"+L],C=P.handlers[L],k=Boolean(C);I&&!k?P.addEventHandler(L,I):!I&&k?P.removeEventHandler(L):I&&k&&I!==C&&(P.removeEventHandler(L),P.addEventHandler(L,I))})}},{key:"addEventHandler",value:function(P,L){this.handlers[P]=L,this.el.on(this.getPlotlyEventName(P),this.handlers[P])}},{key:"removeEventHandler",value:function(P){this.el.removeListener(this.getPlotlyEventName(P),this.handlers[P]),delete this.handlers[P]}},{key:"getPlotlyEventName",value:function(P){return"plotly_"+P.toLowerCase()}},{key:"render",value:function(){return e.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),T}(e.Component);return x.propTypes={data:d.default.arrayOf(d.default.object),config:d.default.object,layout:d.default.object,frames:d.default.arrayOf(d.default.object),revision:d.default.number,onInitialized:d.default.func,onPurge:d.default.func,onError:d.default.func,onUpdate:d.default.func,debug:d.default.bool,style:d.default.object,className:d.default.string,useResizeHandler:d.default.bool,divId:d.default.string},p.forEach(function(w){x.propTypes["on"+w]=d.default.func}),x.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},x}})(t5);function Sg(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var r5={exports:{}};(function(A,D){(function(e){A.exports=e()})(function(){return function(){function e(d,S,r){function a(t,f){if(!S[t]){if(!d[t]){var n=typeof Sg=="function"&&Sg;if(!f&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var l=S[t]={exports:{}};d[t][0].call(l.exports,function(h){var i=d[t][1][h];return a(i||h)},l,l.exports,e,d,S,r)}return S[t].exports}for(var u=typeof Sg=="function"&&Sg,c=0;c<r.length;c++)a(r[c]);return a}return e}()({1:[function(e,d,S){var r=e("../src/lib"),a={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var u in a){var c=u.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");r.addStyleRule(c,a[u])}},{"../src/lib":778}],2:[function(e,d,S){d.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1365}],3:[function(e,d,S){d.exports=e("../src/traces/bar")},{"../src/traces/bar":929}],4:[function(e,d,S){d.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":942}],5:[function(e,d,S){d.exports=e("../src/traces/box")},{"../src/traces/box":952}],6:[function(e,d,S){d.exports=e("../src/components/calendars")},{"../src/components/calendars":641}],7:[function(e,d,S){d.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":961}],8:[function(e,d,S){d.exports=e("../src/traces/carpet")},{"../src/traces/carpet":980}],9:[function(e,d,S){d.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":994}],10:[function(e,d,S){d.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1001}],11:[function(e,d,S){d.exports=e("../src/traces/cone")},{"../src/traces/cone":1007}],12:[function(e,d,S){d.exports=e("../src/traces/contour")},{"../src/traces/contour":1022}],13:[function(e,d,S){d.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1033}],14:[function(e,d,S){d.exports=e("../src/core")},{"../src/core":755}],15:[function(e,d,S){d.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1041}],16:[function(e,d,S){d.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1366}],17:[function(e,d,S){d.exports=e("../src/traces/funnel")},{"../src/traces/funnel":1051}],18:[function(e,d,S){d.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":1060}],19:[function(e,d,S){d.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1367}],20:[function(e,d,S){d.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":1073}],21:[function(e,d,S){d.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1083}],22:[function(e,d,S){d.exports=e("../src/traces/histogram")},{"../src/traces/histogram":1095}],23:[function(e,d,S){d.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":1101}],24:[function(e,d,S){d.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1105}],25:[function(e,d,S){d.exports=e("../src/traces/image")},{"../src/traces/image":1113}],26:[function(e,d,S){var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar")]),r.register([e("./aggregate"),e("./filter"),e("./groupby"),e("./sort")]),r.register([e("./calendars")]),d.exports=r},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(e,d,S){d.exports=e("../src/traces/indicator")},{"../src/traces/indicator":1121}],28:[function(e,d,S){d.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":1127}],29:[function(e,d,S){d.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":1132}],30:[function(e,d,S){d.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":1137}],31:[function(e,d,S){d.exports=e("../src/traces/parcats")},{"../src/traces/parcats":1146}],32:[function(e,d,S){d.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":1156}],33:[function(e,d,S){d.exports=e("../src/traces/pie")},{"../src/traces/pie":1167}],34:[function(e,d,S){d.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":1176}],35:[function(e,d,S){d.exports=e("../src/traces/sankey")},{"../src/traces/sankey":1182}],36:[function(e,d,S){d.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":1220}],37:[function(e,d,S){d.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1227}],38:[function(e,d,S){d.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":1235}],39:[function(e,d,S){d.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":1248}],40:[function(e,d,S){d.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1258}],41:[function(e,d,S){d.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1266}],42:[function(e,d,S){d.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1273}],43:[function(e,d,S){d.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1281}],44:[function(e,d,S){d.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1369}],45:[function(e,d,S){d.exports=e("../src/traces/splom")},{"../src/traces/splom":1290}],46:[function(e,d,S){d.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1298}],47:[function(e,d,S){d.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1306}],48:[function(e,d,S){d.exports=e("../src/traces/surface")},{"../src/traces/surface":1315}],49:[function(e,d,S){d.exports=e("../src/traces/table")},{"../src/traces/table":1323}],50:[function(e,d,S){d.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1332}],51:[function(e,d,S){d.exports=e("../src/traces/violin")},{"../src/traces/violin":1344}],52:[function(e,d,S){d.exports=e("../src/traces/volume")},{"../src/traces/volume":1352}],53:[function(e,d,S){d.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1360}],54:[function(e,d,S){d.exports=n;var r=e("turntable-camera-controller"),a=e("orbit-camera-controller"),u=e("matrix-camera-controller");function c(o,l){this._controllerNames=Object.keys(o),this._controllerList=this._controllerNames.map(function(h){return o[h]}),this._mode=l,this._active=o[l],this._active||(this._mode="turntable",this._active=o.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=c.prototype,f=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];f.forEach(function(o){for(var l=o[0],h=[],i=0;i<o[1];++i)h.push("a"+i);var s="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+o[0]+"("+h.join()+")}";t[l]=Function.apply(null,h.concat(s))}),t.recalcMatrix=function(o){this._active.recalcMatrix(o)},t.getDistance=function(o){return this._active.getDistance(o)},t.getDistanceLimits=function(o){return this._active.getDistanceLimits(o)},t.lastT=function(){return this._active.lastT()},t.setMode=function(o){if(o!==this._mode){var l=this._controllerNames.indexOf(o);if(!(l<0)){var h=this._active,i=this._controllerList[l],s=Math.max(h.lastT(),i.lastT());h.recalcMatrix(s),i.setMatrix(s,h.computedMatrix),this._active=i,this._mode=o,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode};function n(o){o=o||{};var l=o.eye||[0,0,1],h=o.center||[0,0,0],i=o.up||[0,1,0],s=o.distanceLimits||[0,1/0],p=o.mode||"turntable",v=r(),m=a(),b=u();return v.setDistanceLimits(s[0],s[1]),v.lookAt(0,l,h,i),m.setDistanceLimits(s[0],s[1]),m.lookAt(0,l,h,i),b.setDistanceLimits(s[0],s[1]),b.lookAt(0,l,h,i),new c({turntable:v,orbit:m,matrix:b},p)}},{"matrix-camera-controller":480,"orbit-camera-controller":501,"turntable-camera-controller":581}],55:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3,null)})(this,function(r,a,u,c,t){t=t&&t.hasOwnProperty("default")?t.default:t;function f(xe){return xe.target.depth}function n(xe){return xe.depth}function o(xe,ke){return ke-1-xe.height}function l(xe,ke){return xe.sourceLinks.length?xe.depth:ke-1}function h(xe){return xe.targetLinks.length?xe.depth:xe.sourceLinks.length?a.min(xe.sourceLinks,f)-1:0}function i(xe){return function(){return xe}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe};function p(xe,ke){return m(xe.source,ke.source)||xe.index-ke.index}function v(xe,ke){return m(xe.target,ke.target)||xe.index-ke.index}function m(xe,ke){return xe.partOfCycle===ke.partOfCycle?xe.y0-ke.y0:xe.circularLinkType==="top"||ke.circularLinkType==="bottom"?-1:1}function b(xe){return xe.value}function y(xe){return(xe.y0+xe.y1)/2}function x(xe){return y(xe.source)}function w(xe){return y(xe.target)}function g(xe){return xe.index}function T(xe){return xe.nodes}function M(xe){return xe.links}function P(xe,ke){var Re=xe.get(ke);if(!Re)throw new Error("missing: "+ke);return Re}function L(xe,ke){return ke(xe)}var I=25,C=10,k=.3;function E(){var xe=0,ke=0,Re=1,Ke=1,ze=24,Je,qe=g,Ee=l,Ae=T,Be=M,$e=32,xt=2,bt,Ne=null;function st(){var At={nodes:Ae.apply(null,arguments),links:Be.apply(null,arguments)};_t(At),R(At,qe,Ne),Ot(At),jt(At),O(At,qe),Zt(At,$e,qe),Mt(At);for(var ft=4,ot=0;ot<ft;ot++)ce(At,Ke,qe),pe(At,Ke,qe),ie(At,ke,Ke,qe),ce(At,Ke,qe),pe(At,Ke,qe);return be(At,ke,Ke),B(At,xt,Ke,qe),At}st.nodeId=function(At){return arguments.length?(qe=typeof At=="function"?At:i(At),st):qe},st.nodeAlign=function(At){return arguments.length?(Ee=typeof At=="function"?At:i(At),st):Ee},st.nodeWidth=function(At){return arguments.length?(ze=+At,st):ze},st.nodePadding=function(At){return arguments.length?(Je=+At,st):Je},st.nodes=function(At){return arguments.length?(Ae=typeof At=="function"?At:i(At),st):Ae},st.links=function(At){return arguments.length?(Be=typeof At=="function"?At:i(At),st):Be},st.size=function(At){return arguments.length?(xe=ke=0,Re=+At[0],Ke=+At[1],st):[Re-xe,Ke-ke]},st.extent=function(At){return arguments.length?(xe=+At[0][0],Re=+At[1][0],ke=+At[0][1],Ke=+At[1][1],st):[[xe,ke],[Re,Ke]]},st.iterations=function(At){return arguments.length?($e=+At,st):$e},st.circularLinkGap=function(At){return arguments.length?(xt=+At,st):xt},st.nodePaddingRatio=function(At){return arguments.length?(bt=+At,st):bt},st.sortNodes=function(At){return arguments.length?(Ne=At,st):Ne},st.update=function(At){return O(At,qe),Mt(At),At.links.forEach(function(ft){ft.circular&&(ft.circularLinkType=ft.y0+ft.y1<Ke?"top":"bottom",ft.source.circularLinkType=ft.circularLinkType,ft.target.circularLinkType=ft.circularLinkType)}),ce(At,Ke,qe,!1),pe(At,Ke,qe),B(At,xt,Ke,qe),At};function _t(At){At.nodes.forEach(function(ot,Te){ot.index=Te,ot.sourceLinks=[],ot.targetLinks=[]});var ft=u.map(At.nodes,qe);return At.links.forEach(function(ot,Te){ot.index=Te;var Le=ot.source,Ve=ot.target;(typeof Le>"u"?"undefined":s(Le))!=="object"&&(Le=ot.source=P(ft,Le)),(typeof Ve>"u"?"undefined":s(Ve))!=="object"&&(Ve=ot.target=P(ft,Ve)),Le.sourceLinks.push(ot),Ve.targetLinks.push(ot)}),At}function Ot(At){At.nodes.forEach(function(ft){ft.partOfCycle=!1,ft.value=Math.max(a.sum(ft.sourceLinks,b),a.sum(ft.targetLinks,b)),ft.sourceLinks.forEach(function(ot){ot.circular&&(ft.partOfCycle=!0,ft.circularLinkType=ot.circularLinkType)}),ft.targetLinks.forEach(function(ot){ot.circular&&(ft.partOfCycle=!0,ft.circularLinkType=ot.circularLinkType)})})}function Wt(At){var ft=0,ot=0,Te=0,Le=0,Ve=a.max(At.nodes,function(Qe){return Qe.column});return At.links.forEach(function(Qe){Qe.circular&&(Qe.circularLinkType=="top"?ft=ft+Qe.width:ot=ot+Qe.width,Qe.target.column==0&&(Le=Le+Qe.width),Qe.source.column==Ve&&(Te=Te+Qe.width))}),ft=ft>0?ft+I+C:ft,ot=ot>0?ot+I+C:ot,Te=Te>0?Te+I+C:Te,Le=Le>0?Le+I+C:Le,{top:ft,bottom:ot,left:Le,right:Te}}function Et(At,ft){var ot=a.max(At.nodes,function(He){return He.column}),Te=Re-xe,Le=Ke-ke,Ve=Te+ft.right+ft.left,Qe=Le+ft.top+ft.bottom,Me=Te/Ve,Ie=Le/Qe;return xe=xe*Me+ft.left,Re=ft.right==0?Re:Re*Me,ke=ke*Ie+ft.top,Ke=Ke*Ie,At.nodes.forEach(function(He){He.x0=xe+He.column*((Re-xe-ze)/ot),He.x1=He.x0+ze}),Ie}function jt(At){var ft,ot,Te;for(ft=At.nodes,ot=[],Te=0;ft.length;++Te,ft=ot,ot=[])ft.forEach(function(Le){Le.depth=Te,Le.sourceLinks.forEach(function(Ve){ot.indexOf(Ve.target)<0&&!Ve.circular&&ot.push(Ve.target)})});for(ft=At.nodes,ot=[],Te=0;ft.length;++Te,ft=ot,ot=[])ft.forEach(function(Le){Le.height=Te,Le.targetLinks.forEach(function(Ve){ot.indexOf(Ve.source)<0&&!Ve.circular&&ot.push(Ve.source)})});At.nodes.forEach(function(Le){Le.column=Math.floor(Ee.call(null,Le,Te))})}function Zt(At,ft,ot){var Te=u.nest().key(function(He){return He.column}).sortKeys(a.ascending).entries(At.nodes).map(function(He){return He.values});Qe(ot),Ie();for(var Le=1,Ve=ft;Ve>0;--Ve)Me(Le*=.99,ot),Ie();function Qe(He){if(bt){var Ye=1/0;Te.forEach(function(at){var et=Ke*bt/(at.length+1);Ye=et<Ye?et:Ye}),Je=Ye}var ut=a.min(Te,function(at){return(Ke-ke-(at.length-1)*Je)/a.sum(at,b)});ut=ut*k,At.links.forEach(function(at){at.width=at.value*ut});var nt=Wt(At),Ge=Et(At,nt);ut=ut*Ge,At.links.forEach(function(at){at.width=at.value*ut}),Te.forEach(function(at){var et=at.length;at.forEach(function(lt,Ct){lt.depth==Te.length-1&&et==1||lt.depth==0&&et==1?(lt.y0=Ke/2-lt.value*ut,lt.y1=lt.y0+lt.value*ut):lt.partOfCycle?U(lt,He)==0?(lt.y0=Ke/2+Ct,lt.y1=lt.y0+lt.value*ut):lt.circularLinkType=="top"?(lt.y0=ke+Ct,lt.y1=lt.y0+lt.value*ut):(lt.y0=Ke-lt.value*ut-Ct,lt.y1=lt.y0+lt.value*ut):nt.top==0||nt.bottom==0?(lt.y0=(Ke-ke)/et*Ct,lt.y1=lt.y0+lt.value*ut):(lt.y0=(Ke-ke)/2-et/2+Ct,lt.y1=lt.y0+lt.value*ut)})})}function Me(He,Ye){var ut=Te.length;Te.forEach(function(nt){var Ge=nt.length,at=nt[0].depth;nt.forEach(function(et){var lt;if((et.sourceLinks.length||et.targetLinks.length)&&!(et.partOfCycle&&U(et,Ye)>0))if(at==0&&Ge==1)lt=et.y1-et.y0,et.y0=Ke/2-lt/2,et.y1=Ke/2+lt/2;else if(at==ut-1&&Ge==1)lt=et.y1-et.y0,et.y0=Ke/2-lt/2,et.y1=Ke/2+lt/2;else{var Ct=0,Pt=a.mean(et.sourceLinks,w),$t=a.mean(et.targetLinks,x);Pt&&$t?Ct=(Pt+$t)/2:Ct=Pt||$t;var je=(Ct-y(et))*He;et.y0+=je,et.y1+=je}})})}function Ie(){Te.forEach(function(He){var Ye,ut,nt=ke,Ge=He.length,at;for(He.sort(m),at=0;at<Ge;++at)Ye=He[at],ut=nt-Ye.y0,ut>0&&(Ye.y0+=ut,Ye.y1+=ut),nt=Ye.y1+Je;if(ut=nt-Je-Ke,ut>0)for(nt=Ye.y0-=ut,Ye.y1-=ut,at=Ge-2;at>=0;--at)Ye=He[at],ut=Ye.y1+Je-nt,ut>0&&(Ye.y0-=ut,Ye.y1-=ut),nt=Ye.y0})}}function Mt(At){At.nodes.forEach(function(ft){ft.sourceLinks.sort(v),ft.targetLinks.sort(p)}),At.nodes.forEach(function(ft){var ot=ft.y0,Te=ot,Le=ft.y1,Ve=Le;ft.sourceLinks.forEach(function(Qe){Qe.circular?(Qe.y0=Le-Qe.width/2,Le=Le-Qe.width):(Qe.y0=ot+Qe.width/2,ot+=Qe.width)}),ft.targetLinks.forEach(function(Qe){Qe.circular?(Qe.y1=Ve-Qe.width/2,Ve=Ve-Qe.width):(Qe.y1=Te+Qe.width/2,Te+=Qe.width)})})}return st}function R(xe,ke,Re){var Ke=0;if(Re===null){for(var ze=[],Je=0;Je<xe.links.length;Je++){var qe=xe.links[Je],Ee=qe.source.index,Ae=qe.target.index;ze[Ee]||(ze[Ee]=[]),ze[Ae]||(ze[Ae]=[]),ze[Ee].indexOf(Ae)===-1&&ze[Ee].push(Ae)}var Be=t(ze);Be.sort(function(Ne,st){return Ne.length-st.length});var $e={};for(Je=0;Je<Be.length;Je++){var xt=Be[Je],bt=xt.slice(-2);$e[bt[0]]||($e[bt[0]]={}),$e[bt[0]][bt[1]]=!0}xe.links.forEach(function(Ne){var st=Ne.target.index,_t=Ne.source.index;st===_t||$e[_t]&&$e[_t][st]?(Ne.circular=!0,Ne.circularLinkID=Ke,Ke=Ke+1):Ne.circular=!1})}else xe.links.forEach(function(Ne){Ne.source[Re]<Ne.target[Re]?Ne.circular=!1:(Ne.circular=!0,Ne.circularLinkID=Ke,Ke=Ke+1)})}function O(xe,ke){var Re=0,Ke=0;xe.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType||ze.target.circularLinkType?ze.circularLinkType=ze.source.circularLinkType?ze.source.circularLinkType:ze.target.circularLinkType:ze.circularLinkType=Re<Ke?"top":"bottom",ze.circularLinkType=="top"?Re=Re+1:Ke=Ke+1,xe.nodes.forEach(function(Je){(L(Je,ke)==L(ze.source,ke)||L(Je,ke)==L(ze.target,ke))&&(Je.circularLinkType=ze.circularLinkType)}))}),xe.links.forEach(function(ze){ze.circular&&(ze.source.circularLinkType==ze.target.circularLinkType&&(ze.circularLinkType=ze.source.circularLinkType),de(ze,ke)&&(ze.circularLinkType=ze.source.circularLinkType))})}function N(xe){var ke=Math.abs(xe.y1-xe.y0),Re=Math.abs(xe.target.x0-xe.source.x1);return Math.atan(Re/ke)}function G(xe,ke){return xe.source.column<ke.target.column?!1:!(xe.target.column>ke.source.column)}function U(xe,ke){var Re=0;xe.sourceLinks.forEach(function(ze){Re=ze.circular&&!de(ze,ke)?Re+1:Re});var Ke=0;return xe.targetLinks.forEach(function(ze){Ke=ze.circular&&!de(ze,ke)?Ke+1:Ke}),Re+Ke}function Y(xe){var ke=xe.source.sourceLinks,Re=0;ke.forEach(function(Je){Re=Je.circular?Re+1:Re});var Ke=xe.target.targetLinks,ze=0;return Ke.forEach(function(Je){ze=Je.circular?ze+1:ze}),!(Re>1||ze>1)}function z(xe,ke,Re){return xe.sort(V),xe.forEach(function(Ke,ze){var Je=0;if(de(Ke,Re)&&Y(Ke))Ke.circularPathData.verticalBuffer=Je+Ke.width/2;else{var qe=0;for(qe;qe<ze;qe++)if(G(xe[ze],xe[qe])){var Ee=xe[qe].circularPathData.verticalBuffer+xe[qe].width/2+ke;Je=Ee>Je?Ee:Je}Ke.circularPathData.verticalBuffer=Je+Ke.width/2}}),xe}function B(xe,ke,Re,Ke){var ze=5,Je=a.min(xe.links,function(Ae){return Ae.source.y0});xe.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var qe=xe.links.filter(function(Ae){return Ae.circularLinkType=="top"});z(qe,ke,Ke);var Ee=xe.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});z(Ee,ke,Ke),xe.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+C,Ae.circularPathData.leftNodeBuffer=ze,Ae.circularPathData.rightNodeBuffer=ze,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,de(Ae,Ke)&&Y(Ae))Ae.circularPathData.leftSmallArcRadius=C+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=C+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=C+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=C+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+I+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-I-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Be=Ae.source.column,$e=Ae.circularLinkType,xt=xe.links.filter(function(st){return st.source.column==Be&&st.circularLinkType==$e});Ae.circularLinkType=="bottom"?xt.sort(q):xt.sort(Z);var bt=0;xt.forEach(function(st,_t){st.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=C+Ae.width/2+bt,Ae.circularPathData.leftLargeArcRadius=C+Ae.width/2+_t*ke+bt),bt=bt+st.width}),Be=Ae.target.column,xt=xe.links.filter(function(st){return st.target.column==Be&&st.circularLinkType==$e}),Ae.circularLinkType=="bottom"?xt.sort(ne):xt.sort(J),bt=0,xt.forEach(function(st,_t){st.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=C+Ae.width/2+bt,Ae.circularPathData.rightLargeArcRadius=C+Ae.width/2+_t*ke+bt),bt=bt+st.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(Re,Ae.source.y1,Ae.target.y1)+I+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Je-I-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=H(Ae);else{var Ne=c.linkHorizontal().source(function(st){var _t=st.source.x0+(st.source.x1-st.source.x0),Ot=st.y0;return[_t,Ot]}).target(function(st){var _t=st.target.x0,Ot=st.y1;return[_t,Ot]});Ae.path=Ne(Ae)}})}function H(xe){var ke="";return xe.circularLinkType=="top"?ke="M"+xe.circularPathData.sourceX+" "+xe.circularPathData.sourceY+" L"+xe.circularPathData.leftInnerExtent+" "+xe.circularPathData.sourceY+" A"+xe.circularPathData.leftLargeArcRadius+" "+xe.circularPathData.leftSmallArcRadius+" 0 0 0 "+xe.circularPathData.leftFullExtent+" "+(xe.circularPathData.sourceY-xe.circularPathData.leftSmallArcRadius)+" L"+xe.circularPathData.leftFullExtent+" "+xe.circularPathData.verticalLeftInnerExtent+" A"+xe.circularPathData.leftLargeArcRadius+" "+xe.circularPathData.leftLargeArcRadius+" 0 0 0 "+xe.circularPathData.leftInnerExtent+" "+xe.circularPathData.verticalFullExtent+" L"+xe.circularPathData.rightInnerExtent+" "+xe.circularPathData.verticalFullExtent+" A"+xe.circularPathData.rightLargeArcRadius+" "+xe.circularPathData.rightLargeArcRadius+" 0 0 0 "+xe.circularPathData.rightFullExtent+" "+xe.circularPathData.verticalRightInnerExtent+" L"+xe.circularPathData.rightFullExtent+" "+(xe.circularPathData.targetY-xe.circularPathData.rightSmallArcRadius)+" A"+xe.circularPathData.rightLargeArcRadius+" "+xe.circularPathData.rightSmallArcRadius+" 0 0 0 "+xe.circularPathData.rightInnerExtent+" "+xe.circularPathData.targetY+" L"+xe.circularPathData.targetX+" "+xe.circularPathData.targetY:ke="M"+xe.circularPathData.sourceX+" "+xe.circularPathData.sourceY+" L"+xe.circularPathData.leftInnerExtent+" "+xe.circularPathData.sourceY+" A"+xe.circularPathData.leftLargeArcRadius+" "+xe.circularPathData.leftSmallArcRadius+" 0 0 1 "+xe.circularPathData.leftFullExtent+" "+(xe.circularPathData.sourceY+xe.circularPathData.leftSmallArcRadius)+" L"+xe.circularPathData.leftFullExtent+" "+xe.circularPathData.verticalLeftInnerExtent+" A"+xe.circularPathData.leftLargeArcRadius+" "+xe.circularPathData.leftLargeArcRadius+" 0 0 1 "+xe.circularPathData.leftInnerExtent+" "+xe.circularPathData.verticalFullExtent+" L"+xe.circularPathData.rightInnerExtent+" "+xe.circularPathData.verticalFullExtent+" A"+xe.circularPathData.rightLargeArcRadius+" "+xe.circularPathData.rightLargeArcRadius+" 0 0 1 "+xe.circularPathData.rightFullExtent+" "+xe.circularPathData.verticalRightInnerExtent+" L"+xe.circularPathData.rightFullExtent+" "+(xe.circularPathData.targetY+xe.circularPathData.rightSmallArcRadius)+" A"+xe.circularPathData.rightLargeArcRadius+" "+xe.circularPathData.rightSmallArcRadius+" 0 0 1 "+xe.circularPathData.rightInnerExtent+" "+xe.circularPathData.targetY+" L"+xe.circularPathData.targetX+" "+xe.circularPathData.targetY,ke}function V(xe,ke){return ve(xe)==ve(ke)?xe.circularLinkType=="bottom"?q(xe,ke):Z(xe,ke):ve(ke)-ve(xe)}function Z(xe,ke){return xe.y0-ke.y0}function q(xe,ke){return ke.y0-xe.y0}function J(xe,ke){return xe.y1-ke.y1}function ne(xe,ke){return ke.y1-xe.y1}function ve(xe){return xe.target.column-xe.source.column}function $(xe){return xe.target.x0-xe.source.x1}function j(xe,ke){var Re=N(xe),Ke=$(ke)/Math.tan(Re),ze=se(xe)=="up"?xe.y1+Ke:xe.y1-Ke;return ze}function ae(xe,ke){var Re=N(xe),Ke=$(ke)/Math.tan(Re),ze=se(xe)=="up"?xe.y1-Ke:xe.y1+Ke;return ze}function ie(xe,ke,Re,Ke){xe.links.forEach(function(ze){if(!ze.circular&&ze.target.column-ze.source.column>1){var Je=ze.source.column+1,qe=ze.target.column-1,Ee=1,Ae=qe-Je+1;for(Ee=1;Je<=qe;Je++,Ee++)xe.nodes.forEach(function(Be){if(Be.column==Je){var $e=Ee/(Ae+1),xt=Math.pow(1-$e,3),bt=3*$e*Math.pow(1-$e,2),Ne=3*Math.pow($e,2)*(1-$e),st=Math.pow($e,3),_t=xt*ze.y0+bt*ze.y0+Ne*ze.y1+st*ze.y1,Ot=_t-ze.width/2,Wt=_t+ze.width/2,Et;Ot>Be.y0&&Ot<Be.y1?(Et=Be.y1-Ot+10,Et=Be.circularLinkType=="bottom"?Et:-Et,Be=re(Be,Et,ke,Re),xe.nodes.forEach(function(jt){L(jt,Ke)==L(Be,Ke)||jt.column!=Be.column||te(Be,jt)&&re(jt,Et,ke,Re)})):Wt>Be.y0&&Wt<Be.y1?(Et=Wt-Be.y0+10,Be=re(Be,Et,ke,Re),xe.nodes.forEach(function(jt){L(jt,Ke)==L(Be,Ke)||jt.column!=Be.column||jt.y0<Be.y1&&jt.y1>Be.y1&&re(jt,Et,ke,Re)})):Ot<Be.y0&&Wt>Be.y1&&(Et=Wt-Be.y0+10,Be=re(Be,Et,ke,Re),xe.nodes.forEach(function(jt){L(jt,Ke)==L(Be,Ke)||jt.column!=Be.column||jt.y0<Be.y1&&jt.y1>Be.y1&&re(jt,Et,ke,Re)}))}})}})}function te(xe,ke){return xe.y0>ke.y0&&xe.y0<ke.y1||xe.y1>ke.y0&&xe.y1<ke.y1?!0:xe.y0<ke.y0&&xe.y1>ke.y1}function re(xe,ke,Re,Ke){return xe.y0+ke>=Re&&xe.y1+ke<=Ke&&(xe.y0=xe.y0+ke,xe.y1=xe.y1+ke,xe.targetLinks.forEach(function(ze){ze.y1=ze.y1+ke}),xe.sourceLinks.forEach(function(ze){ze.y0=ze.y0+ke})),xe}function ce(xe,ke,Re,Ke){xe.nodes.forEach(function(ze){Ke&&ze.y+(ze.y1-ze.y0)>ke&&(ze.y=ze.y-(ze.y+(ze.y1-ze.y0)-ke));var Je=xe.links.filter(function(Ae){return L(Ae.source,Re)==L(ze,Re)}),qe=Je.length;qe>1&&Je.sort(function(Ae,Be){if(!Ae.circular&&!Be.circular){if(Ae.target.column==Be.target.column)return Ae.y1-Be.y1;if(fe(Ae,Be)){if(Ae.target.column>Be.target.column){var $e=ae(Be,Ae);return Ae.y1-$e}if(Be.target.column>Ae.target.column){var xt=ae(Ae,Be);return xt-Be.y1}}else return Ae.y1-Be.y1}if(Ae.circular&&!Be.circular)return Ae.circularLinkType=="top"?-1:1;if(Be.circular&&!Ae.circular)return Be.circularLinkType=="top"?1:-1;if(Ae.circular&&Be.circular)return Ae.circularLinkType===Be.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Be.target.column?Ae.target.y1-Be.target.y1:Be.target.column-Ae.target.column:Ae.circularLinkType===Be.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Be.target.column?Be.target.y1-Ae.target.y1:Ae.target.column-Be.target.column:Ae.circularLinkType=="top"?-1:1});var Ee=ze.y0;Je.forEach(function(Ae){Ae.y0=Ee+Ae.width/2,Ee=Ee+Ae.width}),Je.forEach(function(Ae,Be){if(Ae.circularLinkType=="bottom"){var $e=Be+1,xt=0;for($e;$e<qe;$e++)xt=xt+Je[$e].width;Ae.y0=ze.y1-xt-Ae.width/2}})})}function pe(xe,ke,Re){xe.nodes.forEach(function(Ke){var ze=xe.links.filter(function(Ee){return L(Ee.target,Re)==L(Ke,Re)}),Je=ze.length;Je>1&&ze.sort(function(Ee,Ae){if(!Ee.circular&&!Ae.circular){if(Ee.source.column==Ae.source.column)return Ee.y0-Ae.y0;if(fe(Ee,Ae)){if(Ae.source.column<Ee.source.column){var Be=j(Ae,Ee);return Ee.y0-Be}if(Ee.source.column<Ae.source.column){var $e=j(Ee,Ae);return $e-Ae.y0}}else return Ee.y0-Ae.y0}if(Ee.circular&&!Ae.circular)return Ee.circularLinkType=="top"?-1:1;if(Ae.circular&&!Ee.circular)return Ae.circularLinkType=="top"?1:-1;if(Ee.circular&&Ae.circular)return Ee.circularLinkType===Ae.circularLinkType&&Ee.circularLinkType=="top"?Ee.source.column===Ae.source.column?Ee.source.y1-Ae.source.y1:Ee.source.column-Ae.source.column:Ee.circularLinkType===Ae.circularLinkType&&Ee.circularLinkType=="bottom"?Ee.source.column===Ae.source.column?Ee.source.y1-Ae.source.y1:Ae.source.column-Ee.source.column:Ee.circularLinkType=="top"?-1:1});var qe=Ke.y0;ze.forEach(function(Ee){Ee.y1=qe+Ee.width/2,qe=qe+Ee.width}),ze.forEach(function(Ee,Ae){if(Ee.circularLinkType=="bottom"){var Be=Ae+1,$e=0;for(Be;Be<Je;Be++)$e=$e+ze[Be].width;Ee.y1=Ke.y1-$e-Ee.width/2}})})}function fe(xe,ke){return se(xe)==se(ke)}function se(xe){return xe.y0-xe.y1>0?"up":"down"}function de(xe,ke){return L(xe.source,ke)==L(xe.target,ke)}function be(xe,ke,Re){var Ke=xe.nodes,ze=xe.links,Je=!1,qe=!1;if(ze.forEach(function(bt){bt.circularLinkType=="top"?Je=!0:bt.circularLinkType=="bottom"&&(qe=!0)}),Je==!1||qe==!1){var Ee=a.min(Ke,function(bt){return bt.y0}),Ae=a.max(Ke,function(bt){return bt.y1}),Be=Ae-Ee,$e=Re-ke,xt=$e/Be;Ke.forEach(function(bt){var Ne=(bt.y1-bt.y0)*xt;bt.y0=(bt.y0-Ee)*xt,bt.y1=bt.y0+Ne}),ze.forEach(function(bt){bt.y0=(bt.y0-Ee)*xt,bt.y1=(bt.y1-Ee)*xt,bt.width=bt.width*xt})}}r.sankeyCircular=E,r.sankeyCenter=h,r.sankeyLeft=n,r.sankeyRight=o,r.sankeyJustify=l,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S,e("d3-array"),e("d3-collection"),e("d3-shape")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3)})(this,function(r,a,u,c){function t(C){return C.target.depth}function f(C){return C.depth}function n(C,k){return k-1-C.height}function o(C,k){return C.sourceLinks.length?C.depth:k-1}function l(C){return C.targetLinks.length?C.depth:C.sourceLinks.length?a.min(C.sourceLinks,t)-1:0}function h(C){return function(){return C}}function i(C,k){return p(C.source,k.source)||C.index-k.index}function s(C,k){return p(C.target,k.target)||C.index-k.index}function p(C,k){return C.y0-k.y0}function v(C){return C.value}function m(C){return(C.y0+C.y1)/2}function b(C){return m(C.source)*C.value}function y(C){return m(C.target)*C.value}function x(C){return C.index}function w(C){return C.nodes}function g(C){return C.links}function T(C,k){var E=C.get(k);if(!E)throw new Error("missing: "+k);return E}var M=function(){var C=0,k=0,E=1,R=1,O=24,N=8,G=x,U=o,Y=w,z=g,B=32,H=2/3;function V(){var $={nodes:Y.apply(null,arguments),links:z.apply(null,arguments)};return Z($),q($),J($),ne($),ve($),$}V.update=function($){return ve($),$},V.nodeId=function($){return arguments.length?(G=typeof $=="function"?$:h($),V):G},V.nodeAlign=function($){return arguments.length?(U=typeof $=="function"?$:h($),V):U},V.nodeWidth=function($){return arguments.length?(O=+$,V):O},V.nodePadding=function($){return arguments.length?(N=+$,V):N},V.nodes=function($){return arguments.length?(Y=typeof $=="function"?$:h($),V):Y},V.links=function($){return arguments.length?(z=typeof $=="function"?$:h($),V):z},V.size=function($){return arguments.length?(C=k=0,E=+$[0],R=+$[1],V):[E-C,R-k]},V.extent=function($){return arguments.length?(C=+$[0][0],E=+$[1][0],k=+$[0][1],R=+$[1][1],V):[[C,k],[E,R]]},V.iterations=function($){return arguments.length?(B=+$,V):B};function Z($){$.nodes.forEach(function(ae,ie){ae.index=ie,ae.sourceLinks=[],ae.targetLinks=[]});var j=u.map($.nodes,G);$.links.forEach(function(ae,ie){ae.index=ie;var te=ae.source,re=ae.target;typeof te!="object"&&(te=ae.source=T(j,te)),typeof re!="object"&&(re=ae.target=T(j,re)),te.sourceLinks.push(ae),re.targetLinks.push(ae)})}function q($){$.nodes.forEach(function(j){j.value=Math.max(a.sum(j.sourceLinks,v),a.sum(j.targetLinks,v))})}function J($){var j,ae,ie;for(j=$.nodes,ae=[],ie=0;j.length;++ie,j=ae,ae=[])j.forEach(function(re){re.depth=ie,re.sourceLinks.forEach(function(ce){ae.indexOf(ce.target)<0&&ae.push(ce.target)})});for(j=$.nodes,ae=[],ie=0;j.length;++ie,j=ae,ae=[])j.forEach(function(re){re.height=ie,re.targetLinks.forEach(function(ce){ae.indexOf(ce.source)<0&&ae.push(ce.source)})});var te=(E-C-O)/(ie-1);$.nodes.forEach(function(re){re.x1=(re.x0=C+Math.max(0,Math.min(ie-1,Math.floor(U.call(null,re,ie))))*te)+O})}function ne($){var j=u.nest().key(function(fe){return fe.x0}).sortKeys(a.ascending).entries($.nodes).map(function(fe){return fe.values});te(),pe();for(var ae=1,ie=B;ie>0;--ie)ce(ae*=.99),pe(),re(ae),pe();function te(){var fe=a.max(j,function(be){return be.length}),se=H*(R-k)/(fe-1);N>se&&(N=se);var de=a.min(j,function(be){return(R-k-(be.length-1)*N)/a.sum(be,v)});j.forEach(function(be){be.forEach(function(xe,ke){xe.y1=(xe.y0=ke)+xe.value*de})}),$.links.forEach(function(be){be.width=be.value*de})}function re(fe){j.forEach(function(se){se.forEach(function(de){if(de.targetLinks.length){var be=(a.sum(de.targetLinks,b)/a.sum(de.targetLinks,v)-m(de))*fe;de.y0+=be,de.y1+=be}})})}function ce(fe){j.slice().reverse().forEach(function(se){se.forEach(function(de){if(de.sourceLinks.length){var be=(a.sum(de.sourceLinks,y)/a.sum(de.sourceLinks,v)-m(de))*fe;de.y0+=be,de.y1+=be}})})}function pe(){j.forEach(function(fe){var se,de,be=k,xe=fe.length,ke;for(fe.sort(p),ke=0;ke<xe;++ke)se=fe[ke],de=be-se.y0,de>0&&(se.y0+=de,se.y1+=de),be=se.y1+N;if(de=be-N-R,de>0)for(be=se.y0-=de,se.y1-=de,ke=xe-2;ke>=0;--ke)se=fe[ke],de=se.y1+N-be,de>0&&(se.y0-=de,se.y1-=de),be=se.y0})}}function ve($){$.nodes.forEach(function(j){j.sourceLinks.sort(s),j.targetLinks.sort(i)}),$.nodes.forEach(function(j){var ae=j.y0,ie=ae;j.sourceLinks.forEach(function(te){te.y0=ae+te.width/2,ae+=te.width}),j.targetLinks.forEach(function(te){te.y1=ie+te.width/2,ie+=te.width})})}return V};function P(C){return[C.source.x1,C.y0]}function L(C){return[C.target.x0,C.y1]}var I=function(){return c.linkHorizontal().source(P).target(L)};r.sankey=M,r.sankeyCenter=l,r.sankeyLeft=f,r.sankeyRight=n,r.sankeyJustify=o,r.sankeyLinkHorizontal=I,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(e,d,S){d.exports=e("./quad")},{"./quad":58}],58:[function(e,d,S){var r=e("binary-search-bounds"),a=e("clamp"),u=e("parse-rect"),c=e("array-bounds"),t=e("pick-by-alias"),f=e("defined"),n=e("flatten-vertex-data"),o=e("is-obj"),l=e("dtype"),h=e("math-log2"),i=1073741824;d.exports=function(v,m){m||(m={}),v=n(v,"float64"),m=t(m,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var b=f(m.maxDepth,255),y=f(m.bounds,c(v,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var x=s(v,y),w=v.length>>>1,g;m.dtype||(m.dtype="array"),typeof m.dtype=="string"?g=new(l(m.dtype))(w):m.dtype&&(g=m.dtype,Array.isArray(g)&&(g.length=w));for(var T=0;T<w;++T)g[T]=T;var M=[],P=[],L=[],I=[];G(0,0,1,g,0,1);for(var C=0,k=0;k<M.length;k++){var E=M[k];if(g.set)g.set(E,C);else for(var R=0,O=E.length;R<O;R++)g[R+C]=E[R];var N=C+M[k].length;I[k]=[C,N],C=N}return g.range=U,g;function G(B,H,V,Z,q,J){if(!Z.length)return null;var ne=M[q]||(M[q]=[]),ve=L[q]||(L[q]=[]),$=P[q]||(P[q]=[]),j=ne.length;if(q++,q>b||J>i){for(var ae=0;ae<Z.length;ae++)ne.push(Z[ae]),ve.push(J),$.push(null,null,null,null);return j}if(ne.push(Z[0]),ve.push(J),Z.length<=1)return $.push(null,null,null,null),j;for(var ie=V*.5,te=B+ie,re=H+ie,ce=[],pe=[],fe=[],se=[],de=1,be=Z.length;de<be;de++){var xe=Z[de],ke=x[xe*2],Re=x[xe*2+1];ke<te?Re<re?ce.push(xe):pe.push(xe):Re<re?fe.push(xe):se.push(xe)}return J<<=2,$.push(G(B,H,ie,ce,q,J),G(B,re,ie,pe,q,J+1),G(te,H,ie,fe,q,J+2),G(te,re,ie,se,q,J+3)),j}function U(){for(var B=[],H=arguments.length;H--;)B[H]=arguments[H];var V;if(o(B[B.length-1])){var Z=B.pop();!B.length&&(Z.x!=null||Z.l!=null||Z.left!=null)&&(B=[Z],V={}),V=t(Z,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else V={};B.length||(B=y);var q=u.apply(void 0,B),J=[Math.min(q.x,q.x+q.width),Math.min(q.y,q.y+q.height),Math.max(q.x,q.x+q.width),Math.max(q.y,q.y+q.height)],ne=J[0],ve=J[1],$=J[2],j=J[3],ae=s([ne,ve,$,j],y),ie=ae[0],te=ae[1],re=ae[2],ce=ae[3],pe=f(V.level,M.length);if(V.d!=null){var fe;typeof V.d=="number"?fe=[V.d,V.d]:V.d.length&&(fe=V.d),pe=Math.min(Math.max(Math.ceil(-h(Math.abs(fe[0])/(y[2]-y[0]))),Math.ceil(-h(Math.abs(fe[1])/(y[3]-y[1])))),pe)}if(pe=Math.min(pe,M.length),V.lod)return Y(ie,te,re,ce,pe);var se=[];de(0,0,1,0,0,1);function de(xe,ke,Re,Ke,ze,Je){if(!(ze===null||Je===null)){var qe=xe+Re,Ee=ke+Re;if(!(ie>qe||te>Ee||re<xe||ce<ke)&&!(Ke>=pe)&&ze!==Je){var Ae=M[Ke];Je===void 0&&(Je=Ae.length);for(var Be=ze;Be<Je;Be++){var $e=Ae[Be],xt=v[$e*2],bt=v[$e*2+1];xt>=ne&&xt<=$&&bt>=ve&&bt<=j&&se.push($e)}var Ne=P[Ke],st=Ne[ze*4+0],_t=Ne[ze*4+1],Ot=Ne[ze*4+2],Wt=Ne[ze*4+3],Et=be(Ne,ze+1),jt=Re*.5,Zt=Ke+1;de(xe,ke,jt,Zt,st,_t||Ot||Wt||Et),de(xe,ke+jt,jt,Zt,_t,Ot||Wt||Et),de(xe+jt,ke,jt,Zt,Ot,Wt||Et),de(xe+jt,ke+jt,jt,Zt,Wt,Et)}}}function be(xe,ke){for(var Re=null,Ke=0;Re===null;)if(Re=xe[ke*4+Ke],Ke++,Ke>xe.length)return null;return Re}return se}function Y(B,H,V,Z,q){for(var J=[],ne=0;ne<q;ne++){var ve=L[ne],$=I[ne][0],j=z(B,H,ne),ae=z(V,Z,ne),ie=r.ge(ve,j),te=r.gt(ve,ae,ie,ve.length-1);J[ne]=[ie+$,te+$]}return J}function z(B,H,V){for(var Z=1,q=.5,J=.5,ne=.5,ve=0;ve<V;ve++)Z<<=2,Z+=B<q?H<J?0:1:H<J?2:3,ne*=.5,q+=B<q?-ne:ne,J+=H<J?-ne:ne;return Z}};function s(p,v){for(var m=v[0],b=v[1],y=v[2],x=v[3],w=1/(y-m),g=1/(x-b),T=new Array(p.length),M=0,P=p.length/2;M<P;M++)T[2*M]=a((p[2*M]-m)*w,0,1),T[2*M+1]=a((p[2*M+1]-b)*g,0,1);return T}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":468,"math-log2":479,"parse-rect":504,"pick-by-alias":511}],59:[function(e,d,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/meta"),a=6378137;function u(o){return r.geomReduce(o,function(l,h){return l+c(h)},0)}S.default=u;function c(o){var l=0,h;switch(o.type){case"Polygon":return t(o.coordinates);case"MultiPolygon":for(h=0;h<o.coordinates.length;h++)l+=t(o.coordinates[h]);return l;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(o){var l=0;if(o&&o.length>0){l+=Math.abs(f(o[0]));for(var h=1;h<o.length;h++)l-=Math.abs(f(o[h]))}return l}function f(o){var l,h,i,s,p,v,m,b=0,y=o.length;if(y>2){for(m=0;m<y;m++)m===y-2?(s=y-2,p=y-1,v=0):m===y-1?(s=y-1,p=0,v=1):(s=m,p=m+1,v=m+2),l=o[s],h=o[p],i=o[v],b+=(n(i[0])-n(l[0]))*Math.sin(n(h[1]));b=b*a*a/2}return b}function n(o){return o*Math.PI/180}},{"@turf/meta":63}],60:[function(e,d,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/meta");function a(u){var c=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(t){c[0]>t[0]&&(c[0]=t[0]),c[1]>t[1]&&(c[1]=t[1]),c[2]<t[0]&&(c[2]=t[0]),c[3]<t[1]&&(c[3]=t[1])}),c}S.default=a},{"@turf/meta":63}],61:[function(e,d,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/meta"),a=e("@turf/helpers");function u(c,t){t===void 0&&(t={});var f=0,n=0,o=0;return r.coordEach(c,function(l){f+=l[0],n+=l[1],o++}),a.point([f/o,n/o],t.properties)}S.default=u},{"@turf/helpers":62,"@turf/meta":63}],62:[function(e,d,S){Object.defineProperty(S,"__esModule",{value:!0}),S.earthRadius=63710088e-1,S.factors={centimeters:S.earthRadius*100,centimetres:S.earthRadius*100,degrees:S.earthRadius/111325,feet:S.earthRadius*3.28084,inches:S.earthRadius*39.37,kilometers:S.earthRadius/1e3,kilometres:S.earthRadius/1e3,meters:S.earthRadius,metres:S.earthRadius,miles:S.earthRadius/1609.344,millimeters:S.earthRadius*1e3,millimetres:S.earthRadius*1e3,nauticalmiles:S.earthRadius/1852,radians:1,yards:S.earthRadius/1.0936},S.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/S.earthRadius,yards:1/1.0936},S.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(Y,z,B){B===void 0&&(B={});var H={type:"Feature"};return(B.id===0||B.id)&&(H.id=B.id),B.bbox&&(H.bbox=B.bbox),H.properties=z||{},H.geometry=Y,H}S.feature=r;function a(Y,z,B){switch(Y){case"Point":return u(z).geometry;case"LineString":return n(z).geometry;case"Polygon":return t(z).geometry;case"MultiPoint":return i(z).geometry;case"MultiLineString":return h(z).geometry;case"MultiPolygon":return s(z).geometry;default:throw new Error(Y+" is invalid")}}S.geometry=a;function u(Y,z,B){B===void 0&&(B={});var H={type:"Point",coordinates:Y};return r(H,z,B)}S.point=u;function c(Y,z,B){return B===void 0&&(B={}),l(Y.map(function(H){return u(H,z)}),B)}S.points=c;function t(Y,z,B){B===void 0&&(B={});for(var H=0,V=Y;H<V.length;H++){var Z=V[H];if(Z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var q=0;q<Z[Z.length-1].length;q++)if(Z[Z.length-1][q]!==Z[0][q])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:Y};return r(J,z,B)}S.polygon=t;function f(Y,z,B){return B===void 0&&(B={}),l(Y.map(function(H){return t(H,z)}),B)}S.polygons=f;function n(Y,z,B){if(B===void 0&&(B={}),Y.length<2)throw new Error("coordinates must be an array of two or more positions");var H={type:"LineString",coordinates:Y};return r(H,z,B)}S.lineString=n;function o(Y,z,B){return B===void 0&&(B={}),l(Y.map(function(H){return n(H,z)}),B)}S.lineStrings=o;function l(Y,z){z===void 0&&(z={});var B={type:"FeatureCollection"};return z.id&&(B.id=z.id),z.bbox&&(B.bbox=z.bbox),B.features=Y,B}S.featureCollection=l;function h(Y,z,B){B===void 0&&(B={});var H={type:"MultiLineString",coordinates:Y};return r(H,z,B)}S.multiLineString=h;function i(Y,z,B){B===void 0&&(B={});var H={type:"MultiPoint",coordinates:Y};return r(H,z,B)}S.multiPoint=i;function s(Y,z,B){B===void 0&&(B={});var H={type:"MultiPolygon",coordinates:Y};return r(H,z,B)}S.multiPolygon=s;function p(Y,z,B){B===void 0&&(B={});var H={type:"GeometryCollection",geometries:Y};return r(H,z,B)}S.geometryCollection=p;function v(Y,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,z||0);return Math.round(Y*B)/B}S.round=v;function m(Y,z){z===void 0&&(z="kilometers");var B=S.factors[z];if(!B)throw new Error(z+" units is invalid");return Y*B}S.radiansToLength=m;function b(Y,z){z===void 0&&(z="kilometers");var B=S.factors[z];if(!B)throw new Error(z+" units is invalid");return Y/B}S.lengthToRadians=b;function y(Y,z){return w(b(Y,z))}S.lengthToDegrees=y;function x(Y){var z=Y%360;return z<0&&(z+=360),z}S.bearingToAzimuth=x;function w(Y){var z=Y%(2*Math.PI);return z*180/Math.PI}S.radiansToDegrees=w;function g(Y){var z=Y%360;return z*Math.PI/180}S.degreesToRadians=g;function T(Y,z,B){if(z===void 0&&(z="kilometers"),B===void 0&&(B="kilometers"),!(Y>=0))throw new Error("length must be a positive number");return m(b(Y,z),B)}S.convertLength=T;function M(Y,z,B){if(z===void 0&&(z="meters"),B===void 0&&(B="kilometers"),!(Y>=0))throw new Error("area must be a positive number");var H=S.areaFactors[z];if(!H)throw new Error("invalid original units");var V=S.areaFactors[B];if(!V)throw new Error("invalid final units");return Y/H*V}S.convertArea=M;function P(Y){return!isNaN(Y)&&Y!==null&&!Array.isArray(Y)&&!/^\s*$/.test(Y)}S.isNumber=P;function L(Y){return!!Y&&Y.constructor===Object}S.isObject=L;function I(Y){if(!Y)throw new Error("bbox is required");if(!Array.isArray(Y))throw new Error("bbox must be an Array");if(Y.length!==4&&Y.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Y.forEach(function(z){if(!P(z))throw new Error("bbox must only contain numbers")})}S.validateBBox=I;function C(Y){if(!Y)throw new Error("id is required");if(["string","number"].indexOf(typeof Y)===-1)throw new Error("id must be a number or a string")}S.validateId=C;function k(){throw new Error("method has been renamed to `radiansToDegrees`")}S.radians2degrees=k;function E(){throw new Error("method has been renamed to `degreesToRadians`")}S.degrees2radians=E;function R(){throw new Error("method has been renamed to `lengthToDegrees`")}S.distanceToDegrees=R;function O(){throw new Error("method has been renamed to `lengthToRadians`")}S.distanceToRadians=O;function N(){throw new Error("method has been renamed to `radiansToLength`")}S.radiansToDistance=N;function G(){throw new Error("method has been renamed to `bearingToAzimuth`")}S.bearingToAngle=G;function U(){throw new Error("method has been renamed to `convertLength`")}S.convertDistance=U},{}],63:[function(e,d,S){Object.defineProperty(S,"__esModule",{value:!0});var r=e("@turf/helpers");function a(w,g,T){if(w!==null)for(var M,P,L,I,C,k,E,R=0,O=0,N,G=w.type,U=G==="FeatureCollection",Y=G==="Feature",z=U?w.features.length:1,B=0;B<z;B++){E=U?w.features[B].geometry:Y?w.geometry:w,N=E?E.type==="GeometryCollection":!1,C=N?E.geometries.length:1;for(var H=0;H<C;H++){var V=0,Z=0;if(I=N?E.geometries[H]:E,I!==null){k=I.coordinates;var q=I.type;switch(R=T&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(g(k,O,B,V,Z)===!1)return!1;O++,V++;break;case"LineString":case"MultiPoint":for(M=0;M<k.length;M++){if(g(k[M],O,B,V,Z)===!1)return!1;O++,q==="MultiPoint"&&V++}q==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(M=0;M<k.length;M++){for(P=0;P<k[M].length-R;P++){if(g(k[M][P],O,B,V,Z)===!1)return!1;O++}q==="MultiLineString"&&V++,q==="Polygon"&&Z++}q==="Polygon"&&V++;break;case"MultiPolygon":for(M=0;M<k.length;M++){for(Z=0,P=0;P<k[M].length;P++){for(L=0;L<k[M][P].length-R;L++){if(g(k[M][P][L],O,B,V,Z)===!1)return!1;O++}Z++}V++}break;case"GeometryCollection":for(M=0;M<I.geometries.length;M++)if(a(I.geometries[M],g,T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(w,g,T,M){var P=T;return a(w,function(L,I,C,k,E){I===0&&T===void 0?P=L:P=g(P,L,I,C,k,E)},M),P}function c(w,g){var T;switch(w.type){case"FeatureCollection":for(T=0;T<w.features.length&&g(w.features[T].properties,T)!==!1;T++);break;case"Feature":g(w.properties,0);break}}function t(w,g,T){var M=T;return c(w,function(P,L){L===0&&T===void 0?M=P:M=g(M,P,L)}),M}function f(w,g){if(w.type==="Feature")g(w,0);else if(w.type==="FeatureCollection")for(var T=0;T<w.features.length&&g(w.features[T],T)!==!1;T++);}function n(w,g,T){var M=T;return f(w,function(P,L){L===0&&T===void 0?M=P:M=g(M,P,L)}),M}function o(w){var g=[];return a(w,function(T){g.push(T)}),g}function l(w,g){var T,M,P,L,I,C,k,E,R,O,N=0,G=w.type==="FeatureCollection",U=w.type==="Feature",Y=G?w.features.length:1;for(T=0;T<Y;T++){for(C=G?w.features[T].geometry:U?w.geometry:w,E=G?w.features[T].properties:U?w.properties:{},R=G?w.features[T].bbox:U?w.bbox:void 0,O=G?w.features[T].id:U?w.id:void 0,k=C?C.type==="GeometryCollection":!1,I=k?C.geometries.length:1,P=0;P<I;P++){if(L=k?C.geometries[P]:C,L===null){if(g(null,N,E,R,O)===!1)return!1;continue}switch(L.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(L,N,E,R,O)===!1)return!1;break}case"GeometryCollection":{for(M=0;M<L.geometries.length;M++)if(g(L.geometries[M],N,E,R,O)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}N++}}function h(w,g,T){var M=T;return l(w,function(P,L,I,C,k){L===0&&T===void 0?M=P:M=g(M,P,L,I,C,k)}),M}function i(w,g){l(w,function(T,M,P,L,I){var C=T===null?null:T.type;switch(C){case null:case"Point":case"LineString":case"Polygon":return g(r.feature(T,P,{bbox:L,id:I}),M,0)===!1?!1:void 0}var k;switch(C){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon";break}for(var E=0;E<T.coordinates.length;E++){var R=T.coordinates[E],O={type:k,coordinates:R};if(g(r.feature(O,P),M,E)===!1)return!1}})}function s(w,g,T){var M=T;return i(w,function(P,L,I){L===0&&I===0&&T===void 0?M=P:M=g(M,P,L,I)}),M}function p(w,g){i(w,function(T,M,P){var L=0;if(!!T.geometry){var I=T.geometry.type;if(!(I==="Point"||I==="MultiPoint")){var C,k=0,E=0,R=0;if(a(T,function(O,N,G,U,Y){if(C===void 0||M>k||U>E||Y>R){C=O,k=M,E=U,R=Y,L=0;return}var z=r.lineString([C,O],T.properties);if(g(z,M,P,Y,L)===!1)return!1;L++,C=O})===!1)return!1}}})}function v(w,g,T){var M=T,P=!1;return p(w,function(L,I,C,k,E){P===!1&&T===void 0?M=L:M=g(M,L,I,C,k,E),P=!0}),M}function m(w,g){if(!w)throw new Error("geojson is required");i(w,function(T,M,P){if(T.geometry!==null){var L=T.geometry.type,I=T.geometry.coordinates;switch(L){case"LineString":if(g(T,M,P,0,0)===!1)return!1;break;case"Polygon":for(var C=0;C<I.length;C++)if(g(r.lineString(I[C],T.properties),M,P,C)===!1)return!1;break}}})}function b(w,g,T){var M=T;return m(w,function(P,L,I,C){L===0&&T===void 0?M=P:M=g(M,P,L,I,C)}),M}function y(w,g){if(g=g||{},!r.isObject(g))throw new Error("options is invalid");var T=g.featureIndex||0,M=g.multiFeatureIndex||0,P=g.geometryIndex||0,L=g.segmentIndex||0,I=g.properties,C;switch(w.type){case"FeatureCollection":T<0&&(T=w.features.length+T),I=I||w.features[T].properties,C=w.features[T].geometry;break;case"Feature":I=I||w.properties,C=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=w;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var k=C.coordinates;switch(C.type){case"Point":case"MultiPoint":return null;case"LineString":return L<0&&(L=k.length+L-1),r.lineString([k[L],k[L+1]],I,g);case"Polygon":return P<0&&(P=k.length+P),L<0&&(L=k[P].length+L-1),r.lineString([k[P][L],k[P][L+1]],I,g);case"MultiLineString":return M<0&&(M=k.length+M),L<0&&(L=k[M].length+L-1),r.lineString([k[M][L],k[M][L+1]],I,g);case"MultiPolygon":return M<0&&(M=k.length+M),P<0&&(P=k[M].length+P),L<0&&(L=k[M][P].length-L-1),r.lineString([k[M][P][L],k[M][P][L+1]],I,g)}throw new Error("geojson is invalid")}function x(w,g){if(g=g||{},!r.isObject(g))throw new Error("options is invalid");var T=g.featureIndex||0,M=g.multiFeatureIndex||0,P=g.geometryIndex||0,L=g.coordIndex||0,I=g.properties,C;switch(w.type){case"FeatureCollection":T<0&&(T=w.features.length+T),I=I||w.features[T].properties,C=w.features[T].geometry;break;case"Feature":I=I||w.properties,C=w.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":C=w;break;default:throw new Error("geojson is invalid")}if(C===null)return null;var k=C.coordinates;switch(C.type){case"Point":return r.point(k,I,g);case"MultiPoint":return M<0&&(M=k.length+M),r.point(k[M],I,g);case"LineString":return L<0&&(L=k.length+L),r.point(k[L],I,g);case"Polygon":return P<0&&(P=k.length+P),L<0&&(L=k[P].length+L),r.point(k[P][L],I,g);case"MultiLineString":return M<0&&(M=k.length+M),L<0&&(L=k[M].length+L),r.point(k[M][L],I,g);case"MultiPolygon":return M<0&&(M=k.length+M),P<0&&(P=k[M].length+P),L<0&&(L=k[M][P].length-L),r.point(k[M][P][L],I,g)}throw new Error("geojson is invalid")}S.coordEach=a,S.coordReduce=u,S.propEach=c,S.propReduce=t,S.featureEach=f,S.featureReduce=n,S.coordAll=o,S.geomEach=l,S.geomReduce=h,S.flattenEach=i,S.flattenReduce=s,S.segmentEach=p,S.segmentReduce=v,S.lineEach=m,S.lineReduce=b,S.findSegment=y,S.findPoint=x},{"@turf/helpers":62}],64:[function(e,d,S){var r=typeof WeakMap>"u"?e("weak-map"):WeakMap,a=e("gl-buffer"),u=e("gl-vao"),c=new r;function t(f){var n=c.get(f),o=n&&(n._triangleBuffer.handle||n._triangleBuffer.buffer);if(!o||!f.isBuffer(o)){var l=a(f,new Float32Array([-1,-1,-1,4,4,-1]));n=u(f,[{buffer:l,type:f.FLOAT,size:2}]),n._triangleBuffer=l,c.set(f,n)}n.bind(),f.drawArrays(f.TRIANGLES,0,3),n.unbind()}d.exports=t},{"gl-buffer":259,"gl-vao":358,"weak-map":602}],65:[function(e,d,S){d.exports=r;function r(a){var u=0,c=0,t=0,f=0;return a.map(function(n){n=n.slice();var o=n[0],l=o.toUpperCase();if(o!=l)switch(n[0]=l,o){case"a":n[6]+=t,n[7]+=f;break;case"v":n[1]+=f;break;case"h":n[1]+=t;break;default:for(var h=1;h<n.length;)n[h++]+=t,n[h++]+=f}switch(l){case"Z":t=u,f=c;break;case"H":t=n[1];break;case"V":f=n[1];break;case"M":t=u=n[1],f=c=n[2];break;default:t=n[n.length-2],f=n[n.length-1]}return n})}},{}],66:[function(e,d,S){var r=e("pad-left");d.exports=a;function a(u,c,t){c=typeof c=="number"?c:1,t=t||": ";var f=u.split(/\r?\n/),n=String(f.length+c-1).length;return f.map(function(o,l){var h=l+c,i=String(h).length,s=r(h,n-i);return s+t+o}).join(`
`)}},{"pad-left":502}],67:[function(e,d,S){d.exports=u;var r=e("robust-orientation");function a(c,t){for(var f=new Array(t+1),n=0;n<c.length;++n)f[n]=c[n];for(var n=0;n<=c.length;++n){for(var o=c.length;o<=t;++o){for(var l=new Array(t),h=0;h<t;++h)l[h]=Math.pow(o+1-n,h);f[o]=l}var i=r.apply(void 0,f);if(i)return!0}return!1}function u(c){var t=c.length;if(t===0)return[];if(t===1)return[0];for(var f=c[0].length,n=[c[0]],o=[0],l=1;l<t;++l){if(n.push(c[l]),!a(n,f)){n.pop();continue}if(o.push(l),o.length===f+1)return o}return o}},{"robust-orientation":548}],68:[function(e,d,S){d.exports=u;var r=e("delaunay-triangulate"),a=e("circumradius");function u(c,t){return r(t).filter(function(f){for(var n=new Array(f.length),o=0;o<f.length;++o)n[o]=t[f[o]];return a(n)*c<1})}},{circumradius:119,"delaunay-triangulate":171}],69:[function(e,d,S){d.exports=u;var r=e("alpha-complex"),a=e("simplicial-complex-boundary");function u(c,t){return a(r(c,t))}},{"alpha-complex":68,"simplicial-complex-boundary":555}],70:[function(e,d,S){d.exports=r;function r(a,u){if(!a||a.length==null)throw Error("Argument should be an array");u==null?u=1:u=Math.floor(u);for(var c=Array(u*2),t=0;t<u;t++){for(var f=-1/0,n=1/0,o=t,l=a.length;o<l;o+=u)a[o]>f&&(f=a[o]),a[o]<n&&(n=a[o]);c[t]=n,c[u+t]=f}return c}},{}],71:[function(e,d,S){var r=e("array-bounds");d.exports=a;function a(u,c,t){if(!u||u.length==null)throw Error("Argument should be an array");c==null&&(c=1),t==null&&(t=r(u,c));for(var f=0;f<c;f++){var n=t[c+f],o=t[f],l=f,h=u.length;if(n===1/0&&o===-1/0)for(l=f;l<h;l+=c)u[l]=u[l]===n?1:u[l]===o?0:.5;else if(n===1/0)for(l=f;l<h;l+=c)u[l]=u[l]===n?1:0;else if(o===-1/0)for(l=f;l<h;l+=c)u[l]=u[l]===o?0:1;else{var i=n-o;for(l=f;l<h;l+=c)isNaN(u[l])||(u[l]=i===0?.5:(u[l]-o)/i)}}return u}},{"array-bounds":70}],72:[function(e,d,S){d.exports=function(a,u){var c=typeof a=="number",t=typeof u=="number";c&&!t?(u=a,a=0):!c&&!t&&(a=0,u=0),a=a|0,u=u|0;var f=u-a;if(f<0)throw new Error("array length must be positive");for(var n=new Array(f),o=0,l=a;o<f;o++,l++)n[o]=l;return n}},{}],73:[function(e,d,S){(function(r){(function(){var a=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function u(E,R){if(E===R)return 0;for(var O=E.length,N=R.length,G=0,U=Math.min(O,N);G<U;++G)if(E[G]!==R[G]){O=E[G],N=R[G];break}return O<N?-1:N<O?1:0}function c(E){return r.Buffer&&typeof r.Buffer.isBuffer=="function"?r.Buffer.isBuffer(E):!!(E!=null&&E._isBuffer)}var t=e("util/"),f=Object.prototype.hasOwnProperty,n=Array.prototype.slice,o=function(){return function(){}.name==="foo"}();function l(E){return Object.prototype.toString.call(E)}function h(E){return c(E)||typeof r.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(E):E?!!(E instanceof DataView||E.buffer&&E.buffer instanceof ArrayBuffer):!1}var i=d.exports=x,s=/\s*function\s+([^\(\s]*)\s*/;function p(E){if(!!t.isFunction(E)){if(o)return E.name;var R=E.toString(),O=R.match(s);return O&&O[1]}}i.AssertionError=function(R){this.name="AssertionError",this.actual=R.actual,this.expected=R.expected,this.operator=R.operator,R.message?(this.message=R.message,this.generatedMessage=!1):(this.message=b(this),this.generatedMessage=!0);var O=R.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var N=new Error;if(N.stack){var G=N.stack,U=p(O),Y=G.indexOf(`
`+U);if(Y>=0){var z=G.indexOf(`
`,Y+1);G=G.substring(z+1)}this.stack=G}}},t.inherits(i.AssertionError,Error);function v(E,R){return typeof E=="string"?E.length<R?E:E.slice(0,R):E}function m(E){if(o||!t.isFunction(E))return t.inspect(E);var R=p(E),O=R?": "+R:"";return"[Function"+O+"]"}function b(E){return v(m(E.actual),128)+" "+E.operator+" "+v(m(E.expected),128)}function y(E,R,O,N,G){throw new i.AssertionError({message:O,actual:E,expected:R,operator:N,stackStartFunction:G})}i.fail=y;function x(E,R){E||y(E,!0,R,"==",i.ok)}i.ok=x,i.equal=function(R,O,N){R!=O&&y(R,O,N,"==",i.equal)},i.notEqual=function(R,O,N){R==O&&y(R,O,N,"!=",i.notEqual)},i.deepEqual=function(R,O,N){w(R,O,!1)||y(R,O,N,"deepEqual",i.deepEqual)},i.deepStrictEqual=function(R,O,N){w(R,O,!0)||y(R,O,N,"deepStrictEqual",i.deepStrictEqual)};function w(E,R,O,N){if(E===R)return!0;if(c(E)&&c(R))return u(E,R)===0;if(t.isDate(E)&&t.isDate(R))return E.getTime()===R.getTime();if(t.isRegExp(E)&&t.isRegExp(R))return E.source===R.source&&E.global===R.global&&E.multiline===R.multiline&&E.lastIndex===R.lastIndex&&E.ignoreCase===R.ignoreCase;if((E===null||typeof E!="object")&&(R===null||typeof R!="object"))return O?E===R:E==R;if(h(E)&&h(R)&&l(E)===l(R)&&!(E instanceof Float32Array||E instanceof Float64Array))return u(new Uint8Array(E.buffer),new Uint8Array(R.buffer))===0;if(c(E)!==c(R))return!1;N=N||{actual:[],expected:[]};var G=N.actual.indexOf(E);return G!==-1&&G===N.expected.indexOf(R)?!0:(N.actual.push(E),N.expected.push(R),T(E,R,O,N))}function g(E){return Object.prototype.toString.call(E)=="[object Arguments]"}function T(E,R,O,N){if(E==null||R===null||R===void 0)return!1;if(t.isPrimitive(E)||t.isPrimitive(R))return E===R;if(O&&Object.getPrototypeOf(E)!==Object.getPrototypeOf(R))return!1;var G=g(E),U=g(R);if(G&&!U||!G&&U)return!1;if(G)return E=n.call(E),R=n.call(R),w(E,R,O);var Y=k(E),z=k(R),B,H;if(Y.length!==z.length)return!1;for(Y.sort(),z.sort(),H=Y.length-1;H>=0;H--)if(Y[H]!==z[H])return!1;for(H=Y.length-1;H>=0;H--)if(B=Y[H],!w(E[B],R[B],O,N))return!1;return!0}i.notDeepEqual=function(R,O,N){w(R,O,!1)&&y(R,O,N,"notDeepEqual",i.notDeepEqual)},i.notDeepStrictEqual=M;function M(E,R,O){w(E,R,!0)&&y(E,R,O,"notDeepStrictEqual",M)}i.strictEqual=function(R,O,N){R!==O&&y(R,O,N,"===",i.strictEqual)},i.notStrictEqual=function(R,O,N){R===O&&y(R,O,N,"!==",i.notStrictEqual)};function P(E,R){if(!E||!R)return!1;if(Object.prototype.toString.call(R)=="[object RegExp]")return R.test(E);try{if(E instanceof R)return!0}catch{}return Error.isPrototypeOf(R)?!1:R.call({},E)===!0}function L(E){var R;try{E()}catch(O){R=O}return R}function I(E,R,O,N){var G;if(typeof R!="function")throw new TypeError('"block" argument must be a function');typeof O=="string"&&(N=O,O=null),G=L(R),N=(O&&O.name?" ("+O.name+").":".")+(N?" "+N:"."),E&&!G&&y(G,O,"Missing expected exception"+N);var U=typeof N=="string",Y=!E&&t.isError(G),z=!E&&G&&!O;if((Y&&U&&P(G,O)||z)&&y(G,O,"Got unwanted exception"+N),E&&G&&O&&!P(G,O)||!E&&G)throw G}i.throws=function(E,R,O){I(!0,E,R,O)},i.doesNotThrow=function(E,R,O){I(!1,E,R,O)},i.ifError=function(E){if(E)throw E};function C(E,R){E||y(E,!0,R,"==",C)}i.strict=a(C,i,{equal:i.strictEqual,deepEqual:i.deepStrictEqual,notEqual:i.notStrictEqual,notDeepEqual:i.notDeepStrictEqual}),i.strict.strict=i.strict;var k=Object.keys||function(E){var R=[];for(var O in E)f.call(E,O)&&R.push(O);return R}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":499,"util/":76}],74:[function(e,d,S){typeof Object.create=="function"?d.exports=function(a,u){a.super_=u,a.prototype=Object.create(u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:d.exports=function(a,u){a.super_=u;var c=function(){};c.prototype=u.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],75:[function(e,d,S){d.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],76:[function(e,d,S){(function(r,a){(function(){var u=/%[sdj%]/g;S.format=function(z){if(!T(z)){for(var B=[],H=0;H<arguments.length;H++)B.push(f(arguments[H]));return B.join(" ")}for(var H=1,V=arguments,Z=V.length,q=String(z).replace(u,function(ne){if(ne==="%%")return"%";if(H>=Z)return ne;switch(ne){case"%s":return String(V[H++]);case"%d":return Number(V[H++]);case"%j":try{return JSON.stringify(V[H++])}catch{return"[Circular]"}default:return ne}}),J=V[H];H<Z;J=V[++H])x(J)||!I(J)?q+=" "+J:q+=" "+f(J);return q},S.deprecate=function(z,B){if(P(a.process))return function(){return S.deprecate(z,B).apply(this,arguments)};if(r.noDeprecation===!0)return z;var H=!1;function V(){if(!H){if(r.throwDeprecation)throw new Error(B);r.traceDeprecation?console.trace(B):console.error(B),H=!0}return z.apply(this,arguments)}return V};var c={},t;S.debuglog=function(z){if(P(t)&&(t=r.env.NODE_DEBUG||""),z=z.toUpperCase(),!c[z])if(new RegExp("\\b"+z+"\\b","i").test(t)){var B=r.pid;c[z]=function(){var H=S.format.apply(S,arguments);console.error("%s %d: %s",z,B,H)}}else c[z]=function(){};return c[z]};function f(z,B){var H={seen:[],stylize:o};return arguments.length>=3&&(H.depth=arguments[2]),arguments.length>=4&&(H.colors=arguments[3]),y(B)?H.showHidden=B:B&&S._extend(H,B),P(H.showHidden)&&(H.showHidden=!1),P(H.depth)&&(H.depth=2),P(H.colors)&&(H.colors=!1),P(H.customInspect)&&(H.customInspect=!0),H.colors&&(H.stylize=n),h(H,z,H.depth)}S.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(z,B){var H=f.styles[B];return H?"\x1B["+f.colors[H][0]+"m"+z+"\x1B["+f.colors[H][1]+"m":z}function o(z,B){return z}function l(z){var B={};return z.forEach(function(H,V){B[H]=!0}),B}function h(z,B,H){if(z.customInspect&&B&&E(B.inspect)&&B.inspect!==S.inspect&&!(B.constructor&&B.constructor.prototype===B)){var V=B.inspect(H,z);return T(V)||(V=h(z,V,H)),V}var Z=i(z,B);if(Z)return Z;var q=Object.keys(B),J=l(q);if(z.showHidden&&(q=Object.getOwnPropertyNames(B)),k(B)&&(q.indexOf("message")>=0||q.indexOf("description")>=0))return s(B);if(q.length===0){if(E(B)){var ne=B.name?": "+B.name:"";return z.stylize("[Function"+ne+"]","special")}if(L(B))return z.stylize(RegExp.prototype.toString.call(B),"regexp");if(C(B))return z.stylize(Date.prototype.toString.call(B),"date");if(k(B))return s(B)}var ve="",$=!1,j=["{","}"];if(b(B)&&($=!0,j=["[","]"]),E(B)){var ae=B.name?": "+B.name:"";ve=" [Function"+ae+"]"}if(L(B)&&(ve=" "+RegExp.prototype.toString.call(B)),C(B)&&(ve=" "+Date.prototype.toUTCString.call(B)),k(B)&&(ve=" "+s(B)),q.length===0&&(!$||B.length==0))return j[0]+ve+j[1];if(H<0)return L(B)?z.stylize(RegExp.prototype.toString.call(B),"regexp"):z.stylize("[Object]","special");z.seen.push(B);var ie;return $?ie=p(z,B,H,J,q):ie=q.map(function(te){return v(z,B,H,J,te,$)}),z.seen.pop(),m(ie,ve,j)}function i(z,B){if(P(B))return z.stylize("undefined","undefined");if(T(B)){var H="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(H,"string")}if(g(B))return z.stylize(""+B,"number");if(y(B))return z.stylize(""+B,"boolean");if(x(B))return z.stylize("null","null")}function s(z){return"["+Error.prototype.toString.call(z)+"]"}function p(z,B,H,V,Z){for(var q=[],J=0,ne=B.length;J<ne;++J)Y(B,String(J))?q.push(v(z,B,H,V,String(J),!0)):q.push("");return Z.forEach(function(ve){ve.match(/^\d+$/)||q.push(v(z,B,H,V,ve,!0))}),q}function v(z,B,H,V,Z,q){var J,ne,ve;if(ve=Object.getOwnPropertyDescriptor(B,Z)||{value:B[Z]},ve.get?ve.set?ne=z.stylize("[Getter/Setter]","special"):ne=z.stylize("[Getter]","special"):ve.set&&(ne=z.stylize("[Setter]","special")),Y(V,Z)||(J="["+Z+"]"),ne||(z.seen.indexOf(ve.value)<0?(x(H)?ne=h(z,ve.value,null):ne=h(z,ve.value,H-1),ne.indexOf(`
`)>-1&&(q?ne=ne.split(`
`).map(function($){return"  "+$}).join(`
`).substr(2):ne=`
`+ne.split(`
`).map(function($){return"   "+$}).join(`
`))):ne=z.stylize("[Circular]","special")),P(J)){if(q&&Z.match(/^\d+$/))return ne;J=JSON.stringify(""+Z),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=z.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=z.stylize(J,"string"))}return J+": "+ne}function m(z,B,H){var V=z.reduce(function(Z,q){return q.indexOf(`
`)>=0,Z+q.replace(/\u001b\[\d\d?m/g,"").length+1},0);return V>60?H[0]+(B===""?"":B+`
 `)+" "+z.join(`,
  `)+" "+H[1]:H[0]+B+" "+z.join(", ")+" "+H[1]}function b(z){return Array.isArray(z)}S.isArray=b;function y(z){return typeof z=="boolean"}S.isBoolean=y;function x(z){return z===null}S.isNull=x;function w(z){return z==null}S.isNullOrUndefined=w;function g(z){return typeof z=="number"}S.isNumber=g;function T(z){return typeof z=="string"}S.isString=T;function M(z){return typeof z=="symbol"}S.isSymbol=M;function P(z){return z===void 0}S.isUndefined=P;function L(z){return I(z)&&O(z)==="[object RegExp]"}S.isRegExp=L;function I(z){return typeof z=="object"&&z!==null}S.isObject=I;function C(z){return I(z)&&O(z)==="[object Date]"}S.isDate=C;function k(z){return I(z)&&(O(z)==="[object Error]"||z instanceof Error)}S.isError=k;function E(z){return typeof z=="function"}S.isFunction=E;function R(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}S.isPrimitive=R,S.isBuffer=e("./support/isBuffer");function O(z){return Object.prototype.toString.call(z)}function N(z){return z<10?"0"+z.toString(10):z.toString(10)}var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(){var z=new Date,B=[N(z.getHours()),N(z.getMinutes()),N(z.getSeconds())].join(":");return[z.getDate(),G[z.getMonth()],B].join(" ")}S.log=function(){console.log("%s - %s",U(),S.format.apply(S,arguments))},S.inherits=e("inherits"),S._extend=function(z,B){if(!B||!I(B))return z;for(var H=Object.keys(B),V=H.length;V--;)z[H[V]]=B[H[V]];return z};function Y(z,B){return Object.prototype.hasOwnProperty.call(z,B)}}).call(this)}).call(this,e("_process"),typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":75,_process:526,inherits:74}],77:[function(e,d,S){d.exports=function(a){return atob(a)}},{}],78:[function(e,d,S){d.exports=u;var r=e("robust-linear-solve");function a(c){for(var t=0,f=0;f<c.length;++f)t+=c[f];return t}function u(c,t){for(var f=t.length,n=new Array(f+1),o=0;o<f;++o){for(var l=new Array(f+1),h=0;h<=f;++h)l[h]=c[h][o];n[o]=l}n[f]=new Array(f+1);for(var o=0;o<=f;++o)n[f][o]=1;for(var i=new Array(f+1),o=0;o<f;++o)i[o]=t[o];i[f]=1;var s=r(n,i),p=a(s[f+1]);p===0&&(p=1);for(var v=new Array(f+1),o=0;o<=f;++o)v[o]=a(s[o])/p;return v}},{"robust-linear-solve":547}],79:[function(e,d,S){S.byteLength=o,S.toByteArray=h,S.fromByteArray=p;for(var r=[],a=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,f=c.length;t<f;++t)r[t]=c[t],a[c.charCodeAt(t)]=t;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function n(v){var m=v.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=v.indexOf("=");b===-1&&(b=m);var y=b===m?0:4-b%4;return[b,y]}function o(v){var m=n(v),b=m[0],y=m[1];return(b+y)*3/4-y}function l(v,m,b){return(m+b)*3/4-b}function h(v){var m,b=n(v),y=b[0],x=b[1],w=new u(l(v,y,x)),g=0,T=x>0?y-4:y,M;for(M=0;M<T;M+=4)m=a[v.charCodeAt(M)]<<18|a[v.charCodeAt(M+1)]<<12|a[v.charCodeAt(M+2)]<<6|a[v.charCodeAt(M+3)],w[g++]=m>>16&255,w[g++]=m>>8&255,w[g++]=m&255;return x===2&&(m=a[v.charCodeAt(M)]<<2|a[v.charCodeAt(M+1)]>>4,w[g++]=m&255),x===1&&(m=a[v.charCodeAt(M)]<<10|a[v.charCodeAt(M+1)]<<4|a[v.charCodeAt(M+2)]>>2,w[g++]=m>>8&255,w[g++]=m&255),w}function i(v){return r[v>>18&63]+r[v>>12&63]+r[v>>6&63]+r[v&63]}function s(v,m,b){for(var y,x=[],w=m;w<b;w+=3)y=(v[w]<<16&16711680)+(v[w+1]<<8&65280)+(v[w+2]&255),x.push(i(y));return x.join("")}function p(v){for(var m,b=v.length,y=b%3,x=[],w=16383,g=0,T=b-y;g<T;g+=w)x.push(s(v,g,g+w>T?T:g+w));return y===1?(m=v[b-1],x.push(r[m>>2]+r[m<<4&63]+"==")):y===2&&(m=(v[b-2]<<8)+v[b-1],x.push(r[m>>10]+r[m>>4&63]+r[m<<2&63]+"=")),x.join("")}},{}],80:[function(e,d,S){var r=e("./lib/rationalize");d.exports=a;function a(u,c){return r(u[0].mul(c[1]).add(c[0].mul(u[1])),u[1].mul(c[1]))}},{"./lib/rationalize":90}],81:[function(e,d,S){d.exports=r;function r(a,u){return a[0].mul(u[1]).cmp(u[0].mul(a[1]))}},{}],82:[function(e,d,S){var r=e("./lib/rationalize");d.exports=a;function a(u,c){return r(u[0].mul(c[1]),u[1].mul(c[0]))}},{"./lib/rationalize":90}],83:[function(e,d,S){var r=e("./is-rat"),a=e("./lib/is-bn"),u=e("./lib/num-to-bn"),c=e("./lib/str-to-bn"),t=e("./lib/rationalize"),f=e("./div");d.exports=n;function n(o,l){if(r(o))return l?f(o,n(l)):[o[0].clone(),o[1].clone()];var h=0,i,s;if(a(o))i=o.clone();else if(typeof o=="string")i=c(o);else{if(o===0)return[u(0),u(1)];if(o===Math.floor(o))i=u(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),h-=256;i=u(o)}}if(r(l))i.mul(l[1]),s=l[0].clone();else if(a(l))s=l.clone();else if(typeof l=="string")s=c(l);else if(!l)s=u(1);else if(l===Math.floor(l))s=u(l);else{for(;l!==Math.floor(l);)l=l*Math.pow(2,256),h+=256;s=u(l)}return h>0?i=i.ushln(h):h<0&&(s=s.ushln(-h)),t(i,s)}},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(e,d,S){var r=e("./lib/is-bn");d.exports=a;function a(u){return Array.isArray(u)&&u.length===2&&r(u[0])&&r(u[1])}},{"./lib/is-bn":88}],85:[function(e,d,S){var r=e("bn.js");d.exports=a;function a(u){return u.cmp(new r(0))}},{"bn.js":99}],86:[function(e,d,S){var r=e("./bn-sign");d.exports=a;function a(u){var c=u.length,t=u.words,f=0;if(c===1)f=t[0];else if(c===2)f=t[0]+t[1]*67108864;else for(var n=0;n<c;n++){var o=t[n];f+=o*Math.pow(67108864,n)}return r(u)*f}},{"./bn-sign":85}],87:[function(e,d,S){var r=e("double-bits"),a=e("bit-twiddle").countTrailingZeros;d.exports=u;function u(c){var t=a(r.lo(c));if(t<32)return t;var f=a(r.hi(c));return f>20?52:f+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(e,d,S){e("bn.js"),d.exports=r;function r(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":99}],89:[function(e,d,S){var r=e("bn.js"),a=e("double-bits");d.exports=u;function u(c){var t=a.exponent(c);return t<52?new r(c):new r(c*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":99,"double-bits":173}],90:[function(e,d,S){var r=e("./num-to-bn"),a=e("./bn-sign");d.exports=u;function u(c,t){var f=a(c),n=a(t);if(f===0)return[r(0),r(1)];if(n===0)return[r(0),r(0)];n<0&&(c=c.neg(),t=t.neg());var o=c.gcd(t);return o.cmpn(1)?[c.div(o),t.div(o)]:[c,t]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(e,d,S){var r=e("bn.js");d.exports=a;function a(u){return new r(u)}},{"bn.js":99}],92:[function(e,d,S){var r=e("./lib/rationalize");d.exports=a;function a(u,c){return r(u[0].mul(c[0]),u[1].mul(c[1]))}},{"./lib/rationalize":90}],93:[function(e,d,S){var r=e("./lib/bn-sign");d.exports=a;function a(u){return r(u[0])*r(u[1])}},{"./lib/bn-sign":85}],94:[function(e,d,S){var r=e("./lib/rationalize");d.exports=a;function a(u,c){return r(u[0].mul(c[1]).sub(u[1].mul(c[0])),u[1].mul(c[1]))}},{"./lib/rationalize":90}],95:[function(e,d,S){var r=e("./lib/bn-to-num"),a=e("./lib/ctz");d.exports=u;function u(c){var t=c[0],f=c[1];if(t.cmpn(0)===0)return 0;var n=t.abs().divmod(f.abs()),o=n.div,l=r(o),h=n.mod,i=t.negative!==f.negative?-1:1;if(h.cmpn(0)===0)return i*l;if(l){var s=a(l)+4,p=r(h.ushln(s).divRound(f));return i*(l+p*Math.pow(2,-s))}else{var v=f.bitLength()-h.bitLength()+53,p=r(h.ushln(v).divRound(f));return v<1023?i*p*Math.pow(2,-v):(p*=Math.pow(2,-1023),i*p*Math.pow(2,1023-v))}}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(e,d,S){function r(u,c,t,f,n){var o=["function ",u,"(a,l,h,",f.join(","),"){",n?"":"var i=",t?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return n?c.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",c,"){i=m;"),t?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),n?o.push("return -1};"):o.push("return i};"),o.join("")}function a(u,c,t,f){var n=new Function([r("A","x"+u+"y",c,["y"],f),r("P","c(x,y)"+u+"0",c,["y","c"],f),"function dispatchBsearch",t,"(a,y,c,l,h){	if(typeof(c)==='function'){	return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)	}else{	return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)	}}	return dispatchBsearch",t].join(""));return n()}d.exports={ge:a(">=",!1,"GE"),gt:a(">",!1,"GT"),lt:a("<",!0,"LT"),le:a("<=",!0,"LE"),eq:a("-",!0,"EQ",!0)}},{}],97:[function(e,d,S){var r=32;S.INT_BITS=r,S.INT_MAX=2147483647,S.INT_MIN=-1<<r-1,S.sign=function(c){return(c>0)-(c<0)},S.abs=function(c){var t=c>>r-1;return(c^t)-t},S.min=function(c,t){return t^(c^t)&-(c<t)},S.max=function(c,t){return c^(c^t)&-(c<t)},S.isPow2=function(c){return!(c&c-1)&&!!c},S.log2=function(c){var t,f;return t=(c>65535)<<4,c>>>=t,f=(c>255)<<3,c>>>=f,t|=f,f=(c>15)<<2,c>>>=f,t|=f,f=(c>3)<<1,c>>>=f,t|=f,t|c>>1},S.log10=function(c){return c>=1e9?9:c>=1e8?8:c>=1e7?7:c>=1e6?6:c>=1e5?5:c>=1e4?4:c>=1e3?3:c>=100?2:c>=10?1:0},S.popCount=function(c){return c=c-(c>>>1&1431655765),c=(c&858993459)+(c>>>2&858993459),(c+(c>>>4)&252645135)*16843009>>>24};function a(c){var t=32;return c&=-c,c&&t--,c&65535&&(t-=16),c&16711935&&(t-=8),c&252645135&&(t-=4),c&858993459&&(t-=2),c&1431655765&&(t-=1),t}S.countTrailingZeros=a,S.nextPow2=function(c){return c+=c===0,--c,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c+1},S.prevPow2=function(c){return c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c-(c>>>1)},S.parity=function(c){return c^=c>>>16,c^=c>>>8,c^=c>>>4,c&=15,27030>>>c&1};var u=new Array(256);(function(c){for(var t=0;t<256;++t){var f=t,n=t,o=7;for(f>>>=1;f;f>>>=1)n<<=1,n|=f&1,--o;c[t]=n<<o&255}})(u),S.reverse=function(c){return u[c&255]<<24|u[c>>>8&255]<<16|u[c>>>16&255]<<8|u[c>>>24&255]},S.interleave2=function(c,t){return c&=65535,c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,c|t<<1},S.deinterleave2=function(c,t){return c=c>>>t&1431655765,c=(c|c>>>1)&858993459,c=(c|c>>>2)&252645135,c=(c|c>>>4)&16711935,c=(c|c>>>16)&65535,c<<16>>16},S.interleave3=function(c,t,f){return c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,c|=t<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,c|f<<2},S.deinterleave3=function(c,t){return c=c>>>t&1227133513,c=(c|c>>>2)&3272356035,c=(c|c>>>4)&251719695,c=(c|c>>>8)&4278190335,c=(c|c>>>16)&1023,c<<22>>22},S.nextCombination=function(c){var t=c|c-1;return t+1|(~t&-~t)-1>>>a(c)+1}},{}],98:[function(e,d,S){var r=e("clamp");d.exports=u;var a=1e20;function u(f,n){n||(n={});var o=n.cutoff==null?.25:n.cutoff,l=n.radius==null?8:n.radius,h=n.channel||0,i,s,p,v,m,b,y,x,w,g,T;if(ArrayBuffer.isView(f)||Array.isArray(f)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");i=n.width,s=n.height,v=f,n.stride?b=n.stride:b=Math.floor(f.length/i/s)}else window.HTMLCanvasElement&&f instanceof window.HTMLCanvasElement?(x=f,y=x.getContext("2d"),i=x.width,s=x.height,w=y.getImageData(0,0,i,s),v=w.data,b=4):window.CanvasRenderingContext2D&&f instanceof window.CanvasRenderingContext2D?(x=f.canvas,y=f,i=x.width,s=x.height,w=y.getImageData(0,0,i,s),v=w.data,b=4):window.ImageData&&f instanceof window.ImageData&&(w=f,i=f.width,s=f.height,v=w.data,b=4);if(p=Math.max(i,s),window.Uint8ClampedArray&&v instanceof window.Uint8ClampedArray||window.Uint8Array&&v instanceof window.Uint8Array)for(m=v,v=Array(i*s),g=0,T=m.length;g<T;g++)v[g]=m[g*b+h]/255;else if(b!==1)throw Error("Raw data can have only 1 value per pixel");var M=Array(i*s),P=Array(i*s),L=Array(p),I=Array(p),C=Array(p+1),k=Array(p);for(g=0,T=i*s;g<T;g++){var E=v[g];M[g]=E===1?0:E===0?a:Math.pow(Math.max(0,.5-E),2),P[g]=E===1?a:E===0?0:Math.pow(Math.max(0,E-.5),2)}c(M,i,s,L,I,k,C),c(P,i,s,L,I,k,C);var R=window.Float32Array?new Float32Array(i*s):new Array(i*s);for(g=0,T=i*s;g<T;g++)R[g]=r(1-((M[g]-P[g])/l+o),0,1);return R}function c(f,n,o,l,h,i,s){for(var p=0;p<n;p++){for(var v=0;v<o;v++)l[v]=f[v*n+p];for(t(l,h,i,s,o),v=0;v<o;v++)f[v*n+p]=h[v]}for(v=0;v<o;v++){for(p=0;p<n;p++)l[p]=f[v*n+p];for(t(l,h,i,s,n),p=0;p<n;p++)f[v*n+p]=Math.sqrt(h[p])}}function t(f,n,o,l,h){o[0]=0,l[0]=-a,l[1]=+a;for(var i=1,s=0;i<h;i++){for(var p=(f[i]+i*i-(f[o[s]]+o[s]*o[s]))/(2*i-2*o[s]);p<=l[s];)s--,p=(f[i]+i*i-(f[o[s]]+o[s]*o[s]))/(2*i-2*o[s]);s++,o[s]=i,l[s]=p,l[s+1]=+a}for(i=0,s=0;i<h;i++){for(;l[s+1]<i;)s++;n[i]=(i-o[s])*(i-o[s])+f[o[s]]}}},{clamp:120}],99:[function(e,d,S){(function(r,a){function u(C,k){if(!C)throw new Error(k||"Assertion failed")}function c(C,k){C.super_=k;var E=function(){};E.prototype=k.prototype,C.prototype=new E,C.prototype.constructor=C}function t(C,k,E){if(t.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((k==="le"||k==="be")&&(E=k,k=10),this._init(C||0,k||10,E||"be"))}typeof r=="object"?r.exports=t:a.BN=t,t.BN=t,t.wordSize=26;var f;try{f=e("buffer").Buffer}catch{}t.isBN=function(k){return k instanceof t?!0:k!==null&&typeof k=="object"&&k.constructor.wordSize===t.wordSize&&Array.isArray(k.words)},t.max=function(k,E){return k.cmp(E)>0?k:E},t.min=function(k,E){return k.cmp(E)<0?k:E},t.prototype._init=function(k,E,R){if(typeof k=="number")return this._initNumber(k,E,R);if(typeof k=="object")return this._initArray(k,E,R);E==="hex"&&(E=16),u(E===(E|0)&&E>=2&&E<=36),k=k.toString().replace(/\s+/g,"");var O=0;k[0]==="-"&&O++,E===16?this._parseHex(k,O):this._parseBase(k,E,O),k[0]==="-"&&(this.negative=1),this.strip(),R==="le"&&this._initArray(this.toArray(),E,R)},t.prototype._initNumber=function(k,E,R){k<0&&(this.negative=1,k=-k),k<67108864?(this.words=[k&67108863],this.length=1):k<4503599627370496?(this.words=[k&67108863,k/67108864&67108863],this.length=2):(u(k<9007199254740992),this.words=[k&67108863,k/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),E,R)},t.prototype._initArray=function(k,E,R){if(u(typeof k.length=="number"),k.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(k.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var N,G,U=0;if(R==="be")for(O=k.length-1,N=0;O>=0;O-=3)G=k[O]|k[O-1]<<8|k[O-2]<<16,this.words[N]|=G<<U&67108863,this.words[N+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,N++);else if(R==="le")for(O=0,N=0;O<k.length;O+=3)G=k[O]|k[O+1]<<8|k[O+2]<<16,this.words[N]|=G<<U&67108863,this.words[N+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,N++);return this.strip()};function n(C,k,E){for(var R=0,O=Math.min(C.length,E),N=k;N<O;N++){var G=C.charCodeAt(N)-48;R<<=4,G>=49&&G<=54?R|=G-49+10:G>=17&&G<=22?R|=G-17+10:R|=G&15}return R}t.prototype._parseHex=function(k,E){this.length=Math.ceil((k.length-E)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var O,N,G=0;for(R=k.length-6,O=0;R>=E;R-=6)N=n(k,R,R+6),this.words[O]|=N<<G&67108863,this.words[O+1]|=N>>>26-G&4194303,G+=24,G>=26&&(G-=26,O++);R+6!==E&&(N=n(k,E,R+6),this.words[O]|=N<<G&67108863,this.words[O+1]|=N>>>26-G&4194303),this.strip()};function o(C,k,E,R){for(var O=0,N=Math.min(C.length,E),G=k;G<N;G++){var U=C.charCodeAt(G)-48;O*=R,U>=49?O+=U-49+10:U>=17?O+=U-17+10:O+=U}return O}t.prototype._parseBase=function(k,E,R){this.words=[0],this.length=1;for(var O=0,N=1;N<=67108863;N*=E)O++;O--,N=N/E|0;for(var G=k.length-R,U=G%O,Y=Math.min(G,G-U)+R,z=0,B=R;B<Y;B+=O)z=o(k,B,B+O,E),this.imuln(N),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z);if(U!==0){var H=1;for(z=o(k,B,k.length,E),B=0;B<U;B++)H*=E;this.imuln(H),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z)}},t.prototype.copy=function(k){k.words=new Array(this.length);for(var E=0;E<this.length;E++)k.words[E]=this.words[E];k.length=this.length,k.negative=this.negative,k.red=this.red},t.prototype.clone=function(){var k=new t(null);return this.copy(k),k},t.prototype._expand=function(k){for(;this.length<k;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],i=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(k,E){k=k||10,E=E|0||1;var R;if(k===16||k==="hex"){R="";for(var O=0,N=0,G=0;G<this.length;G++){var U=this.words[G],Y=((U<<O|N)&16777215).toString(16);N=U>>>24-O&16777215,N!==0||G!==this.length-1?R=l[6-Y.length]+Y+R:R=Y+R,O+=2,O>=26&&(O-=26,G--)}for(N!==0&&(R=N.toString(16)+R);R.length%E!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(k===(k|0)&&k>=2&&k<=36){var z=h[k],B=i[k];R="";var H=this.clone();for(H.negative=0;!H.isZero();){var V=H.modn(B).toString(k);H=H.idivn(B),H.isZero()?R=V+R:R=l[z-V.length]+V+R}for(this.isZero()&&(R="0"+R);R.length%E!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}u(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var k=this.words[0];return this.length===2?k+=this.words[1]*67108864:this.length===3&&this.words[2]===1?k+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-k:k},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(k,E){return u(typeof f<"u"),this.toArrayLike(f,k,E)},t.prototype.toArray=function(k,E){return this.toArrayLike(Array,k,E)},t.prototype.toArrayLike=function(k,E,R){var O=this.byteLength(),N=R||Math.max(1,O);u(O<=N,"byte array longer than desired length"),u(N>0,"Requested array length <= 0"),this.strip();var G=E==="le",U=new k(N),Y,z,B=this.clone();if(G){for(z=0;!B.isZero();z++)Y=B.andln(255),B.iushrn(8),U[z]=Y;for(;z<N;z++)U[z]=0}else{for(z=0;z<N-O;z++)U[z]=0;for(z=0;!B.isZero();z++)Y=B.andln(255),B.iushrn(8),U[N-z-1]=Y}return U},Math.clz32?t.prototype._countBits=function(k){return 32-Math.clz32(k)}:t.prototype._countBits=function(k){var E=k,R=0;return E>=4096&&(R+=13,E>>>=13),E>=64&&(R+=7,E>>>=7),E>=8&&(R+=4,E>>>=4),E>=2&&(R+=2,E>>>=2),R+E},t.prototype._zeroBits=function(k){if(k===0)return 26;var E=k,R=0;return(E&8191)===0&&(R+=13,E>>>=13),(E&127)===0&&(R+=7,E>>>=7),(E&15)===0&&(R+=4,E>>>=4),(E&3)===0&&(R+=2,E>>>=2),(E&1)===0&&R++,R},t.prototype.bitLength=function(){var k=this.words[this.length-1],E=this._countBits(k);return(this.length-1)*26+E};function s(C){for(var k=new Array(C.bitLength()),E=0;E<k.length;E++){var R=E/26|0,O=E%26;k[E]=(C.words[R]&1<<O)>>>O}return k}t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var k=0,E=0;E<this.length;E++){var R=this._zeroBits(this.words[E]);if(k+=R,R!==26)break}return k},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(k){return this.negative!==0?this.abs().inotn(k).iaddn(1):this.clone()},t.prototype.fromTwos=function(k){return this.testn(k-1)?this.notn(k).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(k){for(;this.length<k.length;)this.words[this.length++]=0;for(var E=0;E<k.length;E++)this.words[E]=this.words[E]|k.words[E];return this.strip()},t.prototype.ior=function(k){return u((this.negative|k.negative)===0),this.iuor(k)},t.prototype.or=function(k){return this.length>k.length?this.clone().ior(k):k.clone().ior(this)},t.prototype.uor=function(k){return this.length>k.length?this.clone().iuor(k):k.clone().iuor(this)},t.prototype.iuand=function(k){var E;this.length>k.length?E=k:E=this;for(var R=0;R<E.length;R++)this.words[R]=this.words[R]&k.words[R];return this.length=E.length,this.strip()},t.prototype.iand=function(k){return u((this.negative|k.negative)===0),this.iuand(k)},t.prototype.and=function(k){return this.length>k.length?this.clone().iand(k):k.clone().iand(this)},t.prototype.uand=function(k){return this.length>k.length?this.clone().iuand(k):k.clone().iuand(this)},t.prototype.iuxor=function(k){var E,R;this.length>k.length?(E=this,R=k):(E=k,R=this);for(var O=0;O<R.length;O++)this.words[O]=E.words[O]^R.words[O];if(this!==E)for(;O<E.length;O++)this.words[O]=E.words[O];return this.length=E.length,this.strip()},t.prototype.ixor=function(k){return u((this.negative|k.negative)===0),this.iuxor(k)},t.prototype.xor=function(k){return this.length>k.length?this.clone().ixor(k):k.clone().ixor(this)},t.prototype.uxor=function(k){return this.length>k.length?this.clone().iuxor(k):k.clone().iuxor(this)},t.prototype.inotn=function(k){u(typeof k=="number"&&k>=0);var E=Math.ceil(k/26)|0,R=k%26;this._expand(E),R>0&&E--;for(var O=0;O<E;O++)this.words[O]=~this.words[O]&67108863;return R>0&&(this.words[O]=~this.words[O]&67108863>>26-R),this.strip()},t.prototype.notn=function(k){return this.clone().inotn(k)},t.prototype.setn=function(k,E){u(typeof k=="number"&&k>=0);var R=k/26|0,O=k%26;return this._expand(R+1),E?this.words[R]=this.words[R]|1<<O:this.words[R]=this.words[R]&~(1<<O),this.strip()},t.prototype.iadd=function(k){var E;if(this.negative!==0&&k.negative===0)return this.negative=0,E=this.isub(k),this.negative^=1,this._normSign();if(this.negative===0&&k.negative!==0)return k.negative=0,E=this.isub(k),k.negative=1,E._normSign();var R,O;this.length>k.length?(R=this,O=k):(R=k,O=this);for(var N=0,G=0;G<O.length;G++)E=(R.words[G]|0)+(O.words[G]|0)+N,this.words[G]=E&67108863,N=E>>>26;for(;N!==0&&G<R.length;G++)E=(R.words[G]|0)+N,this.words[G]=E&67108863,N=E>>>26;if(this.length=R.length,N!==0)this.words[this.length]=N,this.length++;else if(R!==this)for(;G<R.length;G++)this.words[G]=R.words[G];return this},t.prototype.add=function(k){var E;return k.negative!==0&&this.negative===0?(k.negative=0,E=this.sub(k),k.negative^=1,E):k.negative===0&&this.negative!==0?(this.negative=0,E=k.sub(this),this.negative=1,E):this.length>k.length?this.clone().iadd(k):k.clone().iadd(this)},t.prototype.isub=function(k){if(k.negative!==0){k.negative=0;var E=this.iadd(k);return k.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(k),this.negative=1,this._normSign();var R=this.cmp(k);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,N;R>0?(O=this,N=k):(O=k,N=this);for(var G=0,U=0;U<N.length;U++)E=(O.words[U]|0)-(N.words[U]|0)+G,G=E>>26,this.words[U]=E&67108863;for(;G!==0&&U<O.length;U++)E=(O.words[U]|0)+G,G=E>>26,this.words[U]=E&67108863;if(G===0&&U<O.length&&O!==this)for(;U<O.length;U++)this.words[U]=O.words[U];return this.length=Math.max(this.length,U),O!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(k){return this.clone().isub(k)};function p(C,k,E){E.negative=k.negative^C.negative;var R=C.length+k.length|0;E.length=R,R=R-1|0;var O=C.words[0]|0,N=k.words[0]|0,G=O*N,U=G&67108863,Y=G/67108864|0;E.words[0]=U;for(var z=1;z<R;z++){for(var B=Y>>>26,H=Y&67108863,V=Math.min(z,k.length-1),Z=Math.max(0,z-C.length+1);Z<=V;Z++){var q=z-Z|0;O=C.words[q]|0,N=k.words[Z]|0,G=O*N+H,B+=G/67108864|0,H=G&67108863}E.words[z]=H|0,Y=B|0}return Y!==0?E.words[z]=Y|0:E.length--,E.strip()}var v=function(k,E,R){var O=k.words,N=E.words,G=R.words,U=0,Y,z,B,H=O[0]|0,V=H&8191,Z=H>>>13,q=O[1]|0,J=q&8191,ne=q>>>13,ve=O[2]|0,$=ve&8191,j=ve>>>13,ae=O[3]|0,ie=ae&8191,te=ae>>>13,re=O[4]|0,ce=re&8191,pe=re>>>13,fe=O[5]|0,se=fe&8191,de=fe>>>13,be=O[6]|0,xe=be&8191,ke=be>>>13,Re=O[7]|0,Ke=Re&8191,ze=Re>>>13,Je=O[8]|0,qe=Je&8191,Ee=Je>>>13,Ae=O[9]|0,Be=Ae&8191,$e=Ae>>>13,xt=N[0]|0,bt=xt&8191,Ne=xt>>>13,st=N[1]|0,_t=st&8191,Ot=st>>>13,Wt=N[2]|0,Et=Wt&8191,jt=Wt>>>13,Zt=N[3]|0,Mt=Zt&8191,At=Zt>>>13,ft=N[4]|0,ot=ft&8191,Te=ft>>>13,Le=N[5]|0,Ve=Le&8191,Qe=Le>>>13,Me=N[6]|0,Ie=Me&8191,He=Me>>>13,Ye=N[7]|0,ut=Ye&8191,nt=Ye>>>13,Ge=N[8]|0,at=Ge&8191,et=Ge>>>13,lt=N[9]|0,Ct=lt&8191,Pt=lt>>>13;R.negative=k.negative^E.negative,R.length=19,Y=Math.imul(V,bt),z=Math.imul(V,Ne),z=z+Math.imul(Z,bt)|0,B=Math.imul(Z,Ne);var $t=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+($t>>>26)|0,$t&=67108863,Y=Math.imul(J,bt),z=Math.imul(J,Ne),z=z+Math.imul(ne,bt)|0,B=Math.imul(ne,Ne),Y=Y+Math.imul(V,_t)|0,z=z+Math.imul(V,Ot)|0,z=z+Math.imul(Z,_t)|0,B=B+Math.imul(Z,Ot)|0;var je=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(je>>>26)|0,je&=67108863,Y=Math.imul($,bt),z=Math.imul($,Ne),z=z+Math.imul(j,bt)|0,B=Math.imul(j,Ne),Y=Y+Math.imul(J,_t)|0,z=z+Math.imul(J,Ot)|0,z=z+Math.imul(ne,_t)|0,B=B+Math.imul(ne,Ot)|0,Y=Y+Math.imul(V,Et)|0,z=z+Math.imul(V,jt)|0,z=z+Math.imul(Z,Et)|0,B=B+Math.imul(Z,jt)|0;var Oe=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,Y=Math.imul(ie,bt),z=Math.imul(ie,Ne),z=z+Math.imul(te,bt)|0,B=Math.imul(te,Ne),Y=Y+Math.imul($,_t)|0,z=z+Math.imul($,Ot)|0,z=z+Math.imul(j,_t)|0,B=B+Math.imul(j,Ot)|0,Y=Y+Math.imul(J,Et)|0,z=z+Math.imul(J,jt)|0,z=z+Math.imul(ne,Et)|0,B=B+Math.imul(ne,jt)|0,Y=Y+Math.imul(V,Mt)|0,z=z+Math.imul(V,At)|0,z=z+Math.imul(Z,Mt)|0,B=B+Math.imul(Z,At)|0;var mt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(mt>>>26)|0,mt&=67108863,Y=Math.imul(ce,bt),z=Math.imul(ce,Ne),z=z+Math.imul(pe,bt)|0,B=Math.imul(pe,Ne),Y=Y+Math.imul(ie,_t)|0,z=z+Math.imul(ie,Ot)|0,z=z+Math.imul(te,_t)|0,B=B+Math.imul(te,Ot)|0,Y=Y+Math.imul($,Et)|0,z=z+Math.imul($,jt)|0,z=z+Math.imul(j,Et)|0,B=B+Math.imul(j,jt)|0,Y=Y+Math.imul(J,Mt)|0,z=z+Math.imul(J,At)|0,z=z+Math.imul(ne,Mt)|0,B=B+Math.imul(ne,At)|0,Y=Y+Math.imul(V,ot)|0,z=z+Math.imul(V,Te)|0,z=z+Math.imul(Z,ot)|0,B=B+Math.imul(Z,Te)|0;var wt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(wt>>>26)|0,wt&=67108863,Y=Math.imul(se,bt),z=Math.imul(se,Ne),z=z+Math.imul(de,bt)|0,B=Math.imul(de,Ne),Y=Y+Math.imul(ce,_t)|0,z=z+Math.imul(ce,Ot)|0,z=z+Math.imul(pe,_t)|0,B=B+Math.imul(pe,Ot)|0,Y=Y+Math.imul(ie,Et)|0,z=z+Math.imul(ie,jt)|0,z=z+Math.imul(te,Et)|0,B=B+Math.imul(te,jt)|0,Y=Y+Math.imul($,Mt)|0,z=z+Math.imul($,At)|0,z=z+Math.imul(j,Mt)|0,B=B+Math.imul(j,At)|0,Y=Y+Math.imul(J,ot)|0,z=z+Math.imul(J,Te)|0,z=z+Math.imul(ne,ot)|0,B=B+Math.imul(ne,Te)|0,Y=Y+Math.imul(V,Ve)|0,z=z+Math.imul(V,Qe)|0,z=z+Math.imul(Z,Ve)|0,B=B+Math.imul(Z,Qe)|0;var yt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(yt>>>26)|0,yt&=67108863,Y=Math.imul(xe,bt),z=Math.imul(xe,Ne),z=z+Math.imul(ke,bt)|0,B=Math.imul(ke,Ne),Y=Y+Math.imul(se,_t)|0,z=z+Math.imul(se,Ot)|0,z=z+Math.imul(de,_t)|0,B=B+Math.imul(de,Ot)|0,Y=Y+Math.imul(ce,Et)|0,z=z+Math.imul(ce,jt)|0,z=z+Math.imul(pe,Et)|0,B=B+Math.imul(pe,jt)|0,Y=Y+Math.imul(ie,Mt)|0,z=z+Math.imul(ie,At)|0,z=z+Math.imul(te,Mt)|0,B=B+Math.imul(te,At)|0,Y=Y+Math.imul($,ot)|0,z=z+Math.imul($,Te)|0,z=z+Math.imul(j,ot)|0,B=B+Math.imul(j,Te)|0,Y=Y+Math.imul(J,Ve)|0,z=z+Math.imul(J,Qe)|0,z=z+Math.imul(ne,Ve)|0,B=B+Math.imul(ne,Qe)|0,Y=Y+Math.imul(V,Ie)|0,z=z+Math.imul(V,He)|0,z=z+Math.imul(Z,Ie)|0,B=B+Math.imul(Z,He)|0;var St=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(St>>>26)|0,St&=67108863,Y=Math.imul(Ke,bt),z=Math.imul(Ke,Ne),z=z+Math.imul(ze,bt)|0,B=Math.imul(ze,Ne),Y=Y+Math.imul(xe,_t)|0,z=z+Math.imul(xe,Ot)|0,z=z+Math.imul(ke,_t)|0,B=B+Math.imul(ke,Ot)|0,Y=Y+Math.imul(se,Et)|0,z=z+Math.imul(se,jt)|0,z=z+Math.imul(de,Et)|0,B=B+Math.imul(de,jt)|0,Y=Y+Math.imul(ce,Mt)|0,z=z+Math.imul(ce,At)|0,z=z+Math.imul(pe,Mt)|0,B=B+Math.imul(pe,At)|0,Y=Y+Math.imul(ie,ot)|0,z=z+Math.imul(ie,Te)|0,z=z+Math.imul(te,ot)|0,B=B+Math.imul(te,Te)|0,Y=Y+Math.imul($,Ve)|0,z=z+Math.imul($,Qe)|0,z=z+Math.imul(j,Ve)|0,B=B+Math.imul(j,Qe)|0,Y=Y+Math.imul(J,Ie)|0,z=z+Math.imul(J,He)|0,z=z+Math.imul(ne,Ie)|0,B=B+Math.imul(ne,He)|0,Y=Y+Math.imul(V,ut)|0,z=z+Math.imul(V,nt)|0,z=z+Math.imul(Z,ut)|0,B=B+Math.imul(Z,nt)|0;var kt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(kt>>>26)|0,kt&=67108863,Y=Math.imul(qe,bt),z=Math.imul(qe,Ne),z=z+Math.imul(Ee,bt)|0,B=Math.imul(Ee,Ne),Y=Y+Math.imul(Ke,_t)|0,z=z+Math.imul(Ke,Ot)|0,z=z+Math.imul(ze,_t)|0,B=B+Math.imul(ze,Ot)|0,Y=Y+Math.imul(xe,Et)|0,z=z+Math.imul(xe,jt)|0,z=z+Math.imul(ke,Et)|0,B=B+Math.imul(ke,jt)|0,Y=Y+Math.imul(se,Mt)|0,z=z+Math.imul(se,At)|0,z=z+Math.imul(de,Mt)|0,B=B+Math.imul(de,At)|0,Y=Y+Math.imul(ce,ot)|0,z=z+Math.imul(ce,Te)|0,z=z+Math.imul(pe,ot)|0,B=B+Math.imul(pe,Te)|0,Y=Y+Math.imul(ie,Ve)|0,z=z+Math.imul(ie,Qe)|0,z=z+Math.imul(te,Ve)|0,B=B+Math.imul(te,Qe)|0,Y=Y+Math.imul($,Ie)|0,z=z+Math.imul($,He)|0,z=z+Math.imul(j,Ie)|0,B=B+Math.imul(j,He)|0,Y=Y+Math.imul(J,ut)|0,z=z+Math.imul(J,nt)|0,z=z+Math.imul(ne,ut)|0,B=B+Math.imul(ne,nt)|0,Y=Y+Math.imul(V,at)|0,z=z+Math.imul(V,et)|0,z=z+Math.imul(Z,at)|0,B=B+Math.imul(Z,et)|0;var Rt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,Y=Math.imul(Be,bt),z=Math.imul(Be,Ne),z=z+Math.imul($e,bt)|0,B=Math.imul($e,Ne),Y=Y+Math.imul(qe,_t)|0,z=z+Math.imul(qe,Ot)|0,z=z+Math.imul(Ee,_t)|0,B=B+Math.imul(Ee,Ot)|0,Y=Y+Math.imul(Ke,Et)|0,z=z+Math.imul(Ke,jt)|0,z=z+Math.imul(ze,Et)|0,B=B+Math.imul(ze,jt)|0,Y=Y+Math.imul(xe,Mt)|0,z=z+Math.imul(xe,At)|0,z=z+Math.imul(ke,Mt)|0,B=B+Math.imul(ke,At)|0,Y=Y+Math.imul(se,ot)|0,z=z+Math.imul(se,Te)|0,z=z+Math.imul(de,ot)|0,B=B+Math.imul(de,Te)|0,Y=Y+Math.imul(ce,Ve)|0,z=z+Math.imul(ce,Qe)|0,z=z+Math.imul(pe,Ve)|0,B=B+Math.imul(pe,Qe)|0,Y=Y+Math.imul(ie,Ie)|0,z=z+Math.imul(ie,He)|0,z=z+Math.imul(te,Ie)|0,B=B+Math.imul(te,He)|0,Y=Y+Math.imul($,ut)|0,z=z+Math.imul($,nt)|0,z=z+Math.imul(j,ut)|0,B=B+Math.imul(j,nt)|0,Y=Y+Math.imul(J,at)|0,z=z+Math.imul(J,et)|0,z=z+Math.imul(ne,at)|0,B=B+Math.imul(ne,et)|0,Y=Y+Math.imul(V,Ct)|0,z=z+Math.imul(V,Pt)|0,z=z+Math.imul(Z,Ct)|0,B=B+Math.imul(Z,Pt)|0;var zt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(zt>>>26)|0,zt&=67108863,Y=Math.imul(Be,_t),z=Math.imul(Be,Ot),z=z+Math.imul($e,_t)|0,B=Math.imul($e,Ot),Y=Y+Math.imul(qe,Et)|0,z=z+Math.imul(qe,jt)|0,z=z+Math.imul(Ee,Et)|0,B=B+Math.imul(Ee,jt)|0,Y=Y+Math.imul(Ke,Mt)|0,z=z+Math.imul(Ke,At)|0,z=z+Math.imul(ze,Mt)|0,B=B+Math.imul(ze,At)|0,Y=Y+Math.imul(xe,ot)|0,z=z+Math.imul(xe,Te)|0,z=z+Math.imul(ke,ot)|0,B=B+Math.imul(ke,Te)|0,Y=Y+Math.imul(se,Ve)|0,z=z+Math.imul(se,Qe)|0,z=z+Math.imul(de,Ve)|0,B=B+Math.imul(de,Qe)|0,Y=Y+Math.imul(ce,Ie)|0,z=z+Math.imul(ce,He)|0,z=z+Math.imul(pe,Ie)|0,B=B+Math.imul(pe,He)|0,Y=Y+Math.imul(ie,ut)|0,z=z+Math.imul(ie,nt)|0,z=z+Math.imul(te,ut)|0,B=B+Math.imul(te,nt)|0,Y=Y+Math.imul($,at)|0,z=z+Math.imul($,et)|0,z=z+Math.imul(j,at)|0,B=B+Math.imul(j,et)|0,Y=Y+Math.imul(J,Ct)|0,z=z+Math.imul(J,Pt)|0,z=z+Math.imul(ne,Ct)|0,B=B+Math.imul(ne,Pt)|0;var Xt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,Y=Math.imul(Be,Et),z=Math.imul(Be,jt),z=z+Math.imul($e,Et)|0,B=Math.imul($e,jt),Y=Y+Math.imul(qe,Mt)|0,z=z+Math.imul(qe,At)|0,z=z+Math.imul(Ee,Mt)|0,B=B+Math.imul(Ee,At)|0,Y=Y+Math.imul(Ke,ot)|0,z=z+Math.imul(Ke,Te)|0,z=z+Math.imul(ze,ot)|0,B=B+Math.imul(ze,Te)|0,Y=Y+Math.imul(xe,Ve)|0,z=z+Math.imul(xe,Qe)|0,z=z+Math.imul(ke,Ve)|0,B=B+Math.imul(ke,Qe)|0,Y=Y+Math.imul(se,Ie)|0,z=z+Math.imul(se,He)|0,z=z+Math.imul(de,Ie)|0,B=B+Math.imul(de,He)|0,Y=Y+Math.imul(ce,ut)|0,z=z+Math.imul(ce,nt)|0,z=z+Math.imul(pe,ut)|0,B=B+Math.imul(pe,nt)|0,Y=Y+Math.imul(ie,at)|0,z=z+Math.imul(ie,et)|0,z=z+Math.imul(te,at)|0,B=B+Math.imul(te,et)|0,Y=Y+Math.imul($,Ct)|0,z=z+Math.imul($,Pt)|0,z=z+Math.imul(j,Ct)|0,B=B+Math.imul(j,Pt)|0;var Yt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,Y=Math.imul(Be,Mt),z=Math.imul(Be,At),z=z+Math.imul($e,Mt)|0,B=Math.imul($e,At),Y=Y+Math.imul(qe,ot)|0,z=z+Math.imul(qe,Te)|0,z=z+Math.imul(Ee,ot)|0,B=B+Math.imul(Ee,Te)|0,Y=Y+Math.imul(Ke,Ve)|0,z=z+Math.imul(Ke,Qe)|0,z=z+Math.imul(ze,Ve)|0,B=B+Math.imul(ze,Qe)|0,Y=Y+Math.imul(xe,Ie)|0,z=z+Math.imul(xe,He)|0,z=z+Math.imul(ke,Ie)|0,B=B+Math.imul(ke,He)|0,Y=Y+Math.imul(se,ut)|0,z=z+Math.imul(se,nt)|0,z=z+Math.imul(de,ut)|0,B=B+Math.imul(de,nt)|0,Y=Y+Math.imul(ce,at)|0,z=z+Math.imul(ce,et)|0,z=z+Math.imul(pe,at)|0,B=B+Math.imul(pe,et)|0,Y=Y+Math.imul(ie,Ct)|0,z=z+Math.imul(ie,Pt)|0,z=z+Math.imul(te,Ct)|0,B=B+Math.imul(te,Pt)|0;var Vt=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,Y=Math.imul(Be,ot),z=Math.imul(Be,Te),z=z+Math.imul($e,ot)|0,B=Math.imul($e,Te),Y=Y+Math.imul(qe,Ve)|0,z=z+Math.imul(qe,Qe)|0,z=z+Math.imul(Ee,Ve)|0,B=B+Math.imul(Ee,Qe)|0,Y=Y+Math.imul(Ke,Ie)|0,z=z+Math.imul(Ke,He)|0,z=z+Math.imul(ze,Ie)|0,B=B+Math.imul(ze,He)|0,Y=Y+Math.imul(xe,ut)|0,z=z+Math.imul(xe,nt)|0,z=z+Math.imul(ke,ut)|0,B=B+Math.imul(ke,nt)|0,Y=Y+Math.imul(se,at)|0,z=z+Math.imul(se,et)|0,z=z+Math.imul(de,at)|0,B=B+Math.imul(de,et)|0,Y=Y+Math.imul(ce,Ct)|0,z=z+Math.imul(ce,Pt)|0,z=z+Math.imul(pe,Ct)|0,B=B+Math.imul(pe,Pt)|0;var cr=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(cr>>>26)|0,cr&=67108863,Y=Math.imul(Be,Ve),z=Math.imul(Be,Qe),z=z+Math.imul($e,Ve)|0,B=Math.imul($e,Qe),Y=Y+Math.imul(qe,Ie)|0,z=z+Math.imul(qe,He)|0,z=z+Math.imul(Ee,Ie)|0,B=B+Math.imul(Ee,He)|0,Y=Y+Math.imul(Ke,ut)|0,z=z+Math.imul(Ke,nt)|0,z=z+Math.imul(ze,ut)|0,B=B+Math.imul(ze,nt)|0,Y=Y+Math.imul(xe,at)|0,z=z+Math.imul(xe,et)|0,z=z+Math.imul(ke,at)|0,B=B+Math.imul(ke,et)|0,Y=Y+Math.imul(se,Ct)|0,z=z+Math.imul(se,Pt)|0,z=z+Math.imul(de,Ct)|0,B=B+Math.imul(de,Pt)|0;var Or=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Or>>>26)|0,Or&=67108863,Y=Math.imul(Be,Ie),z=Math.imul(Be,He),z=z+Math.imul($e,Ie)|0,B=Math.imul($e,He),Y=Y+Math.imul(qe,ut)|0,z=z+Math.imul(qe,nt)|0,z=z+Math.imul(Ee,ut)|0,B=B+Math.imul(Ee,nt)|0,Y=Y+Math.imul(Ke,at)|0,z=z+Math.imul(Ke,et)|0,z=z+Math.imul(ze,at)|0,B=B+Math.imul(ze,et)|0,Y=Y+Math.imul(xe,Ct)|0,z=z+Math.imul(xe,Pt)|0,z=z+Math.imul(ke,Ct)|0,B=B+Math.imul(ke,Pt)|0;var kr=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(kr>>>26)|0,kr&=67108863,Y=Math.imul(Be,ut),z=Math.imul(Be,nt),z=z+Math.imul($e,ut)|0,B=Math.imul($e,nt),Y=Y+Math.imul(qe,at)|0,z=z+Math.imul(qe,et)|0,z=z+Math.imul(Ee,at)|0,B=B+Math.imul(Ee,et)|0,Y=Y+Math.imul(Ke,Ct)|0,z=z+Math.imul(Ke,Pt)|0,z=z+Math.imul(ze,Ct)|0,B=B+Math.imul(ze,Pt)|0;var Sr=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,Y=Math.imul(Be,at),z=Math.imul(Be,et),z=z+Math.imul($e,at)|0,B=Math.imul($e,et),Y=Y+Math.imul(qe,Ct)|0,z=z+Math.imul(qe,Pt)|0,z=z+Math.imul(Ee,Ct)|0,B=B+Math.imul(Ee,Pt)|0;var vn=(U+Y|0)+((z&8191)<<13)|0;U=(B+(z>>>13)|0)+(vn>>>26)|0,vn&=67108863,Y=Math.imul(Be,Ct),z=Math.imul(Be,Pt),z=z+Math.imul($e,Ct)|0,B=Math.imul($e,Pt);var Rn=(U+Y|0)+((z&8191)<<13)|0;return U=(B+(z>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,G[0]=$t,G[1]=je,G[2]=Oe,G[3]=mt,G[4]=wt,G[5]=yt,G[6]=St,G[7]=kt,G[8]=Rt,G[9]=zt,G[10]=Xt,G[11]=Yt,G[12]=Vt,G[13]=cr,G[14]=Or,G[15]=kr,G[16]=Sr,G[17]=vn,G[18]=Rn,U!==0&&(G[19]=U,R.length++),R};Math.imul||(v=p);function m(C,k,E){E.negative=k.negative^C.negative,E.length=C.length+k.length;for(var R=0,O=0,N=0;N<E.length-1;N++){var G=O;O=0;for(var U=R&67108863,Y=Math.min(N,k.length-1),z=Math.max(0,N-C.length+1);z<=Y;z++){var B=N-z,H=C.words[B]|0,V=k.words[z]|0,Z=H*V,q=Z&67108863;G=G+(Z/67108864|0)|0,q=q+U|0,U=q&67108863,G=G+(q>>>26)|0,O+=G>>>26,G&=67108863}E.words[N]=U,R=G,G=O}return R!==0?E.words[N]=R:E.length--,E.strip()}function b(C,k,E){var R=new y;return R.mulp(C,k,E)}t.prototype.mulTo=function(k,E){var R,O=this.length+k.length;return this.length===10&&k.length===10?R=v(this,k,E):O<63?R=p(this,k,E):O<1024?R=m(this,k,E):R=b(this,k,E),R};function y(C,k){this.x=C,this.y=k}y.prototype.makeRBT=function(k){for(var E=new Array(k),R=t.prototype._countBits(k)-1,O=0;O<k;O++)E[O]=this.revBin(O,R,k);return E},y.prototype.revBin=function(k,E,R){if(k===0||k===R-1)return k;for(var O=0,N=0;N<E;N++)O|=(k&1)<<E-N-1,k>>=1;return O},y.prototype.permute=function(k,E,R,O,N,G){for(var U=0;U<G;U++)O[U]=E[k[U]],N[U]=R[k[U]]},y.prototype.transform=function(k,E,R,O,N,G){this.permute(G,k,E,R,O,N);for(var U=1;U<N;U<<=1)for(var Y=U<<1,z=Math.cos(2*Math.PI/Y),B=Math.sin(2*Math.PI/Y),H=0;H<N;H+=Y)for(var V=z,Z=B,q=0;q<U;q++){var J=R[H+q],ne=O[H+q],ve=R[H+q+U],$=O[H+q+U],j=V*ve-Z*$;$=V*$+Z*ve,ve=j,R[H+q]=J+ve,O[H+q]=ne+$,R[H+q+U]=J-ve,O[H+q+U]=ne-$,q!==Y&&(j=z*V-B*Z,Z=z*Z+B*V,V=j)}},y.prototype.guessLen13b=function(k,E){var R=Math.max(E,k)|1,O=R&1,N=0;for(R=R/2|0;R;R=R>>>1)N++;return 1<<N+1+O},y.prototype.conjugate=function(k,E,R){if(!(R<=1))for(var O=0;O<R/2;O++){var N=k[O];k[O]=k[R-O-1],k[R-O-1]=N,N=E[O],E[O]=-E[R-O-1],E[R-O-1]=-N}},y.prototype.normalize13b=function(k,E){for(var R=0,O=0;O<E/2;O++){var N=Math.round(k[2*O+1]/E)*8192+Math.round(k[2*O]/E)+R;k[O]=N&67108863,N<67108864?R=0:R=N/67108864|0}return k},y.prototype.convert13b=function(k,E,R,O){for(var N=0,G=0;G<E;G++)N=N+(k[G]|0),R[2*G]=N&8191,N=N>>>13,R[2*G+1]=N&8191,N=N>>>13;for(G=2*E;G<O;++G)R[G]=0;u(N===0),u((N&-8192)===0)},y.prototype.stub=function(k){for(var E=new Array(k),R=0;R<k;R++)E[R]=0;return E},y.prototype.mulp=function(k,E,R){var O=2*this.guessLen13b(k.length,E.length),N=this.makeRBT(O),G=this.stub(O),U=new Array(O),Y=new Array(O),z=new Array(O),B=new Array(O),H=new Array(O),V=new Array(O),Z=R.words;Z.length=O,this.convert13b(k.words,k.length,U,O),this.convert13b(E.words,E.length,B,O),this.transform(U,G,Y,z,O,N),this.transform(B,G,H,V,O,N);for(var q=0;q<O;q++){var J=Y[q]*H[q]-z[q]*V[q];z[q]=Y[q]*V[q]+z[q]*H[q],Y[q]=J}return this.conjugate(Y,z,O),this.transform(Y,z,Z,G,O,N),this.conjugate(Z,G,O),this.normalize13b(Z,O),R.negative=k.negative^E.negative,R.length=k.length+E.length,R.strip()},t.prototype.mul=function(k){var E=new t(null);return E.words=new Array(this.length+k.length),this.mulTo(k,E)},t.prototype.mulf=function(k){var E=new t(null);return E.words=new Array(this.length+k.length),b(this,k,E)},t.prototype.imul=function(k){return this.clone().mulTo(k,this)},t.prototype.imuln=function(k){u(typeof k=="number"),u(k<67108864);for(var E=0,R=0;R<this.length;R++){var O=(this.words[R]|0)*k,N=(O&67108863)+(E&67108863);E>>=26,E+=O/67108864|0,E+=N>>>26,this.words[R]=N&67108863}return E!==0&&(this.words[R]=E,this.length++),this},t.prototype.muln=function(k){return this.clone().imuln(k)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(k){var E=s(k);if(E.length===0)return new t(1);for(var R=this,O=0;O<E.length&&E[O]===0;O++,R=R.sqr());if(++O<E.length)for(var N=R.sqr();O<E.length;O++,N=N.sqr())E[O]!==0&&(R=R.mul(N));return R},t.prototype.iushln=function(k){u(typeof k=="number"&&k>=0);var E=k%26,R=(k-E)/26,O=67108863>>>26-E<<26-E,N;if(E!==0){var G=0;for(N=0;N<this.length;N++){var U=this.words[N]&O,Y=(this.words[N]|0)-U<<E;this.words[N]=Y|G,G=U>>>26-E}G&&(this.words[N]=G,this.length++)}if(R!==0){for(N=this.length-1;N>=0;N--)this.words[N+R]=this.words[N];for(N=0;N<R;N++)this.words[N]=0;this.length+=R}return this.strip()},t.prototype.ishln=function(k){return u(this.negative===0),this.iushln(k)},t.prototype.iushrn=function(k,E,R){u(typeof k=="number"&&k>=0);var O;E?O=(E-E%26)/26:O=0;var N=k%26,G=Math.min((k-N)/26,this.length),U=67108863^67108863>>>N<<N,Y=R;if(O-=G,O=Math.max(0,O),Y){for(var z=0;z<G;z++)Y.words[z]=this.words[z];Y.length=G}if(G!==0)if(this.length>G)for(this.length-=G,z=0;z<this.length;z++)this.words[z]=this.words[z+G];else this.words[0]=0,this.length=1;var B=0;for(z=this.length-1;z>=0&&(B!==0||z>=O);z--){var H=this.words[z]|0;this.words[z]=B<<26-N|H>>>N,B=H&U}return Y&&B!==0&&(Y.words[Y.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(k,E,R){return u(this.negative===0),this.iushrn(k,E,R)},t.prototype.shln=function(k){return this.clone().ishln(k)},t.prototype.ushln=function(k){return this.clone().iushln(k)},t.prototype.shrn=function(k){return this.clone().ishrn(k)},t.prototype.ushrn=function(k){return this.clone().iushrn(k)},t.prototype.testn=function(k){u(typeof k=="number"&&k>=0);var E=k%26,R=(k-E)/26,O=1<<E;if(this.length<=R)return!1;var N=this.words[R];return!!(N&O)},t.prototype.imaskn=function(k){u(typeof k=="number"&&k>=0);var E=k%26,R=(k-E)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(E!==0&&R++,this.length=Math.min(R,this.length),E!==0){var O=67108863^67108863>>>E<<E;this.words[this.length-1]&=O}return this.strip()},t.prototype.maskn=function(k){return this.clone().imaskn(k)},t.prototype.iaddn=function(k){return u(typeof k=="number"),u(k<67108864),k<0?this.isubn(-k):this.negative!==0?this.length===1&&(this.words[0]|0)<k?(this.words[0]=k-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(k),this.negative=1,this):this._iaddn(k)},t.prototype._iaddn=function(k){this.words[0]+=k;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},t.prototype.isubn=function(k){if(u(typeof k=="number"),u(k<67108864),k<0)return this.iaddn(-k);if(this.negative!==0)return this.negative=0,this.iaddn(k),this.negative=1,this;if(this.words[0]-=k,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},t.prototype.addn=function(k){return this.clone().iaddn(k)},t.prototype.subn=function(k){return this.clone().isubn(k)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(k,E,R){var O=k.length+R,N;this._expand(O);var G,U=0;for(N=0;N<k.length;N++){G=(this.words[N+R]|0)+U;var Y=(k.words[N]|0)*E;G-=Y&67108863,U=(G>>26)-(Y/67108864|0),this.words[N+R]=G&67108863}for(;N<this.length-R;N++)G=(this.words[N+R]|0)+U,U=G>>26,this.words[N+R]=G&67108863;if(U===0)return this.strip();for(u(U===-1),U=0,N=0;N<this.length;N++)G=-(this.words[N]|0)+U,U=G>>26,this.words[N]=G&67108863;return this.negative=1,this.strip()},t.prototype._wordDiv=function(k,E){var R=this.length-k.length,O=this.clone(),N=k,G=N.words[N.length-1]|0,U=this._countBits(G);R=26-U,R!==0&&(N=N.ushln(R),O.iushln(R),G=N.words[N.length-1]|0);var Y=O.length-N.length,z;if(E!=="mod"){z=new t(null),z.length=Y+1,z.words=new Array(z.length);for(var B=0;B<z.length;B++)z.words[B]=0}var H=O.clone()._ishlnsubmul(N,1,Y);H.negative===0&&(O=H,z&&(z.words[Y]=1));for(var V=Y-1;V>=0;V--){var Z=(O.words[N.length+V]|0)*67108864+(O.words[N.length+V-1]|0);for(Z=Math.min(Z/G|0,67108863),O._ishlnsubmul(N,Z,V);O.negative!==0;)Z--,O.negative=0,O._ishlnsubmul(N,1,V),O.isZero()||(O.negative^=1);z&&(z.words[V]=Z)}return z&&z.strip(),O.strip(),E!=="div"&&R!==0&&O.iushrn(R),{div:z||null,mod:O}},t.prototype.divmod=function(k,E,R){if(u(!k.isZero()),this.isZero())return{div:new t(0),mod:new t(0)};var O,N,G;return this.negative!==0&&k.negative===0?(G=this.neg().divmod(k,E),E!=="mod"&&(O=G.div.neg()),E!=="div"&&(N=G.mod.neg(),R&&N.negative!==0&&N.iadd(k)),{div:O,mod:N}):this.negative===0&&k.negative!==0?(G=this.divmod(k.neg(),E),E!=="mod"&&(O=G.div.neg()),{div:O,mod:G.mod}):(this.negative&k.negative)!==0?(G=this.neg().divmod(k.neg(),E),E!=="div"&&(N=G.mod.neg(),R&&N.negative!==0&&N.isub(k)),{div:G.div,mod:N}):k.length>this.length||this.cmp(k)<0?{div:new t(0),mod:this}:k.length===1?E==="div"?{div:this.divn(k.words[0]),mod:null}:E==="mod"?{div:null,mod:new t(this.modn(k.words[0]))}:{div:this.divn(k.words[0]),mod:new t(this.modn(k.words[0]))}:this._wordDiv(k,E)},t.prototype.div=function(k){return this.divmod(k,"div",!1).div},t.prototype.mod=function(k){return this.divmod(k,"mod",!1).mod},t.prototype.umod=function(k){return this.divmod(k,"mod",!0).mod},t.prototype.divRound=function(k){var E=this.divmod(k);if(E.mod.isZero())return E.div;var R=E.div.negative!==0?E.mod.isub(k):E.mod,O=k.ushrn(1),N=k.andln(1),G=R.cmp(O);return G<0||N===1&&G===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},t.prototype.modn=function(k){u(k<=67108863);for(var E=(1<<26)%k,R=0,O=this.length-1;O>=0;O--)R=(E*R+(this.words[O]|0))%k;return R},t.prototype.idivn=function(k){u(k<=67108863);for(var E=0,R=this.length-1;R>=0;R--){var O=(this.words[R]|0)+E*67108864;this.words[R]=O/k|0,E=O%k}return this.strip()},t.prototype.divn=function(k){return this.clone().idivn(k)},t.prototype.egcd=function(k){u(k.negative===0),u(!k.isZero());var E=this,R=k.clone();E.negative!==0?E=E.umod(k):E=E.clone();for(var O=new t(1),N=new t(0),G=new t(0),U=new t(1),Y=0;E.isEven()&&R.isEven();)E.iushrn(1),R.iushrn(1),++Y;for(var z=R.clone(),B=E.clone();!E.isZero();){for(var H=0,V=1;(E.words[0]&V)===0&&H<26;++H,V<<=1);if(H>0)for(E.iushrn(H);H-- >0;)(O.isOdd()||N.isOdd())&&(O.iadd(z),N.isub(B)),O.iushrn(1),N.iushrn(1);for(var Z=0,q=1;(R.words[0]&q)===0&&Z<26;++Z,q<<=1);if(Z>0)for(R.iushrn(Z);Z-- >0;)(G.isOdd()||U.isOdd())&&(G.iadd(z),U.isub(B)),G.iushrn(1),U.iushrn(1);E.cmp(R)>=0?(E.isub(R),O.isub(G),N.isub(U)):(R.isub(E),G.isub(O),U.isub(N))}return{a:G,b:U,gcd:R.iushln(Y)}},t.prototype._invmp=function(k){u(k.negative===0),u(!k.isZero());var E=this,R=k.clone();E.negative!==0?E=E.umod(k):E=E.clone();for(var O=new t(1),N=new t(0),G=R.clone();E.cmpn(1)>0&&R.cmpn(1)>0;){for(var U=0,Y=1;(E.words[0]&Y)===0&&U<26;++U,Y<<=1);if(U>0)for(E.iushrn(U);U-- >0;)O.isOdd()&&O.iadd(G),O.iushrn(1);for(var z=0,B=1;(R.words[0]&B)===0&&z<26;++z,B<<=1);if(z>0)for(R.iushrn(z);z-- >0;)N.isOdd()&&N.iadd(G),N.iushrn(1);E.cmp(R)>=0?(E.isub(R),O.isub(N)):(R.isub(E),N.isub(O))}var H;return E.cmpn(1)===0?H=O:H=N,H.cmpn(0)<0&&H.iadd(k),H},t.prototype.gcd=function(k){if(this.isZero())return k.abs();if(k.isZero())return this.abs();var E=this.clone(),R=k.clone();E.negative=0,R.negative=0;for(var O=0;E.isEven()&&R.isEven();O++)E.iushrn(1),R.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;R.isEven();)R.iushrn(1);var N=E.cmp(R);if(N<0){var G=E;E=R,R=G}else if(N===0||R.cmpn(1)===0)break;E.isub(R)}while(!0);return R.iushln(O)},t.prototype.invm=function(k){return this.egcd(k).a.umod(k)},t.prototype.isEven=function(){return(this.words[0]&1)===0},t.prototype.isOdd=function(){return(this.words[0]&1)===1},t.prototype.andln=function(k){return this.words[0]&k},t.prototype.bincn=function(k){u(typeof k=="number");var E=k%26,R=(k-E)/26,O=1<<E;if(this.length<=R)return this._expand(R+1),this.words[R]|=O,this;for(var N=O,G=R;N!==0&&G<this.length;G++){var U=this.words[G]|0;U+=N,N=U>>>26,U&=67108863,this.words[G]=U}return N!==0&&(this.words[G]=N,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(k){var E=k<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this.strip();var R;if(this.length>1)R=1;else{E&&(k=-k),u(k<=67108863,"Number is too big");var O=this.words[0]|0;R=O===k?0:O<k?-1:1}return this.negative!==0?-R|0:R},t.prototype.cmp=function(k){if(this.negative!==0&&k.negative===0)return-1;if(this.negative===0&&k.negative!==0)return 1;var E=this.ucmp(k);return this.negative!==0?-E|0:E},t.prototype.ucmp=function(k){if(this.length>k.length)return 1;if(this.length<k.length)return-1;for(var E=0,R=this.length-1;R>=0;R--){var O=this.words[R]|0,N=k.words[R]|0;if(O!==N){O<N?E=-1:O>N&&(E=1);break}}return E},t.prototype.gtn=function(k){return this.cmpn(k)===1},t.prototype.gt=function(k){return this.cmp(k)===1},t.prototype.gten=function(k){return this.cmpn(k)>=0},t.prototype.gte=function(k){return this.cmp(k)>=0},t.prototype.ltn=function(k){return this.cmpn(k)===-1},t.prototype.lt=function(k){return this.cmp(k)===-1},t.prototype.lten=function(k){return this.cmpn(k)<=0},t.prototype.lte=function(k){return this.cmp(k)<=0},t.prototype.eqn=function(k){return this.cmpn(k)===0},t.prototype.eq=function(k){return this.cmp(k)===0},t.red=function(k){return new L(k)},t.prototype.toRed=function(k){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),k.convertTo(this)._forceRed(k)},t.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(k){return this.red=k,this},t.prototype.forceRed=function(k){return u(!this.red,"Already a number in reduction context"),this._forceRed(k)},t.prototype.redAdd=function(k){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,k)},t.prototype.redIAdd=function(k){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,k)},t.prototype.redSub=function(k){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,k)},t.prototype.redISub=function(k){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,k)},t.prototype.redShl=function(k){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,k)},t.prototype.redMul=function(k){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.mul(this,k)},t.prototype.redIMul=function(k){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.imul(this,k)},t.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(k){return u(this.red&&!k.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,k)};var x={k256:null,p224:null,p192:null,p25519:null};function w(C,k){this.name=C,this.p=new t(k,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var k=new t(null);return k.words=new Array(Math.ceil(this.n/13)),k},w.prototype.ireduce=function(k){var E=k,R;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),R=E.bitLength();while(R>this.n);var O=R<this.n?-1:E.ucmp(this.p);return O===0?(E.words[0]=0,E.length=1):O>0?E.isub(this.p):E.strip(),E},w.prototype.split=function(k,E){k.iushrn(this.n,0,E)},w.prototype.imulK=function(k){return k.imul(this.k)};function g(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(g,w),g.prototype.split=function(k,E){for(var R=4194303,O=Math.min(k.length,9),N=0;N<O;N++)E.words[N]=k.words[N];if(E.length=O,k.length<=9){k.words[0]=0,k.length=1;return}var G=k.words[9];for(E.words[E.length++]=G&R,N=10;N<k.length;N++){var U=k.words[N]|0;k.words[N-10]=(U&R)<<4|G>>>22,G=U}G>>>=22,k.words[N-10]=G,G===0&&k.length>10?k.length-=10:k.length-=9},g.prototype.imulK=function(k){k.words[k.length]=0,k.words[k.length+1]=0,k.length+=2;for(var E=0,R=0;R<k.length;R++){var O=k.words[R]|0;E+=O*977,k.words[R]=E&67108863,E=O*64+(E/67108864|0)}return k.words[k.length-1]===0&&(k.length--,k.words[k.length-1]===0&&k.length--),k};function T(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(T,w);function M(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(M,w);function P(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(P,w),P.prototype.imulK=function(k){for(var E=0,R=0;R<k.length;R++){var O=(k.words[R]|0)*19+E,N=O&67108863;O>>>=26,k.words[R]=N,E=O}return E!==0&&(k.words[k.length++]=E),k},t._prime=function(k){if(x[k])return x[k];var E;if(k==="k256")E=new g;else if(k==="p224")E=new T;else if(k==="p192")E=new M;else if(k==="p25519")E=new P;else throw new Error("Unknown prime "+k);return x[k]=E,E};function L(C){if(typeof C=="string"){var k=t._prime(C);this.m=k.p,this.prime=k}else u(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}L.prototype._verify1=function(k){u(k.negative===0,"red works only with positives"),u(k.red,"red works only with red numbers")},L.prototype._verify2=function(k,E){u((k.negative|E.negative)===0,"red works only with positives"),u(k.red&&k.red===E.red,"red works only with red numbers")},L.prototype.imod=function(k){return this.prime?this.prime.ireduce(k)._forceRed(this):k.umod(this.m)._forceRed(this)},L.prototype.neg=function(k){return k.isZero()?k.clone():this.m.sub(k)._forceRed(this)},L.prototype.add=function(k,E){this._verify2(k,E);var R=k.add(E);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},L.prototype.iadd=function(k,E){this._verify2(k,E);var R=k.iadd(E);return R.cmp(this.m)>=0&&R.isub(this.m),R},L.prototype.sub=function(k,E){this._verify2(k,E);var R=k.sub(E);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},L.prototype.isub=function(k,E){this._verify2(k,E);var R=k.isub(E);return R.cmpn(0)<0&&R.iadd(this.m),R},L.prototype.shl=function(k,E){return this._verify1(k),this.imod(k.ushln(E))},L.prototype.imul=function(k,E){return this._verify2(k,E),this.imod(k.imul(E))},L.prototype.mul=function(k,E){return this._verify2(k,E),this.imod(k.mul(E))},L.prototype.isqr=function(k){return this.imul(k,k.clone())},L.prototype.sqr=function(k){return this.mul(k,k)},L.prototype.sqrt=function(k){if(k.isZero())return k.clone();var E=this.m.andln(3);if(u(E%2===1),E===3){var R=this.m.add(new t(1)).iushrn(2);return this.pow(k,R)}for(var O=this.m.subn(1),N=0;!O.isZero()&&O.andln(1)===0;)N++,O.iushrn(1);u(!O.isZero());var G=new t(1).toRed(this),U=G.redNeg(),Y=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new t(2*z*z).toRed(this);this.pow(z,Y).cmp(U)!==0;)z.redIAdd(U);for(var B=this.pow(z,O),H=this.pow(k,O.addn(1).iushrn(1)),V=this.pow(k,O),Z=N;V.cmp(G)!==0;){for(var q=V,J=0;q.cmp(G)!==0;J++)q=q.redSqr();u(J<Z);var ne=this.pow(B,new t(1).iushln(Z-J-1));H=H.redMul(ne),B=ne.redSqr(),V=V.redMul(B),Z=J}return H},L.prototype.invm=function(k){var E=k._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},L.prototype.pow=function(k,E){if(E.isZero())return new t(1).toRed(this);if(E.cmpn(1)===0)return k.clone();var R=4,O=new Array(1<<R);O[0]=new t(1).toRed(this),O[1]=k;for(var N=2;N<O.length;N++)O[N]=this.mul(O[N-1],k);var G=O[0],U=0,Y=0,z=E.bitLength()%26;for(z===0&&(z=26),N=E.length-1;N>=0;N--){for(var B=E.words[N],H=z-1;H>=0;H--){var V=B>>H&1;if(G!==O[0]&&(G=this.sqr(G)),V===0&&U===0){Y=0;continue}U<<=1,U|=V,Y++,!(Y!==R&&(N!==0||H!==0))&&(G=this.mul(G,O[U]),Y=0,U=0)}z=26}return G},L.prototype.convertTo=function(k){var E=k.umod(this.m);return E===k?E.clone():E},L.prototype.convertFrom=function(k){var E=k.clone();return E.red=null,E},t.mont=function(k){return new I(k)};function I(C){L.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(I,L),I.prototype.convertTo=function(k){return this.imod(k.ushln(this.shift))},I.prototype.convertFrom=function(k){var E=this.imod(k.mul(this.rinv));return E.red=null,E},I.prototype.imul=function(k,E){if(k.isZero()||E.isZero())return k.words[0]=0,k.length=1,k;var R=k.imul(E),O=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=R.isub(O).iushrn(this.shift),G=N;return N.cmp(this.m)>=0?G=N.isub(this.m):N.cmpn(0)<0&&(G=N.iadd(this.m)),G._forceRed(this)},I.prototype.mul=function(k,E){if(k.isZero()||E.isZero())return new t(0)._forceRed(this);var R=k.mul(E),O=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=R.isub(O).iushrn(this.shift),G=N;return N.cmp(this.m)>=0?G=N.isub(this.m):N.cmpn(0)<0&&(G=N.iadd(this.m)),G._forceRed(this)},I.prototype.invm=function(k){var E=this.imod(k._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(typeof d>"u"||d,this)},{buffer:108}],100:[function(e,d,S){d.exports=r;function r(a){var u,c,t,f=a.length,n=0;for(u=0;u<f;++u)n+=a[u].length;var o=new Array(n),l=0;for(u=0;u<f;++u){var h=a[u],i=h.length;for(c=0;c<i;++c){var s=o[l++]=new Array(i-1),p=0;for(t=0;t<i;++t)t!==c&&(s[p++]=h[t]);if(c&1){var v=s[1];s[1]=s[0],s[0]=v}}}return o}},{}],101:[function(e,d,S){d.exports=i;var r=e("typedarray-pool"),a=e("./lib/sweep"),u=e("./lib/intersect");function c(s,p){for(var v=0;v<s;++v)if(!(p[v]<=p[v+s]))return!0;return!1}function t(s,p,v,m){for(var b=0,y=0,x=0,w=s.length;x<w;++x){var g=s[x];if(!c(p,g)){for(var T=0;T<2*p;++T)v[b++]=g[T];m[y++]=x}}return y}function f(s,p,v,m){var b=s.length,y=p.length;if(!(b<=0||y<=0)){var x=s[0].length>>>1;if(!(x<=0)){var w,g=r.mallocDouble(2*x*b),T=r.mallocInt32(b);if(b=t(s,x,g,T),b>0){if(x===1&&m)a.init(b),w=a.sweepComplete(x,v,0,b,g,T,0,b,g,T);else{var M=r.mallocDouble(2*x*y),P=r.mallocInt32(y);y=t(p,x,M,P),y>0&&(a.init(b+y),x===1?w=a.sweepBipartite(x,v,0,b,g,T,0,y,M,P):w=u(x,v,m,b,g,T,y,M,P),r.free(M),r.free(P))}r.free(g),r.free(T)}return w}}}var n;function o(s,p){n.push([s,p])}function l(s){return n=[],f(s,s,o,!0),n}function h(s,p){return n=[],f(s,p,o,!1),n}function i(s,p,v){switch(arguments.length){case 1:return l(s);case 2:return typeof p=="function"?f(s,s,p,!0):h(s,p);case 3:return f(s,p,v,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":595}],102:[function(e,d,S){var r="d",a="ax",u="vv",c="fp",t="es",f="rs",n="re",o="rb",l="ri",h="rp",i="bs",s="be",p="bb",v="bi",m="bp",b="rv",y="Q",x=[r,a,u,f,n,o,l,i,s,p,v];function w(T,M,P){var L="bruteForce"+(T?"Red":"Blue")+(M?"Flip":"")+(P?"Full":""),I=["function ",L,"(",x.join(),"){","var ",t,"=2*",r,";"],C="for(var i="+f+","+h+"="+t+"*"+f+";i<"+n+";++i,"+h+"+="+t+"){var x0="+o+"["+a+"+"+h+"],x1="+o+"["+a+"+"+h+"+"+r+"],xi="+l+"[i];",k="for(var j="+i+","+m+"="+t+"*"+i+";j<"+s+";++j,"+m+"+="+t+"){var y0="+p+"["+a+"+"+m+"],"+(P?"y1="+p+"["+a+"+"+m+"+"+r+"],":"")+"yi="+v+"[j];";return T?I.push(C,y,":",k):I.push(k,y,":",C),P?I.push("if(y1<x0||x1<y0)continue;"):M?I.push("if(y0<=x0||x1<y0)continue;"):I.push("if(y0<x0||x1<y0)continue;"),I.push("for(var k="+a+"+1;k<"+r+";++k){var r0="+o+"[k+"+h+"],r1="+o+"[k+"+r+"+"+h+"],b0="+p+"[k+"+m+"],b1="+p+"[k+"+r+"+"+m+"];if(r1<b0||b1<r0)continue "+y+";}var "+b+"="+u+"("),M?I.push("yi,xi"):I.push("xi,yi"),I.push(");if("+b+"!==void 0)return "+b+";}}}"),{name:L,code:I.join("")}}function g(T){var M="bruteForce"+(T?"Full":"Partial"),P=[],L=x.slice();T||L.splice(3,0,c);var I=["function "+M+"("+L.join()+"){"];function C(R,O){var N=w(R,O,T);P.push(N.code),I.push("return "+N.name+"("+x.join()+");")}I.push("if("+n+"-"+f+">"+s+"-"+i+"){"),T?(C(!0,!1),I.push("}else{"),C(!1,!1)):(I.push("if("+c+"){"),C(!0,!0),I.push("}else{"),C(!0,!1),I.push("}}else{if("+c+"){"),C(!1,!0),I.push("}else{"),C(!1,!1),I.push("}")),I.push("}}return "+M);var k=P.join("")+I.join(""),E=new Function(k);return E()}S.partial=g(!1),S.full=g(!0)},{}],103:[function(e,d,S){d.exports=k;var r=e("typedarray-pool"),a=e("bit-twiddle"),u=e("./brute"),c=u.partial,t=u.full,f=e("./sweep"),n=e("./median"),o=e("./partition"),l=128,h=1<<22,i=1<<22,s=o("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),p=o("lo===p0",["p0"]),v=o("lo<p0",["p0"]),m=o("hi<=p0",["p0"]),b=o("lo<=p0&&p0<=hi",["p0"]),y=o("lo<p0&&p0<=hi",["p0"]),x=6,w=2,g=1024,T=r.mallocInt32(g),M=r.mallocDouble(g);function P(E,R){var O=8*a.log2(R+1)*(E+1)|0,N=a.nextPow2(x*O);T.length<N&&(r.free(T),T=r.mallocInt32(N));var G=a.nextPow2(w*O);M.length<G&&(r.free(M),M=r.mallocDouble(G))}function L(E,R,O,N,G,U,Y,z,B){var H=x*E;T[H]=R,T[H+1]=O,T[H+2]=N,T[H+3]=G,T[H+4]=U,T[H+5]=Y;var V=w*E;M[V]=z,M[V+1]=B}function I(E,R,O,N,G,U,Y,z,B,H,V){var Z=2*E,q=B*Z,J=H[q+R];e:for(var ne=G,ve=G*Z;ne<U;++ne,ve+=Z){var $=Y[ve+R],j=Y[ve+R+E];if(!(J<$||j<J)&&!(N&&J===$)){for(var ae=z[ne],ie=R+1;ie<E;++ie){var $=Y[ve+ie],j=Y[ve+ie+E],te=H[q+ie],re=H[q+ie+E];if(j<te||re<$)continue e}var ce;if(N?ce=O(V,ae):ce=O(ae,V),ce!==void 0)return ce}}}function C(E,R,O,N,G,U,Y,z,B,H){var V=2*E,Z=z*V,q=B[Z+R];e:for(var J=N,ne=N*V;J<G;++J,ne+=V){var ve=Y[J];if(ve!==H){var $=U[ne+R],j=U[ne+R+E];if(!(q<$||j<q)){for(var ae=R+1;ae<E;++ae){var $=U[ne+ae],j=U[ne+ae+E],ie=B[Z+ae],te=B[Z+ae+E];if(j<ie||te<$)continue e}var re=O(ve,H);if(re!==void 0)return re}}}}function k(E,R,O,N,G,U,Y,z,B){P(E,N+Y);var H=0,V=2*E,Z;for(L(H++,0,0,N,0,Y,O?16:0,-1/0,1/0),O||L(H++,0,0,Y,0,N,1,-1/0,1/0);H>0;){H-=1;var q=H*x,J=T[q],ne=T[q+1],ve=T[q+2],$=T[q+3],j=T[q+4],ae=T[q+5],ie=H*w,te=M[ie],re=M[ie+1],ce=ae&1,pe=!!(ae&16),fe=G,se=U,de=z,be=B;if(ce&&(fe=z,se=B,de=G,be=U),!(ae&2&&(ve=v(E,J,ne,ve,fe,se,re),ne>=ve))&&!(ae&4&&(ne=m(E,J,ne,ve,fe,se,te),ne>=ve))){var xe=ve-ne,ke=j-$;if(pe){if(E*xe*(xe+ke)<i){if(Z=f.scanComplete(E,J,R,ne,ve,fe,se,$,j,de,be),Z!==void 0)return Z;continue}}else if(E*Math.min(xe,ke)<l){if(Z=c(E,J,R,ce,ne,ve,fe,se,$,j,de,be),Z!==void 0)return Z;continue}else if(E*xe*ke<h){if(Z=f.scanBipartite(E,J,R,ce,ne,ve,fe,se,$,j,de,be),Z!==void 0)return Z;continue}var Re=s(E,J,ne,ve,fe,se,te,re);if(ne<Re)if(E*(Re-ne)<l){if(Z=t(E,J+1,R,ne,Re,fe,se,$,j,de,be),Z!==void 0)return Z}else if(J===E-2){if(ce?Z=f.sweepBipartite(E,R,$,j,de,be,ne,Re,fe,se):Z=f.sweepBipartite(E,R,ne,Re,fe,se,$,j,de,be),Z!==void 0)return Z}else L(H++,J+1,ne,Re,$,j,ce,-1/0,1/0),L(H++,J+1,$,j,ne,Re,ce^1,-1/0,1/0);if(Re<ve){var Ke=n(E,J,$,j,de,be),ze=de[V*Ke+J],Je=p(E,J,Ke,j,de,be,ze);if(Je<j&&L(H++,J,Re,ve,Je,j,(ce|4)+(pe?16:0),ze,re),$<Ke&&L(H++,J,Re,ve,$,Ke,(ce|2)+(pe?16:0),te,ze),Ke+1===Je){if(pe?Z=C(E,J,R,Re,ve,fe,se,Ke,de,be[Ke]):Z=I(E,J,R,ce,Re,ve,fe,se,Ke,de,be[Ke]),Z!==void 0)return Z}else if(Ke<Je){var qe;if(pe){if(qe=b(E,J,Re,ve,fe,se,ze),Re<qe){var Ee=p(E,J,Re,qe,fe,se,ze);if(J===E-2){if(Re<Ee&&(Z=f.sweepComplete(E,R,Re,Ee,fe,se,Ke,Je,de,be),Z!==void 0)||Ee<qe&&(Z=f.sweepBipartite(E,R,Ee,qe,fe,se,Ke,Je,de,be),Z!==void 0))return Z}else Re<Ee&&L(H++,J+1,Re,Ee,Ke,Je,16,-1/0,1/0),Ee<qe&&(L(H++,J+1,Ee,qe,Ke,Je,0,-1/0,1/0),L(H++,J+1,Ke,Je,Ee,qe,1,-1/0,1/0))}}else ce?qe=y(E,J,Re,ve,fe,se,ze):qe=b(E,J,Re,ve,fe,se,ze),Re<qe&&(J===E-2?ce?Z=f.sweepBipartite(E,R,Ke,Je,de,be,Re,qe,fe,se):Z=f.sweepBipartite(E,R,Re,qe,fe,se,Ke,Je,de,be):(L(H++,J+1,Re,qe,Ke,Je,ce,-1/0,1/0),L(H++,J+1,Ke,Je,Re,qe,ce^1,-1/0,1/0)))}}}}}},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":595}],104:[function(e,d,S){d.exports=t;var r=e("./partition"),a=r("lo<p0",["p0"]),u=8;function c(f,n,o,l,h,i){for(var s=2*f,p=s*(o+1)+n,v=o+1;v<l;++v,p+=s)for(var m=h[p],b=v,y=s*(v-1);b>o&&h[y+n]>m;--b,y-=s){for(var x=y,w=y+s,g=0;g<s;++g,++x,++w){var T=h[x];h[x]=h[w],h[w]=T}var M=i[b];i[b]=i[b-1],i[b-1]=M}}function t(f,n,o,l,h,i){if(l<=o+1)return o;for(var s=o,p=l,v=l+o>>>1,m=2*f,b=v,y=h[m*v+n];s<p;){if(p-s<u){c(f,n,s,p,h,i),y=h[m*v+n];break}var x=p-s,w=Math.random()*x+s|0,g=h[m*w+n],T=Math.random()*x+s|0,M=h[m*T+n],P=Math.random()*x+s|0,L=h[m*P+n];g<=M?L>=M?(b=T,y=M):g>=L?(b=w,y=g):(b=P,y=L):M>=L?(b=T,y=M):L>=g?(b=w,y=g):(b=P,y=L);for(var k=m*(p-1),E=m*b,I=0;I<m;++I,++k,++E){var C=h[k];h[k]=h[E],h[E]=C}var R=i[p-1];i[p-1]=i[b],i[b]=R,b=a(f,n,s,p-1,h,i,y);for(var k=m*(p-1),E=m*b,I=0;I<m;++I,++k,++E){var C=h[k];h[k]=h[E],h[E]=C}var R=i[p-1];if(i[p-1]=i[b],i[b]=R,v<b){for(p=b-1;s<p&&h[m*(p-1)+n]===y;)p-=1;p+=1}else if(b<v)for(s=b+1;s<p&&h[m*s+n]===y;)s+=1;else break}return a(f,n,o,v,h,i,h[m*v+n])}},{"./partition":105}],105:[function(e,d,S){d.exports=a;var r="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function a(u,c){var t="abcdef".split("").concat(c),f=[];return u.indexOf("lo")>=0&&f.push("lo=e[k+n]"),u.indexOf("hi")>=0&&f.push("hi=e[k+o]"),t.push(r.replace("_",f.join()).replace("$",u)),Function.apply(void 0,t)}},{}],106:[function(e,d,S){d.exports=a;var r=32;function a(i,s){s<=4*r?u(0,s-1,i):h(0,s-1,i)}function u(i,s,p){for(var v=2*(i+1),m=i+1;m<=s;++m){for(var b=p[v++],y=p[v++],x=m,w=v-2;x-- >i;){var g=p[w-2],T=p[w-1];if(g<b)break;if(g===b&&T<y)break;p[w]=g,p[w+1]=T,w-=2}p[w]=b,p[w+1]=y}}function c(i,s,p){i*=2,s*=2;var v=p[i],m=p[i+1];p[i]=p[s],p[i+1]=p[s+1],p[s]=v,p[s+1]=m}function t(i,s,p){i*=2,s*=2,p[i]=p[s],p[i+1]=p[s+1]}function f(i,s,p,v){i*=2,s*=2,p*=2;var m=v[i],b=v[i+1];v[i]=v[s],v[i+1]=v[s+1],v[s]=v[p],v[s+1]=v[p+1],v[p]=m,v[p+1]=b}function n(i,s,p,v,m){i*=2,s*=2,m[i]=m[s],m[s]=p,m[i+1]=m[s+1],m[s+1]=v}function o(i,s,p){i*=2,s*=2;var v=p[i],m=p[s];return v<m?!1:v===m?p[i+1]>p[s+1]:!0}function l(i,s,p,v){i*=2;var m=v[i];return m<s?!0:m===s?v[i+1]<p:!1}function h(i,s,p){var v=(s-i+1)/6|0,m=i+v,b=s-v,y=i+s>>1,x=y-v,w=y+v,g=m,T=x,M=y,P=w,L=b,I=i+1,C=s-1,k=0;o(g,T,p)&&(k=g,g=T,T=k),o(P,L,p)&&(k=P,P=L,L=k),o(g,M,p)&&(k=g,g=M,M=k),o(T,M,p)&&(k=T,T=M,M=k),o(g,P,p)&&(k=g,g=P,P=k),o(M,P,p)&&(k=M,M=P,P=k),o(T,L,p)&&(k=T,T=L,L=k),o(T,M,p)&&(k=T,T=M,M=k),o(P,L,p)&&(k=P,P=L,L=k);for(var E=p[2*T],R=p[2*T+1],O=p[2*P],N=p[2*P+1],G=2*g,U=2*M,Y=2*L,z=2*m,B=2*y,H=2*b,V=0;V<2;++V){var Z=p[G+V],q=p[U+V],J=p[Y+V];p[z+V]=Z,p[B+V]=q,p[H+V]=J}t(x,i,p),t(w,s,p);for(var ne=I;ne<=C;++ne)if(l(ne,E,R,p))ne!==I&&c(ne,I,p),++I;else if(!l(ne,O,N,p))for(;;)if(l(C,O,N,p)){l(C,E,R,p)?(f(ne,I,C,p),++I,--C):(c(ne,C,p),--C);break}else{if(--C<ne)break;continue}n(i,I-1,E,R,p),n(s,C+1,O,N,p),I-2-i<=r?u(i,I-2,p):h(i,I-2,p),s-(C+2)<=r?u(C+2,s,p):h(C+2,s,p),C-I<=r?u(I,C,p):h(I,C,p)}},{}],107:[function(e,d,S){d.exports={init:p,sweepBipartite:b,sweepComplete:y,scanBipartite:x,scanComplete:w};var r=e("typedarray-pool"),a=e("bit-twiddle"),u=e("./sort"),c=1<<28,t=1024,f=r.mallocInt32(t),n=r.mallocInt32(t),o=r.mallocInt32(t),l=r.mallocInt32(t),h=r.mallocInt32(t),i=r.mallocInt32(t),s=r.mallocDouble(t*8);function p(g){var T=a.nextPow2(g);f.length<T&&(r.free(f),f=r.mallocInt32(T)),n.length<T&&(r.free(n),n=r.mallocInt32(T)),o.length<T&&(r.free(o),o=r.mallocInt32(T)),l.length<T&&(r.free(l),l=r.mallocInt32(T)),h.length<T&&(r.free(h),h=r.mallocInt32(T)),i.length<T&&(r.free(i),i=r.mallocInt32(T));var M=8*T;s.length<M&&(r.free(s),s=r.mallocDouble(M))}function v(g,T,M,P){var L=T[P],I=g[M-1];g[L]=I,T[I]=L}function m(g,T,M,P){g[M]=P,T[P]=M}function b(g,T,M,P,L,I,C,k,E,R){for(var O=0,N=2*g,G=g-1,U=N-1,Y=M;Y<P;++Y){var z=I[Y],B=N*Y;s[O++]=L[B+G],s[O++]=-(z+1),s[O++]=L[B+U],s[O++]=z}for(var Y=C;Y<k;++Y){var z=R[Y]+c,H=N*Y;s[O++]=E[H+G],s[O++]=-z,s[O++]=E[H+U],s[O++]=z}var V=O>>>1;u(s,V);for(var Z=0,q=0,Y=0;Y<V;++Y){var J=s[2*Y+1]|0;if(J>=c)J=J-c|0,v(o,l,q--,J);else if(J>=0)v(f,n,Z--,J);else if(J<=-c){J=-J-c|0;for(var ne=0;ne<Z;++ne){var ve=T(f[ne],J);if(ve!==void 0)return ve}m(o,l,q++,J)}else{J=-J-1|0;for(var ne=0;ne<q;++ne){var ve=T(J,o[ne]);if(ve!==void 0)return ve}m(f,n,Z++,J)}}}function y(g,T,M,P,L,I,C,k,E,R){for(var O=0,N=2*g,G=g-1,U=N-1,Y=M;Y<P;++Y){var z=I[Y]+1<<1,B=N*Y;s[O++]=L[B+G],s[O++]=-z,s[O++]=L[B+U],s[O++]=z}for(var Y=C;Y<k;++Y){var z=R[Y]+1<<1,H=N*Y;s[O++]=E[H+G],s[O++]=-z|1,s[O++]=E[H+U],s[O++]=z|1}var V=O>>>1;u(s,V);for(var Z=0,q=0,J=0,Y=0;Y<V;++Y){var ne=s[2*Y+1]|0,ve=ne&1;if(Y<V-1&&ne>>1===s[2*Y+3]>>1&&(ve=2,Y+=1),ne<0){for(var $=-(ne>>1)-1,j=0;j<J;++j){var ae=T(h[j],$);if(ae!==void 0)return ae}if(ve!==0)for(var j=0;j<Z;++j){var ae=T(f[j],$);if(ae!==void 0)return ae}if(ve!==1)for(var j=0;j<q;++j){var ae=T(o[j],$);if(ae!==void 0)return ae}ve===0?m(f,n,Z++,$):ve===1?m(o,l,q++,$):ve===2&&m(h,i,J++,$)}else{var $=(ne>>1)-1;ve===0?v(f,n,Z--,$):ve===1?v(o,l,q--,$):ve===2&&v(h,i,J--,$)}}}function x(g,T,M,P,L,I,C,k,E,R,O,N){var G=0,U=2*g,Y=T,z=T+g,B=1,H=1;P?H=c:B=c;for(var V=L;V<I;++V){var Z=V+B,q=U*V;s[G++]=C[q+Y],s[G++]=-Z,s[G++]=C[q+z],s[G++]=Z}for(var V=E;V<R;++V){var Z=V+H,J=U*V;s[G++]=O[J+Y],s[G++]=-Z}var ne=G>>>1;u(s,ne);for(var ve=0,V=0;V<ne;++V){var $=s[2*V+1]|0;if($<0){var Z=-$,j=!1;if(Z>=c?(j=!P,Z-=c):(j=!!P,Z-=1),j)m(f,n,ve++,Z);else{var ae=N[Z],ie=U*Z,te=O[ie+T+1],re=O[ie+T+1+g];e:for(var ce=0;ce<ve;++ce){var pe=f[ce],fe=U*pe;if(!(re<C[fe+T+1]||C[fe+T+1+g]<te)){for(var se=T+2;se<g;++se)if(O[ie+se+g]<C[fe+se]||C[fe+se+g]<O[ie+se])continue e;var de=k[pe],be;if(P?be=M(ae,de):be=M(de,ae),be!==void 0)return be}}}}else v(f,n,ve--,$-B)}}function w(g,T,M,P,L,I,C,k,E,R,O){for(var N=0,G=2*g,U=T,Y=T+g,z=P;z<L;++z){var B=z+c,H=G*z;s[N++]=I[H+U],s[N++]=-B,s[N++]=I[H+Y],s[N++]=B}for(var z=k;z<E;++z){var B=z+1,V=G*z;s[N++]=R[V+U],s[N++]=-B}var Z=N>>>1;u(s,Z);for(var q=0,z=0;z<Z;++z){var J=s[2*z+1]|0;if(J<0){var B=-J;if(B>=c)f[q++]=B-c;else{B-=1;var ne=O[B],ve=G*B,$=R[ve+T+1],j=R[ve+T+1+g];e:for(var ae=0;ae<q;++ae){var ie=f[ae],te=C[ie];if(te===ne)break;var re=G*ie;if(!(j<I[re+T+1]||I[re+T+1+g]<$)){for(var ce=T+2;ce<g;++ce)if(R[ve+ce+g]<I[re+ce]||I[re+ce+g]<R[ve+ce])continue e;var pe=M(te,ne);if(pe!==void 0)return pe}}}}else{for(var B=J-c,ae=q-1;ae>=0;--ae)if(f[ae]===B){for(var ce=ae+1;ce<q;++ce)f[ce-1]=f[ce];break}--q}}}},{"./sort":106,"bit-twiddle":97,"typedarray-pool":595}],108:[function(e,d,S){},{}],109:[function(e,d,S){arguments[4][108][0].apply(S,arguments)},{dup:108}],110:[function(e,d,S){var r=typeof Reflect=="object"?Reflect:null,a=r&&typeof r.apply=="function"?r.apply:function(g,T,M){return Function.prototype.apply.call(g,T,M)},u;r&&typeof r.ownKeys=="function"?u=r.ownKeys:Object.getOwnPropertySymbols?u=function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:u=function(g){return Object.getOwnPropertyNames(g)};function c(w){console&&console.warn&&console.warn(w)}var t=Number.isNaN||function(g){return g!==g};function f(){f.init.call(this)}d.exports=f,d.exports.once=x,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var n=10;function o(w){if(typeof w!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(w){if(typeof w!="number"||w<0||t(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");n=w}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||t(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this};function l(w){return w._maxListeners===void 0?f.defaultMaxListeners:w._maxListeners}f.prototype.getMaxListeners=function(){return l(this)},f.prototype.emit=function(g){for(var T=[],M=1;M<arguments.length;M++)T.push(arguments[M]);var P=g==="error",L=this._events;if(L!==void 0)P=P&&L.error===void 0;else if(!P)return!1;if(P){var I;if(T.length>0&&(I=T[0]),I instanceof Error)throw I;var C=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw C.context=I,C}var k=L[g];if(k===void 0)return!1;if(typeof k=="function")a(k,this,T);else for(var E=k.length,R=m(k,E),M=0;M<E;++M)a(R[M],this,T);return!0};function h(w,g,T,M){var P,L,I;if(o(T),L=w._events,L===void 0?(L=w._events=Object.create(null),w._eventsCount=0):(L.newListener!==void 0&&(w.emit("newListener",g,T.listener?T.listener:T),L=w._events),I=L[g]),I===void 0)I=L[g]=T,++w._eventsCount;else if(typeof I=="function"?I=L[g]=M?[T,I]:[I,T]:M?I.unshift(T):I.push(T),P=l(w),P>0&&I.length>P&&!I.warned){I.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=w,C.type=g,C.count=I.length,c(C)}return w}f.prototype.addListener=function(g,T){return h(this,g,T,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(g,T){return h(this,g,T,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(w,g,T){var M={fired:!1,wrapFn:void 0,target:w,type:g,listener:T},P=i.bind(M);return P.listener=T,M.wrapFn=P,P}f.prototype.once=function(g,T){return o(T),this.on(g,s(this,g,T)),this},f.prototype.prependOnceListener=function(g,T){return o(T),this.prependListener(g,s(this,g,T)),this},f.prototype.removeListener=function(g,T){var M,P,L,I,C;if(o(T),P=this._events,P===void 0)return this;if(M=P[g],M===void 0)return this;if(M===T||M.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete P[g],P.removeListener&&this.emit("removeListener",g,M.listener||T));else if(typeof M!="function"){for(L=-1,I=M.length-1;I>=0;I--)if(M[I]===T||M[I].listener===T){C=M[I].listener,L=I;break}if(L<0)return this;L===0?M.shift():b(M,L),M.length===1&&(P[g]=M[0]),P.removeListener!==void 0&&this.emit("removeListener",g,C||T)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(g){var T,M,P;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[g]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[g]),this;if(arguments.length===0){var L=Object.keys(M),I;for(P=0;P<L.length;++P)I=L[P],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=M[g],typeof T=="function")this.removeListener(g,T);else if(T!==void 0)for(P=T.length-1;P>=0;P--)this.removeListener(g,T[P]);return this};function p(w,g,T){var M=w._events;if(M===void 0)return[];var P=M[g];return P===void 0?[]:typeof P=="function"?T?[P.listener||P]:[P]:T?y(P):m(P,P.length)}f.prototype.listeners=function(g){return p(this,g,!0)},f.prototype.rawListeners=function(g){return p(this,g,!1)},f.listenerCount=function(w,g){return typeof w.listenerCount=="function"?w.listenerCount(g):v.call(w,g)},f.prototype.listenerCount=v;function v(w){var g=this._events;if(g!==void 0){var T=g[w];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function m(w,g){for(var T=new Array(g),M=0;M<g;++M)T[M]=w[M];return T}function b(w,g){for(;g+1<w.length;g++)w[g]=w[g+1];w.pop()}function y(w){for(var g=new Array(w.length),T=0;T<g.length;++T)g[T]=w[T].listener||w[T];return g}function x(w,g){return new Promise(function(T,M){function P(){L!==void 0&&w.removeListener("error",L),T([].slice.call(arguments))}var L;g!=="error"&&(L=function(C){w.removeListener(g,P),M(C)},w.once("error",L)),w.once(g,P)})}},{}],111:[function(e,d,S){(function(r){(function(){var a=e("base64-js"),u=e("ieee754");S.Buffer=n,S.SlowBuffer=y,S.INSPECT_MAX_BYTES=50;var c=2147483647;S.kMaxLength=c,n.TYPED_ARRAY_SUPPORT=t(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var fe=new Uint8Array(1);return fe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},fe.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function f(fe){if(fe>c)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var se=new Uint8Array(fe);return se.__proto__=n.prototype,se}function n(fe,se,de){if(typeof fe=="number"){if(typeof se=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return i(fe)}return o(fe,se,de)}typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192;function o(fe,se,de){if(typeof fe=="string")return s(fe,se);if(ArrayBuffer.isView(fe))return p(fe);if(fe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe);if(ce(fe,ArrayBuffer)||fe&&ce(fe.buffer,ArrayBuffer))return v(fe,se,de);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var be=fe.valueOf&&fe.valueOf();if(be!=null&&be!==fe)return n.from(be,se,de);var xe=m(fe);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return n.from(fe[Symbol.toPrimitive]("string"),se,de);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe)}n.from=function(fe,se,de){return o(fe,se,de)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array;function l(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function h(fe,se,de){return l(fe),fe<=0?f(fe):se!==void 0?typeof de=="string"?f(fe).fill(se,de):f(fe).fill(se):f(fe)}n.alloc=function(fe,se,de){return h(fe,se,de)};function i(fe){return l(fe),f(fe<0?0:b(fe)|0)}n.allocUnsafe=function(fe){return i(fe)},n.allocUnsafeSlow=function(fe){return i(fe)};function s(fe,se){if((typeof se!="string"||se==="")&&(se="utf8"),!n.isEncoding(se))throw new TypeError("Unknown encoding: "+se);var de=x(fe,se)|0,be=f(de),xe=be.write(fe,se);return xe!==de&&(be=be.slice(0,xe)),be}function p(fe){for(var se=fe.length<0?0:b(fe.length)|0,de=f(se),be=0;be<se;be+=1)de[be]=fe[be]&255;return de}function v(fe,se,de){if(se<0||fe.byteLength<se)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<se+(de||0))throw new RangeError('"length" is outside of buffer bounds');var be;return se===void 0&&de===void 0?be=new Uint8Array(fe):de===void 0?be=new Uint8Array(fe,se):be=new Uint8Array(fe,se,de),be.__proto__=n.prototype,be}function m(fe){if(n.isBuffer(fe)){var se=b(fe.length)|0,de=f(se);return de.length===0||fe.copy(de,0,0,se),de}if(fe.length!==void 0)return typeof fe.length!="number"||pe(fe.length)?f(0):p(fe);if(fe.type==="Buffer"&&Array.isArray(fe.data))return p(fe.data)}function b(fe){if(fe>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return fe|0}function y(fe){return+fe!=fe&&(fe=0),n.alloc(+fe)}n.isBuffer=function(se){return se!=null&&se._isBuffer===!0&&se!==n.prototype},n.compare=function(se,de){if(ce(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),ce(de,Uint8Array)&&(de=n.from(de,de.offset,de.byteLength)),!n.isBuffer(se)||!n.isBuffer(de))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(se===de)return 0;for(var be=se.length,xe=de.length,ke=0,Re=Math.min(be,xe);ke<Re;++ke)if(se[ke]!==de[ke]){be=se[ke],xe=de[ke];break}return be<xe?-1:xe<be?1:0},n.isEncoding=function(se){switch(String(se).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(se,de){if(!Array.isArray(se))throw new TypeError('"list" argument must be an Array of Buffers');if(se.length===0)return n.alloc(0);var be;if(de===void 0)for(de=0,be=0;be<se.length;++be)de+=se[be].length;var xe=n.allocUnsafe(de),ke=0;for(be=0;be<se.length;++be){var Re=se[be];if(ce(Re,Uint8Array)&&(Re=n.from(Re)),!n.isBuffer(Re))throw new TypeError('"list" argument must be an Array of Buffers');Re.copy(xe,ke),ke+=Re.length}return xe};function x(fe,se){if(n.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||ce(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof fe);var de=fe.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&de===0)return 0;for(var xe=!1;;)switch(se){case"ascii":case"latin1":case"binary":return de;case"utf8":case"utf-8":return j(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de*2;case"hex":return de>>>1;case"base64":return te(fe).length;default:if(xe)return be?-1:j(fe).length;se=(""+se).toLowerCase(),xe=!0}}n.byteLength=x;function w(fe,se,de){var be=!1;if((se===void 0||se<0)&&(se=0),se>this.length||((de===void 0||de>this.length)&&(de=this.length),de<=0)||(de>>>=0,se>>>=0,de<=se))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return z(this,se,de);case"utf8":case"utf-8":return O(this,se,de);case"ascii":return U(this,se,de);case"latin1":case"binary":return Y(this,se,de);case"base64":return R(this,se,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,se,de);default:if(be)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),be=!0}}n.prototype._isBuffer=!0;function g(fe,se,de){var be=fe[se];fe[se]=fe[de],fe[de]=be}n.prototype.swap16=function(){var se=this.length;if(se%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var de=0;de<se;de+=2)g(this,de,de+1);return this},n.prototype.swap32=function(){var se=this.length;if(se%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var de=0;de<se;de+=4)g(this,de,de+3),g(this,de+1,de+2);return this},n.prototype.swap64=function(){var se=this.length;if(se%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var de=0;de<se;de+=8)g(this,de,de+7),g(this,de+1,de+6),g(this,de+2,de+5),g(this,de+3,de+4);return this},n.prototype.toString=function(){var se=this.length;return se===0?"":arguments.length===0?O(this,0,se):w.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(se){if(!n.isBuffer(se))throw new TypeError("Argument must be a Buffer");return this===se?!0:n.compare(this,se)===0},n.prototype.inspect=function(){var se="",de=S.INSPECT_MAX_BYTES;return se=this.toString("hex",0,de).replace(/(.{2})/g,"$1 ").trim(),this.length>de&&(se+=" ... "),"<Buffer "+se+">"},n.prototype.compare=function(se,de,be,xe,ke){if(ce(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),!n.isBuffer(se))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof se);if(de===void 0&&(de=0),be===void 0&&(be=se?se.length:0),xe===void 0&&(xe=0),ke===void 0&&(ke=this.length),de<0||be>se.length||xe<0||ke>this.length)throw new RangeError("out of range index");if(xe>=ke&&de>=be)return 0;if(xe>=ke)return-1;if(de>=be)return 1;if(de>>>=0,be>>>=0,xe>>>=0,ke>>>=0,this===se)return 0;for(var Re=ke-xe,Ke=be-de,ze=Math.min(Re,Ke),Je=this.slice(xe,ke),qe=se.slice(de,be),Ee=0;Ee<ze;++Ee)if(Je[Ee]!==qe[Ee]){Re=Je[Ee],Ke=qe[Ee];break}return Re<Ke?-1:Ke<Re?1:0};function T(fe,se,de,be,xe){if(fe.length===0)return-1;if(typeof de=="string"?(be=de,de=0):de>2147483647?de=2147483647:de<-2147483648&&(de=-2147483648),de=+de,pe(de)&&(de=xe?0:fe.length-1),de<0&&(de=fe.length+de),de>=fe.length){if(xe)return-1;de=fe.length-1}else if(de<0)if(xe)de=0;else return-1;if(typeof se=="string"&&(se=n.from(se,be)),n.isBuffer(se))return se.length===0?-1:M(fe,se,de,be,xe);if(typeof se=="number")return se=se&255,typeof Uint8Array.prototype.indexOf=="function"?xe?Uint8Array.prototype.indexOf.call(fe,se,de):Uint8Array.prototype.lastIndexOf.call(fe,se,de):M(fe,[se],de,be,xe);throw new TypeError("val must be string, number or Buffer")}function M(fe,se,de,be,xe){var ke=1,Re=fe.length,Ke=se.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(fe.length<2||se.length<2)return-1;ke=2,Re/=2,Ke/=2,de/=2}function ze(Be,$e){return ke===1?Be[$e]:Be.readUInt16BE($e*ke)}var Je;if(xe){var qe=-1;for(Je=de;Je<Re;Je++)if(ze(fe,Je)===ze(se,qe===-1?0:Je-qe)){if(qe===-1&&(qe=Je),Je-qe+1===Ke)return qe*ke}else qe!==-1&&(Je-=Je-qe),qe=-1}else for(de+Ke>Re&&(de=Re-Ke),Je=de;Je>=0;Je--){for(var Ee=!0,Ae=0;Ae<Ke;Ae++)if(ze(fe,Je+Ae)!==ze(se,Ae)){Ee=!1;break}if(Ee)return Je}return-1}n.prototype.includes=function(se,de,be){return this.indexOf(se,de,be)!==-1},n.prototype.indexOf=function(se,de,be){return T(this,se,de,be,!0)},n.prototype.lastIndexOf=function(se,de,be){return T(this,se,de,be,!1)};function P(fe,se,de,be){de=Number(de)||0;var xe=fe.length-de;be?(be=Number(be),be>xe&&(be=xe)):be=xe;var ke=se.length;be>ke/2&&(be=ke/2);for(var Re=0;Re<be;++Re){var Ke=parseInt(se.substr(Re*2,2),16);if(pe(Ke))return Re;fe[de+Re]=Ke}return Re}function L(fe,se,de,be){return re(j(se,fe.length-de),fe,de,be)}function I(fe,se,de,be){return re(ae(se),fe,de,be)}function C(fe,se,de,be){return I(fe,se,de,be)}function k(fe,se,de,be){return re(te(se),fe,de,be)}function E(fe,se,de,be){return re(ie(se,fe.length-de),fe,de,be)}n.prototype.write=function(se,de,be,xe){if(de===void 0)xe="utf8",be=this.length,de=0;else if(be===void 0&&typeof de=="string")xe=de,be=this.length,de=0;else if(isFinite(de))de=de>>>0,isFinite(be)?(be=be>>>0,xe===void 0&&(xe="utf8")):(xe=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ke=this.length-de;if((be===void 0||be>ke)&&(be=ke),se.length>0&&(be<0||de<0)||de>this.length)throw new RangeError("Attempt to write outside buffer bounds");xe||(xe="utf8");for(var Re=!1;;)switch(xe){case"hex":return P(this,se,de,be);case"utf8":case"utf-8":return L(this,se,de,be);case"ascii":return I(this,se,de,be);case"latin1":case"binary":return C(this,se,de,be);case"base64":return k(this,se,de,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,se,de,be);default:if(Re)throw new TypeError("Unknown encoding: "+xe);xe=(""+xe).toLowerCase(),Re=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(fe,se,de){return se===0&&de===fe.length?a.fromByteArray(fe):a.fromByteArray(fe.slice(se,de))}function O(fe,se,de){de=Math.min(fe.length,de);for(var be=[],xe=se;xe<de;){var ke=fe[xe],Re=null,Ke=ke>239?4:ke>223?3:ke>191?2:1;if(xe+Ke<=de){var ze,Je,qe,Ee;switch(Ke){case 1:ke<128&&(Re=ke);break;case 2:ze=fe[xe+1],(ze&192)===128&&(Ee=(ke&31)<<6|ze&63,Ee>127&&(Re=Ee));break;case 3:ze=fe[xe+1],Je=fe[xe+2],(ze&192)===128&&(Je&192)===128&&(Ee=(ke&15)<<12|(ze&63)<<6|Je&63,Ee>2047&&(Ee<55296||Ee>57343)&&(Re=Ee));break;case 4:ze=fe[xe+1],Je=fe[xe+2],qe=fe[xe+3],(ze&192)===128&&(Je&192)===128&&(qe&192)===128&&(Ee=(ke&15)<<18|(ze&63)<<12|(Je&63)<<6|qe&63,Ee>65535&&Ee<1114112&&(Re=Ee))}}Re===null?(Re=65533,Ke=1):Re>65535&&(Re-=65536,be.push(Re>>>10&1023|55296),Re=56320|Re&1023),be.push(Re),xe+=Ke}return G(be)}var N=4096;function G(fe){var se=fe.length;if(se<=N)return String.fromCharCode.apply(String,fe);for(var de="",be=0;be<se;)de+=String.fromCharCode.apply(String,fe.slice(be,be+=N));return de}function U(fe,se,de){var be="";de=Math.min(fe.length,de);for(var xe=se;xe<de;++xe)be+=String.fromCharCode(fe[xe]&127);return be}function Y(fe,se,de){var be="";de=Math.min(fe.length,de);for(var xe=se;xe<de;++xe)be+=String.fromCharCode(fe[xe]);return be}function z(fe,se,de){var be=fe.length;(!se||se<0)&&(se=0),(!de||de<0||de>be)&&(de=be);for(var xe="",ke=se;ke<de;++ke)xe+=$(fe[ke]);return xe}function B(fe,se,de){for(var be=fe.slice(se,de),xe="",ke=0;ke<be.length;ke+=2)xe+=String.fromCharCode(be[ke]+be[ke+1]*256);return xe}n.prototype.slice=function(se,de){var be=this.length;se=~~se,de=de===void 0?be:~~de,se<0?(se+=be,se<0&&(se=0)):se>be&&(se=be),de<0?(de+=be,de<0&&(de=0)):de>be&&(de=be),de<se&&(de=se);var xe=this.subarray(se,de);return xe.__proto__=n.prototype,xe};function H(fe,se,de){if(fe%1!==0||fe<0)throw new RangeError("offset is not uint");if(fe+se>de)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUIntLE=function(se,de,be){se=se>>>0,de=de>>>0,be||H(se,de,this.length);for(var xe=this[se],ke=1,Re=0;++Re<de&&(ke*=256);)xe+=this[se+Re]*ke;return xe},n.prototype.readUIntBE=function(se,de,be){se=se>>>0,de=de>>>0,be||H(se,de,this.length);for(var xe=this[se+--de],ke=1;de>0&&(ke*=256);)xe+=this[se+--de]*ke;return xe},n.prototype.readUInt8=function(se,de){return se=se>>>0,de||H(se,1,this.length),this[se]},n.prototype.readUInt16LE=function(se,de){return se=se>>>0,de||H(se,2,this.length),this[se]|this[se+1]<<8},n.prototype.readUInt16BE=function(se,de){return se=se>>>0,de||H(se,2,this.length),this[se]<<8|this[se+1]},n.prototype.readUInt32LE=function(se,de){return se=se>>>0,de||H(se,4,this.length),(this[se]|this[se+1]<<8|this[se+2]<<16)+this[se+3]*16777216},n.prototype.readUInt32BE=function(se,de){return se=se>>>0,de||H(se,4,this.length),this[se]*16777216+(this[se+1]<<16|this[se+2]<<8|this[se+3])},n.prototype.readIntLE=function(se,de,be){se=se>>>0,de=de>>>0,be||H(se,de,this.length);for(var xe=this[se],ke=1,Re=0;++Re<de&&(ke*=256);)xe+=this[se+Re]*ke;return ke*=128,xe>=ke&&(xe-=Math.pow(2,8*de)),xe},n.prototype.readIntBE=function(se,de,be){se=se>>>0,de=de>>>0,be||H(se,de,this.length);for(var xe=de,ke=1,Re=this[se+--xe];xe>0&&(ke*=256);)Re+=this[se+--xe]*ke;return ke*=128,Re>=ke&&(Re-=Math.pow(2,8*de)),Re},n.prototype.readInt8=function(se,de){return se=se>>>0,de||H(se,1,this.length),this[se]&128?(255-this[se]+1)*-1:this[se]},n.prototype.readInt16LE=function(se,de){se=se>>>0,de||H(se,2,this.length);var be=this[se]|this[se+1]<<8;return be&32768?be|4294901760:be},n.prototype.readInt16BE=function(se,de){se=se>>>0,de||H(se,2,this.length);var be=this[se+1]|this[se]<<8;return be&32768?be|4294901760:be},n.prototype.readInt32LE=function(se,de){return se=se>>>0,de||H(se,4,this.length),this[se]|this[se+1]<<8|this[se+2]<<16|this[se+3]<<24},n.prototype.readInt32BE=function(se,de){return se=se>>>0,de||H(se,4,this.length),this[se]<<24|this[se+1]<<16|this[se+2]<<8|this[se+3]},n.prototype.readFloatLE=function(se,de){return se=se>>>0,de||H(se,4,this.length),u.read(this,se,!0,23,4)},n.prototype.readFloatBE=function(se,de){return se=se>>>0,de||H(se,4,this.length),u.read(this,se,!1,23,4)},n.prototype.readDoubleLE=function(se,de){return se=se>>>0,de||H(se,8,this.length),u.read(this,se,!0,52,8)},n.prototype.readDoubleBE=function(se,de){return se=se>>>0,de||H(se,8,this.length),u.read(this,se,!1,52,8)};function V(fe,se,de,be,xe,ke){if(!n.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(se>xe||se<ke)throw new RangeError('"value" argument is out of bounds');if(de+be>fe.length)throw new RangeError("Index out of range")}n.prototype.writeUIntLE=function(se,de,be,xe){if(se=+se,de=de>>>0,be=be>>>0,!xe){var ke=Math.pow(2,8*be)-1;V(this,se,de,be,ke,0)}var Re=1,Ke=0;for(this[de]=se&255;++Ke<be&&(Re*=256);)this[de+Ke]=se/Re&255;return de+be},n.prototype.writeUIntBE=function(se,de,be,xe){if(se=+se,de=de>>>0,be=be>>>0,!xe){var ke=Math.pow(2,8*be)-1;V(this,se,de,be,ke,0)}var Re=be-1,Ke=1;for(this[de+Re]=se&255;--Re>=0&&(Ke*=256);)this[de+Re]=se/Ke&255;return de+be},n.prototype.writeUInt8=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,1,255,0),this[de]=se&255,de+1},n.prototype.writeUInt16LE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,2,65535,0),this[de]=se&255,this[de+1]=se>>>8,de+2},n.prototype.writeUInt16BE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,2,65535,0),this[de]=se>>>8,this[de+1]=se&255,de+2},n.prototype.writeUInt32LE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,4,4294967295,0),this[de+3]=se>>>24,this[de+2]=se>>>16,this[de+1]=se>>>8,this[de]=se&255,de+4},n.prototype.writeUInt32BE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,4,4294967295,0),this[de]=se>>>24,this[de+1]=se>>>16,this[de+2]=se>>>8,this[de+3]=se&255,de+4},n.prototype.writeIntLE=function(se,de,be,xe){if(se=+se,de=de>>>0,!xe){var ke=Math.pow(2,8*be-1);V(this,se,de,be,ke-1,-ke)}var Re=0,Ke=1,ze=0;for(this[de]=se&255;++Re<be&&(Ke*=256);)se<0&&ze===0&&this[de+Re-1]!==0&&(ze=1),this[de+Re]=(se/Ke>>0)-ze&255;return de+be},n.prototype.writeIntBE=function(se,de,be,xe){if(se=+se,de=de>>>0,!xe){var ke=Math.pow(2,8*be-1);V(this,se,de,be,ke-1,-ke)}var Re=be-1,Ke=1,ze=0;for(this[de+Re]=se&255;--Re>=0&&(Ke*=256);)se<0&&ze===0&&this[de+Re+1]!==0&&(ze=1),this[de+Re]=(se/Ke>>0)-ze&255;return de+be},n.prototype.writeInt8=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,1,127,-128),se<0&&(se=255+se+1),this[de]=se&255,de+1},n.prototype.writeInt16LE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,2,32767,-32768),this[de]=se&255,this[de+1]=se>>>8,de+2},n.prototype.writeInt16BE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,2,32767,-32768),this[de]=se>>>8,this[de+1]=se&255,de+2},n.prototype.writeInt32LE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,4,2147483647,-2147483648),this[de]=se&255,this[de+1]=se>>>8,this[de+2]=se>>>16,this[de+3]=se>>>24,de+4},n.prototype.writeInt32BE=function(se,de,be){return se=+se,de=de>>>0,be||V(this,se,de,4,2147483647,-2147483648),se<0&&(se=4294967295+se+1),this[de]=se>>>24,this[de+1]=se>>>16,this[de+2]=se>>>8,this[de+3]=se&255,de+4};function Z(fe,se,de,be,xe,ke){if(de+be>fe.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("Index out of range")}function q(fe,se,de,be,xe){return se=+se,de=de>>>0,xe||Z(fe,se,de,4),u.write(fe,se,de,be,23,4),de+4}n.prototype.writeFloatLE=function(se,de,be){return q(this,se,de,!0,be)},n.prototype.writeFloatBE=function(se,de,be){return q(this,se,de,!1,be)};function J(fe,se,de,be,xe){return se=+se,de=de>>>0,xe||Z(fe,se,de,8),u.write(fe,se,de,be,52,8),de+8}n.prototype.writeDoubleLE=function(se,de,be){return J(this,se,de,!0,be)},n.prototype.writeDoubleBE=function(se,de,be){return J(this,se,de,!1,be)},n.prototype.copy=function(se,de,be,xe){if(!n.isBuffer(se))throw new TypeError("argument should be a Buffer");if(be||(be=0),!xe&&xe!==0&&(xe=this.length),de>=se.length&&(de=se.length),de||(de=0),xe>0&&xe<be&&(xe=be),xe===be||se.length===0||this.length===0)return 0;if(de<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("sourceEnd out of bounds");xe>this.length&&(xe=this.length),se.length-de<xe-be&&(xe=se.length-de+be);var ke=xe-be;if(this===se&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(de,be,xe);else if(this===se&&be<de&&de<xe)for(var Re=ke-1;Re>=0;--Re)se[Re+de]=this[Re+be];else Uint8Array.prototype.set.call(se,this.subarray(be,xe),de);return ke},n.prototype.fill=function(se,de,be,xe){if(typeof se=="string"){if(typeof de=="string"?(xe=de,de=0,be=this.length):typeof be=="string"&&(xe=be,be=this.length),xe!==void 0&&typeof xe!="string")throw new TypeError("encoding must be a string");if(typeof xe=="string"&&!n.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);if(se.length===1){var ke=se.charCodeAt(0);(xe==="utf8"&&ke<128||xe==="latin1")&&(se=ke)}}else typeof se=="number"&&(se=se&255);if(de<0||this.length<de||this.length<be)throw new RangeError("Out of range index");if(be<=de)return this;de=de>>>0,be=be===void 0?this.length:be>>>0,se||(se=0);var Re;if(typeof se=="number")for(Re=de;Re<be;++Re)this[Re]=se;else{var Ke=n.isBuffer(se)?se:n.from(se,xe),ze=Ke.length;if(ze===0)throw new TypeError('The value "'+se+'" is invalid for argument "value"');for(Re=0;Re<be-de;++Re)this[Re+de]=Ke[Re%ze]}return this};var ne=/[^+/0-9A-Za-z-_]/g;function ve(fe){if(fe=fe.split("=")[0],fe=fe.trim().replace(ne,""),fe.length<2)return"";for(;fe.length%4!==0;)fe=fe+"=";return fe}function $(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function j(fe,se){se=se||1/0;for(var de,be=fe.length,xe=null,ke=[],Re=0;Re<be;++Re){if(de=fe.charCodeAt(Re),de>55295&&de<57344){if(!xe){if(de>56319){(se-=3)>-1&&ke.push(239,191,189);continue}else if(Re+1===be){(se-=3)>-1&&ke.push(239,191,189);continue}xe=de;continue}if(de<56320){(se-=3)>-1&&ke.push(239,191,189),xe=de;continue}de=(xe-55296<<10|de-56320)+65536}else xe&&(se-=3)>-1&&ke.push(239,191,189);if(xe=null,de<128){if((se-=1)<0)break;ke.push(de)}else if(de<2048){if((se-=2)<0)break;ke.push(de>>6|192,de&63|128)}else if(de<65536){if((se-=3)<0)break;ke.push(de>>12|224,de>>6&63|128,de&63|128)}else if(de<1114112){if((se-=4)<0)break;ke.push(de>>18|240,de>>12&63|128,de>>6&63|128,de&63|128)}else throw new Error("Invalid code point")}return ke}function ae(fe){for(var se=[],de=0;de<fe.length;++de)se.push(fe.charCodeAt(de)&255);return se}function ie(fe,se){for(var de,be,xe,ke=[],Re=0;Re<fe.length&&!((se-=2)<0);++Re)de=fe.charCodeAt(Re),be=de>>8,xe=de%256,ke.push(xe),ke.push(be);return ke}function te(fe){return a.toByteArray(ve(fe))}function re(fe,se,de,be){for(var xe=0;xe<be&&!(xe+de>=se.length||xe>=fe.length);++xe)se[xe+de]=fe[xe];return xe}function ce(fe,se){return fe instanceof se||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===se.name}function pe(fe){return fe!==fe}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:442}],112:[function(e,d,S){var r=e("./lib/monotone"),a=e("./lib/triangulation"),u=e("./lib/delaunay"),c=e("./lib/filter");d.exports=l;function t(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function f(h,i){return h[0]-i[0]||h[1]-i[1]}function n(h){return h.map(t).sort(f)}function o(h,i,s){return i in h?h[i]:s}function l(h,i,s){Array.isArray(i)?(s=s||{},i=i||[]):(s=i||{},i=[]);var p=!!o(s,"delaunay",!0),v=!!o(s,"interior",!0),m=!!o(s,"exterior",!0),b=!!o(s,"infinity",!1);if(!v&&!m||h.length===0)return[];var y=r(h,i);if(p||v!==m||b){for(var x=a(h.length,n(i)),w=0;w<y.length;++w){var g=y[w];x.addTriangle(g[0],g[1],g[2])}return p&&u(h,x),m?v?b?c(x,0,b):x.cells():c(x,1,b):c(x,-1)}else return y}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(e,d,S){var r=e("robust-in-sphere")[4];e("binary-search-bounds"),d.exports=u;function a(c,t,f,n,o,l){var h=t.opposite(n,o);if(!(h<0)){if(o<n){var i=n;n=o,o=i,i=l,l=h,h=i}t.isConstraint(n,o)||r(c[n],c[o],c[l],c[h])<0&&f.push(n,o)}}function u(c,t){for(var f=[],n=c.length,o=t.stars,l=0;l<n;++l)for(var h=o[l],i=1;i<h.length;i+=2){var s=h[i];if(!(s<l)&&!t.isConstraint(l,s)){for(var p=h[i-1],v=-1,m=1;m<h.length;m+=2)if(h[m-1]===s){v=h[m];break}v<0||r(c[l],c[s],c[p],c[v])<0&&f.push(l,s)}}for(;f.length>0;){for(var s=f.pop(),l=f.pop(),p=-1,v=-1,h=o[l],b=1;b<h.length;b+=2){var y=h[b-1],x=h[b];y===s?v=x:x===s&&(p=y)}p<0||v<0||r(c[l],c[s],c[p],c[v])>=0||(t.flip(l,s),a(c,t,f,p,l,v),a(c,t,f,l,v,p),a(c,t,f,v,s,p),a(c,t,f,s,p,v))}}},{"binary-search-bounds":96,"robust-in-sphere":546}],114:[function(e,d,S){var r=e("binary-search-bounds");d.exports=n;function a(o,l,h,i,s,p,v){this.cells=o,this.neighbor=l,this.flags=i,this.constraint=h,this.active=s,this.next=p,this.boundary=v}var u=a.prototype;function c(o,l){return o[0]-l[0]||o[1]-l[1]||o[2]-l[2]}u.locate=function(){var o=[0,0,0];return function(l,h,i){var s=l,p=h,v=i;return h<i?h<l&&(s=h,p=i,v=l):i<l&&(s=i,p=l,v=h),s<0?-1:(o[0]=s,o[1]=p,o[2]=v,r.eq(this.cells,o,c))}}();function t(o,l){for(var h=o.cells(),i=h.length,s=0;s<i;++s){var p=h[s],v=p[0],m=p[1],b=p[2];m<b?m<v&&(p[0]=m,p[1]=b,p[2]=v):b<v&&(p[0]=b,p[1]=v,p[2]=m)}h.sort(c);for(var y=new Array(i),s=0;s<y.length;++s)y[s]=0;var x=[],w=[],g=new Array(3*i),T=new Array(3*i),M=null;l&&(M=[]);for(var P=new a(h,g,T,y,x,w,M),s=0;s<i;++s)for(var p=h[s],L=0;L<3;++L){var v=p[L],m=p[(L+1)%3],I=g[3*s+L]=P.locate(m,v,o.opposite(m,v)),C=T[3*s+L]=o.isConstraint(v,m);I<0&&(C?w.push(s):(x.push(s),y[s]=1),l&&M.push([m,v,-1]))}return P}function f(o,l,h){for(var i=0,s=0;s<o.length;++s)l[s]===h&&(o[i++]=o[s]);return o.length=i,o}function n(o,l,h){var i=t(o,h);if(l===0)return h?i.cells.concat(i.boundary):i.cells;for(var s=1,p=i.active,v=i.next,m=i.flags,b=i.cells,y=i.constraint,x=i.neighbor;p.length>0||v.length>0;){for(;p.length>0;){var w=p.pop();if(m[w]!==-s){m[w]=s,b[w];for(var g=0;g<3;++g){var T=x[3*w+g];T>=0&&m[T]===0&&(y[3*w+g]?v.push(T):(p.push(T),m[T]=s))}}}var M=v;v=p,p=M,v.length=0,s=-s}var P=f(b,m,l);return h?P.concat(i.boundary):P}},{"binary-search-bounds":96}],115:[function(e,d,S){var r=e("binary-search-bounds"),a=e("robust-orientation")[3],u=0,c=1,t=2;d.exports=v;function f(m,b,y,x,w){this.a=m,this.b=b,this.idx=y,this.lowerIds=x,this.upperIds=w}function n(m,b,y,x){this.a=m,this.b=b,this.type=y,this.idx=x}function o(m,b){var y=m.a[0]-b.a[0]||m.a[1]-b.a[1]||m.type-b.type;return y||m.type!==u&&(y=a(m.a,m.b,b.b),y)?y:m.idx-b.idx}function l(m,b){return a(m.a,m.b,b)}function h(m,b,y,x,w){for(var g=r.lt(b,x,l),T=r.gt(b,x,l),M=g;M<T;++M){for(var P=b[M],L=P.lowerIds,C=L.length;C>1&&a(y[L[C-2]],y[L[C-1]],x)>0;)m.push([L[C-1],L[C-2],w]),C-=1;L.length=C,L.push(w);for(var I=P.upperIds,C=I.length;C>1&&a(y[I[C-2]],y[I[C-1]],x)<0;)m.push([I[C-2],I[C-1],w]),C-=1;I.length=C,I.push(w)}}function i(m,b){var y;return m.a[0]<b.a[0]?y=a(m.a,m.b,b.a):y=a(b.b,b.a,m.a),y||(b.b[0]<m.b[0]?y=a(m.a,m.b,b.b):y=a(b.b,b.a,m.b),y||m.idx-b.idx)}function s(m,b,y){var x=r.le(m,y,i),w=m[x],g=w.upperIds,T=g[g.length-1];w.upperIds=[T],m.splice(x+1,0,new f(y.a,y.b,y.idx,[T],g))}function p(m,b,y){var x=y.a;y.a=y.b,y.b=x;var w=r.eq(m,y,i),g=m[w],T=m[w-1];T.upperIds=g.upperIds,m.splice(w,1)}function v(m,b){for(var y=m.length,x=b.length,w=[],g=0;g<y;++g)w.push(new n(m[g],null,u,g));for(var g=0;g<x;++g){var T=b[g],M=m[T[0]],P=m[T[1]];M[0]<P[0]?w.push(new n(M,P,t,g),new n(P,M,c,g)):M[0]>P[0]&&w.push(new n(P,M,t,g),new n(M,P,c,g))}w.sort(o);for(var L=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),I=[new f([L,1],[L,0],-1,[],[])],C=[],g=0,k=w.length;g<k;++g){var E=w[g],R=E.type;R===u?h(C,I,m,E.a,E.idx):R===t?s(I,m,E):p(I,m,E)}return C}},{"binary-search-bounds":96,"robust-orientation":548}],116:[function(e,d,S){var r=e("binary-search-bounds");d.exports=t;function a(f,n){this.stars=f,this.edges=n}var u=a.prototype;function c(f,n,o){for(var l=1,h=f.length;l<h;l+=2)if(f[l-1]===n&&f[l]===o){f[l-1]=f[h-2],f[l]=f[h-1],f.length=h-2;return}}u.isConstraint=function(){var f=[0,0];function n(o,l){return o[0]-l[0]||o[1]-l[1]}return function(o,l){return f[0]=Math.min(o,l),f[1]=Math.max(o,l),r.eq(this.edges,f,n)>=0}}(),u.removeTriangle=function(f,n,o){var l=this.stars;c(l[f],n,o),c(l[n],o,f),c(l[o],f,n)},u.addTriangle=function(f,n,o){var l=this.stars;l[f].push(n,o),l[n].push(o,f),l[o].push(f,n)},u.opposite=function(f,n){for(var o=this.stars[n],l=1,h=o.length;l<h;l+=2)if(o[l]===f)return o[l-1];return-1},u.flip=function(f,n){var o=this.opposite(f,n),l=this.opposite(n,f);this.removeTriangle(f,n,o),this.removeTriangle(n,f,l),this.addTriangle(f,l,o),this.addTriangle(n,o,l)},u.edges=function(){for(var f=this.stars,n=[],o=0,l=f.length;o<l;++o)for(var h=f[o],i=0,s=h.length;i<s;i+=2)n.push([h[i],h[i+1]]);return n},u.cells=function(){for(var f=this.stars,n=[],o=0,l=f.length;o<l;++o)for(var h=f[o],i=0,s=h.length;i<s;i+=2){var p=h[i],v=h[i+1];o<Math.min(p,v)&&n.push([o,p,v])}return n};function t(f,n){for(var o=new Array(f),l=0;l<f;++l)o[l]=[];return new a(o,n)}},{"binary-search-bounds":96}],117:[function(e,d,S){d.exports=r;function r(a){for(var u=1,c=1;c<a.length;++c)for(var t=0;t<c;++t)if(a[c]<a[t])u=-u;else if(a[t]===a[c])return 0;return u}},{}],118:[function(e,d,S){var r=e("dup"),a=e("robust-linear-solve");function u(f,n){for(var o=0,l=f.length,h=0;h<l;++h)o+=f[h]*n[h];return o}function c(f){var n=f.length;if(n===0)return[];f[0].length;var o=r([f.length+1,f.length+1],1),l=r([f.length+1],1);o[n][n]=0;for(var h=0;h<n;++h){for(var i=0;i<=h;++i)o[i][h]=o[h][i]=2*u(f[h],f[i]);l[h]=u(f[h],f[h])}for(var s=a(o,l),p=0,v=s[n+1],h=0;h<v.length;++h)p+=v[h];for(var m=new Array(n),h=0;h<n;++h){for(var v=s[h],b=0,i=0;i<v.length;++i)b+=v[i];m[h]=b/p}return m}function t(f){if(f.length===0)return[];for(var n=f[0].length,o=r([n]),l=c(f),h=0;h<f.length;++h)for(var i=0;i<n;++i)o[i]+=f[h][i]*l[h];return o}t.barycenetric=c,d.exports=t},{dup:176,"robust-linear-solve":547}],119:[function(e,d,S){d.exports=a;var r=e("circumcenter");function a(u){for(var c=r(u),t=0,f=0;f<u.length;++f)for(var n=u[f],o=0;o<c.length;++o)t+=Math.pow(n[o]-c[o],2);return Math.sqrt(t/u.length)}},{circumcenter:118}],120:[function(e,d,S){d.exports=r;function r(a,u,c){return u<c?a<u?u:a>c?c:a:a<c?c:a>u?u:a}},{}],121:[function(e,d,S){d.exports=M;var r=e("union-find"),a=e("box-intersect"),u=e("robust-segment-intersect"),c=e("big-rat"),t=e("big-rat/cmp"),f=e("big-rat/to-float"),n=e("rat-vec"),o=e("nextafter"),l=e("./lib/rat-seg-intersect");function h(P){var L=f(P);return[o(L,-1/0),o(L,1/0)]}function i(P,L){for(var I=new Array(L.length),C=0;C<L.length;++C){var k=L[C],E=P[k[0]],R=P[k[1]];I[C]=[o(Math.min(E[0],R[0]),-1/0),o(Math.min(E[1],R[1]),-1/0),o(Math.max(E[0],R[0]),1/0),o(Math.max(E[1],R[1]),1/0)]}return I}function s(P){for(var L=new Array(P.length),I=0;I<P.length;++I){var C=P[I];L[I]=[o(C[0],-1/0),o(C[1],-1/0),o(C[0],1/0),o(C[1],1/0)]}return L}function p(P,L,I){var C=[];return a(I,function(k,E){var R=L[k],O=L[E];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var N=P[R[0]],G=P[R[1]],U=P[O[0]],Y=P[O[1]];u(N,G,U,Y)&&C.push([k,E])}}),C}function v(P,L,I,C){var k=[];return a(I,C,function(E,R){var O=L[E];if(!(O[0]===R||O[1]===R)){var N=P[R],G=P[O[0]],U=P[O[1]];u(G,U,N,N)&&k.push([E,R])}}),k}function m(P,L,I,C,k){var E,R,O=P.map(function(ie){return[c(ie[0]),c(ie[1])]});for(E=0;E<I.length;++E){var N=I[E];R=N[0];var G=N[1],U=L[R],Y=L[G],z=l(n(P[U[0]]),n(P[U[1]]),n(P[Y[0]]),n(P[Y[1]]));if(!!z){var B=P.length;P.push([f(z[0]),f(z[1])]),O.push(z),C.push([R,B],[G,B])}}for(C.sort(function(ie,te){if(ie[0]!==te[0])return ie[0]-te[0];var re=O[ie[1]],ce=O[te[1]];return t(re[0],ce[0])||t(re[1],ce[1])}),E=C.length-1;E>=0;--E){var H=C[E];R=H[0];var V=L[R],Z=V[0],q=V[1],J=P[Z],ne=P[q];if((J[0]-ne[0]||J[1]-ne[1])<0){var ve=Z;Z=q,q=ve}V[0]=Z;var $=V[1]=H[1],j;for(k&&(j=V[2]);E>0&&C[E-1][0]===R;){var H=C[--E],ae=H[1];k?L.push([$,ae,j]):L.push([$,ae]),$=ae}k?L.push([$,q,j]):L.push([$,q])}return O}function b(P,L,I){for(var C=L.length,k=new r(C),E=[],R=0;R<L.length;++R){var O=L[R],N=h(O[0]),G=h(O[1]);E.push([o(N[0],-1/0),o(G[0],-1/0),o(N[1],1/0),o(G[1],1/0)])}a(E,function(H,V){k.link(H,V)});for(var U=!0,Y=new Array(C),R=0;R<C;++R){var z=k.find(R);z!==R&&(U=!1,P[z]=[Math.min(P[R][0],P[z][0]),Math.min(P[R][1],P[z][1])])}if(U)return null;for(var B=0,R=0;R<C;++R){var z=k.find(R);z===R?(Y[R]=B,P[B++]=P[R]):Y[R]=-1}P.length=B;for(var R=0;R<C;++R)Y[R]<0&&(Y[R]=Y[k.find(R)]);return Y}function y(P,L){return P[0]-L[0]||P[1]-L[1]}function x(P,L){var I=P[0]-L[0]||P[1]-L[1];return I||(P[2]<L[2]?-1:P[2]>L[2]?1:0)}function w(P,L,I){if(P.length!==0){if(L)for(var C=0;C<P.length;++C){var k=P[C],E=L[k[0]],R=L[k[1]];k[0]=Math.min(E,R),k[1]=Math.max(E,R)}else for(var C=0;C<P.length;++C){var k=P[C],E=k[0],R=k[1];k[0]=Math.min(E,R),k[1]=Math.max(E,R)}I?P.sort(x):P.sort(y);for(var O=1,C=1;C<P.length;++C){var N=P[C-1],G=P[C];G[0]===N[0]&&G[1]===N[1]&&(!I||G[2]===N[2])||(P[O++]=G)}P.length=O}}function g(P,L,I){var C=b(P,[],s(P));return w(L,C,I),!!C}function T(P,L,I){var C=i(P,L),k=p(P,L,C),E=s(P),R=v(P,L,C,E),O=m(P,L,k,R,I),N=b(P,O);return w(L,N,I),N?!0:k.length>0||R.length>0}function M(P,L,I){var C;if(I){C=L;for(var k=new Array(L.length),E=0;E<L.length;++E){var R=L[E];k[E]=[R[0],R[1],I[E]]}L=k}for(var O=g(P,L,!!I);T(P,L,!!I);)O=!0;if(!!I&&O){C.length=0,I.length=0;for(var E=0;E<L.length;++E){var R=L[E];C.push([R[0],R[1]]),I.push(R[2])}}return O}},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:496,"rat-vec":530,"robust-segment-intersect":551,"union-find":596}],122:[function(e,d,S){d.exports=l;var r=e("big-rat/mul"),a=e("big-rat/div"),u=e("big-rat/sub"),c=e("big-rat/sign"),t=e("rat-vec/sub"),f=e("rat-vec/add"),n=e("rat-vec/muls");function o(h,i){return u(r(h[0],i[1]),r(h[1],i[0]))}function l(h,i,s,p){var v=t(i,h),m=t(p,s),b=o(v,m);if(c(b)===0)return null;var y=t(h,s),x=o(m,y),w=a(x,b),g=n(v,w),T=f(h,g);return T}},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":529,"rat-vec/muls":531,"rat-vec/sub":532}],123:[function(e,d,S){var r=e("clamp");d.exports=a,d.exports.to=a,d.exports.from=u;function a(c,t){t==null&&(t=!0);var f=c[0],n=c[1],o=c[2],l=c[3];l==null&&(l=t?1:255),t&&(f*=255,n*=255,o*=255,l*=255),f=r(f,0,255)&255,n=r(n,0,255)&255,o=r(o,0,255)&255,l=r(l,0,255)&255;var h=f*16777216+(n<<16)+(o<<8)+l;return h}function u(c,t){c=+c;var f=c>>>24,n=(c&16711680)>>>16,o=(c&65280)>>>8,l=c&255;return t===!1?[f,n,o,l]:[f/255,n/255,o/255,l/255]}},{clamp:120}],124:[function(e,d,S){d.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(e,d,S){var r=e("color-rgba"),a=e("clamp"),u=e("dtype");d.exports=function(f,n){(n==="float"||!n)&&(n="array"),n==="uint"&&(n="uint8"),n==="uint_clamped"&&(n="uint8_clamped");var o=u(n),l=new o(4),h=n!=="uint8"&&n!=="uint8_clamped";return(!f.length||typeof f=="string")&&(f=r(f),f[0]/=255,f[1]/=255,f[2]/=255),c(f)?(l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3]!=null?f[3]:255,h&&(l[0]/=255,l[1]/=255,l[2]/=255,l[3]/=255),l):(h?(l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3]!=null?f[3]:1):(l[0]=a(Math.floor(f[0]*255),0,255),l[1]=a(Math.floor(f[1]*255),0,255),l[2]=a(Math.floor(f[2]*255),0,255),l[3]=f[3]==null?255:a(Math.floor(f[3]*255),0,255)),l)};function c(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(e,d,S){(function(r){(function(){var a=e("color-name"),u=e("is-plain-obj"),c=e("defined");d.exports=f;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function f(n){var o,l=[],h=1,i;if(typeof n=="string")if(a[n])l=a[n].slice(),i="rgb";else if(n==="transparent")h=0,i="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var s=n.slice(1),p=s.length,v=p<=4;h=1,v?(l=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],p===4&&(h=parseInt(s[3]+s[3],16)/255)):(l=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],p===8&&(h=parseInt(s[6]+s[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),i="rgb"}else if(o=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var m=o[1],b=m==="rgb",s=m.replace(/a$/,"");i=s;var p=s==="cmyk"?4:s==="gray"?1:3;l=o[2].trim().split(/\s*,\s*/).map(function(g,T){if(/%$/.test(g))return T===p?parseFloat(g)/100:s==="rgb"?parseFloat(g)*255/100:parseFloat(g);if(s[T]==="h"){if(/deg$/.test(g))return parseFloat(g);if(t[g]!==void 0)return t[g]}return parseFloat(g)}),m===s&&l.push(1),h=b||l[p]===void 0?1:l[p],l=l.slice(0,p)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(l=n.match(/([0-9]+)/g).map(function(x){return parseFloat(x)}),i=n.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(n))i="rgb",l=[n>>>16,(n&65280)>>>8,n&255];else if(u(n)){var y=c(n.r,n.red,n.R,null);y!==null?(i="rgb",l=[y,c(n.g,n.green,n.G),c(n.b,n.blue,n.B)]):(i="hsl",l=[c(n.h,n.hue,n.H),c(n.s,n.saturation,n.S),c(n.l,n.lightness,n.L,n.b,n.brightness)]),h=c(n.a,n.alpha,n.opacity,1),n.opacity!=null&&(h/=100)}else(Array.isArray(n)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(l=[n[0],n[1],n[2]],i="rgb",h=n.length===4?n[3]:1);return{space:i,values:l,alpha:h}}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":124,defined:170,"is-plain-obj":469}],127:[function(e,d,S){var r=e("color-parse"),a=e("color-space/hsl"),u=e("clamp");d.exports=function(t){var f,n=r(t);return n.space?(f=Array(3),f[0]=u(n.values[0],0,255),f[1]=u(n.values[1],0,255),f[2]=u(n.values[2],0,255),n.space[0]==="h"&&(f=a.rgb(f)),f.push(u(n.alpha,0,1)),f):[]}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(e,d,S){var r=e("./rgb");d.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var u=a[0]/360,c=a[1]/100,t=a[2]/100,f,n,o,l,h;if(c===0)return h=t*255,[h,h,h];t<.5?n=t*(1+c):n=t+c-t*c,f=2*t-n,l=[0,0,0];for(var i=0;i<3;i++)o=u+1/3*-(i-1),o<0?o++:o>1&&o--,6*o<1?h=f+(n-f)*6*o:2*o<1?h=n:3*o<2?h=f+(n-f)*(2/3-o)*6:h=f,l[i]=h*255;return l}},r.hsl=function(a){var u=a[0]/255,c=a[1]/255,t=a[2]/255,f=Math.min(u,c,t),n=Math.max(u,c,t),o=n-f,l,h,i;return n===f?l=0:u===n?l=(c-t)/o:c===n?l=2+(t-u)/o:t===n&&(l=4+(u-c)/o),l=Math.min(l*60,360),l<0&&(l+=360),i=(f+n)/2,n===f?h=0:i<=.5?h=o/(n+f):h=o/(2-n-f),[l,h*100,i*100]}},{"./rgb":129}],129:[function(e,d,S){d.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],130:[function(e,d,S){d.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(e,d,S){var r=e("./colorScale"),a=e("lerp");d.exports=u;function u(n){var o,l,h,i,s,p,v,m,w,b,y;if(n||(n={}),m=(n.nshades||72)-1,v=n.format||"hex",p=n.colormap,p||(p="jet"),typeof p=="string"){if(p=p.toLowerCase(),!r[p])throw Error(p+" not a supported colorscale");s=r[p]}else if(Array.isArray(p))s=p.slice();else throw Error("unsupported colormap option",p);if(s.length>m+1)throw new Error(p+" map requires nshades to be at least size "+s.length);Array.isArray(n.alpha)?n.alpha.length!==2?b=[1,1]:b=n.alpha.slice():typeof n.alpha=="number"?b=[n.alpha,n.alpha]:b=[1,1],o=s.map(function(M){return Math.round(M.index*m)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var x=s.map(function(M,P){var L=s[P].index,I=s[P].rgb.slice();return I.length===4&&I[3]>=0&&I[3]<=1||(I[3]=b[0]+(b[1]-b[0])*L),I}),w=[];for(y=0;y<o.length-1;++y){i=o[y+1]-o[y],l=x[y],h=x[y+1];for(var g=0;g<i;g++){var T=g/i;w.push([Math.round(a(l[0],h[0],T)),Math.round(a(l[1],h[1],T)),Math.round(a(l[2],h[2],T)),a(l[3],h[3],T)])}}return w.push(s[s.length-1].rgb.concat(b[1])),v==="hex"?w=w.map(t):v==="rgbaString"?w=w.map(f):v==="float"&&(w=w.map(c)),w}function c(n){return[n[0]/255,n[1]/255,n[2]/255,n[3]]}function t(n){for(var o,l="#",h=0;h<3;++h)o=n[h],o=o.toString(16),l+=("00"+o).substr(o.length);return l}function f(n){return"rgba("+n.join(",")+")"}},{"./colorScale":130,lerp:472}],132:[function(e,d,S){d.exports=n;var r=e("robust-orientation"),a=e("signum"),u=e("two-sum"),c=e("robust-product"),t=e("robust-sum");function f(o,l,h){var i=u(o[0],-l[0]),s=u(o[1],-l[1]),p=u(h[0],-l[0]),v=u(h[1],-l[1]),m=t(c(i,p),c(s,v));return m[m.length-1]>=0}function n(o,l,h,i){var s=r(l,h,i);if(s===0){var p=a(r(o,l,h)),v=a(r(o,l,i));if(p===v){if(p===0){var m=f(o,l,h),b=f(o,l,i);return m===b?0:m?1:-1}return 0}else{if(v===0)return p>0||f(o,l,i)?-1:1;if(p===0)return v>0||f(o,l,h)?1:-1}return a(v-p)}var y=r(o,l,h);if(y>0)return s>0&&r(o,l,i)>0?1:-1;if(y<0)return s>0||r(o,l,i)>0?1:-1;var x=r(o,l,i);return x>0||f(o,l,h)?1:-1}},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:554,"two-sum":583}],133:[function(e,d,S){d.exports=u;var r=Math.min;function a(c,t){return c-t}function u(c,t){var f=c.length,n=c.length-t.length;if(n)return n;switch(f){case 0:return 0;case 1:return c[0]-t[0];case 2:return c[0]+c[1]-t[0]-t[1]||r(c[0],c[1])-r(t[0],t[1]);case 3:var o=c[0]+c[1],l=t[0]+t[1];if(n=o+c[2]-(l+t[2]),n)return n;var h=r(c[0],c[1]),i=r(t[0],t[1]);return r(h,c[2])-r(i,t[2])||r(h+c[2],o)-r(i+t[2],l);case 4:var s=c[0],p=c[1],v=c[2],m=c[3],b=t[0],y=t[1],x=t[2],w=t[3];return s+p+v+m-(b+y+x+w)||r(s,p,v,m)-r(b,y,x,w,b)||r(s+p,s+v,s+m,p+v,p+m,v+m)-r(b+y,b+x,b+w,y+x,y+w,x+w)||r(s+p+v,s+p+m,s+v+m,p+v+m)-r(b+y+x,b+y+w,b+x+w,y+x+w);default:for(var g=c.slice().sort(a),T=t.slice().sort(a),M=0;M<f;++M)if(n=g[M]-T[M],n)return n;return 0}}},{}],134:[function(e,d,S){var r=e("compare-cell"),a=e("cell-orientation");d.exports=u;function u(c,t){return r(c,t)||a(c)-a(t)}},{"cell-orientation":117,"compare-cell":133}],135:[function(e,d,S){var r=e("./lib/ch1d"),a=e("./lib/ch2d"),u=e("./lib/chnd");d.exports=c;function c(t){var f=t.length;if(f===0)return[];if(f===1)return[[0]];var n=t[0].length;return n===0?[]:n===1?r(t):n===2?a(t):u(t,n)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(e,d,S){d.exports=r;function r(a){for(var u=0,c=0,t=1;t<a.length;++t)a[t][0]<a[u][0]&&(u=t),a[t][0]>a[c][0]&&(c=t);return u<c?[[u],[c]]:u>c?[[c],[u]]:[[u]]}},{}],137:[function(e,d,S){d.exports=a;var r=e("monotone-convex-hull-2d");function a(u){var c=r(u),t=c.length;if(t<=2)return[];for(var f=new Array(t),n=c[t-1],o=0;o<t;++o){var l=c[o];f[o]=[n,l],n=l}return f}},{"monotone-convex-hull-2d":482}],138:[function(e,d,S){d.exports=t;var r=e("incremental-convex-hull"),a=e("affine-hull");function u(f,n){for(var o=f.length,l=new Array(o),h=0;h<n.length;++h)l[h]=f[n[h]];for(var i=n.length,h=0;h<o;++h)n.indexOf(h)<0&&(l[i++]=f[h]);return l}function c(f,n){for(var o=f.length,l=n.length,h=0;h<o;++h)for(var i=f[h],s=0;s<i.length;++s){var p=i[s];if(p<l)i[s]=n[p];else{p=p-l;for(var v=0;v<l;++v)p>=n[v]&&(p+=1);i[s]=p}}return f}function t(f,n){try{return r(f,!0)}catch{var o=a(f);if(o.length<=n)return[];var l=u(f,o),h=r(l,!0);return c(h,o)}}},{"affine-hull":67,"incremental-convex-hull":459}],139:[function(e,d,S){d.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],140:[function(e,d,S){d.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],141:[function(e,d,S){d.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],142:[function(e,d,S){d.exports=["normal","italic","oblique"]},{}],143:[function(e,d,S){d.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],144:[function(e,d,S){d.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(e,d,S){var r=e("css-font-size-keywords");d.exports={isSize:function(u){return/^[\d\.]/.test(u)||u.indexOf("/")!==-1||r.indexOf(u)!==-1}}},{"css-font-size-keywords":140}],146:[function(e,d,S){var r=e("unquote"),a=e("css-global-keywords"),u=e("css-system-font-keywords"),c=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),f=e("css-font-stretch-keywords"),n=e("string-split-by"),o=e("./lib/util").isSize;d.exports=h;var l=h.cache={};function h(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(l[s])return l[s];if(s==="")throw new Error("Cannot parse an empty string.");if(u.indexOf(s)!==-1)return l[s]={system:s};for(var p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},v=n(s,/\s+/),m;m=v.shift();){if(a.indexOf(m)!==-1)return["style","variant","weight","stretch"].forEach(function(y){p[y]=m}),l[s]=p;if(t.indexOf(m)!==-1){p.style=m;continue}if(m==="normal"||m==="small-caps"){p.variant=m;continue}if(f.indexOf(m)!==-1){p.stretch=m;continue}if(c.indexOf(m)!==-1){p.weight=m;continue}if(o(m)){var b=n(m,"/");if(p.size=b[0],b[1]!=null?p.lineHeight=i(b[1]):v[0]==="/"&&(v.shift(),p.lineHeight=i(v.shift())),!v.length)throw new Error("Missing required font-family.");return p.family=n(v.join(" "),/\s*,\s*/).map(r),l[s]=p}throw new Error("Unknown or unsupported font token: "+m)}throw new Error("Missing required font-size.")}function i(s){var p=parseFloat(s);return p.toString()===s?p:s}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":568,unquote:598}],147:[function(e,d,S){var r=e("pick-by-alias"),a=e("./lib/util").isSize,u=s(e("css-global-keywords")),c=s(e("css-system-font-keywords")),t=s(e("css-font-weight-keywords")),f=s(e("css-font-style-keywords")),n=s(e("css-font-stretch-keywords")),o={normal:1,"small-caps":1},l={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};d.exports=function(v){if(v=r(v,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),v.system)return v.system&&i(v.system,c),v.system;if(i(v.style,f),i(v.variant,o),i(v.weight,t),i(v.stretch,n),v.size==null&&(v.size=h.size),typeof v.size=="number"&&(v.size+="px"),!a)throw Error("Bad size value `"+v.size+"`");v.family||(v.family=h.family),Array.isArray(v.family)&&(v.family.length||(v.family=[h.family]),v.family=v.family.map(function(b){return l[b]?b:'"'+b+'"'}).join(", "));var m=[];return m.push(v.style),v.variant!==v.style&&m.push(v.variant),v.weight!==v.variant&&v.weight!==v.style&&m.push(v.weight),v.stretch!==v.weight&&v.stretch!==v.variant&&v.stretch!==v.style&&m.push(v.stretch),m.push(v.size+(v.lineHeight==null||v.lineHeight==="normal"||v.lineHeight+""=="1"?"":"/"+v.lineHeight)),m.push(v.family),m.filter(Boolean).join(" ")};function i(p,v){if(p&&!v[p]&&!u[p])throw Error("Unknown keyword `"+p+"`");return p}function s(p){for(var v={},m=0;m<p.length;m++)v[p[m]]=1;return v}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"pick-by-alias":511}],148:[function(e,d,S){d.exports=["inherit","initial","unset"]},{}],149:[function(e,d,S){d.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],150:[function(e,d,S){function r(u,c,t,f,n,o){var l=6*n*n-6*n,h=3*n*n-4*n+1,i=-6*n*n+6*n,s=3*n*n-2*n;if(u.length){o||(o=new Array(u.length));for(var p=u.length-1;p>=0;--p)o[p]=l*u[p]+h*c[p]+i*t[p]+s*f[p];return o}return l*u+h*c+i*t[p]+s*f}function a(u,c,t,f,n,o){var l=n-1,h=n*n,i=l*l,s=(1+2*n)*i,p=n*i,v=h*(3-2*n),m=h*l;if(u.length){o||(o=new Array(u.length));for(var b=u.length-1;b>=0;--b)o[b]=s*u[b]+p*c[b]+v*t[b]+m*f[b];return o}return s*u+p*c+v*t+m*f}d.exports=a,d.exports.derivative=r},{}],151:[function(e,d,S){var r=e("./lib/thunk.js");function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function u(c){var t=new a;t.pre=c.pre,t.body=c.body,t.post=c.post;var f=c.args.slice(0);t.argTypes=f;for(var n=0;n<f.length;++n){var o=f[n];if(o==="array"||typeof o=="object"&&o.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(o==="scalar")t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if(o==="index"){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(o==="shape"){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof o=="object"&&o.offset)t.argTypes[n]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+f[n])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>f.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>f.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>f.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!c.printCode||!!c.debug,t.funcName=c.funcName||"cwise",t.blockSize=c.blockSize||64,r(t)}d.exports=u},{"./lib/thunk.js":153}],152:[function(e,d,S){var r=e("uniq");function a(o,l,h){var i=o.length,s=l.arrayArgs.length,p=l.indexArgs.length>0,v=[],m=[],b=0,y=0,x,w;for(x=0;x<i;++x)m.push(["i",x,"=0"].join(""));for(w=0;w<s;++w)for(x=0;x<i;++x)y=b,b=o[x],x===0?m.push(["d",w,"s",x,"=t",w,"p",b].join("")):m.push(["d",w,"s",x,"=(t",w,"p",b,"-s",y,"*t",w,"p",y,")"].join(""));for(m.length>0&&v.push("var "+m.join(",")),x=i-1;x>=0;--x)b=o[x],v.push(["for(i",x,"=0;i",x,"<s",b,";++i",x,"){"].join(""));for(v.push(h),x=0;x<i;++x){for(y=b,b=o[x],w=0;w<s;++w)v.push(["p",w,"+=d",w,"s",x].join(""));p&&(x>0&&v.push(["index[",y,"]-=s",y].join("")),v.push(["++index[",b,"]"].join(""))),v.push("}")}return v.join(`
`)}function u(o,l,h,i){for(var s=l.length,p=h.arrayArgs.length,v=h.blockSize,m=h.indexArgs.length>0,b=[],y=0;y<p;++y)b.push(["var offset",y,"=p",y].join(""));for(var y=o;y<s;++y)b.push(["for(var j"+y+"=SS[",l[y],"]|0;j",y,">0;){"].join("")),b.push(["if(j",y,"<",v,"){"].join("")),b.push(["s",l[y],"=j",y].join("")),b.push(["j",y,"=0"].join("")),b.push(["}else{s",l[y],"=",v].join("")),b.push(["j",y,"-=",v,"}"].join("")),m&&b.push(["index[",l[y],"]=j",y].join(""));for(var y=0;y<p;++y){for(var x=["offset"+y],w=o;w<s;++w)x.push(["j",w,"*t",y,"p",l[w]].join(""));b.push(["p",y,"=(",x.join("+"),")"].join(""))}b.push(a(l,h,i));for(var y=o;y<s;++y)b.push("}");return b.join(`
`)}function c(o){for(var l=0,h=o[0].length;l<h;){for(var i=1;i<o.length;++i)if(o[i][l]!==o[0][l])return l;++l}return l}function t(o,l,h){for(var i=o.body,s=[],p=[],v=0;v<o.args.length;++v){var m=o.args[v];if(!(m.count<=0)){var b=new RegExp(m.name,"g"),y="",x=l.arrayArgs.indexOf(v);switch(l.argTypes[v]){case"offset":var w=l.offsetArgIndex.indexOf(v),g=l.offsetArgs[w];x=g.array,y="+q"+w;case"array":y="p"+x+y;var T="l"+v,M="a"+x;if(l.arrayBlockIndices[x]===0)m.count===1?h[x]==="generic"?m.lvalue?(s.push(["var ",T,"=",M,".get(",y,")"].join("")),i=i.replace(b,T),p.push([M,".set(",y,",",T,")"].join(""))):i=i.replace(b,[M,".get(",y,")"].join("")):i=i.replace(b,[M,"[",y,"]"].join("")):h[x]==="generic"?(s.push(["var ",T,"=",M,".get(",y,")"].join("")),i=i.replace(b,T),m.lvalue&&p.push([M,".set(",y,",",T,")"].join(""))):(s.push(["var ",T,"=",M,"[",y,"]"].join("")),i=i.replace(b,T),m.lvalue&&p.push([M,"[",y,"]=",T].join("")));else{for(var P=[m.name],L=[y],I=0;I<Math.abs(l.arrayBlockIndices[x]);I++)P.push("\\s*\\[([^\\]]+)\\]"),L.push("$"+(I+1)+"*t"+x+"b"+I);if(b=new RegExp(P.join(""),"g"),y=L.join("+"),h[x]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(b,[M,"[",y,"]"].join(""))}break;case"scalar":i=i.replace(b,"Y"+l.scalarArgs.indexOf(v));break;case"index":i=i.replace(b,"index");break;case"shape":i=i.replace(b,"shape");break}}}return[s.join(`
`),i,p.join(`
`)].join(`
`).trim()}function f(o){for(var l=new Array(o.length),h=!0,i=0;i<o.length;++i){var s=o[i],p=s.match(/\d+/);p?p=p[0]:p="",s.charAt(0)===0?l[i]="u"+s.charAt(1)+p:l[i]=s.charAt(0)+p,i>0&&(h=h&&l[i]===l[i-1])}return h?l[0]:l.join("")}function n(o,l){for(var h=l[1].length-Math.abs(o.arrayBlockIndices[0])|0,i=new Array(o.arrayArgs.length),s=new Array(o.arrayArgs.length),p=0;p<o.arrayArgs.length;++p)s[p]=l[2*p],i[p]=l[2*p+1];for(var v=[],m=[],b=[],y=[],x=[],p=0;p<o.arrayArgs.length;++p){o.arrayBlockIndices[p]<0?(b.push(0),y.push(h),v.push(h),m.push(h+o.arrayBlockIndices[p])):(b.push(o.arrayBlockIndices[p]),y.push(o.arrayBlockIndices[p]+h),v.push(0),m.push(o.arrayBlockIndices[p]));for(var w=[],g=0;g<i[p].length;g++)b[p]<=i[p][g]&&i[p][g]<y[p]&&w.push(i[p][g]-b[p]);x.push(w)}for(var T=["SS"],M=["'use strict'"],P=[],g=0;g<h;++g)P.push(["s",g,"=SS[",g,"]"].join(""));for(var p=0;p<o.arrayArgs.length;++p){T.push("a"+p),T.push("t"+p),T.push("p"+p);for(var g=0;g<h;++g)P.push(["t",p,"p",g,"=t",p,"[",b[p]+g,"]"].join(""));for(var g=0;g<Math.abs(o.arrayBlockIndices[p]);++g)P.push(["t",p,"b",g,"=t",p,"[",v[p]+g,"]"].join(""))}for(var p=0;p<o.scalarArgs.length;++p)T.push("Y"+p);if(o.shapeArgs.length>0&&P.push("shape=SS.slice(0)"),o.indexArgs.length>0){for(var L=new Array(h),p=0;p<h;++p)L[p]="0";P.push(["index=[",L.join(","),"]"].join(""))}for(var p=0;p<o.offsetArgs.length;++p){for(var I=o.offsetArgs[p],C=[],g=0;g<I.offset.length;++g)I.offset[g]!==0&&(I.offset[g]===1?C.push(["t",I.array,"p",g].join("")):C.push([I.offset[g],"*t",I.array,"p",g].join("")));C.length===0?P.push("q"+p+"=0"):P.push(["q",p,"=",C.join("+")].join(""))}var k=r([].concat(o.pre.thisVars).concat(o.body.thisVars).concat(o.post.thisVars));P=P.concat(k),P.length>0&&M.push("var "+P.join(","));for(var p=0;p<o.arrayArgs.length;++p)M.push("p"+p+"|=0");o.pre.body.length>3&&M.push(t(o.pre,o,s));var E=t(o.body,o,s),R=c(x);R<h?M.push(u(R,x[0],o,E)):M.push(a(x[0],o,E)),o.post.body.length>3&&M.push(t(o.post,o,s)),o.debug&&console.log("-----Generated cwise routine for ",l,`:
`+M.join(`
`)+`
----------`);var O=[o.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",R,f(s)].join(""),N=new Function(["function ",O,"(",T.join(","),"){",M.join(`
`),"} return ",O].join(""));return N()}d.exports=n},{uniq:597}],153:[function(e,d,S){var r=e("./compile.js");function a(u){var c=["'use strict'","var CACHED={}"],t=[],f=u.funcName+"_cwise_thunk";c.push(["return function ",f,"(",u.shimArgs.join(","),"){"].join(""));for(var n=[],o=[],l=[["array",u.arrayArgs[0],".shape.slice(",Math.max(0,u.arrayBlockIndices[0]),u.arrayBlockIndices[0]<0?","+u.arrayBlockIndices[0]+")":")"].join("")],h=[],i=[],s=0;s<u.arrayArgs.length;++s){var p=u.arrayArgs[s];t.push(["t",p,"=array",p,".dtype,","r",p,"=array",p,".order"].join("")),n.push("t"+p),n.push("r"+p),o.push("t"+p),o.push("r"+p+".join()"),l.push("array"+p+".data"),l.push("array"+p+".stride"),l.push("array"+p+".offset|0"),s>0&&(h.push("array"+u.arrayArgs[0]+".shape.length===array"+p+".shape.length+"+(Math.abs(u.arrayBlockIndices[0])-Math.abs(u.arrayBlockIndices[s]))),i.push("array"+u.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,u.arrayBlockIndices[0])+"]===array"+p+".shape[shapeIndex+"+Math.max(0,u.arrayBlockIndices[s])+"]"))}u.arrayArgs.length>1&&(c.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+u.arrayArgs[0]+".shape.length-"+Math.abs(u.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),c.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(var s=0;s<u.scalarArgs.length;++s)l.push("scalar"+u.scalarArgs[s]);t.push(["type=[",o.join(","),"].join()"].join("")),t.push("proc=CACHED[type]"),c.push("var "+t.join(",")),c.push(["if(!proc){","CACHED[type]=proc=compile([",n.join(","),"])}","return proc(",l.join(","),")}"].join("")),u.debug&&console.log(`-----Generated thunk:
`+c.join(`
`)+`
----------`);var v=new Function("compile",c.join(`
`));return v(r.bind(void 0,u))}d.exports=a},{"./compile.js":152}],154:[function(e,d,S){var r=e("type/value/is"),a=e("type/value/ensure"),u=e("type/plain-function/ensure"),c=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),f=e("es5-ext/object/map"),n=Function.prototype.bind,o=Object.defineProperty,l=Object.prototype.hasOwnProperty,h;h=function(i,s,p){var v=a(s)&&u(s.value),m;return m=c(s),delete m.writable,delete m.value,m.get=function(){return!p.overwriteDefinition&&l.call(this,i)?v:(s.value=n.call(v,p.resolveContext?p.resolveContext(this):this),o(this,i,s),this[i])},m},d.exports=function(i){var s=t(arguments[1]);return r(s.resolveContext)&&u(s.resolveContext),f(i,function(p,v){return h(v,p,s)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":589,"type/value/ensure":593,"type/value/is":594}],155:[function(e,d,S){var r=e("type/value/is"),a=e("type/plain-function/is"),u=e("es5-ext/object/assign"),c=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),f=d.exports=function(n,o){var l,h,i,s,p;return arguments.length<2||typeof n!="string"?(s=o,o=n,n=null):s=arguments[2],r(n)?(l=t.call(n,"c"),h=t.call(n,"e"),i=t.call(n,"w")):(l=i=!0,h=!1),p={value:o,configurable:l,enumerable:h,writable:i},s?u(c(s),p):p};f.gs=function(n,o,l){var h,i,s,p;return typeof n!="string"?(s=l,l=o,o=n,n=null):s=arguments[3],r(o)?a(o)?r(l)?a(l)||(s=l,l=void 0):l=void 0:(s=o,o=l=void 0):o=void 0,r(n)?(h=t.call(n,"c"),i=t.call(n,"e")):(h=!0,i=!1),p={get:o,set:l,configurable:h,enumerable:i},s?u(c(s),p):p}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":590,"type/value/is":594}],156:[function(e,d,S){(function(r,a){a(typeof S=="object"&&typeof d<"u"?S:r.d3=r.d3||{})})(this,function(r){function a(j,ae){return j<ae?-1:j>ae?1:j>=ae?0:NaN}function u(j){return j.length===1&&(j=c(j)),{left:function(ae,ie,te,re){for(te==null&&(te=0),re==null&&(re=ae.length);te<re;){var ce=te+re>>>1;j(ae[ce],ie)<0?te=ce+1:re=ce}return te},right:function(ae,ie,te,re){for(te==null&&(te=0),re==null&&(re=ae.length);te<re;){var ce=te+re>>>1;j(ae[ce],ie)>0?re=ce:te=ce+1}return te}}}function c(j){return function(ae,ie){return a(j(ae),ie)}}var t=u(a),f=t.right,n=t.left;function o(j,ae){ae==null&&(ae=l);for(var ie=0,te=j.length-1,re=j[0],ce=new Array(te<0?0:te);ie<te;)ce[ie]=ae(re,re=j[++ie]);return ce}function l(j,ae){return[j,ae]}function h(j,ae,ie){var te=j.length,re=ae.length,ce=new Array(te*re),pe,fe,se,de;for(ie==null&&(ie=l),pe=se=0;pe<te;++pe)for(de=j[pe],fe=0;fe<re;++fe,++se)ce[se]=ie(de,ae[fe]);return ce}function i(j,ae){return ae<j?-1:ae>j?1:ae>=j?0:NaN}function s(j){return j===null?NaN:+j}function p(j,ae){var ie=j.length,te=0,re=-1,ce=0,pe,fe,se=0;if(ae==null)for(;++re<ie;)isNaN(pe=s(j[re]))||(fe=pe-ce,ce+=fe/++te,se+=fe*(pe-ce));else for(;++re<ie;)isNaN(pe=s(ae(j[re],re,j)))||(fe=pe-ce,ce+=fe/++te,se+=fe*(pe-ce));if(te>1)return se/(te-1)}function v(j,ae){var ie=p(j,ae);return ie&&Math.sqrt(ie)}function m(j,ae){var ie=j.length,te=-1,re,ce,pe;if(ae==null){for(;++te<ie;)if((re=j[te])!=null&&re>=re)for(ce=pe=re;++te<ie;)(re=j[te])!=null&&(ce>re&&(ce=re),pe<re&&(pe=re))}else for(;++te<ie;)if((re=ae(j[te],te,j))!=null&&re>=re)for(ce=pe=re;++te<ie;)(re=ae(j[te],te,j))!=null&&(ce>re&&(ce=re),pe<re&&(pe=re));return[ce,pe]}var b=Array.prototype,y=b.slice,x=b.map;function w(j){return function(){return j}}function g(j){return j}function T(j,ae,ie){j=+j,ae=+ae,ie=(re=arguments.length)<2?(ae=j,j=0,1):re<3?1:+ie;for(var te=-1,re=Math.max(0,Math.ceil((ae-j)/ie))|0,ce=new Array(re);++te<re;)ce[te]=j+te*ie;return ce}var M=Math.sqrt(50),P=Math.sqrt(10),L=Math.sqrt(2);function I(j,ae,ie){var te,re=-1,ce,pe,fe;if(ae=+ae,j=+j,ie=+ie,j===ae&&ie>0)return[j];if((te=ae<j)&&(ce=j,j=ae,ae=ce),(fe=C(j,ae,ie))===0||!isFinite(fe))return[];if(fe>0)for(j=Math.ceil(j/fe),ae=Math.floor(ae/fe),pe=new Array(ce=Math.ceil(ae-j+1));++re<ce;)pe[re]=(j+re)*fe;else for(j=Math.floor(j*fe),ae=Math.ceil(ae*fe),pe=new Array(ce=Math.ceil(j-ae+1));++re<ce;)pe[re]=(j-re)/fe;return te&&pe.reverse(),pe}function C(j,ae,ie){var te=(ae-j)/Math.max(0,ie),re=Math.floor(Math.log(te)/Math.LN10),ce=te/Math.pow(10,re);return re>=0?(ce>=M?10:ce>=P?5:ce>=L?2:1)*Math.pow(10,re):-Math.pow(10,-re)/(ce>=M?10:ce>=P?5:ce>=L?2:1)}function k(j,ae,ie){var te=Math.abs(ae-j)/Math.max(0,ie),re=Math.pow(10,Math.floor(Math.log(te)/Math.LN10)),ce=te/re;return ce>=M?re*=10:ce>=P?re*=5:ce>=L&&(re*=2),ae<j?-re:re}function E(j){return Math.ceil(Math.log(j.length)/Math.LN2)+1}function R(){var j=g,ae=m,ie=E;function te(re){var ce,pe=re.length,fe,se=new Array(pe);for(ce=0;ce<pe;++ce)se[ce]=j(re[ce],ce,re);var de=ae(se),be=de[0],xe=de[1],ke=ie(se,be,xe);Array.isArray(ke)||(ke=k(be,xe,ke),ke=T(Math.ceil(be/ke)*ke,xe,ke));for(var Re=ke.length;ke[0]<=be;)ke.shift(),--Re;for(;ke[Re-1]>xe;)ke.pop(),--Re;var Ke=new Array(Re+1),ze;for(ce=0;ce<=Re;++ce)ze=Ke[ce]=[],ze.x0=ce>0?ke[ce-1]:be,ze.x1=ce<Re?ke[ce]:xe;for(ce=0;ce<pe;++ce)fe=se[ce],be<=fe&&fe<=xe&&Ke[f(ke,fe,0,Re)].push(re[ce]);return Ke}return te.value=function(re){return arguments.length?(j=typeof re=="function"?re:w(re),te):j},te.domain=function(re){return arguments.length?(ae=typeof re=="function"?re:w([re[0],re[1]]),te):ae},te.thresholds=function(re){return arguments.length?(ie=typeof re=="function"?re:Array.isArray(re)?w(y.call(re)):w(re),te):ie},te}function O(j,ae,ie){if(ie==null&&(ie=s),!!(te=j.length)){if((ae=+ae)<=0||te<2)return+ie(j[0],0,j);if(ae>=1)return+ie(j[te-1],te-1,j);var te,re=(te-1)*ae,ce=Math.floor(re),pe=+ie(j[ce],ce,j),fe=+ie(j[ce+1],ce+1,j);return pe+(fe-pe)*(re-ce)}}function N(j,ae,ie){return j=x.call(j,s).sort(a),Math.ceil((ie-ae)/(2*(O(j,.75)-O(j,.25))*Math.pow(j.length,-1/3)))}function G(j,ae,ie){return Math.ceil((ie-ae)/(3.5*v(j)*Math.pow(j.length,-1/3)))}function U(j,ae){var ie=j.length,te=-1,re,ce;if(ae==null){for(;++te<ie;)if((re=j[te])!=null&&re>=re)for(ce=re;++te<ie;)(re=j[te])!=null&&re>ce&&(ce=re)}else for(;++te<ie;)if((re=ae(j[te],te,j))!=null&&re>=re)for(ce=re;++te<ie;)(re=ae(j[te],te,j))!=null&&re>ce&&(ce=re);return ce}function Y(j,ae){var ie=j.length,te=ie,re=-1,ce,pe=0;if(ae==null)for(;++re<ie;)isNaN(ce=s(j[re]))?--te:pe+=ce;else for(;++re<ie;)isNaN(ce=s(ae(j[re],re,j)))?--te:pe+=ce;if(te)return pe/te}function z(j,ae){var ie=j.length,te=-1,re,ce=[];if(ae==null)for(;++te<ie;)isNaN(re=s(j[te]))||ce.push(re);else for(;++te<ie;)isNaN(re=s(ae(j[te],te,j)))||ce.push(re);return O(ce.sort(a),.5)}function B(j){for(var ae=j.length,ie,te=-1,re=0,ce,pe;++te<ae;)re+=j[te].length;for(ce=new Array(re);--ae>=0;)for(pe=j[ae],ie=pe.length;--ie>=0;)ce[--re]=pe[ie];return ce}function H(j,ae){var ie=j.length,te=-1,re,ce;if(ae==null){for(;++te<ie;)if((re=j[te])!=null&&re>=re)for(ce=re;++te<ie;)(re=j[te])!=null&&ce>re&&(ce=re)}else for(;++te<ie;)if((re=ae(j[te],te,j))!=null&&re>=re)for(ce=re;++te<ie;)(re=ae(j[te],te,j))!=null&&ce>re&&(ce=re);return ce}function V(j,ae){for(var ie=ae.length,te=new Array(ie);ie--;)te[ie]=j[ae[ie]];return te}function Z(j,ae){if(!!(ie=j.length)){var ie,te=0,re=0,ce,pe=j[re];for(ae==null&&(ae=a);++te<ie;)(ae(ce=j[te],pe)<0||ae(pe,pe)!==0)&&(pe=ce,re=te);if(ae(pe,pe)===0)return re}}function q(j,ae,ie){for(var te=(ie==null?j.length:ie)-(ae=ae==null?0:+ae),re,ce;te;)ce=Math.random()*te--|0,re=j[te+ae],j[te+ae]=j[ce+ae],j[ce+ae]=re;return j}function J(j,ae){var ie=j.length,te=-1,re,ce=0;if(ae==null)for(;++te<ie;)(re=+j[te])&&(ce+=re);else for(;++te<ie;)(re=+ae(j[te],te,j))&&(ce+=re);return ce}function ne(j){if(!(ce=j.length))return[];for(var ae=-1,ie=H(j,ve),te=new Array(ie);++ae<ie;)for(var re=-1,ce,pe=te[ae]=new Array(ce);++re<ce;)pe[re]=j[re][ae];return te}function ve(j){return j.length}function $(){return ne(arguments)}r.bisect=f,r.bisectRight=f,r.bisectLeft=n,r.ascending=a,r.bisector=u,r.cross=h,r.descending=i,r.deviation=v,r.extent=m,r.histogram=R,r.thresholdFreedmanDiaconis=N,r.thresholdScott=G,r.thresholdSturges=E,r.max=U,r.mean=Y,r.median=z,r.merge=B,r.min=H,r.pairs=o,r.permute=V,r.quantile=O,r.range=T,r.scan=Z,r.shuffle=q,r.sum=J,r.ticks=I,r.tickIncrement=C,r.tickStep=k,r.transpose=ne,r.variance=p,r.zip=$,Object.defineProperty(r,"__esModule",{value:!0})})},{}],157:[function(e,d,S){(function(r,a){a(typeof S=="object"&&typeof d<"u"?S:r.d3=r.d3||{})})(this,function(r){var a="$";function u(){}u.prototype=c.prototype={constructor:u,has:function(b){return a+b in this},get:function(b){return this[a+b]},set:function(b,y){return this[a+b]=y,this},remove:function(b){var y=a+b;return y in this&&delete this[y]},clear:function(){for(var b in this)b[0]===a&&delete this[b]},keys:function(){var b=[];for(var y in this)y[0]===a&&b.push(y.slice(1));return b},values:function(){var b=[];for(var y in this)y[0]===a&&b.push(this[y]);return b},entries:function(){var b=[];for(var y in this)y[0]===a&&b.push({key:y.slice(1),value:this[y]});return b},size:function(){var b=0;for(var y in this)y[0]===a&&++b;return b},empty:function(){for(var b in this)if(b[0]===a)return!1;return!0},each:function(b){for(var y in this)y[0]===a&&b(this[y],y.slice(1),this)}};function c(b,y){var x=new u;if(b instanceof u)b.each(function(P,L){x.set(L,P)});else if(Array.isArray(b)){var w=-1,g=b.length,T;if(y==null)for(;++w<g;)x.set(w,b[w]);else for(;++w<g;)x.set(y(T=b[w],w,b),T)}else if(b)for(var M in b)x.set(M,b[M]);return x}function t(){var b=[],y=[],x,w,g;function T(P,L,I,C){if(L>=b.length)return x!=null&&P.sort(x),w!=null?w(P):P;for(var k=-1,E=P.length,R=b[L++],O,N,G=c(),U,Y=I();++k<E;)(U=G.get(O=R(N=P[k])+""))?U.push(N):G.set(O,[N]);return G.each(function(z,B){C(Y,B,T(z,L,I,C))}),Y}function M(P,L){if(++L>b.length)return P;var I,C=y[L-1];return w!=null&&L>=b.length?I=P.entries():(I=[],P.each(function(k,E){I.push({key:E,values:M(k,L)})})),C!=null?I.sort(function(k,E){return C(k.key,E.key)}):I}return g={object:function(P){return T(P,0,f,n)},map:function(P){return T(P,0,o,l)},entries:function(P){return M(T(P,0,o,l),0)},key:function(P){return b.push(P),g},sortKeys:function(P){return y[b.length-1]=P,g},sortValues:function(P){return x=P,g},rollup:function(P){return w=P,g}}}function f(){return{}}function n(b,y,x){b[y]=x}function o(){return c()}function l(b,y,x){b.set(y,x)}function h(){}var i=c.prototype;h.prototype=s.prototype={constructor:h,has:i.has,add:function(b){return b+="",this[a+b]=b,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each};function s(b,y){var x=new h;if(b instanceof h)b.each(function(T){x.add(T)});else if(b){var w=-1,g=b.length;if(y==null)for(;++w<g;)x.add(b[w]);else for(;++w<g;)x.add(y(b[w],w,b))}return x}function p(b){var y=[];for(var x in b)y.push(x);return y}function v(b){var y=[];for(var x in b)y.push(b[x]);return y}function m(b){var y=[];for(var x in b)y.push({key:x,value:b[x]});return y}r.nest=t,r.set=s,r.map=c,r.keys=p,r.values=v,r.entries=m,Object.defineProperty(r,"__esModule",{value:!0})})},{}],158:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){function a(Ne,st,_t){Ne.prototype=st.prototype=_t,_t.constructor=Ne}function u(Ne,st){var _t=Object.create(Ne.prototype);for(var Ot in st)_t[Ot]=st[Ot];return _t}function c(){}var t=.7,f=1/t,n="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),s=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),p=new RegExp("^rgba\\("+[n,n,n,o]+"\\)$"),v=new RegExp("^rgba\\("+[l,l,l,o]+"\\)$"),m=new RegExp("^hsl\\("+[o,l,l]+"\\)$"),b=new RegExp("^hsla\\("+[o,l,l,o]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a(c,T,{copy:function(Ne){return Object.assign(new this.constructor,this,Ne)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHsl:w,formatRgb:g,toString:g});function x(){return this.rgb().formatHex()}function w(){return N(this).formatHsl()}function g(){return this.rgb().formatRgb()}function T(Ne){var st,_t;return Ne=(Ne+"").trim().toLowerCase(),(st=h.exec(Ne))?(_t=st[1].length,st=parseInt(st[1],16),_t===6?M(st):_t===3?new C(st>>8&15|st>>4&240,st>>4&15|st&240,(st&15)<<4|st&15,1):_t===8?P(st>>24&255,st>>16&255,st>>8&255,(st&255)/255):_t===4?P(st>>12&15|st>>8&240,st>>8&15|st>>4&240,st>>4&15|st&240,((st&15)<<4|st&15)/255):null):(st=i.exec(Ne))?new C(st[1],st[2],st[3],1):(st=s.exec(Ne))?new C(st[1]*255/100,st[2]*255/100,st[3]*255/100,1):(st=p.exec(Ne))?P(st[1],st[2],st[3],st[4]):(st=v.exec(Ne))?P(st[1]*255/100,st[2]*255/100,st[3]*255/100,st[4]):(st=m.exec(Ne))?O(st[1],st[2]/100,st[3]/100,1):(st=b.exec(Ne))?O(st[1],st[2]/100,st[3]/100,st[4]):y.hasOwnProperty(Ne)?M(y[Ne]):Ne==="transparent"?new C(NaN,NaN,NaN,0):null}function M(Ne){return new C(Ne>>16&255,Ne>>8&255,Ne&255,1)}function P(Ne,st,_t,Ot){return Ot<=0&&(Ne=st=_t=NaN),new C(Ne,st,_t,Ot)}function L(Ne){return Ne instanceof c||(Ne=T(Ne)),Ne?(Ne=Ne.rgb(),new C(Ne.r,Ne.g,Ne.b,Ne.opacity)):new C}function I(Ne,st,_t,Ot){return arguments.length===1?L(Ne):new C(Ne,st,_t,Ot==null?1:Ot)}function C(Ne,st,_t,Ot){this.r=+Ne,this.g=+st,this.b=+_t,this.opacity=+Ot}a(C,I,u(c,{brighter:function(Ne){return Ne=Ne==null?f:Math.pow(f,Ne),new C(this.r*Ne,this.g*Ne,this.b*Ne,this.opacity)},darker:function(Ne){return Ne=Ne==null?t:Math.pow(t,Ne),new C(this.r*Ne,this.g*Ne,this.b*Ne,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:E,toString:E}));function k(){return"#"+R(this.r)+R(this.g)+R(this.b)}function E(){var Ne=this.opacity;return Ne=isNaN(Ne)?1:Math.max(0,Math.min(1,Ne)),(Ne===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ne===1?")":", "+Ne+")")}function R(Ne){return Ne=Math.max(0,Math.min(255,Math.round(Ne)||0)),(Ne<16?"0":"")+Ne.toString(16)}function O(Ne,st,_t,Ot){return Ot<=0?Ne=st=_t=NaN:_t<=0||_t>=1?Ne=st=NaN:st<=0&&(Ne=NaN),new U(Ne,st,_t,Ot)}function N(Ne){if(Ne instanceof U)return new U(Ne.h,Ne.s,Ne.l,Ne.opacity);if(Ne instanceof c||(Ne=T(Ne)),!Ne)return new U;if(Ne instanceof U)return Ne;Ne=Ne.rgb();var st=Ne.r/255,_t=Ne.g/255,Ot=Ne.b/255,Wt=Math.min(st,_t,Ot),Et=Math.max(st,_t,Ot),jt=NaN,Zt=Et-Wt,Mt=(Et+Wt)/2;return Zt?(st===Et?jt=(_t-Ot)/Zt+(_t<Ot)*6:_t===Et?jt=(Ot-st)/Zt+2:jt=(st-_t)/Zt+4,Zt/=Mt<.5?Et+Wt:2-Et-Wt,jt*=60):Zt=Mt>0&&Mt<1?0:jt,new U(jt,Zt,Mt,Ne.opacity)}function G(Ne,st,_t,Ot){return arguments.length===1?N(Ne):new U(Ne,st,_t,Ot==null?1:Ot)}function U(Ne,st,_t,Ot){this.h=+Ne,this.s=+st,this.l=+_t,this.opacity=+Ot}a(U,G,u(c,{brighter:function(Ne){return Ne=Ne==null?f:Math.pow(f,Ne),new U(this.h,this.s,this.l*Ne,this.opacity)},darker:function(Ne){return Ne=Ne==null?t:Math.pow(t,Ne),new U(this.h,this.s,this.l*Ne,this.opacity)},rgb:function(){var Ne=this.h%360+(this.h<0)*360,st=isNaN(Ne)||isNaN(this.s)?0:this.s,_t=this.l,Ot=_t+(_t<.5?_t:1-_t)*st,Wt=2*_t-Ot;return new C(Y(Ne>=240?Ne-240:Ne+120,Wt,Ot),Y(Ne,Wt,Ot),Y(Ne<120?Ne+240:Ne-120,Wt,Ot),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ne=this.opacity;return Ne=isNaN(Ne)?1:Math.max(0,Math.min(1,Ne)),(Ne===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ne===1?")":", "+Ne+")")}}));function Y(Ne,st,_t){return(Ne<60?st+(_t-st)*Ne/60:Ne<180?_t:Ne<240?st+(_t-st)*(240-Ne)/60:st)*255}var z=Math.PI/180,B=180/Math.PI,H=18,V=.96422,Z=1,q=.82521,J=4/29,ne=6/29,ve=3*ne*ne,$=ne*ne*ne;function j(Ne){if(Ne instanceof te)return new te(Ne.l,Ne.a,Ne.b,Ne.opacity);if(Ne instanceof xe)return ke(Ne);Ne instanceof C||(Ne=L(Ne));var st=fe(Ne.r),_t=fe(Ne.g),Ot=fe(Ne.b),Wt=re((.2225045*st+.7168786*_t+.0606169*Ot)/Z),Et,jt;return st===_t&&_t===Ot?Et=jt=Wt:(Et=re((.4360747*st+.3850649*_t+.1430804*Ot)/V),jt=re((.0139322*st+.0971045*_t+.7141733*Ot)/q)),new te(116*Wt-16,500*(Et-Wt),200*(Wt-jt),Ne.opacity)}function ae(Ne,st){return new te(Ne,0,0,st==null?1:st)}function ie(Ne,st,_t,Ot){return arguments.length===1?j(Ne):new te(Ne,st,_t,Ot==null?1:Ot)}function te(Ne,st,_t,Ot){this.l=+Ne,this.a=+st,this.b=+_t,this.opacity=+Ot}a(te,ie,u(c,{brighter:function(Ne){return new te(this.l+H*(Ne==null?1:Ne),this.a,this.b,this.opacity)},darker:function(Ne){return new te(this.l-H*(Ne==null?1:Ne),this.a,this.b,this.opacity)},rgb:function(){var Ne=(this.l+16)/116,st=isNaN(this.a)?Ne:Ne+this.a/500,_t=isNaN(this.b)?Ne:Ne-this.b/200;return st=V*ce(st),Ne=Z*ce(Ne),_t=q*ce(_t),new C(pe(3.1338561*st-1.6168667*Ne-.4906146*_t),pe(-.9787684*st+1.9161415*Ne+.033454*_t),pe(.0719453*st-.2289914*Ne+1.4052427*_t),this.opacity)}}));function re(Ne){return Ne>$?Math.pow(Ne,1/3):Ne/ve+J}function ce(Ne){return Ne>ne?Ne*Ne*Ne:ve*(Ne-J)}function pe(Ne){return 255*(Ne<=.0031308?12.92*Ne:1.055*Math.pow(Ne,1/2.4)-.055)}function fe(Ne){return(Ne/=255)<=.04045?Ne/12.92:Math.pow((Ne+.055)/1.055,2.4)}function se(Ne){if(Ne instanceof xe)return new xe(Ne.h,Ne.c,Ne.l,Ne.opacity);if(Ne instanceof te||(Ne=j(Ne)),Ne.a===0&&Ne.b===0)return new xe(NaN,0<Ne.l&&Ne.l<100?0:NaN,Ne.l,Ne.opacity);var st=Math.atan2(Ne.b,Ne.a)*B;return new xe(st<0?st+360:st,Math.sqrt(Ne.a*Ne.a+Ne.b*Ne.b),Ne.l,Ne.opacity)}function de(Ne,st,_t,Ot){return arguments.length===1?se(Ne):new xe(_t,st,Ne,Ot==null?1:Ot)}function be(Ne,st,_t,Ot){return arguments.length===1?se(Ne):new xe(Ne,st,_t,Ot==null?1:Ot)}function xe(Ne,st,_t,Ot){this.h=+Ne,this.c=+st,this.l=+_t,this.opacity=+Ot}function ke(Ne){if(isNaN(Ne.h))return new te(Ne.l,0,0,Ne.opacity);var st=Ne.h*z;return new te(Ne.l,Math.cos(st)*Ne.c,Math.sin(st)*Ne.c,Ne.opacity)}a(xe,be,u(c,{brighter:function(Ne){return new xe(this.h,this.c,this.l+H*(Ne==null?1:Ne),this.opacity)},darker:function(Ne){return new xe(this.h,this.c,this.l-H*(Ne==null?1:Ne),this.opacity)},rgb:function(){return ke(this).rgb()}}));var Re=-.14861,Ke=1.78277,ze=-.29227,Je=-.90649,qe=1.97294,Ee=qe*Je,Ae=qe*Ke,Be=Ke*ze-Je*Re;function $e(Ne){if(Ne instanceof bt)return new bt(Ne.h,Ne.s,Ne.l,Ne.opacity);Ne instanceof C||(Ne=L(Ne));var st=Ne.r/255,_t=Ne.g/255,Ot=Ne.b/255,Wt=(Be*Ot+Ee*st-Ae*_t)/(Be+Ee-Ae),Et=Ot-Wt,jt=(qe*(_t-Wt)-ze*Et)/Je,Zt=Math.sqrt(jt*jt+Et*Et)/(qe*Wt*(1-Wt)),Mt=Zt?Math.atan2(jt,Et)*B-120:NaN;return new bt(Mt<0?Mt+360:Mt,Zt,Wt,Ne.opacity)}function xt(Ne,st,_t,Ot){return arguments.length===1?$e(Ne):new bt(Ne,st,_t,Ot==null?1:Ot)}function bt(Ne,st,_t,Ot){this.h=+Ne,this.s=+st,this.l=+_t,this.opacity=+Ot}a(bt,xt,u(c,{brighter:function(Ne){return Ne=Ne==null?f:Math.pow(f,Ne),new bt(this.h,this.s,this.l*Ne,this.opacity)},darker:function(Ne){return Ne=Ne==null?t:Math.pow(t,Ne),new bt(this.h,this.s,this.l*Ne,this.opacity)},rgb:function(){var Ne=isNaN(this.h)?0:(this.h+120)*z,st=+this.l,_t=isNaN(this.s)?0:this.s*st*(1-st),Ot=Math.cos(Ne),Wt=Math.sin(Ne);return new C(255*(st+_t*(Re*Ot+Ke*Wt)),255*(st+_t*(ze*Ot+Je*Wt)),255*(st+_t*(qe*Ot)),this.opacity)}})),r.color=T,r.cubehelix=xt,r.gray=ae,r.hcl=be,r.hsl=G,r.lab=ie,r.lch=de,r.rgb=I,Object.defineProperty(r,"__esModule",{value:!0})})},{}],159:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a={value:function(){}};function u(){for(var o=0,l=arguments.length,h={},i;o<l;++o){if(!(i=arguments[o]+"")||i in h||/[\s.]/.test(i))throw new Error("illegal type: "+i);h[i]=[]}return new c(h)}function c(o){this._=o}function t(o,l){return o.trim().split(/^|\s+/).map(function(h){var i="",s=h.indexOf(".");if(s>=0&&(i=h.slice(s+1),h=h.slice(0,s)),h&&!l.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:i}})}c.prototype=u.prototype={constructor:c,on:function(o,l){var h=this._,i=t(o+"",h),s,p=-1,v=i.length;if(arguments.length<2){for(;++p<v;)if((s=(o=i[p]).type)&&(s=f(h[s],o.name)))return s;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++p<v;)if(s=(o=i[p]).type)h[s]=n(h[s],o.name,l);else if(l==null)for(s in h)h[s]=n(h[s],o.name,null);return this},copy:function(){var o={},l=this._;for(var h in l)o[h]=l[h].slice();return new c(o)},call:function(o,l){if((s=arguments.length-2)>0)for(var h=new Array(s),i=0,s,p;i<s;++i)h[i]=arguments[i+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(p=this._[o],i=0,s=p.length;i<s;++i)p[i].value.apply(l,h)},apply:function(o,l,h){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var i=this._[o],s=0,p=i.length;s<p;++s)i[s].value.apply(l,h)}};function f(o,l){for(var h=0,i=o.length,s;h<i;++h)if((s=o[h]).name===l)return s.value}function n(o,l,h){for(var i=0,s=o.length;i<s;++i)if(o[i].name===l){o[i]=a,o=o.slice(0,i).concat(o.slice(i+1));break}return h!=null&&o.push({name:l,value:h}),o}r.dispatch=u,Object.defineProperty(r,"__esModule",{value:!0})})},{}],160:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):a(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)})(this,function(r,a,u,c,t){function f(L,I){var C;L==null&&(L=0),I==null&&(I=0);function k(){var E,R=C.length,O,N=0,G=0;for(E=0;E<R;++E)O=C[E],N+=O.x,G+=O.y;for(N=N/R-L,G=G/R-I,E=0;E<R;++E)O=C[E],O.x-=N,O.y-=G}return k.initialize=function(E){C=E},k.x=function(E){return arguments.length?(L=+E,k):L},k.y=function(E){return arguments.length?(I=+E,k):I},k}function n(L){return function(){return L}}function o(){return(Math.random()-.5)*1e-6}function l(L){return L.x+L.vx}function h(L){return L.y+L.vy}function i(L){var I,C,k=1,E=1;typeof L!="function"&&(L=n(L==null?1:+L));function R(){for(var G,U=I.length,Y,z,B,H,V,Z,q=0;q<E;++q)for(Y=a.quadtree(I,l,h).visitAfter(O),G=0;G<U;++G)z=I[G],V=C[z.index],Z=V*V,B=z.x+z.vx,H=z.y+z.vy,Y.visit(J);function J(ne,ve,$,j,ae){var ie=ne.data,te=ne.r,re=V+te;if(ie){if(ie.index>z.index){var ce=B-ie.x-ie.vx,pe=H-ie.y-ie.vy,fe=ce*ce+pe*pe;fe<re*re&&(ce===0&&(ce=o(),fe+=ce*ce),pe===0&&(pe=o(),fe+=pe*pe),fe=(re-(fe=Math.sqrt(fe)))/fe*k,z.vx+=(ce*=fe)*(re=(te*=te)/(Z+te)),z.vy+=(pe*=fe)*re,ie.vx-=ce*(re=1-re),ie.vy-=pe*re)}return}return ve>B+re||j<B-re||$>H+re||ae<H-re}}function O(G){if(G.data)return G.r=C[G.data.index];for(var U=G.r=0;U<4;++U)G[U]&&G[U].r>G.r&&(G.r=G[U].r)}function N(){if(!!I){var G,U=I.length,Y;for(C=new Array(U),G=0;G<U;++G)Y=I[G],C[Y.index]=+L(Y,G,I)}}return R.initialize=function(G){I=G,N()},R.iterations=function(G){return arguments.length?(E=+G,R):E},R.strength=function(G){return arguments.length?(k=+G,R):k},R.radius=function(G){return arguments.length?(L=typeof G=="function"?G:n(+G),N(),R):L},R}function s(L){return L.index}function p(L,I){var C=L.get(I);if(!C)throw new Error("missing: "+I);return C}function v(L){var I=s,C=Y,k,E=n(30),R,O,N,G,U=1;L==null&&(L=[]);function Y(Z){return 1/Math.min(N[Z.source.index],N[Z.target.index])}function z(Z){for(var q=0,J=L.length;q<U;++q)for(var ne=0,ve,$,j,ae,ie,te,re;ne<J;++ne)ve=L[ne],$=ve.source,j=ve.target,ae=j.x+j.vx-$.x-$.vx||o(),ie=j.y+j.vy-$.y-$.vy||o(),te=Math.sqrt(ae*ae+ie*ie),te=(te-R[ne])/te*Z*k[ne],ae*=te,ie*=te,j.vx-=ae*(re=G[ne]),j.vy-=ie*re,$.vx+=ae*(re=1-re),$.vy+=ie*re}function B(){if(!!O){var Z,q=O.length,J=L.length,ne=u.map(O,I),ve;for(Z=0,N=new Array(q);Z<J;++Z)ve=L[Z],ve.index=Z,typeof ve.source!="object"&&(ve.source=p(ne,ve.source)),typeof ve.target!="object"&&(ve.target=p(ne,ve.target)),N[ve.source.index]=(N[ve.source.index]||0)+1,N[ve.target.index]=(N[ve.target.index]||0)+1;for(Z=0,G=new Array(J);Z<J;++Z)ve=L[Z],G[Z]=N[ve.source.index]/(N[ve.source.index]+N[ve.target.index]);k=new Array(J),H(),R=new Array(J),V()}}function H(){if(!!O)for(var Z=0,q=L.length;Z<q;++Z)k[Z]=+C(L[Z],Z,L)}function V(){if(!!O)for(var Z=0,q=L.length;Z<q;++Z)R[Z]=+E(L[Z],Z,L)}return z.initialize=function(Z){O=Z,B()},z.links=function(Z){return arguments.length?(L=Z,B(),z):L},z.id=function(Z){return arguments.length?(I=Z,z):I},z.iterations=function(Z){return arguments.length?(U=+Z,z):U},z.strength=function(Z){return arguments.length?(C=typeof Z=="function"?Z:n(+Z),H(),z):C},z.distance=function(Z){return arguments.length?(E=typeof Z=="function"?Z:n(+Z),V(),z):E},z}function m(L){return L.x}function b(L){return L.y}var y=10,x=Math.PI*(3-Math.sqrt(5));function w(L){var I,C=1,k=.001,E=1-Math.pow(k,1/300),R=0,O=.6,N=u.map(),G=t.timer(Y),U=c.dispatch("tick","end");L==null&&(L=[]);function Y(){z(),U.call("tick",I),C<k&&(G.stop(),U.call("end",I))}function z(V){var Z,q=L.length,J;V===void 0&&(V=1);for(var ne=0;ne<V;++ne)for(C+=(R-C)*E,N.each(function(ve){ve(C)}),Z=0;Z<q;++Z)J=L[Z],J.fx==null?J.x+=J.vx*=O:(J.x=J.fx,J.vx=0),J.fy==null?J.y+=J.vy*=O:(J.y=J.fy,J.vy=0);return I}function B(){for(var V=0,Z=L.length,q;V<Z;++V){if(q=L[V],q.index=V,q.fx!=null&&(q.x=q.fx),q.fy!=null&&(q.y=q.fy),isNaN(q.x)||isNaN(q.y)){var J=y*Math.sqrt(V),ne=V*x;q.x=J*Math.cos(ne),q.y=J*Math.sin(ne)}(isNaN(q.vx)||isNaN(q.vy))&&(q.vx=q.vy=0)}}function H(V){return V.initialize&&V.initialize(L),V}return B(),I={tick:z,restart:function(){return G.restart(Y),I},stop:function(){return G.stop(),I},nodes:function(V){return arguments.length?(L=V,B(),N.each(H),I):L},alpha:function(V){return arguments.length?(C=+V,I):C},alphaMin:function(V){return arguments.length?(k=+V,I):k},alphaDecay:function(V){return arguments.length?(E=+V,I):+E},alphaTarget:function(V){return arguments.length?(R=+V,I):R},velocityDecay:function(V){return arguments.length?(O=1-V,I):1-O},force:function(V,Z){return arguments.length>1?(Z==null?N.remove(V):N.set(V,H(Z)),I):N.get(V)},find:function(V,Z,q){var J=0,ne=L.length,ve,$,j,ae,ie;for(q==null?q=1/0:q*=q,J=0;J<ne;++J)ae=L[J],ve=V-ae.x,$=Z-ae.y,j=ve*ve+$*$,j<q&&(ie=ae,q=j);return ie},on:function(V,Z){return arguments.length>1?(U.on(V,Z),I):U.on(V)}}}function g(){var L,I,C,k=n(-30),E,R=1,O=1/0,N=.81;function G(B){var H,V=L.length,Z=a.quadtree(L,m,b).visitAfter(Y);for(C=B,H=0;H<V;++H)I=L[H],Z.visit(z)}function U(){if(!!L){var B,H=L.length,V;for(E=new Array(H),B=0;B<H;++B)V=L[B],E[V.index]=+k(V,B,L)}}function Y(B){var H=0,V,Z,q=0,J,ne,ve;if(B.length){for(J=ne=ve=0;ve<4;++ve)(V=B[ve])&&(Z=Math.abs(V.value))&&(H+=V.value,q+=Z,J+=Z*V.x,ne+=Z*V.y);B.x=J/q,B.y=ne/q}else{V=B,V.x=V.data.x,V.y=V.data.y;do H+=E[V.data.index];while(V=V.next)}B.value=H}function z(B,H,V,Z){if(!B.value)return!0;var q=B.x-I.x,J=B.y-I.y,ne=Z-H,ve=q*q+J*J;if(ne*ne/N<ve)return ve<O&&(q===0&&(q=o(),ve+=q*q),J===0&&(J=o(),ve+=J*J),ve<R&&(ve=Math.sqrt(R*ve)),I.vx+=q*B.value*C/ve,I.vy+=J*B.value*C/ve),!0;if(B.length||ve>=O)return;(B.data!==I||B.next)&&(q===0&&(q=o(),ve+=q*q),J===0&&(J=o(),ve+=J*J),ve<R&&(ve=Math.sqrt(R*ve)));do B.data!==I&&(ne=E[B.data.index]*C/ve,I.vx+=q*ne,I.vy+=J*ne);while(B=B.next)}return G.initialize=function(B){L=B,U()},G.strength=function(B){return arguments.length?(k=typeof B=="function"?B:n(+B),U(),G):k},G.distanceMin=function(B){return arguments.length?(R=B*B,G):Math.sqrt(R)},G.distanceMax=function(B){return arguments.length?(O=B*B,G):Math.sqrt(O)},G.theta=function(B){return arguments.length?(N=B*B,G):Math.sqrt(N)},G}function T(L,I,C){var k,E=n(.1),R,O;typeof L!="function"&&(L=n(+L)),I==null&&(I=0),C==null&&(C=0);function N(U){for(var Y=0,z=k.length;Y<z;++Y){var B=k[Y],H=B.x-I||1e-6,V=B.y-C||1e-6,Z=Math.sqrt(H*H+V*V),q=(O[Y]-Z)*R[Y]*U/Z;B.vx+=H*q,B.vy+=V*q}}function G(){if(!!k){var U,Y=k.length;for(R=new Array(Y),O=new Array(Y),U=0;U<Y;++U)O[U]=+L(k[U],U,k),R[U]=isNaN(O[U])?0:+E(k[U],U,k)}}return N.initialize=function(U){k=U,G()},N.strength=function(U){return arguments.length?(E=typeof U=="function"?U:n(+U),G(),N):E},N.radius=function(U){return arguments.length?(L=typeof U=="function"?U:n(+U),G(),N):L},N.x=function(U){return arguments.length?(I=+U,N):I},N.y=function(U){return arguments.length?(C=+U,N):C},N}function M(L){var I=n(.1),C,k,E;typeof L!="function"&&(L=n(L==null?0:+L));function R(N){for(var G=0,U=C.length,Y;G<U;++G)Y=C[G],Y.vx+=(E[G]-Y.x)*k[G]*N}function O(){if(!!C){var N,G=C.length;for(k=new Array(G),E=new Array(G),N=0;N<G;++N)k[N]=isNaN(E[N]=+L(C[N],N,C))?0:+I(C[N],N,C)}}return R.initialize=function(N){C=N,O()},R.strength=function(N){return arguments.length?(I=typeof N=="function"?N:n(+N),O(),R):I},R.x=function(N){return arguments.length?(L=typeof N=="function"?N:n(+N),O(),R):L},R}function P(L){var I=n(.1),C,k,E;typeof L!="function"&&(L=n(L==null?0:+L));function R(N){for(var G=0,U=C.length,Y;G<U;++G)Y=C[G],Y.vy+=(E[G]-Y.y)*k[G]*N}function O(){if(!!C){var N,G=C.length;for(k=new Array(G),E=new Array(G),N=0;N<G;++N)k[N]=isNaN(E[N]=+L(C[N],N,C))?0:+I(C[N],N,C)}}return R.initialize=function(N){C=N,O()},R.strength=function(N){return arguments.length?(I=typeof N=="function"?N:n(+N),O(),R):I},R.y=function(N){return arguments.length?(L=typeof N=="function"?N:n(+N),O(),R):L},R}r.forceCenter=f,r.forceCollide=i,r.forceLink=v,r.forceManyBody=g,r.forceRadial=T,r.forceSimulation=w,r.forceX=M,r.forceY=P,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){function a(Te,Le){return Te.parent===Le.parent?1:2}function u(Te){return Te.reduce(c,0)/Te.length}function c(Te,Le){return Te+Le.x}function t(Te){return 1+Te.reduce(f,0)}function f(Te,Le){return Math.max(Te,Le.y)}function n(Te){for(var Le;Le=Te.children;)Te=Le[0];return Te}function o(Te){for(var Le;Le=Te.children;)Te=Le[Le.length-1];return Te}function l(){var Te=a,Le=1,Ve=1,Qe=!1;function Me(Ie){var He,Ye=0;Ie.eachAfter(function(et){var lt=et.children;lt?(et.x=u(lt),et.y=t(lt)):(et.x=He?Ye+=Te(et,He):0,et.y=0,He=et)});var ut=n(Ie),nt=o(Ie),Ge=ut.x-Te(ut,nt)/2,at=nt.x+Te(nt,ut)/2;return Ie.eachAfter(Qe?function(et){et.x=(et.x-Ie.x)*Le,et.y=(Ie.y-et.y)*Ve}:function(et){et.x=(et.x-Ge)/(at-Ge)*Le,et.y=(1-(Ie.y?et.y/Ie.y:1))*Ve})}return Me.separation=function(Ie){return arguments.length?(Te=Ie,Me):Te},Me.size=function(Ie){return arguments.length?(Qe=!1,Le=+Ie[0],Ve=+Ie[1],Me):Qe?null:[Le,Ve]},Me.nodeSize=function(Ie){return arguments.length?(Qe=!0,Le=+Ie[0],Ve=+Ie[1],Me):Qe?[Le,Ve]:null},Me}function h(Te){var Le=0,Ve=Te.children,Qe=Ve&&Ve.length;if(!Qe)Le=1;else for(;--Qe>=0;)Le+=Ve[Qe].value;Te.value=Le}function i(){return this.eachAfter(h)}function s(Te){var Le=this,Ve,Qe=[Le],Me,Ie,He;do for(Ve=Qe.reverse(),Qe=[];Le=Ve.pop();)if(Te(Le),Me=Le.children,Me)for(Ie=0,He=Me.length;Ie<He;++Ie)Qe.push(Me[Ie]);while(Qe.length);return this}function p(Te){for(var Le=this,Ve=[Le],Qe,Me;Le=Ve.pop();)if(Te(Le),Qe=Le.children,Qe)for(Me=Qe.length-1;Me>=0;--Me)Ve.push(Qe[Me]);return this}function v(Te){for(var Le=this,Ve=[Le],Qe=[],Me,Ie,He;Le=Ve.pop();)if(Qe.push(Le),Me=Le.children,Me)for(Ie=0,He=Me.length;Ie<He;++Ie)Ve.push(Me[Ie]);for(;Le=Qe.pop();)Te(Le);return this}function m(Te){return this.eachAfter(function(Le){for(var Ve=+Te(Le.data)||0,Qe=Le.children,Me=Qe&&Qe.length;--Me>=0;)Ve+=Qe[Me].value;Le.value=Ve})}function b(Te){return this.eachBefore(function(Le){Le.children&&Le.children.sort(Te)})}function y(Te){for(var Le=this,Ve=x(Le,Te),Qe=[Le];Le!==Ve;)Le=Le.parent,Qe.push(Le);for(var Me=Qe.length;Te!==Ve;)Qe.splice(Me,0,Te),Te=Te.parent;return Qe}function x(Te,Le){if(Te===Le)return Te;var Ve=Te.ancestors(),Qe=Le.ancestors(),Me=null;for(Te=Ve.pop(),Le=Qe.pop();Te===Le;)Me=Te,Te=Ve.pop(),Le=Qe.pop();return Me}function w(){for(var Te=this,Le=[Te];Te=Te.parent;)Le.push(Te);return Le}function g(){var Te=[];return this.each(function(Le){Te.push(Le)}),Te}function T(){var Te=[];return this.eachBefore(function(Le){Le.children||Te.push(Le)}),Te}function M(){var Te=this,Le=[];return Te.each(function(Ve){Ve!==Te&&Le.push({source:Ve.parent,target:Ve})}),Le}function P(Te,Le){var Ve=new E(Te),Qe=+Te.value&&(Ve.value=Te.value),Me,Ie=[Ve],He,Ye,ut,nt;for(Le==null&&(Le=I);Me=Ie.pop();)if(Qe&&(Me.value=+Me.data.value),(Ye=Le(Me.data))&&(nt=Ye.length))for(Me.children=new Array(nt),ut=nt-1;ut>=0;--ut)Ie.push(He=Me.children[ut]=new E(Ye[ut])),He.parent=Me,He.depth=Me.depth+1;return Ve.eachBefore(k)}function L(){return P(this).eachBefore(C)}function I(Te){return Te.children}function C(Te){Te.data=Te.data.data}function k(Te){var Le=0;do Te.height=Le;while((Te=Te.parent)&&Te.height<++Le)}function E(Te){this.data=Te,this.depth=this.height=0,this.parent=null}E.prototype=P.prototype={constructor:E,count:i,each:s,eachAfter:v,eachBefore:p,sum:m,sort:b,path:y,ancestors:w,descendants:g,leaves:T,links:M,copy:L};var R=Array.prototype.slice;function O(Te){for(var Le=Te.length,Ve,Qe;Le;)Qe=Math.random()*Le--|0,Ve=Te[Le],Te[Le]=Te[Qe],Te[Qe]=Ve;return Te}function N(Te){for(var Le=0,Ve=(Te=O(R.call(Te))).length,Qe=[],Me,Ie;Le<Ve;)Me=Te[Le],Ie&&Y(Ie,Me)?++Le:(Ie=B(Qe=G(Qe,Me)),Le=0);return Ie}function G(Te,Le){var Ve,Qe;if(z(Le,Te))return[Le];for(Ve=0;Ve<Te.length;++Ve)if(U(Le,Te[Ve])&&z(V(Te[Ve],Le),Te))return[Te[Ve],Le];for(Ve=0;Ve<Te.length-1;++Ve)for(Qe=Ve+1;Qe<Te.length;++Qe)if(U(V(Te[Ve],Te[Qe]),Le)&&U(V(Te[Ve],Le),Te[Qe])&&U(V(Te[Qe],Le),Te[Ve])&&z(Z(Te[Ve],Te[Qe],Le),Te))return[Te[Ve],Te[Qe],Le];throw new Error}function U(Te,Le){var Ve=Te.r-Le.r,Qe=Le.x-Te.x,Me=Le.y-Te.y;return Ve<0||Ve*Ve<Qe*Qe+Me*Me}function Y(Te,Le){var Ve=Te.r-Le.r+1e-6,Qe=Le.x-Te.x,Me=Le.y-Te.y;return Ve>0&&Ve*Ve>Qe*Qe+Me*Me}function z(Te,Le){for(var Ve=0;Ve<Le.length;++Ve)if(!Y(Te,Le[Ve]))return!1;return!0}function B(Te){switch(Te.length){case 1:return H(Te[0]);case 2:return V(Te[0],Te[1]);case 3:return Z(Te[0],Te[1],Te[2])}}function H(Te){return{x:Te.x,y:Te.y,r:Te.r}}function V(Te,Le){var Ve=Te.x,Qe=Te.y,Me=Te.r,Ie=Le.x,He=Le.y,Ye=Le.r,ut=Ie-Ve,nt=He-Qe,Ge=Ye-Me,at=Math.sqrt(ut*ut+nt*nt);return{x:(Ve+Ie+ut/at*Ge)/2,y:(Qe+He+nt/at*Ge)/2,r:(at+Me+Ye)/2}}function Z(Te,Le,Ve){var Qe=Te.x,Me=Te.y,Ie=Te.r,He=Le.x,Ye=Le.y,ut=Le.r,nt=Ve.x,Ge=Ve.y,at=Ve.r,et=Qe-He,lt=Qe-nt,Ct=Me-Ye,Pt=Me-Ge,$t=ut-Ie,je=at-Ie,Oe=Qe*Qe+Me*Me-Ie*Ie,mt=Oe-He*He-Ye*Ye+ut*ut,wt=Oe-nt*nt-Ge*Ge+at*at,yt=lt*Ct-et*Pt,St=(Ct*wt-Pt*mt)/(yt*2)-Qe,kt=(Pt*$t-Ct*je)/yt,Rt=(lt*mt-et*wt)/(yt*2)-Me,zt=(et*je-lt*$t)/yt,Xt=kt*kt+zt*zt-1,Yt=2*(Ie+St*kt+Rt*zt),Vt=St*St+Rt*Rt-Ie*Ie,cr=-(Xt?(Yt+Math.sqrt(Yt*Yt-4*Xt*Vt))/(2*Xt):Vt/Yt);return{x:Qe+St+kt*cr,y:Me+Rt+zt*cr,r:cr}}function q(Te,Le,Ve){var Qe=Te.x-Le.x,Me,Ie,He=Te.y-Le.y,Ye,ut,nt=Qe*Qe+He*He;nt?(Ie=Le.r+Ve.r,Ie*=Ie,ut=Te.r+Ve.r,ut*=ut,Ie>ut?(Me=(nt+ut-Ie)/(2*nt),Ye=Math.sqrt(Math.max(0,ut/nt-Me*Me)),Ve.x=Te.x-Me*Qe-Ye*He,Ve.y=Te.y-Me*He+Ye*Qe):(Me=(nt+Ie-ut)/(2*nt),Ye=Math.sqrt(Math.max(0,Ie/nt-Me*Me)),Ve.x=Le.x+Me*Qe-Ye*He,Ve.y=Le.y+Me*He+Ye*Qe)):(Ve.x=Le.x+Ve.r,Ve.y=Le.y)}function J(Te,Le){var Ve=Te.r+Le.r-1e-6,Qe=Le.x-Te.x,Me=Le.y-Te.y;return Ve>0&&Ve*Ve>Qe*Qe+Me*Me}function ne(Te){var Le=Te._,Ve=Te.next._,Qe=Le.r+Ve.r,Me=(Le.x*Ve.r+Ve.x*Le.r)/Qe,Ie=(Le.y*Ve.r+Ve.y*Le.r)/Qe;return Me*Me+Ie*Ie}function ve(Te){this._=Te,this.next=null,this.previous=null}function $(Te){if(!(Me=Te.length))return 0;var Le,Ve,Qe,Me,Ie,He,Ye,ut,nt,Ge,at;if(Le=Te[0],Le.x=0,Le.y=0,!(Me>1))return Le.r;if(Ve=Te[1],Le.x=-Ve.r,Ve.x=Le.r,Ve.y=0,!(Me>2))return Le.r+Ve.r;q(Ve,Le,Qe=Te[2]),Le=new ve(Le),Ve=new ve(Ve),Qe=new ve(Qe),Le.next=Qe.previous=Ve,Ve.next=Le.previous=Qe,Qe.next=Ve.previous=Le;e:for(Ye=3;Ye<Me;++Ye){q(Le._,Ve._,Qe=Te[Ye]),Qe=new ve(Qe),ut=Ve.next,nt=Le.previous,Ge=Ve._.r,at=Le._.r;do if(Ge<=at){if(J(ut._,Qe._)){Ve=ut,Le.next=Ve,Ve.previous=Le,--Ye;continue e}Ge+=ut._.r,ut=ut.next}else{if(J(nt._,Qe._)){Le=nt,Le.next=Ve,Ve.previous=Le,--Ye;continue e}at+=nt._.r,nt=nt.previous}while(ut!==nt.next);for(Qe.previous=Le,Qe.next=Ve,Le.next=Ve.previous=Ve=Qe,Ie=ne(Le);(Qe=Qe.next)!==Ve;)(He=ne(Qe))<Ie&&(Le=Qe,Ie=He);Ve=Le.next}for(Le=[Ve._],Qe=Ve;(Qe=Qe.next)!==Ve;)Le.push(Qe._);for(Qe=N(Le),Ye=0;Ye<Me;++Ye)Le=Te[Ye],Le.x-=Qe.x,Le.y-=Qe.y;return Qe.r}function j(Te){return $(Te),Te}function ae(Te){return Te==null?null:ie(Te)}function ie(Te){if(typeof Te!="function")throw new Error;return Te}function te(){return 0}function re(Te){return function(){return Te}}function ce(Te){return Math.sqrt(Te.value)}function pe(){var Te=null,Le=1,Ve=1,Qe=te;function Me(Ie){return Ie.x=Le/2,Ie.y=Ve/2,Te?Ie.eachBefore(fe(Te)).eachAfter(se(Qe,.5)).eachBefore(de(1)):Ie.eachBefore(fe(ce)).eachAfter(se(te,1)).eachAfter(se(Qe,Ie.r/Math.min(Le,Ve))).eachBefore(de(Math.min(Le,Ve)/(2*Ie.r))),Ie}return Me.radius=function(Ie){return arguments.length?(Te=ae(Ie),Me):Te},Me.size=function(Ie){return arguments.length?(Le=+Ie[0],Ve=+Ie[1],Me):[Le,Ve]},Me.padding=function(Ie){return arguments.length?(Qe=typeof Ie=="function"?Ie:re(+Ie),Me):Qe},Me}function fe(Te){return function(Le){Le.children||(Le.r=Math.max(0,+Te(Le)||0))}}function se(Te,Le){return function(Ve){if(Qe=Ve.children){var Qe,Me,Ie=Qe.length,He=Te(Ve)*Le||0,Ye;if(He)for(Me=0;Me<Ie;++Me)Qe[Me].r+=He;if(Ye=$(Qe),He)for(Me=0;Me<Ie;++Me)Qe[Me].r-=He;Ve.r=Ye+He}}}function de(Te){return function(Le){var Ve=Le.parent;Le.r*=Te,Ve&&(Le.x=Ve.x+Te*Le.x,Le.y=Ve.y+Te*Le.y)}}function be(Te){Te.x0=Math.round(Te.x0),Te.y0=Math.round(Te.y0),Te.x1=Math.round(Te.x1),Te.y1=Math.round(Te.y1)}function xe(Te,Le,Ve,Qe,Me){for(var Ie=Te.children,He,Ye=-1,ut=Ie.length,nt=Te.value&&(Qe-Le)/Te.value;++Ye<ut;)He=Ie[Ye],He.y0=Ve,He.y1=Me,He.x0=Le,He.x1=Le+=He.value*nt}function ke(){var Te=1,Le=1,Ve=0,Qe=!1;function Me(He){var Ye=He.height+1;return He.x0=He.y0=Ve,He.x1=Te,He.y1=Le/Ye,He.eachBefore(Ie(Le,Ye)),Qe&&He.eachBefore(be),He}function Ie(He,Ye){return function(ut){ut.children&&xe(ut,ut.x0,He*(ut.depth+1)/Ye,ut.x1,He*(ut.depth+2)/Ye);var nt=ut.x0,Ge=ut.y0,at=ut.x1-Ve,et=ut.y1-Ve;at<nt&&(nt=at=(nt+at)/2),et<Ge&&(Ge=et=(Ge+et)/2),ut.x0=nt,ut.y0=Ge,ut.x1=at,ut.y1=et}}return Me.round=function(He){return arguments.length?(Qe=!!He,Me):Qe},Me.size=function(He){return arguments.length?(Te=+He[0],Le=+He[1],Me):[Te,Le]},Me.padding=function(He){return arguments.length?(Ve=+He,Me):Ve},Me}var Re="$",Ke={depth:-1},ze={};function Je(Te){return Te.id}function qe(Te){return Te.parentId}function Ee(){var Te=Je,Le=qe;function Ve(Qe){var Me,Ie,He=Qe.length,Ye,ut,nt,Ge=new Array(He),at,et,lt={};for(Ie=0;Ie<He;++Ie)Me=Qe[Ie],nt=Ge[Ie]=new E(Me),(at=Te(Me,Ie,Qe))!=null&&(at+="")&&(et=Re+(nt.id=at),lt[et]=et in lt?ze:nt);for(Ie=0;Ie<He;++Ie)if(nt=Ge[Ie],at=Le(Qe[Ie],Ie,Qe),at==null||!(at+="")){if(Ye)throw new Error("multiple roots");Ye=nt}else{if(ut=lt[Re+at],!ut)throw new Error("missing: "+at);if(ut===ze)throw new Error("ambiguous: "+at);ut.children?ut.children.push(nt):ut.children=[nt],nt.parent=ut}if(!Ye)throw new Error("no root");if(Ye.parent=Ke,Ye.eachBefore(function(Ct){Ct.depth=Ct.parent.depth+1,--He}).eachBefore(k),Ye.parent=null,He>0)throw new Error("cycle");return Ye}return Ve.id=function(Qe){return arguments.length?(Te=ie(Qe),Ve):Te},Ve.parentId=function(Qe){return arguments.length?(Le=ie(Qe),Ve):Le},Ve}function Ae(Te,Le){return Te.parent===Le.parent?1:2}function Be(Te){var Le=Te.children;return Le?Le[0]:Te.t}function $e(Te){var Le=Te.children;return Le?Le[Le.length-1]:Te.t}function xt(Te,Le,Ve){var Qe=Ve/(Le.i-Te.i);Le.c-=Qe,Le.s+=Ve,Te.c+=Qe,Le.z+=Ve,Le.m+=Ve}function bt(Te){for(var Le=0,Ve=0,Qe=Te.children,Me=Qe.length,Ie;--Me>=0;)Ie=Qe[Me],Ie.z+=Le,Ie.m+=Le,Le+=Ie.s+(Ve+=Ie.c)}function Ne(Te,Le,Ve){return Te.a.parent===Le.parent?Te.a:Ve}function st(Te,Le){this._=Te,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Le}st.prototype=Object.create(E.prototype);function _t(Te){for(var Le=new st(Te,0),Ve,Qe=[Le],Me,Ie,He,Ye;Ve=Qe.pop();)if(Ie=Ve._.children)for(Ve.children=new Array(Ye=Ie.length),He=Ye-1;He>=0;--He)Qe.push(Me=Ve.children[He]=new st(Ie[He],He)),Me.parent=Ve;return(Le.parent=new st(null,0)).children=[Le],Le}function Ot(){var Te=Ae,Le=1,Ve=1,Qe=null;function Me(nt){var Ge=_t(nt);if(Ge.eachAfter(Ie),Ge.parent.m=-Ge.z,Ge.eachBefore(He),Qe)nt.eachBefore(ut);else{var at=nt,et=nt,lt=nt;nt.eachBefore(function(Oe){Oe.x<at.x&&(at=Oe),Oe.x>et.x&&(et=Oe),Oe.depth>lt.depth&&(lt=Oe)});var Ct=at===et?1:Te(at,et)/2,Pt=Ct-at.x,$t=Le/(et.x+Ct+Pt),je=Ve/(lt.depth||1);nt.eachBefore(function(Oe){Oe.x=(Oe.x+Pt)*$t,Oe.y=Oe.depth*je})}return nt}function Ie(nt){var Ge=nt.children,at=nt.parent.children,et=nt.i?at[nt.i-1]:null;if(Ge){bt(nt);var lt=(Ge[0].z+Ge[Ge.length-1].z)/2;et?(nt.z=et.z+Te(nt._,et._),nt.m=nt.z-lt):nt.z=lt}else et&&(nt.z=et.z+Te(nt._,et._));nt.parent.A=Ye(nt,et,nt.parent.A||at[0])}function He(nt){nt._.x=nt.z+nt.parent.m,nt.m+=nt.parent.m}function Ye(nt,Ge,at){if(Ge){for(var et=nt,lt=nt,Ct=Ge,Pt=et.parent.children[0],$t=et.m,je=lt.m,Oe=Ct.m,mt=Pt.m,wt;Ct=$e(Ct),et=Be(et),Ct&&et;)Pt=Be(Pt),lt=$e(lt),lt.a=nt,wt=Ct.z+Oe-et.z-$t+Te(Ct._,et._),wt>0&&(xt(Ne(Ct,nt,at),nt,wt),$t+=wt,je+=wt),Oe+=Ct.m,$t+=et.m,mt+=Pt.m,je+=lt.m;Ct&&!$e(lt)&&(lt.t=Ct,lt.m+=Oe-je),et&&!Be(Pt)&&(Pt.t=et,Pt.m+=$t-mt,at=nt)}return at}function ut(nt){nt.x*=Le,nt.y=nt.depth*Ve}return Me.separation=function(nt){return arguments.length?(Te=nt,Me):Te},Me.size=function(nt){return arguments.length?(Qe=!1,Le=+nt[0],Ve=+nt[1],Me):Qe?null:[Le,Ve]},Me.nodeSize=function(nt){return arguments.length?(Qe=!0,Le=+nt[0],Ve=+nt[1],Me):Qe?[Le,Ve]:null},Me}function Wt(Te,Le,Ve,Qe,Me){for(var Ie=Te.children,He,Ye=-1,ut=Ie.length,nt=Te.value&&(Me-Ve)/Te.value;++Ye<ut;)He=Ie[Ye],He.x0=Le,He.x1=Qe,He.y0=Ve,He.y1=Ve+=He.value*nt}var Et=(1+Math.sqrt(5))/2;function jt(Te,Le,Ve,Qe,Me,Ie){for(var He=[],Ye=Le.children,ut,nt,Ge=0,at=0,et=Ye.length,lt,Ct,Pt=Le.value,$t,je,Oe,mt,wt,yt,St;Ge<et;){lt=Me-Ve,Ct=Ie-Qe;do $t=Ye[at++].value;while(!$t&&at<et);for(je=Oe=$t,yt=Math.max(Ct/lt,lt/Ct)/(Pt*Te),St=$t*$t*yt,wt=Math.max(Oe/St,St/je);at<et;++at){if($t+=nt=Ye[at].value,nt<je&&(je=nt),nt>Oe&&(Oe=nt),St=$t*$t*yt,mt=Math.max(Oe/St,St/je),mt>wt){$t-=nt;break}wt=mt}He.push(ut={value:$t,dice:lt<Ct,children:Ye.slice(Ge,at)}),ut.dice?xe(ut,Ve,Qe,Me,Pt?Qe+=Ct*$t/Pt:Ie):Wt(ut,Ve,Qe,Pt?Ve+=lt*$t/Pt:Me,Ie),Pt-=$t,Ge=at}return He}var Zt=function Te(Le){function Ve(Qe,Me,Ie,He,Ye){jt(Le,Qe,Me,Ie,He,Ye)}return Ve.ratio=function(Qe){return Te((Qe=+Qe)>1?Qe:1)},Ve}(Et);function Mt(){var Te=Zt,Le=!1,Ve=1,Qe=1,Me=[0],Ie=te,He=te,Ye=te,ut=te,nt=te;function Ge(et){return et.x0=et.y0=0,et.x1=Ve,et.y1=Qe,et.eachBefore(at),Me=[0],Le&&et.eachBefore(be),et}function at(et){var lt=Me[et.depth],Ct=et.x0+lt,Pt=et.y0+lt,$t=et.x1-lt,je=et.y1-lt;$t<Ct&&(Ct=$t=(Ct+$t)/2),je<Pt&&(Pt=je=(Pt+je)/2),et.x0=Ct,et.y0=Pt,et.x1=$t,et.y1=je,et.children&&(lt=Me[et.depth+1]=Ie(et)/2,Ct+=nt(et)-lt,Pt+=He(et)-lt,$t-=Ye(et)-lt,je-=ut(et)-lt,$t<Ct&&(Ct=$t=(Ct+$t)/2),je<Pt&&(Pt=je=(Pt+je)/2),Te(et,Ct,Pt,$t,je))}return Ge.round=function(et){return arguments.length?(Le=!!et,Ge):Le},Ge.size=function(et){return arguments.length?(Ve=+et[0],Qe=+et[1],Ge):[Ve,Qe]},Ge.tile=function(et){return arguments.length?(Te=ie(et),Ge):Te},Ge.padding=function(et){return arguments.length?Ge.paddingInner(et).paddingOuter(et):Ge.paddingInner()},Ge.paddingInner=function(et){return arguments.length?(Ie=typeof et=="function"?et:re(+et),Ge):Ie},Ge.paddingOuter=function(et){return arguments.length?Ge.paddingTop(et).paddingRight(et).paddingBottom(et).paddingLeft(et):Ge.paddingTop()},Ge.paddingTop=function(et){return arguments.length?(He=typeof et=="function"?et:re(+et),Ge):He},Ge.paddingRight=function(et){return arguments.length?(Ye=typeof et=="function"?et:re(+et),Ge):Ye},Ge.paddingBottom=function(et){return arguments.length?(ut=typeof et=="function"?et:re(+et),Ge):ut},Ge.paddingLeft=function(et){return arguments.length?(nt=typeof et=="function"?et:re(+et),Ge):nt},Ge}function At(Te,Le,Ve,Qe,Me){var Ie=Te.children,He,Ye=Ie.length,ut,nt=new Array(Ye+1);for(nt[0]=ut=He=0;He<Ye;++He)nt[He+1]=ut+=Ie[He].value;Ge(0,Ye,Te.value,Le,Ve,Qe,Me);function Ge(at,et,lt,Ct,Pt,$t,je){if(at>=et-1){var Oe=Ie[at];Oe.x0=Ct,Oe.y0=Pt,Oe.x1=$t,Oe.y1=je;return}for(var mt=nt[at],wt=lt/2+mt,yt=at+1,St=et-1;yt<St;){var kt=yt+St>>>1;nt[kt]<wt?yt=kt+1:St=kt}wt-nt[yt-1]<nt[yt]-wt&&at+1<yt&&--yt;var Rt=nt[yt]-mt,zt=lt-Rt;if($t-Ct>je-Pt){var Xt=(Ct*zt+$t*Rt)/lt;Ge(at,yt,Rt,Ct,Pt,Xt,je),Ge(yt,et,zt,Xt,Pt,$t,je)}else{var Yt=(Pt*zt+je*Rt)/lt;Ge(at,yt,Rt,Ct,Pt,$t,Yt),Ge(yt,et,zt,Ct,Yt,$t,je)}}}function ft(Te,Le,Ve,Qe,Me){(Te.depth&1?Wt:xe)(Te,Le,Ve,Qe,Me)}var ot=function Te(Le){function Ve(Qe,Me,Ie,He,Ye){if((ut=Qe._squarify)&&ut.ratio===Le)for(var ut,nt,Ge,at,et=-1,lt,Ct=ut.length,Pt=Qe.value;++et<Ct;){for(nt=ut[et],Ge=nt.children,at=nt.value=0,lt=Ge.length;at<lt;++at)nt.value+=Ge[at].value;nt.dice?xe(nt,Me,Ie,He,Ie+=(Ye-Ie)*nt.value/Pt):Wt(nt,Me,Ie,Me+=(He-Me)*nt.value/Pt,Ye),Pt-=nt.value}else Qe._squarify=ut=jt(Le,Qe,Me,Ie,He,Ye),ut.ratio=Le}return Ve.ratio=function(Qe){return Te((Qe=+Qe)>1?Qe:1)},Ve}(Et);r.cluster=l,r.hierarchy=P,r.pack=pe,r.packEnclose=N,r.packSiblings=j,r.partition=ke,r.stratify=Ee,r.tree=Ot,r.treemap=Mt,r.treemapBinary=At,r.treemapDice=xe,r.treemapResquarify=ot,r.treemapSlice=Wt,r.treemapSliceDice=ft,r.treemapSquarify=Zt,Object.defineProperty(r,"__esModule",{value:!0})})},{}],162:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S,e("d3-color")):(r=r||self,a(r.d3=r.d3||{},r.d3))})(this,function(r,a){function u(Ae,Be,$e,xt,bt){var Ne=Ae*Ae,st=Ne*Ae;return((1-3*Ae+3*Ne-st)*Be+(4-6*Ne+3*st)*$e+(1+3*Ae+3*Ne-3*st)*xt+st*bt)/6}function c(Ae){var Be=Ae.length-1;return function($e){var xt=$e<=0?$e=0:$e>=1?($e=1,Be-1):Math.floor($e*Be),bt=Ae[xt],Ne=Ae[xt+1],st=xt>0?Ae[xt-1]:2*bt-Ne,_t=xt<Be-1?Ae[xt+2]:2*Ne-bt;return u(($e-xt/Be)*Be,st,bt,Ne,_t)}}function t(Ae){var Be=Ae.length;return function($e){var xt=Math.floor((($e%=1)<0?++$e:$e)*Be),bt=Ae[(xt+Be-1)%Be],Ne=Ae[xt%Be],st=Ae[(xt+1)%Be],_t=Ae[(xt+2)%Be];return u(($e-xt/Be)*Be,bt,Ne,st,_t)}}function f(Ae){return function(){return Ae}}function n(Ae,Be){return function($e){return Ae+$e*Be}}function o(Ae,Be,$e){return Ae=Math.pow(Ae,$e),Be=Math.pow(Be,$e)-Ae,$e=1/$e,function(xt){return Math.pow(Ae+xt*Be,$e)}}function l(Ae,Be){var $e=Be-Ae;return $e?n(Ae,$e>180||$e<-180?$e-360*Math.round($e/360):$e):f(isNaN(Ae)?Be:Ae)}function h(Ae){return(Ae=+Ae)==1?i:function(Be,$e){return $e-Be?o(Be,$e,Ae):f(isNaN(Be)?$e:Be)}}function i(Ae,Be){var $e=Be-Ae;return $e?n(Ae,$e):f(isNaN(Ae)?Be:Ae)}var s=function Ae(Be){var $e=h(Be);function xt(bt,Ne){var st=$e((bt=a.rgb(bt)).r,(Ne=a.rgb(Ne)).r),_t=$e(bt.g,Ne.g),Ot=$e(bt.b,Ne.b),Wt=i(bt.opacity,Ne.opacity);return function(Et){return bt.r=st(Et),bt.g=_t(Et),bt.b=Ot(Et),bt.opacity=Wt(Et),bt+""}}return xt.gamma=Ae,xt}(1);function p(Ae){return function(Be){var $e=Be.length,xt=new Array($e),bt=new Array($e),Ne=new Array($e),st,_t;for(st=0;st<$e;++st)_t=a.rgb(Be[st]),xt[st]=_t.r||0,bt[st]=_t.g||0,Ne[st]=_t.b||0;return xt=Ae(xt),bt=Ae(bt),Ne=Ae(Ne),_t.opacity=1,function(Ot){return _t.r=xt(Ot),_t.g=bt(Ot),_t.b=Ne(Ot),_t+""}}}var v=p(c),m=p(t);function b(Ae,Be){Be||(Be=[]);var $e=Ae?Math.min(Be.length,Ae.length):0,xt=Be.slice(),bt;return function(Ne){for(bt=0;bt<$e;++bt)xt[bt]=Ae[bt]*(1-Ne)+Be[bt]*Ne;return xt}}function y(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function x(Ae,Be){return(y(Be)?b:w)(Ae,Be)}function w(Ae,Be){var $e=Be?Be.length:0,xt=Ae?Math.min($e,Ae.length):0,bt=new Array(xt),Ne=new Array($e),st;for(st=0;st<xt;++st)bt[st]=E(Ae[st],Be[st]);for(;st<$e;++st)Ne[st]=Be[st];return function(_t){for(st=0;st<xt;++st)Ne[st]=bt[st](_t);return Ne}}function g(Ae,Be){var $e=new Date;return Ae=+Ae,Be=+Be,function(xt){return $e.setTime(Ae*(1-xt)+Be*xt),$e}}function T(Ae,Be){return Ae=+Ae,Be=+Be,function($e){return Ae*(1-$e)+Be*$e}}function M(Ae,Be){var $e={},xt={},bt;(Ae===null||typeof Ae!="object")&&(Ae={}),(Be===null||typeof Be!="object")&&(Be={});for(bt in Be)bt in Ae?$e[bt]=E(Ae[bt],Be[bt]):xt[bt]=Be[bt];return function(Ne){for(bt in $e)xt[bt]=$e[bt](Ne);return xt}}var P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp(P.source,"g");function I(Ae){return function(){return Ae}}function C(Ae){return function(Be){return Ae(Be)+""}}function k(Ae,Be){var $e=P.lastIndex=L.lastIndex=0,xt,bt,Ne,st=-1,_t=[],Ot=[];for(Ae=Ae+"",Be=Be+"";(xt=P.exec(Ae))&&(bt=L.exec(Be));)(Ne=bt.index)>$e&&(Ne=Be.slice($e,Ne),_t[st]?_t[st]+=Ne:_t[++st]=Ne),(xt=xt[0])===(bt=bt[0])?_t[st]?_t[st]+=bt:_t[++st]=bt:(_t[++st]=null,Ot.push({i:st,x:T(xt,bt)})),$e=L.lastIndex;return $e<Be.length&&(Ne=Be.slice($e),_t[st]?_t[st]+=Ne:_t[++st]=Ne),_t.length<2?Ot[0]?C(Ot[0].x):I(Be):(Be=Ot.length,function(Wt){for(var Et=0,jt;Et<Be;++Et)_t[(jt=Ot[Et]).i]=jt.x(Wt);return _t.join("")})}function E(Ae,Be){var $e=typeof Be,xt;return Be==null||$e==="boolean"?f(Be):($e==="number"?T:$e==="string"?(xt=a.color(Be))?(Be=xt,s):k:Be instanceof a.color?s:Be instanceof Date?g:y(Be)?b:Array.isArray(Be)?w:typeof Be.valueOf!="function"&&typeof Be.toString!="function"||isNaN(Be)?M:T)(Ae,Be)}function R(Ae){var Be=Ae.length;return function($e){return Ae[Math.max(0,Math.min(Be-1,Math.floor($e*Be)))]}}function O(Ae,Be){var $e=l(+Ae,+Be);return function(xt){var bt=$e(xt);return bt-360*Math.floor(bt/360)}}function N(Ae,Be){return Ae=+Ae,Be=+Be,function($e){return Math.round(Ae*(1-$e)+Be*$e)}}var G=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Y(Ae,Be,$e,xt,bt,Ne){var st,_t,Ot;return(st=Math.sqrt(Ae*Ae+Be*Be))&&(Ae/=st,Be/=st),(Ot=Ae*$e+Be*xt)&&($e-=Ae*Ot,xt-=Be*Ot),(_t=Math.sqrt($e*$e+xt*xt))&&($e/=_t,xt/=_t,Ot/=_t),Ae*xt<Be*$e&&(Ae=-Ae,Be=-Be,Ot=-Ot,st=-st),{translateX:bt,translateY:Ne,rotate:Math.atan2(Be,Ae)*G,skewX:Math.atan(Ot)*G,scaleX:st,scaleY:_t}}var z,B,H,V;function Z(Ae){return Ae==="none"?U:(z||(z=document.createElement("DIV"),B=document.documentElement,H=document.defaultView),z.style.transform=Ae,Ae=H.getComputedStyle(B.appendChild(z),null).getPropertyValue("transform"),B.removeChild(z),Ae=Ae.slice(7,-1).split(","),Y(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function q(Ae){return Ae==null||(V||(V=document.createElementNS("http://www.w3.org/2000/svg","g")),V.setAttribute("transform",Ae),!(Ae=V.transform.baseVal.consolidate()))?U:(Ae=Ae.matrix,Y(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function J(Ae,Be,$e,xt){function bt(Wt){return Wt.length?Wt.pop()+" ":""}function Ne(Wt,Et,jt,Zt,Mt,At){if(Wt!==jt||Et!==Zt){var ft=Mt.push("translate(",null,Be,null,$e);At.push({i:ft-4,x:T(Wt,jt)},{i:ft-2,x:T(Et,Zt)})}else(jt||Zt)&&Mt.push("translate("+jt+Be+Zt+$e)}function st(Wt,Et,jt,Zt){Wt!==Et?(Wt-Et>180?Et+=360:Et-Wt>180&&(Wt+=360),Zt.push({i:jt.push(bt(jt)+"rotate(",null,xt)-2,x:T(Wt,Et)})):Et&&jt.push(bt(jt)+"rotate("+Et+xt)}function _t(Wt,Et,jt,Zt){Wt!==Et?Zt.push({i:jt.push(bt(jt)+"skewX(",null,xt)-2,x:T(Wt,Et)}):Et&&jt.push(bt(jt)+"skewX("+Et+xt)}function Ot(Wt,Et,jt,Zt,Mt,At){if(Wt!==jt||Et!==Zt){var ft=Mt.push(bt(Mt)+"scale(",null,",",null,")");At.push({i:ft-4,x:T(Wt,jt)},{i:ft-2,x:T(Et,Zt)})}else(jt!==1||Zt!==1)&&Mt.push(bt(Mt)+"scale("+jt+","+Zt+")")}return function(Wt,Et){var jt=[],Zt=[];return Wt=Ae(Wt),Et=Ae(Et),Ne(Wt.translateX,Wt.translateY,Et.translateX,Et.translateY,jt,Zt),st(Wt.rotate,Et.rotate,jt,Zt),_t(Wt.skewX,Et.skewX,jt,Zt),Ot(Wt.scaleX,Wt.scaleY,Et.scaleX,Et.scaleY,jt,Zt),Wt=Et=null,function(Mt){for(var At=-1,ft=Zt.length,ot;++At<ft;)jt[(ot=Zt[At]).i]=ot.x(Mt);return jt.join("")}}}var ne=J(Z,"px, ","px)","deg)"),ve=J(q,", ",")",")"),$=Math.SQRT2,j=2,ae=4,ie=1e-12;function te(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function re(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function ce(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function pe(Ae,Be){var $e=Ae[0],xt=Ae[1],bt=Ae[2],Ne=Be[0],st=Be[1],_t=Be[2],Ot=Ne-$e,Wt=st-xt,Et=Ot*Ot+Wt*Wt,jt,Zt;if(Et<ie)Zt=Math.log(_t/bt)/$,jt=function(Le){return[$e+Le*Ot,xt+Le*Wt,bt*Math.exp($*Le*Zt)]};else{var Mt=Math.sqrt(Et),At=(_t*_t-bt*bt+ae*Et)/(2*bt*j*Mt),ft=(_t*_t-bt*bt-ae*Et)/(2*_t*j*Mt),ot=Math.log(Math.sqrt(At*At+1)-At),Te=Math.log(Math.sqrt(ft*ft+1)-ft);Zt=(Te-ot)/$,jt=function(Le){var Ve=Le*Zt,Qe=te(ot),Me=bt/(j*Mt)*(Qe*ce($*Ve+ot)-re(ot));return[$e+Me*Ot,xt+Me*Wt,bt*Qe/te($*Ve+ot)]}}return jt.duration=Zt*1e3,jt}function fe(Ae){return function(Be,$e){var xt=Ae((Be=a.hsl(Be)).h,($e=a.hsl($e)).h),bt=i(Be.s,$e.s),Ne=i(Be.l,$e.l),st=i(Be.opacity,$e.opacity);return function(_t){return Be.h=xt(_t),Be.s=bt(_t),Be.l=Ne(_t),Be.opacity=st(_t),Be+""}}}var se=fe(l),de=fe(i);function be(Ae,Be){var $e=i((Ae=a.lab(Ae)).l,(Be=a.lab(Be)).l),xt=i(Ae.a,Be.a),bt=i(Ae.b,Be.b),Ne=i(Ae.opacity,Be.opacity);return function(st){return Ae.l=$e(st),Ae.a=xt(st),Ae.b=bt(st),Ae.opacity=Ne(st),Ae+""}}function xe(Ae){return function(Be,$e){var xt=Ae((Be=a.hcl(Be)).h,($e=a.hcl($e)).h),bt=i(Be.c,$e.c),Ne=i(Be.l,$e.l),st=i(Be.opacity,$e.opacity);return function(_t){return Be.h=xt(_t),Be.c=bt(_t),Be.l=Ne(_t),Be.opacity=st(_t),Be+""}}}var ke=xe(l),Re=xe(i);function Ke(Ae){return function Be($e){$e=+$e;function xt(bt,Ne){var st=Ae((bt=a.cubehelix(bt)).h,(Ne=a.cubehelix(Ne)).h),_t=i(bt.s,Ne.s),Ot=i(bt.l,Ne.l),Wt=i(bt.opacity,Ne.opacity);return function(Et){return bt.h=st(Et),bt.s=_t(Et),bt.l=Ot(Math.pow(Et,$e)),bt.opacity=Wt(Et),bt+""}}return xt.gamma=Be,xt}(1)}var ze=Ke(l),Je=Ke(i);function qe(Ae,Be){for(var $e=0,xt=Be.length-1,bt=Be[0],Ne=new Array(xt<0?0:xt);$e<xt;)Ne[$e]=Ae(bt,bt=Be[++$e]);return function(st){var _t=Math.max(0,Math.min(xt-1,Math.floor(st*=xt)));return Ne[_t](st-_t)}}function Ee(Ae,Be){for(var $e=new Array(Be),xt=0;xt<Be;++xt)$e[xt]=Ae(xt/(Be-1));return $e}r.interpolate=E,r.interpolateArray=x,r.interpolateBasis=c,r.interpolateBasisClosed=t,r.interpolateCubehelix=ze,r.interpolateCubehelixLong=Je,r.interpolateDate=g,r.interpolateDiscrete=R,r.interpolateHcl=ke,r.interpolateHclLong=Re,r.interpolateHsl=se,r.interpolateHslLong=de,r.interpolateHue=O,r.interpolateLab=be,r.interpolateNumber=T,r.interpolateNumberArray=b,r.interpolateObject=M,r.interpolateRgb=s,r.interpolateRgbBasis=v,r.interpolateRgbBasisClosed=m,r.interpolateRound=N,r.interpolateString=k,r.interpolateTransformCss=ne,r.interpolateTransformSvg=ve,r.interpolateZoom=pe,r.piecewise=qe,r.quantize=Ee,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a=Math.PI,u=2*a,c=1e-6,t=u-c;function f(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new f}f.prototype=n.prototype={constructor:f,moveTo:function(o,l){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+l)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(o,l){this._+="L"+(this._x1=+o)+","+(this._y1=+l)},quadraticCurveTo:function(o,l,h,i){this._+="Q"+ +o+","+ +l+","+(this._x1=+h)+","+(this._y1=+i)},bezierCurveTo:function(o,l,h,i,s,p){this._+="C"+ +o+","+ +l+","+ +h+","+ +i+","+(this._x1=+s)+","+(this._y1=+p)},arcTo:function(o,l,h,i,s){o=+o,l=+l,h=+h,i=+i,s=+s;var p=this._x1,v=this._y1,m=h-o,b=i-l,y=p-o,x=v-l,w=y*y+x*x;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=o)+","+(this._y1=l);else if(w>c)if(!(Math.abs(x*m-b*y)>c)||!s)this._+="L"+(this._x1=o)+","+(this._y1=l);else{var g=h-p,T=i-v,M=m*m+b*b,P=g*g+T*T,L=Math.sqrt(M),I=Math.sqrt(w),C=s*Math.tan((a-Math.acos((M+w-P)/(2*L*I)))/2),k=C/I,E=C/L;Math.abs(k-1)>c&&(this._+="L"+(o+k*y)+","+(l+k*x)),this._+="A"+s+","+s+",0,0,"+ +(x*g>y*T)+","+(this._x1=o+E*m)+","+(this._y1=l+E*b)}},arc:function(o,l,h,i,s,p){o=+o,l=+l,h=+h,p=!!p;var v=h*Math.cos(i),m=h*Math.sin(i),b=o+v,y=l+m,x=1^p,w=p?i-s:s-i;if(h<0)throw new Error("negative radius: "+h);this._x1===null?this._+="M"+b+","+y:(Math.abs(this._x1-b)>c||Math.abs(this._y1-y)>c)&&(this._+="L"+b+","+y),h&&(w<0&&(w=w%u+u),w>t?this._+="A"+h+","+h+",0,1,"+x+","+(o-v)+","+(l-m)+"A"+h+","+h+",0,1,"+x+","+(this._x1=b)+","+(this._y1=y):w>c&&(this._+="A"+h+","+h+",0,"+ +(w>=a)+","+x+","+(this._x1=o+h*Math.cos(s))+","+(this._y1=l+h*Math.sin(s))))},rect:function(o,l,h,i){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+l)+"h"+ +h+"v"+ +i+"h"+-h+"Z"},toString:function(){return this._}},r.path=n,Object.defineProperty(r,"__esModule",{value:!0})})},{}],164:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){function a(L){var I=+this._x.call(null,L),C=+this._y.call(null,L);return u(this.cover(I,C),I,C,L)}function u(L,I,C,k){if(isNaN(I)||isNaN(C))return L;var E,R=L._root,O={data:k},N=L._x0,G=L._y0,U=L._x1,Y=L._y1,z,B,H,V,Z,q,J,ne;if(!R)return L._root=O,L;for(;R.length;)if((Z=I>=(z=(N+U)/2))?N=z:U=z,(q=C>=(B=(G+Y)/2))?G=B:Y=B,E=R,!(R=R[J=q<<1|Z]))return E[J]=O,L;if(H=+L._x.call(null,R.data),V=+L._y.call(null,R.data),I===H&&C===V)return O.next=R,E?E[J]=O:L._root=O,L;do E=E?E[J]=new Array(4):L._root=new Array(4),(Z=I>=(z=(N+U)/2))?N=z:U=z,(q=C>=(B=(G+Y)/2))?G=B:Y=B;while((J=q<<1|Z)===(ne=(V>=B)<<1|H>=z));return E[ne]=R,E[J]=O,L}function c(L){var I,C,k=L.length,E,R,O=new Array(k),N=new Array(k),G=1/0,U=1/0,Y=-1/0,z=-1/0;for(C=0;C<k;++C)isNaN(E=+this._x.call(null,I=L[C]))||isNaN(R=+this._y.call(null,I))||(O[C]=E,N[C]=R,E<G&&(G=E),E>Y&&(Y=E),R<U&&(U=R),R>z&&(z=R));if(G>Y||U>z)return this;for(this.cover(G,U).cover(Y,z),C=0;C<k;++C)u(this,O[C],N[C],L[C]);return this}function t(L,I){if(isNaN(L=+L)||isNaN(I=+I))return this;var C=this._x0,k=this._y0,E=this._x1,R=this._y1;if(isNaN(C))E=(C=Math.floor(L))+1,R=(k=Math.floor(I))+1;else{for(var O=E-C,N=this._root,G,U;C>L||L>=E||k>I||I>=R;)switch(U=(I<k)<<1|L<C,G=new Array(4),G[U]=N,N=G,O*=2,U){case 0:E=C+O,R=k+O;break;case 1:C=E-O,R=k+O;break;case 2:E=C+O,k=R-O;break;case 3:C=E-O,k=R-O;break}this._root&&this._root.length&&(this._root=N)}return this._x0=C,this._y0=k,this._x1=E,this._y1=R,this}function f(){var L=[];return this.visit(function(I){if(!I.length)do L.push(I.data);while(I=I.next)}),L}function n(L){return arguments.length?this.cover(+L[0][0],+L[0][1]).cover(+L[1][0],+L[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function o(L,I,C,k,E){this.node=L,this.x0=I,this.y0=C,this.x1=k,this.y1=E}function l(L,I,C){var k,E=this._x0,R=this._y0,O,N,G,U,Y=this._x1,z=this._y1,B=[],H=this._root,V,Z;for(H&&B.push(new o(H,E,R,Y,z)),C==null?C=1/0:(E=L-C,R=I-C,Y=L+C,z=I+C,C*=C);V=B.pop();)if(!(!(H=V.node)||(O=V.x0)>Y||(N=V.y0)>z||(G=V.x1)<E||(U=V.y1)<R))if(H.length){var q=(O+G)/2,J=(N+U)/2;B.push(new o(H[3],q,J,G,U),new o(H[2],O,J,q,U),new o(H[1],q,N,G,J),new o(H[0],O,N,q,J)),(Z=(I>=J)<<1|L>=q)&&(V=B[B.length-1],B[B.length-1]=B[B.length-1-Z],B[B.length-1-Z]=V)}else{var ne=L-+this._x.call(null,H.data),ve=I-+this._y.call(null,H.data),$=ne*ne+ve*ve;if($<C){var j=Math.sqrt(C=$);E=L-j,R=I-j,Y=L+j,z=I+j,k=H.data}}return k}function h(L){if(isNaN(Y=+this._x.call(null,L))||isNaN(z=+this._y.call(null,L)))return this;var I,C=this._root,k,E,R,O=this._x0,N=this._y0,G=this._x1,U=this._y1,Y,z,B,H,V,Z,q,J;if(!C)return this;if(C.length)for(;;){if((V=Y>=(B=(O+G)/2))?O=B:G=B,(Z=z>=(H=(N+U)/2))?N=H:U=H,I=C,!(C=C[q=Z<<1|V]))return this;if(!C.length)break;(I[q+1&3]||I[q+2&3]||I[q+3&3])&&(k=I,J=q)}for(;C.data!==L;)if(E=C,!(C=C.next))return this;return(R=C.next)&&delete C.next,E?(R?E.next=R:delete E.next,this):I?(R?I[q]=R:delete I[q],(C=I[0]||I[1]||I[2]||I[3])&&C===(I[3]||I[2]||I[1]||I[0])&&!C.length&&(k?k[J]=C:this._root=C),this):(this._root=R,this)}function i(L){for(var I=0,C=L.length;I<C;++I)this.remove(L[I]);return this}function s(){return this._root}function p(){var L=0;return this.visit(function(I){if(!I.length)do++L;while(I=I.next)}),L}function v(L){var I=[],C,k=this._root,E,R,O,N,G;for(k&&I.push(new o(k,this._x0,this._y0,this._x1,this._y1));C=I.pop();)if(!L(k=C.node,R=C.x0,O=C.y0,N=C.x1,G=C.y1)&&k.length){var U=(R+N)/2,Y=(O+G)/2;(E=k[3])&&I.push(new o(E,U,Y,N,G)),(E=k[2])&&I.push(new o(E,R,Y,U,G)),(E=k[1])&&I.push(new o(E,U,O,N,Y)),(E=k[0])&&I.push(new o(E,R,O,U,Y))}return this}function m(L){var I=[],C=[],k;for(this._root&&I.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));k=I.pop();){var E=k.node;if(E.length){var R,O=k.x0,N=k.y0,G=k.x1,U=k.y1,Y=(O+G)/2,z=(N+U)/2;(R=E[0])&&I.push(new o(R,O,N,Y,z)),(R=E[1])&&I.push(new o(R,Y,N,G,z)),(R=E[2])&&I.push(new o(R,O,z,Y,U)),(R=E[3])&&I.push(new o(R,Y,z,G,U))}C.push(k)}for(;k=C.pop();)L(k.node,k.x0,k.y0,k.x1,k.y1);return this}function b(L){return L[0]}function y(L){return arguments.length?(this._x=L,this):this._x}function x(L){return L[1]}function w(L){return arguments.length?(this._y=L,this):this._y}function g(L,I,C){var k=new T(I==null?b:I,C==null?x:C,NaN,NaN,NaN,NaN);return L==null?k:k.addAll(L)}function T(L,I,C,k,E,R){this._x=L,this._y=I,this._x0=C,this._y0=k,this._x1=E,this._y1=R,this._root=void 0}function M(L){for(var I={data:L.data},C=I;L=L.next;)C=C.next={data:L.data};return I}var P=g.prototype=T.prototype;P.copy=function(){var L=new T(this._x,this._y,this._x0,this._y0,this._x1,this._y1),I=this._root,C,k;if(!I)return L;if(!I.length)return L._root=M(I),L;for(C=[{source:I,target:L._root=new Array(4)}];I=C.pop();)for(var E=0;E<4;++E)(k=I.source[E])&&(k.length?C.push({source:k,target:I.target[E]=new Array(4)}):I.target[E]=M(k));return L},P.add=a,P.addAll=c,P.cover=t,P.data=f,P.extent=n,P.find=l,P.remove=h,P.removeAll=i,P.root=s,P.size=p,P.visit=v,P.visitAfter=m,P.x=y,P.y=w,r.quadtree=g,Object.defineProperty(r,"__esModule",{value:!0})})},{}],165:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S,e("d3-path")):(r=r||self,a(r.d3=r.d3||{},r.d3))})(this,function(r,a){function u(ht){return function(){return ht}}var c=Math.abs,t=Math.atan2,f=Math.cos,n=Math.max,o=Math.min,l=Math.sin,h=Math.sqrt,i=1e-12,s=Math.PI,p=s/2,v=2*s;function m(ht){return ht>1?0:ht<-1?s:Math.acos(ht)}function b(ht){return ht>=1?p:ht<=-1?-p:Math.asin(ht)}function y(ht){return ht.innerRadius}function x(ht){return ht.outerRadius}function w(ht){return ht.startAngle}function g(ht){return ht.endAngle}function T(ht){return ht&&ht.padAngle}function M(ht,Nt,rr,mr,Rr,Er,Br,Lr){var pn=rr-ht,On=mr-Nt,Fn=Br-Rr,Qn=Lr-Er,ya=Qn*pn-Fn*On;if(!(ya*ya<i))return ya=(Fn*(Nt-Er)-Qn*(ht-Rr))/ya,[ht+ya*pn,Nt+ya*On]}function P(ht,Nt,rr,mr,Rr,Er,Br){var Lr=ht-rr,pn=Nt-mr,On=(Br?Er:-Er)/h(Lr*Lr+pn*pn),Fn=On*pn,Qn=-On*Lr,ya=ht+Fn,Sa=Nt+Qn,ar=rr+Fn,Wr=mr+Qn,Fr=(ya+ar)/2,yn=(Sa+Wr)/2,Sn=ar-ya,aa=Wr-Sa,Xn=Sn*Sn+aa*aa,ra=Rr-Er,na=ya*Wr-ar*Sa,ba=(aa<0?-1:1)*h(n(0,ra*ra*Xn-na*na)),Ut=(na*aa-Sn*ba)/Xn,lr=(-na*Sn-aa*ba)/Xn,Ir=(na*aa+Sn*ba)/Xn,Kr=(-na*Sn+aa*ba)/Xn,Ur=Ut-Fr,Gr=lr-yn,$r=Ir-Fr,Hr=Kr-yn;return Ur*Ur+Gr*Gr>$r*$r+Hr*Hr&&(Ut=Ir,lr=Kr),{cx:Ut,cy:lr,x01:-Fn,y01:-Qn,x11:Ut*(Rr/ra-1),y11:lr*(Rr/ra-1)}}function L(){var ht=y,Nt=x,rr=u(0),mr=null,Rr=w,Er=g,Br=T,Lr=null;function pn(){var On,Fn,Qn=+ht.apply(this,arguments),ya=+Nt.apply(this,arguments),Sa=Rr.apply(this,arguments)-p,ar=Er.apply(this,arguments)-p,Wr=c(ar-Sa),Fr=ar>Sa;if(Lr||(Lr=On=a.path()),ya<Qn&&(Fn=ya,ya=Qn,Qn=Fn),!(ya>i))Lr.moveTo(0,0);else if(Wr>v-i)Lr.moveTo(ya*f(Sa),ya*l(Sa)),Lr.arc(0,0,ya,Sa,ar,!Fr),Qn>i&&(Lr.moveTo(Qn*f(ar),Qn*l(ar)),Lr.arc(0,0,Qn,ar,Sa,Fr));else{var yn=Sa,Sn=ar,aa=Sa,Xn=ar,ra=Wr,na=Wr,ba=Br.apply(this,arguments)/2,Ut=ba>i&&(mr?+mr.apply(this,arguments):h(Qn*Qn+ya*ya)),lr=o(c(ya-Qn)/2,+rr.apply(this,arguments)),Ir=lr,Kr=lr,Ur,Gr;if(Ut>i){var $r=b(Ut/Qn*l(ba)),Hr=b(Ut/ya*l(ba));(ra-=$r*2)>i?($r*=Fr?1:-1,aa+=$r,Xn-=$r):(ra=0,aa=Xn=(Sa+ar)/2),(na-=Hr*2)>i?(Hr*=Fr?1:-1,yn+=Hr,Sn-=Hr):(na=0,yn=Sn=(Sa+ar)/2)}var fr=ya*f(yn),Tr=ya*l(yn),hr=Qn*f(Xn),Mn=Qn*l(Xn);if(lr>i){var Cn=ya*f(Sn),jn=ya*l(Sn),sa=Qn*f(aa),Un=Qn*l(aa),Ea;if(Wr<s&&(Ea=M(fr,Tr,sa,Un,Cn,jn,hr,Mn))){var Ga=fr-Ea[0],ai=Tr-Ea[1],Ma=Cn-Ea[0],Va=jn-Ea[1],No=1/l(m((Ga*Ma+ai*Va)/(h(Ga*Ga+ai*ai)*h(Ma*Ma+Va*Va)))/2),co=h(Ea[0]*Ea[0]+Ea[1]*Ea[1]);Ir=o(lr,(Qn-co)/(No-1)),Kr=o(lr,(ya-co)/(No+1))}}na>i?Kr>i?(Ur=P(sa,Un,fr,Tr,ya,Kr,Fr),Gr=P(Cn,jn,hr,Mn,ya,Kr,Fr),Lr.moveTo(Ur.cx+Ur.x01,Ur.cy+Ur.y01),Kr<lr?Lr.arc(Ur.cx,Ur.cy,Kr,t(Ur.y01,Ur.x01),t(Gr.y01,Gr.x01),!Fr):(Lr.arc(Ur.cx,Ur.cy,Kr,t(Ur.y01,Ur.x01),t(Ur.y11,Ur.x11),!Fr),Lr.arc(0,0,ya,t(Ur.cy+Ur.y11,Ur.cx+Ur.x11),t(Gr.cy+Gr.y11,Gr.cx+Gr.x11),!Fr),Lr.arc(Gr.cx,Gr.cy,Kr,t(Gr.y11,Gr.x11),t(Gr.y01,Gr.x01),!Fr))):(Lr.moveTo(fr,Tr),Lr.arc(0,0,ya,yn,Sn,!Fr)):Lr.moveTo(fr,Tr),!(Qn>i)||!(ra>i)?Lr.lineTo(hr,Mn):Ir>i?(Ur=P(hr,Mn,Cn,jn,Qn,-Ir,Fr),Gr=P(fr,Tr,sa,Un,Qn,-Ir,Fr),Lr.lineTo(Ur.cx+Ur.x01,Ur.cy+Ur.y01),Ir<lr?Lr.arc(Ur.cx,Ur.cy,Ir,t(Ur.y01,Ur.x01),t(Gr.y01,Gr.x01),!Fr):(Lr.arc(Ur.cx,Ur.cy,Ir,t(Ur.y01,Ur.x01),t(Ur.y11,Ur.x11),!Fr),Lr.arc(0,0,Qn,t(Ur.cy+Ur.y11,Ur.cx+Ur.x11),t(Gr.cy+Gr.y11,Gr.cx+Gr.x11),Fr),Lr.arc(Gr.cx,Gr.cy,Ir,t(Gr.y11,Gr.x11),t(Gr.y01,Gr.x01),!Fr))):Lr.arc(0,0,Qn,Xn,aa,Fr)}if(Lr.closePath(),On)return Lr=null,On+""||null}return pn.centroid=function(){var On=(+ht.apply(this,arguments)+ +Nt.apply(this,arguments))/2,Fn=(+Rr.apply(this,arguments)+ +Er.apply(this,arguments))/2-s/2;return[f(Fn)*On,l(Fn)*On]},pn.innerRadius=function(On){return arguments.length?(ht=typeof On=="function"?On:u(+On),pn):ht},pn.outerRadius=function(On){return arguments.length?(Nt=typeof On=="function"?On:u(+On),pn):Nt},pn.cornerRadius=function(On){return arguments.length?(rr=typeof On=="function"?On:u(+On),pn):rr},pn.padRadius=function(On){return arguments.length?(mr=On==null?null:typeof On=="function"?On:u(+On),pn):mr},pn.startAngle=function(On){return arguments.length?(Rr=typeof On=="function"?On:u(+On),pn):Rr},pn.endAngle=function(On){return arguments.length?(Er=typeof On=="function"?On:u(+On),pn):Er},pn.padAngle=function(On){return arguments.length?(Br=typeof On=="function"?On:u(+On),pn):Br},pn.context=function(On){return arguments.length?(Lr=On==null?null:On,pn):Lr},pn}function I(ht){this._context=ht}I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1,this._line?this._context.lineTo(ht,Nt):this._context.moveTo(ht,Nt);break;case 1:this._point=2;default:this._context.lineTo(ht,Nt);break}}};function C(ht){return new I(ht)}function k(ht){return ht[0]}function E(ht){return ht[1]}function R(){var ht=k,Nt=E,rr=u(!0),mr=null,Rr=C,Er=null;function Br(Lr){var pn,On=Lr.length,Fn,Qn=!1,ya;for(mr==null&&(Er=Rr(ya=a.path())),pn=0;pn<=On;++pn)!(pn<On&&rr(Fn=Lr[pn],pn,Lr))===Qn&&((Qn=!Qn)?Er.lineStart():Er.lineEnd()),Qn&&Er.point(+ht(Fn,pn,Lr),+Nt(Fn,pn,Lr));if(ya)return Er=null,ya+""||null}return Br.x=function(Lr){return arguments.length?(ht=typeof Lr=="function"?Lr:u(+Lr),Br):ht},Br.y=function(Lr){return arguments.length?(Nt=typeof Lr=="function"?Lr:u(+Lr),Br):Nt},Br.defined=function(Lr){return arguments.length?(rr=typeof Lr=="function"?Lr:u(!!Lr),Br):rr},Br.curve=function(Lr){return arguments.length?(Rr=Lr,mr!=null&&(Er=Rr(mr)),Br):Rr},Br.context=function(Lr){return arguments.length?(Lr==null?mr=Er=null:Er=Rr(mr=Lr),Br):mr},Br}function O(){var ht=k,Nt=null,rr=u(0),mr=E,Rr=u(!0),Er=null,Br=C,Lr=null;function pn(Fn){var Qn,ya,Sa,ar=Fn.length,Wr,Fr=!1,yn,Sn=new Array(ar),aa=new Array(ar);for(Er==null&&(Lr=Br(yn=a.path())),Qn=0;Qn<=ar;++Qn){if(!(Qn<ar&&Rr(Wr=Fn[Qn],Qn,Fn))===Fr)if(Fr=!Fr)ya=Qn,Lr.areaStart(),Lr.lineStart();else{for(Lr.lineEnd(),Lr.lineStart(),Sa=Qn-1;Sa>=ya;--Sa)Lr.point(Sn[Sa],aa[Sa]);Lr.lineEnd(),Lr.areaEnd()}Fr&&(Sn[Qn]=+ht(Wr,Qn,Fn),aa[Qn]=+rr(Wr,Qn,Fn),Lr.point(Nt?+Nt(Wr,Qn,Fn):Sn[Qn],mr?+mr(Wr,Qn,Fn):aa[Qn]))}if(yn)return Lr=null,yn+""||null}function On(){return R().defined(Rr).curve(Br).context(Er)}return pn.x=function(Fn){return arguments.length?(ht=typeof Fn=="function"?Fn:u(+Fn),Nt=null,pn):ht},pn.x0=function(Fn){return arguments.length?(ht=typeof Fn=="function"?Fn:u(+Fn),pn):ht},pn.x1=function(Fn){return arguments.length?(Nt=Fn==null?null:typeof Fn=="function"?Fn:u(+Fn),pn):Nt},pn.y=function(Fn){return arguments.length?(rr=typeof Fn=="function"?Fn:u(+Fn),mr=null,pn):rr},pn.y0=function(Fn){return arguments.length?(rr=typeof Fn=="function"?Fn:u(+Fn),pn):rr},pn.y1=function(Fn){return arguments.length?(mr=Fn==null?null:typeof Fn=="function"?Fn:u(+Fn),pn):mr},pn.lineX0=pn.lineY0=function(){return On().x(ht).y(rr)},pn.lineY1=function(){return On().x(ht).y(mr)},pn.lineX1=function(){return On().x(Nt).y(rr)},pn.defined=function(Fn){return arguments.length?(Rr=typeof Fn=="function"?Fn:u(!!Fn),pn):Rr},pn.curve=function(Fn){return arguments.length?(Br=Fn,Er!=null&&(Lr=Br(Er)),pn):Br},pn.context=function(Fn){return arguments.length?(Fn==null?Er=Lr=null:Lr=Br(Er=Fn),pn):Er},pn}function N(ht,Nt){return Nt<ht?-1:Nt>ht?1:Nt>=ht?0:NaN}function G(ht){return ht}function U(){var ht=G,Nt=N,rr=null,mr=u(0),Rr=u(v),Er=u(0);function Br(Lr){var pn,On=Lr.length,Fn,Qn,ya=0,Sa=new Array(On),ar=new Array(On),Wr=+mr.apply(this,arguments),Fr=Math.min(v,Math.max(-v,Rr.apply(this,arguments)-Wr)),yn,Sn=Math.min(Math.abs(Fr)/On,Er.apply(this,arguments)),aa=Sn*(Fr<0?-1:1),Xn;for(pn=0;pn<On;++pn)(Xn=ar[Sa[pn]=pn]=+ht(Lr[pn],pn,Lr))>0&&(ya+=Xn);for(Nt!=null?Sa.sort(function(ra,na){return Nt(ar[ra],ar[na])}):rr!=null&&Sa.sort(function(ra,na){return rr(Lr[ra],Lr[na])}),pn=0,Qn=ya?(Fr-On*aa)/ya:0;pn<On;++pn,Wr=yn)Fn=Sa[pn],Xn=ar[Fn],yn=Wr+(Xn>0?Xn*Qn:0)+aa,ar[Fn]={data:Lr[Fn],index:pn,value:Xn,startAngle:Wr,endAngle:yn,padAngle:Sn};return ar}return Br.value=function(Lr){return arguments.length?(ht=typeof Lr=="function"?Lr:u(+Lr),Br):ht},Br.sortValues=function(Lr){return arguments.length?(Nt=Lr,rr=null,Br):Nt},Br.sort=function(Lr){return arguments.length?(rr=Lr,Nt=null,Br):rr},Br.startAngle=function(Lr){return arguments.length?(mr=typeof Lr=="function"?Lr:u(+Lr),Br):mr},Br.endAngle=function(Lr){return arguments.length?(Rr=typeof Lr=="function"?Lr:u(+Lr),Br):Rr},Br.padAngle=function(Lr){return arguments.length?(Er=typeof Lr=="function"?Lr:u(+Lr),Br):Er},Br}var Y=B(C);function z(ht){this._curve=ht}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(ht,Nt){this._curve.point(Nt*Math.sin(ht),Nt*-Math.cos(ht))}};function B(ht){function Nt(rr){return new z(ht(rr))}return Nt._curve=ht,Nt}function H(ht){var Nt=ht.curve;return ht.angle=ht.x,delete ht.x,ht.radius=ht.y,delete ht.y,ht.curve=function(rr){return arguments.length?Nt(B(rr)):Nt()._curve},ht}function V(){return H(R().curve(Y))}function Z(){var ht=O().curve(Y),Nt=ht.curve,rr=ht.lineX0,mr=ht.lineX1,Rr=ht.lineY0,Er=ht.lineY1;return ht.angle=ht.x,delete ht.x,ht.startAngle=ht.x0,delete ht.x0,ht.endAngle=ht.x1,delete ht.x1,ht.radius=ht.y,delete ht.y,ht.innerRadius=ht.y0,delete ht.y0,ht.outerRadius=ht.y1,delete ht.y1,ht.lineStartAngle=function(){return H(rr())},delete ht.lineX0,ht.lineEndAngle=function(){return H(mr())},delete ht.lineX1,ht.lineInnerRadius=function(){return H(Rr())},delete ht.lineY0,ht.lineOuterRadius=function(){return H(Er())},delete ht.lineY1,ht.curve=function(Br){return arguments.length?Nt(B(Br)):Nt()._curve},ht}function q(ht,Nt){return[(Nt=+Nt)*Math.cos(ht-=Math.PI/2),Nt*Math.sin(ht)]}var J=Array.prototype.slice;function ne(ht){return ht.source}function ve(ht){return ht.target}function $(ht){var Nt=ne,rr=ve,mr=k,Rr=E,Er=null;function Br(){var Lr,pn=J.call(arguments),On=Nt.apply(this,pn),Fn=rr.apply(this,pn);if(Er||(Er=Lr=a.path()),ht(Er,+mr.apply(this,(pn[0]=On,pn)),+Rr.apply(this,pn),+mr.apply(this,(pn[0]=Fn,pn)),+Rr.apply(this,pn)),Lr)return Er=null,Lr+""||null}return Br.source=function(Lr){return arguments.length?(Nt=Lr,Br):Nt},Br.target=function(Lr){return arguments.length?(rr=Lr,Br):rr},Br.x=function(Lr){return arguments.length?(mr=typeof Lr=="function"?Lr:u(+Lr),Br):mr},Br.y=function(Lr){return arguments.length?(Rr=typeof Lr=="function"?Lr:u(+Lr),Br):Rr},Br.context=function(Lr){return arguments.length?(Er=Lr==null?null:Lr,Br):Er},Br}function j(ht,Nt,rr,mr,Rr){ht.moveTo(Nt,rr),ht.bezierCurveTo(Nt=(Nt+mr)/2,rr,Nt,Rr,mr,Rr)}function ae(ht,Nt,rr,mr,Rr){ht.moveTo(Nt,rr),ht.bezierCurveTo(Nt,rr=(rr+Rr)/2,mr,rr,mr,Rr)}function ie(ht,Nt,rr,mr,Rr){var Er=q(Nt,rr),Br=q(Nt,rr=(rr+Rr)/2),Lr=q(mr,rr),pn=q(mr,Rr);ht.moveTo(Er[0],Er[1]),ht.bezierCurveTo(Br[0],Br[1],Lr[0],Lr[1],pn[0],pn[1])}function te(){return $(j)}function re(){return $(ae)}function ce(){var ht=$(ie);return ht.angle=ht.x,delete ht.x,ht.radius=ht.y,delete ht.y,ht}var pe={draw:function(ht,Nt){var rr=Math.sqrt(Nt/s);ht.moveTo(rr,0),ht.arc(0,0,rr,0,v)}},fe={draw:function(ht,Nt){var rr=Math.sqrt(Nt/5)/2;ht.moveTo(-3*rr,-rr),ht.lineTo(-rr,-rr),ht.lineTo(-rr,-3*rr),ht.lineTo(rr,-3*rr),ht.lineTo(rr,-rr),ht.lineTo(3*rr,-rr),ht.lineTo(3*rr,rr),ht.lineTo(rr,rr),ht.lineTo(rr,3*rr),ht.lineTo(-rr,3*rr),ht.lineTo(-rr,rr),ht.lineTo(-3*rr,rr),ht.closePath()}},se=Math.sqrt(1/3),de=se*2,be={draw:function(ht,Nt){var rr=Math.sqrt(Nt/de),mr=rr*se;ht.moveTo(0,-rr),ht.lineTo(mr,0),ht.lineTo(0,rr),ht.lineTo(-mr,0),ht.closePath()}},xe=.8908130915292852,ke=Math.sin(s/10)/Math.sin(7*s/10),Re=Math.sin(v/10)*ke,Ke=-Math.cos(v/10)*ke,ze={draw:function(ht,Nt){var rr=Math.sqrt(Nt*xe),mr=Re*rr,Rr=Ke*rr;ht.moveTo(0,-rr),ht.lineTo(mr,Rr);for(var Er=1;Er<5;++Er){var Br=v*Er/5,Lr=Math.cos(Br),pn=Math.sin(Br);ht.lineTo(pn*rr,-Lr*rr),ht.lineTo(Lr*mr-pn*Rr,pn*mr+Lr*Rr)}ht.closePath()}},Je={draw:function(ht,Nt){var rr=Math.sqrt(Nt),mr=-rr/2;ht.rect(mr,mr,rr,rr)}},qe=Math.sqrt(3),Ee={draw:function(ht,Nt){var rr=-Math.sqrt(Nt/(qe*3));ht.moveTo(0,rr*2),ht.lineTo(-qe*rr,-rr),ht.lineTo(qe*rr,-rr),ht.closePath()}},Ae=-.5,Be=Math.sqrt(3)/2,$e=1/Math.sqrt(12),xt=($e/2+1)*3,bt={draw:function(ht,Nt){var rr=Math.sqrt(Nt/xt),mr=rr/2,Rr=rr*$e,Er=mr,Br=rr*$e+rr,Lr=-Er,pn=Br;ht.moveTo(mr,Rr),ht.lineTo(Er,Br),ht.lineTo(Lr,pn),ht.lineTo(Ae*mr-Be*Rr,Be*mr+Ae*Rr),ht.lineTo(Ae*Er-Be*Br,Be*Er+Ae*Br),ht.lineTo(Ae*Lr-Be*pn,Be*Lr+Ae*pn),ht.lineTo(Ae*mr+Be*Rr,Ae*Rr-Be*mr),ht.lineTo(Ae*Er+Be*Br,Ae*Br-Be*Er),ht.lineTo(Ae*Lr+Be*pn,Ae*pn-Be*Lr),ht.closePath()}},Ne=[pe,fe,be,Je,ze,Ee,bt];function st(){var ht=u(pe),Nt=u(64),rr=null;function mr(){var Rr;if(rr||(rr=Rr=a.path()),ht.apply(this,arguments).draw(rr,+Nt.apply(this,arguments)),Rr)return rr=null,Rr+""||null}return mr.type=function(Rr){return arguments.length?(ht=typeof Rr=="function"?Rr:u(Rr),mr):ht},mr.size=function(Rr){return arguments.length?(Nt=typeof Rr=="function"?Rr:u(+Rr),mr):Nt},mr.context=function(Rr){return arguments.length?(rr=Rr==null?null:Rr,mr):rr},mr}function _t(){}function Ot(ht,Nt,rr){ht._context.bezierCurveTo((2*ht._x0+ht._x1)/3,(2*ht._y0+ht._y1)/3,(ht._x0+2*ht._x1)/3,(ht._y0+2*ht._y1)/3,(ht._x0+4*ht._x1+Nt)/6,(ht._y0+4*ht._y1+rr)/6)}function Wt(ht){this._context=ht}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ot(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1,this._line?this._context.lineTo(ht,Nt):this._context.moveTo(ht,Nt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ot(this,ht,Nt);break}this._x0=this._x1,this._x1=ht,this._y0=this._y1,this._y1=Nt}};function Et(ht){return new Wt(ht)}function jt(ht){this._context=ht}jt.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1,this._x2=ht,this._y2=Nt;break;case 1:this._point=2,this._x3=ht,this._y3=Nt;break;case 2:this._point=3,this._x4=ht,this._y4=Nt,this._context.moveTo((this._x0+4*this._x1+ht)/6,(this._y0+4*this._y1+Nt)/6);break;default:Ot(this,ht,Nt);break}this._x0=this._x1,this._x1=ht,this._y0=this._y1,this._y1=Nt}};function Zt(ht){return new jt(ht)}function Mt(ht){this._context=ht}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var rr=(this._x0+4*this._x1+ht)/6,mr=(this._y0+4*this._y1+Nt)/6;this._line?this._context.lineTo(rr,mr):this._context.moveTo(rr,mr);break;case 3:this._point=4;default:Ot(this,ht,Nt);break}this._x0=this._x1,this._x1=ht,this._y0=this._y1,this._y1=Nt}};function At(ht){return new Mt(ht)}function ft(ht,Nt){this._basis=new Wt(ht),this._beta=Nt}ft.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var ht=this._x,Nt=this._y,rr=ht.length-1;if(rr>0)for(var mr=ht[0],Rr=Nt[0],Er=ht[rr]-mr,Br=Nt[rr]-Rr,Lr=-1,pn;++Lr<=rr;)pn=Lr/rr,this._basis.point(this._beta*ht[Lr]+(1-this._beta)*(mr+pn*Er),this._beta*Nt[Lr]+(1-this._beta)*(Rr+pn*Br));this._x=this._y=null,this._basis.lineEnd()},point:function(ht,Nt){this._x.push(+ht),this._y.push(+Nt)}};var ot=function ht(Nt){function rr(mr){return Nt===1?new Wt(mr):new ft(mr,Nt)}return rr.beta=function(mr){return ht(+mr)},rr}(.85);function Te(ht,Nt,rr){ht._context.bezierCurveTo(ht._x1+ht._k*(ht._x2-ht._x0),ht._y1+ht._k*(ht._y2-ht._y0),ht._x2+ht._k*(ht._x1-Nt),ht._y2+ht._k*(ht._y1-rr),ht._x2,ht._y2)}function Le(ht,Nt){this._context=ht,this._k=(1-Nt)/6}Le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Te(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1,this._line?this._context.lineTo(ht,Nt):this._context.moveTo(ht,Nt);break;case 1:this._point=2,this._x1=ht,this._y1=Nt;break;case 2:this._point=3;default:Te(this,ht,Nt);break}this._x0=this._x1,this._x1=this._x2,this._x2=ht,this._y0=this._y1,this._y1=this._y2,this._y2=Nt}};var Ve=function ht(Nt){function rr(mr){return new Le(mr,Nt)}return rr.tension=function(mr){return ht(+mr)},rr}(0);function Qe(ht,Nt){this._context=ht,this._k=(1-Nt)/6}Qe.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1,this._x3=ht,this._y3=Nt;break;case 1:this._point=2,this._context.moveTo(this._x4=ht,this._y4=Nt);break;case 2:this._point=3,this._x5=ht,this._y5=Nt;break;default:Te(this,ht,Nt);break}this._x0=this._x1,this._x1=this._x2,this._x2=ht,this._y0=this._y1,this._y1=this._y2,this._y2=Nt}};var Me=function ht(Nt){function rr(mr){return new Qe(mr,Nt)}return rr.tension=function(mr){return ht(+mr)},rr}(0);function Ie(ht,Nt){this._context=ht,this._k=(1-Nt)/6}Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Te(this,ht,Nt);break}this._x0=this._x1,this._x1=this._x2,this._x2=ht,this._y0=this._y1,this._y1=this._y2,this._y2=Nt}};var He=function ht(Nt){function rr(mr){return new Ie(mr,Nt)}return rr.tension=function(mr){return ht(+mr)},rr}(0);function Ye(ht,Nt,rr){var mr=ht._x1,Rr=ht._y1,Er=ht._x2,Br=ht._y2;if(ht._l01_a>i){var Lr=2*ht._l01_2a+3*ht._l01_a*ht._l12_a+ht._l12_2a,pn=3*ht._l01_a*(ht._l01_a+ht._l12_a);mr=(mr*Lr-ht._x0*ht._l12_2a+ht._x2*ht._l01_2a)/pn,Rr=(Rr*Lr-ht._y0*ht._l12_2a+ht._y2*ht._l01_2a)/pn}if(ht._l23_a>i){var On=2*ht._l23_2a+3*ht._l23_a*ht._l12_a+ht._l12_2a,Fn=3*ht._l23_a*(ht._l23_a+ht._l12_a);Er=(Er*On+ht._x1*ht._l23_2a-Nt*ht._l12_2a)/Fn,Br=(Br*On+ht._y1*ht._l23_2a-rr*ht._l12_2a)/Fn}ht._context.bezierCurveTo(mr,Rr,Er,Br,ht._x2,ht._y2)}function ut(ht,Nt){this._context=ht,this._alpha=Nt}ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){if(ht=+ht,Nt=+Nt,this._point){var rr=this._x2-ht,mr=this._y2-Nt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(rr*rr+mr*mr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(ht,Nt):this._context.moveTo(ht,Nt);break;case 1:this._point=2;break;case 2:this._point=3;default:Ye(this,ht,Nt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ht,this._y0=this._y1,this._y1=this._y2,this._y2=Nt}};var nt=function ht(Nt){function rr(mr){return Nt?new ut(mr,Nt):new Le(mr,0)}return rr.alpha=function(mr){return ht(+mr)},rr}(.5);function Ge(ht,Nt){this._context=ht,this._alpha=Nt}Ge.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(ht,Nt){if(ht=+ht,Nt=+Nt,this._point){var rr=this._x2-ht,mr=this._y2-Nt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(rr*rr+mr*mr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=ht,this._y3=Nt;break;case 1:this._point=2,this._context.moveTo(this._x4=ht,this._y4=Nt);break;case 2:this._point=3,this._x5=ht,this._y5=Nt;break;default:Ye(this,ht,Nt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ht,this._y0=this._y1,this._y1=this._y2,this._y2=Nt}};var at=function ht(Nt){function rr(mr){return Nt?new Ge(mr,Nt):new Qe(mr,0)}return rr.alpha=function(mr){return ht(+mr)},rr}(.5);function et(ht,Nt){this._context=ht,this._alpha=Nt}et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){if(ht=+ht,Nt=+Nt,this._point){var rr=this._x2-ht,mr=this._y2-Nt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(rr*rr+mr*mr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,ht,Nt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ht,this._y0=this._y1,this._y1=this._y2,this._y2=Nt}};var lt=function ht(Nt){function rr(mr){return Nt?new et(mr,Nt):new Ie(mr,0)}return rr.alpha=function(mr){return ht(+mr)},rr}(.5);function Ct(ht){this._context=ht}Ct.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(ht,Nt){ht=+ht,Nt=+Nt,this._point?this._context.lineTo(ht,Nt):(this._point=1,this._context.moveTo(ht,Nt))}};function Pt(ht){return new Ct(ht)}function $t(ht){return ht<0?-1:1}function je(ht,Nt,rr){var mr=ht._x1-ht._x0,Rr=Nt-ht._x1,Er=(ht._y1-ht._y0)/(mr||Rr<0&&-0),Br=(rr-ht._y1)/(Rr||mr<0&&-0),Lr=(Er*Rr+Br*mr)/(mr+Rr);return($t(Er)+$t(Br))*Math.min(Math.abs(Er),Math.abs(Br),.5*Math.abs(Lr))||0}function Oe(ht,Nt){var rr=ht._x1-ht._x0;return rr?(3*(ht._y1-ht._y0)/rr-Nt)/2:Nt}function mt(ht,Nt,rr){var mr=ht._x0,Rr=ht._y0,Er=ht._x1,Br=ht._y1,Lr=(Er-mr)/3;ht._context.bezierCurveTo(mr+Lr,Rr+Lr*Nt,Er-Lr,Br-Lr*rr,Er,Br)}function wt(ht){this._context=ht}wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mt(this,this._t0,Oe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ht,Nt){var rr=NaN;if(ht=+ht,Nt=+Nt,!(ht===this._x1&&Nt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(ht,Nt):this._context.moveTo(ht,Nt);break;case 1:this._point=2;break;case 2:this._point=3,mt(this,Oe(this,rr=je(this,ht,Nt)),rr);break;default:mt(this,this._t0,rr=je(this,ht,Nt));break}this._x0=this._x1,this._x1=ht,this._y0=this._y1,this._y1=Nt,this._t0=rr}}};function yt(ht){this._context=new St(ht)}(yt.prototype=Object.create(wt.prototype)).point=function(ht,Nt){wt.prototype.point.call(this,Nt,ht)};function St(ht){this._context=ht}St.prototype={moveTo:function(ht,Nt){this._context.moveTo(Nt,ht)},closePath:function(){this._context.closePath()},lineTo:function(ht,Nt){this._context.lineTo(Nt,ht)},bezierCurveTo:function(ht,Nt,rr,mr,Rr,Er){this._context.bezierCurveTo(Nt,ht,mr,rr,Er,Rr)}};function kt(ht){return new wt(ht)}function Rt(ht){return new yt(ht)}function zt(ht){this._context=ht}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var ht=this._x,Nt=this._y,rr=ht.length;if(rr)if(this._line?this._context.lineTo(ht[0],Nt[0]):this._context.moveTo(ht[0],Nt[0]),rr===2)this._context.lineTo(ht[1],Nt[1]);else for(var mr=Xt(ht),Rr=Xt(Nt),Er=0,Br=1;Br<rr;++Er,++Br)this._context.bezierCurveTo(mr[0][Er],Rr[0][Er],mr[1][Er],Rr[1][Er],ht[Br],Nt[Br]);(this._line||this._line!==0&&rr===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(ht,Nt){this._x.push(+ht),this._y.push(+Nt)}};function Xt(ht){var Nt,rr=ht.length-1,mr,Rr=new Array(rr),Er=new Array(rr),Br=new Array(rr);for(Rr[0]=0,Er[0]=2,Br[0]=ht[0]+2*ht[1],Nt=1;Nt<rr-1;++Nt)Rr[Nt]=1,Er[Nt]=4,Br[Nt]=4*ht[Nt]+2*ht[Nt+1];for(Rr[rr-1]=2,Er[rr-1]=7,Br[rr-1]=8*ht[rr-1]+ht[rr],Nt=1;Nt<rr;++Nt)mr=Rr[Nt]/Er[Nt-1],Er[Nt]-=mr,Br[Nt]-=mr*Br[Nt-1];for(Rr[rr-1]=Br[rr-1]/Er[rr-1],Nt=rr-2;Nt>=0;--Nt)Rr[Nt]=(Br[Nt]-Rr[Nt+1])/Er[Nt];for(Er[rr-1]=(ht[rr]+Rr[rr-1])/2,Nt=0;Nt<rr-1;++Nt)Er[Nt]=2*ht[Nt+1]-Rr[Nt+1];return[Rr,Er]}function Yt(ht){return new zt(ht)}function Vt(ht,Nt){this._context=ht,this._t=Nt}Vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(ht,Nt){switch(ht=+ht,Nt=+Nt,this._point){case 0:this._point=1,this._line?this._context.lineTo(ht,Nt):this._context.moveTo(ht,Nt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Nt),this._context.lineTo(ht,Nt);else{var rr=this._x*(1-this._t)+ht*this._t;this._context.lineTo(rr,this._y),this._context.lineTo(rr,Nt)}break}}this._x=ht,this._y=Nt}};function cr(ht){return new Vt(ht,.5)}function Or(ht){return new Vt(ht,0)}function kr(ht){return new Vt(ht,1)}function Sr(ht,Nt){if((Br=ht.length)>1)for(var rr=1,mr,Rr,Er=ht[Nt[0]],Br,Lr=Er.length;rr<Br;++rr)for(Rr=Er,Er=ht[Nt[rr]],mr=0;mr<Lr;++mr)Er[mr][1]+=Er[mr][0]=isNaN(Rr[mr][1])?Rr[mr][0]:Rr[mr][1]}function vn(ht){for(var Nt=ht.length,rr=new Array(Nt);--Nt>=0;)rr[Nt]=Nt;return rr}function Rn(ht,Nt){return ht[Nt]}function hn(){var ht=u([]),Nt=vn,rr=Sr,mr=Rn;function Rr(Er){var Br=ht.apply(this,arguments),Lr,pn=Er.length,On=Br.length,Fn=new Array(On),Qn;for(Lr=0;Lr<On;++Lr){for(var ya=Br[Lr],Sa=Fn[Lr]=new Array(pn),ar=0,Wr;ar<pn;++ar)Sa[ar]=Wr=[0,+mr(Er[ar],ya,ar,Er)],Wr.data=Er[ar];Sa.key=ya}for(Lr=0,Qn=Nt(Fn);Lr<On;++Lr)Fn[Qn[Lr]].index=Lr;return rr(Fn,Qn),Fn}return Rr.keys=function(Er){return arguments.length?(ht=typeof Er=="function"?Er:u(J.call(Er)),Rr):ht},Rr.value=function(Er){return arguments.length?(mr=typeof Er=="function"?Er:u(+Er),Rr):mr},Rr.order=function(Er){return arguments.length?(Nt=Er==null?vn:typeof Er=="function"?Er:u(J.call(Er)),Rr):Nt},Rr.offset=function(Er){return arguments.length?(rr=Er==null?Sr:Er,Rr):rr},Rr}function An(ht,Nt){if((mr=ht.length)>0){for(var rr,mr,Rr=0,Er=ht[0].length,Br;Rr<Er;++Rr){for(Br=rr=0;rr<mr;++rr)Br+=ht[rr][Rr][1]||0;if(Br)for(rr=0;rr<mr;++rr)ht[rr][Rr][1]/=Br}Sr(ht,Nt)}}function En(ht,Nt){if((pn=ht.length)>0)for(var rr,mr=0,Rr,Er,Br,Lr,pn,On=ht[Nt[0]].length;mr<On;++mr)for(Br=Lr=0,rr=0;rr<pn;++rr)(Er=(Rr=ht[Nt[rr]][mr])[1]-Rr[0])>0?(Rr[0]=Br,Rr[1]=Br+=Er):Er<0?(Rr[1]=Lr,Rr[0]=Lr+=Er):(Rr[0]=0,Rr[1]=Er)}function Mr(ht,Nt){if((Rr=ht.length)>0){for(var rr=0,mr=ht[Nt[0]],Rr,Er=mr.length;rr<Er;++rr){for(var Br=0,Lr=0;Br<Rr;++Br)Lr+=ht[Br][rr][1]||0;mr[rr][1]+=mr[rr][0]=-Lr/2}Sr(ht,Nt)}}function xr(ht,Nt){if(!(!((Br=ht.length)>0)||!((Er=(Rr=ht[Nt[0]]).length)>0))){for(var rr=0,mr=1,Rr,Er,Br;mr<Er;++mr){for(var Lr=0,pn=0,On=0;Lr<Br;++Lr){for(var Fn=ht[Nt[Lr]],Qn=Fn[mr][1]||0,ya=Fn[mr-1][1]||0,Sa=(Qn-ya)/2,ar=0;ar<Lr;++ar){var Wr=ht[Nt[ar]],Fr=Wr[mr][1]||0,yn=Wr[mr-1][1]||0;Sa+=Fr-yn}pn+=Qn,On+=Sa*Qn}Rr[mr-1][1]+=Rr[mr-1][0]=rr,pn&&(rr-=On/pn)}Rr[mr-1][1]+=Rr[mr-1][0]=rr,Sr(ht,Nt)}}function dn(ht){var Nt=ht.map(qr);return vn(ht).sort(function(rr,mr){return Nt[rr]-Nt[mr]})}function qr(ht){for(var Nt=-1,rr=0,mr=ht.length,Rr,Er=-1/0;++Nt<mr;)(Rr=+ht[Nt][1])>Er&&(Er=Rr,rr=Nt);return rr}function on(ht){var Nt=ht.map(Vr);return vn(ht).sort(function(rr,mr){return Nt[rr]-Nt[mr]})}function Vr(ht){for(var Nt=0,rr=-1,mr=ht.length,Rr;++rr<mr;)(Rr=+ht[rr][1])&&(Nt+=Rr);return Nt}function ln(ht){return on(ht).reverse()}function cn(ht){var Nt=ht.length,rr,mr,Rr=ht.map(Vr),Er=dn(ht),Br=0,Lr=0,pn=[],On=[];for(rr=0;rr<Nt;++rr)mr=Er[rr],Br<Lr?(Br+=Rr[mr],pn.push(mr)):(Lr+=Rr[mr],On.push(mr));return On.reverse().concat(pn)}function Zr(ht){return vn(ht).reverse()}r.arc=L,r.area=O,r.areaRadial=Z,r.curveBasis=Et,r.curveBasisClosed=Zt,r.curveBasisOpen=At,r.curveBundle=ot,r.curveCardinal=Ve,r.curveCardinalClosed=Me,r.curveCardinalOpen=He,r.curveCatmullRom=nt,r.curveCatmullRomClosed=at,r.curveCatmullRomOpen=lt,r.curveLinear=C,r.curveLinearClosed=Pt,r.curveMonotoneX=kt,r.curveMonotoneY=Rt,r.curveNatural=Yt,r.curveStep=cr,r.curveStepAfter=kr,r.curveStepBefore=Or,r.line=R,r.lineRadial=V,r.linkHorizontal=te,r.linkRadial=ce,r.linkVertical=re,r.pie=U,r.pointRadial=q,r.radialArea=Z,r.radialLine=V,r.stack=hn,r.stackOffsetDiverging=En,r.stackOffsetExpand=An,r.stackOffsetNone=Sr,r.stackOffsetSilhouette=Mr,r.stackOffsetWiggle=xr,r.stackOrderAppearance=dn,r.stackOrderAscending=on,r.stackOrderDescending=ln,r.stackOrderInsideOut=cn,r.stackOrderNone=vn,r.stackOrderReverse=Zr,r.symbol=st,r.symbolCircle=pe,r.symbolCross=fe,r.symbolDiamond=be,r.symbolSquare=Je,r.symbolStar=ze,r.symbolTriangle=Ee,r.symbolWye=bt,r.symbols=Ne,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-path":163}],166:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S,e("d3-time")):(r=r||self,a(r.d3=r.d3||{},r.d3))})(this,function(r,a){function u(ft){if(0<=ft.y&&ft.y<100){var ot=new Date(-1,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L);return ot.setFullYear(ft.y),ot}return new Date(ft.y,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L)}function c(ft){if(0<=ft.y&&ft.y<100){var ot=new Date(Date.UTC(-1,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L));return ot.setUTCFullYear(ft.y),ot}return new Date(Date.UTC(ft.y,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L))}function t(ft,ot,Te){return{y:ft,m:ot,d:Te,H:0,M:0,S:0,L:0}}function f(ft){var ot=ft.dateTime,Te=ft.date,Le=ft.time,Ve=ft.periods,Qe=ft.days,Me=ft.shortDays,Ie=ft.months,He=ft.shortMonths,Ye=p(Ve),ut=v(Ve),nt=p(Qe),Ge=v(Qe),at=p(Me),et=v(Me),lt=p(Ie),Ct=v(Ie),Pt=p(He),$t=v(He),je={a:kr,A:Sr,b:vn,B:Rn,c:null,d:z,e:z,f:q,H:B,I:H,j:V,L:Z,m:J,M:ne,p:hn,q:An,Q:st,s:_t,S:ve,u:$,U:j,V:ae,w:ie,W:te,x:null,X:null,y:re,Y:ce,Z:pe,"%":Ne},Oe={a:En,A:Mr,b:xr,B:dn,c:null,d:fe,e:fe,f:ke,H:se,I:de,j:be,L:xe,m:Re,M:Ke,p:qr,q:on,Q:st,s:_t,S:ze,u:Je,U:qe,V:Ee,w:Ae,W:Be,x:null,X:null,y:$e,Y:xt,Z:bt,"%":Ne},mt={a:Rt,A:zt,b:Xt,B:Yt,c:Vt,d:I,e:I,f:N,H:k,I:k,j:C,L:O,m:L,M:E,p:kt,q:P,Q:U,s:Y,S:R,u:b,U:y,V:x,w:m,W:w,x:cr,X:Or,y:T,Y:g,Z:M,"%":G};je.x=wt(Te,je),je.X=wt(Le,je),je.c=wt(ot,je),Oe.x=wt(Te,Oe),Oe.X=wt(Le,Oe),Oe.c=wt(ot,Oe);function wt(Vr,ln){return function(cn){var Zr=[],ht=-1,Nt=0,rr=Vr.length,mr,Rr,Er;for(cn instanceof Date||(cn=new Date(+cn));++ht<rr;)Vr.charCodeAt(ht)===37&&(Zr.push(Vr.slice(Nt,ht)),(Rr=n[mr=Vr.charAt(++ht)])!=null?mr=Vr.charAt(++ht):Rr=mr==="e"?" ":"0",(Er=ln[mr])&&(mr=Er(cn,Rr)),Zr.push(mr),Nt=ht+1);return Zr.push(Vr.slice(Nt,ht)),Zr.join("")}}function yt(Vr,ln){return function(cn){var Zr=t(1900,void 0,1),ht=St(Zr,Vr,cn+="",0),Nt,rr;if(ht!=cn.length)return null;if("Q"in Zr)return new Date(Zr.Q);if("s"in Zr)return new Date(Zr.s*1e3+("L"in Zr?Zr.L:0));if(ln&&!("Z"in Zr)&&(Zr.Z=0),"p"in Zr&&(Zr.H=Zr.H%12+Zr.p*12),Zr.m===void 0&&(Zr.m="q"in Zr?Zr.q:0),"V"in Zr){if(Zr.V<1||Zr.V>53)return null;"w"in Zr||(Zr.w=1),"Z"in Zr?(Nt=c(t(Zr.y,0,1)),rr=Nt.getUTCDay(),Nt=rr>4||rr===0?a.utcMonday.ceil(Nt):a.utcMonday(Nt),Nt=a.utcDay.offset(Nt,(Zr.V-1)*7),Zr.y=Nt.getUTCFullYear(),Zr.m=Nt.getUTCMonth(),Zr.d=Nt.getUTCDate()+(Zr.w+6)%7):(Nt=u(t(Zr.y,0,1)),rr=Nt.getDay(),Nt=rr>4||rr===0?a.timeMonday.ceil(Nt):a.timeMonday(Nt),Nt=a.timeDay.offset(Nt,(Zr.V-1)*7),Zr.y=Nt.getFullYear(),Zr.m=Nt.getMonth(),Zr.d=Nt.getDate()+(Zr.w+6)%7)}else("W"in Zr||"U"in Zr)&&("w"in Zr||(Zr.w="u"in Zr?Zr.u%7:"W"in Zr?1:0),rr="Z"in Zr?c(t(Zr.y,0,1)).getUTCDay():u(t(Zr.y,0,1)).getDay(),Zr.m=0,Zr.d="W"in Zr?(Zr.w+6)%7+Zr.W*7-(rr+5)%7:Zr.w+Zr.U*7-(rr+6)%7);return"Z"in Zr?(Zr.H+=Zr.Z/100|0,Zr.M+=Zr.Z%100,c(Zr)):u(Zr)}}function St(Vr,ln,cn,Zr){for(var ht=0,Nt=ln.length,rr=cn.length,mr,Rr;ht<Nt;){if(Zr>=rr)return-1;if(mr=ln.charCodeAt(ht++),mr===37){if(mr=ln.charAt(ht++),Rr=mt[mr in n?ln.charAt(ht++):mr],!Rr||(Zr=Rr(Vr,cn,Zr))<0)return-1}else if(mr!=cn.charCodeAt(Zr++))return-1}return Zr}function kt(Vr,ln,cn){var Zr=Ye.exec(ln.slice(cn));return Zr?(Vr.p=ut[Zr[0].toLowerCase()],cn+Zr[0].length):-1}function Rt(Vr,ln,cn){var Zr=at.exec(ln.slice(cn));return Zr?(Vr.w=et[Zr[0].toLowerCase()],cn+Zr[0].length):-1}function zt(Vr,ln,cn){var Zr=nt.exec(ln.slice(cn));return Zr?(Vr.w=Ge[Zr[0].toLowerCase()],cn+Zr[0].length):-1}function Xt(Vr,ln,cn){var Zr=Pt.exec(ln.slice(cn));return Zr?(Vr.m=$t[Zr[0].toLowerCase()],cn+Zr[0].length):-1}function Yt(Vr,ln,cn){var Zr=lt.exec(ln.slice(cn));return Zr?(Vr.m=Ct[Zr[0].toLowerCase()],cn+Zr[0].length):-1}function Vt(Vr,ln,cn){return St(Vr,ot,ln,cn)}function cr(Vr,ln,cn){return St(Vr,Te,ln,cn)}function Or(Vr,ln,cn){return St(Vr,Le,ln,cn)}function kr(Vr){return Me[Vr.getDay()]}function Sr(Vr){return Qe[Vr.getDay()]}function vn(Vr){return He[Vr.getMonth()]}function Rn(Vr){return Ie[Vr.getMonth()]}function hn(Vr){return Ve[+(Vr.getHours()>=12)]}function An(Vr){return 1+~~(Vr.getMonth()/3)}function En(Vr){return Me[Vr.getUTCDay()]}function Mr(Vr){return Qe[Vr.getUTCDay()]}function xr(Vr){return He[Vr.getUTCMonth()]}function dn(Vr){return Ie[Vr.getUTCMonth()]}function qr(Vr){return Ve[+(Vr.getUTCHours()>=12)]}function on(Vr){return 1+~~(Vr.getUTCMonth()/3)}return{format:function(Vr){var ln=wt(Vr+="",je);return ln.toString=function(){return Vr},ln},parse:function(Vr){var ln=yt(Vr+="",!1);return ln.toString=function(){return Vr},ln},utcFormat:function(Vr){var ln=wt(Vr+="",Oe);return ln.toString=function(){return Vr},ln},utcParse:function(Vr){var ln=yt(Vr+="",!0);return ln.toString=function(){return Vr},ln}}}var n={"-":"",_:" ",0:"0"},o=/^\s*\d+/,l=/^%/,h=/[\\^$*+?|[\]().{}]/g;function i(ft,ot,Te){var Le=ft<0?"-":"",Ve=(Le?-ft:ft)+"",Qe=Ve.length;return Le+(Qe<Te?new Array(Te-Qe+1).join(ot)+Ve:Ve)}function s(ft){return ft.replace(h,"\\$&")}function p(ft){return new RegExp("^(?:"+ft.map(s).join("|")+")","i")}function v(ft){for(var ot={},Te=-1,Le=ft.length;++Te<Le;)ot[ft[Te].toLowerCase()]=Te;return ot}function m(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+1));return Le?(ft.w=+Le[0],Te+Le[0].length):-1}function b(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+1));return Le?(ft.u=+Le[0],Te+Le[0].length):-1}function y(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.U=+Le[0],Te+Le[0].length):-1}function x(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.V=+Le[0],Te+Le[0].length):-1}function w(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.W=+Le[0],Te+Le[0].length):-1}function g(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+4));return Le?(ft.y=+Le[0],Te+Le[0].length):-1}function T(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.y=+Le[0]+(+Le[0]>68?1900:2e3),Te+Le[0].length):-1}function M(ft,ot,Te){var Le=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ot.slice(Te,Te+6));return Le?(ft.Z=Le[1]?0:-(Le[2]+(Le[3]||"00")),Te+Le[0].length):-1}function P(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+1));return Le?(ft.q=Le[0]*3-3,Te+Le[0].length):-1}function L(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.m=Le[0]-1,Te+Le[0].length):-1}function I(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.d=+Le[0],Te+Le[0].length):-1}function C(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+3));return Le?(ft.m=0,ft.d=+Le[0],Te+Le[0].length):-1}function k(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.H=+Le[0],Te+Le[0].length):-1}function E(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.M=+Le[0],Te+Le[0].length):-1}function R(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+2));return Le?(ft.S=+Le[0],Te+Le[0].length):-1}function O(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+3));return Le?(ft.L=+Le[0],Te+Le[0].length):-1}function N(ft,ot,Te){var Le=o.exec(ot.slice(Te,Te+6));return Le?(ft.L=Math.floor(Le[0]/1e3),Te+Le[0].length):-1}function G(ft,ot,Te){var Le=l.exec(ot.slice(Te,Te+1));return Le?Te+Le[0].length:-1}function U(ft,ot,Te){var Le=o.exec(ot.slice(Te));return Le?(ft.Q=+Le[0],Te+Le[0].length):-1}function Y(ft,ot,Te){var Le=o.exec(ot.slice(Te));return Le?(ft.s=+Le[0],Te+Le[0].length):-1}function z(ft,ot){return i(ft.getDate(),ot,2)}function B(ft,ot){return i(ft.getHours(),ot,2)}function H(ft,ot){return i(ft.getHours()%12||12,ot,2)}function V(ft,ot){return i(1+a.timeDay.count(a.timeYear(ft),ft),ot,3)}function Z(ft,ot){return i(ft.getMilliseconds(),ot,3)}function q(ft,ot){return Z(ft,ot)+"000"}function J(ft,ot){return i(ft.getMonth()+1,ot,2)}function ne(ft,ot){return i(ft.getMinutes(),ot,2)}function ve(ft,ot){return i(ft.getSeconds(),ot,2)}function $(ft){var ot=ft.getDay();return ot===0?7:ot}function j(ft,ot){return i(a.timeSunday.count(a.timeYear(ft)-1,ft),ot,2)}function ae(ft,ot){var Te=ft.getDay();return ft=Te>=4||Te===0?a.timeThursday(ft):a.timeThursday.ceil(ft),i(a.timeThursday.count(a.timeYear(ft),ft)+(a.timeYear(ft).getDay()===4),ot,2)}function ie(ft){return ft.getDay()}function te(ft,ot){return i(a.timeMonday.count(a.timeYear(ft)-1,ft),ot,2)}function re(ft,ot){return i(ft.getFullYear()%100,ot,2)}function ce(ft,ot){return i(ft.getFullYear()%1e4,ot,4)}function pe(ft){var ot=ft.getTimezoneOffset();return(ot>0?"-":(ot*=-1,"+"))+i(ot/60|0,"0",2)+i(ot%60,"0",2)}function fe(ft,ot){return i(ft.getUTCDate(),ot,2)}function se(ft,ot){return i(ft.getUTCHours(),ot,2)}function de(ft,ot){return i(ft.getUTCHours()%12||12,ot,2)}function be(ft,ot){return i(1+a.utcDay.count(a.utcYear(ft),ft),ot,3)}function xe(ft,ot){return i(ft.getUTCMilliseconds(),ot,3)}function ke(ft,ot){return xe(ft,ot)+"000"}function Re(ft,ot){return i(ft.getUTCMonth()+1,ot,2)}function Ke(ft,ot){return i(ft.getUTCMinutes(),ot,2)}function ze(ft,ot){return i(ft.getUTCSeconds(),ot,2)}function Je(ft){var ot=ft.getUTCDay();return ot===0?7:ot}function qe(ft,ot){return i(a.utcSunday.count(a.utcYear(ft)-1,ft),ot,2)}function Ee(ft,ot){var Te=ft.getUTCDay();return ft=Te>=4||Te===0?a.utcThursday(ft):a.utcThursday.ceil(ft),i(a.utcThursday.count(a.utcYear(ft),ft)+(a.utcYear(ft).getUTCDay()===4),ot,2)}function Ae(ft){return ft.getUTCDay()}function Be(ft,ot){return i(a.utcMonday.count(a.utcYear(ft)-1,ft),ot,2)}function $e(ft,ot){return i(ft.getUTCFullYear()%100,ot,2)}function xt(ft,ot){return i(ft.getUTCFullYear()%1e4,ot,4)}function bt(){return"+0000"}function Ne(){return"%"}function st(ft){return+ft}function _t(ft){return Math.floor(+ft/1e3)}var Ot;Wt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wt(ft){return Ot=f(ft),r.timeFormat=Ot.format,r.timeParse=Ot.parse,r.utcFormat=Ot.utcFormat,r.utcParse=Ot.utcParse,Ot}var Et="%Y-%m-%dT%H:%M:%S.%LZ";function jt(ft){return ft.toISOString()}var Zt=Date.prototype.toISOString?jt:r.utcFormat(Et);function Mt(ft){var ot=new Date(ft);return isNaN(ot)?null:ot}var At=+new Date("2000-01-01T00:00:00.000Z")?Mt:r.utcParse(Et);r.isoFormat=Zt,r.isoParse=At,r.timeFormatDefaultLocale=Wt,r.timeFormatLocale=f,Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a=new Date,u=new Date;function c(Ae,Be,$e,xt){function bt(Ne){return Ae(Ne=arguments.length===0?new Date:new Date(+Ne)),Ne}return bt.floor=function(Ne){return Ae(Ne=new Date(+Ne)),Ne},bt.ceil=function(Ne){return Ae(Ne=new Date(Ne-1)),Be(Ne,1),Ae(Ne),Ne},bt.round=function(Ne){var st=bt(Ne),_t=bt.ceil(Ne);return Ne-st<_t-Ne?st:_t},bt.offset=function(Ne,st){return Be(Ne=new Date(+Ne),st==null?1:Math.floor(st)),Ne},bt.range=function(Ne,st,_t){var Ot=[],Wt;if(Ne=bt.ceil(Ne),_t=_t==null?1:Math.floor(_t),!(Ne<st)||!(_t>0))return Ot;do Ot.push(Wt=new Date(+Ne)),Be(Ne,_t),Ae(Ne);while(Wt<Ne&&Ne<st);return Ot},bt.filter=function(Ne){return c(function(st){if(st>=st)for(;Ae(st),!Ne(st);)st.setTime(st-1)},function(st,_t){if(st>=st)if(_t<0)for(;++_t<=0;)for(;Be(st,-1),!Ne(st););else for(;--_t>=0;)for(;Be(st,1),!Ne(st););})},$e&&(bt.count=function(Ne,st){return a.setTime(+Ne),u.setTime(+st),Ae(a),Ae(u),Math.floor($e(a,u))},bt.every=function(Ne){return Ne=Math.floor(Ne),!isFinite(Ne)||!(Ne>0)?null:Ne>1?bt.filter(xt?function(st){return xt(st)%Ne===0}:function(st){return bt.count(0,st)%Ne===0}):bt}),bt}var t=c(function(){},function(Ae,Be){Ae.setTime(+Ae+Be)},function(Ae,Be){return Be-Ae});t.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?c(function(Be){Be.setTime(Math.floor(Be/Ae)*Ae)},function(Be,$e){Be.setTime(+Be+$e*Ae)},function(Be,$e){return($e-Be)/Ae}):t};var f=t.range,n=1e3,o=6e4,l=36e5,h=864e5,i=6048e5,s=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Be){Ae.setTime(+Ae+Be*n)},function(Ae,Be){return(Be-Ae)/n},function(Ae){return Ae.getUTCSeconds()}),p=s.range,v=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*n)},function(Ae,Be){Ae.setTime(+Ae+Be*o)},function(Ae,Be){return(Be-Ae)/o},function(Ae){return Ae.getMinutes()}),m=v.range,b=c(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*n-Ae.getMinutes()*o)},function(Ae,Be){Ae.setTime(+Ae+Be*l)},function(Ae,Be){return(Be-Ae)/l},function(Ae){return Ae.getHours()}),y=b.range,x=c(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Be){Ae.setDate(Ae.getDate()+Be)},function(Ae,Be){return(Be-Ae-(Be.getTimezoneOffset()-Ae.getTimezoneOffset())*o)/h},function(Ae){return Ae.getDate()-1}),w=x.range;function g(Ae){return c(function(Be){Be.setDate(Be.getDate()-(Be.getDay()+7-Ae)%7),Be.setHours(0,0,0,0)},function(Be,$e){Be.setDate(Be.getDate()+$e*7)},function(Be,$e){return($e-Be-($e.getTimezoneOffset()-Be.getTimezoneOffset())*o)/i})}var T=g(0),M=g(1),P=g(2),L=g(3),I=g(4),C=g(5),k=g(6),E=T.range,R=M.range,O=P.range,N=L.range,G=I.range,U=C.range,Y=k.range,z=c(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Be){Ae.setMonth(Ae.getMonth()+Be)},function(Ae,Be){return Be.getMonth()-Ae.getMonth()+(Be.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),B=z.range,H=c(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Be){Ae.setFullYear(Ae.getFullYear()+Be)},function(Ae,Be){return Be.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});H.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:c(function(Be){Be.setFullYear(Math.floor(Be.getFullYear()/Ae)*Ae),Be.setMonth(0,1),Be.setHours(0,0,0,0)},function(Be,$e){Be.setFullYear(Be.getFullYear()+$e*Ae)})};var V=H.range,Z=c(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Be){Ae.setTime(+Ae+Be*o)},function(Ae,Be){return(Be-Ae)/o},function(Ae){return Ae.getUTCMinutes()}),q=Z.range,J=c(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Be){Ae.setTime(+Ae+Be*l)},function(Ae,Be){return(Be-Ae)/l},function(Ae){return Ae.getUTCHours()}),ne=J.range,ve=c(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Be){Ae.setUTCDate(Ae.getUTCDate()+Be)},function(Ae,Be){return(Be-Ae)/h},function(Ae){return Ae.getUTCDate()-1}),$=ve.range;function j(Ae){return c(function(Be){Be.setUTCDate(Be.getUTCDate()-(Be.getUTCDay()+7-Ae)%7),Be.setUTCHours(0,0,0,0)},function(Be,$e){Be.setUTCDate(Be.getUTCDate()+$e*7)},function(Be,$e){return($e-Be)/i})}var ae=j(0),ie=j(1),te=j(2),re=j(3),ce=j(4),pe=j(5),fe=j(6),se=ae.range,de=ie.range,be=te.range,xe=re.range,ke=ce.range,Re=pe.range,Ke=fe.range,ze=c(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Be){Ae.setUTCMonth(Ae.getUTCMonth()+Be)},function(Ae,Be){return Be.getUTCMonth()-Ae.getUTCMonth()+(Be.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),Je=ze.range,qe=c(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Be){Ae.setUTCFullYear(Ae.getUTCFullYear()+Be)},function(Ae,Be){return Be.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});qe.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:c(function(Be){Be.setUTCFullYear(Math.floor(Be.getUTCFullYear()/Ae)*Ae),Be.setUTCMonth(0,1),Be.setUTCHours(0,0,0,0)},function(Be,$e){Be.setUTCFullYear(Be.getUTCFullYear()+$e*Ae)})};var Ee=qe.range;r.timeDay=x,r.timeDays=w,r.timeFriday=C,r.timeFridays=U,r.timeHour=b,r.timeHours=y,r.timeInterval=c,r.timeMillisecond=t,r.timeMilliseconds=f,r.timeMinute=v,r.timeMinutes=m,r.timeMonday=M,r.timeMondays=R,r.timeMonth=z,r.timeMonths=B,r.timeSaturday=k,r.timeSaturdays=Y,r.timeSecond=s,r.timeSeconds=p,r.timeSunday=T,r.timeSundays=E,r.timeThursday=I,r.timeThursdays=G,r.timeTuesday=P,r.timeTuesdays=O,r.timeWednesday=L,r.timeWednesdays=N,r.timeWeek=T,r.timeWeeks=E,r.timeYear=H,r.timeYears=V,r.utcDay=ve,r.utcDays=$,r.utcFriday=pe,r.utcFridays=Re,r.utcHour=J,r.utcHours=ne,r.utcMillisecond=t,r.utcMilliseconds=f,r.utcMinute=Z,r.utcMinutes=q,r.utcMonday=ie,r.utcMondays=de,r.utcMonth=ze,r.utcMonths=Je,r.utcSaturday=fe,r.utcSaturdays=Ke,r.utcSecond=s,r.utcSeconds=p,r.utcSunday=ae,r.utcSundays=se,r.utcThursday=ce,r.utcThursdays=ke,r.utcTuesday=te,r.utcTuesdays=be,r.utcWednesday=re,r.utcWednesdays=xe,r.utcWeek=ae,r.utcWeeks=se,r.utcYear=qe,r.utcYears=Ee,Object.defineProperty(r,"__esModule",{value:!0})})},{}],168:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.d3=r.d3||{}))})(this,function(r){var a=0,u=0,c=0,t=1e3,f,n,o=0,l=0,h=0,i=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(L){setTimeout(L,17)};function p(){return l||(s(v),l=i.now()+h)}function v(){l=0}function m(){this._call=this._time=this._next=null}m.prototype=b.prototype={constructor:m,restart:function(L,I,C){if(typeof L!="function")throw new TypeError("callback is not a function");C=(C==null?p():+C)+(I==null?0:+I),!this._next&&n!==this&&(n?n._next=this:f=this,n=this),this._call=L,this._time=C,T()},stop:function(){this._call&&(this._call=null,this._time=1/0,T())}};function b(L,I,C){var k=new m;return k.restart(L,I,C),k}function y(){p(),++a;for(var L=f,I;L;)(I=l-L._time)>=0&&L._call.call(null,I),L=L._next;--a}function x(){l=(o=i.now())+h,a=u=0;try{y()}finally{a=0,g(),l=0}}function w(){var L=i.now(),I=L-o;I>t&&(h-=I,o=L)}function g(){for(var L,I=f,C,k=1/0;I;)I._call?(k>I._time&&(k=I._time),L=I,I=I._next):(C=I._next,I._next=null,I=L?L._next=C:f=C);n=L,T(k)}function T(L){if(!a){u&&(u=clearTimeout(u));var I=L-l;I>24?(L<1/0&&(u=setTimeout(x,L-i.now()-h)),c&&(c=clearInterval(c))):(c||(o=i.now(),c=setInterval(w,t)),a=1,s(x))}}function M(L,I,C){var k=new m;return I=I==null?0:+I,k.restart(function(E){k.stop(),L(E+I)},I,C),k}function P(L,I,C){var k=new m,E=I;return I==null?(k.restart(L,I,C),k):(I=+I,C=C==null?p():+C,k.restart(function R(O){O+=E,k.restart(R,E+=I,C),L(O)},I,C),k)}r.interval=P,r.now=p,r.timeout=M,r.timer=b,r.timerFlush=y,Object.defineProperty(r,"__esModule",{value:!0})})},{}],169:[function(e,d,S){(function(){var r={version:"3.5.17"},a=[].slice,u=function(W){return a.call(W)},c=this.document;function t(W){return W&&(W.ownerDocument||W.document||W).documentElement}function f(W){return W&&(W.ownerDocument&&W.ownerDocument.defaultView||W.document&&W||W.defaultView)}if(c)try{u(c.documentElement.childNodes)[0].nodeType}catch{u=function(ue){for(var ge=ue.length,_e=new Array(ge);ge--;)_e[ge]=ue[ge];return _e}}if(Date.now||(Date.now=function(){return+new Date}),c)try{c.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,o=n.setAttribute,l=n.setAttributeNS,h=this.CSSStyleDeclaration.prototype,i=h.setProperty;n.setAttribute=function(ue,ge){o.call(this,ue,ge+"")},n.setAttributeNS=function(ue,ge,_e){l.call(this,ue,ge,_e+"")},h.setProperty=function(ue,ge,_e){i.call(this,ue,ge+"",_e)}}r.ascending=s;function s(W,ue){return W<ue?-1:W>ue?1:W>=ue?0:NaN}r.descending=function(W,ue){return ue<W?-1:ue>W?1:ue>=W?0:NaN},r.min=function(W,ue){var ge=-1,_e=W.length,Ce,De;if(arguments.length===1){for(;++ge<_e;)if((De=W[ge])!=null&&De>=De){Ce=De;break}for(;++ge<_e;)(De=W[ge])!=null&&Ce>De&&(Ce=De)}else{for(;++ge<_e;)if((De=ue.call(W,W[ge],ge))!=null&&De>=De){Ce=De;break}for(;++ge<_e;)(De=ue.call(W,W[ge],ge))!=null&&Ce>De&&(Ce=De)}return Ce},r.max=function(W,ue){var ge=-1,_e=W.length,Ce,De;if(arguments.length===1){for(;++ge<_e;)if((De=W[ge])!=null&&De>=De){Ce=De;break}for(;++ge<_e;)(De=W[ge])!=null&&De>Ce&&(Ce=De)}else{for(;++ge<_e;)if((De=ue.call(W,W[ge],ge))!=null&&De>=De){Ce=De;break}for(;++ge<_e;)(De=ue.call(W,W[ge],ge))!=null&&De>Ce&&(Ce=De)}return Ce},r.extent=function(W,ue){var ge=-1,_e=W.length,Ce,De,tt;if(arguments.length===1){for(;++ge<_e;)if((De=W[ge])!=null&&De>=De){Ce=tt=De;break}for(;++ge<_e;)(De=W[ge])!=null&&(Ce>De&&(Ce=De),tt<De&&(tt=De))}else{for(;++ge<_e;)if((De=ue.call(W,W[ge],ge))!=null&&De>=De){Ce=tt=De;break}for(;++ge<_e;)(De=ue.call(W,W[ge],ge))!=null&&(Ce>De&&(Ce=De),tt<De&&(tt=De))}return[Ce,tt]};function p(W){return W===null?NaN:+W}function v(W){return!isNaN(W)}r.sum=function(W,ue){var ge=0,_e=W.length,Ce,De=-1;if(arguments.length===1)for(;++De<_e;)v(Ce=+W[De])&&(ge+=Ce);else for(;++De<_e;)v(Ce=+ue.call(W,W[De],De))&&(ge+=Ce);return ge},r.mean=function(W,ue){var ge=0,_e=W.length,Ce,De=-1,tt=_e;if(arguments.length===1)for(;++De<_e;)v(Ce=p(W[De]))?ge+=Ce:--tt;else for(;++De<_e;)v(Ce=p(ue.call(W,W[De],De)))?ge+=Ce:--tt;if(tt)return ge/tt},r.quantile=function(W,ue){var ge=(W.length-1)*ue+1,_e=Math.floor(ge),Ce=+W[_e-1],De=ge-_e;return De?Ce+De*(W[_e]-Ce):Ce},r.median=function(W,ue){var ge=[],_e=W.length,Ce,De=-1;if(arguments.length===1)for(;++De<_e;)v(Ce=p(W[De]))&&ge.push(Ce);else for(;++De<_e;)v(Ce=p(ue.call(W,W[De],De)))&&ge.push(Ce);if(ge.length)return r.quantile(ge.sort(s),.5)},r.variance=function(W,ue){var ge=W.length,_e=0,Ce,De,tt=0,Ze=-1,rt=0;if(arguments.length===1)for(;++Ze<ge;)v(Ce=p(W[Ze]))&&(De=Ce-_e,_e+=De/++rt,tt+=De*(Ce-_e));else for(;++Ze<ge;)v(Ce=p(ue.call(W,W[Ze],Ze)))&&(De=Ce-_e,_e+=De/++rt,tt+=De*(Ce-_e));if(rt>1)return tt/(rt-1)},r.deviation=function(){var W=r.variance.apply(this,arguments);return W&&Math.sqrt(W)};function m(W){return{left:function(ue,ge,_e,Ce){for(arguments.length<3&&(_e=0),arguments.length<4&&(Ce=ue.length);_e<Ce;){var De=_e+Ce>>>1;W(ue[De],ge)<0?_e=De+1:Ce=De}return _e},right:function(ue,ge,_e,Ce){for(arguments.length<3&&(_e=0),arguments.length<4&&(Ce=ue.length);_e<Ce;){var De=_e+Ce>>>1;W(ue[De],ge)>0?Ce=De:_e=De+1}return _e}}}var b=m(s);r.bisectLeft=b.left,r.bisect=r.bisectRight=b.right,r.bisector=function(W){return m(W.length===1?function(ue,ge){return s(W(ue),ge)}:W)},r.shuffle=function(W,ue,ge){(_e=arguments.length)<3&&(ge=W.length,_e<2&&(ue=0));for(var _e=ge-ue,Ce,De;_e;)De=Math.random()*_e--|0,Ce=W[_e+ue],W[_e+ue]=W[De+ue],W[De+ue]=Ce;return W},r.permute=function(W,ue){for(var ge=ue.length,_e=new Array(ge);ge--;)_e[ge]=W[ue[ge]];return _e},r.pairs=function(W){for(var ue=0,ge=W.length-1,_e=W[0],Ce=new Array(ge<0?0:ge);ue<ge;)Ce[ue]=[_e,_e=W[++ue]];return Ce},r.transpose=function(W){if(!(De=W.length))return[];for(var ue=-1,ge=r.min(W,y),_e=new Array(ge);++ue<ge;)for(var Ce=-1,De,tt=_e[ue]=new Array(De);++Ce<De;)tt[Ce]=W[Ce][ue];return _e};function y(W){return W.length}r.zip=function(){return r.transpose(arguments)},r.keys=function(W){var ue=[];for(var ge in W)ue.push(ge);return ue},r.values=function(W){var ue=[];for(var ge in W)ue.push(W[ge]);return ue},r.entries=function(W){var ue=[];for(var ge in W)ue.push({key:ge,value:W[ge]});return ue},r.merge=function(W){for(var ue=W.length,ge,_e=-1,Ce=0,De,tt;++_e<ue;)Ce+=W[_e].length;for(De=new Array(Ce);--ue>=0;)for(tt=W[ue],ge=tt.length;--ge>=0;)De[--Ce]=tt[ge];return De};var x=Math.abs;r.range=function(W,ue,ge){if(arguments.length<3&&(ge=1,arguments.length<2&&(ue=W,W=0)),(ue-W)/ge===1/0)throw new Error("infinite range");var _e=[],Ce=w(x(ge)),De=-1,tt;if(W*=Ce,ue*=Ce,ge*=Ce,ge<0)for(;(tt=W+ge*++De)>ue;)_e.push(tt/Ce);else for(;(tt=W+ge*++De)<ue;)_e.push(tt/Ce);return _e};function w(W){for(var ue=1;W*ue%1;)ue*=10;return ue}function g(W,ue){for(var ge in ue)Object.defineProperty(W.prototype,ge,{value:ue[ge],enumerable:!1})}r.map=function(W,ue){var ge=new T;if(W instanceof T)W.forEach(function(Ze,rt){ge.set(Ze,rt)});else if(Array.isArray(W)){var _e=-1,Ce=W.length,De;if(arguments.length===1)for(;++_e<Ce;)ge.set(_e,W[_e]);else for(;++_e<Ce;)ge.set(ue.call(W,De=W[_e],_e),De)}else for(var tt in W)ge.set(tt,W[tt]);return ge};function T(){this._=Object.create(null)}var M="__proto__",P="\0";g(T,{has:C,get:function(W){return this._[L(W)]},set:function(W,ue){return this._[L(W)]=ue},remove:k,keys:E,values:function(){var W=[];for(var ue in this._)W.push(this._[ue]);return W},entries:function(){var W=[];for(var ue in this._)W.push({key:I(ue),value:this._[ue]});return W},size:R,empty:O,forEach:function(W){for(var ue in this._)W.call(this,I(ue),this._[ue])}});function L(W){return(W+="")===M||W[0]===P?P+W:W}function I(W){return(W+="")[0]===P?W.slice(1):W}function C(W){return L(W)in this._}function k(W){return(W=L(W))in this._&&delete this._[W]}function E(){var W=[];for(var ue in this._)W.push(I(ue));return W}function R(){var W=0;for(var ue in this._)++W;return W}function O(){for(var W in this._)return!1;return!0}r.nest=function(){var W={},ue=[],ge=[],_e,Ce;function De(Ze,rt,pt){if(pt>=ue.length)return Ce?Ce.call(W,rt):_e?rt.sort(_e):rt;for(var gt=-1,Dt=rt.length,Bt=ue[pt++],qt,_r,Kt,tr=new T,ir;++gt<Dt;)(ir=tr.get(qt=Bt(_r=rt[gt])))?ir.push(_r):tr.set(qt,[_r]);return Ze?(_r=Ze(),Kt=function(wr,sr){_r.set(wr,De(Ze,sr,pt))}):(_r={},Kt=function(wr,sr){_r[wr]=De(Ze,sr,pt)}),tr.forEach(Kt),_r}function tt(Ze,rt){if(rt>=ue.length)return Ze;var pt=[],gt=ge[rt++];return Ze.forEach(function(Dt,Bt){pt.push({key:Dt,values:tt(Bt,rt)})}),gt?pt.sort(function(Dt,Bt){return gt(Dt.key,Bt.key)}):pt}return W.map=function(Ze,rt){return De(rt,Ze,0)},W.entries=function(Ze){return tt(De(r.map,Ze,0),0)},W.key=function(Ze){return ue.push(Ze),W},W.sortKeys=function(Ze){return ge[ue.length-1]=Ze,W},W.sortValues=function(Ze){return _e=Ze,W},W.rollup=function(Ze){return Ce=Ze,W},W},r.set=function(W){var ue=new N;if(W)for(var ge=0,_e=W.length;ge<_e;++ge)ue.add(W[ge]);return ue};function N(){this._=Object.create(null)}g(N,{has:C,add:function(W){return this._[L(W+="")]=!0,W},remove:k,values:E,size:R,empty:O,forEach:function(W){for(var ue in this._)W.call(this,I(ue))}}),r.behavior={};function G(W){return W}r.rebind=function(W,ue){for(var ge=1,_e=arguments.length,Ce;++ge<_e;)W[Ce=arguments[ge]]=U(W,ue,ue[Ce]);return W};function U(W,ue,ge){return function(){var _e=ge.apply(ue,arguments);return _e===ue?W:_e}}function Y(W,ue){if(ue in W)return ue;ue=ue.charAt(0).toUpperCase()+ue.slice(1);for(var ge=0,_e=z.length;ge<_e;++ge){var Ce=z[ge]+ue;if(Ce in W)return Ce}}var z=["webkit","ms","moz","Moz","o","O"];function B(){}r.dispatch=function(){for(var W=new H,ue=-1,ge=arguments.length;++ue<ge;)W[arguments[ue]]=V(W);return W};function H(){}H.prototype.on=function(W,ue){var ge=W.indexOf("."),_e="";if(ge>=0&&(_e=W.slice(ge+1),W=W.slice(0,ge)),W)return arguments.length<2?this[W].on(_e):this[W].on(_e,ue);if(arguments.length===2){if(ue==null)for(W in this)this.hasOwnProperty(W)&&this[W].on(_e,null);return this}};function V(W){var ue=[],ge=new T;function _e(){for(var Ce=ue,De=-1,tt=Ce.length,Ze;++De<tt;)(Ze=Ce[De].on)&&Ze.apply(this,arguments);return W}return _e.on=function(Ce,De){var tt=ge.get(Ce),Ze;return arguments.length<2?tt&&tt.on:(tt&&(tt.on=null,ue=ue.slice(0,Ze=ue.indexOf(tt)).concat(ue.slice(Ze+1)),ge.remove(Ce)),De&&ue.push(ge.set(Ce,{on:De})),W)},_e}r.event=null;function Z(){r.event.preventDefault()}function q(){for(var W=r.event,ue;ue=W.sourceEvent;)W=ue;return W}function J(W){for(var ue=new H,ge=0,_e=arguments.length;++ge<_e;)ue[arguments[ge]]=V(ue);return ue.of=function(Ce,De){return function(tt){try{var Ze=tt.sourceEvent=r.event;tt.target=W,r.event=tt,ue[tt.type].apply(Ce,De)}finally{r.event=Ze}}},ue}r.requote=function(W){return W.replace(ne,"\\$&")};var ne=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ve={}.__proto__?function(W,ue){W.__proto__=ue}:function(W,ue){for(var ge in ue)W[ge]=ue[ge]};function $(W){return ve(W,te),W}var j=function(W,ue){return ue.querySelector(W)},ae=function(W,ue){return ue.querySelectorAll(W)},ie=function(W,ue){var ge=W.matches||W[Y(W,"matchesSelector")];return ie=function(_e,Ce){return ge.call(_e,Ce)},ie(W,ue)};typeof Sizzle=="function"&&(j=function(W,ue){return Sizzle(W,ue)[0]||null},ae=Sizzle,ie=Sizzle.matchesSelector),r.selection=function(){return r.select(c.documentElement)};var te=r.selection.prototype=[];te.select=function(W){var ue=[],ge,_e,Ce,De;W=re(W);for(var tt=-1,Ze=this.length;++tt<Ze;){ue.push(ge=[]),ge.parentNode=(Ce=this[tt]).parentNode;for(var rt=-1,pt=Ce.length;++rt<pt;)(De=Ce[rt])?(ge.push(_e=W.call(De,De.__data__,rt,tt)),_e&&"__data__"in De&&(_e.__data__=De.__data__)):ge.push(null)}return $(ue)};function re(W){return typeof W=="function"?W:function(){return j(W,this)}}te.selectAll=function(W){var ue=[],ge,_e;W=ce(W);for(var Ce=-1,De=this.length;++Ce<De;)for(var tt=this[Ce],Ze=-1,rt=tt.length;++Ze<rt;)(_e=tt[Ze])&&(ue.push(ge=u(W.call(_e,_e.__data__,Ze,Ce))),ge.parentNode=_e);return $(ue)};function ce(W){return typeof W=="function"?W:function(){return ae(W,this)}}var pe="http://www.w3.org/1999/xhtml",fe={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};r.ns={prefix:fe,qualify:function(W){var ue=W.indexOf(":"),ge=W;return ue>=0&&(ge=W.slice(0,ue))!=="xmlns"&&(W=W.slice(ue+1)),fe.hasOwnProperty(ge)?{space:fe[ge],local:W}:W}},te.attr=function(W,ue){if(arguments.length<2){if(typeof W=="string"){var ge=this.node();return W=r.ns.qualify(W),W.local?ge.getAttributeNS(W.space,W.local):ge.getAttribute(W)}for(ue in W)this.each(se(ue,W[ue]));return this}return this.each(se(W,ue))};function se(W,ue){W=r.ns.qualify(W);function ge(){this.removeAttribute(W)}function _e(){this.removeAttributeNS(W.space,W.local)}function Ce(){this.setAttribute(W,ue)}function De(){this.setAttributeNS(W.space,W.local,ue)}function tt(){var rt=ue.apply(this,arguments);rt==null?this.removeAttribute(W):this.setAttribute(W,rt)}function Ze(){var rt=ue.apply(this,arguments);rt==null?this.removeAttributeNS(W.space,W.local):this.setAttributeNS(W.space,W.local,rt)}return ue==null?W.local?_e:ge:typeof ue=="function"?W.local?Ze:tt:W.local?De:Ce}function de(W){return W.trim().replace(/\s+/g," ")}te.classed=function(W,ue){if(arguments.length<2){if(typeof W=="string"){var ge=this.node(),_e=(W=xe(W)).length,Ce=-1;if(ue=ge.classList){for(;++Ce<_e;)if(!ue.contains(W[Ce]))return!1}else for(ue=ge.getAttribute("class");++Ce<_e;)if(!be(W[Ce]).test(ue))return!1;return!0}for(ue in W)this.each(ke(ue,W[ue]));return this}return this.each(ke(W,ue))};function be(W){return new RegExp("(?:^|\\s+)"+r.requote(W)+"(?:\\s+|$)","g")}function xe(W){return(W+"").trim().split(/^|\s+/)}function ke(W,ue){W=xe(W).map(Re);var ge=W.length;function _e(){for(var De=-1;++De<ge;)W[De](this,ue)}function Ce(){for(var De=-1,tt=ue.apply(this,arguments);++De<ge;)W[De](this,tt)}return typeof ue=="function"?Ce:_e}function Re(W){var ue=be(W);return function(ge,_e){if(Ce=ge.classList)return _e?Ce.add(W):Ce.remove(W);var Ce=ge.getAttribute("class")||"";_e?(ue.lastIndex=0,ue.test(Ce)||ge.setAttribute("class",de(Ce+" "+W))):ge.setAttribute("class",de(Ce.replace(ue," ")))}}te.style=function(W,ue,ge){var _e=arguments.length;if(_e<3){if(typeof W!="string"){_e<2&&(ue="");for(ge in W)this.each(Ke(ge,W[ge],ue));return this}if(_e<2){var Ce=this.node();return f(Ce).getComputedStyle(Ce,null).getPropertyValue(W)}ge=""}return this.each(Ke(W,ue,ge))};function Ke(W,ue,ge){function _e(){this.style.removeProperty(W)}function Ce(){this.style.setProperty(W,ue,ge)}function De(){var tt=ue.apply(this,arguments);tt==null?this.style.removeProperty(W):this.style.setProperty(W,tt,ge)}return ue==null?_e:typeof ue=="function"?De:Ce}te.property=function(W,ue){if(arguments.length<2){if(typeof W=="string")return this.node()[W];for(ue in W)this.each(ze(ue,W[ue]));return this}return this.each(ze(W,ue))};function ze(W,ue){function ge(){delete this[W]}function _e(){this[W]=ue}function Ce(){var De=ue.apply(this,arguments);De==null?delete this[W]:this[W]=De}return ue==null?ge:typeof ue=="function"?Ce:_e}te.text=function(W){return arguments.length?this.each(typeof W=="function"?function(){var ue=W.apply(this,arguments);this.textContent=ue==null?"":ue}:W==null?function(){this.textContent=""}:function(){this.textContent=W}):this.node().textContent},te.html=function(W){return arguments.length?this.each(typeof W=="function"?function(){var ue=W.apply(this,arguments);this.innerHTML=ue==null?"":ue}:W==null?function(){this.innerHTML=""}:function(){this.innerHTML=W}):this.node().innerHTML},te.append=function(W){return W=Je(W),this.select(function(){return this.appendChild(W.apply(this,arguments))})};function Je(W){function ue(){var _e=this.ownerDocument,Ce=this.namespaceURI;return Ce===pe&&_e.documentElement.namespaceURI===pe?_e.createElement(W):_e.createElementNS(Ce,W)}function ge(){return this.ownerDocument.createElementNS(W.space,W.local)}return typeof W=="function"?W:(W=r.ns.qualify(W)).local?ge:ue}te.insert=function(W,ue){return W=Je(W),ue=re(ue),this.select(function(){return this.insertBefore(W.apply(this,arguments),ue.apply(this,arguments)||null)})},te.remove=function(){return this.each(qe)};function qe(){var W=this.parentNode;W&&W.removeChild(this)}te.data=function(W,ue){var ge=-1,_e=this.length,Ce,De;if(!arguments.length){for(W=new Array(_e=(Ce=this[0]).length);++ge<_e;)(De=Ce[ge])&&(W[ge]=De.__data__);return W}function tt(gt,Dt){var Bt,qt=gt.length,_r=Dt.length,Kt=Math.min(qt,_r),tr=new Array(_r),ir=new Array(_r),wr=new Array(qt),sr,vr;if(ue){var nn=new T,en=new Array(qt),Jr;for(Bt=-1;++Bt<qt;)(sr=gt[Bt])&&(nn.has(Jr=ue.call(sr,sr.__data__,Bt))?wr[Bt]=sr:nn.set(Jr,sr),en[Bt]=Jr);for(Bt=-1;++Bt<_r;)(sr=nn.get(Jr=ue.call(Dt,vr=Dt[Bt],Bt)))?sr!==!0&&(tr[Bt]=sr,sr.__data__=vr):ir[Bt]=Ee(vr),nn.set(Jr,!0);for(Bt=-1;++Bt<qt;)Bt in en&&nn.get(en[Bt])!==!0&&(wr[Bt]=gt[Bt])}else{for(Bt=-1;++Bt<Kt;)sr=gt[Bt],vr=Dt[Bt],sr?(sr.__data__=vr,tr[Bt]=sr):ir[Bt]=Ee(vr);for(;Bt<_r;++Bt)ir[Bt]=Ee(Dt[Bt]);for(;Bt<qt;++Bt)wr[Bt]=gt[Bt]}ir.update=tr,ir.parentNode=tr.parentNode=wr.parentNode=gt.parentNode,Ze.push(ir),rt.push(tr),pt.push(wr)}var Ze=xt([]),rt=$([]),pt=$([]);if(typeof W=="function")for(;++ge<_e;)tt(Ce=this[ge],W.call(Ce,Ce.parentNode.__data__,ge));else for(;++ge<_e;)tt(Ce=this[ge],W);return rt.enter=function(){return Ze},rt.exit=function(){return pt},rt};function Ee(W){return{__data__:W}}te.datum=function(W){return arguments.length?this.property("__data__",W):this.property("__data__")},te.filter=function(W){var ue=[],ge,_e,Ce;typeof W!="function"&&(W=Ae(W));for(var De=0,tt=this.length;De<tt;De++){ue.push(ge=[]),ge.parentNode=(_e=this[De]).parentNode;for(var Ze=0,rt=_e.length;Ze<rt;Ze++)(Ce=_e[Ze])&&W.call(Ce,Ce.__data__,Ze,De)&&ge.push(Ce)}return $(ue)};function Ae(W){return function(){return ie(this,W)}}te.order=function(){for(var W=-1,ue=this.length;++W<ue;)for(var ge=this[W],_e=ge.length-1,Ce=ge[_e],De;--_e>=0;)(De=ge[_e])&&(Ce&&Ce!==De.nextSibling&&Ce.parentNode.insertBefore(De,Ce),Ce=De);return this},te.sort=function(W){W=Be.apply(this,arguments);for(var ue=-1,ge=this.length;++ue<ge;)this[ue].sort(W);return this.order()};function Be(W){return arguments.length||(W=s),function(ue,ge){return ue&&ge?W(ue.__data__,ge.__data__):!ue-!ge}}te.each=function(W){return $e(this,function(ue,ge,_e){W.call(ue,ue.__data__,ge,_e)})};function $e(W,ue){for(var ge=0,_e=W.length;ge<_e;ge++)for(var Ce=W[ge],De=0,tt=Ce.length,Ze;De<tt;De++)(Ze=Ce[De])&&ue(Ze,De,ge);return W}te.call=function(W){var ue=u(arguments);return W.apply(ue[0]=this,ue),this},te.empty=function(){return!this.node()},te.node=function(){for(var W=0,ue=this.length;W<ue;W++)for(var ge=this[W],_e=0,Ce=ge.length;_e<Ce;_e++){var De=ge[_e];if(De)return De}return null},te.size=function(){var W=0;return $e(this,function(){++W}),W};function xt(W){return ve(W,bt),W}var bt=[];r.selection.enter=xt,r.selection.enter.prototype=bt,bt.append=te.append,bt.empty=te.empty,bt.node=te.node,bt.call=te.call,bt.size=te.size,bt.select=function(W){for(var ue=[],ge,_e,Ce,De,tt,Ze=-1,rt=this.length;++Ze<rt;){Ce=(De=this[Ze]).update,ue.push(ge=[]),ge.parentNode=De.parentNode;for(var pt=-1,gt=De.length;++pt<gt;)(tt=De[pt])?(ge.push(Ce[pt]=_e=W.call(De.parentNode,tt.__data__,pt,Ze)),_e.__data__=tt.__data__):ge.push(null)}return $(ue)},bt.insert=function(W,ue){return arguments.length<2&&(ue=Ne(this)),te.insert.call(this,W,ue)};function Ne(W){var ue,ge;return function(_e,Ce,De){var tt=W[De].update,Ze=tt.length,rt;for(De!=ge&&(ge=De,ue=0),Ce>=ue&&(ue=Ce+1);!(rt=tt[ue])&&++ue<Ze;);return rt}}r.select=function(W){var ue;return typeof W=="string"?(ue=[j(W,c)],ue.parentNode=c.documentElement):(ue=[W],ue.parentNode=t(W)),$([ue])},r.selectAll=function(W){var ue;return typeof W=="string"?(ue=u(ae(W,c)),ue.parentNode=c.documentElement):(ue=u(W),ue.parentNode=null),$([ue])},te.on=function(W,ue,ge){var _e=arguments.length;if(_e<3){if(typeof W!="string"){_e<2&&(ue=!1);for(ge in W)this.each(st(ge,W[ge],ue));return this}if(_e<2)return(_e=this.node()["__on"+W])&&_e._;ge=!1}return this.each(st(W,ue,ge))};function st(W,ue,ge){var _e="__on"+W,Ce=W.indexOf("."),De=Ot;Ce>0&&(W=W.slice(0,Ce));var tt=_t.get(W);tt&&(W=tt,De=Wt);function Ze(){var gt=this[_e];gt&&(this.removeEventListener(W,gt,gt.$),delete this[_e])}function rt(){var gt=De(ue,u(arguments));Ze.call(this),this.addEventListener(W,this[_e]=gt,gt.$=ge),gt._=ue}function pt(){var gt=new RegExp("^__on([^.]+)"+r.requote(W)+"$"),Dt;for(var Bt in this)if(Dt=Bt.match(gt)){var qt=this[Bt];this.removeEventListener(Dt[1],qt,qt.$),delete this[Bt]}}return Ce?ue?rt:Ze:ue?B:pt}var _t=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});c&&_t.forEach(function(W){"on"+W in c&&_t.remove(W)});function Ot(W,ue){return function(ge){var _e=r.event;r.event=ge,ue[0]=this.__data__;try{W.apply(this,ue)}finally{r.event=_e}}}function Wt(W,ue){var ge=Ot(W,ue);return function(_e){var Ce=this,De=_e.relatedTarget;(!De||De!==Ce&&!(De.compareDocumentPosition(Ce)&8))&&ge.call(Ce,_e)}}var Et,jt=0;function Zt(W){var ue=".dragsuppress-"+ ++jt,ge="click"+ue,_e=r.select(f(W)).on("touchmove"+ue,Z).on("dragstart"+ue,Z).on("selectstart"+ue,Z);if(Et==null&&(Et="onselectstart"in W?!1:Y(W.style,"userSelect")),Et){var Ce=t(W).style,De=Ce[Et];Ce[Et]="none"}return function(tt){if(_e.on(ue,null),Et&&(Ce[Et]=De),tt){var Ze=function(){_e.on(ge,null)};_e.on(ge,function(){Z(),Ze()},!0),setTimeout(Ze,0)}}}r.mouse=function(W){return At(W,q())};var Mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function At(W,ue){ue.changedTouches&&(ue=ue.changedTouches[0]);var ge=W.ownerSVGElement||W;if(ge.createSVGPoint){var _e=ge.createSVGPoint();if(Mt<0){var Ce=f(W);if(Ce.scrollX||Ce.scrollY){ge=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var De=ge[0][0].getScreenCTM();Mt=!(De.f||De.e),ge.remove()}}return Mt?(_e.x=ue.pageX,_e.y=ue.pageY):(_e.x=ue.clientX,_e.y=ue.clientY),_e=_e.matrixTransform(W.getScreenCTM().inverse()),[_e.x,_e.y]}var tt=W.getBoundingClientRect();return[ue.clientX-tt.left-W.clientLeft,ue.clientY-tt.top-W.clientTop]}r.touch=function(W,ue,ge){if(arguments.length<3&&(ge=ue,ue=q().changedTouches),ue){for(var _e=0,Ce=ue.length,De;_e<Ce;++_e)if((De=ue[_e]).identifier===ge)return At(W,De)}},r.behavior.drag=function(){var W=J(Ce,"drag","dragstart","dragend"),ue=null,ge=De(B,r.mouse,f,"mousemove","mouseup"),_e=De(ft,r.touch,G,"touchmove","touchend");function Ce(){this.on("mousedown.drag",ge).on("touchstart.drag",_e)}function De(tt,Ze,rt,pt,gt){return function(){var Dt=this,Bt=r.event.target.correspondingElement||r.event.target,qt=Dt.parentNode,_r=W.of(Dt,arguments),Kt=0,tr=tt(),ir=".drag"+(tr==null?"":"-"+tr),wr,sr=r.select(rt(Bt)).on(pt+ir,en).on(gt+ir,Jr),vr=Zt(Bt),nn=Ze(qt,tr);ue?(wr=ue.apply(Dt,arguments),wr=[wr.x-nn[0],wr.y-nn[1]]):wr=[0,0],_r({type:"dragstart"});function en(){var Yr=Ze(qt,tr),kn,In;!Yr||(kn=Yr[0]-nn[0],In=Yr[1]-nn[1],Kt|=kn|In,nn=Yr,_r({type:"drag",x:Yr[0]+wr[0],y:Yr[1]+wr[1],dx:kn,dy:In}))}function Jr(){!Ze(qt,tr)||(sr.on(pt+ir,null).on(gt+ir,null),vr(Kt),_r({type:"dragend"}))}}}return Ce.origin=function(tt){return arguments.length?(ue=tt,Ce):ue},r.rebind(Ce,W,"on")};function ft(){return r.event.changedTouches[0].identifier}r.touches=function(W,ue){return arguments.length<2&&(ue=q().touches),ue?u(ue).map(function(ge){var _e=At(W,ge);return _e.identifier=ge.identifier,_e}):[]};var ot=1e-6,Te=ot*ot,Le=Math.PI,Ve=2*Le,Qe=Ve-ot,Me=Le/2,Ie=Le/180,He=180/Le;function Ye(W){return W>0?1:W<0?-1:0}function ut(W,ue,ge){return(ue[0]-W[0])*(ge[1]-W[1])-(ue[1]-W[1])*(ge[0]-W[0])}function nt(W){return W>1?0:W<-1?Le:Math.acos(W)}function Ge(W){return W>1?Me:W<-1?-Me:Math.asin(W)}function at(W){return((W=Math.exp(W))-1/W)/2}function et(W){return((W=Math.exp(W))+1/W)/2}function lt(W){return((W=Math.exp(2*W))-1)/(W+1)}function Ct(W){return(W=Math.sin(W/2))*W}var Pt=Math.SQRT2,$t=2,je=4;r.interpolateZoom=function(W,ue){var ge=W[0],_e=W[1],Ce=W[2],De=ue[0],tt=ue[1],Ze=ue[2],rt=De-ge,pt=tt-_e,gt=rt*rt+pt*pt,Dt,Bt;if(gt<Te)Bt=Math.log(Ze/Ce)/Pt,Dt=function(wr){return[ge+wr*rt,_e+wr*pt,Ce*Math.exp(Pt*wr*Bt)]};else{var qt=Math.sqrt(gt),_r=(Ze*Ze-Ce*Ce+je*gt)/(2*Ce*$t*qt),Kt=(Ze*Ze-Ce*Ce-je*gt)/(2*Ze*$t*qt),tr=Math.log(Math.sqrt(_r*_r+1)-_r),ir=Math.log(Math.sqrt(Kt*Kt+1)-Kt);Bt=(ir-tr)/Pt,Dt=function(wr){var sr=wr*Bt,vr=et(tr),nn=Ce/($t*qt)*(vr*lt(Pt*sr+tr)-at(tr));return[ge+nn*rt,_e+nn*pt,Ce*vr/et(Pt*sr+tr)]}}return Dt.duration=Bt*1e3,Dt},r.behavior.zoom=function(){var W={x:0,y:0,k:1},ue,ge,_e,Ce=[960,500],De=Oe,tt=250,Ze=0,rt="mousedown.zoom",pt="mousemove.zoom",gt="mouseup.zoom",Dt,Bt="touchstart.zoom",qt,_r=J(sr,"zoomstart","zoom","zoomend"),Kt,tr,ir,wr;wt||(wt="onwheel"in c?(mt=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in c?(mt=function(){return r.event.wheelDelta},"mousewheel"):(mt=function(){return-r.event.detail},"MozMousePixelScroll"));function sr(an){an.on(rt,Zn).on(wt+".zoom",Pn).on("dblclick.zoom",Vn).on(Bt,fn)}sr.event=function(an){an.each(function(){var Tn=_r.of(this,arguments),va=W;mu?r.select(this).transition().each("start.zoom",function(){W=this.__chart__||{x:0,y:0,k:1},In(Tn)}).tween("zoom:zoom",function(){var Fa=Ce[0],Wa=Ce[1],_i=ge?ge[0]:Fa/2,Ii=ge?ge[1]:Wa/2,Xo=r.interpolateZoom([(_i-W.x)/W.k,(Ii-W.y)/W.k,Fa/W.k],[(_i-va.x)/va.k,(Ii-va.y)/va.k,Fa/va.k]);return function(To){var Ao=Xo(To),tl=Fa/Ao[2];this.__chart__=W={x:_i-Ao[0]*tl,y:Ii-Ao[1]*tl,k:tl},ia(Tn)}}).each("interrupt.zoom",function(){Wn(Tn)}).each("end.zoom",function(){Wn(Tn)}):(this.__chart__=W,In(Tn),ia(Tn),Wn(Tn))})},sr.translate=function(an){return arguments.length?(W={x:+an[0],y:+an[1],k:W.k},kn(),sr):[W.x,W.y]},sr.scale=function(an){return arguments.length?(W={x:W.x,y:W.y,k:null},en(+an),kn(),sr):W.k},sr.scaleExtent=function(an){return arguments.length?(De=an==null?Oe:[+an[0],+an[1]],sr):De},sr.center=function(an){return arguments.length?(_e=an&&[+an[0],+an[1]],sr):_e},sr.size=function(an){return arguments.length?(Ce=an&&[+an[0],+an[1]],sr):Ce},sr.duration=function(an){return arguments.length?(tt=+an,sr):tt},sr.x=function(an){return arguments.length?(tr=an,Kt=an.copy(),W={x:0,y:0,k:1},sr):tr},sr.y=function(an){return arguments.length?(wr=an,ir=an.copy(),W={x:0,y:0,k:1},sr):wr};function vr(an){return[(an[0]-W.x)/W.k,(an[1]-W.y)/W.k]}function nn(an){return[an[0]*W.k+W.x,an[1]*W.k+W.y]}function en(an){W.k=Math.max(De[0],Math.min(De[1],an))}function Jr(an,Tn){Tn=nn(Tn),W.x+=an[0]-Tn[0],W.y+=an[1]-Tn[1]}function Yr(an,Tn,va,Fa){an.__chart__={x:W.x,y:W.y,k:W.k},en(Math.pow(2,Fa)),Jr(ge=Tn,va),an=r.select(an),tt>0&&(an=an.transition().duration(tt)),an.call(sr.event)}function kn(){tr&&tr.domain(Kt.range().map(function(an){return(an-W.x)/W.k}).map(Kt.invert)),wr&&wr.domain(ir.range().map(function(an){return(an-W.y)/W.k}).map(ir.invert))}function In(an){Ze++||an({type:"zoomstart"})}function ia(an){kn(),an({type:"zoom",scale:W.k,translate:[W.x,W.y]})}function Wn(an){--Ze||(an({type:"zoomend"}),ge=null)}function Zn(){var an=this,Tn=_r.of(an,arguments),va=0,Fa=r.select(f(an)).on(pt,Ii).on(gt,Xo),Wa=vr(r.mouse(an)),_i=Zt(an);Bh.call(an),In(Tn);function Ii(){va=1,Jr(r.mouse(an),Wa),ia(Tn)}function Xo(){Fa.on(pt,null).on(gt,null),_i(va),Wn(Tn)}}function fn(){var an=this,Tn=_r.of(an,arguments),va={},Fa=0,Wa,_i=".zoom-"+r.event.changedTouches[0].identifier,Ii="touchmove"+_i,Xo="touchend"+_i,To=[],Ao=r.select(an),tl=Zt(an);fs(),In(Tn),Ao.on(rt,null).on(Bt,fs);function hi(){var hl=r.touches(an);return Wa=W.k,hl.forEach(function(Zo){Zo.identifier in va&&(va[Zo.identifier]=vr(Zo))}),hl}function fs(){var hl=r.event.target;r.select(hl).on(Ii,rl).on(Xo,Ap),To.push(hl);for(var Zo=r.event.changedTouches,hs=0,ps=Zo.length;hs<ps;++hs)va[Zo[hs].identifier]=null;var Ns=hi(),Pf=Date.now();if(Ns.length===1){if(Pf-qt<500){var Rf=Ns[0];Yr(an,Rf,va[Rf.identifier],Math.floor(Math.log(W.k)/Math.LN2)+1),Z()}qt=Pf}else if(Ns.length>1){var Rf=Ns[0],Yi=Ns[1],yu=Rf[0]-Yi[0],xv=Rf[1]-Yi[1];Fa=yu*yu+xv*xv}}function rl(){var hl=r.touches(an),Zo,hs,ps,Ns;Bh.call(an);for(var Pf=0,Rf=hl.length;Pf<Rf;++Pf,Ns=null)if(ps=hl[Pf],Ns=va[ps.identifier]){if(hs)break;Zo=ps,hs=Ns}if(Ns){var Yi=(Yi=ps[0]-Zo[0])*Yi+(Yi=ps[1]-Zo[1])*Yi,yu=Fa&&Math.sqrt(Yi/Fa);Zo=[(Zo[0]+ps[0])/2,(Zo[1]+ps[1])/2],hs=[(hs[0]+Ns[0])/2,(hs[1]+Ns[1])/2],en(yu*Wa)}qt=null,Jr(Zo,hs),ia(Tn)}function Ap(){if(r.event.touches.length){for(var hl=r.event.changedTouches,Zo=0,hs=hl.length;Zo<hs;++Zo)delete va[hl[Zo].identifier];for(var ps in va)return void hi()}r.selectAll(To).on(_i,null),Ao.on(rt,Zn).on(Bt,fn),tl(),Wn(Tn)}}function Pn(){var an=_r.of(this,arguments);Dt?clearTimeout(Dt):(Bh.call(this),ue=vr(ge=_e||r.mouse(this)),In(an)),Dt=setTimeout(function(){Dt=null,Wn(an)},50),Z(),en(Math.pow(2,mt()*.002)*W.k),Jr(ge,ue),ia(an)}function Vn(){var an=r.mouse(this),Tn=Math.log(W.k)/Math.LN2;Yr(this,an,vr(an),r.event.shiftKey?Math.ceil(Tn)-1:Math.floor(Tn)+1)}return r.rebind(sr,_r,"on")};var Oe=[0,1/0],mt,wt;r.color=yt;function yt(){}yt.prototype.toString=function(){return this.rgb()+""},r.hsl=St;function St(W,ue,ge){return this instanceof St?(this.h=+W,this.s=+ue,void(this.l=+ge)):arguments.length<2?W instanceof St?new St(W.h,W.s,W.l):ln(""+W,cn,St):new St(W,ue,ge)}var kt=St.prototype=new yt;kt.brighter=function(W){return W=Math.pow(.7,arguments.length?W:1),new St(this.h,this.s,this.l/W)},kt.darker=function(W){return W=Math.pow(.7,arguments.length?W:1),new St(this.h,this.s,W*this.l)},kt.rgb=function(){return Rt(this.h,this.s,this.l)};function Rt(W,ue,ge){var _e,Ce;W=isNaN(W)?0:(W%=360)<0?W+360:W,ue=isNaN(ue)||ue<0?0:ue>1?1:ue,ge=ge<0?0:ge>1?1:ge,Ce=ge<=.5?ge*(1+ue):ge+ue-ge*ue,_e=2*ge-Ce;function De(Ze){return Ze>360?Ze-=360:Ze<0&&(Ze+=360),Ze<60?_e+(Ce-_e)*Ze/60:Ze<180?Ce:Ze<240?_e+(Ce-_e)*(240-Ze)/60:_e}function tt(Ze){return Math.round(De(Ze)*255)}return new xr(tt(W+120),tt(W),tt(W-120))}r.hcl=zt;function zt(W,ue,ge){return this instanceof zt?(this.h=+W,this.c=+ue,void(this.l=+ge)):arguments.length<2?W instanceof zt?new zt(W.h,W.c,W.l):W instanceof Vt?hn(W.l,W.a,W.b):hn((W=Zr((W=r.rgb(W)).r,W.g,W.b)).l,W.a,W.b):new zt(W,ue,ge)}var Xt=zt.prototype=new yt;Xt.brighter=function(W){return new zt(this.h,this.c,Math.min(100,this.l+cr*(arguments.length?W:1)))},Xt.darker=function(W){return new zt(this.h,this.c,Math.max(0,this.l-cr*(arguments.length?W:1)))},Xt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()};function Yt(W,ue,ge){return isNaN(W)&&(W=0),isNaN(ue)&&(ue=0),new Vt(ge,Math.cos(W*=Ie)*ue,Math.sin(W)*ue)}r.lab=Vt;function Vt(W,ue,ge){return this instanceof Vt?(this.l=+W,this.a=+ue,void(this.b=+ge)):arguments.length<2?W instanceof Vt?new Vt(W.l,W.a,W.b):W instanceof zt?Yt(W.h,W.c,W.l):Zr((W=xr(W)).r,W.g,W.b):new Vt(W,ue,ge)}var cr=18,Or=.95047,kr=1,Sr=1.08883,vn=Vt.prototype=new yt;vn.brighter=function(W){return new Vt(Math.min(100,this.l+cr*(arguments.length?W:1)),this.a,this.b)},vn.darker=function(W){return new Vt(Math.max(0,this.l-cr*(arguments.length?W:1)),this.a,this.b)},vn.rgb=function(){return Rn(this.l,this.a,this.b)};function Rn(W,ue,ge){var _e=(W+16)/116,Ce=_e+ue/500,De=_e-ge/200;return Ce=An(Ce)*Or,_e=An(_e)*kr,De=An(De)*Sr,new xr(Mr(3.2404542*Ce-1.5371385*_e-.4985314*De),Mr(-.969266*Ce+1.8760108*_e+.041556*De),Mr(.0556434*Ce-.2040259*_e+1.0572252*De))}function hn(W,ue,ge){return W>0?new zt(Math.atan2(ge,ue)*He,Math.sqrt(ue*ue+ge*ge),W):new zt(NaN,NaN,W)}function An(W){return W>.206893034?W*W*W:(W-4/29)/7.787037}function En(W){return W>.008856?Math.pow(W,1/3):7.787037*W+4/29}function Mr(W){return Math.round(255*(W<=.00304?12.92*W:1.055*Math.pow(W,1/2.4)-.055))}r.rgb=xr;function xr(W,ue,ge){return this instanceof xr?(this.r=~~W,this.g=~~ue,void(this.b=~~ge)):arguments.length<2?W instanceof xr?new xr(W.r,W.g,W.b):ln(""+W,xr,Rt):new xr(W,ue,ge)}function dn(W){return new xr(W>>16,W>>8&255,W&255)}function qr(W){return dn(W)+""}var on=xr.prototype=new yt;on.brighter=function(W){W=Math.pow(.7,arguments.length?W:1);var ue=this.r,ge=this.g,_e=this.b,Ce=30;return!ue&&!ge&&!_e?new xr(Ce,Ce,Ce):(ue&&ue<Ce&&(ue=Ce),ge&&ge<Ce&&(ge=Ce),_e&&_e<Ce&&(_e=Ce),new xr(Math.min(255,ue/W),Math.min(255,ge/W),Math.min(255,_e/W)))},on.darker=function(W){return W=Math.pow(.7,arguments.length?W:1),new xr(W*this.r,W*this.g,W*this.b)},on.hsl=function(){return cn(this.r,this.g,this.b)},on.toString=function(){return"#"+Vr(this.r)+Vr(this.g)+Vr(this.b)};function Vr(W){return W<16?"0"+Math.max(0,W).toString(16):Math.min(255,W).toString(16)}function ln(W,ue,ge){var _e=0,Ce=0,De=0,tt,Ze,rt;if(tt=/([a-z]+)\((.*)\)/.exec(W=W.toLowerCase()),tt)switch(Ze=tt[2].split(","),tt[1]){case"hsl":return ge(parseFloat(Ze[0]),parseFloat(Ze[1])/100,parseFloat(Ze[2])/100);case"rgb":return ue(Nt(Ze[0]),Nt(Ze[1]),Nt(Ze[2]))}return(rt=rr.get(W))?ue(rt.r,rt.g,rt.b):(W!=null&&W.charAt(0)==="#"&&!isNaN(rt=parseInt(W.slice(1),16))&&(W.length===4?(_e=(rt&3840)>>4,_e=_e>>4|_e,Ce=rt&240,Ce=Ce>>4|Ce,De=rt&15,De=De<<4|De):W.length===7&&(_e=(rt&16711680)>>16,Ce=(rt&65280)>>8,De=rt&255)),ue(_e,Ce,De))}function cn(W,ue,ge){var _e=Math.min(W/=255,ue/=255,ge/=255),Ce=Math.max(W,ue,ge),De=Ce-_e,tt,Ze,rt=(Ce+_e)/2;return De?(Ze=rt<.5?De/(Ce+_e):De/(2-Ce-_e),W==Ce?tt=(ue-ge)/De+(ue<ge?6:0):ue==Ce?tt=(ge-W)/De+2:tt=(W-ue)/De+4,tt*=60):(tt=NaN,Ze=rt>0&&rt<1?0:tt),new St(tt,Ze,rt)}function Zr(W,ue,ge){W=ht(W),ue=ht(ue),ge=ht(ge);var _e=En((.4124564*W+.3575761*ue+.1804375*ge)/Or),Ce=En((.2126729*W+.7151522*ue+.072175*ge)/kr),De=En((.0193339*W+.119192*ue+.9503041*ge)/Sr);return Vt(116*Ce-16,500*(_e-Ce),200*(Ce-De))}function ht(W){return(W/=255)<=.04045?W/12.92:Math.pow((W+.055)/1.055,2.4)}function Nt(W){var ue=parseFloat(W);return W.charAt(W.length-1)==="%"?Math.round(ue*2.55):ue}var rr=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});rr.forEach(function(W,ue){rr.set(W,dn(ue))});function mr(W){return typeof W=="function"?W:function(){return W}}r.functor=mr,r.xhr=Rr(G);function Rr(W){return function(ue,ge,_e){return arguments.length===2&&typeof ge=="function"&&(_e=ge,ge=null),Er(ue,ge,W,_e)}}function Er(W,ue,ge,_e){var Ce={},De=r.dispatch("beforesend","progress","load","error"),tt={},Ze=new XMLHttpRequest,rt=null;this.XDomainRequest&&!("withCredentials"in Ze)&&/^(http(s)?:)?\/\//.test(W)&&(Ze=new XDomainRequest),"onload"in Ze?Ze.onload=Ze.onerror=pt:Ze.onreadystatechange=function(){Ze.readyState>3&&pt()};function pt(){var gt=Ze.status,Dt;if(!gt&&Lr(Ze)||gt>=200&&gt<300||gt===304){try{Dt=ge.call(Ce,Ze)}catch(Bt){De.error.call(Ce,Bt);return}De.load.call(Ce,Dt)}else De.error.call(Ce,Ze)}return Ze.onprogress=function(gt){var Dt=r.event;r.event=gt;try{De.progress.call(Ce,Ze)}finally{r.event=Dt}},Ce.header=function(gt,Dt){return gt=(gt+"").toLowerCase(),arguments.length<2?tt[gt]:(Dt==null?delete tt[gt]:tt[gt]=Dt+"",Ce)},Ce.mimeType=function(gt){return arguments.length?(ue=gt==null?null:gt+"",Ce):ue},Ce.responseType=function(gt){return arguments.length?(rt=gt,Ce):rt},Ce.response=function(gt){return ge=gt,Ce},["get","post"].forEach(function(gt){Ce[gt]=function(){return Ce.send.apply(Ce,[gt].concat(u(arguments)))}}),Ce.send=function(gt,Dt,Bt){if(arguments.length===2&&typeof Dt=="function"&&(Bt=Dt,Dt=null),Ze.open(gt,W,!0),ue!=null&&!("accept"in tt)&&(tt.accept=ue+",*/*"),Ze.setRequestHeader)for(var qt in tt)Ze.setRequestHeader(qt,tt[qt]);return ue!=null&&Ze.overrideMimeType&&Ze.overrideMimeType(ue),rt!=null&&(Ze.responseType=rt),Bt!=null&&Ce.on("error",Bt).on("load",function(_r){Bt(null,_r)}),De.beforesend.call(Ce,Ze),Ze.send(Dt==null?null:Dt),Ce},Ce.abort=function(){return Ze.abort(),Ce},r.rebind(Ce,De,"on"),_e==null?Ce:Ce.get(Br(_e))}function Br(W){return W.length===1?function(ue,ge){W(ue==null?ge:null)}:W}function Lr(W){var ue=W.responseType;return ue&&ue!=="text"?W.response:W.responseText}r.dsv=function(W,ue){var ge=new RegExp('["'+W+`
]`),_e=W.charCodeAt(0);function Ce(pt,gt,Dt){arguments.length<3&&(Dt=gt,gt=null);var Bt=Er(pt,ue,gt==null?De:tt(gt),Dt);return Bt.row=function(qt){return arguments.length?Bt.response((gt=qt)==null?De:tt(qt)):gt},Bt}function De(pt){return Ce.parse(pt.responseText)}function tt(pt){return function(gt){return Ce.parse(gt.responseText,pt)}}Ce.parse=function(pt,gt){var Dt;return Ce.parseRows(pt,function(Bt,qt){if(Dt)return Dt(Bt,qt-1);var _r=new Function("d","return {"+Bt.map(function(Kt,tr){return JSON.stringify(Kt)+": d["+tr+"]"}).join(",")+"}");Dt=gt?function(Kt,tr){return gt(_r(Kt),tr)}:_r})},Ce.parseRows=function(pt,gt){var Dt={},Bt={},qt=[],_r=pt.length,Kt=0,tr=0,ir,wr;function sr(){if(Kt>=_r)return Bt;if(wr)return wr=!1,Dt;var nn=Kt;if(pt.charCodeAt(nn)===34){for(var en=nn;en++<_r;)if(pt.charCodeAt(en)===34){if(pt.charCodeAt(en+1)!==34)break;++en}Kt=en+2;var Jr=pt.charCodeAt(en+1);return Jr===13?(wr=!0,pt.charCodeAt(en+2)===10&&++Kt):Jr===10&&(wr=!0),pt.slice(nn+1,en).replace(/""/g,'"')}for(;Kt<_r;){var Jr=pt.charCodeAt(Kt++),Yr=1;if(Jr===10)wr=!0;else if(Jr===13)wr=!0,pt.charCodeAt(Kt)===10&&(++Kt,++Yr);else if(Jr!==_e)continue;return pt.slice(nn,Kt-Yr)}return pt.slice(nn)}for(;(ir=sr())!==Bt;){for(var vr=[];ir!==Dt&&ir!==Bt;)vr.push(ir),ir=sr();gt&&(vr=gt(vr,tr++))==null||qt.push(vr)}return qt},Ce.format=function(pt){if(Array.isArray(pt[0]))return Ce.formatRows(pt);var gt=new N,Dt=[];return pt.forEach(function(Bt){for(var qt in Bt)gt.has(qt)||Dt.push(gt.add(qt))}),[Dt.map(rt).join(W)].concat(pt.map(function(Bt){return Dt.map(function(qt){return rt(Bt[qt])}).join(W)})).join(`
`)},Ce.formatRows=function(pt){return pt.map(Ze).join(`
`)};function Ze(pt){return pt.map(rt).join(W)}function rt(pt){return ge.test(pt)?'"'+pt.replace(/\"/g,'""')+'"':pt}return Ce},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("	","text/tab-separated-values");var pn,On,Fn,Qn,ya=this[Y(this,"requestAnimationFrame")]||function(W){setTimeout(W,17)};r.timer=function(){Sa.apply(this,arguments)};function Sa(W,ue,ge){var _e=arguments.length;_e<2&&(ue=0),_e<3&&(ge=Date.now());var Ce=ge+ue,De={c:W,t:Ce,n:null};return On?On.n=De:pn=De,On=De,Fn||(Qn=clearTimeout(Qn),Fn=1,ya(ar)),De}function ar(){var W=Wr(),ue=Fr()-W;ue>24?(isFinite(ue)&&(clearTimeout(Qn),Qn=setTimeout(ar,ue)),Fn=0):(Fn=1,ya(ar))}r.timer.flush=function(){Wr(),Fr()};function Wr(){for(var W=Date.now(),ue=pn;ue;)W>=ue.t&&ue.c(W-ue.t)&&(ue.c=null),ue=ue.n;return W}function Fr(){for(var W,ue=pn,ge=1/0;ue;)ue.c?(ue.t<ge&&(ge=ue.t),ue=(W=ue).n):ue=W?W.n=ue.n:pn=ue.n;return On=W,ge}function yn(W,ue){return ue-(W?Math.ceil(Math.log(W)/Math.LN10):1)}r.round=function(W,ue){return ue?Math.round(W*(ue=Math.pow(10,ue)))/ue:Math.round(W)};var Sn=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"].map(aa);r.formatPrefix=function(W,ue){var ge=0;return(W=+W)&&(W<0&&(W*=-1),ue&&(W=r.round(W,yn(W,ue))),ge=1+Math.floor(1e-12+Math.log(W)/Math.LN10),ge=Math.max(-24,Math.min(24,Math.floor((ge-1)/3)*3))),Sn[8+ge/3]};function aa(W,ue){var ge=Math.pow(10,x(8-ue)*3);return{scale:ue>8?function(_e){return _e/ge}:function(_e){return _e*ge},symbol:W}}function Xn(W){var ue=W.decimal,ge=W.thousands,_e=W.grouping,Ce=W.currency,De=_e&&ge?function(tt,Ze){for(var rt=tt.length,pt=[],gt=0,Dt=_e[0],Bt=0;rt>0&&Dt>0&&(Bt+Dt+1>Ze&&(Dt=Math.max(1,Ze-Bt)),pt.push(tt.substring(rt-=Dt,rt+Dt)),!((Bt+=Dt+1)>Ze));)Dt=_e[gt=(gt+1)%_e.length];return pt.reverse().join(ge)}:G;return function(tt){var Ze=ra.exec(tt),rt=Ze[1]||" ",pt=Ze[2]||">",gt=Ze[3]||"-",Dt=Ze[4]||"",Bt=Ze[5],qt=+Ze[6],_r=Ze[7],Kt=Ze[8],tr=Ze[9],ir=1,wr="",sr="",vr=!1,nn=!0;switch(Kt&&(Kt=+Kt.substring(1)),(Bt||rt==="0"&&pt==="=")&&(Bt=rt="0",pt="="),tr){case"n":_r=!0,tr="g";break;case"%":ir=100,sr="%",tr="f";break;case"p":ir=100,sr="%",tr="r";break;case"b":case"o":case"x":case"X":Dt==="#"&&(wr="0"+tr.toLowerCase());case"c":nn=!1;case"d":vr=!0,Kt=0;break;case"s":ir=-1,tr="r";break}Dt==="$"&&(wr=Ce[0],sr=Ce[1]),tr=="r"&&!Kt&&(tr="g"),Kt!=null&&(tr=="g"?Kt=Math.max(1,Math.min(21,Kt)):(tr=="e"||tr=="f")&&(Kt=Math.max(0,Math.min(20,Kt)))),tr=na.get(tr)||ba;var en=Bt&&_r;return function(Jr){var Yr=sr;if(vr&&Jr%1)return"";var kn=Jr<0||Jr===0&&1/Jr<0?(Jr=-Jr,"-"):gt==="-"?"":gt;if(ir<0){var In=r.formatPrefix(Jr,Kt);Jr=In.scale(Jr),Yr=In.symbol+sr}else Jr*=ir;Jr=tr(Jr,Kt);var ia=Jr.lastIndexOf("."),Wn,Zn;if(ia<0){var fn=nn?Jr.lastIndexOf("e"):-1;fn<0?(Wn=Jr,Zn=""):(Wn=Jr.substring(0,fn),Zn=Jr.substring(fn))}else Wn=Jr.substring(0,ia),Zn=ue+Jr.substring(ia+1);!Bt&&_r&&(Wn=De(Wn,1/0));var Pn=wr.length+Wn.length+Zn.length+(en?0:kn.length),Vn=Pn<qt?new Array(Pn=qt-Pn+1).join(rt):"";return en&&(Wn=De(Vn+Wn,Vn.length?qt-Zn.length:1/0)),kn+=wr,Jr=Wn+Zn,(pt==="<"?kn+Jr+Vn:pt===">"?Vn+kn+Jr:pt==="^"?Vn.substring(0,Pn>>=1)+kn+Jr+Vn.substring(Pn):kn+(en?Jr:Vn+Jr))+Yr}}}var ra=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,na=r.map({b:function(W){return W.toString(2)},c:function(W){return String.fromCharCode(W)},o:function(W){return W.toString(8)},x:function(W){return W.toString(16)},X:function(W){return W.toString(16).toUpperCase()},g:function(W,ue){return W.toPrecision(ue)},e:function(W,ue){return W.toExponential(ue)},f:function(W,ue){return W.toFixed(ue)},r:function(W,ue){return(W=r.round(W,yn(W,ue))).toFixed(Math.max(0,Math.min(20,yn(W*(1+1e-15),ue))))}});function ba(W){return W+""}var Ut=r.time={},lr=Date;function Ir(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ir.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Kr.setUTCDate.apply(this._,arguments)},setDay:function(){Kr.setUTCDay.apply(this._,arguments)},setFullYear:function(){Kr.setUTCFullYear.apply(this._,arguments)},setHours:function(){Kr.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Kr.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Kr.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Kr.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Kr.setUTCSeconds.apply(this._,arguments)},setTime:function(){Kr.setTime.apply(this._,arguments)}};var Kr=Date.prototype;function Ur(W,ue,ge){function _e(pt){var gt=W(pt),Dt=De(gt,1);return pt-gt<Dt-pt?gt:Dt}function Ce(pt){return ue(pt=W(new lr(pt-1)),1),pt}function De(pt,gt){return ue(pt=new lr(+pt),gt),pt}function tt(pt,gt,Dt){var Bt=Ce(pt),qt=[];if(Dt>1)for(;Bt<gt;)ge(Bt)%Dt||qt.push(new Date(+Bt)),ue(Bt,1);else for(;Bt<gt;)qt.push(new Date(+Bt)),ue(Bt,1);return qt}function Ze(pt,gt,Dt){try{lr=Ir;var Bt=new Ir;return Bt._=pt,tt(Bt,gt,Dt)}finally{lr=Date}}W.floor=W,W.round=_e,W.ceil=Ce,W.offset=De,W.range=tt;var rt=W.utc=Gr(W);return rt.floor=rt,rt.round=Gr(_e),rt.ceil=Gr(Ce),rt.offset=Gr(De),rt.range=Ze,W}function Gr(W){return function(ue,ge){try{lr=Ir;var _e=new Ir;return _e._=ue,W(_e,ge)._}finally{lr=Date}}}Ut.year=Ur(function(W){return W=Ut.day(W),W.setMonth(0,1),W},function(W,ue){W.setFullYear(W.getFullYear()+ue)},function(W){return W.getFullYear()}),Ut.years=Ut.year.range,Ut.years.utc=Ut.year.utc.range,Ut.day=Ur(function(W){var ue=new lr(2e3,0);return ue.setFullYear(W.getFullYear(),W.getMonth(),W.getDate()),ue},function(W,ue){W.setDate(W.getDate()+ue)},function(W){return W.getDate()-1}),Ut.days=Ut.day.range,Ut.days.utc=Ut.day.utc.range,Ut.dayOfYear=function(W){var ue=Ut.year(W);return Math.floor((W-ue-(W.getTimezoneOffset()-ue.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(W,ue){ue=7-ue;var ge=Ut[W]=Ur(function(_e){return(_e=Ut.day(_e)).setDate(_e.getDate()-(_e.getDay()+ue)%7),_e},function(_e,Ce){_e.setDate(_e.getDate()+Math.floor(Ce)*7)},function(_e){var Ce=Ut.year(_e).getDay();return Math.floor((Ut.dayOfYear(_e)+(Ce+ue)%7)/7)-(Ce!==ue)});Ut[W+"s"]=ge.range,Ut[W+"s"].utc=ge.utc.range,Ut[W+"OfYear"]=function(_e){var Ce=Ut.year(_e).getDay();return Math.floor((Ut.dayOfYear(_e)+(Ce+ue)%7)/7)}}),Ut.week=Ut.sunday,Ut.weeks=Ut.sunday.range,Ut.weeks.utc=Ut.sunday.utc.range,Ut.weekOfYear=Ut.sundayOfYear;function $r(W){var ue=W.dateTime,ge=W.date,_e=W.time,Ce=W.periods,De=W.days,tt=W.shortDays,Ze=W.months,rt=W.shortMonths;function pt(fn){var Pn=fn.length;function Vn(an){for(var Tn=[],va=-1,Fa=0,Wa,_i,Ii;++va<Pn;)fn.charCodeAt(va)===37&&(Tn.push(fn.slice(Fa,va)),(_i=Hr[Wa=fn.charAt(++va)])!=null&&(Wa=fn.charAt(++va)),(Ii=vr[Wa])&&(Wa=Ii(an,_i==null?Wa==="e"?" ":"0":_i)),Tn.push(Wa),Fa=va+1);return Tn.push(fn.slice(Fa,va)),Tn.join("")}return Vn.parse=function(an){var Tn={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},va=gt(Tn,fn,an,0);if(va!=an.length)return null;"p"in Tn&&(Tn.H=Tn.H%12+Tn.p*12);var Fa=Tn.Z!=null&&lr!==Ir,Wa=new(Fa?Ir:lr);return"j"in Tn?Wa.setFullYear(Tn.y,0,Tn.j):"W"in Tn||"U"in Tn?("w"in Tn||(Tn.w="W"in Tn?1:0),Wa.setFullYear(Tn.y,0,1),Wa.setFullYear(Tn.y,0,"W"in Tn?(Tn.w+6)%7+Tn.W*7-(Wa.getDay()+5)%7:Tn.w+Tn.U*7-(Wa.getDay()+6)%7)):Wa.setFullYear(Tn.y,Tn.m,Tn.d),Wa.setHours(Tn.H+(Tn.Z/100|0),Tn.M+Tn.Z%100,Tn.S,Tn.L),Fa?Wa._:Wa},Vn.toString=function(){return fn},Vn}function gt(fn,Pn,Vn,an){for(var Tn,va,Fa,Wa=0,_i=Pn.length,Ii=Vn.length;Wa<_i;){if(an>=Ii)return-1;if(Tn=Pn.charCodeAt(Wa++),Tn===37){if(Fa=Pn.charAt(Wa++),va=nn[Fa in Hr?Pn.charAt(Wa++):Fa],!va||(an=va(fn,Vn,an))<0)return-1}else if(Tn!=Vn.charCodeAt(an++))return-1}return an}pt.utc=function(fn){var Pn=pt(fn);function Vn(an){try{lr=Ir;var Tn=new lr;return Tn._=an,Pn(Tn)}finally{lr=Date}}return Vn.parse=function(an){try{lr=Ir;var Tn=Pn.parse(an);return Tn&&Tn._}finally{lr=Date}},Vn.toString=Pn.toString,Vn},pt.multi=pt.utc.multi=ku;var Dt=r.map(),Bt=Mn(De),qt=Cn(De),_r=Mn(tt),Kt=Cn(tt),tr=Mn(Ze),ir=Cn(Ze),wr=Mn(rt),sr=Cn(rt);Ce.forEach(function(fn,Pn){Dt.set(fn.toLowerCase(),Pn)});var vr={a:function(fn){return tt[fn.getDay()]},A:function(fn){return De[fn.getDay()]},b:function(fn){return rt[fn.getMonth()]},B:function(fn){return Ze[fn.getMonth()]},c:pt(ue),d:function(fn,Pn){return hr(fn.getDate(),Pn,2)},e:function(fn,Pn){return hr(fn.getDate(),Pn,2)},H:function(fn,Pn){return hr(fn.getHours(),Pn,2)},I:function(fn,Pn){return hr(fn.getHours()%12||12,Pn,2)},j:function(fn,Pn){return hr(1+Ut.dayOfYear(fn),Pn,3)},L:function(fn,Pn){return hr(fn.getMilliseconds(),Pn,3)},m:function(fn,Pn){return hr(fn.getMonth()+1,Pn,2)},M:function(fn,Pn){return hr(fn.getMinutes(),Pn,2)},p:function(fn){return Ce[+(fn.getHours()>=12)]},S:function(fn,Pn){return hr(fn.getSeconds(),Pn,2)},U:function(fn,Pn){return hr(Ut.sundayOfYear(fn),Pn,2)},w:function(fn){return fn.getDay()},W:function(fn,Pn){return hr(Ut.mondayOfYear(fn),Pn,2)},x:pt(ge),X:pt(_e),y:function(fn,Pn){return hr(fn.getFullYear()%100,Pn,2)},Y:function(fn,Pn){return hr(fn.getFullYear()%1e4,Pn,4)},Z:ru,"%":function(){return"%"}},nn={a:en,A:Jr,b:Yr,B:kn,c:In,d:No,e:No,H:eu,I:eu,j:co,L:tu,m:Va,M:Bo,p:Zn,S:Qu,U:sa,w:jn,W:Un,x:ia,X:Wn,y:Ga,Y:Ea,Z:ai,"%":uf};function en(fn,Pn,Vn){_r.lastIndex=0;var an=_r.exec(Pn.slice(Vn));return an?(fn.w=Kt.get(an[0].toLowerCase()),Vn+an[0].length):-1}function Jr(fn,Pn,Vn){Bt.lastIndex=0;var an=Bt.exec(Pn.slice(Vn));return an?(fn.w=qt.get(an[0].toLowerCase()),Vn+an[0].length):-1}function Yr(fn,Pn,Vn){wr.lastIndex=0;var an=wr.exec(Pn.slice(Vn));return an?(fn.m=sr.get(an[0].toLowerCase()),Vn+an[0].length):-1}function kn(fn,Pn,Vn){tr.lastIndex=0;var an=tr.exec(Pn.slice(Vn));return an?(fn.m=ir.get(an[0].toLowerCase()),Vn+an[0].length):-1}function In(fn,Pn,Vn){return gt(fn,vr.c.toString(),Pn,Vn)}function ia(fn,Pn,Vn){return gt(fn,vr.x.toString(),Pn,Vn)}function Wn(fn,Pn,Vn){return gt(fn,vr.X.toString(),Pn,Vn)}function Zn(fn,Pn,Vn){var an=Dt.get(Pn.slice(Vn,Vn+=2).toLowerCase());return an==null?-1:(fn.p=an,Vn)}return pt}var Hr={"-":"",_:" ",0:"0"},fr=/^\s*\d+/,Tr=/^%/;function hr(W,ue,ge){var _e=W<0?"-":"",Ce=(_e?-W:W)+"",De=Ce.length;return _e+(De<ge?new Array(ge-De+1).join(ue)+Ce:Ce)}function Mn(W){return new RegExp("^(?:"+W.map(r.requote).join("|")+")","i")}function Cn(W){for(var ue=new T,ge=-1,_e=W.length;++ge<_e;)ue.set(W[ge].toLowerCase(),ge);return ue}function jn(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+1));return _e?(W.w=+_e[0],ge+_e[0].length):-1}function sa(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge));return _e?(W.U=+_e[0],ge+_e[0].length):-1}function Un(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge));return _e?(W.W=+_e[0],ge+_e[0].length):-1}function Ea(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+4));return _e?(W.y=+_e[0],ge+_e[0].length):-1}function Ga(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+2));return _e?(W.y=Ma(+_e[0]),ge+_e[0].length):-1}function ai(W,ue,ge){return/^[+-]\d{4}$/.test(ue=ue.slice(ge,ge+5))?(W.Z=-ue,ge+5):-1}function Ma(W){return W+(W>68?1900:2e3)}function Va(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+2));return _e?(W.m=_e[0]-1,ge+_e[0].length):-1}function No(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+2));return _e?(W.d=+_e[0],ge+_e[0].length):-1}function co(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+3));return _e?(W.j=+_e[0],ge+_e[0].length):-1}function eu(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+2));return _e?(W.H=+_e[0],ge+_e[0].length):-1}function Bo(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+2));return _e?(W.M=+_e[0],ge+_e[0].length):-1}function Qu(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+2));return _e?(W.S=+_e[0],ge+_e[0].length):-1}function tu(W,ue,ge){fr.lastIndex=0;var _e=fr.exec(ue.slice(ge,ge+3));return _e?(W.L=+_e[0],ge+_e[0].length):-1}function ru(W){var ue=W.getTimezoneOffset(),ge=ue>0?"-":"+",_e=x(ue)/60|0,Ce=x(ue)%60;return ge+hr(_e,"0",2)+hr(Ce,"0",2)}function uf(W,ue,ge){Tr.lastIndex=0;var _e=Tr.exec(ue.slice(ge,ge+1));return _e?ge+_e[0].length:-1}function ku(W){for(var ue=W.length,ge=-1;++ge<ue;)W[ge][0]=this(W[ge][0]);return function(_e){for(var Ce=0,De=W[Ce];!De[1](_e);)De=W[++Ce];return De[0](_e)}}r.locale=function(W){return{numberFormat:Xn(W),timeFormat:$r(W)}};var Ji=r.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});r.format=Ji.numberFormat,r.geo={};function zl(){}zl.prototype={s:0,t:0,add:function(W){sp(W,this.t,ki),sp(ki.s,this.s,this),this.s?this.t+=ki.t:this.s=ki.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ki=new zl;function sp(W,ue,ge){var _e=ge.s=W+ue,Ce=_e-W,De=_e-Ce;ge.t=W-De+(ue-Ce)}r.geo.stream=function(W,ue){W&&bh.hasOwnProperty(W.type)?bh[W.type](W,ue):nu(W,ue)};function nu(W,ue){W&&au.hasOwnProperty(W.type)&&au[W.type](W,ue)}var bh={Feature:function(W,ue){nu(W.geometry,ue)},FeatureCollection:function(W,ue){for(var ge=W.features,_e=-1,Ce=ge.length;++_e<Ce;)nu(ge[_e].geometry,ue)}},au={Sphere:function(W,ue){ue.sphere()},Point:function(W,ue){W=W.coordinates,ue.point(W[0],W[1],W[2])},MultiPoint:function(W,ue){for(var ge=W.coordinates,_e=-1,Ce=ge.length;++_e<Ce;)W=ge[_e],ue.point(W[0],W[1],W[2])},LineString:function(W,ue){Fl(W.coordinates,ue,0)},MultiLineString:function(W,ue){for(var ge=W.coordinates,_e=-1,Ce=ge.length;++_e<Ce;)Fl(ge[_e],ue,0)},Polygon:function(W,ue){Su(W.coordinates,ue)},MultiPolygon:function(W,ue){for(var ge=W.coordinates,_e=-1,Ce=ge.length;++_e<Ce;)Su(ge[_e],ue)},GeometryCollection:function(W,ue){for(var ge=W.geometries,_e=-1,Ce=ge.length;++_e<Ce;)nu(ge[_e],ue)}};function Fl(W,ue,ge){var _e=-1,Ce=W.length-ge,De;for(ue.lineStart();++_e<Ce;)De=W[_e],ue.point(De[0],De[1],De[2]);ue.lineEnd()}function Su(W,ue){var ge=-1,_e=W.length;for(ue.polygonStart();++ge<_e;)Fl(W[ge],ue,1);ue.polygonEnd()}r.geo.area=function(W){return iu=0,r.geo.stream(W,ds),iu};var iu,Ss=new zl,ds={sphere:function(){iu+=4*Le},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Ss.reset(),ds.lineStart=Cu},polygonEnd:function(){var W=2*Ss;iu+=W<0?4*Le+W:W,ds.lineStart=ds.lineEnd=ds.point=B}};function Cu(){var W,ue,ge,_e,Ce;ds.point=function(tt,Ze){ds.point=De,ge=(W=tt)*Ie,_e=Math.cos(Ze=(ue=Ze)*Ie/2+Le/4),Ce=Math.sin(Ze)};function De(tt,Ze){tt*=Ie,Ze=Ze*Ie/2+Le/4;var rt=tt-ge,pt=rt>=0?1:-1,gt=pt*rt,Dt=Math.cos(Ze),Bt=Math.sin(Ze),qt=Ce*Bt,_r=_e*Dt+qt*Math.cos(gt),Kt=qt*pt*Math.sin(gt);Ss.add(Math.atan2(Kt,_r)),ge=tt,_e=Dt,Ce=Bt}ds.lineEnd=function(){De(W,ue)}}function ou(W){var ue=W[0],ge=W[1],_e=Math.cos(ge);return[_e*Math.cos(ue),_e*Math.sin(ue),Math.sin(ge)]}function xl(W,ue){return W[0]*ue[0]+W[1]*ue[1]+W[2]*ue[2]}function Hs(W,ue){return[W[1]*ue[2]-W[2]*ue[1],W[2]*ue[0]-W[0]*ue[2],W[0]*ue[1]-W[1]*ue[0]]}function Sc(W,ue){W[0]+=ue[0],W[1]+=ue[1],W[2]+=ue[2]}function qu(W,ue){return[W[0]*ue,W[1]*ue,W[2]*ue]}function xi(W){var ue=Math.sqrt(W[0]*W[0]+W[1]*W[1]+W[2]*W[2]);W[0]/=ue,W[1]/=ue,W[2]/=ue}function bl(W){return[Math.atan2(W[1],W[0]),Ge(W[2])]}function Gf(W,ue){return x(W[0]-ue[0])<ot&&x(W[1]-ue[1])<ot}r.geo.bounds=function(){var W,ue,ge,_e,Ce,De,tt,Ze,rt,pt,gt,Dt={point:Bt,lineStart:_r,lineEnd:Kt,polygonStart:function(){Dt.point=tr,Dt.lineStart=ir,Dt.lineEnd=wr,rt=0,ds.polygonStart()},polygonEnd:function(){ds.polygonEnd(),Dt.point=Bt,Dt.lineStart=_r,Dt.lineEnd=Kt,Ss<0?(W=-(ge=180),ue=-(_e=90)):rt>ot?_e=90:rt<-ot&&(ue=-90),gt[0]=W,gt[1]=ge}};function Bt(en,Jr){pt.push(gt=[W=en,ge=en]),Jr<ue&&(ue=Jr),Jr>_e&&(_e=Jr)}function qt(en,Jr){var Yr=ou([en*Ie,Jr*Ie]);if(Ze){var kn=Hs(Ze,Yr),In=[kn[1],-kn[0],0],ia=Hs(In,kn);xi(ia),ia=bl(ia);var Wn=en-Ce,Zn=Wn>0?1:-1,fn=ia[0]*He*Zn,Pn=x(Wn)>180;if(Pn^(Zn*Ce<fn&&fn<Zn*en)){var Vn=ia[1]*He;Vn>_e&&(_e=Vn)}else if(fn=(fn+360)%360-180,Pn^(Zn*Ce<fn&&fn<Zn*en)){var Vn=-ia[1]*He;Vn<ue&&(ue=Vn)}else Jr<ue&&(ue=Jr),Jr>_e&&(_e=Jr);Pn?en<Ce?sr(W,en)>sr(W,ge)&&(ge=en):sr(en,ge)>sr(W,ge)&&(W=en):ge>=W?(en<W&&(W=en),en>ge&&(ge=en)):en>Ce?sr(W,en)>sr(W,ge)&&(ge=en):sr(en,ge)>sr(W,ge)&&(W=en)}else Bt(en,Jr);Ze=Yr,Ce=en}function _r(){Dt.point=qt}function Kt(){gt[0]=W,gt[1]=ge,Dt.point=Bt,Ze=null}function tr(en,Jr){if(Ze){var Yr=en-Ce;rt+=x(Yr)>180?Yr+(Yr>0?360:-360):Yr}else De=en,tt=Jr;ds.point(en,Jr),qt(en,Jr)}function ir(){ds.lineStart()}function wr(){tr(De,tt),ds.lineEnd(),x(rt)>ot&&(W=-(ge=180)),gt[0]=W,gt[1]=ge,Ze=null}function sr(en,Jr){return(Jr-=en)<0?Jr+360:Jr}function vr(en,Jr){return en[0]-Jr[0]}function nn(en,Jr){return Jr[0]<=Jr[1]?Jr[0]<=en&&en<=Jr[1]:en<Jr[0]||Jr[1]<en}return function(en){_e=ge=-(W=ue=1/0),pt=[],r.geo.stream(en,Dt);var Jr=pt.length;if(Jr){pt.sort(vr);for(var Yr=1,kn=pt[0],In,ia=[kn];Yr<Jr;++Yr)In=pt[Yr],nn(In[0],kn)||nn(In[1],kn)?(sr(kn[0],In[1])>sr(kn[0],kn[1])&&(kn[1]=In[1]),sr(In[0],kn[1])>sr(kn[0],kn[1])&&(kn[0]=In[0])):ia.push(kn=In);for(var Wn=-1/0,Zn,Jr=ia.length-1,Yr=0,kn=ia[Jr],In;Yr<=Jr;kn=In,++Yr)In=ia[Yr],(Zn=sr(kn[1],In[0]))>Wn&&(Wn=Zn,W=In[0],ge=kn[1])}return pt=gt=null,W===1/0||ue===1/0?[[NaN,NaN],[NaN,NaN]]:[[W,ue],[ge,_e]]}}(),r.geo.centroid=function(W){Ol=os=Nl=Gs=Bl=js=Cs=Es=_l=wl=su=0,r.geo.stream(W,bo);var ue=_l,ge=wl,_e=su,Ce=ue*ue+ge*ge+_e*_e;return Ce<Te&&(ue=js,ge=Cs,_e=Es,os<ot&&(ue=Nl,ge=Gs,_e=Bl),Ce=ue*ue+ge*ge+_e*_e,Ce<Te)?[NaN,NaN]:[Math.atan2(ge,ue)*He,Ge(_e/Math.sqrt(Ce))*He]};var Ol,os,Nl,Gs,Bl,js,Cs,Es,_l,wl,su,bo={sphere:B,point:Ws,lineStart:cf,lineEnd:jf,polygonStart:function(){bo.lineStart=Ys},polygonEnd:function(){bo.lineStart=cf}};function Ws(W,ue){W*=Ie;var ge=Math.cos(ue*=Ie);ec(ge*Math.cos(W),ge*Math.sin(W),Math.sin(ue))}function ec(W,ue,ge){++Ol,Nl+=(W-Nl)/Ol,Gs+=(ue-Gs)/Ol,Bl+=(ge-Bl)/Ol}function cf(){var W,ue,ge;bo.point=function(Ce,De){Ce*=Ie;var tt=Math.cos(De*=Ie);W=tt*Math.cos(Ce),ue=tt*Math.sin(Ce),ge=Math.sin(De),bo.point=_e,ec(W,ue,ge)};function _e(Ce,De){Ce*=Ie;var tt=Math.cos(De*=Ie),Ze=tt*Math.cos(Ce),rt=tt*Math.sin(Ce),pt=Math.sin(De),gt=Math.atan2(Math.sqrt((gt=ue*pt-ge*rt)*gt+(gt=ge*Ze-W*pt)*gt+(gt=W*rt-ue*Ze)*gt),W*Ze+ue*rt+ge*pt);os+=gt,js+=gt*(W+(W=Ze)),Cs+=gt*(ue+(ue=rt)),Es+=gt*(ge+(ge=pt)),ec(W,ue,ge)}}function jf(){bo.point=Ws}function Ys(){var W,ue,ge,_e,Ce;bo.point=function(tt,Ze){W=tt,ue=Ze,bo.point=De,tt*=Ie;var rt=Math.cos(Ze*=Ie);ge=rt*Math.cos(tt),_e=rt*Math.sin(tt),Ce=Math.sin(Ze),ec(ge,_e,Ce)},bo.lineEnd=function(){De(W,ue),bo.lineEnd=jf,bo.point=Ws};function De(tt,Ze){tt*=Ie;var rt=Math.cos(Ze*=Ie),pt=rt*Math.cos(tt),gt=rt*Math.sin(tt),Dt=Math.sin(Ze),Bt=_e*Dt-Ce*gt,qt=Ce*pt-ge*Dt,_r=ge*gt-_e*pt,Kt=Math.sqrt(Bt*Bt+qt*qt+_r*_r),tr=ge*pt+_e*gt+Ce*Dt,ir=Kt&&-nt(tr)/Kt,wr=Math.atan2(Kt,tr);_l+=ir*Bt,wl+=ir*qt,su+=ir*_r,os+=wr,js+=wr*(ge+(ge=pt)),Cs+=wr*(_e+(_e=gt)),Es+=wr*(Ce+(Ce=Dt)),ec(ge,_e,Ce)}}function Eu(W,ue){function ge(_e,Ce){return _e=W(_e,Ce),ue(_e[0],_e[1])}return W.invert&&ue.invert&&(ge.invert=function(_e,Ce){return _e=ue.invert(_e,Ce),_e&&W.invert(_e[0],_e[1])}),ge}function Lu(){return!0}function _h(W,ue,ge,_e,Ce){var De=[],tt=[];if(W.forEach(function(Kt){if(!((tr=Kt.length-1)<=0)){var tr,ir=Kt[0],wr=Kt[tr];if(Gf(ir,wr)){Ce.lineStart();for(var sr=0;sr<tr;++sr)Ce.point((ir=Kt[sr])[0],ir[1]);Ce.lineEnd();return}var vr=new Tl(ir,Kt,null,!0),nn=new Tl(ir,null,vr,!1);vr.o=nn,De.push(vr),tt.push(nn),vr=new Tl(wr,Kt,null,!1),nn=new Tl(wr,null,vr,!0),vr.o=nn,De.push(vr),tt.push(nn)}}),tt.sort(ue),Cc(De),Cc(tt),!!De.length){for(var Ze=0,rt=ge,pt=tt.length;Ze<pt;++Ze)tt[Ze].e=rt=!rt;for(var gt=De[0],Dt,Bt;;){for(var qt=gt,_r=!0;qt.v;)if((qt=qt.n)===gt)return;Dt=qt.z,Ce.lineStart();do{if(qt.v=qt.o.v=!0,qt.e){if(_r)for(var Ze=0,pt=Dt.length;Ze<pt;++Ze)Ce.point((Bt=Dt[Ze])[0],Bt[1]);else _e(qt.x,qt.n.x,1,Ce);qt=qt.n}else{if(_r){Dt=qt.p.z;for(var Ze=Dt.length-1;Ze>=0;--Ze)Ce.point((Bt=Dt[Ze])[0],Bt[1])}else _e(qt.x,qt.p.x,-1,Ce);qt=qt.p}qt=qt.o,Dt=qt.z,_r=!_r}while(!qt.v);Ce.lineEnd()}}}function Cc(W){if(!!(ue=W.length)){for(var ue,ge=0,_e=W[0],Ce;++ge<ue;)_e.n=Ce=W[ge],Ce.p=_e,_e=Ce;_e.n=Ce=W[0],Ce.p=_e}}function Tl(W,ue,ge,_e){this.x=W,this.z=ue,this.o=ge,this.e=_e,this.v=!1,this.n=this.p=null}function ms(W,ue,ge,_e){return function(Ce,De){var tt=ue(De),Ze=Ce.invert(_e[0],_e[1]),rt={point:pt,lineStart:Dt,lineEnd:Bt,polygonStart:function(){rt.point=sr,rt.lineStart=vr,rt.lineEnd=nn,qt=[],ir=[]},polygonEnd:function(){rt.point=pt,rt.lineStart=Dt,rt.lineEnd=Bt,qt=r.merge(qt);var en=tn(Ze,ir);qt.length?(tr||(De.polygonStart(),tr=!0),_h(qt,lp,en,ge,De)):en&&(tr||(De.polygonStart(),tr=!0),De.lineStart(),ge(null,null,1,De),De.lineEnd()),tr&&(De.polygonEnd(),tr=!1),qt=ir=null},sphere:function(){De.polygonStart(),De.lineStart(),ge(null,null,1,De),De.lineEnd(),De.polygonEnd()}};function pt(en,Jr){var Yr=Ce(en,Jr);W(en=Yr[0],Jr=Yr[1])&&De.point(en,Jr)}function gt(en,Jr){var Yr=Ce(en,Jr);tt.point(Yr[0],Yr[1])}function Dt(){rt.point=gt,tt.lineStart()}function Bt(){rt.point=pt,tt.lineEnd()}var qt,_r=wh(),Kt=ue(_r),tr=!1,ir,wr;function sr(en,Jr){wr.push([en,Jr]);var Yr=Ce(en,Jr);Kt.point(Yr[0],Yr[1])}function vr(){Kt.lineStart(),wr=[]}function nn(){sr(wr[0][0],wr[0][1]),Kt.lineEnd();var en=Kt.clean(),Jr=_r.buffer(),Yr,kn=Jr.length;if(wr.pop(),ir.push(wr),wr=null,!!kn){if(en&1){Yr=Jr[0];var kn=Yr.length-1,In=-1,ia;if(kn>0){for(tr||(De.polygonStart(),tr=!0),De.lineStart();++In<kn;)De.point((ia=Yr[In])[0],ia[1]);De.lineEnd()}return}kn>1&&en&2&&Jr.push(Jr.pop().concat(Jr.shift())),qt.push(Jr.filter(Wf))}}return rt}}function Wf(W){return W.length>1}function wh(){var W=[],ue;return{lineStart:function(){W.push(ue=[])},point:function(ge,_e){ue.push([ge,_e])},lineEnd:B,buffer:function(){var ge=W;return W=[],ue=null,ge},rejoin:function(){W.length>1&&W.push(W.pop().concat(W.shift()))}}}function lp(W,ue){return((W=W.x)[0]<0?W[1]-Me-ot:Me-W[1])-((ue=ue.x)[0]<0?ue[1]-Me-ot:Me-ue[1])}var ff=ms(Lu,Th,tc,[-Le,-Le/2]);function Th(W){var ue=NaN,ge=NaN,_e=NaN,Ce;return{lineStart:function(){W.lineStart(),Ce=1},point:function(De,tt){var Ze=De>0?Le:-Le,rt=x(De-ue);x(rt-Le)<ot?(W.point(ue,ge=(ge+tt)/2>0?Me:-Me),W.point(_e,ge),W.lineEnd(),W.lineStart(),W.point(Ze,ge),W.point(De,ge),Ce=0):_e!==Ze&&rt>=Le&&(x(ue-_e)<ot&&(ue-=_e*ot),x(De-Ze)<ot&&(De-=Ze*ot),ge=up(ue,ge,De,tt),W.point(_e,ge),W.lineEnd(),W.lineStart(),W.point(Ze,ge),Ce=0),W.point(ue=De,ge=tt),_e=Ze},lineEnd:function(){W.lineEnd(),ue=ge=NaN},clean:function(){return 2-Ce}}}function up(W,ue,ge,_e){var Ce,De,tt=Math.sin(W-ge);return x(tt)>ot?Math.atan((Math.sin(ue)*(De=Math.cos(_e))*Math.sin(ge)-Math.sin(_e)*(Ce=Math.cos(ue))*Math.sin(W))/(Ce*De*tt)):(ue+_e)/2}function tc(W,ue,ge,_e){var Ce;if(W==null)Ce=ge*Me,_e.point(-Le,Ce),_e.point(0,Ce),_e.point(Le,Ce),_e.point(Le,0),_e.point(Le,-Ce),_e.point(0,-Ce),_e.point(-Le,-Ce),_e.point(-Le,0),_e.point(-Le,Ce);else if(x(W[0]-ue[0])>ot){var De=W[0]<ue[0]?Le:-Le;Ce=ge*De/2,_e.point(-De,Ce),_e.point(0,Ce),_e.point(De,Ce)}else _e.point(ue[0],ue[1])}function tn(W,ue){var ge=W[0],_e=W[1],Ce=[Math.sin(ge),-Math.cos(ge),0],De=0,tt=0;Ss.reset();for(var Ze=0,rt=ue.length;Ze<rt;++Ze){var pt=ue[Ze],gt=pt.length;if(!!gt)for(var Dt=pt[0],Bt=Dt[0],qt=Dt[1]/2+Le/4,_r=Math.sin(qt),Kt=Math.cos(qt),tr=1;;){tr===gt&&(tr=0),W=pt[tr];var ir=W[0],wr=W[1]/2+Le/4,sr=Math.sin(wr),vr=Math.cos(wr),nn=ir-Bt,en=nn>=0?1:-1,Jr=en*nn,Yr=Jr>Le,kn=_r*sr;if(Ss.add(Math.atan2(kn*en*Math.sin(Jr),Kt*vr+kn*Math.cos(Jr))),De+=Yr?nn+en*Ve:nn,Yr^Bt>=ge^ir>=ge){var In=Hs(ou(Dt),ou(W));xi(In);var ia=Hs(Ce,In);xi(ia);var Wn=(Yr^nn>=0?-1:1)*Ge(ia[2]);(_e>Wn||_e===Wn&&(In[0]||In[1]))&&(tt+=Yr^nn>=0?1:-1)}if(!tr++)break;Bt=ir,_r=sr,Kt=vr,Dt=W}}return(De<-ot||De<ot&&Ss<-ot)^tt&1}function Dn(W){var ue=Math.cos(W),ge=ue>0,_e=x(ue)>ot,Ce=Zs(W,6*Ie);return ms(De,tt,Ce,ge?[0,-W]:[-Le,W-Le]);function De(pt,gt){return Math.cos(pt)*Math.cos(gt)>ue}function tt(pt){var gt,Dt,Bt,qt,_r;return{lineStart:function(){qt=Bt=!1,_r=1},point:function(Kt,tr){var ir=[Kt,tr],wr,sr=De(Kt,tr),vr=ge?sr?0:rt(Kt,tr):sr?rt(Kt+(Kt<0?Le:-Le),tr):0;if(!gt&&(qt=Bt=sr)&&pt.lineStart(),sr!==Bt&&(wr=Ze(gt,ir),(Gf(gt,wr)||Gf(ir,wr))&&(ir[0]+=ot,ir[1]+=ot,sr=De(ir[0],ir[1]))),sr!==Bt)_r=0,sr?(pt.lineStart(),wr=Ze(ir,gt),pt.point(wr[0],wr[1])):(wr=Ze(gt,ir),pt.point(wr[0],wr[1]),pt.lineEnd()),gt=wr;else if(_e&&gt&&ge^sr){var nn;!(vr&Dt)&&(nn=Ze(ir,gt,!0))&&(_r=0,ge?(pt.lineStart(),pt.point(nn[0][0],nn[0][1]),pt.point(nn[1][0],nn[1][1]),pt.lineEnd()):(pt.point(nn[1][0],nn[1][1]),pt.lineEnd(),pt.lineStart(),pt.point(nn[0][0],nn[0][1])))}sr&&(!gt||!Gf(gt,ir))&&pt.point(ir[0],ir[1]),gt=ir,Bt=sr,Dt=vr},lineEnd:function(){Bt&&pt.lineEnd(),gt=null},clean:function(){return _r|(qt&&Bt)<<1}}}function Ze(pt,gt,Dt){var Bt=ou(pt),qt=ou(gt),_r=[1,0,0],Kt=Hs(Bt,qt),tr=xl(Kt,Kt),ir=Kt[0],wr=tr-ir*ir;if(!wr)return!Dt&&pt;var sr=ue*tr/wr,vr=-ue*ir/wr,nn=Hs(_r,Kt),en=qu(_r,sr),Jr=qu(Kt,vr);Sc(en,Jr);var Yr=nn,kn=xl(en,Yr),In=xl(Yr,Yr),ia=kn*kn-In*(xl(en,en)-1);if(!(ia<0)){var Wn=Math.sqrt(ia),Zn=qu(Yr,(-kn-Wn)/In);if(Sc(Zn,en),Zn=bl(Zn),!Dt)return Zn;var fn=pt[0],Pn=gt[0],Vn=pt[1],an=gt[1],Tn;Pn<fn&&(Tn=fn,fn=Pn,Pn=Tn);var va=Pn-fn,Fa=x(va-Le)<ot,Wa=Fa||va<ot;if(!Fa&&an<Vn&&(Tn=Vn,Vn=an,an=Tn),Wa?Fa?Vn+an>0^Zn[1]<(x(Zn[0]-fn)<ot?Vn:an):Vn<=Zn[1]&&Zn[1]<=an:va>Le^(fn<=Zn[0]&&Zn[0]<=Pn)){var _i=qu(Yr,(-kn+Wn)/In);return Sc(_i,en),[Zn,bl(_i)]}}}function rt(pt,gt){var Dt=ge?W:Le-W,Bt=0;return pt<-Dt?Bt|=1:pt>Dt&&(Bt|=2),gt<-Dt?Bt|=4:gt>Dt&&(Bt|=8),Bt}}function _n(W,ue,ge,_e){return function(Ce){var De=Ce.a,tt=Ce.b,Ze=De.x,rt=De.y,pt=tt.x,gt=tt.y,Dt=0,Bt=1,qt=pt-Ze,_r=gt-rt,Kt;if(Kt=W-Ze,!(!qt&&Kt>0)){if(Kt/=qt,qt<0){if(Kt<Dt)return;Kt<Bt&&(Bt=Kt)}else if(qt>0){if(Kt>Bt)return;Kt>Dt&&(Dt=Kt)}if(Kt=ge-Ze,!(!qt&&Kt<0)){if(Kt/=qt,qt<0){if(Kt>Bt)return;Kt>Dt&&(Dt=Kt)}else if(qt>0){if(Kt<Dt)return;Kt<Bt&&(Bt=Kt)}if(Kt=ue-rt,!(!_r&&Kt>0)){if(Kt/=_r,_r<0){if(Kt<Dt)return;Kt<Bt&&(Bt=Kt)}else if(_r>0){if(Kt>Bt)return;Kt>Dt&&(Dt=Kt)}if(Kt=_e-rt,!(!_r&&Kt<0)){if(Kt/=_r,_r<0){if(Kt>Bt)return;Kt>Dt&&(Dt=Kt)}else if(_r>0){if(Kt<Dt)return;Kt<Bt&&(Bt=Kt)}return Dt>0&&(Ce.a={x:Ze+Dt*qt,y:rt+Dt*_r}),Bt<1&&(Ce.b={x:Ze+Bt*qt,y:rt+Bt*_r}),Ce}}}}}}var xa=1e9;r.geo.clipExtent=function(){var W,ue,ge,_e,Ce,De,tt={stream:function(Ze){return Ce&&(Ce.valid=!1),Ce=De(Ze),Ce.valid=!0,Ce},extent:function(Ze){return arguments.length?(De=Ja(W=+Ze[0][0],ue=+Ze[0][1],ge=+Ze[1][0],_e=+Ze[1][1]),Ce&&(Ce.valid=!1,Ce=null),tt):[[W,ue],[ge,_e]]}};return tt.extent([[0,0],[960,500]])};function Ja(W,ue,ge,_e){return function(Ze){var rt=Ze,pt=wh(),gt=_n(W,ue,ge,_e),Dt,Bt,qt,_r={point:wr,lineStart:ia,lineEnd:Wn,polygonStart:function(){Ze=pt,Dt=[],Bt=[],In=!0},polygonEnd:function(){Ze=rt,Dt=r.merge(Dt);var fn=Kt([W,_e]),Pn=In&&fn,Vn=Dt.length;(Pn||Vn)&&(Ze.polygonStart(),Pn&&(Ze.lineStart(),tr(null,null,1,Ze),Ze.lineEnd()),Vn&&_h(Dt,De,fn,tr,Ze),Ze.polygonEnd()),Dt=Bt=qt=null}};function Kt(fn){for(var Pn=0,Vn=Bt.length,an=fn[1],Tn=0;Tn<Vn;++Tn)for(var va=1,Fa=Bt[Tn],Wa=Fa.length,_i=Fa[0],Ii;va<Wa;++va)Ii=Fa[va],_i[1]<=an?Ii[1]>an&&ut(_i,Ii,fn)>0&&++Pn:Ii[1]<=an&&ut(_i,Ii,fn)<0&&--Pn,_i=Ii;return Pn!==0}function tr(fn,Pn,Vn,an){var Tn=0,va=0;if(fn==null||(Tn=Ce(fn,Vn))!==(va=Ce(Pn,Vn))||tt(fn,Pn)<0^Vn>0)do an.point(Tn===0||Tn===3?W:ge,Tn>1?_e:ue);while((Tn=(Tn+Vn+4)%4)!==va);else an.point(Pn[0],Pn[1])}function ir(fn,Pn){return W<=fn&&fn<=ge&&ue<=Pn&&Pn<=_e}function wr(fn,Pn){ir(fn,Pn)&&Ze.point(fn,Pn)}var sr,vr,nn,en,Jr,Yr,kn,In;function ia(){_r.point=Zn,Bt&&Bt.push(qt=[]),kn=!0,Yr=!1,en=Jr=NaN}function Wn(){Dt&&(Zn(sr,vr),nn&&Yr&&pt.rejoin(),Dt.push(pt.buffer())),_r.point=wr,Yr&&Ze.lineEnd()}function Zn(fn,Pn){fn=Math.max(-xa,Math.min(xa,fn)),Pn=Math.max(-xa,Math.min(xa,Pn));var Vn=ir(fn,Pn);if(Bt&&qt.push([fn,Pn]),kn)sr=fn,vr=Pn,nn=Vn,kn=!1,Vn&&(Ze.lineStart(),Ze.point(fn,Pn));else if(Vn&&Yr)Ze.point(fn,Pn);else{var an={a:{x:en,y:Jr},b:{x:fn,y:Pn}};gt(an)?(Yr||(Ze.lineStart(),Ze.point(an.a.x,an.a.y)),Ze.point(an.b.x,an.b.y),Vn||Ze.lineEnd(),In=!1):Vn&&(Ze.lineStart(),Ze.point(fn,Pn),In=!1)}en=fn,Jr=Pn,Yr=Vn}return _r};function Ce(Ze,rt){return x(Ze[0]-W)<ot?rt>0?0:3:x(Ze[0]-ge)<ot?rt>0?2:1:x(Ze[1]-ue)<ot?rt>0?1:0:rt>0?3:2}function De(Ze,rt){return tt(Ze.x,rt.x)}function tt(Ze,rt){var pt=Ce(Ze,1),gt=Ce(rt,1);return pt!==gt?pt-gt:pt===0?rt[1]-Ze[1]:pt===1?Ze[0]-rt[0]:pt===2?Ze[1]-rt[1]:rt[0]-Ze[0]}}function Ra(W){var ue=0,ge=Le/3,_e=_o(W),Ce=_e(ue,ge);return Ce.parallels=function(De){return arguments.length?_e(ue=De[0]*Le/180,ge=De[1]*Le/180):[ue/Le*180,ge/Le*180]},Ce}function ao(W,ue){var ge=Math.sin(W),_e=(ge+Math.sin(ue))/2,Ce=1+ge*(2*_e-ge),De=Math.sqrt(Ce)/_e;function tt(Ze,rt){var pt=Math.sqrt(Ce-2*_e*Math.sin(rt))/_e;return[pt*Math.sin(Ze*=_e),De-pt*Math.cos(Ze)]}return tt.invert=function(Ze,rt){var pt=De-rt;return[Math.atan2(Ze,pt)/_e,Ge((Ce-(Ze*Ze+pt*pt)*_e*_e)/(2*_e))]},tt}(r.geo.conicEqualArea=function(){return Ra(ao)}).raw=ao,r.geo.albers=function(){return r.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},r.geo.albersUsa=function(){var W=r.geo.albers(),ue=r.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ge=r.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_e,Ce={point:function(pt,gt){_e=[pt,gt]}},De,tt,Ze;function rt(pt){var gt=pt[0],Dt=pt[1];return _e=null,De(gt,Dt),_e||(tt(gt,Dt),_e)||Ze(gt,Dt),_e}return rt.invert=function(pt){var gt=W.scale(),Dt=W.translate(),Bt=(pt[0]-Dt[0])/gt,qt=(pt[1]-Dt[1])/gt;return(qt>=.12&&qt<.234&&Bt>=-.425&&Bt<-.214?ue:qt>=.166&&qt<.234&&Bt>=-.214&&Bt<-.115?ge:W).invert(pt)},rt.stream=function(pt){var gt=W.stream(pt),Dt=ue.stream(pt),Bt=ge.stream(pt);return{point:function(qt,_r){gt.point(qt,_r),Dt.point(qt,_r),Bt.point(qt,_r)},sphere:function(){gt.sphere(),Dt.sphere(),Bt.sphere()},lineStart:function(){gt.lineStart(),Dt.lineStart(),Bt.lineStart()},lineEnd:function(){gt.lineEnd(),Dt.lineEnd(),Bt.lineEnd()},polygonStart:function(){gt.polygonStart(),Dt.polygonStart(),Bt.polygonStart()},polygonEnd:function(){gt.polygonEnd(),Dt.polygonEnd(),Bt.polygonEnd()}}},rt.precision=function(pt){return arguments.length?(W.precision(pt),ue.precision(pt),ge.precision(pt),rt):W.precision()},rt.scale=function(pt){return arguments.length?(W.scale(pt),ue.scale(pt*.35),ge.scale(pt),rt.translate(W.translate())):W.scale()},rt.translate=function(pt){if(!arguments.length)return W.translate();var gt=W.scale(),Dt=+pt[0],Bt=+pt[1];return De=W.translate(pt).clipExtent([[Dt-.455*gt,Bt-.238*gt],[Dt+.455*gt,Bt+.238*gt]]).stream(Ce).point,tt=ue.translate([Dt-.307*gt,Bt+.201*gt]).clipExtent([[Dt-.425*gt+ot,Bt+.12*gt+ot],[Dt-.214*gt-ot,Bt+.234*gt-ot]]).stream(Ce).point,Ze=ge.translate([Dt-.205*gt,Bt+.212*gt]).clipExtent([[Dt-.214*gt+ot,Bt+.166*gt+ot],[Dt-.115*gt-ot,Bt+.234*gt-ot]]).stream(Ce).point,rt},rt.scale(1070)};var ei,Al,ti={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Al=0,ti.lineStart=si},polygonEnd:function(){ti.lineStart=ti.lineEnd=ti.point=B,ei+=x(Al/2)}};function si(){var W,ue,ge,_e;ti.point=function(De,tt){ti.point=Ce,W=ge=De,ue=_e=tt};function Ce(De,tt){Al+=_e*De-ge*tt,ge=De,_e=tt}ti.lineEnd=function(){Ce(W,ue)}}var Uo,Ml,lu,rc,Yf={point:Li,lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B};function Li(W,ue){W<Uo&&(Uo=W),W>lu&&(lu=W),ue<Ml&&(Ml=ue),ue>rc&&(rc=ue)}function Ul(){var W=gs(4.5),ue=[],ge={point:_e,lineStart:function(){ge.point=Ce},lineEnd:tt,polygonStart:function(){ge.lineEnd=Ze},polygonEnd:function(){ge.lineEnd=tt,ge.point=_e},pointRadius:function(rt){return W=gs(rt),ge},result:function(){if(ue.length){var rt=ue.join("");return ue=[],rt}}};function _e(rt,pt){ue.push("M",rt,",",pt,W)}function Ce(rt,pt){ue.push("M",rt,",",pt),ge.point=De}function De(rt,pt){ue.push("L",rt,",",pt)}function tt(){ge.point=_e}function Ze(){ue.push("Z")}return ge}function gs(W){return"m0,"+W+"a"+W+","+W+" 0 1,1 0,"+-2*W+"a"+W+","+W+" 0 1,1 0,"+2*W+"z"}var Vo={point:So,lineStart:uu,lineEnd:ga,polygonStart:function(){Vo.lineStart=io},polygonEnd:function(){Vo.point=So,Vo.lineStart=uu,Vo.lineEnd=ga}};function So(W,ue){Nl+=W,Gs+=ue,++Bl}function uu(){var W,ue;Vo.point=function(_e,Ce){Vo.point=ge,So(W=_e,ue=Ce)};function ge(_e,Ce){var De=_e-W,tt=Ce-ue,Ze=Math.sqrt(De*De+tt*tt);js+=Ze*(W+_e)/2,Cs+=Ze*(ue+Ce)/2,Es+=Ze,So(W=_e,ue=Ce)}}function ga(){Vo.point=So}function io(){var W,ue,ge,_e;Vo.point=function(De,tt){Vo.point=Ce,So(W=ge=De,ue=_e=tt)};function Ce(De,tt){var Ze=De-ge,rt=tt-_e,pt=Math.sqrt(Ze*Ze+rt*rt);js+=pt*(ge+De)/2,Cs+=pt*(_e+tt)/2,Es+=pt,pt=_e*De-ge*tt,_l+=pt*(ge+De),wl+=pt*(_e+tt),su+=pt*3,So(ge=De,_e=tt)}Vo.lineEnd=function(){Ce(W,ue)}}function Ho(W){var ue=4.5,ge={point:_e,lineStart:function(){ge.point=Ce},lineEnd:tt,polygonStart:function(){ge.lineEnd=Ze},polygonEnd:function(){ge.lineEnd=tt,ge.point=_e},pointRadius:function(rt){return ue=rt,ge},result:B};function _e(rt,pt){W.moveTo(rt+ue,pt),W.arc(rt,pt,ue,0,Ve)}function Ce(rt,pt){W.moveTo(rt,pt),ge.point=De}function De(rt,pt){W.lineTo(rt,pt)}function tt(){ge.point=_e}function Ze(){W.closePath()}return ge}function ss(W){var ue=.5,ge=Math.cos(30*Ie),_e=16;function Ce(rt){return(_e?tt:De)(rt)}function De(rt){return kl(rt,function(pt,gt){pt=W(pt,gt),rt.point(pt[0],pt[1])})}function tt(rt){var pt,gt,Dt,Bt,qt,_r,Kt,tr,ir,wr,sr,vr,nn={point:en,lineStart:Jr,lineEnd:kn,polygonStart:function(){rt.polygonStart(),nn.lineStart=In},polygonEnd:function(){rt.polygonEnd(),nn.lineStart=Jr}};function en(Zn,fn){Zn=W(Zn,fn),rt.point(Zn[0],Zn[1])}function Jr(){tr=NaN,nn.point=Yr,rt.lineStart()}function Yr(Zn,fn){var Pn=ou([Zn,fn]),Vn=W(Zn,fn);Ze(tr,ir,Kt,wr,sr,vr,tr=Vn[0],ir=Vn[1],Kt=Zn,wr=Pn[0],sr=Pn[1],vr=Pn[2],_e,rt),rt.point(tr,ir)}function kn(){nn.point=en,rt.lineEnd()}function In(){Jr(),nn.point=ia,nn.lineEnd=Wn}function ia(Zn,fn){Yr(pt=Zn,fn),gt=tr,Dt=ir,Bt=wr,qt=sr,_r=vr,nn.point=Yr}function Wn(){Ze(tr,ir,Kt,wr,sr,vr,gt,Dt,pt,Bt,qt,_r,_e,rt),nn.lineEnd=kn,kn()}return nn}function Ze(rt,pt,gt,Dt,Bt,qt,_r,Kt,tr,ir,wr,sr,vr,nn){var en=_r-rt,Jr=Kt-pt,Yr=en*en+Jr*Jr;if(Yr>4*ue&&vr--){var kn=Dt+ir,In=Bt+wr,ia=qt+sr,Wn=Math.sqrt(kn*kn+In*In+ia*ia),Zn=Math.asin(ia/=Wn),fn=x(x(ia)-1)<ot||x(gt-tr)<ot?(gt+tr)/2:Math.atan2(In,kn),Pn=W(fn,Zn),Vn=Pn[0],an=Pn[1],Tn=Vn-rt,va=an-pt,Fa=Jr*Tn-en*va;(Fa*Fa/Yr>ue||x((en*Tn+Jr*va)/Yr-.5)>.3||Dt*ir+Bt*wr+qt*sr<ge)&&(Ze(rt,pt,gt,Dt,Bt,qt,Vn,an,fn,kn/=Wn,In/=Wn,ia,vr,nn),nn.point(Vn,an),Ze(Vn,an,fn,kn,In,ia,_r,Kt,tr,ir,wr,sr,vr,nn))}}return Ce.precision=function(rt){return arguments.length?(_e=(ue=rt*rt)>0&&16,Ce):Math.sqrt(ue)},Ce}r.geo.path=function(){var W=4.5,ue,ge,_e,Ce,De;function tt(rt){return rt&&(typeof W=="function"&&Ce.pointRadius(+W.apply(this,arguments)),(!De||!De.valid)&&(De=_e(Ce)),r.geo.stream(rt,De)),Ce.result()}tt.area=function(rt){return ei=0,r.geo.stream(rt,_e(ti)),ei},tt.centroid=function(rt){return Nl=Gs=Bl=js=Cs=Es=_l=wl=su=0,r.geo.stream(rt,_e(Vo)),su?[_l/su,wl/su]:Es?[js/Es,Cs/Es]:Bl?[Nl/Bl,Gs/Bl]:[NaN,NaN]},tt.bounds=function(rt){return lu=rc=-(Uo=Ml=1/0),r.geo.stream(rt,_e(Yf)),[[Uo,Ml],[lu,rc]]},tt.projection=function(rt){return arguments.length?(_e=(ue=rt)?rt.stream||Pu(rt):G,Ze()):ue},tt.context=function(rt){return arguments.length?(Ce=(ge=rt)==null?new Ul:new Ho(rt),typeof W!="function"&&Ce.pointRadius(W),Ze()):ge},tt.pointRadius=function(rt){return arguments.length?(W=typeof rt=="function"?rt:(Ce.pointRadius(+rt),+rt),tt):W};function Ze(){return De=null,tt}return tt.projection(r.geo.albersUsa()).context(null)};function Pu(W){var ue=ss(function(ge,_e){return W([ge*He,_e*He])});return function(ge){return hf(ue(ge))}}r.geo.transform=function(W){return{stream:function(ue){var ge=new Xs(ue);for(var _e in W)ge[_e]=W[_e];return ge}}};function Xs(W){this.stream=W}Xs.prototype={point:function(W,ue){this.stream.point(W,ue)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kl(W,ue){return{point:ue,sphere:function(){W.sphere()},lineStart:function(){W.lineStart()},lineEnd:function(){W.lineEnd()},polygonStart:function(){W.polygonStart()},polygonEnd:function(){W.polygonEnd()}}}r.geo.projection=ea,r.geo.projectionMutator=_o;function ea(W){return _o(function(){return W})()}function _o(W){var ue,ge,_e,Ce=ss(function(Yr,kn){return Yr=ue(Yr,kn),[Yr[0]*De+qt,_r-Yr[1]*De]}),De=150,tt=480,Ze=250,rt=0,pt=0,gt=0,Dt=0,Bt=0,qt,_r,Kt=ff,tr=G,ir=null,wr=null,sr;function vr(Yr){return Yr=_e(Yr[0]*Ie,Yr[1]*Ie),[Yr[0]*De+qt,_r-Yr[1]*De]}function nn(Yr){return Yr=_e.invert((Yr[0]-qt)/De,(_r-Yr[1])/De),Yr&&[Yr[0]*He,Yr[1]*He]}vr.stream=function(Yr){return sr&&(sr.valid=!1),sr=hf(Kt(ge,Ce(tr(Yr)))),sr.valid=!0,sr},vr.clipAngle=function(Yr){return arguments.length?(Kt=Yr==null?(ir=Yr,ff):Dn((ir=+Yr)*Ie),Jr()):ir},vr.clipExtent=function(Yr){return arguments.length?(wr=Yr,tr=Yr?Ja(Yr[0][0],Yr[0][1],Yr[1][0],Yr[1][1]):G,Jr()):wr},vr.scale=function(Yr){return arguments.length?(De=+Yr,en()):De},vr.translate=function(Yr){return arguments.length?(tt=+Yr[0],Ze=+Yr[1],en()):[tt,Ze]},vr.center=function(Yr){return arguments.length?(rt=Yr[0]%360*Ie,pt=Yr[1]%360*Ie,en()):[rt*He,pt*He]},vr.rotate=function(Yr){return arguments.length?(gt=Yr[0]%360*Ie,Dt=Yr[1]%360*Ie,Bt=Yr.length>2?Yr[2]%360*Ie:0,en()):[gt*He,Dt*He,Bt*He]},r.rebind(vr,Ce,"precision");function en(){_e=Eu(ge=ls(gt,Dt,Bt),ue);var Yr=ue(rt,pt);return qt=tt-Yr[0]*De,_r=Ze+Yr[1]*De,Jr()}function Jr(){return sr&&(sr.valid=!1,sr=null),vr}return function(){return ue=W.apply(this,arguments),vr.invert=ue.invert&&nn,en()}}function hf(W){return kl(W,function(ue,ge){W.point(ue*Ie,ge*Ie)})}function Sl(W,ue){return[W,ue]}(r.geo.equirectangular=function(){return ea(Sl)}).raw=Sl.invert=Sl,r.geo.rotation=function(W){W=ls(W[0]%360*Ie,W[1]*Ie,W.length>2?W[2]*Ie:0);function ue(ge){return ge=W(ge[0]*Ie,ge[1]*Ie),ge[0]*=He,ge[1]*=He,ge}return ue.invert=function(ge){return ge=W.invert(ge[0]*Ie,ge[1]*Ie),ge[0]*=He,ge[1]*=He,ge},ue};function Vl(W,ue){return[W>Le?W-Ve:W<-Le?W+Ve:W,ue]}Vl.invert=Sl;function ls(W,ue,ge){return W?ue||ge?Eu(nc(W),us(ue,ge)):nc(W):ue||ge?us(ue,ge):Vl}function ys(W){return function(ue,ge){return ue+=W,[ue>Le?ue-Ve:ue<-Le?ue+Ve:ue,ge]}}function nc(W){var ue=ys(W);return ue.invert=ys(-W),ue}function us(W,ue){var ge=Math.cos(W),_e=Math.sin(W),Ce=Math.cos(ue),De=Math.sin(ue);function tt(Ze,rt){var pt=Math.cos(rt),gt=Math.cos(Ze)*pt,Dt=Math.sin(Ze)*pt,Bt=Math.sin(rt),qt=Bt*ge+gt*_e;return[Math.atan2(Dt*Ce-qt*De,gt*ge-Bt*_e),Ge(qt*Ce+Dt*De)]}return tt.invert=function(Ze,rt){var pt=Math.cos(rt),gt=Math.cos(Ze)*pt,Dt=Math.sin(Ze)*pt,Bt=Math.sin(rt),qt=Bt*Ce-Dt*De;return[Math.atan2(Dt*Ce+Bt*De,gt*ge+qt*_e),Ge(qt*ge-gt*_e)]},tt}r.geo.circle=function(){var W=[0,0],ue,ge=6,_e;function Ce(){var De=typeof W=="function"?W.apply(this,arguments):W,tt=ls(-De[0]*Ie,-De[1]*Ie,0).invert,Ze=[];return _e(null,null,1,{point:function(rt,pt){Ze.push(rt=tt(rt,pt)),rt[0]*=He,rt[1]*=He}}),{type:"Polygon",coordinates:[Ze]}}return Ce.origin=function(De){return arguments.length?(W=De,Ce):W},Ce.angle=function(De){return arguments.length?(_e=Zs((ue=+De)*Ie,ge*Ie),Ce):ue},Ce.precision=function(De){return arguments.length?(_e=Zs(ue*Ie,(ge=+De)*Ie),Ce):ge},Ce.angle(90)};function Zs(W,ue){var ge=Math.cos(W),_e=Math.sin(W);return function(Ce,De,tt,Ze){var rt=tt*ue;Ce!=null?(Ce=ac(ge,Ce),De=ac(ge,De),(tt>0?Ce<De:Ce>De)&&(Ce+=tt*Ve)):(Ce=W+tt*Ve,De=W-.5*rt);for(var pt,gt=Ce;tt>0?gt>De:gt<De;gt-=rt)Ze.point((pt=bl([ge,-_e*Math.cos(gt),-_e*Math.sin(gt)]))[0],pt[1])}}function ac(W,ue){var ge=ou(ue);ge[0]-=W,xi(ge);var _e=nt(-ge[1]);return((-ge[2]<0?-_e:_e)+2*Math.PI-ot)%(2*Math.PI)}r.geo.distance=function(W,ue){var ge=(ue[0]-W[0])*Ie,_e=W[1]*Ie,Ce=ue[1]*Ie,De=Math.sin(ge),tt=Math.cos(ge),Ze=Math.sin(_e),rt=Math.cos(_e),pt=Math.sin(Ce),gt=Math.cos(Ce),Dt;return Math.atan2(Math.sqrt((Dt=gt*De)*Dt+(Dt=rt*pt-Ze*gt*tt)*Dt),Ze*pt+rt*gt*tt)},r.geo.graticule=function(){var W,ue,ge,_e,Ce,De,tt,Ze,rt=10,pt=rt,gt=90,Dt=360,Bt,qt,_r,Kt,tr=2.5;function ir(){return{type:"MultiLineString",coordinates:wr()}}function wr(){return r.range(Math.ceil(_e/gt)*gt,ge,gt).map(_r).concat(r.range(Math.ceil(Ze/Dt)*Dt,tt,Dt).map(Kt)).concat(r.range(Math.ceil(ue/rt)*rt,W,rt).filter(function(sr){return x(sr%gt)>ot}).map(Bt)).concat(r.range(Math.ceil(De/pt)*pt,Ce,pt).filter(function(sr){return x(sr%Dt)>ot}).map(qt))}return ir.lines=function(){return wr().map(function(sr){return{type:"LineString",coordinates:sr}})},ir.outline=function(){return{type:"Polygon",coordinates:[_r(_e).concat(Kt(tt).slice(1),_r(ge).reverse().slice(1),Kt(Ze).reverse().slice(1))]}},ir.extent=function(sr){return arguments.length?ir.majorExtent(sr).minorExtent(sr):ir.minorExtent()},ir.majorExtent=function(sr){return arguments.length?(_e=+sr[0][0],ge=+sr[1][0],Ze=+sr[0][1],tt=+sr[1][1],_e>ge&&(sr=_e,_e=ge,ge=sr),Ze>tt&&(sr=Ze,Ze=tt,tt=sr),ir.precision(tr)):[[_e,Ze],[ge,tt]]},ir.minorExtent=function(sr){return arguments.length?(ue=+sr[0][0],W=+sr[1][0],De=+sr[0][1],Ce=+sr[1][1],ue>W&&(sr=ue,ue=W,W=sr),De>Ce&&(sr=De,De=Ce,Ce=sr),ir.precision(tr)):[[ue,De],[W,Ce]]},ir.step=function(sr){return arguments.length?ir.majorStep(sr).minorStep(sr):ir.minorStep()},ir.majorStep=function(sr){return arguments.length?(gt=+sr[0],Dt=+sr[1],ir):[gt,Dt]},ir.minorStep=function(sr){return arguments.length?(rt=+sr[0],pt=+sr[1],ir):[rt,pt]},ir.precision=function(sr){return arguments.length?(tr=+sr,Bt=Ec(De,Ce,90),qt=Lc(ue,W,tr),_r=Ec(Ze,tt,90),Kt=Lc(_e,ge,tr),ir):tr},ir.majorExtent([[-180,-90+ot],[180,90-ot]]).minorExtent([[-180,-80-ot],[180,80+ot]])};function Ec(W,ue,ge){var _e=r.range(W,ue-ot,ge).concat(ue);return function(Ce){return _e.map(function(De){return[Ce,De]})}}function Lc(W,ue,ge){var _e=r.range(W,ue-ot,ge).concat(ue);return function(Ce){return _e.map(function(De){return[De,Ce]})}}function Pc(W){return W.source}function Xf(W){return W.target}r.geo.greatArc=function(){var W=Pc,ue,ge=Xf,_e;function Ce(){return{type:"LineString",coordinates:[ue||W.apply(this,arguments),_e||ge.apply(this,arguments)]}}return Ce.distance=function(){return r.geo.distance(ue||W.apply(this,arguments),_e||ge.apply(this,arguments))},Ce.source=function(De){return arguments.length?(W=De,ue=typeof De=="function"?null:De,Ce):W},Ce.target=function(De){return arguments.length?(ge=De,_e=typeof De=="function"?null:De,Ce):ge},Ce.precision=function(){return arguments.length?Ce:0},Ce},r.geo.interpolate=function(W,ue){return Co(W[0]*Ie,W[1]*Ie,ue[0]*Ie,ue[1]*Ie)};function Co(W,ue,ge,_e){var Ce=Math.cos(ue),De=Math.sin(ue),tt=Math.cos(_e),Ze=Math.sin(_e),rt=Ce*Math.cos(W),pt=Ce*Math.sin(W),gt=tt*Math.cos(ge),Dt=tt*Math.sin(ge),Bt=2*Math.asin(Math.sqrt(Ct(_e-ue)+Ce*tt*Ct(ge-W))),qt=1/Math.sin(Bt),_r=Bt?function(Kt){var tr=Math.sin(Kt*=Bt)*qt,ir=Math.sin(Bt-Kt)*qt,wr=ir*rt+tr*gt,sr=ir*pt+tr*Dt,vr=ir*De+tr*Ze;return[Math.atan2(sr,wr)*He,Math.atan2(vr,Math.sqrt(wr*wr+sr*sr))*He]}:function(){return[W*He,ue*He]};return _r.distance=Bt,_r}r.geo.length=function(W){return Za=0,r.geo.stream(W,ui),Za};var Za,ui={sphere:B,point:B,lineStart:cu,lineEnd:B,polygonStart:B,polygonEnd:B};function cu(){var W,ue,ge;ui.point=function(Ce,De){W=Ce*Ie,ue=Math.sin(De*=Ie),ge=Math.cos(De),ui.point=_e},ui.lineEnd=function(){ui.point=ui.lineEnd=B};function _e(Ce,De){var tt=Math.sin(De*=Ie),Ze=Math.cos(De),rt=x((Ce*=Ie)-W),pt=Math.cos(rt);Za+=Math.atan2(Math.sqrt((rt=Ze*Math.sin(rt))*rt+(rt=ge*tt-ue*Ze*pt)*rt),ue*tt+ge*Ze*pt),W=Ce,ue=tt,ge=Ze}}function Eo(W,ue){function ge(_e,Ce){var De=Math.cos(_e),tt=Math.cos(Ce),Ze=W(De*tt);return[Ze*tt*Math.sin(_e),Ze*Math.sin(Ce)]}return ge.invert=function(_e,Ce){var De=Math.sqrt(_e*_e+Ce*Ce),tt=ue(De),Ze=Math.sin(tt),rt=Math.cos(tt);return[Math.atan2(_e*Ze,De*rt),Math.asin(De&&Ce*Ze/De)]},ge}var Ls=Eo(function(W){return Math.sqrt(2/(1+W))},function(W){return 2*Math.asin(W/2)});(r.geo.azimuthalEqualArea=function(){return ea(Ls)}).raw=Ls;var fu=Eo(function(W){var ue=Math.acos(W);return ue&&ue/Math.sin(ue)},G);(r.geo.azimuthalEquidistant=function(){return ea(fu)}).raw=fu;function ol(W,ue){var ge=Math.cos(W),_e=function(Ze){return Math.tan(Le/4+Ze/2)},Ce=W===ue?Math.sin(W):Math.log(ge/Math.cos(ue))/Math.log(_e(ue)/_e(W)),De=ge*Math.pow(_e(W),Ce)/Ce;if(!Ce)return ma;function tt(Ze,rt){De>0?rt<-Me+ot&&(rt=-Me+ot):rt>Me-ot&&(rt=Me-ot);var pt=De/Math.pow(_e(rt),Ce);return[pt*Math.sin(Ce*Ze),De-pt*Math.cos(Ce*Ze)]}return tt.invert=function(Ze,rt){var pt=De-rt,gt=Ye(Ce)*Math.sqrt(Ze*Ze+pt*pt);return[Math.atan2(Ze,pt)/Ce,2*Math.atan(Math.pow(De/gt,1/Ce))-Me]},tt}(r.geo.conicConformal=function(){return Ra(ol)}).raw=ol;function eo(W,ue){var ge=Math.cos(W),_e=W===ue?Math.sin(W):(ge-Math.cos(ue))/(ue-W),Ce=ge/_e+W;if(x(_e)<ot)return Sl;function De(tt,Ze){var rt=Ce-Ze;return[rt*Math.sin(_e*tt),Ce-rt*Math.cos(_e*tt)]}return De.invert=function(tt,Ze){var rt=Ce-Ze;return[Math.atan2(tt,rt)/_e,Ce-Ye(_e)*Math.sqrt(tt*tt+rt*rt)]},De}(r.geo.conicEquidistant=function(){return Ra(eo)}).raw=eo;var Cl=Eo(function(W){return 1/W},Math.atan);(r.geo.gnomonic=function(){return ea(Cl)}).raw=Cl;function ma(W,ue){return[W,Math.log(Math.tan(Le/4+ue/2))]}ma.invert=function(W,ue){return[W,2*Math.atan(Math.exp(ue))-Me]};function ka(W){var ue=ea(W),ge=ue.scale,_e=ue.translate,Ce=ue.clipExtent,De;return ue.scale=function(){var tt=ge.apply(ue,arguments);return tt===ue?De?ue.clipExtent(null):ue:tt},ue.translate=function(){var tt=_e.apply(ue,arguments);return tt===ue?De?ue.clipExtent(null):ue:tt},ue.clipExtent=function(tt){var Ze=Ce.apply(ue,arguments);if(Ze===ue){if(De=tt==null){var rt=Le*ge(),pt=_e();Ce([[pt[0]-rt,pt[1]-rt],[pt[0]+rt,pt[1]+rt]])}}else De&&(Ze=null);return Ze},ue.clipExtent(null)}(r.geo.mercator=function(){return ka(ma)}).raw=ma;var Bi=Eo(function(){return 1},Math.asin);(r.geo.orthographic=function(){return ea(Bi)}).raw=Bi;var Hl=Eo(function(W){return 1/(1+W)},function(W){return 2*Math.atan(W)});(r.geo.stereographic=function(){return ea(Hl)}).raw=Hl;function wo(W,ue){return[Math.log(Math.tan(Le/4+ue/2)),-W]}wo.invert=function(W,ue){return[-ue,2*Math.atan(Math.exp(W))-Me]},(r.geo.transverseMercator=function(){var W=ka(wo),ue=W.center,ge=W.rotate;return W.center=function(_e){return _e?ue([-_e[1],_e[0]]):(_e=ue(),[_e[1],-_e[0]])},W.rotate=function(_e){return _e?ge([_e[0],_e[1],_e.length>2?_e[2]+90:90]):(_e=ge(),[_e[0],_e[1],_e[2]-90])},ge([0,0,90])}).raw=wo,r.geom={};function $i(W){return W[0]}function Go(W){return W[1]}r.geom.hull=function(W){var ue=$i,ge=Go;if(arguments.length)return _e(W);function _e(Ce){if(Ce.length<3)return[];var De=mr(ue),tt=mr(ge),Ze,rt=Ce.length,pt=[],gt=[];for(Ze=0;Ze<rt;Ze++)pt.push([+De.call(this,Ce[Ze],Ze),+tt.call(this,Ce[Ze],Ze),Ze]);for(pt.sort(Rc),Ze=0;Ze<rt;Ze++)gt.push([pt[Ze][0],-pt[Ze][1]]);var Dt=cp(pt),Bt=cp(gt),qt=Bt[0]===Dt[0],_r=Bt[Bt.length-1]===Dt[Dt.length-1],Kt=[];for(Ze=Dt.length-1;Ze>=0;--Ze)Kt.push(Ce[pt[Dt[Ze]][2]]);for(Ze=+qt;Ze<Bt.length-_r;++Ze)Kt.push(Ce[pt[Bt[Ze]][2]]);return Kt}return _e.x=function(Ce){return arguments.length?(ue=Ce,_e):ue},_e.y=function(Ce){return arguments.length?(ge=Ce,_e):ge},_e};function cp(W){for(var ue=W.length,ge=[0,1],_e=2,Ce=2;Ce<ue;Ce++){for(;_e>1&&ut(W[ge[_e-2]],W[ge[_e-1]],W[Ce])<=0;)--_e;ge[_e++]=Ce}return ge.slice(0,_e)}function Rc(W,ue){return W[0]-ue[0]||W[1]-ue[1]}r.geom.polygon=function(W){return ve(W,Ti),W};var Ti=r.geom.polygon.prototype=[];Ti.area=function(){for(var W=-1,ue=this.length,ge,_e=this[ue-1],Ce=0;++W<ue;)ge=_e,_e=this[W],Ce+=ge[1]*_e[0]-ge[0]*_e[1];return Ce*.5},Ti.centroid=function(W){var ue=-1,ge=this.length,_e=0,Ce=0,De,tt=this[ge-1],Ze;for(arguments.length||(W=-1/(6*this.area()));++ue<ge;)De=tt,tt=this[ue],Ze=De[0]*tt[1]-tt[0]*De[1],_e+=(De[0]+tt[0])*Ze,Ce+=(De[1]+tt[1])*Ze;return[_e*W,Ce*W]},Ti.clip=function(W){for(var ue,ge=ic(W),_e=-1,Ce=this.length-ic(this),De,tt,Ze=this[Ce-1],rt,pt,gt;++_e<Ce;){for(ue=W.slice(),W.length=0,rt=this[_e],pt=ue[(tt=ue.length-ge)-1],De=-1;++De<tt;)gt=ue[De],Oi(gt,Ze,rt)?(Oi(pt,Ze,rt)||W.push(Ru(pt,gt,Ze,rt)),W.push(gt)):Oi(pt,Ze,rt)&&W.push(Ru(pt,gt,Ze,rt)),pt=gt;ge&&W.push(W[0]),Ze=rt}return W};function Oi(W,ue,ge){return(ge[0]-ue[0])*(W[1]-ue[1])<(ge[1]-ue[1])*(W[0]-ue[0])}function Ru(W,ue,ge,_e){var Ce=W[0],De=ge[0],tt=ue[0]-Ce,Ze=_e[0]-De,rt=W[1],pt=ge[1],gt=ue[1]-rt,Dt=_e[1]-pt,Bt=(Ze*(rt-pt)-Dt*(Ce-De))/(Dt*tt-Ze*gt);return[Ce+Bt*tt,rt+Bt*gt]}function ic(W){var ue=W[0],ge=W[W.length-1];return!(ue[0]-ge[0]||ue[1]-ge[1])}var er,Ps,rs,Si=[],li,hu,pf=[];function Dc(){it(this),this.edge=this.site=this.circle=null}function Ks(W){var ue=Si.pop()||new Dc;return ue.site=W,ue}function vf(W){pu(W),rs.remove(W),Si.push(W),it(W)}function df(W){var ue=W.circle,ge=ue.x,_e=ue.cy,Ce={x:ge,y:_e},De=W.P,tt=W.N,Ze=[W];vf(W);for(var rt=De;rt.circle&&x(ge-rt.circle.x)<ot&&x(_e-rt.circle.cy)<ot;)De=rt.P,Ze.unshift(rt),vf(rt),rt=De;Ze.unshift(rt),pu(rt);for(var pt=tt;pt.circle&&x(ge-pt.circle.x)<ot&&x(_e-pt.circle.cy)<ot;)tt=pt.N,Ze.push(pt),vf(pt),pt=tt;Ze.push(pt),pu(pt);var gt=Ze.length,Dt;for(Dt=1;Dt<gt;++Dt)pt=Ze[Dt],rt=Ze[Dt-1],Se(pt.edge,rt.site,pt.site,Ce);rt=Ze[0],pt=Ze[gt-1],pt.edge=Q(rt.site,pt.site,null,Ce),Iu(rt),Iu(pt)}function sl(W){for(var ue=W.x,ge=W.y,_e,Ce,De,tt,Ze=rs._;Ze;)if(De=Zf(Ze,ge)-ue,De>ot)Ze=Ze.L;else if(tt=ue-Ah(Ze,ge),tt>ot){if(!Ze.R){_e=Ze;break}Ze=Ze.R}else{De>-ot?(_e=Ze.P,Ce=Ze):tt>-ot?(_e=Ze,Ce=Ze.N):_e=Ce=Ze;break}var rt=Ks(W);if(rs.insert(_e,rt),!(!_e&&!Ce)){if(_e===Ce){pu(_e),Ce=Ks(_e.site),rs.insert(rt,Ce),rt.edge=Ce.edge=Q(_e.site,rt.site),Iu(_e),Iu(Ce);return}if(!Ce){rt.edge=Q(_e.site,rt.site);return}pu(_e),pu(Ce);var pt=_e.site,gt=pt.x,Dt=pt.y,Bt=W.x-gt,qt=W.y-Dt,_r=Ce.site,Kt=_r.x-gt,tr=_r.y-Dt,ir=2*(Bt*tr-qt*Kt),wr=Bt*Bt+qt*qt,sr=Kt*Kt+tr*tr,vr={x:(tr*wr-qt*sr)/ir+gt,y:(Bt*sr-Kt*wr)/ir+Dt};Se(Ce.edge,pt,_r,vr),rt.edge=Q(pt,W,null,vr),Ce.edge=Q(W,_r,null,vr),Iu(_e),Iu(Ce)}}function Zf(W,ue){var ge=W.site,_e=ge.x,Ce=ge.y,De=Ce-ue;if(!De)return _e;var tt=W.P;if(!tt)return-1/0;ge=tt.site;var Ze=ge.x,rt=ge.y,pt=rt-ue;if(!pt)return Ze;var gt=Ze-_e,Dt=1/De-1/pt,Bt=gt/pt;return Dt?(-Bt+Math.sqrt(Bt*Bt-2*Dt*(gt*gt/(-2*pt)-rt+pt/2+Ce-De/2)))/Dt+_e:(_e+Ze)/2}function Ah(W,ue){var ge=W.N;if(ge)return Zf(ge,ue);var _e=W.site;return _e.y===ue?_e.x:1/0}function jo(W){this.site=W,this.edges=[]}jo.prototype.prepare=function(){for(var W=this.edges,ue=W.length,ge;ue--;)ge=W[ue].edge,(!ge.b||!ge.a)&&W.splice(ue,1);return W.sort(Du),W.length};function Kf(W){for(var ue=W[0][0],ge=W[1][0],_e=W[0][1],Ce=W[1][1],De,tt,Ze,rt,pt=Ps,gt=pt.length,Dt,Bt,qt,_r,Kt,tr;gt--;)if(Dt=pt[gt],!(!Dt||!Dt.prepare()))for(qt=Dt.edges,_r=qt.length,Bt=0;Bt<_r;)tr=qt[Bt].end(),Ze=tr.x,rt=tr.y,Kt=qt[++Bt%_r].start(),De=Kt.x,tt=Kt.y,(x(Ze-De)>ot||x(rt-tt)>ot)&&(qt.splice(Bt,0,new Fe(he(Dt.site,tr,x(Ze-ue)<ot&&Ce-rt>ot?{x:ue,y:x(De-ue)<ot?tt:Ce}:x(rt-Ce)<ot&&ge-Ze>ot?{x:x(tt-Ce)<ot?De:ge,y:Ce}:x(Ze-ge)<ot&&rt-_e>ot?{x:ge,y:x(De-ge)<ot?tt:_e}:x(rt-_e)<ot&&Ze-ue>ot?{x:x(tt-_e)<ot?De:ue,y:_e}:null),Dt.site,null)),++_r)}function Du(W,ue){return ue.angle-W.angle}function Rs(){it(this),this.x=this.y=this.arc=this.site=this.cy=null}function Iu(W){var ue=W.P,ge=W.N;if(!(!ue||!ge)){var _e=ue.site,Ce=W.site,De=ge.site;if(_e!==De){var tt=Ce.x,Ze=Ce.y,rt=_e.x-tt,pt=_e.y-Ze,gt=De.x-tt,tr=De.y-Ze,Dt=2*(rt*tr-pt*gt);if(!(Dt>=-Te)){var Bt=rt*rt+pt*pt,qt=gt*gt+tr*tr,_r=(tr*Bt-pt*qt)/Dt,Kt=(rt*qt-gt*Bt)/Dt,tr=Kt+Ze,ir=pf.pop()||new Rs;ir.arc=W,ir.site=Ce,ir.x=_r+tt,ir.y=tr+Math.sqrt(_r*_r+Kt*Kt),ir.cy=tr,W.circle=ir;for(var wr=null,sr=hu._;sr;)if(ir.y<sr.y||ir.y===sr.y&&ir.x<=sr.x)if(sr.L)sr=sr.L;else{wr=sr.P;break}else if(sr.R)sr=sr.R;else{wr=sr;break}hu.insert(wr,ir),wr||(li=ir)}}}}function pu(W){var ue=W.circle;ue&&(ue.P||(li=ue.N),hu.remove(ue),pf.push(ue),it(ue),W.circle=null)}function ll(W){for(var ue=er,ge=_n(W[0][0],W[0][1],W[1][0],W[1][1]),_e=ue.length,Ce;_e--;)Ce=ue[_e],(!K(Ce,W)||!ge(Ce)||x(Ce.a.x-Ce.b.x)<ot&&x(Ce.a.y-Ce.b.y)<ot)&&(Ce.a=Ce.b=null,ue.splice(_e,1))}function K(W,ue){var ge=W.b;if(ge)return!0;var _e=W.a,Ce=ue[0][0],De=ue[1][0],tt=ue[0][1],Ze=ue[1][1],rt=W.l,pt=W.r,gt=rt.x,Dt=rt.y,Bt=pt.x,qt=pt.y,_r=(gt+Bt)/2,Kt=(Dt+qt)/2,tr,ir;if(qt===Dt){if(_r<Ce||_r>=De)return;if(gt>Bt){if(!_e)_e={x:_r,y:tt};else if(_e.y>=Ze)return;ge={x:_r,y:Ze}}else{if(!_e)_e={x:_r,y:Ze};else if(_e.y<tt)return;ge={x:_r,y:tt}}}else if(tr=(gt-Bt)/(qt-Dt),ir=Kt-tr*_r,tr<-1||tr>1)if(gt>Bt){if(!_e)_e={x:(tt-ir)/tr,y:tt};else if(_e.y>=Ze)return;ge={x:(Ze-ir)/tr,y:Ze}}else{if(!_e)_e={x:(Ze-ir)/tr,y:Ze};else if(_e.y<tt)return;ge={x:(tt-ir)/tr,y:tt}}else if(Dt<qt){if(!_e)_e={x:Ce,y:tr*Ce+ir};else if(_e.x>=De)return;ge={x:De,y:tr*De+ir}}else{if(!_e)_e={x:De,y:tr*De+ir};else if(_e.x<Ce)return;ge={x:Ce,y:tr*Ce+ir}}return W.a=_e,W.b=ge,!0}function ee(W,ue){this.l=W,this.r=ue,this.a=this.b=null}function Q(W,ue,ge,_e){var Ce=new ee(W,ue);return er.push(Ce),ge&&Se(Ce,W,ue,ge),_e&&Se(Ce,ue,W,_e),Ps[W.i].edges.push(new Fe(Ce,W,ue)),Ps[ue.i].edges.push(new Fe(Ce,ue,W)),Ce}function he(W,ue,ge){var _e=new ee(W,null);return _e.a=ue,_e.b=ge,er.push(_e),_e}function Se(W,ue,ge,_e){!W.a&&!W.b?(W.a=_e,W.l=ue,W.r=ge):W.l===ge?W.b=_e:W.a=_e}function Fe(W,ue,ge){var _e=W.a,Ce=W.b;this.edge=W,this.site=ue,this.angle=ge?Math.atan2(ge.y-ue.y,ge.x-ue.x):W.l===ue?Math.atan2(Ce.x-_e.x,_e.y-Ce.y):Math.atan2(_e.x-Ce.x,Ce.y-_e.y)}Fe.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function We(){this._=null}function it(W){W.U=W.C=W.L=W.R=W.P=W.N=null}We.prototype={insert:function(W,ue){var ge,_e,Ce;if(W){if(ue.P=W,ue.N=W.N,W.N&&(W.N.P=ue),W.N=ue,W.R){for(W=W.R;W.L;)W=W.L;W.L=ue}else W.R=ue;ge=W}else this._?(W=Qt(this._),ue.P=null,ue.N=W,W.P=W.L=ue,ge=W):(ue.P=ue.N=null,this._=ue,ge=null);for(ue.L=ue.R=null,ue.U=ge,ue.C=!0,W=ue;ge&&ge.C;)_e=ge.U,ge===_e.L?(Ce=_e.R,Ce&&Ce.C?(ge.C=Ce.C=!1,_e.C=!0,W=_e):(W===ge.R&&(dt(this,ge),W=ge,ge=W.U),ge.C=!1,_e.C=!0,Ft(this,_e))):(Ce=_e.L,Ce&&Ce.C?(ge.C=Ce.C=!1,_e.C=!0,W=_e):(W===ge.L&&(Ft(this,ge),W=ge,ge=W.U),ge.C=!1,_e.C=!0,dt(this,_e))),ge=W.U;this._.C=!1},remove:function(W){W.N&&(W.N.P=W.P),W.P&&(W.P.N=W.N),W.N=W.P=null;var ue=W.U,ge,_e=W.L,Ce=W.R,De,tt;if(_e?Ce?De=Qt(Ce):De=_e:De=Ce,ue?ue.L===W?ue.L=De:ue.R=De:this._=De,_e&&Ce?(tt=De.C,De.C=W.C,De.L=_e,_e.U=De,De!==Ce?(ue=De.U,De.U=W.U,W=De.R,ue.L=W,De.R=Ce,Ce.U=De):(De.U=ue,ue=De,W=De.R)):(tt=W.C,W=De),W&&(W.U=ue),!tt){if(W&&W.C){W.C=!1;return}do{if(W===this._)break;if(W===ue.L){if(ge=ue.R,ge.C&&(ge.C=!1,ue.C=!0,dt(this,ue),ge=ue.R),ge.L&&ge.L.C||ge.R&&ge.R.C){(!ge.R||!ge.R.C)&&(ge.L.C=!1,ge.C=!0,Ft(this,ge),ge=ue.R),ge.C=ue.C,ue.C=ge.R.C=!1,dt(this,ue),W=this._;break}}else if(ge=ue.L,ge.C&&(ge.C=!1,ue.C=!0,Ft(this,ue),ge=ue.L),ge.L&&ge.L.C||ge.R&&ge.R.C){(!ge.L||!ge.L.C)&&(ge.R.C=!1,ge.C=!0,dt(this,ge),ge=ue.L),ge.C=ue.C,ue.C=ge.L.C=!1,Ft(this,ue),W=this._;break}ge.C=!0,W=ue,ue=ue.U}while(!W.C);W&&(W.C=!1)}}};function dt(W,ue){var ge=ue,_e=ue.R,Ce=ge.U;Ce?Ce.L===ge?Ce.L=_e:Ce.R=_e:W._=_e,_e.U=Ce,ge.U=_e,ge.R=_e.L,ge.R&&(ge.R.U=ge),_e.L=ge}function Ft(W,ue){var ge=ue,_e=ue.L,Ce=ge.U;Ce?Ce.L===ge?Ce.L=_e:Ce.R=_e:W._=_e,_e.U=Ce,ge.U=_e,ge.L=_e.R,ge.L&&(ge.L.U=ge),_e.R=ge}function Qt(W){for(;W.L;)W=W.L;return W}function nr(W,ue){var ge=W.sort(ur).pop(),_e,Ce,De;for(er=[],Ps=new Array(W.length),rs=new We,hu=new We;;)if(De=li,ge&&(!De||ge.y<De.y||ge.y===De.y&&ge.x<De.x))(ge.x!==_e||ge.y!==Ce)&&(Ps[ge.i]=new jo(ge),sl(ge),_e=ge.x,Ce=ge.y),ge=W.pop();else if(De)df(De.arc);else break;ue&&(ll(ue),Kf(ue));var tt={cells:Ps,edges:er};return rs=hu=er=Ps=null,tt}function ur(W,ue){return ue.y-W.y||ue.x-W.x}r.geom.voronoi=function(W){var ue=$i,ge=Go,_e=ue,Ce=ge,De=yr;if(W)return tt(W);function tt(rt){var pt=new Array(rt.length),gt=De[0][0],Dt=De[0][1],Bt=De[1][0],qt=De[1][1];return nr(Ze(rt),De).cells.forEach(function(_r,Kt){var tr=_r.edges,ir=_r.site,wr=pt[Kt]=tr.length?tr.map(function(sr){var vr=sr.start();return[vr.x,vr.y]}):ir.x>=gt&&ir.x<=Bt&&ir.y>=Dt&&ir.y<=qt?[[gt,qt],[Bt,qt],[Bt,Dt],[gt,Dt]]:[];wr.point=rt[Kt]}),pt}function Ze(rt){return rt.map(function(pt,gt){return{x:Math.round(_e(pt,gt)/ot)*ot,y:Math.round(Ce(pt,gt)/ot)*ot,i:gt}})}return tt.links=function(rt){return nr(Ze(rt)).edges.filter(function(pt){return pt.l&&pt.r}).map(function(pt){return{source:rt[pt.l.i],target:rt[pt.r.i]}})},tt.triangles=function(rt){var pt=[];return nr(Ze(rt)).cells.forEach(function(gt,Dt){for(var Bt=gt.site,qt=gt.edges.sort(Du),_r=-1,Kt=qt.length,tr,ir=qt[Kt-1].edge,wr=ir.l===Bt?ir.r:ir.l;++_r<Kt;)tr=wr,ir=qt[_r].edge,wr=ir.l===Bt?ir.r:ir.l,Dt<tr.i&&Dt<wr.i&&br(Bt,tr,wr)<0&&pt.push([rt[Dt],rt[tr.i],rt[wr.i]])}),pt},tt.x=function(rt){return arguments.length?(_e=mr(ue=rt),tt):ue},tt.y=function(rt){return arguments.length?(Ce=mr(ge=rt),tt):ge},tt.clipExtent=function(rt){return arguments.length?(De=rt==null?yr:rt,tt):De===yr?null:De},tt.size=function(rt){return arguments.length?tt.clipExtent(rt&&[[0,0],rt]):De===yr?null:De&&De[1]},tt};var yr=[[-1e6,-1e6],[1e6,1e6]];function br(W,ue,ge){return(W.x-ge.x)*(ue.y-W.y)-(W.x-ue.x)*(ge.y-W.y)}r.geom.delaunay=function(W){return r.geom.voronoi().triangles(W)},r.geom.quadtree=function(W,ue,ge,_e,Ce){var De=$i,tt=Go,Ze;if(Ze=arguments.length)return De=Pr,tt=gr,Ze===3&&(Ce=ge,_e=ue,ge=ue=0),rt(W);function rt(pt){var gt,Dt=mr(De),Bt=mr(tt),qt,_r,Kt,tr,ir,wr,sr,vr;if(ue!=null)ir=ue,wr=ge,sr=_e,vr=Ce;else if(sr=vr=-(ir=wr=1/0),qt=[],_r=[],tr=pt.length,Ze)for(Kt=0;Kt<tr;++Kt)gt=pt[Kt],gt.x<ir&&(ir=gt.x),gt.y<wr&&(wr=gt.y),gt.x>sr&&(sr=gt.x),gt.y>vr&&(vr=gt.y),qt.push(gt.x),_r.push(gt.y);else for(Kt=0;Kt<tr;++Kt){var nn=+Dt(gt=pt[Kt],Kt),en=+Bt(gt,Kt);nn<ir&&(ir=nn),en<wr&&(wr=en),nn>sr&&(sr=nn),en>vr&&(vr=en),qt.push(nn),_r.push(en)}var Jr=sr-ir,Yr=vr-wr;Jr>Yr?vr=wr+Jr:sr=ir+Yr;function kn(Wn,Zn,fn,Pn,Vn,an,Tn,va){if(!(isNaN(fn)||isNaN(Pn)))if(Wn.leaf){var Fa=Wn.x,Wa=Wn.y;if(Fa!=null)if(x(Fa-fn)+x(Wa-Pn)<.01)In(Wn,Zn,fn,Pn,Vn,an,Tn,va);else{var _i=Wn.point;Wn.x=Wn.y=Wn.point=null,In(Wn,_i,Fa,Wa,Vn,an,Tn,va),In(Wn,Zn,fn,Pn,Vn,an,Tn,va)}else Wn.x=fn,Wn.y=Pn,Wn.point=Zn}else In(Wn,Zn,fn,Pn,Vn,an,Tn,va)}function In(Wn,Zn,fn,Pn,Vn,an,Tn,va){var Fa=(Vn+Tn)*.5,Wa=(an+va)*.5,_i=fn>=Fa,Ii=Pn>=Wa,Xo=Ii<<1|_i;Wn.leaf=!1,Wn=Wn.nodes[Xo]||(Wn.nodes[Xo]=Cr()),_i?Vn=Fa:Tn=Fa,Ii?an=Wa:va=Wa,kn(Wn,Zn,fn,Pn,Vn,an,Tn,va)}var ia=Cr();if(ia.add=function(Wn){kn(ia,Wn,+Dt(Wn,++Kt),+Bt(Wn,Kt),ir,wr,sr,vr)},ia.visit=function(Wn){Nr(Wn,ia,ir,wr,sr,vr)},ia.find=function(Wn){return Qr(ia,Wn[0],Wn[1],ir,wr,sr,vr)},Kt=-1,ue==null){for(;++Kt<tr;)kn(ia,pt[Kt],qt[Kt],_r[Kt],ir,wr,sr,vr);--Kt}else pt.forEach(ia.add);return qt=_r=pt=gt=null,ia}return rt.x=function(pt){return arguments.length?(De=pt,rt):De},rt.y=function(pt){return arguments.length?(tt=pt,rt):tt},rt.extent=function(pt){return arguments.length?(pt==null?ue=ge=_e=Ce=null:(ue=+pt[0][0],ge=+pt[0][1],_e=+pt[1][0],Ce=+pt[1][1]),rt):ue==null?null:[[ue,ge],[_e,Ce]]},rt.size=function(pt){return arguments.length?(pt==null?ue=ge=_e=Ce=null:(ue=ge=0,_e=+pt[0],Ce=+pt[1]),rt):ue==null?null:[_e-ue,Ce-ge]},rt};function Pr(W){return W.x}function gr(W){return W.y}function Cr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Nr(W,ue,ge,_e,Ce,De){if(!W(ue,ge,_e,Ce,De)){var tt=(ge+Ce)*.5,Ze=(_e+De)*.5,rt=ue.nodes;rt[0]&&Nr(W,rt[0],ge,_e,tt,Ze),rt[1]&&Nr(W,rt[1],tt,_e,Ce,Ze),rt[2]&&Nr(W,rt[2],ge,Ze,tt,De),rt[3]&&Nr(W,rt[3],tt,Ze,Ce,De)}}function Qr(W,ue,ge,_e,Ce,De,tt){var Ze=1/0,rt;return function pt(gt,Dt,Bt,qt,_r){if(!(Dt>De||Bt>tt||qt<_e||_r<Ce)){if(Kt=gt.point){var Kt,tr=ue-gt.x,ir=ge-gt.y,wr=tr*tr+ir*ir;if(wr<Ze){var sr=Math.sqrt(Ze=wr);_e=ue-sr,Ce=ge-sr,De=ue+sr,tt=ge+sr,rt=Kt}}for(var vr=gt.nodes,nn=(Dt+qt)*.5,en=(Bt+_r)*.5,Jr=ue>=nn,Yr=ge>=en,kn=Yr<<1|Jr,In=kn+4;kn<In;++kn)if(gt=vr[kn&3])switch(kn&3){case 0:pt(gt,Dt,Bt,nn,en);break;case 1:pt(gt,nn,Bt,qt,en);break;case 2:pt(gt,Dt,en,nn,_r);break;case 3:pt(gt,nn,en,qt,_r);break}}}(W,_e,Ce,De,tt),rt}r.interpolateRgb=bn;function bn(W,ue){W=r.rgb(W),ue=r.rgb(ue);var ge=W.r,_e=W.g,Ce=W.b,De=ue.r-ge,tt=ue.g-_e,Ze=ue.b-Ce;return function(rt){return"#"+Vr(Math.round(ge+De*rt))+Vr(Math.round(_e+tt*rt))+Vr(Math.round(Ce+Ze*rt))}}r.interpolateObject=un;function un(W,ue){var ge={},_e={},Ce;for(Ce in W)Ce in ue?ge[Ce]=qn(W[Ce],ue[Ce]):_e[Ce]=W[Ce];for(Ce in ue)Ce in W||(_e[Ce]=ue[Ce]);return function(De){for(Ce in ge)_e[Ce]=ge[Ce](De);return _e}}r.interpolateNumber=xn;function xn(W,ue){return W=+W,ue=+ue,function(ge){return W*(1-ge)+ue*ge}}r.interpolateString=zn;function zn(W,ue){var ge=Jn.lastIndex=Hn.lastIndex=0,_e,Ce,De,tt=-1,Ze=[],rt=[];for(W=W+"",ue=ue+"";(_e=Jn.exec(W))&&(Ce=Hn.exec(ue));)(De=Ce.index)>ge&&(De=ue.slice(ge,De),Ze[tt]?Ze[tt]+=De:Ze[++tt]=De),(_e=_e[0])===(Ce=Ce[0])?Ze[tt]?Ze[tt]+=Ce:Ze[++tt]=Ce:(Ze[++tt]=null,rt.push({i:tt,x:xn(_e,Ce)})),ge=Hn.lastIndex;return ge<ue.length&&(De=ue.slice(ge),Ze[tt]?Ze[tt]+=De:Ze[++tt]=De),Ze.length<2?rt[0]?(ue=rt[0].x,function(pt){return ue(pt)+""}):function(){return ue}:(ue=rt.length,function(pt){for(var gt=0,Dt;gt<ue;++gt)Ze[(Dt=rt[gt]).i]=Dt.x(pt);return Ze.join("")})}var Jn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hn=new RegExp(Jn.source,"g");r.interpolate=qn;function qn(W,ue){for(var ge=r.interpolators.length,_e;--ge>=0&&!(_e=r.interpolators[ge](W,ue)););return _e}r.interpolators=[function(W,ue){var ge=typeof ue;return(ge==="string"?rr.has(ue.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ue)?bn:zn:ue instanceof yt?bn:Array.isArray(ue)?ua:ge==="object"&&isNaN(ue)?un:xn)(W,ue)}],r.interpolateArray=ua;function ua(W,ue){var ge=[],_e=[],Ce=W.length,De=ue.length,tt=Math.min(W.length,ue.length),Ze;for(Ze=0;Ze<tt;++Ze)ge.push(qn(W[Ze],ue[Ze]));for(;Ze<Ce;++Ze)_e[Ze]=W[Ze];for(;Ze<De;++Ze)_e[Ze]=ue[Ze];return function(rt){for(Ze=0;Ze<tt;++Ze)_e[Ze]=ge[Ze](rt);return _e}}var za=function(){return G},Ca=r.map({linear:za,poly:Ia,quad:function(){return Ua},cubic:function(){return Da},sin:function(){return pa},exp:function(){return po},circle:function(){return Qi},elastic:Pi,back:Ai,bounce:function(){return qi}}),qa=r.map({in:G,out:Ba,"in-out":$a,"out-in":function(W){return $a(Ba(W))}});r.ease=function(W){var ue=W.indexOf("-"),ge=ue>=0?W.slice(0,ue):W,_e=ue>=0?W.slice(ue+1):"in";return ge=Ca.get(ge)||za,_e=qa.get(_e)||G,ha(_e(ge.apply(null,a.call(arguments,1))))};function ha(W){return function(ue){return ue<=0?0:ue>=1?1:W(ue)}}function Ba(W){return function(ue){return 1-W(1-ue)}}function $a(W){return function(ue){return .5*(ue<.5?W(2*ue):2-W(2-2*ue))}}function Ua(W){return W*W}function Da(W){return W*W*W}function Qa(W){if(W<=0)return 0;if(W>=1)return 1;var ue=W*W,ge=ue*W;return 4*(W<.5?ge:3*(W-ue)+ge-.75)}function Ia(W){return function(ue){return Math.pow(ue,W)}}function pa(W){return 1-Math.cos(W*Me)}function po(W){return Math.pow(2,10*(W-1))}function Qi(W){return 1-Math.sqrt(1-W*W)}function Pi(W,ue){var ge;return arguments.length<2&&(ue=.45),arguments.length?ge=ue/Ve*Math.asin(1/W):(W=1,ge=ue/4),function(_e){return 1+W*Math.pow(2,-10*_e)*Math.sin((_e-ge)*Ve/ue)}}function Ai(W){return W||(W=1.70158),function(ue){return ue*ue*((W+1)*ue-W)}}function qi(W){return W<1/2.75?7.5625*W*W:W<2/2.75?7.5625*(W-=1.5/2.75)*W+.75:W<2.5/2.75?7.5625*(W-=2.25/2.75)*W+.9375:7.5625*(W-=2.625/2.75)*W+.984375}r.interpolateHcl=Mi;function Mi(W,ue){W=r.hcl(W),ue=r.hcl(ue);var ge=W.h,_e=W.c,Ce=W.l,De=ue.h-ge,tt=ue.c-_e,Ze=ue.l-Ce;return isNaN(tt)&&(tt=0,_e=isNaN(_e)?ue.c:_e),isNaN(De)?(De=0,ge=isNaN(ge)?ue.h:ge):De>180?De-=360:De<-180&&(De+=360),function(rt){return Yt(ge+De*rt,_e+tt*rt,Ce+Ze*rt)+""}}r.interpolateHsl=ul;function ul(W,ue){W=r.hsl(W),ue=r.hsl(ue);var ge=W.h,_e=W.s,Ce=W.l,De=ue.h-ge,tt=ue.s-_e,Ze=ue.l-Ce;return isNaN(tt)&&(tt=0,_e=isNaN(_e)?ue.s:_e),isNaN(De)?(De=0,ge=isNaN(ge)?ue.h:ge):De>180?De-=360:De<-180&&(De+=360),function(rt){return Rt(ge+De*rt,_e+tt*rt,Ce+Ze*rt)+""}}r.interpolateLab=vo;function vo(W,ue){W=r.lab(W),ue=r.lab(ue);var ge=W.l,_e=W.a,Ce=W.b,De=ue.l-ge,tt=ue.a-_e,Ze=ue.b-Ce;return function(rt){return Rn(ge+De*rt,_e+tt*rt,Ce+Ze*rt)+""}}r.interpolateRound=Js;function Js(W,ue){return ue-=W,function(ge){return Math.round(W+ue*ge)}}r.transform=function(W){var ue=c.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(ge){if(ge!=null){ue.setAttribute("transform",ge);var _e=ue.transform.baseVal.consolidate()}return new cs(_e?_e.matrix:Fu)})(W)};function cs(W){var ue=[W.a,W.b],ge=[W.c,W.d],_e=El(ue),Ce=$s(ue,ge),De=El(zu(ge,ue,-Ce))||0;ue[0]*ge[1]<ge[0]*ue[1]&&(ue[0]*=-1,ue[1]*=-1,_e*=-1,Ce*=-1),this.rotate=(_e?Math.atan2(ue[1],ue[0]):Math.atan2(-ge[0],ge[1]))*He,this.translate=[W.e,W.f],this.scale=[_e,De],this.skew=De?Math.atan2(Ce,De)*He:0}cs.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function $s(W,ue){return W[0]*ue[0]+W[1]*ue[1]}function El(W){var ue=Math.sqrt($s(W,W));return ue&&(W[0]/=ue,W[1]/=ue),ue}function zu(W,ue,ge){return W[0]+=ge*ue[0],W[1]+=ge*ue[1],W}var Fu={a:1,b:0,c:0,d:1,e:0,f:0};r.interpolateTransform=mo;function xs(W){return W.length?W.pop()+",":""}function Ll(W,ue,ge,_e){if(W[0]!==ue[0]||W[1]!==ue[1]){var Ce=ge.push("translate(",null,",",null,")");_e.push({i:Ce-4,x:xn(W[0],ue[0])},{i:Ce-2,x:xn(W[1],ue[1])})}else(ue[0]||ue[1])&&ge.push("translate("+ue+")")}function mf(W,ue,ge,_e){W!==ue?(W-ue>180?ue+=360:ue-W>180&&(W+=360),_e.push({i:ge.push(xs(ge)+"rotate(",null,")")-2,x:xn(W,ue)})):ue&&ge.push(xs(ge)+"rotate("+ue+")")}function Ou(W,ue,ge,_e){W!==ue?_e.push({i:ge.push(xs(ge)+"skewX(",null,")")-2,x:xn(W,ue)}):ue&&ge.push(xs(ge)+"skewX("+ue+")")}function Qs(W,ue,ge,_e){if(W[0]!==ue[0]||W[1]!==ue[1]){var Ce=ge.push(xs(ge)+"scale(",null,",",null,")");_e.push({i:Ce-4,x:xn(W[0],ue[0])},{i:Ce-2,x:xn(W[1],ue[1])})}else(ue[0]!==1||ue[1]!==1)&&ge.push(xs(ge)+"scale("+ue+")")}function mo(W,ue){var ge=[],_e=[];return W=r.transform(W),ue=r.transform(ue),Ll(W.translate,ue.translate,ge,_e),mf(W.rotate,ue.rotate,ge,_e),Ou(W.skew,ue.skew,ge,_e),Qs(W.scale,ue.scale,ge,_e),W=ue=null,function(Ce){for(var De=-1,tt=_e.length,Ze;++De<tt;)ge[(Ze=_e[De]).i]=Ze.x(Ce);return ge.join("")}}function Ic(W,ue){return ue=(ue-=W=+W)||1/ue,function(ge){return(ge-W)/ue}}function zc(W,ue){return ue=(ue-=W=+W)||1/ue,function(ge){return Math.max(0,Math.min(1,(ge-W)/ue))}}r.layout={},r.layout.bundle=function(){return function(W){for(var ue=[],ge=-1,_e=W.length;++ge<_e;)ue.push(fo(W[ge]));return ue}};function fo(W){for(var ue=W.source,ge=W.target,_e=to(ue,ge),Ce=[ue];ue!==_e;)ue=ue.parent,Ce.push(ue);for(var De=Ce.length;ge!==_e;)Ce.splice(De,0,ge),ge=ge.parent;return Ce}function Nu(W){for(var ue=[],ge=W.parent;ge!=null;)ue.push(W),W=ge,ge=ge.parent;return ue.push(W),ue}function to(W,ue){if(W===ue)return W;for(var ge=Nu(W),_e=Nu(ue),Ce=ge.pop(),De=_e.pop(),tt=null;Ce===De;)tt=Ce,Ce=ge.pop(),De=_e.pop();return tt}r.layout.chord=function(){var W={},ue,ge,_e,Ce,De=0,tt,Ze,rt;function pt(){var Dt={},Bt=[],qt=r.range(Ce),_r=[],Kt,tr,ir,wr,sr;for(ue=[],ge=[],Kt=0,wr=-1;++wr<Ce;){for(tr=0,sr=-1;++sr<Ce;)tr+=_e[wr][sr];Bt.push(tr),_r.push(r.range(Ce)),Kt+=tr}for(tt&&qt.sort(function(ia,Wn){return tt(Bt[ia],Bt[Wn])}),Ze&&_r.forEach(function(ia,Wn){ia.sort(function(Zn,fn){return Ze(_e[Wn][Zn],_e[Wn][fn])})}),Kt=(Ve-De*Ce)/Kt,tr=0,wr=-1;++wr<Ce;){for(ir=tr,sr=-1;++sr<Ce;){var vr=qt[wr],nn=_r[vr][sr],en=_e[vr][nn],Jr=tr,Yr=tr+=en*Kt;Dt[vr+"-"+nn]={index:vr,subindex:nn,startAngle:Jr,endAngle:Yr,value:en}}ge[vr]={index:vr,startAngle:ir,endAngle:tr,value:Bt[vr]},tr+=De}for(wr=-1;++wr<Ce;)for(sr=wr-1;++sr<Ce;){var kn=Dt[wr+"-"+sr],In=Dt[sr+"-"+wr];(kn.value||In.value)&&ue.push(kn.value<In.value?{source:In,target:kn}:{source:kn,target:In})}rt&&gt()}function gt(){ue.sort(function(Dt,Bt){return rt((Dt.source.value+Dt.target.value)/2,(Bt.source.value+Bt.target.value)/2)})}return W.matrix=function(Dt){return arguments.length?(Ce=(_e=Dt)&&_e.length,ue=ge=null,W):_e},W.padding=function(Dt){return arguments.length?(De=Dt,ue=ge=null,W):De},W.sortGroups=function(Dt){return arguments.length?(tt=Dt,ue=ge=null,W):tt},W.sortSubgroups=function(Dt){return arguments.length?(Ze=Dt,ue=null,W):Ze},W.sortChords=function(Dt){return arguments.length?(rt=Dt,ue&&gt(),W):rt},W.chords=function(){return ue||pt(),ue},W.groups=function(){return ge||pt(),ge},W},r.layout.force=function(){var W={},ue=r.dispatch("start","tick","end"),ge,_e=[1,1],Ce,De,tt=.9,Ze=Mh,rt=oc,pt=-30,gt=kh,Dt=.1,Bt=.64,qt=[],_r=[],Kt,tr,ir;function wr(vr){return function(nn,en,Jr,Yr){if(nn.point!==vr){var kn=nn.cx-vr.x,In=nn.cy-vr.y,ia=Yr-en,Wn=kn*kn+In*In;if(ia*ia/Bt<Wn){if(Wn<gt){var Zn=nn.charge/Wn;vr.px-=kn*Zn,vr.py-=In*Zn}return!0}if(nn.point&&Wn&&Wn<gt){var Zn=nn.pointCharge/Wn;vr.px-=kn*Zn,vr.py-=In*Zn}}return!nn.charge}}W.tick=function(){if((De*=.99)<.005)return ge=null,ue.end({type:"end",alpha:De=0}),!0;var vr=qt.length,nn=_r.length,en,Jr,Yr,kn,In,ia,Wn,Zn,fn;for(Jr=0;Jr<nn;++Jr)Yr=_r[Jr],kn=Yr.source,In=Yr.target,Zn=In.x-kn.x,fn=In.y-kn.y,(ia=Zn*Zn+fn*fn)&&(ia=De*tr[Jr]*((ia=Math.sqrt(ia))-Kt[Jr])/ia,Zn*=ia,fn*=ia,In.x-=Zn*(Wn=kn.weight+In.weight?kn.weight/(kn.weight+In.weight):.5),In.y-=fn*Wn,kn.x+=Zn*(Wn=1-Wn),kn.y+=fn*Wn);if((Wn=De*Dt)&&(Zn=_e[0]/2,fn=_e[1]/2,Jr=-1,Wn))for(;++Jr<vr;)Yr=qt[Jr],Yr.x+=(Zn-Yr.x)*Wn,Yr.y+=(fn-Yr.y)*Wn;if(pt)for(gf(en=r.geom.quadtree(qt),De,ir),Jr=-1;++Jr<vr;)(Yr=qt[Jr]).fixed||en.visit(wr(Yr));for(Jr=-1;++Jr<vr;)Yr=qt[Jr],Yr.fixed?(Yr.x=Yr.px,Yr.y=Yr.py):(Yr.x-=(Yr.px-(Yr.px=Yr.x))*tt,Yr.y-=(Yr.py-(Yr.py=Yr.y))*tt);ue.tick({type:"tick",alpha:De})},W.nodes=function(vr){return arguments.length?(qt=vr,W):qt},W.links=function(vr){return arguments.length?(_r=vr,W):_r},W.size=function(vr){return arguments.length?(_e=vr,W):_e},W.linkDistance=function(vr){return arguments.length?(Ze=typeof vr=="function"?vr:+vr,W):Ze},W.distance=W.linkDistance,W.linkStrength=function(vr){return arguments.length?(rt=typeof vr=="function"?vr:+vr,W):rt},W.friction=function(vr){return arguments.length?(tt=+vr,W):tt},W.charge=function(vr){return arguments.length?(pt=typeof vr=="function"?vr:+vr,W):pt},W.chargeDistance=function(vr){return arguments.length?(gt=vr*vr,W):Math.sqrt(gt)},W.gravity=function(vr){return arguments.length?(Dt=+vr,W):Dt},W.theta=function(vr){return arguments.length?(Bt=vr*vr,W):Math.sqrt(Bt)},W.alpha=function(vr){return arguments.length?(vr=+vr,De?vr>0?De=vr:(ge.c=null,ge.t=NaN,ge=null,ue.end({type:"end",alpha:De=0})):vr>0&&(ue.start({type:"start",alpha:De=vr}),ge=Sa(W.tick)),W):De},W.start=function(){var vr,nn=qt.length,en=_r.length,Jr=_e[0],Yr=_e[1],kn,In;for(vr=0;vr<nn;++vr)(In=qt[vr]).index=vr,In.weight=0;for(vr=0;vr<en;++vr)In=_r[vr],typeof In.source=="number"&&(In.source=qt[In.source]),typeof In.target=="number"&&(In.target=qt[In.target]),++In.source.weight,++In.target.weight;for(vr=0;vr<nn;++vr)In=qt[vr],isNaN(In.x)&&(In.x=ia("x",Jr)),isNaN(In.y)&&(In.y=ia("y",Yr)),isNaN(In.px)&&(In.px=In.x),isNaN(In.py)&&(In.py=In.y);if(Kt=[],typeof Ze=="function")for(vr=0;vr<en;++vr)Kt[vr]=+Ze.call(this,_r[vr],vr);else for(vr=0;vr<en;++vr)Kt[vr]=Ze;if(tr=[],typeof rt=="function")for(vr=0;vr<en;++vr)tr[vr]=+rt.call(this,_r[vr],vr);else for(vr=0;vr<en;++vr)tr[vr]=rt;if(ir=[],typeof pt=="function")for(vr=0;vr<nn;++vr)ir[vr]=+pt.call(this,qt[vr],vr);else for(vr=0;vr<nn;++vr)ir[vr]=pt;function ia(Wn,Zn){if(!kn){for(kn=new Array(nn),Vn=0;Vn<nn;++Vn)kn[Vn]=[];for(Vn=0;Vn<en;++Vn){var fn=_r[Vn];kn[fn.source.index].push(fn.target),kn[fn.target.index].push(fn.source)}}for(var Pn=kn[vr],Vn=-1,an=Pn.length,Tn;++Vn<an;)if(!isNaN(Tn=Pn[Vn][Wn]))return Tn;return Math.random()*Zn}return W.resume()},W.resume=function(){return W.alpha(.1)},W.stop=function(){return W.alpha(0)},W.drag=function(){if(Ce||(Ce=r.behavior.drag().origin(G).on("dragstart.force",Ds).on("drag.force",sr).on("dragend.force",bs)),!arguments.length)return Ce;this.on("mouseover.force",vu).on("mouseout.force",iv).call(Ce)};function sr(vr){vr.px=r.event.x,vr.py=r.event.y,W.resume()}return r.rebind(W,ue,"on")};function Ds(W){W.fixed|=2}function bs(W){W.fixed&=-7}function vu(W){W.fixed|=4,W.px=W.x,W.py=W.y}function iv(W){W.fixed&=-5}function gf(W,ue,ge){var _e=0,Ce=0;if(W.charge=0,!W.leaf)for(var De=W.nodes,tt=De.length,Ze=-1,rt;++Ze<tt;)rt=De[Ze],rt!=null&&(gf(rt,ue,ge),W.charge+=rt.charge,_e+=rt.charge*rt.cx,Ce+=rt.charge*rt.cy);if(W.point){W.leaf||(W.point.x+=Math.random()-.5,W.point.y+=Math.random()-.5);var pt=ue*ge[W.point.index];W.charge+=W.pointCharge=pt,_e+=pt*W.point.x,Ce+=pt*W.point.y}W.cx=_e/W.charge,W.cy=Ce/W.charge}var Mh=20,oc=1,kh=1/0;r.layout.hierarchy=function(){var W=ed,ue=Qv,ge=qv;function _e(Ce){var De=[Ce],tt=[],Ze;for(Ce.depth=0;(Ze=De.pop())!=null;)if(tt.push(Ze),(pt=ue.call(_e,Ze,Ze.depth))&&(rt=pt.length)){for(var rt,pt,gt;--rt>=0;)De.push(gt=pt[rt]),gt.parent=Ze,gt.depth=Ze.depth+1;ge&&(Ze.value=0),Ze.children=pt}else ge&&(Ze.value=+ge.call(_e,Ze,Ze.depth)||0),delete Ze.children;return ro(Ce,function(Dt){var Bt,qt;W&&(Bt=Dt.children)&&Bt.sort(W),ge&&(qt=Dt.parent)&&(qt.value+=Dt.value)}),tt}return _e.sort=function(Ce){return arguments.length?(W=Ce,_e):W},_e.children=function(Ce){return arguments.length?(ue=Ce,_e):ue},_e.value=function(Ce){return arguments.length?(ge=Ce,_e):ge},_e.revalue=function(Ce){return ge&&(el(Ce,function(De){De.children&&(De.value=0)}),ro(Ce,function(De){var tt;De.children||(De.value=+ge.call(_e,De,De.depth)||0),(tt=De.parent)&&(tt.value+=De.value)})),Ce},_e};function qs(W,ue){return r.rebind(W,ue,"sort","children","value"),W.nodes=W,W.links=y0,W}function el(W,ue){for(var ge=[W];(W=ge.pop())!=null;)if(ue(W),(Ce=W.children)&&(_e=Ce.length))for(var _e,Ce;--_e>=0;)ge.push(Ce[_e])}function ro(W,ue){for(var ge=[W],_e=[];(W=ge.pop())!=null;)if(_e.push(W),(tt=W.children)&&(De=tt.length))for(var Ce=-1,De,tt;++Ce<De;)ge.push(tt[Ce]);for(;(W=_e.pop())!=null;)ue(W)}function Qv(W){return W.children}function qv(W){return W.value}function ed(W,ue){return ue.value-W.value}function y0(W){return r.merge(W.map(function(ue){return(ue.children||[]).map(function(ge){return{source:ue,target:ge}})}))}r.layout.partition=function(){var W=r.layout.hierarchy(),ue=[1,1];function ge(De,tt,Ze,rt){var pt=De.children;if(De.x=tt,De.y=De.depth*rt,De.dx=Ze,De.dy=rt,pt&&(Dt=pt.length)){var gt=-1,Dt,Bt,qt;for(Ze=De.value?Ze/De.value:0;++gt<Dt;)ge(Bt=pt[gt],tt,qt=Bt.value*Ze,rt),tt+=qt}}function _e(De){var tt=De.children,Ze=0;if(tt&&(pt=tt.length))for(var rt=-1,pt;++rt<pt;)Ze=Math.max(Ze,_e(tt[rt]));return 1+Ze}function Ce(De,tt){var Ze=W.call(this,De,tt);return ge(Ze[0],0,ue[0],ue[1]/_e(Ze[0])),Ze}return Ce.size=function(De){return arguments.length?(ue=De,Ce):ue},qs(Ce,W)},r.layout.pie=function(){var W=Number,ue=fp,ge=0,_e=Ve,Ce=0;function De(tt){var Ze=tt.length,rt=tt.map(function(wr,sr){return+W.call(De,wr,sr)}),pt=+(typeof ge=="function"?ge.apply(this,arguments):ge),gt=(typeof _e=="function"?_e.apply(this,arguments):_e)-pt,Dt=Math.min(Math.abs(gt)/Ze,+(typeof Ce=="function"?Ce.apply(this,arguments):Ce)),Bt=Dt*(gt<0?-1:1),qt=r.sum(rt),_r=qt?(gt-Ze*Bt)/qt:0,Kt=r.range(Ze),tr=[],ir;return ue!=null&&Kt.sort(ue===fp?function(wr,sr){return rt[sr]-rt[wr]}:function(wr,sr){return ue(tt[wr],tt[sr])}),Kt.forEach(function(wr){tr[wr]={data:tt[wr],value:ir=rt[wr],startAngle:pt,endAngle:pt+=ir*_r+Bt,padAngle:Dt}}),tr}return De.value=function(tt){return arguments.length?(W=tt,De):W},De.sort=function(tt){return arguments.length?(ue=tt,De):ue},De.startAngle=function(tt){return arguments.length?(ge=tt,De):ge},De.endAngle=function(tt){return arguments.length?(_e=tt,De):_e},De.padAngle=function(tt){return arguments.length?(Ce=tt,De):Ce},De};var fp={};r.layout.stack=function(){var W=G,ue=Bu,ge=yf,_e=x0,Ce=ov,De=Sh;function tt(Ze,rt){if(!(_r=Ze.length))return Ze;var pt=Ze.map(function(wr,sr){return W.call(tt,wr,sr)}),gt=pt.map(function(wr){return wr.map(function(sr,vr){return[Ce.call(tt,sr,vr),De.call(tt,sr,vr)]})}),Dt=ue.call(tt,gt,rt);pt=r.permute(pt,Dt),gt=r.permute(gt,Dt);var Bt=ge.call(tt,gt,rt),qt=pt[0].length,_r,Kt,tr,ir;for(tr=0;tr<qt;++tr)for(_e.call(tt,pt[0][tr],ir=Bt[tr],gt[0][tr][1]),Kt=1;Kt<_r;++Kt)_e.call(tt,pt[Kt][tr],ir+=gt[Kt-1][tr][1],gt[Kt][tr][1]);return Ze}return tt.values=function(Ze){return arguments.length?(W=Ze,tt):W},tt.order=function(Ze){return arguments.length?(ue=typeof Ze=="function"?Ze:Jf.get(Ze)||Bu,tt):ue},tt.offset=function(Ze){return arguments.length?(ge=typeof Ze=="function"?Ze:fi.get(Ze)||yf,tt):ge},tt.x=function(Ze){return arguments.length?(Ce=Ze,tt):Ce},tt.y=function(Ze){return arguments.length?(De=Ze,tt):De},tt.out=function(Ze){return arguments.length?(_e=Ze,tt):_e},tt};function ov(W){return W.x}function Sh(W){return W.y}function x0(W,ue,ge){W.y0=ue,W.y=ge}var Jf=r.map({"inside-out":function(W){var ue=W.length,ge,_e,Ce=W.map(Ch),De=W.map(td),tt=r.range(ue).sort(function(Dt,Bt){return Ce[Dt]-Ce[Bt]}),Ze=0,rt=0,pt=[],gt=[];for(ge=0;ge<ue;++ge)_e=tt[ge],Ze<rt?(Ze+=De[_e],pt.push(_e)):(rt+=De[_e],gt.push(_e));return gt.reverse().concat(pt)},reverse:function(W){return r.range(W.length).reverse()},default:Bu}),fi=r.map({silhouette:function(W){var ue=W.length,ge=W[0].length,_e=[],Ce=0,De,tt,Ze,rt=[];for(tt=0;tt<ge;++tt){for(De=0,Ze=0;De<ue;De++)Ze+=W[De][tt][1];Ze>Ce&&(Ce=Ze),_e.push(Ze)}for(tt=0;tt<ge;++tt)rt[tt]=(Ce-_e[tt])/2;return rt},wiggle:function(W){var ue=W.length,ge=W[0],_e=ge.length,Ce,De,tt,Ze,rt,pt,gt,Dt,Bt,qt=[];for(qt[0]=Dt=Bt=0,De=1;De<_e;++De){for(Ce=0,Ze=0;Ce<ue;++Ce)Ze+=W[Ce][De][1];for(Ce=0,rt=0,gt=ge[De][0]-ge[De-1][0];Ce<ue;++Ce){for(tt=0,pt=(W[Ce][De][1]-W[Ce][De-1][1])/(2*gt);tt<Ce;++tt)pt+=(W[tt][De][1]-W[tt][De-1][1])/gt;rt+=pt*W[Ce][De][1]}qt[De]=Dt-=Ze?rt/Ze*gt:0,Dt<Bt&&(Bt=Dt)}for(De=0;De<_e;++De)qt[De]-=Bt;return qt},expand:function(W){var ue=W.length,ge=W[0].length,_e=1/ue,Ce,De,tt,Ze=[];for(De=0;De<ge;++De){for(Ce=0,tt=0;Ce<ue;Ce++)tt+=W[Ce][De][1];if(tt)for(Ce=0;Ce<ue;Ce++)W[Ce][De][1]/=tt;else for(Ce=0;Ce<ue;Ce++)W[Ce][De][1]=_e}for(De=0;De<ge;++De)Ze[De]=0;return Ze},zero:yf});function Bu(W){return r.range(W.length)}function yf(W){for(var ue=-1,ge=W[0].length,_e=[];++ue<ge;)_e[ue]=0;return _e}function Ch(W){for(var ue=1,ge=0,_e=W[0][1],Ce,De=W.length;ue<De;++ue)(Ce=W[ue][1])>_e&&(ge=ue,_e=Ce);return ge}function td(W){return W.reduce(b0,0)}function b0(W,ue){return W+ue[1]}r.layout.histogram=function(){var W=!0,ue=Number,ge=w0,_e=_0;function Ce(De,Bt){for(var Ze=[],rt=De.map(ue,this),pt=ge.call(this,rt,Bt),gt=_e.call(this,pt,rt,Bt),Dt,Bt=-1,qt=rt.length,_r=gt.length-1,Kt=W?1:1/qt,tr;++Bt<_r;)Dt=Ze[Bt]=[],Dt.dx=gt[Bt+1]-(Dt.x=gt[Bt]),Dt.y=0;if(_r>0)for(Bt=-1;++Bt<qt;)tr=rt[Bt],tr>=pt[0]&&tr<=pt[1]&&(Dt=Ze[r.bisect(gt,tr,1,_r)-1],Dt.y+=Kt,Dt.push(De[Bt]));return Ze}return Ce.value=function(De){return arguments.length?(ue=De,Ce):ue},Ce.range=function(De){return arguments.length?(ge=mr(De),Ce):ge},Ce.bins=function(De){return arguments.length?(_e=typeof De=="number"?function(tt){return Pl(tt,De)}:mr(De),Ce):_e},Ce.frequency=function(De){return arguments.length?(W=!!De,Ce):W},Ce};function _0(W,ue){return Pl(W,Math.ceil(Math.log(ue.length)/Math.LN2+1))}function Pl(W,ue){for(var ge=-1,_e=+W[0],Ce=(W[1]-_e)/ue,De=[];++ge<=ue;)De[ge]=Ce*ge+_e;return De}function w0(W){return[r.min(W),r.max(W)]}r.layout.pack=function(){var W=r.layout.hierarchy().sort(hp),ue=0,ge=[1,1],_e;function Ce(De,tt){var Ze=W.call(this,De,tt),rt=Ze[0],pt=ge[0],gt=ge[1],Dt=_e==null?Math.sqrt:typeof _e=="function"?_e:function(){return _e};if(rt.x=rt.y=0,ro(rt,function(qt){qt.r=+Dt(qt.value)}),ro(rt,cl),ue){var Bt=ue*(_e?1:Math.max(2*rt.r/pt,2*rt.r/gt))/2;ro(rt,function(qt){qt.r+=Bt}),ro(rt,cl),ro(rt,function(qt){qt.r-=Bt})}return pp(rt,pt/2,gt/2,_e?1:1/Math.max(2*rt.r/pt,2*rt.r/gt)),Ze}return Ce.size=function(De){return arguments.length?(ge=De,Ce):ge},Ce.radius=function(De){return arguments.length?(_e=De==null||typeof De=="function"?De:+De,Ce):_e},Ce.padding=function(De){return arguments.length?(ue=+De,Ce):ue},qs(Ce,W)};function hp(W,ue){return W.value-ue.value}function xf(W,ue){var ge=W._pack_next;W._pack_next=ue,ue._pack_prev=W,ue._pack_next=ge,ge._pack_prev=ue}function sv(W,ue){W._pack_next=ue,ue._pack_prev=W}function Fc(W,ue){var ge=ue.x-W.x,_e=ue.y-W.y,Ce=W.r+ue.r;return .999*Ce*Ce>ge*ge+_e*_e}function cl(W){if(!(ue=W.children)||!(Bt=ue.length))return;var ue,ge=1/0,_e=-1/0,Ce=1/0,De=-1/0,tt,Ze,rt,pt,gt,Dt,Bt;function qt(vr){ge=Math.min(vr.x-vr.r,ge),_e=Math.max(vr.x+vr.r,_e),Ce=Math.min(vr.y-vr.r,Ce),De=Math.max(vr.y+vr.r,De)}if(ue.forEach(Ni),tt=ue[0],tt.x=-tt.r,tt.y=0,qt(tt),Bt>1&&(Ze=ue[1],Ze.x=Ze.r,Ze.y=0,qt(Ze),Bt>2))for(rt=ue[2],Oc(tt,Ze,rt),qt(rt),xf(tt,rt),tt._pack_prev=rt,xf(rt,Ze),Ze=tt._pack_next,pt=3;pt<Bt;pt++){Oc(tt,Ze,rt=ue[pt]);var _r=0,Kt=1,tr=1;for(gt=Ze._pack_next;gt!==Ze;gt=gt._pack_next,Kt++)if(Fc(gt,rt)){_r=1;break}if(_r==1)for(Dt=tt._pack_prev;Dt!==gt._pack_prev&&!Fc(Dt,rt);Dt=Dt._pack_prev,tr++);_r?(Kt<tr||Kt==tr&&Ze.r<tt.r?sv(tt,Ze=gt):sv(tt=Dt,Ze),pt--):(xf(tt,rt),Ze=rt,qt(rt))}var ir=(ge+_e)/2,wr=(Ce+De)/2,sr=0;for(pt=0;pt<Bt;pt++)rt=ue[pt],rt.x-=ir,rt.y-=wr,sr=Math.max(sr,rt.r+Math.sqrt(rt.x*rt.x+rt.y*rt.y));W.r=sr,ue.forEach($f)}function Ni(W){W._pack_next=W._pack_prev=W}function $f(W){delete W._pack_next,delete W._pack_prev}function pp(W,ue,ge,_e){var Ce=W.children;if(W.x=ue+=_e*W.x,W.y=ge+=_e*W.y,W.r*=_e,Ce)for(var De=-1,tt=Ce.length;++De<tt;)pp(Ce[De],ue,ge,_e)}function Oc(W,ue,ge){var _e=W.r+ge.r,Ce=ue.x-W.x,De=ue.y-W.y;if(_e&&(Ce||De)){var tt=ue.r+ge.r,Ze=Ce*Ce+De*De;tt*=tt,_e*=_e;var rt=.5+(_e-tt)/(2*Ze),pt=Math.sqrt(Math.max(0,2*tt*(_e+Ze)-(_e-=Ze)*_e-tt*tt))/(2*Ze);ge.x=W.x+rt*Ce+pt*De,ge.y=W.y+rt*De-pt*Ce}else ge.x=W.x+_e,ge.y=W.y}r.layout.tree=function(){var W=r.layout.hierarchy().sort(null).value(null),ue=Qf,ge=[1,1],_e=null;function Ce(gt,Dt){var Bt=W.call(this,gt,Dt),qt=Bt[0],_r=De(qt);if(ro(_r,tt),_r.parent.m=-_r.z,el(_r,Ze),_e)el(qt,pt);else{var Kt=qt,tr=qt,ir=qt;el(qt,function(nn){nn.x<Kt.x&&(Kt=nn),nn.x>tr.x&&(tr=nn),nn.depth>ir.depth&&(ir=nn)});var wr=ue(Kt,tr)/2-Kt.x,sr=ge[0]/(tr.x+ue(tr,Kt)/2+wr),vr=ge[1]/(ir.depth||1);el(qt,function(nn){nn.x=(nn.x+wr)*sr,nn.y=nn.depth*vr})}return Bt}function De(gt){for(var Dt={A:null,children:[gt]},Bt=[Dt],qt;(qt=Bt.pop())!=null;)for(var _r=qt.children,Kt,tr=0,ir=_r.length;tr<ir;++tr)Bt.push((_r[tr]=Kt={_:_r[tr],parent:qt,children:(Kt=_r[tr].children)&&Kt.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:tr}).a=Kt);return Dt.children[0]}function tt(gt){var Dt=gt.children,Bt=gt.parent.children,qt=gt.i?Bt[gt.i-1]:null;if(Dt.length){bf(gt);var _r=(Dt[0].z+Dt[Dt.length-1].z)/2;qt?(gt.z=qt.z+ue(gt._,qt._),gt.m=gt.z-_r):gt.z=_r}else qt&&(gt.z=qt.z+ue(gt._,qt._));gt.parent.A=rt(gt,qt,gt.parent.A||Bt[0])}function Ze(gt){gt._.x=gt.z+gt.parent.m,gt.m+=gt.parent.m}function rt(gt,Dt,Bt){if(Dt){for(var qt=gt,_r=gt,Kt=Dt,tr=qt.parent.children[0],ir=qt.m,wr=_r.m,sr=Kt.m,vr=tr.m,nn;Kt=Eh(Kt),qt=sc(qt),Kt&&qt;)tr=sc(tr),_r=Eh(_r),_r.a=gt,nn=Kt.z+sr-qt.z-ir+ue(Kt._,qt._),nn>0&&(vp(Uu(Kt,gt,Bt),gt,nn),ir+=nn,wr+=nn),sr+=Kt.m,ir+=qt.m,vr+=tr.m,wr+=_r.m;Kt&&!Eh(_r)&&(_r.t=Kt,_r.m+=sr-wr),qt&&!sc(tr)&&(tr.t=qt,tr.m+=ir-vr,Bt=gt)}return Bt}function pt(gt){gt.x*=ge[0],gt.y=gt.depth*ge[1]}return Ce.separation=function(gt){return arguments.length?(ue=gt,Ce):ue},Ce.size=function(gt){return arguments.length?(_e=(ge=gt)==null?pt:null,Ce):_e?null:ge},Ce.nodeSize=function(gt){return arguments.length?(_e=(ge=gt)==null?null:pt,Ce):_e?ge:null},qs(Ce,W)};function Qf(W,ue){return W.parent==ue.parent?1:2}function sc(W){var ue=W.children;return ue.length?ue[0]:W.t}function Eh(W){var ue=W.children,ge;return(ge=ue.length)?ue[ge-1]:W.t}function vp(W,ue,ge){var _e=ge/(ue.i-W.i);ue.c-=_e,ue.s+=ge,W.c+=_e,ue.z+=ge,ue.m+=ge}function bf(W){for(var ue=0,ge=0,_e=W.children,Ce=_e.length,De;--Ce>=0;)De=_e[Ce],De.z+=ue,De.m+=ue,ue+=De.s+(ge+=De.c)}function Uu(W,ue,ge){return W.a.parent===ue.parent?W.a:ge}r.layout.cluster=function(){var W=r.layout.hierarchy().sort(null).value(null),ue=Qf,ge=[1,1],_e=!1;function Ce(De,tt){var Ze=W.call(this,De,tt),rt=Ze[0],pt,gt=0;ro(rt,function(Kt){var tr=Kt.children;tr&&tr.length?(Kt.x=Nc(tr),Kt.y=lv(tr)):(Kt.x=pt?gt+=ue(Kt,pt):0,Kt.y=0,pt=Kt)});var Dt=_f(rt),Bt=uv(rt),qt=Dt.x-ue(Dt,Bt)/2,_r=Bt.x+ue(Bt,Dt)/2;return ro(rt,_e?function(Kt){Kt.x=(Kt.x-rt.x)*ge[0],Kt.y=(rt.y-Kt.y)*ge[1]}:function(Kt){Kt.x=(Kt.x-qt)/(_r-qt)*ge[0],Kt.y=(1-(rt.y?Kt.y/rt.y:1))*ge[1]}),Ze}return Ce.separation=function(De){return arguments.length?(ue=De,Ce):ue},Ce.size=function(De){return arguments.length?(_e=(ge=De)==null,Ce):_e?null:ge},Ce.nodeSize=function(De){return arguments.length?(_e=(ge=De)!=null,Ce):_e?ge:null},qs(Ce,W)};function lv(W){return 1+r.max(W,function(ue){return ue.y})}function Nc(W){return W.reduce(function(ue,ge){return ue+ge.x},0)/W.length}function _f(W){var ue=W.children;return ue&&ue.length?_f(ue[0]):W}function uv(W){var ue=W.children,ge;return ue&&(ge=ue.length)?uv(ue[ge-1]):W}r.layout.treemap=function(){var W=r.layout.hierarchy(),ue=Math.round,ge=[1,1],_e=null,Ce=wf,De=!1,tt,Ze="squarify",rt=.5*(1+Math.sqrt(5));function pt(Kt,tr){for(var ir=-1,wr=Kt.length,sr,vr;++ir<wr;)vr=(sr=Kt[ir]).value*(tr<0?0:tr),sr.area=isNaN(vr)||vr<=0?0:vr}function gt(Kt){var tr=Kt.children;if(tr&&tr.length){var ir=Ce(Kt),wr=[],sr=tr.slice(),vr,nn=1/0,en,Jr=Ze==="slice"?ir.dx:Ze==="dice"?ir.dy:Ze==="slice-dice"?Kt.depth&1?ir.dy:ir.dx:Math.min(ir.dx,ir.dy),Yr;for(pt(sr,ir.dx*ir.dy/Kt.value),wr.area=0;(Yr=sr.length)>0;)wr.push(vr=sr[Yr-1]),wr.area+=vr.area,Ze!=="squarify"||(en=Bt(wr,Jr))<=nn?(sr.pop(),nn=en):(wr.area-=wr.pop().area,qt(wr,Jr,ir,!1),Jr=Math.min(ir.dx,ir.dy),wr.length=wr.area=0,nn=1/0);wr.length&&(qt(wr,Jr,ir,!0),wr.length=wr.area=0),tr.forEach(gt)}}function Dt(Kt){var tr=Kt.children;if(tr&&tr.length){var ir=Ce(Kt),wr=tr.slice(),sr,vr=[];for(pt(wr,ir.dx*ir.dy/Kt.value),vr.area=0;sr=wr.pop();)vr.push(sr),vr.area+=sr.area,sr.z!=null&&(qt(vr,sr.z?ir.dx:ir.dy,ir,!wr.length),vr.length=vr.area=0);tr.forEach(Dt)}}function Bt(Kt,tr){for(var ir=Kt.area,wr,sr=0,vr=1/0,nn=-1,en=Kt.length;++nn<en;)!(wr=Kt[nn].area)||(wr<vr&&(vr=wr),wr>sr&&(sr=wr));return ir*=ir,tr*=tr,ir?Math.max(tr*sr*rt/ir,ir/(tr*vr*rt)):1/0}function qt(Kt,tr,ir,wr){var sr=-1,vr=Kt.length,nn=ir.x,en=ir.y,Jr=tr?ue(Kt.area/tr):0,Yr;if(tr==ir.dx){for((wr||Jr>ir.dy)&&(Jr=ir.dy);++sr<vr;)Yr=Kt[sr],Yr.x=nn,Yr.y=en,Yr.dy=Jr,nn+=Yr.dx=Math.min(ir.x+ir.dx-nn,Jr?ue(Yr.area/Jr):0);Yr.z=!0,Yr.dx+=ir.x+ir.dx-nn,ir.y+=Jr,ir.dy-=Jr}else{for((wr||Jr>ir.dx)&&(Jr=ir.dx);++sr<vr;)Yr=Kt[sr],Yr.x=nn,Yr.y=en,Yr.dx=Jr,en+=Yr.dy=Math.min(ir.y+ir.dy-en,Jr?ue(Yr.area/Jr):0);Yr.z=!1,Yr.dy+=ir.y+ir.dy-en,ir.x+=Jr,ir.dx-=Jr}}function _r(Kt){var tr=tt||W(Kt),ir=tr[0];return ir.x=ir.y=0,ir.value?(ir.dx=ge[0],ir.dy=ge[1]):ir.dx=ir.dy=0,tt&&W.revalue(ir),pt([ir],ir.dx*ir.dy/ir.value),(tt?Dt:gt)(ir),De&&(tt=tr),tr}return _r.size=function(Kt){return arguments.length?(ge=Kt,_r):ge},_r.padding=function(Kt){if(!arguments.length)return _e;function tr(sr){var vr=Kt.call(_r,sr,sr.depth);return vr==null?wf(sr):rd(sr,typeof vr=="number"?[vr,vr,vr,vr]:vr)}function ir(sr){return rd(sr,Kt)}var wr;return Ce=(_e=Kt)==null?wf:(wr=typeof Kt)=="function"?tr:(wr==="number"&&(Kt=[Kt,Kt,Kt,Kt]),ir),_r},_r.round=function(Kt){return arguments.length?(ue=Kt?Math.round:Number,_r):ue!=Number},_r.sticky=function(Kt){return arguments.length?(De=Kt,tt=null,_r):De},_r.ratio=function(Kt){return arguments.length?(rt=Kt,_r):rt},_r.mode=function(Kt){return arguments.length?(Ze=Kt+"",_r):Ze},qs(_r,W)};function wf(W){return{x:W.x,y:W.y,dx:W.dx,dy:W.dy}}function rd(W,ue){var ge=W.x+ue[3],_e=W.y+ue[0],Ce=W.dx-ue[1]-ue[3],De=W.dy-ue[0]-ue[2];return Ce<0&&(ge+=Ce/2,Ce=0),De<0&&(_e+=De/2,De=0),{x:ge,y:_e,dx:Ce,dy:De}}r.random={normal:function(W,ue){var ge=arguments.length;return ge<2&&(ue=1),ge<1&&(W=0),function(){var _e,Ce,De;do _e=Math.random()*2-1,Ce=Math.random()*2-1,De=_e*_e+Ce*Ce;while(!De||De>1);return W+ue*_e*Math.sqrt(-2*Math.log(De)/De)}},logNormal:function(){var W=r.random.normal.apply(r,arguments);return function(){return Math.exp(W())}},bates:function(W){var ue=r.random.irwinHall(W);return function(){return ue()/W}},irwinHall:function(W){return function(){for(var ue=0,ge=0;ge<W;ge++)ue+=Math.random();return ue}}},r.scale={};function Bc(W){var ue=W[0],ge=W[W.length-1];return ue<ge?[ue,ge]:[ge,ue]}function qf(W){return W.rangeExtent?W.rangeExtent():Bc(W.range())}function Gl(W,ue,ge,_e){var Ce=ge(W[0],W[1]),De=_e(ue[0],ue[1]);return function(tt){return De(Ce(tt))}}function Lh(W,ue){var ge=0,_e=W.length-1,Ce=W[ge],De=W[_e],tt;return De<Ce&&(tt=ge,ge=_e,_e=tt,tt=Ce,Ce=De,De=tt),W[ge]=ue.floor(Ce),W[_e]=ue.ceil(De),W}function nd(W){return W?{floor:function(ue){return Math.floor(ue/W)*W},ceil:function(ue){return Math.ceil(ue/W)*W}}:ad}var ad={floor:G,ceil:G};function cv(W,ue,ge,_e){var Ce=[],De=[],tt=0,Ze=Math.min(W.length,ue.length)-1;for(W[Ze]<W[0]&&(W=W.slice().reverse(),ue=ue.slice().reverse());++tt<=Ze;)Ce.push(ge(W[tt-1],W[tt])),De.push(_e(ue[tt-1],ue[tt]));return function(rt){var pt=r.bisect(W,rt,1,Ze)-1;return De[pt](Ce[pt](rt))}}r.scale.linear=function(){return Is([0,1],[0,1],qn,!1)};function Is(W,ue,ge,_e){var Ce,De;function tt(){var rt=Math.min(W.length,ue.length)>2?cv:Gl,pt=_e?zc:Ic;return Ce=rt(W,ue,pt,ge),De=rt(ue,W,pt,qn),Ze}function Ze(rt){return Ce(rt)}return Ze.invert=function(rt){return De(rt)},Ze.domain=function(rt){return arguments.length?(W=rt.map(Number),tt()):W},Ze.range=function(rt){return arguments.length?(ue=rt,tt()):ue},Ze.rangeRound=function(rt){return Ze.range(rt).interpolate(Js)},Ze.clamp=function(rt){return arguments.length?(_e=rt,tt()):_e},Ze.interpolate=function(rt){return arguments.length?(ge=rt,tt()):ge},Ze.ticks=function(rt){return Tf(W,rt)},Ze.tickFormat=function(rt,pt){return lc(W,rt,pt)},Ze.nice=function(rt){return id(W,rt),tt()},Ze.copy=function(){return Is(W,ue,ge,_e)},tt()}function _s(W,ue){return r.rebind(W,ue,"range","rangeRound","interpolate","clamp")}function id(W,ue){return Lh(W,nd(eh(W,ue)[2])),Lh(W,nd(eh(W,ue)[2])),W}function eh(W,ue){ue==null&&(ue=10);var ge=Bc(W),_e=ge[1]-ge[0],Ce=Math.pow(10,Math.floor(Math.log(_e/ue)/Math.LN10)),De=ue/_e*Ce;return De<=.15?Ce*=10:De<=.35?Ce*=5:De<=.75&&(Ce*=2),ge[0]=Math.ceil(ge[0]/Ce)*Ce,ge[1]=Math.floor(ge[1]/Ce)*Ce+Ce*.5,ge[2]=Ce,ge}function Tf(W,ue){return r.range.apply(r,eh(W,ue))}function lc(W,ue,ge){var _e=eh(W,ue);if(ge){var Ce=ra.exec(ge);if(Ce.shift(),Ce[8]==="s"){var De=r.formatPrefix(Math.max(x(_e[0]),x(_e[1])));return Ce[7]||(Ce[7]="."+Ph(De.scale(_e[2]))),Ce[8]="f",ge=r.format(Ce.join("")),function(tt){return ge(De.scale(tt))+De.symbol}}Ce[7]||(Ce[7]="."+th(Ce[8],_e)),ge=Ce.join("")}else ge=",."+Ph(_e[2])+"f";return r.format(ge)}var od={s:1,g:1,p:1,r:1,e:1};function Ph(W){return-Math.floor(Math.log(W)/Math.LN10+.01)}function th(W,ue){var ge=Ph(ue[2]);return W in od?Math.abs(ge-Ph(Math.max(x(ue[0]),x(ue[1]))))+ +(W!=="e"):ge-(W==="%")*2}r.scale.log=function(){return fv(r.scale.linear().domain([0,1]),10,!0,[1,10])};function fv(W,ue,ge,_e){function Ce(Ze){return(ge?Math.log(Ze<0?0:Ze):-Math.log(Ze>0?0:-Ze))/Math.log(ue)}function De(Ze){return ge?Math.pow(ue,Ze):-Math.pow(ue,-Ze)}function tt(Ze){return W(Ce(Ze))}return tt.invert=function(Ze){return De(W.invert(Ze))},tt.domain=function(Ze){return arguments.length?(ge=Ze[0]>=0,W.domain((_e=Ze.map(Number)).map(Ce)),tt):_e},tt.base=function(Ze){return arguments.length?(ue=+Ze,W.domain(_e.map(Ce)),tt):ue},tt.nice=function(){var Ze=Lh(_e.map(Ce),ge?Math:cc);return W.domain(Ze),_e=Ze.map(De),tt},tt.ticks=function(){var Ze=Bc(_e),rt=[],pt=Ze[0],gt=Ze[1],Dt=Math.floor(Ce(pt)),Bt=Math.ceil(Ce(gt)),qt=ue%1?2:ue;if(isFinite(Bt-Dt)){if(ge){for(;Dt<Bt;Dt++)for(var _r=1;_r<qt;_r++)rt.push(De(Dt)*_r);rt.push(De(Dt))}else for(rt.push(De(Dt));Dt++<Bt;)for(var _r=qt-1;_r>0;_r--)rt.push(De(Dt)*_r);for(Dt=0;rt[Dt]<pt;Dt++);for(Bt=rt.length;rt[Bt-1]>gt;Bt--);rt=rt.slice(Dt,Bt)}return rt},tt.tickFormat=function(Ze,rt){if(!arguments.length)return uc;arguments.length<2?rt=uc:typeof rt!="function"&&(rt=r.format(rt));var pt=Math.max(1,ue*Ze/tt.ticks().length);return function(gt){var Dt=gt/De(Math.round(Ce(gt)));return Dt*ue<ue-.5&&(Dt*=ue),Dt<=pt?rt(gt):""}},tt.copy=function(){return fv(W.copy(),ue,ge,_e)},_s(tt,W)}var uc=r.format(".0e"),cc={floor:function(W){return-Math.ceil(-W)},ceil:function(W){return-Math.floor(-W)}};r.scale.pow=function(){return jl(r.scale.linear(),1,[0,1])};function jl(W,ue,ge){var _e=Rh(ue),Ce=Rh(1/ue);function De(tt){return W(_e(tt))}return De.invert=function(tt){return Ce(W.invert(tt))},De.domain=function(tt){return arguments.length?(W.domain((ge=tt.map(Number)).map(_e)),De):ge},De.ticks=function(tt){return Tf(ge,tt)},De.tickFormat=function(tt,Ze){return lc(ge,tt,Ze)},De.nice=function(tt){return De.domain(id(ge,tt))},De.exponent=function(tt){return arguments.length?(_e=Rh(ue=tt),Ce=Rh(1/ue),W.domain(ge.map(_e)),De):ue},De.copy=function(){return jl(W.copy(),ue,ge)},_s(De,W)}function Rh(W){return function(ue){return ue<0?-Math.pow(-ue,W):Math.pow(ue,W)}}r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return hv([],{t:"range",a:[[]]})};function hv(W,ue){var ge,_e,Ce;function De(Ze){return _e[((ge.get(Ze)||(ue.t==="range"?ge.set(Ze,W.push(Ze)):NaN))-1)%_e.length]}function tt(Ze,rt){return r.range(W.length).map(function(pt){return Ze+rt*pt})}return De.domain=function(Ze){if(!arguments.length)return W;W=[],ge=new T;for(var rt=-1,pt=Ze.length,gt;++rt<pt;)ge.has(gt=Ze[rt])||ge.set(gt,W.push(gt));return De[ue.t].apply(De,ue.a)},De.range=function(Ze){return arguments.length?(_e=Ze,Ce=0,ue={t:"range",a:arguments},De):_e},De.rangePoints=function(Ze,rt){arguments.length<2&&(rt=0);var pt=Ze[0],gt=Ze[1],Dt=W.length<2?(pt=(pt+gt)/2,0):(gt-pt)/(W.length-1+rt);return _e=tt(pt+Dt*rt/2,Dt),Ce=0,ue={t:"rangePoints",a:arguments},De},De.rangeRoundPoints=function(Ze,rt){arguments.length<2&&(rt=0);var pt=Ze[0],gt=Ze[1],Dt=W.length<2?(pt=gt=Math.round((pt+gt)/2),0):(gt-pt)/(W.length-1+rt)|0;return _e=tt(pt+Math.round(Dt*rt/2+(gt-pt-(W.length-1+rt)*Dt)/2),Dt),Ce=0,ue={t:"rangeRoundPoints",a:arguments},De},De.rangeBands=function(Ze,rt,pt){arguments.length<2&&(rt=0),arguments.length<3&&(pt=rt);var gt=Ze[1]<Ze[0],Dt=Ze[gt-0],Bt=Ze[1-gt],qt=(Bt-Dt)/(W.length-rt+2*pt);return _e=tt(Dt+qt*pt,qt),gt&&_e.reverse(),Ce=qt*(1-rt),ue={t:"rangeBands",a:arguments},De},De.rangeRoundBands=function(Ze,rt,pt){arguments.length<2&&(rt=0),arguments.length<3&&(pt=rt);var gt=Ze[1]<Ze[0],Dt=Ze[gt-0],Bt=Ze[1-gt],qt=Math.floor((Bt-Dt)/(W.length-rt+2*pt));return _e=tt(Dt+Math.round((Bt-Dt-(W.length-rt)*qt)/2),qt),gt&&_e.reverse(),Ce=Math.round(qt*(1-rt)),ue={t:"rangeRoundBands",a:arguments},De},De.rangeBand=function(){return Ce},De.rangeExtent=function(){return Bc(ue.a[0])},De.copy=function(){return hv(W,ue)},De.domain(W)}r.scale.category10=function(){return r.scale.ordinal().range(dp)},r.scale.category20=function(){return r.scale.ordinal().range(rh)},r.scale.category20b=function(){return r.scale.ordinal().range(Dh)},r.scale.category20c=function(){return r.scale.ordinal().range(mp)};var dp=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(qr),rh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(qr),Dh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(qr),mp=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(qr);r.scale.quantile=function(){return Ih([],[])};function Ih(W,ue){var ge;function _e(){var De=0,tt=ue.length;for(ge=[];++De<tt;)ge[De-1]=r.quantile(W,De/tt);return Ce}function Ce(De){if(!isNaN(De=+De))return ue[r.bisect(ge,De)]}return Ce.domain=function(De){return arguments.length?(W=De.map(p).filter(v).sort(s),_e()):W},Ce.range=function(De){return arguments.length?(ue=De,_e()):ue},Ce.quantiles=function(){return ge},Ce.invertExtent=function(De){return De=ue.indexOf(De),De<0?[NaN,NaN]:[De>0?ge[De-1]:W[0],De<ge.length?ge[De]:W[W.length-1]]},Ce.copy=function(){return Ih(W,ue)},_e()}r.scale.quantize=function(){return sd(0,1,[0,1])};function sd(W,ue,ge){var _e,Ce;function De(Ze){return ge[Math.max(0,Math.min(Ce,Math.floor(_e*(Ze-W))))]}function tt(){return _e=ge.length/(ue-W),Ce=ge.length-1,De}return De.domain=function(Ze){return arguments.length?(W=+Ze[0],ue=+Ze[Ze.length-1],tt()):[W,ue]},De.range=function(Ze){return arguments.length?(ge=Ze,tt()):ge},De.invertExtent=function(Ze){return Ze=ge.indexOf(Ze),Ze=Ze<0?NaN:Ze/_e+W,[Ze,Ze+1/_e]},De.copy=function(){return sd(W,ue,ge)},tt()}r.scale.threshold=function(){return gp([.5],[0,1])};function gp(W,ue){function ge(_e){if(_e<=_e)return ue[r.bisect(W,_e)]}return ge.domain=function(_e){return arguments.length?(W=_e,ge):W},ge.range=function(_e){return arguments.length?(ue=_e,ge):ue},ge.invertExtent=function(_e){return _e=ue.indexOf(_e),[W[_e-1],W[_e]]},ge.copy=function(){return gp(W,ue)},ge}r.scale.identity=function(){return Wo([0,1])};function Wo(W){function ue(ge){return+ge}return ue.invert=ue,ue.domain=ue.range=function(ge){return arguments.length?(W=ge.map(ue),ue):W},ue.ticks=function(ge){return Tf(W,ge)},ue.tickFormat=function(ge,_e){return lc(W,ge,_e)},ue.copy=function(){return Wo(W)},ue}r.svg={};function ld(){return 0}r.svg.arc=function(){var W=ud,ue=cd,ge=ld,_e=Af,Ce=du,De=zh,tt=fd;function Ze(){var pt=Math.max(0,+W.apply(this,arguments)),gt=Math.max(0,+ue.apply(this,arguments)),Dt=Ce.apply(this,arguments)-Me,Bt=De.apply(this,arguments)-Me,qt=Math.abs(Bt-Dt),_r=Dt>Bt?0:1;if(gt<pt&&(Kt=gt,gt=pt,pt=Kt),qt>=Qe)return rt(gt,_r)+(pt?rt(pt,1-_r):"")+"Z";var Kt,tr,ir,wr,sr=0,vr=0,nn,en,Jr,Yr,kn,In,ia,Wn,Zn=[];if((wr=(+tt.apply(this,arguments)||0)/2)&&(ir=_e===Af?Math.sqrt(pt*pt+gt*gt):+_e.apply(this,arguments),_r||(vr*=-1),gt&&(vr=Ge(ir/gt*Math.sin(wr))),pt&&(sr=Ge(ir/pt*Math.sin(wr)))),gt){nn=gt*Math.cos(Dt+vr),en=gt*Math.sin(Dt+vr),Jr=gt*Math.cos(Bt-vr),Yr=gt*Math.sin(Bt-vr);var fn=Math.abs(Bt-Dt-2*vr)<=Le?0:1;if(vr&&yp(nn,en,Jr,Yr)===_r^fn){var Pn=(Dt+Bt)/2;nn=gt*Math.cos(Pn),en=gt*Math.sin(Pn),Jr=Yr=null}}else nn=en=0;if(pt){kn=pt*Math.cos(Bt-sr),In=pt*Math.sin(Bt-sr),ia=pt*Math.cos(Dt+sr),Wn=pt*Math.sin(Dt+sr);var Vn=Math.abs(Dt-Bt+2*sr)<=Le?0:1;if(sr&&yp(kn,In,ia,Wn)===1-_r^Vn){var an=(Dt+Bt)/2;kn=pt*Math.cos(an),In=pt*Math.sin(an),ia=Wn=null}}else kn=In=0;if(qt>ot&&(Kt=Math.min(Math.abs(gt-pt)/2,+ge.apply(this,arguments)))>.001){tr=pt<gt^_r?0:1;var Tn=Kt,va=Kt;if(qt<Le){var Fa=ia==null?[kn,In]:Jr==null?[nn,en]:Ru([nn,en],[ia,Wn],[Jr,Yr],[kn,In]),Wa=nn-Fa[0],_i=en-Fa[1],Ii=Jr-Fa[0],Xo=Yr-Fa[1],To=1/Math.sin(Math.acos((Wa*Ii+_i*Xo)/(Math.sqrt(Wa*Wa+_i*_i)*Math.sqrt(Ii*Ii+Xo*Xo)))/2),Ao=Math.sqrt(Fa[0]*Fa[0]+Fa[1]*Fa[1]);va=Math.min(Kt,(pt-Ao)/(To-1)),Tn=Math.min(Kt,(gt-Ao)/(To+1))}if(Jr!=null){var tl=nh(ia==null?[kn,In]:[ia,Wn],[nn,en],gt,Tn,_r),hi=nh([Jr,Yr],[kn,In],gt,Tn,_r);Kt===Tn?Zn.push("M",tl[0],"A",Tn,",",Tn," 0 0,",tr," ",tl[1],"A",gt,",",gt," 0 ",1-_r^yp(tl[1][0],tl[1][1],hi[1][0],hi[1][1]),",",_r," ",hi[1],"A",Tn,",",Tn," 0 0,",tr," ",hi[0]):Zn.push("M",tl[0],"A",Tn,",",Tn," 0 1,",tr," ",hi[0])}else Zn.push("M",nn,",",en);if(ia!=null){var fs=nh([nn,en],[ia,Wn],pt,-va,_r),rl=nh([kn,In],Jr==null?[nn,en]:[Jr,Yr],pt,-va,_r);Kt===va?Zn.push("L",rl[0],"A",va,",",va," 0 0,",tr," ",rl[1],"A",pt,",",pt," 0 ",_r^yp(rl[1][0],rl[1][1],fs[1][0],fs[1][1]),",",1-_r," ",fs[1],"A",va,",",va," 0 0,",tr," ",fs[0]):Zn.push("L",rl[0],"A",va,",",va," 0 0,",tr," ",fs[0])}else Zn.push("L",kn,",",In)}else Zn.push("M",nn,",",en),Jr!=null&&Zn.push("A",gt,",",gt," 0 ",fn,",",_r," ",Jr,",",Yr),Zn.push("L",kn,",",In),ia!=null&&Zn.push("A",pt,",",pt," 0 ",Vn,",",1-_r," ",ia,",",Wn);return Zn.push("Z"),Zn.join("")}function rt(pt,gt){return"M0,"+pt+"A"+pt+","+pt+" 0 1,"+gt+" 0,"+-pt+"A"+pt+","+pt+" 0 1,"+gt+" 0,"+pt}return Ze.innerRadius=function(pt){return arguments.length?(W=mr(pt),Ze):W},Ze.outerRadius=function(pt){return arguments.length?(ue=mr(pt),Ze):ue},Ze.cornerRadius=function(pt){return arguments.length?(ge=mr(pt),Ze):ge},Ze.padRadius=function(pt){return arguments.length?(_e=pt==Af?Af:mr(pt),Ze):_e},Ze.startAngle=function(pt){return arguments.length?(Ce=mr(pt),Ze):Ce},Ze.endAngle=function(pt){return arguments.length?(De=mr(pt),Ze):De},Ze.padAngle=function(pt){return arguments.length?(tt=mr(pt),Ze):tt},Ze.centroid=function(){var pt=(+W.apply(this,arguments)+ +ue.apply(this,arguments))/2,gt=(+Ce.apply(this,arguments)+ +De.apply(this,arguments))/2-Me;return[Math.cos(gt)*pt,Math.sin(gt)*pt]},Ze};var Af="auto";function ud(W){return W.innerRadius}function cd(W){return W.outerRadius}function du(W){return W.startAngle}function zh(W){return W.endAngle}function fd(W){return W&&W.padAngle}function yp(W,ue,ge,_e){return(W-ge)*ue-(ue-_e)*W>0?0:1}function nh(W,ue,ge,_e,Ce){var De=W[0]-ue[0],tt=W[1]-ue[1],Ze=(Ce?_e:-_e)/Math.sqrt(De*De+tt*tt),rt=Ze*tt,pt=-Ze*De,gt=W[0]+rt,Dt=W[1]+pt,Bt=ue[0]+rt,qt=ue[1]+pt,_r=(gt+Bt)/2,Kt=(Dt+qt)/2,tr=Bt-gt,ir=qt-Dt,wr=tr*tr+ir*ir,sr=ge-_e,vr=gt*qt-Bt*Dt,nn=(ir<0?-1:1)*Math.sqrt(Math.max(0,sr*sr*wr-vr*vr)),en=(vr*ir-tr*nn)/wr,Jr=(-vr*tr-ir*nn)/wr,Yr=(vr*ir+tr*nn)/wr,kn=(-vr*tr+ir*nn)/wr,In=en-_r,ia=Jr-Kt,Wn=Yr-_r,Zn=kn-Kt;return In*In+ia*ia>Wn*Wn+Zn*Zn&&(en=Yr,Jr=kn),[[en-rt,Jr-pt],[en*ge/sr,Jr*ge/sr]]}function hd(W){var ue=$i,ge=Go,_e=Lu,Ce=go,De=Ce.key,tt=.7;function Ze(rt){var pt=[],gt=[],Dt=-1,Bt=rt.length,qt,_r=mr(ue),Kt=mr(ge);function tr(){pt.push("M",Ce(W(gt),tt))}for(;++Dt<Bt;)_e.call(this,qt=rt[Dt],Dt)?gt.push([+_r.call(this,qt,Dt),+Kt.call(this,qt,Dt)]):gt.length&&(tr(),gt=[]);return gt.length&&tr(),pt.length?pt.join(""):null}return Ze.x=function(rt){return arguments.length?(ue=rt,Ze):ue},Ze.y=function(rt){return arguments.length?(ge=rt,Ze):ge},Ze.defined=function(rt){return arguments.length?(_e=rt,Ze):_e},Ze.interpolate=function(rt){return arguments.length?(typeof rt=="function"?De=Ce=rt:De=(Ce=pv.get(rt)||go).key,Ze):De},Ze.tension=function(rt){return arguments.length?(tt=rt,Ze):tt},Ze}r.svg.line=function(){return hd(G)};var pv=r.map({linear:go,"linear-closed":Fh,step:xp,"step-before":Uc,"step-after":bi,basis:pd,"basis-open":vv,"basis-closed":vd,bundle:zs,cardinal:fc,"cardinal-open":Mf,"cardinal-closed":Na,monotone:pc});pv.forEach(function(W,ue){ue.key=W,ue.closed=/-closed$/.test(W)});function go(W){return W.length>1?W.join("L"):W+"Z"}function Fh(W){return W.join("L")+"Z"}function xp(W){for(var ue=0,ge=W.length,_e=W[0],Ce=[_e[0],",",_e[1]];++ue<ge;)Ce.push("H",(_e[0]+(_e=W[ue])[0])/2,"V",_e[1]);return ge>1&&Ce.push("H",_e[0]),Ce.join("")}function Uc(W){for(var ue=0,ge=W.length,_e=W[0],Ce=[_e[0],",",_e[1]];++ue<ge;)Ce.push("V",(_e=W[ue])[1],"H",_e[0]);return Ce.join("")}function bi(W){for(var ue=0,ge=W.length,_e=W[0],Ce=[_e[0],",",_e[1]];++ue<ge;)Ce.push("H",(_e=W[ue])[0],"V",_e[1]);return Ce.join("")}function Mf(W,ue){return W.length<4?go(W):W[1]+kf(W.slice(1,-1),hc(W,ue))}function Na(W,ue){return W.length<3?Fh(W):W[0]+kf((W.push(W[0]),W),hc([W[W.length-2]].concat(W,[W[1]]),ue))}function fc(W,ue){return W.length<3?go(W):W[0]+kf(W,hc(W,ue))}function kf(W,ue){if(ue.length<1||W.length!=ue.length&&W.length!=ue.length+2)return go(W);var ge=W.length!=ue.length,_e="",Ce=W[0],De=W[1],tt=ue[0],Ze=tt,rt=1;if(ge&&(_e+="Q"+(De[0]-tt[0]*2/3)+","+(De[1]-tt[1]*2/3)+","+De[0]+","+De[1],Ce=W[1],rt=2),ue.length>1){Ze=ue[1],De=W[rt],rt++,_e+="C"+(Ce[0]+tt[0])+","+(Ce[1]+tt[1])+","+(De[0]-Ze[0])+","+(De[1]-Ze[1])+","+De[0]+","+De[1];for(var pt=2;pt<ue.length;pt++,rt++)De=W[rt],Ze=ue[pt],_e+="S"+(De[0]-Ze[0])+","+(De[1]-Ze[1])+","+De[0]+","+De[1]}if(ge){var gt=W[rt];_e+="Q"+(De[0]+Ze[0]*2/3)+","+(De[1]+Ze[1]*2/3)+","+gt[0]+","+gt[1]}return _e}function hc(W,ue){for(var ge=[],_e=(1-ue)/2,Ce,De=W[0],tt=W[1],Ze=1,rt=W.length;++Ze<rt;)Ce=De,De=tt,tt=W[Ze],ge.push([_e*(tt[0]-Ce[0]),_e*(tt[1]-Ce[1])]);return ge}function pd(W){if(W.length<3)return go(W);var ue=1,ge=W.length,_e=W[0],Ce=_e[0],De=_e[1],tt=[Ce,Ce,Ce,(_e=W[1])[0]],Ze=[De,De,De,_e[1]],rt=[Ce,",",De,"L",Wl(Vc,tt),",",Wl(Vc,Ze)];for(W.push(W[ge-1]);++ue<=ge;)_e=W[ue],tt.shift(),tt.push(_e[0]),Ze.shift(),Ze.push(_e[1]),Sf(rt,tt,Ze);return W.pop(),rt.push("L",_e),rt.join("")}function vv(W){if(W.length<4)return go(W);for(var ue=[],ge=-1,_e=W.length,Ce,De=[0],tt=[0];++ge<3;)Ce=W[ge],De.push(Ce[0]),tt.push(Ce[1]);for(ue.push(Wl(Vc,De)+","+Wl(Vc,tt)),--ge;++ge<_e;)Ce=W[ge],De.shift(),De.push(Ce[0]),tt.shift(),tt.push(Ce[1]),Sf(ue,De,tt);return ue.join("")}function vd(W){for(var ue,ge=-1,_e=W.length,Ce=_e+4,De,tt=[],Ze=[];++ge<4;)De=W[ge%_e],tt.push(De[0]),Ze.push(De[1]);for(ue=[Wl(Vc,tt),",",Wl(Vc,Ze)],--ge;++ge<Ce;)De=W[ge%_e],tt.shift(),tt.push(De[0]),Ze.shift(),Ze.push(De[1]),Sf(ue,tt,Ze);return ue.join("")}function zs(W,ue){var ge=W.length-1;if(ge)for(var _e=W[0][0],Ce=W[0][1],De=W[ge][0]-_e,tt=W[ge][1]-Ce,Ze=-1,rt,pt;++Ze<=ge;)rt=W[Ze],pt=Ze/ge,rt[0]=ue*rt[0]+(1-ue)*(_e+pt*De),rt[1]=ue*rt[1]+(1-ue)*(Ce+pt*tt);return pd(W)}function Wl(W,ue){return W[0]*ue[0]+W[1]*ue[1]+W[2]*ue[2]+W[3]*ue[3]}var dd=[0,2/3,1/3,0],dv=[0,1/3,2/3,0],Vc=[0,1/6,2/3,1/6];function Sf(W,ue,ge){W.push("C",Wl(dd,ue),",",Wl(dd,ge),",",Wl(dv,ue),",",Wl(dv,ge),",",Wl(Vc,ue),",",Wl(Vc,ge))}function Hc(W,ue){return(ue[1]-W[1])/(ue[0]-W[0])}function md(W){for(var ue=0,ge=W.length-1,_e=[],Ce=W[0],De=W[1],tt=_e[0]=Hc(Ce,De);++ue<ge;)_e[ue]=(tt+(tt=Hc(Ce=De,De=W[ue+1])))/2;return _e[ue]=tt,_e}function T0(W){for(var ue=[],ge,_e,Ce,De,tt=md(W),Ze=-1,rt=W.length-1;++Ze<rt;)ge=Hc(W[Ze],W[Ze+1]),x(ge)<ot?tt[Ze]=tt[Ze+1]=0:(_e=tt[Ze]/ge,Ce=tt[Ze+1]/ge,De=_e*_e+Ce*Ce,De>9&&(De=ge*3/Math.sqrt(De),tt[Ze]=De*_e,tt[Ze+1]=De*Ce));for(Ze=-1;++Ze<=rt;)De=(W[Math.min(rt,Ze+1)][0]-W[Math.max(0,Ze-1)][0])/(6*(1+tt[Ze]*tt[Ze])),ue.push([De||0,tt[Ze]*De||0]);return ue}function pc(W){return W.length<3?go(W):W[0]+kf(W,T0(W))}r.svg.line.radial=function(){var W=hd(Fs);return W.radius=W.x,delete W.x,W.angle=W.y,delete W.y,W};function Fs(W){for(var ue,ge=-1,_e=W.length,Ce,De;++ge<_e;)ue=W[ge],Ce=ue[0],De=ue[1]-Me,ue[0]=Ce*Math.cos(De),ue[1]=Ce*Math.sin(De);return W}function Oh(W){var ue=$i,ge=$i,_e=0,Ce=Go,De=Lu,tt=go,Ze=tt.key,rt=tt,pt="L",gt=.7;function Dt(Bt){var qt=[],_r=[],Kt=[],tr=-1,ir=Bt.length,wr,sr=mr(ue),vr=mr(_e),nn=ue===ge?function(){return Jr}:mr(ge),en=_e===Ce?function(){return Yr}:mr(Ce),Jr,Yr;function kn(){qt.push("M",tt(W(Kt),gt),pt,rt(W(_r.reverse()),gt),"Z")}for(;++tr<ir;)De.call(this,wr=Bt[tr],tr)?(_r.push([Jr=+sr.call(this,wr,tr),Yr=+vr.call(this,wr,tr)]),Kt.push([+nn.call(this,wr,tr),+en.call(this,wr,tr)])):_r.length&&(kn(),_r=[],Kt=[]);return _r.length&&kn(),qt.length?qt.join(""):null}return Dt.x=function(Bt){return arguments.length?(ue=ge=Bt,Dt):ge},Dt.x0=function(Bt){return arguments.length?(ue=Bt,Dt):ue},Dt.x1=function(Bt){return arguments.length?(ge=Bt,Dt):ge},Dt.y=function(Bt){return arguments.length?(_e=Ce=Bt,Dt):Ce},Dt.y0=function(Bt){return arguments.length?(_e=Bt,Dt):_e},Dt.y1=function(Bt){return arguments.length?(Ce=Bt,Dt):Ce},Dt.defined=function(Bt){return arguments.length?(De=Bt,Dt):De},Dt.interpolate=function(Bt){return arguments.length?(typeof Bt=="function"?Ze=tt=Bt:Ze=(tt=pv.get(Bt)||go).key,rt=tt.reverse||tt,pt=tt.closed?"M":"L",Dt):Ze},Dt.tension=function(Bt){return arguments.length?(gt=Bt,Dt):gt},Dt}Uc.reverse=bi,bi.reverse=Uc,r.svg.area=function(){return Oh(G)},r.svg.area.radial=function(){var W=Oh(Fs);return W.radius=W.x,delete W.x,W.innerRadius=W.x0,delete W.x0,W.outerRadius=W.x1,delete W.x1,W.angle=W.y,delete W.y,W.startAngle=W.y0,delete W.y0,W.endAngle=W.y1,delete W.y1,W},r.svg.chord=function(){var W=Pc,ue=Xf,ge=bp,_e=du,Ce=zh;function De(gt,Dt){var Bt=tt(this,W,gt,Dt),qt=tt(this,ue,gt,Dt);return"M"+Bt.p0+rt(Bt.r,Bt.p1,Bt.a1-Bt.a0)+(Ze(Bt,qt)?pt(Bt.r,Bt.p1,Bt.r,Bt.p0):pt(Bt.r,Bt.p1,qt.r,qt.p0)+rt(qt.r,qt.p1,qt.a1-qt.a0)+pt(qt.r,qt.p1,Bt.r,Bt.p0))+"Z"}function tt(gt,Dt,Bt,qt){var _r=Dt.call(gt,Bt,qt),Kt=ge.call(gt,_r,qt),tr=_e.call(gt,_r,qt)-Me,ir=Ce.call(gt,_r,qt)-Me;return{r:Kt,a0:tr,a1:ir,p0:[Kt*Math.cos(tr),Kt*Math.sin(tr)],p1:[Kt*Math.cos(ir),Kt*Math.sin(ir)]}}function Ze(gt,Dt){return gt.a0==Dt.a0&&gt.a1==Dt.a1}function rt(gt,Dt,Bt){return"A"+gt+","+gt+" 0 "+ +(Bt>Le)+",1 "+Dt}function pt(gt,Dt,Bt,qt){return"Q 0,0 "+qt}return De.radius=function(gt){return arguments.length?(ge=mr(gt),De):ge},De.source=function(gt){return arguments.length?(W=mr(gt),De):W},De.target=function(gt){return arguments.length?(ue=mr(gt),De):ue},De.startAngle=function(gt){return arguments.length?(_e=mr(gt),De):_e},De.endAngle=function(gt){return arguments.length?(Ce=mr(gt),De):Ce},De};function bp(W){return W.radius}r.svg.diagonal=function(){var W=Pc,ue=Xf,ge=Gc;function _e(Ce,De){var tt=W.call(this,Ce,De),Ze=ue.call(this,Ce,De),rt=(tt.y+Ze.y)/2,pt=[tt,{x:tt.x,y:rt},{x:Ze.x,y:rt},Ze];return pt=pt.map(ge),"M"+pt[0]+"C"+pt[1]+" "+pt[2]+" "+pt[3]}return _e.source=function(Ce){return arguments.length?(W=mr(Ce),_e):W},_e.target=function(Ce){return arguments.length?(ue=mr(Ce),_e):ue},_e.projection=function(Ce){return arguments.length?(ge=Ce,_e):ge},_e};function Gc(W){return[W.x,W.y]}r.svg.diagonal.radial=function(){var W=r.svg.diagonal(),ue=Gc,ge=W.projection;return W.projection=function(_e){return arguments.length?ge(Nh(ue=_e)):ue},W};function Nh(W){return function(){var ue=W.apply(this,arguments),ge=ue[0],_e=ue[1]-Me;return[ge*Math.cos(_e),ge*Math.sin(_e)]}}r.svg.symbol=function(){var W=Vu,ue=fl;function ge(_e,Ce){return(ah.get(W.call(this,_e,Ce))||Yo)(ue.call(this,_e,Ce))}return ge.type=function(_e){return arguments.length?(W=mr(_e),ge):W},ge.size=function(_e){return arguments.length?(ue=mr(_e),ge):ue},ge};function fl(){return 64}function Vu(){return"circle"}function Yo(W){var ue=Math.sqrt(W/Le);return"M0,"+ue+"A"+ue+","+ue+" 0 1,1 0,"+-ue+"A"+ue+","+ue+" 0 1,1 0,"+ue+"Z"}var ah=r.map({circle:Yo,cross:function(W){var ue=Math.sqrt(W/5)/2;return"M"+-3*ue+","+-ue+"H"+-ue+"V"+-3*ue+"H"+ue+"V"+-ue+"H"+3*ue+"V"+ue+"H"+ue+"V"+3*ue+"H"+-ue+"V"+ue+"H"+-3*ue+"Z"},diamond:function(W){var ue=Math.sqrt(W/(2*Os)),ge=ue*Os;return"M0,"+-ue+"L"+ge+",0 0,"+ue+" "+-ge+",0Z"},square:function(W){var ue=Math.sqrt(W)/2;return"M"+-ue+","+-ue+"L"+ue+","+-ue+" "+ue+","+ue+" "+-ue+","+ue+"Z"},"triangle-down":function(W){var ue=Math.sqrt(W/Cf),ge=ue*Cf/2;return"M0,"+ge+"L"+ue+","+-ge+" "+-ue+","+-ge+"Z"},"triangle-up":function(W){var ue=Math.sqrt(W/Cf),ge=ue*Cf/2;return"M0,"+-ge+"L"+ue+","+ge+" "+-ue+","+ge+"Z"}});r.svg.symbolTypes=ah.keys();var Cf=Math.sqrt(3),Os=Math.tan(30*Ie);te.transition=function(W){for(var ue=mu||++_p,ge=oh(W),_e=[],Ce,De,tt=Uh||{time:Date.now(),ease:Qa,delay:0,duration:250},Ze=-1,rt=this.length;++Ze<rt;){_e.push(Ce=[]);for(var pt=this[Ze],gt=-1,Dt=pt.length;++gt<Dt;)(De=pt[gt])&&sh(De,gt,ge,ue,tt),Ce.push(De)}return ih(_e,ge,ue)},te.interrupt=function(W){return this.each(W==null?Bh:mv(oh(W)))};var Bh=mv(oh());function mv(W){return function(){var ue,ge,_e;(ue=this[W])&&(_e=ue[ge=ue.active])&&(_e.timer.c=null,_e.timer.t=NaN,--ue.count?delete ue[ge]:delete this[W],ue.active+=.5,_e.event&&_e.event.interrupt.call(this,this.__data__,_e.index))}}function ih(W,ue,ge){return ve(W,yo),W.namespace=ue,W.id=ge,W}var yo=[],_p=0,mu,Uh;yo.call=te.call,yo.empty=te.empty,yo.node=te.node,yo.size=te.size,r.transition=function(W,ue){return W&&W.transition?mu?W.transition(ue):W:r.selection().transition(W)},r.transition.prototype=yo,yo.select=function(W){var ue=this.id,ge=this.namespace,_e=[],Ce,De,tt;W=re(W);for(var Ze=-1,rt=this.length;++Ze<rt;){_e.push(Ce=[]);for(var pt=this[Ze],gt=-1,Dt=pt.length;++gt<Dt;)(tt=pt[gt])&&(De=W.call(tt,tt.__data__,gt,Ze))?("__data__"in tt&&(De.__data__=tt.__data__),sh(De,gt,ge,ue,tt[ge][ue]),Ce.push(De)):Ce.push(null)}return ih(_e,ge,ue)},yo.selectAll=function(W){var ue=this.id,ge=this.namespace,_e=[],Ce,De,tt,Ze,rt;W=ce(W);for(var pt=-1,gt=this.length;++pt<gt;)for(var Dt=this[pt],Bt=-1,qt=Dt.length;++Bt<qt;)if(tt=Dt[Bt]){rt=tt[ge][ue],De=W.call(tt,tt.__data__,Bt,pt),_e.push(Ce=[]);for(var _r=-1,Kt=De.length;++_r<Kt;)(Ze=De[_r])&&sh(Ze,_r,ge,ue,rt),Ce.push(Ze)}return ih(_e,ge,ue)},yo.filter=function(W){var ue=[],ge,_e,Ce;typeof W!="function"&&(W=Ae(W));for(var De=0,tt=this.length;De<tt;De++){ue.push(ge=[]);for(var _e=this[De],Ze=0,rt=_e.length;Ze<rt;Ze++)(Ce=_e[Ze])&&W.call(Ce,Ce.__data__,Ze,De)&&ge.push(Ce)}return ih(ue,this.namespace,this.id)},yo.tween=function(W,ue){var ge=this.id,_e=this.namespace;return arguments.length<2?this.node()[_e][ge].tween.get(W):$e(this,ue==null?function(Ce){Ce[_e][ge].tween.remove(W)}:function(Ce){Ce[_e][ge].tween.set(W,ue)})};function jc(W,ue,ge,_e){var Ce=W.id,De=W.namespace;return $e(W,typeof ge=="function"?function(tt,Ze,rt){tt[De][Ce].tween.set(ue,_e(ge.call(tt,tt.__data__,Ze,rt)))}:(ge=_e(ge),function(tt){tt[De][Ce].tween.set(ue,ge)}))}yo.attr=function(W,ue){if(arguments.length<2){for(ue in W)this.attr(ue,W[ue]);return this}var ge=W=="transform"?mo:qn,_e=r.ns.qualify(W);function Ce(){this.removeAttribute(_e)}function De(){this.removeAttributeNS(_e.space,_e.local)}function tt(rt){return rt==null?Ce:(rt+="",function(){var pt=this.getAttribute(_e),gt;return pt!==rt&&(gt=ge(pt,rt),function(Dt){this.setAttribute(_e,gt(Dt))})})}function Ze(rt){return rt==null?De:(rt+="",function(){var pt=this.getAttributeNS(_e.space,_e.local),gt;return pt!==rt&&(gt=ge(pt,rt),function(Dt){this.setAttributeNS(_e.space,_e.local,gt(Dt))})})}return jc(this,"attr."+W,ue,_e.local?Ze:tt)},yo.attrTween=function(W,ue){var ge=r.ns.qualify(W);function _e(De,tt){var Ze=ue.call(this,De,tt,this.getAttribute(ge));return Ze&&function(rt){this.setAttribute(ge,Ze(rt))}}function Ce(De,tt){var Ze=ue.call(this,De,tt,this.getAttributeNS(ge.space,ge.local));return Ze&&function(rt){this.setAttributeNS(ge.space,ge.local,Ze(rt))}}return this.tween("attr."+W,ge.local?Ce:_e)},yo.style=function(W,ue,ge){var _e=arguments.length;if(_e<3){if(typeof W!="string"){_e<2&&(ue="");for(ge in W)this.style(ge,W[ge],ue);return this}ge=""}function Ce(){this.style.removeProperty(W)}function De(tt){return tt==null?Ce:(tt+="",function(){var Ze=f(this).getComputedStyle(this,null).getPropertyValue(W),rt;return Ze!==tt&&(rt=qn(Ze,tt),function(pt){this.style.setProperty(W,rt(pt),ge)})})}return jc(this,"style."+W,ue,De)},yo.styleTween=function(W,ue,ge){arguments.length<3&&(ge="");function _e(Ce,De){var tt=ue.call(this,Ce,De,f(this).getComputedStyle(this,null).getPropertyValue(W));return tt&&function(Ze){this.style.setProperty(W,tt(Ze),ge)}}return this.tween("style."+W,_e)},yo.text=function(W){return jc(this,"text",W,Wc)};function Wc(W){return W==null&&(W=""),function(){this.textContent=W}}yo.remove=function(){var W=this.namespace;return this.each("end.transition",function(){var ue;this[W].count<2&&(ue=this.parentNode)&&ue.removeChild(this)})},yo.ease=function(W){var ue=this.id,ge=this.namespace;return arguments.length<1?this.node()[ge][ue].ease:(typeof W!="function"&&(W=r.ease.apply(r,arguments)),$e(this,function(_e){_e[ge][ue].ease=W}))},yo.delay=function(W){var ue=this.id,ge=this.namespace;return arguments.length<1?this.node()[ge][ue].delay:$e(this,typeof W=="function"?function(_e,Ce,De){_e[ge][ue].delay=+W.call(_e,_e.__data__,Ce,De)}:(W=+W,function(_e){_e[ge][ue].delay=W}))},yo.duration=function(W){var ue=this.id,ge=this.namespace;return arguments.length<1?this.node()[ge][ue].duration:$e(this,typeof W=="function"?function(_e,Ce,De){_e[ge][ue].duration=Math.max(1,W.call(_e,_e.__data__,Ce,De))}:(W=Math.max(1,W),function(_e){_e[ge][ue].duration=W}))},yo.each=function(W,ue){var ge=this.id,_e=this.namespace;if(arguments.length<2){var Ce=Uh,De=mu;try{mu=ge,$e(this,function(tt,Ze,rt){Uh=tt[_e][ge],W.call(tt,tt.__data__,Ze,rt)})}finally{Uh=Ce,mu=De}}else $e(this,function(tt){var Ze=tt[_e][ge];(Ze.event||(Ze.event=r.dispatch("start","end","interrupt"))).on(W,ue)});return this},yo.transition=function(){for(var W=this.id,ue=++_p,ge=this.namespace,_e=[],Ce,De,tt,Ze,rt=0,pt=this.length;rt<pt;rt++){_e.push(Ce=[]);for(var De=this[rt],gt=0,Dt=De.length;gt<Dt;gt++)(tt=De[gt])&&(Ze=tt[ge][W],sh(tt,gt,ge,ue,{time:Ze.time,ease:Ze.ease,delay:Ze.delay+Ze.duration,duration:Ze.duration})),Ce.push(tt)}return ih(_e,ge,ue)};function oh(W){return W==null?"__transition__":"__transition_"+W+"__"}function sh(W,ue,ge,_e,Ce){var De=W[ge]||(W[ge]={active:0,count:0}),tt=De[_e],Ze,rt,pt,gt,Dt;function Bt(Kt){var tr=tt.delay;if(rt.t=tr+Ze,tr<=Kt)return qt(Kt-tr);rt.c=qt}function qt(Kt){var tr=De.active,ir=De[tr];ir&&(ir.timer.c=null,ir.timer.t=NaN,--De.count,delete De[tr],ir.event&&ir.event.interrupt.call(W,W.__data__,ir.index));for(var wr in De)if(+wr<_e){var sr=De[wr];sr.timer.c=null,sr.timer.t=NaN,--De.count,delete De[wr]}rt.c=_r,Sa(function(){return rt.c&&_r(Kt||1)&&(rt.c=null,rt.t=NaN),1},0,Ze),De.active=_e,tt.event&&tt.event.start.call(W,W.__data__,ue),Dt=[],tt.tween.forEach(function(vr,nn){(nn=nn.call(W,W.__data__,ue))&&Dt.push(nn)}),gt=tt.ease,pt=tt.duration}function _r(Kt){for(var tr=Kt/pt,ir=gt(tr),wr=Dt.length;wr>0;)Dt[--wr].call(W,ir);if(tr>=1)return tt.event&&tt.event.end.call(W,W.__data__,ue),--De.count?delete De[_e]:delete W[ge],1}tt||(Ze=Ce.time,rt=Sa(Bt,0,Ze),tt=De[_e]={tween:new T,time:Ze,timer:rt,delay:Ce.delay,duration:Ce.duration,ease:Ce.ease,index:ue},Ce=null,++De.count)}r.svg.axis=function(){var W=r.scale.linear(),ue=lh,ge=6,_e=6,Ce=3,De=[10],tt=null,Ze;function rt(pt){pt.each(function(){var gt=r.select(this),Dt=this.__chart__||W,Bt=this.__chart__=W.copy(),qt=tt==null?Bt.ticks?Bt.ticks.apply(Bt,De):Bt.domain():tt,_r=Ze==null?Bt.tickFormat?Bt.tickFormat.apply(Bt,De):G:Ze,Kt=gt.selectAll(".tick").data(qt,Bt),tr=Kt.enter().insert("g",".domain").attr("class","tick").style("opacity",ot),ir=r.transition(Kt.exit()).style("opacity",ot).remove(),wr=r.transition(Kt.order()).style("opacity",1),sr=Math.max(ge,0)+Ce,vr,nn=qf(Bt),en=gt.selectAll(".domain").data([0]),Jr=(en.enter().append("path").attr("class","domain"),r.transition(en));tr.append("line"),tr.append("text");var Yr=tr.select("line"),kn=wr.select("line"),In=Kt.select("text").text(_r),ia=tr.select("text"),Wn=wr.select("text"),Zn=ue==="top"||ue==="left"?-1:1,fn,Pn,Vn,an;if(ue==="bottom"||ue==="top"?(vr=gu,fn="x",Vn="y",Pn="x2",an="y2",In.attr("dy",Zn<0?"0em":".71em").style("text-anchor","middle"),Jr.attr("d","M"+nn[0]+","+Zn*_e+"V0H"+nn[1]+"V"+Zn*_e)):(vr=Yc,fn="y",Vn="x",Pn="y2",an="x2",In.attr("dy",".32em").style("text-anchor",Zn<0?"end":"start"),Jr.attr("d","M"+Zn*_e+","+nn[0]+"H0V"+nn[1]+"H"+Zn*_e)),Yr.attr(an,Zn*ge),ia.attr(Vn,Zn*sr),kn.attr(Pn,0).attr(an,Zn*ge),Wn.attr(fn,0).attr(Vn,Zn*sr),Bt.rangeBand){var Tn=Bt,va=Tn.rangeBand()/2;Dt=Bt=function(Fa){return Tn(Fa)+va}}else Dt.rangeBand?Dt=Bt:ir.call(vr,Bt,Dt);tr.call(vr,Dt,Bt),wr.call(vr,Bt,Bt)})}return rt.scale=function(pt){return arguments.length?(W=pt,rt):W},rt.orient=function(pt){return arguments.length?(ue=pt in gd?pt+"":lh,rt):ue},rt.ticks=function(){return arguments.length?(De=u(arguments),rt):De},rt.tickValues=function(pt){return arguments.length?(tt=pt,rt):tt},rt.tickFormat=function(pt){return arguments.length?(Ze=pt,rt):Ze},rt.tickSize=function(pt){var gt=arguments.length;return gt?(ge=+pt,_e=+arguments[gt-1],rt):ge},rt.innerTickSize=function(pt){return arguments.length?(ge=+pt,rt):ge},rt.outerTickSize=function(pt){return arguments.length?(_e=+pt,rt):_e},rt.tickPadding=function(pt){return arguments.length?(Ce=+pt,rt):Ce},rt.tickSubdivide=function(){return arguments.length&&rt},rt};var lh="bottom",gd={top:1,right:1,bottom:1,left:1};function gu(W,ue,ge){W.attr("transform",function(_e){var Ce=ue(_e);return"translate("+(isFinite(Ce)?Ce:ge(_e))+",0)"})}function Yc(W,ue,ge){W.attr("transform",function(_e){var Ce=ue(_e);return"translate(0,"+(isFinite(Ce)?Ce:ge(_e))+")"})}r.svg.brush=function(){var W=J(gt,"brushstart","brush","brushend"),ue=null,ge=null,_e=[0,0],Ce=[0,0],De,tt,Ze=!0,rt=!0,pt=Vh[0];function gt(Kt){Kt.each(function(){var tr=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",_r).on("touchstart.brush",_r),ir=tr.selectAll(".background").data([0]);ir.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),tr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var wr=tr.selectAll(".resize").data(pt,G);wr.exit().remove(),wr.enter().append("g").attr("class",function(en){return"resize "+en}).style("cursor",function(en){return yd[en]}).append("rect").attr("x",function(en){return/[ew]$/.test(en)?-3:null}).attr("y",function(en){return/^[ns]/.test(en)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),wr.style("display",gt.empty()?"none":null);var sr=r.transition(tr),vr=r.transition(ir),nn;ue&&(nn=qf(ue),vr.attr("x",nn[0]).attr("width",nn[1]-nn[0]),Bt(sr)),ge&&(nn=qf(ge),vr.attr("y",nn[0]).attr("height",nn[1]-nn[0]),qt(sr)),Dt(sr)})}gt.event=function(Kt){Kt.each(function(){var tr=W.of(this,arguments),ir={x:_e,y:Ce,i:De,j:tt},wr=this.__chart__||ir;this.__chart__=ir,mu?r.select(this).transition().each("start.brush",function(){De=wr.i,tt=wr.j,_e=wr.x,Ce=wr.y,tr({type:"brushstart"})}).tween("brush:brush",function(){var sr=ua(_e,ir.x),vr=ua(Ce,ir.y);return De=tt=null,function(nn){_e=ir.x=sr(nn),Ce=ir.y=vr(nn),tr({type:"brush",mode:"resize"})}}).each("end.brush",function(){De=ir.i,tt=ir.j,tr({type:"brush",mode:"resize"}),tr({type:"brushend"})}):(tr({type:"brushstart"}),tr({type:"brush",mode:"resize"}),tr({type:"brushend"}))})};function Dt(Kt){Kt.selectAll(".resize").attr("transform",function(tr){return"translate("+_e[+/e$/.test(tr)]+","+Ce[+/^s/.test(tr)]+")"})}function Bt(Kt){Kt.select(".extent").attr("x",_e[0]),Kt.selectAll(".extent,.n>rect,.s>rect").attr("width",_e[1]-_e[0])}function qt(Kt){Kt.select(".extent").attr("y",Ce[0]),Kt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ce[1]-Ce[0])}function _r(){var Kt=this,tr=r.select(r.event.target),ir=W.of(Kt,arguments),wr=r.select(Kt),sr=tr.datum(),vr=!/^(n|s)$/.test(sr)&&ue,nn=!/^(e|w)$/.test(sr)&&ge,en=tr.classed("extent"),Jr=Zt(Kt),Yr,kn=r.mouse(Kt),In,ia=r.select(f(Kt)).on("keydown.brush",fn).on("keyup.brush",Pn);if(r.event.changedTouches?ia.on("touchmove.brush",Vn).on("touchend.brush",Tn):ia.on("mousemove.brush",Vn).on("mouseup.brush",Tn),wr.interrupt().selectAll("*").interrupt(),en)kn[0]=_e[0]-kn[0],kn[1]=Ce[0]-kn[1];else if(sr){var Wn=+/w$/.test(sr),Zn=+/^n/.test(sr);In=[_e[1-Wn]-kn[0],Ce[1-Zn]-kn[1]],kn[0]=_e[Wn],kn[1]=Ce[Zn]}else r.event.altKey&&(Yr=kn.slice());wr.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",tr.style("cursor")),ir({type:"brushstart"}),Vn();function fn(){r.event.keyCode==32&&(en||(Yr=null,kn[0]-=_e[1],kn[1]-=Ce[1],en=2),Z())}function Pn(){r.event.keyCode==32&&en==2&&(kn[0]+=_e[1],kn[1]+=Ce[1],en=0,Z())}function Vn(){var va=r.mouse(Kt),Fa=!1;In&&(va[0]+=In[0],va[1]+=In[1]),en||(r.event.altKey?(Yr||(Yr=[(_e[0]+_e[1])/2,(Ce[0]+Ce[1])/2]),kn[0]=_e[+(va[0]<Yr[0])],kn[1]=Ce[+(va[1]<Yr[1])]):Yr=null),vr&&an(va,ue,0)&&(Bt(wr),Fa=!0),nn&&an(va,ge,1)&&(qt(wr),Fa=!0),Fa&&(Dt(wr),ir({type:"brush",mode:en?"move":"resize"}))}function an(va,Fa,Wa){var _i=qf(Fa),Ii=_i[0],Xo=_i[1],To=kn[Wa],Ao=Wa?Ce:_e,tl=Ao[1]-Ao[0],hi,fs;if(en&&(Ii-=To,Xo-=tl+To),hi=(Wa?rt:Ze)?Math.max(Ii,Math.min(Xo,va[Wa])):va[Wa],en?fs=(hi+=To)+tl:(Yr&&(To=Math.max(Ii,Math.min(Xo,2*Yr[Wa]-hi))),To<hi?(fs=hi,hi=To):fs=To),Ao[0]!=hi||Ao[1]!=fs)return Wa?tt=null:De=null,Ao[0]=hi,Ao[1]=fs,!0}function Tn(){Vn(),wr.style("pointer-events","all").selectAll(".resize").style("display",gt.empty()?"none":null),r.select("body").style("cursor",null),ia.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Jr(),ir({type:"brushend"})}}return gt.x=function(Kt){return arguments.length?(ue=Kt,pt=Vh[!ue<<1|!ge],gt):ue},gt.y=function(Kt){return arguments.length?(ge=Kt,pt=Vh[!ue<<1|!ge],gt):ge},gt.clamp=function(Kt){return arguments.length?(ue&&ge?(Ze=!!Kt[0],rt=!!Kt[1]):ue?Ze=!!Kt:ge&&(rt=!!Kt),gt):ue&&ge?[Ze,rt]:ue?Ze:ge?rt:null},gt.extent=function(Kt){var tr,ir,wr,sr,vr;return arguments.length?(ue&&(tr=Kt[0],ir=Kt[1],ge&&(tr=tr[0],ir=ir[0]),De=[tr,ir],ue.invert&&(tr=ue(tr),ir=ue(ir)),ir<tr&&(vr=tr,tr=ir,ir=vr),(tr!=_e[0]||ir!=_e[1])&&(_e=[tr,ir])),ge&&(wr=Kt[0],sr=Kt[1],ue&&(wr=wr[1],sr=sr[1]),tt=[wr,sr],ge.invert&&(wr=ge(wr),sr=ge(sr)),sr<wr&&(vr=wr,wr=sr,sr=vr),(wr!=Ce[0]||sr!=Ce[1])&&(Ce=[wr,sr])),gt):(ue&&(De?(tr=De[0],ir=De[1]):(tr=_e[0],ir=_e[1],ue.invert&&(tr=ue.invert(tr),ir=ue.invert(ir)),ir<tr&&(vr=tr,tr=ir,ir=vr))),ge&&(tt?(wr=tt[0],sr=tt[1]):(wr=Ce[0],sr=Ce[1],ge.invert&&(wr=ge.invert(wr),sr=ge.invert(sr)),sr<wr&&(vr=wr,wr=sr,sr=vr))),ue&&ge?[[tr,wr],[ir,sr]]:ue?[tr,ir]:ge&&[wr,sr])},gt.clear=function(){return gt.empty()||(_e=[0,0],Ce=[0,0],De=tt=null),gt},gt.empty=function(){return!!ue&&_e[0]==_e[1]||!!ge&&Ce[0]==Ce[1]},r.rebind(gt,W,"on")};var yd={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vh=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],gv=Ut.format=Ji.timeFormat,xd=gv.utc,yv=xd("%Y-%m-%dT%H:%M:%S.%LZ");gv.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?wp:yv;function wp(W){return W.toISOString()}wp.parse=function(W){var ue=new Date(W);return isNaN(ue)?null:ue},wp.toString=yv.toString,Ut.second=Ur(function(W){return new lr(Math.floor(W/1e3)*1e3)},function(W,ue){W.setTime(W.getTime()+Math.floor(ue)*1e3)},function(W){return W.getSeconds()}),Ut.seconds=Ut.second.range,Ut.seconds.utc=Ut.second.utc.range,Ut.minute=Ur(function(W){return new lr(Math.floor(W/6e4)*6e4)},function(W,ue){W.setTime(W.getTime()+Math.floor(ue)*6e4)},function(W){return W.getMinutes()}),Ut.minutes=Ut.minute.range,Ut.minutes.utc=Ut.minute.utc.range,Ut.hour=Ur(function(W){var ue=W.getTimezoneOffset()/60;return new lr((Math.floor(W/36e5-ue)+ue)*36e5)},function(W,ue){W.setTime(W.getTime()+Math.floor(ue)*36e5)},function(W){return W.getHours()}),Ut.hours=Ut.hour.range,Ut.hours.utc=Ut.hour.utc.range,Ut.month=Ur(function(W){return W=Ut.day(W),W.setDate(1),W},function(W,ue){W.setMonth(W.getMonth()+ue)},function(W){return W.getMonth()}),Ut.months=Ut.month.range,Ut.months.utc=Ut.month.utc.range;function uh(W,ue,ge){function _e(De){return W(De)}_e.invert=function(De){return Xc(W.invert(De))},_e.domain=function(De){return arguments.length?(W.domain(De),_e):W.domain().map(Xc)};function Ce(De,tt){var Ze=De[1]-De[0],rt=Ze/tt,pt=r.bisect(Ef,rt);return pt==Ef.length?[ue.year,eh(De.map(function(gt){return gt/31536e6}),tt)[2]]:pt?ue[rt/Ef[pt-1]<Ef[pt]/rt?pt-1:pt]:[fh,eh(De,tt)[2]]}return _e.nice=function(De,tt){var Ze=_e.domain(),rt=Bc(Ze),pt=De==null?Ce(rt,10):typeof De=="number"&&Ce(rt,De);pt&&(De=pt[0],tt=pt[1]);function gt(Dt){return!isNaN(Dt)&&!De.range(Dt,Xc(+Dt+1),tt).length}return _e.domain(Lh(Ze,tt>1?{floor:function(Dt){for(;gt(Dt=De.floor(Dt));)Dt=Xc(Dt-1);return Dt},ceil:function(Dt){for(;gt(Dt=De.ceil(Dt));)Dt=Xc(+Dt+1);return Dt}}:De))},_e.ticks=function(De,tt){var Ze=Bc(_e.domain()),rt=De==null?Ce(Ze,10):typeof De=="number"?Ce(Ze,De):!De.range&&[{range:De},tt];return rt&&(De=rt[0],tt=rt[1]),De.range(Ze[0],Xc(+Ze[1]+1),tt<1?1:tt)},_e.tickFormat=function(){return ge},_e.copy=function(){return uh(W.copy(),ue,ge)},_s(_e,W)}function Xc(W){return new Date(W)}var Ef=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ch=[[Ut.second,1],[Ut.second,5],[Ut.second,15],[Ut.second,30],[Ut.minute,1],[Ut.minute,5],[Ut.minute,15],[Ut.minute,30],[Ut.hour,1],[Ut.hour,3],[Ut.hour,6],[Ut.hour,12],[Ut.day,1],[Ut.day,2],[Ut.week,1],[Ut.month,1],[Ut.month,3],[Ut.year,1]],Tp=gv.multi([[".%L",function(W){return W.getMilliseconds()}],[":%S",function(W){return W.getSeconds()}],["%I:%M",function(W){return W.getMinutes()}],["%I %p",function(W){return W.getHours()}],["%a %d",function(W){return W.getDay()&&W.getDate()!=1}],["%b %d",function(W){return W.getDate()!=1}],["%B",function(W){return W.getMonth()}],["%Y",Lu]]),fh={range:function(W,ue,ge){return r.range(Math.ceil(W/ge)*ge,+ue,ge).map(Xc)},floor:G,ceil:G};ch.year=Ut.year,Ut.scale=function(){return uh(r.scale.linear(),ch,Tp)};var bd=ch.map(function(W){return[W[0].utc,W[1]]}),_d=xd.multi([[".%L",function(W){return W.getUTCMilliseconds()}],[":%S",function(W){return W.getUTCSeconds()}],["%I:%M",function(W){return W.getUTCMinutes()}],["%I %p",function(W){return W.getUTCHours()}],["%a %d",function(W){return W.getUTCDay()&&W.getUTCDate()!=1}],["%b %d",function(W){return W.getUTCDate()!=1}],["%B",function(W){return W.getUTCMonth()}],["%Y",Lu]]);bd.year=Ut.year.utc,Ut.scale.utc=function(){return uh(r.scale.linear(),bd,_d)},r.text=Rr(function(W){return W.responseText}),r.json=function(W,ue){return Er(W,"application/json",wd,ue)};function wd(W){return JSON.parse(W.responseText)}r.html=function(W,ue){return Er(W,"text/html",Lf,ue)};function Lf(W){var ue=c.createRange();return ue.selectNode(c.body),ue.createContextualFragment(W.responseText)}r.xml=Rr(function(W){return W.responseXML}),typeof d=="object"&&d.exports?d.exports=r:this.d3=r}).apply(self)},{}],170:[function(e,d,S){d.exports=function(){for(var r=0;r<arguments.length;r++)if(arguments[r]!==void 0)return arguments[r]}},{}],171:[function(e,d,S){var r=e("incremental-convex-hull"),a=e("uniq");d.exports=f;function u(n,o){this.point=n,this.index=o}function c(n,o){for(var l=n.point,h=o.point,i=l.length,s=0;s<i;++s){var p=h[s]-l[s];if(p)return p}return 0}function t(n,o,l){if(n===1)return l?[[-1,0]]:[];var h=o.map(function(m,b){return[m[0],b]});h.sort(function(m,b){return m[0]-b[0]});for(var i=new Array(n-1),s=1;s<n;++s){var p=h[s-1],v=h[s];i[s-1]=[p[1],v[1]]}return l&&i.push([-1,i[0][1]],[i[n-1][1],-1]),i}function f(n,o){var l=n.length;if(l===0)return[];var h=n[0].length;if(h<1)return[];if(h===1)return t(l,n,o);for(var i=new Array(l),s=1,p=0;p<l;++p){for(var v=n[p],m=new Array(h+1),b=0,y=0;y<h;++y){var x=v[y];m[y]=x,b+=x*x}m[h]=b,i[p]=new u(m,p),s=Math.max(b,s)}a(i,c),l=i.length;for(var w=new Array(l+h+1),g=new Array(l+h+1),T=(h+1)*(h+1)*s,M=new Array(h+1),p=0;p<=h;++p)M[p]=0;M[h]=T,w[0]=M.slice(),g[0]=-1;for(var p=0;p<=h;++p){var m=M.slice();m[p]=1,w[p+1]=m,g[p+1]=-1}for(var p=0;p<l;++p){var P=i[p];w[p+h+1]=P.point,g[p+h+1]=P.index}var L=r(w,!1);if(o?L=L.filter(function(I){for(var C=0,k=0;k<=h;++k){var E=g[I[k]];if(E<0&&++C>=2)return!1;I[k]=E}return!0}):L=L.filter(function(I){for(var C=0;C<=h;++C){var k=g[I[C]];if(k<0)return!1;I[C]=k}return!0}),h&1)for(var p=0;p<L.length;++p){var P=L[p],m=P[0];P[0]=P[1],P[1]=m}return L}},{"incremental-convex-hull":459,uniq:597}],172:[function(e,d,S){d.exports=c;var r=c.canvas=document.createElement("canvas"),a=r.getContext("2d"),u=t([32,126]);c.createPairs=t,c.ascii=u;function c(f,n){Array.isArray(f)&&(f=f.join(", "));var o={},l,h=16,i=.05;n&&(n.length===2&&typeof n[0]=="number"?l=t(n):Array.isArray(n)?l=n:(n.o?l=t(n.o):n.pairs&&(l=n.pairs),n.fontSize&&(h=n.fontSize),n.threshold!=null&&(i=n.threshold))),l||(l=u),a.font=h+"px "+f;for(var s=0;s<l.length;s++){var p=l[s],v=a.measureText(p[0]).width+a.measureText(p[1]).width,m=a.measureText(p).width;if(Math.abs(v-m)>h*i){var b=(m-v)/h;o[p]=b*1e3}}return o}function t(f){for(var n=[],o=f[0];o<=f[1];o++)for(var l=String.fromCharCode(o),h=f[0];h<f[1];h++){var i=String.fromCharCode(h),s=l+i;n.push(s)}return n}},{}],173:[function(e,d,S){(function(r){(function(){var a=!1;if(typeof Float64Array<"u"){var u=new Float64Array(1),c=new Uint32Array(u.buffer);if(u[0]=1,a=!0,c[1]===1072693248){let m=function(x,w){return c[0]=x,c[1]=w,u[0]},b=function(x){return u[0]=x,c[0]},y=function(x){return u[0]=x,c[1]};var o=m,f=b,n=y;d.exports=function(w){return u[0]=w,[c[0],c[1]]},d.exports.pack=m,d.exports.lo=b,d.exports.hi=y}else if(c[0]===1072693248){let m=function(x,w){return c[1]=x,c[0]=w,u[0]},b=function(x){return u[0]=x,c[1]},y=function(x){return u[0]=x,c[0]};var h=m,i=b,l=y;d.exports=function(w){return u[0]=w,[c[1],c[0]]},d.exports.pack=m,d.exports.lo=b,d.exports.hi=y}else a=!1}if(!a){let m=function(x,w){return t.writeUInt32LE(x,0,!0),t.writeUInt32LE(w,4,!0),t.readDoubleLE(0,!0)},b=function(x){return t.writeDoubleLE(x,0,!0),t.readUInt32LE(0,!0)},y=function(x){return t.writeDoubleLE(x,0,!0),t.readUInt32LE(4,!0)};var p=m,v=b,s=y,t=new r(8);d.exports=function(w){return t.writeDoubleLE(w,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},d.exports.pack=m,d.exports.lo=b,d.exports.hi=y}d.exports.sign=function(m){return d.exports.hi(m)>>>31},d.exports.exponent=function(m){var b=d.exports.hi(m);return(b<<1>>>21)-1023},d.exports.fraction=function(m){var b=d.exports.lo(m),y=d.exports.hi(m),x=y&(1<<20)-1;return y&2146435072&&(x+=1<<20),[b,x]},d.exports.denormalized=function(m){var b=d.exports.hi(m);return!(b&2146435072)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:111}],174:[function(e,d,S){var r=e("abs-svg-path"),a=e("normalize-svg-path"),u={M:"moveTo",C:"bezierCurveTo"};d.exports=function(c,t){c.beginPath(),a(r(t)).forEach(function(f){var n=f[0],o=f.slice(1);c[u[n]].apply(c,o)}),c.closePath()}},{"abs-svg-path":65,"normalize-svg-path":497}],175:[function(e,d,S){d.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(e,d,S){function r(c,t,f){var n=c[f]|0;if(n<=0)return[];var o=new Array(n),l;if(f===c.length-1)for(l=0;l<n;++l)o[l]=t;else for(l=0;l<n;++l)o[l]=r(c,t,f+1);return o}function a(c,t){var f,n;for(f=new Array(c),n=0;n<c;++n)f[n]=t;return f}function u(c,t){switch(typeof t>"u"&&(t=0),typeof c){case"number":if(c>0)return a(c|0,t);break;case"object":if(typeof c.length=="number")return r(c,t,0);break}return[]}d.exports=u},{}],177:[function(e,d,S){d.exports=r,d.exports.default=r;function r(U,Y,z){z=z||2;var B=Y&&Y.length,H=B?Y[0]*z:U.length,V=a(U,0,H,z,!0),Z=[];if(!V||V.next===V.prev)return Z;var q,J,ne,ve,$,j,ae;if(B&&(V=l(U,Y,V,z)),U.length>80*z){q=ne=U[0],J=ve=U[1];for(var ie=z;ie<H;ie+=z)$=U[ie],j=U[ie+1],$<q&&(q=$),j<J&&(J=j),$>ne&&(ne=$),j>ve&&(ve=j);ae=Math.max(ne-q,ve-J),ae=ae!==0?1/ae:0}return c(V,Z,z,q,J,ae),Z}function a(U,Y,z,B,H){var V,Z;if(H===G(U,Y,z,B)>0)for(V=Y;V<z;V+=B)Z=R(V,U[V],U[V+1],Z);else for(V=z-B;V>=Y;V-=B)Z=R(V,U[V],U[V+1],Z);return Z&&T(Z,Z.next)&&(O(Z),Z=Z.next),Z}function u(U,Y){if(!U)return U;Y||(Y=U);var z=U,B;do if(B=!1,!z.steiner&&(T(z,z.next)||g(z.prev,z,z.next)===0)){if(O(z),z=Y=z.prev,z===z.next)break;B=!0}else z=z.next;while(B||z!==Y);return Y}function c(U,Y,z,B,H,V,Z){if(!!U){!Z&&V&&v(U,B,H,V);for(var q=U,J,ne;U.prev!==U.next;){if(J=U.prev,ne=U.next,V?f(U,B,H,V):t(U)){Y.push(J.i/z),Y.push(U.i/z),Y.push(ne.i/z),O(U),U=ne.next,q=ne.next;continue}if(U=ne,U===q){Z?Z===1?(U=n(u(U),Y,z),c(U,Y,z,B,H,V,2)):Z===2&&o(U,Y,z,B,H,V):c(u(U),Y,z,B,H,V,1);break}}}}function t(U){var Y=U.prev,z=U,B=U.next;if(g(Y,z,B)>=0)return!1;for(var H=U.next.next;H!==U.prev;){if(x(Y.x,Y.y,z.x,z.y,B.x,B.y,H.x,H.y)&&g(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function f(U,Y,z,B){var H=U.prev,V=U,Z=U.next;if(g(H,V,Z)>=0)return!1;for(var q=H.x<V.x?H.x<Z.x?H.x:Z.x:V.x<Z.x?V.x:Z.x,J=H.y<V.y?H.y<Z.y?H.y:Z.y:V.y<Z.y?V.y:Z.y,ne=H.x>V.x?H.x>Z.x?H.x:Z.x:V.x>Z.x?V.x:Z.x,ve=H.y>V.y?H.y>Z.y?H.y:Z.y:V.y>Z.y?V.y:Z.y,$=b(q,J,Y,z,B),j=b(ne,ve,Y,z,B),ae=U.prevZ,ie=U.nextZ;ae&&ae.z>=$&&ie&&ie.z<=j;){if(ae!==U.prev&&ae!==U.next&&x(H.x,H.y,V.x,V.y,Z.x,Z.y,ae.x,ae.y)&&g(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,ie!==U.prev&&ie!==U.next&&x(H.x,H.y,V.x,V.y,Z.x,Z.y,ie.x,ie.y)&&g(ie.prev,ie,ie.next)>=0))return!1;ie=ie.nextZ}for(;ae&&ae.z>=$;){if(ae!==U.prev&&ae!==U.next&&x(H.x,H.y,V.x,V.y,Z.x,Z.y,ae.x,ae.y)&&g(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;ie&&ie.z<=j;){if(ie!==U.prev&&ie!==U.next&&x(H.x,H.y,V.x,V.y,Z.x,Z.y,ie.x,ie.y)&&g(ie.prev,ie,ie.next)>=0)return!1;ie=ie.nextZ}return!0}function n(U,Y,z){var B=U;do{var H=B.prev,V=B.next.next;!T(H,V)&&M(H,B,B.next,V)&&C(H,V)&&C(V,H)&&(Y.push(H.i/z),Y.push(B.i/z),Y.push(V.i/z),O(B),O(B.next),B=U=V),B=B.next}while(B!==U);return u(B)}function o(U,Y,z,B,H,V){var Z=U;do{for(var q=Z.next.next;q!==Z.prev;){if(Z.i!==q.i&&w(Z,q)){var J=E(Z,q);Z=u(Z,Z.next),J=u(J,J.next),c(Z,Y,z,B,H,V),c(J,Y,z,B,H,V);return}q=q.next}Z=Z.next}while(Z!==U)}function l(U,Y,z,B){var H=[],V,Z,q,J,ne;for(V=0,Z=Y.length;V<Z;V++)q=Y[V]*B,J=V<Z-1?Y[V+1]*B:U.length,ne=a(U,q,J,B,!1),ne===ne.next&&(ne.steiner=!0),H.push(y(ne));for(H.sort(h),V=0;V<H.length;V++)i(H[V],z),z=u(z,z.next);return z}function h(U,Y){return U.x-Y.x}function i(U,Y){if(Y=s(U,Y),Y){var z=E(Y,U);u(Y,Y.next),u(z,z.next)}}function s(U,Y){var z=Y,B=U.x,H=U.y,V=-1/0,Z;do{if(H<=z.y&&H>=z.next.y&&z.next.y!==z.y){var q=z.x+(H-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(q<=B&&q>V){if(V=q,q===B){if(H===z.y)return z;if(H===z.next.y)return z.next}Z=z.x<z.next.x?z:z.next}}z=z.next}while(z!==Y);if(!Z)return null;if(B===V)return Z;var J=Z,ne=Z.x,ve=Z.y,$=1/0,j;z=Z;do B>=z.x&&z.x>=ne&&B!==z.x&&x(H<ve?B:V,H,ne,ve,H<ve?V:B,H,z.x,z.y)&&(j=Math.abs(H-z.y)/(B-z.x),C(z,U)&&(j<$||j===$&&(z.x>Z.x||z.x===Z.x&&p(Z,z)))&&(Z=z,$=j)),z=z.next;while(z!==J);return Z}function p(U,Y){return g(U.prev,U,Y.prev)<0&&g(Y.next,U,U.next)<0}function v(U,Y,z,B){var H=U;do H.z===null&&(H.z=b(H.x,H.y,Y,z,B)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==U);H.prevZ.nextZ=null,H.prevZ=null,m(H)}function m(U){var Y,z,B,H,V,Z,q,J,ne=1;do{for(z=U,U=null,V=null,Z=0;z;){for(Z++,B=z,q=0,Y=0;Y<ne&&(q++,B=B.nextZ,!!B);Y++);for(J=ne;q>0||J>0&&B;)q!==0&&(J===0||!B||z.z<=B.z)?(H=z,z=z.nextZ,q--):(H=B,B=B.nextZ,J--),V?V.nextZ=H:U=H,H.prevZ=V,V=H;z=B}V.nextZ=null,ne*=2}while(Z>1);return U}function b(U,Y,z,B,H){return U=32767*(U-z)*H,Y=32767*(Y-B)*H,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,Y=(Y|Y<<8)&16711935,Y=(Y|Y<<4)&252645135,Y=(Y|Y<<2)&858993459,Y=(Y|Y<<1)&1431655765,U|Y<<1}function y(U){var Y=U,z=U;do(Y.x<z.x||Y.x===z.x&&Y.y<z.y)&&(z=Y),Y=Y.next;while(Y!==U);return z}function x(U,Y,z,B,H,V,Z,q){return(H-Z)*(Y-q)-(U-Z)*(V-q)>=0&&(U-Z)*(B-q)-(z-Z)*(Y-q)>=0&&(z-Z)*(V-q)-(H-Z)*(B-q)>=0}function w(U,Y){return U.next.i!==Y.i&&U.prev.i!==Y.i&&!I(U,Y)&&(C(U,Y)&&C(Y,U)&&k(U,Y)&&(g(U.prev,U,Y.prev)||g(U,Y.prev,Y))||T(U,Y)&&g(U.prev,U,U.next)>0&&g(Y.prev,Y,Y.next)>0)}function g(U,Y,z){return(Y.y-U.y)*(z.x-Y.x)-(Y.x-U.x)*(z.y-Y.y)}function T(U,Y){return U.x===Y.x&&U.y===Y.y}function M(U,Y,z,B){var H=L(g(U,Y,z)),V=L(g(U,Y,B)),Z=L(g(z,B,U)),q=L(g(z,B,Y));return!!(H!==V&&Z!==q||H===0&&P(U,z,Y)||V===0&&P(U,B,Y)||Z===0&&P(z,U,B)||q===0&&P(z,Y,B))}function P(U,Y,z){return Y.x<=Math.max(U.x,z.x)&&Y.x>=Math.min(U.x,z.x)&&Y.y<=Math.max(U.y,z.y)&&Y.y>=Math.min(U.y,z.y)}function L(U){return U>0?1:U<0?-1:0}function I(U,Y){var z=U;do{if(z.i!==U.i&&z.next.i!==U.i&&z.i!==Y.i&&z.next.i!==Y.i&&M(z,z.next,U,Y))return!0;z=z.next}while(z!==U);return!1}function C(U,Y){return g(U.prev,U,U.next)<0?g(U,Y,U.next)>=0&&g(U,U.prev,Y)>=0:g(U,Y,U.prev)<0||g(U,U.next,Y)<0}function k(U,Y){var z=U,B=!1,H=(U.x+Y.x)/2,V=(U.y+Y.y)/2;do z.y>V!=z.next.y>V&&z.next.y!==z.y&&H<(z.next.x-z.x)*(V-z.y)/(z.next.y-z.y)+z.x&&(B=!B),z=z.next;while(z!==U);return B}function E(U,Y){var z=new N(U.i,U.x,U.y),B=new N(Y.i,Y.x,Y.y),H=U.next,V=Y.prev;return U.next=Y,Y.prev=U,z.next=H,H.prev=z,B.next=z,z.prev=B,V.next=B,B.prev=V,B}function R(U,Y,z,B){var H=new N(U,Y,z);return B?(H.next=B.next,H.prev=B,B.next.prev=H,B.next=H):(H.prev=H,H.next=H),H}function O(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function N(U,Y,z){this.i=U,this.x=Y,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(U,Y,z,B){var H=Y&&Y.length,V=H?Y[0]*z:U.length,Z=Math.abs(G(U,0,V,z));if(H)for(var q=0,J=Y.length;q<J;q++){var ne=Y[q]*z,ve=q<J-1?Y[q+1]*z:U.length;Z-=Math.abs(G(U,ne,ve,z))}var $=0;for(q=0;q<B.length;q+=3){var j=B[q]*z,ae=B[q+1]*z,ie=B[q+2]*z;$+=Math.abs((U[j]-U[ie])*(U[ae+1]-U[j+1])-(U[j]-U[ae])*(U[ie+1]-U[j+1]))}return Z===0&&$===0?0:Math.abs(($-Z)/Z)};function G(U,Y,z,B){for(var H=0,V=Y,Z=z-B;V<z;V+=B)H+=(U[Z]-U[V])*(U[V+1]+U[Z+1]),Z=V;return H}r.flatten=function(U){for(var Y=U[0][0].length,z={vertices:[],holes:[],dimensions:Y},B=0,H=0;H<U.length;H++){for(var V=0;V<U[H].length;V++)for(var Z=0;Z<Y;Z++)z.vertices.push(U[H][V][Z]);H>0&&(B+=U[H-1].length,z.holes.push(B))}return z}},{}],178:[function(e,d,S){d.exports=a;var r=e("uniq");function a(u,c){var t=u.length;if(typeof c!="number"){c=0;for(var f=0;f<t;++f){var n=u[f];c=Math.max(c,n[0],n[1])}c=(c|0)+1}c=c|0;for(var o=new Array(c),f=0;f<c;++f)o[f]=[];for(var f=0;f<t;++f){var n=u[f];o[n[0]].push(n[1]),o[n[1]].push(n[0])}for(var l=0;l<c;++l)r(o[l],function(h,i){return h-i});return o}},{uniq:597}],179:[function(e,d,S){var r=e("strongly-connected-components");d.exports=function(u,c){var t=[],f=[],n=[],o={},l=[],h;function i(T){n[T]=!1,o.hasOwnProperty(T)&&Object.keys(o[T]).forEach(function(M){delete o[T][M],n[M]&&i(M)})}function s(T){var M=!1;f.push(T),n[T]=!0;var P,L;for(P=0;P<l[T].length;P++)L=l[T][P],L===h?(p(h,f),M=!0):n[L]||(M=s(L));if(M)i(T);else for(P=0;P<l[T].length;P++){L=l[T][P];var I=o[L];I||(I={},o[L]=I),I[L]=!0}return f.pop(),M}function p(T,M){var P=[].concat(M).concat(T);c?c(s):t.push(P)}function v(T){for(var M=0;M<u.length;M++)M<T&&(u[M]=[]),u[M]=u[M].filter(function(P){return P>=T})}function m(T){v(T);for(var M=u,P=r(M),L=P.components.filter(function(N){return N.length>1}),I=1/0,C,k=0;k<L.length;k++)for(var E=0;E<L[k].length;E++)L[k][E]<I&&(I=L[k][E],C=k);var R=L[C];if(!R)return!1;var O=u.map(function(N,G){return R.indexOf(G)===-1?[]:N.filter(function(U){return R.indexOf(U)!==-1})});return{leastVertex:I,adjList:O}}h=0;for(var b=u.length;h<b;){var y=m(h);if(h=y.leastVertex,l=y.adjList,l){for(var x=0;x<l.length;x++)for(var w=0;w<l[x].length;w++){var g=l[x][w];n[+g]=!1,o[g]={}}s(h),h=h+1}else h=b}if(!c)return t}},{"strongly-connected-components":569}],180:[function(e,d,S){var r=e("../../object/valid-value");d.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":211}],181:[function(e,d,S){d.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(e,d,S){d.exports=function(){var r=Array.from,a,u;return typeof r!="function"?!1:(a=["raz","dwa"],u=r(a),Boolean(u&&u!==a&&u[1]==="dwa"))}},{}],183:[function(e,d,S){var r=e("es6-symbol").iterator,a=e("../../function/is-arguments"),u=e("../../function/is-function"),c=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),f=e("../../object/valid-value"),n=e("../../object/is-value"),o=e("../../string/is-string"),l=Array.isArray,h=Function.prototype.call,i={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;d.exports=function(p){var v=arguments[1],m=arguments[2],b,y,x,w,g,T,M,P,L,I;if(p=Object(f(p)),n(v)&&t(v),!this||this===Array||!u(this)){if(!v){if(a(p))return g=p.length,g!==1?Array.apply(null,p):(w=new Array(1),w[0]=p[0],w);if(l(p)){for(w=new Array(g=p.length),y=0;y<g;++y)w[y]=p[y];return w}}w=[]}else b=this;if(!l(p)){if((L=p[r])!==void 0){for(M=t(L).call(p),b&&(w=new b),P=M.next(),y=0;!P.done;)I=v?h.call(v,m,P.value,y):P.value,b?(i.value=I,s(w,y,i)):w[y]=I,P=M.next(),++y;g=y}else if(o(p)){for(g=p.length,b&&(w=new b),y=0,x=0;y<g;++y)I=p[y],y+1<g&&(T=I.charCodeAt(0),T>=55296&&T<=56319&&(I+=p[++y])),I=v?h.call(v,m,I,x):I,b?(i.value=I,s(w,x,i)):w[x]=I,++x;g=x}}if(g===void 0)for(g=c(p.length),b&&(w=new b(g)),y=0;y<g;++y)I=v?h.call(v,m,p[y],y):p[y],b?(i.value=I,s(w,y,i)):w[y]=I;return b&&(i.value=null,w.length=g),w}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(e,d,S){var r=Object.prototype.toString,a=r.call(function(){return arguments}());d.exports=function(u){return r.call(u)===a}},{}],185:[function(e,d,S){var r=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);d.exports=function(u){return typeof u=="function"&&a(r.call(u))}},{}],186:[function(e,d,S){d.exports=function(){}},{}],187:[function(e,d,S){d.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(e,d,S){d.exports=function(){var r=Math.sign;return typeof r!="function"?!1:r(10)===1&&r(-20)===-1}},{}],189:[function(e,d,S){d.exports=function(r){return r=Number(r),isNaN(r)||r===0?r:r>0?1:-1}},{}],190:[function(e,d,S){var r=e("../math/sign"),a=Math.abs,u=Math.floor;d.exports=function(c){return isNaN(c)?0:(c=Number(c),c===0||!isFinite(c)?c:r(c)*u(a(c)))}},{"../math/sign":187}],191:[function(e,d,S){var r=e("./to-integer"),a=Math.max;d.exports=function(u){return a(0,r(u))}},{"./to-integer":190}],192:[function(e,d,S){var r=e("./valid-callable"),a=e("./valid-value"),u=Function.prototype.bind,c=Function.prototype.call,t=Object.keys,f=Object.prototype.propertyIsEnumerable;d.exports=function(n,o){return function(l,h){var i,s=arguments[2],p=arguments[3];return l=Object(a(l)),r(h),i=t(l),p&&i.sort(typeof p=="function"?u.call(p,l):void 0),typeof n!="function"&&(n=i[n]),c.call(n,i,function(v,m){return f.call(l,v)?c.call(h,s,l[v],v,l,m):o})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(e,d,S){d.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(e,d,S){d.exports=function(){var r=Object.assign,a;return typeof r!="function"?!1:(a={foo:"raz"},r(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],195:[function(e,d,S){var r=e("../keys"),a=e("../valid-value"),u=Math.max;d.exports=function(c,t){var f,n,o=u(arguments.length,2),l;for(c=Object(a(c)),l=function(h){try{c[h]=t[h]}catch(i){f||(f=i)}},n=1;n<o;++n)t=arguments[n],r(t).forEach(l);if(f!==void 0)throw f;return c}},{"../keys":201,"../valid-value":211}],196:[function(e,d,S){var r=e("../array/from"),a=e("./assign"),u=e("./valid-value");d.exports=function(c){var t=Object(u(c)),f=arguments[1],n=Object(arguments[2]);if(t!==c&&!f)return t;var o={};return f?r(f,function(l){(n.ensure||l in c)&&(o[l]=c[l])}):a(o,c),o}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(e,d,S){var r=Object.create,a;e("./set-prototype-of/is-implemented")()||(a=e("./set-prototype-of/shim")),d.exports=function(){var u,c,t;return!a||a.level!==1?r:(u={},c={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){if(f==="__proto__"){c[f]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}c[f]=t}),Object.defineProperties(u,c),Object.defineProperty(a,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:u}),function(f,n){return r(f===null?u:f,n)})}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(e,d,S){d.exports=e("./_iterate")("forEach")},{"./_iterate":192}],199:[function(e,d,S){var r=e("./is-value"),a={function:!0,object:!0};d.exports=function(u){return r(u)&&a[typeof u]||!1}},{"./is-value":200}],200:[function(e,d,S){var r=e("../function/noop")();d.exports=function(a){return a!==r&&a!==null}},{"../function/noop":186}],201:[function(e,d,S){d.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(e,d,S){d.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],203:[function(e,d,S){var r=e("../is-value"),a=Object.keys;d.exports=function(u){return a(r(u)?Object(u):u)}},{"../is-value":200}],204:[function(e,d,S){var r=e("./valid-callable"),a=e("./for-each"),u=Function.prototype.call;d.exports=function(c,t){var f={},n=arguments[2];return r(t),a(c,function(o,l,h,i){f[l]=u.call(t,n,o,l,h,i)}),f}},{"./for-each":198,"./valid-callable":209}],205:[function(e,d,S){var r=e("./is-value"),a=Array.prototype.forEach,u=Object.create,c=function(t,f){var n;for(n in t)f[n]=t[n]};d.exports=function(t){var f=u(null);return a.call(arguments,function(n){!r(n)||c(Object(n),f)}),f}},{"./is-value":200}],206:[function(e,d,S){d.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":207,"./shim":208}],207:[function(e,d,S){var r=Object.create,a=Object.getPrototypeOf,u={};d.exports=function(){var c=Object.setPrototypeOf,t=arguments[0]||r;return typeof c!="function"?!1:a(c(t(null),u))===u}},{}],208:[function(e,d,S){var r=e("../is-object"),a=e("../valid-value"),u=Object.prototype.isPrototypeOf,c=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},f;f=function(n,o){if(a(n),o===null||r(o))return n;throw new TypeError("Prototype must be null or an object")},d.exports=function(n){var o,l;return n?(n.level===2?n.set?(l=n.set,o=function(h,i){return l.call(f(h,i),i),h}):o=function(h,i){return f(h,i).__proto__=i,h}:o=function h(i,s){var p;return f(i,s),p=u.call(h.nullPolyfill,i),p&&delete h.nullPolyfill.__proto__,s===null&&(s=h.nullPolyfill),i.__proto__=s,p&&c(h.nullPolyfill,"__proto__",t),i},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null}(function(){var n=Object.create(null),o={},l,h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(h){try{l=h.set,l.call(n,o)}catch{}if(Object.getPrototypeOf(n)===o)return{set:l,level:2}}return n.__proto__=o,Object.getPrototypeOf(n)===o?{level:2}:(n={},n.__proto__=o,Object.getPrototypeOf(n)===o?{level:1}:!1)}()),e("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(e,d,S){d.exports=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}},{}],210:[function(e,d,S){var r=e("./is-object");d.exports=function(a){if(!r(a))throw new TypeError(a+" is not an Object");return a}},{"./is-object":199}],211:[function(e,d,S){var r=e("./is-value");d.exports=function(a){if(!r(a))throw new TypeError("Cannot use null or undefined");return a}},{"./is-value":200}],212:[function(e,d,S){d.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(e,d,S){var r="razdwatrzy";d.exports=function(){return typeof r.contains!="function"?!1:r.contains("dwa")===!0&&r.contains("foo")===!1}},{}],214:[function(e,d,S){var r=String.prototype.indexOf;d.exports=function(a){return r.call(this,a,arguments[1])>-1}},{}],215:[function(e,d,S){var r=Object.prototype.toString,a=r.call("");d.exports=function(u){return typeof u=="string"||u&&typeof u=="object"&&(u instanceof String||r.call(u)===a)||!1}},{}],216:[function(e,d,S){var r=Object.create(null),a=Math.random;d.exports=function(){var u;do u=a().toString(36).slice(2);while(r[u]);return u}},{}],217:[function(e,d,S){var r=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/string/#/contains"),u=e("d"),c=e("es6-symbol"),t=e("./"),f=Object.defineProperty,n;n=d.exports=function(o,l){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t.call(this,o),l?a.call(l,"key+value")?l="key+value":a.call(l,"key")?l="key":l="value":l="value",f(this,"__kind__",u("",l))},r&&r(n,t),delete n.prototype.constructor,n.prototype=Object.create(t.prototype,{_resolve:u(function(o){return this.__kind__==="value"?this.__list__[o]:this.__kind__==="key+value"?[o,this.__list__[o]]:o})}),f(n.prototype,c.toStringTag,u("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(e,d,S){var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/valid-callable"),u=e("es5-ext/string/is-string"),c=e("./get"),t=Array.isArray,f=Function.prototype.call,n=Array.prototype.some;d.exports=function(o,l){var h,i=arguments[2],s,p,v,m,b,y,x;if(t(o)||r(o)?h="array":u(o)?h="string":o=c(o),a(l),p=function(){v=!0},h==="array"){n.call(o,function(w){return f.call(l,i,w,p),v});return}if(h==="string"){for(b=o.length,m=0;m<b&&(y=o[m],m+1<b&&(x=y.charCodeAt(0),x>=55296&&x<=56319&&(y+=o[++m])),f.call(l,i,y,p),!v);++m);return}for(s=o.next();!s.done;){if(f.call(l,i,s.value,p),v)return;s=o.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(e,d,S){var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/string/is-string"),u=e("./array"),c=e("./string"),t=e("./valid-iterable"),f=e("es6-symbol").iterator;d.exports=function(n){return typeof t(n)[f]=="function"?n[f]():r(n)?new u(n):a(n)?new c(n):new u(n)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(e,d,S){var r=e("es5-ext/array/#/clear"),a=e("es5-ext/object/assign"),u=e("es5-ext/object/valid-callable"),c=e("es5-ext/object/valid-value"),t=e("d"),f=e("d/auto-bind"),n=e("es6-symbol"),o=Object.defineProperty,l=Object.defineProperties,h;d.exports=h=function(i,s){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");l(this,{__list__:t("w",c(i)),__context__:t("w",s),__nextIndex__:t("w",0)}),s&&(u(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete h.prototype.constructor,l(h.prototype,a({_next:t(function(){var i;if(!!this.__list__){if(this.__redo__&&(i=this.__redo__.shift(),i!==void 0))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(i){return i===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:t(function(i){return this.__list__[i]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},f({_onAdd:t(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){o(this,"__redo__",t("c",[i]));return}this.__redo__.forEach(function(s,p){s>=i&&(this.__redo__[p]=++s)},this),this.__redo__.push(i)}}),_onDelete:t(function(i){var s;i>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(s=this.__redo__.indexOf(i),s!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(p,v){p>i&&(this.__redo__[v]=--p)},this)))}),_onClear:t(function(){this.__redo__&&r.call(this.__redo__),this.__nextIndex__=0})}))),o(h.prototype,n.iterator,t(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(e,d,S){var r=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/is-value"),u=e("es5-ext/string/is-string"),c=e("es6-symbol").iterator,t=Array.isArray;d.exports=function(f){return a(f)?t(f)||u(f)||r(f)?!0:typeof f[c]=="function":!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(e,d,S){var r=e("es5-ext/object/set-prototype-of"),a=e("d"),u=e("es6-symbol"),c=e("./"),t=Object.defineProperty,f;f=d.exports=function(n){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");n=String(n),c.call(this,n),t(this,"__length__",a("",n.length))},r&&r(f,c),delete f.prototype.constructor,f.prototype=Object.create(c.prototype,{_next:a(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:a(function(n){var o=this.__list__[n],l;return this.__nextIndex__===this.__length__?o:(l=o.charCodeAt(0),l>=55296&&l<=56319?o+this.__list__[this.__nextIndex__++]:o)})}),t(f.prototype,u.toStringTag,a("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es6-symbol":225}],223:[function(e,d,S){var r=e("./is-iterable");d.exports=function(a){if(!r(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":221}],224:[function(e,d,S){(function(r,a){(function(){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(u,c){typeof S=="object"&&typeof d<"u"?d.exports=c():u.ES6Promise=c()})(this,function(){function u(ze){var Je=typeof ze;return ze!==null&&(Je==="object"||Je==="function")}function c(ze){return typeof ze=="function"}var t=void 0;Array.isArray?t=Array.isArray:t=function(ze){return Object.prototype.toString.call(ze)==="[object Array]"};var f=t,n=0,o=void 0,l=void 0,h=function(Je,qe){P[n]=Je,P[n+1]=qe,n+=2,n===2&&(l?l(L):C())};function i(ze){l=ze}function s(ze){h=ze}var p=typeof window<"u"?window:void 0,v=p||{},m=v.MutationObserver||v.WebKitMutationObserver,b=typeof self>"u"&&typeof r<"u"&&{}.toString.call(r)==="[object process]",y=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function x(){return function(){return r.nextTick(L)}}function w(){return typeof o<"u"?function(){o(L)}:M()}function g(){var ze=0,Je=new m(L),qe=document.createTextNode("");return Je.observe(qe,{characterData:!0}),function(){qe.data=ze=++ze%2}}function T(){var ze=new MessageChannel;return ze.port1.onmessage=L,function(){return ze.port2.postMessage(0)}}function M(){var ze=setTimeout;return function(){return ze(L,1)}}var P=new Array(1e3);function L(){for(var ze=0;ze<n;ze+=2){var Je=P[ze],qe=P[ze+1];Je(qe),P[ze]=void 0,P[ze+1]=void 0}n=0}function I(){try{var ze=Function("return this")().require("vertx");return o=ze.runOnLoop||ze.runOnContext,w()}catch{return M()}}var C=void 0;b?C=x():m?C=g():y?C=T():p===void 0&&typeof e=="function"?C=I():C=M();function k(ze,Je){var qe=this,Ee=new this.constructor(O);Ee[R]===void 0&&ce(Ee);var Ae=qe._state;if(Ae){var Be=arguments[Ae-1];h(function(){return ae(Ae,Ee,Be,qe._result)})}else $(qe,Ee,ze,Je);return Ee}function E(ze){var Je=this;if(ze&&typeof ze=="object"&&ze.constructor===Je)return ze;var qe=new Je(O);return q(qe,ze),qe}var R=Math.random().toString(36).substring(2);function O(){}var N=void 0,G=1,U=2;function Y(){return new TypeError("You cannot resolve a promise with itself")}function z(){return new TypeError("A promises callback cannot return that same promise.")}function B(ze,Je,qe,Ee){try{ze.call(Je,qe,Ee)}catch(Ae){return Ae}}function H(ze,Je,qe){h(function(Ee){var Ae=!1,Be=B(qe,Je,function($e){Ae||(Ae=!0,Je!==$e?q(Ee,$e):ne(Ee,$e))},function($e){Ae||(Ae=!0,ve(Ee,$e))},"Settle: "+(Ee._label||" unknown promise"));!Ae&&Be&&(Ae=!0,ve(Ee,Be))},ze)}function V(ze,Je){Je._state===G?ne(ze,Je._result):Je._state===U?ve(ze,Je._result):$(Je,void 0,function(qe){return q(ze,qe)},function(qe){return ve(ze,qe)})}function Z(ze,Je,qe){Je.constructor===ze.constructor&&qe===k&&Je.constructor.resolve===E?V(ze,Je):qe===void 0?ne(ze,Je):c(qe)?H(ze,Je,qe):ne(ze,Je)}function q(ze,Je){if(ze===Je)ve(ze,Y());else if(u(Je)){var qe=void 0;try{qe=Je.then}catch(Ee){ve(ze,Ee);return}Z(ze,Je,qe)}else ne(ze,Je)}function J(ze){ze._onerror&&ze._onerror(ze._result),j(ze)}function ne(ze,Je){ze._state===N&&(ze._result=Je,ze._state=G,ze._subscribers.length!==0&&h(j,ze))}function ve(ze,Je){ze._state===N&&(ze._state=U,ze._result=Je,h(J,ze))}function $(ze,Je,qe,Ee){var Ae=ze._subscribers,Be=Ae.length;ze._onerror=null,Ae[Be]=Je,Ae[Be+G]=qe,Ae[Be+U]=Ee,Be===0&&ze._state&&h(j,ze)}function j(ze){var Je=ze._subscribers,qe=ze._state;if(Je.length!==0){for(var Ee=void 0,Ae=void 0,Be=ze._result,$e=0;$e<Je.length;$e+=3)Ee=Je[$e],Ae=Je[$e+qe],Ee?ae(qe,Ee,Ae,Be):Ae(Be);ze._subscribers.length=0}}function ae(ze,Je,qe,Ee){var Ae=c(qe),Be=void 0,$e=void 0,xt=!0;if(Ae){try{Be=qe(Ee)}catch(bt){xt=!1,$e=bt}if(Je===Be){ve(Je,z());return}}else Be=Ee;Je._state!==N||(Ae&&xt?q(Je,Be):xt===!1?ve(Je,$e):ze===G?ne(Je,Be):ze===U&&ve(Je,Be))}function ie(ze,Je){try{Je(function(Ee){q(ze,Ee)},function(Ee){ve(ze,Ee)})}catch(qe){ve(ze,qe)}}var te=0;function re(){return te++}function ce(ze){ze[R]=te++,ze._state=void 0,ze._result=void 0,ze._subscribers=[]}function pe(){return new Error("Array Methods must be provided an Array")}var fe=function(){function ze(Je,qe){this._instanceConstructor=Je,this.promise=new Je(O),this.promise[R]||ce(this.promise),f(qe)?(this.length=qe.length,this._remaining=qe.length,this._result=new Array(this.length),this.length===0?ne(this.promise,this._result):(this.length=this.length||0,this._enumerate(qe),this._remaining===0&&ne(this.promise,this._result))):ve(this.promise,pe())}return ze.prototype._enumerate=function(qe){for(var Ee=0;this._state===N&&Ee<qe.length;Ee++)this._eachEntry(qe[Ee],Ee)},ze.prototype._eachEntry=function(qe,Ee){var Ae=this._instanceConstructor,Be=Ae.resolve;if(Be===E){var $e=void 0,xt=void 0,bt=!1;try{$e=qe.then}catch(st){bt=!0,xt=st}if($e===k&&qe._state!==N)this._settledAt(qe._state,Ee,qe._result);else if(typeof $e!="function")this._remaining--,this._result[Ee]=qe;else if(Ae===Re){var Ne=new Ae(O);bt?ve(Ne,xt):Z(Ne,qe,$e),this._willSettleAt(Ne,Ee)}else this._willSettleAt(new Ae(function(st){return st(qe)}),Ee)}else this._willSettleAt(Be(qe),Ee)},ze.prototype._settledAt=function(qe,Ee,Ae){var Be=this.promise;Be._state===N&&(this._remaining--,qe===U?ve(Be,Ae):this._result[Ee]=Ae),this._remaining===0&&ne(Be,this._result)},ze.prototype._willSettleAt=function(qe,Ee){var Ae=this;$(qe,void 0,function(Be){return Ae._settledAt(G,Ee,Be)},function(Be){return Ae._settledAt(U,Ee,Be)})},ze}();function se(ze){return new fe(this,ze).promise}function de(ze){var Je=this;return f(ze)?new Je(function(qe,Ee){for(var Ae=ze.length,Be=0;Be<Ae;Be++)Je.resolve(ze[Be]).then(qe,Ee)}):new Je(function(qe,Ee){return Ee(new TypeError("You must pass an array to race."))})}function be(ze){var Je=this,qe=new Je(O);return ve(qe,ze),qe}function xe(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ke(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Re=function(){function ze(Je){this[R]=re(),this._result=this._state=void 0,this._subscribers=[],O!==Je&&(typeof Je!="function"&&xe(),this instanceof ze?ie(this,Je):ke())}return ze.prototype.catch=function(qe){return this.then(null,qe)},ze.prototype.finally=function(qe){var Ee=this,Ae=Ee.constructor;return c(qe)?Ee.then(function(Be){return Ae.resolve(qe()).then(function(){return Be})},function(Be){return Ae.resolve(qe()).then(function(){throw Be})}):Ee.then(qe,qe)},ze}();Re.prototype.then=k,Re.all=se,Re.race=de,Re.resolve=E,Re.reject=be,Re._setScheduler=i,Re._setAsap=s,Re._asap=h;function Ke(){var ze=void 0;if(typeof a<"u")ze=a;else if(typeof self<"u")ze=self;else try{ze=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Je=ze.Promise;if(Je){var qe=null;try{qe=Object.prototype.toString.call(Je.resolve())}catch{}if(qe==="[object Promise]"&&!Je.cast)return}ze.Promise=Re}return Re.polyfill=Ke,Re.Promise=Re,Re})}).call(this)}).call(this,e("_process"),typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:526}],225:[function(e,d,S){d.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(e,d,S){var r=e("ext/global-this"),a={object:!0,symbol:!0};d.exports=function(){var u=r.Symbol,c;if(typeof u!="function")return!1;c=u("test symbol");try{String(c)}catch{return!1}return!(!a[typeof u.iterator]||!a[typeof u.toPrimitive]||!a[typeof u.toStringTag])}},{"ext/global-this":238}],227:[function(e,d,S){d.exports=function(r){return r?typeof r=="symbol"?!0:!r.constructor||r.constructor.name!=="Symbol"?!1:r[r.constructor.toStringTag]==="Symbol":!1}},{}],228:[function(e,d,S){var r=e("d"),a=Object.create,u=Object.defineProperty,c=Object.prototype,t=a(null);d.exports=function(f){for(var n=0,o,l;t[f+(n||"")];)++n;return f+=n||"",t[f]=!0,o="@@"+f,u(c,o,r.gs(null,function(h){l||(l=!0,u(this,o,r(h)),l=!1)})),o}},{d:155}],229:[function(e,d,S){var r=e("d"),a=e("ext/global-this").Symbol;d.exports=function(u){return Object.defineProperties(u,{hasInstance:r("",a&&a.hasInstance||u("hasInstance")),isConcatSpreadable:r("",a&&a.isConcatSpreadable||u("isConcatSpreadable")),iterator:r("",a&&a.iterator||u("iterator")),match:r("",a&&a.match||u("match")),replace:r("",a&&a.replace||u("replace")),search:r("",a&&a.search||u("search")),species:r("",a&&a.species||u("species")),split:r("",a&&a.split||u("split")),toPrimitive:r("",a&&a.toPrimitive||u("toPrimitive")),toStringTag:r("",a&&a.toStringTag||u("toStringTag")),unscopables:r("",a&&a.unscopables||u("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(e,d,S){var r=e("d"),a=e("../../../validate-symbol"),u=Object.create(null);d.exports=function(c){return Object.defineProperties(c,{for:r(function(t){return u[t]?u[t]:u[t]=c(String(t))}),keyFor:r(function(t){var f;a(t);for(f in u)if(u[f]===t)return f})})}},{"../../../validate-symbol":232,d:155}],231:[function(e,d,S){var r=e("d"),a=e("./validate-symbol"),u=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),n=Object.create,o=Object.defineProperties,l=Object.defineProperty,h,i,s;if(typeof u=="function")try{String(u()),s=!0}catch{}else u=null;i=function(v){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return h(v)},d.exports=h=function p(v){var m;if(this instanceof p)throw new TypeError("Symbol is not a constructor");return s?u(v):(m=n(i.prototype),v=v===void 0?"":String(v),o(m,{__description__:r("",v),__name__:r("",c(v))}))},t(h),f(h),o(i.prototype,{constructor:r(h),toString:r("",function(){return this.__name__})}),o(h.prototype,{toString:r(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:r(function(){return a(this)})}),l(h.prototype,h.toPrimitive,r("",function(){var p=a(this);return typeof p=="symbol"?p:p.toString()})),l(h.prototype,h.toStringTag,r("c","Symbol")),l(i.prototype,h.toStringTag,r("c",h.prototype[h.toStringTag])),l(i.prototype,h.toPrimitive,r("c",h.prototype[h.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(e,d,S){var r=e("./is-symbol");d.exports=function(a){if(!r(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":227}],233:[function(e,d,S){d.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(e,d,S){d.exports=function(){var r,a;if(typeof WeakMap!="function")return!1;try{r=new WeakMap([[a={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(r)!=="[object WeakMap]"||typeof r.set!="function"||r.set({},1)!==r||typeof r.delete!="function"||typeof r.has!="function"||r.get(a)!=="one")}},{}],235:[function(e,d,S){d.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],236:[function(e,d,S){var r=e("es5-ext/object/is-value"),a=e("es5-ext/object/set-prototype-of"),u=e("es5-ext/object/valid-object"),c=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),f=e("d"),n=e("es6-iterator/get"),o=e("es6-iterator/for-of"),l=e("es6-symbol").toStringTag,h=e("./is-native-implemented"),i=Array.isArray,s=Object.defineProperty,p=Object.prototype.hasOwnProperty,v=Object.getPrototypeOf,m;d.exports=m=function(){var b=arguments[0],y;if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return y=h&&a&&WeakMap!==m?a(new WeakMap,v(this)):this,r(b)&&(i(b)||(b=n(b))),s(y,"__weakMapData__",f("c","$weakMap$"+t())),b&&o(b,function(x){c(x),y.set(x[0],x[1])}),y},h&&(a&&a(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:f(m)})),Object.defineProperties(m.prototype,{delete:f(function(b){return p.call(u(b),this.__weakMapData__)?(delete b[this.__weakMapData__],!0):!1}),get:f(function(b){if(!!p.call(u(b),this.__weakMapData__))return b[this.__weakMapData__]}),has:f(function(b){return p.call(u(b),this.__weakMapData__)}),set:f(function(b,y){return s(u(b),this.__weakMapData__,f("c",y)),this}),toString:f(function(){return"[object WeakMap]"})}),s(m.prototype,l,f("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(e,d,S){var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};d.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],238:[function(e,d,S){d.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(e,d,S){d.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],240:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u||0,f=c||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[t*a[12]+a[8],t*a[13]+a[9],t*a[14]+a[10],t*a[15]+a[11]],[f*a[12]-a[8],f*a[13]-a[9],f*a[14]-a[10],f*a[15]-a[11]]]}},{}],241:[function(e,d,S){var r=e("is-string-blank");d.exports=function(a){var u=typeof a;if(u==="string"){var c=a;if(a=+a,a===0&&r(c))return!1}else if(u!=="number")return!1;return a-a<1}},{"is-string-blank":470}],242:[function(e,d,S){d.exports=n;var r=e("cubic-hermite"),a=e("binary-search-bounds");function u(o,l,h){return Math.min(l,Math.max(o,h))}function c(o,l,h){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=o.slice().reverse(),this._velocity=l.slice().reverse(),this._time=[h],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var t=c.prototype;t.flush=function(o){var l=a.gt(this._time,o)-1;l<=0||(this._time.splice(0,l),this._state.splice(0,l*this.dimension),this._velocity.splice(0,l*this.dimension))},t.curve=function(o){var l=this._time,h=l.length,i=a.le(l,o),s=this._scratch[0],p=this._state,v=this._velocity,m=this.dimension,b=this.bounds;if(i<0)for(var y=m-1,x=0;x<m;++x,--y)s[x]=p[y];else if(i>=h-1)for(var y=p.length-1,w=o-l[h-1],x=0;x<m;++x,--y)s[x]=p[y]+w*v[y];else{for(var y=m*(i+1)-1,g=l[i],T=l[i+1],M=T-g||1,P=this._scratch[1],L=this._scratch[2],I=this._scratch[3],C=this._scratch[4],k=!0,x=0;x<m;++x,--y)P[x]=p[y],I[x]=v[y]*M,L[x]=p[y+m],C[x]=v[y+m]*M,k=k&&P[x]===L[x]&&I[x]===C[x]&&I[x]===0;if(k)for(var x=0;x<m;++x)s[x]=P[x];else r(P,I,L,C,(o-g)/M,s)}for(var E=b[0],R=b[1],x=0;x<m;++x)s[x]=u(E[x],R[x],s[x]);return s},t.dcurve=function(o){var l=this._time,h=l.length,i=a.le(l,o),s=this._scratch[0],p=this._state,v=this._velocity,m=this.dimension;if(i>=h-1){var b=p.length-1;o-l[h-1];for(var y=0;y<m;++y,--b)s[y]=v[b]}else{for(var b=m*(i+1)-1,x=l[i],w=l[i+1],g=w-x||1,T=this._scratch[1],M=this._scratch[2],P=this._scratch[3],L=this._scratch[4],I=!0,y=0;y<m;++y,--b)T[y]=p[b],P[y]=v[b]*g,M[y]=p[b+m],L[y]=v[b+m]*g,I=I&&T[y]===M[y]&&P[y]===L[y]&&P[y]===0;if(I)for(var y=0;y<m;++y)s[y]=0;else{r.derivative(T,P,M,L,(o-x)/g,s);for(var y=0;y<m;++y)s[y]/=g}}return s},t.lastT=function(){var o=this._time;return o[o.length-1]},t.stable=function(){for(var o=this._velocity,l=o.length,h=this.dimension-1;h>=0;--h)if(o[--l])return!1;return!0},t.jump=function(o){var l=this.lastT(),h=this.dimension;if(!(o<l||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,v=this.bounds,m=v[0],b=v[1];this._time.push(l,o);for(var y=0;y<2;++y)for(var x=0;x<h;++x)i.push(i[p++]),s.push(0);this._time.push(o);for(var x=h;x>0;--x)i.push(u(m[x-1],b[x-1],arguments[x])),s.push(0)}},t.push=function(o){var l=this.lastT(),h=this.dimension;if(!(o<l||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,v=o-l,m=this.bounds,b=m[0],y=m[1],x=v>1e-6?1/v:0;this._time.push(o);for(var w=h;w>0;--w){var g=u(b[w-1],y[w-1],arguments[w]);i.push(g),s.push((g-i[p++])*x)}}},t.set=function(o){var l=this.dimension;if(!(o<this.lastT()||arguments.length!==l+1)){var h=this._state,i=this._velocity,s=this.bounds,p=s[0],v=s[1];this._time.push(o);for(var m=l;m>0;--m)h.push(u(p[m-1],v[m-1],arguments[m])),i.push(0)}},t.move=function(o){var l=this.lastT(),h=this.dimension;if(!(o<=l||arguments.length!==h+1)){var i=this._state,s=this._velocity,p=i.length-this.dimension,v=this.bounds,m=v[0],b=v[1],y=o-l,x=y>1e-6?1/y:0;this._time.push(o);for(var w=h;w>0;--w){var g=arguments[w];i.push(u(m[w-1],b[w-1],i[p++]+g)),s.push(g*x)}}},t.idle=function(o){var l=this.lastT();if(!(o<l)){var h=this.dimension,i=this._state,s=this._velocity,p=i.length-h,v=this.bounds,m=v[0],b=v[1],y=o-l;this._time.push(o);for(var x=h-1;x>=0;--x)i.push(u(m[x],b[x],i[p]+y*s[p])),s.push(0),p+=1}};function f(o){for(var l=new Array(o),h=0;h<o;++h)l[h]=0;return l}function n(o,l,h){switch(arguments.length){case 0:return new c([0],[0],0);case 1:if(typeof o=="number"){var i=f(o);return new c(i,i,0)}else return new c(o,f(o.length),0);case 2:if(typeof l=="number"){var i=f(o.length);return new c(o,i,+l)}else h=0;case 3:if(o.length!==l.length)throw new Error("state and velocity lengths must match");return new c(o,l,h)}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(e,d,S){function r(u,c,t,f,n,o){var l=["function ",u,"(a,l,h,",f.join(","),"){",o?"":"var i=",t?"l-1":"h+1",";while(l<=h){	var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return o?c.indexOf("c")<0?l.push(";if(x===y){return m}else if(x<=y){"):l.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):l.push(";if(",c,"){i=m;"),t?l.push("l=m+1}else{h=m-1}"):l.push("h=m-1}else{l=m+1}"),l.push("}"),o?l.push("return -1};"):l.push("return i};"),l.join("")}function a(u,c,t,f){var n=new Function([r("A","x"+u+"y",c,["y"],!1,f),r("B","x"+u+"y",c,["y"],!0,f),r("P","c(x,y)"+u+"0",c,["y","c"],!1,f),r("Q","c(x,y)"+u+"0",c,["y","c"],!0,f),"function dispatchBsearch",t,"(a,y,c,l,h){	if(a.shape){	if(typeof(c)==='function'){	return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)	}else{	return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)	}}else{	if(typeof(c)==='function'){	return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)	}else{	return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)	}}}	return dispatchBsearch",t].join(""));return n()}d.exports={ge:a(">=",!1,"GE"),gt:a(">",!1,"GT"),lt:a("<",!0,"LT"),le:a("<=",!0,"LE"),eq:a("-",!0,"EQ",!0)}},{}],244:[function(e,d,S){var r=e("dtype");d.exports=a;function a(u,c,t){if(!u)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(u)&&u[0]&&typeof u[0][0]=="number"){var f=u[0].length,n=u.length*f,o,l,h,i;(!c||typeof c=="string")&&(c=new(r(c||"float32"))(n+t));var s=c.length-t;if(n!==s)throw new Error("source length "+n+" ("+f+"x"+u.length+") does not match destination length "+s);for(o=0,h=t;o<u.length;o++)for(l=0;l<f;l++)c[h++]=u[o][l]===null?NaN:u[o][l]}else if(!c||typeof c=="string"){var p=r(c||"float32");if(Array.isArray(u)||c==="array")for(c=new p(u.length+t),o=0,h=t,i=c.length;h<i;h++,o++)c[h]=u[o]===null?NaN:u[o];else t===0?c=new p(u):(c=new p(u.length+t),c.set(u,t))}else c.set(u,t);return c}},{dtype:175}],245:[function(e,d,S){var r=e("css-font/stringify"),a=[32,126];d.exports=u;function u(c){c=c||{};var t=c.shape?c.shape:c.canvas?[c.canvas.width,c.canvas.height]:[512,512],f=c.canvas||document.createElement("canvas"),n=c.font,o=typeof c.step=="number"?[c.step,c.step]:c.step||[32,32],l=c.chars||a;if(n&&typeof n!="string"&&(n=r(n)),!Array.isArray(l))l=String(l).split("");else if(l.length===2&&typeof l[0]=="number"&&typeof l[1]=="number"){for(var h=[],i=l[0],s=0;i<=l[1];i++)h[s++]=String.fromCharCode(i);l=h}t=t.slice(),f.width=t[0],f.height=t[1];var p=f.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,f.width,f.height),p.font=n,p.textAlign="center",p.textBaseline="middle",p.fillStyle="#fff";for(var v=o[0]/2,m=o[1]/2,i=0;i<l.length;i++)p.fillText(l[i],v,m),(v+=o[0])>t[0]-o[0]/2&&(v=o[0]/2,m+=o[1]);return f}},{"css-font/stringify":147}],246:[function(e,d,S){d.exports=r,r.canvas=document.createElement("canvas"),r.cache={};function r(i,f){f||(f={}),(typeof i=="string"||Array.isArray(i))&&(f.family=i);var n=Array.isArray(f.family)?f.family.join(", "):f.family;if(!n)throw Error("`family` must be defined");var o=f.size||f.fontSize||f.em||48,l=f.weight||f.fontWeight||"",h=f.style||f.fontStyle||"",i=[h,l,o].join(" ")+"px "+n,s=f.origin||"top";if(r.cache[n]&&o<=r.cache[n].em)return a(r.cache[n],s);var p=f.canvas||r.canvas,v=p.getContext("2d"),m={upper:f.upper!==void 0?f.upper:"H",lower:f.lower!==void 0?f.lower:"x",descent:f.descent!==void 0?f.descent:"p",ascent:f.ascent!==void 0?f.ascent:"h",tittle:f.tittle!==void 0?f.tittle:"i",overshoot:f.overshoot!==void 0?f.overshoot:"O"},b=Math.ceil(o*1.5);p.height=b,p.width=b*.5,v.font=i;var y="H",x={top:0};v.clearRect(0,0,b,b),v.textBaseline="top",v.fillStyle="black",v.fillText(y,0,0);var w=u(v.getImageData(0,0,b,b));v.clearRect(0,0,b,b),v.textBaseline="bottom",v.fillText(y,0,b);var g=u(v.getImageData(0,0,b,b));x.lineHeight=x.bottom=b-g+w,v.clearRect(0,0,b,b),v.textBaseline="alphabetic",v.fillText(y,0,b);var T=u(v.getImageData(0,0,b,b)),M=b-T-1+w;x.baseline=x.alphabetic=M,v.clearRect(0,0,b,b),v.textBaseline="middle",v.fillText(y,0,b*.5);var P=u(v.getImageData(0,0,b,b));x.median=x.middle=b-P-1+w-b*.5,v.clearRect(0,0,b,b),v.textBaseline="hanging",v.fillText(y,0,b*.5);var L=u(v.getImageData(0,0,b,b));x.hanging=b-L-1+w-b*.5,v.clearRect(0,0,b,b),v.textBaseline="ideographic",v.fillText(y,0,b);var I=u(v.getImageData(0,0,b,b));if(x.ideographic=b-I-1+w,m.upper&&(v.clearRect(0,0,b,b),v.textBaseline="top",v.fillText(m.upper,0,0),x.upper=u(v.getImageData(0,0,b,b)),x.capHeight=x.baseline-x.upper),m.lower&&(v.clearRect(0,0,b,b),v.textBaseline="top",v.fillText(m.lower,0,0),x.lower=u(v.getImageData(0,0,b,b)),x.xHeight=x.baseline-x.lower),m.tittle&&(v.clearRect(0,0,b,b),v.textBaseline="top",v.fillText(m.tittle,0,0),x.tittle=u(v.getImageData(0,0,b,b))),m.ascent&&(v.clearRect(0,0,b,b),v.textBaseline="top",v.fillText(m.ascent,0,0),x.ascent=u(v.getImageData(0,0,b,b))),m.descent&&(v.clearRect(0,0,b,b),v.textBaseline="top",v.fillText(m.descent,0,0),x.descent=c(v.getImageData(0,0,b,b))),m.overshoot){v.clearRect(0,0,b,b),v.textBaseline="top",v.fillText(m.overshoot,0,0);var C=c(v.getImageData(0,0,b,b));x.overshoot=C-M}for(var k in x)x[k]/=o;return x.em=o,r.cache[n]=x,a(x,s)}function a(t,f){var n={};typeof f=="string"&&(f=t[f]);for(var o in t)o!=="em"&&(n[o]=t[o]-f);return n}function u(t){for(var f=t.height,n=t.data,o=3;o<n.length;o+=4)if(n[o]!==0)return Math.floor((o-3)*.25/f)}function c(t){for(var f=t.height,n=t.data,o=n.length-1;o>0;o-=4)if(n[o]!==0)return Math.floor((o-3)*.25/f)}},{}],247:[function(e,d,S){d.exports=y;var r=0,a=1;function u(x,w,g,T,M,P){this._color=x,this.key=w,this.value=g,this.left=T,this.right=M,this._count=P}function c(x){return new u(x._color,x.key,x.value,x.left,x.right,x._count)}function t(x,w){return new u(x,w.key,w.value,w.left,w.right,w._count)}function f(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function n(x,w){this._compare=x,this.root=w}var o=n.prototype;Object.defineProperty(o,"keys",{get:function(){var x=[];return this.forEach(function(w,g){x.push(w)}),x}}),Object.defineProperty(o,"values",{get:function(){var x=[];return this.forEach(function(w,g){x.push(g)}),x}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(x,w){for(var g=this._compare,T=this.root,M=[],P=[];T;){var L=g(x,T.key);M.push(T),P.push(L),L<=0?T=T.left:T=T.right}M.push(new u(r,x,w,null,null,1));for(var I=M.length-2;I>=0;--I){var T=M[I];P[I]<=0?M[I]=new u(T._color,T.key,T.value,M[I+1],T.right,T._count+1):M[I]=new u(T._color,T.key,T.value,T.left,M[I+1],T._count+1)}for(var I=M.length-1;I>1;--I){var C=M[I-1],T=M[I];if(C._color===a||T._color===a)break;var k=M[I-2];if(k.left===C)if(C.left===T){var E=k.right;if(E&&E._color===r)C._color=a,k.right=t(a,E),k._color=r,I-=1;else{if(k._color=r,k.left=C.right,C._color=a,C.right=k,M[I-2]=C,M[I-1]=T,f(k),f(C),I>=3){var R=M[I-3];R.left===k?R.left=C:R.right=C}break}}else{var E=k.right;if(E&&E._color===r)C._color=a,k.right=t(a,E),k._color=r,I-=1;else{if(C.right=T.left,k._color=r,k.left=T.right,T._color=a,T.left=C,T.right=k,M[I-2]=T,M[I-1]=C,f(k),f(C),f(T),I>=3){var R=M[I-3];R.left===k?R.left=T:R.right=T}break}}else if(C.right===T){var E=k.left;if(E&&E._color===r)C._color=a,k.left=t(a,E),k._color=r,I-=1;else{if(k._color=r,k.right=C.left,C._color=a,C.left=k,M[I-2]=C,M[I-1]=T,f(k),f(C),I>=3){var R=M[I-3];R.right===k?R.right=C:R.left=C}break}}else{var E=k.left;if(E&&E._color===r)C._color=a,k.left=t(a,E),k._color=r,I-=1;else{if(C.left=T.right,k._color=r,k.right=T.left,T._color=a,T.right=C,T.left=k,M[I-2]=T,M[I-1]=C,f(k),f(C),f(T),I>=3){var R=M[I-3];R.right===k?R.right=T:R.left=T}break}}}return M[0]._color=a,new n(g,M[0])};function l(x,w){if(w.left){var g=l(x,w.left);if(g)return g}var g=x(w.key,w.value);if(g)return g;if(w.right)return l(x,w.right)}function h(x,w,g,T){var M=w(x,T.key);if(M<=0){if(T.left){var P=h(x,w,g,T.left);if(P)return P}var P=g(T.key,T.value);if(P)return P}if(T.right)return h(x,w,g,T.right)}function i(x,w,g,T,M){var P=g(x,M.key),L=g(w,M.key),I;if(P<=0&&(M.left&&(I=i(x,w,g,T,M.left),I)||L>0&&(I=T(M.key,M.value),I)))return I;if(L>0&&M.right)return i(x,w,g,T,M.right)}o.forEach=function(w,g,T){if(!!this.root)switch(arguments.length){case 1:return l(w,this.root);case 2:return h(g,this._compare,w,this.root);case 3:return this._compare(g,T)>=0?void 0:i(g,T,this._compare,w,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var x=[],w=this.root;w;)x.push(w),w=w.left;return new s(this,x)}}),Object.defineProperty(o,"end",{get:function(){for(var x=[],w=this.root;w;)x.push(w),w=w.right;return new s(this,x)}}),o.at=function(x){if(x<0)return new s(this,[]);for(var w=this.root,g=[];;){if(g.push(w),w.left){if(x<w.left._count){w=w.left;continue}x-=w.left._count}if(!x)return new s(this,g);if(x-=1,w.right){if(x>=w.right._count)break;w=w.right}else break}return new s(this,[])},o.ge=function(x){for(var w=this._compare,g=this.root,T=[],M=0;g;){var P=w(x,g.key);T.push(g),P<=0&&(M=T.length),P<=0?g=g.left:g=g.right}return T.length=M,new s(this,T)},o.gt=function(x){for(var w=this._compare,g=this.root,T=[],M=0;g;){var P=w(x,g.key);T.push(g),P<0&&(M=T.length),P<0?g=g.left:g=g.right}return T.length=M,new s(this,T)},o.lt=function(x){for(var w=this._compare,g=this.root,T=[],M=0;g;){var P=w(x,g.key);T.push(g),P>0&&(M=T.length),P<=0?g=g.left:g=g.right}return T.length=M,new s(this,T)},o.le=function(x){for(var w=this._compare,g=this.root,T=[],M=0;g;){var P=w(x,g.key);T.push(g),P>=0&&(M=T.length),P<0?g=g.left:g=g.right}return T.length=M,new s(this,T)},o.find=function(x){for(var w=this._compare,g=this.root,T=[];g;){var M=w(x,g.key);if(T.push(g),M===0)return new s(this,T);M<=0?g=g.left:g=g.right}return new s(this,[])},o.remove=function(x){var w=this.find(x);return w?w.remove():this},o.get=function(x){for(var w=this._compare,g=this.root;g;){var T=w(x,g.key);if(T===0)return g.value;T<=0?g=g.left:g=g.right}};function s(x,w){this.tree=x,this._stack=w}var p=s.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new s(this.tree,this._stack.slice())};function v(x,w){x.key=w.key,x.value=w.value,x.left=w.left,x.right=w.right,x._color=w._color,x._count=w._count}function m(x){for(var w,g,T,M,P=x.length-1;P>=0;--P){if(w=x[P],P===0){w._color=a;return}if(g=x[P-1],g.left===w){if(T=g.right,T.right&&T.right._color===r){if(T=g.right=c(T),M=T.right=c(T.right),g.right=T.left,T.left=g,T.right=M,T._color=g._color,w._color=a,g._color=a,M._color=a,f(g),f(T),P>1){var L=x[P-2];L.left===g?L.left=T:L.right=T}x[P-1]=T;return}else if(T.left&&T.left._color===r){if(T=g.right=c(T),M=T.left=c(T.left),g.right=M.left,T.left=M.right,M.left=g,M.right=T,M._color=g._color,g._color=a,T._color=a,w._color=a,f(g),f(T),f(M),P>1){var L=x[P-2];L.left===g?L.left=M:L.right=M}x[P-1]=M;return}if(T._color===a)if(g._color===r){g._color=a,g.right=t(r,T);return}else{g.right=t(r,T);continue}else{if(T=c(T),g.right=T.left,T.left=g,T._color=g._color,g._color=r,f(g),f(T),P>1){var L=x[P-2];L.left===g?L.left=T:L.right=T}x[P-1]=T,x[P]=g,P+1<x.length?x[P+1]=w:x.push(w),P=P+2}}else{if(T=g.left,T.left&&T.left._color===r){if(T=g.left=c(T),M=T.left=c(T.left),g.left=T.right,T.right=g,T.left=M,T._color=g._color,w._color=a,g._color=a,M._color=a,f(g),f(T),P>1){var L=x[P-2];L.right===g?L.right=T:L.left=T}x[P-1]=T;return}else if(T.right&&T.right._color===r){if(T=g.left=c(T),M=T.right=c(T.right),g.left=M.right,T.right=M.left,M.right=g,M.left=T,M._color=g._color,g._color=a,T._color=a,w._color=a,f(g),f(T),f(M),P>1){var L=x[P-2];L.right===g?L.right=M:L.left=M}x[P-1]=M;return}if(T._color===a)if(g._color===r){g._color=a,g.left=t(r,T);return}else{g.left=t(r,T);continue}else{if(T=c(T),g.left=T.right,T.right=g,T._color=g._color,g._color=r,f(g),f(T),P>1){var L=x[P-2];L.right===g?L.right=T:L.left=T}x[P-1]=T,x[P]=g,P+1<x.length?x[P+1]=w:x.push(w),P=P+2}}}}p.remove=function(){var x=this._stack;if(x.length===0)return this.tree;var w=new Array(x.length),g=x[x.length-1];w[w.length-1]=new u(g._color,g.key,g.value,g.left,g.right,g._count);for(var T=x.length-2;T>=0;--T){var g=x[T];g.left===x[T+1]?w[T]=new u(g._color,g.key,g.value,w[T+1],g.right,g._count):w[T]=new u(g._color,g.key,g.value,g.left,w[T+1],g._count)}if(g=w[w.length-1],g.left&&g.right){var M=w.length;for(g=g.left;g.right;)w.push(g),g=g.right;var P=w[M-1];w.push(new u(g._color,P.key,P.value,g.left,g.right,g._count)),w[M-1].key=g.key,w[M-1].value=g.value;for(var T=w.length-2;T>=M;--T)g=w[T],w[T]=new u(g._color,g.key,g.value,g.left,w[T+1],g._count);w[M-1].left=w[M]}if(g=w[w.length-1],g._color===r){var L=w[w.length-2];L.left===g?L.left=null:L.right===g&&(L.right=null),w.pop();for(var T=0;T<w.length;++T)w[T]._count--;return new n(this.tree._compare,w[0])}else if(g.left||g.right){g.left?v(g,g.left):g.right&&v(g,g.right),g._color=a;for(var T=0;T<w.length-1;++T)w[T]._count--;return new n(this.tree._compare,w[0])}else{if(w.length===1)return new n(this.tree._compare,null);for(var T=0;T<w.length;++T)w[T]._count--;var I=w[w.length-2];m(w),I.left===g?I.left=null:I.right=null}return new n(this.tree._compare,w[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var x=0,w=this._stack;if(w.length===0){var g=this.tree.root;return g?g._count:0}else w[w.length-1].left&&(x=w[w.length-1].left._count);for(var T=w.length-2;T>=0;--T)w[T+1]===w[T].right&&(++x,w[T].left&&(x+=w[T].left._count));return x},enumerable:!0}),p.next=function(){var x=this._stack;if(x.length!==0){var w=x[x.length-1];if(w.right)for(w=w.right;w;)x.push(w),w=w.left;else for(x.pop();x.length>0&&x[x.length-1].right===w;)w=x[x.length-1],x.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].right)return!0;for(var w=x.length-1;w>0;--w)if(x[w-1].left===x[w])return!0;return!1}}),p.update=function(x){var w=this._stack;if(w.length===0)throw new Error("Can't update empty node!");var g=new Array(w.length),T=w[w.length-1];g[g.length-1]=new u(T._color,T.key,x,T.left,T.right,T._count);for(var M=w.length-2;M>=0;--M)T=w[M],T.left===w[M+1]?g[M]=new u(T._color,T.key,T.value,g[M+1],T.right,T._count):g[M]=new u(T._color,T.key,T.value,T.left,g[M+1],T._count);return new n(this.tree._compare,g[0])},p.prev=function(){var x=this._stack;if(x.length!==0){var w=x[x.length-1];if(w.left)for(w=w.left;w;)x.push(w),w=w.right;else for(x.pop();x.length>0&&x[x.length-1].left===w;)w=x[x.length-1],x.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].left)return!0;for(var w=x.length-1;w>0;--w)if(x[w-1].right===x[w])return!0;return!1}});function b(x,w){return x<w?-1:x>w?1:0}function y(x){return new n(x||b,null)}},{}],248:[function(e,d,S){var r=7,a=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],u=607/128,c=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function t(f){if(f<0)return Number("0/0");for(var n=c[0],o=c.length-1;o>0;--o)n+=c[o]/(f+o);var l=f+u+.5;return .5*Math.log(2*Math.PI)+(f+.5)*Math.log(l)-l+Math.log(n)-Math.log(f)}d.exports=function f(n){if(n<.5)return Math.PI/(Math.sin(Math.PI*n)*f(1-n));if(n>100)return Math.exp(t(n));n-=1;for(var o=a[0],l=1;l<r+2;l++)o+=a[l]/(n+l);var h=n+r+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,n+.5)*Math.exp(-h)*o},d.exports.log=t},{}],249:[function(e,d,S){d.exports=r;function r(a,u){if(typeof a!="string")throw new TypeError("must specify type string");if(u=u||{},typeof document>"u"&&!u.canvas)return null;var c=u.canvas||document.createElement("canvas");typeof u.width=="number"&&(c.width=u.width),typeof u.height=="number"&&(c.height=u.height);var t=u,f;try{var n=[a];a.indexOf("webgl")===0&&n.push("experimental-"+a);for(var o=0;o<n.length;o++)if(f=c.getContext(n[o],t),f)return f}catch{f=null}return f||null}},{}],250:[function(e,d,S){d.exports=w;var r=e("./lib/text.js"),a=e("./lib/lines.js"),u=e("./lib/background.js"),c=e("./lib/cube.js"),t=e("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function n(g,T){return g[0]=T[0],g[1]=T[1],g[2]=T[2],g}function o(g){this.gl=g,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=u(g)}var l=o.prototype;l.update=function(g){g=g||{};function T(U,Y,z){if(z in g){var B=g[z],H=this[z],V;(U?Array.isArray(B)&&Array.isArray(B[0]):Array.isArray(B))?this[z]=V=[Y(B[0]),Y(B[1]),Y(B[2])]:this[z]=V=[Y(B),Y(B),Y(B)];for(var Z=0;Z<3;++Z)if(V[Z]!==H[Z])return!0}return!1}var M=T.bind(this,!1,Number),P=T.bind(this,!1,Boolean),L=T.bind(this,!1,String),I=T.bind(this,!0,function(U){if(Array.isArray(U)){if(U.length===3)return[+U[0],+U[1],+U[2],1];if(U.length===4)return[+U[0],+U[1],+U[2],+U[3]]}return[0,0,0,1]}),C,k=!1,E=!1;if("bounds"in g)for(var R=g.bounds,O=0;O<2;++O)for(var N=0;N<3;++N)R[O][N]!==this.bounds[O][N]&&(E=!0),this.bounds[O][N]=R[O][N];if("ticks"in g){C=g.ticks,k=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else M("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in g||"tickSpacing"in g||(this.autoTicks=!0),E=!0,k=!0,this._firstInit=!1),E&&this.autoTicks&&(C=t.create(this.bounds,this.tickSpacing),k=!0),k){for(var O=0;O<3;++O)C[O].sort(function(Y,z){return Y.x-z.x});t.equal(C,this.ticks)?k=!1:this.ticks=C}P("tickEnable"),L("tickFont")&&(k=!0),M("tickSize"),M("tickAngle"),M("tickPad"),I("tickColor");var G=L("labels");L("labelFont")&&(G=!0),P("labelEnable"),M("labelSize"),M("labelPad"),I("labelColor"),P("lineEnable"),P("lineMirror"),M("lineWidth"),I("lineColor"),P("lineTickEnable"),P("lineTickMirror"),M("lineTickLength"),M("lineTickWidth"),I("lineTickColor"),P("gridEnable"),M("gridWidth"),I("gridColor"),P("zeroEnable"),I("zeroLineColor"),M("zeroLineWidth"),P("backgroundEnable"),I("backgroundColor"),this._text?this._text&&(G||k)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=r(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&k&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var i=[new h,new h,new h];function s(g,T,M,P,L){for(var I=g.primalOffset,C=g.primalMinor,k=g.mirrorOffset,E=g.mirrorMinor,R=P[T],O=0;O<3;++O)if(T!==O){var N=I,G=k,U=C,Y=E;R&1<<O&&(N=k,G=I,U=E,Y=C),N[O]=M[0][O],G[O]=M[1][O],L[O]>0?(U[O]=-1,Y[O]=0):(U[O]=0,Y[O]=1)}}var p=[0,0,0],v={model:f,view:f,projection:f,_ortho:!1};l.isOpaque=function(){return!0},l.isTransparent=function(){return!1},l.drawTransparent=function(g){};var m=0,b=[0,0,0],y=[0,0,0],x=[0,0,0];l.draw=function(g){g=g||v;for(var H=this.gl,T=g.model||f,M=g.view||f,P=g.projection||f,L=this.bounds,I=g._ortho||!1,C=c(T,M,P,L,I),k=C.cubeEdges,E=C.axis,R=M[12],O=M[13],N=M[14],G=M[15],U=I?2:1,Y=U*this.pixelRatio*(P[3]*R+P[7]*O+P[11]*N+P[15]*G)/H.drawingBufferHeight,z=0;z<3;++z)this.lastCubeProps.cubeEdges[z]=k[z],this.lastCubeProps.axis[z]=E[z];for(var B=i,z=0;z<3;++z)s(i[z],z,this.bounds,k,E);for(var H=this.gl,V=p,z=0;z<3;++z)this.backgroundEnable[z]?V[z]=E[z]:V[z]=0;this._background.draw(T,M,P,L,V,this.backgroundColor),this._lines.bind(T,M,P,this);for(var z=0;z<3;++z){var Z=[0,0,0];E[z]>0?Z[z]=L[1][z]:Z[z]=L[0][z];for(var q=0;q<2;++q){var J=(z+1+q)%3,ne=(z+1+(q^1))%3;this.gridEnable[J]&&this._lines.drawGrid(J,ne,this.bounds,Z,this.gridColor[J],this.gridWidth[J]*this.pixelRatio)}for(var q=0;q<2;++q){var J=(z+1+q)%3,ne=(z+1+(q^1))%3;this.zeroEnable[ne]&&Math.min(L[0][ne],L[1][ne])<=0&&Math.max(L[0][ne],L[1][ne])>=0&&this._lines.drawZero(J,ne,this.bounds,Z,this.zeroLineColor[ne],this.zeroLineWidth[ne]*this.pixelRatio)}}for(var z=0;z<3;++z){this.lineEnable[z]&&this._lines.drawAxisLine(z,this.bounds,B[z].primalOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio),this.lineMirror[z]&&this._lines.drawAxisLine(z,this.bounds,B[z].mirrorOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);for(var ve=n(b,B[z].primalMinor),$=n(y,B[z].mirrorMinor),j=this.lineTickLength,q=0;q<3;++q){var ae=Y/T[5*q];ve[q]*=j[q]*ae,$[q]*=j[q]*ae}this.lineTickEnable[z]&&this._lines.drawAxisTicks(z,B[z].primalOffset,ve,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio),this.lineTickMirror[z]&&this._lines.drawAxisTicks(z,B[z].mirrorOffset,$,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(T,M,P,this.pixelRatio);var ie,te=.5,re,ce;function pe(ke){ce=[0,0,0],ce[ke]=1}function fe(ke,Re,Ke){var ze=(ke+1)%3,Je=(ke+2)%3,qe=Re[ze],Ee=Re[Je],Ae=Ke[ze],Be=Ke[Je];if(qe>0&&Be>0){pe(ze);return}else if(qe>0&&Be<0){pe(ze);return}else if(qe<0&&Be>0){pe(ze);return}else if(qe<0&&Be<0){pe(ze);return}else if(Ee>0&&Ae>0){pe(Je);return}else if(Ee>0&&Ae<0){pe(Je);return}else if(Ee<0&&Ae>0){pe(Je);return}else if(Ee<0&&Ae<0){pe(Je);return}}for(var z=0;z<3;++z){for(var se=B[z].primalMinor,de=B[z].mirrorMinor,be=n(x,B[z].primalOffset),q=0;q<3;++q)this.lineTickEnable[z]&&(be[q]+=Y*se[q]*Math.max(this.lineTickLength[q],0)/T[5*q]);var xe=[0,0,0];if(xe[z]=1,this.tickEnable[z]){this.tickAngle[z]===-3600?(this.tickAngle[z]=0,this.tickAlign[z]="auto"):this.tickAlign[z]=-1,re=1,ie=[this.tickAlign[z],te,re],ie[0]==="auto"?ie[0]=m:ie[0]=parseInt(""+ie[0]),ce=[0,0,0],fe(z,se,de);for(var q=0;q<3;++q)be[q]+=Y*se[q]*this.tickPad[q]/T[5*q];this._text.drawTicks(z,this.tickSize[z],this.tickAngle[z],be,this.tickColor[z],xe,ce,ie)}if(this.labelEnable[z]){re=0,ce=[0,0,0],this.labels[z].length>4&&(pe(z),re=1),ie=[this.labelAlign[z],te,re],ie[0]==="auto"?ie[0]=m:ie[0]=parseInt(""+ie[0]);for(var q=0;q<3;++q)be[q]+=Y*se[q]*this.labelPad[q]/T[5*q];be[z]+=.5*(L[0][z]+L[1][z]),this._text.drawLabel(z,this.labelSize[z],this.labelAngle[z],be,this.labelColor[z],[0,0,0],ce,ie)}}this._text.unbind()},l.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function w(g,T){var M=new o(g);return M.update(T),M}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(e,d,S){d.exports=f;var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders").bg;function c(n,o,l,h){this.gl=n,this.buffer=o,this.vao=l,this.shader=h}var t=c.prototype;t.draw=function(n,o,l,h,i,s){for(var p=!1,v=0;v<3;++v)p=p||i[v];if(!!p){var m=this.gl;m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:n,view:o,projection:l,bounds:h,enable:i,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),m.disable(m.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(n){for(var o=[],l=[],h=0,i=0;i<3;++i)for(var s=(i+1)%3,p=(i+2)%3,v=[0,0,0],m=[0,0,0],b=-1;b<=1;b+=2){l.push(h,h+2,h+1,h+1,h+2,h+3),v[i]=b,m[i]=b;for(var y=-1;y<=1;y+=2){v[s]=y;for(var x=-1;x<=1;x+=2)v[p]=x,o.push(v[0],v[1],v[2],m[0],m[1],m[2]),h+=1}var w=s;s=p,p=w}var g=r(n,new Float32Array(o)),T=r(n,new Uint16Array(l),n.ELEMENT_ARRAY_BUFFER),M=a(n,[{buffer:g,type:n.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:n.FLOAT,size:3,offset:12,stride:24}],T),P=u(n);return P.attributes.position.location=0,P.attributes.normal.location=1,new c(n,g,M,P)}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],252:[function(e,d,S){d.exports=b;var r=e("bit-twiddle"),a=e("gl-mat4/multiply"),u=e("split-polygon"),c=e("robust-orientation"),t=new Array(16),f=new Array(8),n=new Array(8),o=new Array(3),l=[0,0,0];(function(){for(var y=0;y<8;++y)f[y]=[1,1,1,1],n[y]=[1,1,1]})();function h(y,x,w){for(var g=0;g<4;++g){y[g]=w[12+g];for(var T=0;T<3;++T)y[g]+=x[T]*w[4*T+g]}}var i=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function s(y){for(var x=0;x<i.length;++x)if(y=u.positive(y,i[x]),y.length<3)return 0;for(var w=y[0],g=w[0]/w[3],T=w[1]/w[3],M=0,x=1;x+1<y.length;++x){var P=y[x],L=y[x+1],I=P[0]/P[3],C=P[1]/P[3],k=L[0]/L[3],E=L[1]/L[3],R=I-g,O=C-T,N=k-g,G=E-T;M+=Math.abs(R*G-O*N)}return M}var p=[1,1,1],v=[0,0,0],m={cubeEdges:p,axis:v};function b(y,x,w,g,T){a(t,x,y),a(t,w,t);for(var M=0,P=0;P<2;++P){o[2]=g[P][2];for(var L=0;L<2;++L){o[1]=g[L][1];for(var I=0;I<2;++I)o[0]=g[I][0],h(f[M],o,t),M+=1}}for(var C=-1,P=0;P<8;++P){for(var k=f[P][3],E=0;E<3;++E)n[P][E]=f[P][E]/k;T&&(n[P][2]*=-1),k<0&&(C<0||n[P][2]<n[C][2])&&(C=P)}if(C<0){C=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,N=(R+1)%3,G=-1,U=-1,Y=0;Y<2;++Y){var z=Y<<R,B=z+(Y<<O)+(1-Y<<N),H=z+(1-Y<<O)+(Y<<N);c(n[z],n[B],n[H],l)<0||(Y?G=1:U=1)}if(G<0||U<0){U>G&&(C|=1<<R);continue}for(var Y=0;Y<2;++Y){var z=Y<<R,B=z+(Y<<O)+(1-Y<<N),H=z+(1-Y<<O)+(Y<<N),V=s([f[z],f[B],f[H],f[z+(1<<O)+(1<<N)]]);Y?G=V:U=V}if(U>G){C|=1<<R;continue}}}for(var Z=7^C,q=-1,P=0;P<8;++P)P===C||P===Z||(q<0||n[q][1]>n[P][1])&&(q=P);for(var J=-1,P=0;P<3;++P){var ne=q^1<<P;if(!(ne===C||ne===Z)){J<0&&(J=ne);var N=n[ne];N[0]<n[J][0]&&(J=ne)}}for(var ve=-1,P=0;P<3;++P){var ne=q^1<<P;if(!(ne===C||ne===Z||ne===J)){ve<0&&(ve=ne);var N=n[ne];N[0]>n[ve][0]&&(ve=ne)}}var $=p;$[0]=$[1]=$[2]=0,$[r.log2(J^q)]=q&J,$[r.log2(q^ve)]=q&ve;var j=ve^7;j===C||j===Z?(j=J^7,$[r.log2(ve^j)]=j&ve):$[r.log2(J^j)]=j&J;for(var ae=v,ie=C,R=0;R<3;++R)ie&1<<R?ae[R]=-1:ae[R]=1;return m}},{"bit-twiddle":97,"gl-mat4/multiply":295,"robust-orientation":548,"split-polygon":566}],253:[function(e,d,S){d.exports=p;var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders").line,c=[0,0,0],t=[0,0,0],f=[0,0,0],n=[0,0,0],o=[1,1];function l(v){return v[0]=v[1]=v[2]=0,v}function h(v,m){return v[0]=m[0],v[1]=m[1],v[2]=m[2],v}function i(v,m,b,y,x,w,g,T){this.gl=v,this.vertBuffer=m,this.vao=b,this.shader=y,this.tickCount=x,this.tickOffset=w,this.gridCount=g,this.gridOffset=T}var s=i.prototype;s.bind=function(v,m,b){this.shader.bind(),this.shader.uniforms.model=v,this.shader.uniforms.view=m,this.shader.uniforms.projection=b,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},s.unbind=function(){this.vao.unbind()},s.drawAxisLine=function(v,m,b,y,x){var w=l(t);this.shader.uniforms.majorAxis=t,w[v]=m[1][v]-m[0][v],this.shader.uniforms.minorAxis=w;var g=h(n,b);g[v]+=m[0][v],this.shader.uniforms.offset=g,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=y;var T=l(f);T[(v+2)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6);var T=l(f);T[(v+1)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6)},s.drawAxisTicks=function(v,m,b,y,x){if(!!this.tickCount[v]){var w=l(c);w[v]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=m,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=y,this.shader.uniforms.lineWidth=x;var g=l(f);g[v]=1,this.shader.uniforms.screenAxis=g,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v])}},s.drawGrid=function(v,m,b,y,x,w){if(!!this.gridCount[v]){var g=l(t);g[m]=b[1][m]-b[0][m],this.shader.uniforms.minorAxis=g;var T=h(n,y);T[m]+=b[0][m],this.shader.uniforms.offset=T;var M=l(c);M[v]=1,this.shader.uniforms.majorAxis=M;var P=l(f);P[v]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=x,this.vao.draw(this.gl.TRIANGLES,this.gridCount[v],this.gridOffset[v])}},s.drawZero=function(v,m,b,y,x,w){var g=l(t);this.shader.uniforms.majorAxis=g,g[v]=b[1][v]-b[0][v],this.shader.uniforms.minorAxis=g;var T=h(n,y);T[v]+=b[0][v],this.shader.uniforms.offset=T;var M=l(f);M[m]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=x,this.vao.draw(this.gl.TRIANGLES,6)},s.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function p(v,m,b){var y=[],x=[0,0,0],w=[0,0,0],g=[0,0,0],T=[0,0,0];y.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var M=0;M<3;++M){for(var I=y.length/3|0,P=0;P<b[M].length;++P){var L=+b[M][P].x;y.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var k=y.length/3|0;x[M]=I,w[M]=k-I;for(var I=y.length/3|0,C=0;C<b[M].length;++C){var L=+b[M][C].x;y.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var k=y.length/3|0;g[M]=I,T[M]=k-I}var E=r(v,new Float32Array(y)),R=a(v,[{buffer:E,type:v.FLOAT,size:3,stride:0,offset:0}]),O=u(v);return O.attributes.position.location=0,new i(v,E,R,O,w,x,T,g)}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],254:[function(e,d,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);S.line=function(l){return a(l,u,c,null,[{name:"position",type:"vec3"}])};var t=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);S.text=function(l){return a(l,t,f,null,[{name:"position",type:"vec3"}])};var n=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=r([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);S.bg=function(l){return a(l,n,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":335,glslify:257}],255:[function(e,d,S){(function(r){(function(){d.exports=p;var a=e("gl-buffer"),u=e("gl-vao"),c=e("vectorize-text"),t=e("./shaders").text,f=window||r.global||{},n=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var o=3;function l(v,m,b,y){this.gl=v,this.shader=m,this.buffer=b,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=l.prototype,i=[0,0];h.bind=function(v,m,b,y){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=v,x.view=m,x.projection=b,x.pixelScale=y,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=i},h.unbind=function(){this.vao.unbind()},h.update=function(v,m,b,y,x){var w=[];function g(R,O,N,G,U,Y){var z=n[N];z||(z=n[N]={});var B=z[O];B||(B=z[O]=s(O,{triangles:!0,font:N,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:Y}));for(var H=(G||12)/12,V=B.positions,Z=B.cells,q=0,J=Z.length;q<J;++q)for(var ne=Z[q],ve=2;ve>=0;--ve){var $=V[ne[ve]];w.push(H*$[0],-H*$[1],R)}}for(var T=[0,0,0],M=[0,0,0],P=[0,0,0],L=[0,0,0],I=1.25,C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},k=0;k<3;++k){P[k]=w.length/o|0,g(.5*(v[0][k]+v[1][k]),m[k],b[k],12,I,C),L[k]=(w.length/o|0)-P[k],T[k]=w.length/o|0;for(var E=0;E<y[k].length;++E)!y[k][E].text||g(y[k][E].x,y[k][E].text,y[k][E].font||x,y[k][E].fontSize||12,I,C);M[k]=(w.length/o|0)-T[k]}this.buffer.update(w),this.tickOffset=T,this.tickCount=M,this.labelOffset=P,this.labelCount=L},h.drawTicks=function(v,m,b,y,x,w,g,T){!this.tickCount[v]||(this.shader.uniforms.axis=w,this.shader.uniforms.color=x,this.shader.uniforms.angle=b,this.shader.uniforms.scale=m,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=T,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v]))},h.drawLabel=function(v,m,b,y,x,w,g,T){!this.labelCount[v]||(this.shader.uniforms.axis=w,this.shader.uniforms.color=x,this.shader.uniforms.angle=b,this.shader.uniforms.scale=m,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=T,this.vao.draw(this.gl.TRIANGLES,this.labelCount[v],this.labelOffset[v]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function s(v,m){try{return c(v,m)}catch(b){return console.warn('error vectorizing text:"'+v+'" error:',b),{cells:[],positions:[]}}}function p(v,m,b,y,x,w){var g=a(v),T=u(v,[{buffer:g,size:3}]),M=t(v);M.attributes.position.location=0;var P=new l(v,M,g,T);return P.update(m,b,y,x,w),P}}).call(this)}).call(this,e("_process"))},{"./shaders":254,_process:526,"gl-buffer":259,"gl-vao":358,"vectorize-text":600}],256:[function(e,d,S){S.create=a,S.equal=u;function r(c,t){var f=c+"",n=f.indexOf("."),o=0;n>=0&&(o=f.length-n-1);var l=Math.pow(10,o),h=Math.round(c*t*l),i=h+"";if(i.indexOf("e")>=0)return i;var s=h/l,p=h%l;h<0?(s=-Math.ceil(s)|0,p=-p|0):(s=Math.floor(s)|0,p=p|0);var v=""+s;if(h<0&&(v="-"+v),o){for(var m=""+p;m.length<o;)m="0"+m;return v+"."+m}else return v}function a(c,t){for(var f=[],n=0;n<3;++n){var o=[];.5*(c[0][n]+c[1][n]);for(var l=0;l*t[n]<=c[1][n];++l)o.push({x:l*t[n],text:r(t[n],l)});for(var l=-1;l*t[n]>=c[0][n];--l)o.push({x:l*t[n],text:r(t[n],l)});f.push(o)}return f}function u(c,t){for(var f=0;f<3;++f){if(c[f].length!==t[f].length)return!1;for(var n=0;n<c[f].length;++n){var o=c[f][n],l=t[f][n];if(o.x!==l.x||o.text!==l.text||o.font!==l.font||o.fontColor!==l.fontColor||o.fontSize!==l.fontSize||o.dx!==l.dx||o.dy!==l.dy)return!1}}return!0}},{}],257:[function(e,d,S){d.exports=function(r){typeof r=="string"&&(r=[r]);for(var a=[].slice.call(arguments,1),u=[],c=0;c<r.length-1;c++)u.push(r[c],a[c]||"");return u.push(r[c]),u.join("")}},{}],258:[function(e,d,S){d.exports=m;var r=e("extract-frustum-planes"),a=e("split-polygon"),u=e("./lib/cube.js"),c=e("gl-mat4/multiply"),t=e("gl-mat4/transpose"),f=e("gl-vec4/transformMat4"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function l(b,y,x){this.lo=b,this.hi=y,this.pixelsPerDataUnit=x}var h=[0,0,0,1],i=[0,0,0,1];function s(b,y,x,w,g){for(var T=0;T<3;++T){for(var M=h,P=i,L=0;L<3;++L)P[L]=M[L]=x[L];P[3]=M[3]=1,P[T]+=1,f(P,P,y),P[3]<0&&(b[T]=1/0),M[T]-=1,f(M,M,y),M[3]<0&&(b[T]=1/0);var I=(M[0]/M[3]-P[0]/P[3])*w,C=(M[1]/M[3]-P[1]/P[3])*g;b[T]=.25*Math.sqrt(I*I+C*C)}return b}var p=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],v=[0,0,0];function m(b,y,x,w,C){var T=y.model||n,M=y.view||n,P=y.projection||n,L=y._ortho||!1,I=b.bounds,C=C||u(T,M,P,I,L),k=C.axis;c(o,M,T),c(o,P,o);for(var E=p,R=0;R<3;++R)E[R].lo=1/0,E[R].hi=-1/0,E[R].pixelsPerDataUnit=1/0;var O=r(t(o,o));t(o,o);for(var N=0;N<3;++N){var G=(N+1)%3,U=(N+2)%3,Y=v;e:for(var R=0;R<2;++R){var z=[];if(k[N]<0!=!!R){Y[N]=I[R][N];for(var B=0;B<2;++B){Y[G]=I[B^R][G];for(var H=0;H<2;++H)Y[U]=I[H^B^R][U],z.push(Y.slice())}for(var V=L?5:4,B=V;B===V;++B){if(z.length===0)continue e;z=a.positive(z,O[B])}for(var B=0;B<z.length;++B)for(var U=z[B],Z=s(v,o,U,x,w),H=0;H<3;++H)E[H].lo=Math.min(E[H].lo,U[H]),E[H].hi=Math.max(E[H].hi,U[H]),H!==N&&(E[H].pixelsPerDataUnit=Math.min(E[H].pixelsPerDataUnit,Math.abs(Z[H])))}}}return E}},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":295,"gl-mat4/transpose":306,"gl-vec4/transformMat4":429,"split-polygon":566}],259:[function(e,d,S){var r=e("typedarray-pool"),a=e("ndarray-ops"),u=e("ndarray"),c=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(i,s,p,v,m){this.gl=i,this.type=s,this.handle=p,this.length=v,this.usage=m}var f=t.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function n(i,s,p,v,m,b){var y=m.length*m.BYTES_PER_ELEMENT;if(b<0)return i.bufferData(s,m,v),y;if(y+b>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return i.bufferSubData(s,b,m),p}function o(i,s){for(var p=r.malloc(i.length,s),v=i.length,m=0;m<v;++m)p[m]=i[m];return p}function l(i,s){for(var p=1,v=s.length-1;v>=0;--v){if(s[v]!==p)return!1;p*=i[v]}return!0}f.update=function(i,s){if(typeof s!="number"&&(s=-1),this.bind(),typeof i=="object"&&typeof i.shape<"u"){var p=i.dtype;if(c.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var v=gl.getExtension("OES_element_index_uint");v&&p!=="uint16"?p="uint32":p="uint16"}if(p===i.dtype&&l(i.shape,i.stride))i.offset===0&&i.data.length===i.shape[0]?this.length=n(this.gl,this.type,this.length,this.usage,i.data,s):this.length=n(this.gl,this.type,this.length,this.usage,i.data.subarray(i.offset,i.shape[0]),s);else{var m=r.malloc(i.size,p),b=u(m,i.shape);a.assign(b,i),s<0?this.length=n(this.gl,this.type,this.length,this.usage,m,s):this.length=n(this.gl,this.type,this.length,this.usage,m.subarray(0,i.size),s),r.free(m)}}else if(Array.isArray(i)){var y;this.type===this.gl.ELEMENT_ARRAY_BUFFER?y=o(i,"uint16"):y=o(i,"float32"),s<0?this.length=n(this.gl,this.type,this.length,this.usage,y,s):this.length=n(this.gl,this.type,this.length,this.usage,y.subarray(0,i.length),s),r.free(y)}else if(typeof i=="object"&&typeof i.length=="number")this.length=n(this.gl,this.type,this.length,this.usage,i,s);else if(typeof i=="number"||i===void 0){if(s>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");i=i|0,i<=0&&(i=1),this.gl.bufferData(this.type,i|0,this.usage),this.length=i}else throw new Error("gl-buffer: Invalid data type")};function h(i,s,p,v){if(p=p||i.ARRAY_BUFFER,v=v||i.DYNAMIC_DRAW,p!==i.ARRAY_BUFFER&&p!==i.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==i.DYNAMIC_DRAW&&v!==i.STATIC_DRAW&&v!==i.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=i.createBuffer(),b=new t(i,p,m,0,v);return b.update(s),b}d.exports=h},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],260:[function(e,d,S){var r=e("gl-vec3");d.exports=function(u,c){var t=u.positions,f=u.vectors,n={positions:[],vertexIntensity:[],vertexIntensityBounds:u.vertexIntensityBounds,vectors:[],cells:[],coneOffset:u.coneOffset,colormap:u.colormap};if(u.positions.length===0)return c&&(c[0]=[0,0,0],c[1]=[0,0,0]),n;for(var o=0,l=1/0,h=-1/0,i=1/0,s=-1/0,p=1/0,v=-1/0,m=null,b=null,y=[],x=1/0,w=!1,g=0;g<t.length;g++){var T=t[g];l=Math.min(T[0],l),h=Math.max(T[0],h),i=Math.min(T[1],i),s=Math.max(T[1],s),p=Math.min(T[2],p),v=Math.max(T[2],v);var M=f[g];if(r.length(M)>o&&(o=r.length(M)),g){var P=2*r.distance(m,T)/(r.length(b)+r.length(M));P?(x=Math.min(x,P),w=!1):w=!0}w||(m=T,b=M),y.push(M)}var L=[l,i,p],I=[h,s,v];c&&(c[0]=L,c[1]=I),o===0&&(o=1);var C=1/o;isFinite(x)||(x=1),n.vectorScale=x;var k=u.coneSize||.5;u.absoluteConeSize&&(k=u.absoluteConeSize*C),n.coneScale=k;for(var g=0,E=0;g<t.length;g++)for(var T=t[g],R=T[0],O=T[1],N=T[2],G=y[g],U=r.length(G)*C,Y=0,z=8;Y<z;Y++){n.positions.push([R,O,N,E++]),n.positions.push([R,O,N,E++]),n.positions.push([R,O,N,E++]),n.positions.push([R,O,N,E++]),n.positions.push([R,O,N,E++]),n.positions.push([R,O,N,E++]),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vectors.push(G),n.vertexIntensity.push(U,U,U),n.vertexIntensity.push(U,U,U);var B=n.positions.length;n.cells.push([B-6,B-5,B-4],[B-3,B-2,B-1])}return n};var a=e("./lib/shaders");d.exports.createMesh=e("./create_mesh"),d.exports.createConeMesh=function(u,c){return d.exports.createMesh(u,c,{shaders:a,traceType:"cone"})}},{"./create_mesh":261,"./lib/shaders":262,"gl-vec3":377}],261:[function(e,d,S){var r=e("gl-shader"),a=e("gl-buffer"),u=e("gl-vao"),c=e("gl-texture2d"),t=e("gl-mat4/multiply"),f=e("gl-mat4/invert"),n=e("ndarray"),o=e("colormap"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(y,x,w,g,T,M,P,L,I,C,k){this.gl=y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=w,this.pickShader=g,this.trianglePositions=T,this.triangleVectors=M,this.triangleColors=L,this.triangleUVs=I,this.triangleIds=P,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=k,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var i=h.prototype;i.isOpaque=function(){return this.opacity>=1},i.isTransparent=function(){return this.opacity<1},i.pickSlots=1,i.setPickBase=function(y){this.pickId=y};function s(y){for(var x=o({colormap:y,nshades:256,format:"rgba"}),w=new Uint8Array(256*4),g=0;g<256;++g){for(var T=x[g],M=0;M<3;++M)w[4*g+M]=T[M];w[4*g+3]=T[3]*255}return n(w,[256,256,4],[4,0,1])}function p(y){for(var x=y.length,w=new Array(x),g=0;g<x;++g)w[g]=y[g][2];return w}i.update=function(y){y=y||{};var x=this.gl;this.dirty=!0,"lightPosition"in y&&(this.lightPosition=y.lightPosition),"opacity"in y&&(this.opacity=y.opacity),"ambient"in y&&(this.ambientLight=y.ambient),"diffuse"in y&&(this.diffuseLight=y.diffuse),"specular"in y&&(this.specularLight=y.specular),"roughness"in y&&(this.roughness=y.roughness),"fresnel"in y&&(this.fresnel=y.fresnel),y.tubeScale!==void 0&&(this.tubeScale=y.tubeScale),y.vectorScale!==void 0&&(this.vectorScale=y.vectorScale),y.coneScale!==void 0&&(this.coneScale=y.coneScale),y.coneOffset!==void 0&&(this.coneOffset=y.coneOffset),y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(s(y.colormap)),this.texture.generateMipmap());var w=y.cells,g=y.positions,T=y.vectors;if(!g||!w||!T)return;var M=[],P=[],L=[],I=[],C=[];this.cells=w,this.positions=g,this.vectors=T;var k=y.meshColor||[1,1,1,1],E=y.vertexIntensity,R=1/0,O=-1/0;if(E)if(y.vertexIntensityBounds)R=+y.vertexIntensityBounds[0],O=+y.vertexIntensityBounds[1];else for(var N=0;N<E.length;++N){var G=E[N];R=Math.min(R,G),O=Math.max(O,G)}else for(var N=0;N<g.length;++N){var G=g[N][2];R=Math.min(R,G),O=Math.max(O,G)}E?this.intensity=E:this.intensity=p(g),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var N=0;N<g.length;++N)for(var U=g[N],Y=0;Y<3;++Y)isNaN(U[Y])||!isFinite(U[Y])||(this.bounds[0][Y]=Math.min(this.bounds[0][Y],U[Y]),this.bounds[1][Y]=Math.max(this.bounds[1][Y],U[Y]));var z=0;e:for(var N=0;N<w.length;++N){var B=w[N];switch(B.length){case 3:for(var Y=0;Y<3;++Y)for(var H=B[Y],U=g[H],V=0;V<3;++V)if(isNaN(U[V])||!isFinite(U[V]))continue e;for(var Y=0;Y<3;++Y){var H=B[2-Y],U=g[H];M.push(U[0],U[1],U[2],U[3]);var Z=T[H];P.push(Z[0],Z[1],Z[2],Z[3]||0);var q=k;q.length===3?L.push(q[0],q[1],q[2],1):L.push(q[0],q[1],q[2],q[3]);var J;E?J=[(E[H]-R)/(O-R),0]:J=[(U[2]-R)/(O-R),0],I.push(J[0],J[1]),C.push(N)}z+=1;break}}this.triangleCount=z,this.trianglePositions.update(M),this.triangleVectors.update(P),this.triangleColors.update(L),this.triangleUVs.update(I),this.triangleIds.update(new Uint32Array(C))},i.drawTransparent=i.draw=function(y){y=y||{};for(var x=this.gl,w=y.model||l,g=y.view||l,T=y.projection||l,M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],P=0;P<3;++P)M[0][P]=Math.max(M[0][P],this.clipBounds[0][P]),M[1][P]=Math.min(M[1][P],this.clipBounds[1][P]);var L={model:w,view:g,projection:T,inverseModel:l.slice(),clipBounds:M,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=f(L.inverseModel,L.model),x.disable(x.CULL_FACE),this.texture.bind(0);var I=new Array(16);t(I,L.view,L.model),t(I,L.projection,I),f(I,I);for(var P=0;P<3;++P)L.eyePosition[P]=I[12+P]/I[15];for(var C=I[15],P=0;P<3;++P)C+=this.lightPosition[P]*I[4*P+3];for(var P=0;P<3;++P){for(var k=I[12+P],E=0;E<3;++E)k+=I[4*E+P]*this.lightPosition[E];L.lightPosition[P]=k/C}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=L,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},i.drawPick=function(y){y=y||{};for(var x=this.gl,w=y.model||l,g=y.view||l,T=y.projection||l,M=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],P=0;P<3;++P)M[0][P]=Math.max(M[0][P],this.clipBounds[0][P]),M[1][P]=Math.min(M[1][P],this.clipBounds[1][P]);this._model=[].slice.call(w),this._view=[].slice.call(g),this._projection=[].slice.call(T),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var L={model:w,view:g,projection:T,clipBounds:M,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},I=this.pickShader;I.bind(),I.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},i.pick=function(y){if(!y||y.id!==this.pickId)return null;var x=y.value[0]+256*y.value[1]+65536*y.value[2],w=this.cells[x],g=this.positions[w[1]].slice(0,3),T={position:g,dataCoordinate:g,index:Math.floor(w[1]/48)};return this.traceType==="cone"?T.index=Math.floor(w[1]/48):this.traceType==="streamtube"&&(T.intensity=this.intensity[w[1]],T.velocity=this.vectors[w[1]].slice(0,3),T.divergence=this.vectors[w[1]][3],T.index=x),T},i.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function v(y,x){var w=r(y,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return w.attributes.position.location=0,w.attributes.color.location=2,w.attributes.uv.location=3,w.attributes.vector.location=4,w}function m(y,x){var w=r(y,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return w.attributes.position.location=0,w.attributes.id.location=1,w.attributes.vector.location=4,w}function b(y,x,w){var g=w.shaders;arguments.length===1&&(x=y,y=x.gl);var T=v(y,g),M=m(y,g),P=c(y,n(new Uint8Array([255,255,255,255]),[1,1,4]));P.generateMipmap(),P.minFilter=y.LINEAR_MIPMAP_LINEAR,P.magFilter=y.LINEAR;var L=a(y),I=a(y),C=a(y),k=a(y),E=a(y),R=u(y,[{buffer:L,type:y.FLOAT,size:4},{buffer:E,type:y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:y.FLOAT,size:4},{buffer:k,type:y.FLOAT,size:2},{buffer:I,type:y.FLOAT,size:4}]),O=new h(y,P,T,M,L,I,E,C,k,R,w.traceType||"cone");return O.update(x),O}d.exports=b},{colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495}],262:[function(e,d,S){var r=e("glslify"),a=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);S.meshShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},S.pickShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:263}],263:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],264:[function(e,d,S){d.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],265:[function(e,d,S){var r=e("./1.0/numbers");d.exports=function(u){return r[u]}},{"./1.0/numbers":264}],266:[function(e,d,S){d.exports=h;var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders/index"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,s,p,v){this.gl=i,this.shader=v,this.buffer=s,this.vao=p,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=t.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(i){var s=this.gl,p=this.shader.uniforms;this.shader.bind();var v=p.view=i.view||c,m=p.projection=i.projection||c;p.model=i.model||c,p.clipBounds=this.clipBounds,p.opacity=this.opacity;var b=v[12],y=v[13],x=v[14],w=v[15],g=i._ortho||!1,T=g?2:1,M=T*this.pixelRatio*(m[3]*b+m[7]*y+m[11]*x+m[15]*w)/s.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)s.lineWidth(this.lineWidth[P]*this.pixelRatio),p.capSize=this.capSize[P]*M,this.lineCount[P]&&s.drawArrays(s.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};function n(i,s){for(var p=0;p<3;++p)i[0][p]=Math.min(i[0][p],s[p]),i[1][p]=Math.max(i[1][p],s[p])}var o=function(){for(var i=new Array(3),s=0;s<3;++s){for(var p=[],v=1;v<=2;++v)for(var m=-1;m<=1;m+=2){var b=(v+s)%3,y=[0,0,0];y[b]=m,p.push(y)}i[s]=p}return i}();function l(i,s,p,v){for(var m=o[v],b=0;b<m.length;++b){var y=m[b];i.push(s[0],s[1],s[2],p[0],p[1],p[2],p[3],y[0],y[1],y[2])}return m.length}f.update=function(i){i=i||{},"lineWidth"in i&&(this.lineWidth=i.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in i&&(this.capSize=i.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var s=i.color||[[0,0,0],[0,0,0],[0,0,0]],p=i.position,v=i.error;if(Array.isArray(s[0])||(s=[s,s,s]),p&&v){var m=[],b=p.length,y=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var x=0;x<3;++x){this.lineOffset[x]=y;e:for(var w=0;w<b;++w){for(var g=p[w],T=0;T<3;++T)if(isNaN(g[T])||!isFinite(g[T]))continue e;var M=v[w],P=s[x];if(Array.isArray(P[0])&&(P=s[w]),P.length===3?P=[P[0],P[1],P[2],1]:P.length===4&&(P=[P[0],P[1],P[2],P[3]],!this.hasAlpha&&P[3]<1&&(this.hasAlpha=!0)),!(isNaN(M[0][x])||isNaN(M[1][x]))){if(M[0][x]<0){var L=g.slice();L[x]+=M[0][x],m.push(g[0],g[1],g[2],P[0],P[1],P[2],P[3],0,0,0,L[0],L[1],L[2],P[0],P[1],P[2],P[3],0,0,0),n(this.bounds,L),y+=2+l(m,L,P,x)}if(M[1][x]>0){var L=g.slice();L[x]+=M[1][x],m.push(g[0],g[1],g[2],P[0],P[1],P[2],P[3],0,0,0,L[0],L[1],L[2],P[0],P[1],P[2],P[3],0,0,0),n(this.bounds,L),y+=2+l(m,L,P,x)}}}this.lineCount[x]=y-this.lineOffset[x]}this.buffer.update(m)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function h(i){var s=i.gl,p=r(s),v=a(s,[{buffer:p,type:s.FLOAT,size:3,offset:0,stride:40},{buffer:p,type:s.FLOAT,size:4,offset:12,stride:40},{buffer:p,type:s.FLOAT,size:3,offset:28,stride:40}]),m=u(s);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.offset.location=2;var b=new t(s,p,v,m);return b.update(i),b}},{"./shaders/index":268,"gl-buffer":259,"gl-vao":358}],267:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],268:[function(e,d,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);d.exports=function(t){return a(t,u,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":335,glslify:267}],269:[function(e,d,S){var r=e("gl-texture2d");d.exports=y;var a=null,u,c,t,f;function n(x){var w=x.getParameter(x.FRAMEBUFFER_BINDING),g=x.getParameter(x.RENDERBUFFER_BINDING),T=x.getParameter(x.TEXTURE_BINDING_2D);return[w,g,T]}function o(x,w){x.bindFramebuffer(x.FRAMEBUFFER,w[0]),x.bindRenderbuffer(x.RENDERBUFFER,w[1]),x.bindTexture(x.TEXTURE_2D,w[2])}function l(x,w){var g=x.getParameter(w.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(g+1);for(var T=0;T<=g;++T){for(var M=new Array(g),P=0;P<T;++P)M[P]=x.COLOR_ATTACHMENT0+P;for(var P=T;P<g;++P)M[P]=x.NONE;a[T]=M}}function h(x){switch(x){case u:throw new Error("gl-fbo: Framebuffer unsupported");case c:throw new Error("gl-fbo: Framebuffer incomplete attachment");case t:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function i(x,w,g,T,M,P){if(!T)return null;var L=r(x,w,g,M,T);return L.magFilter=x.NEAREST,L.minFilter=x.NEAREST,L.mipSamples=1,L.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,P,x.TEXTURE_2D,L.handle,0),L}function s(x,w,g,T,M){var P=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,P),x.renderbufferStorage(x.RENDERBUFFER,T,w,g),x.framebufferRenderbuffer(x.FRAMEBUFFER,M,x.RENDERBUFFER,P),P}function p(x){var w=n(x.gl),g=x.gl,T=x.handle=g.createFramebuffer(),M=x._shape[0],P=x._shape[1],L=x.color.length,I=x._ext,C=x._useStencil,k=x._useDepth,E=x._colorType;g.bindFramebuffer(g.FRAMEBUFFER,T);for(var R=0;R<L;++R)x.color[R]=i(g,M,P,E,g.RGBA,g.COLOR_ATTACHMENT0+R);L===0?(x._color_rb=s(g,M,P,g.RGBA4,g.COLOR_ATTACHMENT0),I&&I.drawBuffersWEBGL(a[0])):L>1&&I.drawBuffersWEBGL(a[L]);var O=g.getExtension("WEBGL_depth_texture");O?C?x.depth=i(g,M,P,O.UNSIGNED_INT_24_8_WEBGL,g.DEPTH_STENCIL,g.DEPTH_STENCIL_ATTACHMENT):k&&(x.depth=i(g,M,P,g.UNSIGNED_SHORT,g.DEPTH_COMPONENT,g.DEPTH_ATTACHMENT)):k&&C?x._depth_rb=s(g,M,P,g.DEPTH_STENCIL,g.DEPTH_STENCIL_ATTACHMENT):k?x._depth_rb=s(g,M,P,g.DEPTH_COMPONENT16,g.DEPTH_ATTACHMENT):C&&(x._depth_rb=s(g,M,P,g.STENCIL_INDEX,g.STENCIL_ATTACHMENT));var N=g.checkFramebufferStatus(g.FRAMEBUFFER);if(N!==g.FRAMEBUFFER_COMPLETE){x._destroyed=!0,g.bindFramebuffer(g.FRAMEBUFFER,null),g.deleteFramebuffer(x.handle),x.handle=null,x.depth&&(x.depth.dispose(),x.depth=null),x._depth_rb&&(g.deleteRenderbuffer(x._depth_rb),x._depth_rb=null);for(var R=0;R<x.color.length;++R)x.color[R].dispose(),x.color[R]=null;x._color_rb&&(g.deleteRenderbuffer(x._color_rb),x._color_rb=null),o(g,w),h(N)}o(g,w)}function v(x,w,g,T,M,P,L,I){this.gl=x,this._shape=[w|0,g|0],this._destroyed=!1,this._ext=I,this.color=new Array(M);for(var C=0;C<M;++C)this.color[C]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=T,this._useDepth=P,this._useStencil=L;var k=this,E=[w|0,g|0];Object.defineProperties(E,{0:{get:function(){return k._shape[0]},set:function(R){return k.width=R}},1:{get:function(){return k._shape[1]},set:function(R){return k.height=R}}}),this._shapeVector=E,p(this)}var m=v.prototype;function b(x,w,g){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(x._shape[0]===w&&x._shape[1]===g)){var T=x.gl,M=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(w<0||w>M||g<0||g>M)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=w,x._shape[1]=g;for(var P=n(T),L=0;L<x.color.length;++L)x.color[L].shape=x._shape;x._color_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,x._color_rb),T.renderbufferStorage(T.RENDERBUFFER,T.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&T.renderbufferStorage(T.RENDERBUFFER,T.STENCIL_INDEX,x._shape[0],x._shape[1])),T.bindFramebuffer(T.FRAMEBUFFER,x.handle);var I=T.checkFramebufferStatus(T.FRAMEBUFFER);I!==T.FRAMEBUFFER_COMPLETE&&(x.dispose(),o(T,P),h(I)),o(T,P)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[x|0,x|0]),x.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var w=x[0]|0,g=x[1]|0;return b(this,w,g),[w,g]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return x=x|0,b(this,x,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return x=x|0,b(this,this._shape[0],x),x},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function y(x,w,g,T){u||(u=x.FRAMEBUFFER_UNSUPPORTED,c=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,t=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var M=x.getExtension("WEBGL_draw_buffers");if(!a&&M&&l(x,M),Array.isArray(w)&&(T=g,g=w[1]|0,w=w[0]|0),typeof w!="number")throw new Error("gl-fbo: Missing shape parameter");var P=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(w<0||w>P||g<0||g>P)throw new Error("gl-fbo: Parameters are too large for FBO");T=T||{};var L=1;if("color"in T){if(L=Math.max(T.color|0,0),L<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1)if(M){if(L>x.getParameter(M.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var I=x.UNSIGNED_BYTE,C=x.getExtension("OES_texture_float");if(T.float&&L>0){if(!C)throw new Error("gl-fbo: Context does not support floating point textures");I=x.FLOAT}else T.preferFloat&&L>0&&C&&(I=x.FLOAT);var k=!0;"depth"in T&&(k=!!T.depth);var E=!1;return"stencil"in T&&(E=!!T.stencil),new v(x,w,g,I,L,k,E,M)}},{"gl-texture2d":353}],270:[function(e,d,S){var r=e("sprintf-js").sprintf,a=e("gl-constants/lookup"),u=e("glsl-shader-name"),c=e("add-line-numbers");d.exports=t;function t(f,n,o){var l=u(n)||"of unknown name (see npm glsl-shader-name)",h="unknown type";o!==void 0&&(h=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var i=r(`Error compiling %s shader %s:
`,h,l),s=r("%s%s",i,f),p=f.split(`
`),v={},m=0;m<p.length;m++){var b=p[m];if(!(b===""||b==="\0")){var y=parseInt(b.split(":")[2]);if(isNaN(y))throw new Error(r("Could not parse error: %s",b));v[y]=b}}for(var x=c(n).split(`
`),m=0;m<x.length;m++)if(!(!v[m+3]&&!v[m+2]&&!v[m+1])){var w=x[m];if(i+=w+`
`,v[m+1]){var g=v[m+1];g=g.substr(g.split(":",3).join(":").length+1).trim(),i+=r(`^^^ %s

`,g)}}return{long:i.trim(),short:s.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":265,"glsl-shader-name":431,"sprintf-js":567}],271:[function(e,d,S){d.exports=h;var r=e("binary-search-bounds"),a=e("iota-array"),u=e("typedarray-pool"),c=e("gl-shader"),t=e("gl-buffer"),f=e("./lib/shaders");function n(i,s,p,v,m,b,y){this.plot=i,this.shader=s,this.pickShader=p,this.positionBuffer=v,this.weightBuffer=m,this.colorBuffer=b,this.idBuffer=y,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=n.prototype,l=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var i=[1,0,0,0,1,0,0,0,1];return function(){var s=this.plot,p=this.shader,v=this.bounds,m=this.numVertices;if(!(m<=0)){var b=s.gl,y=s.dataBox,x=v[2]-v[0],w=v[3]-v[1],g=y[2]-y[0],T=y[3]-y[1];i[0]=2*x/g,i[4]=2*w/T,i[6]=2*(v[0]-y[0])/g-1,i[7]=2*(v[1]-y[1])/T-1,p.bind();var M=p.uniforms;M.viewTransform=i,M.shape=this.shape;var P=p.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,m)}}}(),o.drawPick=function(){var i=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0];return function(p){var v=this.plot,m=this.pickShader,b=this.bounds,y=this.numVertices;if(!(y<=0)){var x=v.gl,w=v.dataBox,g=b[2]-b[0],T=b[3]-b[1],M=w[2]-w[0],P=w[3]-w[1];i[0]=2*g/M,i[4]=2*T/P,i[6]=2*(b[0]-w[0])/M-1,i[7]=2*(b[1]-w[1])/P-1;for(var L=0;L<4;++L)s[L]=p>>L*8&255;this.pickOffset=p,m.bind();var I=m.uniforms;I.viewTransform=i,I.pickOffset=s,I.shape=this.shape;var C=m.attributes;return this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(x.UNSIGNED_BYTE,!1),this.idBuffer.bind(),C.pickId.pointer(x.UNSIGNED_BYTE,!1),x.drawArrays(x.TRIANGLES,0,y),p+this.shape[0]*this.shape[1]}}}(),o.pick=function(i,s,p){var v=this.pickOffset,m=this.shape[0]*this.shape[1];if(p<v||p>=v+m)return null;var b=p-v,y=this.xData,x=this.yData;return{object:this,pointId:b,dataCoord:[y[b%this.shape[0]],x[b/this.shape[0]|0]]}},o.update=function(i){i=i||{};var s=i.shape||[0,0],p=i.x||a(s[0]),v=i.y||a(s[1]),m=i.z||new Float32Array(s[0]*s[1]),b=i.zsmooth!==!1;this.xData=p,this.yData=v;var y=i.colorLevels||[0],x=i.colorValues||[0,0,0,1],w=y.length,g=this.bounds,T,M,P,L;b?(T=g[0]=p[0],M=g[1]=v[0],P=g[2]=p[p.length-1],L=g[3]=v[v.length-1]):(T=g[0]=p[0]+(p[1]-p[0])/2,M=g[1]=v[0]+(v[1]-v[0])/2,P=g[2]=p[p.length-1]+(p[p.length-1]-p[p.length-2])/2,L=g[3]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2);var I=1/(P-T),C=1/(L-M),k=s[0],E=s[1];this.shape=[k,E];var R=(b?(k-1)*(E-1):k*E)*(l.length>>>1);this.numVertices=R;for(var O=u.mallocUint8(R*4),N=u.mallocFloat32(R*2),G=u.mallocUint8(R*2),U=u.mallocUint32(R),Y=0,z=b?k-1:k,B=b?E-1:E,H=0;H<B;++H){var V,Z;b?(V=C*(v[H]-M),Z=C*(v[H+1]-M)):(V=H<E-1?C*(v[H]-(v[H+1]-v[H])/2-M):C*(v[H]-(v[H]-v[H-1])/2-M),Z=H<E-1?C*(v[H]+(v[H+1]-v[H])/2-M):C*(v[H]+(v[H]-v[H-1])/2-M));for(var q=0;q<z;++q){var J,ne;b?(J=I*(p[q]-T),ne=I*(p[q+1]-T)):(J=q<k-1?I*(p[q]-(p[q+1]-p[q])/2-T):I*(p[q]-(p[q]-p[q-1])/2-T),ne=q<k-1?I*(p[q]+(p[q+1]-p[q])/2-T):I*(p[q]+(p[q]-p[q-1])/2-T));for(var ve=0;ve<l.length;ve+=2){var $=l[ve],j=l[ve+1],ae=b?(H+j)*k+(q+$):H*k+q,ie=m[ae],te=r.le(y,ie),re,ce,pe,fe;if(te<0)re=x[0],ce=x[1],pe=x[2],fe=x[3];else if(te===w-1)re=x[4*w-4],ce=x[4*w-3],pe=x[4*w-2],fe=x[4*w-1];else{var se=(ie-y[te])/(y[te+1]-y[te]),de=1-se,be=4*te,xe=4*(te+1);re=de*x[be]+se*x[xe],ce=de*x[be+1]+se*x[xe+1],pe=de*x[be+2]+se*x[xe+2],fe=de*x[be+3]+se*x[xe+3]}O[4*Y]=255*re,O[4*Y+1]=255*ce,O[4*Y+2]=255*pe,O[4*Y+3]=255*fe,N[2*Y]=J*.5+ne*.5,N[2*Y+1]=V*.5+Z*.5,G[2*Y]=$,G[2*Y+1]=j,U[Y]=H*k+q,Y+=1}}}this.positionBuffer.update(N),this.weightBuffer.update(G),this.colorBuffer.update(O),this.idBuffer.update(U),u.free(N),u.free(O),u.free(G),u.free(U)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function h(i,s){var p=i.gl,v=c(p,f.vertex,f.fragment),m=c(p,f.pickVertex,f.pickFragment),b=t(p),y=t(p),x=t(p),w=t(p),g=new n(i,v,m,b,y,x,w);return g.update(s),i.addObject(g),g}},{"./lib/shaders":272,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"iota-array":463,"typedarray-pool":595}],272:[function(e,d,S){var r=e("glslify");d.exports={fragment:r([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:273}],273:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],274:[function(e,d,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];S.createShader=function(n){return a(n,u,c,null,f)},S.createPickShader=function(n){return a(n,u,t,null,f)}},{"gl-shader":335,glslify:276}],275:[function(e,d,S){d.exports=x;var r=e("gl-buffer"),a=e("gl-vao"),u=e("gl-texture2d"),c=new Uint8Array(4),t=new Float32Array(c.buffer);function f(w,g,T,M){return c[0]=M,c[1]=T,c[2]=g,c[3]=w,t[0]}var n=e("binary-search-bounds"),o=e("ndarray"),l=e("./lib/shaders"),h=l.createShader,i=l.createPickShader,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(w,g){for(var T=0,M=0;M<3;++M){var P=w[M]-g[M];T+=P*P}return Math.sqrt(T)}function v(w){for(var g=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)g[0][T]=Math.max(w[0][T],g[0][T]),g[1][T]=Math.min(w[1][T],g[1][T]);return g}function m(w,g,T,M){this.arcLength=w,this.position=g,this.index=T,this.dataCoordinate=M}function b(w,g,T,M,P,L){this.gl=w,this.shader=g,this.pickShader=T,this.buffer=M,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=L,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var y=b.prototype;y.isTransparent=function(){return this.hasAlpha},y.isOpaque=function(){return!this.hasAlpha},y.pickSlots=1,y.setPickBase=function(w){this.pickId=w},y.drawTransparent=y.draw=function(w){if(!!this.vertexCount){var g=this.gl,T=this.shader,M=this.vao;T.bind(),T.uniforms={model:w.model||s,view:w.view||s,projection:w.projection||s,clipBounds:v(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[g.drawingBufferWidth,g.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(g.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},y.drawPick=function(w){if(!!this.vertexCount){var g=this.gl,T=this.pickShader,M=this.vao;T.bind(),T.uniforms={model:w.model||s,view:w.view||s,projection:w.projection||s,pickId:this.pickId,clipBounds:v(this.clipBounds),screenShape:[g.drawingBufferWidth,g.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(g.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},y.update=function(w){var g,T;this.dirty=!0;var M=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],L=[],I=[],C=0,k=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=w.position||w.positions;if(R){var O=w.color||w.colors||[0,0,0,1],N=w.lineWidth||1,G=!1;e:for(g=1;g<R.length;++g){var U=R[g-1],Y=R[g];for(L.push(C),I.push(U.slice()),T=0;T<3;++T){if(isNaN(U[T])||isNaN(Y[T])||!isFinite(U[T])||!isFinite(Y[T])){if(!M&&P.length>0){for(var z=0;z<24;++z)P.push(P[P.length-12]);k+=2,G=!0}continue e}E[0][T]=Math.min(E[0][T],U[T],Y[T]),E[1][T]=Math.max(E[1][T],U[T],Y[T])}var B,H;Array.isArray(O[0])?(B=O.length>g-1?O[g-1]:O.length>0?O[O.length-1]:[0,0,0,1],H=O.length>g?O[g]:O.length>0?O[O.length-1]:[0,0,0,1]):B=H=O,B.length===3&&(B=[B[0],B[1],B[2],1]),H.length===3&&(H=[H[0],H[1],H[2],1]),!this.hasAlpha&&B[3]<1&&(this.hasAlpha=!0);var V;Array.isArray(N)?V=N.length>g-1?N[g-1]:N.length>0?N[N.length-1]:[0,0,0,1]:V=N;var Z=C;if(C+=p(U,Y),G){for(T=0;T<2;++T)P.push(U[0],U[1],U[2],Y[0],Y[1],Y[2],Z,V,B[0],B[1],B[2],B[3]);k+=2,G=!1}P.push(U[0],U[1],U[2],Y[0],Y[1],Y[2],Z,V,B[0],B[1],B[2],B[3],U[0],U[1],U[2],Y[0],Y[1],Y[2],Z,-V,B[0],B[1],B[2],B[3],Y[0],Y[1],Y[2],U[0],U[1],U[2],C,-V,H[0],H[1],H[2],H[3],Y[0],Y[1],Y[2],U[0],U[1],U[2],C,V,H[0],H[1],H[2],H[3]),k+=4}}if(this.buffer.update(P),L.push(C),I.push(R[R.length-1].slice()),this.bounds=E,this.vertexCount=k,this.points=I,this.arcLength=L,"dashes"in w){var q=w.dashes,J=q.slice();for(J.unshift(0),g=1;g<J.length;++g)J[g]=J[g-1]+J[g];var ne=o(new Array(256*4),[256,1,4]);for(g=0;g<256;++g){for(T=0;T<4;++T)ne.set(g,0,T,0);n.le(J,J[J.length-1]*g/255)&1?ne.set(g,0,0,0):ne.set(g,0,0,255)}this.texture.setPixels(ne)}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(w){if(!w||w.id!==this.pickId)return null;var g=f(w.value[0],w.value[1],w.value[2],0),T=n.le(this.arcLength,g);if(T<0)return null;if(T===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),T);for(var M=this.points[T],P=this.points[Math.min(T+1,this.points.length-1)],L=(g-this.arcLength[T])/(this.arcLength[T+1]-this.arcLength[T]),I=1-L,C=[0,0,0],k=0;k<3;++k)C[k]=I*M[k]+L*P[k];var E=Math.min(L<.5?T:T+1,this.points.length-1);return new m(g,C,E,this.points[E])};function x(w){var g=w.gl||w.scene&&w.scene.gl,T=h(g);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;var M=i(g);M.attributes.position.location=0,M.attributes.nextPosition.location=1,M.attributes.arcLength.location=2,M.attributes.lineWidth.location=3,M.attributes.color.location=4;for(var P=r(g),L=a(g,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),I=o(new Array(256*4),[256,1,4]),C=0;C<256*4;++C)I.data[C]=255;var k=u(g,I);k.wrap=g.REPEAT;var E=new b(g,T,M,P,L,k);return E.update(w),E}},{"./lib/shaders":274,"binary-search-bounds":96,"gl-buffer":259,"gl-texture2d":353,"gl-vao":358,ndarray:495}],276:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],277:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=u[4],l=u[5],h=u[6],i=u[7],s=u[8],p=u[9],v=u[10],m=u[11],b=u[12],y=u[13],x=u[14],w=u[15];return a[0]=l*(v*w-m*x)-p*(h*w-i*x)+y*(h*m-i*v),a[1]=-(t*(v*w-m*x)-p*(f*w-n*x)+y*(f*m-n*v)),a[2]=t*(h*w-i*x)-l*(f*w-n*x)+y*(f*i-n*h),a[3]=-(t*(h*m-i*v)-l*(f*m-n*v)+p*(f*i-n*h)),a[4]=-(o*(v*w-m*x)-s*(h*w-i*x)+b*(h*m-i*v)),a[5]=c*(v*w-m*x)-s*(f*w-n*x)+b*(f*m-n*v),a[6]=-(c*(h*w-i*x)-o*(f*w-n*x)+b*(f*i-n*h)),a[7]=c*(h*m-i*v)-o*(f*m-n*v)+s*(f*i-n*h),a[8]=o*(p*w-m*y)-s*(l*w-i*y)+b*(l*m-i*p),a[9]=-(c*(p*w-m*y)-s*(t*w-n*y)+b*(t*m-n*p)),a[10]=c*(l*w-i*y)-o*(t*w-n*y)+b*(t*i-n*l),a[11]=-(c*(l*m-i*p)-o*(t*m-n*p)+s*(t*i-n*l)),a[12]=-(o*(p*x-v*y)-s*(l*x-h*y)+b*(l*v-h*p)),a[13]=c*(p*x-v*y)-s*(t*x-f*y)+b*(t*v-f*p),a[14]=-(c*(l*x-h*y)-o*(t*x-f*y)+b*(t*h-f*l)),a[15]=c*(l*v-h*p)-o*(t*v-f*p)+s*(t*h-f*l),a}},{}],278:[function(e,d,S){d.exports=r;function r(a){var u=new Float32Array(16);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u[4]=a[4],u[5]=a[5],u[6]=a[6],u[7]=a[7],u[8]=a[8],u[9]=a[9],u[10]=a[10],u[11]=a[11],u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15],u}},{}],279:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a}},{}],280:[function(e,d,S){d.exports=r;function r(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],281:[function(e,d,S){d.exports=r;function r(a){var u=a[0],c=a[1],t=a[2],f=a[3],n=a[4],o=a[5],l=a[6],h=a[7],i=a[8],s=a[9],p=a[10],v=a[11],m=a[12],b=a[13],y=a[14],x=a[15],w=u*o-c*n,g=u*l-t*n,T=u*h-f*n,M=c*l-t*o,P=c*h-f*o,L=t*h-f*l,I=i*b-s*m,C=i*y-p*m,k=i*x-v*m,E=s*y-p*b,R=s*x-v*b,O=p*x-v*y;return w*O-g*R+T*E+M*k-P*C+L*I}},{}],282:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=c+c,l=t+t,h=f+f,i=c*o,s=t*o,p=t*l,v=f*o,m=f*l,b=f*h,y=n*o,x=n*l,w=n*h;return a[0]=1-p-b,a[1]=s+w,a[2]=v-x,a[3]=0,a[4]=s-w,a[5]=1-i-b,a[6]=m+y,a[7]=0,a[8]=v+x,a[9]=m-y,a[10]=1-i-p,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],283:[function(e,d,S){d.exports=r;function r(a,u,c){var t,f,n,o=c[0],l=c[1],h=c[2],i=Math.sqrt(o*o+l*l+h*h);return Math.abs(i)<1e-6?null:(i=1/i,o*=i,l*=i,h*=i,t=Math.sin(u),f=Math.cos(u),n=1-f,a[0]=o*o*n+f,a[1]=l*o*n+h*t,a[2]=h*o*n-l*t,a[3]=0,a[4]=o*l*n-h*t,a[5]=l*l*n+f,a[6]=h*l*n+o*t,a[7]=0,a[8]=o*h*n+l*t,a[9]=l*h*n-o*t,a[10]=h*h*n+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}},{}],284:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=u[3],l=t+t,h=f+f,i=n+n,s=t*l,p=t*h,v=t*i,m=f*h,b=f*i,y=n*i,x=o*l,w=o*h,g=o*i;return a[0]=1-(m+y),a[1]=p+g,a[2]=v-w,a[3]=0,a[4]=p-g,a[5]=1-(s+y),a[6]=b+x,a[7]=0,a[8]=v+w,a[9]=b-x,a[10]=1-(s+m),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}},{}],285:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=u[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=u[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=u[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],286:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a}},{}],287:[function(e,d,S){d.exports=r;function r(a,u){var c=Math.sin(u),t=Math.cos(u);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=t,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],288:[function(e,d,S){d.exports=r;function r(a,u){var c=Math.sin(u),t=Math.cos(u);return a[0]=t,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=t,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],289:[function(e,d,S){d.exports=r;function r(a,u){var c=Math.sin(u),t=Math.cos(u);return a[0]=t,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=t,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],290:[function(e,d,S){d.exports=r;function r(a,u,c,t,f,n,o){var l=1/(c-u),h=1/(f-t),i=1/(n-o);return a[0]=n*2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n*2*h,a[6]=0,a[7]=0,a[8]=(c+u)*l,a[9]=(f+t)*h,a[10]=(o+n)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*n*2*i,a[15]=0,a}},{}],291:[function(e,d,S){d.exports=r;function r(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],292:[function(e,d,S){d.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":277,"./clone":278,"./copy":279,"./create":280,"./determinant":281,"./fromQuat":282,"./fromRotation":283,"./fromRotationTranslation":284,"./fromScaling":285,"./fromTranslation":286,"./fromXRotation":287,"./fromYRotation":288,"./fromZRotation":289,"./frustum":290,"./identity":291,"./invert":293,"./lookAt":294,"./multiply":295,"./ortho":296,"./perspective":297,"./perspectiveFromFieldOfView":298,"./rotate":299,"./rotateX":300,"./rotateY":301,"./rotateZ":302,"./scale":303,"./str":304,"./translate":305,"./transpose":306}],293:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=u[4],l=u[5],h=u[6],i=u[7],s=u[8],p=u[9],v=u[10],m=u[11],b=u[12],y=u[13],x=u[14],w=u[15],g=c*l-t*o,T=c*h-f*o,M=c*i-n*o,P=t*h-f*l,L=t*i-n*l,I=f*i-n*h,C=s*y-p*b,k=s*x-v*b,E=s*w-m*b,R=p*x-v*y,O=p*w-m*y,N=v*w-m*x,G=g*N-T*O+M*R+P*E-L*k+I*C;return G?(G=1/G,a[0]=(l*N-h*O+i*R)*G,a[1]=(f*O-t*N-n*R)*G,a[2]=(y*I-x*L+w*P)*G,a[3]=(v*L-p*I-m*P)*G,a[4]=(h*E-o*N-i*k)*G,a[5]=(c*N-f*E+n*k)*G,a[6]=(x*M-b*I-w*T)*G,a[7]=(s*I-v*M+m*T)*G,a[8]=(o*O-l*E+i*C)*G,a[9]=(t*E-c*O-n*C)*G,a[10]=(b*L-y*M+w*g)*G,a[11]=(p*M-s*L-m*g)*G,a[12]=(l*k-o*R-h*C)*G,a[13]=(c*R-t*k+f*C)*G,a[14]=(y*T-b*P-x*g)*G,a[15]=(s*P-p*T+v*g)*G,a):null}},{}],294:[function(e,d,S){var r=e("./identity");d.exports=a;function a(u,c,t,f){var n,o,l,h,i,s,p,v,m,b,y=c[0],x=c[1],w=c[2],g=f[0],T=f[1],M=f[2],P=t[0],L=t[1],I=t[2];return Math.abs(y-P)<1e-6&&Math.abs(x-L)<1e-6&&Math.abs(w-I)<1e-6?r(u):(p=y-P,v=x-L,m=w-I,b=1/Math.sqrt(p*p+v*v+m*m),p*=b,v*=b,m*=b,n=T*m-M*v,o=M*p-g*m,l=g*v-T*p,b=Math.sqrt(n*n+o*o+l*l),b?(b=1/b,n*=b,o*=b,l*=b):(n=0,o=0,l=0),h=v*l-m*o,i=m*n-p*l,s=p*o-v*n,b=Math.sqrt(h*h+i*i+s*s),b?(b=1/b,h*=b,i*=b,s*=b):(h=0,i=0,s=0),u[0]=n,u[1]=h,u[2]=p,u[3]=0,u[4]=o,u[5]=i,u[6]=v,u[7]=0,u[8]=l,u[9]=s,u[10]=m,u[11]=0,u[12]=-(n*y+o*x+l*w),u[13]=-(h*y+i*x+s*w),u[14]=-(p*y+v*x+m*w),u[15]=1,u)}},{"./identity":291}],295:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=u[3],l=u[4],h=u[5],i=u[6],s=u[7],p=u[8],v=u[9],m=u[10],b=u[11],y=u[12],x=u[13],w=u[14],g=u[15],T=c[0],M=c[1],P=c[2],L=c[3];return a[0]=T*t+M*l+P*p+L*y,a[1]=T*f+M*h+P*v+L*x,a[2]=T*n+M*i+P*m+L*w,a[3]=T*o+M*s+P*b+L*g,T=c[4],M=c[5],P=c[6],L=c[7],a[4]=T*t+M*l+P*p+L*y,a[5]=T*f+M*h+P*v+L*x,a[6]=T*n+M*i+P*m+L*w,a[7]=T*o+M*s+P*b+L*g,T=c[8],M=c[9],P=c[10],L=c[11],a[8]=T*t+M*l+P*p+L*y,a[9]=T*f+M*h+P*v+L*x,a[10]=T*n+M*i+P*m+L*w,a[11]=T*o+M*s+P*b+L*g,T=c[12],M=c[13],P=c[14],L=c[15],a[12]=T*t+M*l+P*p+L*y,a[13]=T*f+M*h+P*v+L*x,a[14]=T*n+M*i+P*m+L*w,a[15]=T*o+M*s+P*b+L*g,a}},{}],296:[function(e,d,S){d.exports=r;function r(a,u,c,t,f,n,o){var l=1/(u-c),h=1/(t-f),i=1/(n-o);return a[0]=-2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*h,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*i,a[11]=0,a[12]=(u+c)*l,a[13]=(f+t)*h,a[14]=(o+n)*i,a[15]=1,a}},{}],297:[function(e,d,S){d.exports=r;function r(a,u,c,t,f){var n=1/Math.tan(u/2),o=1/(t-f);return a[0]=n/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(f+t)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*f*t*o,a[15]=0,a}},{}],298:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=Math.tan(u.upDegrees*Math.PI/180),n=Math.tan(u.downDegrees*Math.PI/180),o=Math.tan(u.leftDegrees*Math.PI/180),l=Math.tan(u.rightDegrees*Math.PI/180),h=2/(o+l),i=2/(f+n);return a[0]=h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=-((o-l)*h*.5),a[9]=(f-n)*i*.5,a[10]=t/(c-t),a[11]=-1,a[12]=0,a[13]=0,a[14]=t*c/(c-t),a[15]=0,a}},{}],299:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=t[0],n=t[1],o=t[2],l=Math.sqrt(f*f+n*n+o*o),h,i,s,p,v,m,b,y,x,w,g,T,M,P,L,I,C,k,E,R,O,N,G,U;return Math.abs(l)<1e-6?null:(l=1/l,f*=l,n*=l,o*=l,h=Math.sin(c),i=Math.cos(c),s=1-i,p=u[0],v=u[1],m=u[2],b=u[3],y=u[4],x=u[5],w=u[6],g=u[7],T=u[8],M=u[9],P=u[10],L=u[11],I=f*f*s+i,C=n*f*s+o*h,k=o*f*s-n*h,E=f*n*s-o*h,R=n*n*s+i,O=o*n*s+f*h,N=f*o*s+n*h,G=n*o*s-f*h,U=o*o*s+i,a[0]=p*I+y*C+T*k,a[1]=v*I+x*C+M*k,a[2]=m*I+w*C+P*k,a[3]=b*I+g*C+L*k,a[4]=p*E+y*R+T*O,a[5]=v*E+x*R+M*O,a[6]=m*E+w*R+P*O,a[7]=b*E+g*R+L*O,a[8]=p*N+y*G+T*U,a[9]=v*N+x*G+M*U,a[10]=m*N+w*G+P*U,a[11]=b*N+g*G+L*U,u!==a&&(a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a)}},{}],300:[function(e,d,S){d.exports=r;function r(a,u,c){var t=Math.sin(c),f=Math.cos(c),n=u[4],o=u[5],l=u[6],h=u[7],i=u[8],s=u[9],p=u[10],v=u[11];return u!==a&&(a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[4]=n*f+i*t,a[5]=o*f+s*t,a[6]=l*f+p*t,a[7]=h*f+v*t,a[8]=i*f-n*t,a[9]=s*f-o*t,a[10]=p*f-l*t,a[11]=v*f-h*t,a}},{}],301:[function(e,d,S){d.exports=r;function r(a,u,c){var t=Math.sin(c),f=Math.cos(c),n=u[0],o=u[1],l=u[2],h=u[3],i=u[8],s=u[9],p=u[10],v=u[11];return u!==a&&(a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[0]=n*f-i*t,a[1]=o*f-s*t,a[2]=l*f-p*t,a[3]=h*f-v*t,a[8]=n*t+i*f,a[9]=o*t+s*f,a[10]=l*t+p*f,a[11]=h*t+v*f,a}},{}],302:[function(e,d,S){d.exports=r;function r(a,u,c){var t=Math.sin(c),f=Math.cos(c),n=u[0],o=u[1],l=u[2],h=u[3],i=u[4],s=u[5],p=u[6],v=u[7];return u!==a&&(a[8]=u[8],a[9]=u[9],a[10]=u[10],a[11]=u[11],a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15]),a[0]=n*f+i*t,a[1]=o*f+s*t,a[2]=l*f+p*t,a[3]=h*f+v*t,a[4]=i*f-n*t,a[5]=s*f-o*t,a[6]=p*f-l*t,a[7]=v*f-h*t,a}},{}],303:[function(e,d,S){d.exports=r;function r(a,u,c){var t=c[0],f=c[1],n=c[2];return a[0]=u[0]*t,a[1]=u[1]*t,a[2]=u[2]*t,a[3]=u[3]*t,a[4]=u[4]*f,a[5]=u[5]*f,a[6]=u[6]*f,a[7]=u[7]*f,a[8]=u[8]*n,a[9]=u[9]*n,a[10]=u[10]*n,a[11]=u[11]*n,a[12]=u[12],a[13]=u[13],a[14]=u[14],a[15]=u[15],a}},{}],304:[function(e,d,S){d.exports=r;function r(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],305:[function(e,d,S){d.exports=r;function r(a,u,c){var t=c[0],f=c[1],n=c[2],o,l,h,i,s,p,v,m,b,y,x,w;return u===a?(a[12]=u[0]*t+u[4]*f+u[8]*n+u[12],a[13]=u[1]*t+u[5]*f+u[9]*n+u[13],a[14]=u[2]*t+u[6]*f+u[10]*n+u[14],a[15]=u[3]*t+u[7]*f+u[11]*n+u[15]):(o=u[0],l=u[1],h=u[2],i=u[3],s=u[4],p=u[5],v=u[6],m=u[7],b=u[8],y=u[9],x=u[10],w=u[11],a[0]=o,a[1]=l,a[2]=h,a[3]=i,a[4]=s,a[5]=p,a[6]=v,a[7]=m,a[8]=b,a[9]=y,a[10]=x,a[11]=w,a[12]=o*t+s*f+b*n+u[12],a[13]=l*t+p*f+y*n+u[13],a[14]=h*t+v*f+x*n+u[14],a[15]=i*t+m*f+w*n+u[15]),a}},{}],306:[function(e,d,S){d.exports=r;function r(a,u){if(a===u){var c=u[1],t=u[2],f=u[3],n=u[6],o=u[7],l=u[11];a[1]=u[4],a[2]=u[8],a[3]=u[12],a[4]=c,a[6]=u[9],a[7]=u[13],a[8]=t,a[9]=n,a[11]=u[14],a[12]=f,a[13]=o,a[14]=l}else a[0]=u[0],a[1]=u[4],a[2]=u[8],a[3]=u[12],a[4]=u[1],a[5]=u[5],a[6]=u[9],a[7]=u[13],a[8]=u[2],a[9]=u[6],a[10]=u[10],a[11]=u[14],a[12]=u[3],a[13]=u[7],a[14]=u[11],a[15]=u[15];return a}},{}],307:[function(e,d,S){var r=e("barycentric"),a=e("polytope-closest-point/lib/closest_point_2d.js");d.exports=n;function u(o,l){for(var h=[0,0,0,0],i=0;i<4;++i)for(var s=0;s<4;++s)h[s]+=o[4*i+s]*l[i];return h}function c(o,l,h,i,s){for(var p=u(i,u(h,u(l,[o[0],o[1],o[2],1]))),v=0;v<3;++v)p[v]/=p[3];return[.5*s[0]*(1+p[0]),.5*s[1]*(1-p[1])]}function t(o,l){if(o.length===2){for(var h=0,i=0,s=0;s<2;++s)h+=Math.pow(l[s]-o[0][s],2),i+=Math.pow(l[s]-o[1][s],2);return h=Math.sqrt(h),i=Math.sqrt(i),h+i<1e-6?[1,0]:[i/(h+i),h/(i+h)]}else if(o.length===3){var p=[0,0];return a(o[0],o[1],o[2],l,p),r(o,p)}return[]}function f(o,l){for(var h=[0,0,0],i=0;i<o.length;++i)for(var s=o[i],p=l[i],v=0;v<3;++v)h[v]+=p*s[v];return h}function n(o,l,h,i,s,p){if(o.length===1)return[0,o[0].slice()];for(var v=new Array(o.length),m=0;m<o.length;++m)v[m]=c(o[m],h,i,s,p);for(var b=0,y=1/0,m=0;m<v.length;++m){for(var x=0,w=0;w<2;++w)x+=Math.pow(v[m][w]-l[w],2);x<y&&(y=x,b=m)}for(var g=t(v,l),T=0,m=0;m<3;++m){if(g[m]<-.001||g[m]>1.0001)return null;T+=g[m]}return Math.abs(T-1)>.001?null:[b,f(o,g),g]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":525}],308:[function(e,d,S){var r=e("glslify"),a=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),c=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),n=r([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),l=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),i=r([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),s=r([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);S.meshShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},S.wireShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},S.pointShader={vertex:f,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},S.pickShader={vertex:o,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},S.pointPickShader={vertex:h,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},S.contourShader={vertex:i,fragment:s,attributes:[{name:"position",type:"vec3"}]}},{glslify:310}],309:[function(e,d,S){var r=1e-6,a=1e-6,u=e("gl-shader"),c=e("gl-buffer"),t=e("gl-vao"),f=e("gl-texture2d"),n=e("normals"),o=e("gl-mat4/multiply"),l=e("gl-mat4/invert"),h=e("ndarray"),i=e("colormap"),s=e("simplicial-complex-contour"),p=e("typedarray-pool"),v=e("./lib/shaders"),m=e("./lib/closest-point"),b=v.meshShader,y=v.wireShader,x=v.pointShader,w=v.pickShader,g=v.pointPickShader,T=v.contourShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(z,B,H,V,Z,q,J,ne,ve,$,j,ae,ie,te,re,ce,pe,fe,se,de,be,xe,ke,Re,Ke,ze,Je){this.gl=z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=B,this.dirty=!0,this.triShader=H,this.lineShader=V,this.pointShader=Z,this.pickShader=q,this.pointPickShader=J,this.contourShader=ne,this.trianglePositions=ve,this.triangleColors=j,this.triangleNormals=ie,this.triangleUVs=ae,this.triangleIds=$,this.triangleVAO=te,this.triangleCount=0,this.lineWidth=1,this.edgePositions=re,this.edgeColors=pe,this.edgeUVs=fe,this.edgeIds=ce,this.edgeVAO=se,this.edgeCount=0,this.pointPositions=de,this.pointColors=xe,this.pointUVs=ke,this.pointSizes=Re,this.pointIds=be,this.pointVAO=Ke,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ze,this.contourVAO=Je,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=M,this._view=M,this._projection=M,this._resolution=[1,1]}var L=P.prototype;L.isOpaque=function(){return!this.hasAlpha},L.isTransparent=function(){return this.hasAlpha},L.pickSlots=1,L.setPickBase=function(z){this.pickId=z};function I(z,B){if(!B||!B.length)return 1;for(var H=0;H<B.length;++H){if(B.length<2)return 1;if(B[H][0]===z)return B[H][1];if(B[H][0]>z&&H>0){var V=(B[H][0]-z)/(B[H][0]-B[H-1][0]);return B[H][1]*(1-V)+V*B[H-1][1]}}return 1}function C(z,B){for(var H=i({colormap:z,nshades:256,format:"rgba"}),V=new Uint8Array(256*4),Z=0;Z<256;++Z){for(var q=H[Z],J=0;J<3;++J)V[4*Z+J]=q[J];B?V[4*Z+3]=255*I(Z/255,B):V[4*Z+3]=255*q[3]}return h(V,[256,256,4],[4,0,1])}function k(z){for(var B=z.length,H=new Array(B),V=0;V<B;++V)H[V]=z[V][2];return H}L.highlight=function(z){if(!z||!this.contourEnable){this.contourCount=0;return}for(var B=s(this.cells,this.intensity,z.intensity),H=B.cells,V=B.vertexIds,Z=B.vertexWeights,q=H.length,J=p.mallocFloat32(2*3*q),ne=0,ve=0;ve<q;++ve)for(var $=H[ve],j=0;j<2;++j){var ae=$[0];$.length===2&&(ae=$[j]);for(var ie=V[ae][0],te=V[ae][1],re=Z[ae],ce=1-re,pe=this.positions[ie],fe=this.positions[te],se=0;se<3;++se)J[ne++]=re*pe[se]+ce*fe[se]}this.contourCount=ne/3|0,this.contourPositions.update(J.subarray(0,ne)),p.free(J)},L.update=function(z){z=z||{};var B=this.gl;this.dirty=!0,"contourEnable"in z&&(this.contourEnable=z.contourEnable),"contourColor"in z&&(this.contourColor=z.contourColor),"lineWidth"in z&&(this.lineWidth=z.lineWidth),"lightPosition"in z&&(this.lightPosition=z.lightPosition),this.hasAlpha=!1,"opacity"in z&&(this.opacity=z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in z&&(this.opacityscale=z.opacityscale,this.hasAlpha=!0),"ambient"in z&&(this.ambientLight=z.ambient),"diffuse"in z&&(this.diffuseLight=z.diffuse),"specular"in z&&(this.specularLight=z.specular),"roughness"in z&&(this.roughness=z.roughness),"fresnel"in z&&(this.fresnel=z.fresnel),z.texture?(this.texture.dispose(),this.texture=f(B,z.texture)):z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=B.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=B.LINEAR,this.texture.setPixels(C(z.colormap,this.opacityscale)),this.texture.generateMipmap());var H=z.cells,V=z.positions;if(!V||!H)return;var Z=[],q=[],J=[],ne=[],ve=[],$=[],j=[],ae=[],ie=[],te=[],re=[],ce=[],pe=[],fe=[];this.cells=H,this.positions=V;var se=z.vertexNormals,de=z.cellNormals,be=z.vertexNormalsEpsilon===void 0?r:z.vertexNormalsEpsilon,xe=z.faceNormalsEpsilon===void 0?a:z.faceNormalsEpsilon;z.useFacetNormals&&!de&&(de=n.faceNormals(H,V,xe)),!de&&!se&&(se=n.vertexNormals(H,V,be));var ke=z.vertexColors,Re=z.cellColors,Ke=z.meshColor||[1,1,1,1],ze=z.vertexUVs,Je=z.vertexIntensity,qe=z.cellUVs,Ee=z.cellIntensity,Ae=1/0,Be=-1/0;if(!ze&&!qe)if(Je)if(z.vertexIntensityBounds)Ae=+z.vertexIntensityBounds[0],Be=+z.vertexIntensityBounds[1];else for(var $e=0;$e<Je.length;++$e){var xt=Je[$e];Ae=Math.min(Ae,xt),Be=Math.max(Be,xt)}else if(Ee)if(z.cellIntensityBounds)Ae=+z.cellIntensityBounds[0],Be=+z.cellIntensityBounds[1];else for(var $e=0;$e<Ee.length;++$e){var xt=Ee[$e];Ae=Math.min(Ae,xt),Be=Math.max(Be,xt)}else for(var $e=0;$e<V.length;++$e){var xt=V[$e][2];Ae=Math.min(Ae,xt),Be=Math.max(Be,xt)}Je?this.intensity=Je:Ee?this.intensity=Ee:this.intensity=k(V),this.pickVertex=!(Ee||Re);var bt=z.pointSizes,Ne=z.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var $e=0;$e<V.length;++$e)for(var st=V[$e],_t=0;_t<3;++_t)isNaN(st[_t])||!isFinite(st[_t])||(this.bounds[0][_t]=Math.min(this.bounds[0][_t],st[_t]),this.bounds[1][_t]=Math.max(this.bounds[1][_t],st[_t]));var Ot=0,Wt=0,Et=0;e:for(var $e=0;$e<H.length;++$e){var jt=H[$e];switch(jt.length){case 1:for(var Zt=jt[0],st=V[Zt],_t=0;_t<3;++_t)if(isNaN(st[_t])||!isFinite(st[_t]))continue e;te.push(st[0],st[1],st[2]);var Mt;ke?Mt=ke[Zt]:Re?Mt=Re[$e]:Mt=Ke,this.opacityscale&&Je?q.push(Mt[0],Mt[1],Mt[2],this.opacity*I((Je[Zt]-Ae)/(Be-Ae),this.opacityscale)):Mt.length===3?re.push(Mt[0],Mt[1],Mt[2],this.opacity):(re.push(Mt[0],Mt[1],Mt[2],Mt[3]*this.opacity),Mt[3]<1&&(this.hasAlpha=!0));var At;ze?At=ze[Zt]:Je?At=[(Je[Zt]-Ae)/(Be-Ae),0]:qe?At=qe[$e]:Ee?At=[(Ee[$e]-Ae)/(Be-Ae),0]:At=[(st[2]-Ae)/(Be-Ae),0],ce.push(At[0],At[1]),bt?pe.push(bt[Zt]):pe.push(Ne),fe.push($e),Et+=1;break;case 2:for(var _t=0;_t<2;++_t)for(var Zt=jt[_t],st=V[Zt],ft=0;ft<3;++ft)if(isNaN(st[ft])||!isFinite(st[ft]))continue e;for(var _t=0;_t<2;++_t){var Zt=jt[_t],st=V[Zt];$.push(st[0],st[1],st[2]);var Mt;ke?Mt=ke[Zt]:Re?Mt=Re[$e]:Mt=Ke,this.opacityscale&&Je?q.push(Mt[0],Mt[1],Mt[2],this.opacity*I((Je[Zt]-Ae)/(Be-Ae),this.opacityscale)):Mt.length===3?j.push(Mt[0],Mt[1],Mt[2],this.opacity):(j.push(Mt[0],Mt[1],Mt[2],Mt[3]*this.opacity),Mt[3]<1&&(this.hasAlpha=!0));var At;ze?At=ze[Zt]:Je?At=[(Je[Zt]-Ae)/(Be-Ae),0]:qe?At=qe[$e]:Ee?At=[(Ee[$e]-Ae)/(Be-Ae),0]:At=[(st[2]-Ae)/(Be-Ae),0],ae.push(At[0],At[1]),ie.push($e)}Wt+=1;break;case 3:for(var _t=0;_t<3;++_t)for(var Zt=jt[_t],st=V[Zt],ft=0;ft<3;++ft)if(isNaN(st[ft])||!isFinite(st[ft]))continue e;for(var _t=0;_t<3;++_t){var Zt=jt[2-_t],st=V[Zt];Z.push(st[0],st[1],st[2]);var Mt;ke?Mt=ke[Zt]:Re?Mt=Re[$e]:Mt=Ke,Mt?this.opacityscale&&Je?q.push(Mt[0],Mt[1],Mt[2],this.opacity*I((Je[Zt]-Ae)/(Be-Ae),this.opacityscale)):Mt.length===3?q.push(Mt[0],Mt[1],Mt[2],this.opacity):(q.push(Mt[0],Mt[1],Mt[2],Mt[3]*this.opacity),Mt[3]<1&&(this.hasAlpha=!0)):q.push(.5,.5,.5,1);var At;ze?At=ze[Zt]:Je?At=[(Je[Zt]-Ae)/(Be-Ae),0]:qe?At=qe[$e]:Ee?At=[(Ee[$e]-Ae)/(Be-Ae),0]:At=[(st[2]-Ae)/(Be-Ae),0],ne.push(At[0],At[1]);var ot;se?ot=se[Zt]:ot=de[$e],J.push(ot[0],ot[1],ot[2]),ve.push($e)}Ot+=1;break}}this.pointCount=Et,this.edgeCount=Wt,this.triangleCount=Ot,this.pointPositions.update(te),this.pointColors.update(re),this.pointUVs.update(ce),this.pointSizes.update(pe),this.pointIds.update(new Uint32Array(fe)),this.edgePositions.update($),this.edgeColors.update(j),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(Z),this.triangleColors.update(q),this.triangleUVs.update(ne),this.triangleNormals.update(J),this.triangleIds.update(new Uint32Array(ve))},L.drawTransparent=L.draw=function(z){z=z||{};for(var B=this.gl,H=z.model||M,V=z.view||M,Z=z.projection||M,q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)q[0][J]=Math.max(q[0][J],this.clipBounds[0][J]),q[1][J]=Math.min(q[1][J],this.clipBounds[1][J]);var ne={model:H,view:V,projection:Z,inverseModel:M.slice(),clipBounds:q,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ne.inverseModel=l(ne.inverseModel,ne.model),B.disable(B.CULL_FACE),this.texture.bind(0);var ve=new Array(16);o(ve,ne.view,ne.model),o(ve,ne.projection,ve),l(ve,ve);for(var J=0;J<3;++J)ne.eyePosition[J]=ve[12+J]/ve[15];for(var $=ve[15],J=0;J<3;++J)$+=this.lightPosition[J]*ve[4*J+3];for(var J=0;J<3;++J){for(var j=ve[12+J],ae=0;ae<3;++ae)j+=ve[4*ae+J]*this.lightPosition[ae];ne.lightPosition[J]=j/$}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=ne,this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=ne,this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=ne,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=ne,this.contourVAO.bind(),B.drawArrays(B.LINES,0,this.contourCount),this.contourVAO.unbind()}},L.drawPick=function(z){z=z||{};for(var B=this.gl,H=z.model||M,V=z.view||M,Z=z.projection||M,q=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],J=0;J<3;++J)q[0][J]=Math.max(q[0][J],this.clipBounds[0][J]),q[1][J]=Math.min(q[1][J],this.clipBounds[1][J]);this._model=[].slice.call(H),this._view=[].slice.call(V),this._projection=[].slice.call(Z),this._resolution=[B.drawingBufferWidth,B.drawingBufferHeight];var ne={model:H,view:V,projection:Z,clipBounds:q,pickId:this.pickId/255},ve=this.pickShader;if(ve.bind(),ve.uniforms=ne,this.triangleCount>0&&(this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ve=this.pointPickShader;ve.bind(),ve.uniforms=ne,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind()}},L.pick=function(z){if(!z||z.id!==this.pickId)return null;for(var B=z.value[0]+256*z.value[1]+65536*z.value[2],H=this.cells[B],V=this.positions,Z=new Array(H.length),q=0;q<H.length;++q)Z[q]=V[H[q]];var J=z.coord[0],ne=z.coord[1];if(!this.pickVertex){var ve=this.positions[H[0]],$=this.positions[H[1]],j=this.positions[H[2]],ae=[(ve[0]+$[0]+j[0])/3,(ve[1]+$[1]+j[1])/3,(ve[2]+$[2]+j[2])/3];return{_cellCenter:!0,position:[J,ne],index:B,cell:H,cellId:B,intensity:this.intensity[B],dataCoordinate:ae}}var ie=m(Z,[J*this.pixelRatio,this._resolution[1]-ne*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var te=ie[2],re=0,q=0;q<H.length;++q)re+=te[q]*this.intensity[H[q]];return{position:ie[1],index:H[ie[0]],cell:H,cellId:B,intensity:re,dataCoordinate:this.positions[H[ie[0]]]}},L.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function E(z){var B=u(z,b.vertex,b.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.normal.location=4,B}function R(z){var B=u(z,y.vertex,y.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B}function O(z){var B=u(z,x.vertex,x.fragment);return B.attributes.position.location=0,B.attributes.color.location=2,B.attributes.uv.location=3,B.attributes.pointSize.location=4,B}function N(z){var B=u(z,w.vertex,w.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B}function G(z){var B=u(z,g.vertex,g.fragment);return B.attributes.position.location=0,B.attributes.id.location=1,B.attributes.pointSize.location=4,B}function U(z){var B=u(z,T.vertex,T.fragment);return B.attributes.position.location=0,B}function Y(z,B){arguments.length===1&&(B=z,z=B.gl);var H=z.getExtension("OES_standard_derivatives")||z.getExtension("MOZ_OES_standard_derivatives")||z.getExtension("WEBKIT_OES_standard_derivatives");if(!H)throw new Error("derivatives not supported");var V=E(z),Z=R(z),q=O(z),J=N(z),ne=G(z),ve=U(z),$=f(z,h(new Uint8Array([255,255,255,255]),[1,1,4]));$.generateMipmap(),$.minFilter=z.LINEAR_MIPMAP_LINEAR,$.magFilter=z.LINEAR;var j=c(z),ae=c(z),ie=c(z),te=c(z),re=c(z),ce=t(z,[{buffer:j,type:z.FLOAT,size:3},{buffer:re,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ae,type:z.FLOAT,size:4},{buffer:ie,type:z.FLOAT,size:2},{buffer:te,type:z.FLOAT,size:3}]),pe=c(z),fe=c(z),se=c(z),de=c(z),be=t(z,[{buffer:pe,type:z.FLOAT,size:3},{buffer:de,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:z.FLOAT,size:4},{buffer:se,type:z.FLOAT,size:2}]),xe=c(z),ke=c(z),Re=c(z),Ke=c(z),ze=c(z),Je=t(z,[{buffer:xe,type:z.FLOAT,size:3},{buffer:ze,type:z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:z.FLOAT,size:4},{buffer:Re,type:z.FLOAT,size:2},{buffer:Ke,type:z.FLOAT,size:1}]),qe=c(z),Ee=t(z,[{buffer:qe,type:z.FLOAT,size:3}]),Ae=new P(z,$,V,Z,q,J,ne,ve,j,re,ae,ie,te,ce,pe,de,fe,se,be,xe,ze,ke,Re,Ke,Je,qe,Ee);return Ae.update(B),Ae}d.exports=Y},{"./lib/closest-point":307,"./lib/shaders":308,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495,normals:498,"simplicial-complex-contour":556,"typedarray-pool":595}],310:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],311:[function(e,d,S){d.exports=f;var r=e("gl-buffer"),a=e("gl-shader"),u=e("./shaders");function c(n,o,l){this.plot=n,this.vbo=o,this.shader=l}var t=c.prototype;t.bind=function(){var n=this.shader;this.vbo.bind(),this.shader.bind(),n.attributes.coord.pointer(),n.uniforms.screenBox=this.plot.screenBox},t.drawBox=function(){var n=[0,0],o=[0,0];return function(l,h,i,s,p){var v=this.plot,m=this.shader,b=v.gl;n[0]=l,n[1]=h,o[0]=i,o[1]=s,m.uniforms.lo=n,m.uniforms.hi=o,m.uniforms.color=p,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(n){var o=n.gl,l=r(o,[0,0,0,1,1,0,1,1]),h=a(o,u.boxVert,u.lineFrag);return new c(n,l,h)}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],312:[function(e,d,S){d.exports=o;var r=e("gl-buffer"),a=e("gl-shader"),u=e("binary-search-bounds"),c=e("./shaders");function t(l,h,i,s){this.plot=l,this.vbo=h,this.shader=i,this.tickShader=s,this.ticks=[[],[]]}function f(l,h){return l-h}var n=t.prototype;n.draw=function(){var l=[0,0],h=[0,0],i=[0,0];return function(){for(var s=this.plot,p=this.vbo,v=this.shader,m=this.ticks,b=s.gl,y=s._tickBounds,x=s.dataBox,w=s.viewBox,g=s.gridLineWidth,T=s.gridLineColor,M=s.gridLineEnable,P=s.pixelRatio,L=0;L<2;++L){var I=y[L],C=y[L+2],k=C-I,E=.5*(x[L+2]+x[L]),R=x[L+2]-x[L];h[L]=2*k/R,l[L]=2*(I-E)/R}v.bind(),p.bind(),v.attributes.dataCoord.pointer(),v.uniforms.dataShift=l,v.uniforms.dataScale=h;for(var O=0,L=0;L<2;++L){i[0]=i[1]=0,i[L]=1,v.uniforms.dataAxis=i,v.uniforms.lineWidth=g[L]/(w[L+2]-w[L])*P,v.uniforms.color=T[L];var N=m[L].length*6;M[L]&&N&&b.drawArrays(b.TRIANGLES,O,N),O+=N}}}(),n.drawTickMarks=function(){var l=[0,0],h=[0,0],i=[1,0],s=[0,1],p=[0,0],v=[0,0];return function(){for(var m=this.plot,b=this.vbo,y=this.tickShader,x=this.ticks,w=m.gl,g=m._tickBounds,T=m.dataBox,M=m.viewBox,P=m.pixelRatio,L=m.screenBox,I=L[2]-L[0],C=L[3]-L[1],k=M[2]-M[0],E=M[3]-M[1],R=0;R<2;++R){var O=g[R],N=g[R+2],G=N-O,U=.5*(T[R+2]+T[R]),Y=T[R+2]-T[R];h[R]=2*G/Y,l[R]=2*(O-U)/Y}h[0]*=k/I,l[0]*=k/I,h[1]*=E/C,l[1]*=E/C,y.bind(),b.bind(),y.attributes.dataCoord.pointer();var z=y.uniforms;z.dataShift=l,z.dataScale=h;var B=m.tickMarkLength,H=m.tickMarkWidth,V=m.tickMarkColor,Z=0,q=x[0].length*6,J=Math.min(u.ge(x[0],(T[0]-g[0])/(g[2]-g[0]),f),x[0].length),ne=Math.min(u.gt(x[0],(T[2]-g[0])/(g[2]-g[0]),f),x[0].length),ve=Z+6*J,$=6*Math.max(0,ne-J),j=Math.min(u.ge(x[1],(T[1]-g[1])/(g[3]-g[1]),f),x[1].length),ae=Math.min(u.gt(x[1],(T[3]-g[1])/(g[3]-g[1]),f),x[1].length),ie=q+6*j,te=6*Math.max(0,ae-j);p[0]=2*(M[0]-B[1])/I-1,p[1]=(M[3]+M[1])/C-1,v[0]=B[1]*P/I,v[1]=H[1]*P/C,te&&(z.color=V[1],z.tickScale=v,z.dataAxis=s,z.screenOffset=p,w.drawArrays(w.TRIANGLES,ie,te)),p[0]=(M[2]+M[0])/I-1,p[1]=2*(M[1]-B[0])/C-1,v[0]=H[0]*P/I,v[1]=B[0]*P/C,$&&(z.color=V[0],z.tickScale=v,z.dataAxis=i,z.screenOffset=p,w.drawArrays(w.TRIANGLES,ve,$)),p[0]=2*(M[2]+B[3])/I-1,p[1]=(M[3]+M[1])/C-1,v[0]=B[3]*P/I,v[1]=H[3]*P/C,te&&(z.color=V[3],z.tickScale=v,z.dataAxis=s,z.screenOffset=p,w.drawArrays(w.TRIANGLES,ie,te)),p[0]=(M[2]+M[0])/I-1,p[1]=2*(M[3]+B[2])/C-1,v[0]=H[2]*P/I,v[1]=B[2]*P/C,$&&(z.color=V[2],z.tickScale=v,z.dataAxis=i,z.screenOffset=p,w.drawArrays(w.TRIANGLES,ve,$))}}(),n.update=function(){var l=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1];return function(i){var s=i.ticks,p=i.bounds,v=new Float32Array(6*3*(s[0].length+s[1].length));this.plot.zeroLineEnable;for(var m=0,b=[[],[]],y=0;y<2;++y)for(var x=b[y],w=s[y],g=p[y],T=p[y+2],M=0;M<w.length;++M){var P=(w[M].x-g)/(T-g);x.push(P);for(var L=0;L<6;++L)v[m++]=P,v[m++]=l[L],v[m++]=h[L]}this.ticks=b,this.vbo.update(v)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(l){var h=l.gl,i=r(h),s=a(h,c.gridVert,c.gridFrag),p=a(h,c.tickVert,c.gridFrag),v=new t(l,i,s,p);return v}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335}],313:[function(e,d,S){d.exports=f;var r=e("gl-buffer"),a=e("gl-shader"),u=e("./shaders");function c(n,o,l){this.plot=n,this.vbo=o,this.shader=l}var t=c.prototype;t.bind=function(){var n=this.shader;this.vbo.bind(),this.shader.bind(),n.attributes.coord.pointer(),n.uniforms.screenBox=this.plot.screenBox},t.drawLine=function(){var n=[0,0],o=[0,0];return function(l,h,i,s,p,v){var m=this.plot,b=this.shader,y=m.gl;n[0]=l,n[1]=h,o[0]=i,o[1]=s,b.uniforms.start=n,b.uniforms.end=o,b.uniforms.width=p*m.pixelRatio,b.uniforms.color=v,y.drawArrays(y.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(n){var o=n.gl,l=r(o,[-1,-1,-1,1,1,-1,1,1]),h=a(o,u.lineVert,u.lineFrag),i=new c(n,l,h);return i}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],314:[function(e,d,S){var r=e("glslify"),a=r([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);d.exports={lineVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:r([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:316}],315:[function(e,d,S){d.exports=o;var r=e("gl-buffer"),a=e("gl-shader"),u=e("text-cache"),c=e("binary-search-bounds"),t=e("./shaders");function f(l,h,i){this.plot=l,this.vbo=h,this.shader=i,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var n=f.prototype;n.drawTicks=function(){var l=[0,0],h=[0,0],i=[0,0];return function(s){var p=this.plot,v=this.shader,m=this.tickX[s],b=this.tickOffset[s],y=p.gl,x=p.viewBox,w=p.dataBox,g=p.screenBox,T=p.pixelRatio,M=p.tickEnable,P=p.tickPad,L=p.tickColor,I=p.tickAngle,C=p.labelEnable,k=p.labelPad,E=p.labelColor,R=p.labelAngle,O=this.labelOffset[s],N=this.labelCount[s],G=c.lt(m,w[s]),U=c.le(m,w[s+2]);l[0]=l[1]=0,l[s]=1,h[s]=(x[2+s]+x[s])/(g[2+s]-g[s])-1;var Y=2/g[2+(s^1)]-g[s^1];h[s^1]=Y*x[s^1]-1,M[s]&&(h[s^1]-=Y*T*P[s],G<U&&b[U]>b[G]&&(v.uniforms.dataAxis=l,v.uniforms.screenOffset=h,v.uniforms.color=L[s],v.uniforms.angle=I[s],y.drawArrays(y.TRIANGLES,b[G],b[U]-b[G]))),C[s]&&N&&(h[s^1]-=Y*T*k[s],v.uniforms.dataAxis=i,v.uniforms.screenOffset=h,v.uniforms.color=E[s],v.uniforms.angle=R[s],y.drawArrays(y.TRIANGLES,O,N)),h[s^1]=Y*x[2+(s^1)]-1,M[s+2]&&(h[s^1]+=Y*T*P[s+2],G<U&&b[U]>b[G]&&(v.uniforms.dataAxis=l,v.uniforms.screenOffset=h,v.uniforms.color=L[s+2],v.uniforms.angle=I[s+2],y.drawArrays(y.TRIANGLES,b[G],b[U]-b[G]))),C[s+2]&&N&&(h[s^1]+=Y*T*k[s+2],v.uniforms.dataAxis=i,v.uniforms.screenOffset=h,v.uniforms.color=E[s+2],v.uniforms.angle=R[s+2],y.drawArrays(y.TRIANGLES,O,N))}}(),n.drawTitle=function(){var l=[0,0],h=[0,0];return function(){var i=this.plot,s=this.shader,p=i.gl,v=i.screenBox,m=i.titleCenter,b=i.titleAngle,y=i.titleColor,x=i.pixelRatio;if(!!this.titleCount){for(var w=0;w<2;++w)h[w]=2*(m[w]*x-v[w])/(v[2+w]-v[w])-1;s.bind(),s.uniforms.dataAxis=l,s.uniforms.screenOffset=h,s.uniforms.angle=b,s.uniforms.color=y,p.drawArrays(p.TRIANGLES,this.titleOffset,this.titleCount)}}}(),n.bind=function(){var l=[0,0],h=[0,0],i=[0,0];return function(){var s=this.plot,p=this.shader,v=s._tickBounds,m=s.dataBox,b=s.screenBox,y=s.viewBox;p.bind();for(var x=0;x<2;++x){var w=v[x],g=v[x+2],T=g-w,M=.5*(m[x+2]+m[x]),P=m[x+2]-m[x],L=y[x],I=y[x+2],C=I-L,k=b[x],E=b[x+2],R=E-k;h[x]=2*T/P*C/R,l[x]=2*(w-M)/P*C/R}i[1]=2*s.pixelRatio/(b[3]-b[1]),i[0]=i[1]*(b[3]-b[1])/(b[2]-b[0]),p.uniforms.dataScale=h,p.uniforms.dataShift=l,p.uniforms.textScale=i,this.vbo.bind(),p.attributes.textCoordinate.pointer()}}(),n.update=function(l){var h=[],i=l.ticks,s=l.bounds,p,v,m,b,y;for(y=0;y<2;++y){var x=[Math.floor(h.length/3)],w=[-1/0],g=i[y];for(p=0;p<g.length;++p){var T=g[p],M=T.x,P=T.text,L=T.font||"sans-serif";b=T.fontSize||12;for(var I=1/(s[y+2]-s[y]),C=s[y],k=P.split(`
`),E=0;E<k.length;E++)for(m=u(L,k[E]).data,v=0;v<m.length;v+=2)h.push(m[v]*b,-m[v+1]*b-E*b*1.2,(M-C)*I);x.push(Math.floor(h.length/3)),w.push(M)}this.tickOffset[y]=x,this.tickX[y]=w}for(y=0;y<2;++y){for(this.labelOffset[y]=Math.floor(h.length/3),m=u(l.labelFont[y],l.labels[y],{textAlign:"center"}).data,b=l.labelSize[y],p=0;p<m.length;p+=2)h.push(m[p]*b,-m[p+1]*b,0);this.labelCount[y]=Math.floor(h.length/3)-this.labelOffset[y]}for(this.titleOffset=Math.floor(h.length/3),m=u(l.titleFont,l.title).data,b=l.titleSize,p=0;p<m.length;p+=2)h.push(m[p]*b,-m[p+1]*b,0);this.titleCount=Math.floor(h.length/3)-this.titleOffset,this.vbo.update(h)},n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(l){var h=l.gl,i=r(h),s=a(h,t.textVert,t.textFrag),p=new f(l,i,s);return p}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"text-cache":575}],316:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],317:[function(e,d,S){d.exports=h;var r=e("gl-select-static"),a=e("./lib/grid"),u=e("./lib/text"),c=e("./lib/line"),t=e("./lib/box");function f(i,s){this.gl=i,this.pickBuffer=s,this.screenBox=[0,0,i.drawingBufferWidth,i.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var n=f.prototype;n.setDirty=function(){this.dirty=this.pickDirty=!0},n.setOverlayDirty=function(){this.dirty=!0},n.nextDepthValue=function(){return this._depthCounter++/65536},n.draw=function(){return function(){var i=this.gl,s=this.screenBox,p=this.viewBox,v=this.dataBox,m=this.pixelRatio,b=this.grid,y=this.line,x=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),i.disable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD,i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.borderColor){i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]);var g=this.borderColor;i.clearColor(g[0]*g[3],g[1]*g[3],g[2]*g[3],g[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}i.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),i.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]);var T=this.backgroundColor;i.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),i.clear(i.COLOR_BUFFER_BIT),b.draw();var M=this.zeroLineEnable,P=this.zeroLineColor,L=this.zeroLineWidth;if(M[0]||M[1]){y.bind();for(var I=0;I<2;++I)if(!(!M[I]||!(v[I]<=0&&v[I+2]>=0))){var C=s[I]-v[I]*(s[I+2]-s[I])/(v[I+2]-v[I]);I===0?y.drawLine(C,s[1],C,s[3],L[I],P[I]):y.drawLine(s[0],C,s[2],C,L[I],P[I])}}for(var I=0;I<w.length;++I)w[I].draw();i.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]),i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),this.grid.drawTickMarks(),y.bind();var k=this.borderLineEnable,E=this.borderLineWidth,R=this.borderLineColor;k[1]&&y.drawLine(p[0],p[1]-.5*E[1]*m,p[0],p[3]+.5*E[3]*m,E[1],R[1]),k[0]&&y.drawLine(p[0]-.5*E[0]*m,p[1],p[2]+.5*E[2]*m,p[1],E[0],R[0]),k[3]&&y.drawLine(p[2],p[1]-.5*E[1]*m,p[2],p[3]+.5*E[3]*m,E[3],R[3]),k[2]&&y.drawLine(p[0]-.5*E[0]*m,p[3],p[2]+.5*E[2]*m,p[3],E[2],R[2]),x.bind();for(var I=0;I<2;++I)x.drawTicks(I);this.titleEnable&&x.drawTitle();for(var O=this.overlays,I=0;I<O.length;++I)O[I].draw();i.disable(i.SCISSOR_TEST),i.disable(i.BLEND),i.depthMask(!0)}}}(),n.drawPick=function(){return function(){if(!this.static){var i=this.pickBuffer;this.gl,this._pickTimeout=null,i.begin();for(var s=1,p=this.objects,v=0;v<p.length;++v)s=p[v].drawPick(s);i.end()}}}(),n.pick=function(){return function(i,s){if(!this.static){var p=this.pixelRatio,v=this.pickPixelRatio,m=this.viewBox,b=Math.round((i-m[0]/p)*v)|0,y=Math.round((s-m[1]/p)*v)|0,x=this.pickBuffer.query(b,y,this.pickRadius);if(!x)return null;for(var w=x.id+(x.value[0]<<8)+(x.value[1]<<16)+(x.value[2]<<24),g=this.objects,T=0;T<g.length;++T){var M=g[T].pick(b,y,w);if(M)return M}return null}}}();function o(i){for(var s=i.slice(),p=0;p<s.length;++p)s[p]=s[p].slice();return s}function l(i,s){return i.x-s.x}n.setScreenBox=function(i){var s=this.screenBox,p=this.pixelRatio;s[0]=Math.round(i[0]*p)|0,s[1]=Math.round(i[1]*p)|0,s[2]=Math.round(i[2]*p)|0,s[3]=Math.round(i[3]*p)|0,this.setDirty()},n.setDataBox=function(i){var s=this.dataBox,p=s[0]!==i[0]||s[1]!==i[1]||s[2]!==i[2]||s[3]!==i[3];p&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],this.setDirty())},n.setViewBox=function(i){var s=this.pixelRatio,p=this.viewBox;p[0]=Math.round(i[0]*s)|0,p[1]=Math.round(i[1]*s)|0,p[2]=Math.round(i[2]*s)|0,p[3]=Math.round(i[3]*s)|0;var v=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((i[2]-i[0])*v)|0,Math.round((i[3]-i[1])*v)|0],this.setDirty()},n.update=function(i){i=i||{};var s=this.gl;this.pixelRatio=i.pixelRatio||1;var p=this.pixelRatio;this.pickPixelRatio=Math.max(p,1),this.setScreenBox(i.screenBox||[0,0,s.drawingBufferWidth/p,s.drawingBufferHeight/p]),this.screenBox,this.setViewBox(i.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/p,.125*(this.screenBox[3]-this.screenBox[1])/p,.875*(this.screenBox[2]-this.screenBox[0])/p,.875*(this.screenBox[3]-this.screenBox[1])/p]);var v=this.viewBox,m=(v[2]-v[0])/(v[3]-v[1]);this.setDataBox(i.dataBox||[-10,-10/m,10,10/m]),this.borderColor=i.borderColor!==!1?(i.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(i.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(i.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(i.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(i.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(i.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(i.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(i.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(i.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(i.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(i.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(i.titleCenter||[.5*(v[0]+v[2])/p,(v[3]+120)/p]).slice(),this.titleEnable=!("titleEnable"in i)||!!i.titleEnable,this.titleAngle=i.titleAngle||0,this.titleColor=(i.titleColor||[0,0,0,1]).slice(),this.labelPad=(i.labelPad||[15,15,15,15]).slice(),this.labelAngle=(i.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(i.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(i.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(i.tickPad||[15,15,15,15]).slice(),this.tickAngle=(i.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(i.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(i.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(i.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(i.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(i.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=i.ticks||[[],[]],y=this._tickBounds;y[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(var x=0;x<2;++x){var w=b[x].slice(0);w.length!==0&&(w.sort(l),y[x]=Math.min(y[x],w[0].x),y[x+2]=Math.max(y[x+2],w[w.length-1].x))}this.grid.update({bounds:y,ticks:b}),this.text.update({bounds:y,ticks:b,labels:i.labels||["x","y"],labelSize:i.labelSize||[12,12],labelFont:i.labelFont||["sans-serif","sans-serif"],title:i.title||"",titleSize:i.titleSize||18,titleFont:i.titleFont||"sans-serif"}),this.static=!!i.static,this.setDirty()},n.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var i=this.objects.length-1;i>=0;--i)this.objects[i].dispose();this.objects.length=0;for(var i=this.overlays.length-1;i>=0;--i)this.overlays[i].dispose();this.overlays.length=0,this.gl=null},n.addObject=function(i){this.objects.indexOf(i)<0&&(this.objects.push(i),this.setDirty())},n.removeObject=function(i){for(var s=this.objects,p=0;p<s.length;++p)if(s[p]===i){s.splice(p,1),this.setDirty();break}},n.addOverlay=function(i){this.overlays.indexOf(i)<0&&(this.overlays.push(i),this.setOverlayDirty())},n.removeOverlay=function(i){for(var s=this.overlays,p=0;p<s.length;++p)if(s[p]===i){s.splice(p,1),this.setOverlayDirty();break}};function h(i){var s=i.gl,p=r(s,[s.drawingBufferWidth,s.drawingBufferHeight]),v=new f(s,p);return v.grid=a(v),v.text=u(v),v.line=c(v),v.box=t(v),v.update(i),v}},{"./lib/box":311,"./lib/grid":312,"./lib/line":313,"./lib/text":315,"gl-select-static":334}],318:[function(e,d,S){d.exports=n;var r=e("right-now"),a=e("3d-view"),u=e("mouse-change"),c=e("mouse-wheel"),t=e("mouse-event-offset"),f=e("has-passive-events");function n(o,l){o=o||document.body,l=l||{};var h=[.01,1/0];"distanceLimits"in l&&(h[0]=l.distanceLimits[0],h[1]=l.distanceLimits[1]),"zoomMin"in l&&(h[0]=l.zoomMin),"zoomMax"in l&&(h[1]=l.zoomMax);var i=a({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:h}),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,v=o.clientWidth,m=o.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:i,element:o,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:i.modes,_ortho:l._ortho||l.projection&&l.projection.type==="orthographic"||!1,tick:function(){var y=r(),x=this.delay,w=y-2*x;i.idle(y-x),i.recalcMatrix(w),i.flush(y-(100+x*2));for(var g=!0,T=i.computedMatrix,M=0;M<16;++M)g=g&&s[M]===T[M],s[M]=T[M];var P=o.clientWidth===v&&o.clientHeight===m;return v=o.clientWidth,m=o.clientHeight,g?!P:(p=Math.exp(i.computedRadius[0]),!0)},lookAt:function(y,x,w){i.lookAt(i.lastT(),y,x,w)},rotate:function(y,x,w){i.rotate(i.lastT(),y,x,w)},pan:function(y,x,w){i.pan(i.lastT(),y,x,w)},translate:function(y,x,w){i.translate(i.lastT(),y,x,w)}};return Object.defineProperties(b,{matrix:{get:function(){return i.computedMatrix},set:function(y){return i.setMatrix(i.lastT(),y),i.computedMatrix},enumerable:!0},mode:{get:function(){return i.getMode()},set:function(y){var x=i.computedUp.slice(),w=i.computedEye.slice(),g=i.computedCenter.slice();if(i.setMode(y),y==="turntable"){var T=r();i._active.lookAt(T,w,g,x),i._active.lookAt(T+500,w,g,[0,0,1]),i._active.flush(T)}return i.getMode()},enumerable:!0},center:{get:function(){return i.computedCenter},set:function(y){return i.lookAt(i.lastT(),null,y),i.computedCenter},enumerable:!0},eye:{get:function(){return i.computedEye},set:function(y){return i.lookAt(i.lastT(),y),i.computedEye},enumerable:!0},up:{get:function(){return i.computedUp},set:function(y){return i.lookAt(i.lastT(),null,null,y),i.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(y){return i.setDistance(i.lastT(),y),y},enumerable:!0},distanceLimits:{get:function(){return i.getDistanceLimits(h)},set:function(y){return i.setDistanceLimits(y),y},enumerable:!0}}),o.addEventListener("contextmenu",function(y){return y.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=u(o,y),o.addEventListener("touchstart",function(x){var w=t(x.changedTouches[0],o);y(0,w[0],w[1],b._lastMods),y(1,w[0],w[1],b._lastMods)},f?{passive:!0}:!1),o.addEventListener("touchmove",function(x){var w=t(x.changedTouches[0],o);y(1,w[0],w[1],b._lastMods),x.preventDefault()},f?{passive:!1}:!1),o.addEventListener("touchend",function(x){y(0,b._lastX,b._lastY,b._lastMods)},f?{passive:!0}:!1);function y(x,w,g,T){var M=b.keyBindingMode;if(M!==!1){var P=M==="rotate",L=M==="pan",I=M==="zoom",C=!!T.control,k=!!T.alt,E=!!T.shift,R=!!(x&1),O=!!(x&2),N=!!(x&4),G=1/o.clientHeight,U=G*(w-b._lastX),Y=G*(g-b._lastY),z=b.flipX?1:-1,B=b.flipY?1:-1,H=Math.PI*b.rotateSpeed,V=r();if(b._lastX!==-1&&b._lastY!==-1&&((P&&R&&!C&&!k&&!E||R&&!C&&!k&&E)&&i.rotate(V,z*H*U,-B*H*Y,0),(L&&R&&!C&&!k&&!E||O||R&&C&&!k&&!E)&&i.pan(V,-b.translateSpeed*U*p,b.translateSpeed*Y*p,0),I&&R&&!C&&!k&&!E||N||R&&!C&&k&&!E)){var Z=-b.zoomSpeed*Y/window.innerHeight*(V-i.lastT())*100;i.pan(V,0,0,p*(Math.exp(Z)-1))}return b._lastX=w,b._lastY=g,b._lastMods=T,!0}}b.wheelListener=c(o,function(x,w){if(b.keyBindingMode!==!1&&!!b.enableWheel){var g=b.flipX?1:-1,T=b.flipY?1:-1,M=r();if(Math.abs(x)>Math.abs(w))i.rotate(M,0,0,-x*g*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var P=-b.zoomSpeed*T*w/window.innerHeight*(M-i.lastT())/20;i.pan(M,0,0,p*(Math.exp(P)-1))}}},!0)},b.enableMouseListeners(),b}},{"3d-view":54,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486,"right-now":542}],319:[function(e,d,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),c=r([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);d.exports=function(t){return a(t,u,c,null,[{name:"position",type:"vec2"}])}},{"gl-shader":335,glslify:320}],320:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],321:[function(e,d,S){var r=e("./camera.js"),a=e("gl-axes3d"),u=e("gl-axes3d/properties"),c=e("gl-spikes3d"),t=e("gl-select-static"),f=e("gl-fbo"),n=e("a-big-triangle"),o=e("mouse-change"),l=e("gl-mat4/perspective"),h=e("gl-mat4/ortho"),i=e("./lib/shader"),s=e("is-mobile")({tablet:!0,featureDetect:!0});d.exports={createScene:y,createCamera:r};function p(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function v(w,g){var T=null;try{T=w.getContext("webgl",g),T||(T=w.getContext("experimental-webgl",g))}catch{return null}return T}function m(w){var g=Math.round(Math.log(Math.abs(w))/Math.log(10));if(g<0){var T=Math.round(Math.pow(10,-g));return Math.ceil(w*T)/T}else if(g>0){var T=Math.round(Math.pow(10,g));return Math.ceil(w/T)*T}return Math.ceil(w)}function b(w){return typeof w=="boolean"?w:!0}function y(w){w=w||{},w.camera=w.camera||{};var g=w.canvas;if(!g)if(g=document.createElement("canvas"),w.container){var T=w.container;T.appendChild(g)}else document.body.appendChild(g);var M=w.gl;if(M||(w.glOptions&&(s=!!w.glOptions.preserveDrawingBuffer),M=v(g,w.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:s})),!M)throw new Error("webgl not supported");var P=w.bounds||[[-10,-10,-10],[10,10,10]],L=new p,I=f(M,M.drawingBufferWidth,M.drawingBufferHeight,{preferFloat:!s}),C=i(M),k=w.cameraObject&&w.cameraObject._ortho===!0||w.camera.projection&&w.camera.projection.type==="orthographic"||!1,E={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:k},R=w.axes||{},O=a(M,R);O.enable=!R.disable;var N=w.spikes||{},G=c(M,N),U=[],Y=[],z=[],B=[],H=!0,J=!0,V=new Array(16),Z=new Array(16),q={view:null,projection:V,model:Z,_ortho:!1},J=!0,ne=[M.drawingBufferWidth,M.drawingBufferHeight],ve=w.cameraObject||r(g,E),$={gl:M,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:g,selection:L,camera:ve,axes:O,axesPixels:null,spikes:G,bounds:P,objects:U,shape:ne,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||10,zNear:w.zNear||.01,zFar:w.zFar||1e3,fovy:w.fovy||Math.PI/4,clearColor:w.clearColor||[0,0,0,0],autoResize:b(w.autoResize),autoBounds:b(w.autoBounds),autoScale:!!w.autoScale,autoCenter:b(w.autoCenter),clipToBounds:b(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:q,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(de){this.aspect[0]=de.x,this.aspect[1]=de.y,this.aspect[2]=de.z,J=!0},setBounds:function(de,be){this.bounds[0][de]=be.min,this.bounds[1][de]=be.max},setClearColor:function(de){this.clearColor=de},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},j=[M.drawingBufferWidth/$.pixelRatio|0,M.drawingBufferHeight/$.pixelRatio|0];function ae(){if(!$._stopped&&!!$.autoResize){var de=g.parentNode,be=1,xe=1;de&&de!==document.body?(be=de.clientWidth,xe=de.clientHeight):(be=window.innerWidth,xe=window.innerHeight);var ke=Math.ceil(be*$.pixelRatio)|0,Re=Math.ceil(xe*$.pixelRatio)|0;if(ke!==g.width||Re!==g.height){g.width=ke,g.height=Re;var Ke=g.style;Ke.position=Ke.position||"absolute",Ke.left="0px",Ke.top="0px",Ke.width=be+"px",Ke.height=xe+"px",H=!0}}}$.autoResize&&ae(),window.addEventListener("resize",ae);function ie(){for(var de=U.length,be=B.length,xe=0;xe<be;++xe)z[xe]=0;e:for(var xe=0;xe<de;++xe){var ke=U[xe],Re=ke.pickSlots;if(!Re){Y[xe]=-1;continue}for(var Ke=0;Ke<be;++Ke)if(z[Ke]+Re<255){Y[xe]=Ke,ke.setPickBase(z[Ke]+1),z[Ke]+=Re;continue e}var ze=t(M,ne);Y[xe]=be,B.push(ze),z.push(Re),ke.setPickBase(1),be+=1}for(;be>0&&z[be-1]===0;)z.pop(),B.pop().dispose()}$.update=function(de){$._stopped||(H=!0,J=!0)},$.add=function(de){$._stopped||(de.axes=O,U.push(de),Y.push(-1),H=!0,J=!0,ie())},$.remove=function(de){if(!$._stopped){var be=U.indexOf(de);be<0||(U.splice(be,1),Y.pop(),H=!0,J=!0,ie())}},$.dispose=function(){if(!$._stopped&&($._stopped=!0,window.removeEventListener("resize",ae),g.removeEventListener("webglcontextlost",te),$.mouseListener.enabled=!1,!$.contextLost)){O.dispose(),G.dispose();for(var de=0;de<U.length;++de)U[de].dispose();I.dispose();for(var de=0;de<B.length;++de)B[de].dispose();C.dispose(),M=null,O=null,G=null,U=[]}},$._mouseRotating=!1,$._prevButtons=0,$.enableMouseListeners=function(){$.mouseListener=o(g,function(de,be,xe){if(!$._stopped){var ke=B.length,Re=U.length,Ke=L.object;L.distance=1/0,L.mouse[0]=be,L.mouse[1]=xe,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var ze=!1;if(de&&$._prevButtons)$._mouseRotating=!0;else{$._mouseRotating&&(J=!0),$._mouseRotating=!1;for(var Je=0;Je<ke;++Je){var qe=B[Je].query(be,j[1]-xe-1,$.pickRadius);if(qe){if(qe.distance>L.distance)continue;for(var Ee=0;Ee<Re;++Ee){var Ae=U[Ee];if(Y[Ee]===Je){var Be=Ae.pick(qe);Be&&(L.buttons=de,L.screen=qe.coord,L.distance=qe.distance,L.object=Ae,L.index=Be.distance,L.dataPosition=Be.position,L.dataCoordinate=Be.dataCoordinate,L.data=Be,ze=!0)}}}}}Ke&&Ke!==L.object&&(Ke.highlight&&Ke.highlight(null),H=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),H=!0),ze=ze||L.object!==Ke,ze&&$.onselect&&$.onselect(L),de&1&&!($._prevButtons&1)&&$.onclick&&$.onclick(L),$._prevButtons=de}})};function te(){if($.contextLost)return!0;M.isContextLost()&&($.contextLost=!0,$.mouseListener.enabled=!1,$.selection.object=null,$.oncontextloss&&$.oncontextloss())}g.addEventListener("webglcontextlost",te);function re(){if(!te()){M.colorMask(!0,!0,!0,!0),M.depthMask(!0),M.disable(M.BLEND),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL);for(var de=U.length,be=B.length,xe=0;xe<be;++xe){var ke=B[xe];ke.shape=j,ke.begin();for(var Re=0;Re<de;++Re)if(Y[Re]===xe){var Ke=U[Re];Ke.drawPick&&(Ke.pixelRatio=1,Ke.drawPick(q))}ke.end()}}}var ce=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],pe=[ce[0].slice(),ce[1].slice()];function fe(){if(!te()){ae();var de=$.camera.tick();q.view=$.camera.matrix,H=H||de,J=J||de,O.pixelRatio=$.pixelRatio,G.pixelRatio=$.pixelRatio;var be=U.length,xe=ce[0],ke=ce[1];xe[0]=xe[1]=xe[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var Re=0;Re<be;++Re){var Ke=U[Re];Ke.pixelRatio=$.pixelRatio,Ke.axes=$.axes,H=H||!!Ke.dirty,J=J||!!Ke.dirty;var ze=Ke.bounds;if(ze)for(var Je=ze[0],qe=ze[1],Ee=0;Ee<3;++Ee)xe[Ee]=Math.min(xe[Ee],Je[Ee]),ke[Ee]=Math.max(ke[Ee],qe[Ee])}var Ae=$.bounds;if($.autoBounds)for(var Ee=0;Ee<3;++Ee){if(ke[Ee]<xe[Ee])xe[Ee]=-1,ke[Ee]=1;else{xe[Ee]===ke[Ee]&&(xe[Ee]-=1,ke[Ee]+=1);var Be=.05*(ke[Ee]-xe[Ee]);xe[Ee]=xe[Ee]-Be,ke[Ee]=ke[Ee]+Be}Ae[0][Ee]=xe[Ee],Ae[1][Ee]=ke[Ee]}for(var $e=!1,Ee=0;Ee<3;++Ee)$e=$e||pe[0][Ee]!==Ae[0][Ee]||pe[1][Ee]!==Ae[1][Ee],pe[0][Ee]=Ae[0][Ee],pe[1][Ee]=Ae[1][Ee];if(J=J||$e,H=H||$e,!!H){if($e){for(var xt=[0,0,0],Re=0;Re<3;++Re)xt[Re]=m((Ae[1][Re]-Ae[0][Re])/10);O.autoTicks?O.update({bounds:Ae,tickSpacing:xt}):O.update({bounds:Ae})}var bt=M.drawingBufferWidth,Ne=M.drawingBufferHeight;ne[0]=bt,ne[1]=Ne,j[0]=Math.max(bt/$.pixelRatio,1)|0,j[1]=Math.max(Ne/$.pixelRatio,1)|0,x($,k);for(var Re=0;Re<be;++Re){var Ke=U[Re];Ke.axesBounds=Ae,$.clipToBounds&&(Ke.clipBounds=Ae)}L.object&&($.snapToData?G.position=L.dataCoordinate:G.position=L.dataPosition,G.bounds=Ae),J&&(J=!1,re()),$.axesPixels=u($.axes,q,bt,Ne),$.onrender&&$.onrender(),M.bindFramebuffer(M.FRAMEBUFFER,null),M.viewport(0,0,bt,Ne),$.clearRGBA(),M.depthMask(!0),M.colorMask(!0,!0,!0,!0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.disable(M.BLEND),M.disable(M.CULL_FACE);var st=!1;O.enable&&(st=st||O.isTransparent(),O.draw(q)),G.axes=O,L.object&&G.draw(q),M.disable(M.CULL_FACE);for(var Re=0;Re<be;++Re){var Ke=U[Re];Ke.axes=O,Ke.pixelRatio=$.pixelRatio,Ke.isOpaque&&Ke.isOpaque()&&Ke.draw(q),Ke.isTransparent&&Ke.isTransparent()&&(st=!0)}if(st){I.shape=ne,I.bind(),M.clear(M.DEPTH_BUFFER_BIT),M.colorMask(!1,!1,!1,!1),M.depthMask(!0),M.depthFunc(M.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(q);for(var Re=0;Re<be;++Re){var Ke=U[Re];Ke.isOpaque&&Ke.isOpaque()&&Ke.draw(q)}M.enable(M.BLEND),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.colorMask(!0,!0,!0,!0),M.depthMask(!1),M.clearColor(0,0,0,0),M.clear(M.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(q);for(var Re=0;Re<be;++Re){var Ke=U[Re];Ke.isTransparent&&Ke.isTransparent()&&Ke.drawTransparent(q)}M.bindFramebuffer(M.FRAMEBUFFER,null),M.blendFunc(M.ONE,M.ONE_MINUS_SRC_ALPHA),M.disable(M.DEPTH_TEST),C.bind(),I.color[0].bind(0),C.uniforms.accumBuffer=0,n(M),M.disable(M.BLEND)}H=!1;for(var Re=0;Re<be;++Re)U[Re].dirty=!1}}}function se(){$._stopped||$.contextLost||(fe(),requestAnimationFrame(se))}return $.enableMouseListeners(),se(),$.redraw=function(){$._stopped||(H=!0,fe())},$}function x(w,g){var T=w.bounds,M=w.cameraParams,P=M.projection,L=M.model,I=w.gl.drawingBufferWidth,C=w.gl.drawingBufferHeight,k=w.zNear,E=w.zFar,R=w.fovy,O=I/C;g?(h(P,-O,O,-1,1,k,E),M._ortho=!0):(l(P,R,O,k,E),M._ortho=!1);for(var N=0;N<16;++N)L[N]=0;L[15]=1;for(var G=0,N=0;N<3;++N)G=Math.max(G,T[1][N]-T[0][N]);for(var N=0;N<3;++N)w.autoScale?L[5*N]=w.aspect[N]/(T[1][N]-T[0][N]):L[5*N]=1/G,w.autoCenter&&(L[12+N]=-L[5*N]*.5*(T[0][N]+T[1][N]))}},{"./camera.js":318,"./lib/shader":319,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":258,"gl-fbo":269,"gl-mat4/ortho":296,"gl-mat4/perspective":297,"gl-select-static":334,"gl-spikes3d":345,"is-mobile":467,"mouse-change":483}],322:[function(e,d,S){var r=e("glslify");S.pointVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),S.pointFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),S.pickVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),S.pickFragment=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:323}],323:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],324:[function(e,d,S){var r=e("gl-shader"),a=e("gl-buffer"),u=e("typedarray-pool"),c=e("./lib/shader");d.exports=o;function t(l,h,i,s,p){this.plot=l,this.offsetBuffer=h,this.pickBuffer=i,this.shader=s,this.pickShader=p,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=t.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(l){var h;l=l||{};function i(x,w){return x in l?l[x]:w}this.sizeMin=i("sizeMin",.5),this.sizeMax=i("sizeMax",20),this.color=i("color",[1,0,0,1]).slice(),this.areaRatio=i("areaRatio",1),this.borderColor=i("borderColor",[0,0,0,1]).slice(),this.blend=i("blend",!1);var s=l.positions.length>>>1,p=l.positions instanceof Float32Array,v=l.idToIndex instanceof Int32Array&&l.idToIndex.length>=s,m=l.positions,b=p?m:u.mallocFloat32(m.length),y=v?l.idToIndex:u.mallocInt32(s);if(p||b.set(m),!v)for(b.set(m),h=0;h<s;h++)y[h]=h;this.points=m,this.offsetBuffer.update(b),this.pickBuffer.update(y),p||u.free(b),v||u.free(y),this.pointCount=s,this.pickOffset=0};function n(l,h){var i=0,s=l.length>>>1,p;for(p=0;p<s;p++){var v=l[p*2],m=l[p*2+1];v>=h[0]&&v<=h[2]&&m>=h[1]&&m<=h[3]&&i++}return i}f.unifiedDraw=function(){var l=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(i){var s=i!==void 0,p=s?this.pickShader:this.shader,v=this.plot.gl,m=this.plot.dataBox;if(this.pointCount===0)return i;var b=m[2]-m[0],y=m[3]-m[1],x=n(this.points,m),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(x,.33333)));l[0]=2/b,l[4]=2/y,l[6]=-2*m[0]/b-1,l[7]=-2*m[1]/y-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=l,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=w<5,p.uniforms.pointSize=w,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),s&&(h[0]=i&255,h[1]=i>>8&255,h[2]=i>>16&255,h[3]=i>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(v.UNSIGNED_BYTE),p.uniforms.pickOffset=h,this.pickOffset=i);var g=v.getParameter(v.BLEND),T=v.getParameter(v.DITHER);return g&&!this.blend&&v.disable(v.BLEND),T&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),g&&!this.blend&&v.enable(v.BLEND),T&&v.enable(v.DITHER),i+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(l,h,i){var s=this.pickOffset,p=this.pointCount;if(i<s||i>=s+p)return null;var v=i-s,m=this.points;return{object:this,pointId:v,dataCoord:[m[2*v],m[2*v+1]]}};function o(l,h){var i=l.gl,s=a(i),p=a(i),v=r(i,c.pointVertex,c.pointFragment),m=r(i,c.pickVertex,c.pickFragment),b=new t(l,s,p,v,m);return b.update(h),l.addObject(b),b}},{"./lib/shader":322,"gl-buffer":259,"gl-shader":335,"typedarray-pool":595}],325:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=u[0],n=u[1],o=u[2],l=u[3],h=c[0],i=c[1],s=c[2],p=c[3],v,m,b,y,x;return m=f*h+n*i+o*s+l*p,m<0&&(m=-m,h=-h,i=-i,s=-s,p=-p),1-m>1e-6?(v=Math.acos(m),b=Math.sin(v),y=Math.sin((1-t)*v)/b,x=Math.sin(t*v)/b):(y=1-t,x=t),a[0]=y*f+x*h,a[1]=y*n+x*i,a[2]=y*o+x*s,a[3]=y*l+x*p,a}},{}],326:[function(e,d,S){d.exports=function(r){return!r&&r!==0?"":r.toString()}},{}],327:[function(e,d,S){var r=e("vectorize-text");d.exports=u;var a={};function u(c,t,f){var n=a[t];if(n||(n=a[t]={}),c in n)return n[c];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var l=r(c,o);o.triangles=!1;var h=r(c,o),i,s;if(f&&f!==1){for(i=0;i<l.positions.length;++i)for(s=0;s<l.positions[i].length;++s)l.positions[i][s]/=f;for(i=0;i<h.positions.length;++i)for(s=0;s<h.positions[i].length;++s)h.positions[i][s]/=f}var p=[[1/0,1/0],[-1/0,-1/0]],v=h.positions.length;for(i=0;i<v;++i){var m=h.positions[i];for(s=0;s<2;++s)p[0][s]=Math.min(p[0][s],m[s]),p[1][s]=Math.max(p[1][s],m[s])}return n[c]=[l,h,p]}},{"vectorize-text":600}],328:[function(e,d,S){var r=e("gl-shader"),a=e("glslify"),u=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:u,fragment:f,attributes:o},h={vertex:c,fragment:f,attributes:o},i={vertex:t,fragment:f,attributes:o},s={vertex:u,fragment:n,attributes:o},p={vertex:c,fragment:n,attributes:o},v={vertex:t,fragment:n,attributes:o};function m(b,y){var x=r(b,y),w=x.attributes;return w.position.location=0,w.color.location=1,w.glyph.location=2,w.id.location=3,x}S.createPerspective=function(b){return m(b,l)},S.createOrtho=function(b){return m(b,h)},S.createProject=function(b){return m(b,i)},S.createPickPerspective=function(b){return m(b,s)},S.createPickOrtho=function(b){return m(b,p)},S.createPickProject=function(b){return m(b,v)}},{"gl-shader":335,glslify:329}],329:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],330:[function(e,d,S){var r=e("is-string-blank"),a=e("gl-buffer"),u=e("gl-vao"),c=e("typedarray-pool"),t=e("gl-mat4/multiply"),f=e("./lib/shaders"),n=e("./lib/glyphs"),o=e("./lib/get-simple-string"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];d.exports=Y;function h(z,B){var H=z[0],V=z[1],Z=z[2],q=z[3];return z[0]=B[0]*H+B[4]*V+B[8]*Z+B[12]*q,z[1]=B[1]*H+B[5]*V+B[9]*Z+B[13]*q,z[2]=B[2]*H+B[6]*V+B[10]*Z+B[14]*q,z[3]=B[3]*H+B[7]*V+B[11]*Z+B[15]*q,z}function i(z,B,H,V){return h(V,V),h(V,V),h(V,V)}function s(z,B){this.index=z,this.dataCoordinate=this.position=B}function p(z){return z===!0||z>1?1:z}function v(z,B,H,V,Z,q,J,ne,ve,$,j,ae){this.gl=z,this.pixelRatio=1,this.shader=B,this.orthoShader=H,this.projectShader=V,this.pointBuffer=Z,this.colorBuffer=q,this.glyphBuffer=J,this.idBuffer=ne,this.vao=ve,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=$,this.pickOrthoShader=j,this.pickProjectShader=ae,this.points=[],this._selectResult=new s(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var m=v.prototype;m.pickSlots=1,m.setPickBase=function(z){this.pickId=z},m.isTransparent=function(){if(this.hasAlpha)return!0;for(var z=0;z<3;++z)if(this.axesProject[z]&&this.projectHasAlpha)return!0;return!1},m.isOpaque=function(){if(!this.hasAlpha)return!0;for(var z=0;z<3;++z)if(this.axesProject[z]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],y=[0,0,0],x=[0,0,0],w=[0,0,0,1],g=[0,0,0,1],T=l.slice(),M=[0,0,0],P=[[0,0,0],[0,0,0]];function L(z){return z[0]=z[1]=z[2]=0,z}function I(z,B){return z[0]=B[0],z[1]=B[1],z[2]=B[2],z[3]=1,z}function C(z,B,H,V){return z[0]=B[0],z[1]=B[1],z[2]=B[2],z[H]=V,z}function k(z){for(var B=P,H=0;H<2;++H)for(var V=0;V<3;++V)B[H][V]=Math.max(Math.min(z[H][V],1e8),-1e8);return B}function E(z,B,H,V){var Z=B.axesProject,q=B.gl,J=z.uniforms,ne=H.model||l,ve=H.view||l,$=H.projection||l,j=B.axesBounds,ae=k(B.clipBounds),ie;B.axes&&B.axes.lastCubeProps?ie=B.axes.lastCubeProps.axis:ie=[1,1,1],b[0]=2/q.drawingBufferWidth,b[1]=2/q.drawingBufferHeight,z.bind(),J.view=ve,J.projection=$,J.screenSize=b,J.highlightId=B.highlightId,J.highlightScale=B.highlightScale,J.clipBounds=ae,J.pickGroup=B.pickId/255,J.pixelRatio=V;for(var te=0;te<3;++te)if(!!Z[te]){J.scale=B.projectScale[te],J.opacity=B.projectOpacity[te];for(var re=T,ce=0;ce<16;++ce)re[ce]=0;for(var ce=0;ce<4;++ce)re[5*ce]=1;re[5*te]=0,ie[te]<0?re[12+te]=j[0][te]:re[12+te]=j[1][te],t(re,ne,re),J.model=re;var pe=(te+1)%3,fe=(te+2)%3,se=L(y),de=L(x);se[pe]=1,de[fe]=1;var be=i($,ve,ne,I(w,se)),xe=i($,ve,ne,I(g,de));if(Math.abs(be[1])>Math.abs(xe[1])){var ke=be;be=xe,xe=ke,ke=se,se=de,de=ke;var Re=pe;pe=fe,fe=Re}be[0]<0&&(se[pe]=-1),xe[1]>0&&(de[fe]=-1);for(var Ke=0,ze=0,ce=0;ce<4;++ce)Ke+=Math.pow(ne[4*pe+ce],2),ze+=Math.pow(ne[4*fe+ce],2);se[pe]/=Math.sqrt(Ke),de[fe]/=Math.sqrt(ze),J.axes[0]=se,J.axes[1]=de,J.fragClipBounds[0]=C(M,ae[0],te,-1e8),J.fragClipBounds[1]=C(M,ae[1],te,1e8),B.vao.bind(),B.vao.draw(q.TRIANGLES,B.vertexCount),B.lineWidth>0&&(q.lineWidth(B.lineWidth*V),B.vao.draw(q.LINES,B.lineVertexCount,B.vertexCount)),B.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],N=[R,O];function G(z,B,H,V,Z,q,J){var ne=H.gl;if((q===H.projectHasAlpha||J)&&E(B,H,V,Z),q===H.hasAlpha||J){z.bind();var ve=z.uniforms;ve.model=V.model||l,ve.view=V.view||l,ve.projection=V.projection||l,b[0]=2/ne.drawingBufferWidth,b[1]=2/ne.drawingBufferHeight,ve.screenSize=b,ve.highlightId=H.highlightId,ve.highlightScale=H.highlightScale,ve.fragClipBounds=N,ve.clipBounds=H.axes.bounds,ve.opacity=H.opacity,ve.pickGroup=H.pickId/255,ve.pixelRatio=Z,H.vao.bind(),H.vao.draw(ne.TRIANGLES,H.vertexCount),H.lineWidth>0&&(ne.lineWidth(H.lineWidth*Z),H.vao.draw(ne.LINES,H.lineVertexCount,H.vertexCount)),H.vao.unbind()}}m.draw=function(z){var B=this.useOrtho?this.orthoShader:this.shader;G(B,this.projectShader,this,z,this.pixelRatio,!1,!1)},m.drawTransparent=function(z){var B=this.useOrtho?this.orthoShader:this.shader;G(B,this.projectShader,this,z,this.pixelRatio,!0,!1)},m.drawPick=function(z){var B=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(B,this.pickProjectShader,this,z,1,!0,!0)},m.pick=function(z){if(!z||z.id!==this.pickId)return null;var B=z.value[2]+(z.value[1]<<8)+(z.value[0]<<16);if(B>=this.pointCount||B<0)return null;var H=this.points[B],V=this._selectResult;V.index=B;for(var Z=0;Z<3;++Z)V.position[Z]=V.dataCoordinate[Z]=H[Z];return V},m.highlight=function(z){if(!z)this.highlightId=[1,1,1,1];else{var B=z.index,H=B&255,V=B>>8&255,Z=B>>16&255;this.highlightId=[H/255,V/255,Z/255,0]}};function U(z,B,H,V){var Z;Array.isArray(z)?B<z.length?Z=z[B]:Z=void 0:Z=z,Z=o(Z);var q=!0;r(Z)&&(Z="\u25BC",q=!1);var J=n(Z,H,V);return{mesh:J[0],lines:J[1],bounds:J[2],visible:q}}m.update=function(z){if(z=z||{},"perspective"in z&&(this.useOrtho=!z.perspective),"orthographic"in z&&(this.useOrtho=!!z.orthographic),"lineWidth"in z&&(this.lineWidth=z.lineWidth),"project"in z)if(Array.isArray(z.project))this.axesProject=z.project;else{var B=!!z.project;this.axesProject=[B,B,B]}if("projectScale"in z)if(Array.isArray(z.projectScale))this.projectScale=z.projectScale.slice();else{var H=+z.projectScale;this.projectScale=[H,H,H]}if(this.projectHasAlpha=!1,"projectOpacity"in z){if(Array.isArray(z.projectOpacity))this.projectOpacity=z.projectOpacity.slice();else{var H=+z.projectOpacity;this.projectOpacity=[H,H,H]}for(var V=0;V<3;++V)this.projectOpacity[V]=p(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in z&&(this.opacity=p(z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Z=z.position,q=z.font||"normal",J=z.alignment||[0,0],ne,ve;if(J.length===2)ne=J[0],ve=J[1];else{ne=[],ve=[];for(var V=0;V<J.length;++V)ne[V]=J[V][0],ve[V]=J[V][1]}var $=[1/0,1/0,1/0],j=[-1/0,-1/0,-1/0],ae=z.glyph,ie=z.color,te=z.size,re=z.angle,ce=z.lineColor,pe=-1,fe=0,se=0,de=0;if(Z.length){de=Z.length;e:for(var V=0;V<de;++V){for(var be=Z[V],xe=0;xe<3;++xe)if(isNaN(be[xe])||!isFinite(be[xe]))continue e;var ke=U(ae,V,q,this.pixelRatio),Re=ke.mesh,Ke=ke.lines,ze=ke.bounds;fe+=Re.cells.length*3,se+=Ke.edges.length*2}}var Je=fe+se,qe=c.mallocFloat(3*Je),Ee=c.mallocFloat(4*Je),Ae=c.mallocFloat(2*Je),Be=c.mallocUint32(Je);if(Je>0){var $e=0,xt=fe,bt=[0,0,0,1],Ne=[0,0,0,1],st=Array.isArray(ie)&&Array.isArray(ie[0]),_t=Array.isArray(ce)&&Array.isArray(ce[0]);e:for(var V=0;V<de;++V){pe+=1;for(var be=Z[V],xe=0;xe<3;++xe){if(isNaN(be[xe])||!isFinite(be[xe]))continue e;j[xe]=Math.max(j[xe],be[xe]),$[xe]=Math.min($[xe],be[xe])}var ke=U(ae,V,q,this.pixelRatio),Re=ke.mesh,Ke=ke.lines,ze=ke.bounds,Ot=ke.visible;if(!Ot)bt=[1,1,1,0];else if(Array.isArray(ie)){var Wt;if(st?V<ie.length?Wt=ie[V]:Wt=[0,0,0,0]:Wt=ie,Wt.length===3){for(var xe=0;xe<3;++xe)bt[xe]=Wt[xe];bt[3]=1}else if(Wt.length===4){for(var xe=0;xe<4;++xe)bt[xe]=Wt[xe];!this.hasAlpha&&Wt[3]<1&&(this.hasAlpha=!0)}}else bt[0]=bt[1]=bt[2]=0,bt[3]=1;if(!Ot)Ne=[1,1,1,0];else if(Array.isArray(ce)){var Wt;if(_t?V<ce.length?Wt=ce[V]:Wt=[0,0,0,0]:Wt=ce,Wt.length===3){for(var xe=0;xe<3;++xe)Ne[xe]=Wt[xe];Ne[xe]=1}else if(Wt.length===4){for(var xe=0;xe<4;++xe)Ne[xe]=Wt[xe];!this.hasAlpha&&Wt[3]<1&&(this.hasAlpha=!0)}}else Ne[0]=Ne[1]=Ne[2]=0,Ne[3]=1;var Et=.5;Ot?Array.isArray(te)?V<te.length?Et=+te[V]:Et=12:te?Et=+te:this.useOrtho&&(Et=12):Et=0;var jt=0;Array.isArray(re)?V<re.length?jt=+re[V]:jt=0:re&&(jt=+re);for(var Zt=Math.cos(jt),Mt=Math.sin(jt),be=Z[V],xe=0;xe<3;++xe)j[xe]=Math.max(j[xe],be[xe]),$[xe]=Math.min($[xe],be[xe]);var At=ne,ft=ve,At=0;Array.isArray(ne)?V<ne.length?At=ne[V]:At=0:ne&&(At=ne);var ft=0;Array.isArray(ve)?V<ve.length?ft=ve[V]:ft=0:ve&&(ft=ve),At*=At>0?1-ze[0][0]:At<0?1+ze[1][0]:1,ft*=ft>0?1-ze[0][1]:ft<0?1+ze[1][1]:1;for(var ot=[At,ft],Me=Re.cells||[],Ie=Re.positions||[],xe=0;xe<Me.length;++xe)for(var Te=Me[xe],Le=0;Le<3;++Le){for(var Ve=0;Ve<3;++Ve)qe[3*$e+Ve]=be[Ve];for(var Ve=0;Ve<4;++Ve)Ee[4*$e+Ve]=bt[Ve];Be[$e]=pe;var Qe=Ie[Te[Le]];Ae[2*$e]=Et*(Zt*Qe[0]-Mt*Qe[1]+ot[0]),Ae[2*$e+1]=Et*(Mt*Qe[0]+Zt*Qe[1]+ot[1]),$e+=1}for(var Me=Ke.edges,Ie=Ke.positions,xe=0;xe<Me.length;++xe)for(var Te=Me[xe],Le=0;Le<2;++Le){for(var Ve=0;Ve<3;++Ve)qe[3*xt+Ve]=be[Ve];for(var Ve=0;Ve<4;++Ve)Ee[4*xt+Ve]=Ne[Ve];Be[xt]=pe;var Qe=Ie[Te[Le]];Ae[2*xt]=Et*(Zt*Qe[0]-Mt*Qe[1]+ot[0]),Ae[2*xt+1]=Et*(Mt*Qe[0]+Zt*Qe[1]+ot[1]),xt+=1}}}this.bounds=[$,j],this.points=Z,this.pointCount=Z.length,this.vertexCount=fe,this.lineVertexCount=se,this.pointBuffer.update(qe),this.colorBuffer.update(Ee),this.glyphBuffer.update(Ae),this.idBuffer.update(Be),c.free(qe),c.free(Ee),c.free(Ae),c.free(Be)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function Y(z){var B=z.gl,H=f.createPerspective(B),V=f.createOrtho(B),Z=f.createProject(B),q=f.createPickPerspective(B),J=f.createPickOrtho(B),ne=f.createPickProject(B),ve=a(B),$=a(B),j=a(B),ae=a(B),ie=u(B,[{buffer:ve,size:3,type:B.FLOAT},{buffer:$,size:4,type:B.FLOAT},{buffer:j,size:2,type:B.FLOAT},{buffer:ae,size:4,type:B.UNSIGNED_BYTE,normalized:!0}]),te=new v(B,H,V,Z,ve,$,j,ae,ie,q,J,ne);return te.update(z),te}},{"./lib/get-simple-string":326,"./lib/glyphs":327,"./lib/shaders":328,"gl-buffer":259,"gl-mat4/multiply":295,"gl-vao":358,"is-string-blank":470,"typedarray-pool":595}],331:[function(e,d,S){var r=e("glslify");S.boxVertex=r([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),S.boxFragment=r([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:332}],332:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],333:[function(e,d,S){var r=e("gl-shader"),a=e("gl-buffer"),u=e("./lib/shaders");d.exports=f;function c(n,o,l){this.plot=n,this.boxBuffer=o,this.boxShader=l,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var t=c.prototype;t.draw=function(){if(!!this.enabled){var n=this.plot,o=this.selectBox,l=this.borderWidth;this.innerFill;var h=this.innerColor;this.outerFill;var i=this.outerColor,s=this.borderColor,p=n.box,v=n.screenBox,m=n.dataBox,b=n.viewBox,y=n.pixelRatio,x=(o[0]-m[0])*(b[2]-b[0])/(m[2]-m[0])+b[0],w=(o[1]-m[1])*(b[3]-b[1])/(m[3]-m[1])+b[1],g=(o[2]-m[0])*(b[2]-b[0])/(m[2]-m[0])+b[0],T=(o[3]-m[1])*(b[3]-b[1])/(m[3]-m[1])+b[1];if(x=Math.max(x,b[0]),w=Math.max(w,b[1]),g=Math.min(g,b[2]),T=Math.min(T,b[3]),!(g<x||T<w)){p.bind();var M=v[2]-v[0],P=v[3]-v[1];if(this.outerFill&&(p.drawBox(0,0,M,w,i),p.drawBox(0,w,x,T,i),p.drawBox(0,T,M,P,i),p.drawBox(g,w,M,T,i)),this.innerFill&&p.drawBox(x,w,g,T,h),l>0){var L=l*y;p.drawBox(x-L,w-L,g+L,w+L,s),p.drawBox(x-L,T-L,g+L,T+L,s),p.drawBox(x-L,w-L,x+L,T+L,s),p.drawBox(g-L,w-L,g+L,T+L,s)}}}},t.update=function(n){n=n||{},this.innerFill=!!n.innerFill,this.outerFill=!!n.outerFill,this.innerColor=(n.innerColor||[0,0,0,.5]).slice(),this.outerColor=(n.outerColor||[0,0,0,.5]).slice(),this.borderColor=(n.borderColor||[0,0,0,1]).slice(),this.borderWidth=n.borderWidth||0,this.selectBox=(n.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(n,o){var l=n.gl,h=a(l,[0,0,0,1,1,0,1,1]),i=r(l,u.boxVertex,u.boxFragment),s=new c(n,h,i);return s.update(o),n.addOverlay(s),s}},{"./lib/shaders":331,"gl-buffer":259,"gl-shader":335}],334:[function(e,d,S){d.exports=l;var r=e("gl-fbo"),a=e("typedarray-pool"),u=e("ndarray"),c=e("bit-twiddle").nextPow2,t=function(h,i,s){for(var p=1e8,v=-1,m=-1,b=h.shape[0],y=h.shape[1],x=0;x<b;x++)for(var w=0;w<y;w++){var g=h.get(x,w,0),T=h.get(x,w,1),M=h.get(x,w,2),P=h.get(x,w,3);if(g<255||T<255||M<255||P<255){var L=i-x,I=s-w,C=L*L+I*I;C<p&&(p=C,v=x,m=w)}}return[v,m,p]};function f(h,i,s,p,v){this.coord=[h,i],this.id=s,this.value=p,this.distance=v}function n(h,i,s){this.gl=h,this.fbo=i,this.buffer=s,this._readTimeout=null;var p=this;this._readCallback=function(){!p.gl||(i.bind(),h.readPixels(0,0,i.shape[0],i.shape[1],h.RGBA,h.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var o=n.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(!!this.gl){this.fbo.shape=h;var i=this.fbo.shape[0],s=this.fbo.shape[1];if(s*i*4>this.buffer.length){a.free(this.buffer);for(var p=this.buffer=a.mallocUint8(c(s*i*4)),v=0;v<s*i*4;++v)p[v]=255}return h}}}),o.begin=function(){var h=this.gl;this.shape,h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))},o.end=function(){var h=this.gl;!h||(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(h,i,s){if(!this.gl)return null;var p=this.fbo.shape.slice();h=h|0,i=i|0,typeof s!="number"&&(s=1);var v=Math.min(Math.max(h-s,0),p[0])|0,m=Math.min(Math.max(h+s,0),p[0])|0,b=Math.min(Math.max(i-s,0),p[1])|0,y=Math.min(Math.max(i+s,0),p[1])|0;if(m<=v||y<=b)return null;var x=[m-v,y-b],w=u(this.buffer,[x[0],x[1],4],[4,p[0]*4,1],4*(v+p[0]*b)),g=t(w.hi(x[0],x[1],1),s,s),T=g[0],M=g[1];if(T<0||Math.pow(this.radius,2)<g[2])return null;var P=w.get(T,M,0),L=w.get(T,M,1),I=w.get(T,M,2),C=w.get(T,M,3);return new f(T+v|0,M+b|0,P,[L,I,C],Math.sqrt(g[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function l(h,i){var s=i[0],p=i[1],v={},m=r(h,s,p,v),b=a.mallocUint8(s*p*4);return new n(h,m,b)}},{"bit-twiddle":97,"gl-fbo":269,ndarray:495,"typedarray-pool":595}],335:[function(e,d,S){var r=e("./lib/create-uniforms"),a=e("./lib/create-attributes"),u=e("./lib/reflect"),c=e("./lib/shader-cache"),t=e("./lib/runtime-reflect"),f=e("./lib/GLError");function n(i){this.gl=i,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=n.prototype;o.bind=function(){this.program||this._relink();var i,s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),p=this.gl.lastAttribCount;if(s>p)for(i=p;i<s;i++)this.gl.enableVertexAttribArray(i);else if(p>s)for(i=s;i<p;i++)this.gl.disableVertexAttribArray(i);this.gl.lastAttribCount=s,this.gl.useProgram(this.program)},o.dispose=function(){for(var i=this.gl.lastAttribCount,s=0;s<i;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function l(i,s){return i.name<s.name?-1:1}o.update=function(i,s,p,v){if(!s||arguments.length===1){var m=i;i=m.vertex,s=m.fragment,p=m.uniforms,v=m.attributes}var b=this,y=b.gl,x=b._vref;b._vref=c.shader(y,y.VERTEX_SHADER,i),x&&x.dispose(),b.vertShader=b._vref.shader;var w=this._fref;if(b._fref=c.shader(y,y.FRAGMENT_SHADER,s),w&&w.dispose(),b.fragShader=b._fref.shader,!p||!v){var g=y.createProgram();if(y.attachShader(g,b.fragShader),y.attachShader(g,b.vertShader),y.linkProgram(g),!y.getProgramParameter(g,y.LINK_STATUS)){var T=y.getProgramInfoLog(g);throw new f(T,"Error linking program:"+T)}p=p||t.uniforms(y,g),v=v||t.attributes(y,g),y.deleteProgram(g)}v=v.slice(),v.sort(l);var M=[],P=[],L=[],I;for(I=0;I<v.length;++I){var C=v[I];if(C.type.indexOf("mat")>=0){for(var k=C.type.charAt(C.type.length-1)|0,E=new Array(k),R=0;R<k;++R)E[R]=L.length,P.push(C.name+"["+R+"]"),typeof C.location=="number"?L.push(C.location+R):Array.isArray(C.location)&&C.location.length===k&&typeof C.location[R]=="number"?L.push(C.location[R]|0):L.push(-1);M.push({name:C.name,type:C.type,locations:E})}else M.push({name:C.name,type:C.type,locations:[L.length]}),P.push(C.name),typeof C.location=="number"?L.push(C.location|0):L.push(-1)}var O=0;for(I=0;I<L.length;++I)if(L[I]<0){for(;L.indexOf(O)>=0;)O+=1;L[I]=O}var N=new Array(p.length);function G(){b.program=c.program(y,b._vref,b._fref,P,L);for(var U=0;U<p.length;++U)N[U]=y.getUniformLocation(b.program,p[U].name)}G(),b._relink=G,b.types={uniforms:u(p),attributes:u(v)},b.attributes=a(y,b,M,L),Object.defineProperty(b,"uniforms",r(y,b,p,N))};function h(i,s,p,v,m){var b=new n(i);return b.update(s,p,v,m),b}d.exports=h},{"./lib/GLError":336,"./lib/create-attributes":337,"./lib/create-uniforms":338,"./lib/reflect":339,"./lib/runtime-reflect":340,"./lib/shader-cache":341}],336:[function(e,d,S){function r(a,u,c){this.shortMessage=u||"",this.longMessage=c||"",this.rawError=a||"",this.message="gl-shader: "+(u||a||"")+(c?`
`+c:""),this.stack=new Error().stack}r.prototype=new Error,r.prototype.name="GLError",r.prototype.constructor=r,d.exports=r},{}],337:[function(e,d,S){d.exports=f;var r=e("./GLError");function a(n,o,l,h,i,s){this._gl=n,this._wrapper=o,this._index=l,this._locations=h,this._dimension=i,this._constFunc=s}var u=a.prototype;u.pointer=function(o,l,h,i){var s=this,p=s._gl,v=s._locations[s._index];p.vertexAttribPointer(v,s._dimension,o||p.FLOAT,!!l,h||0,i||0),p.enableVertexAttribArray(v)},u.set=function(n,o,l,h){return this._constFunc(this._locations[this._index],n,o,l,h)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(n){return n!==this._locations[this._index]&&(this._locations[this._index]=n|0,this._wrapper.program=null),n|0}});function c(n,o,l,h,i,s,p){for(var v=["gl","v"],m=[],b=0;b<i;++b)v.push("x"+b),m.push("x"+b);v.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+m.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var y=Function.apply(null,v),x=new a(n,o,l,h,i,y);Object.defineProperty(s,p,{set:function(w){return n.disableVertexAttribArray(h[l]),y(n,h[l],w),w},get:function(){return x},enumerable:!0})}function t(n,o,l,h,i,s,p){for(var v=new Array(i),m=new Array(i),b=0;b<i;++b)c(n,o,l[b],h,i,v,b),m[b]=v[b];Object.defineProperty(v,"location",{set:function(w){if(Array.isArray(w))for(var g=0;g<i;++g)m[g].location=w[g];else for(var g=0;g<i;++g)m[g].location=w+g;return w},get:function(){for(var w=new Array(i),g=0;g<i;++g)w[g]=h[l[g]];return w},enumerable:!0}),v.pointer=function(w,g,T,M){w=w||n.FLOAT,g=!!g,T=T||i*i,M=M||0;for(var P=0;P<i;++P){var L=h[l[P]];n.vertexAttribPointer(L,i,w,g,T,M+P*i),n.enableVertexAttribArray(L)}};var y=new Array(i),x=n["vertexAttrib"+i+"fv"];Object.defineProperty(s,p,{set:function(w){for(var g=0;g<i;++g){var T=h[l[g]];if(n.disableVertexAttribArray(T),Array.isArray(w[0]))x.call(n,T,w[g]);else{for(var M=0;M<i;++M)y[M]=w[i*g+M];x.call(n,T,y)}}return w},get:function(){return v},enumerable:!0})}function f(n,o,l,h){for(var i={},s=0,p=l.length;s<p;++s){var v=l[s],m=v.name,b=v.type,y=v.locations;switch(b){case"bool":case"int":case"float":c(n,o,y[0],h,1,i,m);break;default:if(b.indexOf("vec")>=0){var x=b.charCodeAt(b.length-1)-48;if(x<2||x>4)throw new r("","Invalid data type for attribute "+m+": "+b);c(n,o,y[0],h,x,i,m)}else if(b.indexOf("mat")>=0){var x=b.charCodeAt(b.length-1)-48;if(x<2||x>4)throw new r("","Invalid data type for attribute "+m+": "+b);t(n,o,y,h,x,i,m)}else throw new r("","Unknown data type for attribute "+m+": "+b);break}}return i}},{"./GLError":336}],338:[function(e,d,S){var r=e("./reflect"),a=e("./GLError");d.exports=t;function u(f){var n=new Function("y","return function(){return y}");return n(f)}function c(f,n){for(var o=new Array(f),l=0;l<f;++l)o[l]=n;return o}function t(f,n,o,l){function h(x){var w=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+x+"])}");return w(f,n,l)}function i(x,w,g){switch(g){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+w+"],obj"+x+")";case"float":return"gl.uniform1f(locations["+w+"],obj"+x+")";default:var T=g.indexOf("vec");if(0<=T&&T<=1&&g.length===4+T){var M=g.charCodeAt(g.length-1)-48;if(M<2||M>4)throw new a("","Invalid data type");switch(g.charAt(0)){case"b":case"i":return"gl.uniform"+M+"iv(locations["+w+"],obj"+x+")";case"v":return"gl.uniform"+M+"fv(locations["+w+"],obj"+x+")";default:throw new a("","Unrecognized data type for vector "+name+": "+g)}}else if(g.indexOf("mat")===0&&g.length===4){var M=g.charCodeAt(g.length-1)-48;if(M<2||M>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+g);return"gl.uniformMatrix"+M+"fv(locations["+w+"],false,obj"+x+")"}else throw new a("","Unknown uniform data type for "+name+": "+g);break}}function s(x,w){if(typeof w!="object")return[[x,w]];var g=[];for(var T in w){var M=w[T],P=x;parseInt(T)+""===T?P+="["+T+"]":P+="."+T,typeof M=="object"?g.push.apply(g,s(P,M)):g.push([P,M])}return g}function p(x){for(var w=["return function updateProperty(obj){"],g=s("",x),T=0;T<g.length;++T){var M=g[T],P=M[0],L=M[1];l[L]&&w.push(i(P,L,o[L].type))}w.push("return obj}");var I=new Function("gl","locations",w.join(`
`));return I(f,l)}function v(x){switch(x){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=x.indexOf("vec");if(0<=w&&w<=1&&x.length===4+w){var g=x.charCodeAt(x.length-1)-48;if(g<2||g>4)throw new a("","Invalid data type");return x.charAt(0)==="b"?c(g,!1):c(g,0)}else if(x.indexOf("mat")===0&&x.length===4){var g=x.charCodeAt(x.length-1)-48;if(g<2||g>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+x);return c(g*g,0)}else throw new a("","Unknown uniform data type for "+name+": "+x)}}function m(x,w,g){if(typeof g=="object"){var T=b(g);Object.defineProperty(x,w,{get:u(T),set:p(g),enumerable:!0,configurable:!1})}else l[g]?Object.defineProperty(x,w,{get:h(g),set:p(g),enumerable:!0,configurable:!1}):x[w]=v(o[g].type)}function b(x){var w;if(Array.isArray(x)){w=new Array(x.length);for(var g=0;g<x.length;++g)m(w,g,x[g])}else{w={};for(var T in x)m(w,T,x[T])}return w}var y=r(o,!0);return{get:u(b(y)),set:p(y),enumerable:!0,configurable:!0}}},{"./GLError":336,"./reflect":339}],339:[function(e,d,S){d.exports=r;function r(a,u){for(var c={},t=0;t<a.length;++t)for(var f=a[t].name,n=f.split("."),o=c,l=0;l<n.length;++l){var h=n[l].split("[");if(h.length>1){h[0]in o||(o[h[0]]=[]),o=o[h[0]];for(var i=1;i<h.length;++i){var s=parseInt(h[i]);i<h.length-1||l<n.length-1?(s in o||(i<h.length-1?o[s]=[]:o[s]={}),o=o[s]):u?o[s]=t:o[s]=a[t].type}}else l<n.length-1?(h[0]in o||(o[h[0]]={}),o=o[h[0]]):u?o[h[0]]=t:o[h[0]]=a[t].type}return c}},{}],340:[function(e,d,S){S.uniforms=c,S.attributes=t;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function u(f,n){if(!a){var o=Object.keys(r);a={};for(var l=0;l<o.length;++l){var h=o[l];a[f[h]]=r[h]}}return a[n]}function c(f,n){for(var o=f.getProgramParameter(n,f.ACTIVE_UNIFORMS),l=[],h=0;h<o;++h){var i=f.getActiveUniform(n,h);if(i){var s=u(f,i.type);if(i.size>1)for(var p=0;p<i.size;++p)l.push({name:i.name.replace("[0]","["+p+"]"),type:s});else l.push({name:i.name,type:s})}}return l}function t(f,n){for(var o=f.getProgramParameter(n,f.ACTIVE_ATTRIBUTES),l=[],h=0;h<o;++h){var i=f.getActiveAttrib(n,h);i&&l.push({name:i.name,type:u(f,i.type)})}return l}},{}],341:[function(e,d,S){S.shader=s,S.program=p;var r=e("./GLError"),a=e("gl-format-compiler-error"),u=typeof WeakMap>"u"?e("weakmap-shim"):WeakMap,c=new u,t=0;function f(v,m,b,y,x,w,g){this.id=v,this.src=m,this.type=b,this.shader=y,this.count=w,this.programs=[],this.cache=g}f.prototype.dispose=function(){if(--this.count===0){for(var v=this.cache,m=v.gl,b=this.programs,y=0,x=b.length;y<x;++y){var w=v.programs[b[y]];w&&(delete v.programs[y],m.deleteProgram(w))}m.deleteShader(this.shader),delete v.shaders[this.type===m.FRAGMENT_SHADER|0][this.src]}};function n(v){this.gl=v,this.shaders=[{},{}],this.programs={}}var o=n.prototype;function l(v,m,b){var y=v.createShader(m);if(v.shaderSource(y,b),v.compileShader(y),!v.getShaderParameter(y,v.COMPILE_STATUS)){var x=v.getShaderInfoLog(y);try{var w=a(x,b,m)}catch(g){throw console.warn("Failed to format compiler error: "+g),new r(x,`Error compiling shader:
`+x)}throw new r(x,w.short,w.long)}return y}o.getShaderReference=function(v,m){var b=this.gl,y=this.shaders[v===b.FRAGMENT_SHADER|0],x=y[m];if(!x||!b.isShader(x.shader)){var w=l(b,v,m);x=y[m]=new f(t++,m,v,w,[],1,this)}else x.count+=1;return x};function h(v,m,b,y,x){var w=v.createProgram();v.attachShader(w,m),v.attachShader(w,b);for(var g=0;g<y.length;++g)v.bindAttribLocation(w,x[g],y[g]);if(v.linkProgram(w),!v.getProgramParameter(w,v.LINK_STATUS)){var T=v.getProgramInfoLog(w);throw new r(T,"Error linking program: "+T)}return w}o.getProgram=function(v,m,b,y){var x=[v.id,m.id,b.join(":"),y.join(":")].join("@"),w=this.programs[x];return(!w||!this.gl.isProgram(w))&&(this.programs[x]=w=h(this.gl,v.shader,m.shader,b,y),v.programs.push(x),m.programs.push(x)),w};function i(v){var m=c.get(v);return m||(m=new n(v),c.set(v,m)),m}function s(v,m,b){return i(v).getShaderReference(m,b)}function p(v,m,b,y,x){return i(v).getProgram(m,b,y,x)}},{"./GLError":336,"gl-format-compiler-error":270,"weakmap-shim":605}],342:[function(e,d,S){d.exports=u;function r(c){this.plot=c,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=r.prototype;a.update=function(c){c=c||{},this.enable=(c.enable||[!0,!0,!1,!1]).slice(),this.width=(c.width||[1,1,1,1]).slice(),this.color=(c.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(c.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var c=this.enable,t=this.width,f=this.color,n=this.center,o=this.plot,l=o.line,h=o.dataBox,i=o.viewBox;if(l.bind(),h[0]<=n[0]&&n[0]<=h[2]&&h[1]<=n[1]&&n[1]<=h[3]){var s=i[0]+(n[0]-h[0])/(h[2]-h[0])*(i[2]-i[0]),p=i[1]+(n[1]-h[1])/(h[3]-h[1])*(i[3]-i[1]);c[0]&&l.drawLine(s,p,i[0],p,t[0],f[0]),c[1]&&l.drawLine(s,p,s,i[1],t[1],f[1]),c[2]&&l.drawLine(s,p,i[2],p,t[2],f[2]),c[3]&&l.drawLine(s,p,s,i[3],t[3],f[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function u(c,t){var f=new r(c);return f.update(t),c.addOverlay(f),f}},{}],343:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],344:[function(e,d,S){var r=e("glslify"),a=e("gl-shader"),u=r([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),c=r([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);d.exports=function(t){return a(t,u,c,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":335,glslify:343}],345:[function(e,d,S){var r=e("gl-buffer"),a=e("gl-vao"),u=e("./shaders/index");d.exports=h;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(i,s,p,v){this.gl=i,this.buffer=s,this.vao=p,this.shader=v,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=t.prototype,n=[0,0,0],o=[0,0,0],l=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(i){},f.draw=function(i){var s=this.gl,p=this.vao,v=this.shader;p.bind(),v.bind();var m=i.model||c,b=i.view||c,y=i.projection||c,x;this.axes&&(x=this.axes.lastCubeProps.axis);for(var w=n,g=o,T=0;T<3;++T)x&&x[T]<0?(w[T]=this.bounds[0][T],g[T]=this.bounds[1][T]):(w[T]=this.bounds[1][T],g[T]=this.bounds[0][T]);l[0]=s.drawingBufferWidth,l[1]=s.drawingBufferHeight,v.uniforms.model=m,v.uniforms.view=b,v.uniforms.projection=y,v.uniforms.coordinates=[this.position,w,g],v.uniforms.colors=this.colors,v.uniforms.screenShape=l;for(var T=0;T<3;++T)v.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(p.draw(s.TRIANGLES,6,6*T),this.drawSides[T]&&p.draw(s.TRIANGLES,12,18+12*T));p.unbind()},f.update=function(i){!i||("bounds"in i&&(this.bounds=i.bounds),"position"in i&&(this.position=i.position),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"colors"in i&&(this.colors=i.colors),"enabled"in i&&(this.enabled=i.enabled),"drawSides"in i&&(this.drawSides=i.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(i,s){var p=[];function v(w,g,T,M,P,L){var I=[w,g,T,0,0,0,1];I[M+3]=1,I[M]=P,p.push.apply(p,I),I[6]=-1,p.push.apply(p,I),I[M]=L,p.push.apply(p,I),p.push.apply(p,I),I[6]=1,p.push.apply(p,I),I[M]=P,p.push.apply(p,I)}v(0,0,0,0,0,1),v(0,0,0,1,0,1),v(0,0,0,2,0,1),v(1,0,0,1,-1,1),v(1,0,0,2,-1,1),v(0,1,0,0,-1,1),v(0,1,0,2,-1,1),v(0,0,1,0,-1,1),v(0,0,1,1,-1,1);var m=r(i,p),b=a(i,[{type:i.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:i.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:i.FLOAT,buffer:m,size:1,offset:24,stride:28}]),y=u(i);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.weight.location=2;var x=new t(i,m,b,y);return x.update(s),x}},{"./shaders/index":344,"gl-buffer":259,"gl-vao":358}],346:[function(e,d,S){var r=e("glslify"),a=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=r([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),c=r([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);S.meshShader={vertex:a,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},S.pickShader={vertex:c,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:347}],347:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],348:[function(e,d,S){var r=e("gl-vec3"),a=e("gl-vec4"),u=["xyz","xzy","yxz","yzx","zxy","zyx"],c=function(p,v,m,b){for(var y=p.points,x=p.velocities,w=p.divergences,g=[],T=[],M=[],P=[],L=[],I=[],C=0,k=0,E=a.create(),R=a.create(),O=8,N=0;N<y.length;N++){var G=y[N],U=x[N],Y=w[N];v===0&&(Y=m*.05),k=r.length(U)/b,E=a.create(),r.copy(E,U),E[3]=Y;for(var z=0;z<O;z++)L[z]=[G[0],G[1],G[2],z];if(P.length>0)for(var z=0;z<O;z++){var B=(z+1)%O;g.push(P[z],L[z],L[B],L[B],P[B],P[z]),M.push(R,E,E,E,R,R),I.push(C,k,k,k,C,C);var H=g.length;T.push([H-6,H-5,H-4],[H-3,H-2,H-1])}var V=P;P=L,L=V;var Z=R;R=E,E=Z;var q=C;C=k,k=q}return{positions:g,cells:T,vectors:M,vertexIntensity:I}},t=function(p,v,m,b){for(var y=0,x=0;x<p.length;x++)for(var w=p[x].velocities,g=0;g<w.length;g++)y=Math.max(y,r.length(w[g]));for(var T=p.map(function(N){return c(N,m,b,y)}),M=[],P=[],L=[],I=[],x=0;x<T.length;x++){var C=T[x],k=M.length;M=M.concat(C.positions),L=L.concat(C.vectors),I=I.concat(C.vertexIntensity);for(var g=0;g<C.cells.length;g++){var E=C.cells[g],R=[];P.push(R);for(var O=0;O<E.length;O++)R.push(E[O]+k)}}return{positions:M,cells:P,vectors:L,vertexIntensity:I,colormap:v}},f=function(p,v){var m=p.length,b;for(b=0;b<m;b++){var y=p[b];if(y===v)return b;if(y>v)return b-1}return b},n=function(p,v,m){return p<v?v:p>m?m:p},o=function(p,v,m){var b=v.vectors,y=v.meshgrid,x=p[0],w=p[1],g=p[2],T=y[0].length,M=y[1].length,P=y[2].length,L=f(y[0],x),I=f(y[1],w),C=f(y[2],g),k=L+1,E=I+1,R=C+1;if(L=n(L,0,T-1),k=n(k,0,T-1),I=n(I,0,M-1),E=n(E,0,M-1),C=n(C,0,P-1),R=n(R,0,P-1),L<0||I<0||C<0||k>T-1||E>M-1||R>P-1)return r.create();var O=y[0][L],N=y[0][k],G=y[1][I],U=y[1][E],Y=y[2][C],z=y[2][R],B=(x-O)/(N-O),H=(w-G)/(U-G),V=(g-Y)/(z-Y);isFinite(B)||(B=.5),isFinite(H)||(H=.5),isFinite(V)||(V=.5);var Z,q,J,ne,ve,$;switch(m.reversedX&&(L=T-1-L,k=T-1-k),m.reversedY&&(I=M-1-I,E=M-1-E),m.reversedZ&&(C=P-1-C,R=P-1-R),m.filled){case 5:ve=C,$=R,J=I*P,ne=E*P,Z=L*P*M,q=k*P*M;break;case 4:ve=C,$=R,Z=L*P,q=k*P,J=I*P*T,ne=E*P*T;break;case 3:J=I,ne=E,ve=C*M,$=R*M,Z=L*M*P,q=k*M*P;break;case 2:J=I,ne=E,Z=L*M,q=k*M,ve=C*M*T,$=R*M*T;break;case 1:Z=L,q=k,ve=C*T,$=R*T,J=I*T*P,ne=E*T*P;break;default:Z=L,q=k,J=I*T,ne=E*T,ve=C*T*M,$=R*T*M;break}var j=b[Z+J+ve],ae=b[Z+J+$],ie=b[Z+ne+ve],te=b[Z+ne+$],re=b[q+J+ve],ce=b[q+J+$],pe=b[q+ne+ve],fe=b[q+ne+$],se=r.create(),de=r.create(),be=r.create(),xe=r.create();r.lerp(se,j,re,B),r.lerp(de,ae,ce,B),r.lerp(be,ie,pe,B),r.lerp(xe,te,fe,B);var ke=r.create(),Re=r.create();r.lerp(ke,se,be,H),r.lerp(Re,de,xe,H);var Ke=r.create();return r.lerp(Ke,ke,Re,V),Ke},l=function(p){var v=1/0;p.sort(function(x,w){return x-w});for(var m=p.length,b=1;b<m;b++){var y=Math.abs(p[b]-p[b-1]);y<v&&(v=y)}return v},h=function(p){for(var v=[],m=[],b=[],y={},x={},w={},g=p.length,T=0;T<g;T++){var M=p[T],P=M[0],L=M[1],I=M[2];y[P]||(v.push(P),y[P]=!0),x[L]||(m.push(L),x[L]=!0),w[I]||(b.push(I),w[I]=!0)}var C=l(v),k=l(m),E=l(b),R=Math.min(C,k,E);return isFinite(R)?R:1};d.exports=function(p,v){var m=p.startingPositions,b=p.maxLength||1e3,y=p.tubeSize||1,x=p.absoluteTubeSize,w=p.gridFill||"+x+y+z",g={};w.indexOf("-x")!==-1&&(g.reversedX=!0),w.indexOf("-y")!==-1&&(g.reversedY=!0),w.indexOf("-z")!==-1&&(g.reversedZ=!0),g.filled=u.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var T=p.getVelocity||function(ce){return o(ce,p,g)},M=p.getDivergence||function(ce,pe){var fe=r.create(),se=1e-4;r.add(fe,ce,[se,0,0]);var de=T(fe);r.subtract(de,de,pe),r.scale(de,de,1/se),r.add(fe,ce,[0,se,0]);var be=T(fe);r.subtract(be,be,pe),r.scale(be,be,1/se),r.add(fe,ce,[0,0,se]);var xe=T(fe);return r.subtract(xe,xe,pe),r.scale(xe,xe,1/se),r.add(fe,de,be),r.add(fe,fe,xe),fe},P=[],L=v[0][0],I=v[0][1],C=v[0][2],k=v[1][0],E=v[1][1],R=v[1][2],O=function(ce){var pe=ce[0],fe=ce[1],se=ce[2];return!(pe<L||pe>k||fe<I||fe>E||se<C||se>R)},N=r.distance(v[0],v[1]),G=10*N/b,U=G*G,Y=1,z=0,B=m.length;B>1&&(Y=h(m));for(var H=0;H<B;H++){var V=r.create();r.copy(V,m[H]);var Z=[V],q=[],J=T(V),ne=V;q.push(J);var ve=[],$=M(V,J),j=r.length($);isFinite(j)&&j>z&&(z=j),ve.push(j),P.push({points:Z,velocities:q,divergences:ve});for(var ae=0;ae<b*100&&Z.length<b&&O(V);){ae++;var ie=r.clone(J),te=r.squaredLength(ie);if(te===0)break;if(te>U&&r.scale(ie,ie,G/Math.sqrt(te)),r.add(ie,ie,V),J=T(ie),r.squaredDistance(ne,ie)-U>-1e-4*U){Z.push(ie),ne=ie,q.push(J);var $=M(ie,J),j=r.length($);isFinite(j)&&j>z&&(z=j),ve.push(j)}V=ie}}var re=t(P,p.colormap,z,Y);return x?re.tubeScale=x:(z===0&&(z=1),re.tubeScale=y*.5*Y/z),re};var i=e("./lib/shaders"),s=e("gl-cone3d").createMesh;d.exports.createTubeMesh=function(p,v){return s(p,v,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":346,"gl-cone3d":260,"gl-vec3":377,"gl-vec4":413}],349:[function(e,d,S){var r=e("gl-shader"),a=e("glslify"),u=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),c=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),t=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);S.createShader=function(n){var o=r(n,u,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},S.createPickShader=function(n){var o=r(n,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},S.createContourShader=function(n){var o=r(n,t,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},S.createPickContourShader=function(n){var o=r(n,t,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":335,glslify:350}],350:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],351:[function(e,d,S){d.exports=q;var r=e("bit-twiddle"),a=e("gl-buffer"),u=e("gl-vao"),c=e("gl-texture2d"),t=e("typedarray-pool"),f=e("colormap"),n=e("ndarray-ops"),o=e("ndarray-pack"),l=e("ndarray"),h=e("surface-nets"),i=e("gl-mat4/multiply"),s=e("gl-mat4/invert"),p=e("binary-search-bounds"),v=e("ndarray-gradient"),m=e("./lib/shaders"),b=m.createShader,y=m.createContourShader,x=m.createPickShader,w=m.createPickContourShader,g=4*(4+3+3),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var J=0;J<3;++J){var ne=P[J],ve=(J+1)%3,$=(J+2)%3;ne[ve+0]=1,ne[$+3]=1,ne[J+6]=1}})();function L(J,ne,ve,$,j){this.position=J,this.index=ne,this.uv=ve,this.level=$,this.dataCoordinate=j}var I=256;function C(J,ne,ve,$,j,ae,ie,te,re,ce,pe,fe,se,de,be){this.gl=J,this.shape=ne,this.bounds=ve,this.objectOffset=be,this.intensityBounds=[],this._shader=$,this._pickShader=j,this._coordinateBuffer=ae,this._vao=ie,this._colorMap=te,this._contourShader=re,this._contourPickShader=ce,this._contourBuffer=pe,this._contourVAO=fe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new L([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=se,this._dynamicVAO=de,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(t.mallocFloat(1024),[0,0]),l(t.mallocFloat(1024),[0,0]),l(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var k=C.prototype;k.genColormap=function(J,ne){var ve=!1,$=o([f({colormap:J,nshades:I,format:"rgba"}).map(function(j,ae){var ie=ne?E(ae/255,ne):j[3];return ie<1&&(ve=!0),[j[0],j[1],j[2],255*ie]})]);return n.divseq($,255),this.hasAlphaScale=ve,$},k.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},k.isOpaque=function(){return!this.isTransparent()},k.pickSlots=1,k.setPickBase=function(J){this.pickId=J};function E(J,ne){if(!ne||!ne.length)return 1;for(var ve=0;ve<ne.length;++ve){if(ne.length<2)return 1;if(ne[ve][0]===J)return ne[ve][1];if(ne[ve][0]>J&&ve>0){var $=(ne[ve][0]-J)/(ne[ve][0]-ne[ve-1][0]);return ne[ve][1]*(1-$)+$*ne[ve-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function N(J,ne){var ve,$,j,ae=ne.axes&&ne.axes.lastCubeProps.axis||R,ie=ne.showSurface,te=ne.showContour;for(ve=0;ve<3;++ve)for(ie=ie||ne.surfaceProject[ve],$=0;$<3;++$)te=te||ne.contourProject[ve][$];for(ve=0;ve<3;++ve){var re=O.projections[ve];for($=0;$<16;++$)re[$]=0;for($=0;$<4;++$)re[5*$]=1;re[5*ve]=0,re[12+ve]=ne.axesBounds[+(ae[ve]>0)][ve],i(re,J.model,re);var ce=O.clipBounds[ve];for(j=0;j<2;++j)for($=0;$<3;++$)ce[j][$]=J.clipBounds[j][$];ce[0][ve]=-1e8,ce[1][ve]=1e8}return O.showSurface=ie,O.showContour=te,O}var G={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=T.slice(),Y=[1,0,0,0,1,0,0,0,1];function z(J,ne){J=J||{};var ve=this.gl;ve.disable(ve.CULL_FACE),this._colorMap.bind(0);var $=G;$.model=J.model||T,$.view=J.view||T,$.projection=J.projection||T,$.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],$.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],$.objectOffset=this.objectOffset,$.contourColor=this.contourColor[0],$.inverseModel=s($.inverseModel,$.model);for(var j=0;j<2;++j)for(var ae=$.clipBounds[j],ie=0;ie<3;++ie)ae[ie]=Math.min(Math.max(this.clipBounds[j][ie],-1e8),1e8);$.kambient=this.ambientLight,$.kdiffuse=this.diffuseLight,$.kspecular=this.specularLight,$.roughness=this.roughness,$.fresnel=this.fresnel,$.opacity=this.opacity,$.height=0,$.permutation=Y,$.vertexColor=this.vertexColor;var te=U;for(i(te,$.view,$.model),i(te,$.projection,te),s(te,te),j=0;j<3;++j)$.eyePosition[j]=te[12+j]/te[15];var re=te[15];for(j=0;j<3;++j)re+=this.lightPosition[j]*te[4*j+3];for(j=0;j<3;++j){var ce=te[12+j];for(ie=0;ie<3;++ie)ce+=te[4*ie+j]*this.lightPosition[ie];$.lightPosition[j]=ce/re}var pe=N($,this);if(pe.showSurface){for(this._shader.bind(),this._shader.uniforms=$,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ve.TRIANGLES,this._vertexCount),j=0;j<3;++j)!this.surfaceProject[j]||!this.vertexCount||(this._shader.uniforms.model=pe.projections[j],this._shader.uniforms.clipBounds=pe.clipBounds[j],this._vao.draw(ve.TRIANGLES,this._vertexCount));this._vao.unbind()}if(pe.showContour){var fe=this._contourShader;$.kambient=1,$.kdiffuse=0,$.kspecular=0,$.opacity=1,fe.bind(),fe.uniforms=$;var se=this._contourVAO;for(se.bind(),j=0;j<3;++j)for(fe.uniforms.permutation=P[j],ve.lineWidth(this.contourWidth[j]*this.pixelRatio),ie=0;ie<this.contourLevels[j].length;++ie)ie===this.highlightLevel[j]?(fe.uniforms.contourColor=this.highlightColor[j],fe.uniforms.contourTint=this.highlightTint[j]):(ie===0||ie-1===this.highlightLevel[j])&&(fe.uniforms.contourColor=this.contourColor[j],fe.uniforms.contourTint=this.contourTint[j]),this._contourCounts[j][ie]&&(fe.uniforms.height=this.contourLevels[j][ie],se.draw(ve.LINES,this._contourCounts[j][ie],this._contourOffsets[j][ie]));for(j=0;j<3;++j)for(fe.uniforms.model=pe.projections[j],fe.uniforms.clipBounds=pe.clipBounds[j],ie=0;ie<3;++ie)if(!!this.contourProject[j][ie]){fe.uniforms.permutation=P[ie],ve.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var de=0;de<this.contourLevels[ie].length;++de)de===this.highlightLevel[ie]?(fe.uniforms.contourColor=this.highlightColor[ie],fe.uniforms.contourTint=this.highlightTint[ie]):(de===0||de-1===this.highlightLevel[ie])&&(fe.uniforms.contourColor=this.contourColor[ie],fe.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][de]&&(fe.uniforms.height=this.contourLevels[ie][de],se.draw(ve.LINES,this._contourCounts[ie][de],this._contourOffsets[ie][de]))}for(se.unbind(),se=this._dynamicVAO,se.bind(),j=0;j<3;++j)if(this._dynamicCounts[j]!==0)for(fe.uniforms.model=$.model,fe.uniforms.clipBounds=$.clipBounds,fe.uniforms.permutation=P[j],ve.lineWidth(this.dynamicWidth[j]*this.pixelRatio),fe.uniforms.contourColor=this.dynamicColor[j],fe.uniforms.contourTint=this.dynamicTint[j],fe.uniforms.height=this.dynamicLevel[j],se.draw(ve.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]),ie=0;ie<3;++ie)!this.contourProject[ie][j]||(fe.uniforms.model=pe.projections[ie],fe.uniforms.clipBounds=pe.clipBounds[ie],se.draw(ve.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]));se.unbind()}}k.draw=function(J){return z.call(this,J,!1)},k.drawTransparent=function(J){return z.call(this,J,!0)};var B={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};k.drawPick=function(J){J=J||{};var ne=this.gl;ne.disable(ne.CULL_FACE);var ve=B;ve.model=J.model||T,ve.view=J.view||T,ve.projection=J.projection||T,ve.shape=this._field[2].shape,ve.pickId=this.pickId/255,ve.lowerBound=this.bounds[0],ve.upperBound=this.bounds[1],ve.objectOffset=this.objectOffset,ve.permutation=Y;for(var $=0;$<2;++$)for(var j=ve.clipBounds[$],ae=0;ae<3;++ae)j[ae]=Math.min(Math.max(this.clipBounds[$][ae],-1e8),1e8);var ie=N(ve,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ve,this._vao.bind(),this._vao.draw(ne.TRIANGLES,this._vertexCount),$=0;$<3;++$)!this.surfaceProject[$]||(this._pickShader.uniforms.model=ie.projections[$],this._pickShader.uniforms.clipBounds=ie.clipBounds[$],this._vao.draw(ne.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var te=this._contourPickShader;te.bind(),te.uniforms=ve;var re=this._contourVAO;for(re.bind(),ae=0;ae<3;++ae)for(ne.lineWidth(this.contourWidth[ae]*this.pixelRatio),te.uniforms.permutation=P[ae],$=0;$<this.contourLevels[ae].length;++$)this._contourCounts[ae][$]&&(te.uniforms.height=this.contourLevels[ae][$],re.draw(ne.LINES,this._contourCounts[ae][$],this._contourOffsets[ae][$]));for($=0;$<3;++$)for(te.uniforms.model=ie.projections[$],te.uniforms.clipBounds=ie.clipBounds[$],ae=0;ae<3;++ae)if(!!this.contourProject[$][ae]){te.uniforms.permutation=P[ae],ne.lineWidth(this.contourWidth[ae]*this.pixelRatio);for(var ce=0;ce<this.contourLevels[ae].length;++ce)this._contourCounts[ae][ce]&&(te.uniforms.height=this.contourLevels[ae][ce],re.draw(ne.LINES,this._contourCounts[ae][ce],this._contourOffsets[ae][ce]))}re.unbind()}},k.pick=function(J){if(!J||J.id!==this.pickId)return null;var ne=this._field[2].shape,ve=this._pickResult,$=ne[0]*(J.value[0]+(J.value[2]>>4)/16)/255,j=Math.floor($),ae=$-j,ie=ne[1]*(J.value[1]+(J.value[2]&15)/16)/255,te=Math.floor(ie),re=ie-te;j+=1,te+=1;var ce=ve.position;ce[0]=ce[1]=ce[2]=0;for(var pe=0;pe<2;++pe)for(var fe=pe?ae:1-ae,se=0;se<2;++se)for(var de=se?re:1-re,be=j+pe,xe=te+se,ke=fe*de,Re=0;Re<3;++Re)ce[Re]+=this._field[Re].get(be,xe)*ke;for(var Ke=this._pickResult.level,ze=0;ze<3;++ze)if(Ke[ze]=p.le(this.contourLevels[ze],ce[ze]),Ke[ze]<0)this.contourLevels[ze].length>0&&(Ke[ze]=0);else if(Ke[ze]<this.contourLevels[ze].length-1){var Je=this.contourLevels[ze][Ke[ze]],qe=this.contourLevels[ze][Ke[ze]+1];Math.abs(Je-ce[ze])>Math.abs(qe-ce[ze])&&(Ke[ze]+=1)}for(ve.index[0]=ae<.5?j:j+1,ve.index[1]=re<.5?te:te+1,ve.uv[0]=$/ne[0],ve.uv[1]=ie/ne[1],Re=0;Re<3;++Re)ve.dataCoordinate[Re]=this._field[Re].get(ve.index[0],ve.index[1]);return ve},k.padField=function(J,ne){var ve=ne.shape.slice(),$=J.shape.slice();n.assign(J.lo(1,1).hi(ve[0],ve[1]),ne),n.assign(J.lo(1).hi(ve[0],1),ne.hi(ve[0],1)),n.assign(J.lo(1,$[1]-1).hi(ve[0],1),ne.lo(0,ve[1]-1).hi(ve[0],1)),n.assign(J.lo(0,1).hi(1,ve[1]),ne.hi(1)),n.assign(J.lo($[0]-1,1).hi(1,ve[1]),ne.lo(ve[0]-1)),J.set(0,0,ne.get(0,0)),J.set(0,$[1]-1,ne.get(0,ve[1]-1)),J.set($[0]-1,0,ne.get(ve[0]-1,0)),J.set($[0]-1,$[1]-1,ne.get(ve[0]-1,ve[1]-1))};function H(J,ne){return Array.isArray(J)?[ne(J[0]),ne(J[1]),ne(J[2])]:[ne(J),ne(J),ne(J)]}function V(J){return Array.isArray(J)?J.length===3?[J[0],J[1],J[2],1]:[J[0],J[1],J[2],J[3]]:[0,0,0,1]}function Z(J){if(Array.isArray(J)){if(Array.isArray(J))return[V(J[0]),V(J[1]),V(J[2])];var ne=V(J);return[ne.slice(),ne.slice(),ne.slice()]}}k.update=function(J){J=J||{},this.objectOffset=J.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in J&&(this.contourWidth=H(J.contourWidth,Number)),"showContour"in J&&(this.showContour=H(J.showContour,Boolean)),"showSurface"in J&&(this.showSurface=!!J.showSurface),"contourTint"in J&&(this.contourTint=H(J.contourTint,Boolean)),"contourColor"in J&&(this.contourColor=Z(J.contourColor)),"contourProject"in J&&(this.contourProject=H(J.contourProject,function(Yt){return H(Yt,Boolean)})),"surfaceProject"in J&&(this.surfaceProject=J.surfaceProject),"dynamicColor"in J&&(this.dynamicColor=Z(J.dynamicColor)),"dynamicTint"in J&&(this.dynamicTint=H(J.dynamicTint,Number)),"dynamicWidth"in J&&(this.dynamicWidth=H(J.dynamicWidth,Number)),"opacity"in J&&(this.opacity=J.opacity),"opacityscale"in J&&(this.opacityscale=J.opacityscale),"colorBounds"in J&&(this.colorBounds=J.colorBounds),"vertexColor"in J&&(this.vertexColor=J.vertexColor?1:0),"colormap"in J&&this._colorMap.setPixels(this.genColormap(J.colormap,this.opacityscale));var ne=J.field||J.coords&&J.coords[2]||null,ve=!1;if(ne||(this._field[2].shape[0]||this._field[2].shape[2]?ne=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):ne=this._field[2].hi(0,0)),"field"in J||"coords"in J){var $=(ne.shape[0]+2)*(ne.shape[1]+2);$>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(r.nextPow2($))),this._field[2]=l(this._field[2].data,[ne.shape[0]+2,ne.shape[1]+2]),this.padField(this._field[2],ne),this.shape=ne.shape.slice();for(var j=this.shape,ae=0;ae<2;++ae)this._field[2].size>this._field[ae].data.length&&(t.freeFloat(this._field[ae].data),this._field[ae].data=t.mallocFloat(this._field[2].size)),this._field[ae]=l(this._field[ae].data,[j[0]+2,j[1]+2]);if(J.coords){var ie=J.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ae=0;ae<2;++ae){var te=ie[ae];for(se=0;se<2;++se)if(te.shape[se]!==j[se])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ae],te)}}else if(J.ticks){var re=J.ticks;if(!Array.isArray(re)||re.length!==2)throw new Error("gl-surface: invalid ticks");for(ae=0;ae<2;++ae){var ce=re[ae];if((Array.isArray(ce)||ce.length)&&(ce=l(ce)),ce.shape[0]!==j[ae])throw new Error("gl-surface: invalid tick length");var pe=l(ce.data,j);pe.stride[ae]=ce.stride[0],pe.stride[ae^1]=0,this.padField(this._field[ae],pe)}}else{for(ae=0;ae<2;++ae){var fe=[0,0];fe[ae]=1,this._field[ae]=l(this._field[ae].data,[j[0]+2,j[1]+2],fe,0)}this._field[0].set(0,0,0);for(var se=0;se<j[0];++se)this._field[0].set(se+1,0,se);for(this._field[0].set(j[0]+1,0,j[0]-1),this._field[1].set(0,0,0),se=0;se<j[1];++se)this._field[1].set(0,se+1,se);this._field[1].set(0,j[1]+1,j[1]-1)}var de=this._field,be=l(t.mallocFloat(de[2].size*3*2),[3,j[0]+2,j[1]+2,2]);for(ae=0;ae<3;++ae)v(be.pick(ae),de[ae],"mirror");var xe=l(t.mallocFloat(de[2].size*3),[j[0]+2,j[1]+2,3]);for(ae=0;ae<j[0]+2;++ae)for(se=0;se<j[1]+2;++se){var ke=be.get(0,ae,se,0),Re=be.get(0,ae,se,1),Ke=be.get(1,ae,se,0),ze=be.get(1,ae,se,1),Je=be.get(2,ae,se,0),qe=be.get(2,ae,se,1),Ee=Ke*qe-ze*Je,Ae=Je*Re-qe*ke,Be=ke*ze-Re*Ke,$e=Math.sqrt(Ee*Ee+Ae*Ae+Be*Be);$e<1e-8?($e=Math.max(Math.abs(Ee),Math.abs(Ae),Math.abs(Be)),$e<1e-8?(Be=1,Ae=Ee=0,$e=1):$e=1/$e):$e=1/Math.sqrt($e),xe.set(ae,se,0,Ee*$e),xe.set(ae,se,1,Ae*$e),xe.set(ae,se,2,Be*$e)}t.free(be.data);var xt=[1/0,1/0,1/0],bt=[-1/0,-1/0,-1/0],Ne=1/0,st=-1/0,_t=(j[0]-1)*(j[1]-1)*6,Ot=t.mallocFloat(r.nextPow2(10*_t)),Wt=0,Et=0;for(ae=0;ae<j[0]-1;++ae){e:for(se=0;se<j[1]-1;++se){for(var jt=0;jt<2;++jt)for(var Zt=0;Zt<2;++Zt)for(var Mt=0;Mt<3;++Mt){var At=this._field[Mt].get(1+ae+jt,1+se+Zt);if(isNaN(At)||!isFinite(At))continue e}for(Mt=0;Mt<6;++Mt){var ft=ae+M[Mt][0],ot=se+M[Mt][1],Te=this._field[0].get(ft+1,ot+1),Le=this._field[1].get(ft+1,ot+1);At=this._field[2].get(ft+1,ot+1),Ee=xe.get(ft+1,ot+1,0),Ae=xe.get(ft+1,ot+1,1),Be=xe.get(ft+1,ot+1,2),J.intensity&&(Ve=J.intensity.get(ft,ot));var Ve=J.intensity?J.intensity.get(ft,ot):At+this.objectOffset[2];Ot[Wt++]=ft,Ot[Wt++]=ot,Ot[Wt++]=Te,Ot[Wt++]=Le,Ot[Wt++]=At,Ot[Wt++]=0,Ot[Wt++]=Ve,Ot[Wt++]=Ee,Ot[Wt++]=Ae,Ot[Wt++]=Be,xt[0]=Math.min(xt[0],Te+this.objectOffset[0]),xt[1]=Math.min(xt[1],Le+this.objectOffset[1]),xt[2]=Math.min(xt[2],At+this.objectOffset[2]),Ne=Math.min(Ne,Ve),bt[0]=Math.max(bt[0],Te+this.objectOffset[0]),bt[1]=Math.max(bt[1],Le+this.objectOffset[1]),bt[2]=Math.max(bt[2],At+this.objectOffset[2]),st=Math.max(st,Ve),Et+=1}}}for(J.intensityBounds&&(Ne=+J.intensityBounds[0],st=+J.intensityBounds[1]),ae=6;ae<Wt;ae+=10)Ot[ae]=(Ot[ae]-Ne)/(st-Ne);this._vertexCount=Et,this._coordinateBuffer.update(Ot.subarray(0,Wt)),t.freeFloat(Ot),t.free(xe.data),this.bounds=[xt,bt],this.intensity=J.intensity||this._field[2],(this.intensityBounds[0]!==Ne||this.intensityBounds[1]!==st)&&(ve=!0),this.intensityBounds=[Ne,st]}if("levels"in J){var Qe=J.levels;for(Array.isArray(Qe[0])?Qe=Qe.slice():Qe=[[],[],Qe],ae=0;ae<3;++ae)Qe[ae]=Qe[ae].slice(),Qe[ae].sort(function(Yt,Vt){return Yt-Vt});for(ae=0;ae<3;++ae)for(se=0;se<Qe[ae].length;++se)Qe[ae][se]-=this.objectOffset[ae];e:for(ae=0;ae<3;++ae){if(Qe[ae].length!==this.contourLevels[ae].length){ve=!0;break}for(se=0;se<Qe[ae].length;++se)if(Qe[ae][se]!==this.contourLevels[ae][se]){ve=!0;break e}}this.contourLevels=Qe}if(ve){de=this._field,j=this.shape;for(var Me=[],Ie=0;Ie<3;++Ie){var He=this.contourLevels[Ie],Ye=[],ut=[],nt=[0,0,0];for(ae=0;ae<He.length;++ae){var Ge=h(this._field[Ie],He[ae]);Ye.push(Me.length/5|0),Et=0;e:for(se=0;se<Ge.cells.length;++se){var at=Ge.cells[se];for(Mt=0;Mt<2;++Mt){var et=Ge.positions[at[Mt]],lt=et[0],Ct=Math.floor(lt)|0,Pt=lt-Ct,$t=et[1],je=Math.floor($t)|0,Oe=$t-je,mt=!1;t:for(var wt=0;wt<3;++wt){nt[wt]=0;var yt=(Ie+wt+1)%3;for(jt=0;jt<2;++jt){var St=jt?Pt:1-Pt;for(ft=Math.min(Math.max(Ct+jt,0),j[0])|0,Zt=0;Zt<2;++Zt){var kt=Zt?Oe:1-Oe;if(ot=Math.min(Math.max(je+Zt,0),j[1])|0,wt<2?At=this._field[yt].get(ft,ot):At=(this.intensity.get(ft,ot)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(At)||isNaN(At)){mt=!0;break t}var Rt=St*kt;nt[wt]+=Rt*At}}}if(!mt)Me.push(nt[0],nt[1],et[0],et[1],nt[2]),Et+=1;else{if(Mt>0){for(var zt=0;zt<5;++zt)Me.pop();Et-=1}continue e}}}ut.push(Et)}this._contourOffsets[Ie]=Ye,this._contourCounts[Ie]=ut}var Xt=t.mallocFloat(Me.length);for(ae=0;ae<Me.length;++ae)Xt[ae]=Me[ae];this._contourBuffer.update(Xt),t.freeFloat(Xt)}},k.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var J=0;J<3;++J)t.freeFloat(this._field[J].data)},k.highlight=function(J){var ne;if(!J){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(ne=0;ne<3;++ne)this.enableHighlight[ne]?this.highlightLevel[ne]=J.level[ne]:this.highlightLevel[ne]=-1;var ve;for(this.snapToData?ve=J.dataCoordinate:ve=J.position,ne=0;ne<3;++ne)ve[ne]-=this.objectOffset[ne];if(!((!this.enableDynamic[0]||ve[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ve[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ve[2]===this.dynamicLevel[2]))){for(var $=0,j=this.shape,ae=t.mallocFloat(12*j[0]*j[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=ve[ie];var te=(ie+1)%3,re=(ie+2)%3,ce=this._field[ie],pe=this._field[te],fe=this._field[re],se=h(ce,ve[ie]),de=se.cells,be=se.positions;for(this._dynamicOffsets[ie]=$,ne=0;ne<de.length;++ne)for(var xe=de[ne],ke=0;ke<2;++ke){var Re=be[xe[ke]],Ke=+Re[0],ze=Ke|0,Je=Math.min(ze+1,j[0])|0,qe=Ke-ze,Ee=1-qe,Ae=+Re[1],Be=Ae|0,$e=Math.min(Be+1,j[1])|0,xt=Ae-Be,bt=1-xt,Ne=Ee*bt,st=Ee*xt,_t=qe*bt,Ot=qe*xt,Wt=Ne*pe.get(ze,Be)+st*pe.get(ze,$e)+_t*pe.get(Je,Be)+Ot*pe.get(Je,$e),Et=Ne*fe.get(ze,Be)+st*fe.get(ze,$e)+_t*fe.get(Je,Be)+Ot*fe.get(Je,$e);if(isNaN(Wt)||isNaN(Et)){ke&&($-=1);break}ae[2*$+0]=Wt,ae[2*$+1]=Et,$+=1}this._dynamicCounts[ie]=$-this._dynamicOffsets[ie]}this._dynamicBuffer.update(ae.subarray(0,2*$)),t.freeFloat(ae)}};function q(J){var ne=J.gl,ve=b(ne),$=x(ne),j=y(ne),ae=w(ne),ie=a(ne),te=u(ne,[{buffer:ie,size:4,stride:g,offset:0},{buffer:ie,size:3,stride:g,offset:16},{buffer:ie,size:3,stride:g,offset:28}]),re=a(ne),ce=u(ne,[{buffer:re,size:4,stride:20,offset:0},{buffer:re,size:1,stride:20,offset:16}]),pe=a(ne),fe=u(ne,[{buffer:pe,size:2,type:ne.FLOAT}]),se=c(ne,1,I,ne.RGBA,ne.UNSIGNED_BYTE);se.minFilter=ne.LINEAR,se.magFilter=ne.LINEAR;var de=new C(ne,[0,0],[[0,0,0],[0,0,0]],ve,$,ie,te,se,j,ae,re,ce,pe,fe,[0,0,0]),be={levels:[[],[],[]]};for(var xe in J)be[xe]=J[xe];return be.colormap=be.colormap||"jet",de.update(be),de}},{"./lib/shaders":349,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-texture2d":353,"gl-vao":358,ndarray:495,"ndarray-gradient":488,"ndarray-ops":490,"ndarray-pack":491,"surface-nets":570,"typedarray-pool":595}],352:[function(e,d,S){var r=e("css-font"),a=e("pick-by-alias"),u=e("regl"),c=e("gl-util/context"),t=e("es6-weak-map"),f=e("color-normalize"),n=e("font-atlas"),o=e("typedarray-pool"),l=e("parse-rect"),h=e("is-plain-obj"),i=e("parse-unit"),s=e("to-px"),p=e("detect-kerning"),v=e("object-assign"),m=e("font-measure"),b=e("flatten-vertex-data"),y=e("bit-twiddle"),x=y.nextPow2,w=new t,g=!1;if(document.body){var T=document.body.appendChild(document.createElement("div"));T.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(T).fontStretch&&(g=!0),document.body.removeChild(T)}var M=function(I){P(I)?(I={regl:I},this.gl=I.regl._gl):this.gl=c(I),this.shader=w.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=I.regl||u({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(I)?I:{})};M.prototype.createShader=function(){var I=this.regl,C=I({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:I.prop("count"),offset:I.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:I.this("sizeBuffer")},width:{offset:0,stride:8,buffer:I.this("sizeBuffer")},char:I.this("charBuffer"),position:I.this("position")},uniforms:{atlasSize:function(E,R){return[R.atlas.width,R.atlas.height]},atlasDim:function(E,R){return[R.atlas.cols,R.atlas.rows]},atlas:function(E,R){return R.atlas.texture},charStep:function(E,R){return R.atlas.step},em:function(E,R){return R.atlas.em},color:I.prop("color"),opacity:I.prop("opacity"),viewport:I.this("viewportArray"),scale:I.this("scale"),align:I.prop("align"),baseline:I.prop("baseline"),translate:I.this("translate"),positionOffset:I.prop("positionOffset")},primitive:"points",viewport:I.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				`+(M.normalViewport?"":"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);")+`

				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ positionOffset))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				`+(M.normalViewport?"position.y = 1. - position.y;":"")+`

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform sampler2D atlas;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),k={};return{regl:I,draw:C,atlas:k}},M.prototype.update=function(I){var C=this;if(typeof I=="string")I={text:I};else if(!I)return;I=a(I,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),I.opacity!=null&&(Array.isArray(I.opacity)?this.opacity=I.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(I.opacity)),I.viewport!=null&&(this.viewport=l(I.viewport),M.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),I.kerning!=null&&(this.kerning=I.kerning),I.offset!=null&&(typeof I.offset=="number"&&(I.offset=[I.offset,0]),this.positionOffset=b(I.offset)),I.direction&&(this.direction=I.direction),I.range&&(this.range=I.range,this.scale=[1/(I.range[2]-I.range[0]),1/(I.range[3]-I.range[1])],this.translate=[-I.range[0],-I.range[1]]),I.scale&&(this.scale=I.scale),I.translate&&(this.translate=I.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!I.font&&(I.font=M.baseFontSize+"px sans-serif");var k=!1,E=!1;if(I.font&&(Array.isArray(I.font)?I.font:[I.font]).forEach(function(Ae,Be){if(typeof Ae=="string")try{Ae=r.parse(Ae)}catch{Ae=r.parse(M.baseFontSize+"px "+Ae)}else Ae=r.parse(r.stringify(Ae));var $e=r.stringify({size:M.baseFontSize,family:Ae.family,stretch:g?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),xt=i(Ae.size),bt=Math.round(xt[0]*s(xt[1]));if(bt!==C.fontSize[Be]&&(E=!0,C.fontSize[Be]=bt),(!C.font[Be]||$e!=C.font[Be].baseString)&&(k=!0,C.font[Be]=M.fonts[$e],!C.font[Be])){var Ne=Ae.family.join(", "),st=[Ae.style];Ae.style!=Ae.variant&&st.push(Ae.variant),Ae.variant!=Ae.weight&&st.push(Ae.weight),g&&Ae.weight!=Ae.stretch&&st.push(Ae.stretch),C.font[Be]={baseString:$e,family:Ne,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:m(Ne,{origin:"top",fontSize:M.baseFontSize,fontStyle:st.join(" ")})},M.fonts[$e]=C.font[Be]}}),(k||E)&&this.font.forEach(function(Ae,Be){var $e=r.stringify({size:C.fontSize[Be],family:Ae.family,stretch:g?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(C.fontAtlas[Be]=C.shader.atlas[$e],!C.fontAtlas[Be]){var xt=Ae.metrics;C.shader.atlas[$e]=C.fontAtlas[Be]={fontString:$e,step:Math.ceil(C.fontSize[Be]*xt.bottom*.5)*2,em:C.fontSize[Be],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:C.regl.texture()}}I.text==null&&(I.text=C.text)}),typeof I.text=="string"&&I.position&&I.position.length>2){for(var R=Array(I.position.length*.5),O=0;O<R.length;O++)R[O]=I.text;I.text=R}var N;if(I.text!=null||k){if(this.textOffsets=[0],Array.isArray(I.text)){this.count=I.text[0].length,this.counts=[this.count];for(var G=1;G<I.text.length;G++)this.textOffsets[G]=this.textOffsets[G-1]+I.text[G-1].length,this.count+=I.text[G].length,this.counts.push(I.text[G].length);this.text=I.text.join("")}else this.text=I.text,this.count=this.text.length,this.counts=[this.count];N=[],this.font.forEach(function(Ae,Be){M.atlasContext.font=Ae.baseString;for(var $e=C.fontAtlas[Be],xt=0;xt<C.text.length;xt++){var bt=C.text.charAt(xt);if($e.ids[bt]==null&&($e.ids[bt]=$e.chars.length,$e.chars.push(bt),N.push(bt)),Ae.width[bt]==null&&(Ae.width[bt]=M.atlasContext.measureText(bt).width/M.baseFontSize,C.kerning)){var Ne=[];for(var st in Ae.width)Ne.push(st+bt,bt+st);v(Ae.kerning,p(Ae.family,{pairs:Ne}))}}})}if(I.position)if(I.position.length>2){for(var U=!I.position[0].length,Y=o.mallocFloat(this.count*2),z=0,B=0;z<this.counts.length;z++){var H=this.counts[z];if(U)for(var V=0;V<H;V++)Y[B++]=I.position[z*2],Y[B++]=I.position[z*2+1];else for(var Z=0;Z<H;Z++)Y[B++]=I.position[z][0],Y[B++]=I.position[z][1]}this.position.call?this.position({type:"float",data:Y}):this.position=this.regl.buffer({type:"float",data:Y}),o.freeFloat(Y)}else this.position.destroy&&this.position.destroy(),this.position={constant:I.position};if(I.text||k){var q=o.mallocUint8(this.count),J=o.mallocFloat(this.count*2);this.textWidth=[];for(var ne=0,ve=0;ne<this.counts.length;ne++){for(var $=this.counts[ne],j=this.font[ne]||this.font[0],ae=this.fontAtlas[ne]||this.fontAtlas[0],ie=0;ie<$;ie++){var te=this.text.charAt(ve),re=this.text.charAt(ve-1);if(q[ve]=ae.ids[te],J[ve*2]=j.width[te],ie){var ce=J[ve*2-2],pe=J[ve*2],fe=J[ve*2-1],se=fe+ce*.5+pe*.5;if(this.kerning){var de=j.kerning[re+te];de&&(se+=de*.001)}J[ve*2+1]=se}else J[ve*2+1]=J[ve*2]*.5;ve++}this.textWidth.push(J.length?J[ve*2-2]*.5+J[ve*2-1]:0)}I.align||(I.align=this.align),this.charBuffer({data:q,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),o.freeUint8(q),o.freeFloat(J),N.length&&this.font.forEach(function(Ae,Be){var $e=C.fontAtlas[Be],xt=$e.step,bt=Math.floor(M.maxAtlasSize/xt),Ne=Math.min(bt,$e.chars.length),st=Math.ceil($e.chars.length/Ne),_t=x(Ne*xt),Ot=x(st*xt);$e.width=_t,$e.height=Ot,$e.rows=st,$e.cols=Ne,$e.em&&$e.texture({data:n({canvas:M.atlasCanvas,font:$e.fontString,chars:$e.chars,shape:[_t,Ot],step:[xt,xt]})})})}if(I.align&&(this.align=I.align,this.alignOffset=this.textWidth.map(function(Ae,Be){var $e=Array.isArray(C.align)?C.align.length>1?C.align[Be]:C.align[0]:C.align;if(typeof $e=="number")return $e;switch($e){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&I.baseline==null&&(I.baseline=0),I.baseline!=null&&(this.baseline=I.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Be){var $e=(C.font[Be]||C.font[0]).metrics,xt=0;return xt+=$e.bottom*.5,typeof Ae=="number"?xt+=Ae-$e.baseline:xt+=-$e[Ae],M.normalViewport||(xt*=-1),xt})),I.color!=null)if(I.color||(I.color="transparent"),typeof I.color=="string"||!isNaN(I.color))this.color=f(I.color,"uint8");else{var be;if(typeof I.color[0]=="number"&&I.color.length>this.counts.length){var xe=I.color.length;be=o.mallocUint8(xe);for(var ke=(I.color.subarray||I.color.slice).bind(I.color),Re=0;Re<xe;Re+=4)be.set(f(ke(Re,Re+4),"uint8"),Re)}else{var Ke=I.color.length;be=o.mallocUint8(Ke*4);for(var ze=0;ze<Ke;ze++)be.set(f(I.color[ze]||0,"uint8"),ze*4)}this.color=be}if(I.position||I.text||I.color||I.baseline||I.align||I.font||I.offset||I.opacity){var Je=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Je){var qe=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(qe);for(var Ee=0;Ee<this.batch.length;Ee++)this.batch[Ee]={count:this.counts.length>1?this.counts[Ee]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ee]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ee*4,Ee*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ee]:this.opacity,baseline:this.baselineOffset[Ee]!=null?this.baselineOffset[Ee]:this.baselineOffset[0],align:this.align?this.alignOffset[Ee]!=null?this.alignOffset[Ee]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ee]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ee*2,Ee*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},M.prototype.destroy=function(){},M.prototype.kerning=!0,M.prototype.position={constant:new Float32Array(2)},M.prototype.translate=null,M.prototype.scale=null,M.prototype.font=null,M.prototype.text="",M.prototype.positionOffset=[0,0],M.prototype.opacity=1,M.prototype.color=new Uint8Array([0,0,0,255]),M.prototype.alignOffset=[0,0],M.normalViewport=!1,M.maxAtlasSize=1024,M.atlasCanvas=document.createElement("canvas"),M.atlasContext=M.atlasCanvas.getContext("2d",{alpha:!1}),M.baseFontSize=64,M.fonts={};function P(L){return typeof L=="function"&&L._gl&&L.prop&&L.texture&&L.buffer}d.exports=M},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":354,"is-plain-obj":469,"object-assign":499,"parse-rect":504,"parse-unit":506,"pick-by-alias":511,regl:540,"to-px":578,"typedarray-pool":595}],353:[function(e,d,S){var r=e("ndarray"),a=e("ndarray-ops"),u=e("typedarray-pool");d.exports=w;var c=null,t=null,f=null;function n(g){c=[g.LINEAR,g.NEAREST_MIPMAP_LINEAR,g.LINEAR_MIPMAP_NEAREST,g.LINEAR_MIPMAP_NEAREST],t=[g.NEAREST,g.LINEAR,g.NEAREST_MIPMAP_NEAREST,g.NEAREST_MIPMAP_LINEAR,g.LINEAR_MIPMAP_NEAREST,g.LINEAR_MIPMAP_LINEAR],f=[g.REPEAT,g.CLAMP_TO_EDGE,g.MIRRORED_REPEAT]}function o(g){return typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&g instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&g instanceof HTMLVideoElement||typeof ImageData<"u"&&g instanceof ImageData}var l=function(g,T){a.muls(g,T,255)};function h(g,T,M){var P=g.gl,L=P.getParameter(P.MAX_TEXTURE_SIZE);if(T<0||T>L||M<0||M>L)throw new Error("gl-texture2d: Invalid texture size");return g._shape=[T,M],g.bind(),P.texImage2D(P.TEXTURE_2D,0,g.format,T,M,0,g.format,g.type,null),g._mipLevels=[0],g}function i(g,T,M,P,L,I){this.gl=g,this.handle=T,this.format=L,this.type=I,this._shape=[M,P],this._mipLevels=[0],this._magFilter=g.NEAREST,this._minFilter=g.NEAREST,this._wrapS=g.CLAMP_TO_EDGE,this._wrapT=g.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,k=[this._wrapS,this._wrapT];Object.defineProperties(k,[{get:function(){return C._wrapS},set:function(R){return C.wrapS=R}},{get:function(){return C._wrapT},set:function(R){return C.wrapT=R}}]),this._wrapVector=k;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return C._shape[0]},set:function(R){return C.width=R}},{get:function(){return C._shape[1]},set:function(R){return C.height=R}}]),this._shapeVector=E}var s=i.prototype;Object.defineProperties(s,{minFilter:{get:function(){return this._minFilter},set:function(g){this.bind();var T=this.gl;if(this.type===T.FLOAT&&c.indexOf(g)>=0&&(T.getExtension("OES_texture_float_linear")||(g=T.NEAREST)),t.indexOf(g)<0)throw new Error("gl-texture2d: Unknown filter mode "+g);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,g),this._minFilter=g}},magFilter:{get:function(){return this._magFilter},set:function(g){this.bind();var T=this.gl;if(this.type===T.FLOAT&&c.indexOf(g)>=0&&(T.getExtension("OES_texture_float_linear")||(g=T.NEAREST)),t.indexOf(g)<0)throw new Error("gl-texture2d: Unknown filter mode "+g);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,g),this._magFilter=g}},mipSamples:{get:function(){return this._anisoSamples},set:function(g){var T=this._anisoSamples;if(this._anisoSamples=Math.max(g,1)|0,T!==this._anisoSamples){var M=this.gl.getExtension("EXT_texture_filter_anisotropic");M&&this.gl.texParameterf(this.gl.TEXTURE_2D,M.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(g){if(this.bind(),f.indexOf(g)<0)throw new Error("gl-texture2d: Unknown wrap mode "+g);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,g),this._wrapS=g}},wrapT:{get:function(){return this._wrapT},set:function(g){if(this.bind(),f.indexOf(g)<0)throw new Error("gl-texture2d: Unknown wrap mode "+g);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,g),this._wrapT=g}},wrap:{get:function(){return this._wrapVector},set:function(g){if(Array.isArray(g)||(g=[g,g]),g.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var T=0;T<2;++T)if(f.indexOf(g[T])<0)throw new Error("gl-texture2d: Unknown wrap mode "+g);this._wrapS=g[0],this._wrapT=g[1];var M=this.gl;return this.bind(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,this._wrapS),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,this._wrapT),g}},shape:{get:function(){return this._shapeVector},set:function(g){if(!Array.isArray(g))g=[g|0,g|0];else if(g.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return h(this,g[0]|0,g[1]|0),[g[0]|0,g[1]|0]}},width:{get:function(){return this._shape[0]},set:function(g){return g=g|0,h(this,g,this._shape[1]),g}},height:{get:function(){return this._shape[1]},set:function(g){return g=g|0,h(this,this._shape[0],g),g}}}),s.bind=function(g){var T=this.gl;return g!==void 0&&T.activeTexture(T.TEXTURE0+(g|0)),T.bindTexture(T.TEXTURE_2D,this.handle),g!==void 0?g|0:T.getParameter(T.ACTIVE_TEXTURE)-T.TEXTURE0},s.dispose=function(){this.gl.deleteTexture(this.handle)},s.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var g=Math.min(this._shape[0],this._shape[1]),T=0;g>0;++T,g>>>=1)this._mipLevels.indexOf(T)<0&&this._mipLevels.push(T)},s.setPixels=function(g,T,M,P){var L=this.gl;this.bind(),Array.isArray(T)?(P=M,M=T[1]|0,T=T[0]|0):(T=T||0,M=M||0),P=P||0;var I=o(g)?g:g.raw;if(I){var C=this._mipLevels.indexOf(P)<0;C?(L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(P)):L.texSubImage2D(L.TEXTURE_2D,P,T,M,this.format,this.type,I)}else if(g.shape&&g.stride&&g.data){if(g.shape.length<2||T+g.shape[1]>this._shape[1]>>>P||M+g.shape[0]>this._shape[0]>>>P||T<0||M<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");v(L,T,M,P,this.format,this.type,this._mipLevels,g)}else throw new Error("gl-texture2d: Unsupported data type")};function p(g,T){return g.length===3?T[2]===1&&T[1]===g[0]*g[2]&&T[0]===g[2]:T[0]===1&&T[1]===g[0]}function v(g,T,M,P,L,I,C,k){var E=k.dtype,R=k.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,N=0,G=p(R,k.stride.slice());if(E==="float32"?O=g.FLOAT:E==="float64"?(O=g.FLOAT,G=!1,E="float32"):E==="uint8"?O=g.UNSIGNED_BYTE:(O=g.UNSIGNED_BYTE,G=!1,E="uint8"),R.length===2)N=g.LUMINANCE,R=[R[0],R[1],1],k=r(k.data,R,[k.stride[0],k.stride[1],1],k.offset);else if(R.length===3){if(R[2]===1)N=g.ALPHA;else if(R[2]===2)N=g.LUMINANCE_ALPHA;else if(R[2]===3)N=g.RGB;else if(R[2]===4)N=g.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((N===g.LUMINANCE||N===g.ALPHA)&&(L===g.LUMINANCE||L===g.ALPHA)&&(N=L),N!==L)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var U=k.size,Y=C.indexOf(P)<0;if(Y&&C.push(P),O===I&&G)k.offset===0&&k.data.length===U?Y?g.texImage2D(g.TEXTURE_2D,P,L,R[0],R[1],0,L,I,k.data):g.texSubImage2D(g.TEXTURE_2D,P,T,M,R[0],R[1],L,I,k.data):Y?g.texImage2D(g.TEXTURE_2D,P,L,R[0],R[1],0,L,I,k.data.subarray(k.offset,k.offset+U)):g.texSubImage2D(g.TEXTURE_2D,P,T,M,R[0],R[1],L,I,k.data.subarray(k.offset,k.offset+U));else{var z;I===g.FLOAT?z=u.mallocFloat32(U):z=u.mallocUint8(U);var B=r(z,R,[R[2],R[2]*R[0],1]);O===g.FLOAT&&I===g.UNSIGNED_BYTE?l(B,k):a.assign(B,k),Y?g.texImage2D(g.TEXTURE_2D,P,L,R[0],R[1],0,L,I,z.subarray(0,U)):g.texSubImage2D(g.TEXTURE_2D,P,T,M,R[0],R[1],L,I,z.subarray(0,U)),I===g.FLOAT?u.freeFloat32(z):u.freeUint8(z)}}function m(g){var T=g.createTexture();return g.bindTexture(g.TEXTURE_2D,T),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),T}function b(g,T,M,P,L){var I=g.getParameter(g.MAX_TEXTURE_SIZE);if(T<0||T>I||M<0||M>I)throw new Error("gl-texture2d: Invalid texture shape");if(L===g.FLOAT&&!g.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=m(g);return g.texImage2D(g.TEXTURE_2D,0,P,T,M,0,P,L,null),new i(g,C,T,M,P,L)}function y(g,T,M,P,L,I){var C=m(g);return g.texImage2D(g.TEXTURE_2D,0,L,L,I,T),new i(g,C,M,P,L,I)}function x(g,T){var M=T.dtype,P=T.shape.slice(),L=g.getParameter(g.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>L||P[1]<0||P[1]>L)throw new Error("gl-texture2d: Invalid texture size");var I=p(P,T.stride.slice()),C=0;M==="float32"?C=g.FLOAT:M==="float64"?(C=g.FLOAT,I=!1,M="float32"):M==="uint8"?C=g.UNSIGNED_BYTE:(C=g.UNSIGNED_BYTE,I=!1,M="uint8");var k=0;if(P.length===2)k=g.LUMINANCE,P=[P[0],P[1],1],T=r(T.data,P,[T.stride[0],T.stride[1],1],T.offset);else if(P.length===3)if(P[2]===1)k=g.ALPHA;else if(P[2]===2)k=g.LUMINANCE_ALPHA;else if(P[2]===3)k=g.RGB;else if(P[2]===4)k=g.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");C===g.FLOAT&&!g.getExtension("OES_texture_float")&&(C=g.UNSIGNED_BYTE,I=!1);var E,R,O=T.size;if(I)T.offset===0&&T.data.length===O?E=T.data:E=T.data.subarray(T.offset,T.offset+O);else{var N=[P[2],P[2]*P[0],1];R=u.malloc(O,M);var G=r(R,P,N,0);(M==="float32"||M==="float64")&&C===g.UNSIGNED_BYTE?l(G,T):a.assign(G,T),E=R.subarray(0,O)}var U=m(g);return g.texImage2D(g.TEXTURE_2D,0,k,P[0],P[1],0,k,C,E),I||u.free(R),new i(g,U,P[0],P[1],k,C)}function w(g){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(c||n(g),typeof arguments[1]=="number")return b(g,arguments[1],arguments[2],arguments[3]||g.RGBA,arguments[4]||g.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(g,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||g.RGBA,arguments[3]||g.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var T=arguments[1],M=o(T)?T:T.raw;if(M)return y(g,M,T.width|0,T.height|0,arguments[2]||g.RGBA,arguments[3]||g.UNSIGNED_BYTE);if(T.shape&&T.data&&T.stride)return x(g,T)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],354:[function(e,d,S){(function(r){(function(){var a=e("pick-by-alias");d.exports=function(l){if(l?typeof l=="string"&&(l={container:l}):l={},c(l)?l={container:l}:t(l)?l={container:l}:f(l)?l={gl:l}:l=a(l,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),l.pixelRatio||(l.pixelRatio=r.pixelRatio||1),l.gl)return l.gl;if(l.canvas&&(l.container=l.canvas.parentNode),l.container){if(typeof l.container=="string"){var h=document.querySelector(l.container);if(!h)throw Error("Element "+l.container+" is not found");l.container=h}c(l.container)?(l.canvas=l.container,l.container=l.canvas.parentNode):l.canvas||(l.canvas=n(),l.container.appendChild(l.canvas),u(l))}else if(!l.canvas)if(typeof document<"u")l.container=document.body||document.documentElement,l.canvas=n(),l.container.appendChild(l.canvas),u(l);else throw Error("Not DOM environment. Use headless-gl.");if(!l.gl)try{l.gl=l.canvas.getContext("webgl",l.attrs)}catch{try{l.gl=l.canvas.getContext("experimental-webgl",l.attrs)}catch{l.gl=l.canvas.getContext("webgl-experimental",l.attrs)}}return l.gl};function u(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*r.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*r.innerHeight);else{var l=o.container.getBoundingClientRect();o.canvas.width=o.width||l.right-l.left,o.canvas.height=o.height||l.bottom-l.top}}function c(o){return typeof o.getContext=="function"&&"width"in o&&"height"in o}function t(o){return typeof o.nodeName=="string"&&typeof o.appendChild=="function"&&typeof o.getBoundingClientRect=="function"}function f(o){return typeof o.drawArrays=="function"||typeof o.drawElements=="function"}function n(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":511}],355:[function(e,d,S){function r(a,u,c){u?u.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var t=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(c){if(c.length>t)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<c.length;++f){var n=c[f];if(n.buffer){var o=n.buffer,l=n.size||4,h=n.type||a.FLOAT,i=!!n.normalized,s=n.stride||0,p=n.offset||0;o.bind(),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,l,h,i,s,p)}else{if(typeof n=="number")a.vertexAttrib1f(f,n);else if(n.length===1)a.vertexAttrib1f(f,n[0]);else if(n.length===2)a.vertexAttrib2f(f,n[0],n[1]);else if(n.length===3)a.vertexAttrib3f(f,n[0],n[1],n[2]);else if(n.length===4)a.vertexAttrib4f(f,n[0],n[1],n[2],n[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(f)}}for(;f<t;++f)a.disableVertexAttribArray(f)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var f=0;f<t;++f)a.disableVertexAttribArray(f)}}d.exports=r},{}],356:[function(e,d,S){var r=e("./do-bind.js");function a(c){this.gl=c,this._elements=null,this._attributes=null,this._elementsType=c.UNSIGNED_SHORT}a.prototype.bind=function(){r(this.gl,this._elements,this._attributes)},a.prototype.update=function(c,t,f){this._elements=t,this._attributes=c,this._elementsType=f||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(c,t,f){f=f||0;var n=this.gl;this._elements?n.drawElements(c,t,this._elementsType,f):n.drawArrays(c,f,t)};function u(c){return new a(c)}d.exports=u},{"./do-bind.js":355}],357:[function(e,d,S){var r=e("./do-bind.js");function a(t,f,n,o,l,h){this.location=t,this.dimension=f,this.a=n,this.b=o,this.c=l,this.d=h}a.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function u(t,f,n){this.gl=t,this._ext=f,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}u.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},u.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},u.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},u.prototype.update=function(t,f,n){if(this.bind(),r(this.gl,f,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var l=t[o];typeof l=="number"?this._attribs.push(new a(o,1,l)):Array.isArray(l)&&this._attribs.push(new a(o,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!f,this._elementsType=n||this.gl.UNSIGNED_SHORT},u.prototype.draw=function(t,f,n){n=n||0;var o=this.gl;this._useElements?o.drawElements(t,f,this._elementsType,n):o.drawArrays(t,n,f)};function c(t,f){return new u(t,f,f.createVertexArrayOES())}d.exports=c},{"./do-bind.js":355}],358:[function(e,d,S){var r=e("./lib/vao-native.js"),a=e("./lib/vao-emulated.js");function u(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function c(t,f,n,o){var l=t.createVertexArray?new u(t):t.getExtension("OES_vertex_array_object"),h;return l?h=r(t,l):h=a(t),h.update(f,n,o),h}d.exports=c},{"./lib/vao-emulated.js":356,"./lib/vao-native.js":357}],359:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]+c[0],a[1]=u[1]+c[1],a[2]=u[2]+c[2],a}},{}],360:[function(e,d,S){d.exports=c;var r=e("./fromValues"),a=e("./normalize"),u=e("./dot");function c(t,f){var n=r(t[0],t[1],t[2]),o=r(f[0],f[1],f[2]);a(n,n),a(o,o);var l=u(n,o);return l>1?0:Math.acos(l)}},{"./dot":370,"./fromValues":376,"./normalize":387}],361:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=Math.ceil(u[0]),a[1]=Math.ceil(u[1]),a[2]=Math.ceil(u[2]),a}},{}],362:[function(e,d,S){d.exports=r;function r(a){var u=new Float32Array(3);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u}},{}],363:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=u[0],a[1]=u[1],a[2]=u[2],a}},{}],364:[function(e,d,S){d.exports=r;function r(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],365:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2];return a[0]=f*h-n*l,a[1]=n*o-t*h,a[2]=t*l-f*o,a}},{}],366:[function(e,d,S){d.exports=e("./distance")},{"./distance":367}],367:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2];return Math.sqrt(c*c+t*t+f*f)}},{}],368:[function(e,d,S){d.exports=e("./divide")},{"./divide":369}],369:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]/c[0],a[1]=u[1]/c[1],a[2]=u[2]/c[2],a}},{}],370:[function(e,d,S){d.exports=r;function r(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]}},{}],371:[function(e,d,S){d.exports=1e-6},{}],372:[function(e,d,S){d.exports=a;var r=e("./epsilon");function a(u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2];return Math.abs(t-o)<=r*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(f-l)<=r*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(n-h)<=r*Math.max(1,Math.abs(n),Math.abs(h))}},{"./epsilon":371}],373:[function(e,d,S){d.exports=r;function r(a,u){return a[0]===u[0]&&a[1]===u[1]&&a[2]===u[2]}},{}],374:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=Math.floor(u[0]),a[1]=Math.floor(u[1]),a[2]=Math.floor(u[2]),a}},{}],375:[function(e,d,S){d.exports=a;var r=e("./create")();function a(u,c,t,f,n,o){var l,h;for(c||(c=3),t||(t=0),f?h=Math.min(f*c+t,u.length):h=u.length,l=t;l<h;l+=c)r[0]=u[l],r[1]=u[l+1],r[2]=u[l+2],n(r,r,o),u[l]=r[0],u[l+1]=r[1],u[l+2]=r[2];return u}},{"./create":364}],376:[function(e,d,S){d.exports=r;function r(a,u,c){var t=new Float32Array(3);return t[0]=a,t[1]=u,t[2]=c,t}},{}],377:[function(e,d,S){d.exports={EPSILON:e("./epsilon"),create:e("./create"),clone:e("./clone"),angle:e("./angle"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),equals:e("./equals"),exactEquals:e("./exactEquals"),add:e("./add"),subtract:e("./subtract"),sub:e("./sub"),multiply:e("./multiply"),mul:e("./mul"),divide:e("./divide"),div:e("./div"),min:e("./min"),max:e("./max"),floor:e("./floor"),ceil:e("./ceil"),round:e("./round"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),dist:e("./dist"),squaredDistance:e("./squaredDistance"),sqrDist:e("./sqrDist"),length:e("./length"),len:e("./len"),squaredLength:e("./squaredLength"),sqrLen:e("./sqrLen"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),cross:e("./cross"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformMat3:e("./transformMat3"),transformQuat:e("./transformQuat"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),forEach:e("./forEach")}},{"./add":359,"./angle":360,"./ceil":361,"./clone":362,"./copy":363,"./create":364,"./cross":365,"./dist":366,"./distance":367,"./div":368,"./divide":369,"./dot":370,"./epsilon":371,"./equals":372,"./exactEquals":373,"./floor":374,"./forEach":375,"./fromValues":376,"./inverse":378,"./len":379,"./length":380,"./lerp":381,"./max":382,"./min":383,"./mul":384,"./multiply":385,"./negate":386,"./normalize":387,"./random":388,"./rotateX":389,"./rotateY":390,"./rotateZ":391,"./round":392,"./scale":393,"./scaleAndAdd":394,"./set":395,"./sqrDist":396,"./sqrLen":397,"./squaredDistance":398,"./squaredLength":399,"./sub":400,"./subtract":401,"./transformMat3":402,"./transformMat4":403,"./transformQuat":404}],378:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=1/u[0],a[1]=1/u[1],a[2]=1/u[2],a}},{}],379:[function(e,d,S){d.exports=e("./length")},{"./length":380}],380:[function(e,d,S){d.exports=r;function r(a){var u=a[0],c=a[1],t=a[2];return Math.sqrt(u*u+c*c+t*t)}},{}],381:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=u[0],n=u[1],o=u[2];return a[0]=f+t*(c[0]-f),a[1]=n+t*(c[1]-n),a[2]=o+t*(c[2]-o),a}},{}],382:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=Math.max(u[0],c[0]),a[1]=Math.max(u[1],c[1]),a[2]=Math.max(u[2],c[2]),a}},{}],383:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=Math.min(u[0],c[0]),a[1]=Math.min(u[1],c[1]),a[2]=Math.min(u[2],c[2]),a}},{}],384:[function(e,d,S){d.exports=e("./multiply")},{"./multiply":385}],385:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]*c[0],a[1]=u[1]*c[1],a[2]=u[2]*c[2],a}},{}],386:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=-u[0],a[1]=-u[1],a[2]=-u[2],a}},{}],387:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=c*c+t*t+f*f;return n>0&&(n=1/Math.sqrt(n),a[0]=u[0]*n,a[1]=u[1]*n,a[2]=u[2]*n),a}},{}],388:[function(e,d,S){d.exports=r;function r(a,u){u=u||1;var c=Math.random()*2*Math.PI,t=Math.random()*2-1,f=Math.sqrt(1-t*t)*u;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=t*u,a}},{}],389:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=c[1],n=c[2],o=u[1]-f,l=u[2]-n,h=Math.sin(t),i=Math.cos(t);return a[0]=u[0],a[1]=f+o*i-l*h,a[2]=n+o*h+l*i,a}},{}],390:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=c[0],n=c[2],o=u[0]-f,l=u[2]-n,h=Math.sin(t),i=Math.cos(t);return a[0]=f+l*h+o*i,a[1]=u[1],a[2]=n+l*i-o*h,a}},{}],391:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=c[0],n=c[1],o=u[0]-f,l=u[1]-n,h=Math.sin(t),i=Math.cos(t);return a[0]=f+o*i-l*h,a[1]=n+o*h+l*i,a[2]=u[2],a}},{}],392:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=Math.round(u[0]),a[1]=Math.round(u[1]),a[2]=Math.round(u[2]),a}},{}],393:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]*c,a[1]=u[1]*c,a[2]=u[2]*c,a}},{}],394:[function(e,d,S){d.exports=r;function r(a,u,c,t){return a[0]=u[0]+c[0]*t,a[1]=u[1]+c[1]*t,a[2]=u[2]+c[2]*t,a}},{}],395:[function(e,d,S){d.exports=r;function r(a,u,c,t){return a[0]=u,a[1]=c,a[2]=t,a}},{}],396:[function(e,d,S){d.exports=e("./squaredDistance")},{"./squaredDistance":398}],397:[function(e,d,S){d.exports=e("./squaredLength")},{"./squaredLength":399}],398:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2];return c*c+t*t+f*f}},{}],399:[function(e,d,S){d.exports=r;function r(a){var u=a[0],c=a[1],t=a[2];return u*u+c*c+t*t}},{}],400:[function(e,d,S){d.exports=e("./subtract")},{"./subtract":401}],401:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]-c[0],a[1]=u[1]-c[1],a[2]=u[2]-c[2],a}},{}],402:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2];return a[0]=t*c[0]+f*c[3]+n*c[6],a[1]=t*c[1]+f*c[4]+n*c[7],a[2]=t*c[2]+f*c[5]+n*c[8],a}},{}],403:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[3]*t+c[7]*f+c[11]*n+c[15];return o=o||1,a[0]=(c[0]*t+c[4]*f+c[8]*n+c[12])/o,a[1]=(c[1]*t+c[5]*f+c[9]*n+c[13])/o,a[2]=(c[2]*t+c[6]*f+c[10]*n+c[14])/o,a}},{}],404:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2],i=c[3],s=i*t+l*n-h*f,p=i*f+h*t-o*n,v=i*n+o*f-l*t,m=-o*t-l*f-h*n;return a[0]=s*i+m*-o+p*-h-v*-l,a[1]=p*i+m*-l+v*-o-s*-h,a[2]=v*i+m*-h+s*-l-p*-o,a}},{}],405:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]+c[0],a[1]=u[1]+c[1],a[2]=u[2]+c[2],a[3]=u[3]+c[3],a}},{}],406:[function(e,d,S){d.exports=r;function r(a){var u=new Float32Array(4);return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3],u}},{}],407:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a}},{}],408:[function(e,d,S){d.exports=r;function r(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],409:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2],n=u[3]-a[3];return Math.sqrt(c*c+t*t+f*f+n*n)}},{}],410:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]/c[0],a[1]=u[1]/c[1],a[2]=u[2]/c[2],a[3]=u[3]/c[3],a}},{}],411:[function(e,d,S){d.exports=r;function r(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]+a[3]*u[3]}},{}],412:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=new Float32Array(4);return f[0]=a,f[1]=u,f[2]=c,f[3]=t,f}},{}],413:[function(e,d,S){d.exports={create:e("./create"),clone:e("./clone"),fromValues:e("./fromValues"),copy:e("./copy"),set:e("./set"),add:e("./add"),subtract:e("./subtract"),multiply:e("./multiply"),divide:e("./divide"),min:e("./min"),max:e("./max"),scale:e("./scale"),scaleAndAdd:e("./scaleAndAdd"),distance:e("./distance"),squaredDistance:e("./squaredDistance"),length:e("./length"),squaredLength:e("./squaredLength"),negate:e("./negate"),inverse:e("./inverse"),normalize:e("./normalize"),dot:e("./dot"),lerp:e("./lerp"),random:e("./random"),transformMat4:e("./transformMat4"),transformQuat:e("./transformQuat")}},{"./add":405,"./clone":406,"./copy":407,"./create":408,"./distance":409,"./divide":410,"./dot":411,"./fromValues":412,"./inverse":414,"./length":415,"./lerp":416,"./max":417,"./min":418,"./multiply":419,"./negate":420,"./normalize":421,"./random":422,"./scale":423,"./scaleAndAdd":424,"./set":425,"./squaredDistance":426,"./squaredLength":427,"./subtract":428,"./transformMat4":429,"./transformQuat":430}],414:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=1/u[0],a[1]=1/u[1],a[2]=1/u[2],a[3]=1/u[3],a}},{}],415:[function(e,d,S){d.exports=r;function r(a){var u=a[0],c=a[1],t=a[2],f=a[3];return Math.sqrt(u*u+c*c+t*t+f*f)}},{}],416:[function(e,d,S){d.exports=r;function r(a,u,c,t){var f=u[0],n=u[1],o=u[2],l=u[3];return a[0]=f+t*(c[0]-f),a[1]=n+t*(c[1]-n),a[2]=o+t*(c[2]-o),a[3]=l+t*(c[3]-l),a}},{}],417:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=Math.max(u[0],c[0]),a[1]=Math.max(u[1],c[1]),a[2]=Math.max(u[2],c[2]),a[3]=Math.max(u[3],c[3]),a}},{}],418:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=Math.min(u[0],c[0]),a[1]=Math.min(u[1],c[1]),a[2]=Math.min(u[2],c[2]),a[3]=Math.min(u[3],c[3]),a}},{}],419:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]*c[0],a[1]=u[1]*c[1],a[2]=u[2]*c[2],a[3]=u[3]*c[3],a}},{}],420:[function(e,d,S){d.exports=r;function r(a,u){return a[0]=-u[0],a[1]=-u[1],a[2]=-u[2],a[3]=-u[3],a}},{}],421:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0],t=u[1],f=u[2],n=u[3],o=c*c+t*t+f*f+n*n;return o>0&&(o=1/Math.sqrt(o),a[0]=c*o,a[1]=t*o,a[2]=f*o,a[3]=n*o),a}},{}],422:[function(e,d,S){var r=e("./normalize"),a=e("./scale");d.exports=u;function u(c,t){return t=t||1,c[0]=Math.random(),c[1]=Math.random(),c[2]=Math.random(),c[3]=Math.random(),r(c,c),a(c,c,t),c}},{"./normalize":421,"./scale":423}],423:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]*c,a[1]=u[1]*c,a[2]=u[2]*c,a[3]=u[3]*c,a}},{}],424:[function(e,d,S){d.exports=r;function r(a,u,c,t){return a[0]=u[0]+c[0]*t,a[1]=u[1]+c[1]*t,a[2]=u[2]+c[2]*t,a[3]=u[3]+c[3]*t,a}},{}],425:[function(e,d,S){d.exports=r;function r(a,u,c,t,f){return a[0]=u,a[1]=c,a[2]=t,a[3]=f,a}},{}],426:[function(e,d,S){d.exports=r;function r(a,u){var c=u[0]-a[0],t=u[1]-a[1],f=u[2]-a[2],n=u[3]-a[3];return c*c+t*t+f*f+n*n}},{}],427:[function(e,d,S){d.exports=r;function r(a){var u=a[0],c=a[1],t=a[2],f=a[3];return u*u+c*c+t*t+f*f}},{}],428:[function(e,d,S){d.exports=r;function r(a,u,c){return a[0]=u[0]-c[0],a[1]=u[1]-c[1],a[2]=u[2]-c[2],a[3]=u[3]-c[3],a}},{}],429:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=u[3];return a[0]=c[0]*t+c[4]*f+c[8]*n+c[12]*o,a[1]=c[1]*t+c[5]*f+c[9]*n+c[13]*o,a[2]=c[2]*t+c[6]*f+c[10]*n+c[14]*o,a[3]=c[3]*t+c[7]*f+c[11]*n+c[15]*o,a}},{}],430:[function(e,d,S){d.exports=r;function r(a,u,c){var t=u[0],f=u[1],n=u[2],o=c[0],l=c[1],h=c[2],i=c[3],s=i*t+l*n-h*f,p=i*f+h*t-o*n,v=i*n+o*f-l*t,m=-o*t-l*f-h*n;return a[0]=s*i+m*-o+p*-h-v*-l,a[1]=p*i+m*-l+v*-o-s*-h,a[2]=v*i+m*-h+s*-l-p*-o,a[3]=u[3],a}},{}],431:[function(e,d,S){var r=e("glsl-tokenizer"),a=e("atob-lite");d.exports=u;function u(c){for(var t=Array.isArray(c)?c:r(c),f=0;f<t.length;f++){var n=t[f];if(n.type==="preprocessor"){var o=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var l=o[1],h=o[2];return(l?a(h):h).trim()}}}}},{"atob-lite":77,"glsl-tokenizer":438}],432:[function(e,d,S){d.exports=T;var r=e("./lib/literals"),a=e("./lib/operators"),u=e("./lib/builtins"),c=e("./lib/literals-300es"),t=e("./lib/builtins-300es"),f=999,n=9999,o=0,l=1,h=2,i=3,s=4,p=5,v=6,m=7,b=8,y=9,x=10,w=11,g=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function T(M){var P=0,L=0,I=f,C,k,E=[],R=[],O=1,N=0,G=0,U=!1,Y=!1,z="",B;M=M||{};var H=u,V=r;M.version==="300 es"&&(H=t,V=c);for(var Z={},q={},P=0;P<H.length;P++)Z[H[P]]=!0;for(var P=0;P<V.length;P++)q[V[P]]=!0;return function(be){return R=[],be!==null?ne(be):ve()};function J(be){be.length&&R.push({type:g[I],data:be,position:G,line:O,column:N})}function ne(be){P=0,be.toString&&(be=be.toString()),z+=be.replace(/\r\n/g,`
`),B=z.length;for(var xe;C=z[P],P<B;){switch(xe=P,I){case o:P=te();break;case l:P=ie();break;case h:P=ae();break;case i:P=re();break;case s:P=fe();break;case w:P=pe();break;case p:P=se();break;case n:P=de();break;case y:P=j();break;case f:P=$();break}if(xe!==P)switch(z[xe]){case`
`:N=0,++O;break;default:++N;break}}return L+=P,z=z.slice(P),R}function ve(be){return E.length&&J(E.join("")),I=x,J("(eof)"),R}function $(){return E=E.length?[]:E,k==="/"&&C==="*"?(G=L+P-1,I=o,k=C,P+1):k==="/"&&C==="/"?(G=L+P-1,I=l,k=C,P+1):C==="#"?(I=h,G=L+P,P):/\s/.test(C)?(I=y,G=L+P,P):(U=/\d/.test(C),Y=/[^\w_]/.test(C),G=L+P,I=U?s:Y?i:n,P)}function j(){return/[^\s]/g.test(C)?(J(E.join("")),I=f,P):(E.push(C),k=C,P+1)}function ae(){return(C==="\r"||C===`
`)&&k!=="\\"?(J(E.join("")),I=f,P):(E.push(C),k=C,P+1)}function ie(){return ae()}function te(){return C==="/"&&k==="*"?(E.push(C),J(E.join("")),I=f,P+1):(E.push(C),k=C,P+1)}function re(){if(k==="."&&/\d/.test(C))return I=p,P;if(k==="/"&&C==="*")return I=o,P;if(k==="/"&&C==="/")return I=l,P;if(C==="."&&E.length){for(;ce(E););return I=p,P}if(C===";"||C===")"||C==="("){if(E.length)for(;ce(E););return J(C),I=f,P+1}var be=E.length===2&&C!=="=";if(/[\w_\d\s]/.test(C)||be){for(;ce(E););return I=f,P}return E.push(C),k=C,P+1}function ce(be){var xe=0,ke,Re;do{if(ke=a.indexOf(be.slice(0,be.length+xe).join("")),Re=a[ke],ke===-1){if(xe--+be.length>0)continue;Re=be.slice(0,1).join("")}return J(Re),G+=Re.length,E=E.slice(Re.length),E.length}while(1)}function pe(){return/[^a-fA-F0-9]/.test(C)?(J(E.join("")),I=f,P):(E.push(C),k=C,P+1)}function fe(){return C==="."||/[eE]/.test(C)?(E.push(C),I=p,k=C,P+1):C==="x"&&E.length===1&&E[0]==="0"?(I=w,E.push(C),k=C,P+1):/[^\d]/.test(C)?(J(E.join("")),I=f,P):(E.push(C),k=C,P+1)}function se(){return C==="f"&&(E.push(C),k=C,P+=1),/[eE]/.test(C)||(C==="-"||C==="+")&&/[eE]/.test(k)?(E.push(C),k=C,P+1):/[^\d]/.test(C)?(J(E.join("")),I=f,P):(E.push(C),k=C,P+1)}function de(){if(/[^\d\w_]/.test(C)){var be=E.join("");return q[be]?I=b:Z[be]?I=m:I=v,J(E.join("")),I=f,P}return E.push(C),k=C,P+1}}},{"./lib/builtins":434,"./lib/builtins-300es":433,"./lib/literals":436,"./lib/literals-300es":435,"./lib/operators":437}],433:[function(e,d,S){var r=e("./builtins");r=r.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),d.exports=r.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":434}],434:[function(e,d,S){d.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],435:[function(e,d,S){var r=e("./literals");d.exports=r.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":436}],436:[function(e,d,S){d.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],437:[function(e,d,S){d.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],438:[function(e,d,S){var r=e("./index");d.exports=a;function a(u,c){var t=r(c),f=[];return f=f.concat(t(u)),f=f.concat(t(null)),f}},{"./index":432}],439:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],440:[function(e,d,S){(function(r){(function(){var a=e("is-browser"),u;typeof r.matchMedia=="function"?u=!r.matchMedia("(hover: none)").matches:u=a,d.exports=u}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":464}],441:[function(e,d,S){var r=e("is-browser");function a(){var u=!1;try{var c=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,c),window.removeEventListener("test",null,c)}catch{u=!1}return u}d.exports=r&&a()},{"is-browser":464}],442:[function(e,d,S){S.read=function(r,a,u,c,t){var f,n,o=t*8-c-1,l=(1<<o)-1,h=l>>1,i=-7,s=u?t-1:0,p=u?-1:1,v=r[a+s];for(s+=p,f=v&(1<<-i)-1,v>>=-i,i+=o;i>0;f=f*256+r[a+s],s+=p,i-=8);for(n=f&(1<<-i)-1,f>>=-i,i+=c;i>0;n=n*256+r[a+s],s+=p,i-=8);if(f===0)f=1-h;else{if(f===l)return n?NaN:(v?-1:1)*(1/0);n=n+Math.pow(2,c),f=f-h}return(v?-1:1)*n*Math.pow(2,f-c)},S.write=function(r,a,u,c,t,f){var n,o,l,h=f*8-t-1,i=(1<<h)-1,s=i>>1,p=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=c?0:f-1,m=c?1:-1,b=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,n=i):(n=Math.floor(Math.log(a)/Math.LN2),a*(l=Math.pow(2,-n))<1&&(n--,l*=2),n+s>=1?a+=p/l:a+=p*Math.pow(2,1-s),a*l>=2&&(n++,l/=2),n+s>=i?(o=0,n=i):n+s>=1?(o=(a*l-1)*Math.pow(2,t),n=n+s):(o=a*Math.pow(2,s-1)*Math.pow(2,t),n=0));t>=8;r[u+v]=o&255,v+=m,o/=256,t-=8);for(n=n<<t|o,h+=t;h>0;r[u+v]=n&255,v+=m,n/=256,h-=8);r[u+v-m]|=b*128}},{}],443:[function(e,d,S){var r=e("./types");d.exports=function(a,u){var c,t;for(c in r)if(t=r[c].detect(a,u),t)return c}},{"./types":446}],444:[function(e,d,S){(function(r){(function(){var a=e("fs"),u=e("path"),c=e("./types"),t=e("./detector"),f=512*1024;function n(h,i){var s=t(h,i);if(s in c){var p=c[s].calculate(h,i);if(p!==!1)return p.type=s,p}throw new TypeError("unsupported file type: "+s+" (file: "+i+")")}function o(h,i){a.open(h,"r",function(s,p){if(s)return i(s);a.fstat(p,function(v,m){if(v)return i(v);var b=m.size;if(b<=0)return i(new Error("File size is not greater than 0 \u2014\u2014 "+h));var y=Math.min(b,f),x=r.alloc(y);a.read(p,x,0,y,0,function(w){if(w)return i(w);a.close(p,function(g){i(g,x)})})})})}function l(h){var i=a.openSync(h,"r"),s=a.fstatSync(i).size,p=Math.min(s,f),v=r.alloc(p);return a.readSync(i,v,0,p,0),a.closeSync(i),v}d.exports=function(h,i){if(r.isBuffer(h))return n(h);if(typeof h!="string")throw new TypeError("invalid invocation");var s=u.resolve(h);if(typeof i=="function")o(s,function(v,m){if(v)return i(v);var b;try{b=n(m,s)}catch(y){v=y}i(v,b)});else{var p=l(s);return n(p,s)}},d.exports.types=Object.keys(c)}).call(this)}).call(this,e("buffer").Buffer)},{"./detector":443,"./types":446,buffer:111,fs:109,path:507}],445:[function(e,d,S){function r(a,u,c,t){c=c||0;var f=t?"BE":"LE",n=a["readUInt"+u+f];return n.call(a,c)}d.exports=r},{}],446:[function(e,d,S){var r={bmp:e("./types/bmp"),cur:e("./types/cur"),dds:e("./types/dds"),gif:e("./types/gif"),icns:e("./types/icns"),ico:e("./types/ico"),jpg:e("./types/jpg"),png:e("./types/png"),psd:e("./types/psd"),svg:e("./types/svg"),tiff:e("./types/tiff"),webp:e("./types/webp")};d.exports=r},{"./types/bmp":447,"./types/cur":448,"./types/dds":449,"./types/gif":450,"./types/icns":451,"./types/ico":452,"./types/jpg":453,"./types/png":454,"./types/psd":455,"./types/svg":456,"./types/tiff":457,"./types/webp":458}],447:[function(e,d,S){function r(u){return u.toString("ascii",0,2)==="BM"}function a(u){return{width:u.readUInt32LE(18),height:Math.abs(u.readInt32LE(22))}}d.exports={detect:r,calculate:a}},{}],448:[function(e,d,S){var r=2;function a(u){var c;return u.readUInt16LE(0)!==0?!1:(c=u.readUInt16LE(2),c===r)}d.exports={detect:a,calculate:e("./ico").calculate}},{"./ico":452}],449:[function(e,d,S){function r(u){return u.readUInt32LE(0)===542327876}function a(u){return{height:u.readUInt32LE(12),width:u.readUInt32LE(16)}}d.exports={detect:r,calculate:a}},{}],450:[function(e,d,S){var r=/^GIF8[79]a/;function a(c){var t=c.toString("ascii",0,6);return r.test(t)}function u(c){return{width:c.readUInt16LE(6),height:c.readUInt16LE(8)}}d.exports={detect:a,calculate:u}},{}],451:[function(e,d,S){var r=8,a=4,u=4;function c(l){return l.toString("ascii",0,4)==="icns"}var t={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function f(l,h){var i=h+u;return[l.toString("ascii",h,i),l.readUInt32BE(i)]}function n(l){var h=t[l];return{width:h,height:h,type:l}}function o(l){var h=l.length,i=r,s=l.readUInt32BE(a),p,v,m;if(p=f(l,i),v=n(p[0]),i+=p[1],i===s)return v;for(m={width:v.width,height:v.height,images:[v]};i<s&&i<h;)p=f(l,i),v=n(p[0]),i+=p[1],m.images.push(v);return m}d.exports={detect:c,calculate:o}},{}],452:[function(e,d,S){var r=1,a=2+2+2,u=1+1+1+1+2+2+4+4;function c(o){var l;return o.readUInt16LE(0)!==0?!1:(l=o.readUInt16LE(2),l===r)}function t(o,l){var h=o.readUInt8(l);return h===0?256:h}function f(o,l){var h=a+l*u;return{width:t(o,h),height:t(o,h+1)}}function n(o){var l=o.readUInt16LE(4),h=f(o,0),i;if(l===1)return h;for(h.images=[{width:h.width,height:h.height}],i=1;i<l;i+=1)h.images.push(f(o,i));return h}d.exports={detect:c,calculate:n}},{}],453:[function(e,d,S){var r=e("../readUInt");function a(b){var y=b.toString("hex",0,2);return y==="ffd8"}function u(b){var y=b.toString("hex",2,6);return y==="45786966"}function c(b,y){return{height:b.readUInt16BE(y),width:b.readUInt16BE(y+2)}}var t=2,f=6,n=2,o="4d4d",l="4949",h=12,i=2;function s(b,y){var x=b.slice(t,y),w=x.toString("hex",f,f+n),g=w===o,T=w===l;if(g||T)return p(x,g)}function p(b,y){for(var x=8,w=f+x,g=r(b,16,w,y),T,M,P=0;P<g;P++){if(T=w+i+P*h,M=T+h,T>b.length)return;var L=b.slice(T,M),I=r(L,16,0,y);if(I===274){var C=r(L,16,2,y);if(C!==3)return;var k=r(L,32,4,y);return k!==1?void 0:r(L,16,8,y)}}}function v(b,y){if(y>b.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(b[y]!==255)throw new TypeError("Invalid JPG, marker table corrupted")}function m(b){b=b.slice(4);for(var y,x,w;b.length;){if(x=b.readUInt16BE(0),u(b)&&(y=s(b,x)),v(b,x),w=b[x+1],w===192||w===193||w===194){var g=c(b,x+5);return y?{width:g.width,height:g.height,orientation:y}:g}b=b.slice(x+2)}throw new TypeError("Invalid JPG, no size found")}d.exports={detect:a,calculate:m}},{"../readUInt":445}],454:[function(e,d,S){var r=`PNG\r

`,a="IHDR",u="CgBI";function c(f){if(r===f.toString("ascii",1,8)){var n=f.toString("ascii",12,16);if(n===u&&(n=f.toString("ascii",28,32)),n!==a)throw new TypeError("invalid png");return!0}}function t(f){return f.toString("ascii",12,16)===u?{width:f.readUInt32BE(32),height:f.readUInt32BE(36)}:{width:f.readUInt32BE(16),height:f.readUInt32BE(20)}}d.exports={detect:c,calculate:t}},{}],455:[function(e,d,S){function r(u){return u.toString("ascii",0,4)==="8BPS"}function a(u){return{width:u.readUInt32BE(18),height:u.readUInt32BE(14)}}d.exports={detect:r,calculate:a}},{}],456:[function(e,d,S){var r=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/;function a(i){return r.test(i)}var u={root:r,width:/\swidth=(['"])([^%]+?)\1/,height:/\sheight=(['"])([^%]+?)\1/,viewbox:/\sviewBox=(['"])(.+?)\1/},c={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};function t(i){var s=/([0-9.]+)([a-z]*)/.exec(i);if(!!s)return Math.round(parseFloat(s[1])*(c[s[2]]||1))}function f(i){var s=i.split(" ");return{width:t(s[2]),height:t(s[3])}}function n(i){var s=i.match(u.width),p=i.match(u.height),v=i.match(u.viewbox);return{width:s&&t(s[2]),height:p&&t(p[2]),viewbox:v&&f(v[2])}}function o(i){return{width:i.width,height:i.height}}function l(i){var s=i.viewbox.width/i.viewbox.height;return i.width?{width:i.width,height:Math.floor(i.width/s)}:i.height?{width:Math.floor(i.height*s),height:i.height}:{width:i.viewbox.width,height:i.viewbox.height}}function h(i){var s=i.toString("utf8").match(u.root);if(s){var p=n(s[0]);if(p.width&&p.height)return o(p);if(p.viewbox)return l(p)}throw new TypeError("invalid svg")}d.exports={detect:a,calculate:h}},{}],457:[function(e,d,S){(function(r){(function(){var a=e("fs"),u=e("../readUInt");function c(i){var s=i.toString("hex",0,4);return s==="49492a00"||s==="4d4d002a"}function t(i,s,p){var v=u(i,32,4,p),m=1024,b=a.statSync(s).size;v+m>b&&(m=b-v-10);var y=r.alloc(m),x=a.openSync(s,"r");a.readSync(x,y,0,m,v);var w=y.slice(2);return w}function f(i,s){var p=u(i,16,8,s),v=u(i,16,10,s);return(v<<16)+p}function n(i){if(i.length>24)return i.slice(12)}function o(i,s){for(var p={},v,m,b;i&&i.length&&(v=u(i,16,0,s),m=u(i,16,2,s),b=u(i,32,4,s),v!==0);)b===1&&(m===3||m===4)&&(p[v]=f(i,s)),i=n(i);return p}function l(i){var s=i.toString("ascii",0,2);if(s==="II")return"LE";if(s==="MM")return"BE"}function h(i,s){if(!s)throw new TypeError("Tiff doesn't support buffer");var p=l(i)==="BE",v=t(i,s,p),m=o(v,p),b=m[256],y=m[257];if(!b||!y)throw new TypeError("Invalid Tiff, missing tags");return{width:b,height:y}}d.exports={detect:c,calculate:h}}).call(this)}).call(this,e("buffer").Buffer)},{"../readUInt":445,buffer:111,fs:109}],458:[function(e,d,S){function r(f){var n=f.toString("ascii",0,4)==="RIFF",o=f.toString("ascii",8,12)==="WEBP",l=f.toString("ascii",12,15)==="VP8";return n&&o&&l}function a(f){var n=f.toString("ascii",12,16);if(f=f.slice(20,30),n==="VP8X"){var o=f[0],l=(o&192)===0,h=(o&1)===0;return l&&h?u(f):!1}if(n==="VP8 "&&f[0]!==47)return t(f);var i=f.toString("hex",3,6);return n==="VP8L"&&i!=="9d012a"?c(f):!1}function u(f){return{width:1+f.readUIntLE(4,3),height:1+f.readUIntLE(7,3)}}function c(f){return{width:1+((f[2]&63)<<8|f[1]),height:1+((f[4]&15)<<10|f[3]<<2|(f[2]&192)>>6)}}function t(f){return{width:f.readInt16LE(6)&16383,height:f.readInt16LE(8)&16383}}d.exports={detect:r,calculate:a}},{}],459:[function(e,d,S){d.exports=h;var r=e("robust-orientation"),a=e("simplicial-complex").compareCells;function u(i,s,p){this.vertices=i,this.adjacent=s,this.boundary=p,this.lastVisited=-1}u.prototype.flip=function(){var i=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=i;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};function c(i,s,p){this.vertices=i,this.cell=s,this.index=p}function t(i,s){return a(i.vertices,s.vertices)}function f(i){for(var s=["function orient(){var tuple=this.tuple;return test("],p=0;p<=i;++p)p>0&&s.push(","),s.push("tuple[",p,"]");s.push(")}return orient");var v=new Function("test",s.join("")),m=r[i+1];return m||(m=r),v(m)}var n=[];function o(i,s,p){this.dimension=i,this.vertices=s,this.simplices=p,this.interior=p.filter(function(b){return!b.boundary}),this.tuple=new Array(i+1);for(var v=0;v<=i;++v)this.tuple[v]=this.vertices[v];var m=n[i];m||(m=n[i]=f(i)),this.orient=m}var l=o.prototype;l.handleBoundaryDegeneracy=function(i,s){var p=this.dimension,v=this.vertices.length-1,m=this.tuple,b=this.vertices,y=[i];for(i.lastVisited=-v;y.length>0;){i=y.pop(),i.vertices;for(var x=i.adjacent,w=0;w<=p;++w){var g=x[w];if(!(!g.boundary||g.lastVisited<=-v)){for(var T=g.vertices,M=0;M<=p;++M){var P=T[M];P<0?m[M]=s:m[M]=b[P]}var L=this.orient();if(L>0)return g;g.lastVisited=-v,L===0&&y.push(g)}}}return null},l.walk=function(i,s){var p=this.vertices.length-1,v=this.dimension,m=this.vertices,b=this.tuple,y=s?this.interior.length*Math.random()|0:this.interior.length-1,x=this.interior[y];e:for(;!x.boundary;){for(var w=x.vertices,g=x.adjacent,T=0;T<=v;++T)b[T]=m[w[T]];x.lastVisited=p;for(var T=0;T<=v;++T){var M=g[T];if(!(M.lastVisited>=p)){var P=b[T];b[T]=i;var L=this.orient();if(b[T]=P,L<0){x=M;continue e}else M.boundary?M.lastVisited=-p:M.lastVisited=p}}return}return x},l.addPeaks=function(i,s){var p=this.vertices.length-1,v=this.dimension,m=this.vertices,b=this.tuple,y=this.interior,x=this.simplices,w=[s];s.lastVisited=p,s.vertices[s.vertices.indexOf(-1)]=p,s.boundary=!1,y.push(s);for(var g=[];w.length>0;){var s=w.pop(),T=s.vertices,M=s.adjacent,P=T.indexOf(p);if(!(P<0)){for(var L=0;L<=v;++L)if(L!==P){var I=M[L];if(!(!I.boundary||I.lastVisited>=p)){var C=I.vertices;if(I.lastVisited!==-p){for(var k=0,E=0;E<=v;++E)C[E]<0?(k=E,b[E]=i):b[E]=m[C[E]];var R=this.orient();if(R>0){C[k]=p,I.boundary=!1,y.push(I),w.push(I),I.lastVisited=p;continue}else I.lastVisited=-p}var O=I.adjacent,N=T.slice(),G=M.slice(),U=new u(N,G,!0);x.push(U);var Y=O.indexOf(s);if(!(Y<0)){O[Y]=U,G[P]=I,N[L]=-1,G[L]=s,M[L]=U,U.flip();for(var E=0;E<=v;++E){var z=N[E];if(!(z<0||z===p)){for(var B=new Array(v-1),H=0,V=0;V<=v;++V){var Z=N[V];Z<0||V===E||(B[H++]=Z)}g.push(new c(B,U,E))}}}}}}}g.sort(t);for(var L=0;L+1<g.length;L+=2){var q=g[L],J=g[L+1],ne=q.index,ve=J.index;ne<0||ve<0||(q.cell.adjacent[q.index]=J.cell,J.cell.adjacent[J.index]=q.cell)}},l.insert=function(i,s){var p=this.vertices;p.push(i);var v=this.walk(i,s);if(!!v){for(var m=this.dimension,b=this.tuple,y=0;y<=m;++y){var x=v.vertices[y];x<0?b[y]=i:b[y]=p[x]}var w=this.orient(b);w<0||w===0&&(v=this.handleBoundaryDegeneracy(v,i),!v)||this.addPeaks(i,v)}},l.boundary=function(){for(var i=this.dimension,s=[],p=this.simplices,v=p.length,m=0;m<v;++m){var b=p[m];if(b.boundary){for(var y=new Array(i),x=b.vertices,w=0,g=0,T=0;T<=i;++T)x[T]>=0?y[w++]=x[T]:g=T&1;if(g===(i&1)){var M=y[0];y[0]=y[1],y[1]=M}s.push(y)}}return s};function h(i,s){var p=i.length;if(p===0)throw new Error("Must have at least d+1 points");var v=i[0].length;if(p<=v)throw new Error("Must input at least d+1 points");var m=i.slice(0,v+1),b=r.apply(void 0,m);if(b===0)throw new Error("Input not in general position");for(var y=new Array(v+1),x=0;x<=v;++x)y[x]=x;b<0&&(y[0]=1,y[1]=0);for(var w=new u(y,new Array(v+1),!1),g=w.adjacent,T=new Array(v+2),x=0;x<=v;++x){for(var M=y.slice(),P=0;P<=v;++P)P===x&&(M[P]=-1);var L=M[0];M[0]=M[1],M[1]=L;var I=new u(M,new Array(v+1),!0);g[x]=I,T[x]=I}T[v+1]=w;for(var x=0;x<=v;++x)for(var M=g[x].vertices,C=g[x].adjacent,P=0;P<=v;++P){var k=M[P];if(k<0){C[P]=w;continue}for(var E=0;E<=v;++E)g[E].vertices.indexOf(k)<0&&(C[P]=g[E])}for(var R=new o(v,m,T),O=!!s,x=v+1;x<p;++x)R.insert(i[x],O);return R.boundary()}},{"robust-orientation":548,"simplicial-complex":558}],460:[function(e,d,S){var r=e("binary-search-bounds"),a=0,u=1,c=2;d.exports=g;function t(T,M,P,L,I){this.mid=T,this.left=M,this.right=P,this.leftPoints=L,this.rightPoints=I,this.count=(M?M.count:0)+(P?P.count:0)+L.length}var f=t.prototype;function n(T,M){T.mid=M.mid,T.left=M.left,T.right=M.right,T.leftPoints=M.leftPoints,T.rightPoints=M.rightPoints,T.count=M.count}function o(T,M){var P=y(M);T.mid=P.mid,T.left=P.left,T.right=P.right,T.leftPoints=P.leftPoints,T.rightPoints=P.rightPoints,T.count=P.count}function l(T,M){var P=T.intervals([]);P.push(M),o(T,P)}function h(T,M){var P=T.intervals([]),L=P.indexOf(M);return L<0?a:(P.splice(L,1),o(T,P),u)}f.intervals=function(T){return T.push.apply(T,this.leftPoints),this.left&&this.left.intervals(T),this.right&&this.right.intervals(T),T},f.insert=function(T){var M=this.count-this.leftPoints.length;if(this.count+=1,T[1]<this.mid)this.left?4*(this.left.count+1)>3*(M+1)?l(this,T):this.left.insert(T):this.left=y([T]);else if(T[0]>this.mid)this.right?4*(this.right.count+1)>3*(M+1)?l(this,T):this.right.insert(T):this.right=y([T]);else{var P=r.ge(this.leftPoints,T,m),L=r.ge(this.rightPoints,T,b);this.leftPoints.splice(P,0,T),this.rightPoints.splice(L,0,T)}},f.remove=function(T){var M=this.count-this.leftPoints;if(T[1]<this.mid){if(!this.left)return a;var P=this.right?this.right.count:0;if(4*P>3*(M-1))return h(this,T);var L=this.left.remove(T);return L===c?(this.left=null,this.count-=1,u):(L===u&&(this.count-=1),L)}else if(T[0]>this.mid){if(!this.right)return a;var I=this.left?this.left.count:0;if(4*I>3*(M-1))return h(this,T);var L=this.right.remove(T);return L===c?(this.right=null,this.count-=1,u):(L===u&&(this.count-=1),L)}else{if(this.count===1)return this.leftPoints[0]===T?c:a;if(this.leftPoints.length===1&&this.leftPoints[0]===T){if(this.left&&this.right){for(var C=this,k=this.left;k.right;)C=k,k=k.right;if(C===this)k.right=this.right;else{var E=this.left,L=this.right;C.count-=k.count,C.right=k.left,k.left=E,k.right=L}n(this,k),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?n(this,this.left):n(this,this.right);return u}for(var E=r.ge(this.leftPoints,T,m);E<this.leftPoints.length&&this.leftPoints[E][0]===T[0];++E)if(this.leftPoints[E]===T){this.count-=1,this.leftPoints.splice(E,1);for(var L=r.ge(this.rightPoints,T,b);L<this.rightPoints.length&&this.rightPoints[L][1]===T[1];++L)if(this.rightPoints[L]===T)return this.rightPoints.splice(L,1),u}return a}};function i(T,M,P){for(var L=0;L<T.length&&T[L][0]<=M;++L){var I=P(T[L]);if(I)return I}}function s(T,M,P){for(var L=T.length-1;L>=0&&T[L][1]>=M;--L){var I=P(T[L]);if(I)return I}}function p(T,M){for(var P=0;P<T.length;++P){var L=M(T[P]);if(L)return L}}f.queryPoint=function(T,M){if(T<this.mid){if(this.left){var P=this.left.queryPoint(T,M);if(P)return P}return i(this.leftPoints,T,M)}else if(T>this.mid){if(this.right){var P=this.right.queryPoint(T,M);if(P)return P}return s(this.rightPoints,T,M)}else return p(this.leftPoints,M)},f.queryInterval=function(T,M,P){if(T<this.mid&&this.left){var L=this.left.queryInterval(T,M,P);if(L)return L}if(M>this.mid&&this.right){var L=this.right.queryInterval(T,M,P);if(L)return L}return M<this.mid?i(this.leftPoints,M,P):T>this.mid?s(this.rightPoints,T,P):p(this.leftPoints,P)};function v(T,M){return T-M}function m(T,M){var P=T[0]-M[0];return P||T[1]-M[1]}function b(T,M){var P=T[1]-M[1];return P||T[0]-M[0]}function y(T){if(T.length===0)return null;for(var M=[],P=0;P<T.length;++P)M.push(T[P][0],T[P][1]);M.sort(v);for(var L=M[M.length>>1],I=[],C=[],k=[],P=0;P<T.length;++P){var E=T[P];E[1]<L?I.push(E):L<E[0]?C.push(E):k.push(E)}var R=k,O=k.slice();return R.sort(m),O.sort(b),new t(L,y(I),y(C),R,O)}function x(T){this.root=T}var w=x.prototype;w.insert=function(T){this.root?this.root.insert(T):this.root=new t(T[0],null,null,[T],[T])},w.remove=function(T){if(this.root){var M=this.root.remove(T);return M===c&&(this.root=null),M!==a}return!1},w.queryPoint=function(T,M){if(this.root)return this.root.queryPoint(T,M)},w.queryInterval=function(T,M,P){if(T<=M&&this.root)return this.root.queryInterval(T,M,P)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function g(T){return!T||T.length===0?new x(null):new x(y(T))}},{"binary-search-bounds":461}],461:[function(e,d,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],462:[function(e,d,S){function r(a,u){u=u||new Array(a.length);for(var c=0;c<a.length;++c)u[a[c]]=c;return u}d.exports=r},{}],463:[function(e,d,S){function r(a){for(var u=new Array(a),c=0;c<a;++c)u[c]=c;return u}d.exports=r},{}],464:[function(e,d,S){d.exports=!0},{}],465:[function(e,d,S){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */d.exports=function(u){return u!=null&&(r(u)||a(u)||!!u._isBuffer)};function r(u){return!!u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u)}function a(u){return typeof u.readFloatLE=="function"&&typeof u.slice=="function"&&r(u.slice(0,0))}},{}],466:[function(e,d,S){d.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],467:[function(e,d,S){d.exports=u,d.exports.isMobile=u,d.exports.default=u;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function u(c){c||(c={});var t=c.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var f=c.tablet?a.test(t):r.test(t);return!f&&c.tablet&&c.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(f=!0),f}},{}],468:[function(e,d,S){d.exports=function(r){var a=typeof r;return r!==null&&(a==="object"||a==="function")}},{}],469:[function(e,d,S){var r=Object.prototype.toString;d.exports=function(a){var u;return r.call(a)==="[object Object]"&&(u=Object.getPrototypeOf(a),u===null||u===Object.getPrototypeOf({}))}},{}],470:[function(e,d,S){d.exports=function(r){for(var a=r.length,u,c=0;c<a;c++)if(u=r.charCodeAt(c),(u<9||u>13)&&u!==32&&u!==133&&u!==160&&u!==5760&&u!==6158&&(u<8192||u>8205)&&u!==8232&&u!==8233&&u!==8239&&u!==8287&&u!==8288&&u!==12288&&u!==65279)return!1;return!0}},{}],471:[function(e,d,S){d.exports=function(a){return typeof a!="string"?!1:(a=a.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(a)&&/[\dz]$/i.test(a)&&a.length>4))}},{}],472:[function(e,d,S){function r(a,u,c){return a*(1-c)+u*c}d.exports=r},{}],473:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?d.exports=a():(r=r||self,r.mapboxgl=a())})(this,function(){var r,a,u;function c(t,f){if(!r)r=f;else if(!a)a=f;else{var n="var sharedChunk = {}; ("+r+")(sharedChunk); ("+a+")(sharedChunk);",o={};r(o),u=f(o),u.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}}return c(["exports"],function(t){function f(_,F){return _(F={exports:{}},F.exports),F.exports}var n=o;function o(_,F,X,le){this.cx=3*_,this.bx=3*(X-_)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*F,this.by=3*(le-F)-this.cy,this.ay=1-this.cy-this.by,this.p1x=_,this.p1y=le,this.p2x=X,this.p2y=le}o.prototype.sampleCurveX=function(_){return((this.ax*_+this.bx)*_+this.cx)*_},o.prototype.sampleCurveY=function(_){return((this.ay*_+this.by)*_+this.cy)*_},o.prototype.sampleCurveDerivativeX=function(_){return(3*this.ax*_+2*this.bx)*_+this.cx},o.prototype.solveCurveX=function(_,F){var X,le,ye,we,Pe;for(F===void 0&&(F=1e-6),ye=_,Pe=0;Pe<8;Pe++){if(we=this.sampleCurveX(ye)-_,Math.abs(we)<F)return ye;var Xe=this.sampleCurveDerivativeX(ye);if(Math.abs(Xe)<1e-6)break;ye-=we/Xe}if((ye=_)<(X=0))return X;if(ye>(le=1))return le;for(;X<le;){if(we=this.sampleCurveX(ye),Math.abs(we-_)<F)return ye;_>we?X=ye:le=ye,ye=.5*(le-X)+X}return ye},o.prototype.solve=function(_,F){return this.sampleCurveY(this.solveCurveX(_,F))};var l=h;function h(_,F){this.x=_,this.y=F}function i(_,F,X,le){var ye=new n(_,F,X,le);return function(we){return ye.solve(we)}}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(_){return this.clone()._add(_)},sub:function(_){return this.clone()._sub(_)},multByPoint:function(_){return this.clone()._multByPoint(_)},divByPoint:function(_){return this.clone()._divByPoint(_)},mult:function(_){return this.clone()._mult(_)},div:function(_){return this.clone()._div(_)},rotate:function(_){return this.clone()._rotate(_)},rotateAround:function(_,F){return this.clone()._rotateAround(_,F)},matMult:function(_){return this.clone()._matMult(_)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(_){return this.x===_.x&&this.y===_.y},dist:function(_){return Math.sqrt(this.distSqr(_))},distSqr:function(_){var F=_.x-this.x,X=_.y-this.y;return F*F+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(_){return Math.atan2(this.y-_.y,this.x-_.x)},angleWith:function(_){return this.angleWithSep(_.x,_.y)},angleWithSep:function(_,F){return Math.atan2(this.x*F-this.y*_,this.x*_+this.y*F)},_matMult:function(_){var F=_[2]*this.x+_[3]*this.y;return this.x=_[0]*this.x+_[1]*this.y,this.y=F,this},_add:function(_){return this.x+=_.x,this.y+=_.y,this},_sub:function(_){return this.x-=_.x,this.y-=_.y,this},_mult:function(_){return this.x*=_,this.y*=_,this},_div:function(_){return this.x/=_,this.y/=_,this},_multByPoint:function(_){return this.x*=_.x,this.y*=_.y,this},_divByPoint:function(_){return this.x/=_.x,this.y/=_.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var _=this.y;return this.y=this.x,this.x=-_,this},_rotate:function(_){var F=Math.cos(_),X=Math.sin(_),le=X*this.x+F*this.y;return this.x=F*this.x-X*this.y,this.y=le,this},_rotateAround:function(_,F){var X=Math.cos(_),le=Math.sin(_),ye=F.y+le*(this.x-F.x)+X*(this.y-F.y);return this.x=F.x+X*(this.x-F.x)-le*(this.y-F.y),this.y=ye,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(_){return _ instanceof h?_:Array.isArray(_)?new h(_[0],_[1]):_};var s=i(.25,.1,.25,1);function p(_,F,X){return Math.min(X,Math.max(F,_))}function v(_,F,X){var le=X-F,ye=((_-F)%le+le)%le+F;return ye===F?X:ye}function m(_){for(var F=[],X=arguments.length-1;X-- >0;)F[X]=arguments[X+1];for(var le=0,ye=F;le<ye.length;le+=1){var we=ye[le];for(var Pe in we)_[Pe]=we[Pe]}return _}var b=1;function y(){return b++}function x(){return function _(F){return F?(F^16*Math.random()>>F/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,_)}()}function w(_){return!!_&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(_)}function g(_,F){_.forEach(function(X){F[X]&&(F[X]=F[X].bind(F))})}function T(_,F){return _.indexOf(F,_.length-F.length)!==-1}function M(_,F,X){var le={};for(var ye in _)le[ye]=F.call(X||this,_[ye],ye,_);return le}function P(_,F,X){var le={};for(var ye in _)F.call(X||this,_[ye],ye,_)&&(le[ye]=_[ye]);return le}function L(_){return Array.isArray(_)?_.map(L):typeof _=="object"&&_?M(_,L):_}var I={};function C(_){I[_]||(typeof console<"u"&&console.warn(_),I[_]=!0)}function k(_,F,X){return(X.y-_.y)*(F.x-_.x)>(F.y-_.y)*(X.x-_.x)}function E(_){for(var F=0,X=0,le=_.length,ye=le-1,we=void 0,Pe=void 0;X<le;ye=X++)F+=((Pe=_[ye]).x-(we=_[X]).x)*(we.y+Pe.y);return F}function R(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function O(_){var F={};if(_.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,ye,we,Pe){var Xe=we||Pe;return F[ye]=!Xe||Xe.toLowerCase(),""}),F["max-age"]){var X=parseInt(F["max-age"],10);isNaN(X)?delete F["max-age"]:F["max-age"]=X}return F}var N=null;function G(_){if(N==null){var F=_.navigator?_.navigator.userAgent:null;N=!!_.safari||!(!F||!(/\b(iPad|iPhone|iPod)\b/.test(F)||F.match("Safari")&&!F.match("Chrome")))}return N}function U(_){try{var F=self[_];return F.setItem("_mapbox_test_",1),F.removeItem("_mapbox_test_"),!0}catch{return!1}}var Y,z,B,H,V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Z=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,J={now:V,frame:function(_){var F=Z(_);return{cancel:function(){return q(F)}}},getImageData:function(_,F){F===void 0&&(F=0);var X=self.document.createElement("canvas"),le=X.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return X.width=_.width,X.height=_.height,le.drawImage(_,0,0,_.width,_.height),le.getImageData(-F,-F,_.width+2*F,_.height+2*F)},resolveURL:function(_){return Y||(Y=self.document.createElement("a")),Y.href=_,Y.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(z==null&&(z=self.matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}},ne={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ve={supported:!1,testSupport:function(_){!$&&H&&(j?ae(_):B=_)}},$=!1,j=!1;function ae(_){var F=_.createTexture();_.bindTexture(_.TEXTURE_2D,F);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,H),_.isContextLost())return;ve.supported=!0}catch{}_.deleteTexture(F),$=!0}self.document&&((H=self.document.createElement("img")).onload=function(){B&&ae(B),B=null,j=!0},H.onerror=function(){$=!0,B=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ie="01",te=function(_,F){this._transformRequestFn=_,this._customAccessToken=F,this._createSkuToken()};function re(_){return _.indexOf("mapbox:")===0}te.prototype._createSkuToken=function(){var _=function(){for(var F="",X=0;X<10;X++)F+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ie,F].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=_.token,this._skuTokenExpiresAt=_.tokenExpiresAt},te.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},te.prototype.transformRequest=function(_,F){return this._transformRequestFn&&this._transformRequestFn(_,F)||{url:_}},te.prototype.normalizeStyleURL=function(_,F){if(!re(_))return _;var X=se(_);return X.path="/styles/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||F)},te.prototype.normalizeGlyphsURL=function(_,F){if(!re(_))return _;var X=se(_);return X.path="/fonts/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||F)},te.prototype.normalizeSourceURL=function(_,F){if(!re(_))return _;var X=se(_);return X.path="/v4/"+X.authority+".json",X.params.push("secure"),this._makeAPIURL(X,this._customAccessToken||F)},te.prototype.normalizeSpriteURL=function(_,F,X,le){var ye=se(_);return re(_)?(ye.path="/styles/v1"+ye.path+"/sprite"+F+X,this._makeAPIURL(ye,this._customAccessToken||le)):(ye.path+=""+F+X,de(ye))},te.prototype.normalizeTileURL=function(_,F){if(this._isSkuTokenExpired()&&this._createSkuToken(),_&&!re(_))return _;var X=se(_);X.path=X.path.replace(/(\.(png|jpg)\d*)(?=$)/,(J.devicePixelRatio>=2||F===512?"@2x":"")+(ve.supported?".webp":"$1")),X.path=X.path.replace(/^.+\/v4\//,"/"),X.path="/v4"+X.path;var le=this._customAccessToken||function(ye){for(var we=0,Pe=ye;we<Pe.length;we+=1){var Xe=Pe[we].match(/^access_token=(.*)$/);if(Xe)return Xe[1]}return null}(X.params)||ne.ACCESS_TOKEN;return ne.REQUIRE_ACCESS_TOKEN&&le&&this._skuToken&&X.params.push("sku="+this._skuToken),this._makeAPIURL(X,le)},te.prototype.canonicalizeTileURL=function(_,F){var X=se(_);if(!X.path.match(/(^\/v4\/)/)||!X.path.match(/\.[\w]+$/))return _;var le="mapbox://tiles/";le+=X.path.replace("/v4/","");var ye=X.params;return F&&(ye=ye.filter(function(we){return!we.match(/^access_token=/)})),ye.length&&(le+="?"+ye.join("&")),le},te.prototype.canonicalizeTileset=function(_,F){for(var X=!!F&&re(F),le=[],ye=0,we=_.tiles||[];ye<we.length;ye+=1){var Pe=we[ye];pe(Pe)?le.push(this.canonicalizeTileURL(Pe,X)):le.push(Pe)}return le},te.prototype._makeAPIURL=function(_,F){var X="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=se(ne.API_URL);if(_.protocol=le.protocol,_.authority=le.authority,le.path!=="/"&&(_.path=""+le.path+_.path),!ne.REQUIRE_ACCESS_TOKEN)return de(_);if(!(F=F||ne.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+X);if(F[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+X);return _.params=_.params.filter(function(ye){return ye.indexOf("access_token")===-1}),_.params.push("access_token="+F),de(_)};var ce=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function pe(_){return ce.test(_)}var fe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function se(_){var F=_.match(fe);if(!F)throw new Error("Unable to parse URL object");return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}function de(_){var F=_.params.length?"?"+_.params.join("&"):"";return _.protocol+"://"+_.authority+_.path+F}function be(_){if(!_)return null;var F=_.split(".");if(!F||F.length!==3)return null;try{return JSON.parse(decodeURIComponent(self.atob(F[1]).split("").map(function(X){return"%"+("00"+X.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var xe=function(_){this.type=_,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};xe.prototype.getStorageKey=function(_){var F,X=be(ne.ACCESS_TOKEN);return F=X&&X.u?self.btoa(encodeURIComponent(X.u).replace(/%([0-9A-F]{2})/g,function(le,ye){return String.fromCharCode(Number("0x"+ye))})):ne.ACCESS_TOKEN||"",_?"mapbox.eventData."+_+":"+F:"mapbox.eventData:"+F},xe.prototype.fetchEventData=function(){var _=U("localStorage"),F=this.getStorageKey(),X=this.getStorageKey("uuid");if(_)try{var le=self.localStorage.getItem(F);le&&(this.eventData=JSON.parse(le));var ye=self.localStorage.getItem(X);ye&&(this.anonId=ye)}catch{C("Unable to read from LocalStorage")}},xe.prototype.saveEventData=function(){var _=U("localStorage"),F=this.getStorageKey(),X=this.getStorageKey("uuid");if(_)try{self.localStorage.setItem(X,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(F,JSON.stringify(this.eventData))}catch{C("Unable to write to LocalStorage")}},xe.prototype.processRequests=function(_){},xe.prototype.postEvent=function(_,F,X,le){var ye=this;if(ne.EVENTS_URL){var we=se(ne.EVENTS_URL);we.params.push("access_token="+(le||ne.ACCESS_TOKEN||""));var Pe={event:this.type,created:new Date(_).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:ie,userId:this.anonId},Xe=F?m(Pe,F):Pe,ct={url:de(we),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Xe])};this.pendingRequest=At(ct,function(Tt){ye.pendingRequest=null,X(Tt),ye.saveEventData(),ye.processRequests(le)})}},xe.prototype.queueRequest=function(_,F){this.queue.push(_),this.processRequests(F)};var ke,Re,Ke=function(_){function F(){_.call(this,"map.load"),this.success={},this.skuToken=""}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.postMapLoadEvent=function(X,le,ye,we){this.skuToken=ye,(ne.EVENTS_URL&&we||ne.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(Pe){return re(Pe)||pe(Pe)}))&&this.queueRequest({id:le,timestamp:Date.now()},we)},F.prototype.processRequests=function(X){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var ye=this.queue.shift(),we=ye.id,Pe=ye.timestamp;we&&this.success[we]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=x()),this.postEvent(Pe,{skuToken:this.skuToken},function(Xe){Xe||we&&(le.success[we]=!0)},X))}},F}(xe),ze=new(function(_){function F(X){_.call(this,"appUserTurnstile"),this._customAccessToken=X}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.postTurnstileEvent=function(X,le){ne.EVENTS_URL&&ne.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(ye){return re(ye)||pe(ye)})&&this.queueRequest(Date.now(),le)},F.prototype.processRequests=function(X){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ye=be(ne.ACCESS_TOKEN),we=ye?ye.u:ne.ACCESS_TOKEN,Pe=we!==this.eventData.tokenU;w(this.anonId)||(this.anonId=x(),Pe=!0);var Xe=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),Tt=new Date(Xe),Lt=(Xe-this.eventData.lastSuccess)/864e5;Pe=Pe||Lt>=1||Lt<-1||ct.getDate()!==Tt.getDate()}else Pe=!0;if(!Pe)return this.processRequests();this.postEvent(Xe,{"enabled.telemetry":!1},function(It){It||(le.eventData.lastSuccess=Xe,le.eventData.tokenU=we)},X)}},F}(xe)),Je=ze.postTurnstileEvent.bind(ze),qe=new Ke,Ee=qe.postMapLoadEvent.bind(qe),Ae=500,Be=50;function $e(){self.caches&&!ke&&(ke=self.caches.open("mapbox-tiles"))}function xt(_){var F=_.indexOf("?");return F<0?_:_.slice(0,F)}var bt,Ne=1/0;function st(){return bt==null&&(bt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),bt}var _t={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(_t);var Ot=function(_){function F(X,le,ye){le===401&&pe(ye)&&(X+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),_.call(this,X),this.status=le,this.url=ye,this.name=this.constructor.name,this.message=X}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},F}(Error),Wt=R()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Et,jt,Zt=function(_,F){if(!(/^file:/.test(X=_.url)||/^file:/.test(Wt())&&!/^\w+:/.test(X))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(le,ye){var we,Pe=new self.AbortController,Xe=new self.Request(le.url,{method:le.method||"GET",body:le.body,credentials:le.credentials,headers:le.headers,referrer:Wt(),signal:Pe.signal}),ct=!1,Tt=!1,Lt=(we=Xe.url).indexOf("sku=")>0&&pe(we);le.type==="json"&&Xe.headers.set("Accept","application/json");var It=function(Jt,pr,dr){if(!Tt){if(Jt&&Jt.message!=="SecurityError"&&C(Jt),pr&&dr)return Gt(pr);var zr=Date.now();self.fetch(Xe).then(function(Ar){if(Ar.ok){var Xr=Lt?Ar.clone():null;return Gt(Ar,Xr,zr)}return ye(new Ot(Ar.statusText,Ar.status,le.url))}).catch(function(Ar){Ar.code!==20&&ye(new Error(Ar.message))})}},Gt=function(Jt,pr,dr){(le.type==="arrayBuffer"?Jt.arrayBuffer():le.type==="json"?Jt.json():Jt.text()).then(function(zr){Tt||(pr&&dr&&function(Ar,Xr,rn){if($e(),ke){var mn={status:Xr.status,statusText:Xr.statusText,headers:new self.Headers};Xr.headers.forEach(function(Ln,$n){return mn.headers.set($n,Ln)});var gn=O(Xr.headers.get("Cache-Control")||"");gn["no-store"]||(gn["max-age"]&&mn.headers.set("Expires",new Date(rn+1e3*gn["max-age"]).toUTCString()),new Date(mn.headers.get("Expires")).getTime()-rn<42e4||function(Ln,$n){if(Re===void 0)try{new Response(new ReadableStream),Re=!0}catch{Re=!1}Re?$n(Ln.body):Ln.blob().then($n)}(Xr,function(Ln){var $n=new self.Response(Ln,mn);$e(),ke&&ke.then(function(oa){return oa.put(xt(Ar.url),$n)}).catch(function(oa){return C(oa.message)})}))}}(Xe,pr,dr),ct=!0,ye(null,zr,Jt.headers.get("Cache-Control"),Jt.headers.get("Expires")))}).catch(function(zr){Tt||ye(new Error(zr.message))})};return Lt?function(Jt,pr){if($e(),!ke)return pr(null);var dr=xt(Jt.url);ke.then(function(zr){zr.match(dr).then(function(Ar){var Xr=function(rn){if(!rn)return!1;var mn=new Date(rn.headers.get("Expires")||0),gn=O(rn.headers.get("Cache-Control")||"");return mn>Date.now()&&!gn["no-cache"]}(Ar);zr.delete(dr),Xr&&zr.put(dr,Ar.clone()),pr(null,Ar,Xr)}).catch(pr)}).catch(pr)}(Xe,It):It(null,null),{cancel:function(){Tt=!0,ct||Pe.abort()}}}(_,F);if(R()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",_,F,void 0,!0)}var X;return function(le,ye){var we=new self.XMLHttpRequest;for(var Pe in we.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(we.responseType="arraybuffer"),le.headers)we.setRequestHeader(Pe,le.headers[Pe]);return le.type==="json"&&(we.responseType="text",we.setRequestHeader("Accept","application/json")),we.withCredentials=le.credentials==="include",we.onerror=function(){ye(new Error(we.statusText))},we.onload=function(){if((we.status>=200&&we.status<300||we.status===0)&&we.response!==null){var Xe=we.response;if(le.type==="json")try{Xe=JSON.parse(we.response)}catch(ct){return ye(ct)}ye(null,Xe,we.getResponseHeader("Cache-Control"),we.getResponseHeader("Expires"))}else ye(new Ot(we.statusText,we.status,le.url))},we.send(le.body),{cancel:function(){return we.abort()}}}(_,F)},Mt=function(_,F){return Zt(m(_,{type:"arrayBuffer"}),F)},At=function(_,F){return Zt(m(_,{method:"POST"}),F)};Et=[],jt=0;var ft=function(_,F){if(ve.supported&&(_.headers||(_.headers={}),_.headers.accept="image/webp,*/*"),jt>=ne.MAX_PARALLEL_IMAGE_REQUESTS){var X={requestParameters:_,callback:F,cancelled:!1,cancel:function(){this.cancelled=!0}};return Et.push(X),X}jt++;var le=!1,ye=function(){if(!le)for(le=!0,jt--;Et.length&&jt<ne.MAX_PARALLEL_IMAGE_REQUESTS;){var Pe=Et.shift();Pe.cancelled||(Pe.cancel=ft(Pe.requestParameters,Pe.callback).cancel)}},we=Mt(_,function(Pe,Xe,ct,Tt){ye(),Pe?F(Pe):Xe&&(st()?function(Lt,It){var Gt=new self.Blob([new Uint8Array(Lt)],{type:"image/png"});self.createImageBitmap(Gt).then(function(Jt){It(null,Jt)}).catch(function(Jt){It(new Error("Could not load image because of "+Jt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Xe,F):function(Lt,It,Gt,Jt){var pr=new self.Image,dr=self.URL;pr.onload=function(){It(null,pr),dr.revokeObjectURL(pr.src)},pr.onerror=function(){return It(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var zr=new self.Blob([new Uint8Array(Lt)],{type:"image/png"});pr.cacheControl=Gt,pr.expires=Jt,pr.src=Lt.byteLength?dr.createObjectURL(zr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Xe,F,ct,Tt))});return{cancel:function(){we.cancel(),ye()}}};function ot(_,F,X){X[_]&&X[_].indexOf(F)!==-1||(X[_]=X[_]||[],X[_].push(F))}function Te(_,F,X){if(X&&X[_]){var le=X[_].indexOf(F);le!==-1&&X[_].splice(le,1)}}var Le=function(_,F){F===void 0&&(F={}),m(this,F),this.type=_},Ve=function(_){function F(X,le){le===void 0&&(le={}),_.call(this,"error",m({error:X},le))}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F}(Le),Qe=function(){};Qe.prototype.on=function(_,F){return this._listeners=this._listeners||{},ot(_,F,this._listeners),this},Qe.prototype.off=function(_,F){return Te(_,F,this._listeners),Te(_,F,this._oneTimeListeners),this},Qe.prototype.once=function(_,F){return this._oneTimeListeners=this._oneTimeListeners||{},ot(_,F,this._oneTimeListeners),this},Qe.prototype.fire=function(_,F){typeof _=="string"&&(_=new Le(_,F||{}));var X=_.type;if(this.listens(X)){_.target=this;for(var le=0,ye=this._listeners&&this._listeners[X]?this._listeners[X].slice():[];le<ye.length;le+=1)ye[le].call(this,_);for(var we=0,Pe=this._oneTimeListeners&&this._oneTimeListeners[X]?this._oneTimeListeners[X].slice():[];we<Pe.length;we+=1){var Xe=Pe[we];Te(X,Xe,this._oneTimeListeners),Xe.call(this,_)}var ct=this._eventedParent;ct&&(m(_,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ct.fire(_))}else _ instanceof Ve&&console.error(_.error);return this},Qe.prototype.listens=function(_){return this._listeners&&this._listeners[_]&&this._listeners[_].length>0||this._oneTimeListeners&&this._oneTimeListeners[_]&&this._oneTimeListeners[_].length>0||this._eventedParent&&this._eventedParent.listens(_)},Qe.prototype.setEventedParent=function(_,F){return this._eventedParent=_,this._eventedParentData=F,this};var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ie=function(_,F,X,le){this.message=(_?_+": ":"")+X,le&&(this.identifier=le),F!=null&&F.__line__&&(this.line=F.__line__)};function He(_){var F=_.value;return F?[new Ie(_.key,F,"constants have been deprecated as of v8")]:[]}function Ye(_){for(var F=[],X=arguments.length-1;X-- >0;)F[X]=arguments[X+1];for(var le=0,ye=F;le<ye.length;le+=1){var we=ye[le];for(var Pe in we)_[Pe]=we[Pe]}return _}function ut(_){return _ instanceof Number||_ instanceof String||_ instanceof Boolean?_.valueOf():_}function nt(_){if(Array.isArray(_))return _.map(nt);if(_ instanceof Object&&!(_ instanceof Number||_ instanceof String||_ instanceof Boolean)){var F={};for(var X in _)F[X]=nt(_[X]);return F}return ut(_)}var Ge=function(_){function F(X,le){_.call(this,le),this.message=le,this.key=X}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F}(Error),at=function(_,F){F===void 0&&(F=[]),this.parent=_,this.bindings={};for(var X=0,le=F;X<le.length;X+=1){var ye=le[X];this.bindings[ye[0]]=ye[1]}};at.prototype.concat=function(_){return new at(this,_)},at.prototype.get=function(_){if(this.bindings[_])return this.bindings[_];if(this.parent)return this.parent.get(_);throw new Error(_+" not found in scope.")},at.prototype.has=function(_){return!!this.bindings[_]||!!this.parent&&this.parent.has(_)};var et={kind:"null"},lt={kind:"number"},Ct={kind:"string"},Pt={kind:"boolean"},$t={kind:"color"},je={kind:"object"},Oe={kind:"value"},mt={kind:"collator"},wt={kind:"formatted"},yt={kind:"resolvedImage"};function St(_,F){return{kind:"array",itemType:_,N:F}}function kt(_){if(_.kind==="array"){var F=kt(_.itemType);return typeof _.N=="number"?"array<"+F+", "+_.N+">":_.itemType.kind==="value"?"array":"array<"+F+">"}return _.kind}var Rt=[et,lt,Ct,Pt,$t,wt,je,St(Oe),yt];function zt(_,F){if(F.kind==="error")return null;if(_.kind==="array"){if(F.kind==="array"&&(F.N===0&&F.itemType.kind==="value"||!zt(_.itemType,F.itemType))&&(typeof _.N!="number"||_.N===F.N))return null}else{if(_.kind===F.kind)return null;if(_.kind==="value"){for(var X=0,le=Rt;X<le.length;X+=1)if(!zt(le[X],F))return null}}return"Expected "+kt(_)+" but found "+kt(F)+" instead."}function Xt(_,F){return F.some(function(X){return X.kind===_.kind})}function Yt(_,F){return F.some(function(X){return X==="null"?_===null:X==="array"?Array.isArray(_):X==="object"?_&&!Array.isArray(_)&&typeof _=="object":X===typeof _})}var Vt=f(function(_,F){var X={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(Xe){return(Xe=Math.round(Xe))<0?0:Xe>255?255:Xe}function ye(Xe){return le(Xe[Xe.length-1]==="%"?parseFloat(Xe)/100*255:parseInt(Xe))}function we(Xe){return(ct=Xe[Xe.length-1]==="%"?parseFloat(Xe)/100:parseFloat(Xe))<0?0:ct>1?1:ct;var ct}function Pe(Xe,ct,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?Xe+(ct-Xe)*Tt*6:2*Tt<1?ct:3*Tt<2?Xe+(ct-Xe)*(2/3-Tt)*6:Xe}try{F.parseCSSColor=function(Xe){var ct,Tt=Xe.replace(/ /g,"").toLowerCase();if(Tt in X)return X[Tt].slice();if(Tt[0]==="#")return Tt.length===4?(ct=parseInt(Tt.substr(1),16))>=0&&ct<=4095?[(3840&ct)>>4|(3840&ct)>>8,240&ct|(240&ct)>>4,15&ct|(15&ct)<<4,1]:null:Tt.length===7&&(ct=parseInt(Tt.substr(1),16))>=0&&ct<=16777215?[(16711680&ct)>>16,(65280&ct)>>8,255&ct,1]:null;var Lt=Tt.indexOf("("),It=Tt.indexOf(")");if(Lt!==-1&&It+1===Tt.length){var Gt=Tt.substr(0,Lt),Jt=Tt.substr(Lt+1,It-(Lt+1)).split(","),pr=1;switch(Gt){case"rgba":if(Jt.length!==4)return null;pr=we(Jt.pop());case"rgb":return Jt.length!==3?null:[ye(Jt[0]),ye(Jt[1]),ye(Jt[2]),pr];case"hsla":if(Jt.length!==4)return null;pr=we(Jt.pop());case"hsl":if(Jt.length!==3)return null;var dr=(parseFloat(Jt[0])%360+360)%360/360,zr=we(Jt[1]),Ar=we(Jt[2]),Xr=Ar<=.5?Ar*(zr+1):Ar+zr-Ar*zr,rn=2*Ar-Xr;return[le(255*Pe(rn,Xr,dr+1/3)),le(255*Pe(rn,Xr,dr)),le(255*Pe(rn,Xr,dr-1/3)),pr];default:return null}}return null}}catch{}}).parseCSSColor,cr=function(_,F,X,le){le===void 0&&(le=1),this.r=_,this.g=F,this.b=X,this.a=le};cr.parse=function(_){if(_){if(_ instanceof cr)return _;if(typeof _=="string"){var F=Vt(_);if(F)return new cr(F[0]/255*F[3],F[1]/255*F[3],F[2]/255*F[3],F[3])}}},cr.prototype.toString=function(){var _=this.toArray(),F=_[1],X=_[2],le=_[3];return"rgba("+Math.round(_[0])+","+Math.round(F)+","+Math.round(X)+","+le+")"},cr.prototype.toArray=function(){var _=this.a;return _===0?[0,0,0,0]:[255*this.r/_,255*this.g/_,255*this.b/_,_]},cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);var Or=function(_,F,X){this.sensitivity=_?F?"variant":"case":F?"accent":"base",this.locale=X,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Or.prototype.compare=function(_,F){return this.collator.compare(_,F)},Or.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var kr=function(_,F,X,le,ye){this.text=_,this.image=F,this.scale=X,this.fontStack=le,this.textColor=ye},Sr=function(_){this.sections=_};Sr.fromString=function(_){return new Sr([new kr(_,null,null,null,null)])},Sr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(_){return _.text.length!==0||_.image&&_.image.name.length!==0})},Sr.factory=function(_){return _ instanceof Sr?_:Sr.fromString(_)},Sr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(_){return _.text}).join("")},Sr.prototype.serialize=function(){for(var _=["format"],F=0,X=this.sections;F<X.length;F+=1){var le=X[F];if(le.image)_.push(["image",le.image.name]);else{_.push(le.text);var ye={};le.fontStack&&(ye["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(ye["font-scale"]=le.scale),le.textColor&&(ye["text-color"]=["rgba"].concat(le.textColor.toArray())),_.push(ye)}}return _};var vn=function(_){this.name=_.name,this.available=_.available};function Rn(_,F,X,le){return typeof _=="number"&&_>=0&&_<=255&&typeof F=="number"&&F>=0&&F<=255&&typeof X=="number"&&X>=0&&X<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[_,F,X,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[_,F,X,le]:[_,F,X]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function hn(_){if(_===null||typeof _=="string"||typeof _=="boolean"||typeof _=="number"||_ instanceof cr||_ instanceof Or||_ instanceof Sr||_ instanceof vn)return!0;if(Array.isArray(_)){for(var F=0,X=_;F<X.length;F+=1)if(!hn(X[F]))return!1;return!0}if(typeof _=="object"){for(var le in _)if(!hn(_[le]))return!1;return!0}return!1}function An(_){if(_===null)return et;if(typeof _=="string")return Ct;if(typeof _=="boolean")return Pt;if(typeof _=="number")return lt;if(_ instanceof cr)return $t;if(_ instanceof Or)return mt;if(_ instanceof Sr)return wt;if(_ instanceof vn)return yt;if(Array.isArray(_)){for(var F,X=_.length,le=0,ye=_;le<ye.length;le+=1){var we=An(ye[le]);if(F){if(F===we)continue;F=Oe;break}F=we}return St(F||Oe,X)}return je}function En(_){var F=typeof _;return _===null?"":F==="string"||F==="number"||F==="boolean"?String(_):_ instanceof cr||_ instanceof Sr||_ instanceof vn?_.toString():JSON.stringify(_)}vn.prototype.toString=function(){return this.name},vn.fromString=function(_){return _?new vn({name:_,available:!1}):null},vn.prototype.serialize=function(){return["image",this.name]};var Mr=function(_,F){this.type=_,this.value=F};Mr.parse=function(_,F){if(_.length!==2)return F.error("'literal' expression requires exactly one argument, but found "+(_.length-1)+" instead.");if(!hn(_[1]))return F.error("invalid value");var X=_[1],le=An(X),ye=F.expectedType;return le.kind!=="array"||le.N!==0||!ye||ye.kind!=="array"||typeof ye.N=="number"&&ye.N!==0||(le=ye),new Mr(le,X)},Mr.prototype.evaluate=function(){return this.value},Mr.prototype.eachChild=function(){},Mr.prototype.outputDefined=function(){return!0},Mr.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof cr?["rgba"].concat(this.value.toArray()):this.value instanceof Sr?this.value.serialize():this.value};var xr=function(_){this.name="ExpressionEvaluationError",this.message=_};xr.prototype.toJSON=function(){return this.message};var dn={string:Ct,number:lt,boolean:Pt,object:je},qr=function(_,F){this.type=_,this.args=F};qr.parse=function(_,F){if(_.length<2)return F.error("Expected at least one argument.");var X,le=1,ye=_[0];if(ye==="array"){var we,Pe;if(_.length>2){var Xe=_[1];if(typeof Xe!="string"||!(Xe in dn)||Xe==="object")return F.error('The item type argument of "array" must be one of string, number, boolean',1);we=dn[Xe],le++}else we=Oe;if(_.length>3){if(_[2]!==null&&(typeof _[2]!="number"||_[2]<0||_[2]!==Math.floor(_[2])))return F.error('The length argument to "array" must be a positive integer literal',2);Pe=_[2],le++}X=St(we,Pe)}else X=dn[ye];for(var ct=[];le<_.length;le++){var Tt=F.parse(_[le],le,Oe);if(!Tt)return null;ct.push(Tt)}return new qr(X,ct)},qr.prototype.evaluate=function(_){for(var F=0;F<this.args.length;F++){var X=this.args[F].evaluate(_);if(!zt(this.type,An(X)))return X;if(F===this.args.length-1)throw new xr("Expected value to be of type "+kt(this.type)+", but found "+kt(An(X))+" instead.")}return null},qr.prototype.eachChild=function(_){this.args.forEach(_)},qr.prototype.outputDefined=function(){return this.args.every(function(_){return _.outputDefined()})},qr.prototype.serialize=function(){var _=this.type,F=[_.kind];if(_.kind==="array"){var X=_.itemType;if(X.kind==="string"||X.kind==="number"||X.kind==="boolean"){F.push(X.kind);var le=_.N;(typeof le=="number"||this.args.length>1)&&F.push(le)}}return F.concat(this.args.map(function(ye){return ye.serialize()}))};var on=function(_){this.type=wt,this.sections=_};on.parse=function(_,F){if(_.length<2)return F.error("Expected at least one argument.");var X=_[1];if(!Array.isArray(X)&&typeof X=="object")return F.error("First argument must be an image or text section.");for(var le=[],ye=!1,we=1;we<=_.length-1;++we){var Pe=_[we];if(ye&&typeof Pe=="object"&&!Array.isArray(Pe)){ye=!1;var Xe=null;if(Pe["font-scale"]&&!(Xe=F.parse(Pe["font-scale"],1,lt)))return null;var ct=null;if(Pe["text-font"]&&!(ct=F.parse(Pe["text-font"],1,St(Ct))))return null;var Tt=null;if(Pe["text-color"]&&!(Tt=F.parse(Pe["text-color"],1,$t)))return null;var Lt=le[le.length-1];Lt.scale=Xe,Lt.font=ct,Lt.textColor=Tt}else{var It=F.parse(_[we],1,Oe);if(!It)return null;var Gt=It.type.kind;if(Gt!=="string"&&Gt!=="value"&&Gt!=="null"&&Gt!=="resolvedImage")return F.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ye=!0,le.push({content:It,scale:null,font:null,textColor:null})}}return new on(le)},on.prototype.evaluate=function(_){return new Sr(this.sections.map(function(F){var X=F.content.evaluate(_);return An(X)===yt?new kr("",X,null,null,null):new kr(En(X),null,F.scale?F.scale.evaluate(_):null,F.font?F.font.evaluate(_).join(","):null,F.textColor?F.textColor.evaluate(_):null)}))},on.prototype.eachChild=function(_){for(var F=0,X=this.sections;F<X.length;F+=1){var le=X[F];_(le.content),le.scale&&_(le.scale),le.font&&_(le.font),le.textColor&&_(le.textColor)}},on.prototype.outputDefined=function(){return!1},on.prototype.serialize=function(){for(var _=["format"],F=0,X=this.sections;F<X.length;F+=1){var le=X[F];_.push(le.content.serialize());var ye={};le.scale&&(ye["font-scale"]=le.scale.serialize()),le.font&&(ye["text-font"]=le.font.serialize()),le.textColor&&(ye["text-color"]=le.textColor.serialize()),_.push(ye)}return _};var Vr=function(_){this.type=yt,this.input=_};Vr.parse=function(_,F){if(_.length!==2)return F.error("Expected two arguments.");var X=F.parse(_[1],1,Ct);return X?new Vr(X):F.error("No image name provided.")},Vr.prototype.evaluate=function(_){var F=this.input.evaluate(_),X=vn.fromString(F);return X&&_.availableImages&&(X.available=_.availableImages.indexOf(F)>-1),X},Vr.prototype.eachChild=function(_){_(this.input)},Vr.prototype.outputDefined=function(){return!1},Vr.prototype.serialize=function(){return["image",this.input.serialize()]};var ln={"to-boolean":Pt,"to-color":$t,"to-number":lt,"to-string":Ct},cn=function(_,F){this.type=_,this.args=F};cn.parse=function(_,F){if(_.length<2)return F.error("Expected at least one argument.");var X=_[0];if((X==="to-boolean"||X==="to-string")&&_.length!==2)return F.error("Expected one argument.");for(var le=ln[X],ye=[],we=1;we<_.length;we++){var Pe=F.parse(_[we],we,Oe);if(!Pe)return null;ye.push(Pe)}return new cn(le,ye)},cn.prototype.evaluate=function(_){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(_));if(this.type.kind==="color"){for(var F,X,le=0,ye=this.args;le<ye.length;le+=1){if(X=null,(F=ye[le].evaluate(_))instanceof cr)return F;if(typeof F=="string"){var we=_.parseColor(F);if(we)return we}else if(Array.isArray(F)&&!(X=F.length<3||F.length>4?"Invalid rbga value "+JSON.stringify(F)+": expected an array containing either three or four numeric values.":Rn(F[0],F[1],F[2],F[3])))return new cr(F[0]/255,F[1]/255,F[2]/255,F[3])}throw new xr(X||"Could not parse color from value '"+(typeof F=="string"?F:String(JSON.stringify(F)))+"'")}if(this.type.kind==="number"){for(var Pe=null,Xe=0,ct=this.args;Xe<ct.length;Xe+=1){if((Pe=ct[Xe].evaluate(_))===null)return 0;var Tt=Number(Pe);if(!isNaN(Tt))return Tt}throw new xr("Could not convert "+JSON.stringify(Pe)+" to number.")}return this.type.kind==="formatted"?Sr.fromString(En(this.args[0].evaluate(_))):this.type.kind==="resolvedImage"?vn.fromString(En(this.args[0].evaluate(_))):En(this.args[0].evaluate(_))},cn.prototype.eachChild=function(_){this.args.forEach(_)},cn.prototype.outputDefined=function(){return this.args.every(function(_){return _.outputDefined()})},cn.prototype.serialize=function(){if(this.type.kind==="formatted")return new on([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vr(this.args[0]).serialize();var _=["to-"+this.type.kind];return this.eachChild(function(F){_.push(F.serialize())}),_};var Zr=["Unknown","Point","LineString","Polygon"],ht=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ht.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ht.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zr[this.feature.type]:this.feature.type:null},ht.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ht.prototype.canonicalID=function(){return this.canonical},ht.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ht.prototype.parseColor=function(_){var F=this._parseColorCache[_];return F||(F=this._parseColorCache[_]=cr.parse(_)),F};var Nt=function(_,F,X,le){this.name=_,this.type=F,this._evaluate=X,this.args=le};Nt.prototype.evaluate=function(_){return this._evaluate(_,this.args)},Nt.prototype.eachChild=function(_){this.args.forEach(_)},Nt.prototype.outputDefined=function(){return!1},Nt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(_){return _.serialize()}))},Nt.parse=function(_,F){var X,le=_[0],ye=Nt.definitions[le];if(!ye)return F.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var we=Array.isArray(ye)?ye[0]:ye.type,Pe=Array.isArray(ye)?[[ye[1],ye[2]]]:ye.overloads,Xe=Pe.filter(function(Aa){var ca=Aa[0];return!Array.isArray(ca)||ca.length===_.length-1}),ct=null,Tt=0,Lt=Xe;Tt<Lt.length;Tt+=1){var It=Lt[Tt],Gt=It[0],Jt=It[1];ct=new ba(F.registry,F.path,null,F.scope);for(var pr=[],dr=!1,zr=1;zr<_.length;zr++){var Ar=_[zr],Xr=Array.isArray(Gt)?Gt[zr-1]:Gt.type,rn=ct.parse(Ar,1+pr.length,Xr);if(!rn){dr=!0;break}pr.push(rn)}if(!dr)if(Array.isArray(Gt)&&Gt.length!==pr.length)ct.error("Expected "+Gt.length+" arguments, but found "+pr.length+" instead.");else{for(var mn=0;mn<pr.length;mn++){var gn=Array.isArray(Gt)?Gt[mn]:Gt.type,Ln=pr[mn];ct.concat(mn+1).checkSubtype(gn,Ln.type)}if(ct.errors.length===0)return new Nt(le,we,Jt,pr)}}if(Xe.length===1)(X=F.errors).push.apply(X,ct.errors);else{for(var $n=(Xe.length?Xe:Pe).map(function(Aa){var ca;return ca=Aa[0],Array.isArray(ca)?"("+ca.map(kt).join(", ")+")":"("+kt(ca.type)+"...)"}).join(" | "),oa=[],_a=1;_a<_.length;_a++){var fa=F.parse(_[_a],1+oa.length);if(!fa)return null;oa.push(kt(fa.type))}F.error("Expected arguments of type "+$n+", but found ("+oa.join(", ")+") instead.")}return null},Nt.register=function(_,F){for(var X in Nt.definitions=F,F)_[X]=Nt};var rr=function(_,F,X){this.type=mt,this.locale=X,this.caseSensitive=_,this.diacriticSensitive=F};function mr(_,F){_[0]=Math.min(_[0],F[0]),_[1]=Math.min(_[1],F[1]),_[2]=Math.max(_[2],F[0]),_[3]=Math.max(_[3],F[1])}function Rr(_,F){return!(_[0]<=F[0]||_[2]>=F[2]||_[1]<=F[1]||_[3]>=F[3])}function Er(_,F){var X=(180+_[0])/360,le=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_[1]*Math.PI/360)))/360,ye=Math.pow(2,F.z);return[Math.round(X*ye*8192),Math.round(le*ye*8192)]}function Br(_,F,X){return F[1]>_[1]!=X[1]>_[1]&&_[0]<(X[0]-F[0])*(_[1]-F[1])/(X[1]-F[1])+F[0]}function Lr(_,F){for(var X,le,ye,we,Pe,Xe,ct,Tt=!1,Lt=0,It=F.length;Lt<It;Lt++)for(var Gt=F[Lt],Jt=0,pr=Gt.length;Jt<pr-1;Jt++){if((we=(X=_)[0]-(le=Gt[Jt])[0])*(ct=X[1]-(ye=Gt[Jt+1])[1])-(Xe=X[0]-ye[0])*(Pe=X[1]-le[1])==0&&we*Xe<=0&&Pe*ct<=0)return!1;Br(_,Gt[Jt],Gt[Jt+1])&&(Tt=!Tt)}return Tt}function pn(_,F){for(var X=0;X<F.length;X++)if(Lr(_,F[X]))return!0;return!1}function On(_,F,X,le){var ye=le[0]-X[0],we=le[1]-X[1],Pe=(_[0]-X[0])*we-ye*(_[1]-X[1]),Xe=(F[0]-X[0])*we-ye*(F[1]-X[1]);return Pe>0&&Xe<0||Pe<0&&Xe>0}function Fn(_,F,X){for(var le=0,ye=X;le<ye.length;le+=1)for(var we=ye[le],Pe=0;Pe<we.length-1;++Pe)if((It=[(Lt=we[Pe+1])[0]-(Tt=we[Pe])[0],Lt[1]-Tt[1]])[0]*(Gt=[(ct=F)[0]-(Xe=_)[0],ct[1]-Xe[1]])[1]-It[1]*Gt[0]!=0&&On(Xe,ct,Tt,Lt)&&On(Tt,Lt,Xe,ct))return!0;var Xe,ct,Tt,Lt,It,Gt;return!1}function Qn(_,F){for(var X=0;X<_.length;++X)if(!Lr(_[X],F))return!1;for(var le=0;le<_.length-1;++le)if(Fn(_[le],_[le+1],F))return!1;return!0}function ya(_,F){for(var X=0;X<F.length;X++)if(Qn(_,F[X]))return!0;return!1}function Sa(_,F,X){for(var le=[],ye=0;ye<_.length;ye++){for(var we=[],Pe=0;Pe<_[ye].length;Pe++){var Xe=Er(_[ye][Pe],X);mr(F,Xe),we.push(Xe)}le.push(we)}return le}function ar(_,F,X){for(var le=[],ye=0;ye<_.length;ye++){var we=Sa(_[ye],F,X);le.push(we)}return le}function Wr(_,F,X,le){if(_[0]<X[0]||_[0]>X[2]){var ye=.5*le,we=_[0]-X[0]>ye?-le:X[0]-_[0]>ye?le:0;we===0&&(we=_[0]-X[2]>ye?-le:X[2]-_[0]>ye?le:0),_[0]+=we}mr(F,_)}function Fr(_,F,X,le){for(var ye=8192*Math.pow(2,le.z),we=[8192*le.x,8192*le.y],Pe=[],Xe=0,ct=_;Xe<ct.length;Xe+=1)for(var Tt=0,Lt=ct[Xe];Tt<Lt.length;Tt+=1){var It=Lt[Tt],Gt=[It.x+we[0],It.y+we[1]];Wr(Gt,F,X,ye),Pe.push(Gt)}return Pe}function yn(_,F,X,le){for(var ye,we=8192*Math.pow(2,le.z),Pe=[8192*le.x,8192*le.y],Xe=[],ct=0,Tt=_;ct<Tt.length;ct+=1){for(var Lt=[],It=0,Gt=Tt[ct];It<Gt.length;It+=1){var Jt=Gt[It],pr=[Jt.x+Pe[0],Jt.y+Pe[1]];mr(F,pr),Lt.push(pr)}Xe.push(Lt)}if(F[2]-F[0]<=we/2){(ye=F)[0]=ye[1]=1/0,ye[2]=ye[3]=-1/0;for(var dr=0,zr=Xe;dr<zr.length;dr+=1)for(var Ar=0,Xr=zr[dr];Ar<Xr.length;Ar+=1)Wr(Xr[Ar],F,X,we)}return Xe}rr.parse=function(_,F){if(_.length!==2)return F.error("Expected one argument.");var X=_[1];if(typeof X!="object"||Array.isArray(X))return F.error("Collator options argument must be an object.");var le=F.parse(X["case-sensitive"]!==void 0&&X["case-sensitive"],1,Pt);if(!le)return null;var ye=F.parse(X["diacritic-sensitive"]!==void 0&&X["diacritic-sensitive"],1,Pt);if(!ye)return null;var we=null;return X.locale&&!(we=F.parse(X.locale,1,Ct))?null:new rr(le,ye,we)},rr.prototype.evaluate=function(_){return new Or(this.caseSensitive.evaluate(_),this.diacriticSensitive.evaluate(_),this.locale?this.locale.evaluate(_):null)},rr.prototype.eachChild=function(_){_(this.caseSensitive),_(this.diacriticSensitive),this.locale&&_(this.locale)},rr.prototype.outputDefined=function(){return!1},rr.prototype.serialize=function(){var _={};return _["case-sensitive"]=this.caseSensitive.serialize(),_["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(_.locale=this.locale.serialize()),["collator",_]};var Sn=function(_,F){this.type=Pt,this.geojson=_,this.geometries=F};function aa(_){if(_ instanceof Nt&&(_.name==="get"&&_.args.length===1||_.name==="feature-state"||_.name==="has"&&_.args.length===1||_.name==="properties"||_.name==="geometry-type"||_.name==="id"||/^filter-/.test(_.name))||_ instanceof Sn)return!1;var F=!0;return _.eachChild(function(X){F&&!aa(X)&&(F=!1)}),F}function Xn(_){if(_ instanceof Nt&&_.name==="feature-state")return!1;var F=!0;return _.eachChild(function(X){F&&!Xn(X)&&(F=!1)}),F}function ra(_,F){if(_ instanceof Nt&&F.indexOf(_.name)>=0)return!1;var X=!0;return _.eachChild(function(le){X&&!ra(le,F)&&(X=!1)}),X}Sn.parse=function(_,F){if(_.length!==2)return F.error("'within' expression requires exactly one argument, but found "+(_.length-1)+" instead.");if(hn(_[1])){var X=_[1];if(X.type==="FeatureCollection")for(var le=0;le<X.features.length;++le){var ye=X.features[le].geometry.type;if(ye==="Polygon"||ye==="MultiPolygon")return new Sn(X,X.features[le].geometry)}else if(X.type==="Feature"){var we=X.geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new Sn(X,X.geometry)}else if(X.type==="Polygon"||X.type==="MultiPolygon")return new Sn(X,X)}return F.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Sn.prototype.evaluate=function(_){if(_.geometry()!=null&&_.canonicalID()!=null){if(_.geometryType()==="Point")return function(F,X){var le=[1/0,1/0,-1/0,-1/0],ye=[1/0,1/0,-1/0,-1/0],we=F.canonicalID();if(X.type==="Polygon"){var Pe=Sa(X.coordinates,ye,we),Xe=Fr(F.geometry(),le,ye,we);if(!Rr(le,ye))return!1;for(var ct=0,Tt=Xe;ct<Tt.length;ct+=1)if(!Lr(Tt[ct],Pe))return!1}if(X.type==="MultiPolygon"){var Lt=ar(X.coordinates,ye,we),It=Fr(F.geometry(),le,ye,we);if(!Rr(le,ye))return!1;for(var Gt=0,Jt=It;Gt<Jt.length;Gt+=1)if(!pn(Jt[Gt],Lt))return!1}return!0}(_,this.geometries);if(_.geometryType()==="LineString")return function(F,X){var le=[1/0,1/0,-1/0,-1/0],ye=[1/0,1/0,-1/0,-1/0],we=F.canonicalID();if(X.type==="Polygon"){var Pe=Sa(X.coordinates,ye,we),Xe=yn(F.geometry(),le,ye,we);if(!Rr(le,ye))return!1;for(var ct=0,Tt=Xe;ct<Tt.length;ct+=1)if(!Qn(Tt[ct],Pe))return!1}if(X.type==="MultiPolygon"){var Lt=ar(X.coordinates,ye,we),It=yn(F.geometry(),le,ye,we);if(!Rr(le,ye))return!1;for(var Gt=0,Jt=It;Gt<Jt.length;Gt+=1)if(!ya(Jt[Gt],Lt))return!1}return!0}(_,this.geometries)}return!1},Sn.prototype.eachChild=function(){},Sn.prototype.outputDefined=function(){return!0},Sn.prototype.serialize=function(){return["within",this.geojson]};var na=function(_,F){this.type=F.type,this.name=_,this.boundExpression=F};na.parse=function(_,F){if(_.length!==2||typeof _[1]!="string")return F.error("'var' expression requires exactly one string literal argument.");var X=_[1];return F.scope.has(X)?new na(X,F.scope.get(X)):F.error('Unknown variable "'+X+'". Make sure "'+X+'" has been bound in an enclosing "let" expression before using it.',1)},na.prototype.evaluate=function(_){return this.boundExpression.evaluate(_)},na.prototype.eachChild=function(){},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){return["var",this.name]};var ba=function(_,F,X,le,ye){F===void 0&&(F=[]),le===void 0&&(le=new at),ye===void 0&&(ye=[]),this.registry=_,this.path=F,this.key=F.map(function(we){return"["+we+"]"}).join(""),this.scope=le,this.errors=ye,this.expectedType=X};function Ut(_,F){for(var X,le=_.length-1,ye=0,we=le,Pe=0;ye<=we;)if((X=_[Pe=Math.floor((ye+we)/2)])<=F){if(Pe===le||F<_[Pe+1])return Pe;ye=Pe+1}else{if(!(X>F))throw new xr("Input is not a number.");we=Pe-1}return 0}ba.prototype.parse=function(_,F,X,le,ye){return ye===void 0&&(ye={}),F?this.concat(F,X,le)._parse(_,ye):this._parse(_,ye)},ba.prototype._parse=function(_,F){function X(Tt,Lt,It){return It==="assert"?new qr(Lt,[Tt]):It==="coerce"?new cn(Lt,[Tt]):Tt}if(_!==null&&typeof _!="string"&&typeof _!="boolean"&&typeof _!="number"||(_=["literal",_]),Array.isArray(_)){if(_.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=_[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ye=this.registry[le];if(ye){var we=ye.parse(_,this);if(!we)return null;if(this.expectedType){var Pe=this.expectedType,Xe=we.type;if(Pe.kind!=="string"&&Pe.kind!=="number"&&Pe.kind!=="boolean"&&Pe.kind!=="object"&&Pe.kind!=="array"||Xe.kind!=="value")if(Pe.kind!=="color"&&Pe.kind!=="formatted"&&Pe.kind!=="resolvedImage"||Xe.kind!=="value"&&Xe.kind!=="string"){if(this.checkSubtype(Pe,Xe))return null}else we=X(we,Pe,F.typeAnnotation||"coerce");else we=X(we,Pe,F.typeAnnotation||"assert")}if(!(we instanceof Mr)&&we.type.kind!=="resolvedImage"&&function Tt(Lt){if(Lt instanceof na)return Tt(Lt.boundExpression);if(Lt instanceof Nt&&Lt.name==="error"||Lt instanceof rr||Lt instanceof Sn)return!1;var It=Lt instanceof cn||Lt instanceof qr,Gt=!0;return Lt.eachChild(function(Jt){Gt=It?Gt&&Tt(Jt):Gt&&Jt instanceof Mr}),!!Gt&&aa(Lt)&&ra(Lt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(we)){var ct=new ht;try{we=new Mr(we.type,we.evaluate(ct))}catch(Tt){return this.error(Tt.message),null}}return we}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(_===void 0?"'undefined' value invalid. Use null instead.":typeof _=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof _+" instead.")},ba.prototype.concat=function(_,F,X){var le=typeof _=="number"?this.path.concat(_):this.path,ye=X?this.scope.concat(X):this.scope;return new ba(this.registry,le,F||null,ye,this.errors)},ba.prototype.error=function(_){for(var F=[],X=arguments.length-1;X-- >0;)F[X]=arguments[X+1];var le=""+this.key+F.map(function(ye){return"["+ye+"]"}).join("");this.errors.push(new Ge(le,_))},ba.prototype.checkSubtype=function(_,F){var X=zt(_,F);return X&&this.error(X),X};var lr=function(_,F,X){this.type=_,this.input=F,this.labels=[],this.outputs=[];for(var le=0,ye=X;le<ye.length;le+=1){var we=ye[le],Pe=we[1];this.labels.push(we[0]),this.outputs.push(Pe)}};function Ir(_,F,X){return _*(1-X)+F*X}lr.parse=function(_,F){if(_.length-1<4)return F.error("Expected at least 4 arguments, but found only "+(_.length-1)+".");if((_.length-1)%2!=0)return F.error("Expected an even number of arguments.");var X=F.parse(_[1],1,lt);if(!X)return null;var le=[],ye=null;F.expectedType&&F.expectedType.kind!=="value"&&(ye=F.expectedType);for(var we=1;we<_.length;we+=2){var Pe=we===1?-1/0:_[we],Xe=_[we+1],ct=we,Tt=we+1;if(typeof Pe!="number")return F.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(le.length&&le[le.length-1][0]>=Pe)return F.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Lt=F.parse(Xe,Tt,ye);if(!Lt)return null;ye=ye||Lt.type,le.push([Pe,Lt])}return new lr(ye,X,le)},lr.prototype.evaluate=function(_){var F=this.labels,X=this.outputs;if(F.length===1)return X[0].evaluate(_);var le=this.input.evaluate(_);if(le<=F[0])return X[0].evaluate(_);var ye=F.length;return le>=F[ye-1]?X[ye-1].evaluate(_):X[Ut(F,le)].evaluate(_)},lr.prototype.eachChild=function(_){_(this.input);for(var F=0,X=this.outputs;F<X.length;F+=1)_(X[F])},lr.prototype.outputDefined=function(){return this.outputs.every(function(_){return _.outputDefined()})},lr.prototype.serialize=function(){for(var _=["step",this.input.serialize()],F=0;F<this.labels.length;F++)F>0&&_.push(this.labels[F]),_.push(this.outputs[F].serialize());return _};var Kr=Object.freeze({__proto__:null,number:Ir,color:function(_,F,X){return new cr(Ir(_.r,F.r,X),Ir(_.g,F.g,X),Ir(_.b,F.b,X),Ir(_.a,F.a,X))},array:function(_,F,X){return _.map(function(le,ye){return Ir(le,F[ye],X)})}}),Ur=6/29*3*(6/29),Gr=Math.PI/180,$r=180/Math.PI;function Hr(_){return _>.008856451679035631?Math.pow(_,1/3):_/Ur+4/29}function fr(_){return _>6/29?_*_*_:Ur*(_-4/29)}function Tr(_){return 255*(_<=.0031308?12.92*_:1.055*Math.pow(_,1/2.4)-.055)}function hr(_){return(_/=255)<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function Mn(_){var F=hr(_.r),X=hr(_.g),le=hr(_.b),ye=Hr((.4124564*F+.3575761*X+.1804375*le)/.95047),we=Hr((.2126729*F+.7151522*X+.072175*le)/1);return{l:116*we-16,a:500*(ye-we),b:200*(we-Hr((.0193339*F+.119192*X+.9503041*le)/1.08883)),alpha:_.a}}function Cn(_){var F=(_.l+16)/116,X=isNaN(_.a)?F:F+_.a/500,le=isNaN(_.b)?F:F-_.b/200;return F=1*fr(F),X=.95047*fr(X),le=1.08883*fr(le),new cr(Tr(3.2404542*X-1.5371385*F-.4985314*le),Tr(-.969266*X+1.8760108*F+.041556*le),Tr(.0556434*X-.2040259*F+1.0572252*le),_.alpha)}function jn(_,F,X){var le=F-_;return _+X*(le>180||le<-180?le-360*Math.round(le/360):le)}var sa={forward:Mn,reverse:Cn,interpolate:function(_,F,X){return{l:Ir(_.l,F.l,X),a:Ir(_.a,F.a,X),b:Ir(_.b,F.b,X),alpha:Ir(_.alpha,F.alpha,X)}}},Un={forward:function(_){var F=Mn(_),X=F.l,le=F.a,ye=F.b,we=Math.atan2(ye,le)*$r;return{h:we<0?we+360:we,c:Math.sqrt(le*le+ye*ye),l:X,alpha:_.a}},reverse:function(_){var F=_.h*Gr,X=_.c;return Cn({l:_.l,a:Math.cos(F)*X,b:Math.sin(F)*X,alpha:_.alpha})},interpolate:function(_,F,X){return{h:jn(_.h,F.h,X),c:Ir(_.c,F.c,X),l:Ir(_.l,F.l,X),alpha:Ir(_.alpha,F.alpha,X)}}},Ea=Object.freeze({__proto__:null,lab:sa,hcl:Un}),Ga=function(_,F,X,le,ye){this.type=_,this.operator=F,this.interpolation=X,this.input=le,this.labels=[],this.outputs=[];for(var we=0,Pe=ye;we<Pe.length;we+=1){var Xe=Pe[we],ct=Xe[1];this.labels.push(Xe[0]),this.outputs.push(ct)}};function ai(_,F,X,le){var ye=le-X,we=_-X;return ye===0?0:F===1?we/ye:(Math.pow(F,we)-1)/(Math.pow(F,ye)-1)}Ga.interpolationFactor=function(_,F,X,le){var ye=0;if(_.name==="exponential")ye=ai(F,_.base,X,le);else if(_.name==="linear")ye=ai(F,1,X,le);else if(_.name==="cubic-bezier"){var we=_.controlPoints;ye=new n(we[0],we[1],we[2],we[3]).solve(ai(F,1,X,le))}return ye},Ga.parse=function(_,F){var X=_[0],le=_[1],ye=_[2],we=_.slice(3);if(!Array.isArray(le)||le.length===0)return F.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var Pe=le[1];if(typeof Pe!="number")return F.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:Pe}}else{if(le[0]!=="cubic-bezier")return F.error("Unknown interpolation type "+String(le[0]),1,0);var Xe=le.slice(1);if(Xe.length!==4||Xe.some(function(zr){return typeof zr!="number"||zr<0||zr>1}))return F.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:Xe}}if(_.length-1<4)return F.error("Expected at least 4 arguments, but found only "+(_.length-1)+".");if((_.length-1)%2!=0)return F.error("Expected an even number of arguments.");if(!(ye=F.parse(ye,2,lt)))return null;var ct=[],Tt=null;X==="interpolate-hcl"||X==="interpolate-lab"?Tt=$t:F.expectedType&&F.expectedType.kind!=="value"&&(Tt=F.expectedType);for(var Lt=0;Lt<we.length;Lt+=2){var It=we[Lt],Gt=we[Lt+1],Jt=Lt+3,pr=Lt+4;if(typeof It!="number")return F.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(ct.length&&ct[ct.length-1][0]>=It)return F.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Jt);var dr=F.parse(Gt,pr,Tt);if(!dr)return null;Tt=Tt||dr.type,ct.push([It,dr])}return Tt.kind==="number"||Tt.kind==="color"||Tt.kind==="array"&&Tt.itemType.kind==="number"&&typeof Tt.N=="number"?new Ga(Tt,X,le,ye,ct):F.error("Type "+kt(Tt)+" is not interpolatable.")},Ga.prototype.evaluate=function(_){var F=this.labels,X=this.outputs;if(F.length===1)return X[0].evaluate(_);var le=this.input.evaluate(_);if(le<=F[0])return X[0].evaluate(_);var ye=F.length;if(le>=F[ye-1])return X[ye-1].evaluate(_);var we=Ut(F,le),Pe=Ga.interpolationFactor(this.interpolation,le,F[we],F[we+1]),Xe=X[we].evaluate(_),ct=X[we+1].evaluate(_);return this.operator==="interpolate"?Kr[this.type.kind.toLowerCase()](Xe,ct,Pe):this.operator==="interpolate-hcl"?Un.reverse(Un.interpolate(Un.forward(Xe),Un.forward(ct),Pe)):sa.reverse(sa.interpolate(sa.forward(Xe),sa.forward(ct),Pe))},Ga.prototype.eachChild=function(_){_(this.input);for(var F=0,X=this.outputs;F<X.length;F+=1)_(X[F])},Ga.prototype.outputDefined=function(){return this.outputs.every(function(_){return _.outputDefined()})},Ga.prototype.serialize=function(){var _;_=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var F=[this.operator,_,this.input.serialize()],X=0;X<this.labels.length;X++)F.push(this.labels[X],this.outputs[X].serialize());return F};var Ma=function(_,F){this.type=_,this.args=F};Ma.parse=function(_,F){if(_.length<2)return F.error("Expectected at least one argument.");var X=null,le=F.expectedType;le&&le.kind!=="value"&&(X=le);for(var ye=[],we=0,Pe=_.slice(1);we<Pe.length;we+=1){var Xe=F.parse(Pe[we],1+ye.length,X,void 0,{typeAnnotation:"omit"});if(!Xe)return null;X=X||Xe.type,ye.push(Xe)}var ct=le&&ye.some(function(Tt){return zt(le,Tt.type)});return new Ma(ct?Oe:X,ye)},Ma.prototype.evaluate=function(_){for(var F,X=null,le=0,ye=0,we=this.args;ye<we.length&&(le++,(X=we[ye].evaluate(_))&&X instanceof vn&&!X.available&&(F||(F=X.name),X=null,le===this.args.length&&(X=F)),X===null);ye+=1);return X},Ma.prototype.eachChild=function(_){this.args.forEach(_)},Ma.prototype.outputDefined=function(){return this.args.every(function(_){return _.outputDefined()})},Ma.prototype.serialize=function(){var _=["coalesce"];return this.eachChild(function(F){_.push(F.serialize())}),_};var Va=function(_,F){this.type=F.type,this.bindings=[].concat(_),this.result=F};Va.prototype.evaluate=function(_){return this.result.evaluate(_)},Va.prototype.eachChild=function(_){for(var F=0,X=this.bindings;F<X.length;F+=1)_(X[F][1]);_(this.result)},Va.parse=function(_,F){if(_.length<4)return F.error("Expected at least 3 arguments, but found "+(_.length-1)+" instead.");for(var X=[],le=1;le<_.length-1;le+=2){var ye=_[le];if(typeof ye!="string")return F.error("Expected string, but found "+typeof ye+" instead.",le);if(/[^a-zA-Z0-9_]/.test(ye))return F.error("Variable names must contain only alphanumeric characters or '_'.",le);var we=F.parse(_[le+1],le+1);if(!we)return null;X.push([ye,we])}var Pe=F.parse(_[_.length-1],_.length-1,F.expectedType,X);return Pe?new Va(X,Pe):null},Va.prototype.outputDefined=function(){return this.result.outputDefined()},Va.prototype.serialize=function(){for(var _=["let"],F=0,X=this.bindings;F<X.length;F+=1){var le=X[F];_.push(le[0],le[1].serialize())}return _.push(this.result.serialize()),_};var No=function(_,F,X){this.type=_,this.index=F,this.input=X};No.parse=function(_,F){if(_.length!==3)return F.error("Expected 2 arguments, but found "+(_.length-1)+" instead.");var X=F.parse(_[1],1,lt),le=F.parse(_[2],2,St(F.expectedType||Oe));return X&&le?new No(le.type.itemType,X,le):null},No.prototype.evaluate=function(_){var F=this.index.evaluate(_),X=this.input.evaluate(_);if(F<0)throw new xr("Array index out of bounds: "+F+" < 0.");if(F>=X.length)throw new xr("Array index out of bounds: "+F+" > "+(X.length-1)+".");if(F!==Math.floor(F))throw new xr("Array index must be an integer, but found "+F+" instead.");return X[F]},No.prototype.eachChild=function(_){_(this.index),_(this.input)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var co=function(_,F){this.type=Pt,this.needle=_,this.haystack=F};co.parse=function(_,F){if(_.length!==3)return F.error("Expected 2 arguments, but found "+(_.length-1)+" instead.");var X=F.parse(_[1],1,Oe),le=F.parse(_[2],2,Oe);return X&&le?Xt(X.type,[Pt,Ct,lt,et,Oe])?new co(X,le):F.error("Expected first argument to be of type boolean, string, number or null, but found "+kt(X.type)+" instead"):null},co.prototype.evaluate=function(_){var F=this.needle.evaluate(_),X=this.haystack.evaluate(_);if(!X)return!1;if(!Yt(F,["boolean","string","number","null"]))throw new xr("Expected first argument to be of type boolean, string, number or null, but found "+kt(An(F))+" instead.");if(!Yt(X,["string","array"]))throw new xr("Expected second argument to be of type array or string, but found "+kt(An(X))+" instead.");return X.indexOf(F)>=0},co.prototype.eachChild=function(_){_(this.needle),_(this.haystack)},co.prototype.outputDefined=function(){return!0},co.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var eu=function(_,F,X){this.type=lt,this.needle=_,this.haystack=F,this.fromIndex=X};eu.parse=function(_,F){if(_.length<=2||_.length>=5)return F.error("Expected 3 or 4 arguments, but found "+(_.length-1)+" instead.");var X=F.parse(_[1],1,Oe),le=F.parse(_[2],2,Oe);if(!X||!le)return null;if(!Xt(X.type,[Pt,Ct,lt,et,Oe]))return F.error("Expected first argument to be of type boolean, string, number or null, but found "+kt(X.type)+" instead");if(_.length===4){var ye=F.parse(_[3],3,lt);return ye?new eu(X,le,ye):null}return new eu(X,le)},eu.prototype.evaluate=function(_){var F=this.needle.evaluate(_),X=this.haystack.evaluate(_);if(!Yt(F,["boolean","string","number","null"]))throw new xr("Expected first argument to be of type boolean, string, number or null, but found "+kt(An(F))+" instead.");if(!Yt(X,["string","array"]))throw new xr("Expected second argument to be of type array or string, but found "+kt(An(X))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(_);return X.indexOf(F,le)}return X.indexOf(F)},eu.prototype.eachChild=function(_){_(this.needle),_(this.haystack),this.fromIndex&&_(this.fromIndex)},eu.prototype.outputDefined=function(){return!1},eu.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var _=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),_]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Bo=function(_,F,X,le,ye,we){this.inputType=_,this.type=F,this.input=X,this.cases=le,this.outputs=ye,this.otherwise=we};Bo.parse=function(_,F){if(_.length<5)return F.error("Expected at least 4 arguments, but found only "+(_.length-1)+".");if(_.length%2!=1)return F.error("Expected an even number of arguments.");var X,le;F.expectedType&&F.expectedType.kind!=="value"&&(le=F.expectedType);for(var ye={},we=[],Pe=2;Pe<_.length-1;Pe+=2){var Xe=_[Pe],ct=_[Pe+1];Array.isArray(Xe)||(Xe=[Xe]);var Tt=F.concat(Pe);if(Xe.length===0)return Tt.error("Expected at least one branch label.");for(var Lt=0,It=Xe;Lt<It.length;Lt+=1){var Gt=It[Lt];if(typeof Gt!="number"&&typeof Gt!="string")return Tt.error("Branch labels must be numbers or strings.");if(typeof Gt=="number"&&Math.abs(Gt)>Number.MAX_SAFE_INTEGER)return Tt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Gt=="number"&&Math.floor(Gt)!==Gt)return Tt.error("Numeric branch labels must be integer values.");if(X){if(Tt.checkSubtype(X,An(Gt)))return null}else X=An(Gt);if(ye[String(Gt)]!==void 0)return Tt.error("Branch labels must be unique.");ye[String(Gt)]=we.length}var Jt=F.parse(ct,Pe,le);if(!Jt)return null;le=le||Jt.type,we.push(Jt)}var pr=F.parse(_[1],1,Oe);if(!pr)return null;var dr=F.parse(_[_.length-1],_.length-1,le);return dr?pr.type.kind!=="value"&&F.concat(1).checkSubtype(X,pr.type)?null:new Bo(X,le,pr,ye,we,dr):null},Bo.prototype.evaluate=function(_){var F=this.input.evaluate(_);return(An(F)===this.inputType&&this.outputs[this.cases[F]]||this.otherwise).evaluate(_)},Bo.prototype.eachChild=function(_){_(this.input),this.outputs.forEach(_),_(this.otherwise)},Bo.prototype.outputDefined=function(){return this.outputs.every(function(_){return _.outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){for(var _=this,F=["match",this.input.serialize()],X=[],le={},ye=0,we=Object.keys(this.cases).sort();ye<we.length;ye+=1){var Pe=we[ye];(It=le[this.cases[Pe]])===void 0?(le[this.cases[Pe]]=X.length,X.push([this.cases[Pe],[Pe]])):X[It][1].push(Pe)}for(var Xe=function(Jt){return _.inputType.kind==="number"?Number(Jt):Jt},ct=0,Tt=X;ct<Tt.length;ct+=1){var Lt=Tt[ct],It=Lt[0],Gt=Lt[1];F.push(Gt.length===1?Xe(Gt[0]):Gt.map(Xe)),F.push(this.outputs[outputIndex$1].serialize())}return F.push(this.otherwise.serialize()),F};var Qu=function(_,F,X){this.type=_,this.branches=F,this.otherwise=X};Qu.parse=function(_,F){if(_.length<4)return F.error("Expected at least 3 arguments, but found only "+(_.length-1)+".");if(_.length%2!=0)return F.error("Expected an odd number of arguments.");var X;F.expectedType&&F.expectedType.kind!=="value"&&(X=F.expectedType);for(var le=[],ye=1;ye<_.length-1;ye+=2){var we=F.parse(_[ye],ye,Pt);if(!we)return null;var Pe=F.parse(_[ye+1],ye+1,X);if(!Pe)return null;le.push([we,Pe]),X=X||Pe.type}var Xe=F.parse(_[_.length-1],_.length-1,X);return Xe?new Qu(X,le,Xe):null},Qu.prototype.evaluate=function(_){for(var F=0,X=this.branches;F<X.length;F+=1){var le=X[F],ye=le[1];if(le[0].evaluate(_))return ye.evaluate(_)}return this.otherwise.evaluate(_)},Qu.prototype.eachChild=function(_){for(var F=0,X=this.branches;F<X.length;F+=1){var le=X[F],ye=le[1];_(le[0]),_(ye)}_(this.otherwise)},Qu.prototype.outputDefined=function(){return this.branches.every(function(_){return _[1].outputDefined()})&&this.otherwise.outputDefined()},Qu.prototype.serialize=function(){var _=["case"];return this.eachChild(function(F){_.push(F.serialize())}),_};var tu=function(_,F,X,le){this.type=_,this.input=F,this.beginIndex=X,this.endIndex=le};function ru(_,F){return _==="=="||_==="!="?F.kind==="boolean"||F.kind==="string"||F.kind==="number"||F.kind==="null"||F.kind==="value":F.kind==="string"||F.kind==="number"||F.kind==="value"}function uf(_,F,X,le){return le.compare(F,X)===0}function ku(_,F,X){var le=_!=="=="&&_!=="!=";return function(){function ye(we,Pe,Xe){this.type=Pt,this.lhs=we,this.rhs=Pe,this.collator=Xe,this.hasUntypedArgument=we.type.kind==="value"||Pe.type.kind==="value"}return ye.parse=function(we,Pe){if(we.length!==3&&we.length!==4)return Pe.error("Expected two or three arguments.");var Xe=we[0],ct=Pe.parse(we[1],1,Oe);if(!ct)return null;if(!ru(Xe,ct.type))return Pe.concat(1).error('"'+Xe+`" comparisons are not supported for type '`+kt(ct.type)+"'.");var Tt=Pe.parse(we[2],2,Oe);if(!Tt)return null;if(!ru(Xe,Tt.type))return Pe.concat(2).error('"'+Xe+`" comparisons are not supported for type '`+kt(Tt.type)+"'.");if(ct.type.kind!==Tt.type.kind&&ct.type.kind!=="value"&&Tt.type.kind!=="value")return Pe.error("Cannot compare types '"+kt(ct.type)+"' and '"+kt(Tt.type)+"'.");le&&(ct.type.kind==="value"&&Tt.type.kind!=="value"?ct=new qr(Tt.type,[ct]):ct.type.kind!=="value"&&Tt.type.kind==="value"&&(Tt=new qr(ct.type,[Tt])));var Lt=null;if(we.length===4){if(ct.type.kind!=="string"&&Tt.type.kind!=="string"&&ct.type.kind!=="value"&&Tt.type.kind!=="value")return Pe.error("Cannot use collator to compare non-string types.");if(!(Lt=Pe.parse(we[3],3,mt)))return null}return new ye(ct,Tt,Lt)},ye.prototype.evaluate=function(we){var Pe=this.lhs.evaluate(we),Xe=this.rhs.evaluate(we);if(le&&this.hasUntypedArgument){var ct=An(Pe),Tt=An(Xe);if(ct.kind!==Tt.kind||ct.kind!=="string"&&ct.kind!=="number")throw new xr('Expected arguments for "'+_+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+Tt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var Lt=An(Pe),It=An(Xe);if(Lt.kind!=="string"||It.kind!=="string")return F(we,Pe,Xe)}return this.collator?X(we,Pe,Xe,this.collator.evaluate(we)):F(we,Pe,Xe)},ye.prototype.eachChild=function(we){we(this.lhs),we(this.rhs),this.collator&&we(this.collator)},ye.prototype.outputDefined=function(){return!0},ye.prototype.serialize=function(){var we=[_];return this.eachChild(function(Pe){we.push(Pe.serialize())}),we},ye}()}tu.parse=function(_,F){if(_.length<=2||_.length>=5)return F.error("Expected 3 or 4 arguments, but found "+(_.length-1)+" instead.");var X=F.parse(_[1],1,Oe),le=F.parse(_[2],2,lt);if(!X||!le)return null;if(!Xt(X.type,[St(Oe),Ct,Oe]))return F.error("Expected first argument to be of type array or string, but found "+kt(X.type)+" instead");if(_.length===4){var ye=F.parse(_[3],3,lt);return ye?new tu(X.type,X,le,ye):null}return new tu(X.type,X,le)},tu.prototype.evaluate=function(_){var F=this.input.evaluate(_),X=this.beginIndex.evaluate(_);if(!Yt(F,["string","array"]))throw new xr("Expected first argument to be of type array or string, but found "+kt(An(F))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(_);return F.slice(X,le)}return F.slice(X)},tu.prototype.eachChild=function(_){_(this.input),_(this.beginIndex),this.endIndex&&_(this.endIndex)},tu.prototype.outputDefined=function(){return!1},tu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var _=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),_]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ji=ku("==",function(_,F,X){return F===X},uf),zl=ku("!=",function(_,F,X){return F!==X},function(_,F,X,le){return!uf(0,F,X,le)}),ki=ku("<",function(_,F,X){return F<X},function(_,F,X,le){return le.compare(F,X)<0}),sp=ku(">",function(_,F,X){return F>X},function(_,F,X,le){return le.compare(F,X)>0}),nu=ku("<=",function(_,F,X){return F<=X},function(_,F,X,le){return le.compare(F,X)<=0}),bh=ku(">=",function(_,F,X){return F>=X},function(_,F,X,le){return le.compare(F,X)>=0}),au=function(_,F,X,le,ye){this.type=Ct,this.number=_,this.locale=F,this.currency=X,this.minFractionDigits=le,this.maxFractionDigits=ye};au.parse=function(_,F){if(_.length!==3)return F.error("Expected two arguments.");var X=F.parse(_[1],1,lt);if(!X)return null;var le=_[2];if(typeof le!="object"||Array.isArray(le))return F.error("NumberFormat options argument must be an object.");var ye=null;if(le.locale&&!(ye=F.parse(le.locale,1,Ct)))return null;var we=null;if(le.currency&&!(we=F.parse(le.currency,1,Ct)))return null;var Pe=null;if(le["min-fraction-digits"]&&!(Pe=F.parse(le["min-fraction-digits"],1,lt)))return null;var Xe=null;return le["max-fraction-digits"]&&!(Xe=F.parse(le["max-fraction-digits"],1,lt))?null:new au(X,ye,we,Pe,Xe)},au.prototype.evaluate=function(_){return new Intl.NumberFormat(this.locale?this.locale.evaluate(_):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(_):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(_):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(_):void 0}).format(this.number.evaluate(_))},au.prototype.eachChild=function(_){_(this.number),this.locale&&_(this.locale),this.currency&&_(this.currency),this.minFractionDigits&&_(this.minFractionDigits),this.maxFractionDigits&&_(this.maxFractionDigits)},au.prototype.outputDefined=function(){return!1},au.prototype.serialize=function(){var _={};return this.locale&&(_.locale=this.locale.serialize()),this.currency&&(_.currency=this.currency.serialize()),this.minFractionDigits&&(_["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(_["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),_]};var Fl=function(_){this.type=lt,this.input=_};Fl.parse=function(_,F){if(_.length!==2)return F.error("Expected 1 argument, but found "+(_.length-1)+" instead.");var X=F.parse(_[1],1);return X?X.type.kind!=="array"&&X.type.kind!=="string"&&X.type.kind!=="value"?F.error("Expected argument of type string or array, but found "+kt(X.type)+" instead."):new Fl(X):null},Fl.prototype.evaluate=function(_){var F=this.input.evaluate(_);if(typeof F=="string"||Array.isArray(F))return F.length;throw new xr("Expected value to be of type string or array, but found "+kt(An(F))+" instead.")},Fl.prototype.eachChild=function(_){_(this.input)},Fl.prototype.outputDefined=function(){return!1},Fl.prototype.serialize=function(){var _=["length"];return this.eachChild(function(F){_.push(F.serialize())}),_};var Su={"==":Ji,"!=":zl,">":sp,"<":ki,">=":bh,"<=":nu,array:qr,at:No,boolean:qr,case:Qu,coalesce:Ma,collator:rr,format:on,image:Vr,in:co,"index-of":eu,interpolate:Ga,"interpolate-hcl":Ga,"interpolate-lab":Ga,length:Fl,let:Va,literal:Mr,match:Bo,number:qr,"number-format":au,object:qr,slice:tu,step:lr,string:qr,"to-boolean":cn,"to-color":cn,"to-number":cn,"to-string":cn,var:na,within:Sn};function iu(_,F){var X=F[0],le=F[1],ye=F[2],we=F[3];X=X.evaluate(_),le=le.evaluate(_),ye=ye.evaluate(_);var Pe=we?we.evaluate(_):1,Xe=Rn(X,le,ye,Pe);if(Xe)throw new xr(Xe);return new cr(X/255*Pe,le/255*Pe,ye/255*Pe,Pe)}function Ss(_,F){return _ in F}function ds(_,F){var X=F[_];return X===void 0?null:X}function Cu(_){return{type:_}}function ou(_){return{result:"success",value:_}}function xl(_){return{result:"error",value:_}}function Hs(_){return _["property-type"]==="data-driven"||_["property-type"]==="cross-faded-data-driven"}function Sc(_){return!!_.expression&&_.expression.parameters.indexOf("zoom")>-1}function qu(_){return!!_.expression&&_.expression.interpolated}function xi(_){return _ instanceof Number?"number":_ instanceof String?"string":_ instanceof Boolean?"boolean":Array.isArray(_)?"array":_===null?"null":typeof _}function bl(_){return typeof _=="object"&&_!==null&&!Array.isArray(_)}function Gf(_){return _}function Ol(_,F,X){return _!==void 0?_:F!==void 0?F:X!==void 0?X:void 0}function os(_,F,X,le,ye){return Ol(typeof X===ye?le[X]:void 0,_.default,F.default)}function Nl(_,F,X){if(xi(X)!=="number")return Ol(_.default,F.default);var le=_.stops.length;if(le===1||X<=_.stops[0][0])return _.stops[0][1];if(X>=_.stops[le-1][0])return _.stops[le-1][1];var ye=Ut(_.stops.map(function(we){return we[0]}),X);return _.stops[ye][1]}function Gs(_,F,X){var le=_.base!==void 0?_.base:1;if(xi(X)!=="number")return Ol(_.default,F.default);var ye=_.stops.length;if(ye===1||X<=_.stops[0][0])return _.stops[0][1];if(X>=_.stops[ye-1][0])return _.stops[ye-1][1];var we=Ut(_.stops.map(function(It){return It[0]}),X),Pe=function(It,Gt,Jt,pr){var dr=pr-Jt,zr=It-Jt;return dr===0?0:Gt===1?zr/dr:(Math.pow(Gt,zr)-1)/(Math.pow(Gt,dr)-1)}(X,le,_.stops[we][0],_.stops[we+1][0]),Xe=_.stops[we][1],ct=_.stops[we+1][1],Tt=Kr[F.type]||Gf;if(_.colorSpace&&_.colorSpace!=="rgb"){var Lt=Ea[_.colorSpace];Tt=function(It,Gt){return Lt.reverse(Lt.interpolate(Lt.forward(It),Lt.forward(Gt),Pe))}}return typeof Xe.evaluate=="function"?{evaluate:function(){for(var It=[],Gt=arguments.length;Gt--;)It[Gt]=arguments[Gt];var Jt=Xe.evaluate.apply(void 0,It),pr=ct.evaluate.apply(void 0,It);if(Jt!==void 0&&pr!==void 0)return Tt(Jt,pr,Pe)}}:Tt(Xe,ct,Pe)}function Bl(_,F,X){return F.type==="color"?X=cr.parse(X):F.type==="formatted"?X=Sr.fromString(X.toString()):F.type==="resolvedImage"?X=vn.fromString(X.toString()):xi(X)===F.type||F.type==="enum"&&F.values[X]||(X=void 0),Ol(X,_.default,F.default)}Nt.register(Su,{error:[{kind:"error"},[Ct],function(_,F){throw new xr(F[0].evaluate(_))}],typeof:[Ct,[Oe],function(_,F){return kt(An(F[0].evaluate(_)))}],"to-rgba":[St(lt,4),[$t],function(_,F){return F[0].evaluate(_).toArray()}],rgb:[$t,[lt,lt,lt],iu],rgba:[$t,[lt,lt,lt,lt],iu],has:{type:Pt,overloads:[[[Ct],function(_,F){return Ss(F[0].evaluate(_),_.properties())}],[[Ct,je],function(_,F){var X=F[1];return Ss(F[0].evaluate(_),X.evaluate(_))}]]},get:{type:Oe,overloads:[[[Ct],function(_,F){return ds(F[0].evaluate(_),_.properties())}],[[Ct,je],function(_,F){var X=F[1];return ds(F[0].evaluate(_),X.evaluate(_))}]]},"feature-state":[Oe,[Ct],function(_,F){return ds(F[0].evaluate(_),_.featureState||{})}],properties:[je,[],function(_){return _.properties()}],"geometry-type":[Ct,[],function(_){return _.geometryType()}],id:[Oe,[],function(_){return _.id()}],zoom:[lt,[],function(_){return _.globals.zoom}],"heatmap-density":[lt,[],function(_){return _.globals.heatmapDensity||0}],"line-progress":[lt,[],function(_){return _.globals.lineProgress||0}],accumulated:[Oe,[],function(_){return _.globals.accumulated===void 0?null:_.globals.accumulated}],"+":[lt,Cu(lt),function(_,F){for(var X=0,le=0,ye=F;le<ye.length;le+=1)X+=ye[le].evaluate(_);return X}],"*":[lt,Cu(lt),function(_,F){for(var X=1,le=0,ye=F;le<ye.length;le+=1)X*=ye[le].evaluate(_);return X}],"-":{type:lt,overloads:[[[lt,lt],function(_,F){var X=F[1];return F[0].evaluate(_)-X.evaluate(_)}],[[lt],function(_,F){return-F[0].evaluate(_)}]]},"/":[lt,[lt,lt],function(_,F){var X=F[1];return F[0].evaluate(_)/X.evaluate(_)}],"%":[lt,[lt,lt],function(_,F){var X=F[1];return F[0].evaluate(_)%X.evaluate(_)}],ln2:[lt,[],function(){return Math.LN2}],pi:[lt,[],function(){return Math.PI}],e:[lt,[],function(){return Math.E}],"^":[lt,[lt,lt],function(_,F){var X=F[1];return Math.pow(F[0].evaluate(_),X.evaluate(_))}],sqrt:[lt,[lt],function(_,F){return Math.sqrt(F[0].evaluate(_))}],log10:[lt,[lt],function(_,F){return Math.log(F[0].evaluate(_))/Math.LN10}],ln:[lt,[lt],function(_,F){return Math.log(F[0].evaluate(_))}],log2:[lt,[lt],function(_,F){return Math.log(F[0].evaluate(_))/Math.LN2}],sin:[lt,[lt],function(_,F){return Math.sin(F[0].evaluate(_))}],cos:[lt,[lt],function(_,F){return Math.cos(F[0].evaluate(_))}],tan:[lt,[lt],function(_,F){return Math.tan(F[0].evaluate(_))}],asin:[lt,[lt],function(_,F){return Math.asin(F[0].evaluate(_))}],acos:[lt,[lt],function(_,F){return Math.acos(F[0].evaluate(_))}],atan:[lt,[lt],function(_,F){return Math.atan(F[0].evaluate(_))}],min:[lt,Cu(lt),function(_,F){return Math.min.apply(Math,F.map(function(X){return X.evaluate(_)}))}],max:[lt,Cu(lt),function(_,F){return Math.max.apply(Math,F.map(function(X){return X.evaluate(_)}))}],abs:[lt,[lt],function(_,F){return Math.abs(F[0].evaluate(_))}],round:[lt,[lt],function(_,F){var X=F[0].evaluate(_);return X<0?-Math.round(-X):Math.round(X)}],floor:[lt,[lt],function(_,F){return Math.floor(F[0].evaluate(_))}],ceil:[lt,[lt],function(_,F){return Math.ceil(F[0].evaluate(_))}],"filter-==":[Pt,[Ct,Oe],function(_,F){var X=F[0],le=F[1];return _.properties()[X.value]===le.value}],"filter-id-==":[Pt,[Oe],function(_,F){var X=F[0];return _.id()===X.value}],"filter-type-==":[Pt,[Ct],function(_,F){var X=F[0];return _.geometryType()===X.value}],"filter-<":[Pt,[Ct,Oe],function(_,F){var X=F[0],le=F[1],ye=_.properties()[X.value],we=le.value;return typeof ye==typeof we&&ye<we}],"filter-id-<":[Pt,[Oe],function(_,F){var X=F[0],le=_.id(),ye=X.value;return typeof le==typeof ye&&le<ye}],"filter->":[Pt,[Ct,Oe],function(_,F){var X=F[0],le=F[1],ye=_.properties()[X.value],we=le.value;return typeof ye==typeof we&&ye>we}],"filter-id->":[Pt,[Oe],function(_,F){var X=F[0],le=_.id(),ye=X.value;return typeof le==typeof ye&&le>ye}],"filter-<=":[Pt,[Ct,Oe],function(_,F){var X=F[0],le=F[1],ye=_.properties()[X.value],we=le.value;return typeof ye==typeof we&&ye<=we}],"filter-id-<=":[Pt,[Oe],function(_,F){var X=F[0],le=_.id(),ye=X.value;return typeof le==typeof ye&&le<=ye}],"filter->=":[Pt,[Ct,Oe],function(_,F){var X=F[0],le=F[1],ye=_.properties()[X.value],we=le.value;return typeof ye==typeof we&&ye>=we}],"filter-id->=":[Pt,[Oe],function(_,F){var X=F[0],le=_.id(),ye=X.value;return typeof le==typeof ye&&le>=ye}],"filter-has":[Pt,[Oe],function(_,F){return F[0].value in _.properties()}],"filter-has-id":[Pt,[],function(_){return _.id()!==null&&_.id()!==void 0}],"filter-type-in":[Pt,[St(Ct)],function(_,F){return F[0].value.indexOf(_.geometryType())>=0}],"filter-id-in":[Pt,[St(Oe)],function(_,F){return F[0].value.indexOf(_.id())>=0}],"filter-in-small":[Pt,[Ct,St(Oe)],function(_,F){var X=F[0];return F[1].value.indexOf(_.properties()[X.value])>=0}],"filter-in-large":[Pt,[Ct,St(Oe)],function(_,F){var X=F[0],le=F[1];return function(ye,we,Pe,Xe){for(;Pe<=Xe;){var ct=Pe+Xe>>1;if(we[ct]===ye)return!0;we[ct]>ye?Xe=ct-1:Pe=ct+1}return!1}(_.properties()[X.value],le.value,0,le.value.length-1)}],all:{type:Pt,overloads:[[[Pt,Pt],function(_,F){var X=F[1];return F[0].evaluate(_)&&X.evaluate(_)}],[Cu(Pt),function(_,F){for(var X=0,le=F;X<le.length;X+=1)if(!le[X].evaluate(_))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],function(_,F){var X=F[1];return F[0].evaluate(_)||X.evaluate(_)}],[Cu(Pt),function(_,F){for(var X=0,le=F;X<le.length;X+=1)if(le[X].evaluate(_))return!0;return!1}]]},"!":[Pt,[Pt],function(_,F){return!F[0].evaluate(_)}],"is-supported-script":[Pt,[Ct],function(_,F){var X=_.globals&&_.globals.isSupportedScript;return!X||X(F[0].evaluate(_))}],upcase:[Ct,[Ct],function(_,F){return F[0].evaluate(_).toUpperCase()}],downcase:[Ct,[Ct],function(_,F){return F[0].evaluate(_).toLowerCase()}],concat:[Ct,Cu(Oe),function(_,F){return F.map(function(X){return En(X.evaluate(_))}).join("")}],"resolved-locale":[Ct,[mt],function(_,F){return F[0].evaluate(_).resolvedLocale()}]});var js=function(_,F){this.expression=_,this._warningHistory={},this._evaluator=new ht,this._defaultValue=F?function(X){return X.type==="color"&&bl(X.default)?new cr(0,0,0,0):X.type==="color"?cr.parse(X.default)||null:X.default===void 0?null:X.default}(F):null,this._enumValues=F&&F.type==="enum"?F.values:null};function Cs(_){return Array.isArray(_)&&_.length>0&&typeof _[0]=="string"&&_[0]in Su}function Es(_,F){var X=new ba(Su,[],F?function(ye){var we={color:$t,string:Ct,number:lt,enum:Ct,boolean:Pt,formatted:wt,resolvedImage:yt};return ye.type==="array"?St(we[ye.value]||Oe,ye.length):we[ye.type]}(F):void 0),le=X.parse(_,void 0,void 0,void 0,F&&F.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?ou(new js(le,F)):xl(X.errors)}js.prototype.evaluateWithoutErrorHandling=function(_,F,X,le,ye,we){return this._evaluator.globals=_,this._evaluator.feature=F,this._evaluator.featureState=X,this._evaluator.canonical=le,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=we,this.expression.evaluate(this._evaluator)},js.prototype.evaluate=function(_,F,X,le,ye,we){this._evaluator.globals=_,this._evaluator.feature=F||null,this._evaluator.featureState=X||null,this._evaluator.canonical=le,this._evaluator.availableImages=ye||null,this._evaluator.formattedSection=we||null;try{var Pe=this.expression.evaluate(this._evaluator);if(Pe==null||typeof Pe=="number"&&Pe!=Pe)return this._defaultValue;if(this._enumValues&&!(Pe in this._enumValues))throw new xr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Xe){return JSON.stringify(Xe)}).join(", ")+", but found "+JSON.stringify(Pe)+" instead.");return Pe}catch(Xe){return this._warningHistory[Xe.message]||(this._warningHistory[Xe.message]=!0,typeof console<"u"&&console.warn(Xe.message)),this._defaultValue}};var _l=function(_,F){this.kind=_,this._styleExpression=F,this.isStateDependent=_!=="constant"&&!Xn(F.expression)};_l.prototype.evaluateWithoutErrorHandling=function(_,F,X,le,ye,we){return this._styleExpression.evaluateWithoutErrorHandling(_,F,X,le,ye,we)},_l.prototype.evaluate=function(_,F,X,le,ye,we){return this._styleExpression.evaluate(_,F,X,le,ye,we)};var wl=function(_,F,X,le){this.kind=_,this.zoomStops=X,this._styleExpression=F,this.isStateDependent=_!=="camera"&&!Xn(F.expression),this.interpolationType=le};function su(_,F){if((_=Es(_,F)).result==="error")return _;var X=_.value.expression,le=aa(X);if(!le&&!Hs(F))return xl([new Ge("","data expressions not supported")]);var ye=ra(X,["zoom"]);if(!ye&&!Sc(F))return xl([new Ge("","zoom expressions not supported")]);var we=function Pe(Xe){var ct=null;if(Xe instanceof Va)ct=Pe(Xe.result);else if(Xe instanceof Ma)for(var Tt=0,Lt=Xe.args;Tt<Lt.length&&!(ct=Pe(Lt[Tt]));Tt+=1);else(Xe instanceof lr||Xe instanceof Ga)&&Xe.input instanceof Nt&&Xe.input.name==="zoom"&&(ct=Xe);return ct instanceof Ge||Xe.eachChild(function(It){var Gt=Pe(It);Gt instanceof Ge?ct=Gt:!ct&&Gt?ct=new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ct&&Gt&&ct!==Gt&&(ct=new Ge("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ct}(X);return we||ye?we instanceof Ge?xl([we]):we instanceof Ga&&!qu(F)?xl([new Ge("",'"interpolate" expressions cannot be used with this property')]):ou(we?new wl(le?"camera":"composite",_.value,we.labels,we instanceof Ga?we.interpolation:void 0):new _l(le?"constant":"source",_.value)):xl([new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}wl.prototype.evaluateWithoutErrorHandling=function(_,F,X,le,ye,we){return this._styleExpression.evaluateWithoutErrorHandling(_,F,X,le,ye,we)},wl.prototype.evaluate=function(_,F,X,le,ye,we){return this._styleExpression.evaluate(_,F,X,le,ye,we)},wl.prototype.interpolationFactor=function(_,F,X){return this.interpolationType?Ga.interpolationFactor(this.interpolationType,_,F,X):0};var bo=function(_,F){this._parameters=_,this._specification=F,Ye(this,function X(le,ye){var we,Pe,Xe,ct=ye.type==="color",Tt=le.stops&&typeof le.stops[0][0]=="object",Lt=Tt||!(Tt||le.property!==void 0),It=le.type||(qu(ye)?"exponential":"interval");if(ct&&((le=Ye({},le)).stops&&(le.stops=le.stops.map(function(fa){return[fa[0],cr.parse(fa[1])]})),le.default=cr.parse(le.default?le.default:ye.default)),le.colorSpace&&le.colorSpace!=="rgb"&&!Ea[le.colorSpace])throw new Error("Unknown color space: "+le.colorSpace);if(It==="exponential")we=Gs;else if(It==="interval")we=Nl;else if(It==="categorical"){we=os,Pe=Object.create(null);for(var Gt=0,Jt=le.stops;Gt<Jt.length;Gt+=1){var pr=Jt[Gt];Pe[pr[0]]=pr[1]}Xe=typeof le.stops[0][0]}else{if(It!=="identity")throw new Error('Unknown function type "'+It+'"');we=Bl}if(Tt){for(var dr={},zr=[],Ar=0;Ar<le.stops.length;Ar++){var Xr=le.stops[Ar],rn=Xr[0].zoom;dr[rn]===void 0&&(dr[rn]={zoom:rn,type:le.type,property:le.property,default:le.default,stops:[]},zr.push(rn)),dr[rn].stops.push([Xr[0].value,Xr[1]])}for(var mn=[],gn=0,Ln=zr;gn<Ln.length;gn+=1){var $n=Ln[gn];mn.push([dr[$n].zoom,X(dr[$n],ye)])}var oa={name:"linear"};return{kind:"composite",interpolationType:oa,interpolationFactor:Ga.interpolationFactor.bind(void 0,oa),zoomStops:mn.map(function(fa){return fa[0]}),evaluate:function(fa,Aa){var ca=fa.zoom;return Gs({stops:mn,base:le.base},ye,ca).evaluate(ca,Aa)}}}if(Lt){var _a=It==="exponential"?{name:"exponential",base:le.base!==void 0?le.base:1}:null;return{kind:"camera",interpolationType:_a,interpolationFactor:Ga.interpolationFactor.bind(void 0,_a),zoomStops:le.stops.map(function(fa){return fa[0]}),evaluate:function(fa){return we(le,ye,fa.zoom,Pe,Xe)}}}return{kind:"source",evaluate:function(fa,Aa){var ca=Aa&&Aa.properties?Aa.properties[le.property]:void 0;return ca===void 0?Ol(le.default,ye.default):we(le,ye,ca,Pe,Xe)}}}(this._parameters,this._specification))};function Ws(_){var F=_.key,X=_.value,le=_.valueSpec||{},ye=_.objectElementValidators||{},we=_.style,Pe=_.styleSpec,Xe=[],ct=xi(X);if(ct!=="object")return[new Ie(F,X,"object expected, "+ct+" found")];for(var Tt in X){var Lt=Tt.split(".")[0],It=le[Lt]||le["*"],Gt=void 0;if(ye[Lt])Gt=ye[Lt];else if(le[Lt])Gt=ei;else if(ye["*"])Gt=ye["*"];else{if(!le["*"]){Xe.push(new Ie(F,X[Tt],'unknown property "'+Tt+'"'));continue}Gt=ei}Xe=Xe.concat(Gt({key:(F&&F+".")+Tt,value:X[Tt],valueSpec:It,style:we,styleSpec:Pe,object:X,objectKey:Tt},X))}for(var Jt in le)ye[Jt]||le[Jt].required&&le[Jt].default===void 0&&X[Jt]===void 0&&Xe.push(new Ie(F,X,'missing required property "'+Jt+'"'));return Xe}function ec(_){var F=_.value,X=_.valueSpec,le=_.style,ye=_.styleSpec,we=_.key,Pe=_.arrayElementValidator||ei;if(xi(F)!=="array")return[new Ie(we,F,"array expected, "+xi(F)+" found")];if(X.length&&F.length!==X.length)return[new Ie(we,F,"array length "+X.length+" expected, length "+F.length+" found")];if(X["min-length"]&&F.length<X["min-length"])return[new Ie(we,F,"array length at least "+X["min-length"]+" expected, length "+F.length+" found")];var Xe={type:X.value,values:X.values};ye.$version<7&&(Xe.function=X.function),xi(X.value)==="object"&&(Xe=X.value);for(var ct=[],Tt=0;Tt<F.length;Tt++)ct=ct.concat(Pe({array:F,arrayIndex:Tt,value:F[Tt],valueSpec:Xe,style:le,styleSpec:ye,key:we+"["+Tt+"]"}));return ct}function cf(_){var F=_.key,X=_.value,le=_.valueSpec,ye=xi(X);return ye==="number"&&X!=X&&(ye="NaN"),ye!=="number"?[new Ie(F,X,"number expected, "+ye+" found")]:"minimum"in le&&X<le.minimum?[new Ie(F,X,X+" is less than the minimum value "+le.minimum)]:"maximum"in le&&X>le.maximum?[new Ie(F,X,X+" is greater than the maximum value "+le.maximum)]:[]}function jf(_){var F,X,le,ye=_.valueSpec,we=ut(_.value.type),Pe={},Xe=we!=="categorical"&&_.value.property===void 0,ct=!Xe,Tt=xi(_.value.stops)==="array"&&xi(_.value.stops[0])==="array"&&xi(_.value.stops[0][0])==="object",Lt=Ws({key:_.key,value:_.value,valueSpec:_.styleSpec.function,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{stops:function(Jt){if(we==="identity")return[new Ie(Jt.key,Jt.value,'identity function may not have a "stops" property')];var pr=[],dr=Jt.value;return pr=pr.concat(ec({key:Jt.key,value:dr,valueSpec:Jt.valueSpec,style:Jt.style,styleSpec:Jt.styleSpec,arrayElementValidator:It})),xi(dr)==="array"&&dr.length===0&&pr.push(new Ie(Jt.key,dr,"array must have at least one stop")),pr},default:function(Jt){return ei({key:Jt.key,value:Jt.value,valueSpec:ye,style:Jt.style,styleSpec:Jt.styleSpec})}}});return we==="identity"&&Xe&&Lt.push(new Ie(_.key,_.value,'missing required property "property"')),we==="identity"||_.value.stops||Lt.push(new Ie(_.key,_.value,'missing required property "stops"')),we==="exponential"&&_.valueSpec.expression&&!qu(_.valueSpec)&&Lt.push(new Ie(_.key,_.value,"exponential functions not supported")),_.styleSpec.$version>=8&&(ct&&!Hs(_.valueSpec)?Lt.push(new Ie(_.key,_.value,"property functions not supported")):Xe&&!Sc(_.valueSpec)&&Lt.push(new Ie(_.key,_.value,"zoom functions not supported"))),we!=="categorical"&&!Tt||_.value.property!==void 0||Lt.push(new Ie(_.key,_.value,'"property" property is required')),Lt;function It(Jt){var pr=[],dr=Jt.value,zr=Jt.key;if(xi(dr)!=="array")return[new Ie(zr,dr,"array expected, "+xi(dr)+" found")];if(dr.length!==2)return[new Ie(zr,dr,"array length 2 expected, length "+dr.length+" found")];if(Tt){if(xi(dr[0])!=="object")return[new Ie(zr,dr,"object expected, "+xi(dr[0])+" found")];if(dr[0].zoom===void 0)return[new Ie(zr,dr,"object stop key must have zoom")];if(dr[0].value===void 0)return[new Ie(zr,dr,"object stop key must have value")];if(le&&le>ut(dr[0].zoom))return[new Ie(zr,dr[0].zoom,"stop zoom values must appear in ascending order")];ut(dr[0].zoom)!==le&&(le=ut(dr[0].zoom),X=void 0,Pe={}),pr=pr.concat(Ws({key:zr+"[0]",value:dr[0],valueSpec:{zoom:{}},style:Jt.style,styleSpec:Jt.styleSpec,objectElementValidators:{zoom:cf,value:Gt}}))}else pr=pr.concat(Gt({key:zr+"[0]",value:dr[0],valueSpec:{},style:Jt.style,styleSpec:Jt.styleSpec},dr));return Cs(nt(dr[1]))?pr.concat([new Ie(zr+"[1]",dr[1],"expressions are not allowed in function stops.")]):pr.concat(ei({key:zr+"[1]",value:dr[1],valueSpec:ye,style:Jt.style,styleSpec:Jt.styleSpec}))}function Gt(Jt,pr){var dr=xi(Jt.value),zr=ut(Jt.value),Ar=Jt.value!==null?Jt.value:pr;if(F){if(dr!==F)return[new Ie(Jt.key,Ar,dr+" stop domain type must match previous stop domain type "+F)]}else F=dr;if(dr!=="number"&&dr!=="string"&&dr!=="boolean")return[new Ie(Jt.key,Ar,"stop domain value must be a number, string, or boolean")];if(dr!=="number"&&we!=="categorical"){var Xr="number expected, "+dr+" found";return Hs(ye)&&we===void 0&&(Xr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(Jt.key,Ar,Xr)]}return we!=="categorical"||dr!=="number"||isFinite(zr)&&Math.floor(zr)===zr?we!=="categorical"&&dr==="number"&&X!==void 0&&zr<X?[new Ie(Jt.key,Ar,"stop domain values must appear in ascending order")]:(X=zr,we==="categorical"&&zr in Pe?[new Ie(Jt.key,Ar,"stop domain values must be unique")]:(Pe[zr]=!0,[])):[new Ie(Jt.key,Ar,"integer expected, found "+zr)]}}function Ys(_){var F=(_.expressionContext==="property"?su:Es)(nt(_.value),_.valueSpec);if(F.result==="error")return F.value.map(function(le){return new Ie(""+_.key+le.key,_.value,le.message)});var X=F.value.expression||F.value._styleExpression.expression;if(_.expressionContext==="property"&&_.propertyKey==="text-font"&&!X.outputDefined())return[new Ie(_.key,_.value,'Invalid data expression for "'+_.propertyKey+'". Output values must be contained as literals within the expression.')];if(_.expressionContext==="property"&&_.propertyType==="layout"&&!Xn(X))return[new Ie(_.key,_.value,'"feature-state" data expressions are not supported with layout properties.')];if(_.expressionContext==="filter"&&!Xn(X))return[new Ie(_.key,_.value,'"feature-state" data expressions are not supported with filters.')];if(_.expressionContext&&_.expressionContext.indexOf("cluster")===0){if(!ra(X,["zoom","feature-state"]))return[new Ie(_.key,_.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(_.expressionContext==="cluster-initial"&&!aa(X))return[new Ie(_.key,_.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eu(_){var F=_.key,X=_.value,le=_.valueSpec,ye=[];return Array.isArray(le.values)?le.values.indexOf(ut(X))===-1&&ye.push(new Ie(F,X,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(X)+" found")):Object.keys(le.values).indexOf(ut(X))===-1&&ye.push(new Ie(F,X,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(X)+" found")),ye}function Lu(_){if(_===!0||_===!1)return!0;if(!Array.isArray(_)||_.length===0)return!1;switch(_[0]){case"has":return _.length>=2&&_[1]!=="$id"&&_[1]!=="$type";case"in":return _.length>=3&&(typeof _[1]!="string"||Array.isArray(_[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return _.length!==3||Array.isArray(_[1])||Array.isArray(_[2]);case"any":case"all":for(var F=0,X=_.slice(1);F<X.length;F+=1){var le=X[F];if(!Lu(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}bo.deserialize=function(_){return new bo(_._parameters,_._specification)},bo.serialize=function(_){return{_parameters:_._parameters,_specification:_._specification}};var _h={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Cc(_){if(_==null)return{filter:function(){return!0},needGeometry:!1};Lu(_)||(_=ms(_));var F=Es(_,_h);if(F.result==="error")throw new Error(F.value.map(function(X){return X.key+": "+X.message}).join(", "));return{filter:function(X,le,ye){return F.value.evaluate(X,le,{},ye)},needGeometry:function X(le){if(!Array.isArray(le))return!1;if(le[0]==="within")return!0;for(var ye=1;ye<le.length;ye++)if(X(le[ye]))return!0;return!1}(_)}}function Tl(_,F){return _<F?-1:_>F?1:0}function ms(_){if(!_)return!0;var F,X=_[0];return _.length<=1?X!=="any":X==="=="?Wf(_[1],_[2],"=="):X==="!="?ff(Wf(_[1],_[2],"==")):X==="<"||X===">"||X==="<="||X===">="?Wf(_[1],_[2],X):X==="any"?(F=_.slice(1),["any"].concat(F.map(ms))):X==="all"?["all"].concat(_.slice(1).map(ms)):X==="none"?["all"].concat(_.slice(1).map(ms).map(ff)):X==="in"?wh(_[1],_.slice(2)):X==="!in"?ff(wh(_[1],_.slice(2))):X==="has"?lp(_[1]):X==="!has"?ff(lp(_[1])):X!=="within"||_}function Wf(_,F,X){switch(_){case"$type":return["filter-type-"+X,F];case"$id":return["filter-id-"+X,F];default:return["filter-"+X,_,F]}}function wh(_,F){if(F.length===0)return!1;switch(_){case"$type":return["filter-type-in",["literal",F]];case"$id":return["filter-id-in",["literal",F]];default:return F.length>200&&!F.some(function(X){return typeof X!=typeof F[0]})?["filter-in-large",_,["literal",F.sort(Tl)]]:["filter-in-small",_,["literal",F]]}}function lp(_){switch(_){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",_]}}function ff(_){return["!",_]}function Th(_){return Lu(nt(_.value))?Ys(Ye({},_,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function F(X){var le=X.value,ye=X.key;if(xi(le)!=="array")return[new Ie(ye,le,"array expected, "+xi(le)+" found")];var we,Pe=X.styleSpec,Xe=[];if(le.length<1)return[new Ie(ye,le,"filter array must have at least 1 element")];switch(Xe=Xe.concat(Eu({key:ye+"[0]",value:le[0],valueSpec:Pe.filter_operator,style:X.style,styleSpec:X.styleSpec})),ut(le[0])){case"<":case"<=":case">":case">=":le.length>=2&&ut(le[1])==="$type"&&Xe.push(new Ie(ye,le,'"$type" cannot be use with operator "'+le[0]+'"'));case"==":case"!=":le.length!==3&&Xe.push(new Ie(ye,le,'filter array for operator "'+le[0]+'" must have 3 elements'));case"in":case"!in":le.length>=2&&(we=xi(le[1]))!=="string"&&Xe.push(new Ie(ye+"[1]",le[1],"string expected, "+we+" found"));for(var ct=2;ct<le.length;ct++)we=xi(le[ct]),ut(le[1])==="$type"?Xe=Xe.concat(Eu({key:ye+"["+ct+"]",value:le[ct],valueSpec:Pe.geometry_type,style:X.style,styleSpec:X.styleSpec})):we!=="string"&&we!=="number"&&we!=="boolean"&&Xe.push(new Ie(ye+"["+ct+"]",le[ct],"string, number, or boolean expected, "+we+" found"));break;case"any":case"all":case"none":for(var Tt=1;Tt<le.length;Tt++)Xe=Xe.concat(F({key:ye+"["+Tt+"]",value:le[Tt],style:X.style,styleSpec:X.styleSpec}));break;case"has":case"!has":we=xi(le[1]),le.length!==2?Xe.push(new Ie(ye,le,'filter array for "'+le[0]+'" operator must have 2 elements')):we!=="string"&&Xe.push(new Ie(ye+"[1]",le[1],"string expected, "+we+" found"));break;case"within":we=xi(le[1]),le.length!==2?Xe.push(new Ie(ye,le,'filter array for "'+le[0]+'" operator must have 2 elements')):we!=="object"&&Xe.push(new Ie(ye+"[1]",le[1],"object expected, "+we+" found"))}return Xe}(_)}function up(_,F){var X=_.key,le=_.style,ye=_.styleSpec,we=_.value,Pe=_.objectKey,Xe=ye[F+"_"+_.layerType];if(!Xe)return[];var ct=Pe.match(/^(.*)-transition$/);if(F==="paint"&&ct&&Xe[ct[1]]&&Xe[ct[1]].transition)return ei({key:X,value:we,valueSpec:ye.transition,style:le,styleSpec:ye});var Tt,Lt=_.valueSpec||Xe[Pe];if(!Lt)return[new Ie(X,we,'unknown property "'+Pe+'"')];if(xi(we)==="string"&&Hs(Lt)&&!Lt.tokens&&(Tt=/^{([^}]+)}$/.exec(we)))return[new Ie(X,we,'"'+Pe+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Tt[1])+" }`.")];var It=[];return _.layerType==="symbol"&&(Pe==="text-field"&&le&&!le.glyphs&&It.push(new Ie(X,we,'use of "text-field" requires a style "glyphs" property')),Pe==="text-font"&&bl(nt(we))&&ut(we.type)==="identity"&&It.push(new Ie(X,we,'"text-font" does not support identity functions'))),It.concat(ei({key:_.key,value:we,valueSpec:Lt,style:le,styleSpec:ye,expressionContext:"property",propertyType:F,propertyKey:Pe}))}function tc(_){return up(_,"paint")}function tn(_){return up(_,"layout")}function Dn(_){var F=[],X=_.value,le=_.key,ye=_.style,we=_.styleSpec;X.type||X.ref||F.push(new Ie(le,X,'either "type" or "ref" is required'));var Pe,Xe=ut(X.type),ct=ut(X.ref);if(X.id)for(var Tt=ut(X.id),Lt=0;Lt<_.arrayIndex;Lt++){var It=ye.layers[Lt];ut(It.id)===Tt&&F.push(new Ie(le,X.id,'duplicate layer id "'+X.id+'", previously used at line '+It.id.__line__))}if("ref"in X)["type","source","source-layer","filter","layout"].forEach(function(pr){pr in X&&F.push(new Ie(le,X[pr],'"'+pr+'" is prohibited for ref layers'))}),ye.layers.forEach(function(pr){ut(pr.id)===ct&&(Pe=pr)}),Pe?Pe.ref?F.push(new Ie(le,X.ref,"ref cannot reference another ref layer")):Xe=ut(Pe.type):F.push(new Ie(le,X.ref,'ref layer "'+ct+'" not found'));else if(Xe!=="background")if(X.source){var Gt=ye.sources&&ye.sources[X.source],Jt=Gt&&ut(Gt.type);Gt?Jt==="vector"&&Xe==="raster"?F.push(new Ie(le,X.source,'layer "'+X.id+'" requires a raster source')):Jt==="raster"&&Xe!=="raster"?F.push(new Ie(le,X.source,'layer "'+X.id+'" requires a vector source')):Jt!=="vector"||X["source-layer"]?Jt==="raster-dem"&&Xe!=="hillshade"?F.push(new Ie(le,X.source,"raster-dem source can only be used with layer type 'hillshade'.")):Xe!=="line"||!X.paint||!X.paint["line-gradient"]||Jt==="geojson"&&Gt.lineMetrics||F.push(new Ie(le,X,'layer "'+X.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):F.push(new Ie(le,X,'layer "'+X.id+'" must specify a "source-layer"')):F.push(new Ie(le,X.source,'source "'+X.source+'" not found'))}else F.push(new Ie(le,X,'missing required property "source"'));return F=F.concat(Ws({key:le,value:X,valueSpec:we.layer,style:_.style,styleSpec:_.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ei({key:le+".type",value:X.type,valueSpec:we.layer.type,style:_.style,styleSpec:_.styleSpec,object:X,objectKey:"type"})},filter:Th,layout:function(pr){return Ws({layer:X,key:pr.key,value:pr.value,style:pr.style,styleSpec:pr.styleSpec,objectElementValidators:{"*":function(dr){return tn(Ye({layerType:Xe},dr))}}})},paint:function(pr){return Ws({layer:X,key:pr.key,value:pr.value,style:pr.style,styleSpec:pr.styleSpec,objectElementValidators:{"*":function(dr){return tc(Ye({layerType:Xe},dr))}}})}}}))}function _n(_){var F=_.value,X=_.key,le=xi(F);return le!=="string"?[new Ie(X,F,"string expected, "+le+" found")]:[]}var xa={promoteId:function(_){var F=_.key,X=_.value;if(xi(X)==="string")return _n({key:F,value:X});var le=[];for(var ye in X)le.push.apply(le,_n({key:F+"."+ye,value:X[ye]}));return le}};function Ja(_){var F=_.value,X=_.key,le=_.styleSpec,ye=_.style;if(!F.type)return[new Ie(X,F,'"type" is required')];var we,Pe=ut(F.type);switch(Pe){case"vector":case"raster":case"raster-dem":return Ws({key:X,value:F,valueSpec:le["source_"+Pe.replace("-","_")],style:_.style,styleSpec:le,objectElementValidators:xa});case"geojson":if(we=Ws({key:X,value:F,valueSpec:le.source_geojson,style:ye,styleSpec:le,objectElementValidators:xa}),F.cluster)for(var Xe in F.clusterProperties){var ct=F.clusterProperties[Xe],Tt=ct[0],Lt=typeof Tt=="string"?[Tt,["accumulated"],["get",Xe]]:Tt;we.push.apply(we,Ys({key:X+"."+Xe+".map",value:ct[1],expressionContext:"cluster-map"})),we.push.apply(we,Ys({key:X+"."+Xe+".reduce",value:Lt,expressionContext:"cluster-reduce"}))}return we;case"video":return Ws({key:X,value:F,valueSpec:le.source_video,style:ye,styleSpec:le});case"image":return Ws({key:X,value:F,valueSpec:le.source_image,style:ye,styleSpec:le});case"canvas":return[new Ie(X,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Eu({key:X+".type",value:F.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ye,styleSpec:le})}}function Ra(_){var F=_.value,X=_.styleSpec,le=X.light,ye=_.style,we=[],Pe=xi(F);if(F===void 0)return we;if(Pe!=="object")return we.concat([new Ie("light",F,"object expected, "+Pe+" found")]);for(var Xe in F){var ct=Xe.match(/^(.*)-transition$/);we=we.concat(ct&&le[ct[1]]&&le[ct[1]].transition?ei({key:Xe,value:F[Xe],valueSpec:X.transition,style:ye,styleSpec:X}):le[Xe]?ei({key:Xe,value:F[Xe],valueSpec:le[Xe],style:ye,styleSpec:X}):[new Ie(Xe,F[Xe],'unknown property "'+Xe+'"')])}return we}var ao={"*":function(){return[]},array:ec,boolean:function(_){var F=_.value,X=_.key,le=xi(F);return le!=="boolean"?[new Ie(X,F,"boolean expected, "+le+" found")]:[]},number:cf,color:function(_){var F=_.key,X=_.value,le=xi(X);return le!=="string"?[new Ie(F,X,"color expected, "+le+" found")]:Vt(X)===null?[new Ie(F,X,'color expected, "'+X+'" found')]:[]},constants:He,enum:Eu,filter:Th,function:jf,layer:Dn,object:Ws,source:Ja,light:Ra,string:_n,formatted:function(_){return _n(_).length===0?[]:Ys(_)},resolvedImage:function(_){return _n(_).length===0?[]:Ys(_)}};function ei(_){var F=_.value,X=_.valueSpec,le=_.styleSpec;return X.expression&&bl(ut(F))?jf(_):X.expression&&Cs(nt(F))?Ys(_):X.type&&ao[X.type]?ao[X.type](_):Ws(Ye({},_,{valueSpec:X.type?le[X.type]:X}))}function Al(_){var F=_.value,X=_.key,le=_n(_);return le.length||(F.indexOf("{fontstack}")===-1&&le.push(new Ie(X,F,'"glyphs" url must include a "{fontstack}" token')),F.indexOf("{range}")===-1&&le.push(new Ie(X,F,'"glyphs" url must include a "{range}" token'))),le}function ti(_,F){F===void 0&&(F=Me);var X=[];return X=X.concat(ei({key:"",value:_,valueSpec:F.$root,styleSpec:F,style:_,objectElementValidators:{glyphs:Al,"*":function(){return[]}}})),_.constants&&(X=X.concat(He({key:"constants",value:_.constants,style:_,styleSpec:F}))),si(X)}function si(_){return[].concat(_).sort(function(F,X){return F.line-X.line})}function Uo(_){return function(){for(var F=[],X=arguments.length;X--;)F[X]=arguments[X];return si(_.apply(this,F))}}ti.source=Uo(Ja),ti.light=Uo(Ra),ti.layer=Uo(Dn),ti.filter=Uo(Th),ti.paintProperty=Uo(tc),ti.layoutProperty=Uo(tn);var Ml=ti,lu=Ml.light,rc=Ml.paintProperty,Yf=Ml.layoutProperty;function Li(_,F){var X=!1;if(F&&F.length)for(var le=0,ye=F;le<ye.length;le+=1)_.fire(new Ve(new Error(ye[le].message))),X=!0;return X}var Ul=gs;function gs(_,F,X){var le=this.cells=[];if(_ instanceof ArrayBuffer){this.arrayBuffer=_;var ye=new Int32Array(this.arrayBuffer);_=ye[0],this.d=(F=ye[1])+2*(X=ye[2]);for(var we=0;we<this.d*this.d;we++){var Pe=ye[3+we],Xe=ye[3+we+1];le.push(Pe===Xe?null:ye.subarray(Pe,Xe))}var ct=ye[3+le.length+1];this.keys=ye.subarray(ye[3+le.length],ct),this.bboxes=ye.subarray(ct),this.insert=this._insertReadonly}else{this.d=F+2*X;for(var Tt=0;Tt<this.d*this.d;Tt++)le.push([]);this.keys=[],this.bboxes=[]}this.n=F,this.extent=_,this.padding=X,this.scale=F/_,this.uid=0;var Lt=X/F*_;this.min=-Lt,this.max=_+Lt}gs.prototype.insert=function(_,F,X,le,ye){this._forEachCell(F,X,le,ye,this._insertCell,this.uid++),this.keys.push(_),this.bboxes.push(F),this.bboxes.push(X),this.bboxes.push(le),this.bboxes.push(ye)},gs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},gs.prototype._insertCell=function(_,F,X,le,ye,we){this.cells[ye].push(we)},gs.prototype.query=function(_,F,X,le,ye){var we=this.min,Pe=this.max;if(_<=we&&F<=we&&Pe<=X&&Pe<=le&&!ye)return Array.prototype.slice.call(this.keys);var Xe=[];return this._forEachCell(_,F,X,le,this._queryCell,Xe,{},ye),Xe},gs.prototype._queryCell=function(_,F,X,le,ye,we,Pe,Xe){var ct=this.cells[ye];if(ct!==null)for(var Tt=this.keys,Lt=this.bboxes,It=0;It<ct.length;It++){var Gt=ct[It];if(Pe[Gt]===void 0){var Jt=4*Gt;(Xe?Xe(Lt[Jt+0],Lt[Jt+1],Lt[Jt+2],Lt[Jt+3]):_<=Lt[Jt+2]&&F<=Lt[Jt+3]&&X>=Lt[Jt+0]&&le>=Lt[Jt+1])?(Pe[Gt]=!0,we.push(Tt[Gt])):Pe[Gt]=!1}}},gs.prototype._forEachCell=function(_,F,X,le,ye,we,Pe,Xe){for(var ct=this._convertToCellCoord(_),Tt=this._convertToCellCoord(F),Lt=this._convertToCellCoord(X),It=this._convertToCellCoord(le),Gt=ct;Gt<=Lt;Gt++)for(var Jt=Tt;Jt<=It;Jt++){var pr=this.d*Jt+Gt;if((!Xe||Xe(this._convertFromCellCoord(Gt),this._convertFromCellCoord(Jt),this._convertFromCellCoord(Gt+1),this._convertFromCellCoord(Jt+1)))&&ye.call(this,_,F,X,le,pr,we,Pe,Xe))return}},gs.prototype._convertFromCellCoord=function(_){return(_-this.padding)/this.scale},gs.prototype._convertToCellCoord=function(_){return Math.max(0,Math.min(this.d-1,Math.floor(_*this.scale)+this.padding))},gs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var _=this.cells,F=3+this.cells.length+1+1,X=0,le=0;le<this.cells.length;le++)X+=this.cells[le].length;var ye=new Int32Array(F+X+this.keys.length+this.bboxes.length);ye[0]=this.extent,ye[1]=this.n,ye[2]=this.padding;for(var we=F,Pe=0;Pe<_.length;Pe++){var Xe=_[Pe];ye[3+Pe]=we,ye.set(Xe,we),we+=Xe.length}return ye[3+_.length]=we,ye.set(this.keys,we),ye[3+_.length+1]=we+=this.keys.length,ye.set(this.bboxes,we),we+=this.bboxes.length,ye.buffer};var Vo=self.ImageData,So=self.ImageBitmap,uu={};function ga(_,F,X){X===void 0&&(X={}),Object.defineProperty(F,"_classRegistryKey",{value:_,writeable:!1}),uu[_]={klass:F,omit:X.omit||[],shallow:X.shallow||[]}}for(var io in ga("Object",Object),Ul.serialize=function(_,F){var X=_.toArrayBuffer();return F&&F.push(X),{buffer:X}},Ul.deserialize=function(_){return new Ul(_.buffer)},ga("Grid",Ul),ga("Color",cr),ga("Error",Error),ga("ResolvedImage",vn),ga("StylePropertyFunction",bo),ga("StyleExpression",js,{omit:["_evaluator"]}),ga("ZoomDependentExpression",wl),ga("ZoomConstantExpression",_l),ga("CompoundExpression",Nt,{omit:["_evaluate"]}),Su)Su[io]._classRegistryKey||ga("Expression_"+io,Su[io]);function Ho(_){return _&&typeof ArrayBuffer<"u"&&(_ instanceof ArrayBuffer||_.constructor&&_.constructor.name==="ArrayBuffer")}function ss(_){return So&&_ instanceof So}function Pu(_,F){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp)return _;if(Ho(_)||ss(_))return F&&F.push(_),_;if(ArrayBuffer.isView(_)){var X=_;return F&&F.push(X.buffer),X}if(_ instanceof Vo)return F&&F.push(_.data.buffer),_;if(Array.isArray(_)){for(var le=[],ye=0,we=_;ye<we.length;ye+=1)le.push(Pu(we[ye],F));return le}if(typeof _=="object"){var Pe=_.constructor,Xe=Pe._classRegistryKey;if(!Xe)throw new Error("can't serialize object of unregistered class");var ct=Pe.serialize?Pe.serialize(_,F):{};if(!Pe.serialize){for(var Tt in _)if(_.hasOwnProperty(Tt)&&!(uu[Xe].omit.indexOf(Tt)>=0)){var Lt=_[Tt];ct[Tt]=uu[Xe].shallow.indexOf(Tt)>=0?Lt:Pu(Lt,F)}_ instanceof Error&&(ct.message=_.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return Xe!=="Object"&&(ct.$name=Xe),ct}throw new Error("can't serialize object of type "+typeof _)}function Xs(_){if(_==null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||_ instanceof Boolean||_ instanceof Number||_ instanceof String||_ instanceof Date||_ instanceof RegExp||Ho(_)||ss(_)||ArrayBuffer.isView(_)||_ instanceof Vo)return _;if(Array.isArray(_))return _.map(Xs);if(typeof _=="object"){var F=_.$name||"Object",X=uu[F].klass;if(!X)throw new Error("can't deserialize unregistered class "+F);if(X.deserialize)return X.deserialize(_);for(var le=Object.create(X.prototype),ye=0,we=Object.keys(_);ye<we.length;ye+=1){var Pe=we[ye];if(Pe!=="$name"){var Xe=_[Pe];le[Pe]=uu[F].shallow.indexOf(Pe)>=0?Xe:Xs(Xe)}}return le}throw new Error("can't deserialize object of type "+typeof _)}var kl=function(){this.first=!0};kl.prototype.update=function(_,F){var X=Math.floor(_);return this.first?(this.first=!1,this.lastIntegerZoom=X,this.lastIntegerZoomTime=0,this.lastZoom=_,this.lastFloorZoom=X,!0):(this.lastFloorZoom>X?(this.lastIntegerZoom=X+1,this.lastIntegerZoomTime=F):this.lastFloorZoom<X&&(this.lastIntegerZoom=X,this.lastIntegerZoomTime=F),_!==this.lastZoom&&(this.lastZoom=_,this.lastFloorZoom=X,!0))};var ea={"Latin-1 Supplement":function(_){return _>=128&&_<=255},Arabic:function(_){return _>=1536&&_<=1791},"Arabic Supplement":function(_){return _>=1872&&_<=1919},"Arabic Extended-A":function(_){return _>=2208&&_<=2303},"Hangul Jamo":function(_){return _>=4352&&_<=4607},"Unified Canadian Aboriginal Syllabics":function(_){return _>=5120&&_<=5759},Khmer:function(_){return _>=6016&&_<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(_){return _>=6320&&_<=6399},"General Punctuation":function(_){return _>=8192&&_<=8303},"Letterlike Symbols":function(_){return _>=8448&&_<=8527},"Number Forms":function(_){return _>=8528&&_<=8591},"Miscellaneous Technical":function(_){return _>=8960&&_<=9215},"Control Pictures":function(_){return _>=9216&&_<=9279},"Optical Character Recognition":function(_){return _>=9280&&_<=9311},"Enclosed Alphanumerics":function(_){return _>=9312&&_<=9471},"Geometric Shapes":function(_){return _>=9632&&_<=9727},"Miscellaneous Symbols":function(_){return _>=9728&&_<=9983},"Miscellaneous Symbols and Arrows":function(_){return _>=11008&&_<=11263},"CJK Radicals Supplement":function(_){return _>=11904&&_<=12031},"Kangxi Radicals":function(_){return _>=12032&&_<=12255},"Ideographic Description Characters":function(_){return _>=12272&&_<=12287},"CJK Symbols and Punctuation":function(_){return _>=12288&&_<=12351},Hiragana:function(_){return _>=12352&&_<=12447},Katakana:function(_){return _>=12448&&_<=12543},Bopomofo:function(_){return _>=12544&&_<=12591},"Hangul Compatibility Jamo":function(_){return _>=12592&&_<=12687},Kanbun:function(_){return _>=12688&&_<=12703},"Bopomofo Extended":function(_){return _>=12704&&_<=12735},"CJK Strokes":function(_){return _>=12736&&_<=12783},"Katakana Phonetic Extensions":function(_){return _>=12784&&_<=12799},"Enclosed CJK Letters and Months":function(_){return _>=12800&&_<=13055},"CJK Compatibility":function(_){return _>=13056&&_<=13311},"CJK Unified Ideographs Extension A":function(_){return _>=13312&&_<=19903},"Yijing Hexagram Symbols":function(_){return _>=19904&&_<=19967},"CJK Unified Ideographs":function(_){return _>=19968&&_<=40959},"Yi Syllables":function(_){return _>=40960&&_<=42127},"Yi Radicals":function(_){return _>=42128&&_<=42191},"Hangul Jamo Extended-A":function(_){return _>=43360&&_<=43391},"Hangul Syllables":function(_){return _>=44032&&_<=55215},"Hangul Jamo Extended-B":function(_){return _>=55216&&_<=55295},"Private Use Area":function(_){return _>=57344&&_<=63743},"CJK Compatibility Ideographs":function(_){return _>=63744&&_<=64255},"Arabic Presentation Forms-A":function(_){return _>=64336&&_<=65023},"Vertical Forms":function(_){return _>=65040&&_<=65055},"CJK Compatibility Forms":function(_){return _>=65072&&_<=65103},"Small Form Variants":function(_){return _>=65104&&_<=65135},"Arabic Presentation Forms-B":function(_){return _>=65136&&_<=65279},"Halfwidth and Fullwidth Forms":function(_){return _>=65280&&_<=65519}};function _o(_){for(var F=0,X=_;F<X.length;F+=1)if(hf(X[F].charCodeAt(0)))return!0;return!1}function hf(_){return!(_!==746&&_!==747&&(_<4352||!(ea["Bopomofo Extended"](_)||ea.Bopomofo(_)||ea["CJK Compatibility Forms"](_)&&!(_>=65097&&_<=65103)||ea["CJK Compatibility Ideographs"](_)||ea["CJK Compatibility"](_)||ea["CJK Radicals Supplement"](_)||ea["CJK Strokes"](_)||!(!ea["CJK Symbols and Punctuation"](_)||_>=12296&&_<=12305||_>=12308&&_<=12319||_===12336)||ea["CJK Unified Ideographs Extension A"](_)||ea["CJK Unified Ideographs"](_)||ea["Enclosed CJK Letters and Months"](_)||ea["Hangul Compatibility Jamo"](_)||ea["Hangul Jamo Extended-A"](_)||ea["Hangul Jamo Extended-B"](_)||ea["Hangul Jamo"](_)||ea["Hangul Syllables"](_)||ea.Hiragana(_)||ea["Ideographic Description Characters"](_)||ea.Kanbun(_)||ea["Kangxi Radicals"](_)||ea["Katakana Phonetic Extensions"](_)||ea.Katakana(_)&&_!==12540||!(!ea["Halfwidth and Fullwidth Forms"](_)||_===65288||_===65289||_===65293||_>=65306&&_<=65310||_===65339||_===65341||_===65343||_>=65371&&_<=65503||_===65507||_>=65512&&_<=65519)||!(!ea["Small Form Variants"](_)||_>=65112&&_<=65118||_>=65123&&_<=65126)||ea["Unified Canadian Aboriginal Syllabics"](_)||ea["Unified Canadian Aboriginal Syllabics Extended"](_)||ea["Vertical Forms"](_)||ea["Yijing Hexagram Symbols"](_)||ea["Yi Syllables"](_)||ea["Yi Radicals"](_))))}function Sl(_){return!(hf(_)||function(F){return!!(ea["Latin-1 Supplement"](F)&&(F===167||F===169||F===174||F===177||F===188||F===189||F===190||F===215||F===247)||ea["General Punctuation"](F)&&(F===8214||F===8224||F===8225||F===8240||F===8241||F===8251||F===8252||F===8258||F===8263||F===8264||F===8265||F===8273)||ea["Letterlike Symbols"](F)||ea["Number Forms"](F)||ea["Miscellaneous Technical"](F)&&(F>=8960&&F<=8967||F>=8972&&F<=8991||F>=8996&&F<=9e3||F===9003||F>=9085&&F<=9114||F>=9150&&F<=9165||F===9167||F>=9169&&F<=9179||F>=9186&&F<=9215)||ea["Control Pictures"](F)&&F!==9251||ea["Optical Character Recognition"](F)||ea["Enclosed Alphanumerics"](F)||ea["Geometric Shapes"](F)||ea["Miscellaneous Symbols"](F)&&!(F>=9754&&F<=9759)||ea["Miscellaneous Symbols and Arrows"](F)&&(F>=11026&&F<=11055||F>=11088&&F<=11097||F>=11192&&F<=11243)||ea["CJK Symbols and Punctuation"](F)||ea.Katakana(F)||ea["Private Use Area"](F)||ea["CJK Compatibility Forms"](F)||ea["Small Form Variants"](F)||ea["Halfwidth and Fullwidth Forms"](F)||F===8734||F===8756||F===8757||F>=9984&&F<=10087||F>=10102&&F<=10131||F===65532||F===65533)}(_))}function Vl(_){return _>=1424&&_<=2303||ea["Arabic Presentation Forms-A"](_)||ea["Arabic Presentation Forms-B"](_)}function ls(_,F){return!(!F&&Vl(_)||_>=2304&&_<=3583||_>=3840&&_<=4255||ea.Khmer(_))}function ys(_){for(var F=0,X=_;F<X.length;F+=1)if(Vl(X[F].charCodeAt(0)))return!0;return!1}var nc=null,us="unavailable",Zs=null,ac=function(_){_&&typeof _=="string"&&_.indexOf("NetworkError")>-1&&(us="error"),nc&&nc(_)};function Ec(){Lc.fire(new Le("pluginStateChange",{pluginStatus:us,pluginURL:Zs}))}var Lc=new Qe,Pc=function(){return us},Xf=function(){if(us!=="deferred"||!Zs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");us="loading",Ec(),Zs&&Mt({url:Zs},function(_){_?ac(_):(us="loaded",Ec())})},Co={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return us==="loaded"||Co.applyArabicShaping!=null},isLoading:function(){return us==="loading"},setState:function(_){us=_.pluginStatus,Zs=_.pluginURL},isParsed:function(){return Co.applyArabicShaping!=null&&Co.processBidirectionalText!=null&&Co.processStyledBidirectionalText!=null},getPluginURL:function(){return Zs}},Za=function(_,F){this.zoom=_,F?(this.now=F.now,this.fadeDuration=F.fadeDuration,this.zoomHistory=F.zoomHistory,this.transition=F.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new kl,this.transition={})};Za.prototype.isSupportedScript=function(_){return function(F,X){for(var le=0,ye=F;le<ye.length;le+=1)if(!ls(ye[le].charCodeAt(0),X))return!1;return!0}(_,Co.isLoaded())},Za.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Za.prototype.getCrossfadeParameters=function(){var _=this.zoom,F=_-Math.floor(_),X=this.crossFadingFactor();return _>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:F+(1-F)*X}:{fromScale:.5,toScale:1,t:1-(1-X)*F}};var ui=function(_,F){this.property=_,this.value=F,this.expression=function(X,le){if(bl(X))return new bo(X,le);if(Cs(X)){var ye=su(X,le);if(ye.result==="error")throw new Error(ye.value.map(function(Pe){return Pe.key+": "+Pe.message}).join(", "));return ye.value}var we=X;return typeof X=="string"&&le.type==="color"&&(we=cr.parse(X)),{kind:"constant",evaluate:function(){return we}}}(F===void 0?_.specification.default:F,_.specification)};ui.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ui.prototype.possiblyEvaluate=function(_,F,X){return this.property.possiblyEvaluate(this,_,F,X)};var cu=function(_){this.property=_,this.value=new ui(_,void 0)};cu.prototype.transitioned=function(_,F){return new Ls(this.property,this.value,F,m({},_.transition,this.transition),_.now)},cu.prototype.untransitioned=function(){return new Ls(this.property,this.value,null,{},0)};var Eo=function(_){this._properties=_,this._values=Object.create(_.defaultTransitionablePropertyValues)};Eo.prototype.getValue=function(_){return L(this._values[_].value.value)},Eo.prototype.setValue=function(_,F){this._values.hasOwnProperty(_)||(this._values[_]=new cu(this._values[_].property)),this._values[_].value=new ui(this._values[_].property,F===null?void 0:L(F))},Eo.prototype.getTransition=function(_){return L(this._values[_].transition)},Eo.prototype.setTransition=function(_,F){this._values.hasOwnProperty(_)||(this._values[_]=new cu(this._values[_].property)),this._values[_].transition=L(F)||void 0},Eo.prototype.serialize=function(){for(var _={},F=0,X=Object.keys(this._values);F<X.length;F+=1){var le=X[F],ye=this.getValue(le);ye!==void 0&&(_[le]=ye);var we=this.getTransition(le);we!==void 0&&(_[le+"-transition"]=we)}return _},Eo.prototype.transitioned=function(_,F){for(var X=new fu(this._properties),le=0,ye=Object.keys(this._values);le<ye.length;le+=1){var we=ye[le];X._values[we]=this._values[we].transitioned(_,F._values[we])}return X},Eo.prototype.untransitioned=function(){for(var _=new fu(this._properties),F=0,X=Object.keys(this._values);F<X.length;F+=1){var le=X[F];_._values[le]=this._values[le].untransitioned()}return _};var Ls=function(_,F,X,le,ye){this.property=_,this.value=F,this.begin=ye+le.delay||0,this.end=this.begin+le.duration||0,_.specification.transition&&(le.delay||le.duration)&&(this.prior=X)};Ls.prototype.possiblyEvaluate=function(_,F,X){var le=_.now||0,ye=this.value.possiblyEvaluate(_,F,X),we=this.prior;if(we){if(le>this.end)return this.prior=null,ye;if(this.value.isDataDriven())return this.prior=null,ye;if(le<this.begin)return we.possiblyEvaluate(_,F,X);var Pe=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(we.possiblyEvaluate(_,F,X),ye,function(Xe){if(Xe<=0)return 0;if(Xe>=1)return 1;var ct=Xe*Xe,Tt=ct*Xe;return 4*(Xe<.5?Tt:3*(Xe-ct)+Tt-.75)}(Pe))}return ye};var fu=function(_){this._properties=_,this._values=Object.create(_.defaultTransitioningPropertyValues)};fu.prototype.possiblyEvaluate=function(_,F,X){for(var le=new Cl(this._properties),ye=0,we=Object.keys(this._values);ye<we.length;ye+=1){var Pe=we[ye];le._values[Pe]=this._values[Pe].possiblyEvaluate(_,F,X)}return le},fu.prototype.hasTransition=function(){for(var _=0,F=Object.keys(this._values);_<F.length;_+=1)if(this._values[F[_]].prior)return!0;return!1};var ol=function(_){this._properties=_,this._values=Object.create(_.defaultPropertyValues)};ol.prototype.getValue=function(_){return L(this._values[_].value)},ol.prototype.setValue=function(_,F){this._values[_]=new ui(this._values[_].property,F===null?void 0:L(F))},ol.prototype.serialize=function(){for(var _={},F=0,X=Object.keys(this._values);F<X.length;F+=1){var le=X[F],ye=this.getValue(le);ye!==void 0&&(_[le]=ye)}return _},ol.prototype.possiblyEvaluate=function(_,F,X){for(var le=new Cl(this._properties),ye=0,we=Object.keys(this._values);ye<we.length;ye+=1){var Pe=we[ye];le._values[Pe]=this._values[Pe].possiblyEvaluate(_,F,X)}return le};var eo=function(_,F,X){this.property=_,this.value=F,this.parameters=X};eo.prototype.isConstant=function(){return this.value.kind==="constant"},eo.prototype.constantOr=function(_){return this.value.kind==="constant"?this.value.value:_},eo.prototype.evaluate=function(_,F,X,le){return this.property.evaluate(this.value,this.parameters,_,F,X,le)};var Cl=function(_){this._properties=_,this._values=Object.create(_.defaultPossiblyEvaluatedValues)};Cl.prototype.get=function(_){return this._values[_]};var ma=function(_){this.specification=_};ma.prototype.possiblyEvaluate=function(_,F){return _.expression.evaluate(F)},ma.prototype.interpolate=function(_,F,X){var le=Kr[this.specification.type];return le?le(_,F,X):_};var ka=function(_,F){this.specification=_,this.overrides=F};ka.prototype.possiblyEvaluate=function(_,F,X,le){return new eo(this,_.expression.kind==="constant"||_.expression.kind==="camera"?{kind:"constant",value:_.expression.evaluate(F,null,{},X,le)}:_.expression,F)},ka.prototype.interpolate=function(_,F,X){if(_.value.kind!=="constant"||F.value.kind!=="constant")return _;if(_.value.value===void 0||F.value.value===void 0)return new eo(this,{kind:"constant",value:void 0},_.parameters);var le=Kr[this.specification.type];return le?new eo(this,{kind:"constant",value:le(_.value.value,F.value.value,X)},_.parameters):_},ka.prototype.evaluate=function(_,F,X,le,ye,we){return _.kind==="constant"?_.value:_.evaluate(F,X,le,ye,we)};var Bi=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.possiblyEvaluate=function(X,le,ye,we){if(X.value===void 0)return new eo(this,{kind:"constant",value:void 0},le);if(X.expression.kind==="constant"){var Pe=X.expression.evaluate(le,null,{},ye,we),Xe=X.property.specification.type==="resolvedImage"&&typeof Pe!="string"?Pe.name:Pe,ct=this._calculate(Xe,Xe,Xe,le);return new eo(this,{kind:"constant",value:ct},le)}if(X.expression.kind==="camera"){var Tt=this._calculate(X.expression.evaluate({zoom:le.zoom-1}),X.expression.evaluate({zoom:le.zoom}),X.expression.evaluate({zoom:le.zoom+1}),le);return new eo(this,{kind:"constant",value:Tt},le)}return new eo(this,X.expression,le)},F.prototype.evaluate=function(X,le,ye,we,Pe,Xe){if(X.kind==="source"){var ct=X.evaluate(le,ye,we,Pe,Xe);return this._calculate(ct,ct,ct,le)}return X.kind==="composite"?this._calculate(X.evaluate({zoom:Math.floor(le.zoom)-1},ye,we),X.evaluate({zoom:Math.floor(le.zoom)},ye,we),X.evaluate({zoom:Math.floor(le.zoom)+1},ye,we),le):X.value},F.prototype._calculate=function(X,le,ye,we){return we.zoom>we.zoomHistory.lastIntegerZoom?{from:X,to:le}:{from:ye,to:le}},F.prototype.interpolate=function(X){return X},F}(ka),Hl=function(_){this.specification=_};Hl.prototype.possiblyEvaluate=function(_,F,X,le){if(_.value!==void 0){if(_.expression.kind==="constant"){var ye=_.expression.evaluate(F,null,{},X,le);return this._calculate(ye,ye,ye,F)}return this._calculate(_.expression.evaluate(new Za(Math.floor(F.zoom-1),F)),_.expression.evaluate(new Za(Math.floor(F.zoom),F)),_.expression.evaluate(new Za(Math.floor(F.zoom+1),F)),F)}},Hl.prototype._calculate=function(_,F,X,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:_,to:F}:{from:X,to:F}},Hl.prototype.interpolate=function(_){return _};var wo=function(_){this.specification=_};wo.prototype.possiblyEvaluate=function(_,F,X,le){return!!_.expression.evaluate(F,null,{},X,le)},wo.prototype.interpolate=function(){return!1};var $i=function(_){for(var F in this.properties=_,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],_){var X=_[F];X.specification.overridable&&this.overridableProperties.push(F);var le=this.defaultPropertyValues[F]=new ui(X,void 0),ye=this.defaultTransitionablePropertyValues[F]=new cu(X);this.defaultTransitioningPropertyValues[F]=ye.untransitioned(),this.defaultPossiblyEvaluatedValues[F]=le.possiblyEvaluate({})}};ga("DataDrivenProperty",ka),ga("DataConstantProperty",ma),ga("CrossFadedDataDrivenProperty",Bi),ga("CrossFadedProperty",Hl),ga("ColorRampProperty",wo);var Go=function(_){function F(X,le){if(_.call(this),this.id=X.id,this.type=X.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},X.type!=="custom"&&(this.metadata=(X=X).metadata,this.minzoom=X.minzoom,this.maxzoom=X.maxzoom,X.type!=="background"&&(this.source=X.source,this.sourceLayer=X["source-layer"],this.filter=X.filter),le.layout&&(this._unevaluatedLayout=new ol(le.layout)),le.paint)){for(var ye in this._transitionablePaint=new Eo(le.paint),X.paint)this.setPaintProperty(ye,X.paint[ye],{validate:!1});for(var we in X.layout)this.setLayoutProperty(we,X.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cl(le.paint)}}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},F.prototype.getLayoutProperty=function(X){return X==="visibility"?this.visibility:this._unevaluatedLayout.getValue(X)},F.prototype.setLayoutProperty=function(X,le,ye){ye===void 0&&(ye={}),le!=null&&this._validate(Yf,"layers."+this.id+".layout."+X,X,le,ye)||(X!=="visibility"?this._unevaluatedLayout.setValue(X,le):this.visibility=le)},F.prototype.getPaintProperty=function(X){return T(X,"-transition")?this._transitionablePaint.getTransition(X.slice(0,-11)):this._transitionablePaint.getValue(X)},F.prototype.setPaintProperty=function(X,le,ye){if(ye===void 0&&(ye={}),le!=null&&this._validate(rc,"layers."+this.id+".paint."+X,X,le,ye))return!1;if(T(X,"-transition"))return this._transitionablePaint.setTransition(X.slice(0,-11),le||void 0),!1;var we=this._transitionablePaint._values[X],Pe=we.property.specification["property-type"]==="cross-faded-data-driven",Xe=we.value.isDataDriven(),ct=we.value;this._transitionablePaint.setValue(X,le),this._handleSpecialPaintPropertyUpdate(X);var Tt=this._transitionablePaint._values[X].value;return Tt.isDataDriven()||Xe||Pe||this._handleOverridablePaintPropertyUpdate(X,ct,Tt)},F.prototype._handleSpecialPaintPropertyUpdate=function(X){},F.prototype._handleOverridablePaintPropertyUpdate=function(X,le,ye){return!1},F.prototype.isHidden=function(X){return!!(this.minzoom&&X<this.minzoom)||!!(this.maxzoom&&X>=this.maxzoom)||this.visibility==="none"},F.prototype.updateTransitions=function(X){this._transitioningPaint=this._transitionablePaint.transitioned(X,this._transitioningPaint)},F.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},F.prototype.recalculate=function(X,le){X.getCrossfadeParameters&&(this._crossfadeParameters=X.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(X,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(X,void 0,le)},F.prototype.serialize=function(){var X={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(X.layout=X.layout||{},X.layout.visibility=this.visibility),P(X,function(le,ye){return!(le===void 0||ye==="layout"&&!Object.keys(le).length||ye==="paint"&&!Object.keys(le).length)})},F.prototype._validate=function(X,le,ye,we,Pe){return Pe===void 0&&(Pe={}),(!Pe||Pe.validate!==!1)&&Li(this,X.call(Ml,{key:le,layerType:this.type,objectKey:ye,value:we,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))},F.prototype.is3D=function(){return!1},F.prototype.isTileClipped=function(){return!1},F.prototype.hasOffscreenPass=function(){return!1},F.prototype.resize=function(){},F.prototype.isStateDependent=function(){for(var X in this.paint._values){var le=this.paint.get(X);if(le instanceof eo&&Hs(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},F}(Qe),cp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Rc=function(_,F){this._structArray=_,this._pos1=F*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ti=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Oi(_,F){F===void 0&&(F=1);var X=0,le=0;return{members:_.map(function(ye){var we=cp[ye.type].BYTES_PER_ELEMENT,Pe=X=Ru(X,Math.max(F,we)),Xe=ye.components||1;return le=Math.max(le,we),X+=we*Xe,{name:ye.name,type:ye.type,components:Xe,offset:Pe}}),size:Ru(X,Math.max(le,F)),alignment:F}}function Ru(_,F){return Math.ceil(_/F)*F}Ti.serialize=function(_,F){return _._trim(),F&&(_.isTransferred=!0,F.push(_.arrayBuffer)),{length:_.length,arrayBuffer:_.arrayBuffer}},Ti.deserialize=function(_){var F=Object.create(this.prototype);return F.arrayBuffer=_.arrayBuffer,F.length=_.length,F.capacity=_.arrayBuffer.byteLength/F.bytesPerElement,F._refreshViews(),F},Ti.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ti.prototype.clear=function(){this.length=0},Ti.prototype.resize=function(_){this.reserve(_),this.length=_},Ti.prototype.reserve=function(_){if(_>this.capacity){this.capacity=Math.max(_,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var F=this.uint8;this._refreshViews(),F&&this.uint8.set(F)}},Ti.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ic=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,le)},F.prototype.emplace=function(X,le,ye){var we=2*X;return this.int16[we+0]=le,this.int16[we+1]=ye,X},F}(Ti);ic.prototype.bytesPerElement=4,ga("StructArrayLayout2i4",ic);var er=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,le,ye,we)},F.prototype.emplace=function(X,le,ye,we,Pe){var Xe=4*X;return this.int16[Xe+0]=le,this.int16[Xe+1]=ye,this.int16[Xe+2]=we,this.int16[Xe+3]=Pe,X},F}(Ti);er.prototype.bytesPerElement=8,ga("StructArrayLayout4i8",er);var Ps=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,le,ye,we,Pe,Xe)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct){var Tt=6*X;return this.int16[Tt+0]=le,this.int16[Tt+1]=ye,this.int16[Tt+2]=we,this.int16[Tt+3]=Pe,this.int16[Tt+4]=Xe,this.int16[Tt+5]=ct,X},F}(Ti);Ps.prototype.bytesPerElement=12,ga("StructArrayLayout2i4i12",Ps);var rs=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,le,ye,we,Pe,Xe)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct){var Tt=4*X,Lt=8*X;return this.int16[Tt+0]=le,this.int16[Tt+1]=ye,this.uint8[Lt+4]=we,this.uint8[Lt+5]=Pe,this.uint8[Lt+6]=Xe,this.uint8[Lt+7]=ct,X},F}(Ti);rs.prototype.bytesPerElement=8,ga("StructArrayLayout2i4ub8",rs);var Si=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It){var Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt){var Jt=9*X,pr=18*X;return this.uint16[Jt+0]=le,this.uint16[Jt+1]=ye,this.uint16[Jt+2]=we,this.uint16[Jt+3]=Pe,this.uint16[Jt+4]=Xe,this.uint16[Jt+5]=ct,this.uint16[Jt+6]=Tt,this.uint16[Jt+7]=Lt,this.uint8[pr+16]=It,this.uint8[pr+17]=Gt,X},F}(Ti);Si.prototype.bytesPerElement=18,ga("StructArrayLayout8ui2ub18",Si);var li=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt){var pr=this.length;return this.resize(pr+1),this.emplace(pr,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr){var dr=12*X;return this.int16[dr+0]=le,this.int16[dr+1]=ye,this.int16[dr+2]=we,this.int16[dr+3]=Pe,this.uint16[dr+4]=Xe,this.uint16[dr+5]=ct,this.uint16[dr+6]=Tt,this.uint16[dr+7]=Lt,this.int16[dr+8]=It,this.int16[dr+9]=Gt,this.int16[dr+10]=Jt,this.int16[dr+11]=pr,X},F}(Ti);li.prototype.bytesPerElement=24,ga("StructArrayLayout4i4ui4i24",li);var hu=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye){var we=this.length;return this.resize(we+1),this.emplace(we,X,le,ye)},F.prototype.emplace=function(X,le,ye,we){var Pe=3*X;return this.float32[Pe+0]=le,this.float32[Pe+1]=ye,this.float32[Pe+2]=we,X},F}(Ti);hu.prototype.bytesPerElement=12,ga("StructArrayLayout3f12",hu);var pf=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X){var le=this.length;return this.resize(le+1),this.emplace(le,X)},F.prototype.emplace=function(X,le){return this.uint32[1*X+0]=le,X},F}(Ti);pf.prototype.bytesPerElement=4,ga("StructArrayLayout1ul4",pf);var Dc=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt){var It=this.length;return this.resize(It+1),this.emplace(It,X,le,ye,we,Pe,Xe,ct,Tt,Lt)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It){var Gt=10*X,Jt=5*X;return this.int16[Gt+0]=le,this.int16[Gt+1]=ye,this.int16[Gt+2]=we,this.int16[Gt+3]=Pe,this.int16[Gt+4]=Xe,this.int16[Gt+5]=ct,this.uint32[Jt+3]=Tt,this.uint16[Gt+8]=Lt,this.uint16[Gt+9]=It,X},F}(Ti);Dc.prototype.bytesPerElement=20,ga("StructArrayLayout6i1ul2ui20",Dc);var Ks=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,le,ye,we,Pe,Xe)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct){var Tt=6*X;return this.int16[Tt+0]=le,this.int16[Tt+1]=ye,this.int16[Tt+2]=we,this.int16[Tt+3]=Pe,this.int16[Tt+4]=Xe,this.int16[Tt+5]=ct,X},F}(Ti);Ks.prototype.bytesPerElement=12,ga("StructArrayLayout2i2i2i12",Ks);var vf=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe){var Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,X,le,ye,we,Pe)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe){var ct=4*X,Tt=8*X;return this.float32[ct+0]=le,this.float32[ct+1]=ye,this.float32[ct+2]=we,this.int16[Tt+6]=Pe,this.int16[Tt+7]=Xe,X},F}(Ti);vf.prototype.bytesPerElement=16,ga("StructArrayLayout2f1f2i16",vf);var df=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,le,ye,we)},F.prototype.emplace=function(X,le,ye,we,Pe){var Xe=12*X,ct=3*X;return this.uint8[Xe+0]=le,this.uint8[Xe+1]=ye,this.float32[ct+1]=we,this.float32[ct+2]=Pe,X},F}(Ti);df.prototype.bytesPerElement=12,ga("StructArrayLayout2ub2f12",df);var sl=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye){var we=this.length;return this.resize(we+1),this.emplace(we,X,le,ye)},F.prototype.emplace=function(X,le,ye,we){var Pe=3*X;return this.uint16[Pe+0]=le,this.uint16[Pe+1]=ye,this.uint16[Pe+2]=we,X},F}(Ti);sl.prototype.bytesPerElement=6,ga("StructArrayLayout3ui6",sl);var Zf=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr,zr,Ar,Xr){var rn=this.length;return this.resize(rn+1),this.emplace(rn,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr,zr,Ar,Xr)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr,zr,Ar,Xr,rn){var mn=24*X,gn=12*X,Ln=48*X;return this.int16[mn+0]=le,this.int16[mn+1]=ye,this.uint16[mn+2]=we,this.uint16[mn+3]=Pe,this.uint32[gn+2]=Xe,this.uint32[gn+3]=ct,this.uint32[gn+4]=Tt,this.uint16[mn+10]=Lt,this.uint16[mn+11]=It,this.uint16[mn+12]=Gt,this.float32[gn+7]=Jt,this.float32[gn+8]=pr,this.uint8[Ln+36]=dr,this.uint8[Ln+37]=zr,this.uint8[Ln+38]=Ar,this.uint32[gn+10]=Xr,this.int16[mn+22]=rn,X},F}(Ti);Zf.prototype.bytesPerElement=48,ga("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Zf);var Ah=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr,zr,Ar,Xr,rn,mn,gn,Ln,$n,oa,_a,fa,Aa,ca,Xa){var Oa=this.length;return this.resize(Oa+1),this.emplace(Oa,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr,zr,Ar,Xr,rn,mn,gn,Ln,$n,oa,_a,fa,Aa,ca,Xa)},F.prototype.emplace=function(X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr,zr,Ar,Xr,rn,mn,gn,Ln,$n,oa,_a,fa,Aa,ca,Xa,Oa){var da=34*X,ii=17*X;return this.int16[da+0]=le,this.int16[da+1]=ye,this.int16[da+2]=we,this.int16[da+3]=Pe,this.int16[da+4]=Xe,this.int16[da+5]=ct,this.int16[da+6]=Tt,this.int16[da+7]=Lt,this.uint16[da+8]=It,this.uint16[da+9]=Gt,this.uint16[da+10]=Jt,this.uint16[da+11]=pr,this.uint16[da+12]=dr,this.uint16[da+13]=zr,this.uint16[da+14]=Ar,this.uint16[da+15]=Xr,this.uint16[da+16]=rn,this.uint16[da+17]=mn,this.uint16[da+18]=gn,this.uint16[da+19]=Ln,this.uint16[da+20]=$n,this.uint16[da+21]=oa,this.uint16[da+22]=_a,this.uint32[ii+12]=fa,this.float32[ii+13]=Aa,this.float32[ii+14]=ca,this.float32[ii+15]=Xa,this.float32[ii+16]=Oa,X},F}(Ti);Ah.prototype.bytesPerElement=68,ga("StructArrayLayout8i15ui1ul4f68",Ah);var jo=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X){var le=this.length;return this.resize(le+1),this.emplace(le,X)},F.prototype.emplace=function(X,le){return this.float32[1*X+0]=le,X},F}(Ti);jo.prototype.bytesPerElement=4,ga("StructArrayLayout1f4",jo);var Kf=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye){var we=this.length;return this.resize(we+1),this.emplace(we,X,le,ye)},F.prototype.emplace=function(X,le,ye,we){var Pe=3*X;return this.int16[Pe+0]=le,this.int16[Pe+1]=ye,this.int16[Pe+2]=we,X},F}(Ti);Kf.prototype.bytesPerElement=6,ga("StructArrayLayout3i6",Kf);var Du=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye){var we=this.length;return this.resize(we+1),this.emplace(we,X,le,ye)},F.prototype.emplace=function(X,le,ye,we){var Pe=4*X;return this.uint32[2*X+0]=le,this.uint16[Pe+2]=ye,this.uint16[Pe+3]=we,X},F}(Ti);Du.prototype.bytesPerElement=8,ga("StructArrayLayout1ul2ui8",Du);var Rs=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,le)},F.prototype.emplace=function(X,le,ye){var we=2*X;return this.uint16[we+0]=le,this.uint16[we+1]=ye,X},F}(Ti);Rs.prototype.bytesPerElement=4,ga("StructArrayLayout2ui4",Rs);var Iu=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X){var le=this.length;return this.resize(le+1),this.emplace(le,X)},F.prototype.emplace=function(X,le){return this.uint16[1*X+0]=le,X},F}(Ti);Iu.prototype.bytesPerElement=2,ga("StructArrayLayout1ui2",Iu);var pu=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le){var ye=this.length;return this.resize(ye+1),this.emplace(ye,X,le)},F.prototype.emplace=function(X,le,ye){var we=2*X;return this.float32[we+0]=le,this.float32[we+1]=ye,X},F}(Ti);pu.prototype.bytesPerElement=8,ga("StructArrayLayout2f8",pu);var ll=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function(X,le,ye,we){var Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,X,le,ye,we)},F.prototype.emplace=function(X,le,ye,we,Pe){var Xe=4*X;return this.float32[Xe+0]=le,this.float32[Xe+1]=ye,this.float32[Xe+2]=we,this.float32[Xe+3]=Pe,X},F}(Ti);ll.prototype.bytesPerElement=16,ga("StructArrayLayout4f16",ll);var K=function(_){function F(){_.apply(this,arguments)}_&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F;var X={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return X.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},X.x1.get=function(){return this._structArray.int16[this._pos2+2]},X.y1.get=function(){return this._structArray.int16[this._pos2+3]},X.x2.get=function(){return this._structArray.int16[this._pos2+4]},X.y2.get=function(){return this._structArray.int16[this._pos2+5]},X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.anchorPoint.get=function(){return new l(this.anchorPointX,this.anchorPointY)},Object.defineProperties(F.prototype,X),F}(Rc);K.prototype.size=20;var ee=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.get=function(X){return new K(this,X)},F}(Dc);ga("CollisionBoxArray",ee);var Q=function(_){function F(){_.apply(this,arguments)}_&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},X.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},X.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},X.segment.get=function(){return this._structArray.uint16[this._pos2+10]},X.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},X.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},X.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},X.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},X.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},X.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},X.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},X.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},X.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},X.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},X.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(F.prototype,X),F}(Rc);Q.prototype.size=48;var he=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.get=function(X){return new Q(this,X)},F}(Zf);ga("PlacedSymbolArray",he);var Se=function(_){function F(){_.apply(this,arguments)}_&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},X.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},X.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},X.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},X.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},X.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},X.key.get=function(){return this._structArray.uint16[this._pos2+8]},X.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},X.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},X.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},X.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},X.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},X.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},X.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},X.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},X.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},X.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},X.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},X.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},X.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},X.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},X.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},X.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},X.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},X.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(F.prototype,X),F}(Rc);Se.prototype.size=68;var Fe=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.get=function(X){return new Se(this,X)},F}(Ah);ga("SymbolInstanceArray",Fe);var We=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.getoffsetX=function(X){return this.float32[1*X+0]},F}(jo);ga("GlyphOffsetArray",We);var it=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.getx=function(X){return this.int16[3*X+0]},F.prototype.gety=function(X){return this.int16[3*X+1]},F.prototype.gettileUnitDistanceFromAnchor=function(X){return this.int16[3*X+2]},F}(Kf);ga("SymbolLineVertexArray",it);var dt=function(_){function F(){_.apply(this,arguments)}_&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F;var X={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(F.prototype,X),F}(Rc);dt.prototype.size=8;var Ft=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.get=function(X){return new dt(this,X)},F}(Du);ga("FeatureIndexArray",Ft);var Qt=Oi([{name:"a_pos",components:2,type:"Int16"}],4).members,nr=function(_){_===void 0&&(_=[]),this.segments=_};function ur(_,F){return 256*(_=p(Math.floor(_),0,255))+p(Math.floor(F),0,255)}nr.prototype.prepareSegment=function(_,F,X,le){var ye=this.segments[this.segments.length-1];return _>nr.MAX_VERTEX_ARRAY_LENGTH&&C("Max vertices per segment is "+nr.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+_),(!ye||ye.vertexLength+_>nr.MAX_VERTEX_ARRAY_LENGTH||ye.sortKey!==le)&&(ye={vertexOffset:F.length,primitiveOffset:X.length,vertexLength:0,primitiveLength:0},le!==void 0&&(ye.sortKey=le),this.segments.push(ye)),ye},nr.prototype.get=function(){return this.segments},nr.prototype.destroy=function(){for(var _=0,F=this.segments;_<F.length;_+=1){var X=F[_];for(var le in X.vaos)X.vaos[le].destroy()}},nr.simpleSegment=function(_,F,X,le){return new nr([{vertexOffset:_,primitiveOffset:F,vertexLength:X,primitiveLength:le,vaos:{},sortKey:0}])},nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ga("SegmentVector",nr);var yr=Oi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),br=f(function(_){_.exports=function(F,X){var le,ye,we,Pe,Xe,ct,Tt,Lt;for(ye=F.length-(le=3&F.length),we=X,Xe=3432918353,ct=461845907,Lt=0;Lt<ye;)Tt=255&F.charCodeAt(Lt)|(255&F.charCodeAt(++Lt))<<8|(255&F.charCodeAt(++Lt))<<16|(255&F.charCodeAt(++Lt))<<24,++Lt,we=27492+(65535&(Pe=5*(65535&(we=(we^=Tt=(65535&(Tt=(Tt=(65535&Tt)*Xe+(((Tt>>>16)*Xe&65535)<<16)&4294967295)<<15|Tt>>>17))*ct+(((Tt>>>16)*ct&65535)<<16)&4294967295)<<13|we>>>19))+((5*(we>>>16)&65535)<<16)&4294967295))+((58964+(Pe>>>16)&65535)<<16);switch(Tt=0,le){case 3:Tt^=(255&F.charCodeAt(Lt+2))<<16;case 2:Tt^=(255&F.charCodeAt(Lt+1))<<8;case 1:we^=Tt=(65535&(Tt=(Tt=(65535&(Tt^=255&F.charCodeAt(Lt)))*Xe+(((Tt>>>16)*Xe&65535)<<16)&4294967295)<<15|Tt>>>17))*ct+(((Tt>>>16)*ct&65535)<<16)&4294967295}return we^=F.length,we=2246822507*(65535&(we^=we>>>16))+((2246822507*(we>>>16)&65535)<<16)&4294967295,we=3266489909*(65535&(we^=we>>>13))+((3266489909*(we>>>16)&65535)<<16)&4294967295,(we^=we>>>16)>>>0}}),Pr=f(function(_){_.exports=function(F,X){for(var le,ye=F.length,we=X^ye,Pe=0;ye>=4;)le=1540483477*(65535&(le=255&F.charCodeAt(Pe)|(255&F.charCodeAt(++Pe))<<8|(255&F.charCodeAt(++Pe))<<16|(255&F.charCodeAt(++Pe))<<24))+((1540483477*(le>>>16)&65535)<<16),we=1540483477*(65535&we)+((1540483477*(we>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),ye-=4,++Pe;switch(ye){case 3:we^=(255&F.charCodeAt(Pe+2))<<16;case 2:we^=(255&F.charCodeAt(Pe+1))<<8;case 1:we=1540483477*(65535&(we^=255&F.charCodeAt(Pe)))+((1540483477*(we>>>16)&65535)<<16)}return we=1540483477*(65535&(we^=we>>>13))+((1540483477*(we>>>16)&65535)<<16),(we^=we>>>15)>>>0}}),gr=br,Cr=Pr;gr.murmur3=br,gr.murmur2=Cr;var Nr=function(){this.ids=[],this.positions=[],this.indexed=!1};Nr.prototype.add=function(_,F,X,le){this.ids.push(bn(_)),this.positions.push(F,X,le)},Nr.prototype.getPositions=function(_){for(var F=bn(_),X=0,le=this.ids.length-1;X<le;){var ye=X+le>>1;this.ids[ye]>=F?le=ye:X=ye+1}for(var we=[];this.ids[X]===F;)we.push({index:this.positions[3*X],start:this.positions[3*X+1],end:this.positions[3*X+2]}),X++;return we},Nr.serialize=function(_,F){var X=new Float64Array(_.ids),le=new Uint32Array(_.positions);return function ye(we,Pe,Xe,ct){for(;Xe<ct;){for(var Tt=we[Xe+ct>>1],Lt=Xe-1,It=ct+1;;){do Lt++;while(we[Lt]<Tt);do It--;while(we[It]>Tt);if(Lt>=It)break;un(we,Lt,It),un(Pe,3*Lt,3*It),un(Pe,3*Lt+1,3*It+1),un(Pe,3*Lt+2,3*It+2)}It-Xe<ct-It?(ye(we,Pe,Xe,It),Xe=It+1):(ye(we,Pe,It+1,ct),ct=It)}}(X,le,0,X.length-1),F&&F.push(X.buffer,le.buffer),{ids:X,positions:le}},Nr.deserialize=function(_){var F=new Nr;return F.ids=_.ids,F.positions=_.positions,F.indexed=!0,F};var Qr=Math.pow(2,53)-1;function bn(_){var F=+_;return!isNaN(F)&&F<=Qr?F:gr(String(_))}function un(_,F,X){var le=_[F];_[F]=_[X],_[X]=le}ga("FeaturePositionMap",Nr);var xn=function(_,F){this.gl=_.gl,this.location=F},zn=function(_){function F(X,le){_.call(this,X,le),this.current=0}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1i(this.location,X))},F}(xn),Jn=function(_){function F(X,le){_.call(this,X,le),this.current=0}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1f(this.location,X))},F}(xn),Hn=function(_){function F(X,le){_.call(this,X,le),this.current=[0,0]}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]||(this.current=X,this.gl.uniform2f(this.location,X[0],X[1]))},F}(xn),qn=function(_){function F(X,le){_.call(this,X,le),this.current=[0,0,0]}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]||(this.current=X,this.gl.uniform3f(this.location,X[0],X[1],X[2]))},F}(xn),ua=function(_){function F(X,le){_.call(this,X,le),this.current=[0,0,0,0]}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]&&X[3]===this.current[3]||(this.current=X,this.gl.uniform4f(this.location,X[0],X[1],X[2],X[3]))},F}(xn),za=function(_){function F(X,le){_.call(this,X,le),this.current=cr.transparent}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){X.r===this.current.r&&X.g===this.current.g&&X.b===this.current.b&&X.a===this.current.a||(this.current=X,this.gl.uniform4f(this.location,X.r,X.g,X.b,X.a))},F}(xn),Ca=new Float32Array(16),qa=function(_){function F(X,le){_.call(this,X,le),this.current=Ca}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.set=function(X){if(X[12]!==this.current[12]||X[0]!==this.current[0])return this.current=X,void this.gl.uniformMatrix4fv(this.location,!1,X);for(var le=1;le<16;le++)if(X[le]!==this.current[le]){this.current=X,this.gl.uniformMatrix4fv(this.location,!1,X);break}},F}(xn);function ha(_){return[ur(255*_.r,255*_.g),ur(255*_.b,255*_.a)]}var Ba=function(_,F,X){this.value=_,this.uniformNames=F.map(function(le){return"u_"+le}),this.type=X};Ba.prototype.setUniform=function(_,F,X){_.set(X.constantOr(this.value))},Ba.prototype.getBinding=function(_,F,X){return this.type==="color"?new za(_,F):new Jn(_,F)};var $a=function(_,F){this.uniformNames=F.map(function(X){return"u_"+X}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};$a.prototype.setConstantPatternPositions=function(_,F){this.pixelRatioFrom=F.pixelRatio,this.pixelRatioTo=_.pixelRatio,this.patternFrom=F.tlbr,this.patternTo=_.tlbr},$a.prototype.setUniform=function(_,F,X,le){var ye=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ye&&_.set(ye)},$a.prototype.getBinding=function(_,F,X){return X.substr(0,9)==="u_pattern"?new ua(_,F):new Jn(_,F)};var Ua=function(_,F,X,le){this.expression=_,this.type=X,this.maxValue=0,this.paintVertexAttributes=F.map(function(ye){return{name:"a_"+ye,type:"Float32",components:X==="color"?2:1,offset:0}}),this.paintVertexArray=new le};Ua.prototype.populatePaintArray=function(_,F,X,le,ye){var we=this.paintVertexArray.length,Pe=this.expression.evaluate(new Za(0),F,{},le,[],ye);this.paintVertexArray.resize(_),this._setPaintValue(we,_,Pe)},Ua.prototype.updatePaintArray=function(_,F,X,le){var ye=this.expression.evaluate({zoom:0},X,le);this._setPaintValue(_,F,ye)},Ua.prototype._setPaintValue=function(_,F,X){if(this.type==="color")for(var le=ha(X),ye=_;ye<F;ye++)this.paintVertexArray.emplace(ye,le[0],le[1]);else{for(var we=_;we<F;we++)this.paintVertexArray.emplace(we,X);this.maxValue=Math.max(this.maxValue,Math.abs(X))}},Ua.prototype.upload=function(_){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ua.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Da=function(_,F,X,le,ye,we){this.expression=_,this.uniformNames=F.map(function(Pe){return"u_"+Pe+"_t"}),this.type=X,this.useIntegerZoom=le,this.zoom=ye,this.maxValue=0,this.paintVertexAttributes=F.map(function(Pe){return{name:"a_"+Pe,type:"Float32",components:X==="color"?4:2,offset:0}}),this.paintVertexArray=new we};Da.prototype.populatePaintArray=function(_,F,X,le,ye){var we=this.expression.evaluate(new Za(this.zoom),F,{},le,[],ye),Pe=this.expression.evaluate(new Za(this.zoom+1),F,{},le,[],ye),Xe=this.paintVertexArray.length;this.paintVertexArray.resize(_),this._setPaintValue(Xe,_,we,Pe)},Da.prototype.updatePaintArray=function(_,F,X,le){var ye=this.expression.evaluate({zoom:this.zoom},X,le),we=this.expression.evaluate({zoom:this.zoom+1},X,le);this._setPaintValue(_,F,ye,we)},Da.prototype._setPaintValue=function(_,F,X,le){if(this.type==="color")for(var ye=ha(X),we=ha(le),Pe=_;Pe<F;Pe++)this.paintVertexArray.emplace(Pe,ye[0],ye[1],we[0],we[1]);else{for(var Xe=_;Xe<F;Xe++)this.paintVertexArray.emplace(Xe,X,le);this.maxValue=Math.max(this.maxValue,Math.abs(X),Math.abs(le))}},Da.prototype.upload=function(_){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=_.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Da.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Da.prototype.setUniform=function(_,F){var X=this.useIntegerZoom?Math.floor(F.zoom):F.zoom,le=p(this.expression.interpolationFactor(X,this.zoom,this.zoom+1),0,1);_.set(le)},Da.prototype.getBinding=function(_,F,X){return new Jn(_,F)};var Qa=function(_,F,X,le,ye,we){this.expression=_,this.type=F,this.useIntegerZoom=X,this.zoom=le,this.layerId=we,this.zoomInPaintVertexArray=new ye,this.zoomOutPaintVertexArray=new ye};Qa.prototype.populatePaintArray=function(_,F,X){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(_),this.zoomOutPaintVertexArray.resize(_),this._setPaintValues(le,_,F.patterns&&F.patterns[this.layerId],X)},Qa.prototype.updatePaintArray=function(_,F,X,le,ye){this._setPaintValues(_,F,X.patterns&&X.patterns[this.layerId],ye)},Qa.prototype._setPaintValues=function(_,F,X,le){if(le&&X){var ye=le[X.min],we=le[X.mid],Pe=le[X.max];if(ye&&we&&Pe)for(var Xe=_;Xe<F;Xe++)this.zoomInPaintVertexArray.emplace(Xe,we.tl[0],we.tl[1],we.br[0],we.br[1],ye.tl[0],ye.tl[1],ye.br[0],ye.br[1],we.pixelRatio,ye.pixelRatio),this.zoomOutPaintVertexArray.emplace(Xe,we.tl[0],we.tl[1],we.br[0],we.br[1],Pe.tl[0],Pe.tl[1],Pe.br[0],Pe.br[1],we.pixelRatio,Pe.pixelRatio)}},Qa.prototype.upload=function(_){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=_.createVertexBuffer(this.zoomInPaintVertexArray,yr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=_.createVertexBuffer(this.zoomOutPaintVertexArray,yr.members,this.expression.isStateDependent))},Qa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ia=function(_,F,X,le){this.binders={},this.layoutAttributes=le,this._buffers=[];var ye=[];for(var we in _.paint._values)if(X(we)){var Pe=_.paint.get(we);if(Pe instanceof eo&&Hs(Pe.property.specification)){var Xe=po(we,_.type),ct=Pe.value,Tt=Pe.property.specification.type,Lt=Pe.property.useIntegerZoom,It=Pe.property.specification["property-type"],Gt=It==="cross-faded"||It==="cross-faded-data-driven";if(ct.kind==="constant")this.binders[we]=Gt?new $a(ct.value,Xe):new Ba(ct.value,Xe,Tt),ye.push("/u_"+we);else if(ct.kind==="source"||Gt){var Jt=Qi(we,Tt,"source");this.binders[we]=Gt?new Qa(ct,Tt,Lt,F,Jt,_.id):new Ua(ct,Xe,Tt,Jt),ye.push("/a_"+we)}else{var pr=Qi(we,Tt,"composite");this.binders[we]=new Da(ct,Xe,Tt,Lt,F,pr),ye.push("/z_"+we)}}}this.cacheKey=ye.sort().join("")};Ia.prototype.getMaxValue=function(_){var F=this.binders[_];return F instanceof Ua||F instanceof Da?F.maxValue:0},Ia.prototype.populatePaintArrays=function(_,F,X,le,ye){for(var we in this.binders){var Pe=this.binders[we];(Pe instanceof Ua||Pe instanceof Da||Pe instanceof Qa)&&Pe.populatePaintArray(_,F,X,le,ye)}},Ia.prototype.setConstantPatternPositions=function(_,F){for(var X in this.binders){var le=this.binders[X];le instanceof $a&&le.setConstantPatternPositions(_,F)}},Ia.prototype.updatePaintArrays=function(_,F,X,le,ye){var we=!1;for(var Pe in _)for(var Xe=0,ct=F.getPositions(Pe);Xe<ct.length;Xe+=1){var Tt=ct[Xe],Lt=X.feature(Tt.index);for(var It in this.binders){var Gt=this.binders[It];if((Gt instanceof Ua||Gt instanceof Da||Gt instanceof Qa)&&Gt.expression.isStateDependent===!0){var Jt=le.paint.get(It);Gt.expression=Jt.value,Gt.updatePaintArray(Tt.start,Tt.end,Lt,_[Pe],ye),we=!0}}}return we},Ia.prototype.defines=function(){var _=[];for(var F in this.binders){var X=this.binders[F];(X instanceof Ba||X instanceof $a)&&_.push.apply(_,X.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return _},Ia.prototype.getPaintVertexBuffers=function(){return this._buffers},Ia.prototype.getUniforms=function(_,F){var X=[];for(var le in this.binders){var ye=this.binders[le];if(ye instanceof Ba||ye instanceof $a||ye instanceof Da)for(var we=0,Pe=ye.uniformNames;we<Pe.length;we+=1){var Xe=Pe[we];if(F[Xe]){var ct=ye.getBinding(_,F[Xe],Xe);X.push({name:Xe,property:le,binding:ct})}}}return X},Ia.prototype.setUniforms=function(_,F,X,le){for(var ye=0,we=F;ye<we.length;ye+=1){var Pe=we[ye],Xe=Pe.name,ct=Pe.property;this.binders[ct].setUniform(Pe.binding,le,X.get(ct),Xe)}},Ia.prototype.updatePaintBuffers=function(_){for(var F in this._buffers=[],this.binders){var X=this.binders[F];if(_&&X instanceof Qa){var le=_.fromScale===2?X.zoomInPaintVertexBuffer:X.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(X instanceof Ua||X instanceof Da)&&X.paintVertexBuffer&&this._buffers.push(X.paintVertexBuffer)}},Ia.prototype.upload=function(_){for(var F in this.binders){var X=this.binders[F];(X instanceof Ua||X instanceof Da||X instanceof Qa)&&X.upload(_)}this.updatePaintBuffers()},Ia.prototype.destroy=function(){for(var _ in this.binders){var F=this.binders[_];(F instanceof Ua||F instanceof Da||F instanceof Qa)&&F.destroy()}};var pa=function(_,F,X,le){le===void 0&&(le=function(){return!0}),this.programConfigurations={};for(var ye=0,we=F;ye<we.length;ye+=1){var Pe=we[ye];this.programConfigurations[Pe.id]=new Ia(Pe,X,le,_)}this.needsUpload=!1,this._featureMap=new Nr,this._bufferOffset=0};function po(_,F){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[_]||[_.replace(F+"-","").replace(/-/g,"_")]}function Qi(_,F,X){var le={color:{source:pu,composite:ll},number:{source:jo,composite:pu}},ye=function(we){return{"line-pattern":{source:Si,composite:Si},"fill-pattern":{source:Si,composite:Si},"fill-extrusion-pattern":{source:Si,composite:Si}}[we]}(_);return ye&&ye[X]||le[F][X]}pa.prototype.populatePaintArrays=function(_,F,X,le,ye,we){for(var Pe in this.programConfigurations)this.programConfigurations[Pe].populatePaintArrays(_,F,le,ye,we);F.id!==void 0&&this._featureMap.add(F.id,X,this._bufferOffset,_),this._bufferOffset=_,this.needsUpload=!0},pa.prototype.updatePaintArrays=function(_,F,X,le){for(var ye=0,we=X;ye<we.length;ye+=1){var Pe=we[ye];this.needsUpload=this.programConfigurations[Pe.id].updatePaintArrays(_,this._featureMap,F,Pe,le)||this.needsUpload}},pa.prototype.get=function(_){return this.programConfigurations[_]},pa.prototype.upload=function(_){if(this.needsUpload){for(var F in this.programConfigurations)this.programConfigurations[F].upload(_);this.needsUpload=!1}},pa.prototype.destroy=function(){for(var _ in this.programConfigurations)this.programConfigurations[_].destroy()},ga("ConstantBinder",Ba),ga("CrossFadedConstantBinder",$a),ga("SourceExpressionBinder",Ua),ga("CrossFadedCompositeBinder",Qa),ga("CompositeExpressionBinder",Da),ga("ProgramConfiguration",Ia,{omit:["_buffers"]}),ga("ProgramConfigurationSet",pa);var Pi={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function Ai(_){for(var F=8192/_.extent,X=_.loadGeometry(),le=0;le<X.length;le++)for(var ye=X[le],we=0;we<ye.length;we++){var Pe=ye[we];Pe.x=Math.round(Pe.x*F),Pe.y=Math.round(Pe.y*F),(Pe.x<Pi.min||Pe.x>Pi.max||Pe.y<Pi.min||Pe.y>Pi.max)&&(C("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Pe.x=p(Pe.x,Pi.min,Pi.max),Pe.y=p(Pe.y,Pi.min,Pi.max))}return X}function qi(_,F,X,le,ye){_.emplaceBack(2*F+(le+1)/2,2*X+(ye+1)/2)}var Mi=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=_.index,this.hasPattern=!1,this.layoutVertexArray=new ic,this.indexArray=new sl,this.segments=new nr,this.programConfigurations=new pa(Qt,_.layers,_.zoom),this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};function ul(_,F){for(var X=0;X<_.length;X++)if(Ll(F,_[X]))return!0;for(var le=0;le<F.length;le++)if(Ll(_,F[le]))return!0;return!!$s(_,F)}function vo(_,F,X){return!!Ll(_,F)||!!zu(F,_,X)}function Js(_,F){if(_.length===1)return xs(F,_[0]);for(var X=0;X<F.length;X++)for(var le=F[X],ye=0;ye<le.length;ye++)if(Ll(_,le[ye]))return!0;for(var we=0;we<_.length;we++)if(xs(F,_[we]))return!0;for(var Pe=0;Pe<F.length;Pe++)if($s(_,F[Pe]))return!0;return!1}function cs(_,F,X){if(_.length>1){if($s(_,F))return!0;for(var le=0;le<F.length;le++)if(zu(F[le],_,X))return!0}for(var ye=0;ye<_.length;ye++)if(zu(_[ye],F,X))return!0;return!1}function $s(_,F){if(_.length===0||F.length===0)return!1;for(var X=0;X<_.length-1;X++)for(var le=_[X],ye=_[X+1],we=0;we<F.length-1;we++)if(El(le,ye,F[we],F[we+1]))return!0;return!1}function El(_,F,X,le){return k(_,X,le)!==k(F,X,le)&&k(_,F,X)!==k(_,F,le)}function zu(_,F,X){var le=X*X;if(F.length===1)return _.distSqr(F[0])<le;for(var ye=1;ye<F.length;ye++)if(Fu(_,F[ye-1],F[ye])<le)return!0;return!1}function Fu(_,F,X){var le=F.distSqr(X);if(le===0)return _.distSqr(F);var ye=((_.x-F.x)*(X.x-F.x)+(_.y-F.y)*(X.y-F.y))/le;return _.distSqr(ye<0?F:ye>1?X:X.sub(F)._mult(ye)._add(F))}function xs(_,F){for(var X,le,ye,we=!1,Pe=0;Pe<_.length;Pe++)for(var Xe=0,ct=(X=_[Pe]).length-1;Xe<X.length;ct=Xe++)(le=X[Xe]).y>F.y!=(ye=X[ct]).y>F.y&&F.x<(ye.x-le.x)*(F.y-le.y)/(ye.y-le.y)+le.x&&(we=!we);return we}function Ll(_,F){for(var X=!1,le=0,ye=_.length-1;le<_.length;ye=le++){var we=_[le],Pe=_[ye];we.y>F.y!=Pe.y>F.y&&F.x<(Pe.x-we.x)*(F.y-we.y)/(Pe.y-we.y)+we.x&&(X=!X)}return X}function mf(_,F,X){var le=X[0],ye=X[2];if(_.x<le.x&&F.x<le.x||_.x>ye.x&&F.x>ye.x||_.y<le.y&&F.y<le.y||_.y>ye.y&&F.y>ye.y)return!1;var we=k(_,F,X[0]);return we!==k(_,F,X[1])||we!==k(_,F,X[2])||we!==k(_,F,X[3])}function Ou(_,F,X){var le=F.paint.get(_).value;return le.kind==="constant"?le.value:X.programConfigurations.get(F.id).getMaxValue(_)}function Qs(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function mo(_,F,X,le,ye){if(!F[0]&&!F[1])return _;var we=l.convert(F)._mult(ye);X==="viewport"&&we._rotate(-le);for(var Pe=[],Xe=0;Xe<_.length;Xe++)Pe.push(_[Xe].sub(we));return Pe}Mi.prototype.populate=function(_,F,X){var le=this.layers[0],ye=[],we=null;le.type==="circle"&&(we=le.layout.get("circle-sort-key"));for(var Pe=0,Xe=_;Pe<Xe.length;Pe+=1){var ct=Xe[Pe],Tt=ct.feature,Lt=ct.id,It=ct.index,Gt=ct.sourceLayerIndex,Jt=this.layers[0]._featureFilter.needGeometry,pr={type:Tt.type,id:Lt,properties:Tt.properties,geometry:Jt?Ai(Tt):[]};if(this.layers[0]._featureFilter.filter(new Za(this.zoom),pr,X)){Jt||(pr.geometry=Ai(Tt));var dr=we?we.evaluate(pr,{},X):void 0;ye.push({id:Lt,properties:Tt.properties,type:Tt.type,sourceLayerIndex:Gt,index:It,geometry:pr.geometry,patterns:{},sortKey:dr})}}we&&ye.sort(function($n,oa){return $n.sortKey-oa.sortKey});for(var zr=0,Ar=ye;zr<Ar.length;zr+=1){var Xr=Ar[zr],rn=Xr.geometry,mn=Xr.index,gn=Xr.sourceLayerIndex,Ln=_[mn].feature;this.addFeature(Xr,rn,mn,X),F.featureIndex.insert(Ln,rn,mn,gn,this.index)}},Mi.prototype.update=function(_,F,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,F,this.stateDependentLayers,X)},Mi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Mi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mi.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,Qt),this.indexBuffer=_.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_),this.uploaded=!0},Mi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Mi.prototype.addFeature=function(_,F,X,le){for(var ye=0,we=F;ye<we.length;ye+=1)for(var Pe=0,Xe=we[ye];Pe<Xe.length;Pe+=1){var ct=Xe[Pe],Tt=ct.x,Lt=ct.y;if(!(Tt<0||Tt>=8192||Lt<0||Lt>=8192)){var It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,_.sortKey),Gt=It.vertexLength;qi(this.layoutVertexArray,Tt,Lt,-1,-1),qi(this.layoutVertexArray,Tt,Lt,1,-1),qi(this.layoutVertexArray,Tt,Lt,1,1),qi(this.layoutVertexArray,Tt,Lt,-1,1),this.indexArray.emplaceBack(Gt,Gt+1,Gt+2),this.indexArray.emplaceBack(Gt,Gt+3,Gt+2),It.vertexLength+=4,It.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,X,{},le)},ga("CircleBucket",Mi,{omit:["layers"]});var Ic=new $i({"circle-sort-key":new ka(Me.layout_circle["circle-sort-key"])}),zc={paint:new $i({"circle-radius":new ka(Me.paint_circle["circle-radius"]),"circle-color":new ka(Me.paint_circle["circle-color"]),"circle-blur":new ka(Me.paint_circle["circle-blur"]),"circle-opacity":new ka(Me.paint_circle["circle-opacity"]),"circle-translate":new ma(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new ma(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ma(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ma(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ka(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ka(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ka(Me.paint_circle["circle-stroke-opacity"])}),layout:Ic},fo=typeof Float32Array<"u"?Float32Array:Array;function Nu(_){return _[0]=1,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=1,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=1,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,_}function to(_,F,X){var le=F[0],ye=F[1],we=F[2],Pe=F[3],Xe=F[4],ct=F[5],Tt=F[6],Lt=F[7],It=F[8],Gt=F[9],Jt=F[10],pr=F[11],dr=F[12],zr=F[13],Ar=F[14],Xr=F[15],rn=X[0],mn=X[1],gn=X[2],Ln=X[3];return _[0]=rn*le+mn*Xe+gn*It+Ln*dr,_[1]=rn*ye+mn*ct+gn*Gt+Ln*zr,_[2]=rn*we+mn*Tt+gn*Jt+Ln*Ar,_[3]=rn*Pe+mn*Lt+gn*pr+Ln*Xr,_[4]=(rn=X[4])*le+(mn=X[5])*Xe+(gn=X[6])*It+(Ln=X[7])*dr,_[5]=rn*ye+mn*ct+gn*Gt+Ln*zr,_[6]=rn*we+mn*Tt+gn*Jt+Ln*Ar,_[7]=rn*Pe+mn*Lt+gn*pr+Ln*Xr,_[8]=(rn=X[8])*le+(mn=X[9])*Xe+(gn=X[10])*It+(Ln=X[11])*dr,_[9]=rn*ye+mn*ct+gn*Gt+Ln*zr,_[10]=rn*we+mn*Tt+gn*Jt+Ln*Ar,_[11]=rn*Pe+mn*Lt+gn*pr+Ln*Xr,_[12]=(rn=X[12])*le+(mn=X[13])*Xe+(gn=X[14])*It+(Ln=X[15])*dr,_[13]=rn*ye+mn*ct+gn*Gt+Ln*zr,_[14]=rn*we+mn*Tt+gn*Jt+Ln*Ar,_[15]=rn*Pe+mn*Lt+gn*pr+Ln*Xr,_}Math.hypot||(Math.hypot=function(){for(var _=arguments,F=0,X=arguments.length;X--;)F+=_[X]*_[X];return Math.sqrt(F)});var Ds,bs=to;function vu(_,F,X){var le=F[0],ye=F[1],we=F[2],Pe=F[3];return _[0]=X[0]*le+X[4]*ye+X[8]*we+X[12]*Pe,_[1]=X[1]*le+X[5]*ye+X[9]*we+X[13]*Pe,_[2]=X[2]*le+X[6]*ye+X[10]*we+X[14]*Pe,_[3]=X[3]*le+X[7]*ye+X[11]*we+X[15]*Pe,_}Ds=new fo(3),fo!=Float32Array&&(Ds[0]=0,Ds[1]=0,Ds[2]=0),function(){var _=new fo(4);fo!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0,_[3]=0)}();var iv=(function(){var _=new fo(2);fo!=Float32Array&&(_[0]=0,_[1]=0)}(),function(_){function F(X){_.call(this,X,zc)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.createBucket=function(X){return new Mi(X)},F.prototype.queryRadius=function(X){var le=X;return Ou("circle-radius",this,le)+Ou("circle-stroke-width",this,le)+Qs(this.paint.get("circle-translate"))},F.prototype.queryIntersectsFeature=function(X,le,ye,we,Pe,Xe,ct,Tt){for(var Lt=mo(X,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Xe.angle,ct),It=this.paint.get("circle-radius").evaluate(le,ye)+this.paint.get("circle-stroke-width").evaluate(le,ye),Gt=this.paint.get("circle-pitch-alignment")==="map",Jt=Gt?Lt:function($n,oa){return $n.map(function(_a){return gf(_a,oa)})}(Lt,Tt),pr=Gt?It*ct:It,dr=0,zr=we;dr<zr.length;dr+=1)for(var Ar=0,Xr=zr[dr];Ar<Xr.length;Ar+=1){var rn=Xr[Ar],mn=Gt?rn:gf(rn,Tt),gn=pr,Ln=vu([],[rn.x,rn.y,0,1],Tt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?gn*=Ln[3]/Xe.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(gn*=Xe.cameraToCenterDistance/Ln[3]),vo(Jt,mn,gn))return!0}return!1},F}(Go));function gf(_,F){var X=vu([],[_.x,_.y,0,1],F);return new l(X[0]/X[3],X[1]/X[3])}var Mh=function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F}(Mi);function oc(_,F,X,le){var ye=F.width,we=F.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==ye*we*X)throw new RangeError("mismatched image size")}else le=new Uint8Array(ye*we*X);return _.width=ye,_.height=we,_.data=le,_}function kh(_,F,X){var le=F.width,ye=F.height;if(le!==_.width||ye!==_.height){var we=oc({},{width:le,height:ye},X);qs(_,we,{x:0,y:0},{x:0,y:0},{width:Math.min(_.width,le),height:Math.min(_.height,ye)},X),_.width=le,_.height=ye,_.data=we.data}}function qs(_,F,X,le,ye,we){if(ye.width===0||ye.height===0)return F;if(ye.width>_.width||ye.height>_.height||X.x>_.width-ye.width||X.y>_.height-ye.height)throw new RangeError("out of range source coordinates for image copy");if(ye.width>F.width||ye.height>F.height||le.x>F.width-ye.width||le.y>F.height-ye.height)throw new RangeError("out of range destination coordinates for image copy");for(var Pe=_.data,Xe=F.data,ct=0;ct<ye.height;ct++)for(var Tt=((X.y+ct)*_.width+X.x)*we,Lt=((le.y+ct)*F.width+le.x)*we,It=0;It<ye.width*we;It++)Xe[Lt+It]=Pe[Tt+It];return F}ga("HeatmapBucket",Mh,{omit:["layers"]});var el=function(_,F){oc(this,_,1,F)};el.prototype.resize=function(_){kh(this,_,1)},el.prototype.clone=function(){return new el({width:this.width,height:this.height},new Uint8Array(this.data))},el.copy=function(_,F,X,le,ye){qs(_,F,X,le,ye,1)};var ro=function(_,F){oc(this,_,4,F)};ro.prototype.resize=function(_){kh(this,_,4)},ro.prototype.replace=function(_,F){F?this.data.set(_):this.data=_ instanceof Uint8ClampedArray?new Uint8Array(_.buffer):_},ro.prototype.clone=function(){return new ro({width:this.width,height:this.height},new Uint8Array(this.data))},ro.copy=function(_,F,X,le,ye){qs(_,F,X,le,ye,4)},ga("AlphaImage",el),ga("RGBAImage",ro);var Qv={paint:new $i({"heatmap-radius":new ka(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ka(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ma(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wo(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ma(Me.paint_heatmap["heatmap-opacity"])})};function qv(_,F){for(var X=new Uint8Array(1024),le={},ye=0,we=0;ye<256;ye++,we+=4){le[F]=ye/255;var Pe=_.evaluate(le);X[we+0]=Math.floor(255*Pe.r/Pe.a),X[we+1]=Math.floor(255*Pe.g/Pe.a),X[we+2]=Math.floor(255*Pe.b/Pe.a),X[we+3]=Math.floor(255*Pe.a)}return new ro({width:256,height:1},X)}var ed=function(_){function F(X){_.call(this,X,Qv),this._updateColorRamp()}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.createBucket=function(X){return new Mh(X)},F.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="heatmap-color"&&this._updateColorRamp()},F.prototype._updateColorRamp=function(){this.colorRamp=qv(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},F.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},F.prototype.queryRadius=function(){return 0},F.prototype.queryIntersectsFeature=function(){return!1},F.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},F}(Go),y0={paint:new $i({"hillshade-illumination-direction":new ma(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ma(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ma(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ma(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ma(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ma(Me.paint_hillshade["hillshade-accent-color"])})},fp=function(_){function F(X){_.call(this,X,y0)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},F}(Go),ov=Oi([{name:"a_pos",components:2,type:"Int16"}],4).members,Sh=Jf,x0=Jf;function Jf(_,F,X){X=X||2;var le,ye,we,Pe,Xe,ct,Tt,Lt=F&&F.length,It=Lt?F[0]*X:_.length,Gt=fi(_,0,It,X,!0),Jt=[];if(!Gt||Gt.next===Gt.prev)return Jt;if(Lt&&(Gt=function(dr,zr,Ar,Xr){var rn,mn,gn,Ln=[];for(rn=0,mn=zr.length;rn<mn;rn++)(gn=fi(dr,zr[rn]*Xr,rn<mn-1?zr[rn+1]*Xr:dr.length,Xr,!1))===gn.next&&(gn.steiner=!0),Ln.push(sv(gn));for(Ln.sort(Pl),rn=0;rn<Ln.length;rn++)w0(Ln[rn],Ar),Ar=Bu(Ar,Ar.next);return Ar}(_,F,Gt,X)),_.length>80*X){le=we=_[0],ye=Pe=_[1];for(var pr=X;pr<It;pr+=X)(Xe=_[pr])<le&&(le=Xe),(ct=_[pr+1])<ye&&(ye=ct),Xe>we&&(we=Xe),ct>Pe&&(Pe=ct);Tt=(Tt=Math.max(we-le,Pe-ye))!==0?1/Tt:0}return yf(Gt,Jt,X,le,ye,Tt),Jt}function fi(_,F,X,le,ye){var we,Pe;if(ye===lv(_,F,X,le)>0)for(we=F;we<X;we+=le)Pe=vp(we,_[we],_[we+1],Pe);else for(we=X-le;we>=F;we-=le)Pe=vp(we,_[we],_[we+1],Pe);return Pe&&$f(Pe,Pe.next)&&(bf(Pe),Pe=Pe.next),Pe}function Bu(_,F){if(!_)return _;F||(F=_);var X,le=_;do if(X=!1,le.steiner||!$f(le,le.next)&&Ni(le.prev,le,le.next)!==0)le=le.next;else{if(bf(le),(le=F=le.prev)===le.next)break;X=!0}while(X||le!==F);return F}function yf(_,F,X,le,ye,we,Pe){if(_){!Pe&&we&&function(Lt,It,Gt,Jt){var pr=Lt;do pr.z===null&&(pr.z=xf(pr.x,pr.y,It,Gt,Jt)),pr.prevZ=pr.prev,pr.nextZ=pr.next,pr=pr.next;while(pr!==Lt);pr.prevZ.nextZ=null,pr.prevZ=null,function(dr){var zr,Ar,Xr,rn,mn,gn,Ln,$n,oa=1;do{for(Ar=dr,dr=null,mn=null,gn=0;Ar;){for(gn++,Xr=Ar,Ln=0,zr=0;zr<oa&&(Ln++,Xr=Xr.nextZ);zr++);for($n=oa;Ln>0||$n>0&&Xr;)Ln!==0&&($n===0||!Xr||Ar.z<=Xr.z)?(rn=Ar,Ar=Ar.nextZ,Ln--):(rn=Xr,Xr=Xr.nextZ,$n--),mn?mn.nextZ=rn:dr=rn,rn.prevZ=mn,mn=rn;Ar=Xr}mn.nextZ=null,oa*=2}while(gn>1)}(pr)}(_,le,ye,we);for(var Xe,ct,Tt=_;_.prev!==_.next;)if(Xe=_.prev,ct=_.next,we?td(_,le,ye,we):Ch(_))F.push(Xe.i/X),F.push(_.i/X),F.push(ct.i/X),bf(_),_=ct.next,Tt=ct.next;else if((_=ct)===Tt){Pe?Pe===1?yf(_=b0(Bu(_),F,X),F,X,le,ye,we,2):Pe===2&&_0(_,F,X,le,ye,we):yf(Bu(_),F,X,le,ye,we,1);break}}}function Ch(_){var F=_.prev,X=_,le=_.next;if(Ni(F,X,le)>=0)return!1;for(var ye=_.next.next;ye!==_.prev;){if(Fc(F.x,F.y,X.x,X.y,le.x,le.y,ye.x,ye.y)&&Ni(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function td(_,F,X,le){var ye=_.prev,we=_,Pe=_.next;if(Ni(ye,we,Pe)>=0)return!1;for(var Xe=ye.x>we.x?ye.x>Pe.x?ye.x:Pe.x:we.x>Pe.x?we.x:Pe.x,ct=ye.y>we.y?ye.y>Pe.y?ye.y:Pe.y:we.y>Pe.y?we.y:Pe.y,Tt=xf(ye.x<we.x?ye.x<Pe.x?ye.x:Pe.x:we.x<Pe.x?we.x:Pe.x,ye.y<we.y?ye.y<Pe.y?ye.y:Pe.y:we.y<Pe.y?we.y:Pe.y,F,X,le),Lt=xf(Xe,ct,F,X,le),It=_.prevZ,Gt=_.nextZ;It&&It.z>=Tt&&Gt&&Gt.z<=Lt;){if(It!==_.prev&&It!==_.next&&Fc(ye.x,ye.y,we.x,we.y,Pe.x,Pe.y,It.x,It.y)&&Ni(It.prev,It,It.next)>=0||(It=It.prevZ,Gt!==_.prev&&Gt!==_.next&&Fc(ye.x,ye.y,we.x,we.y,Pe.x,Pe.y,Gt.x,Gt.y)&&Ni(Gt.prev,Gt,Gt.next)>=0))return!1;Gt=Gt.nextZ}for(;It&&It.z>=Tt;){if(It!==_.prev&&It!==_.next&&Fc(ye.x,ye.y,we.x,we.y,Pe.x,Pe.y,It.x,It.y)&&Ni(It.prev,It,It.next)>=0)return!1;It=It.prevZ}for(;Gt&&Gt.z<=Lt;){if(Gt!==_.prev&&Gt!==_.next&&Fc(ye.x,ye.y,we.x,we.y,Pe.x,Pe.y,Gt.x,Gt.y)&&Ni(Gt.prev,Gt,Gt.next)>=0)return!1;Gt=Gt.nextZ}return!0}function b0(_,F,X){var le=_;do{var ye=le.prev,we=le.next.next;!$f(ye,we)&&pp(ye,le,le.next,we)&&sc(ye,we)&&sc(we,ye)&&(F.push(ye.i/X),F.push(le.i/X),F.push(we.i/X),bf(le),bf(le.next),le=_=we),le=le.next}while(le!==_);return Bu(le)}function _0(_,F,X,le,ye,we){var Pe=_;do{for(var Xe=Pe.next.next;Xe!==Pe.prev;){if(Pe.i!==Xe.i&&cl(Pe,Xe)){var ct=Eh(Pe,Xe);return Pe=Bu(Pe,Pe.next),ct=Bu(ct,ct.next),yf(Pe,F,X,le,ye,we),void yf(ct,F,X,le,ye,we)}Xe=Xe.next}Pe=Pe.next}while(Pe!==_)}function Pl(_,F){return _.x-F.x}function w0(_,F){if(F=function(le,ye){var we,Pe=ye,Xe=le.x,ct=le.y,Tt=-1/0;do{if(ct<=Pe.y&&ct>=Pe.next.y&&Pe.next.y!==Pe.y){var Lt=Pe.x+(ct-Pe.y)*(Pe.next.x-Pe.x)/(Pe.next.y-Pe.y);if(Lt<=Xe&&Lt>Tt){if(Tt=Lt,Lt===Xe){if(ct===Pe.y)return Pe;if(ct===Pe.next.y)return Pe.next}we=Pe.x<Pe.next.x?Pe:Pe.next}}Pe=Pe.next}while(Pe!==ye);if(!we)return null;if(Xe===Tt)return we;var It,Gt=we,Jt=we.x,pr=we.y,dr=1/0;Pe=we;do Xe>=Pe.x&&Pe.x>=Jt&&Xe!==Pe.x&&Fc(ct<pr?Xe:Tt,ct,Jt,pr,ct<pr?Tt:Xe,ct,Pe.x,Pe.y)&&(It=Math.abs(ct-Pe.y)/(Xe-Pe.x),sc(Pe,le)&&(It<dr||It===dr&&(Pe.x>we.x||Pe.x===we.x&&hp(we,Pe)))&&(we=Pe,dr=It)),Pe=Pe.next;while(Pe!==Gt);return we}(_,F)){var X=Eh(F,_);Bu(F,F.next),Bu(X,X.next)}}function hp(_,F){return Ni(_.prev,_,F.prev)<0&&Ni(F.next,_,_.next)<0}function xf(_,F,X,le,ye){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=32767*(_-X)*ye)|_<<8))|_<<4))|_<<2))|_<<1))|(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-le)*ye)|F<<8))|F<<4))|F<<2))|F<<1))<<1}function sv(_){var F=_,X=_;do(F.x<X.x||F.x===X.x&&F.y<X.y)&&(X=F),F=F.next;while(F!==_);return X}function Fc(_,F,X,le,ye,we,Pe,Xe){return(ye-Pe)*(F-Xe)-(_-Pe)*(we-Xe)>=0&&(_-Pe)*(le-Xe)-(X-Pe)*(F-Xe)>=0&&(X-Pe)*(we-Xe)-(ye-Pe)*(le-Xe)>=0}function cl(_,F){return _.next.i!==F.i&&_.prev.i!==F.i&&!function(X,le){var ye=X;do{if(ye.i!==X.i&&ye.next.i!==X.i&&ye.i!==le.i&&ye.next.i!==le.i&&pp(ye,ye.next,X,le))return!0;ye=ye.next}while(ye!==X);return!1}(_,F)&&(sc(_,F)&&sc(F,_)&&function(X,le){var ye=X,we=!1,Pe=(X.x+le.x)/2,Xe=(X.y+le.y)/2;do ye.y>Xe!=ye.next.y>Xe&&ye.next.y!==ye.y&&Pe<(ye.next.x-ye.x)*(Xe-ye.y)/(ye.next.y-ye.y)+ye.x&&(we=!we),ye=ye.next;while(ye!==X);return we}(_,F)&&(Ni(_.prev,_,F.prev)||Ni(_,F.prev,F))||$f(_,F)&&Ni(_.prev,_,_.next)>0&&Ni(F.prev,F,F.next)>0)}function Ni(_,F,X){return(F.y-_.y)*(X.x-F.x)-(F.x-_.x)*(X.y-F.y)}function $f(_,F){return _.x===F.x&&_.y===F.y}function pp(_,F,X,le){var ye=Qf(Ni(_,F,X)),we=Qf(Ni(_,F,le)),Pe=Qf(Ni(X,le,_)),Xe=Qf(Ni(X,le,F));return ye!==we&&Pe!==Xe||!(ye!==0||!Oc(_,X,F))||!(we!==0||!Oc(_,le,F))||!(Pe!==0||!Oc(X,_,le))||!(Xe!==0||!Oc(X,F,le))}function Oc(_,F,X){return F.x<=Math.max(_.x,X.x)&&F.x>=Math.min(_.x,X.x)&&F.y<=Math.max(_.y,X.y)&&F.y>=Math.min(_.y,X.y)}function Qf(_){return _>0?1:_<0?-1:0}function sc(_,F){return Ni(_.prev,_,_.next)<0?Ni(_,F,_.next)>=0&&Ni(_,_.prev,F)>=0:Ni(_,F,_.prev)<0||Ni(_,_.next,F)<0}function Eh(_,F){var X=new Uu(_.i,_.x,_.y),le=new Uu(F.i,F.x,F.y),ye=_.next,we=F.prev;return _.next=F,F.prev=_,X.next=ye,ye.prev=X,le.next=X,X.prev=le,we.next=le,le.prev=we,le}function vp(_,F,X,le){var ye=new Uu(_,F,X);return le?(ye.next=le.next,ye.prev=le,le.next.prev=ye,le.next=ye):(ye.prev=ye,ye.next=ye),ye}function bf(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function Uu(_,F,X){this.i=_,this.x=F,this.y=X,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lv(_,F,X,le){for(var ye=0,we=F,Pe=X-le;we<X;we+=le)ye+=(_[Pe]-_[we])*(_[we+1]+_[Pe+1]),Pe=we;return ye}function Nc(_,F,X,le,ye){(function we(Pe,Xe,ct,Tt,Lt){for(;Tt>ct;){if(Tt-ct>600){var It=Tt-ct+1,Gt=Xe-ct+1,Jt=Math.log(It),pr=.5*Math.exp(2*Jt/3),dr=.5*Math.sqrt(Jt*pr*(It-pr)/It)*(Gt-It/2<0?-1:1);we(Pe,Xe,Math.max(ct,Math.floor(Xe-Gt*pr/It+dr)),Math.min(Tt,Math.floor(Xe+(It-Gt)*pr/It+dr)),Lt)}var zr=Pe[Xe],Ar=ct,Xr=Tt;for(_f(Pe,ct,Xe),Lt(Pe[Tt],zr)>0&&_f(Pe,ct,Tt);Ar<Xr;){for(_f(Pe,Ar,Xr),Ar++,Xr--;Lt(Pe[Ar],zr)<0;)Ar++;for(;Lt(Pe[Xr],zr)>0;)Xr--}Lt(Pe[ct],zr)===0?_f(Pe,ct,Xr):_f(Pe,++Xr,Tt),Xr<=Xe&&(ct=Xr+1),Xe<=Xr&&(Tt=Xr-1)}})(_,F,X||0,le||_.length-1,ye||uv)}function _f(_,F,X){var le=_[F];_[F]=_[X],_[X]=le}function uv(_,F){return _<F?-1:_>F?1:0}function wf(_,F){var X=_.length;if(X<=1)return[_];for(var le,ye,we=[],Pe=0;Pe<X;Pe++){var Xe=E(_[Pe]);Xe!==0&&(_[Pe].area=Math.abs(Xe),ye===void 0&&(ye=Xe<0),ye===Xe<0?(le&&we.push(le),le=[_[Pe]]):le.push(_[Pe]))}if(le&&we.push(le),F>1)for(var ct=0;ct<we.length;ct++)we[ct].length<=F||(Nc(we[ct],F,1,we[ct].length-1,rd),we[ct]=we[ct].slice(0,F));return we}function rd(_,F){return F.area-_.area}function Bc(_,F,X){for(var le=X.patternDependencies,ye=!1,we=0,Pe=F;we<Pe.length;we+=1){var Xe=Pe[we].paint.get(_+"-pattern");Xe.isConstant()||(ye=!0);var ct=Xe.constantOr(null);ct&&(ye=!0,le[ct.to]=!0,le[ct.from]=!0)}return ye}function qf(_,F,X,le,ye){for(var we=ye.patternDependencies,Pe=0,Xe=F;Pe<Xe.length;Pe+=1){var ct=Xe[Pe],Tt=ct.paint.get(_+"-pattern").value;if(Tt.kind!=="constant"){var Lt=Tt.evaluate({zoom:le-1},X,{},ye.availableImages),It=Tt.evaluate({zoom:le},X,{},ye.availableImages),Gt=Tt.evaluate({zoom:le+1},X,{},ye.availableImages);It=It&&It.name?It.name:It,Gt=Gt&&Gt.name?Gt.name:Gt,we[Lt=Lt&&Lt.name?Lt.name:Lt]=!0,we[It]=!0,we[Gt]=!0,X.patterns[ct.id]={min:Lt,mid:It,max:Gt}}}return X}Jf.deviation=function(_,F,X,le){var ye=F&&F.length,we=Math.abs(lv(_,0,ye?F[0]*X:_.length,X));if(ye)for(var Pe=0,Xe=F.length;Pe<Xe;Pe++)we-=Math.abs(lv(_,F[Pe]*X,Pe<Xe-1?F[Pe+1]*X:_.length,X));var ct=0;for(Pe=0;Pe<le.length;Pe+=3){var Tt=le[Pe]*X,Lt=le[Pe+1]*X,It=le[Pe+2]*X;ct+=Math.abs((_[Tt]-_[It])*(_[Lt+1]-_[Tt+1])-(_[Tt]-_[Lt])*(_[It+1]-_[Tt+1]))}return we===0&&ct===0?0:Math.abs((ct-we)/we)},Jf.flatten=function(_){for(var F=_[0][0].length,X={vertices:[],holes:[],dimensions:F},le=0,ye=0;ye<_.length;ye++){for(var we=0;we<_[ye].length;we++)for(var Pe=0;Pe<F;Pe++)X.vertices.push(_[ye][we][Pe]);ye>0&&X.holes.push(le+=_[ye-1].length)}return X},Sh.default=x0;var Gl=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=_.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ic,this.indexArray=new sl,this.indexArray2=new Rs,this.programConfigurations=new pa(ov,_.layers,_.zoom),this.segments=new nr,this.segments2=new nr,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};Gl.prototype.populate=function(_,F,X){this.hasPattern=Bc("fill",this.layers,F);for(var le=this.layers[0].layout.get("fill-sort-key"),ye=[],we=0,Pe=_;we<Pe.length;we+=1){var Xe=Pe[we],ct=Xe.feature,Tt=Xe.id,Lt=Xe.index,It=Xe.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,Jt={type:ct.type,id:Tt,properties:ct.properties,geometry:Gt?Ai(ct):[]};if(this.layers[0]._featureFilter.filter(new Za(this.zoom),Jt,X)){Gt||(Jt.geometry=Ai(ct));var pr=le?le.evaluate(Jt,{},X,F.availableImages):void 0;ye.push({id:Tt,properties:ct.properties,type:ct.type,sourceLayerIndex:It,index:Lt,geometry:Jt.geometry,patterns:{},sortKey:pr})}}le&&ye.sort(function(Ln,$n){return Ln.sortKey-$n.sortKey});for(var dr=0,zr=ye;dr<zr.length;dr+=1){var Ar=zr[dr],Xr=Ar.geometry,rn=Ar.index,mn=Ar.sourceLayerIndex;if(this.hasPattern){var gn=qf("fill",this.layers,Ar,this.zoom,F);this.patternFeatures.push(gn)}else this.addFeature(Ar,Xr,rn,X,{});F.featureIndex.insert(_[rn].feature,Xr,rn,mn,this.index)}},Gl.prototype.update=function(_,F,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,F,this.stateDependentLayers,X)},Gl.prototype.addFeatures=function(_,F,X){for(var le=0,ye=this.patternFeatures;le<ye.length;le+=1){var we=ye[le];this.addFeature(we,we.geometry,we.index,F,X)}},Gl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gl.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,ov),this.indexBuffer=_.createIndexBuffer(this.indexArray),this.indexBuffer2=_.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(_),this.uploaded=!0},Gl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Gl.prototype.addFeature=function(_,F,X,le,ye){for(var we=0,Pe=wf(F,500);we<Pe.length;we+=1){for(var Xe=Pe[we],ct=0,Tt=0,Lt=Xe;Tt<Lt.length;Tt+=1)ct+=Lt[Tt].length;for(var It=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),Gt=It.vertexLength,Jt=[],pr=[],dr=0,zr=Xe;dr<zr.length;dr+=1){var Ar=zr[dr];if(Ar.length!==0){Ar!==Xe[0]&&pr.push(Jt.length/2);var Xr=this.segments2.prepareSegment(Ar.length,this.layoutVertexArray,this.indexArray2),rn=Xr.vertexLength;this.layoutVertexArray.emplaceBack(Ar[0].x,Ar[0].y),this.indexArray2.emplaceBack(rn+Ar.length-1,rn),Jt.push(Ar[0].x),Jt.push(Ar[0].y);for(var mn=1;mn<Ar.length;mn++)this.layoutVertexArray.emplaceBack(Ar[mn].x,Ar[mn].y),this.indexArray2.emplaceBack(rn+mn-1,rn+mn),Jt.push(Ar[mn].x),Jt.push(Ar[mn].y);Xr.vertexLength+=Ar.length,Xr.primitiveLength+=Ar.length}}for(var gn=Sh(Jt,pr),Ln=0;Ln<gn.length;Ln+=3)this.indexArray.emplaceBack(Gt+gn[Ln],Gt+gn[Ln+1],Gt+gn[Ln+2]);It.vertexLength+=ct,It.primitiveLength+=gn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,X,ye,le)},ga("FillBucket",Gl,{omit:["layers","patternFeatures"]});var Lh=new $i({"fill-sort-key":new ka(Me.layout_fill["fill-sort-key"])}),nd={paint:new $i({"fill-antialias":new ma(Me.paint_fill["fill-antialias"]),"fill-opacity":new ka(Me.paint_fill["fill-opacity"]),"fill-color":new ka(Me.paint_fill["fill-color"]),"fill-outline-color":new ka(Me.paint_fill["fill-outline-color"]),"fill-translate":new ma(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new ma(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bi(Me.paint_fill["fill-pattern"])}),layout:Lh},ad=function(_){function F(X){_.call(this,X,nd)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.recalculate=function(X,le){_.prototype.recalculate.call(this,X,le);var ye=this.paint._values["fill-outline-color"];ye.value.kind==="constant"&&ye.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},F.prototype.createBucket=function(X){return new Gl(X)},F.prototype.queryRadius=function(){return Qs(this.paint.get("fill-translate"))},F.prototype.queryIntersectsFeature=function(X,le,ye,we,Pe,Xe,ct){return Js(mo(X,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Xe.angle,ct),we)},F.prototype.isTileClipped=function(){return!0},F}(Go),cv=Oi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Is=_s;function _s(_,F,X,le,ye){this.properties={},this.extent=X,this.type=0,this._pbf=_,this._geometry=-1,this._keys=le,this._values=ye,_.readFields(id,this,F)}function id(_,F,X){_==1?F.id=X.readVarint():_==2?function(le,ye){for(var we=le.readVarint()+le.pos;le.pos<we;){var Pe=ye._keys[le.readVarint()],Xe=ye._values[le.readVarint()];ye.properties[Pe]=Xe}}(X,F):_==3?F.type=X.readVarint():_==4&&(F._geometry=X.pos)}function eh(_){for(var F,X,le=0,ye=0,we=_.length,Pe=we-1;ye<we;Pe=ye++)le+=((X=_[Pe]).x-(F=_[ye]).x)*(F.y+X.y);return le}_s.types=["Unknown","Point","LineString","Polygon"],_s.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var F,X=_.readVarint()+_.pos,le=1,ye=0,we=0,Pe=0,Xe=[];_.pos<X;){if(ye<=0){var ct=_.readVarint();le=7&ct,ye=ct>>3}if(ye--,le===1||le===2)we+=_.readSVarint(),Pe+=_.readSVarint(),le===1&&(F&&Xe.push(F),F=[]),F.push(new l(we,Pe));else{if(le!==7)throw new Error("unknown command "+le);F&&F.push(F[0].clone())}}return F&&Xe.push(F),Xe},_s.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var F=_.readVarint()+_.pos,X=1,le=0,ye=0,we=0,Pe=1/0,Xe=-1/0,ct=1/0,Tt=-1/0;_.pos<F;){if(le<=0){var Lt=_.readVarint();X=7&Lt,le=Lt>>3}if(le--,X===1||X===2)(ye+=_.readSVarint())<Pe&&(Pe=ye),ye>Xe&&(Xe=ye),(we+=_.readSVarint())<ct&&(ct=we),we>Tt&&(Tt=we);else if(X!==7)throw new Error("unknown command "+X)}return[Pe,ct,Xe,Tt]},_s.prototype.toGeoJSON=function(_,F,X){var le,ye,we=this.extent*Math.pow(2,X),Pe=this.extent*_,Xe=this.extent*F,ct=this.loadGeometry(),Tt=_s.types[this.type];function Lt(Jt){for(var pr=0;pr<Jt.length;pr++){var dr=Jt[pr];Jt[pr]=[360*(dr.x+Pe)/we-180,360/Math.PI*Math.atan(Math.exp((180-360*(dr.y+Xe)/we)*Math.PI/180))-90]}}switch(this.type){case 1:var It=[];for(le=0;le<ct.length;le++)It[le]=ct[le][0];Lt(ct=It);break;case 2:for(le=0;le<ct.length;le++)Lt(ct[le]);break;case 3:for(ct=function(Jt){var pr=Jt.length;if(pr<=1)return[Jt];for(var dr,zr,Ar=[],Xr=0;Xr<pr;Xr++){var rn=eh(Jt[Xr]);rn!==0&&(zr===void 0&&(zr=rn<0),zr===rn<0?(dr&&Ar.push(dr),dr=[Jt[Xr]]):dr.push(Jt[Xr]))}return dr&&Ar.push(dr),Ar}(ct),le=0;le<ct.length;le++)for(ye=0;ye<ct[le].length;ye++)Lt(ct[le][ye])}ct.length===1?ct=ct[0]:Tt="Multi"+Tt;var Gt={type:"Feature",geometry:{type:Tt,coordinates:ct},properties:this.properties};return"id"in this&&(Gt.id=this.id),Gt};var Tf=lc;function lc(_,F){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=_,this._keys=[],this._values=[],this._features=[],_.readFields(od,this,F),this.length=this._features.length}function od(_,F,X){_===15?F.version=X.readVarint():_===1?F.name=X.readString():_===5?F.extent=X.readVarint():_===2?F._features.push(X.pos):_===3?F._keys.push(X.readString()):_===4&&F._values.push(function(le){for(var ye=null,we=le.readVarint()+le.pos;le.pos<we;){var Pe=le.readVarint()>>3;ye=Pe===1?le.readString():Pe===2?le.readFloat():Pe===3?le.readDouble():Pe===4?le.readVarint64():Pe===5?le.readVarint():Pe===6?le.readSVarint():Pe===7?le.readBoolean():null}return ye}(X))}function Ph(_,F,X){if(_===3){var le=new Tf(X,X.readVarint()+X.pos);le.length&&(F[le.name]=le)}}lc.prototype.feature=function(_){if(_<0||_>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[_];var F=this._pbf.readVarint()+this._pbf.pos;return new Is(this._pbf,F,this.extent,this._keys,this._values)};var th={VectorTile:function(_,F){this.layers=_.readFields(Ph,{},F)},VectorTileFeature:Is,VectorTileLayer:Tf},fv=th.VectorTileFeature.types,uc=Math.pow(2,13);function cc(_,F,X,le,ye,we,Pe,Xe){_.emplaceBack(F,X,2*Math.floor(le*uc)+Pe,ye*uc*2,we*uc*2,Math.round(Xe))}var jl=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=_.index,this.hasPattern=!1,this.layoutVertexArray=new Ps,this.indexArray=new sl,this.programConfigurations=new pa(cv,_.layers,_.zoom),this.segments=new nr,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};function Rh(_,F){return _.x===F.x&&(_.x<0||_.x>8192)||_.y===F.y&&(_.y<0||_.y>8192)}jl.prototype.populate=function(_,F,X){this.features=[],this.hasPattern=Bc("fill-extrusion",this.layers,F);for(var le=0,ye=_;le<ye.length;le+=1){var we=ye[le],Pe=we.feature,Xe=we.id,ct=we.index,Tt=we.sourceLayerIndex,Lt=this.layers[0]._featureFilter.needGeometry,It={type:Pe.type,id:Xe,properties:Pe.properties,geometry:Lt?Ai(Pe):[]};if(this.layers[0]._featureFilter.filter(new Za(this.zoom),It,X)){var Gt={id:Xe,sourceLayerIndex:Tt,index:ct,geometry:Lt?It.geometry:Ai(Pe),properties:Pe.properties,type:Pe.type,patterns:{}};Pe.id!==void 0&&(Gt.id=Pe.id),this.hasPattern?this.features.push(qf("fill-extrusion",this.layers,Gt,this.zoom,F)):this.addFeature(Gt,Gt.geometry,ct,X,{}),F.featureIndex.insert(Pe,Gt.geometry,ct,Tt,this.index,!0)}}},jl.prototype.addFeatures=function(_,F,X){for(var le=0,ye=this.features;le<ye.length;le+=1){var we=ye[le];this.addFeature(we,we.geometry,we.index,F,X)}},jl.prototype.update=function(_,F,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,F,this.stateDependentLayers,X)},jl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jl.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,cv),this.indexBuffer=_.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_),this.uploaded=!0},jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jl.prototype.addFeature=function(_,F,X,le,ye){for(var we=0,Pe=wf(F,500);we<Pe.length;we+=1){for(var Xe=Pe[we],ct=0,Tt=0,Lt=Xe;Tt<Lt.length;Tt+=1)ct+=Lt[Tt].length;for(var It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Gt=0,Jt=Xe;Gt<Jt.length;Gt+=1){var pr=Jt[Gt];if(pr.length!==0&&!((ii=pr).every(function(ja){return ja.x<0})||ii.every(function(ja){return ja.x>8192})||ii.every(function(ja){return ja.y<0})||ii.every(function(ja){return ja.y>8192})))for(var dr=0,zr=0;zr<pr.length;zr++){var Ar=pr[zr];if(zr>=1){var Xr=pr[zr-1];if(!Rh(Ar,Xr)){It.vertexLength+4>nr.MAX_VERTEX_ARRAY_LENGTH&&(It=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var rn=Ar.sub(Xr)._perp()._unit(),mn=Xr.dist(Ar);dr+mn>32768&&(dr=0),cc(this.layoutVertexArray,Ar.x,Ar.y,rn.x,rn.y,0,0,dr),cc(this.layoutVertexArray,Ar.x,Ar.y,rn.x,rn.y,0,1,dr),cc(this.layoutVertexArray,Xr.x,Xr.y,rn.x,rn.y,0,0,dr+=mn),cc(this.layoutVertexArray,Xr.x,Xr.y,rn.x,rn.y,0,1,dr);var gn=It.vertexLength;this.indexArray.emplaceBack(gn,gn+2,gn+1),this.indexArray.emplaceBack(gn+1,gn+2,gn+3),It.vertexLength+=4,It.primitiveLength+=2}}}}if(It.vertexLength+ct>nr.MAX_VERTEX_ARRAY_LENGTH&&(It=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),fv[_.type]==="Polygon"){for(var Ln=[],$n=[],oa=It.vertexLength,_a=0,fa=Xe;_a<fa.length;_a+=1){var Aa=fa[_a];if(Aa.length!==0){Aa!==Xe[0]&&$n.push(Ln.length/2);for(var ca=0;ca<Aa.length;ca++){var Xa=Aa[ca];cc(this.layoutVertexArray,Xa.x,Xa.y,0,0,1,1,0),Ln.push(Xa.x),Ln.push(Xa.y)}}}for(var Oa=Sh(Ln,$n),da=0;da<Oa.length;da+=3)this.indexArray.emplaceBack(oa+Oa[da],oa+Oa[da+2],oa+Oa[da+1]);It.primitiveLength+=Oa.length/3,It.vertexLength+=ct}}var ii;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,X,ye,le)},ga("FillExtrusionBucket",jl,{omit:["layers","features"]});var hv={paint:new $i({"fill-extrusion-opacity":new ma(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ka(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ma(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ma(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bi(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ka(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ka(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ma(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},dp=function(_){function F(X){_.call(this,X,hv)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.createBucket=function(X){return new jl(X)},F.prototype.queryRadius=function(){return Qs(this.paint.get("fill-extrusion-translate"))},F.prototype.is3D=function(){return!0},F.prototype.queryIntersectsFeature=function(X,le,ye,we,Pe,Xe,ct,Tt){var Lt=mo(X,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Xe.angle,ct),It=this.paint.get("fill-extrusion-height").evaluate(le,ye),Gt=this.paint.get("fill-extrusion-base").evaluate(le,ye),Jt=function(dr,zr,Ar,Xr){for(var rn=[],mn=0,gn=dr;mn<gn.length;mn+=1){var Ln=gn[mn],$n=[Ln.x,Ln.y,0,1];vu($n,$n,zr),rn.push(new l($n[0]/$n[3],$n[1]/$n[3]))}return rn}(Lt,Tt),pr=function(dr,zr,Ar,Xr){for(var rn=[],mn=[],gn=Xr[8]*zr,Ln=Xr[9]*zr,$n=Xr[10]*zr,oa=Xr[11]*zr,_a=Xr[8]*Ar,fa=Xr[9]*Ar,Aa=Xr[10]*Ar,ca=Xr[11]*Ar,Xa=0,Oa=dr;Xa<Oa.length;Xa+=1){for(var da=[],ii=[],ja=0,pi=Oa[Xa];ja<pi.length;ja+=1){var wa=pi[ja],yi=wa.x,Ui=wa.y,Ko=Xr[0]*yi+Xr[4]*Ui+Xr[12],Jo=Xr[1]*yi+Xr[5]*Ui+Xr[13],Xi=Xr[2]*yi+Xr[6]*Ui+Xr[14],oo=Xr[3]*yi+Xr[7]*Ui+Xr[15],zi=Xi+$n,Lo=oo+oa,Bs=Ko+_a,Po=Jo+fa,Us=Xi+Aa,Ro=oo+ca,Do=new l((Ko+gn)/Lo,(Jo+Ln)/Lo);Do.z=zi/Lo,da.push(Do);var ci=new l(Bs/Ro,Po/Ro);ci.z=Us/Ro,ii.push(ci)}rn.push(da),mn.push(ii)}return[rn,mn]}(we,Gt,It,Tt);return function(dr,zr,Ar){var Xr=1/0;Js(Ar,zr)&&(Xr=Dh(Ar,zr[0]));for(var rn=0;rn<zr.length;rn++)for(var mn=zr[rn],gn=dr[rn],Ln=0;Ln<mn.length-1;Ln++){var $n=mn[Ln],oa=[$n,mn[Ln+1],gn[Ln+1],gn[Ln],$n];ul(Ar,oa)&&(Xr=Math.min(Xr,Dh(Ar,oa)))}return Xr!==1/0&&Xr}(pr[0],pr[1],Jt)},F}(Go);function rh(_,F){return _.x*F.x+_.y*F.y}function Dh(_,F){if(_.length===1){for(var X,le=0,ye=F[le++];!X||ye.equals(X);)if(!(X=F[le++]))return 1/0;for(;le<F.length;le++){var we=F[le],Pe=_[0],Xe=X.sub(ye),ct=we.sub(ye),Tt=Pe.sub(ye),Lt=rh(Xe,Xe),It=rh(Xe,ct),Gt=rh(ct,ct),Jt=rh(Tt,Xe),pr=rh(Tt,ct),dr=Lt*Gt-It*It,zr=(Gt*Jt-It*pr)/dr,Ar=(Lt*pr-It*Jt)/dr,Xr=ye.z*(1-zr-Ar)+X.z*zr+we.z*Ar;if(isFinite(Xr))return Xr}return 1/0}for(var rn=1/0,mn=0,gn=F;mn<gn.length;mn+=1)rn=Math.min(rn,gn[mn].z);return rn}var mp=Oi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ih=th.VectorTileFeature.types,sd=Math.cos(Math.PI/180*37.5),gp=Math.pow(2,14)/.5,Wo=function(_){this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=_.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rs,this.indexArray=new sl,this.programConfigurations=new pa(mp,_.layers,_.zoom),this.segments=new nr,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};Wo.prototype.populate=function(_,F,X){this.hasPattern=Bc("line",this.layers,F);for(var le=this.layers[0].layout.get("line-sort-key"),ye=[],we=0,Pe=_;we<Pe.length;we+=1){var Xe=Pe[we],ct=Xe.feature,Tt=Xe.id,Lt=Xe.index,It=Xe.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,Jt={type:ct.type,id:Tt,properties:ct.properties,geometry:Gt?Ai(ct):[]};if(this.layers[0]._featureFilter.filter(new Za(this.zoom),Jt,X)){Gt||(Jt.geometry=Ai(ct));var pr=le?le.evaluate(Jt,{},X):void 0;ye.push({id:Tt,properties:ct.properties,type:ct.type,sourceLayerIndex:It,index:Lt,geometry:Jt.geometry,patterns:{},sortKey:pr})}}le&&ye.sort(function(Ln,$n){return Ln.sortKey-$n.sortKey});for(var dr=0,zr=ye;dr<zr.length;dr+=1){var Ar=zr[dr],Xr=Ar.geometry,rn=Ar.index,mn=Ar.sourceLayerIndex;if(this.hasPattern){var gn=qf("line",this.layers,Ar,this.zoom,F);this.patternFeatures.push(gn)}else this.addFeature(Ar,Xr,rn,X,{});F.featureIndex.insert(_[rn].feature,Xr,rn,mn,this.index)}},Wo.prototype.update=function(_,F,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(_,F,this.stateDependentLayers,X)},Wo.prototype.addFeatures=function(_,F,X){for(var le=0,ye=this.patternFeatures;le<ye.length;le+=1){var we=ye[le];this.addFeature(we,we.geometry,we.index,F,X)}},Wo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Wo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wo.prototype.upload=function(_){this.uploaded||(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,mp),this.indexBuffer=_.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(_),this.uploaded=!0},Wo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wo.prototype.addFeature=function(_,F,X,le,ye){for(var we=this.layers[0].layout,Pe=we.get("line-join").evaluate(_,{}),Xe=we.get("line-cap"),ct=we.get("line-miter-limit"),Tt=we.get("line-round-limit"),Lt=0,It=F;Lt<It.length;Lt+=1)this.addLine(It[Lt],_,Pe,Xe,ct,Tt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,_,X,ye,le)},Wo.prototype.addLine=function(_,F,X,le,ye,we){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,F.properties&&F.properties.hasOwnProperty("mapbox_clip_start")&&F.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+F.properties.mapbox_clip_start,this.clipEnd=+F.properties.mapbox_clip_end;for(var Pe=0;Pe<_.length-1;Pe++)this.totalDistance+=_[Pe].dist(_[Pe+1]);this.updateScaledDistance()}for(var Xe=Ih[F.type]==="Polygon",ct=_.length;ct>=2&&_[ct-1].equals(_[ct-2]);)ct--;for(var Tt=0;Tt<ct-1&&_[Tt].equals(_[Tt+1]);)Tt++;if(!(ct<(Xe?3:2))){X==="bevel"&&(ye=1.05);var Lt,It=this.overscaling<=16?122880/(512*this.overscaling):0,Gt=this.segments.prepareSegment(10*ct,this.layoutVertexArray,this.indexArray),Jt=void 0,pr=void 0,dr=void 0,zr=void 0;this.e1=this.e2=-1,Xe&&(zr=_[Tt].sub(Lt=_[ct-2])._unit()._perp());for(var Ar=Tt;Ar<ct;Ar++)if(!(pr=Ar===ct-1?Xe?_[Tt+1]:void 0:_[Ar+1])||!_[Ar].equals(pr)){zr&&(dr=zr),Lt&&(Jt=Lt),Lt=_[Ar],zr=pr?pr.sub(Lt)._unit()._perp():dr;var Xr=(dr=dr||zr).add(zr);Xr.x===0&&Xr.y===0||Xr._unit();var rn=dr.x*zr.x+dr.y*zr.y,mn=Xr.x*zr.x+Xr.y*zr.y,gn=mn!==0?1/mn:1/0,Ln=2*Math.sqrt(2-2*mn),$n=mn<sd&&Jt&&pr,oa=dr.x*zr.y-dr.y*zr.x>0;if($n&&Ar>Tt){var _a=Lt.dist(Jt);if(_a>2*It){var fa=Lt.sub(Lt.sub(Jt)._mult(It/_a)._round());this.updateDistance(Jt,fa),this.addCurrentVertex(fa,dr,0,0,Gt),Jt=fa}}var Aa=Jt&&pr,ca=Aa?X:Xe?"butt":le;if(Aa&&ca==="round"&&(gn<we?ca="miter":gn<=2&&(ca="fakeround")),ca==="miter"&&gn>ye&&(ca="bevel"),ca==="bevel"&&(gn>2&&(ca="flipbevel"),gn<ye&&(ca="miter")),Jt&&this.updateDistance(Jt,Lt),ca==="miter")Xr._mult(gn),this.addCurrentVertex(Lt,Xr,0,0,Gt);else if(ca==="flipbevel"){if(gn>100)Xr=zr.mult(-1);else{var Xa=gn*dr.add(zr).mag()/dr.sub(zr).mag();Xr._perp()._mult(Xa*(oa?-1:1))}this.addCurrentVertex(Lt,Xr,0,0,Gt),this.addCurrentVertex(Lt,Xr.mult(-1),0,0,Gt)}else if(ca==="bevel"||ca==="fakeround"){var Oa=-Math.sqrt(gn*gn-1),da=oa?Oa:0,ii=oa?0:Oa;if(Jt&&this.addCurrentVertex(Lt,dr,da,ii,Gt),ca==="fakeround")for(var ja=Math.round(180*Ln/Math.PI/20),pi=1;pi<ja;pi++){var wa=pi/ja;if(wa!==.5){var yi=wa-.5;wa+=wa*yi*(wa-1)*((1.0904+rn*(rn*(3.55645-1.43519*rn)-3.2452))*yi*yi+(.848013+rn*(.215638*rn-1.06021)))}var Ui=zr.sub(dr)._mult(wa)._add(dr)._unit()._mult(oa?-1:1);this.addHalfVertex(Lt,Ui.x,Ui.y,!1,oa,0,Gt)}pr&&this.addCurrentVertex(Lt,zr,-da,-ii,Gt)}else if(ca==="butt")this.addCurrentVertex(Lt,Xr,0,0,Gt);else if(ca==="square"){var Ko=Jt?1:-1;this.addCurrentVertex(Lt,Xr,Ko,Ko,Gt)}else ca==="round"&&(Jt&&(this.addCurrentVertex(Lt,dr,0,0,Gt),this.addCurrentVertex(Lt,dr,1,1,Gt,!0)),pr&&(this.addCurrentVertex(Lt,zr,-1,-1,Gt,!0),this.addCurrentVertex(Lt,zr,0,0,Gt)));if($n&&Ar<ct-1){var Jo=Lt.dist(pr);if(Jo>2*It){var Xi=Lt.add(pr.sub(Lt)._mult(It/Jo)._round());this.updateDistance(Lt,Xi),this.addCurrentVertex(Xi,zr,0,0,Gt),Lt=Xi}}}}},Wo.prototype.addCurrentVertex=function(_,F,X,le,ye,we){we===void 0&&(we=!1);var Pe=F.y*le-F.x,Xe=-F.y-F.x*le;this.addHalfVertex(_,F.x+F.y*X,F.y-F.x*X,we,!1,X,ye),this.addHalfVertex(_,Pe,Xe,we,!0,-le,ye),this.distance>gp/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(_,F,X,le,ye,we))},Wo.prototype.addHalfVertex=function(_,F,X,le,ye,we,Pe){var Xe=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((_.x<<1)+(le?1:0),(_.y<<1)+(ye?1:0),Math.round(63*F)+128,Math.round(63*X)+128,1+(we===0?0:we<0?-1:1)|(63&Xe)<<2,Xe>>6);var ct=Pe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ct),Pe.primitiveLength++),ye?this.e2=ct:this.e1=ct},Wo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(gp-1):this.distance},Wo.prototype.updateDistance=function(_,F){this.distance+=_.dist(F),this.updateScaledDistance()},ga("LineBucket",Wo,{omit:["layers","patternFeatures"]});var ld=new $i({"line-cap":new ma(Me.layout_line["line-cap"]),"line-join":new ka(Me.layout_line["line-join"]),"line-miter-limit":new ma(Me.layout_line["line-miter-limit"]),"line-round-limit":new ma(Me.layout_line["line-round-limit"]),"line-sort-key":new ka(Me.layout_line["line-sort-key"])}),Af={paint:new $i({"line-opacity":new ka(Me.paint_line["line-opacity"]),"line-color":new ka(Me.paint_line["line-color"]),"line-translate":new ma(Me.paint_line["line-translate"]),"line-translate-anchor":new ma(Me.paint_line["line-translate-anchor"]),"line-width":new ka(Me.paint_line["line-width"]),"line-gap-width":new ka(Me.paint_line["line-gap-width"]),"line-offset":new ka(Me.paint_line["line-offset"]),"line-blur":new ka(Me.paint_line["line-blur"]),"line-dasharray":new Hl(Me.paint_line["line-dasharray"]),"line-pattern":new Bi(Me.paint_line["line-pattern"]),"line-gradient":new wo(Me.paint_line["line-gradient"])}),layout:ld},ud=new(function(_){function F(){_.apply(this,arguments)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.possiblyEvaluate=function(X,le){return le=new Za(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),_.prototype.possiblyEvaluate.call(this,X,le)},F.prototype.evaluate=function(X,le,ye,we){return le=m({},le,{zoom:Math.floor(le.zoom)}),_.prototype.evaluate.call(this,X,le,ye,we)},F}(ka))(Af.paint.properties["line-width"].specification);ud.useIntegerZoom=!0;var cd=function(_){function F(X){_.call(this,X,Af)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="line-gradient"&&this._updateGradient()},F.prototype._updateGradient=function(){this.gradient=qv(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},F.prototype.recalculate=function(X,le){_.prototype.recalculate.call(this,X,le),this.paint._values["line-floorwidth"]=ud.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,X)},F.prototype.createBucket=function(X){return new Wo(X)},F.prototype.queryRadius=function(X){var le=X,ye=du(Ou("line-width",this,le),Ou("line-gap-width",this,le)),we=Ou("line-offset",this,le);return ye/2+Math.abs(we)+Qs(this.paint.get("line-translate"))},F.prototype.queryIntersectsFeature=function(X,le,ye,we,Pe,Xe,ct){var Tt=mo(X,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Xe.angle,ct),Lt=ct/2*du(this.paint.get("line-width").evaluate(le,ye),this.paint.get("line-gap-width").evaluate(le,ye)),It=this.paint.get("line-offset").evaluate(le,ye);return It&&(we=function(Gt,Jt){for(var pr=[],dr=new l(0,0),zr=0;zr<Gt.length;zr++){for(var Ar=Gt[zr],Xr=[],rn=0;rn<Ar.length;rn++){var mn=Ar[rn],gn=Ar[rn+1],Ln=rn===0?dr:mn.sub(Ar[rn-1])._unit()._perp(),$n=rn===Ar.length-1?dr:gn.sub(mn)._unit()._perp(),oa=Ln._add($n)._unit();oa._mult(1/(oa.x*$n.x+oa.y*$n.y)),Xr.push(oa._mult(Jt)._add(mn))}pr.push(Xr)}return pr}(we,It*ct)),function(Gt,Jt,pr){for(var dr=0;dr<Jt.length;dr++){var zr=Jt[dr];if(Gt.length>=3){for(var Ar=0;Ar<zr.length;Ar++)if(Ll(Gt,zr[Ar]))return!0}if(cs(Gt,zr,pr))return!0}return!1}(Tt,we,Lt)},F.prototype.isTileClipped=function(){return!0},F}(Go);function du(_,F){return F>0?F+2*_:_}var zh=Oi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fd=Oi([{name:"a_projected_pos",components:3,type:"Float32"}],4),yp=(Oi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Oi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),nh=(Oi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Oi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),hd=Oi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pv(_,F,X){return _.sections.forEach(function(le){le.text=function(ye,we,Pe){var Xe=we.layout.get("text-transform").evaluate(Pe,{});return Xe==="uppercase"?ye=ye.toLocaleUpperCase():Xe==="lowercase"&&(ye=ye.toLocaleLowerCase()),Co.applyArabicShaping&&(ye=Co.applyArabicShaping(ye)),ye}(le.text,F,X)}),_}Oi([{name:"triangle",components:3,type:"Uint16"}]),Oi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Oi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Oi([{type:"Float32",name:"offsetX"}]),Oi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var go={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Fh=function(_,F,X,le,ye){var we,Pe,Xe=8*ye-le-1,ct=(1<<Xe)-1,Tt=ct>>1,Lt=-7,It=X?ye-1:0,Gt=X?-1:1,Jt=_[F+It];for(It+=Gt,we=Jt&(1<<-Lt)-1,Jt>>=-Lt,Lt+=Xe;Lt>0;we=256*we+_[F+It],It+=Gt,Lt-=8);for(Pe=we&(1<<-Lt)-1,we>>=-Lt,Lt+=le;Lt>0;Pe=256*Pe+_[F+It],It+=Gt,Lt-=8);if(we===0)we=1-Tt;else{if(we===ct)return Pe?NaN:1/0*(Jt?-1:1);Pe+=Math.pow(2,le),we-=Tt}return(Jt?-1:1)*Pe*Math.pow(2,we-le)},xp=function(_,F,X,le,ye,we){var Pe,Xe,ct,Tt=8*we-ye-1,Lt=(1<<Tt)-1,It=Lt>>1,Gt=ye===23?Math.pow(2,-24)-Math.pow(2,-77):0,Jt=le?0:we-1,pr=le?1:-1,dr=F<0||F===0&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(Xe=isNaN(F)?1:0,Pe=Lt):(Pe=Math.floor(Math.log(F)/Math.LN2),F*(ct=Math.pow(2,-Pe))<1&&(Pe--,ct*=2),(F+=Pe+It>=1?Gt/ct:Gt*Math.pow(2,1-It))*ct>=2&&(Pe++,ct/=2),Pe+It>=Lt?(Xe=0,Pe=Lt):Pe+It>=1?(Xe=(F*ct-1)*Math.pow(2,ye),Pe+=It):(Xe=F*Math.pow(2,It-1)*Math.pow(2,ye),Pe=0));ye>=8;_[X+Jt]=255&Xe,Jt+=pr,Xe/=256,ye-=8);for(Pe=Pe<<ye|Xe,Tt+=ye;Tt>0;_[X+Jt]=255&Pe,Jt+=pr,Pe/=256,Tt-=8);_[X+Jt-pr]|=128*dr},Uc=bi;function bi(_){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(_)?_:new Uint8Array(_||0),this.pos=0,this.type=0,this.length=this.buf.length}bi.Varint=0,bi.Fixed64=1,bi.Bytes=2,bi.Fixed32=5;var Mf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Na(_){return _.type===bi.Bytes?_.readVarint()+_.pos:_.pos+1}function fc(_,F,X){return X?4294967296*F+(_>>>0):4294967296*(F>>>0)+(_>>>0)}function kf(_,F,X){var le=F<=16383?1:F<=2097151?2:F<=268435455?3:Math.floor(Math.log(F)/(7*Math.LN2));X.realloc(le);for(var ye=X.pos-1;ye>=_;ye--)X.buf[ye+le]=X.buf[ye]}function hc(_,F){for(var X=0;X<_.length;X++)F.writeVarint(_[X])}function pd(_,F){for(var X=0;X<_.length;X++)F.writeSVarint(_[X])}function vv(_,F){for(var X=0;X<_.length;X++)F.writeFloat(_[X])}function vd(_,F){for(var X=0;X<_.length;X++)F.writeDouble(_[X])}function zs(_,F){for(var X=0;X<_.length;X++)F.writeBoolean(_[X])}function Wl(_,F){for(var X=0;X<_.length;X++)F.writeFixed32(_[X])}function dd(_,F){for(var X=0;X<_.length;X++)F.writeSFixed32(_[X])}function dv(_,F){for(var X=0;X<_.length;X++)F.writeFixed64(_[X])}function Vc(_,F){for(var X=0;X<_.length;X++)F.writeSFixed64(_[X])}function Sf(_,F){return(_[F]|_[F+1]<<8|_[F+2]<<16)+16777216*_[F+3]}function Hc(_,F,X){_[X]=F,_[X+1]=F>>>8,_[X+2]=F>>>16,_[X+3]=F>>>24}function md(_,F){return(_[F]|_[F+1]<<8|_[F+2]<<16)+(_[F+3]<<24)}function T0(_,F,X){_===1&&X.readMessage(pc,F)}function pc(_,F,X){if(_===3){var le=X.readMessage(Fs,{}),ye=le.width,we=le.height,Pe=le.left,Xe=le.top,ct=le.advance;F.push({id:le.id,bitmap:new el({width:ye+6,height:we+6},le.bitmap),metrics:{width:ye,height:we,left:Pe,top:Xe,advance:ct}})}}function Fs(_,F,X){_===1?F.id=X.readVarint():_===2?F.bitmap=X.readBytes():_===3?F.width=X.readVarint():_===4?F.height=X.readVarint():_===5?F.left=X.readSVarint():_===6?F.top=X.readSVarint():_===7&&(F.advance=X.readVarint())}function Oh(_){for(var F=0,X=0,le=0,ye=_;le<ye.length;le+=1){var we=ye[le];F+=we.w*we.h,X=Math.max(X,we.w)}_.sort(function(dr,zr){return zr.h-dr.h});for(var Pe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(F/.95)),X),h:1/0}],Xe=0,ct=0,Tt=0,Lt=_;Tt<Lt.length;Tt+=1)for(var It=Lt[Tt],Gt=Pe.length-1;Gt>=0;Gt--){var Jt=Pe[Gt];if(!(It.w>Jt.w||It.h>Jt.h)){if(It.x=Jt.x,It.y=Jt.y,ct=Math.max(ct,It.y+It.h),Xe=Math.max(Xe,It.x+It.w),It.w===Jt.w&&It.h===Jt.h){var pr=Pe.pop();Gt<Pe.length&&(Pe[Gt]=pr)}else It.h===Jt.h?(Jt.x+=It.w,Jt.w-=It.w):It.w===Jt.w?(Jt.y+=It.h,Jt.h-=It.h):(Pe.push({x:Jt.x+It.w,y:Jt.y,w:Jt.w-It.w,h:It.h}),Jt.y+=It.h,Jt.h-=It.h);break}}return{w:Xe,h:ct,fill:F/(Xe*ct)||0}}bi.prototype={destroy:function(){this.buf=null},readFields:function(_,F,X){for(X=X||this.length;this.pos<X;){var le=this.readVarint(),ye=le>>3,we=this.pos;this.type=7&le,_(ye,F,this),this.pos===we&&this.skip(le)}return F},readMessage:function(_,F){return this.readFields(_,F,this.readVarint()+this.pos)},readFixed32:function(){var _=Sf(this.buf,this.pos);return this.pos+=4,_},readSFixed32:function(){var _=md(this.buf,this.pos);return this.pos+=4,_},readFixed64:function(){var _=Sf(this.buf,this.pos)+4294967296*Sf(this.buf,this.pos+4);return this.pos+=8,_},readSFixed64:function(){var _=Sf(this.buf,this.pos)+4294967296*md(this.buf,this.pos+4);return this.pos+=8,_},readFloat:function(){var _=Fh(this.buf,this.pos,!0,23,4);return this.pos+=4,_},readDouble:function(){var _=Fh(this.buf,this.pos,!0,52,8);return this.pos+=8,_},readVarint:function(_){var F,X,le=this.buf;return F=127&(X=le[this.pos++]),X<128?F:(F|=(127&(X=le[this.pos++]))<<7,X<128?F:(F|=(127&(X=le[this.pos++]))<<14,X<128?F:(F|=(127&(X=le[this.pos++]))<<21,X<128?F:function(ye,we,Pe){var Xe,ct,Tt=Pe.buf;if(Xe=(112&(ct=Tt[Pe.pos++]))>>4,ct<128||(Xe|=(127&(ct=Tt[Pe.pos++]))<<3,ct<128)||(Xe|=(127&(ct=Tt[Pe.pos++]))<<10,ct<128)||(Xe|=(127&(ct=Tt[Pe.pos++]))<<17,ct<128)||(Xe|=(127&(ct=Tt[Pe.pos++]))<<24,ct<128)||(Xe|=(1&(ct=Tt[Pe.pos++]))<<31,ct<128))return fc(ye,Xe,we);throw new Error("Expected varint not more than 10 bytes")}(F|=(15&(X=le[this.pos]))<<28,_,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var _=this.readVarint();return _%2==1?(_+1)/-2:_/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var _=this.readVarint()+this.pos,F=this.pos;return this.pos=_,_-F>=12&&Mf?function(X,le,ye){return Mf.decode(X.subarray(le,ye))}(this.buf,F,_):function(X,le,ye){for(var we="",Pe=le;Pe<ye;){var Xe,ct,Tt,Lt=X[Pe],It=null,Gt=Lt>239?4:Lt>223?3:Lt>191?2:1;if(Pe+Gt>ye)break;Gt===1?Lt<128&&(It=Lt):Gt===2?(192&(Xe=X[Pe+1]))==128&&(It=(31&Lt)<<6|63&Xe)<=127&&(It=null):Gt===3?(ct=X[Pe+2],(192&(Xe=X[Pe+1]))==128&&(192&ct)==128&&((It=(15&Lt)<<12|(63&Xe)<<6|63&ct)<=2047||It>=55296&&It<=57343)&&(It=null)):Gt===4&&(ct=X[Pe+2],Tt=X[Pe+3],(192&(Xe=X[Pe+1]))==128&&(192&ct)==128&&(192&Tt)==128&&((It=(15&Lt)<<18|(63&Xe)<<12|(63&ct)<<6|63&Tt)<=65535||It>=1114112)&&(It=null)),It===null?(It=65533,Gt=1):It>65535&&(It-=65536,we+=String.fromCharCode(It>>>10&1023|55296),It=56320|1023&It),we+=String.fromCharCode(It),Pe+=Gt}return we}(this.buf,F,_)},readBytes:function(){var _=this.readVarint()+this.pos,F=this.buf.subarray(this.pos,_);return this.pos=_,F},readPackedVarint:function(_,F){if(this.type!==bi.Bytes)return _.push(this.readVarint(F));var X=Na(this);for(_=_||[];this.pos<X;)_.push(this.readVarint(F));return _},readPackedSVarint:function(_){if(this.type!==bi.Bytes)return _.push(this.readSVarint());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readSVarint());return _},readPackedBoolean:function(_){if(this.type!==bi.Bytes)return _.push(this.readBoolean());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readBoolean());return _},readPackedFloat:function(_){if(this.type!==bi.Bytes)return _.push(this.readFloat());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readFloat());return _},readPackedDouble:function(_){if(this.type!==bi.Bytes)return _.push(this.readDouble());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readDouble());return _},readPackedFixed32:function(_){if(this.type!==bi.Bytes)return _.push(this.readFixed32());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readFixed32());return _},readPackedSFixed32:function(_){if(this.type!==bi.Bytes)return _.push(this.readSFixed32());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readSFixed32());return _},readPackedFixed64:function(_){if(this.type!==bi.Bytes)return _.push(this.readFixed64());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readFixed64());return _},readPackedSFixed64:function(_){if(this.type!==bi.Bytes)return _.push(this.readSFixed64());var F=Na(this);for(_=_||[];this.pos<F;)_.push(this.readSFixed64());return _},skip:function(_){var F=7&_;if(F===bi.Varint)for(;this.buf[this.pos++]>127;);else if(F===bi.Bytes)this.pos=this.readVarint()+this.pos;else if(F===bi.Fixed32)this.pos+=4;else{if(F!==bi.Fixed64)throw new Error("Unimplemented type: "+F);this.pos+=8}},writeTag:function(_,F){this.writeVarint(_<<3|F)},realloc:function(_){for(var F=this.length||16;F<this.pos+_;)F*=2;if(F!==this.length){var X=new Uint8Array(F);X.set(this.buf),this.buf=X,this.length=F}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(_){this.realloc(4),Hc(this.buf,_,this.pos),this.pos+=4},writeSFixed32:function(_){this.realloc(4),Hc(this.buf,_,this.pos),this.pos+=4},writeFixed64:function(_){this.realloc(8),Hc(this.buf,-1&_,this.pos),Hc(this.buf,Math.floor(_*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(_){this.realloc(8),Hc(this.buf,-1&_,this.pos),Hc(this.buf,Math.floor(_*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(_){(_=+_||0)>268435455||_<0?function(F,X){var le,ye;if(F>=0?(le=F%4294967296|0,ye=F/4294967296|0):(ye=~(-F/4294967296),4294967295^(le=~(-F%4294967296))?le=le+1|0:(le=0,ye=ye+1|0)),F>=18446744073709552e3||F<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");X.realloc(10),function(we,Pe,Xe){Xe.buf[Xe.pos++]=127&we|128,we>>>=7,Xe.buf[Xe.pos++]=127&we|128,we>>>=7,Xe.buf[Xe.pos++]=127&we|128,we>>>=7,Xe.buf[Xe.pos++]=127&we|128,Xe.buf[Xe.pos]=127&(we>>>=7)}(le,0,X),function(we,Pe){var Xe=(7&we)<<4;Pe.buf[Pe.pos++]|=Xe|((we>>>=3)?128:0),we&&(Pe.buf[Pe.pos++]=127&we|((we>>>=7)?128:0),we&&(Pe.buf[Pe.pos++]=127&we|((we>>>=7)?128:0),we&&(Pe.buf[Pe.pos++]=127&we|((we>>>=7)?128:0),we&&(Pe.buf[Pe.pos++]=127&we|((we>>>=7)?128:0),we&&(Pe.buf[Pe.pos++]=127&we)))))}(ye,X)}(_,this):(this.realloc(4),this.buf[this.pos++]=127&_|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=127&(_>>>=7)|(_>127?128:0),_<=127||(this.buf[this.pos++]=_>>>7&127))))},writeSVarint:function(_){this.writeVarint(_<0?2*-_-1:2*_)},writeBoolean:function(_){this.writeVarint(Boolean(_))},writeString:function(_){_=String(_),this.realloc(4*_.length),this.pos++;var F=this.pos;this.pos=function(le,ye,we){for(var Pe,Xe,ct=0;ct<ye.length;ct++){if((Pe=ye.charCodeAt(ct))>55295&&Pe<57344){if(!Xe){Pe>56319||ct+1===ye.length?(le[we++]=239,le[we++]=191,le[we++]=189):Xe=Pe;continue}if(Pe<56320){le[we++]=239,le[we++]=191,le[we++]=189,Xe=Pe;continue}Pe=Xe-55296<<10|Pe-56320|65536,Xe=null}else Xe&&(le[we++]=239,le[we++]=191,le[we++]=189,Xe=null);Pe<128?le[we++]=Pe:(Pe<2048?le[we++]=Pe>>6|192:(Pe<65536?le[we++]=Pe>>12|224:(le[we++]=Pe>>18|240,le[we++]=Pe>>12&63|128),le[we++]=Pe>>6&63|128),le[we++]=63&Pe|128)}return we}(this.buf,_,this.pos);var X=this.pos-F;X>=128&&kf(F,X,this),this.pos=F-1,this.writeVarint(X),this.pos+=X},writeFloat:function(_){this.realloc(4),xp(this.buf,_,this.pos,!0,23,4),this.pos+=4},writeDouble:function(_){this.realloc(8),xp(this.buf,_,this.pos,!0,52,8),this.pos+=8},writeBytes:function(_){var F=_.length;this.writeVarint(F),this.realloc(F);for(var X=0;X<F;X++)this.buf[this.pos++]=_[X]},writeRawMessage:function(_,F){this.pos++;var X=this.pos;_(F,this);var le=this.pos-X;le>=128&&kf(X,le,this),this.pos=X-1,this.writeVarint(le),this.pos+=le},writeMessage:function(_,F,X){this.writeTag(_,bi.Bytes),this.writeRawMessage(F,X)},writePackedVarint:function(_,F){F.length&&this.writeMessage(_,hc,F)},writePackedSVarint:function(_,F){F.length&&this.writeMessage(_,pd,F)},writePackedBoolean:function(_,F){F.length&&this.writeMessage(_,zs,F)},writePackedFloat:function(_,F){F.length&&this.writeMessage(_,vv,F)},writePackedDouble:function(_,F){F.length&&this.writeMessage(_,vd,F)},writePackedFixed32:function(_,F){F.length&&this.writeMessage(_,Wl,F)},writePackedSFixed32:function(_,F){F.length&&this.writeMessage(_,dd,F)},writePackedFixed64:function(_,F){F.length&&this.writeMessage(_,dv,F)},writePackedSFixed64:function(_,F){F.length&&this.writeMessage(_,Vc,F)},writeBytesField:function(_,F){this.writeTag(_,bi.Bytes),this.writeBytes(F)},writeFixed32Field:function(_,F){this.writeTag(_,bi.Fixed32),this.writeFixed32(F)},writeSFixed32Field:function(_,F){this.writeTag(_,bi.Fixed32),this.writeSFixed32(F)},writeFixed64Field:function(_,F){this.writeTag(_,bi.Fixed64),this.writeFixed64(F)},writeSFixed64Field:function(_,F){this.writeTag(_,bi.Fixed64),this.writeSFixed64(F)},writeVarintField:function(_,F){this.writeTag(_,bi.Varint),this.writeVarint(F)},writeSVarintField:function(_,F){this.writeTag(_,bi.Varint),this.writeSVarint(F)},writeStringField:function(_,F){this.writeTag(_,bi.Bytes),this.writeString(F)},writeFloatField:function(_,F){this.writeTag(_,bi.Fixed32),this.writeFloat(F)},writeDoubleField:function(_,F){this.writeTag(_,bi.Fixed64),this.writeDouble(F)},writeBooleanField:function(_,F){this.writeVarintField(_,Boolean(F))}};var bp=function(_,F){var X=F.pixelRatio,le=F.version,ye=F.stretchX,we=F.stretchY,Pe=F.content;this.paddedRect=_,this.pixelRatio=X,this.stretchX=ye,this.stretchY=we,this.content=Pe,this.version=le},Gc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Gc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Gc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Gc.tlbr.get=function(){return this.tl.concat(this.br)},Gc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(bp.prototype,Gc);var Nh=function(_,F){var X={},le={};this.haveRenderCallbacks=[];var ye=[];this.addImages(_,X,ye),this.addImages(F,le,ye);var we=Oh(ye),Pe=new ro({width:we.w||1,height:we.h||1});for(var Xe in _){var ct=_[Xe],Tt=X[Xe].paddedRect;ro.copy(ct.data,Pe,{x:0,y:0},{x:Tt.x+1,y:Tt.y+1},ct.data)}for(var Lt in F){var It=F[Lt],Gt=le[Lt].paddedRect,Jt=Gt.x+1,pr=Gt.y+1,dr=It.data.width,zr=It.data.height;ro.copy(It.data,Pe,{x:0,y:0},{x:Jt,y:pr},It.data),ro.copy(It.data,Pe,{x:0,y:zr-1},{x:Jt,y:pr-1},{width:dr,height:1}),ro.copy(It.data,Pe,{x:0,y:0},{x:Jt,y:pr+zr},{width:dr,height:1}),ro.copy(It.data,Pe,{x:dr-1,y:0},{x:Jt-1,y:pr},{width:1,height:zr}),ro.copy(It.data,Pe,{x:0,y:0},{x:Jt+dr,y:pr},{width:1,height:zr})}this.image=Pe,this.iconPositions=X,this.patternPositions=le};Nh.prototype.addImages=function(_,F,X){for(var le in _){var ye=_[le],we={x:0,y:0,w:ye.data.width+2,h:ye.data.height+2};X.push(we),F[le]=new bp(we,ye),ye.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},Nh.prototype.patchUpdatedImages=function(_,F){for(var X in _.dispatchRenderCallbacks(this.haveRenderCallbacks),_.updatedImages)this.patchUpdatedImage(this.iconPositions[X],_.getImage(X),F),this.patchUpdatedImage(this.patternPositions[X],_.getImage(X),F)},Nh.prototype.patchUpdatedImage=function(_,F,X){if(_&&F&&_.version!==F.version){_.version=F.version;var le=_.tl;X.update(F.data,void 0,{x:le[0],y:le[1]})}},ga("ImagePosition",bp),ga("ImageAtlas",Nh);var fl={horizontal:1,vertical:2,horizontalOnly:3},Vu=function(){this.scale=1,this.fontStack="",this.imageName=null};Vu.forText=function(_,F){var X=new Vu;return X.scale=_||1,X.fontStack=F,X},Vu.forImage=function(_){var F=new Vu;return F.imageName=_,F};var Yo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ah(_,F,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr){var zr,Ar=Yo.fromFeature(_,ye);It===fl.vertical&&Ar.verticalizePunctuation();var Xr=Co.processBidirectionalText,rn=Co.processStyledBidirectionalText;if(Xr&&Ar.sections.length===1){zr=[];for(var mn=0,gn=Xr(Ar.toString(),_p(Ar,Tt,we,F,le,Jt,pr));mn<gn.length;mn+=1){var Ln=gn[mn],$n=new Yo;$n.text=Ln,$n.sections=Ar.sections;for(var oa=0;oa<Ln.length;oa++)$n.sectionIndex.push(0);zr.push($n)}}else if(rn){zr=[];for(var _a=0,fa=rn(Ar.text,Ar.sectionIndex,_p(Ar,Tt,we,F,le,Jt,pr));_a<fa.length;_a+=1){var Aa=fa[_a],ca=new Yo;ca.text=Aa[0],ca.sectionIndex=Aa[1],ca.sections=Ar.sections,zr.push(ca)}}else zr=function(da,ii){for(var ja=[],pi=da.text,wa=0,yi=0,Ui=ii;yi<Ui.length;yi+=1){var Ko=Ui[yi];ja.push(da.substring(wa,Ko)),wa=Ko}return wa<pi.length&&ja.push(da.substring(wa,pi.length)),ja}(Ar,_p(Ar,Tt,we,F,le,Jt,pr));var Xa=[],Oa={positionedLines:Xa,text:Ar.toString(),top:Lt[1],bottom:Lt[1],left:Lt[0],right:Lt[0],writingMode:It,iconsInText:!1,verticalizable:!1};return function(da,ii,ja,pi,wa,yi,Ui,Ko,Jo,Xi,oo,zi){for(var Lo=0,Bs=-17,Po=0,Us=0,Ro=Ko==="right"?1:Ko==="left"?0:.5,Do=0,ci=0,Ri=wa;ci<Ri.length;ci+=1){var Zi=Ri[ci];Zi.trim();var vi=Zi.getMaxScale(),Mo=24*(vi-1),ws={positionedGlyphs:[],lineOffset:0};da.positionedLines[Do]=ws;var $o=ws.positionedGlyphs,ho=0;if(Zi.length()){for(var Qo=0;Qo<Zi.length();Qo++){var Ki=Zi.getSection(Qo),Ci=Zi.getSectionIndex(Qo),Yl=Zi.getCharCode(Qo),Zc=0,Vi=null,Ka=null,Hu=null,Ts=24,so=!(Jo===fl.horizontal||!oo&&!hf(Yl)||oo&&(Cf[Yl]||(Df=Yl,ea.Arabic(Df)||ea["Arabic Supplement"](Df)||ea["Arabic Extended-A"](Df)||ea["Arabic Presentation Forms-A"](Df)||ea["Arabic Presentation Forms-B"](Df))));if(Ki.imageName){var Mp=pi[Ki.imageName];if(!Mp)continue;Hu=Ki.imageName,da.iconsInText=da.iconsInText||!0,Ka=Mp.paddedRect;var pl=Mp.displaySize;Ki.scale=24*Ki.scale/zi,Zc=Mo+(24-pl[1]*Ki.scale),Ts=(Vi={width:pl[0],height:pl[1],left:1,top:-3,advance:so?pl[1]:pl[0]}).advance;var kp=so?pl[0]*Ki.scale-24*vi:pl[1]*Ki.scale-24*vi;kp>0&&kp>ho&&(ho=kp)}else{var Td=ja[Ki.fontStack],Sp=Td&&Td[Yl];if(Sp&&Sp.rect)Ka=Sp.rect,Vi=Sp.metrics;else{var bv=ii[Ki.fontStack],Ad=bv&&bv[Yl];if(!Ad)continue;Vi=Ad.metrics}Zc=24*(vi-Ki.scale)}so?(da.verticalizable=!0,$o.push({glyph:Yl,imageName:Hu,x:Lo,y:Bs+Zc,vertical:so,scale:Ki.scale,fontStack:Ki.fontStack,sectionIndex:Ci,metrics:Vi,rect:Ka}),Lo+=Ts*Ki.scale+Xi):($o.push({glyph:Yl,imageName:Hu,x:Lo,y:Bs+Zc,vertical:so,scale:Ki.scale,fontStack:Ki.fontStack,sectionIndex:Ci,metrics:Vi,rect:Ka}),Lo+=Vi.advance*Ki.scale+Xi)}$o.length!==0&&(Po=Math.max(Lo-Xi,Po),Uh($o,0,$o.length-1,Ro,ho)),Lo=0;var Cp=yi*vi+ho;ws.lineOffset=Math.max(ho,Mo),Bs+=Cp,Us=Math.max(Cp,Us),++Do}else Bs+=yi,++Do}var Df,xu=Bs- -17,Hh=mu(Ui),vc=Hh.horizontalAlign,no=Hh.verticalAlign;(function(xo,_v,wv,Tv,Md,Av,Mv,kv,Sv){var Kc,Ep=(_v-wv)*Md;Kc=Av!==Mv?-kv*Tv- -17:(-Tv*Sv+.5)*Mv;for(var Lp=0,Pp=xo;Lp<Pp.length;Lp+=1)for(var Jc=0,nl=Pp[Lp].positionedGlyphs;Jc<nl.length;Jc+=1){var dc=nl[Jc];dc.x+=Ep,dc.y+=Kc}})(da.positionedLines,Ro,vc,no,Po,Us,yi,xu,wa.length),da.top+=-no*xu,da.bottom=da.top+xu,da.left+=-vc*Po,da.right=da.left+Po}(Oa,F,X,le,zr,Pe,Xe,ct,It,Tt,Gt,dr),!function(da){for(var ii=0,ja=da;ii<ja.length;ii+=1)if(ja[ii].positionedGlyphs.length!==0)return!1;return!0}(Xa)&&Oa}Yo.fromFeature=function(_,F){for(var X=new Yo,le=0;le<_.sections.length;le++){var ye=_.sections[le];ye.image?X.addImageSection(ye):X.addTextSection(ye,F)}return X},Yo.prototype.length=function(){return this.text.length},Yo.prototype.getSection=function(_){return this.sections[this.sectionIndex[_]]},Yo.prototype.getSectionIndex=function(_){return this.sectionIndex[_]},Yo.prototype.getCharCode=function(_){return this.text.charCodeAt(_)},Yo.prototype.verticalizePunctuation=function(){this.text=function(_){for(var F="",X=0;X<_.length;X++){var le=_.charCodeAt(X+1)||null,ye=_.charCodeAt(X-1)||null;F+=le&&Sl(le)&&!go[_[X+1]]||ye&&Sl(ye)&&!go[_[X-1]]||!go[_[X]]?_[X]:go[_[X]]}return F}(this.text)},Yo.prototype.trim=function(){for(var _=0,F=0;F<this.text.length&&Cf[this.text.charCodeAt(F)];F++)_++;for(var X=this.text.length,le=this.text.length-1;le>=0&&le>=_&&Cf[this.text.charCodeAt(le)];le--)X--;this.text=this.text.substring(_,X),this.sectionIndex=this.sectionIndex.slice(_,X)},Yo.prototype.substring=function(_,F){var X=new Yo;return X.text=this.text.substring(_,F),X.sectionIndex=this.sectionIndex.slice(_,F),X.sections=this.sections,X},Yo.prototype.toString=function(){return this.text},Yo.prototype.getMaxScale=function(){var _=this;return this.sectionIndex.reduce(function(F,X){return Math.max(F,_.sections[X].scale)},0)},Yo.prototype.addTextSection=function(_,F){this.text+=_.text,this.sections.push(Vu.forText(_.scale,_.fontStack||F));for(var X=this.sections.length-1,le=0;le<_.text.length;++le)this.sectionIndex.push(X)},Yo.prototype.addImageSection=function(_){var F=_.image?_.image.name:"";if(F.length!==0){var X=this.getNextImageSectionCharCode();X?(this.text+=String.fromCharCode(X),this.sections.push(Vu.forImage(F)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}else C("Can't add FormattedSection with an empty image.")},Yo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Cf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Os={};function Bh(_,F,X,le,ye,we){if(F.imageName){var Pe=le[F.imageName];return Pe?Pe.displaySize[0]*F.scale*24/we+ye:0}var Xe=X[F.fontStack],ct=Xe&&Xe[_];return ct?ct.metrics.advance*F.scale+ye:0}function mv(_,F,X,le){var ye=Math.pow(_-F,2);return le?_<F?ye/2:2*ye:ye+Math.abs(X)*X}function ih(_,F,X){var le=0;return _===10&&(le-=1e4),X&&(le+=150),_!==40&&_!==65288||(le+=50),F!==41&&F!==65289||(le+=50),le}function yo(_,F,X,le,ye,we){for(var Pe=null,Xe=mv(F,X,ye,we),ct=0,Tt=le;ct<Tt.length;ct+=1){var Lt=Tt[ct],It=mv(F-Lt.x,X,ye,we)+Lt.badness;It<=Xe&&(Pe=Lt,Xe=It)}return{index:_,x:F,priorBreak:Pe,badness:Xe}}function _p(_,F,X,le,ye,we,Pe){if(we!=="point")return[];if(!_)return[];for(var Xe,ct=[],Tt=function(zr,Ar,Xr,rn,mn,gn){for(var Ln=0,$n=0;$n<zr.length();$n++){var oa=zr.getSection($n);Ln+=Bh(zr.getCharCode($n),oa,rn,mn,Ar,gn)}return Ln/Math.max(1,Math.ceil(Ln/Xr))}(_,F,X,le,ye,Pe),Lt=_.text.indexOf("\u200B")>=0,It=0,Gt=0;Gt<_.length();Gt++){var Jt=_.getSection(Gt),pr=_.getCharCode(Gt);if(Cf[pr]||(It+=Bh(pr,Jt,le,ye,F,Pe)),Gt<_.length()-1){var dr=!((Xe=pr)<11904||!(ea["Bopomofo Extended"](Xe)||ea.Bopomofo(Xe)||ea["CJK Compatibility Forms"](Xe)||ea["CJK Compatibility Ideographs"](Xe)||ea["CJK Compatibility"](Xe)||ea["CJK Radicals Supplement"](Xe)||ea["CJK Strokes"](Xe)||ea["CJK Symbols and Punctuation"](Xe)||ea["CJK Unified Ideographs Extension A"](Xe)||ea["CJK Unified Ideographs"](Xe)||ea["Enclosed CJK Letters and Months"](Xe)||ea["Halfwidth and Fullwidth Forms"](Xe)||ea.Hiragana(Xe)||ea["Ideographic Description Characters"](Xe)||ea["Kangxi Radicals"](Xe)||ea["Katakana Phonetic Extensions"](Xe)||ea.Katakana(Xe)||ea["Vertical Forms"](Xe)||ea["Yi Radicals"](Xe)||ea["Yi Syllables"](Xe)));(Os[pr]||dr||Jt.imageName)&&ct.push(yo(Gt+1,It,Tt,ct,ih(pr,_.getCharCode(Gt+1),dr&&Lt),!1))}}return function zr(Ar){return Ar?zr(Ar.priorBreak).concat(Ar.index):[]}(yo(_.length(),It,Tt,ct,0,!0))}function mu(_){var F=.5,X=.5;switch(_){case"right":case"top-right":case"bottom-right":F=1;break;case"left":case"top-left":case"bottom-left":F=0}switch(_){case"bottom":case"bottom-right":case"bottom-left":X=1;break;case"top":case"top-right":case"top-left":X=0}return{horizontalAlign:F,verticalAlign:X}}function Uh(_,F,X,le,ye){if(le||ye)for(var we=_[X],Pe=(_[X].x+we.metrics.advance*we.scale)*le,Xe=F;Xe<=X;Xe++)_[Xe].x-=Pe,_[Xe].y+=ye}function jc(_,F,X,le,ye,we){var Pe,Xe=_.image;if(Xe.content){var ct=Xe.content,Tt=Xe.pixelRatio||1;Pe=[ct[0]/Tt,ct[1]/Tt,Xe.displaySize[0]-ct[2]/Tt,Xe.displaySize[1]-ct[3]/Tt]}var Lt,It,Gt,Jt,pr=F.left*we,dr=F.right*we;X==="width"||X==="both"?(Jt=ye[0]+pr-le[3],It=ye[0]+dr+le[1]):It=(Jt=ye[0]+(pr+dr-Xe.displaySize[0])/2)+Xe.displaySize[0];var zr=F.top*we,Ar=F.bottom*we;return X==="height"||X==="both"?(Lt=ye[1]+zr-le[0],Gt=ye[1]+Ar+le[2]):Gt=(Lt=ye[1]+(zr+Ar-Xe.displaySize[1])/2)+Xe.displaySize[1],{image:Xe,top:Lt,right:It,bottom:Gt,left:Jt,collisionPadding:Pe}}Os[10]=!0,Os[32]=!0,Os[38]=!0,Os[40]=!0,Os[41]=!0,Os[43]=!0,Os[45]=!0,Os[47]=!0,Os[173]=!0,Os[183]=!0,Os[8203]=!0,Os[8208]=!0,Os[8211]=!0,Os[8231]=!0;var Wc=function(_){function F(X,le,ye,we){_.call(this,X,le),this.angle=ye,we!==void 0&&(this.segment=we)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.clone=function(){return new F(this.x,this.y,this.angle,this.segment)},F}(l);function oh(_,F){var X=F.expression;if(X.kind==="constant")return{kind:"constant",layoutSize:X.evaluate(new Za(_+1))};if(X.kind==="source")return{kind:"source"};for(var le=X.zoomStops,ye=X.interpolationType,we=0;we<le.length&&le[we]<=_;)we++;for(var Pe=we=Math.max(0,we-1);Pe<le.length&&le[Pe]<_+1;)Pe++;Pe=Math.min(le.length-1,Pe);var Xe=le[we],ct=le[Pe];return X.kind==="composite"?{kind:"composite",minZoom:Xe,maxZoom:ct,interpolationType:ye}:{kind:"camera",minZoom:Xe,maxZoom:ct,minSize:X.evaluate(new Za(Xe)),maxSize:X.evaluate(new Za(ct)),interpolationType:ye}}function sh(_,F,X){var le=F.uSize,ye=X.lowerSize;return _.kind==="source"?ye/128:_.kind==="composite"?Ir(ye/128,X.upperSize/128,F.uSizeT):le}function lh(_,F){var X=0,le=0;if(_.kind==="constant")le=_.layoutSize;else if(_.kind!=="source"){var ye=_.interpolationType,we=ye?p(Ga.interpolationFactor(ye,F,_.minZoom,_.maxZoom),0,1):0;_.kind==="camera"?le=Ir(_.minSize,_.maxSize,we):X=we}return{uSizeT:X,uSize:le}}ga("Anchor",Wc);var gd=Object.freeze({__proto__:null,getSizeData:oh,evaluateSizeForFeature:sh,evaluateSizeForZoom:lh,SIZE_PACK_FACTOR:128});function gu(_,F,X,le,ye){if(F.segment===void 0)return!0;for(var we=F,Pe=F.segment+1,Xe=0;Xe>-X/2;){if(--Pe<0)return!1;Xe-=_[Pe].dist(we),we=_[Pe]}Xe+=_[Pe].dist(_[Pe+1]),Pe++;for(var ct=[],Tt=0;Xe<X/2;){var Lt=_[Pe],It=_[Pe+1];if(!It)return!1;var Gt=_[Pe-1].angleTo(Lt)-Lt.angleTo(It);for(Gt=Math.abs((Gt+3*Math.PI)%(2*Math.PI)-Math.PI),ct.push({distance:Xe,angleDelta:Gt}),Tt+=Gt;Xe-ct[0].distance>le;)Tt-=ct.shift().angleDelta;if(Tt>ye)return!1;Pe++,Xe+=Lt.dist(It)}return!0}function Yc(_){for(var F=0,X=0;X<_.length-1;X++)F+=_[X].dist(_[X+1]);return F}function yd(_,F,X){return _?.6*F*X:0}function Vh(_,F){return Math.max(_?_.right-_.left:0,F?F.right-F.left:0)}function gv(_,F,X,le,ye,we){for(var Pe=yd(X,ye,we),Xe=Vh(X,le)*we,ct=0,Tt=Yc(_)/2,Lt=0;Lt<_.length-1;Lt++){var It=_[Lt],Gt=_[Lt+1],Jt=It.dist(Gt);if(ct+Jt>Tt){var pr=(Tt-ct)/Jt,dr=Ir(It.x,Gt.x,pr),zr=Ir(It.y,Gt.y,pr),Ar=new Wc(dr,zr,Gt.angleTo(It),Lt);return Ar._round(),!Pe||gu(_,Ar,Xe,Pe,F)?Ar:void 0}ct+=Jt}}function xd(_,F,X,le,ye,we,Pe,Xe,ct){var Tt=yd(le,we,Pe),Lt=Vh(le,ye),It=Lt*Pe,Gt=_[0].x===0||_[0].x===ct||_[0].y===0||_[0].y===ct;return F-It<F/4&&(F=It+F/4),function Jt(pr,dr,zr,Ar,Xr,rn,mn,gn,Ln){for(var $n=rn/2,oa=Yc(pr),_a=0,fa=dr-zr,Aa=[],ca=0;ca<pr.length-1;ca++){for(var Xa=pr[ca],Oa=pr[ca+1],da=Xa.dist(Oa),ii=Oa.angleTo(Xa);fa+zr<_a+da;){var ja=((fa+=zr)-_a)/da,pi=Ir(Xa.x,Oa.x,ja),wa=Ir(Xa.y,Oa.y,ja);if(pi>=0&&pi<Ln&&wa>=0&&wa<Ln&&fa-$n>=0&&fa+$n<=oa){var yi=new Wc(pi,wa,ii,ca);yi._round(),Ar&&!gu(pr,yi,rn,Ar,Xr)||Aa.push(yi)}}_a+=da}return gn||Aa.length||mn||(Aa=Jt(pr,_a/2,zr,Ar,Xr,rn,mn,!0,Ln)),Aa}(_,Gt?F/2*Xe%F:(Lt/2+2*we)*Pe*Xe%F,F,Tt,X,It,Gt,!1,ct)}function yv(_,F,X,le,ye){for(var we=[],Pe=0;Pe<_.length;Pe++)for(var Xe=_[Pe],ct=void 0,Tt=0;Tt<Xe.length-1;Tt++){var Lt=Xe[Tt],It=Xe[Tt+1];Lt.x<F&&It.x<F||(Lt.x<F?Lt=new l(F,Lt.y+(F-Lt.x)/(It.x-Lt.x)*(It.y-Lt.y))._round():It.x<F&&(It=new l(F,Lt.y+(F-Lt.x)/(It.x-Lt.x)*(It.y-Lt.y))._round()),Lt.y<X&&It.y<X||(Lt.y<X?Lt=new l(Lt.x+(X-Lt.y)/(It.y-Lt.y)*(It.x-Lt.x),X)._round():It.y<X&&(It=new l(Lt.x+(X-Lt.y)/(It.y-Lt.y)*(It.x-Lt.x),X)._round()),Lt.x>=le&&It.x>=le||(Lt.x>=le?Lt=new l(le,Lt.y+(le-Lt.x)/(It.x-Lt.x)*(It.y-Lt.y))._round():It.x>=le&&(It=new l(le,Lt.y+(le-Lt.x)/(It.x-Lt.x)*(It.y-Lt.y))._round()),Lt.y>=ye&&It.y>=ye||(Lt.y>=ye?Lt=new l(Lt.x+(ye-Lt.y)/(It.y-Lt.y)*(It.x-Lt.x),ye)._round():It.y>=ye&&(It=new l(Lt.x+(ye-Lt.y)/(It.y-Lt.y)*(It.x-Lt.x),ye)._round()),ct&&Lt.equals(ct[ct.length-1])||we.push(ct=[Lt]),ct.push(It)))))}return we}function wp(_,F,X,le){var ye=[],we=_.image,Pe=we.pixelRatio,Xe=we.paddedRect.w-2,ct=we.paddedRect.h-2,Tt=_.right-_.left,Lt=_.bottom-_.top,It=we.stretchX||[[0,Xe]],Gt=we.stretchY||[[0,ct]],Jt=function(pi,wa){return pi+wa[1]-wa[0]},pr=It.reduce(Jt,0),dr=Gt.reduce(Jt,0),zr=Xe-pr,Ar=ct-dr,Xr=0,rn=pr,mn=0,gn=dr,Ln=0,$n=zr,oa=0,_a=Ar;if(we.content&&le){var fa=we.content;Xr=uh(It,0,fa[0]),mn=uh(Gt,0,fa[1]),rn=uh(It,fa[0],fa[2]),gn=uh(Gt,fa[1],fa[3]),Ln=fa[0]-Xr,oa=fa[1]-mn,$n=fa[2]-fa[0]-rn,_a=fa[3]-fa[1]-gn}var Aa=function(pi,wa,yi,Ui){var Ko=Ef(pi.stretch-Xr,rn,Tt,_.left),Jo=ch(pi.fixed-Ln,$n,pi.stretch,pr),Xi=Ef(wa.stretch-mn,gn,Lt,_.top),oo=ch(wa.fixed-oa,_a,wa.stretch,dr),zi=Ef(yi.stretch-Xr,rn,Tt,_.left),Lo=ch(yi.fixed-Ln,$n,yi.stretch,pr),Bs=Ef(Ui.stretch-mn,gn,Lt,_.top),Po=ch(Ui.fixed-oa,_a,Ui.stretch,dr),Us=new l(Ko,Xi),Ro=new l(zi,Xi),Do=new l(zi,Bs),ci=new l(Ko,Bs),Ri=new l(Jo/Pe,oo/Pe),Zi=new l(Lo/Pe,Po/Pe),vi=F*Math.PI/180;if(vi){var Mo=Math.sin(vi),ws=Math.cos(vi),$o=[ws,-Mo,Mo,ws];Us._matMult($o),Ro._matMult($o),ci._matMult($o),Do._matMult($o)}var ho=pi.stretch+pi.fixed,Qo=wa.stretch+wa.fixed;return{tl:Us,tr:Ro,bl:ci,br:Do,tex:{x:we.paddedRect.x+1+ho,y:we.paddedRect.y+1+Qo,w:yi.stretch+yi.fixed-ho,h:Ui.stretch+Ui.fixed-Qo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ri,pixelOffsetBR:Zi,minFontScaleX:$n/Pe/Tt,minFontScaleY:_a/Pe/Lt,isSDF:X}};if(le&&(we.stretchX||we.stretchY))for(var ca=Xc(It,zr,pr),Xa=Xc(Gt,Ar,dr),Oa=0;Oa<ca.length-1;Oa++)for(var da=ca[Oa],ii=ca[Oa+1],ja=0;ja<Xa.length-1;ja++)ye.push(Aa(da,Xa[ja],ii,Xa[ja+1]));else ye.push(Aa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Xe+1},{fixed:0,stretch:ct+1}));return ye}function uh(_,F,X){for(var le=0,ye=0,we=_;ye<we.length;ye+=1){var Pe=we[ye];le+=Math.max(F,Math.min(X,Pe[1]))-Math.max(F,Math.min(X,Pe[0]))}return le}function Xc(_,F,X){for(var le=[{fixed:-1,stretch:0}],ye=0,we=_;ye<we.length;ye+=1){var Pe=we[ye],Xe=Pe[0],ct=Pe[1],Tt=le[le.length-1];le.push({fixed:Xe-Tt.stretch,stretch:Tt.stretch}),le.push({fixed:Xe-Tt.stretch,stretch:Tt.stretch+(ct-Xe)})}return le.push({fixed:F+1,stretch:X}),le}function Ef(_,F,X,le){return _/F*X+le}function ch(_,F,X,le){return _-F*X/le}var Tp=function(_,F,X,le,ye,we,Pe,Xe,ct,Tt){if(this.boxStartIndex=_.length,ct){var Lt=we.top,It=we.bottom,Gt=we.collisionPadding;Gt&&(Lt-=Gt[1],It+=Gt[3]);var Jt=It-Lt;Jt>0&&(Jt=Math.max(10,Jt),this.circleDiameter=Jt)}else{var pr=we.top*Pe-Xe,dr=we.bottom*Pe+Xe,zr=we.left*Pe-Xe,Ar=we.right*Pe+Xe,Xr=we.collisionPadding;if(Xr&&(zr-=Xr[0]*Pe,pr-=Xr[1]*Pe,Ar+=Xr[2]*Pe,dr+=Xr[3]*Pe),Tt){var rn=new l(zr,pr),mn=new l(Ar,pr),gn=new l(zr,dr),Ln=new l(Ar,dr),$n=Tt*Math.PI/180;rn._rotate($n),mn._rotate($n),gn._rotate($n),Ln._rotate($n),zr=Math.min(rn.x,mn.x,gn.x,Ln.x),Ar=Math.max(rn.x,mn.x,gn.x,Ln.x),pr=Math.min(rn.y,mn.y,gn.y,Ln.y),dr=Math.max(rn.y,mn.y,gn.y,Ln.y)}_.emplaceBack(F.x,F.y,zr,pr,Ar,dr,X,le,ye)}this.boxEndIndex=_.length},fh=function(_,F){if(_===void 0&&(_=[]),F===void 0&&(F=bd),this.data=_,this.length=this.data.length,this.compare=F,this.length>0)for(var X=(this.length>>1)-1;X>=0;X--)this._down(X)};function bd(_,F){return _<F?-1:_>F?1:0}function _d(_,F,X){F===void 0&&(F=1),X===void 0&&(X=!1);for(var le=1/0,ye=1/0,we=-1/0,Pe=-1/0,Xe=_[0],ct=0;ct<Xe.length;ct++){var Tt=Xe[ct];(!ct||Tt.x<le)&&(le=Tt.x),(!ct||Tt.y<ye)&&(ye=Tt.y),(!ct||Tt.x>we)&&(we=Tt.x),(!ct||Tt.y>Pe)&&(Pe=Tt.y)}var Lt=Math.min(we-le,Pe-ye),It=Lt/2,Gt=new fh([],wd);if(Lt===0)return new l(le,ye);for(var Jt=le;Jt<we;Jt+=Lt)for(var pr=ye;pr<Pe;pr+=Lt)Gt.push(new Lf(Jt+It,pr+It,It,_));for(var dr=function(Xr){for(var rn=0,mn=0,gn=0,Ln=Xr[0],$n=0,oa=Ln.length,_a=oa-1;$n<oa;_a=$n++){var fa=Ln[$n],Aa=Ln[_a],ca=fa.x*Aa.y-Aa.x*fa.y;mn+=(fa.x+Aa.x)*ca,gn+=(fa.y+Aa.y)*ca,rn+=3*ca}return new Lf(mn/rn,gn/rn,0,Xr)}(_),zr=Gt.length;Gt.length;){var Ar=Gt.pop();(Ar.d>dr.d||!dr.d)&&(dr=Ar,X&&console.log("found best %d after %d probes",Math.round(1e4*Ar.d)/1e4,zr)),Ar.max-dr.d<=F||(Gt.push(new Lf(Ar.p.x-(It=Ar.h/2),Ar.p.y-It,It,_)),Gt.push(new Lf(Ar.p.x+It,Ar.p.y-It,It,_)),Gt.push(new Lf(Ar.p.x-It,Ar.p.y+It,It,_)),Gt.push(new Lf(Ar.p.x+It,Ar.p.y+It,It,_)),zr+=4)}return X&&(console.log("num probes: "+zr),console.log("best distance: "+dr.d)),dr.p}function wd(_,F){return F.max-_.max}function Lf(_,F,X,le){this.p=new l(_,F),this.h=X,this.d=function(ye,we){for(var Pe=!1,Xe=1/0,ct=0;ct<we.length;ct++)for(var Tt=we[ct],Lt=0,It=Tt.length,Gt=It-1;Lt<It;Gt=Lt++){var Jt=Tt[Lt],pr=Tt[Gt];Jt.y>ye.y!=pr.y>ye.y&&ye.x<(pr.x-Jt.x)*(ye.y-Jt.y)/(pr.y-Jt.y)+Jt.x&&(Pe=!Pe),Xe=Math.min(Xe,Fu(ye,Jt,pr))}return(Pe?1:-1)*Math.sqrt(Xe)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}fh.prototype.push=function(_){this.data.push(_),this.length++,this._up(this.length-1)},fh.prototype.pop=function(){if(this.length!==0){var _=this.data[0],F=this.data.pop();return this.length--,this.length>0&&(this.data[0]=F,this._down(0)),_}},fh.prototype.peek=function(){return this.data[0]},fh.prototype._up=function(_){for(var F=this.data,X=this.compare,le=F[_];_>0;){var ye=_-1>>1,we=F[ye];if(X(le,we)>=0)break;F[_]=we,_=ye}F[_]=le},fh.prototype._down=function(_){for(var F=this.data,X=this.compare,le=this.length>>1,ye=F[_];_<le;){var we=1+(_<<1),Pe=F[we],Xe=we+1;if(Xe<this.length&&X(F[Xe],Pe)<0&&(we=Xe,Pe=F[Xe]),X(Pe,ye)>=0)break;F[_]=Pe,_=we}F[_]=ye};var W=Number.POSITIVE_INFINITY;function ue(_,F){return F[1]!==W?function(X,le,ye){var we=0,Pe=0;switch(le=Math.abs(le),ye=Math.abs(ye),X){case"top-right":case"top-left":case"top":Pe=ye-7;break;case"bottom-right":case"bottom-left":case"bottom":Pe=7-ye}switch(X){case"top-right":case"bottom-right":case"right":we=-le;break;case"top-left":case"bottom-left":case"left":we=le}return[we,Pe]}(_,F[0],F[1]):function(X,le){var ye=0,we=0;le<0&&(le=0);var Pe=le/Math.sqrt(2);switch(X){case"top-right":case"top-left":we=Pe-7;break;case"bottom-right":case"bottom-left":we=7-Pe;break;case"bottom":we=7-le;break;case"top":we=le-7}switch(X){case"top-right":case"bottom-right":ye=-Pe;break;case"top-left":case"bottom-left":ye=Pe;break;case"left":ye=le;break;case"right":ye=-le}return[ye,we]}(_,F[0])}function ge(_){switch(_){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _e(_,F,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr){var dr=function(mn,gn,Ln,$n,oa,_a,fa,Aa){for(var ca=$n.layout.get("text-rotate").evaluate(_a,{})*Math.PI/180,Xa=[],Oa=0,da=gn.positionedLines;Oa<da.length;Oa+=1)for(var ii=da[Oa],ja=0,pi=ii.positionedGlyphs;ja<pi.length;ja+=1){var wa=pi[ja];if(wa.rect){var yi=wa.rect||{},Ui=4,Ko=!0,Jo=1,Xi=0,oo=(oa||Aa)&&wa.vertical,zi=wa.metrics.advance*wa.scale/2;if(Aa&&gn.verticalizable&&(Xi=ii.lineOffset/2-(wa.imageName?-(24-wa.metrics.width*wa.scale)/2:24*(wa.scale-1))),wa.imageName){var Lo=fa[wa.imageName];Ko=Lo.sdf,Ui=1/(Jo=Lo.pixelRatio)}var Bs=oa?[wa.x+zi,wa.y]:[0,0],Po=oa?[0,0]:[wa.x+zi+Ln[0],wa.y+Ln[1]-Xi],Us=[0,0];oo&&(Us=Po,Po=[0,0]);var Ro=(wa.metrics.left-Ui)*wa.scale-zi+Po[0],Do=(-wa.metrics.top-Ui)*wa.scale+Po[1],ci=Ro+yi.w*wa.scale/Jo,Ri=Do+yi.h*wa.scale/Jo,Zi=new l(Ro,Do),vi=new l(ci,Do),Mo=new l(Ro,Ri),ws=new l(ci,Ri);if(oo){var $o=new l(-zi,zi- -17),ho=-Math.PI/2,Qo=12-zi,Ki=new l(22-Qo,-(wa.imageName?Qo:0)),Ci=new(Function.prototype.bind.apply(l,[null].concat(Us)));Zi._rotateAround(ho,$o)._add(Ki)._add(Ci),vi._rotateAround(ho,$o)._add(Ki)._add(Ci),Mo._rotateAround(ho,$o)._add(Ki)._add(Ci),ws._rotateAround(ho,$o)._add(Ki)._add(Ci)}if(ca){var Yl=Math.sin(ca),Zc=Math.cos(ca),Vi=[Zc,-Yl,Yl,Zc];Zi._matMult(Vi),vi._matMult(Vi),Mo._matMult(Vi),ws._matMult(Vi)}var Ka=new l(0,0),Hu=new l(0,0);Xa.push({tl:Zi,tr:vi,bl:Mo,br:ws,tex:yi,writingMode:gn.writingMode,glyphOffset:Bs,sectionIndex:wa.sectionIndex,isSDF:Ko,pixelOffsetTL:Ka,pixelOffsetBR:Hu,minFontScaleX:0,minFontScaleY:0})}}return Xa}(0,X,Xe,ye,we,Pe,le,_.allowVerticalPlacement),zr=_.textSizeData,Ar=null;zr.kind==="source"?(Ar=[128*ye.layout.get("text-size").evaluate(Pe,{})])[0]>32640&&C(_.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):zr.kind==="composite"&&((Ar=[128*Jt.compositeTextSizes[0].evaluate(Pe,{},pr),128*Jt.compositeTextSizes[1].evaluate(Pe,{},pr)])[0]>32640||Ar[1]>32640)&&C(_.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),_.addSymbols(_.text,dr,Ar,Xe,we,Pe,Tt,F,ct.lineStartIndex,ct.lineLength,Gt,pr);for(var Xr=0,rn=Lt;Xr<rn.length;Xr+=1)It[rn[Xr]]=_.text.placedSymbolArray.length-1;return 4*dr.length}function Ce(_){for(var F in _)return _[F];return null}function De(_,F,X,le){var ye=_.compareText;if(F in ye){for(var we=ye[F],Pe=we.length-1;Pe>=0;Pe--)if(le.dist(we[Pe])<X)return!0}else ye[F]=[];return ye[F].push(le),!1}var tt=th.VectorTileFeature.types,Ze=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rt(_,F,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt){var Jt=Xe?Math.min(32640,Math.round(Xe[0])):0,pr=Xe?Math.min(32640,Math.round(Xe[1])):0;_.emplaceBack(F,X,Math.round(32*le),Math.round(32*ye),we,Pe,(Jt<<1)+(ct?1:0),pr,16*Tt,16*Lt,256*It,256*Gt)}function pt(_,F,X){_.emplaceBack(F.x,F.y,X),_.emplaceBack(F.x,F.y,X),_.emplaceBack(F.x,F.y,X),_.emplaceBack(F.x,F.y,X)}function gt(_){for(var F=0,X=_.sections;F<X.length;F+=1)if(ys(X[F].text))return!0;return!1}var Dt=function(_){this.layoutVertexArray=new li,this.indexArray=new sl,this.programConfigurations=_,this.segments=new nr,this.dynamicLayoutVertexArray=new hu,this.opacityVertexArray=new pf,this.placedSymbolArray=new he};Dt.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Dt.prototype.upload=function(_,F,X,le){this.isEmpty()||(X&&(this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,zh.members),this.indexBuffer=_.createIndexBuffer(this.indexArray,F),this.dynamicLayoutVertexBuffer=_.createVertexBuffer(this.dynamicLayoutVertexArray,fd.members,!0),this.opacityVertexBuffer=_.createVertexBuffer(this.opacityVertexArray,Ze,!0),this.opacityVertexBuffer.itemSize=1),(X||le)&&this.programConfigurations.upload(_))},Dt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ga("SymbolBuffers",Dt);var Bt=function(_,F,X){this.layoutVertexArray=new _,this.layoutAttributes=F,this.indexArray=new X,this.segments=new nr,this.collisionVertexArray=new df};Bt.prototype.upload=function(_){this.layoutVertexBuffer=_.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=_.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=_.createVertexBuffer(this.collisionVertexArray,yp.members,!0)},Bt.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ga("CollisionBuffers",Bt);var qt=function(_){this.collisionBoxArray=_.collisionBoxArray,this.zoom=_.zoom,this.overscaling=_.overscaling,this.layers=_.layers,this.layerIds=this.layers.map(function(we){return we.id}),this.index=_.index,this.pixelRatio=_.pixelRatio,this.sourceLayerIndex=_.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Nu([]),this.placementViewportMatrix=Nu([]);var F=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oh(this.zoom,F["text-size"]),this.iconSizeData=oh(this.zoom,F["icon-size"]);var X=this.layers[0].layout,le=X.get("symbol-sort-key"),ye=X.get("symbol-z-order");this.sortFeaturesByKey=ye!=="viewport-y"&&le.constantOr(1)!==void 0,this.sortFeaturesByY=(ye==="viewport-y"||ye==="auto"&&!this.sortFeaturesByKey)&&(X.get("text-allow-overlap")||X.get("icon-allow-overlap")||X.get("text-ignore-placement")||X.get("icon-ignore-placement")),X.get("symbol-placement")==="point"&&(this.writingModes=X.get("text-writing-mode").map(function(we){return fl[we]})),this.stateDependentLayerIds=this.layers.filter(function(we){return we.isStateDependent()}).map(function(we){return we.id}),this.sourceID=_.sourceID};qt.prototype.createArrays=function(){this.text=new Dt(new pa(zh.members,this.layers,this.zoom,function(_){return/^text/.test(_)})),this.icon=new Dt(new pa(zh.members,this.layers,this.zoom,function(_){return/^icon/.test(_)})),this.glyphOffsetArray=new We,this.lineVertexArray=new it,this.symbolInstances=new Fe},qt.prototype.calculateGlyphDependencies=function(_,F,X,le,ye){for(var we=0;we<_.length;we++)if(F[_.charCodeAt(we)]=!0,(X||le)&&ye){var Pe=go[_.charAt(we)];Pe&&(F[Pe.charCodeAt(0)]=!0)}},qt.prototype.populate=function(_,F,X){var le=this.layers[0],ye=le.layout,we=ye.get("text-font"),Pe=ye.get("text-field"),Xe=ye.get("icon-image"),ct=(Pe.value.kind!=="constant"||Pe.value.value instanceof Sr&&!Pe.value.value.isEmpty()||Pe.value.value.toString().length>0)&&(we.value.kind!=="constant"||we.value.value.length>0),Tt=Xe.value.kind!=="constant"||!!Xe.value.value||Object.keys(Xe.parameters).length>0,Lt=ye.get("symbol-sort-key");if(this.features=[],ct||Tt){for(var It=F.iconDependencies,Gt=F.glyphDependencies,Jt=F.availableImages,pr=new Za(this.zoom),dr=0,zr=_;dr<zr.length;dr+=1){var Ar=zr[dr],Xr=Ar.feature,rn=Ar.id,mn=Ar.index,gn=Ar.sourceLayerIndex,Ln=le._featureFilter.needGeometry,$n={type:Xr.type,id:rn,properties:Xr.properties,geometry:Ln?Ai(Xr):[]};if(le._featureFilter.filter(pr,$n,X)){Ln||($n.geometry=Ai(Xr));var oa=void 0;if(ct){var _a=le.getValueAndResolveTokens("text-field",$n,X,Jt),fa=Sr.factory(_a);gt(fa)&&(this.hasRTLText=!0),(!this.hasRTLText||Pc()==="unavailable"||this.hasRTLText&&Co.isParsed())&&(oa=pv(fa,le,$n))}var Aa=void 0;if(Tt){var ca=le.getValueAndResolveTokens("icon-image",$n,X,Jt);Aa=ca instanceof vn?ca:vn.fromString(ca)}if(oa||Aa){var Xa=this.sortFeaturesByKey?Lt.evaluate($n,{},X):void 0,Oa={id:rn,text:oa,icon:Aa,index:mn,sourceLayerIndex:gn,geometry:Ai(Xr),properties:Xr.properties,type:tt[Xr.type],sortKey:Xa};if(this.features.push(Oa),Aa&&(It[Aa.name]=!0),oa){var da=we.evaluate($n,{},X).join(","),ii=ye.get("text-rotation-alignment")==="map"&&ye.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fl.vertical)>=0;for(var ja=0,pi=oa.sections;ja<pi.length;ja+=1){var wa=pi[ja];if(wa.image)It[wa.image.name]=!0;else{var yi=_o(oa.toString()),Ui=wa.fontStack||da,Ko=Gt[Ui]=Gt[Ui]||{};this.calculateGlyphDependencies(wa.text,Ko,ii,this.allowVerticalPlacement,yi)}}}}}}ye.get("symbol-placement")==="line"&&(this.features=function(Jo){var Xi={},oo={},zi=[],Lo=0;function Bs(ho){zi.push(Jo[ho]),Lo++}function Po(ho,Qo,Ki){var Ci=oo[ho];return delete oo[ho],oo[Qo]=Ci,zi[Ci].geometry[0].pop(),zi[Ci].geometry[0]=zi[Ci].geometry[0].concat(Ki[0]),Ci}function Us(ho,Qo,Ki){var Ci=Xi[Qo];return delete Xi[Qo],Xi[ho]=Ci,zi[Ci].geometry[0].shift(),zi[Ci].geometry[0]=Ki[0].concat(zi[Ci].geometry[0]),Ci}function Ro(ho,Qo,Ki){var Ci=Ki?Qo[0][Qo[0].length-1]:Qo[0][0];return ho+":"+Ci.x+":"+Ci.y}for(var Do=0;Do<Jo.length;Do++){var ci=Jo[Do],Ri=ci.geometry,Zi=ci.text?ci.text.toString():null;if(Zi){var vi=Ro(Zi,Ri),Mo=Ro(Zi,Ri,!0);if(vi in oo&&Mo in Xi&&oo[vi]!==Xi[Mo]){var ws=Us(vi,Mo,Ri),$o=Po(vi,Mo,zi[ws].geometry);delete Xi[vi],delete oo[Mo],oo[Ro(Zi,zi[$o].geometry,!0)]=$o,zi[ws].geometry=null}else vi in oo?Po(vi,Mo,Ri):Mo in Xi?Us(vi,Mo,Ri):(Bs(Do),Xi[vi]=Lo-1,oo[Mo]=Lo-1)}else Bs(Do)}return zi.filter(function(ho){return ho.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Jo,Xi){return Jo.sortKey-Xi.sortKey})}},qt.prototype.update=function(_,F,X){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(_,F,this.layers,X),this.icon.programConfigurations.updatePaintArrays(_,F,this.layers,X))},qt.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},qt.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},qt.prototype.upload=function(_){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(_),this.iconCollisionBox.upload(_)),this.text.upload(_,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(_,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},qt.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},qt.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},qt.prototype.addToLineVertexArray=function(_,F){var X=this.lineVertexArray.length;if(_.segment!==void 0){for(var le=_.dist(F[_.segment+1]),ye=_.dist(F[_.segment]),we={},Pe=_.segment+1;Pe<F.length;Pe++)we[Pe]={x:F[Pe].x,y:F[Pe].y,tileUnitDistanceFromAnchor:le},Pe<F.length-1&&(le+=F[Pe+1].dist(F[Pe]));for(var Xe=_.segment||0;Xe>=0;Xe--)we[Xe]={x:F[Xe].x,y:F[Xe].y,tileUnitDistanceFromAnchor:ye},Xe>0&&(ye+=F[Xe-1].dist(F[Xe]));for(var ct=0;ct<F.length;ct++){var Tt=we[ct];this.lineVertexArray.emplaceBack(Tt.x,Tt.y,Tt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:X,lineLength:this.lineVertexArray.length-X}},qt.prototype.addSymbols=function(_,F,X,le,ye,we,Pe,Xe,ct,Tt,Lt,It){for(var Gt=_.indexArray,Jt=_.layoutVertexArray,pr=_.segments.prepareSegment(4*F.length,Jt,Gt,we.sortKey),dr=this.glyphOffsetArray.length,zr=pr.vertexLength,Ar=this.allowVerticalPlacement&&Pe===fl.vertical?Math.PI/2:0,Xr=we.text&&we.text.sections,rn=0;rn<F.length;rn++){var mn=F[rn],gn=mn.tl,Ln=mn.tr,$n=mn.bl,oa=mn.br,_a=mn.tex,fa=mn.pixelOffsetTL,Aa=mn.pixelOffsetBR,ca=mn.minFontScaleX,Xa=mn.minFontScaleY,Oa=mn.glyphOffset,da=mn.isSDF,ii=mn.sectionIndex,ja=pr.vertexLength,pi=Oa[1];rt(Jt,Xe.x,Xe.y,gn.x,pi+gn.y,_a.x,_a.y,X,da,fa.x,fa.y,ca,Xa),rt(Jt,Xe.x,Xe.y,Ln.x,pi+Ln.y,_a.x+_a.w,_a.y,X,da,Aa.x,fa.y,ca,Xa),rt(Jt,Xe.x,Xe.y,$n.x,pi+$n.y,_a.x,_a.y+_a.h,X,da,fa.x,Aa.y,ca,Xa),rt(Jt,Xe.x,Xe.y,oa.x,pi+oa.y,_a.x+_a.w,_a.y+_a.h,X,da,Aa.x,Aa.y,ca,Xa),pt(_.dynamicLayoutVertexArray,Xe,Ar),Gt.emplaceBack(ja,ja+1,ja+2),Gt.emplaceBack(ja+1,ja+2,ja+3),pr.vertexLength+=4,pr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Oa[0]),rn!==F.length-1&&ii===F[rn+1].sectionIndex||_.programConfigurations.populatePaintArrays(Jt.length,we,we.index,{},It,Xr&&Xr[ii])}_.placedSymbolArray.emplaceBack(Xe.x,Xe.y,dr,this.glyphOffsetArray.length-dr,zr,ct,Tt,Xe.segment,X?X[0]:0,X?X[1]:0,le[0],le[1],Pe,0,!1,0,Lt)},qt.prototype._addCollisionDebugVertex=function(_,F,X,le,ye,we){return F.emplaceBack(0,0),_.emplaceBack(X.x,X.y,le,ye,Math.round(we.x),Math.round(we.y))},qt.prototype.addCollisionDebugVertices=function(_,F,X,le,ye,we,Pe){var Xe=ye.segments.prepareSegment(4,ye.layoutVertexArray,ye.indexArray),ct=Xe.vertexLength,Tt=ye.layoutVertexArray,Lt=ye.collisionVertexArray,It=Pe.anchorX,Gt=Pe.anchorY;this._addCollisionDebugVertex(Tt,Lt,we,It,Gt,new l(_,F)),this._addCollisionDebugVertex(Tt,Lt,we,It,Gt,new l(X,F)),this._addCollisionDebugVertex(Tt,Lt,we,It,Gt,new l(X,le)),this._addCollisionDebugVertex(Tt,Lt,we,It,Gt,new l(_,le)),Xe.vertexLength+=4;var Jt=ye.indexArray;Jt.emplaceBack(ct,ct+1),Jt.emplaceBack(ct+1,ct+2),Jt.emplaceBack(ct+2,ct+3),Jt.emplaceBack(ct+3,ct),Xe.primitiveLength+=4},qt.prototype.addDebugCollisionBoxes=function(_,F,X,le){for(var ye=_;ye<F;ye++){var we=this.collisionBoxArray.get(ye);this.addCollisionDebugVertices(we.x1,we.y1,we.x2,we.y2,le?this.textCollisionBox:this.iconCollisionBox,we.anchorPoint,X)}},qt.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bt(Ks,nh.members,Rs),this.iconCollisionBox=new Bt(Ks,nh.members,Rs);for(var _=0;_<this.symbolInstances.length;_++){var F=this.symbolInstances.get(_);this.addDebugCollisionBoxes(F.textBoxStartIndex,F.textBoxEndIndex,F,!0),this.addDebugCollisionBoxes(F.verticalTextBoxStartIndex,F.verticalTextBoxEndIndex,F,!0),this.addDebugCollisionBoxes(F.iconBoxStartIndex,F.iconBoxEndIndex,F,!1),this.addDebugCollisionBoxes(F.verticalIconBoxStartIndex,F.verticalIconBoxEndIndex,F,!1)}},qt.prototype._deserializeCollisionBoxesForSymbol=function(_,F,X,le,ye,we,Pe,Xe,ct){for(var Tt={},Lt=F;Lt<X;Lt++){var It=_.get(Lt);Tt.textBox={x1:It.x1,y1:It.y1,x2:It.x2,y2:It.y2,anchorPointX:It.anchorPointX,anchorPointY:It.anchorPointY},Tt.textFeatureIndex=It.featureIndex;break}for(var Gt=le;Gt<ye;Gt++){var Jt=_.get(Gt);Tt.verticalTextBox={x1:Jt.x1,y1:Jt.y1,x2:Jt.x2,y2:Jt.y2,anchorPointX:Jt.anchorPointX,anchorPointY:Jt.anchorPointY},Tt.verticalTextFeatureIndex=Jt.featureIndex;break}for(var pr=we;pr<Pe;pr++){var dr=_.get(pr);Tt.iconBox={x1:dr.x1,y1:dr.y1,x2:dr.x2,y2:dr.y2,anchorPointX:dr.anchorPointX,anchorPointY:dr.anchorPointY},Tt.iconFeatureIndex=dr.featureIndex;break}for(var zr=Xe;zr<ct;zr++){var Ar=_.get(zr);Tt.verticalIconBox={x1:Ar.x1,y1:Ar.y1,x2:Ar.x2,y2:Ar.y2,anchorPointX:Ar.anchorPointX,anchorPointY:Ar.anchorPointY},Tt.verticalIconFeatureIndex=Ar.featureIndex;break}return Tt},qt.prototype.deserializeCollisionBoxes=function(_){this.collisionArrays=[];for(var F=0;F<this.symbolInstances.length;F++){var X=this.symbolInstances.get(F);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(_,X.textBoxStartIndex,X.textBoxEndIndex,X.verticalTextBoxStartIndex,X.verticalTextBoxEndIndex,X.iconBoxStartIndex,X.iconBoxEndIndex,X.verticalIconBoxStartIndex,X.verticalIconBoxEndIndex))}},qt.prototype.hasTextData=function(){return this.text.segments.get().length>0},qt.prototype.hasIconData=function(){return this.icon.segments.get().length>0},qt.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},qt.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},qt.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},qt.prototype.addIndicesForPlacedSymbol=function(_,F){for(var X=_.placedSymbolArray.get(F),le=X.vertexStartIndex+4*X.numGlyphs,ye=X.vertexStartIndex;ye<le;ye+=4)_.indexArray.emplaceBack(ye,ye+1,ye+2),_.indexArray.emplaceBack(ye+1,ye+2,ye+3)},qt.prototype.getSortedSymbolIndexes=function(_){if(this.sortedAngle===_&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var F=Math.sin(_),X=Math.cos(_),le=[],ye=[],we=[],Pe=0;Pe<this.symbolInstances.length;++Pe){we.push(Pe);var Xe=this.symbolInstances.get(Pe);le.push(0|Math.round(F*Xe.anchorX+X*Xe.anchorY)),ye.push(Xe.featureIndex)}return we.sort(function(ct,Tt){return le[ct]-le[Tt]||ye[Tt]-ye[ct]}),we},qt.prototype.addToSortKeyRanges=function(_,F){var X=this.sortKeyRanges[this.sortKeyRanges.length-1];X&&X.sortKey===F?X.symbolInstanceEnd=_+1:this.sortKeyRanges.push({sortKey:F,symbolInstanceStart:_,symbolInstanceEnd:_+1})},qt.prototype.sortFeatures=function(_){var F=this;if(this.sortFeaturesByY&&this.sortedAngle!==_&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(_),this.sortedAngle=_,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var X=0,le=this.symbolInstanceIndexes;X<le.length;X+=1){var ye=this.symbolInstances.get(le[X]);this.featureSortOrder.push(ye.featureIndex),[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(function(we,Pe,Xe){we>=0&&Xe.indexOf(we)===Pe&&F.addIndicesForPlacedSymbol(F.text,we)}),ye.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ye.verticalPlacedTextSymbolIndex),ye.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ye.placedIconSymbolIndex),ye.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ye.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ga("SymbolBucket",qt,{omit:["layers","collisionBoxArray","features","compareText"]}),qt.MAX_GLYPHS=65535,qt.addDynamicAttributes=pt;var _r=new $i({"symbol-placement":new ma(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new ma(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ma(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ka(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ma(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ma(Me.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ma(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new ma(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ma(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new ka(Me.layout_symbol["icon-size"]),"icon-text-fit":new ma(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ma(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new ka(Me.layout_symbol["icon-image"]),"icon-rotate":new ka(Me.layout_symbol["icon-rotate"]),"icon-padding":new ma(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new ma(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new ka(Me.layout_symbol["icon-offset"]),"icon-anchor":new ka(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ma(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ma(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ma(Me.layout_symbol["text-rotation-alignment"]),"text-field":new ka(Me.layout_symbol["text-field"]),"text-font":new ka(Me.layout_symbol["text-font"]),"text-size":new ka(Me.layout_symbol["text-size"]),"text-max-width":new ka(Me.layout_symbol["text-max-width"]),"text-line-height":new ma(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new ka(Me.layout_symbol["text-letter-spacing"]),"text-justify":new ka(Me.layout_symbol["text-justify"]),"text-radial-offset":new ka(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ma(Me.layout_symbol["text-variable-anchor"]),"text-anchor":new ka(Me.layout_symbol["text-anchor"]),"text-max-angle":new ma(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new ma(Me.layout_symbol["text-writing-mode"]),"text-rotate":new ka(Me.layout_symbol["text-rotate"]),"text-padding":new ma(Me.layout_symbol["text-padding"]),"text-keep-upright":new ma(Me.layout_symbol["text-keep-upright"]),"text-transform":new ka(Me.layout_symbol["text-transform"]),"text-offset":new ka(Me.layout_symbol["text-offset"]),"text-allow-overlap":new ma(Me.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ma(Me.layout_symbol["text-ignore-placement"]),"text-optional":new ma(Me.layout_symbol["text-optional"])}),Kt={paint:new $i({"icon-opacity":new ka(Me.paint_symbol["icon-opacity"]),"icon-color":new ka(Me.paint_symbol["icon-color"]),"icon-halo-color":new ka(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new ka(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ka(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new ma(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new ma(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new ka(Me.paint_symbol["text-opacity"]),"text-color":new ka(Me.paint_symbol["text-color"],{runtimeType:$t,getOverride:function(_){return _.textColor},hasOverride:function(_){return!!_.textColor}}),"text-halo-color":new ka(Me.paint_symbol["text-halo-color"]),"text-halo-width":new ka(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new ka(Me.paint_symbol["text-halo-blur"]),"text-translate":new ma(Me.paint_symbol["text-translate"]),"text-translate-anchor":new ma(Me.paint_symbol["text-translate-anchor"])}),layout:_r},tr=function(_){this.type=_.property.overrides?_.property.overrides.runtimeType:et,this.defaultValue=_};tr.prototype.evaluate=function(_){if(_.formattedSection){var F=this.defaultValue.property.overrides;if(F&&F.hasOverride(_.formattedSection))return F.getOverride(_.formattedSection)}return _.feature&&_.featureState?this.defaultValue.evaluate(_.feature,_.featureState):this.defaultValue.property.specification.default},tr.prototype.eachChild=function(_){this.defaultValue.isConstant()||_(this.defaultValue.value._styleExpression.expression)},tr.prototype.outputDefined=function(){return!1},tr.prototype.serialize=function(){return null},ga("FormatSectionOverride",tr,{omit:["defaultValue"]});var ir=function(_){function F(X){_.call(this,X,Kt)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.recalculate=function(X,le){if(_.prototype.recalculate.call(this,X,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var ye=this.layout.get("text-writing-mode");if(ye){for(var we=[],Pe=0,Xe=ye;Pe<Xe.length;Pe+=1){var ct=Xe[Pe];we.indexOf(ct)<0&&we.push(ct)}this.layout._values["text-writing-mode"]=we}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},F.prototype.getValueAndResolveTokens=function(X,le,ye,we){var Pe=this.layout.get(X).evaluate(le,{},ye,we),Xe=this._unevaluatedLayout._values[X];return Xe.isDataDriven()||Cs(Xe.value)||!Pe?Pe:function(ct,Tt){return Tt.replace(/{([^{}]+)}/g,function(Lt,It){return It in ct?String(ct[It]):""})}(le.properties,Pe)},F.prototype.createBucket=function(X){return new qt(X)},F.prototype.queryRadius=function(){return 0},F.prototype.queryIntersectsFeature=function(){return!1},F.prototype._setPaintOverrides=function(){for(var X=0,le=Kt.paint.overridableProperties;X<le.length;X+=1){var ye=le[X];if(F.hasPaintOverride(this.layout,ye)){var we,Pe=this.paint.get(ye),Xe=new tr(Pe),ct=new js(Xe,Pe.property.specification);we=Pe.value.kind==="constant"||Pe.value.kind==="source"?new _l("source",ct):new wl("composite",ct,Pe.value.zoomStops,Pe.value._interpolationType),this.paint._values[ye]=new eo(Pe.property,we,Pe.parameters)}}},F.prototype._handleOverridablePaintPropertyUpdate=function(X,le,ye){return!(!this.layout||le.isDataDriven()||ye.isDataDriven())&&F.hasPaintOverride(this.layout,X)},F.hasPaintOverride=function(X,le){var ye=X.get("text-field"),we=Kt.paint.properties[le],Pe=!1,Xe=function(Lt){for(var It=0,Gt=Lt;It<Gt.length;It+=1)if(we.overrides&&we.overrides.hasOverride(Gt[It]))return void(Pe=!0)};if(ye.value.kind==="constant"&&ye.value.value instanceof Sr)Xe(ye.value.value.sections);else if(ye.value.kind==="source"){var ct=function(Lt){Pe||(Lt instanceof Mr&&An(Lt.value)===wt?Xe(Lt.value.sections):Lt instanceof on?Xe(Lt.sections):Lt.eachChild(ct))},Tt=ye.value;Tt._styleExpression&&ct(Tt._styleExpression.expression)}return Pe},F}(Go),wr={paint:new $i({"background-color":new ma(Me.paint_background["background-color"]),"background-pattern":new Hl(Me.paint_background["background-pattern"]),"background-opacity":new ma(Me.paint_background["background-opacity"])})},sr=function(_){function F(X){_.call(this,X,wr)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F}(Go),vr={paint:new $i({"raster-opacity":new ma(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new ma(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ma(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ma(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new ma(Me.paint_raster["raster-saturation"]),"raster-contrast":new ma(Me.paint_raster["raster-contrast"]),"raster-resampling":new ma(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new ma(Me.paint_raster["raster-fade-duration"])})},nn=function(_){function F(X){_.call(this,X,vr)}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F}(Go),en=function(_){function F(X){_.call(this,X,{}),this.implementation=X}return _&&(F.__proto__=_),(F.prototype=Object.create(_&&_.prototype)).constructor=F,F.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},F.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},F.prototype.recalculate=function(){},F.prototype.updateTransitions=function(){},F.prototype.hasTransition=function(){},F.prototype.serialize=function(){},F.prototype.onAdd=function(X){this.implementation.onAdd&&this.implementation.onAdd(X,X.painter.context.gl)},F.prototype.onRemove=function(X){this.implementation.onRemove&&this.implementation.onRemove(X,X.painter.context.gl)},F}(Go),Jr={circle:iv,heatmap:ed,hillshade:fp,fill:ad,"fill-extrusion":dp,line:cd,symbol:ir,background:sr,raster:nn},Yr=self.HTMLImageElement,kn=self.HTMLCanvasElement,In=self.HTMLVideoElement,ia=self.ImageData,Wn=self.ImageBitmap,Zn=function(_,F,X,le){this.context=_,this.format=X,this.texture=_.gl.createTexture(),this.update(F,le)};Zn.prototype.update=function(_,F,X){var le=_.width,ye=_.height,we=!(this.size&&this.size[0]===le&&this.size[1]===ye||X),Pe=this.context,Xe=Pe.gl;if(this.useMipmap=Boolean(F&&F.useMipmap),Xe.bindTexture(Xe.TEXTURE_2D,this.texture),Pe.pixelStoreUnpackFlipY.set(!1),Pe.pixelStoreUnpack.set(1),Pe.pixelStoreUnpackPremultiplyAlpha.set(this.format===Xe.RGBA&&(!F||F.premultiply!==!1)),we)this.size=[le,ye],_ instanceof Yr||_ instanceof kn||_ instanceof In||_ instanceof ia||Wn&&_ instanceof Wn?Xe.texImage2D(Xe.TEXTURE_2D,0,this.format,this.format,Xe.UNSIGNED_BYTE,_):Xe.texImage2D(Xe.TEXTURE_2D,0,this.format,le,ye,0,this.format,Xe.UNSIGNED_BYTE,_.data);else{var ct=X||{x:0,y:0},Tt=ct.x,Lt=ct.y;_ instanceof Yr||_ instanceof kn||_ instanceof In||_ instanceof ia||Wn&&_ instanceof Wn?Xe.texSubImage2D(Xe.TEXTURE_2D,0,Tt,Lt,Xe.RGBA,Xe.UNSIGNED_BYTE,_):Xe.texSubImage2D(Xe.TEXTURE_2D,0,Tt,Lt,le,ye,Xe.RGBA,Xe.UNSIGNED_BYTE,_.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Xe.generateMipmap(Xe.TEXTURE_2D)},Zn.prototype.bind=function(_,F,X){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),X!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(X=le.LINEAR),_!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,_),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,X||_),this.filter=_),F!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,F),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,F),this.wrap=F)},Zn.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Zn.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var fn=function(_){var F=this;this._callback=_,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){F._triggered=!1,F._callback()})};fn.prototype.trigger=function(){var _=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){_._triggered=!1,_._callback()},0))},fn.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Pn=function(_,F,X){this.target=_,this.parent=F,this.mapId=X,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new fn(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=R()?_:self};function Vn(_,F,X){var le=2*Math.PI*6378137/256/Math.pow(2,X);return[_*le-2*Math.PI*6378137/2,F*le-2*Math.PI*6378137/2]}Pn.prototype.send=function(_,F,X,le,ye){var we=this;ye===void 0&&(ye=!1);var Pe=Math.round(1e18*Math.random()).toString(36).substring(0,10);X&&(this.callbacks[Pe]=X);var Xe=G(this.globalScope)?void 0:[];return this.target.postMessage({id:Pe,type:_,hasCallback:!!X,targetMapId:le,mustQueue:ye,sourceMapId:this.mapId,data:Pu(F,Xe)},Xe),{cancel:function(){X&&delete we.callbacks[Pe],we.target.postMessage({id:Pe,type:"<cancel>",targetMapId:le,sourceMapId:we.mapId})}}},Pn.prototype.receive=function(_){var F=_.data,X=F.id;if(X&&(!F.targetMapId||this.mapId===F.targetMapId))if(F.type==="<cancel>"){delete this.tasks[X];var le=this.cancelCallbacks[X];delete this.cancelCallbacks[X],le&&le()}else R()||F.mustQueue?(this.tasks[X]=F,this.taskQueue.push(X),this.invoker.trigger()):this.processTask(X,F)},Pn.prototype.process=function(){if(this.taskQueue.length){var _=this.taskQueue.shift(),F=this.tasks[_];delete this.tasks[_],this.taskQueue.length&&this.invoker.trigger(),F&&this.processTask(_,F)}},Pn.prototype.processTask=function(_,F){var X=this;if(F.type==="<response>"){var le=this.callbacks[_];delete this.callbacks[_],le&&(F.error?le(Xs(F.error)):le(null,Xs(F.data)))}else{var ye=!1,we=G(this.globalScope)?void 0:[],Pe=F.hasCallback?function(Lt,It){ye=!0,delete X.cancelCallbacks[_],X.target.postMessage({id:_,type:"<response>",sourceMapId:X.mapId,error:Lt?Pu(Lt):null,data:Pu(It,we)},we)}:function(Lt){ye=!0},Xe=null,ct=Xs(F.data);if(this.parent[F.type])Xe=this.parent[F.type](F.sourceMapId,ct,Pe);else if(this.parent.getWorkerSource){var Tt=F.type.split(".");Xe=this.parent.getWorkerSource(F.sourceMapId,Tt[0],ct.source)[Tt[1]](ct,Pe)}else Pe(new Error("Could not find function "+F.type));!ye&&Xe&&Xe.cancel&&(this.cancelCallbacks[_]=Xe.cancel)}},Pn.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var an=function(_,F){_&&(F?this.setSouthWest(_).setNorthEast(F):_.length===4?this.setSouthWest([_[0],_[1]]).setNorthEast([_[2],_[3]]):this.setSouthWest(_[0]).setNorthEast(_[1]))};an.prototype.setNorthEast=function(_){return this._ne=_ instanceof Tn?new Tn(_.lng,_.lat):Tn.convert(_),this},an.prototype.setSouthWest=function(_){return this._sw=_ instanceof Tn?new Tn(_.lng,_.lat):Tn.convert(_),this},an.prototype.extend=function(_){var F,X,le=this._sw,ye=this._ne;if(_ instanceof Tn)F=_,X=_;else{if(!(_ instanceof an))return Array.isArray(_)?_.length===4||_.every(Array.isArray)?this.extend(an.convert(_)):this.extend(Tn.convert(_)):this;if(X=_._ne,!(F=_._sw)||!X)return this}return le||ye?(le.lng=Math.min(F.lng,le.lng),le.lat=Math.min(F.lat,le.lat),ye.lng=Math.max(X.lng,ye.lng),ye.lat=Math.max(X.lat,ye.lat)):(this._sw=new Tn(F.lng,F.lat),this._ne=new Tn(X.lng,X.lat)),this},an.prototype.getCenter=function(){return new Tn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},an.prototype.getSouthWest=function(){return this._sw},an.prototype.getNorthEast=function(){return this._ne},an.prototype.getNorthWest=function(){return new Tn(this.getWest(),this.getNorth())},an.prototype.getSouthEast=function(){return new Tn(this.getEast(),this.getSouth())},an.prototype.getWest=function(){return this._sw.lng},an.prototype.getSouth=function(){return this._sw.lat},an.prototype.getEast=function(){return this._ne.lng},an.prototype.getNorth=function(){return this._ne.lat},an.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},an.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},an.prototype.isEmpty=function(){return!(this._sw&&this._ne)},an.prototype.contains=function(_){var F=Tn.convert(_),X=F.lng,le=F.lat,ye=this._sw.lng<=X&&X<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ye=this._sw.lng>=X&&X>=this._ne.lng),this._sw.lat<=le&&le<=this._ne.lat&&ye},an.convert=function(_){return!_||_ instanceof an?_:new an(_)};var Tn=function(_,F){if(isNaN(_)||isNaN(F))throw new Error("Invalid LngLat object: ("+_+", "+F+")");if(this.lng=+_,this.lat=+F,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Tn.prototype.wrap=function(){return new Tn(v(this.lng,-180,180),this.lat)},Tn.prototype.toArray=function(){return[this.lng,this.lat]},Tn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Tn.prototype.distanceTo=function(_){var F=Math.PI/180,X=this.lat*F,le=_.lat*F,ye=Math.sin(X)*Math.sin(le)+Math.cos(X)*Math.cos(le)*Math.cos((_.lng-this.lng)*F);return 63710088e-1*Math.acos(Math.min(ye,1))},Tn.prototype.toBounds=function(_){_===void 0&&(_=0);var F=360*_/40075017,X=F/Math.cos(Math.PI/180*this.lat);return new an(new Tn(this.lng-X,this.lat-F),new Tn(this.lng+X,this.lat+F))},Tn.convert=function(_){if(_ instanceof Tn)return _;if(Array.isArray(_)&&(_.length===2||_.length===3))return new Tn(Number(_[0]),Number(_[1]));if(!Array.isArray(_)&&typeof _=="object"&&_!==null)return new Tn(Number("lng"in _?_.lng:_.lon),Number(_.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var va=2*Math.PI*63710088e-1;function Fa(_){return va*Math.cos(_*Math.PI/180)}function Wa(_){return(180+_)/360}function _i(_){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+_*Math.PI/360)))/360}function Ii(_,F){return _/Fa(F)}function Xo(_){return 360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90}var To=function(_,F,X){X===void 0&&(X=0),this.x=+_,this.y=+F,this.z=+X};To.fromLngLat=function(_,F){F===void 0&&(F=0);var X=Tn.convert(_);return new To(Wa(X.lng),_i(X.lat),Ii(F,X.lat))},To.prototype.toLngLat=function(){return new Tn(360*this.x-180,Xo(this.y))},To.prototype.toAltitude=function(){return this.z*Fa(Xo(this.y))},To.prototype.meterInMercatorCoordinateUnits=function(){return 1/va*(_=Xo(this.y),1/Math.cos(_*Math.PI/180));var _};var Ao=function(_,F,X){this.z=_,this.x=F,this.y=X,this.key=fs(0,_,_,F,X)};Ao.prototype.equals=function(_){return this.z===_.z&&this.x===_.x&&this.y===_.y},Ao.prototype.url=function(_,F){var X,le,ye,we,Pe,Xe=(le=this.y,ye=this.z,we=Vn(256*(X=this.x),256*(le=Math.pow(2,ye)-le-1),ye),Pe=Vn(256*(X+1),256*(le+1),ye),we[0]+","+we[1]+","+Pe[0]+","+Pe[1]),ct=function(Tt,Lt,It){for(var Gt,Jt="",pr=Tt;pr>0;pr--)Jt+=(Lt&(Gt=1<<pr-1)?1:0)+(It&Gt?2:0);return Jt}(this.z,this.x,this.y);return _[(this.x+this.y)%_.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(F==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",Xe)},Ao.prototype.getTilePoint=function(_){var F=Math.pow(2,this.z);return new l(8192*(_.x*F-this.x),8192*(_.y*F-this.y))},Ao.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var tl=function(_,F){this.wrap=_,this.canonical=F,this.key=fs(_,F.z,F.z,F.x,F.y)},hi=function(_,F,X,le,ye){this.overscaledZ=_,this.wrap=F,this.canonical=new Ao(X,+le,+ye),this.key=fs(F,_,X,le,ye)};function fs(_,F,X,le,ye){(_*=2)<0&&(_=-1*_-1);var we=1<<X;return(we*we*_+we*ye+le).toString(36)+X.toString(36)+F.toString(36)}hi.prototype.equals=function(_){return this.overscaledZ===_.overscaledZ&&this.wrap===_.wrap&&this.canonical.equals(_.canonical)},hi.prototype.scaledTo=function(_){var F=this.canonical.z-_;return _>this.canonical.z?new hi(_,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hi(_,this.wrap,_,this.canonical.x>>F,this.canonical.y>>F)},hi.prototype.calculateScaledKey=function(_,F){var X=this.canonical.z-_;return _>this.canonical.z?fs(this.wrap*+F,_,this.canonical.z,this.canonical.x,this.canonical.y):fs(this.wrap*+F,_,_,this.canonical.x>>X,this.canonical.y>>X)},hi.prototype.isChildOf=function(_){if(_.wrap!==this.wrap)return!1;var F=this.canonical.z-_.canonical.z;return _.overscaledZ===0||_.overscaledZ<this.overscaledZ&&_.canonical.x===this.canonical.x>>F&&_.canonical.y===this.canonical.y>>F},hi.prototype.children=function(_){if(this.overscaledZ>=_)return[new hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var F=this.canonical.z+1,X=2*this.canonical.x,le=2*this.canonical.y;return[new hi(F,this.wrap,F,X,le),new hi(F,this.wrap,F,X+1,le),new hi(F,this.wrap,F,X,le+1),new hi(F,this.wrap,F,X+1,le+1)]},hi.prototype.isLessThan=function(_){return this.wrap<_.wrap||!(this.wrap>_.wrap)&&(this.overscaledZ<_.overscaledZ||!(this.overscaledZ>_.overscaledZ)&&(this.canonical.x<_.canonical.x||!(this.canonical.x>_.canonical.x)&&this.canonical.y<_.canonical.y))},hi.prototype.wrapped=function(){return new hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},hi.prototype.unwrapTo=function(_){return new hi(this.overscaledZ,_,this.canonical.z,this.canonical.x,this.canonical.y)},hi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},hi.prototype.toUnwrapped=function(){return new tl(this.wrap,this.canonical)},hi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},hi.prototype.getTilePoint=function(_){return this.canonical.getTilePoint(new To(_.x-this.wrap,_.y))},ga("CanonicalTileID",Ao),ga("OverscaledTileID",hi,{omit:["posMatrix"]});var rl=function(_,F,X){if(this.uid=_,F.height!==F.width)throw new RangeError("DEM tiles must be square");if(X&&X!=="mapbox"&&X!=="terrarium")return C('"'+X+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=F.height;var le=this.dim=F.height-2;this.data=new Uint32Array(F.data.buffer),this.encoding=X||"mapbox";for(var ye=0;ye<le;ye++)this.data[this._idx(-1,ye)]=this.data[this._idx(0,ye)],this.data[this._idx(le,ye)]=this.data[this._idx(le-1,ye)],this.data[this._idx(ye,-1)]=this.data[this._idx(ye,0)],this.data[this._idx(ye,le)]=this.data[this._idx(ye,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};rl.prototype.get=function(_,F){var X=new Uint8Array(this.data.buffer),le=4*this._idx(_,F);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(X[le],X[le+1],X[le+2])},rl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},rl.prototype._idx=function(_,F){if(_<-1||_>=this.dim+1||F<-1||F>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(F+1)*this.stride+(_+1)},rl.prototype._unpackMapbox=function(_,F,X){return(256*_*256+256*F+X)/10-1e4},rl.prototype._unpackTerrarium=function(_,F,X){return 256*_+F+X/256-32768},rl.prototype.getPixels=function(){return new ro({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},rl.prototype.backfillBorder=function(_,F,X){if(this.dim!==_.dim)throw new Error("dem dimension mismatch");var le=F*this.dim,ye=F*this.dim+this.dim,we=X*this.dim,Pe=X*this.dim+this.dim;switch(F){case-1:le=ye-1;break;case 1:ye=le+1}switch(X){case-1:we=Pe-1;break;case 1:Pe=we+1}for(var Xe=-F*this.dim,ct=-X*this.dim,Tt=we;Tt<Pe;Tt++)for(var Lt=le;Lt<ye;Lt++)this.data[this._idx(Lt,Tt)]=_.data[this._idx(Lt+Xe,Tt+ct)]},ga("DEMData",rl);var Ap=function(_){this._stringToNumber={},this._numberToString=[];for(var F=0;F<_.length;F++){var X=_[F];this._stringToNumber[X]=F,this._numberToString[F]=X}};Ap.prototype.encode=function(_){return this._stringToNumber[_]},Ap.prototype.decode=function(_){return this._numberToString[_]};var hl=function(_,F,X,le,ye){this.type="Feature",this._vectorTileFeature=_,_._z=F,_._x=X,_._y=le,this.properties=_.properties,this.id=ye},Zo={geometry:{configurable:!0}};Zo.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Zo.geometry.set=function(_){this._geometry=_},hl.prototype.toJSON=function(){var _={geometry:this.geometry};for(var F in this)F!=="_geometry"&&F!=="_vectorTileFeature"&&(_[F]=this[F]);return _},Object.defineProperties(hl.prototype,Zo);var hs=function(){this.state={},this.stateChanges={},this.deletedStates={}};hs.prototype.updateState=function(_,F,X){var le=String(F);if(this.stateChanges[_]=this.stateChanges[_]||{},this.stateChanges[_][le]=this.stateChanges[_][le]||{},m(this.stateChanges[_][le],X),this.deletedStates[_]===null)for(var ye in this.deletedStates[_]={},this.state[_])ye!==le&&(this.deletedStates[_][ye]=null);else if(this.deletedStates[_]&&this.deletedStates[_][le]===null)for(var we in this.deletedStates[_][le]={},this.state[_][le])X[we]||(this.deletedStates[_][le][we]=null);else for(var Pe in X)this.deletedStates[_]&&this.deletedStates[_][le]&&this.deletedStates[_][le][Pe]===null&&delete this.deletedStates[_][le][Pe]},hs.prototype.removeFeatureState=function(_,F,X){if(this.deletedStates[_]!==null){var le=String(F);if(this.deletedStates[_]=this.deletedStates[_]||{},X&&F!==void 0)this.deletedStates[_][le]!==null&&(this.deletedStates[_][le]=this.deletedStates[_][le]||{},this.deletedStates[_][le][X]=null);else if(F!==void 0)if(this.stateChanges[_]&&this.stateChanges[_][le])for(X in this.deletedStates[_][le]={},this.stateChanges[_][le])this.deletedStates[_][le][X]=null;else this.deletedStates[_][le]=null;else this.deletedStates[_]=null}},hs.prototype.getState=function(_,F){var X=String(F),le=m({},(this.state[_]||{})[X],(this.stateChanges[_]||{})[X]);if(this.deletedStates[_]===null)return{};if(this.deletedStates[_]){var ye=this.deletedStates[_][F];if(ye===null)return{};for(var we in ye)delete le[we]}return le},hs.prototype.initializeTileState=function(_,F){_.setFeatureState(this.state,F)},hs.prototype.coalesceChanges=function(_,F){var X={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var ye={};for(var we in this.stateChanges[le])this.state[le][we]||(this.state[le][we]={}),m(this.state[le][we],this.stateChanges[le][we]),ye[we]=this.state[le][we];X[le]=ye}for(var Pe in this.deletedStates){this.state[Pe]=this.state[Pe]||{};var Xe={};if(this.deletedStates[Pe]===null)for(var ct in this.state[Pe])Xe[ct]={},this.state[Pe][ct]={};else for(var Tt in this.deletedStates[Pe]){if(this.deletedStates[Pe][Tt]===null)this.state[Pe][Tt]={};else for(var Lt=0,It=Object.keys(this.deletedStates[Pe][Tt]);Lt<It.length;Lt+=1)delete this.state[Pe][Tt][It[Lt]];Xe[Tt]=this.state[Pe][Tt]}X[Pe]=X[Pe]||{},m(X[Pe],Xe)}if(this.stateChanges={},this.deletedStates={},Object.keys(X).length!==0)for(var Gt in _)_[Gt].setFeatureState(X,F)};var ps=function(_,F){this.tileID=_,this.x=_.canonical.x,this.y=_.canonical.y,this.z=_.canonical.z,this.grid=new Ul(8192,16,0),this.grid3D=new Ul(8192,16,0),this.featureIndexArray=new Ft,this.promoteId=F};function Ns(_,F,X,le,ye){return M(_,function(we,Pe){var Xe=F instanceof Cl?F.get(Pe):null;return Xe&&Xe.evaluate?Xe.evaluate(X,le,ye):Xe})}function Pf(_){for(var F=1/0,X=1/0,le=-1/0,ye=-1/0,we=0,Pe=_;we<Pe.length;we+=1){var Xe=Pe[we];F=Math.min(F,Xe.x),X=Math.min(X,Xe.y),le=Math.max(le,Xe.x),ye=Math.max(ye,Xe.y)}return{minX:F,minY:X,maxX:le,maxY:ye}}function Rf(_,F){return F-_}ps.prototype.insert=function(_,F,X,le,ye,we){var Pe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(X,le,ye);for(var Xe=we?this.grid3D:this.grid,ct=0;ct<F.length;ct++){for(var Tt=F[ct],Lt=[1/0,1/0,-1/0,-1/0],It=0;It<Tt.length;It++){var Gt=Tt[It];Lt[0]=Math.min(Lt[0],Gt.x),Lt[1]=Math.min(Lt[1],Gt.y),Lt[2]=Math.max(Lt[2],Gt.x),Lt[3]=Math.max(Lt[3],Gt.y)}Lt[0]<8192&&Lt[1]<8192&&Lt[2]>=0&&Lt[3]>=0&&Xe.insert(Pe,Lt[0],Lt[1],Lt[2],Lt[3])}},ps.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new th.VectorTile(new Uc(this.rawTileData)).layers,this.sourceLayerCoder=new Ap(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ps.prototype.query=function(_,F,X,le){var ye=this;this.loadVTLayers();for(var we=_.params||{},Pe=8192/_.tileSize/_.scale,Xe=Cc(we.filter),ct=_.queryGeometry,Tt=_.queryPadding*Pe,Lt=Pf(ct),It=this.grid.query(Lt.minX-Tt,Lt.minY-Tt,Lt.maxX+Tt,Lt.maxY+Tt),Gt=Pf(_.cameraQueryGeometry),Jt=this.grid3D.query(Gt.minX-Tt,Gt.minY-Tt,Gt.maxX+Tt,Gt.maxY+Tt,function(mn,gn,Ln,$n){return function(oa,_a,fa,Aa,ca){for(var Xa=0,Oa=oa;Xa<Oa.length;Xa+=1){var da=Oa[Xa];if(_a<=da.x&&fa<=da.y&&Aa>=da.x&&ca>=da.y)return!0}var ii=[new l(_a,fa),new l(_a,ca),new l(Aa,ca),new l(Aa,fa)];if(oa.length>2){for(var ja=0,pi=ii;ja<pi.length;ja+=1)if(Ll(oa,pi[ja]))return!0}for(var wa=0;wa<oa.length-1;wa++)if(mf(oa[wa],oa[wa+1],ii))return!0;return!1}(_.cameraQueryGeometry,mn-Tt,gn-Tt,Ln+Tt,$n+Tt)}),pr=0,dr=Jt;pr<dr.length;pr+=1)It.push(dr[pr]);It.sort(Rf);for(var zr,Ar={},Xr=function(mn){var gn=It[mn];if(gn!==zr){zr=gn;var Ln=ye.featureIndexArray.get(gn),$n=null;ye.loadMatchingFeature(Ar,Ln.bucketIndex,Ln.sourceLayerIndex,Ln.featureIndex,Xe,we.layers,we.availableImages,F,X,le,function(oa,_a,fa){return $n||($n=Ai(oa)),_a.queryIntersectsFeature(ct,oa,fa,$n,ye.z,_.transform,Pe,_.pixelPosMatrix)})}},rn=0;rn<It.length;rn++)Xr(rn);return Ar},ps.prototype.loadMatchingFeature=function(_,F,X,le,ye,we,Pe,Xe,ct,Tt,Lt){var It=this.bucketLayerIDs[F];if(!we||function($n,oa){for(var _a=0;_a<$n.length;_a++)if(oa.indexOf($n[_a])>=0)return!0;return!1}(we,It)){var Gt=this.sourceLayerCoder.decode(X),Jt=this.vtLayers[Gt].feature(le);if(ye.filter(new Za(this.tileID.overscaledZ),Jt))for(var pr=this.getId(Jt,Gt),dr=0;dr<It.length;dr++){var zr=It[dr];if(!(we&&we.indexOf(zr)<0)){var Ar=Xe[zr];if(Ar){var Xr={};pr!==void 0&&Tt&&(Xr=Tt.getState(Ar.sourceLayer||"_geojsonTileLayer",pr));var rn=ct[zr];rn.paint=Ns(rn.paint,Ar.paint,Jt,Xr,Pe),rn.layout=Ns(rn.layout,Ar.layout,Jt,Xr,Pe);var mn=!Lt||Lt(Jt,Ar,Xr);if(mn){var gn=new hl(Jt,this.z,this.x,this.y,pr);gn.layer=rn;var Ln=_[zr];Ln===void 0&&(Ln=_[zr]=[]),Ln.push({featureIndex:le,feature:gn,intersectionZ:mn})}}}}}},ps.prototype.lookupSymbolFeatures=function(_,F,X,le,ye,we,Pe,Xe){var ct={};this.loadVTLayers();for(var Tt=Cc(ye),Lt=0,It=_;Lt<It.length;Lt+=1)this.loadMatchingFeature(ct,X,le,It[Lt],Tt,we,Pe,Xe,F);return ct},ps.prototype.hasLayer=function(_){for(var F=0,X=this.bucketLayerIDs;F<X.length;F+=1)for(var le=0,ye=X[F];le<ye.length;le+=1)if(_===ye[le])return!0;return!1},ps.prototype.getId=function(_,F){var X=_.id;return this.promoteId&&typeof(X=_.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[F]])=="boolean"&&(X=Number(X)),X},ga("FeatureIndex",ps,{omit:["rawTileData","sourceLayerCoder"]});var Yi=function(_,F){this.tileID=_,this.uid=y(),this.uses=0,this.tileSize=F,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Yi.prototype.registerFadeDuration=function(_){var F=_+this.timeAdded;F<J.now()||this.fadeEndTime&&F<this.fadeEndTime||(this.fadeEndTime=F)},Yi.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Yi.prototype.loadVectorData=function(_,F,X){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",_){for(var le in _.featureIndex&&(this.latestFeatureIndex=_.featureIndex,_.rawTileData?(this.latestRawTileData=_.rawTileData,this.latestFeatureIndex.rawTileData=_.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=_.collisionBoxArray,this.buckets=function(Tt,Lt){var It={};if(!Lt)return It;for(var Gt=function(){var dr=pr[Jt],zr=dr.layerIds.map(function(rn){return Lt.getLayer(rn)}).filter(Boolean);if(zr.length!==0){dr.layers=zr,dr.stateDependentLayerIds&&(dr.stateDependentLayers=dr.stateDependentLayerIds.map(function(rn){return zr.filter(function(mn){return mn.id===rn})[0]}));for(var Ar=0,Xr=zr;Ar<Xr.length;Ar+=1)It[Xr[Ar].id]=dr}},Jt=0,pr=Tt;Jt<pr.length;Jt+=1)Gt();return It}(_.buckets,F.style),this.hasSymbolBuckets=!1,this.buckets){var ye=this.buckets[le];if(ye instanceof qt){if(this.hasSymbolBuckets=!0,!X)break;ye.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var we in this.buckets){var Pe=this.buckets[we];if(Pe instanceof qt&&Pe.hasRTLText){this.hasRTLText=!0,Co.isLoading()||Co.isLoaded()||Pc()!=="deferred"||Xf();break}}for(var Xe in this.queryPadding=0,this.buckets){var ct=this.buckets[Xe];this.queryPadding=Math.max(this.queryPadding,F.style.getLayer(Xe).queryRadius(ct))}_.imageAtlas&&(this.imageAtlas=_.imageAtlas),_.glyphAtlasImage&&(this.glyphAtlasImage=_.glyphAtlasImage)}else this.collisionBoxArray=new ee},Yi.prototype.unloadVectorData=function(){for(var _ in this.buckets)this.buckets[_].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Yi.prototype.getBucket=function(_){return this.buckets[_.id]},Yi.prototype.upload=function(_){for(var F in this.buckets){var X=this.buckets[F];X.uploadPending()&&X.upload(_)}var le=_.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Zn(_,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Zn(_,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},Yi.prototype.prepare=function(_){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(_,this.imageAtlasTexture)},Yi.prototype.queryRenderedFeatures=function(_,F,X,le,ye,we,Pe,Xe,ct,Tt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:ye,scale:we,tileSize:this.tileSize,pixelPosMatrix:Tt,transform:Xe,params:Pe,queryPadding:this.queryPadding*ct},_,F,X):{}},Yi.prototype.querySourceFeatures=function(_,F){var X=this.latestFeatureIndex;if(X&&X.rawTileData){var le=X.loadVTLayers(),ye=F?F.sourceLayer:"",we=le._geojsonTileLayer||le[ye];if(we)for(var Pe=Cc(F&&F.filter),Xe=this.tileID.canonical,ct=Xe.z,Tt=Xe.x,Lt=Xe.y,It={z:ct,x:Tt,y:Lt},Gt=0;Gt<we.length;Gt++){var Jt=we.feature(Gt);if(Pe.filter(new Za(this.tileID.overscaledZ),Jt)){var pr=X.getId(Jt,ye),dr=new hl(Jt,ct,Tt,Lt,pr);dr.tile=It,_.push(dr)}}}},Yi.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Yi.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Yi.prototype.setExpiryData=function(_){var F=this.expirationTime;if(_.cacheControl){var X=O(_.cacheControl);X["max-age"]&&(this.expirationTime=Date.now()+1e3*X["max-age"])}else _.expires&&(this.expirationTime=new Date(_.expires).getTime());if(this.expirationTime){var le=Date.now(),ye=!1;if(this.expirationTime>le)ye=!1;else if(F)if(this.expirationTime<F)ye=!0;else{var we=this.expirationTime-F;we?this.expirationTime=le+Math.max(we,3e4):ye=!0}else ye=!0;ye?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Yi.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Yi.prototype.setFeatureState=function(_,F){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(_).length!==0){var X=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(F.style.hasLayer(le)){var ye=this.buckets[le],we=ye.layers[0].sourceLayer||"_geojsonTileLayer",Pe=X[we],Xe=_[we];if(Pe&&Xe&&Object.keys(Xe).length!==0){ye.update(Xe,Pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=F&&F.style&&F.style.getLayer(le);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(ye)))}}}},Yi.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Yi.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<J.now()},Yi.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Yi.prototype.setHoldDuration=function(_){this.symbolFadeHoldUntil=J.now()+_},Yi.prototype.setDependencies=function(_,F){for(var X={},le=0,ye=F;le<ye.length;le+=1)X[ye[le]]=!0;this.dependencies[_]=X},Yi.prototype.hasDependency=function(_,F){for(var X=0,le=_;X<le.length;X+=1){var ye=this.dependencies[le[X]];if(ye){for(var we=0,Pe=F;we<Pe.length;we+=1)if(ye[Pe[we]])return!0}}return!1};var yu=self.performance,xv=function(_){this._marks={start:[_.url,"start"].join("#"),end:[_.url,"end"].join("#"),measure:_.url.toString()},yu.mark(this._marks.start)};xv.prototype.finish=function(){yu.mark(this._marks.end);var _=yu.getEntriesByName(this._marks.measure);return _.length===0&&(yu.measure(this._marks.measure,this._marks.start,this._marks.end),_=yu.getEntriesByName(this._marks.measure),yu.clearMarks(this._marks.start),yu.clearMarks(this._marks.end),yu.clearMeasures(this._marks.measure)),_},t.Actor=Pn,t.AlphaImage=el,t.CanonicalTileID=Ao,t.CollisionBoxArray=ee,t.Color=cr,t.DEMData=rl,t.DataConstantProperty=ma,t.DictionaryCoder=Ap,t.EXTENT=8192,t.ErrorEvent=Ve,t.EvaluationParameters=Za,t.Event=Le,t.Evented=Qe,t.FeatureIndex=ps,t.FillBucket=Gl,t.FillExtrusionBucket=jl,t.ImageAtlas=Nh,t.ImagePosition=bp,t.LineBucket=Wo,t.LngLat=Tn,t.LngLatBounds=an,t.MercatorCoordinate=To,t.ONE_EM=24,t.OverscaledTileID=hi,t.Point=l,t.Point$1=l,t.Properties=$i,t.Protobuf=Uc,t.RGBAImage=ro,t.RequestManager=te,t.RequestPerformance=xv,t.ResourceType=_t,t.SegmentVector=nr,t.SourceFeatureState=hs,t.StructArrayLayout1ui2=Iu,t.StructArrayLayout2f1f2i16=vf,t.StructArrayLayout2i4=ic,t.StructArrayLayout3ui6=sl,t.StructArrayLayout4i8=er,t.SymbolBucket=qt,t.Texture=Zn,t.Tile=Yi,t.Transitionable=Eo,t.Uniform1f=Jn,t.Uniform1i=zn,t.Uniform2f=Hn,t.Uniform3f=qn,t.Uniform4f=ua,t.UniformColor=za,t.UniformMatrix4f=qa,t.UnwrappedTileID=tl,t.ValidationError=Ie,t.WritingMode=fl,t.ZoomHistory=kl,t.add=function(_,F,X){return _[0]=F[0]+X[0],_[1]=F[1]+X[1],_[2]=F[2]+X[2],_},t.addDynamicAttributes=pt,t.asyncAll=function(_,F,X){if(!_.length)return X(null,[]);var le=_.length,ye=new Array(_.length),we=null;_.forEach(function(Pe,Xe){F(Pe,function(ct,Tt){ct&&(we=ct),ye[Xe]=Tt,--le==0&&X(we,ye)})})},t.bezier=i,t.bindAll=g,t.browser=J,t.cacheEntryPossiblyAdded=function(_){++Ne>Be&&(_.getActor().send("enforceCacheSizeLimit",Ae),Ne=0)},t.clamp=p,t.clearTileCache=function(_){var F=self.caches.delete("mapbox-tiles");_&&F.catch(_).then(function(){return _()})},t.clipLine=yv,t.clone=function(_){var F=new fo(16);return F[0]=_[0],F[1]=_[1],F[2]=_[2],F[3]=_[3],F[4]=_[4],F[5]=_[5],F[6]=_[6],F[7]=_[7],F[8]=_[8],F[9]=_[9],F[10]=_[10],F[11]=_[11],F[12]=_[12],F[13]=_[13],F[14]=_[14],F[15]=_[15],F},t.clone$1=L,t.clone$2=function(_){var F=new fo(3);return F[0]=_[0],F[1]=_[1],F[2]=_[2],F},t.collisionCircleLayout=hd,t.config=ne,t.create=function(){var _=new fo(16);return fo!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=0,_[12]=0,_[13]=0,_[14]=0),_[0]=1,_[5]=1,_[10]=1,_[15]=1,_},t.create$1=function(){var _=new fo(9);return fo!=Float32Array&&(_[1]=0,_[2]=0,_[3]=0,_[5]=0,_[6]=0,_[7]=0),_[0]=1,_[4]=1,_[8]=1,_},t.create$2=function(){var _=new fo(4);return fo!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_},t.createCommonjsModule=f,t.createExpression=Es,t.createLayout=Oi,t.createStyleLayer=function(_){return _.type==="custom"?new en(_):new Jr[_.type](_)},t.cross=function(_,F,X){var le=F[0],ye=F[1],we=F[2],Pe=X[0],Xe=X[1],ct=X[2];return _[0]=ye*ct-we*Xe,_[1]=we*Pe-le*ct,_[2]=le*Xe-ye*Pe,_},t.deepEqual=function _(F,X){if(Array.isArray(F)){if(!Array.isArray(X)||F.length!==X.length)return!1;for(var le=0;le<F.length;le++)if(!_(F[le],X[le]))return!1;return!0}if(typeof F=="object"&&F!==null&&X!==null){if(typeof X!="object"||Object.keys(F).length!==Object.keys(X).length)return!1;for(var ye in F)if(!_(F[ye],X[ye]))return!1;return!0}return F===X},t.dot=function(_,F){return _[0]*F[0]+_[1]*F[1]+_[2]*F[2]},t.dot$1=function(_,F){return _[0]*F[0]+_[1]*F[1]+_[2]*F[2]+_[3]*F[3]},t.ease=s,t.emitValidationErrors=Li,t.endsWith=T,t.enforceCacheSizeLimit=function(_){$e(),ke&&ke.then(function(F){F.keys().then(function(X){for(var le=0;le<X.length-_;le++)F.delete(X[le])})})},t.evaluateSizeForFeature=sh,t.evaluateSizeForZoom=lh,t.evaluateVariableOffset=ue,t.evented=Lc,t.extend=m,t.featureFilter=Cc,t.filterObject=P,t.fromRotation=function(_,F){var X=Math.sin(F),le=Math.cos(F);return _[0]=le,_[1]=X,_[2]=0,_[3]=-X,_[4]=le,_[5]=0,_[6]=0,_[7]=0,_[8]=1,_},t.getAnchorAlignment=mu,t.getAnchorJustification=ge,t.getArrayBuffer=Mt,t.getImage=ft,t.getJSON=function(_,F){return Zt(m(_,{type:"json"}),F)},t.getRTLTextPluginStatus=Pc,t.getReferrer=Wt,t.getVideo=function(_,F){var X,le,ye=self.document.createElement("video");ye.muted=!0,ye.onloadstart=function(){F(null,ye)};for(var we=0;we<_.length;we++){var Pe=self.document.createElement("source");X=_[we],le=void 0,(le=self.document.createElement("a")).href=X,(le.protocol!==self.document.location.protocol||le.host!==self.document.location.host)&&(ye.crossOrigin="Anonymous"),Pe.src=_[we],ye.appendChild(Pe)}return{cancel:function(){}}},t.identity=Nu,t.invert=function(_,F){var X=F[0],le=F[1],ye=F[2],we=F[3],Pe=F[4],Xe=F[5],ct=F[6],Tt=F[7],Lt=F[8],It=F[9],Gt=F[10],Jt=F[11],pr=F[12],dr=F[13],zr=F[14],Ar=F[15],Xr=X*Xe-le*Pe,rn=X*ct-ye*Pe,mn=X*Tt-we*Pe,gn=le*ct-ye*Xe,Ln=le*Tt-we*Xe,$n=ye*Tt-we*ct,oa=Lt*dr-It*pr,_a=Lt*zr-Gt*pr,fa=Lt*Ar-Jt*pr,Aa=It*zr-Gt*dr,ca=It*Ar-Jt*dr,Xa=Gt*Ar-Jt*zr,Oa=Xr*Xa-rn*ca+mn*Aa+gn*fa-Ln*_a+$n*oa;return Oa?(_[0]=(Xe*Xa-ct*ca+Tt*Aa)*(Oa=1/Oa),_[1]=(ye*ca-le*Xa-we*Aa)*Oa,_[2]=(dr*$n-zr*Ln+Ar*gn)*Oa,_[3]=(Gt*Ln-It*$n-Jt*gn)*Oa,_[4]=(ct*fa-Pe*Xa-Tt*_a)*Oa,_[5]=(X*Xa-ye*fa+we*_a)*Oa,_[6]=(zr*mn-pr*$n-Ar*rn)*Oa,_[7]=(Lt*$n-Gt*mn+Jt*rn)*Oa,_[8]=(Pe*ca-Xe*fa+Tt*oa)*Oa,_[9]=(le*fa-X*ca-we*oa)*Oa,_[10]=(pr*Ln-dr*mn+Ar*Xr)*Oa,_[11]=(It*mn-Lt*Ln-Jt*Xr)*Oa,_[12]=(Xe*_a-Pe*Aa-ct*oa)*Oa,_[13]=(X*Aa-le*_a+ye*oa)*Oa,_[14]=(dr*rn-pr*gn-zr*Xr)*Oa,_[15]=(Lt*gn-It*rn+Gt*Xr)*Oa,_):null},t.isChar=ea,t.isMapboxURL=re,t.keysDifference=function(_,F){var X=[];for(var le in _)le in F||X.push(le);return X},t.makeRequest=Zt,t.mapObject=M,t.mercatorXfromLng=Wa,t.mercatorYfromLat=_i,t.mercatorZfromAltitude=Ii,t.mul=bs,t.multiply=to,t.mvt=th,t.normalize=function(_,F){var X=F[0],le=F[1],ye=F[2],we=X*X+le*le+ye*ye;return we>0&&(we=1/Math.sqrt(we)),_[0]=F[0]*we,_[1]=F[1]*we,_[2]=F[2]*we,_},t.number=Ir,t.offscreenCanvasSupported=st,t.ortho=function(_,F,X,le,ye,we,Pe){var Xe=1/(F-X),ct=1/(le-ye),Tt=1/(we-Pe);return _[0]=-2*Xe,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=-2*ct,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=2*Tt,_[11]=0,_[12]=(F+X)*Xe,_[13]=(ye+le)*ct,_[14]=(Pe+we)*Tt,_[15]=1,_},t.parseGlyphPBF=function(_){return new Uc(_).readFields(T0,[])},t.pbf=Uc,t.performSymbolLayout=function(_,F,X,le,ye,we,Pe){_.createArrays(),_.tilePixelRatio=8192/(512*_.overscaling),_.compareText={},_.iconsNeedLinear=!1;var Xe=_.layers[0].layout,ct=_.layers[0]._unevaluatedLayout._values,Tt={};if(_.textSizeData.kind==="composite"){var Lt=_.textSizeData,It=Lt.maxZoom;Tt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new Za(Lt.minZoom),Pe),ct["text-size"].possiblyEvaluate(new Za(It),Pe)]}if(_.iconSizeData.kind==="composite"){var Gt=_.iconSizeData,Jt=Gt.maxZoom;Tt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new Za(Gt.minZoom),Pe),ct["icon-size"].possiblyEvaluate(new Za(Jt),Pe)]}Tt.layoutTextSize=ct["text-size"].possiblyEvaluate(new Za(_.zoom+1),Pe),Tt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new Za(_.zoom+1),Pe),Tt.textMaxSize=ct["text-size"].possiblyEvaluate(new Za(18));for(var pr=24*Xe.get("text-line-height"),dr=Xe.get("text-rotation-alignment")==="map"&&Xe.get("symbol-placement")!=="point",zr=Xe.get("text-keep-upright"),Ar=Xe.get("text-size"),Xr=function(){var gn=mn[rn],Ln=Xe.get("text-font").evaluate(gn,{},Pe).join(","),$n=Ar.evaluate(gn,{},Pe),oa=Tt.layoutTextSize.evaluate(gn,{},Pe),_a=Tt.layoutIconSize.evaluate(gn,{},Pe),fa={horizontal:{},vertical:void 0},Aa=gn.text,ca=[0,0];if(Aa){var Xa=Aa.toString(),Oa=24*Xe.get("text-letter-spacing").evaluate(gn,{},Pe),da=function(ci){for(var Ri=0,Zi=ci;Ri<Zi.length;Ri+=1)if(vi=Zi[Ri].charCodeAt(0),ea.Arabic(vi)||ea["Arabic Supplement"](vi)||ea["Arabic Extended-A"](vi)||ea["Arabic Presentation Forms-A"](vi)||ea["Arabic Presentation Forms-B"](vi))return!1;var vi;return!0}(Xa)?Oa:0,ii=Xe.get("text-anchor").evaluate(gn,{},Pe),ja=Xe.get("text-variable-anchor");if(!ja){var pi=Xe.get("text-radial-offset").evaluate(gn,{},Pe);ca=pi?ue(ii,[24*pi,W]):Xe.get("text-offset").evaluate(gn,{},Pe).map(function(ci){return 24*ci})}var wa=dr?"center":Xe.get("text-justify").evaluate(gn,{},Pe),yi=Xe.get("symbol-placement"),Ui=yi==="point"?24*Xe.get("text-max-width").evaluate(gn,{},Pe):0,Ko=function(){_.allowVerticalPlacement&&_o(Xa)&&(fa.vertical=ah(Aa,F,X,ye,Ln,Ui,pr,ii,"left",da,ca,fl.vertical,!0,yi,oa,$n))};if(!dr&&ja){for(var Jo=wa==="auto"?ja.map(function(ci){return ge(ci)}):[wa],Xi=!1,oo=0;oo<Jo.length;oo++){var zi=Jo[oo];if(!fa.horizontal[zi])if(Xi)fa.horizontal[zi]=fa.horizontal[0];else{var Lo=ah(Aa,F,X,ye,Ln,Ui,pr,"center",zi,da,ca,fl.horizontal,!1,yi,oa,$n);Lo&&(fa.horizontal[zi]=Lo,Xi=Lo.positionedLines.length===1)}}Ko()}else{wa==="auto"&&(wa=ge(ii));var Bs=ah(Aa,F,X,ye,Ln,Ui,pr,ii,wa,da,ca,fl.horizontal,!1,yi,oa,$n);Bs&&(fa.horizontal[wa]=Bs),Ko(),_o(Xa)&&dr&&zr&&(fa.vertical=ah(Aa,F,X,ye,Ln,Ui,pr,ii,wa,da,ca,fl.vertical,!1,yi,oa,$n))}}var Po=void 0,Us=!1;if(gn.icon&&gn.icon.name){var Ro=le[gn.icon.name];Ro&&(Po=function(ci,Ri,Zi){var vi=mu(Zi),Mo=Ri[0]-ci.displaySize[0]*vi.horizontalAlign,ws=Ri[1]-ci.displaySize[1]*vi.verticalAlign;return{image:ci,top:ws,bottom:ws+ci.displaySize[1],left:Mo,right:Mo+ci.displaySize[0]}}(ye[gn.icon.name],Xe.get("icon-offset").evaluate(gn,{},Pe),Xe.get("icon-anchor").evaluate(gn,{},Pe)),Us=Ro.sdf,_.sdfIcons===void 0?_.sdfIcons=Ro.sdf:_.sdfIcons!==Ro.sdf&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ro.pixelRatio!==_.pixelRatio||Xe.get("icon-rotate").constantOr(1)!==0)&&(_.iconsNeedLinear=!0))}var Do=Ce(fa.horizontal)||fa.vertical;_.iconsInText=!!Do&&Do.iconsInText,(Do||Po)&&function(ci,Ri,Zi,vi,Mo,ws,$o,ho,Qo,Ki,Ci){var Yl=ws.textMaxSize.evaluate(Ri,{});Yl===void 0&&(Yl=$o);var Zc,Vi=ci.layers[0].layout,Ka=Vi.get("icon-offset").evaluate(Ri,{},Ci),Hu=Ce(Zi.horizontal),Ts=$o/24,so=ci.tilePixelRatio*Ts,Mp=ci.tilePixelRatio*Yl/24,pl=ci.tilePixelRatio*ho,kp=ci.tilePixelRatio*Vi.get("symbol-spacing"),Td=Vi.get("text-padding")*ci.tilePixelRatio,Sp=Vi.get("icon-padding")*ci.tilePixelRatio,bv=Vi.get("text-max-angle")/180*Math.PI,Ad=Vi.get("text-rotation-alignment")==="map"&&Vi.get("symbol-placement")!=="point",Cp=Vi.get("icon-rotation-alignment")==="map"&&Vi.get("symbol-placement")!=="point",Df=Vi.get("symbol-placement"),xu=kp/2,Hh=Vi.get("icon-text-fit");vi&&Hh!=="none"&&(ci.allowVerticalPlacement&&Zi.vertical&&(Zc=jc(vi,Zi.vertical,Hh,Vi.get("icon-text-fit-padding"),Ka,Ts)),Hu&&(vi=jc(vi,Hu,Hh,Vi.get("icon-text-fit-padding"),Ka,Ts)));var vc=function(Vm,bu){bu.x<0||bu.x>=8192||bu.y<0||bu.y>=8192||function(La,Gu,ju,If,S0,Hi,kd,mc,Gh,Cv,Sd,Cd,C0,Hm,Ev,Gm,jm,Wm,Ym,Xm,Xl,Ed,Ld,$c,E0){var Zm,jh,Rp,Io,As,Dp=La.addToLineVertexArray(Gu,ju),Km=0,Jm=0,L0=0,$m=0,P0=-1,R0=-1,Qc={},Qm=gr(""),D0=0,I0=0;if(mc._unevaluatedLayout.getValue("text-radial-offset")===void 0?(D0=(Zm=mc.layout.get("text-offset").evaluate(Xl,{},$c).map(function(Lv){return 24*Lv}))[0],I0=Zm[1]):(D0=24*mc.layout.get("text-radial-offset").evaluate(Xl,{},$c),I0=W),La.allowVerticalPlacement&&If.vertical){var z0=mc.layout.get("text-rotate").evaluate(Xl,{},$c)+90;Io=new Tp(Gh,Gu,Cv,Sd,Cd,If.vertical,C0,Hm,Ev,z0),kd&&(As=new Tp(Gh,Gu,Cv,Sd,Cd,kd,jm,Wm,Ev,z0))}if(S0){var Pd=mc.layout.get("icon-rotate").evaluate(Xl,{}),qm=mc.layout.get("icon-text-fit")!=="none",eg=wp(S0,Pd,Ld,qm),F0=kd?wp(kd,Pd,Ld,qm):void 0;Rp=new Tp(Gh,Gu,Cv,Sd,Cd,S0,jm,Wm,!1,Pd),Km=4*eg.length;var tg=La.iconSizeData,qc=null;tg.kind==="source"?(qc=[128*mc.layout.get("icon-size").evaluate(Xl,{})])[0]>32640&&C(La.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):tg.kind==="composite"&&((qc=[128*Ed.compositeIconSizes[0].evaluate(Xl,{},$c),128*Ed.compositeIconSizes[1].evaluate(Xl,{},$c)])[0]>32640||qc[1]>32640)&&C(La.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),La.addSymbols(La.icon,eg,qc,Xm,Ym,Xl,!1,Gu,Dp.lineStartIndex,Dp.lineLength,-1,$c),P0=La.icon.placedSymbolArray.length-1,F0&&(Jm=4*F0.length,La.addSymbols(La.icon,F0,qc,Xm,Ym,Xl,fl.vertical,Gu,Dp.lineStartIndex,Dp.lineLength,-1,$c),R0=La.icon.placedSymbolArray.length-1)}for(var rg in If.horizontal){var Rd=If.horizontal[rg];if(!jh){Qm=gr(Rd.text);var e1=mc.layout.get("text-rotate").evaluate(Xl,{},$c);jh=new Tp(Gh,Gu,Cv,Sd,Cd,Rd,C0,Hm,Ev,e1)}var ng=Rd.positionedLines.length===1;if(L0+=_e(La,Gu,Rd,Hi,mc,Ev,Xl,Gm,Dp,If.vertical?fl.horizontal:fl.horizontalOnly,ng?Object.keys(If.horizontal):[rg],Qc,P0,Ed,$c),ng)break}If.vertical&&($m+=_e(La,Gu,If.vertical,Hi,mc,Ev,Xl,Gm,Dp,fl.vertical,["vertical"],Qc,R0,Ed,$c));var t1=jh?jh.boxStartIndex:La.collisionBoxArray.length,ag=jh?jh.boxEndIndex:La.collisionBoxArray.length,ig=Io?Io.boxStartIndex:La.collisionBoxArray.length,r1=Io?Io.boxEndIndex:La.collisionBoxArray.length,n1=Rp?Rp.boxStartIndex:La.collisionBoxArray.length,a1=Rp?Rp.boxEndIndex:La.collisionBoxArray.length,i1=As?As.boxStartIndex:La.collisionBoxArray.length,o1=As?As.boxEndIndex:La.collisionBoxArray.length,ef=-1,Dd=function(Lv,sg){return Lv&&Lv.circleDiameter?Math.max(Lv.circleDiameter,sg):sg};ef=Dd(jh,ef),ef=Dd(Io,ef),ef=Dd(Rp,ef);var og=(ef=Dd(As,ef))>-1?1:0;og&&(ef*=E0/24),La.glyphOffsetArray.length>=qt.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xl.sortKey!==void 0&&La.addToSortKeyRanges(La.symbolInstances.length,Xl.sortKey),La.symbolInstances.emplaceBack(Gu.x,Gu.y,Qc.right>=0?Qc.right:-1,Qc.center>=0?Qc.center:-1,Qc.left>=0?Qc.left:-1,Qc.vertical||-1,P0,R0,Qm,t1,ag,ig,r1,n1,a1,i1,o1,Cv,L0,$m,Km,Jm,og,0,C0,D0,I0,ef)}(ci,bu,Vm,Zi,vi,Mo,Zc,ci.layers[0],ci.collisionBoxArray,Ri.index,Ri.sourceLayerIndex,ci.index,so,Td,Ad,Qo,pl,Sp,Cp,Ka,Ri,ws,Ki,Ci,$o)};if(Df==="line")for(var no=0,xo=yv(Ri.geometry,0,0,8192,8192);no<xo.length;no+=1)for(var _v=xo[no],wv=0,Tv=xd(_v,kp,bv,Zi.vertical||Hu,vi,24,Mp,ci.overscaling,8192);wv<Tv.length;wv+=1){var Md=Tv[wv];Hu&&De(ci,Hu.text,xu,Md)||vc(_v,Md)}else if(Df==="line-center")for(var Av=0,Mv=Ri.geometry;Av<Mv.length;Av+=1){var kv=Mv[Av];if(kv.length>1){var Sv=gv(kv,bv,Zi.vertical||Hu,vi,24,Mp);Sv&&vc(kv,Sv)}}else if(Ri.type==="Polygon")for(var Kc=0,Ep=wf(Ri.geometry,0);Kc<Ep.length;Kc+=1){var Lp=Ep[Kc],Pp=_d(Lp,16);vc(Lp[0],new Wc(Pp.x,Pp.y,0))}else if(Ri.type==="LineString")for(var Jc=0,nl=Ri.geometry;Jc<nl.length;Jc+=1){var dc=nl[Jc];vc(dc,new Wc(dc[0].x,dc[0].y,0))}else if(Ri.type==="Point")for(var A0=0,Bm=Ri.geometry;A0<Bm.length;A0+=1)for(var M0=0,Um=Bm[A0];M0<Um.length;M0+=1){var k0=Um[M0];vc([k0],new Wc(k0.x,k0.y,0))}}(_,gn,fa,Po,le,Tt,oa,_a,ca,Us,Pe)},rn=0,mn=_.features;rn<mn.length;rn+=1)Xr();we&&_.generateCollisionDebugBuffers()},t.perspective=function(_,F,X,le,ye){var we,Pe=1/Math.tan(F/2);return _[0]=Pe/X,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=Pe,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[11]=-1,_[12]=0,_[13]=0,_[15]=0,ye!=null&&ye!==1/0?(_[10]=(ye+le)*(we=1/(le-ye)),_[14]=2*ye*le*we):(_[10]=-1,_[14]=-2*le),_},t.pick=function(_,F){for(var X={},le=0;le<F.length;le++){var ye=F[le];ye in _&&(X[ye]=_[ye])}return X},t.plugin=Co,t.polygonIntersectsPolygon=ul,t.postMapLoadEvent=Ee,t.postTurnstileEvent=Je,t.potpack=Oh,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=ga,t.registerForPluginStateChange=function(_){return _({pluginStatus:us,pluginURL:Zs}),Lc.on("pluginStateChange",_),_},t.rotate=function(_,F,X){var le=F[0],ye=F[1],we=F[2],Pe=F[3],Xe=Math.sin(X),ct=Math.cos(X);return _[0]=le*ct+we*Xe,_[1]=ye*ct+Pe*Xe,_[2]=le*-Xe+we*ct,_[3]=ye*-Xe+Pe*ct,_},t.rotateX=function(_,F,X){var le=Math.sin(X),ye=Math.cos(X),we=F[4],Pe=F[5],Xe=F[6],ct=F[7],Tt=F[8],Lt=F[9],It=F[10],Gt=F[11];return F!==_&&(_[0]=F[0],_[1]=F[1],_[2]=F[2],_[3]=F[3],_[12]=F[12],_[13]=F[13],_[14]=F[14],_[15]=F[15]),_[4]=we*ye+Tt*le,_[5]=Pe*ye+Lt*le,_[6]=Xe*ye+It*le,_[7]=ct*ye+Gt*le,_[8]=Tt*ye-we*le,_[9]=Lt*ye-Pe*le,_[10]=It*ye-Xe*le,_[11]=Gt*ye-ct*le,_},t.rotateZ=function(_,F,X){var le=Math.sin(X),ye=Math.cos(X),we=F[0],Pe=F[1],Xe=F[2],ct=F[3],Tt=F[4],Lt=F[5],It=F[6],Gt=F[7];return F!==_&&(_[8]=F[8],_[9]=F[9],_[10]=F[10],_[11]=F[11],_[12]=F[12],_[13]=F[13],_[14]=F[14],_[15]=F[15]),_[0]=we*ye+Tt*le,_[1]=Pe*ye+Lt*le,_[2]=Xe*ye+It*le,_[3]=ct*ye+Gt*le,_[4]=Tt*ye-we*le,_[5]=Lt*ye-Pe*le,_[6]=It*ye-Xe*le,_[7]=Gt*ye-ct*le,_},t.scale=function(_,F,X){var le=X[0],ye=X[1],we=X[2];return _[0]=F[0]*le,_[1]=F[1]*le,_[2]=F[2]*le,_[3]=F[3]*le,_[4]=F[4]*ye,_[5]=F[5]*ye,_[6]=F[6]*ye,_[7]=F[7]*ye,_[8]=F[8]*we,_[9]=F[9]*we,_[10]=F[10]*we,_[11]=F[11]*we,_[12]=F[12],_[13]=F[13],_[14]=F[14],_[15]=F[15],_},t.scale$1=function(_,F,X){return _[0]=F[0]*X,_[1]=F[1]*X,_[2]=F[2]*X,_[3]=F[3]*X,_},t.scale$2=function(_,F,X){return _[0]=F[0]*X,_[1]=F[1]*X,_[2]=F[2]*X,_},t.setCacheLimits=function(_,F){Ae=_,Be=F},t.setRTLTextPlugin=function(_,F,X){if(X===void 0&&(X=!1),us==="deferred"||us==="loading"||us==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Zs=J.resolveURL(_),us="deferred",nc=F,Ec(),X||Xf()},t.sphericalToCartesian=function(_){var F=_[0],X=_[1],le=_[2];return X+=90,X*=Math.PI/180,le*=Math.PI/180,{x:F*Math.cos(X)*Math.sin(le),y:F*Math.sin(X)*Math.sin(le),z:F*Math.cos(le)}},t.sqrLen=function(_){var F=_[0],X=_[1];return F*F+X*X},t.styleSpec=Me,t.sub=function(_,F,X){return _[0]=F[0]-X[0],_[1]=F[1]-X[1],_[2]=F[2]-X[2],_},t.symbolSize=gd,t.transformMat3=function(_,F,X){var le=F[0],ye=F[1],we=F[2];return _[0]=le*X[0]+ye*X[3]+we*X[6],_[1]=le*X[1]+ye*X[4]+we*X[7],_[2]=le*X[2]+ye*X[5]+we*X[8],_},t.transformMat4=vu,t.translate=function(_,F,X){var le,ye,we,Pe,Xe,ct,Tt,Lt,It,Gt,Jt,pr,dr=X[0],zr=X[1],Ar=X[2];return F===_?(_[12]=F[0]*dr+F[4]*zr+F[8]*Ar+F[12],_[13]=F[1]*dr+F[5]*zr+F[9]*Ar+F[13],_[14]=F[2]*dr+F[6]*zr+F[10]*Ar+F[14],_[15]=F[3]*dr+F[7]*zr+F[11]*Ar+F[15]):(ye=F[1],we=F[2],Pe=F[3],Xe=F[4],ct=F[5],Tt=F[6],Lt=F[7],It=F[8],Gt=F[9],Jt=F[10],pr=F[11],_[0]=le=F[0],_[1]=ye,_[2]=we,_[3]=Pe,_[4]=Xe,_[5]=ct,_[6]=Tt,_[7]=Lt,_[8]=It,_[9]=Gt,_[10]=Jt,_[11]=pr,_[12]=le*dr+Xe*zr+It*Ar+F[12],_[13]=ye*dr+ct*zr+Gt*Ar+F[13],_[14]=we*dr+Tt*zr+Jt*Ar+F[14],_[15]=Pe*dr+Lt*zr+pr*Ar+F[15]),_},t.triggerPluginCompletionEvent=ac,t.uniqueId=y,t.validateCustomStyleLayer=function(_){var F=[],X=_.id;return X===void 0&&F.push({message:"layers."+X+': missing required property "id"'}),_.render===void 0&&F.push({message:"layers."+X+': missing required method "render"'}),_.renderingMode&&_.renderingMode!=="2d"&&_.renderingMode!=="3d"&&F.push({message:"layers."+X+': property "renderingMode" must be either "2d" or "3d"'}),F},t.validateLight=lu,t.validateStyle=Ml,t.values=function(_){var F=[];for(var X in _)F.push(_[X]);return F},t.vectorTile=th,t.version="1.10.1",t.warnOnce=C,t.webpSupported=ve,t.window=self,t.wrap=v}),c(["./shared"],function(t){function f(Te){var Le=typeof Te;if(Le==="number"||Le==="boolean"||Le==="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){for(var Ve="[",Qe=0,Me=Te;Qe<Me.length;Qe+=1)Ve+=f(Me[Qe])+",";return Ve+"]"}for(var Ie=Object.keys(Te).sort(),He="{",Ye=0;Ye<Ie.length;Ye++)He+=JSON.stringify(Ie[Ye])+":"+f(Te[Ie[Ye]])+",";return He+"}"}function n(Te){for(var Le="",Ve=0,Qe=t.refProperties;Ve<Qe.length;Ve+=1)Le+="/"+f(Te[Qe[Ve]]);return Le}var o=function(Te){this.keyCache={},Te&&this.replace(Te)};o.prototype.replace=function(Te){this._layerConfigs={},this._layers={},this.update(Te,[])},o.prototype.update=function(Te,Le){for(var Ve=this,Qe=0,Me=Te;Qe<Me.length;Qe+=1){var Ie=Me[Qe];this._layerConfigs[Ie.id]=Ie;var He=this._layers[Ie.id]=t.createStyleLayer(Ie);He._featureFilter=t.featureFilter(He.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(var Ye=0,ut=Le;Ye<ut.length;Ye+=1){var nt=ut[Ye];delete this.keyCache[nt],delete this._layerConfigs[nt],delete this._layers[nt]}this.familiesBySource={};for(var Ge=0,at=function(Oe,mt){for(var wt={},yt=0;yt<Oe.length;yt++){var St=mt&&mt[Oe[yt].id]||n(Oe[yt]);mt&&(mt[Oe[yt].id]=St);var kt=wt[St];kt||(kt=wt[St]=[]),kt.push(Oe[yt])}var Rt=[];for(var zt in wt)Rt.push(wt[zt]);return Rt}(t.values(this._layerConfigs),this.keyCache);Ge<at.length;Ge+=1){var et=at[Ge].map(function(Oe){return Ve._layers[Oe.id]}),lt=et[0];if(lt.visibility!=="none"){var Ct=lt.source||"",Pt=this.familiesBySource[Ct];Pt||(Pt=this.familiesBySource[Ct]={});var $t=lt.sourceLayer||"_geojsonTileLayer",je=Pt[$t];je||(je=Pt[$t]=[]),je.push(et)}}};var l=function(Te){var Le={},Ve=[];for(var Qe in Te){var Me=Te[Qe],Ie=Le[Qe]={};for(var He in Me){var Ye=Me[+He];if(Ye&&Ye.bitmap.width!==0&&Ye.bitmap.height!==0){var ut={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};Ve.push(ut),Ie[He]={rect:ut,metrics:Ye.metrics}}}}var nt=t.potpack(Ve),Ge=new t.AlphaImage({width:nt.w||1,height:nt.h||1});for(var at in Te){var et=Te[at];for(var lt in et){var Ct=et[+lt];if(Ct&&Ct.bitmap.width!==0&&Ct.bitmap.height!==0){var Pt=Le[at][lt].rect;t.AlphaImage.copy(Ct.bitmap,Ge,{x:0,y:0},{x:Pt.x+1,y:Pt.y+1},Ct.bitmap)}}}this.image=Ge,this.positions=Le};t.register("GlyphAtlas",l);var h=function(Te){this.tileID=new t.OverscaledTileID(Te.tileID.overscaledZ,Te.tileID.wrap,Te.tileID.canonical.z,Te.tileID.canonical.x,Te.tileID.canonical.y),this.uid=Te.uid,this.zoom=Te.zoom,this.pixelRatio=Te.pixelRatio,this.tileSize=Te.tileSize,this.source=Te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Te.showCollisionBoxes,this.collectResourceTiming=!!Te.collectResourceTiming,this.returnDependencies=!!Te.returnDependencies,this.promoteId=Te.promoteId};function i(Te,Le,Ve){for(var Qe=new t.EvaluationParameters(Le),Me=0,Ie=Te;Me<Ie.length;Me+=1)Ie[Me].recalculate(Qe,Ve)}function s(Te,Le){var Ve=t.getArrayBuffer(Te.request,function(Qe,Me,Ie,He){Qe?Le(Qe):Me&&Le(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Me)),rawData:Me,cacheControl:Ie,expires:He})});return function(){Ve.cancel(),Le()}}h.prototype.parse=function(Te,Le,Ve,Qe,Me){var Ie=this;this.status="parsing",this.data=Te,this.collisionBoxArray=new t.CollisionBoxArray;var He=new t.DictionaryCoder(Object.keys(Te.layers).sort()),Ye=new t.FeatureIndex(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];var ut,nt,Ge,at,et={},lt={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},Ct=Le.familiesBySource[this.source];for(var Pt in Ct){var $t=Te.layers[Pt];if($t){$t.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Pt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var je=He.encode(Pt),Oe=[],mt=0;mt<$t.length;mt++){var wt=$t.feature(mt),yt=Ye.getId(wt,Pt);Oe.push({feature:wt,id:yt,index:mt,sourceLayerIndex:je})}for(var St=0,kt=Ct[Pt];St<kt.length;St+=1){var Rt=kt[St],zt=Rt[0];zt.minzoom&&this.zoom<Math.floor(zt.minzoom)||zt.maxzoom&&this.zoom>=zt.maxzoom||zt.visibility!=="none"&&(i(Rt,this.zoom,Ve),(et[zt.id]=zt.createBucket({index:Ye.bucketLayerIDs.length,layers:Rt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:je,sourceID:this.source})).populate(Oe,lt,this.tileID.canonical),Ye.bucketLayerIDs.push(Rt.map(function(Or){return Or.id})))}}}var Xt=t.mapObject(lt.glyphDependencies,function(Or){return Object.keys(Or).map(Number)});Object.keys(Xt).length?Qe.send("getGlyphs",{uid:this.uid,stacks:Xt},function(Or,kr){ut||(ut=Or,nt=kr,cr.call(Ie))}):nt={};var Yt=Object.keys(lt.iconDependencies);Yt.length?Qe.send("getImages",{icons:Yt,source:this.source,tileID:this.tileID,type:"icons"},function(Or,kr){ut||(ut=Or,Ge=kr,cr.call(Ie))}):Ge={};var Vt=Object.keys(lt.patternDependencies);function cr(){if(ut)return Me(ut);if(nt&&Ge&&at){var Or=new l(nt),kr=new t.ImageAtlas(Ge,at);for(var Sr in et){var vn=et[Sr];vn instanceof t.SymbolBucket?(i(vn.layers,this.zoom,Ve),t.performSymbolLayout(vn,nt,Or.positions,Ge,kr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):vn.hasPattern&&(vn instanceof t.LineBucket||vn instanceof t.FillBucket||vn instanceof t.FillExtrusionBucket)&&(i(vn.layers,this.zoom,Ve),vn.addFeatures(lt,this.tileID.canonical,kr.patternPositions))}this.status="done",Me(null,{buckets:t.values(et).filter(function(Rn){return!Rn.isEmpty()}),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Or.image,imageAtlas:kr,glyphMap:this.returnDependencies?nt:null,iconMap:this.returnDependencies?Ge:null,glyphPositions:this.returnDependencies?Or.positions:null})}}Vt.length?Qe.send("getImages",{icons:Vt,source:this.source,tileID:this.tileID,type:"patterns"},function(Or,kr){ut||(ut=Or,at=kr,cr.call(Ie))}):at={},cr.call(this)};var p=function(Te,Le,Ve,Qe){this.actor=Te,this.layerIndex=Le,this.availableImages=Ve,this.loadVectorData=Qe||s,this.loading={},this.loaded={}};p.prototype.loadTile=function(Te,Le){var Ve=this,Qe=Te.uid;this.loading||(this.loading={});var Me=!!(Te&&Te.request&&Te.request.collectResourceTiming)&&new t.RequestPerformance(Te.request),Ie=this.loading[Qe]=new h(Te);Ie.abort=this.loadVectorData(Te,function(He,Ye){if(delete Ve.loading[Qe],He||!Ye)return Ie.status="done",Ve.loaded[Qe]=Ie,Le(He);var ut=Ye.rawData,nt={};Ye.expires&&(nt.expires=Ye.expires),Ye.cacheControl&&(nt.cacheControl=Ye.cacheControl);var Ge={};if(Me){var at=Me.finish();at&&(Ge.resourceTiming=JSON.parse(JSON.stringify(at)))}Ie.vectorTile=Ye.vectorTile,Ie.parse(Ye.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(et,lt){if(et||!lt)return Le(et);Le(null,t.extend({rawTileData:ut.slice(0)},lt,nt,Ge))}),Ve.loaded=Ve.loaded||{},Ve.loaded[Qe]=Ie})},p.prototype.reloadTile=function(Te,Le){var Ve=this,Qe=this.loaded,Me=Te.uid,Ie=this;if(Qe&&Qe[Me]){var He=Qe[Me];He.showCollisionBoxes=Te.showCollisionBoxes;var Ye=function(ut,nt){var Ge=He.reloadCallback;Ge&&(delete He.reloadCallback,He.parse(He.vectorTile,Ie.layerIndex,Ve.availableImages,Ie.actor,Ge)),Le(ut,nt)};He.status==="parsing"?He.reloadCallback=Ye:He.status==="done"&&(He.vectorTile?He.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,Ye):Ye())}},p.prototype.abortTile=function(Te,Le){var Ve=this.loading,Qe=Te.uid;Ve&&Ve[Qe]&&Ve[Qe].abort&&(Ve[Qe].abort(),delete Ve[Qe]),Le()},p.prototype.removeTile=function(Te,Le){var Ve=this.loaded,Qe=Te.uid;Ve&&Ve[Qe]&&delete Ve[Qe],Le()};var v=t.window.ImageBitmap,m=function(){this.loaded={}};function b(Te,Le){if(Te.length!==0){y(Te[0],Le);for(var Ve=1;Ve<Te.length;Ve++)y(Te[Ve],!Le)}}function y(Te,Le){for(var Ve=0,Qe=0,Me=Te.length,Ie=Me-1;Qe<Me;Ie=Qe++)Ve+=(Te[Qe][0]-Te[Ie][0])*(Te[Ie][1]+Te[Qe][1]);Ve>=0!=!!Le&&Te.reverse()}m.prototype.loadTile=function(Te,Le){var Ve=Te.uid,Qe=Te.encoding,Me=Te.rawImageData,Ie=v&&Me instanceof v?this.getImageData(Me):Me,He=new t.DEMData(Ve,Ie,Qe);this.loaded=this.loaded||{},this.loaded[Ve]=He,Le(null,He)},m.prototype.getImageData=function(Te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Te.width,Te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Te.width,this.offscreenCanvas.height=Te.height,this.offscreenCanvasContext.drawImage(Te,0,0,Te.width,Te.height);var Le=this.offscreenCanvasContext.getImageData(-1,-1,Te.width+2,Te.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Le.width,height:Le.height},Le.data)},m.prototype.removeTile=function(Te){var Le=this.loaded,Ve=Te.uid;Le&&Le[Ve]&&delete Le[Ve]};var x=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,w=function(Te){this._feature=Te,this.extent=t.EXTENT,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))};w.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Te=[],Le=0,Ve=this._feature.geometry;Le<Ve.length;Le+=1){var Qe=Ve[Le];Te.push([new t.Point$1(Qe[0],Qe[1])])}return Te}for(var Me=[],Ie=0,He=this._feature.geometry;Ie<He.length;Ie+=1){for(var Ye=[],ut=0,nt=He[Ie];ut<nt.length;ut+=1){var Ge=nt[ut];Ye.push(new t.Point$1(Ge[0],Ge[1]))}Me.push(Ye)}return Me},w.prototype.toGeoJSON=function(Te,Le,Ve){return x.call(this,Te,Le,Ve)};var g=function(Te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Te.length,this._features=Te};g.prototype.feature=function(Te){return new w(this._features[Te])};var T=t.vectorTile.VectorTileFeature,M=P;function P(Te,Le){this.options=Le||{},this.features=Te,this.length=Te.length}function L(Te,Le){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=Le||4096}P.prototype.feature=function(Te){return new L(this.features[Te],this.options.extent)},L.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var Le=0;Le<Te.length;Le++){for(var Ve=Te[Le],Qe=[],Me=0;Me<Ve.length;Me++)Qe.push(new t.Point$1(Ve[Me][0],Ve[Me][1]));this.geometry.push(Qe)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,Le=1/0,Ve=-1/0,Qe=1/0,Me=-1/0,Ie=0;Ie<Te.length;Ie++)for(var He=Te[Ie],Ye=0;Ye<He.length;Ye++){var ut=He[Ye];Le=Math.min(Le,ut.x),Ve=Math.max(Ve,ut.x),Qe=Math.min(Qe,ut.y),Me=Math.max(Me,ut.y)}return[Le,Qe,Ve,Me]},L.prototype.toGeoJSON=T.prototype.toGeoJSON;var I=k,C=M;function k(Te){var Le=new t.pbf;return function(Ve,Qe){for(var Me in Ve.layers)Qe.writeMessage(3,E,Ve.layers[Me])}(Te,Le),Le.finish()}function E(Te,Le){var Ve;Le.writeVarintField(15,Te.version||1),Le.writeStringField(1,Te.name||""),Le.writeVarintField(5,Te.extent||4096);var Qe={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<Te.length;Ve++)Qe.feature=Te.feature(Ve),Le.writeMessage(2,R,Qe);var Me=Qe.keys;for(Ve=0;Ve<Me.length;Ve++)Le.writeStringField(3,Me[Ve]);var Ie=Qe.values;for(Ve=0;Ve<Ie.length;Ve++)Le.writeMessage(4,Y,Ie[Ve])}function R(Te,Le){var Ve=Te.feature;Ve.id!==void 0&&Le.writeVarintField(1,Ve.id),Le.writeMessage(2,O,Te),Le.writeVarintField(3,Ve.type),Le.writeMessage(4,U,Ve)}function O(Te,Le){var Ve=Te.feature,Qe=Te.keys,Me=Te.values,Ie=Te.keycache,He=Te.valuecache;for(var Ye in Ve.properties){var ut=Ie[Ye];ut===void 0&&(Qe.push(Ye),Ie[Ye]=ut=Qe.length-1),Le.writeVarint(ut);var nt=Ve.properties[Ye],Ge=typeof nt;Ge!=="string"&&Ge!=="boolean"&&Ge!=="number"&&(nt=JSON.stringify(nt));var at=Ge+":"+nt,et=He[at];et===void 0&&(Me.push(nt),He[at]=et=Me.length-1),Le.writeVarint(et)}}function N(Te,Le){return(Le<<3)+(7&Te)}function G(Te){return Te<<1^Te>>31}function U(Te,Le){for(var Ve=Te.loadGeometry(),Qe=Te.type,Me=0,Ie=0,He=Ve.length,Ye=0;Ye<He;Ye++){var ut=Ve[Ye],nt=1;Qe===1&&(nt=ut.length),Le.writeVarint(N(1,nt));for(var Ge=Qe===3?ut.length-1:ut.length,at=0;at<Ge;at++){at===1&&Qe!==1&&Le.writeVarint(N(2,Ge-1));var et=ut[at].x-Me,lt=ut[at].y-Ie;Le.writeVarint(G(et)),Le.writeVarint(G(lt)),Me+=et,Ie+=lt}Qe===3&&Le.writeVarint(N(7,1))}}function Y(Te,Le){var Ve=typeof Te;Ve==="string"?Le.writeStringField(1,Te):Ve==="boolean"?Le.writeBooleanField(7,Te):Ve==="number"&&(Te%1!=0?Le.writeDoubleField(3,Te):Te<0?Le.writeSVarintField(6,Te):Le.writeVarintField(5,Te))}function z(Te,Le,Ve,Qe){B(Te,Ve,Qe),B(Le,2*Ve,2*Qe),B(Le,2*Ve+1,2*Qe+1)}function B(Te,Le,Ve){var Qe=Te[Le];Te[Le]=Te[Ve],Te[Ve]=Qe}function H(Te,Le,Ve,Qe){var Me=Te-Ve,Ie=Le-Qe;return Me*Me+Ie*Ie}I.fromVectorTileJs=k,I.fromGeojsonVt=function(Te,Le){Le=Le||{};var Ve={};for(var Qe in Te)Ve[Qe]=new M(Te[Qe].features,Le),Ve[Qe].name=Qe,Ve[Qe].version=Le.version,Ve[Qe].extent=Le.extent;return k({layers:Ve})},I.GeoJSONWrapper=C;var V=function(Te){return Te[0]},Z=function(Te){return Te[1]},q=function(Te,Le,Ve,Qe,Me){Le===void 0&&(Le=V),Ve===void 0&&(Ve=Z),Qe===void 0&&(Qe=64),Me===void 0&&(Me=Float64Array),this.nodeSize=Qe,this.points=Te;for(var Ie=Te.length<65536?Uint16Array:Uint32Array,He=this.ids=new Ie(Te.length),Ye=this.coords=new Me(2*Te.length),ut=0;ut<Te.length;ut++)He[ut]=ut,Ye[2*ut]=Le(Te[ut]),Ye[2*ut+1]=Ve(Te[ut]);(function nt(Ge,at,et,lt,Ct,Pt){if(!(Ct-lt<=et)){var $t=lt+Ct>>1;(function je(Oe,mt,wt,yt,St,kt){for(;St>yt;){if(St-yt>600){var Rt=St-yt+1,zt=wt-yt+1,Xt=Math.log(Rt),Yt=.5*Math.exp(2*Xt/3),Vt=.5*Math.sqrt(Xt*Yt*(Rt-Yt)/Rt)*(zt-Rt/2<0?-1:1);je(Oe,mt,wt,Math.max(yt,Math.floor(wt-zt*Yt/Rt+Vt)),Math.min(St,Math.floor(wt+(Rt-zt)*Yt/Rt+Vt)),kt)}var cr=mt[2*wt+kt],Or=yt,kr=St;for(z(Oe,mt,yt,wt),mt[2*St+kt]>cr&&z(Oe,mt,yt,St);Or<kr;){for(z(Oe,mt,Or,kr),Or++,kr--;mt[2*Or+kt]<cr;)Or++;for(;mt[2*kr+kt]>cr;)kr--}mt[2*yt+kt]===cr?z(Oe,mt,yt,kr):z(Oe,mt,++kr,St),kr<=wt&&(yt=kr+1),wt<=kr&&(St=kr-1)}})(Ge,at,$t,lt,Ct,Pt%2),nt(Ge,at,et,lt,$t-1,Pt+1),nt(Ge,at,et,$t+1,Ct,Pt+1)}})(He,Ye,Qe,0,He.length-1,0)};q.prototype.range=function(Te,Le,Ve,Qe){return function(Me,Ie,He,Ye,ut,nt,Ge){for(var at,et,lt=[0,Me.length-1,0],Ct=[];lt.length;){var Pt=lt.pop(),$t=lt.pop(),je=lt.pop();if($t-je<=Ge)for(var Oe=je;Oe<=$t;Oe++)et=Ie[2*Oe+1],(at=Ie[2*Oe])>=He&&at<=ut&&et>=Ye&&et<=nt&&Ct.push(Me[Oe]);else{var mt=Math.floor((je+$t)/2);et=Ie[2*mt+1],(at=Ie[2*mt])>=He&&at<=ut&&et>=Ye&&et<=nt&&Ct.push(Me[mt]);var wt=(Pt+1)%2;(Pt===0?He<=at:Ye<=et)&&(lt.push(je),lt.push(mt-1),lt.push(wt)),(Pt===0?ut>=at:nt>=et)&&(lt.push(mt+1),lt.push($t),lt.push(wt))}}return Ct}(this.ids,this.coords,Te,Le,Ve,Qe,this.nodeSize)},q.prototype.within=function(Te,Le,Ve){return function(Qe,Me,Ie,He,Ye,ut){for(var nt=[0,Qe.length-1,0],Ge=[],at=Ye*Ye;nt.length;){var et=nt.pop(),lt=nt.pop(),Ct=nt.pop();if(lt-Ct<=ut)for(var Pt=Ct;Pt<=lt;Pt++)H(Me[2*Pt],Me[2*Pt+1],Ie,He)<=at&&Ge.push(Qe[Pt]);else{var $t=Math.floor((Ct+lt)/2),je=Me[2*$t],Oe=Me[2*$t+1];H(je,Oe,Ie,He)<=at&&Ge.push(Qe[$t]);var mt=(et+1)%2;(et===0?Ie-Ye<=je:He-Ye<=Oe)&&(nt.push(Ct),nt.push($t-1),nt.push(mt)),(et===0?Ie+Ye>=je:He+Ye>=Oe)&&(nt.push($t+1),nt.push(lt),nt.push(mt))}}return Ge}(this.ids,this.coords,Te,Le,Ve,this.nodeSize)};var J={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Te){return Te}},ne=function(Te){this.options=re(Object.create(J),Te),this.trees=new Array(this.options.maxZoom+1)};function ve(Te,Le,Ve,Qe,Me){return{x:Te,y:Le,zoom:1/0,id:Ve,parentId:-1,numPoints:Qe,properties:Me}}function $(Te,Le){var Ve=Te.geometry.coordinates,Qe=Ve[1];return{x:ie(Ve[0]),y:te(Qe),zoom:1/0,index:Le,parentId:-1}}function j(Te){return{type:"Feature",id:Te.id,properties:ae(Te),geometry:{type:"Point",coordinates:[(Qe=Te.x,360*(Qe-.5)),(Le=Te.y,Ve=(180-360*Le)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var Le,Ve,Qe}function ae(Te){var Le=Te.numPoints,Ve=Le>=1e4?Math.round(Le/1e3)+"k":Le>=1e3?Math.round(Le/100)/10+"k":Le;return re(re({},Te.properties),{cluster:!0,cluster_id:Te.id,point_count:Le,point_count_abbreviated:Ve})}function ie(Te){return Te/360+.5}function te(Te){var Le=Math.sin(Te*Math.PI/180),Ve=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function re(Te,Le){for(var Ve in Le)Te[Ve]=Le[Ve];return Te}function ce(Te){return Te.x}function pe(Te){return Te.y}function fe(Te,Le,Ve,Qe,Me,Ie){var He=Me-Ve,Ye=Ie-Qe;if(He!==0||Ye!==0){var ut=((Te-Ve)*He+(Le-Qe)*Ye)/(He*He+Ye*Ye);ut>1?(Ve=Me,Qe=Ie):ut>0&&(Ve+=He*ut,Qe+=Ye*ut)}return(He=Te-Ve)*He+(Ye=Le-Qe)*Ye}function se(Te,Le,Ve,Qe){var Me={id:Te===void 0?null:Te,type:Le,geometry:Ve,tags:Qe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var He=Ie.geometry,Ye=Ie.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")de(Ie,He);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var ut=0;ut<He.length;ut++)de(Ie,He[ut]);else if(Ye==="MultiPolygon")for(ut=0;ut<He.length;ut++)for(var nt=0;nt<He[ut].length;nt++)de(Ie,He[ut][nt])}(Me),Me}function de(Te,Le){for(var Ve=0;Ve<Le.length;Ve+=3)Te.minX=Math.min(Te.minX,Le[Ve]),Te.minY=Math.min(Te.minY,Le[Ve+1]),Te.maxX=Math.max(Te.maxX,Le[Ve]),Te.maxY=Math.max(Te.maxY,Le[Ve+1])}function be(Te,Le,Ve,Qe){if(Le.geometry){var Me=Le.geometry.coordinates,Ie=Le.geometry.type,He=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),Ye=[],ut=Le.id;if(Ve.promoteId?ut=Le.properties[Ve.promoteId]:Ve.generateId&&(ut=Qe||0),Ie==="Point")xe(Me,Ye);else if(Ie==="MultiPoint")for(var nt=0;nt<Me.length;nt++)xe(Me[nt],Ye);else if(Ie==="LineString")ke(Me,Ye,He,!1);else if(Ie==="MultiLineString"){if(Ve.lineMetrics){for(nt=0;nt<Me.length;nt++)ke(Me[nt],Ye=[],He,!1),Te.push(se(ut,"LineString",Ye,Le.properties));return}Re(Me,Ye,He,!1)}else if(Ie==="Polygon")Re(Me,Ye,He,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(nt=0;nt<Le.geometry.geometries.length;nt++)be(Te,{id:ut,geometry:Le.geometry.geometries[nt],properties:Le.properties},Ve,Qe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(nt=0;nt<Me.length;nt++){var Ge=[];Re(Me[nt],Ge,He,!0),Ye.push(Ge)}}Te.push(se(ut,Ie,Ye,Le.properties))}}function xe(Te,Le){Le.push(Ke(Te[0])),Le.push(ze(Te[1])),Le.push(0)}function ke(Te,Le,Ve,Qe){for(var Me,Ie,He=0,Ye=0;Ye<Te.length;Ye++){var ut=Ke(Te[Ye][0]),nt=ze(Te[Ye][1]);Le.push(ut),Le.push(nt),Le.push(0),Ye>0&&(He+=Qe?(Me*nt-ut*Ie)/2:Math.sqrt(Math.pow(ut-Me,2)+Math.pow(nt-Ie,2))),Me=ut,Ie=nt}var Ge=Le.length-3;Le[2]=1,function at(et,lt,Ct,Pt){for(var $t,je=Pt,Oe=Ct-lt>>1,mt=Ct-lt,wt=et[lt],yt=et[lt+1],St=et[Ct],kt=et[Ct+1],Rt=lt+3;Rt<Ct;Rt+=3){var zt=fe(et[Rt],et[Rt+1],wt,yt,St,kt);if(zt>je)$t=Rt,je=zt;else if(zt===je){var Xt=Math.abs(Rt-Oe);Xt<mt&&($t=Rt,mt=Xt)}}je>Pt&&($t-lt>3&&at(et,lt,$t,Pt),et[$t+2]=je,Ct-$t>3&&at(et,$t,Ct,Pt))}(Le,0,Ge,Ve),Le[Ge+2]=1,Le.size=Math.abs(He),Le.start=0,Le.end=Le.size}function Re(Te,Le,Ve,Qe){for(var Me=0;Me<Te.length;Me++){var Ie=[];ke(Te[Me],Ie,Ve,Qe),Le.push(Ie)}}function Ke(Te){return Te/360+.5}function ze(Te){var Le=Math.sin(Te*Math.PI/180),Ve=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function Je(Te,Le,Ve,Qe,Me,Ie,He,Ye){if(Qe/=Le,Ie>=(Ve/=Le)&&He<Qe)return Te;if(He<Ve||Ie>=Qe)return null;for(var ut=[],nt=0;nt<Te.length;nt++){var Ge=Te[nt],at=Ge.geometry,et=Ge.type,lt=Me===0?Ge.minX:Ge.minY,Ct=Me===0?Ge.maxX:Ge.maxY;if(lt>=Ve&&Ct<Qe)ut.push(Ge);else if(!(Ct<Ve||lt>=Qe)){var Pt=[];if(et==="Point"||et==="MultiPoint")qe(at,Pt,Ve,Qe,Me);else if(et==="LineString")Ee(at,Pt,Ve,Qe,Me,!1,Ye.lineMetrics);else if(et==="MultiLineString")Be(at,Pt,Ve,Qe,Me,!1);else if(et==="Polygon")Be(at,Pt,Ve,Qe,Me,!0);else if(et==="MultiPolygon")for(var $t=0;$t<at.length;$t++){var je=[];Be(at[$t],je,Ve,Qe,Me,!0),je.length&&Pt.push(je)}if(Pt.length){if(Ye.lineMetrics&&et==="LineString"){for($t=0;$t<Pt.length;$t++)ut.push(se(Ge.id,et,Pt[$t],Ge.tags));continue}et!=="LineString"&&et!=="MultiLineString"||(Pt.length===1?(et="LineString",Pt=Pt[0]):et="MultiLineString"),et!=="Point"&&et!=="MultiPoint"||(et=Pt.length===3?"Point":"MultiPoint"),ut.push(se(Ge.id,et,Pt,Ge.tags))}}}return ut.length?ut:null}function qe(Te,Le,Ve,Qe,Me){for(var Ie=0;Ie<Te.length;Ie+=3){var He=Te[Ie+Me];He>=Ve&&He<=Qe&&(Le.push(Te[Ie]),Le.push(Te[Ie+1]),Le.push(Te[Ie+2]))}}function Ee(Te,Le,Ve,Qe,Me,Ie,He){for(var Ye,ut,nt=Ae(Te),Ge=Me===0?xt:bt,at=Te.start,et=0;et<Te.length-3;et+=3){var lt=Te[et],Ct=Te[et+1],Pt=Te[et+2],$t=Te[et+3],je=Te[et+4],Oe=Me===0?lt:Ct,mt=Me===0?$t:je,wt=!1;He&&(Ye=Math.sqrt(Math.pow(lt-$t,2)+Math.pow(Ct-je,2))),Oe<Ve?mt>Ve&&(ut=Ge(nt,lt,Ct,$t,je,Ve),He&&(nt.start=at+Ye*ut)):Oe>Qe?mt<Qe&&(ut=Ge(nt,lt,Ct,$t,je,Qe),He&&(nt.start=at+Ye*ut)):$e(nt,lt,Ct,Pt),mt<Ve&&Oe>=Ve&&(ut=Ge(nt,lt,Ct,$t,je,Ve),wt=!0),mt>Qe&&Oe<=Qe&&(ut=Ge(nt,lt,Ct,$t,je,Qe),wt=!0),!Ie&&wt&&(He&&(nt.end=at+Ye*ut),Le.push(nt),nt=Ae(Te)),He&&(at+=Ye)}var yt=Te.length-3;lt=Te[yt],Ct=Te[yt+1],Pt=Te[yt+2],(Oe=Me===0?lt:Ct)>=Ve&&Oe<=Qe&&$e(nt,lt,Ct,Pt),yt=nt.length-3,Ie&&yt>=3&&(nt[yt]!==nt[0]||nt[yt+1]!==nt[1])&&$e(nt,nt[0],nt[1],nt[2]),nt.length&&Le.push(nt)}function Ae(Te){var Le=[];return Le.size=Te.size,Le.start=Te.start,Le.end=Te.end,Le}function Be(Te,Le,Ve,Qe,Me,Ie){for(var He=0;He<Te.length;He++)Ee(Te[He],Le,Ve,Qe,Me,Ie,!1)}function $e(Te,Le,Ve,Qe){Te.push(Le),Te.push(Ve),Te.push(Qe)}function xt(Te,Le,Ve,Qe,Me,Ie){var He=(Ie-Le)/(Qe-Le);return Te.push(Ie),Te.push(Ve+(Me-Ve)*He),Te.push(1),He}function bt(Te,Le,Ve,Qe,Me,Ie){var He=(Ie-Ve)/(Me-Ve);return Te.push(Le+(Qe-Le)*He),Te.push(Ie),Te.push(1),He}function Ne(Te,Le){for(var Ve=[],Qe=0;Qe<Te.length;Qe++){var Me,Ie=Te[Qe],He=Ie.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")Me=st(Ie.geometry,Le);else if(He==="MultiLineString"||He==="Polygon"){Me=[];for(var Ye=0;Ye<Ie.geometry.length;Ye++)Me.push(st(Ie.geometry[Ye],Le))}else if(He==="MultiPolygon")for(Me=[],Ye=0;Ye<Ie.geometry.length;Ye++){for(var ut=[],nt=0;nt<Ie.geometry[Ye].length;nt++)ut.push(st(Ie.geometry[Ye][nt],Le));Me.push(ut)}Ve.push(se(Ie.id,He,Me,Ie.tags))}return Ve}function st(Te,Le){var Ve=[];Ve.size=Te.size,Te.start!==void 0&&(Ve.start=Te.start,Ve.end=Te.end);for(var Qe=0;Qe<Te.length;Qe+=3)Ve.push(Te[Qe]+Le,Te[Qe+1],Te[Qe+2]);return Ve}function _t(Te,Le){if(Te.transformed)return Te;var Ve,Qe,Me,Ie=1<<Te.z,He=Te.x,Ye=Te.y;for(Ve=0;Ve<Te.features.length;Ve++){var ut=Te.features[Ve],nt=ut.geometry,Ge=ut.type;if(ut.geometry=[],Ge===1)for(Qe=0;Qe<nt.length;Qe+=2)ut.geometry.push(Ot(nt[Qe],nt[Qe+1],Le,Ie,He,Ye));else for(Qe=0;Qe<nt.length;Qe++){var at=[];for(Me=0;Me<nt[Qe].length;Me+=2)at.push(Ot(nt[Qe][Me],nt[Qe][Me+1],Le,Ie,He,Ye));ut.geometry.push(at)}}return Te.transformed=!0,Te}function Ot(Te,Le,Ve,Qe,Me,Ie){return[Math.round(Ve*(Te*Qe-Me)),Math.round(Ve*(Le*Qe-Ie))]}function Wt(Te,Le,Ve,Qe,Me){for(var Ie=Le===Me.maxZoom?0:Me.tolerance/((1<<Le)*Me.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:Qe,z:Le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<Te.length;Ye++){He.numFeatures++,Et(He,Te[Ye],Ie,Me);var ut=Te[Ye].minX,nt=Te[Ye].minY,Ge=Te[Ye].maxX,at=Te[Ye].maxY;ut<He.minX&&(He.minX=ut),nt<He.minY&&(He.minY=nt),Ge>He.maxX&&(He.maxX=Ge),at>He.maxY&&(He.maxY=at)}return He}function Et(Te,Le,Ve,Qe){var Me=Le.geometry,Ie=Le.type,He=[];if(Ie==="Point"||Ie==="MultiPoint")for(var Ye=0;Ye<Me.length;Ye+=3)He.push(Me[Ye]),He.push(Me[Ye+1]),Te.numPoints++,Te.numSimplified++;else if(Ie==="LineString")jt(He,Me,Te,Ve,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(Ye=0;Ye<Me.length;Ye++)jt(He,Me[Ye],Te,Ve,Ie==="Polygon",Ye===0);else if(Ie==="MultiPolygon")for(var ut=0;ut<Me.length;ut++){var nt=Me[ut];for(Ye=0;Ye<nt.length;Ye++)jt(He,nt[Ye],Te,Ve,!0,Ye===0)}if(He.length){var Ge=Le.tags||null;if(Ie==="LineString"&&Qe.lineMetrics){for(var at in Ge={},Le.tags)Ge[at]=Le.tags[at];Ge.mapbox_clip_start=Me.start/Me.size,Ge.mapbox_clip_end=Me.end/Me.size}var et={geometry:He,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:Ge};Le.id!==null&&(et.id=Le.id),Te.features.push(et)}}function jt(Te,Le,Ve,Qe,Me,Ie){var He=Qe*Qe;if(Qe>0&&Le.size<(Me?He:Qe))Ve.numPoints+=Le.length/3;else{for(var Ye=[],ut=0;ut<Le.length;ut+=3)(Qe===0||Le[ut+2]>He)&&(Ve.numSimplified++,Ye.push(Le[ut]),Ye.push(Le[ut+1])),Ve.numPoints++;Me&&function(nt,Ge){for(var at=0,et=0,lt=nt.length,Ct=lt-2;et<lt;Ct=et,et+=2)at+=(nt[et]-nt[Ct])*(nt[et+1]+nt[Ct+1]);if(at>0===Ge)for(et=0,lt=nt.length;et<lt/2;et+=2){var Pt=nt[et],$t=nt[et+1];nt[et]=nt[lt-2-et],nt[et+1]=nt[lt-1-et],nt[lt-2-et]=Pt,nt[lt-1-et]=$t}}(Ye,Ie),Te.push(Ye)}}function Zt(Te,Le){var Ve=(Le=this.options=function(Me,Ie){for(var He in Ie)Me[He]=Ie[He];return Me}(Object.create(this.options),Le)).debug;if(Ve&&console.time("preprocess data"),Le.maxZoom<0||Le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Le.promoteId&&Le.generateId)throw new Error("promoteId and generateId cannot be used together.");var Qe=function(Me,Ie){var He=[];if(Me.type==="FeatureCollection")for(var Ye=0;Ye<Me.features.length;Ye++)be(He,Me.features[Ye],Ie,Ye);else be(He,Me.type==="Feature"?Me:{geometry:Me},Ie);return He}(Te,Le);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Le.indexMaxZoom,Le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Qe=function(Me,Ie){var He=Ie.buffer/Ie.extent,Ye=Me,ut=Je(Me,1,-1-He,He,0,-1,2,Ie),nt=Je(Me,1,1-He,2+He,0,-1,2,Ie);return(ut||nt)&&(Ye=Je(Me,1,-He,1+He,0,-1,2,Ie)||[],ut&&(Ye=Ne(ut,1).concat(Ye)),nt&&(Ye=Ye.concat(Ne(nt,-1)))),Ye}(Qe,Le)).length&&this.splitTile(Qe,0,0,0),Ve&&(Qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Mt(Te,Le,Ve){return 32*((1<<Te)*Ve+Le)+Te}function At(Te,Le){var Ve=Te.tileID.canonical;if(!this._geoJSONIndex)return Le(null,null);var Qe=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!Qe)return Le(null,null);var Me=new g(Qe.features),Ie=I(Me);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),Le(null,{vectorTile:Me,rawData:Ie.buffer})}ne.prototype.load=function(Te){var Le=this.options,Ve=Le.log,Qe=Le.minZoom,Me=Le.maxZoom,Ie=Le.nodeSize;Ve&&console.time("total time");var He="prepare "+Te.length+" points";Ve&&console.time(He),this.points=Te;for(var Ye=[],ut=0;ut<Te.length;ut++)Te[ut].geometry&&Ye.push($(Te[ut],ut));this.trees[Me+1]=new q(Ye,ce,pe,Ie,Float32Array),Ve&&console.timeEnd(He);for(var nt=Me;nt>=Qe;nt--){var Ge=+Date.now();Ye=this._cluster(Ye,nt),this.trees[nt]=new q(Ye,ce,pe,Ie,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",nt,Ye.length,+Date.now()-Ge)}return Ve&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Te,Le){var Ve=((Te[0]+180)%360+360)%360-180,Qe=Math.max(-90,Math.min(90,Te[1])),Me=Te[2]===180?180:((Te[2]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,Te[3]));if(Te[2]-Te[0]>=360)Ve=-180,Me=180;else if(Ve>Me){var He=this.getClusters([Ve,Qe,180,Ie],Le),Ye=this.getClusters([-180,Qe,Me,Ie],Le);return He.concat(Ye)}for(var ut=this.trees[this._limitZoom(Le)],nt=[],Ge=0,at=ut.range(ie(Ve),te(Ie),ie(Me),te(Qe));Ge<at.length;Ge+=1){var et=ut.points[at[Ge]];nt.push(et.numPoints?j(et):this.points[et.index])}return nt},ne.prototype.getChildren=function(Te){var Le=this._getOriginId(Te),Ve=this._getOriginZoom(Te),Qe="No cluster with the specified id.",Me=this.trees[Ve];if(!Me)throw new Error(Qe);var Ie=Me.points[Le];if(!Ie)throw new Error(Qe);for(var He=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),Ye=[],ut=0,nt=Me.within(Ie.x,Ie.y,He);ut<nt.length;ut+=1){var Ge=Me.points[nt[ut]];Ge.parentId===Te&&Ye.push(Ge.numPoints?j(Ge):this.points[Ge.index])}if(Ye.length===0)throw new Error(Qe);return Ye},ne.prototype.getLeaves=function(Te,Le,Ve){var Qe=[];return this._appendLeaves(Qe,Te,Le=Le||10,Ve=Ve||0,0),Qe},ne.prototype.getTile=function(Te,Le,Ve){var Qe=this.trees[this._limitZoom(Te)],Me=Math.pow(2,Te),Ie=this.options,He=Ie.radius/Ie.extent,Ye=(Ve-He)/Me,ut=(Ve+1+He)/Me,nt={features:[]};return this._addTileFeatures(Qe.range((Le-He)/Me,Ye,(Le+1+He)/Me,ut),Qe.points,Le,Ve,Me,nt),Le===0&&this._addTileFeatures(Qe.range(1-He/Me,Ye,1,ut),Qe.points,Me,Ve,Me,nt),Le===Me-1&&this._addTileFeatures(Qe.range(0,Ye,He/Me,ut),Qe.points,-1,Ve,Me,nt),nt.features.length?nt:null},ne.prototype.getClusterExpansionZoom=function(Te){for(var Le=this._getOriginZoom(Te)-1;Le<=this.options.maxZoom;){var Ve=this.getChildren(Te);if(Le++,Ve.length!==1)break;Te=Ve[0].properties.cluster_id}return Le},ne.prototype._appendLeaves=function(Te,Le,Ve,Qe,Me){for(var Ie=0,He=this.getChildren(Le);Ie<He.length;Ie+=1){var Ye=He[Ie],ut=Ye.properties;if(ut&&ut.cluster?Me+ut.point_count<=Qe?Me+=ut.point_count:Me=this._appendLeaves(Te,ut.cluster_id,Ve,Qe,Me):Me<Qe?Me++:Te.push(Ye),Te.length===Ve)break}return Me},ne.prototype._addTileFeatures=function(Te,Le,Ve,Qe,Me,Ie){for(var He=0,Ye=Te;He<Ye.length;He+=1){var ut=Le[Ye[He]],nt=ut.numPoints,Ge={type:1,geometry:[[Math.round(this.options.extent*(ut.x*Me-Ve)),Math.round(this.options.extent*(ut.y*Me-Qe))]],tags:nt?ae(ut):this.points[ut.index].properties},at=void 0;nt?at=ut.id:this.options.generateId?at=ut.index:this.points[ut.index].id&&(at=this.points[ut.index].id),at!==void 0&&(Ge.id=at),Ie.features.push(Ge)}},ne.prototype._limitZoom=function(Te){return Math.max(this.options.minZoom,Math.min(Te,this.options.maxZoom+1))},ne.prototype._cluster=function(Te,Le){for(var Ve=[],Qe=this.options,Me=Qe.reduce,Ie=Qe.radius/(Qe.extent*Math.pow(2,Le)),He=0;He<Te.length;He++){var Ye=Te[He];if(!(Ye.zoom<=Le)){Ye.zoom=Le;for(var ut=this.trees[Le+1],nt=ut.within(Ye.x,Ye.y,Ie),Ge=Ye.numPoints||1,at=Ye.x*Ge,et=Ye.y*Ge,lt=Me&&Ge>1?this._map(Ye,!0):null,Ct=(He<<5)+(Le+1)+this.points.length,Pt=0,$t=nt;Pt<$t.length;Pt+=1){var je=ut.points[$t[Pt]];if(!(je.zoom<=Le)){je.zoom=Le;var Oe=je.numPoints||1;at+=je.x*Oe,et+=je.y*Oe,Ge+=Oe,je.parentId=Ct,Me&&(lt||(lt=this._map(Ye,!0)),Me(lt,this._map(je)))}}Ge===1?Ve.push(Ye):(Ye.parentId=Ct,Ve.push(ve(at/Ge,et/Ge,Ct,Ge,lt)))}}return Ve},ne.prototype._getOriginId=function(Te){return Te-this.points.length>>5},ne.prototype._getOriginZoom=function(Te){return(Te-this.points.length)%32},ne.prototype._map=function(Te,Le){if(Te.numPoints)return Le?re({},Te.properties):Te.properties;var Ve=this.points[Te.index].properties,Qe=this.options.map(Ve);return Le&&Qe===Ve?re({},Qe):Qe},Zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Zt.prototype.splitTile=function(Te,Le,Ve,Qe,Me,Ie,He){for(var Ye=[Te,Le,Ve,Qe],ut=this.options,nt=ut.debug;Ye.length;){Qe=Ye.pop(),Ve=Ye.pop(),Le=Ye.pop(),Te=Ye.pop();var Ge=1<<Le,at=Mt(Le,Ve,Qe),et=this.tiles[at];if(!et&&(nt>1&&console.time("creation"),et=this.tiles[at]=Wt(Te,Le,Ve,Qe,ut),this.tileCoords.push({z:Le,x:Ve,y:Qe}),nt)){nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Le,Ve,Qe,et.numFeatures,et.numPoints,et.numSimplified),console.timeEnd("creation"));var lt="z"+Le;this.stats[lt]=(this.stats[lt]||0)+1,this.total++}if(et.source=Te,Me){if(Le===ut.maxZoom||Le===Me)continue;var Ct=1<<Me-Le;if(Ve!==Math.floor(Ie/Ct)||Qe!==Math.floor(He/Ct))continue}else if(Le===ut.indexMaxZoom||et.numPoints<=ut.indexMaxPoints)continue;if(et.source=null,Te.length!==0){nt>1&&console.time("clipping");var Pt,$t,je,Oe,mt,wt,yt=.5*ut.buffer/ut.extent,St=.5-yt,kt=.5+yt,Rt=1+yt;Pt=$t=je=Oe=null,mt=Je(Te,Ge,Ve-yt,Ve+kt,0,et.minX,et.maxX,ut),wt=Je(Te,Ge,Ve+St,Ve+Rt,0,et.minX,et.maxX,ut),Te=null,mt&&(Pt=Je(mt,Ge,Qe-yt,Qe+kt,1,et.minY,et.maxY,ut),$t=Je(mt,Ge,Qe+St,Qe+Rt,1,et.minY,et.maxY,ut),mt=null),wt&&(je=Je(wt,Ge,Qe-yt,Qe+kt,1,et.minY,et.maxY,ut),Oe=Je(wt,Ge,Qe+St,Qe+Rt,1,et.minY,et.maxY,ut),wt=null),nt>1&&console.timeEnd("clipping"),Ye.push(Pt||[],Le+1,2*Ve,2*Qe),Ye.push($t||[],Le+1,2*Ve,2*Qe+1),Ye.push(je||[],Le+1,2*Ve+1,2*Qe),Ye.push(Oe||[],Le+1,2*Ve+1,2*Qe+1)}}},Zt.prototype.getTile=function(Te,Le,Ve){var Qe=this.options,Me=Qe.extent,Ie=Qe.debug;if(Te<0||Te>24)return null;var He=1<<Te,Ye=Mt(Te,Le=(Le%He+He)%He,Ve);if(this.tiles[Ye])return _t(this.tiles[Ye],Me);Ie>1&&console.log("drilling down to z%d-%d-%d",Te,Le,Ve);for(var ut,nt=Te,Ge=Le,at=Ve;!ut&&nt>0;)nt--,Ge=Math.floor(Ge/2),at=Math.floor(at/2),ut=this.tiles[Mt(nt,Ge,at)];return ut&&ut.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",nt,Ge,at),Ie>1&&console.time("drilling down"),this.splitTile(ut.source,nt,Ge,at,Te,Le,Ve),Ie>1&&console.timeEnd("drilling down"),this.tiles[Ye]?_t(this.tiles[Ye],Me):null):null};var ft=function(Te){function Le(Ve,Qe,Me,Ie){Te.call(this,Ve,Qe,Me,At),Ie&&(this.loadGeoJSON=Ie)}return Te&&(Le.__proto__=Te),(Le.prototype=Object.create(Te&&Te.prototype)).constructor=Le,Le.prototype.loadData=function(Ve,Qe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Qe,this._pendingLoadDataParams=Ve,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Le.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Qe=this._pendingCallback,Me=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ie=!!(Me&&Me.request&&Me.request.collectResourceTiming)&&new t.RequestPerformance(Me.request);this.loadGeoJSON(Me,function(He,Ye){if(He||!Ye)return Qe(He);if(typeof Ye!="object")return Qe(new Error("Input data given to '"+Me.source+"' is not a valid GeoJSON object."));(function Ge(at,et){var lt,Ct=at&&at.type;if(Ct==="FeatureCollection")for(lt=0;lt<at.features.length;lt++)Ge(at.features[lt],et);else if(Ct==="GeometryCollection")for(lt=0;lt<at.geometries.length;lt++)Ge(at.geometries[lt],et);else if(Ct==="Feature")Ge(at.geometry,et);else if(Ct==="Polygon")b(at.coordinates,et);else if(Ct==="MultiPolygon")for(lt=0;lt<at.coordinates.length;lt++)b(at.coordinates[lt],et);return at})(Ye,!0);try{Ve._geoJSONIndex=Me.cluster?new ne(function(Ge){var at=Ge.superclusterOptions,et=Ge.clusterProperties;if(!et||!at)return at;for(var lt={},Ct={},Pt={accumulated:null,zoom:0},$t={properties:null},je=Object.keys(et),Oe=0,mt=je;Oe<mt.length;Oe+=1){var wt=mt[Oe],yt=et[wt],St=yt[0],kt=t.createExpression(yt[1]),Rt=t.createExpression(typeof St=="string"?[St,["accumulated"],["get",wt]]:St);lt[wt]=kt.value,Ct[wt]=Rt.value}return at.map=function(zt){$t.properties=zt;for(var Xt={},Yt=0,Vt=je;Yt<Vt.length;Yt+=1){var cr=Vt[Yt];Xt[cr]=lt[cr].evaluate(Pt,$t)}return Xt},at.reduce=function(zt,Xt){$t.properties=Xt;for(var Yt=0,Vt=je;Yt<Vt.length;Yt+=1){var cr=Vt[Yt];Pt.accumulated=zt[cr],zt[cr]=Ct[cr].evaluate(Pt,$t)}},at}(Me)).load(Ye.features):function(Ge,at){return new Zt(Ge,at)}(Ye,Me.geojsonVtOptions)}catch(Ge){return Qe(Ge)}Ve.loaded={};var ut={};if(Ie){var nt=Ie.finish();nt&&(ut.resourceTiming={},ut.resourceTiming[Me.source]=JSON.parse(JSON.stringify(nt)))}Qe(null,ut)})}},Le.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Le.prototype.reloadTile=function(Ve,Qe){var Me=this.loaded;return Me&&Me[Ve.uid]?Te.prototype.reloadTile.call(this,Ve,Qe):this.loadTile(Ve,Qe)},Le.prototype.loadGeoJSON=function(Ve,Qe){if(Ve.request)t.getJSON(Ve.request,Qe);else{if(typeof Ve.data!="string")return Qe(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return Qe(null,JSON.parse(Ve.data))}catch{return Qe(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},Le.prototype.removeSource=function(Ve,Qe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Qe()},Le.prototype.getClusterExpansionZoom=function(Ve,Qe){try{Qe(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(Me){Qe(Me)}},Le.prototype.getClusterChildren=function(Ve,Qe){try{Qe(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(Me){Qe(Me)}},Le.prototype.getClusterLeaves=function(Ve,Qe){try{Qe(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(Me){Qe(Me)}},Le}(p),ot=function(Te){var Le=this;this.self=Te,this.actor=new t.Actor(Te,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,Qe){if(Le.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');Le.workerSourceTypes[Ve]=Qe},this.self.registerRTLTextPlugin=function(Ve){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Ve.applyArabicShaping,t.plugin.processBidirectionalText=Ve.processBidirectionalText,t.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return ot.prototype.setReferrer=function(Te,Le){this.referrer=Le},ot.prototype.setImages=function(Te,Le,Ve){for(var Qe in this.availableImages[Te]=Le,this.workerSources[Te]){var Me=this.workerSources[Te][Qe];for(var Ie in Me)Me[Ie].availableImages=Le}Ve()},ot.prototype.setLayers=function(Te,Le,Ve){this.getLayerIndex(Te).replace(Le),Ve()},ot.prototype.updateLayers=function(Te,Le,Ve){this.getLayerIndex(Te).update(Le.layers,Le.removedIds),Ve()},ot.prototype.loadTile=function(Te,Le,Ve){this.getWorkerSource(Te,Le.type,Le.source).loadTile(Le,Ve)},ot.prototype.loadDEMTile=function(Te,Le,Ve){this.getDEMWorkerSource(Te,Le.source).loadTile(Le,Ve)},ot.prototype.reloadTile=function(Te,Le,Ve){this.getWorkerSource(Te,Le.type,Le.source).reloadTile(Le,Ve)},ot.prototype.abortTile=function(Te,Le,Ve){this.getWorkerSource(Te,Le.type,Le.source).abortTile(Le,Ve)},ot.prototype.removeTile=function(Te,Le,Ve){this.getWorkerSource(Te,Le.type,Le.source).removeTile(Le,Ve)},ot.prototype.removeDEMTile=function(Te,Le){this.getDEMWorkerSource(Te,Le.source).removeTile(Le)},ot.prototype.removeSource=function(Te,Le,Ve){if(this.workerSources[Te]&&this.workerSources[Te][Le.type]&&this.workerSources[Te][Le.type][Le.source]){var Qe=this.workerSources[Te][Le.type][Le.source];delete this.workerSources[Te][Le.type][Le.source],Qe.removeSource!==void 0?Qe.removeSource(Le,Ve):Ve()}},ot.prototype.loadWorkerSource=function(Te,Le,Ve){try{this.self.importScripts(Le.url),Ve()}catch(Qe){Ve(Qe.toString())}},ot.prototype.syncRTLPluginState=function(Te,Le,Ve){try{t.plugin.setState(Le);var Qe=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&Qe!=null){this.self.importScripts(Qe);var Me=t.plugin.isParsed();Ve(Me?void 0:new Error("RTL Text Plugin failed to import scripts from "+Qe),Me)}}catch(Ie){Ve(Ie.toString())}},ot.prototype.getAvailableImages=function(Te){var Le=this.availableImages[Te];return Le||(Le=[]),Le},ot.prototype.getLayerIndex=function(Te){var Le=this.layerIndexes[Te];return Le||(Le=this.layerIndexes[Te]=new o),Le},ot.prototype.getWorkerSource=function(Te,Le,Ve){var Qe=this;return this.workerSources[Te]||(this.workerSources[Te]={}),this.workerSources[Te][Le]||(this.workerSources[Te][Le]={}),this.workerSources[Te][Le][Ve]||(this.workerSources[Te][Le][Ve]=new this.workerSourceTypes[Le]({send:function(Me,Ie,He){Qe.actor.send(Me,Ie,He,Te)}},this.getLayerIndex(Te),this.getAvailableImages(Te))),this.workerSources[Te][Le][Ve]},ot.prototype.getDEMWorkerSource=function(Te,Le){return this.demWorkerSources[Te]||(this.demWorkerSources[Te]={}),this.demWorkerSources[Te][Le]||(this.demWorkerSources[Te][Le]=new m),this.demWorkerSources[Te][Le]},ot.prototype.enforceCacheSizeLimit=function(Te,Le){t.enforceCacheSizeLimit(Le)},typeof WorkerGlobalScope<"u"&&t.window!==void 0&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new ot(t.window)),ot}),c(["./shared"],function(t){var f=t.createCommonjsModule(function(K){function ee(Se){return!Q(Se)}function Q(Se){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var We,it,dt=new Blob([""],{type:"text/javascript"}),Ft=URL.createObjectURL(dt);try{it=new Worker(Ft),We=!0}catch{We=!1}return it&&it.terminate(),URL.revokeObjectURL(Ft),We}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var We=document.createElement("canvas");We.width=We.height=1;var it=We.getContext("2d");if(!it)return!1;var dt=it.getImageData(0,0,1,1);return dt&&dt.width===We.width}()?(he[Fe=Se&&Se.failIfMajorPerformanceCaveat]===void 0&&(he[Fe]=function(We){var it=function(Ft){var Qt=document.createElement("canvas"),nr=Object.create(ee.webGLContextAttributes);return nr.failIfMajorPerformanceCaveat=Ft,Qt.probablySupportsContext?Qt.probablySupportsContext("webgl",nr)||Qt.probablySupportsContext("experimental-webgl",nr):Qt.supportsContext?Qt.supportsContext("webgl",nr)||Qt.supportsContext("experimental-webgl",nr):Qt.getContext("webgl",nr)||Qt.getContext("experimental-webgl",nr)}(We);if(!it)return!1;var dt=it.createShader(it.VERTEX_SHADER);return!(!dt||it.isContextLost())&&(it.shaderSource(dt,"void main() {}"),it.compileShader(dt),it.getShaderParameter(dt,it.COMPILE_STATUS)===!0)}(Fe)),he[Fe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Fe}K.exports?K.exports=ee:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=ee,window.mapboxgl.notSupportedReason=Q);var he={};ee.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(K,ee,Q){var he=t.window.document.createElement(K);return ee!==void 0&&(he.className=ee),Q&&Q.appendChild(he),he},createNS:function(K,ee){return t.window.document.createElementNS(K,ee)}},o=t.window.document.documentElement.style;function l(K){if(!o)return K[0];for(var ee=0;ee<K.length;ee++)if(K[ee]in o)return K[ee];return K[0]}var h,i=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){o&&i&&(h=o[i],o[i]="none")},n.enableDrag=function(){o&&i&&(o[i]=h)};var s=l(["transform","WebkitTransform"]);n.setTransform=function(K,ee){K.style[s]=ee};var p=!1;try{var v=Object.defineProperty({},"passive",{get:function(){p=!0}});t.window.addEventListener("test",v,v),t.window.removeEventListener("test",v,v)}catch{p=!1}n.addEventListener=function(K,ee,Q,he){he===void 0&&(he={}),K.addEventListener(ee,Q,"passive"in he&&p?he:he.capture)},n.removeEventListener=function(K,ee,Q,he){he===void 0&&(he={}),K.removeEventListener(ee,Q,"passive"in he&&p?he:he.capture)};var m=function(K){K.preventDefault(),K.stopPropagation(),t.window.removeEventListener("click",m,!0)};function b(K){var ee=K.userImage;return!!(ee&&ee.render&&ee.render())&&(K.data.replace(new Uint8Array(ee.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",m,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",m,!0)},0)},n.mousePos=function(K,ee){var Q=K.getBoundingClientRect();return new t.Point(ee.clientX-Q.left-K.clientLeft,ee.clientY-Q.top-K.clientTop)},n.touchPos=function(K,ee){for(var Q=K.getBoundingClientRect(),he=[],Se=0;Se<ee.length;Se++)he.push(new t.Point(ee[Se].clientX-Q.left-K.clientLeft,ee[Se].clientY-Q.top-K.clientTop));return he},n.mouseButton=function(K){return t.window.InstallTrigger!==void 0&&K.button===2&&K.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:K.button},n.remove=function(K){K.parentNode&&K.parentNode.removeChild(K)};var y=function(K){function ee(){K.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.isLoaded=function(){return this.loaded},ee.prototype.setLoaded=function(Q){if(this.loaded!==Q&&(this.loaded=Q,Q)){for(var he=0,Se=this.requestors;he<Se.length;he+=1){var Fe=Se[he];this._notify(Fe.ids,Fe.callback)}this.requestors=[]}},ee.prototype.getImage=function(Q){return this.images[Q]},ee.prototype.addImage=function(Q,he){this._validate(Q,he)&&(this.images[Q]=he)},ee.prototype._validate=function(Q,he){var Se=!0;return this._validateStretch(he.stretchX,he.data&&he.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchX" value'))),Se=!1),this._validateStretch(he.stretchY,he.data&&he.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchY" value'))),Se=!1),this._validateContent(he.content,he)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "content" value'))),Se=!1),Se},ee.prototype._validateStretch=function(Q,he){if(!Q)return!0;for(var Se=0,Fe=0,We=Q;Fe<We.length;Fe+=1){var it=We[Fe];if(it[0]<Se||it[1]<it[0]||he<it[1])return!1;Se=it[1]}return!0},ee.prototype._validateContent=function(Q,he){return!(Q&&(Q.length!==4||Q[0]<0||he.data.width<Q[0]||Q[1]<0||he.data.height<Q[1]||Q[2]<0||he.data.width<Q[2]||Q[3]<0||he.data.height<Q[3]||Q[2]<Q[0]||Q[3]<Q[1]))},ee.prototype.updateImage=function(Q,he){he.version=this.images[Q].version+1,this.images[Q]=he,this.updatedImages[Q]=!0},ee.prototype.removeImage=function(Q){var he=this.images[Q];delete this.images[Q],delete this.patterns[Q],he.userImage&&he.userImage.onRemove&&he.userImage.onRemove()},ee.prototype.listImages=function(){return Object.keys(this.images)},ee.prototype.getImages=function(Q,he){var Se=!0;if(!this.isLoaded())for(var Fe=0,We=Q;Fe<We.length;Fe+=1)this.images[We[Fe]]||(Se=!1);this.isLoaded()||Se?this._notify(Q,he):this.requestors.push({ids:Q,callback:he})},ee.prototype._notify=function(Q,he){for(var Se={},Fe=0,We=Q;Fe<We.length;Fe+=1){var it=We[Fe];this.images[it]||this.fire(new t.Event("styleimagemissing",{id:it}));var dt=this.images[it];dt?Se[it]={data:dt.data.clone(),pixelRatio:dt.pixelRatio,sdf:dt.sdf,version:dt.version,stretchX:dt.stretchX,stretchY:dt.stretchY,content:dt.content,hasRenderCallback:Boolean(dt.userImage&&dt.userImage.render)}:t.warnOnce('Image "'+it+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}he(null,Se)},ee.prototype.getPixelSize=function(){var Q=this.atlasImage;return{width:Q.width,height:Q.height}},ee.prototype.getPattern=function(Q){var he=this.patterns[Q],Se=this.getImage(Q);if(!Se)return null;if(he&&he.position.version===Se.version)return he.position;if(he)he.position.version=Se.version;else{var Fe={w:Se.data.width+2,h:Se.data.height+2,x:0,y:0},We=new t.ImagePosition(Fe,Se);this.patterns[Q]={bin:Fe,position:We}}return this._updatePatternAtlas(),this.patterns[Q].position},ee.prototype.bind=function(Q){var he=Q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(Q,this.atlasImage,he.RGBA),this.atlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)},ee.prototype._updatePatternAtlas=function(){var Q=[];for(var he in this.patterns)Q.push(this.patterns[he].bin);var Se=t.potpack(Q),Fe=Se.w,We=Se.h,it=this.atlasImage;for(var dt in it.resize({width:Fe||1,height:We||1}),this.patterns){var Ft=this.patterns[dt].bin,Qt=Ft.x+1,nr=Ft.y+1,ur=this.images[dt].data,yr=ur.width,br=ur.height;t.RGBAImage.copy(ur,it,{x:0,y:0},{x:Qt,y:nr},{width:yr,height:br}),t.RGBAImage.copy(ur,it,{x:0,y:br-1},{x:Qt,y:nr-1},{width:yr,height:1}),t.RGBAImage.copy(ur,it,{x:0,y:0},{x:Qt,y:nr+br},{width:yr,height:1}),t.RGBAImage.copy(ur,it,{x:yr-1,y:0},{x:Qt-1,y:nr},{width:1,height:br}),t.RGBAImage.copy(ur,it,{x:0,y:0},{x:Qt+yr,y:nr},{width:1,height:br})}this.dirty=!0},ee.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},ee.prototype.dispatchRenderCallbacks=function(Q){for(var he=0,Se=Q;he<Se.length;he+=1){var Fe=Se[he];if(!this.callbackDispatchedThisFrame[Fe]){this.callbackDispatchedThisFrame[Fe]=!0;var We=this.images[Fe];b(We)&&this.updateImage(Fe,We)}}},ee}(t.Evented),x=T,w=T,g=1e20;function T(K,ee,Q,he,Se,Fe){this.fontSize=K||24,this.buffer=ee===void 0?3:ee,this.cutoff=he||.25,this.fontFamily=Se||"sans-serif",this.fontWeight=Fe||"normal",this.radius=Q||8;var We=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=We,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(We*We),this.gridInner=new Float64Array(We*We),this.f=new Float64Array(We),this.d=new Float64Array(We),this.z=new Float64Array(We+1),this.v=new Int16Array(We),this.middle=Math.round(We/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(K,ee,Q,he,Se,Fe,We){for(var it=0;it<ee;it++){for(var dt=0;dt<Q;dt++)he[dt]=K[dt*ee+it];for(P(he,Se,Fe,We,Q),dt=0;dt<Q;dt++)K[dt*ee+it]=Se[dt]}for(dt=0;dt<Q;dt++){for(it=0;it<ee;it++)he[it]=K[dt*ee+it];for(P(he,Se,Fe,We,ee),it=0;it<ee;it++)K[dt*ee+it]=Math.sqrt(Se[it])}}function P(K,ee,Q,he,Se){Q[0]=0,he[0]=-g,he[1]=+g;for(var Fe=1,We=0;Fe<Se;Fe++){for(var it=(K[Fe]+Fe*Fe-(K[Q[We]]+Q[We]*Q[We]))/(2*Fe-2*Q[We]);it<=he[We];)We--,it=(K[Fe]+Fe*Fe-(K[Q[We]]+Q[We]*Q[We]))/(2*Fe-2*Q[We]);Q[++We]=Fe,he[We]=it,he[We+1]=+g}for(Fe=0,We=0;Fe<Se;Fe++){for(;he[We+1]<Fe;)We++;ee[Fe]=(Fe-Q[We])*(Fe-Q[We])+K[Q[We]]}}T.prototype.draw=function(K){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(K,this.buffer,this.middle);for(var ee=this.ctx.getImageData(0,0,this.size,this.size),Q=new Uint8ClampedArray(this.size*this.size),he=0;he<this.size*this.size;he++){var Se=ee.data[4*he+3]/255;this.gridOuter[he]=Se===1?0:Se===0?g:Math.pow(Math.max(0,.5-Se),2),this.gridInner[he]=Se===1?g:Se===0?0:Math.pow(Math.max(0,Se-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),he=0;he<this.size*this.size;he++)Q[he]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[he]-this.gridInner[he])/this.radius+this.cutoff))));return Q},x.default=w;var L=function(K,ee){this.requestManager=K,this.localIdeographFontFamily=ee,this.entries={}};L.prototype.setURL=function(K){this.url=K},L.prototype.getGlyphs=function(K,ee){var Q=this,he=[];for(var Se in K)for(var Fe=0,We=K[Se];Fe<We.length;Fe+=1)he.push({stack:Se,id:We[Fe]});t.asyncAll(he,function(it,dt){var Ft=it.stack,Qt=it.id,nr=Q.entries[Ft];nr||(nr=Q.entries[Ft]={glyphs:{},requests:{},ranges:{}});var ur=nr.glyphs[Qt];if(ur===void 0){if(ur=Q._tinySDF(nr,Ft,Qt))return nr.glyphs[Qt]=ur,void dt(null,{stack:Ft,id:Qt,glyph:ur});var yr=Math.floor(Qt/256);if(256*yr>65535)dt(new Error("glyphs > 65535 not supported"));else if(nr.ranges[yr])dt(null,{stack:Ft,id:Qt,glyph:ur});else{var br=nr.requests[yr];br||(br=nr.requests[yr]=[],L.loadGlyphRange(Ft,yr,Q.url,Q.requestManager,function(Pr,gr){if(gr){for(var Cr in gr)Q._doesCharSupportLocalGlyph(+Cr)||(nr.glyphs[+Cr]=gr[+Cr]);nr.ranges[yr]=!0}for(var Nr=0,Qr=br;Nr<Qr.length;Nr+=1)(0,Qr[Nr])(Pr,gr);delete nr.requests[yr]})),br.push(function(Pr,gr){Pr?dt(Pr):gr&&dt(null,{stack:Ft,id:Qt,glyph:gr[Qt]||null})})}}else dt(null,{stack:Ft,id:Qt,glyph:ur})},function(it,dt){if(it)ee(it);else if(dt){for(var Ft={},Qt=0,nr=dt;Qt<nr.length;Qt+=1){var ur=nr[Qt],yr=ur.stack,br=ur.id,Pr=ur.glyph;(Ft[yr]||(Ft[yr]={}))[br]=Pr&&{id:Pr.id,bitmap:Pr.bitmap.clone(),metrics:Pr.metrics}}ee(null,Ft)}})},L.prototype._doesCharSupportLocalGlyph=function(K){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](K)||t.isChar["Hangul Syllables"](K)||t.isChar.Hiragana(K)||t.isChar.Katakana(K))},L.prototype._tinySDF=function(K,ee,Q){var he=this.localIdeographFontFamily;if(he&&this._doesCharSupportLocalGlyph(Q)){var Se=K.tinySDF;if(!Se){var Fe="400";/bold/i.test(ee)?Fe="900":/medium/i.test(ee)?Fe="500":/light/i.test(ee)&&(Fe="200"),Se=K.tinySDF=new L.TinySDF(24,3,8,.25,he,Fe)}return{id:Q,bitmap:new t.AlphaImage({width:30,height:30},Se.draw(String.fromCharCode(Q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},L.loadGlyphRange=function(K,ee,Q,he,Se){var Fe=256*ee,We=Fe+255,it=he.transformRequest(he.normalizeGlyphsURL(Q).replace("{fontstack}",K).replace("{range}",Fe+"-"+We),t.ResourceType.Glyphs);t.getArrayBuffer(it,function(dt,Ft){if(dt)Se(dt);else if(Ft){for(var Qt={},nr=0,ur=t.parseGlyphPBF(Ft);nr<ur.length;nr+=1){var yr=ur[nr];Qt[yr.id]=yr}Se(null,Qt)}})},L.TinySDF=x;var I=function(){this.specification=t.styleSpec.light.position};I.prototype.possiblyEvaluate=function(K,ee){return t.sphericalToCartesian(K.expression.evaluate(ee))},I.prototype.interpolate=function(K,ee,Q){return{x:t.number(K.x,ee.x,Q),y:t.number(K.y,ee.y,Q),z:t.number(K.z,ee.z,Q)}};var C=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new I,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),k=function(K){function ee(Q){K.call(this),this._transitionable=new t.Transitionable(C),this.setLight(Q),this._transitioning=this._transitionable.untransitioned()}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getLight=function(){return this._transitionable.serialize()},ee.prototype.setLight=function(Q,he){if(he===void 0&&(he={}),!this._validate(t.validateLight,Q,he))for(var Se in Q){var Fe=Q[Se];t.endsWith(Se,"-transition")?this._transitionable.setTransition(Se.slice(0,-11),Fe):this._transitionable.setValue(Se,Fe)}},ee.prototype.updateTransitions=function(Q){this._transitioning=this._transitionable.transitioned(Q,this._transitioning)},ee.prototype.hasTransition=function(){return this._transitioning.hasTransition()},ee.prototype.recalculate=function(Q){this.properties=this._transitioning.possiblyEvaluate(Q)},ee.prototype._validate=function(Q,he,Se){return(!Se||Se.validate!==!1)&&t.emitValidationErrors(this,Q.call(t.validateStyle,t.extend({value:he,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},ee}(t.Evented),E=function(K,ee){this.width=K,this.height=ee,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(K,ee){var Q=K.join(",")+String(ee);return this.dashEntry[Q]||(this.dashEntry[Q]=this.addDash(K,ee)),this.dashEntry[Q]},E.prototype.getDashRanges=function(K,ee,Q){var he=[],Se=K.length%2==1?-K[K.length-1]*Q:0,Fe=K[0]*Q,We=!0;he.push({left:Se,right:Fe,isDash:We,zeroLength:K[0]===0});for(var it=K[0],dt=1;dt<K.length;dt++){var Ft=K[dt];he.push({left:Se=it*Q,right:Fe=(it+=Ft)*Q,isDash:We=!We,zeroLength:Ft===0})}return he},E.prototype.addRoundDash=function(K,ee,Q){for(var he=ee/2,Se=-Q;Se<=Q;Se++)for(var Fe=this.width*(this.nextRow+Q+Se),We=0,it=K[We],dt=0;dt<this.width;dt++){dt/it.right>1&&(it=K[++We]);var Ft=Math.abs(dt-it.left),Qt=Math.abs(dt-it.right),nr=Math.min(Ft,Qt),ur=void 0,yr=Se/Q*(he+1);if(it.isDash){var br=he-Math.abs(yr);ur=Math.sqrt(nr*nr+br*br)}else ur=he-Math.sqrt(nr*nr+yr*yr);this.data[Fe+dt]=Math.max(0,Math.min(255,ur+128))}},E.prototype.addRegularDash=function(K){for(var ee=K.length-1;ee>=0;--ee){var Q=K[ee],he=K[ee+1];Q.zeroLength?K.splice(ee,1):he&&he.isDash===Q.isDash&&(he.left=Q.left,K.splice(ee,1))}var Se=K[0],Fe=K[K.length-1];Se.isDash===Fe.isDash&&(Se.left=Fe.left-this.width,Fe.right=Se.right+this.width);for(var We=this.width*this.nextRow,it=0,dt=K[it],Ft=0;Ft<this.width;Ft++){Ft/dt.right>1&&(dt=K[++it]);var Qt=Math.abs(Ft-dt.left),nr=Math.abs(Ft-dt.right),ur=Math.min(Qt,nr);this.data[We+Ft]=Math.max(0,Math.min(255,(dt.isDash?ur:-ur)+128))}},E.prototype.addDash=function(K,ee){var Q=ee?7:0,he=2*Q+1;if(this.nextRow+he>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Se=0,Fe=0;Fe<K.length;Fe++)Se+=K[Fe];if(Se!==0){var We=this.width/Se,it=this.getDashRanges(K,this.width,We);ee?this.addRoundDash(it,We,Q):this.addRegularDash(it)}var dt={y:(this.nextRow+Q+.5)/this.height,height:2*Q/this.height,width:Se};return this.nextRow+=he,this.dirty=!0,dt},E.prototype.bind=function(K){var ee=K.gl;this.texture?(ee.bindTexture(ee.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ee.texSubImage2D(ee.TEXTURE_2D,0,0,0,this.width,this.height,ee.ALPHA,ee.UNSIGNED_BYTE,this.data))):(this.texture=ee.createTexture(),ee.bindTexture(ee.TEXTURE_2D,this.texture),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.REPEAT),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.REPEAT),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),ee.texImage2D(ee.TEXTURE_2D,0,ee.ALPHA,this.width,this.height,0,ee.ALPHA,ee.UNSIGNED_BYTE,this.data))};var R=function K(ee,Q){this.workerPool=ee,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var he=this.workerPool.acquire(this.id),Se=0;Se<he.length;Se++){var Fe=new K.Actor(he[Se],Q,this.id);Fe.name="Worker "+Se,this.actors.push(Fe)}};function O(K,ee,Q){var he=function(Se,Fe){if(Se)return Q(Se);if(Fe){var We=t.pick(t.extend(Fe,K),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Fe.vector_layers&&(We.vectorLayers=Fe.vector_layers,We.vectorLayerIds=We.vectorLayers.map(function(it){return it.id})),We.tiles=ee.canonicalizeTileset(We,K.url),Q(null,We)}};return K.url?t.getJSON(ee.transformRequest(ee.normalizeSourceURL(K.url),t.ResourceType.Source),he):t.browser.frame(function(){return he(null,K)})}R.prototype.broadcast=function(K,ee,Q){t.asyncAll(this.actors,function(he,Se){he.send(K,ee,Se)},Q=Q||function(){})},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(K){K.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=t.Actor;var N=function(K,ee,Q){this.bounds=t.LngLatBounds.convert(this.validateBounds(K)),this.minzoom=ee||0,this.maxzoom=Q||24};N.prototype.validateBounds=function(K){return Array.isArray(K)&&K.length===4?[Math.max(-180,K[0]),Math.max(-90,K[1]),Math.min(180,K[2]),Math.min(90,K[3])]:[-180,-90,180,90]},N.prototype.contains=function(K){var ee=Math.pow(2,K.z),Q=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*ee),he=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*ee),Se=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*ee),Fe=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*ee);return K.x>=Q&&K.x<Se&&K.y>=he&&K.y<Fe};var G=function(K){function ee(Q,he,Se,Fe){if(K.call(this),this.id=Q,this.dispatcher=Se,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(he,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},he),this._collectResourceTiming=he.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Fe)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(he,Se){Q._tileJSONRequest=null,Q._loaded=!0,he?Q.fire(new t.ErrorEvent(he)):Se&&(t.extend(Q,Se),Se.bounds&&(Q.tileBounds=new N(Se.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Se.tiles,Q.map._requestManager._customAccessToken),t.postMapLoadEvent(Se.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken,Q.map._requestManager._customAccessToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},ee.prototype.loaded=function(){return this._loaded},ee.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},ee.prototype.onAdd=function(Q){this.map=Q,this.load()},ee.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ee.prototype.serialize=function(){return t.extend({},this._options)},ee.prototype.loadTile=function(Q,he){var Se=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme)),Fe={request:this.map._requestManager.transformRequest(Se,t.ResourceType.Tile),uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,tileSize:this.tileSize*Q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function We(it,dt){return delete Q.request,Q.aborted?he(null):it&&it.status!==404?he(it):(dt&&dt.resourceTiming&&(Q.resourceTiming=dt.resourceTiming),this.map._refreshExpiredTiles&&dt&&Q.setExpiryData(dt),Q.loadVectorData(dt,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),he(null),void(Q.reloadCallback&&(this.loadTile(Q,Q.reloadCallback),Q.reloadCallback=null)))}Fe.request.collectResourceTiming=this._collectResourceTiming,Q.actor&&Q.state!=="expired"?Q.state==="loading"?Q.reloadCallback=he:Q.request=Q.actor.send("reloadTile",Fe,We.bind(this)):(Q.actor=this.dispatcher.getActor(),Q.request=Q.actor.send("loadTile",Fe,We.bind(this)))},ee.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.actor&&Q.actor.send("abortTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},ee.prototype.unloadTile=function(Q){Q.unloadVectorData(),Q.actor&&Q.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},ee.prototype.hasTransition=function(){return!1},ee}(t.Evented),U=function(K){function ee(Q,he,Se,Fe){K.call(this),this.id=Q,this.dispatcher=Se,this.setEventedParent(Fe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},he),t.extend(this,t.pick(he,["url","scheme","tileSize"]))}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(he,Se){Q._tileJSONRequest=null,Q._loaded=!0,he?Q.fire(new t.ErrorEvent(he)):Se&&(t.extend(Q,Se),Se.bounds&&(Q.tileBounds=new N(Se.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Se.tiles),t.postMapLoadEvent(Se.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},ee.prototype.loaded=function(){return this._loaded},ee.prototype.onAdd=function(Q){this.map=Q,this.load()},ee.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ee.prototype.serialize=function(){return t.extend({},this._options)},ee.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},ee.prototype.loadTile=function(Q,he){var Se=this,Fe=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(Fe,t.ResourceType.Tile),function(We,it){if(delete Q.request,Q.aborted)Q.state="unloaded",he(null);else if(We)Q.state="errored",he(We);else if(it){Se.map._refreshExpiredTiles&&Q.setExpiryData(it),delete it.cacheControl,delete it.expires;var dt=Se.map.painter.context,Ft=dt.gl;Q.texture=Se.map.painter.getTileTexture(it.width),Q.texture?Q.texture.update(it,{useMipmap:!0}):(Q.texture=new t.Texture(dt,it,Ft.RGBA,{useMipmap:!0}),Q.texture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE,Ft.LINEAR_MIPMAP_NEAREST),dt.extTextureFilterAnisotropic&&Ft.texParameterf(Ft.TEXTURE_2D,dt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,dt.extTextureFilterAnisotropicMax)),Q.state="loaded",t.cacheEntryPossiblyAdded(Se.dispatcher),he(null)}})},ee.prototype.abortTile=function(Q,he){Q.request&&(Q.request.cancel(),delete Q.request),he()},ee.prototype.unloadTile=function(Q,he){Q.texture&&this.map.painter.saveTileTexture(Q.texture),he()},ee.prototype.hasTransition=function(){return!1},ee}(t.Evented),Y=function(K){function ee(Q,he,Se,Fe){K.call(this,Q,he,Se,Fe),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},he),this.encoding=he.encoding||"mapbox"}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},ee.prototype.loadTile=function(Q,he){var Se=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Fe(We,it){We&&(Q.state="errored",he(We)),it&&(Q.dem=it,Q.needsHillshadePrepare=!0,Q.state="loaded",he(null))}Q.request=t.getImage(this.map._requestManager.transformRequest(Se,t.ResourceType.Tile),function(We,it){if(delete Q.request,Q.aborted)Q.state="unloaded",he(null);else if(We)Q.state="errored",he(We);else if(it){this.map._refreshExpiredTiles&&Q.setExpiryData(it),delete it.cacheControl,delete it.expires;var dt=t.window.ImageBitmap&&it instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?it:t.browser.getImageData(it,1),Ft={uid:Q.uid,coord:Q.tileID,source:this.id,rawImageData:dt,encoding:this.encoding};Q.actor&&Q.state!=="expired"||(Q.actor=this.dispatcher.getActor(),Q.actor.send("loadDEMTile",Ft,Fe.bind(this)))}}.bind(this)),Q.neighboringTiles=this._getNeighboringTiles(Q.tileID)},ee.prototype._getNeighboringTiles=function(Q){var he=Q.canonical,Se=Math.pow(2,he.z),Fe=(he.x-1+Se)%Se,We=he.x===0?Q.wrap-1:Q.wrap,it=(he.x+1+Se)%Se,dt=he.x+1===Se?Q.wrap+1:Q.wrap,Ft={};return Ft[new t.OverscaledTileID(Q.overscaledZ,We,he.z,Fe,he.y).key]={backfilled:!1},Ft[new t.OverscaledTileID(Q.overscaledZ,dt,he.z,it,he.y).key]={backfilled:!1},he.y>0&&(Ft[new t.OverscaledTileID(Q.overscaledZ,We,he.z,Fe,he.y-1).key]={backfilled:!1},Ft[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,he.z,he.x,he.y-1).key]={backfilled:!1},Ft[new t.OverscaledTileID(Q.overscaledZ,dt,he.z,it,he.y-1).key]={backfilled:!1}),he.y+1<Se&&(Ft[new t.OverscaledTileID(Q.overscaledZ,We,he.z,Fe,he.y+1).key]={backfilled:!1},Ft[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,he.z,he.x,he.y+1).key]={backfilled:!1},Ft[new t.OverscaledTileID(Q.overscaledZ,dt,he.z,it,he.y+1).key]={backfilled:!1}),Ft},ee.prototype.unloadTile=function(Q){Q.demTexture&&this.map.painter.saveTileTexture(Q.demTexture),Q.fbo&&(Q.fbo.destroy(),delete Q.fbo),Q.dem&&delete Q.dem,delete Q.neighboringTiles,Q.state="unloaded",Q.actor&&Q.actor.send("removeDEMTile",{uid:Q.uid,source:this.id})},ee}(U),z=function(K){function ee(Q,he,Se,Fe){K.call(this),this.id=Q,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=Se.getActor(),this.setEventedParent(Fe),this._data=he.data,this._options=t.extend({},he),this._collectResourceTiming=he.collectResourceTiming,this._resourceTiming=[],he.maxzoom!==void 0&&(this.maxzoom=he.maxzoom),he.type&&(this.type=he.type),he.attribution&&(this.attribution=he.attribution),this.promoteId=he.promoteId;var We=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:he.cluster||!1,geojsonVtOptions:{buffer:(he.buffer!==void 0?he.buffer:128)*We,tolerance:(he.tolerance!==void 0?he.tolerance:.375)*We,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:he.lineMetrics||!1,generateId:he.generateId||!1},superclusterOptions:{maxZoom:he.clusterMaxZoom!==void 0?Math.min(he.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(he.clusterRadius||50)*We,log:!1,generateId:he.generateId||!1},clusterProperties:he.clusterProperties},he.workerOptions)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.load=function(){var Q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(he){if(he)Q.fire(new t.ErrorEvent(he));else{var Se={dataType:"source",sourceDataType:"metadata"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(Se.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new t.Event("data",Se))}})},ee.prototype.onAdd=function(Q){this.map=Q,this.load()},ee.prototype.setData=function(Q){var he=this;return this._data=Q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Se){if(Se)he.fire(new t.ErrorEvent(Se));else{var Fe={dataType:"source",sourceDataType:"content"};he._collectResourceTiming&&he._resourceTiming&&he._resourceTiming.length>0&&(Fe.resourceTiming=he._resourceTiming,he._resourceTiming=[]),he.fire(new t.Event("data",Fe))}}),this},ee.prototype.getClusterExpansionZoom=function(Q,he){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Q,source:this.id},he),this},ee.prototype.getClusterChildren=function(Q,he){return this.actor.send("geojson.getClusterChildren",{clusterId:Q,source:this.id},he),this},ee.prototype.getClusterLeaves=function(Q,he,Se,Fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Q,limit:he,offset:Se},Fe),this},ee.prototype._updateWorkerData=function(Q){var he=this;this._loaded=!1;var Se=t.extend({},this.workerOptions),Fe=this._data;typeof Fe=="string"?(Se.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Fe),t.ResourceType.Source),Se.request.collectResourceTiming=this._collectResourceTiming):Se.data=JSON.stringify(Fe),this.actor.send(this.type+".loadData",Se,function(We,it){he._removed||it&&it.abandoned||(he._loaded=!0,it&&it.resourceTiming&&it.resourceTiming[he.id]&&(he._resourceTiming=it.resourceTiming[he.id].slice(0)),he.actor.send(he.type+".coalesce",{source:Se.source},null),Q(We))})},ee.prototype.loaded=function(){return this._loaded},ee.prototype.loadTile=function(Q,he){var Se=this,Fe=Q.actor?"reloadTile":"loadTile";Q.actor=this.actor,Q.request=this.actor.send(Fe,{type:this.type,uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(We,it){return delete Q.request,Q.unloadVectorData(),Q.aborted?he(null):We?he(We):(Q.loadVectorData(it,Se.map.painter,Fe==="reloadTile"),he(null))})},ee.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.aborted=!0},ee.prototype.unloadTile=function(Q){Q.unloadVectorData(),this.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id})},ee.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},ee.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},ee.prototype.hasTransition=function(){return!1},ee}(t.Evented),B=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),H=function(K){function ee(Q,he,Se,Fe){K.call(this),this.id=Q,this.dispatcher=Se,this.coordinates=he.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Fe),this.options=he}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.load=function(Q,he){var Se=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Fe,We){Se._loaded=!0,Fe?Se.fire(new t.ErrorEvent(Fe)):We&&(Se.image=We,Q&&(Se.coordinates=Q),he&&he(),Se._finishLoading())})},ee.prototype.loaded=function(){return this._loaded},ee.prototype.updateImage=function(Q){var he=this;return this.image&&Q.url?(this.options.url=Q.url,this.load(Q.coordinates,function(){he.texture=null}),this):this},ee.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},ee.prototype.onAdd=function(Q){this.map=Q,this.load()},ee.prototype.setCoordinates=function(Q){var he=this;this.coordinates=Q;var Se=Q.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(We){for(var it=1/0,dt=1/0,Ft=-1/0,Qt=-1/0,nr=0,ur=We;nr<ur.length;nr+=1){var yr=ur[nr];it=Math.min(it,yr.x),dt=Math.min(dt,yr.y),Ft=Math.max(Ft,yr.x),Qt=Math.max(Qt,yr.y)}var br=Math.max(Ft-it,Qt-dt),Pr=Math.max(0,Math.floor(-Math.log(br)/Math.LN2)),gr=Math.pow(2,Pr);return new t.CanonicalTileID(Pr,Math.floor((it+Ft)/2*gr),Math.floor((dt+Qt)/2*gr))}(Se),this.minzoom=this.maxzoom=this.tileID.z;var Fe=Se.map(function(We){return he.tileID.getTilePoint(We)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Fe[0].x,Fe[0].y,0,0),this._boundsArray.emplaceBack(Fe[1].x,Fe[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Fe[3].x,Fe[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Fe[2].x,Fe[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},ee.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var Q=this.map.painter.context,he=Q.gl;for(var Se in this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(Q,this.image,he.RGBA),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE)),this.tiles){var Fe=this.tiles[Se];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},ee.prototype.loadTile=function(Q,he){this.tileID&&this.tileID.equals(Q.tileID.canonical)?(this.tiles[String(Q.tileID.wrap)]=Q,Q.buckets={},he(null)):(Q.state="errored",he(null))},ee.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ee.prototype.hasTransition=function(){return!1},ee}(t.Evented),V=function(K){function ee(Q,he,Se,Fe){K.call(this,Q,he,Se,Fe),this.roundZoom=!0,this.type="video",this.options=he}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.load=function(){var Q=this;this._loaded=!1;var he=this.options;this.urls=[];for(var Se=0,Fe=he.urls;Se<Fe.length;Se+=1)this.urls.push(this.map._requestManager.transformRequest(Fe[Se],t.ResourceType.Source).url);t.getVideo(this.urls,function(We,it){Q._loaded=!0,We?Q.fire(new t.ErrorEvent(We)):it&&(Q.video=it,Q.video.loop=!0,Q.video.addEventListener("playing",function(){Q.map.triggerRepaint()}),Q.map&&Q.video.play(),Q._finishLoading())})},ee.prototype.pause=function(){this.video&&this.video.pause()},ee.prototype.play=function(){this.video&&this.video.play()},ee.prototype.seek=function(Q){if(this.video){var he=this.video.seekable;Q<he.start(0)||Q>he.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+he.start(0)+" and "+he.end(0)+"-second mark."))):this.video.currentTime=Q}},ee.prototype.getVideo=function(){return this.video},ee.prototype.onAdd=function(Q){this.map||(this.map=Q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},ee.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var Q=this.map.painter.context,he=Q.gl;for(var Se in this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE),he.texSubImage2D(he.TEXTURE_2D,0,0,0,he.RGBA,he.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(Q,this.video,he.RGBA),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE)),this.tiles){var Fe=this.tiles[Se];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},ee.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},ee.prototype.hasTransition=function(){return this.video&&!this.video.paused},ee}(H),Z=function(K){function ee(Q,he,Se,Fe){K.call(this,Q,he,Se,Fe),he.coordinates?Array.isArray(he.coordinates)&&he.coordinates.length===4&&!he.coordinates.some(function(We){return!Array.isArray(We)||We.length!==2||We.some(function(it){return typeof it!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+Q,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+Q,null,'missing required property "coordinates"'))),he.animate&&typeof he.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+Q,null,'optional "animate" property must be a boolean value'))),he.canvas?typeof he.canvas=="string"||he.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+Q,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+Q,null,'missing required property "canvas"'))),this.options=he,this.animate=he.animate===void 0||he.animate}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},ee.prototype.getCanvas=function(){return this.canvas},ee.prototype.onAdd=function(Q){this.map=Q,this.load(),this.canvas&&this.animate&&this.play()},ee.prototype.onRemove=function(){this.pause()},ee.prototype.prepare=function(){var Q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var he=this.map.painter.context,Se=he.gl;for(var Fe in this.boundsBuffer||(this.boundsBuffer=he.createVertexBuffer(this._boundsArray,B.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(he,this.canvas,Se.RGBA,{premultiply:!0}),this.tiles){var We=this.tiles[Fe];We.state!=="loaded"&&(We.state="loaded",We.texture=this.texture)}}},ee.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},ee.prototype.hasTransition=function(){return this._playing},ee.prototype._hasInvalidDimensions=function(){for(var Q=0,he=[this.canvas.width,this.canvas.height];Q<he.length;Q+=1){var Se=he[Q];if(isNaN(Se)||Se<=0)return!0}return!1},ee}(H),q={vector:G,raster:U,"raster-dem":Y,geojson:z,video:V,image:H,canvas:Z};function J(K,ee){var Q=t.identity([]);return t.translate(Q,Q,[1,1,0]),t.scale(Q,Q,[.5*K.width,.5*K.height,1]),t.multiply(Q,Q,K.calculatePosMatrix(ee.toUnwrapped()))}function ne(K,ee,Q,he,Se,Fe){var We=function(Pr,gr,Cr){if(Pr)for(var Nr=0,Qr=Pr;Nr<Qr.length;Nr+=1){var bn=gr[Qr[Nr]];if(bn&&bn.source===Cr&&bn.type==="fill-extrusion")return!0}else for(var un in gr){var xn=gr[un];if(xn.source===Cr&&xn.type==="fill-extrusion")return!0}return!1}(Se&&Se.layers,ee,K.id),it=Fe.maxPitchScaleFactor(),dt=K.tilesIn(he,it,We);dt.sort(ve);for(var Ft=[],Qt=0,nr=dt;Qt<nr.length;Qt+=1){var ur=nr[Qt];Ft.push({wrappedTileID:ur.tileID.wrapped().key,queryResults:ur.tile.queryRenderedFeatures(ee,Q,K._state,ur.queryGeometry,ur.cameraQueryGeometry,ur.scale,Se,Fe,it,J(K.transform,ur.tileID))})}var yr=function(Pr){for(var gr={},Cr={},Nr=0,Qr=Pr;Nr<Qr.length;Nr+=1){var bn=Qr[Nr],un=bn.queryResults,xn=bn.wrappedTileID,zn=Cr[xn]=Cr[xn]||{};for(var Jn in un)for(var Hn=un[Jn],qn=zn[Jn]=zn[Jn]||{},ua=gr[Jn]=gr[Jn]||[],za=0,Ca=Hn;za<Ca.length;za+=1){var qa=Ca[za];qn[qa.featureIndex]||(qn[qa.featureIndex]=!0,ua.push(qa))}}return gr}(Ft);for(var br in yr)yr[br].forEach(function(Pr){var gr=Pr.feature,Cr=K.getFeatureState(gr.layer["source-layer"],gr.id);gr.source=gr.layer.source,gr.layer["source-layer"]&&(gr.sourceLayer=gr.layer["source-layer"]),gr.state=Cr});return yr}function ve(K,ee){var Q=K.tileID,he=ee.tileID;return Q.overscaledZ-he.overscaledZ||Q.canonical.y-he.canonical.y||Q.wrap-he.wrap||Q.canonical.x-he.canonical.x}var $=function(K,ee){this.max=K,this.onRemove=ee,this.reset()};$.prototype.reset=function(){for(var K in this.data)for(var ee=0,Q=this.data[K];ee<Q.length;ee+=1){var he=Q[ee];he.timeout&&clearTimeout(he.timeout),this.onRemove(he.value)}return this.data={},this.order=[],this},$.prototype.add=function(K,ee,Q){var he=this,Se=K.wrapped().key;this.data[Se]===void 0&&(this.data[Se]=[]);var Fe={value:ee,timeout:void 0};if(Q!==void 0&&(Fe.timeout=setTimeout(function(){he.remove(K,Fe)},Q)),this.data[Se].push(Fe),this.order.push(Se),this.order.length>this.max){var We=this._getAndRemoveByKey(this.order[0]);We&&this.onRemove(We)}return this},$.prototype.has=function(K){return K.wrapped().key in this.data},$.prototype.getAndRemove=function(K){return this.has(K)?this._getAndRemoveByKey(K.wrapped().key):null},$.prototype._getAndRemoveByKey=function(K){var ee=this.data[K].shift();return ee.timeout&&clearTimeout(ee.timeout),this.data[K].length===0&&delete this.data[K],this.order.splice(this.order.indexOf(K),1),ee.value},$.prototype.getByKey=function(K){var ee=this.data[K];return ee?ee[0].value:null},$.prototype.get=function(K){return this.has(K)?this.data[K.wrapped().key][0].value:null},$.prototype.remove=function(K,ee){if(!this.has(K))return this;var Q=K.wrapped().key,he=ee===void 0?0:this.data[Q].indexOf(ee),Se=this.data[Q][he];return this.data[Q].splice(he,1),Se.timeout&&clearTimeout(Se.timeout),this.data[Q].length===0&&delete this.data[Q],this.onRemove(Se.value),this.order.splice(this.order.indexOf(Q),1),this},$.prototype.setMaxSize=function(K){for(this.max=K;this.order.length>this.max;){var ee=this._getAndRemoveByKey(this.order[0]);ee&&this.onRemove(ee)}return this},$.prototype.filter=function(K){var ee=[];for(var Q in this.data)for(var he=0,Se=this.data[Q];he<Se.length;he+=1){var Fe=Se[he];K(Fe.value)||ee.push(Fe)}for(var We=0,it=ee;We<it.length;We+=1){var dt=it[We];this.remove(dt.value.tileID,dt)}};var j=function(K,ee,Q){this.context=K;var he=K.gl;this.buffer=he.createBuffer(),this.dynamicDraw=Boolean(Q),this.context.unbindVAO(),K.bindElementBuffer.set(this.buffer),he.bufferData(he.ELEMENT_ARRAY_BUFFER,ee.arrayBuffer,this.dynamicDraw?he.DYNAMIC_DRAW:he.STATIC_DRAW),this.dynamicDraw||delete ee.arrayBuffer};j.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},j.prototype.updateData=function(K){var ee=this.context.gl;this.context.unbindVAO(),this.bind(),ee.bufferSubData(ee.ELEMENT_ARRAY_BUFFER,0,K.arrayBuffer)},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ae={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ie=function(K,ee,Q,he){this.length=ee.length,this.attributes=Q,this.itemSize=ee.bytesPerElement,this.dynamicDraw=he,this.context=K;var Se=K.gl;this.buffer=Se.createBuffer(),K.bindVertexBuffer.set(this.buffer),Se.bufferData(Se.ARRAY_BUFFER,ee.arrayBuffer,this.dynamicDraw?Se.DYNAMIC_DRAW:Se.STATIC_DRAW),this.dynamicDraw||delete ee.arrayBuffer};ie.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ie.prototype.updateData=function(K){var ee=this.context.gl;this.bind(),ee.bufferSubData(ee.ARRAY_BUFFER,0,K.arrayBuffer)},ie.prototype.enableAttributes=function(K,ee){for(var Q=0;Q<this.attributes.length;Q++){var he=ee.attributes[this.attributes[Q].name];he!==void 0&&K.enableVertexAttribArray(he)}},ie.prototype.setVertexAttribPointers=function(K,ee,Q){for(var he=0;he<this.attributes.length;he++){var Se=this.attributes[he],Fe=ee.attributes[Se.name];Fe!==void 0&&K.vertexAttribPointer(Fe,Se.components,K[ae[Se.type]],!1,this.itemSize,Se.offset+this.itemSize*(Q||0))}},ie.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var te=function(K){this.gl=K.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};te.prototype.get=function(){return this.current},te.prototype.set=function(K){},te.prototype.getDefault=function(){return this.default},te.prototype.setDefault=function(){this.set(this.default)};var re=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return t.Color.transparent},ee.prototype.set=function(Q){var he=this.current;(Q.r!==he.r||Q.g!==he.g||Q.b!==he.b||Q.a!==he.a||this.dirty)&&(this.gl.clearColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},ee}(te),ce=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return 1},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.clearDepth(Q),this.current=Q,this.dirty=!1)},ee}(te),pe=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return 0},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.clearStencil(Q),this.current=Q,this.dirty=!1)},ee}(te),fe=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return[!0,!0,!0,!0]},ee.prototype.set=function(Q){var he=this.current;(Q[0]!==he[0]||Q[1]!==he[1]||Q[2]!==he[2]||Q[3]!==he[3]||this.dirty)&&(this.gl.colorMask(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},ee}(te),se=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!0},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.depthMask(Q),this.current=Q,this.dirty=!1)},ee}(te),de=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return 255},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.stencilMask(Q),this.current=Q,this.dirty=!1)},ee}(te),be=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},ee.prototype.set=function(Q){var he=this.current;(Q.func!==he.func||Q.ref!==he.ref||Q.mask!==he.mask||this.dirty)&&(this.gl.stencilFunc(Q.func,Q.ref,Q.mask),this.current=Q,this.dirty=!1)},ee}(te),xe=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){var Q=this.gl;return[Q.KEEP,Q.KEEP,Q.KEEP]},ee.prototype.set=function(Q){var he=this.current;(Q[0]!==he[0]||Q[1]!==he[1]||Q[2]!==he[2]||this.dirty)&&(this.gl.stencilOp(Q[0],Q[1],Q[2]),this.current=Q,this.dirty=!1)},ee}(te),ke=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!1},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;Q?he.enable(he.STENCIL_TEST):he.disable(he.STENCIL_TEST),this.current=Q,this.dirty=!1}},ee}(te),Re=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return[0,1]},ee.prototype.set=function(Q){var he=this.current;(Q[0]!==he[0]||Q[1]!==he[1]||this.dirty)&&(this.gl.depthRange(Q[0],Q[1]),this.current=Q,this.dirty=!1)},ee}(te),Ke=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!1},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;Q?he.enable(he.DEPTH_TEST):he.disable(he.DEPTH_TEST),this.current=Q,this.dirty=!1}},ee}(te),ze=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return this.gl.LESS},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.depthFunc(Q),this.current=Q,this.dirty=!1)},ee}(te),Je=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!1},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;Q?he.enable(he.BLEND):he.disable(he.BLEND),this.current=Q,this.dirty=!1}},ee}(te),qe=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){var Q=this.gl;return[Q.ONE,Q.ZERO]},ee.prototype.set=function(Q){var he=this.current;(Q[0]!==he[0]||Q[1]!==he[1]||this.dirty)&&(this.gl.blendFunc(Q[0],Q[1]),this.current=Q,this.dirty=!1)},ee}(te),Ee=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return t.Color.transparent},ee.prototype.set=function(Q){var he=this.current;(Q.r!==he.r||Q.g!==he.g||Q.b!==he.b||Q.a!==he.a||this.dirty)&&(this.gl.blendColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},ee}(te),Ae=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return this.gl.FUNC_ADD},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.blendEquation(Q),this.current=Q,this.dirty=!1)},ee}(te),Be=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!1},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;Q?he.enable(he.CULL_FACE):he.disable(he.CULL_FACE),this.current=Q,this.dirty=!1}},ee}(te),$e=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return this.gl.BACK},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.cullFace(Q),this.current=Q,this.dirty=!1)},ee}(te),xt=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return this.gl.CCW},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.frontFace(Q),this.current=Q,this.dirty=!1)},ee}(te),bt=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.useProgram(Q),this.current=Q,this.dirty=!1)},ee}(te),Ne=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return this.gl.TEXTURE0},ee.prototype.set=function(Q){(Q!==this.current||this.dirty)&&(this.gl.activeTexture(Q),this.current=Q,this.dirty=!1)},ee}(te),st=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){var Q=this.gl;return[0,0,Q.drawingBufferWidth,Q.drawingBufferHeight]},ee.prototype.set=function(Q){var he=this.current;(Q[0]!==he[0]||Q[1]!==he[1]||Q[2]!==he[2]||Q[3]!==he[3]||this.dirty)&&(this.gl.viewport(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},ee}(te),_t=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.bindFramebuffer(he.FRAMEBUFFER,Q),this.current=Q,this.dirty=!1}},ee}(te),Ot=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.bindRenderbuffer(he.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},ee}(te),Wt=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.bindTexture(he.TEXTURE_2D,Q),this.current=Q,this.dirty=!1}},ee}(te),Et=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.bindBuffer(he.ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1}},ee}(te),jt=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){var he=this.gl;he.bindBuffer(he.ELEMENT_ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1},ee}(te),Zt=function(K){function ee(Q){K.call(this,Q),this.vao=Q.extVertexArrayObject}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee.prototype.set=function(Q){this.vao&&(Q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(Q),this.current=Q,this.dirty=!1)},ee}(te),Mt=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return 4},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.pixelStorei(he.UNPACK_ALIGNMENT,Q),this.current=Q,this.dirty=!1}},ee}(te),At=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!1},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q),this.current=Q,this.dirty=!1}},ee}(te),ft=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return!1},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){var he=this.gl;he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,Q),this.current=Q,this.dirty=!1}},ee}(te),ot=function(K){function ee(Q,he){K.call(this,Q),this.context=Q,this.parent=he}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getDefault=function(){return null},ee}(te),Te=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.setDirty=function(){this.dirty=!0},ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var he=this.gl;he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,Q,0),this.current=Q,this.dirty=!1}},ee}(ot),Le=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.set=function(Q){if(Q!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var he=this.gl;he.framebufferRenderbuffer(he.FRAMEBUFFER,he.DEPTH_ATTACHMENT,he.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},ee}(ot),Ve=function(K,ee,Q,he){this.context=K,this.width=ee,this.height=Q;var Se=this.framebuffer=K.gl.createFramebuffer();this.colorAttachment=new Te(K,Se),he&&(this.depthAttachment=new Le(K,Se))};Ve.prototype.destroy=function(){var K=this.context.gl,ee=this.colorAttachment.get();if(ee&&K.deleteTexture(ee),this.depthAttachment){var Q=this.depthAttachment.get();Q&&K.deleteRenderbuffer(Q)}K.deleteFramebuffer(this.framebuffer)};var Qe=function(K,ee,Q){this.func=K,this.mask=ee,this.range=Q};Qe.ReadOnly=!1,Qe.ReadWrite=!0,Qe.disabled=new Qe(519,Qe.ReadOnly,[0,1]);var Me=function(K,ee,Q,he,Se,Fe){this.test=K,this.ref=ee,this.mask=Q,this.fail=he,this.depthFail=Se,this.pass=Fe};Me.disabled=new Me({func:519,mask:0},0,0,7680,7680,7680);var Ie=function(K,ee,Q){this.blendFunction=K,this.blendColor=ee,this.mask=Q};Ie.disabled=new Ie(Ie.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Ie.unblended=new Ie(Ie.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ie.alphaBlended=new Ie([1,771],t.Color.transparent,[!0,!0,!0,!0]);var He=function(K,ee,Q){this.enable=K,this.mode=ee,this.frontFace=Q};He.disabled=new He(!1,1029,2305),He.backCCW=new He(!0,1029,2305);var Ye=function(K){this.gl=K,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new re(this),this.clearDepth=new ce(this),this.clearStencil=new pe(this),this.colorMask=new fe(this),this.depthMask=new se(this),this.stencilMask=new de(this),this.stencilFunc=new be(this),this.stencilOp=new xe(this),this.stencilTest=new ke(this),this.depthRange=new Re(this),this.depthTest=new Ke(this),this.depthFunc=new ze(this),this.blend=new Je(this),this.blendFunc=new qe(this),this.blendColor=new Ee(this),this.blendEquation=new Ae(this),this.cullFace=new Be(this),this.cullFaceSide=new $e(this),this.frontFace=new xt(this),this.program=new bt(this),this.activeTexture=new Ne(this),this.viewport=new st(this),this.bindFramebuffer=new _t(this),this.bindRenderbuffer=new Ot(this),this.bindTexture=new Wt(this),this.bindVertexBuffer=new Et(this),this.bindElementBuffer=new jt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Zt(this),this.pixelStoreUnpack=new Mt(this),this.pixelStoreUnpackPremultiplyAlpha=new At(this),this.pixelStoreUnpackFlipY=new ft(this),this.extTextureFilterAnisotropic=K.getExtension("EXT_texture_filter_anisotropic")||K.getExtension("MOZ_EXT_texture_filter_anisotropic")||K.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=K.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=K.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(K.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=K.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=K.getExtension("EXT_disjoint_timer_query")};Ye.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ye.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ye.prototype.createIndexBuffer=function(K,ee){return new j(this,K,ee)},Ye.prototype.createVertexBuffer=function(K,ee,Q){return new ie(this,K,ee,Q)},Ye.prototype.createRenderbuffer=function(K,ee,Q){var he=this.gl,Se=he.createRenderbuffer();return this.bindRenderbuffer.set(Se),he.renderbufferStorage(he.RENDERBUFFER,K,ee,Q),this.bindRenderbuffer.set(null),Se},Ye.prototype.createFramebuffer=function(K,ee,Q){return new Ve(this,K,ee,Q)},Ye.prototype.clear=function(K){var ee=K.color,Q=K.depth,he=this.gl,Se=0;ee&&(Se|=he.COLOR_BUFFER_BIT,this.clearColor.set(ee),this.colorMask.set([!0,!0,!0,!0])),Q!==void 0&&(Se|=he.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),he.clear(Se)},Ye.prototype.setCullFace=function(K){K.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(K.mode),this.frontFace.set(K.frontFace))},Ye.prototype.setDepthMode=function(K){K.func!==this.gl.ALWAYS||K.mask?(this.depthTest.set(!0),this.depthFunc.set(K.func),this.depthMask.set(K.mask),this.depthRange.set(K.range)):this.depthTest.set(!1)},Ye.prototype.setStencilMode=function(K){K.test.func!==this.gl.ALWAYS||K.mask?(this.stencilTest.set(!0),this.stencilMask.set(K.mask),this.stencilOp.set([K.fail,K.depthFail,K.pass]),this.stencilFunc.set({func:K.test.func,ref:K.ref,mask:K.test.mask})):this.stencilTest.set(!1)},Ye.prototype.setColorMode=function(K){t.deepEqual(K.blendFunction,Ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(K.blendFunction),this.blendColor.set(K.blendColor)),this.colorMask.set(K.mask)},Ye.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ut=function(K){function ee(Q,he,Se){var Fe=this;K.call(this),this.id=Q,this.dispatcher=Se,this.on("data",function(We){We.dataType==="source"&&We.sourceDataType==="metadata"&&(Fe._sourceLoaded=!0),Fe._sourceLoaded&&!Fe._paused&&We.dataType==="source"&&We.sourceDataType==="content"&&(Fe.reload(),Fe.transform&&Fe.update(Fe.transform))}),this.on("error",function(){Fe._sourceErrored=!0}),this._source=function(We,it,dt,Ft){var Qt=new q[it.type](We,it,dt,Ft);if(Qt.id!==We)throw new Error("Expected Source id to be "+We+" instead of "+Qt.id);return t.bindAll(["load","abort","unload","serialize","prepare"],Qt),Qt}(Q,he,Se,this),this._tiles={},this._cache=new $(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.onAdd=function(Q){this.map=Q,this._maxTileCacheSize=Q?Q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Q)},ee.prototype.onRemove=function(Q){this._source&&this._source.onRemove&&this._source.onRemove(Q)},ee.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Q in this._tiles){var he=this._tiles[Q];if(he.state!=="loaded"&&he.state!=="errored")return!1}return!0},ee.prototype.getSource=function(){return this._source},ee.prototype.pause=function(){this._paused=!0},ee.prototype.resume=function(){if(this._paused){var Q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Q&&this.reload(),this.transform&&this.update(this.transform)}},ee.prototype._loadTile=function(Q,he){return this._source.loadTile(Q,he)},ee.prototype._unloadTile=function(Q){if(this._source.unloadTile)return this._source.unloadTile(Q,function(){})},ee.prototype._abortTile=function(Q){if(this._source.abortTile)return this._source.abortTile(Q,function(){})},ee.prototype.serialize=function(){return this._source.serialize()},ee.prototype.prepare=function(Q){for(var he in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Se=this._tiles[he];Se.upload(Q),Se.prepare(this.map.style.imageManager)}},ee.prototype.getIds=function(){return t.values(this._tiles).map(function(Q){return Q.tileID}).sort(nt).map(function(Q){return Q.key})},ee.prototype.getRenderableIds=function(Q){var he=this,Se=[];for(var Fe in this._tiles)this._isIdRenderable(Fe,Q)&&Se.push(this._tiles[Fe]);return Q?Se.sort(function(We,it){var dt=We.tileID,Ft=it.tileID,Qt=new t.Point(dt.canonical.x,dt.canonical.y)._rotate(he.transform.angle),nr=new t.Point(Ft.canonical.x,Ft.canonical.y)._rotate(he.transform.angle);return dt.overscaledZ-Ft.overscaledZ||nr.y-Qt.y||nr.x-Qt.x}).map(function(We){return We.tileID.key}):Se.map(function(We){return We.tileID}).sort(nt).map(function(We){return We.key})},ee.prototype.hasRenderableParent=function(Q){var he=this.findLoadedParent(Q,0);return!!he&&this._isIdRenderable(he.tileID.key)},ee.prototype._isIdRenderable=function(Q,he){return this._tiles[Q]&&this._tiles[Q].hasData()&&!this._coveredTiles[Q]&&(he||!this._tiles[Q].holdingForFade())},ee.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var Q in this._cache.reset(),this._tiles)this._tiles[Q].state!=="errored"&&this._reloadTile(Q,"reloading")},ee.prototype._reloadTile=function(Q,he){var Se=this._tiles[Q];Se&&(Se.state!=="loading"&&(Se.state=he),this._loadTile(Se,this._tileLoaded.bind(this,Se,Q,he)))},ee.prototype._tileLoaded=function(Q,he,Se,Fe){if(Fe)return Q.state="errored",void(Fe.status!==404?this._source.fire(new t.ErrorEvent(Fe,{tile:Q})):this.update(this.transform));Q.timeAdded=t.browser.now(),Se==="expired"&&(Q.refreshedUponExpiration=!0),this._setTileReloadTimer(he,Q),this.getSource().type==="raster-dem"&&Q.dem&&this._backfillDEM(Q),this._state.initializeTileState(Q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:Q,coord:Q.tileID}))},ee.prototype._backfillDEM=function(Q){for(var he=this.getRenderableIds(),Se=0;Se<he.length;Se++){var Fe=he[Se];if(Q.neighboringTiles&&Q.neighboringTiles[Fe]){var We=this.getTileByID(Fe);it(Q,We),it(We,Q)}}function it(dt,Ft){dt.needsHillshadePrepare=!0;var Qt=Ft.tileID.canonical.x-dt.tileID.canonical.x,nr=Ft.tileID.canonical.y-dt.tileID.canonical.y,ur=Math.pow(2,dt.tileID.canonical.z),yr=Ft.tileID.key;Qt===0&&nr===0||Math.abs(nr)>1||(Math.abs(Qt)>1&&(Math.abs(Qt+ur)===1?Qt+=ur:Math.abs(Qt-ur)===1&&(Qt-=ur)),Ft.dem&&dt.dem&&(dt.dem.backfillBorder(Ft.dem,Qt,nr),dt.neighboringTiles&&dt.neighboringTiles[yr]&&(dt.neighboringTiles[yr].backfilled=!0)))}},ee.prototype.getTile=function(Q){return this.getTileByID(Q.key)},ee.prototype.getTileByID=function(Q){return this._tiles[Q]},ee.prototype._retainLoadedChildren=function(Q,he,Se,Fe){for(var We in this._tiles){var it=this._tiles[We];if(!(Fe[We]||!it.hasData()||it.tileID.overscaledZ<=he||it.tileID.overscaledZ>Se)){for(var dt=it.tileID;it&&it.tileID.overscaledZ>he+1;){var Ft=it.tileID.scaledTo(it.tileID.overscaledZ-1);(it=this._tiles[Ft.key])&&it.hasData()&&(dt=Ft)}for(var Qt=dt;Qt.overscaledZ>he;)if(Q[(Qt=Qt.scaledTo(Qt.overscaledZ-1)).key]){Fe[dt.key]=dt;break}}}},ee.prototype.findLoadedParent=function(Q,he){if(Q.key in this._loadedParentTiles){var Se=this._loadedParentTiles[Q.key];return Se&&Se.tileID.overscaledZ>=he?Se:null}for(var Fe=Q.overscaledZ-1;Fe>=he;Fe--){var We=Q.scaledTo(Fe),it=this._getLoadedTile(We);if(it)return it}},ee.prototype._getLoadedTile=function(Q){var he=this._tiles[Q.key];return he&&he.hasData()?he:this._cache.getByKey(Q.wrapped().key)},ee.prototype.updateCacheSize=function(Q){var he=Math.ceil(Q.width/this._source.tileSize)+1,Se=Math.ceil(Q.height/this._source.tileSize)+1,Fe=Math.floor(he*Se*5),We=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Fe):Fe;this._cache.setMaxSize(We)},ee.prototype.handleWrapJump=function(Q){var he=Math.round((Q-(this._prevLng===void 0?Q:this._prevLng))/360);if(this._prevLng=Q,he){var Se={};for(var Fe in this._tiles){var We=this._tiles[Fe];We.tileID=We.tileID.unwrapTo(We.tileID.wrap+he),Se[We.tileID.key]=We}for(var it in this._tiles=Se,this._timers)clearTimeout(this._timers[it]),delete this._timers[it];for(var dt in this._tiles)this._setTileReloadTimer(dt,this._tiles[dt])}},ee.prototype.update=function(Q){var he=this;if(this.transform=Q,this._sourceLoaded&&!this._paused){var Se;this.updateCacheSize(Q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?Se=Q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(zn){return new t.OverscaledTileID(zn.canonical.z,zn.wrap,zn.canonical.z,zn.canonical.x,zn.canonical.y)}):(Se=Q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Se=Se.filter(function(zn){return he._source.hasTile(zn)}))):Se=[];var Fe=Q.coveringZoomLevel(this._source),We=Math.max(Fe-ee.maxOverzooming,this._source.minzoom),it=Math.max(Fe+ee.maxUnderzooming,this._source.minzoom),dt=this._updateRetainedTiles(Se,Fe);if(Ge(this._source.type)){for(var Ft={},Qt={},nr=0,ur=Object.keys(dt);nr<ur.length;nr+=1){var yr=ur[nr],br=dt[yr],Pr=this._tiles[yr];if(Pr&&!(Pr.fadeEndTime&&Pr.fadeEndTime<=t.browser.now())){var gr=this.findLoadedParent(br,We);gr&&(this._addTile(gr.tileID),Ft[gr.tileID.key]=gr.tileID),Qt[yr]=br}}for(var Cr in this._retainLoadedChildren(Qt,Fe,it,dt),Ft)dt[Cr]||(this._coveredTiles[Cr]=!0,dt[Cr]=Ft[Cr])}for(var Nr in dt)this._tiles[Nr].clearFadeHold();for(var Qr=0,bn=t.keysDifference(this._tiles,dt);Qr<bn.length;Qr+=1){var un=bn[Qr],xn=this._tiles[un];xn.hasSymbolBuckets&&!xn.holdingForFade()?xn.setHoldDuration(this.map._fadeDuration):xn.hasSymbolBuckets&&!xn.symbolFadeFinished()||this._removeTile(un)}this._updateLoadedParentTileCache()}},ee.prototype.releaseSymbolFadeTiles=function(){for(var Q in this._tiles)this._tiles[Q].holdingForFade()&&this._removeTile(Q)},ee.prototype._updateRetainedTiles=function(Q,he){for(var Se={},Fe={},We=Math.max(he-ee.maxOverzooming,this._source.minzoom),it=Math.max(he+ee.maxUnderzooming,this._source.minzoom),dt={},Ft=0,Qt=Q;Ft<Qt.length;Ft+=1){var nr=Qt[Ft],ur=this._addTile(nr);Se[nr.key]=nr,ur.hasData()||he<this._source.maxzoom&&(dt[nr.key]=nr)}this._retainLoadedChildren(dt,he,it,Se);for(var yr=0,br=Q;yr<br.length;yr+=1){var Pr=br[yr],gr=this._tiles[Pr.key];if(!gr.hasData()){if(he+1>this._source.maxzoom){var Cr=Pr.children(this._source.maxzoom)[0],Nr=this.getTile(Cr);if(Nr&&Nr.hasData()){Se[Cr.key]=Cr;continue}}else{var Qr=Pr.children(this._source.maxzoom);if(Se[Qr[0].key]&&Se[Qr[1].key]&&Se[Qr[2].key]&&Se[Qr[3].key])continue}for(var bn=gr.wasRequested(),un=Pr.overscaledZ-1;un>=We;--un){var xn=Pr.scaledTo(un);if(Fe[xn.key]||(Fe[xn.key]=!0,!(gr=this.getTile(xn))&&bn&&(gr=this._addTile(xn)),gr&&(Se[xn.key]=xn,bn=gr.wasRequested(),gr.hasData())))break}}}return Se},ee.prototype._updateLoadedParentTileCache=function(){for(var Q in this._loadedParentTiles={},this._tiles){for(var he=[],Se=void 0,Fe=this._tiles[Q].tileID;Fe.overscaledZ>0;){if(Fe.key in this._loadedParentTiles){Se=this._loadedParentTiles[Fe.key];break}he.push(Fe.key);var We=Fe.scaledTo(Fe.overscaledZ-1);if(Se=this._getLoadedTile(We))break;Fe=We}for(var it=0,dt=he;it<dt.length;it+=1)this._loadedParentTiles[dt[it]]=Se}},ee.prototype._addTile=function(Q){var he=this._tiles[Q.key];if(he)return he;(he=this._cache.getAndRemove(Q))&&(this._setTileReloadTimer(Q.key,he),he.tileID=Q,this._state.initializeTileState(he,this.map?this.map.painter:null),this._cacheTimers[Q.key]&&(clearTimeout(this._cacheTimers[Q.key]),delete this._cacheTimers[Q.key],this._setTileReloadTimer(Q.key,he)));var Se=Boolean(he);return Se||(he=new t.Tile(Q,this._source.tileSize*Q.overscaleFactor()),this._loadTile(he,this._tileLoaded.bind(this,he,Q.key,he.state))),he?(he.uses++,this._tiles[Q.key]=he,Se||this._source.fire(new t.Event("dataloading",{tile:he,coord:he.tileID,dataType:"source"})),he):null},ee.prototype._setTileReloadTimer=function(Q,he){var Se=this;Q in this._timers&&(clearTimeout(this._timers[Q]),delete this._timers[Q]);var Fe=he.getExpiryTimeout();Fe&&(this._timers[Q]=setTimeout(function(){Se._reloadTile(Q,"expired"),delete Se._timers[Q]},Fe))},ee.prototype._removeTile=function(Q){var he=this._tiles[Q];he&&(he.uses--,delete this._tiles[Q],this._timers[Q]&&(clearTimeout(this._timers[Q]),delete this._timers[Q]),he.uses>0||(he.hasData()&&he.state!=="reloading"?this._cache.add(he.tileID,he,he.getExpiryTimeout()):(he.aborted=!0,this._abortTile(he),this._unloadTile(he))))},ee.prototype.clearTiles=function(){for(var Q in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(Q);this._cache.reset()},ee.prototype.tilesIn=function(Q,he,Se){var Fe=this,We=[],it=this.transform;if(!it)return We;for(var dt=Se?it.getCameraQueryGeometry(Q):Q,Ft=Q.map(function(un){return it.pointCoordinate(un)}),Qt=dt.map(function(un){return it.pointCoordinate(un)}),nr=this.getIds(),ur=1/0,yr=1/0,br=-1/0,Pr=-1/0,gr=0,Cr=Qt;gr<Cr.length;gr+=1){var Nr=Cr[gr];ur=Math.min(ur,Nr.x),yr=Math.min(yr,Nr.y),br=Math.max(br,Nr.x),Pr=Math.max(Pr,Nr.y)}for(var Qr=function(un){var xn=Fe._tiles[nr[un]];if(!xn.holdingForFade()){var zn=xn.tileID,Jn=Math.pow(2,it.zoom-xn.tileID.overscaledZ),Hn=he*xn.queryPadding*t.EXTENT/xn.tileSize/Jn,qn=[zn.getTilePoint(new t.MercatorCoordinate(ur,yr)),zn.getTilePoint(new t.MercatorCoordinate(br,Pr))];if(qn[0].x-Hn<t.EXTENT&&qn[0].y-Hn<t.EXTENT&&qn[1].x+Hn>=0&&qn[1].y+Hn>=0){var ua=Ft.map(function(Ca){return zn.getTilePoint(Ca)}),za=Qt.map(function(Ca){return zn.getTilePoint(Ca)});We.push({tile:xn,tileID:zn,queryGeometry:ua,cameraQueryGeometry:za,scale:Jn})}}},bn=0;bn<nr.length;bn++)Qr(bn);return We},ee.prototype.getVisibleCoordinates=function(Q){for(var he=this,Se=this.getRenderableIds(Q).map(function(dt){return he._tiles[dt].tileID}),Fe=0,We=Se;Fe<We.length;Fe+=1){var it=We[Fe];it.posMatrix=this.transform.calculatePosMatrix(it.toUnwrapped())}return Se},ee.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ge(this._source.type))for(var Q in this._tiles){var he=this._tiles[Q];if(he.fadeEndTime!==void 0&&he.fadeEndTime>=t.browser.now())return!0}return!1},ee.prototype.setFeatureState=function(Q,he,Se){this._state.updateState(Q=Q||"_geojsonTileLayer",he,Se)},ee.prototype.removeFeatureState=function(Q,he,Se){this._state.removeFeatureState(Q=Q||"_geojsonTileLayer",he,Se)},ee.prototype.getFeatureState=function(Q,he){return this._state.getState(Q=Q||"_geojsonTileLayer",he)},ee.prototype.setDependencies=function(Q,he,Se){var Fe=this._tiles[Q];Fe&&Fe.setDependencies(he,Se)},ee.prototype.reloadTilesForDependencies=function(Q,he){for(var Se in this._tiles)this._tiles[Se].hasDependency(Q,he)&&this._reloadTile(Se,"reloading");this._cache.filter(function(Fe){return!Fe.hasDependency(Q,he)})},ee}(t.Evented);function nt(K,ee){var Q=Math.abs(2*K.wrap)-+(K.wrap<0),he=Math.abs(2*ee.wrap)-+(ee.wrap<0);return K.overscaledZ-ee.overscaledZ||he-Q||ee.canonical.y-K.canonical.y||ee.canonical.x-K.canonical.x}function Ge(K){return K==="raster"||K==="image"||K==="video"}function at(){return new t.window.Worker(ll.workerUrl)}ut.maxOverzooming=10,ut.maxUnderzooming=3;var et="mapboxgl_preloaded_worker_pool",lt=function(){this.active={}};lt.prototype.acquire=function(K){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new at);return this.active[K]=!0,this.workers.slice()},lt.prototype.release=function(K){delete this.active[K],this.numActive()===0&&(this.workers.forEach(function(ee){ee.terminate()}),this.workers=null)},lt.prototype.isPreloaded=function(){return!!this.active[et]},lt.prototype.numActive=function(){return Object.keys(this.active).length};var Ct,Pt=Math.floor(t.browser.hardwareConcurrency/2);function $t(){return Ct||(Ct=new lt),Ct}function je(K,ee){var Q={};for(var he in K)he!=="ref"&&(Q[he]=K[he]);return t.refProperties.forEach(function(Se){Se in ee&&(Q[Se]=ee[Se])}),Q}function Oe(K){K=K.slice();for(var ee=Object.create(null),Q=0;Q<K.length;Q++)ee[K[Q].id]=K[Q];for(var he=0;he<K.length;he++)"ref"in K[he]&&(K[he]=je(K[he],ee[K[he].ref]));return K}lt.workerCount=Math.max(Math.min(Pt,6),1);var mt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function wt(K,ee,Q){Q.push({command:mt.addSource,args:[K,ee[K]]})}function yt(K,ee,Q){ee.push({command:mt.removeSource,args:[K]}),Q[K]=!0}function St(K,ee,Q,he){yt(K,Q,he),wt(K,ee,Q)}function kt(K,ee,Q){var he;for(he in K[Q])if(K[Q].hasOwnProperty(he)&&he!=="data"&&!t.deepEqual(K[Q][he],ee[Q][he]))return!1;for(he in ee[Q])if(ee[Q].hasOwnProperty(he)&&he!=="data"&&!t.deepEqual(K[Q][he],ee[Q][he]))return!1;return!0}function Rt(K,ee,Q,he,Se,Fe){var We;for(We in ee=ee||{},K=K||{})K.hasOwnProperty(We)&&(t.deepEqual(K[We],ee[We])||Q.push({command:Fe,args:[he,We,ee[We],Se]}));for(We in ee)ee.hasOwnProperty(We)&&!K.hasOwnProperty(We)&&(t.deepEqual(K[We],ee[We])||Q.push({command:Fe,args:[he,We,ee[We],Se]}))}function zt(K){return K.id}function Xt(K,ee){return K[ee.id]=ee,K}var Yt=function(K,ee){this.reset(K,ee)};Yt.prototype.reset=function(K,ee){this.points=K||[],this._distances=[0];for(var Q=1;Q<this.points.length;Q++)this._distances[Q]=this._distances[Q-1]+this.points[Q].dist(this.points[Q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ee||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Yt.prototype.lerp=function(K){if(this.points.length===1)return this.points[0];K=t.clamp(K,0,1);for(var ee=1,Q=this._distances[ee],he=K*this.paddedLength+this.padding;Q<he&&ee<this._distances.length;)Q=this._distances[++ee];var Se=ee-1,Fe=this._distances[Se],We=Q-Fe,it=We>0?(he-Fe)/We:0;return this.points[Se].mult(1-it).add(this.points[ee].mult(it))};var Vt=function(K,ee,Q){var he=this.boxCells=[],Se=this.circleCells=[];this.xCellCount=Math.ceil(K/Q),this.yCellCount=Math.ceil(ee/Q);for(var Fe=0;Fe<this.xCellCount*this.yCellCount;Fe++)he.push([]),Se.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=K,this.height=ee,this.xScale=this.xCellCount/K,this.yScale=this.yCellCount/ee,this.boxUid=0,this.circleUid=0};function cr(K,ee,Q,he,Se){var Fe=t.create();return ee?(t.scale(Fe,Fe,[1/Se,1/Se,1]),Q||t.rotateZ(Fe,Fe,he.angle)):t.multiply(Fe,he.labelPlaneMatrix,K),Fe}function Or(K,ee,Q,he,Se){if(ee){var Fe=t.clone(K);return t.scale(Fe,Fe,[Se,Se,1]),Q||t.rotateZ(Fe,Fe,-he.angle),Fe}return he.glCoordMatrix}function kr(K,ee){var Q=[K.x,K.y,0,1];on(Q,Q,ee);var he=Q[3];return{point:new t.Point(Q[0]/he,Q[1]/he),signedDistanceFromCamera:he}}function Sr(K,ee){return .5+K/ee*.5}function vn(K,ee){var Q=K[0]/K[3],he=K[1]/K[3];return Q>=-ee[0]&&Q<=ee[0]&&he>=-ee[1]&&he<=ee[1]}function Rn(K,ee,Q,he,Se,Fe,We,it){var dt=he?K.textSizeData:K.iconSizeData,Ft=t.evaluateSizeForZoom(dt,Q.transform.zoom),Qt=[256/Q.width*2+1,256/Q.height*2+1],nr=he?K.text.dynamicLayoutVertexArray:K.icon.dynamicLayoutVertexArray;nr.clear();for(var ur=K.lineVertexArray,yr=he?K.text.placedSymbolArray:K.icon.placedSymbolArray,br=Q.transform.width/Q.transform.height,Pr=!1,gr=0;gr<yr.length;gr++){var Cr=yr.get(gr);if(Cr.hidden||Cr.writingMode===t.WritingMode.vertical&&!Pr)qr(Cr.numGlyphs,nr);else{Pr=!1;var Nr=[Cr.anchorX,Cr.anchorY,0,1];if(t.transformMat4(Nr,Nr,ee),vn(Nr,Qt)){var Qr=Sr(Q.transform.cameraToCenterDistance,Nr[3]),bn=t.evaluateSizeForFeature(dt,Ft,Cr),un=We?bn/Qr:bn*Qr,xn=new t.Point(Cr.anchorX,Cr.anchorY),zn=kr(xn,Se).point,Jn={},Hn=En(Cr,un,!1,it,ee,Se,Fe,K.glyphOffsetArray,ur,nr,zn,xn,Jn,br);Pr=Hn.useVertical,(Hn.notEnoughRoom||Pr||Hn.needsFlipping&&En(Cr,un,!0,it,ee,Se,Fe,K.glyphOffsetArray,ur,nr,zn,xn,Jn,br).notEnoughRoom)&&qr(Cr.numGlyphs,nr)}else qr(Cr.numGlyphs,nr)}}he?K.text.dynamicLayoutVertexBuffer.updateData(nr):K.icon.dynamicLayoutVertexBuffer.updateData(nr)}function hn(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt){var nr=it.glyphStartIndex+it.numGlyphs,ur=it.lineStartIndex,yr=it.lineStartIndex+it.lineLength,br=ee.getoffsetX(it.glyphStartIndex),Pr=ee.getoffsetX(nr-1),gr=xr(K*br,Q,he,Se,Fe,We,it.segment,ur,yr,dt,Ft,Qt);if(!gr)return null;var Cr=xr(K*Pr,Q,he,Se,Fe,We,it.segment,ur,yr,dt,Ft,Qt);return Cr?{first:gr,last:Cr}:null}function An(K,ee,Q,he){return K===t.WritingMode.horizontal&&Math.abs(Q.y-ee.y)>Math.abs(Q.x-ee.x)*he?{useVertical:!0}:(K===t.WritingMode.vertical?ee.y<Q.y:ee.x>Q.x)?{needsFlipping:!0}:null}function En(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt,nr,ur,yr){var br,Pr=ee/24,gr=K.lineOffsetX*Pr,Cr=K.lineOffsetY*Pr;if(K.numGlyphs>1){var Nr=K.glyphStartIndex+K.numGlyphs,Qr=K.lineStartIndex,bn=K.lineStartIndex+K.lineLength,un=hn(Pr,it,gr,Cr,Q,Qt,nr,K,dt,Fe,ur);if(!un)return{notEnoughRoom:!0};var xn=kr(un.first.point,We).point,zn=kr(un.last.point,We).point;if(he&&!Q){var Jn=An(K.writingMode,xn,zn,yr);if(Jn)return Jn}br=[un.first];for(var Hn=K.glyphStartIndex+1;Hn<Nr-1;Hn++)br.push(xr(Pr*it.getoffsetX(Hn),gr,Cr,Q,Qt,nr,K.segment,Qr,bn,dt,Fe,ur));br.push(un.last)}else{if(he&&!Q){var qn=kr(nr,Se).point,ua=K.lineStartIndex+K.segment+1,za=new t.Point(dt.getx(ua),dt.gety(ua)),Ca=kr(za,Se),qa=Ca.signedDistanceFromCamera>0?Ca.point:Mr(nr,za,qn,1,Se),ha=An(K.writingMode,qn,qa,yr);if(ha)return ha}var Ba=xr(Pr*it.getoffsetX(K.glyphStartIndex),gr,Cr,Q,Qt,nr,K.segment,K.lineStartIndex,K.lineStartIndex+K.lineLength,dt,Fe,ur);if(!Ba)return{notEnoughRoom:!0};br=[Ba]}for(var $a=0,Ua=br;$a<Ua.length;$a+=1){var Da=Ua[$a];t.addDynamicAttributes(Ft,Da.point,Da.angle)}return{}}function Mr(K,ee,Q,he,Se){var Fe=kr(K.add(K.sub(ee)._unit()),Se).point,We=Q.sub(Fe);return Q.add(We._mult(he/We.mag()))}function xr(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt,nr){var ur=he?K-ee:K+ee,yr=ur>0?1:-1,br=0;he&&(yr*=-1,br=Math.PI),yr<0&&(br+=Math.PI);for(var Pr=yr>0?it+We:it+We+1,gr=Se,Cr=Se,Nr=0,Qr=0,bn=Math.abs(ur),un=[];Nr+Qr<=bn;){if((Pr+=yr)<it||Pr>=dt)return null;if(Cr=gr,un.push(gr),(gr=nr[Pr])===void 0){var xn=new t.Point(Ft.getx(Pr),Ft.gety(Pr)),zn=kr(xn,Qt);if(zn.signedDistanceFromCamera>0)gr=nr[Pr]=zn.point;else{var Jn=Pr-yr;gr=Mr(Nr===0?Fe:new t.Point(Ft.getx(Jn),Ft.gety(Jn)),xn,Cr,bn-Nr+1,Qt)}}Nr+=Qr,Qr=Cr.dist(gr)}var Hn=(bn-Nr)/Qr,qn=gr.sub(Cr),ua=qn.mult(Hn)._add(Cr);ua._add(qn._unit()._perp()._mult(Q*yr));var za=br+Math.atan2(gr.y-Cr.y,gr.x-Cr.x);return un.push(ua),{point:ua,angle:za,path:un}}Vt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Vt.prototype.insert=function(K,ee,Q,he,Se){this._forEachCell(ee,Q,he,Se,this._insertBoxCell,this.boxUid++),this.boxKeys.push(K),this.bboxes.push(ee),this.bboxes.push(Q),this.bboxes.push(he),this.bboxes.push(Se)},Vt.prototype.insertCircle=function(K,ee,Q,he){this._forEachCell(ee-he,Q-he,ee+he,Q+he,this._insertCircleCell,this.circleUid++),this.circleKeys.push(K),this.circles.push(ee),this.circles.push(Q),this.circles.push(he)},Vt.prototype._insertBoxCell=function(K,ee,Q,he,Se,Fe){this.boxCells[Se].push(Fe)},Vt.prototype._insertCircleCell=function(K,ee,Q,he,Se,Fe){this.circleCells[Se].push(Fe)},Vt.prototype._query=function(K,ee,Q,he,Se,Fe){if(Q<0||K>this.width||he<0||ee>this.height)return!Se&&[];var We=[];if(K<=0&&ee<=0&&this.width<=Q&&this.height<=he){if(Se)return!0;for(var it=0;it<this.boxKeys.length;it++)We.push({key:this.boxKeys[it],x1:this.bboxes[4*it],y1:this.bboxes[4*it+1],x2:this.bboxes[4*it+2],y2:this.bboxes[4*it+3]});for(var dt=0;dt<this.circleKeys.length;dt++){var Ft=this.circles[3*dt],Qt=this.circles[3*dt+1],nr=this.circles[3*dt+2];We.push({key:this.circleKeys[dt],x1:Ft-nr,y1:Qt-nr,x2:Ft+nr,y2:Qt+nr})}return Fe?We.filter(Fe):We}return this._forEachCell(K,ee,Q,he,this._queryCell,We,{hitTest:Se,seenUids:{box:{},circle:{}}},Fe),Se?We.length>0:We},Vt.prototype._queryCircle=function(K,ee,Q,he,Se){var Fe=K-Q,We=K+Q,it=ee-Q,dt=ee+Q;if(We<0||Fe>this.width||dt<0||it>this.height)return!he&&[];var Ft=[];return this._forEachCell(Fe,it,We,dt,this._queryCellCircle,Ft,{hitTest:he,circle:{x:K,y:ee,radius:Q},seenUids:{box:{},circle:{}}},Se),he?Ft.length>0:Ft},Vt.prototype.query=function(K,ee,Q,he,Se){return this._query(K,ee,Q,he,!1,Se)},Vt.prototype.hitTest=function(K,ee,Q,he,Se){return this._query(K,ee,Q,he,!0,Se)},Vt.prototype.hitTestCircle=function(K,ee,Q,he){return this._queryCircle(K,ee,Q,!0,he)},Vt.prototype._queryCell=function(K,ee,Q,he,Se,Fe,We,it){var dt=We.seenUids,Ft=this.boxCells[Se];if(Ft!==null)for(var Qt=this.bboxes,nr=0,ur=Ft;nr<ur.length;nr+=1){var yr=ur[nr];if(!dt.box[yr]){dt.box[yr]=!0;var br=4*yr;if(K<=Qt[br+2]&&ee<=Qt[br+3]&&Q>=Qt[br+0]&&he>=Qt[br+1]&&(!it||it(this.boxKeys[yr]))){if(We.hitTest)return Fe.push(!0),!0;Fe.push({key:this.boxKeys[yr],x1:Qt[br],y1:Qt[br+1],x2:Qt[br+2],y2:Qt[br+3]})}}}var Pr=this.circleCells[Se];if(Pr!==null)for(var gr=this.circles,Cr=0,Nr=Pr;Cr<Nr.length;Cr+=1){var Qr=Nr[Cr];if(!dt.circle[Qr]){dt.circle[Qr]=!0;var bn=3*Qr;if(this._circleAndRectCollide(gr[bn],gr[bn+1],gr[bn+2],K,ee,Q,he)&&(!it||it(this.circleKeys[Qr]))){if(We.hitTest)return Fe.push(!0),!0;var un=gr[bn],xn=gr[bn+1],zn=gr[bn+2];Fe.push({key:this.circleKeys[Qr],x1:un-zn,y1:xn-zn,x2:un+zn,y2:xn+zn})}}}},Vt.prototype._queryCellCircle=function(K,ee,Q,he,Se,Fe,We,it){var dt=We.circle,Ft=We.seenUids,Qt=this.boxCells[Se];if(Qt!==null)for(var nr=this.bboxes,ur=0,yr=Qt;ur<yr.length;ur+=1){var br=yr[ur];if(!Ft.box[br]){Ft.box[br]=!0;var Pr=4*br;if(this._circleAndRectCollide(dt.x,dt.y,dt.radius,nr[Pr+0],nr[Pr+1],nr[Pr+2],nr[Pr+3])&&(!it||it(this.boxKeys[br])))return Fe.push(!0),!0}}var gr=this.circleCells[Se];if(gr!==null)for(var Cr=this.circles,Nr=0,Qr=gr;Nr<Qr.length;Nr+=1){var bn=Qr[Nr];if(!Ft.circle[bn]){Ft.circle[bn]=!0;var un=3*bn;if(this._circlesCollide(Cr[un],Cr[un+1],Cr[un+2],dt.x,dt.y,dt.radius)&&(!it||it(this.circleKeys[bn])))return Fe.push(!0),!0}}},Vt.prototype._forEachCell=function(K,ee,Q,he,Se,Fe,We,it){for(var dt=this._convertToXCellCoord(K),Ft=this._convertToYCellCoord(ee),Qt=this._convertToXCellCoord(Q),nr=this._convertToYCellCoord(he),ur=dt;ur<=Qt;ur++)for(var yr=Ft;yr<=nr;yr++)if(Se.call(this,K,ee,Q,he,this.xCellCount*yr+ur,Fe,We,it))return},Vt.prototype._convertToXCellCoord=function(K){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(K*this.xScale)))},Vt.prototype._convertToYCellCoord=function(K){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(K*this.yScale)))},Vt.prototype._circlesCollide=function(K,ee,Q,he,Se,Fe){var We=he-K,it=Se-ee,dt=Q+Fe;return dt*dt>We*We+it*it},Vt.prototype._circleAndRectCollide=function(K,ee,Q,he,Se,Fe,We){var it=(Fe-he)/2,dt=Math.abs(K-(he+it));if(dt>it+Q)return!1;var Ft=(We-Se)/2,Qt=Math.abs(ee-(Se+Ft));if(Qt>Ft+Q)return!1;if(dt<=it||Qt<=Ft)return!0;var nr=dt-it,ur=Qt-Ft;return nr*nr+ur*ur<=Q*Q};var dn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qr(K,ee){for(var Q=0;Q<K;Q++){var he=ee.length;ee.resize(he+4),ee.float32.set(dn,3*he)}}function on(K,ee,Q){var he=ee[0],Se=ee[1];return K[0]=Q[0]*he+Q[4]*Se+Q[12],K[1]=Q[1]*he+Q[5]*Se+Q[13],K[3]=Q[3]*he+Q[7]*Se+Q[15],K}var Vr=function(K,ee,Q){ee===void 0&&(ee=new Vt(K.width+200,K.height+200,25)),Q===void 0&&(Q=new Vt(K.width+200,K.height+200,25)),this.transform=K,this.grid=ee,this.ignoredGrid=Q,this.pitchfactor=Math.cos(K._pitch)*K.cameraToCenterDistance,this.screenRightBoundary=K.width+100,this.screenBottomBoundary=K.height+100,this.gridRightBoundary=K.width+200,this.gridBottomBoundary=K.height+200};function ln(K,ee,Q){return ee*(t.EXTENT/(K.tileSize*Math.pow(2,Q-K.tileID.overscaledZ)))}Vr.prototype.placeCollisionBox=function(K,ee,Q,he,Se){var Fe=this.projectAndGetPerspectiveRatio(he,K.anchorPointX,K.anchorPointY),We=Q*Fe.perspectiveRatio,it=K.x1*We+Fe.point.x,dt=K.y1*We+Fe.point.y,Ft=K.x2*We+Fe.point.x,Qt=K.y2*We+Fe.point.y;return!this.isInsideGrid(it,dt,Ft,Qt)||!ee&&this.grid.hitTest(it,dt,Ft,Qt,Se)?{box:[],offscreen:!1}:{box:[it,dt,Ft,Qt],offscreen:this.isOffscreen(it,dt,Ft,Qt)}},Vr.prototype.placeCollisionCircles=function(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt,nr,ur){var yr=[],br=new t.Point(ee.anchorX,ee.anchorY),Pr=kr(br,Fe),gr=Sr(this.transform.cameraToCenterDistance,Pr.signedDistanceFromCamera),Cr=(Ft?Se/gr:Se*gr)/t.ONE_EM,Nr=kr(br,We).point,Qr=hn(Cr,he,ee.lineOffsetX*Cr,ee.lineOffsetY*Cr,!1,Nr,br,ee,Q,We,{}),bn=!1,un=!1,xn=!0;if(Qr){for(var zn=.5*nr*gr+ur,Jn=new t.Point(-100,-100),Hn=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),qn=new Yt,ua=Qr.first,za=Qr.last,Ca=[],qa=ua.path.length-1;qa>=1;qa--)Ca.push(ua.path[qa]);for(var ha=1;ha<za.path.length;ha++)Ca.push(za.path[ha]);var Ba=2.5*zn;if(it){var $a=Ca.map(function(El){return kr(El,it)});Ca=$a.some(function(El){return El.signedDistanceFromCamera<=0})?[]:$a.map(function(El){return El.point})}var Ua=[];if(Ca.length>0){for(var Da=Ca[0].clone(),Qa=Ca[0].clone(),Ia=1;Ia<Ca.length;Ia++)Da.x=Math.min(Da.x,Ca[Ia].x),Da.y=Math.min(Da.y,Ca[Ia].y),Qa.x=Math.max(Qa.x,Ca[Ia].x),Qa.y=Math.max(Qa.y,Ca[Ia].y);Ua=Da.x>=Jn.x&&Qa.x<=Hn.x&&Da.y>=Jn.y&&Qa.y<=Hn.y?[Ca]:Qa.x<Jn.x||Da.x>Hn.x||Qa.y<Jn.y||Da.y>Hn.y?[]:t.clipLine([Ca],Jn.x,Jn.y,Hn.x,Hn.y)}for(var pa=0,po=Ua;pa<po.length;pa+=1){var Qi;qn.reset(po[pa],.25*zn),Qi=qn.length<=.5*zn?1:Math.ceil(qn.paddedLength/Ba)+1;for(var Pi=0;Pi<Qi;Pi++){var Ai=Pi/Math.max(Qi-1,1),qi=qn.lerp(Ai),Mi=qi.x+100,ul=qi.y+100;yr.push(Mi,ul,zn,0);var vo=Mi-zn,Js=ul-zn,cs=Mi+zn,$s=ul+zn;if(xn=xn&&this.isOffscreen(vo,Js,cs,$s),un=un||this.isInsideGrid(vo,Js,cs,$s),!K&&this.grid.hitTestCircle(Mi,ul,zn,Qt)&&(bn=!0,!dt))return{circles:[],offscreen:!1,collisionDetected:bn}}}}return{circles:!dt&&bn||!un?[]:yr,offscreen:xn,collisionDetected:bn}},Vr.prototype.queryRenderedSymbols=function(K){if(K.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ee=[],Q=1/0,he=1/0,Se=-1/0,Fe=-1/0,We=0,it=K;We<it.length;We+=1){var dt=it[We],Ft=new t.Point(dt.x+100,dt.y+100);Q=Math.min(Q,Ft.x),he=Math.min(he,Ft.y),Se=Math.max(Se,Ft.x),Fe=Math.max(Fe,Ft.y),ee.push(Ft)}for(var Qt={},nr={},ur=0,yr=this.grid.query(Q,he,Se,Fe).concat(this.ignoredGrid.query(Q,he,Se,Fe));ur<yr.length;ur+=1){var br=yr[ur],Pr=br.key;if(Qt[Pr.bucketInstanceId]===void 0&&(Qt[Pr.bucketInstanceId]={}),!Qt[Pr.bucketInstanceId][Pr.featureIndex]){var gr=[new t.Point(br.x1,br.y1),new t.Point(br.x2,br.y1),new t.Point(br.x2,br.y2),new t.Point(br.x1,br.y2)];t.polygonIntersectsPolygon(ee,gr)&&(Qt[Pr.bucketInstanceId][Pr.featureIndex]=!0,nr[Pr.bucketInstanceId]===void 0&&(nr[Pr.bucketInstanceId]=[]),nr[Pr.bucketInstanceId].push(Pr.featureIndex))}}return nr},Vr.prototype.insertCollisionBox=function(K,ee,Q,he,Se){(ee?this.ignoredGrid:this.grid).insert({bucketInstanceId:Q,featureIndex:he,collisionGroupID:Se},K[0],K[1],K[2],K[3])},Vr.prototype.insertCollisionCircles=function(K,ee,Q,he,Se){for(var Fe=ee?this.ignoredGrid:this.grid,We={bucketInstanceId:Q,featureIndex:he,collisionGroupID:Se},it=0;it<K.length;it+=4)Fe.insertCircle(We,K[it],K[it+1],K[it+2])},Vr.prototype.projectAndGetPerspectiveRatio=function(K,ee,Q){var he=[ee,Q,0,1];return on(he,he,K),{point:new t.Point((he[0]/he[3]+1)/2*this.transform.width+100,(-he[1]/he[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/he[3]*.5}},Vr.prototype.isOffscreen=function(K,ee,Q,he){return Q<100||K>=this.screenRightBoundary||he<100||ee>this.screenBottomBoundary},Vr.prototype.isInsideGrid=function(K,ee,Q,he){return Q>=0&&K<this.gridRightBoundary&&he>=0&&ee<this.gridBottomBoundary},Vr.prototype.getViewportMatrix=function(){var K=t.identity([]);return t.translate(K,K,[-100,-100,0]),K};var cn=function(K,ee,Q,he){this.opacity=K?Math.max(0,Math.min(1,K.opacity+(K.placed?ee:-ee))):he&&Q?1:0,this.placed=Q};cn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Zr=function(K,ee,Q,he,Se){this.text=new cn(K?K.text:null,ee,Q,Se),this.icon=new cn(K?K.icon:null,ee,he,Se)};Zr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ht=function(K,ee,Q){this.text=K,this.icon=ee,this.skipFade=Q},Nt=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},rr=function(K,ee,Q,he,Se){this.bucketInstanceId=K,this.featureIndex=ee,this.sourceLayerIndex=Q,this.bucketIndex=he,this.tileID=Se},mr=function(K){this.crossSourceCollisions=K,this.maxGroupID=0,this.collisionGroups={}};function Rr(K,ee,Q,he,Se){var Fe=t.getAnchorAlignment(K),We=-(Fe.horizontalAlign-.5)*ee,it=-(Fe.verticalAlign-.5)*Q,dt=t.evaluateVariableOffset(K,he);return new t.Point(We+dt[0]*Se,it+dt[1]*Se)}function Er(K,ee,Q,he,Se,Fe){var We=K.x1,it=K.x2,dt=K.y1,Ft=K.y2,Qt=K.anchorPointX,nr=K.anchorPointY,ur=new t.Point(ee,Q);return he&&ur._rotate(Se?Fe:-Fe),{x1:We+ur.x,y1:dt+ur.y,x2:it+ur.x,y2:Ft+ur.y,anchorPointX:Qt,anchorPointY:nr}}mr.prototype.get=function(K){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[K]){var ee=++this.maxGroupID;this.collisionGroups[K]={ID:ee,predicate:function(Q){return Q.collisionGroupID===ee}}}return this.collisionGroups[K]};var Br=function(K,ee,Q,he){this.transform=K.clone(),this.collisionIndex=new Vr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ee,this.retainedQueryData={},this.collisionGroups=new mr(Q),this.collisionCircleArrays={},this.prevPlacement=he,he&&(he.prevPlacement=void 0),this.placedOrientations={}};function Lr(K,ee,Q,he,Se){K.emplaceBack(ee?1:0,Q?1:0,he||0,Se||0),K.emplaceBack(ee?1:0,Q?1:0,he||0,Se||0),K.emplaceBack(ee?1:0,Q?1:0,he||0,Se||0),K.emplaceBack(ee?1:0,Q?1:0,he||0,Se||0)}Br.prototype.getBucketParts=function(K,ee,Q,he){var Se=Q.getBucket(ee),Fe=Q.latestFeatureIndex;if(Se&&Fe&&ee.id===Se.layerIds[0]){var We=Q.collisionBoxArray,it=Se.layers[0].layout,dt=Math.pow(2,this.transform.zoom-Q.tileID.overscaledZ),Ft=Q.tileSize/t.EXTENT,Qt=this.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),nr=it.get("text-pitch-alignment")==="map",ur=it.get("text-rotation-alignment")==="map",yr=ln(Q,1,this.transform.zoom),br=cr(Qt,nr,ur,this.transform,yr),Pr=null;if(nr){var gr=Or(Qt,nr,ur,this.transform,yr);Pr=t.multiply([],this.transform.labelPlaneMatrix,gr)}this.retainedQueryData[Se.bucketInstanceId]=new rr(Se.bucketInstanceId,Fe,Se.sourceLayerIndex,Se.index,Q.tileID);var Cr={bucket:Se,layout:it,posMatrix:Qt,textLabelPlaneMatrix:br,labelToScreenMatrix:Pr,scale:dt,textPixelRatio:Ft,holdingForFade:Q.holdingForFade(),collisionBoxArray:We,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Se.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Se.sourceID)};if(he)for(var Nr=0,Qr=Se.sortKeyRanges;Nr<Qr.length;Nr+=1){var bn=Qr[Nr];K.push({sortKey:bn.sortKey,symbolInstanceStart:bn.symbolInstanceStart,symbolInstanceEnd:bn.symbolInstanceEnd,parameters:Cr})}else K.push({symbolInstanceStart:0,symbolInstanceEnd:Se.symbolInstances.length,parameters:Cr})}},Br.prototype.attemptAnchorPlacement=function(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt,nr,ur,yr,br){var Pr,gr=[nr.textOffset0,nr.textOffset1],Cr=Rr(K,Q,he,gr,Se),Nr=this.collisionIndex.placeCollisionBox(Er(ee,Cr.x,Cr.y,Fe,We,this.transform.angle),Qt,it,dt,Ft.predicate);if(!br||this.collisionIndex.placeCollisionBox(Er(br,Cr.x,Cr.y,Fe,We,this.transform.angle),Qt,it,dt,Ft.predicate).box.length!==0)return Nr.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[nr.crossTileID]&&this.prevPlacement.placements[nr.crossTileID]&&this.prevPlacement.placements[nr.crossTileID].text&&(Pr=this.prevPlacement.variableOffsets[nr.crossTileID].anchor),this.variableOffsets[nr.crossTileID]={textOffset:gr,width:Q,height:he,anchor:K,textBoxScale:Se,prevAnchor:Pr},this.markUsedJustification(ur,K,nr,yr),ur.allowVerticalPlacement&&(this.markUsedOrientation(ur,yr,nr),this.placedOrientations[nr.crossTileID]=yr),{shift:Cr,placedGlyphBoxes:Nr}):void 0},Br.prototype.placeLayerBucketPart=function(K,ee,Q){var he=this,Se=K.parameters,Fe=Se.bucket,We=Se.layout,it=Se.posMatrix,dt=Se.textLabelPlaneMatrix,Ft=Se.labelToScreenMatrix,Qt=Se.textPixelRatio,nr=Se.holdingForFade,ur=Se.collisionBoxArray,yr=Se.partiallyEvaluatedTextSize,br=Se.collisionGroup,Pr=We.get("text-optional"),gr=We.get("icon-optional"),Cr=We.get("text-allow-overlap"),Nr=We.get("icon-allow-overlap"),Qr=We.get("text-rotation-alignment")==="map",bn=We.get("text-pitch-alignment")==="map",un=We.get("icon-text-fit")!=="none",xn=We.get("symbol-z-order")==="viewport-y",zn=Cr&&(Nr||!Fe.hasIconData()||gr),Jn=Nr&&(Cr||!Fe.hasTextData()||Pr);!Fe.collisionArrays&&ur&&Fe.deserializeCollisionBoxes(ur);var Hn=function(ha,Ba){if(!ee[ha.crossTileID])if(nr)he.placements[ha.crossTileID]=new ht(!1,!1,!1);else{var $a,Ua=!1,Da=!1,Qa=!0,Ia=null,pa={box:null,offscreen:null},po={box:null,offscreen:null},Qi=null,Pi=null,Ai=0,qi=0,Mi=0;Ba.textFeatureIndex?Ai=Ba.textFeatureIndex:ha.useRuntimeCollisionCircles&&(Ai=ha.featureIndex),Ba.verticalTextFeatureIndex&&(qi=Ba.verticalTextFeatureIndex);var ul=Ba.textBox;if(ul){var vo=function(to){var Ds=t.WritingMode.horizontal;if(Fe.allowVerticalPlacement&&!to&&he.prevPlacement){var bs=he.prevPlacement.placedOrientations[ha.crossTileID];bs&&(he.placedOrientations[ha.crossTileID]=bs,he.markUsedOrientation(Fe,Ds=bs,ha))}return Ds},Js=function(to,Ds){if(Fe.allowVerticalPlacement&&ha.numVerticalGlyphVertices>0&&Ba.verticalTextBox)for(var bs=0,vu=Fe.writingModes;bs<vu.length&&(vu[bs]===t.WritingMode.vertical?(pa=Ds(),po=pa):pa=to(),!(pa&&pa.box&&pa.box.length));bs+=1);else pa=to()};if(We.get("text-variable-anchor")){var cs=We.get("text-variable-anchor");if(he.prevPlacement&&he.prevPlacement.variableOffsets[ha.crossTileID]){var $s=he.prevPlacement.variableOffsets[ha.crossTileID];cs.indexOf($s.anchor)>0&&(cs=cs.filter(function(to){return to!==$s.anchor})).unshift($s.anchor)}var El=function(to,Ds,bs){for(var vu=to.x2-to.x1,iv=to.y2-to.y1,gf=ha.textBoxScale,Mh=un&&!Nr?Ds:null,oc={box:[],offscreen:!1},kh=Cr?2*cs.length:cs.length,qs=0;qs<kh;++qs){var el=he.attemptAnchorPlacement(cs[qs%cs.length],to,vu,iv,gf,Qr,bn,Qt,it,br,qs>=cs.length,ha,Fe,bs,Mh);if(el&&(oc=el.placedGlyphBoxes)&&oc.box&&oc.box.length){Ua=!0,Ia=el.shift;break}}return oc};Js(function(){return El(ul,Ba.iconBox,t.WritingMode.horizontal)},function(){var to=Ba.verticalTextBox;return Fe.allowVerticalPlacement&&!(pa&&pa.box&&pa.box.length)&&ha.numVerticalGlyphVertices>0&&to?El(to,Ba.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),pa&&(Ua=pa.box,Qa=pa.offscreen);var zu=vo(pa&&pa.box);if(!Ua&&he.prevPlacement){var Fu=he.prevPlacement.variableOffsets[ha.crossTileID];Fu&&(he.variableOffsets[ha.crossTileID]=Fu,he.markUsedJustification(Fe,Fu.anchor,ha,zu))}}else{var xs=function(to,Ds){var bs=he.collisionIndex.placeCollisionBox(to,Cr,Qt,it,br.predicate);return bs&&bs.box&&bs.box.length&&(he.markUsedOrientation(Fe,Ds,ha),he.placedOrientations[ha.crossTileID]=Ds),bs};Js(function(){return xs(ul,t.WritingMode.horizontal)},function(){var to=Ba.verticalTextBox;return Fe.allowVerticalPlacement&&ha.numVerticalGlyphVertices>0&&to?xs(to,t.WritingMode.vertical):{box:null,offscreen:null}}),vo(pa&&pa.box&&pa.box.length)}}if(Ua=($a=pa)&&$a.box&&$a.box.length>0,Qa=$a&&$a.offscreen,ha.useRuntimeCollisionCircles){var Ll=Fe.text.placedSymbolArray.get(ha.centerJustifiedTextSymbolIndex),mf=t.evaluateSizeForFeature(Fe.textSizeData,yr,Ll),Ou=We.get("text-padding");Qi=he.collisionIndex.placeCollisionCircles(Cr,Ll,Fe.lineVertexArray,Fe.glyphOffsetArray,mf,it,dt,Ft,Q,bn,br.predicate,ha.collisionCircleDiameter,Ou),Ua=Cr||Qi.circles.length>0&&!Qi.collisionDetected,Qa=Qa&&Qi.offscreen}if(Ba.iconFeatureIndex&&(Mi=Ba.iconFeatureIndex),Ba.iconBox){var Qs=function(to){var Ds=un&&Ia?Er(to,Ia.x,Ia.y,Qr,bn,he.transform.angle):to;return he.collisionIndex.placeCollisionBox(Ds,Nr,Qt,it,br.predicate)};Da=po&&po.box&&po.box.length&&Ba.verticalIconBox?(Pi=Qs(Ba.verticalIconBox)).box.length>0:(Pi=Qs(Ba.iconBox)).box.length>0,Qa=Qa&&Pi.offscreen}var mo=Pr||ha.numHorizontalGlyphVertices===0&&ha.numVerticalGlyphVertices===0,Ic=gr||ha.numIconVertices===0;if(mo||Ic?Ic?mo||(Da=Da&&Ua):Ua=Da&&Ua:Da=Ua=Da&&Ua,Ua&&$a&&$a.box&&he.collisionIndex.insertCollisionBox($a.box,We.get("text-ignore-placement"),Fe.bucketInstanceId,po&&po.box&&qi?qi:Ai,br.ID),Da&&Pi&&he.collisionIndex.insertCollisionBox(Pi.box,We.get("icon-ignore-placement"),Fe.bucketInstanceId,Mi,br.ID),Qi&&(Ua&&he.collisionIndex.insertCollisionCircles(Qi.circles,We.get("text-ignore-placement"),Fe.bucketInstanceId,Ai,br.ID),Q)){var zc=Fe.bucketInstanceId,fo=he.collisionCircleArrays[zc];fo===void 0&&(fo=he.collisionCircleArrays[zc]=new Nt);for(var Nu=0;Nu<Qi.circles.length;Nu+=4)fo.circles.push(Qi.circles[Nu+0]),fo.circles.push(Qi.circles[Nu+1]),fo.circles.push(Qi.circles[Nu+2]),fo.circles.push(Qi.collisionDetected?1:0)}he.placements[ha.crossTileID]=new ht(Ua||zn,Da||Jn,Qa||Fe.justReloaded),ee[ha.crossTileID]=!0}};if(xn)for(var qn=Fe.getSortedSymbolIndexes(this.transform.angle),ua=qn.length-1;ua>=0;--ua){var za=qn[ua];Hn(Fe.symbolInstances.get(za),Fe.collisionArrays[za])}else for(var Ca=K.symbolInstanceStart;Ca<K.symbolInstanceEnd;Ca++)Hn(Fe.symbolInstances.get(Ca),Fe.collisionArrays[Ca]);if(Q&&Fe.bucketInstanceId in this.collisionCircleArrays){var qa=this.collisionCircleArrays[Fe.bucketInstanceId];t.invert(qa.invProjMatrix,it),qa.viewportMatrix=this.collisionIndex.getViewportMatrix()}Fe.justReloaded=!1},Br.prototype.markUsedJustification=function(K,ee,Q,he){var Se;Se=he===t.WritingMode.vertical?Q.verticalPlacedTextSymbolIndex:{left:Q.leftJustifiedTextSymbolIndex,center:Q.centerJustifiedTextSymbolIndex,right:Q.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(ee)];for(var Fe=0,We=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex,Q.verticalPlacedTextSymbolIndex];Fe<We.length;Fe+=1){var it=We[Fe];it>=0&&(K.text.placedSymbolArray.get(it).crossTileID=Se>=0&&it!==Se?0:Q.crossTileID)}},Br.prototype.markUsedOrientation=function(K,ee,Q){for(var he=ee===t.WritingMode.horizontal||ee===t.WritingMode.horizontalOnly?ee:0,Se=ee===t.WritingMode.vertical?ee:0,Fe=0,We=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex];Fe<We.length;Fe+=1)K.text.placedSymbolArray.get(We[Fe]).placedOrientation=he;Q.verticalPlacedTextSymbolIndex&&(K.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).placedOrientation=Se)},Br.prototype.commit=function(K){this.commitTime=K,this.zoomAtLastRecencyCheck=this.transform.zoom;var ee=this.prevPlacement,Q=!1;this.prevZoomAdjustment=ee?ee.zoomAdjustment(this.transform.zoom):0;var he=ee?ee.symbolFadeChange(K):1,Se=ee?ee.opacities:{},Fe=ee?ee.variableOffsets:{},We=ee?ee.placedOrientations:{};for(var it in this.placements){var dt=this.placements[it],Ft=Se[it];Ft?(this.opacities[it]=new Zr(Ft,he,dt.text,dt.icon),Q=Q||dt.text!==Ft.text.placed||dt.icon!==Ft.icon.placed):(this.opacities[it]=new Zr(null,he,dt.text,dt.icon,dt.skipFade),Q=Q||dt.text||dt.icon)}for(var Qt in Se){var nr=Se[Qt];if(!this.opacities[Qt]){var ur=new Zr(nr,he,!1,!1);ur.isHidden()||(this.opacities[Qt]=ur,Q=Q||nr.text.placed||nr.icon.placed)}}for(var yr in Fe)this.variableOffsets[yr]||!this.opacities[yr]||this.opacities[yr].isHidden()||(this.variableOffsets[yr]=Fe[yr]);for(var br in We)this.placedOrientations[br]||!this.opacities[br]||this.opacities[br].isHidden()||(this.placedOrientations[br]=We[br]);Q?this.lastPlacementChangeTime=K:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ee?ee.lastPlacementChangeTime:K)},Br.prototype.updateLayerOpacities=function(K,ee){for(var Q={},he=0,Se=ee;he<Se.length;he+=1){var Fe=Se[he],We=Fe.getBucket(K);We&&Fe.latestFeatureIndex&&K.id===We.layerIds[0]&&this.updateBucketOpacities(We,Q,Fe.collisionBoxArray)}},Br.prototype.updateBucketOpacities=function(K,ee,Q){var he=this;K.hasTextData()&&K.text.opacityVertexArray.clear(),K.hasIconData()&&K.icon.opacityVertexArray.clear(),K.hasIconCollisionBoxData()&&K.iconCollisionBox.collisionVertexArray.clear(),K.hasTextCollisionBoxData()&&K.textCollisionBox.collisionVertexArray.clear();var Se=K.layers[0].layout,Fe=new Zr(null,0,!1,!1,!0),We=Se.get("text-allow-overlap"),it=Se.get("icon-allow-overlap"),dt=Se.get("text-variable-anchor"),Ft=Se.get("text-rotation-alignment")==="map",Qt=Se.get("text-pitch-alignment")==="map",nr=Se.get("icon-text-fit")!=="none",ur=new Zr(null,0,We&&(it||!K.hasIconData()||Se.get("icon-optional")),it&&(We||!K.hasTextData()||Se.get("text-optional")),!0);!K.collisionArrays&&Q&&(K.hasIconCollisionBoxData()||K.hasTextCollisionBoxData())&&K.deserializeCollisionBoxes(Q);for(var yr=function(Cr,Nr,Qr){for(var bn=0;bn<Nr/4;bn++)Cr.opacityVertexArray.emplaceBack(Qr)},br=function(Cr){var Nr=K.symbolInstances.get(Cr),Qr=Nr.numHorizontalGlyphVertices,bn=Nr.numVerticalGlyphVertices,un=Nr.crossTileID,xn=he.opacities[un];ee[un]?xn=Fe:xn||(he.opacities[un]=xn=ur),ee[un]=!0;var zn=Nr.numIconVertices>0,Jn=he.placedOrientations[Nr.crossTileID],Hn=Jn===t.WritingMode.vertical,qn=Jn===t.WritingMode.horizontal||Jn===t.WritingMode.horizontalOnly;if(Qr>0||bn>0){var ua=Wr(xn.text);yr(K.text,Qr,Hn?Fr:ua),yr(K.text,bn,qn?Fr:ua);var za=xn.text.isHidden();[Nr.rightJustifiedTextSymbolIndex,Nr.centerJustifiedTextSymbolIndex,Nr.leftJustifiedTextSymbolIndex].forEach(function(pa){pa>=0&&(K.text.placedSymbolArray.get(pa).hidden=za||Hn?1:0)}),Nr.verticalPlacedTextSymbolIndex>=0&&(K.text.placedSymbolArray.get(Nr.verticalPlacedTextSymbolIndex).hidden=za||qn?1:0);var Ca=he.variableOffsets[Nr.crossTileID];Ca&&he.markUsedJustification(K,Ca.anchor,Nr,Jn);var qa=he.placedOrientations[Nr.crossTileID];qa&&(he.markUsedJustification(K,"left",Nr,qa),he.markUsedOrientation(K,qa,Nr))}if(zn){var ha=Wr(xn.icon),Ba=!(nr&&Nr.verticalPlacedIconSymbolIndex&&Hn);Nr.placedIconSymbolIndex>=0&&(yr(K.icon,Nr.numIconVertices,Ba?ha:Fr),K.icon.placedSymbolArray.get(Nr.placedIconSymbolIndex).hidden=xn.icon.isHidden()),Nr.verticalPlacedIconSymbolIndex>=0&&(yr(K.icon,Nr.numVerticalIconVertices,Ba?Fr:ha),K.icon.placedSymbolArray.get(Nr.verticalPlacedIconSymbolIndex).hidden=xn.icon.isHidden())}if(K.hasIconCollisionBoxData()||K.hasTextCollisionBoxData()){var $a=K.collisionArrays[Cr];if($a){var Ua=new t.Point(0,0);if($a.textBox||$a.verticalTextBox){var Da=!0;if(dt){var Qa=he.variableOffsets[un];Qa?(Ua=Rr(Qa.anchor,Qa.width,Qa.height,Qa.textOffset,Qa.textBoxScale),Ft&&Ua._rotate(Qt?he.transform.angle:-he.transform.angle)):Da=!1}$a.textBox&&Lr(K.textCollisionBox.collisionVertexArray,xn.text.placed,!Da||Hn,Ua.x,Ua.y),$a.verticalTextBox&&Lr(K.textCollisionBox.collisionVertexArray,xn.text.placed,!Da||qn,Ua.x,Ua.y)}var Ia=Boolean(!qn&&$a.verticalIconBox);$a.iconBox&&Lr(K.iconCollisionBox.collisionVertexArray,xn.icon.placed,Ia,nr?Ua.x:0,nr?Ua.y:0),$a.verticalIconBox&&Lr(K.iconCollisionBox.collisionVertexArray,xn.icon.placed,!Ia,nr?Ua.x:0,nr?Ua.y:0)}}},Pr=0;Pr<K.symbolInstances.length;Pr++)br(Pr);if(K.sortFeatures(this.transform.angle),this.retainedQueryData[K.bucketInstanceId]&&(this.retainedQueryData[K.bucketInstanceId].featureSortOrder=K.featureSortOrder),K.hasTextData()&&K.text.opacityVertexBuffer&&K.text.opacityVertexBuffer.updateData(K.text.opacityVertexArray),K.hasIconData()&&K.icon.opacityVertexBuffer&&K.icon.opacityVertexBuffer.updateData(K.icon.opacityVertexArray),K.hasIconCollisionBoxData()&&K.iconCollisionBox.collisionVertexBuffer&&K.iconCollisionBox.collisionVertexBuffer.updateData(K.iconCollisionBox.collisionVertexArray),K.hasTextCollisionBoxData()&&K.textCollisionBox.collisionVertexBuffer&&K.textCollisionBox.collisionVertexBuffer.updateData(K.textCollisionBox.collisionVertexArray),K.bucketInstanceId in this.collisionCircleArrays){var gr=this.collisionCircleArrays[K.bucketInstanceId];K.placementInvProjMatrix=gr.invProjMatrix,K.placementViewportMatrix=gr.viewportMatrix,K.collisionCircleArray=gr.circles,delete this.collisionCircleArrays[K.bucketInstanceId]}},Br.prototype.symbolFadeChange=function(K){return this.fadeDuration===0?1:(K-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Br.prototype.zoomAdjustment=function(K){return Math.max(0,(this.transform.zoom-K)/1.5)},Br.prototype.hasTransitions=function(K){return this.stale||K-this.lastPlacementChangeTime<this.fadeDuration},Br.prototype.stillRecent=function(K,ee){var Q=this.zoomAtLastRecencyCheck===ee?1-this.zoomAdjustment(ee):1;return this.zoomAtLastRecencyCheck=ee,this.commitTime+this.fadeDuration*Q>K},Br.prototype.setStale=function(){this.stale=!0};var pn=Math.pow(2,25),On=Math.pow(2,24),Fn=Math.pow(2,17),Qn=Math.pow(2,16),ya=Math.pow(2,9),Sa=Math.pow(2,8),ar=Math.pow(2,1);function Wr(K){if(K.opacity===0&&!K.placed)return 0;if(K.opacity===1&&K.placed)return 4294967295;var ee=K.placed?1:0,Q=Math.floor(127*K.opacity);return Q*pn+ee*On+Q*Fn+ee*Qn+Q*ya+ee*Sa+Q*ar+ee}var Fr=0,yn=function(K){this._sortAcrossTiles=K.layout.get("symbol-z-order")!=="viewport-y"&&K.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};yn.prototype.continuePlacement=function(K,ee,Q,he,Se){for(var Fe=this._bucketParts;this._currentTileIndex<K.length;)if(ee.getBucketParts(Fe,he,K[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Se())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fe.sort(function(We,it){return We.sortKey-it.sortKey}));this._currentPartIndex<Fe.length;)if(ee.placeLayerBucketPart(Fe[this._currentPartIndex],this._seenCrossTileIDs,Q),this._currentPartIndex++,Se())return!0;return!1};var Sn=function(K,ee,Q,he,Se,Fe,We){this.placement=new Br(K,Se,Fe,We),this._currentPlacementIndex=ee.length-1,this._forceFullPlacement=Q,this._showCollisionBoxes=he,this._done=!1};Sn.prototype.isDone=function(){return this._done},Sn.prototype.continuePlacement=function(K,ee,Q){for(var he=this,Se=t.browser.now(),Fe=function(){var dt=t.browser.now()-Se;return!he._forceFullPlacement&&dt>2};this._currentPlacementIndex>=0;){var We=ee[K[this._currentPlacementIndex]],it=this.placement.collisionIndex.transform.zoom;if(We.type==="symbol"&&(!We.minzoom||We.minzoom<=it)&&(!We.maxzoom||We.maxzoom>it)){if(this._inProgressLayer||(this._inProgressLayer=new yn(We)),this._inProgressLayer.continuePlacement(Q[We.source],this.placement,this._showCollisionBoxes,We,Fe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Sn.prototype.commit=function(K){return this.placement.commit(K),this.placement};var aa=512/t.EXTENT/2,Xn=function(K,ee,Q){this.tileID=K,this.indexedSymbolInstances={},this.bucketInstanceId=Q;for(var he=0;he<ee.length;he++){var Se=ee.get(he),Fe=Se.key;this.indexedSymbolInstances[Fe]||(this.indexedSymbolInstances[Fe]=[]),this.indexedSymbolInstances[Fe].push({crossTileID:Se.crossTileID,coord:this.getScaledCoordinates(Se,K)})}};Xn.prototype.getScaledCoordinates=function(K,ee){var Q=aa/Math.pow(2,ee.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ee.canonical.x*t.EXTENT+K.anchorX)*Q),y:Math.floor((ee.canonical.y*t.EXTENT+K.anchorY)*Q)}},Xn.prototype.findMatches=function(K,ee,Q){for(var he=this.tileID.canonical.z<ee.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ee.canonical.z),Se=0;Se<K.length;Se++){var Fe=K.get(Se);if(!Fe.crossTileID){var We=this.indexedSymbolInstances[Fe.key];if(We)for(var it=this.getScaledCoordinates(Fe,ee),dt=0,Ft=We;dt<Ft.length;dt+=1){var Qt=Ft[dt];if(Math.abs(Qt.coord.x-it.x)<=he&&Math.abs(Qt.coord.y-it.y)<=he&&!Q[Qt.crossTileID]){Q[Qt.crossTileID]=!0,Fe.crossTileID=Qt.crossTileID;break}}}}};var ra=function(){this.maxCrossTileID=0};ra.prototype.generate=function(){return++this.maxCrossTileID};var na=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};na.prototype.handleWrapJump=function(K){var ee=Math.round((K-this.lng)/360);if(ee!==0)for(var Q in this.indexes){var he=this.indexes[Q],Se={};for(var Fe in he){var We=he[Fe];We.tileID=We.tileID.unwrapTo(We.tileID.wrap+ee),Se[We.tileID.key]=We}this.indexes[Q]=Se}this.lng=K},na.prototype.addBucket=function(K,ee,Q){if(this.indexes[K.overscaledZ]&&this.indexes[K.overscaledZ][K.key]){if(this.indexes[K.overscaledZ][K.key].bucketInstanceId===ee.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(K.overscaledZ,this.indexes[K.overscaledZ][K.key])}for(var he=0;he<ee.symbolInstances.length;he++)ee.symbolInstances.get(he).crossTileID=0;this.usedCrossTileIDs[K.overscaledZ]||(this.usedCrossTileIDs[K.overscaledZ]={});var Se=this.usedCrossTileIDs[K.overscaledZ];for(var Fe in this.indexes){var We=this.indexes[Fe];if(Number(Fe)>K.overscaledZ)for(var it in We){var dt=We[it];dt.tileID.isChildOf(K)&&dt.findMatches(ee.symbolInstances,K,Se)}else{var Ft=We[K.scaledTo(Number(Fe)).key];Ft&&Ft.findMatches(ee.symbolInstances,K,Se)}}for(var Qt=0;Qt<ee.symbolInstances.length;Qt++){var nr=ee.symbolInstances.get(Qt);nr.crossTileID||(nr.crossTileID=Q.generate(),Se[nr.crossTileID]=!0)}return this.indexes[K.overscaledZ]===void 0&&(this.indexes[K.overscaledZ]={}),this.indexes[K.overscaledZ][K.key]=new Xn(K,ee.symbolInstances,ee.bucketInstanceId),!0},na.prototype.removeBucketCrossTileIDs=function(K,ee){for(var Q in ee.indexedSymbolInstances)for(var he=0,Se=ee.indexedSymbolInstances[Q];he<Se.length;he+=1)delete this.usedCrossTileIDs[K][Se[he].crossTileID]},na.prototype.removeStaleBuckets=function(K){var ee=!1;for(var Q in this.indexes){var he=this.indexes[Q];for(var Se in he)K[he[Se].bucketInstanceId]||(this.removeBucketCrossTileIDs(Q,he[Se]),delete he[Se],ee=!0)}return ee};var ba=function(){this.layerIndexes={},this.crossTileIDs=new ra,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ba.prototype.addLayer=function(K,ee,Q){var he=this.layerIndexes[K.id];he===void 0&&(he=this.layerIndexes[K.id]=new na);var Se=!1,Fe={};he.handleWrapJump(Q);for(var We=0,it=ee;We<it.length;We+=1){var dt=it[We],Ft=dt.getBucket(K);Ft&&K.id===Ft.layerIds[0]&&(Ft.bucketInstanceId||(Ft.bucketInstanceId=++this.maxBucketInstanceId),he.addBucket(dt.tileID,Ft,this.crossTileIDs)&&(Se=!0),Fe[Ft.bucketInstanceId]=!0)}return he.removeStaleBuckets(Fe)&&(Se=!0),Se},ba.prototype.pruneUnusedLayers=function(K){var ee={};for(var Q in K.forEach(function(he){ee[he]=!0}),this.layerIndexes)ee[Q]||delete this.layerIndexes[Q]};var Ut=function(K,ee){return t.emitValidationErrors(K,ee&&ee.filter(function(Q){return Q.identifier!=="source.canvas"}))},lr=t.pick(mt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ir=t.pick(mt,["setCenter","setZoom","setBearing","setPitch"]),Kr=function(){var K={},ee=t.styleSpec.$version;for(var Q in t.styleSpec.$root){var he,Se=t.styleSpec.$root[Q];Se.required&&(he=Q==="version"?ee:Se.type==="array"?[]:{})!=null&&(K[Q]=he)}return K}(),Ur=function(K){function ee(Q,he){var Se=this;he===void 0&&(he={}),K.call(this),this.map=Q,this.dispatcher=new R($t(),this),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new L(Q._requestManager,he.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new ba,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Fe=this;this._rtlTextPluginCallback=ee.registerForPluginStateChange(function(We){Fe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:We.pluginStatus,pluginURL:We.pluginURL},function(it,dt){if(t.triggerPluginCompletionEvent(it),dt&&dt.every(function(Qt){return Qt}))for(var Ft in Fe.sourceCaches)Fe.sourceCaches[Ft].reload()})}),this.on("data",function(We){if(We.dataType==="source"&&We.sourceDataType==="metadata"){var it=Se.sourceCaches[We.sourceId];if(it){var dt=it.getSource();if(dt&&dt.vectorLayerIds)for(var Ft in Se._layers){var Qt=Se._layers[Ft];Qt.source===dt.id&&Se._validateLayer(Qt)}}}})}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.loadURL=function(Q,he){var Se=this;he===void 0&&(he={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Fe=typeof he.validate=="boolean"?he.validate:!t.isMapboxURL(Q);Q=this.map._requestManager.normalizeStyleURL(Q,he.accessToken);var We=this.map._requestManager.transformRequest(Q,t.ResourceType.Style);this._request=t.getJSON(We,function(it,dt){Se._request=null,it?Se.fire(new t.ErrorEvent(it)):dt&&Se._load(dt,Fe)})},ee.prototype.loadJSON=function(Q,he){var Se=this;he===void 0&&(he={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Se._request=null,Se._load(Q,he.validate!==!1)})},ee.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Kr,!1)},ee.prototype._load=function(Q,he){if(!he||!Ut(this,t.validateStyle(Q))){for(var Se in this._loaded=!0,this.stylesheet=Q,Q.sources)this.addSource(Se,Q.sources[Se],{validate:!1});Q.sprite?this._loadSprite(Q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Q.glyphs);var Fe=Oe(this.stylesheet.layers);this._order=Fe.map(function(Ft){return Ft.id}),this._layers={},this._serializedLayers={};for(var We=0,it=Fe;We<it.length;We+=1){var dt=it[We];(dt=t.createStyleLayer(dt)).setEventedParent(this,{layer:{id:dt.id}}),this._layers[dt.id]=dt,this._serializedLayers[dt.id]=dt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},ee.prototype._loadSprite=function(Q){var he=this;this._spriteRequest=function(Se,Fe,We){var it,dt,Ft,Qt=t.browser.devicePixelRatio>1?"@2x":"",nr=t.getJSON(Fe.transformRequest(Fe.normalizeSpriteURL(Se,Qt,".json"),t.ResourceType.SpriteJSON),function(br,Pr){nr=null,Ft||(Ft=br,it=Pr,yr())}),ur=t.getImage(Fe.transformRequest(Fe.normalizeSpriteURL(Se,Qt,".png"),t.ResourceType.SpriteImage),function(br,Pr){ur=null,Ft||(Ft=br,dt=Pr,yr())});function yr(){if(Ft)We(Ft);else if(it&&dt){var br=t.browser.getImageData(dt),Pr={};for(var gr in it){var Cr=it[gr],Nr=Cr.width,Qr=Cr.height,bn=Cr.x,un=Cr.y,xn=Cr.sdf,zn=Cr.pixelRatio,Jn=Cr.stretchX,Hn=Cr.stretchY,qn=Cr.content,ua=new t.RGBAImage({width:Nr,height:Qr});t.RGBAImage.copy(br,ua,{x:bn,y:un},{x:0,y:0},{width:Nr,height:Qr}),Pr[gr]={data:ua,pixelRatio:zn,sdf:xn,stretchX:Jn,stretchY:Hn,content:qn}}We(null,Pr)}}return{cancel:function(){nr&&(nr.cancel(),nr=null),ur&&(ur.cancel(),ur=null)}}}(Q,this.map._requestManager,function(Se,Fe){if(he._spriteRequest=null,Se)he.fire(new t.ErrorEvent(Se));else if(Fe)for(var We in Fe)he.imageManager.addImage(We,Fe[We]);he.imageManager.setLoaded(!0),he._availableImages=he.imageManager.listImages(),he.dispatcher.broadcast("setImages",he._availableImages),he.fire(new t.Event("data",{dataType:"style"}))})},ee.prototype._validateLayer=function(Q){var he=this.sourceCaches[Q.source];if(he){var Se=Q.sourceLayer;if(Se){var Fe=he.getSource();(Fe.type==="geojson"||Fe.vectorLayerIds&&Fe.vectorLayerIds.indexOf(Se)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Se+'" does not exist on source "'+Fe.id+'" as specified by style layer "'+Q.id+'"')))}}},ee.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Q in this.sourceCaches)if(!this.sourceCaches[Q].loaded())return!1;return!!this.imageManager.isLoaded()},ee.prototype._serializeLayers=function(Q){for(var he=[],Se=0,Fe=Q;Se<Fe.length;Se+=1){var We=this._layers[Fe[Se]];We.type!=="custom"&&he.push(We.serialize())}return he},ee.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Q in this.sourceCaches)if(this.sourceCaches[Q].hasTransition())return!0;for(var he in this._layers)if(this._layers[he].hasTransition())return!0;return!1},ee.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},ee.prototype.update=function(Q){if(this._loaded){var he=this._changed;if(this._changed){var Se=Object.keys(this._updatedLayers),Fe=Object.keys(this._removedLayers);for(var We in(Se.length||Fe.length)&&this._updateWorkerLayers(Se,Fe),this._updatedSources){var it=this._updatedSources[We];it==="reload"?this._reloadSource(We):it==="clear"&&this._clearSource(We)}for(var dt in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[dt].updateTransitions(Q);this.light.updateTransitions(Q),this._resetUpdates()}for(var Ft in this.sourceCaches)this.sourceCaches[Ft].used=!1;for(var Qt=0,nr=this._order;Qt<nr.length;Qt+=1){var ur=this._layers[nr[Qt]];ur.recalculate(Q,this._availableImages),!ur.isHidden(Q.zoom)&&ur.source&&(this.sourceCaches[ur.source].used=!0)}this.light.recalculate(Q),this.z=Q.zoom,he&&this.fire(new t.Event("data",{dataType:"style"}))}},ee.prototype._updateTilesForChangedImages=function(){var Q=Object.keys(this._changedImages);if(Q.length){for(var he in this.sourceCaches)this.sourceCaches[he].reloadTilesForDependencies(["icons","patterns"],Q);this._changedImages={}}},ee.prototype._updateWorkerLayers=function(Q,he){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Q),removedIds:he})},ee.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},ee.prototype.setState=function(Q){var he=this;if(this._checkLoaded(),Ut(this,t.validateStyle(Q)))return!1;(Q=t.clone$1(Q)).layers=Oe(Q.layers);var Se=function(We,it){if(!We)return[{command:mt.setStyle,args:[it]}];var dt=[];try{if(!t.deepEqual(We.version,it.version))return[{command:mt.setStyle,args:[it]}];t.deepEqual(We.center,it.center)||dt.push({command:mt.setCenter,args:[it.center]}),t.deepEqual(We.zoom,it.zoom)||dt.push({command:mt.setZoom,args:[it.zoom]}),t.deepEqual(We.bearing,it.bearing)||dt.push({command:mt.setBearing,args:[it.bearing]}),t.deepEqual(We.pitch,it.pitch)||dt.push({command:mt.setPitch,args:[it.pitch]}),t.deepEqual(We.sprite,it.sprite)||dt.push({command:mt.setSprite,args:[it.sprite]}),t.deepEqual(We.glyphs,it.glyphs)||dt.push({command:mt.setGlyphs,args:[it.glyphs]}),t.deepEqual(We.transition,it.transition)||dt.push({command:mt.setTransition,args:[it.transition]}),t.deepEqual(We.light,it.light)||dt.push({command:mt.setLight,args:[it.light]});var Ft={},Qt=[];(function(ur,yr,br,Pr){var gr;for(gr in yr=yr||{},ur=ur||{})ur.hasOwnProperty(gr)&&(yr.hasOwnProperty(gr)||yt(gr,br,Pr));for(gr in yr)yr.hasOwnProperty(gr)&&(ur.hasOwnProperty(gr)?t.deepEqual(ur[gr],yr[gr])||(ur[gr].type==="geojson"&&yr[gr].type==="geojson"&&kt(ur,yr,gr)?br.push({command:mt.setGeoJSONSourceData,args:[gr,yr[gr].data]}):St(gr,yr,br,Pr)):wt(gr,yr,br))})(We.sources,it.sources,Qt,Ft);var nr=[];We.layers&&We.layers.forEach(function(ur){Ft[ur.source]?dt.push({command:mt.removeLayer,args:[ur.id]}):nr.push(ur)}),dt=dt.concat(Qt),function(ur,yr,br){yr=yr||[];var Pr,gr,Cr,Nr,Qr,bn,un,xn=(ur=ur||[]).map(zt),zn=yr.map(zt),Jn=ur.reduce(Xt,{}),Hn=yr.reduce(Xt,{}),qn=xn.slice(),ua=Object.create(null);for(Pr=0,gr=0;Pr<xn.length;Pr++)Hn.hasOwnProperty(Cr=xn[Pr])?gr++:(br.push({command:mt.removeLayer,args:[Cr]}),qn.splice(qn.indexOf(Cr,gr),1));for(Pr=0,gr=0;Pr<zn.length;Pr++)qn[qn.length-1-Pr]!==(Cr=zn[zn.length-1-Pr])&&(Jn.hasOwnProperty(Cr)?(br.push({command:mt.removeLayer,args:[Cr]}),qn.splice(qn.lastIndexOf(Cr,qn.length-gr),1)):gr++,br.push({command:mt.addLayer,args:[Hn[Cr],bn=qn[qn.length-Pr]]}),qn.splice(qn.length-Pr,0,Cr),ua[Cr]=!0);for(Pr=0;Pr<zn.length;Pr++)if(Nr=Jn[Cr=zn[Pr]],Qr=Hn[Cr],!ua[Cr]&&!t.deepEqual(Nr,Qr))if(t.deepEqual(Nr.source,Qr.source)&&t.deepEqual(Nr["source-layer"],Qr["source-layer"])&&t.deepEqual(Nr.type,Qr.type)){for(un in Rt(Nr.layout,Qr.layout,br,Cr,null,mt.setLayoutProperty),Rt(Nr.paint,Qr.paint,br,Cr,null,mt.setPaintProperty),t.deepEqual(Nr.filter,Qr.filter)||br.push({command:mt.setFilter,args:[Cr,Qr.filter]}),t.deepEqual(Nr.minzoom,Qr.minzoom)&&t.deepEqual(Nr.maxzoom,Qr.maxzoom)||br.push({command:mt.setLayerZoomRange,args:[Cr,Qr.minzoom,Qr.maxzoom]}),Nr)Nr.hasOwnProperty(un)&&un!=="layout"&&un!=="paint"&&un!=="filter"&&un!=="metadata"&&un!=="minzoom"&&un!=="maxzoom"&&(un.indexOf("paint.")===0?Rt(Nr[un],Qr[un],br,Cr,un.slice(6),mt.setPaintProperty):t.deepEqual(Nr[un],Qr[un])||br.push({command:mt.setLayerProperty,args:[Cr,un,Qr[un]]}));for(un in Qr)Qr.hasOwnProperty(un)&&!Nr.hasOwnProperty(un)&&un!=="layout"&&un!=="paint"&&un!=="filter"&&un!=="metadata"&&un!=="minzoom"&&un!=="maxzoom"&&(un.indexOf("paint.")===0?Rt(Nr[un],Qr[un],br,Cr,un.slice(6),mt.setPaintProperty):t.deepEqual(Nr[un],Qr[un])||br.push({command:mt.setLayerProperty,args:[Cr,un,Qr[un]]}))}else br.push({command:mt.removeLayer,args:[Cr]}),bn=qn[qn.lastIndexOf(Cr)+1],br.push({command:mt.addLayer,args:[Qr,bn]})}(nr,it.layers,dt)}catch(ur){console.warn("Unable to compute style diff:",ur),dt=[{command:mt.setStyle,args:[it]}]}return dt}(this.serialize(),Q).filter(function(We){return!(We.command in Ir)});if(Se.length===0)return!1;var Fe=Se.filter(function(We){return!(We.command in lr)});if(Fe.length>0)throw new Error("Unimplemented: "+Fe.map(function(We){return We.command}).join(", ")+".");return Se.forEach(function(We){We.command!=="setTransition"&&he[We.command].apply(he,We.args)}),this.stylesheet=Q,!0},ee.prototype.addImage=function(Q,he){if(this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Q,he),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},ee.prototype.updateImage=function(Q,he){this.imageManager.updateImage(Q,he)},ee.prototype.getImage=function(Q){return this.imageManager.getImage(Q)},ee.prototype.removeImage=function(Q){if(!this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Q),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},ee.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},ee.prototype.addSource=function(Q,he,Se){var Fe=this;if(Se===void 0&&(Se={}),this._checkLoaded(),this.sourceCaches[Q]!==void 0)throw new Error("There is already a source with this ID");if(!he.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(he).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(he.type)>=0&&this._validate(t.validateStyle.source,"sources."+Q,he,null,Se))){this.map&&this.map._collectResourceTiming&&(he.collectResourceTiming=!0);var We=this.sourceCaches[Q]=new ut(Q,he,this.dispatcher);We.style=this,We.setEventedParent(this,function(){return{isSourceLoaded:Fe.loaded(),source:We.serialize(),sourceId:Q}}),We.onAdd(this.map),this._changed=!0}},ee.prototype.removeSource=function(Q){if(this._checkLoaded(),this.sourceCaches[Q]===void 0)throw new Error("There is no source with this ID");for(var he in this._layers)if(this._layers[he].source===Q)return this.fire(new t.ErrorEvent(new Error('Source "'+Q+'" cannot be removed while layer "'+he+'" is using it.')));var Se=this.sourceCaches[Q];delete this.sourceCaches[Q],delete this._updatedSources[Q],Se.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Q})),Se.setEventedParent(null),Se.clearTiles(),Se.onRemove&&Se.onRemove(this.map),this._changed=!0},ee.prototype.setGeoJSONSourceData=function(Q,he){this._checkLoaded(),this.sourceCaches[Q].getSource().setData(he),this._changed=!0},ee.prototype.getSource=function(Q){return this.sourceCaches[Q]&&this.sourceCaches[Q].getSource()},ee.prototype.addLayer=function(Q,he,Se){Se===void 0&&(Se={}),this._checkLoaded();var Fe=Q.id;if(this.getLayer(Fe))this.fire(new t.ErrorEvent(new Error('Layer with id "'+Fe+'" already exists on this map')));else{var We;if(Q.type==="custom"){if(Ut(this,t.validateCustomStyleLayer(Q)))return;We=t.createStyleLayer(Q)}else{if(typeof Q.source=="object"&&(this.addSource(Fe,Q.source),Q=t.clone$1(Q),Q=t.extend(Q,{source:Fe})),this._validate(t.validateStyle.layer,"layers."+Fe,Q,{arrayIndex:-1},Se))return;We=t.createStyleLayer(Q),this._validateLayer(We),We.setEventedParent(this,{layer:{id:Fe}}),this._serializedLayers[We.id]=We.serialize()}var it=he?this._order.indexOf(he):this._order.length;if(he&&it===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+he+'" does not exist on this map.')));else{if(this._order.splice(it,0,Fe),this._layerOrderChanged=!0,this._layers[Fe]=We,this._removedLayers[Fe]&&We.source&&We.type!=="custom"){var dt=this._removedLayers[Fe];delete this._removedLayers[Fe],dt.type!==We.type?this._updatedSources[We.source]="clear":(this._updatedSources[We.source]="reload",this.sourceCaches[We.source].pause())}this._updateLayer(We),We.onAdd&&We.onAdd(this.map)}}},ee.prototype.moveLayer=function(Q,he){if(this._checkLoaded(),this._changed=!0,this._layers[Q]){if(Q!==he){var Se=this._order.indexOf(Q);this._order.splice(Se,1);var Fe=he?this._order.indexOf(he):this._order.length;he&&Fe===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+he+'" does not exist on this map.'))):(this._order.splice(Fe,0,Q),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be moved.")))},ee.prototype.removeLayer=function(Q){this._checkLoaded();var he=this._layers[Q];if(he){he.setEventedParent(null);var Se=this._order.indexOf(Q);this._order.splice(Se,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Q]=he,delete this._layers[Q],delete this._serializedLayers[Q],delete this._updatedLayers[Q],delete this._updatedPaintProps[Q],he.onRemove&&he.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be removed.")))},ee.prototype.getLayer=function(Q){return this._layers[Q]},ee.prototype.hasLayer=function(Q){return Q in this._layers},ee.prototype.setLayerZoomRange=function(Q,he,Se){this._checkLoaded();var Fe=this.getLayer(Q);Fe?Fe.minzoom===he&&Fe.maxzoom===Se||(he!=null&&(Fe.minzoom=he),Se!=null&&(Fe.maxzoom=Se),this._updateLayer(Fe)):this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot have zoom extent.")))},ee.prototype.setFilter=function(Q,he,Se){Se===void 0&&(Se={}),this._checkLoaded();var Fe=this.getLayer(Q);if(Fe){if(!t.deepEqual(Fe.filter,he))return he==null?(Fe.filter=void 0,void this._updateLayer(Fe)):void(this._validate(t.validateStyle.filter,"layers."+Fe.id+".filter",he,null,Se)||(Fe.filter=t.clone$1(he),this._updateLayer(Fe)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be filtered.")))},ee.prototype.getFilter=function(Q){return t.clone$1(this.getLayer(Q).filter)},ee.prototype.setLayoutProperty=function(Q,he,Se,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var We=this.getLayer(Q);We?t.deepEqual(We.getLayoutProperty(he),Se)||(We.setLayoutProperty(he,Se,Fe),this._updateLayer(We)):this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")))},ee.prototype.getLayoutProperty=function(Q,he){var Se=this.getLayer(Q);if(Se)return Se.getLayoutProperty(he);this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style.")))},ee.prototype.setPaintProperty=function(Q,he,Se,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var We=this.getLayer(Q);We?t.deepEqual(We.getPaintProperty(he),Se)||(We.setPaintProperty(he,Se,Fe)&&this._updateLayer(We),this._changed=!0,this._updatedPaintProps[Q]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")))},ee.prototype.getPaintProperty=function(Q,he){return this.getLayer(Q).getPaintProperty(he)},ee.prototype.setFeatureState=function(Q,he){this._checkLoaded();var Se=Q.source,Fe=Q.sourceLayer,We=this.sourceCaches[Se];if(We!==void 0){var it=We.getSource().type;it==="geojson"&&Fe?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):it!=="vector"||Fe?(Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),We.setFeatureState(Fe,Q.id,he)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")))},ee.prototype.removeFeatureState=function(Q,he){this._checkLoaded();var Se=Q.source,Fe=this.sourceCaches[Se];if(Fe!==void 0){var We=Fe.getSource().type,it=We==="vector"?Q.sourceLayer:void 0;We!=="vector"||it?he&&typeof Q.id!="string"&&typeof Q.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Fe.removeFeatureState(it,Q.id,he):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+Se+"' does not exist in the map's style.")))},ee.prototype.getFeatureState=function(Q){this._checkLoaded();var he=Q.source,Se=Q.sourceLayer,Fe=this.sourceCaches[he];if(Fe!==void 0){if(Fe.getSource().type!=="vector"||Se)return Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Fe.getFeatureState(Se,Q.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+he+"' does not exist in the map's style.")))},ee.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},ee.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(Q){return Q.serialize()}),layers:this._serializeLayers(this._order)},function(Q){return Q!==void 0})},ee.prototype._updateLayer=function(Q){this._updatedLayers[Q.id]=!0,Q.source&&!this._updatedSources[Q.source]&&this.sourceCaches[Q.source].getSource().type!=="raster"&&(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause()),this._changed=!0},ee.prototype._flattenAndSortRenderedFeatures=function(Q){for(var he=this,Se=function(Jn){return he._layers[Jn].type==="fill-extrusion"},Fe={},We=[],it=this._order.length-1;it>=0;it--){var dt=this._order[it];if(Se(dt)){Fe[dt]=it;for(var Ft=0,Qt=Q;Ft<Qt.length;Ft+=1){var nr=Qt[Ft][dt];if(nr)for(var ur=0,yr=nr;ur<yr.length;ur+=1)We.push(yr[ur])}}}We.sort(function(Jn,Hn){return Hn.intersectionZ-Jn.intersectionZ});for(var br=[],Pr=this._order.length-1;Pr>=0;Pr--){var gr=this._order[Pr];if(Se(gr))for(var Cr=We.length-1;Cr>=0;Cr--){var Nr=We[Cr].feature;if(Fe[Nr.layer.id]<Pr)break;br.push(Nr),We.pop()}else for(var Qr=0,bn=Q;Qr<bn.length;Qr+=1){var un=bn[Qr][gr];if(un)for(var xn=0,zn=un;xn<zn.length;xn+=1)br.push(zn[xn].feature)}}return br},ee.prototype.queryRenderedFeatures=function(Q,he,Se){he&&he.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",he.filter,null,he);var Fe={};if(he&&he.layers){if(!Array.isArray(he.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var We=0,it=he.layers;We<it.length;We+=1){var dt=it[We],Ft=this._layers[dt];if(!Ft)return this.fire(new t.ErrorEvent(new Error("The layer '"+dt+"' does not exist in the map's style and cannot be queried for features."))),[];Fe[Ft.source]=!0}}var Qt=[];for(var nr in he.availableImages=this._availableImages,this.sourceCaches)he.layers&&!Fe[nr]||Qt.push(ne(this.sourceCaches[nr],this._layers,this._serializedLayers,Q,he,Se));return this.placement&&Qt.push(function(ur,yr,br,Pr,gr,Cr,Nr){for(var Qr={},bn=Cr.queryRenderedSymbols(Pr),un=[],xn=0,zn=Object.keys(bn).map(Number);xn<zn.length;xn+=1)un.push(Nr[zn[xn]]);un.sort(ve);for(var Jn=function(){var Ca=qn[Hn],qa=Ca.featureIndex.lookupSymbolFeatures(bn[Ca.bucketInstanceId],yr,Ca.bucketIndex,Ca.sourceLayerIndex,gr.filter,gr.layers,gr.availableImages,ur);for(var ha in qa){var Ba=Qr[ha]=Qr[ha]||[],$a=qa[ha];$a.sort(function(Qa,Ia){var pa=Ca.featureSortOrder;if(pa){var po=pa.indexOf(Qa.featureIndex);return pa.indexOf(Ia.featureIndex)-po}return Ia.featureIndex-Qa.featureIndex});for(var Ua=0,Da=$a;Ua<Da.length;Ua+=1)Ba.push(Da[Ua])}},Hn=0,qn=un;Hn<qn.length;Hn+=1)Jn();var ua=function(Ca){Qr[Ca].forEach(function(qa){var ha=qa.feature,Ba=br[ur[Ca].source].getFeatureState(ha.layer["source-layer"],ha.id);ha.source=ha.layer.source,ha.layer["source-layer"]&&(ha.sourceLayer=ha.layer["source-layer"]),ha.state=Ba})};for(var za in Qr)ua(za);return Qr}(this._layers,this._serializedLayers,this.sourceCaches,Q,he,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Qt)},ee.prototype.querySourceFeatures=function(Q,he){he&&he.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",he.filter,null,he);var Se=this.sourceCaches[Q];return Se?function(Fe,We){for(var it=Fe.getRenderableIds().map(function(yr){return Fe.getTileByID(yr)}),dt=[],Ft={},Qt=0;Qt<it.length;Qt++){var nr=it[Qt],ur=nr.tileID.canonical.key;Ft[ur]||(Ft[ur]=!0,nr.querySourceFeatures(dt,We))}return dt}(Se,he):[]},ee.prototype.addSourceType=function(Q,he,Se){return ee.getSourceType(Q)?Se(new Error('A source type called "'+Q+'" already exists.')):(ee.setSourceType(Q,he),he.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:Q,url:he.workerSourceURL},Se):Se(null,null))},ee.prototype.getLight=function(){return this.light.getLight()},ee.prototype.setLight=function(Q,he){he===void 0&&(he={}),this._checkLoaded();var Se=this.light.getLight(),Fe=!1;for(var We in Q)if(!t.deepEqual(Q[We],Se[We])){Fe=!0;break}if(Fe){var it={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Q,he),this.light.updateTransitions(it)}},ee.prototype._validate=function(Q,he,Se,Fe,We){return We===void 0&&(We={}),(!We||We.validate!==!1)&&Ut(this,Q.call(t.validateStyle,t.extend({key:he,style:this.serialize(),value:Se,styleSpec:t.styleSpec},Fe)))},ee.prototype._remove=function(){for(var Q in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[Q].setEventedParent(null);for(var he in this.sourceCaches)this.sourceCaches[he].clearTiles(),this.sourceCaches[he].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},ee.prototype._clearSource=function(Q){this.sourceCaches[Q].clearTiles()},ee.prototype._reloadSource=function(Q){this.sourceCaches[Q].resume(),this.sourceCaches[Q].reload()},ee.prototype._updateSources=function(Q){for(var he in this.sourceCaches)this.sourceCaches[he].update(Q)},ee.prototype._generateCollisionBoxes=function(){for(var Q in this.sourceCaches)this._reloadSource(Q)},ee.prototype._updatePlacement=function(Q,he,Se,Fe,We){We===void 0&&(We=!1);for(var it=!1,dt=!1,Ft={},Qt=0,nr=this._order;Qt<nr.length;Qt+=1){var ur=this._layers[nr[Qt]];if(ur.type==="symbol"){if(!Ft[ur.source]){var yr=this.sourceCaches[ur.source];Ft[ur.source]=yr.getRenderableIds(!0).map(function(Nr){return yr.getTileByID(Nr)}).sort(function(Nr,Qr){return Qr.tileID.overscaledZ-Nr.tileID.overscaledZ||(Nr.tileID.isLessThan(Qr.tileID)?-1:1)})}var br=this.crossTileSymbolIndex.addLayer(ur,Ft[ur.source],Q.center.lng);it=it||br}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((We=We||this._layerOrderChanged||Se===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),Q.zoom))&&(this.pauseablePlacement=new Sn(Q,this._order,We,he,Se,Fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ft),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),dt=!0),it&&this.pauseablePlacement.placement.setStale()),dt||it)for(var Pr=0,gr=this._order;Pr<gr.length;Pr+=1){var Cr=this._layers[gr[Pr]];Cr.type==="symbol"&&this.placement.updateLayerOpacities(Cr,Ft[Cr.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},ee.prototype._releaseSymbolFadeTiles=function(){for(var Q in this.sourceCaches)this.sourceCaches[Q].releaseSymbolFadeTiles()},ee.prototype.getImages=function(Q,he,Se){this.imageManager.getImages(he.icons,Se),this._updateTilesForChangedImages();var Fe=this.sourceCaches[he.source];Fe&&Fe.setDependencies(he.tileID.key,he.type,he.icons)},ee.prototype.getGlyphs=function(Q,he,Se){this.glyphManager.getGlyphs(he.stacks,Se)},ee.prototype.getResource=function(Q,he,Se){return t.makeRequest(he,Se)},ee}(t.Evented);Ur.getSourceType=function(K){return q[K]},Ur.setSourceType=function(K,ee){q[K]=ee},Ur.registerForPluginStateChange=t.registerForPluginStateChange;var Gr=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),$r=ki(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Hr=ki(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),fr=ki(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Tr=ki(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),hr=ki("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Mn=ki(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Cn=ki(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),jn=ki("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),sa=ki("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Un=ki("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ea=ki(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Ga=ki(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ai=ki(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ma=ki(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Va=ki(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),No=ki(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),co=ki(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),eu=ki(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Bo=ki(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Qu=ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),tu=ki(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ru=ki(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),uf=ki(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ku=ki(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ji=ki(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),zl=ki(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ki(K,ee){var Q=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,he={};return{fragmentSource:K=K.replace(Q,function(Se,Fe,We,it,dt){return he[dt]=!0,Fe==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
varying `+We+" "+it+" "+dt+`;
#else
uniform `+We+" "+it+" u_"+dt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+dt+`
    `+We+" "+it+" "+dt+" = u_"+dt+`;
#endif
`}),vertexSource:ee=ee.replace(Q,function(Se,Fe,We,it,dt){var Ft=it==="float"?"vec2":"vec4",Qt=dt.match(/color/)?"color":Ft;return he[dt]?Fe==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
uniform lowp float u_`+dt+`_t;
attribute `+We+" "+Ft+" a_"+dt+`;
varying `+We+" "+it+" "+dt+`;
#else
uniform `+We+" "+it+" u_"+dt+`;
#endif
`:Qt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+dt+" = a_"+dt+`;
#else
    `+We+" "+it+" "+dt+" = u_"+dt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+dt+" = unpack_mix_"+Qt+"(a_"+dt+", u_"+dt+`_t);
#else
    `+We+" "+it+" "+dt+" = u_"+dt+`;
#endif
`:Fe==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
uniform lowp float u_`+dt+`_t;
attribute `+We+" "+Ft+" a_"+dt+`;
#else
uniform `+We+" "+it+" u_"+dt+`;
#endif
`:Qt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+We+" "+it+" "+dt+" = a_"+dt+`;
#else
    `+We+" "+it+" "+dt+" = u_"+dt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+We+" "+it+" "+dt+" = unpack_mix_"+Qt+"(a_"+dt+", u_"+dt+`_t);
#else
    `+We+" "+it+" "+dt+" = u_"+dt+`;
#endif
`})}}var sp=Object.freeze({__proto__:null,prelude:$r,background:Hr,backgroundPattern:fr,circle:Tr,clippingMask:hr,heatmap:Mn,heatmapTexture:Cn,collisionBox:jn,collisionCircle:sa,debug:Un,fill:Ea,fillOutline:Ga,fillOutlinePattern:ai,fillPattern:Ma,fillExtrusion:Va,fillExtrusionPattern:No,hillshadePrepare:co,hillshade:eu,line:Bo,lineGradient:Qu,linePattern:tu,lineSDF:ru,raster:uf,symbolIcon:ku,symbolSDF:Ji,symbolTextAndIcon:zl}),nu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};nu.prototype.bind=function(K,ee,Q,he,Se,Fe,We,it){this.context=K;for(var dt=this.boundPaintVertexBuffers.length!==he.length,Ft=0;!dt&&Ft<he.length;Ft++)this.boundPaintVertexBuffers[Ft]!==he[Ft]&&(dt=!0);K.extVertexArrayObject&&this.vao&&this.boundProgram===ee&&this.boundLayoutVertexBuffer===Q&&!dt&&this.boundIndexBuffer===Se&&this.boundVertexOffset===Fe&&this.boundDynamicVertexBuffer===We&&this.boundDynamicVertexBuffer2===it?(K.bindVertexArrayOES.set(this.vao),We&&We.bind(),Se&&Se.dynamicDraw&&Se.bind(),it&&it.bind()):this.freshBind(ee,Q,he,Se,Fe,We,it)},nu.prototype.freshBind=function(K,ee,Q,he,Se,Fe,We){var it,dt=K.numAttributes,Ft=this.context,Qt=Ft.gl;if(Ft.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ft.extVertexArrayObject.createVertexArrayOES(),Ft.bindVertexArrayOES.set(this.vao),it=0,this.boundProgram=K,this.boundLayoutVertexBuffer=ee,this.boundPaintVertexBuffers=Q,this.boundIndexBuffer=he,this.boundVertexOffset=Se,this.boundDynamicVertexBuffer=Fe,this.boundDynamicVertexBuffer2=We;else{it=Ft.currentNumAttributes||0;for(var nr=dt;nr<it;nr++)Qt.disableVertexAttribArray(nr)}ee.enableAttributes(Qt,K);for(var ur=0,yr=Q;ur<yr.length;ur+=1)yr[ur].enableAttributes(Qt,K);Fe&&Fe.enableAttributes(Qt,K),We&&We.enableAttributes(Qt,K),ee.bind(),ee.setVertexAttribPointers(Qt,K,Se);for(var br=0,Pr=Q;br<Pr.length;br+=1){var gr=Pr[br];gr.bind(),gr.setVertexAttribPointers(Qt,K,Se)}Fe&&(Fe.bind(),Fe.setVertexAttribPointers(Qt,K,Se)),he&&he.bind(),We&&(We.bind(),We.setVertexAttribPointers(Qt,K,Se)),Ft.currentNumAttributes=dt},nu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var bh=function(K,ee,Q,he,Se){var Fe=K.gl;this.program=Fe.createProgram();var We=Q?Q.defines():[];Se&&We.push("#define OVERDRAW_INSPECTOR;");var it=We.concat($r.fragmentSource,ee.fragmentSource).join(`
`),dt=We.concat($r.vertexSource,ee.vertexSource).join(`
`),Ft=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost())this.failedToCreate=!0;else{Fe.shaderSource(Ft,it),Fe.compileShader(Ft),Fe.attachShader(this.program,Ft);var Qt=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost())this.failedToCreate=!0;else{Fe.shaderSource(Qt,dt),Fe.compileShader(Qt),Fe.attachShader(this.program,Qt);for(var nr=Q?Q.layoutAttributes:[],ur=0;ur<nr.length;ur++)Fe.bindAttribLocation(this.program,ur,nr[ur].name);Fe.linkProgram(this.program),Fe.deleteShader(Qt),Fe.deleteShader(Ft),this.numAttributes=Fe.getProgramParameter(this.program,Fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var yr={},br=0;br<this.numAttributes;br++){var Pr=Fe.getActiveAttrib(this.program,br);Pr&&(this.attributes[Pr.name]=Fe.getAttribLocation(this.program,Pr.name))}for(var gr=Fe.getProgramParameter(this.program,Fe.ACTIVE_UNIFORMS),Cr=0;Cr<gr;Cr++){var Nr=Fe.getActiveUniform(this.program,Cr);Nr&&(yr[Nr.name]=Fe.getUniformLocation(this.program,Nr.name))}this.fixedUniforms=he(K,yr),this.binderUniforms=Q?Q.getUniforms(K,yr):[]}}};function au(K,ee,Q){var he=1/ln(Q,1,ee.transform.tileZoom),Se=Math.pow(2,Q.tileID.overscaledZ),Fe=Q.tileSize*Math.pow(2,ee.transform.tileZoom)/Se,We=Fe*(Q.tileID.canonical.x+Q.tileID.wrap*Se),it=Fe*Q.tileID.canonical.y;return{u_image:0,u_texsize:Q.imageAtlasTexture.size,u_scale:[he,K.fromScale,K.toScale],u_fade:K.t,u_pixel_coord_upper:[We>>16,it>>16],u_pixel_coord_lower:[65535&We,65535&it]}}bh.prototype.draw=function(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt,nr,ur,yr,br,Pr){var gr,Cr=K.gl;if(!this.failedToCreate){for(var Nr in K.program.set(this.program),K.setDepthMode(Q),K.setStencilMode(he),K.setColorMode(Se),K.setCullFace(Fe),this.fixedUniforms)this.fixedUniforms[Nr].set(We[Nr]);yr&&yr.setUniforms(K,this.binderUniforms,nr,{zoom:ur});for(var Qr=(gr={},gr[Cr.LINES]=2,gr[Cr.TRIANGLES]=3,gr[Cr.LINE_STRIP]=1,gr)[ee],bn=0,un=Qt.get();bn<un.length;bn+=1){var xn=un[bn],zn=xn.vaos||(xn.vaos={});(zn[it]||(zn[it]=new nu)).bind(K,this,dt,yr?yr.getPaintVertexBuffers():[],Ft,xn.vertexOffset,br,Pr),Cr.drawElements(ee,xn.primitiveLength*Qr,Cr.UNSIGNED_SHORT,xn.primitiveOffset*Qr*2)}}};var Fl=function(K,ee,Q,he){var Se=ee.style.light,Fe=Se.properties.get("position"),We=[Fe.x,Fe.y,Fe.z],it=t.create$1();Se.properties.get("anchor")==="viewport"&&t.fromRotation(it,-ee.transform.angle),t.transformMat3(We,We,it);var dt=Se.properties.get("color");return{u_matrix:K,u_lightpos:We,u_lightintensity:Se.properties.get("intensity"),u_lightcolor:[dt.r,dt.g,dt.b],u_vertical_gradient:+Q,u_opacity:he}},Su=function(K,ee,Q,he,Se,Fe,We){return t.extend(Fl(K,ee,Q,he),au(Fe,ee,We),{u_height_factor:-Math.pow(2,Se.overscaledZ)/We.tileSize/8})},iu=function(K){return{u_matrix:K}},Ss=function(K,ee,Q,he){return t.extend(iu(K),au(Q,ee,he))},ds=function(K,ee){return{u_matrix:K,u_world:ee}},Cu=function(K,ee,Q,he,Se){return t.extend(Ss(K,ee,Q,he),{u_world:Se})},ou=function(K,ee,Q,he){var Se,Fe,We=K.transform;if(he.paint.get("circle-pitch-alignment")==="map"){var it=ln(Q,1,We.zoom);Se=!0,Fe=[it,it]}else Se=!1,Fe=We.pixelsToGLUnits;return{u_camera_to_center_distance:We.cameraToCenterDistance,u_scale_with_map:+(he.paint.get("circle-pitch-scale")==="map"),u_matrix:K.translatePosMatrix(ee.posMatrix,Q,he.paint.get("circle-translate"),he.paint.get("circle-translate-anchor")),u_pitch_with_map:+Se,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Fe}},xl=function(K,ee,Q){var he=ln(Q,1,ee.zoom),Se=Math.pow(2,ee.zoom-Q.tileID.overscaledZ),Fe=Q.tileID.overscaleFactor();return{u_matrix:K,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pixels_to_tile_units:he,u_extrude_scale:[ee.pixelsToGLUnits[0]/(he*Se),ee.pixelsToGLUnits[1]/(he*Se)],u_overscale_factor:Fe}},Hs=function(K,ee,Q){return{u_matrix:K,u_inv_matrix:ee,u_camera_to_center_distance:Q.cameraToCenterDistance,u_viewport_size:[Q.width,Q.height]}},Sc=function(K,ee,Q){return Q===void 0&&(Q=1),{u_matrix:K,u_color:ee,u_overlay:0,u_overlay_scale:Q}},qu=function(K){return{u_matrix:K}},xi=function(K,ee,Q,he){return{u_matrix:K,u_extrude_scale:ln(ee,1,Q),u_intensity:he}},bl=function(K,ee,Q){var he=K.transform;return{u_matrix:Gs(K,ee,Q),u_ratio:1/ln(ee,1,he.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/he.pixelsToGLUnits[0],1/he.pixelsToGLUnits[1]]}},Gf=function(K,ee,Q){return t.extend(bl(K,ee,Q),{u_image:0})},Ol=function(K,ee,Q,he){var Se=K.transform,Fe=Nl(ee,Se);return{u_matrix:Gs(K,ee,Q),u_texsize:ee.imageAtlasTexture.size,u_ratio:1/ln(ee,1,Se.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Fe,he.fromScale,he.toScale],u_fade:he.t,u_units_to_pixels:[1/Se.pixelsToGLUnits[0],1/Se.pixelsToGLUnits[1]]}},os=function(K,ee,Q,he,Se){var Fe=K.lineAtlas,We=Nl(ee,K.transform),it=Q.layout.get("line-cap")==="round",dt=Fe.getDash(he.from,it),Ft=Fe.getDash(he.to,it),Qt=dt.width*Se.fromScale,nr=Ft.width*Se.toScale;return t.extend(bl(K,ee,Q),{u_patternscale_a:[We/Qt,-dt.height/2],u_patternscale_b:[We/nr,-Ft.height/2],u_sdfgamma:Fe.width/(256*Math.min(Qt,nr)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:dt.y,u_tex_y_b:Ft.y,u_mix:Se.t})};function Nl(K,ee){return 1/ln(K,1,ee.tileZoom)}function Gs(K,ee,Q){return K.translatePosMatrix(ee.tileID.posMatrix,ee,Q.paint.get("line-translate"),Q.paint.get("line-translate-anchor"))}var Bl=function(K,ee,Q,he,Se){return{u_matrix:K,u_tl_parent:ee,u_scale_parent:Q,u_buffer_scale:1,u_fade_t:he.mix,u_opacity:he.opacity*Se.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Se.paint.get("raster-brightness-min"),u_brightness_high:Se.paint.get("raster-brightness-max"),u_saturation_factor:(We=Se.paint.get("raster-saturation"),We>0?1-1/(1.001-We):-We),u_contrast_factor:(Fe=Se.paint.get("raster-contrast"),Fe>0?1/(1-Fe):1+Fe),u_spin_weights:js(Se.paint.get("raster-hue-rotate"))};var Fe,We};function js(K){K*=Math.PI/180;var ee=Math.sin(K),Q=Math.cos(K);return[(2*Q+1)/3,(-Math.sqrt(3)*ee-Q+1)/3,(Math.sqrt(3)*ee-Q+1)/3]}var Cs,Es=function(K,ee,Q,he,Se,Fe,We,it,dt,Ft){var Qt=Se.transform;return{u_is_size_zoom_constant:+(K==="constant"||K==="source"),u_is_size_feature_constant:+(K==="constant"||K==="camera"),u_size_t:ee?ee.uSizeT:0,u_size:ee?ee.uSize:0,u_camera_to_center_distance:Qt.cameraToCenterDistance,u_pitch:Qt.pitch/360*2*Math.PI,u_rotate_symbol:+Q,u_aspect_ratio:Qt.width/Qt.height,u_fade_change:Se.options.fadeDuration?Se.symbolFadeChange:1,u_matrix:Fe,u_label_plane_matrix:We,u_coord_matrix:it,u_is_text:+dt,u_pitch_with_map:+he,u_texsize:Ft,u_texture:0}},_l=function(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt){var nr=Se.transform;return t.extend(Es(K,ee,Q,he,Se,Fe,We,it,dt,Ft),{u_gamma_scale:he?Math.cos(nr._pitch)*nr.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Qt})},wl=function(K,ee,Q,he,Se,Fe,We,it,dt,Ft){return t.extend(_l(K,ee,Q,he,Se,Fe,We,it,!0,dt,!0),{u_texsize_icon:Ft,u_texture_icon:1})},su=function(K,ee,Q){return{u_matrix:K,u_opacity:ee,u_color:Q}},bo=function(K,ee,Q,he,Se,Fe){return t.extend(function(We,it,dt,Ft){var Qt=dt.imageManager.getPattern(We.from.toString()),nr=dt.imageManager.getPattern(We.to.toString()),ur=dt.imageManager.getPixelSize(),yr=ur.width,br=ur.height,Pr=Math.pow(2,Ft.tileID.overscaledZ),gr=Ft.tileSize*Math.pow(2,dt.transform.tileZoom)/Pr,Cr=gr*(Ft.tileID.canonical.x+Ft.tileID.wrap*Pr),Nr=gr*Ft.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Qt.tl,u_pattern_br_a:Qt.br,u_pattern_tl_b:nr.tl,u_pattern_br_b:nr.br,u_texsize:[yr,br],u_mix:it.t,u_pattern_size_a:Qt.displaySize,u_pattern_size_b:nr.displaySize,u_scale_a:it.fromScale,u_scale_b:it.toScale,u_tile_units_to_pixels:1/ln(Ft,1,dt.transform.tileZoom),u_pixel_coord_upper:[Cr>>16,Nr>>16],u_pixel_coord_lower:[65535&Cr,65535&Nr]}}(he,Fe,Q,Se),{u_matrix:K,u_opacity:ee})},Ws={fillExtrusion:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_lightpos:new t.Uniform3f(K,ee.u_lightpos),u_lightintensity:new t.Uniform1f(K,ee.u_lightintensity),u_lightcolor:new t.Uniform3f(K,ee.u_lightcolor),u_vertical_gradient:new t.Uniform1f(K,ee.u_vertical_gradient),u_opacity:new t.Uniform1f(K,ee.u_opacity)}},fillExtrusionPattern:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_lightpos:new t.Uniform3f(K,ee.u_lightpos),u_lightintensity:new t.Uniform1f(K,ee.u_lightintensity),u_lightcolor:new t.Uniform3f(K,ee.u_lightcolor),u_vertical_gradient:new t.Uniform1f(K,ee.u_vertical_gradient),u_height_factor:new t.Uniform1f(K,ee.u_height_factor),u_image:new t.Uniform1i(K,ee.u_image),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_pixel_coord_upper:new t.Uniform2f(K,ee.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(K,ee.u_pixel_coord_lower),u_scale:new t.Uniform3f(K,ee.u_scale),u_fade:new t.Uniform1f(K,ee.u_fade),u_opacity:new t.Uniform1f(K,ee.u_opacity)}},fill:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix)}},fillPattern:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_image:new t.Uniform1i(K,ee.u_image),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_pixel_coord_upper:new t.Uniform2f(K,ee.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(K,ee.u_pixel_coord_lower),u_scale:new t.Uniform3f(K,ee.u_scale),u_fade:new t.Uniform1f(K,ee.u_fade)}},fillOutline:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_world:new t.Uniform2f(K,ee.u_world)}},fillOutlinePattern:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_world:new t.Uniform2f(K,ee.u_world),u_image:new t.Uniform1i(K,ee.u_image),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_pixel_coord_upper:new t.Uniform2f(K,ee.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(K,ee.u_pixel_coord_lower),u_scale:new t.Uniform3f(K,ee.u_scale),u_fade:new t.Uniform1f(K,ee.u_fade)}},circle:function(K,ee){return{u_camera_to_center_distance:new t.Uniform1f(K,ee.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(K,ee.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(K,ee.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(K,ee.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(K,ee.u_matrix)}},collisionBox:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_camera_to_center_distance:new t.Uniform1f(K,ee.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(K,ee.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(K,ee.u_extrude_scale),u_overscale_factor:new t.Uniform1f(K,ee.u_overscale_factor)}},collisionCircle:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_inv_matrix:new t.UniformMatrix4f(K,ee.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(K,ee.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(K,ee.u_viewport_size)}},debug:function(K,ee){return{u_color:new t.UniformColor(K,ee.u_color),u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_overlay:new t.Uniform1i(K,ee.u_overlay),u_overlay_scale:new t.Uniform1f(K,ee.u_overlay_scale)}},clippingMask:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix)}},heatmap:function(K,ee){return{u_extrude_scale:new t.Uniform1f(K,ee.u_extrude_scale),u_intensity:new t.Uniform1f(K,ee.u_intensity),u_matrix:new t.UniformMatrix4f(K,ee.u_matrix)}},heatmapTexture:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_world:new t.Uniform2f(K,ee.u_world),u_image:new t.Uniform1i(K,ee.u_image),u_color_ramp:new t.Uniform1i(K,ee.u_color_ramp),u_opacity:new t.Uniform1f(K,ee.u_opacity)}},hillshade:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_image:new t.Uniform1i(K,ee.u_image),u_latrange:new t.Uniform2f(K,ee.u_latrange),u_light:new t.Uniform2f(K,ee.u_light),u_shadow:new t.UniformColor(K,ee.u_shadow),u_highlight:new t.UniformColor(K,ee.u_highlight),u_accent:new t.UniformColor(K,ee.u_accent)}},hillshadePrepare:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_image:new t.Uniform1i(K,ee.u_image),u_dimension:new t.Uniform2f(K,ee.u_dimension),u_zoom:new t.Uniform1f(K,ee.u_zoom),u_maxzoom:new t.Uniform1f(K,ee.u_maxzoom),u_unpack:new t.Uniform4f(K,ee.u_unpack)}},line:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_ratio:new t.Uniform1f(K,ee.u_ratio),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(K,ee.u_units_to_pixels)}},lineGradient:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_ratio:new t.Uniform1f(K,ee.u_ratio),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(K,ee.u_units_to_pixels),u_image:new t.Uniform1i(K,ee.u_image)}},linePattern:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_ratio:new t.Uniform1f(K,ee.u_ratio),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_image:new t.Uniform1i(K,ee.u_image),u_units_to_pixels:new t.Uniform2f(K,ee.u_units_to_pixels),u_scale:new t.Uniform3f(K,ee.u_scale),u_fade:new t.Uniform1f(K,ee.u_fade)}},lineSDF:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_ratio:new t.Uniform1f(K,ee.u_ratio),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(K,ee.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(K,ee.u_patternscale_a),u_patternscale_b:new t.Uniform2f(K,ee.u_patternscale_b),u_sdfgamma:new t.Uniform1f(K,ee.u_sdfgamma),u_image:new t.Uniform1i(K,ee.u_image),u_tex_y_a:new t.Uniform1f(K,ee.u_tex_y_a),u_tex_y_b:new t.Uniform1f(K,ee.u_tex_y_b),u_mix:new t.Uniform1f(K,ee.u_mix)}},raster:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_tl_parent:new t.Uniform2f(K,ee.u_tl_parent),u_scale_parent:new t.Uniform1f(K,ee.u_scale_parent),u_buffer_scale:new t.Uniform1f(K,ee.u_buffer_scale),u_fade_t:new t.Uniform1f(K,ee.u_fade_t),u_opacity:new t.Uniform1f(K,ee.u_opacity),u_image0:new t.Uniform1i(K,ee.u_image0),u_image1:new t.Uniform1i(K,ee.u_image1),u_brightness_low:new t.Uniform1f(K,ee.u_brightness_low),u_brightness_high:new t.Uniform1f(K,ee.u_brightness_high),u_saturation_factor:new t.Uniform1f(K,ee.u_saturation_factor),u_contrast_factor:new t.Uniform1f(K,ee.u_contrast_factor),u_spin_weights:new t.Uniform3f(K,ee.u_spin_weights)}},symbolIcon:function(K,ee){return{u_is_size_zoom_constant:new t.Uniform1i(K,ee.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(K,ee.u_is_size_feature_constant),u_size_t:new t.Uniform1f(K,ee.u_size_t),u_size:new t.Uniform1f(K,ee.u_size),u_camera_to_center_distance:new t.Uniform1f(K,ee.u_camera_to_center_distance),u_pitch:new t.Uniform1f(K,ee.u_pitch),u_rotate_symbol:new t.Uniform1i(K,ee.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(K,ee.u_aspect_ratio),u_fade_change:new t.Uniform1f(K,ee.u_fade_change),u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(K,ee.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(K,ee.u_coord_matrix),u_is_text:new t.Uniform1i(K,ee.u_is_text),u_pitch_with_map:new t.Uniform1i(K,ee.u_pitch_with_map),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_texture:new t.Uniform1i(K,ee.u_texture)}},symbolSDF:function(K,ee){return{u_is_size_zoom_constant:new t.Uniform1i(K,ee.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(K,ee.u_is_size_feature_constant),u_size_t:new t.Uniform1f(K,ee.u_size_t),u_size:new t.Uniform1f(K,ee.u_size),u_camera_to_center_distance:new t.Uniform1f(K,ee.u_camera_to_center_distance),u_pitch:new t.Uniform1f(K,ee.u_pitch),u_rotate_symbol:new t.Uniform1i(K,ee.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(K,ee.u_aspect_ratio),u_fade_change:new t.Uniform1f(K,ee.u_fade_change),u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(K,ee.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(K,ee.u_coord_matrix),u_is_text:new t.Uniform1i(K,ee.u_is_text),u_pitch_with_map:new t.Uniform1i(K,ee.u_pitch_with_map),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_texture:new t.Uniform1i(K,ee.u_texture),u_gamma_scale:new t.Uniform1f(K,ee.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(K,ee.u_is_halo)}},symbolTextAndIcon:function(K,ee){return{u_is_size_zoom_constant:new t.Uniform1i(K,ee.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(K,ee.u_is_size_feature_constant),u_size_t:new t.Uniform1f(K,ee.u_size_t),u_size:new t.Uniform1f(K,ee.u_size),u_camera_to_center_distance:new t.Uniform1f(K,ee.u_camera_to_center_distance),u_pitch:new t.Uniform1f(K,ee.u_pitch),u_rotate_symbol:new t.Uniform1i(K,ee.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(K,ee.u_aspect_ratio),u_fade_change:new t.Uniform1f(K,ee.u_fade_change),u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(K,ee.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(K,ee.u_coord_matrix),u_is_text:new t.Uniform1i(K,ee.u_is_text),u_pitch_with_map:new t.Uniform1i(K,ee.u_pitch_with_map),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_texsize_icon:new t.Uniform2f(K,ee.u_texsize_icon),u_texture:new t.Uniform1i(K,ee.u_texture),u_texture_icon:new t.Uniform1i(K,ee.u_texture_icon),u_gamma_scale:new t.Uniform1f(K,ee.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(K,ee.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(K,ee.u_is_halo)}},background:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_opacity:new t.Uniform1f(K,ee.u_opacity),u_color:new t.UniformColor(K,ee.u_color)}},backgroundPattern:function(K,ee){return{u_matrix:new t.UniformMatrix4f(K,ee.u_matrix),u_opacity:new t.Uniform1f(K,ee.u_opacity),u_image:new t.Uniform1i(K,ee.u_image),u_pattern_tl_a:new t.Uniform2f(K,ee.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(K,ee.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(K,ee.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(K,ee.u_pattern_br_b),u_texsize:new t.Uniform2f(K,ee.u_texsize),u_mix:new t.Uniform1f(K,ee.u_mix),u_pattern_size_a:new t.Uniform2f(K,ee.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(K,ee.u_pattern_size_b),u_scale_a:new t.Uniform1f(K,ee.u_scale_a),u_scale_b:new t.Uniform1f(K,ee.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(K,ee.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(K,ee.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(K,ee.u_tile_units_to_pixels)}}};function ec(K,ee,Q,he,Se,Fe,We){for(var it=K.context,dt=it.gl,Ft=K.useProgram("collisionBox"),Qt=[],nr=0,ur=0,yr=0;yr<he.length;yr++){var br=he[yr],Pr=ee.getTile(br),gr=Pr.getBucket(Q);if(gr){var Cr=br.posMatrix;Se[0]===0&&Se[1]===0||(Cr=K.translatePosMatrix(br.posMatrix,Pr,Se,Fe));var Nr=We?gr.textCollisionBox:gr.iconCollisionBox,Qr=gr.collisionCircleArray;if(Qr.length>0){var bn=t.create(),un=Cr;t.mul(bn,gr.placementInvProjMatrix,K.transform.glCoordMatrix),t.mul(bn,bn,gr.placementViewportMatrix),Qt.push({circleArray:Qr,circleOffset:ur,transform:un,invTransform:bn}),ur=nr+=Qr.length/4}Nr&&Ft.draw(it,dt.LINES,Qe.disabled,Me.disabled,K.colorModeForRenderPass(),He.disabled,xl(Cr,K.transform,Pr),Q.id,Nr.layoutVertexBuffer,Nr.indexBuffer,Nr.segments,null,K.transform.zoom,null,null,Nr.collisionVertexBuffer)}}if(We&&Qt.length){var xn=K.useProgram("collisionCircle"),zn=new t.StructArrayLayout2f1f2i16;zn.resize(4*nr),zn._trim();for(var Jn=0,Hn=0,qn=Qt;Hn<qn.length;Hn+=1)for(var ua=qn[Hn],za=0;za<ua.circleArray.length/4;za++){var Ca=4*za,qa=ua.circleArray[Ca+0],ha=ua.circleArray[Ca+1],Ba=ua.circleArray[Ca+2],$a=ua.circleArray[Ca+3];zn.emplace(Jn++,qa,ha,Ba,$a,0),zn.emplace(Jn++,qa,ha,Ba,$a,1),zn.emplace(Jn++,qa,ha,Ba,$a,2),zn.emplace(Jn++,qa,ha,Ba,$a,3)}(!Cs||Cs.length<2*nr)&&(Cs=function(Qi){var Pi=2*Qi,Ai=new t.StructArrayLayout3ui6;Ai.resize(Pi),Ai._trim();for(var qi=0;qi<Pi;qi++){var Mi=6*qi;Ai.uint16[Mi+0]=4*qi+0,Ai.uint16[Mi+1]=4*qi+1,Ai.uint16[Mi+2]=4*qi+2,Ai.uint16[Mi+3]=4*qi+2,Ai.uint16[Mi+4]=4*qi+3,Ai.uint16[Mi+5]=4*qi+0}return Ai}(nr));for(var Ua=it.createIndexBuffer(Cs,!0),Da=it.createVertexBuffer(zn,t.collisionCircleLayout.members,!0),Qa=0,Ia=Qt;Qa<Ia.length;Qa+=1){var pa=Ia[Qa],po=Hs(pa.transform,pa.invTransform,K.transform);xn.draw(it,dt.TRIANGLES,Qe.disabled,Me.disabled,K.colorModeForRenderPass(),He.disabled,po,Q.id,Da,Ua,t.SegmentVector.simpleSegment(0,2*pa.circleOffset,pa.circleArray.length,pa.circleArray.length/2),null,K.transform.zoom,null,null,null)}Da.destroy(),Ua.destroy()}}var cf=t.identity(new Float32Array(16));function jf(K,ee,Q,he,Se,Fe){var We=t.getAnchorAlignment(K),it=-(We.horizontalAlign-.5)*ee,dt=-(We.verticalAlign-.5)*Q,Ft=t.evaluateVariableOffset(K,he);return new t.Point((it/Se+Ft[0])*Fe,(dt/Se+Ft[1])*Fe)}function Ys(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt){var nr=K.text.placedSymbolArray,ur=K.text.dynamicLayoutVertexArray,yr=K.icon.dynamicLayoutVertexArray,br={};ur.clear();for(var Pr=0;Pr<nr.length;Pr++){var gr=nr.get(Pr),Cr=gr.hidden||!gr.crossTileID||K.allowVerticalPlacement&&!gr.placedOrientation?null:he[gr.crossTileID];if(Cr){var Nr=new t.Point(gr.anchorX,gr.anchorY),Qr=kr(Nr,Q?it:We),bn=Sr(Fe.cameraToCenterDistance,Qr.signedDistanceFromCamera),un=Se.evaluateSizeForFeature(K.textSizeData,Ft,gr)*bn/t.ONE_EM;Q&&(un*=K.tilePixelRatio/dt);for(var xn=jf(Cr.anchor,Cr.width,Cr.height,Cr.textOffset,Cr.textBoxScale,un),zn=Q?kr(Nr.add(xn),We).point:Qr.point.add(ee?xn.rotate(-Fe.angle):xn),Jn=K.allowVerticalPlacement&&gr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Hn=0;Hn<gr.numGlyphs;Hn++)t.addDynamicAttributes(ur,zn,Jn);Qt&&gr.associatedIconIndex>=0&&(br[gr.associatedIconIndex]={shiftedAnchor:zn,angle:Jn})}else qr(gr.numGlyphs,ur)}if(Qt){yr.clear();for(var qn=K.icon.placedSymbolArray,ua=0;ua<qn.length;ua++){var za=qn.get(ua);if(za.hidden)qr(za.numGlyphs,yr);else{var Ca=br[ua];if(Ca)for(var qa=0;qa<za.numGlyphs;qa++)t.addDynamicAttributes(yr,Ca.shiftedAnchor,Ca.angle);else qr(za.numGlyphs,yr)}}K.icon.dynamicLayoutVertexBuffer.updateData(yr)}K.text.dynamicLayoutVertexBuffer.updateData(ur)}function Eu(K,ee,Q){return Q.iconsInText&&ee?"symbolTextAndIcon":K?"symbolSDF":"symbolIcon"}function Lu(K,ee,Q,he,Se,Fe,We,it,dt,Ft,Qt,nr){for(var ur=K.context,yr=ur.gl,br=K.transform,Pr=it==="map",gr=dt==="map",Cr=Pr&&Q.layout.get("symbol-placement")!=="point",Nr=Pr&&!gr&&!Cr,Qr=Q.layout.get("symbol-sort-key").constantOr(1)!==void 0,bn=K.depthModeForSublayer(0,Qe.ReadOnly),un=Q.layout.get("text-variable-anchor"),xn=[],zn=0,Jn=he;zn<Jn.length;zn+=1){var Hn=Jn[zn],qn=ee.getTile(Hn),ua=qn.getBucket(Q);if(ua){var za=Se?ua.text:ua.icon;if(za&&za.segments.get().length){var Ca=za.programConfigurations.get(Q.id),qa=Se||ua.sdfIcons,ha=Se?ua.textSizeData:ua.iconSizeData,Ba=gr||br.pitch!==0,$a=K.useProgram(Eu(qa,Se,ua),Ca),Ua=t.evaluateSizeForZoom(ha,br.zoom),Da=void 0,Qa=[0,0],Ia=void 0,pa=void 0,po=null,Qi=void 0;if(Se)Ia=qn.glyphAtlasTexture,pa=yr.LINEAR,Da=qn.glyphAtlasTexture.size,ua.iconsInText&&(Qa=qn.imageAtlasTexture.size,po=qn.imageAtlasTexture,Qi=Ba||K.options.rotating||K.options.zooming||ha.kind==="composite"||ha.kind==="camera"?yr.LINEAR:yr.NEAREST);else{var Pi=Q.layout.get("icon-size").constantOr(0)!==1||ua.iconsNeedLinear;Ia=qn.imageAtlasTexture,pa=qa||K.options.rotating||K.options.zooming||Pi||Ba?yr.LINEAR:yr.NEAREST,Da=qn.imageAtlasTexture.size}var Ai=ln(qn,1,K.transform.zoom),qi=cr(Hn.posMatrix,gr,Pr,K.transform,Ai),Mi=Or(Hn.posMatrix,gr,Pr,K.transform,Ai),ul=un&&ua.hasTextData(),vo=Q.layout.get("icon-text-fit")!=="none"&&ul&&ua.hasIconData();Cr&&Rn(ua,Hn.posMatrix,K,Se,qi,Mi,gr,Ft);var Js=K.translatePosMatrix(Hn.posMatrix,qn,Fe,We),cs=Cr||Se&&un||vo?cf:qi,$s=K.translatePosMatrix(Mi,qn,Fe,We,!0),El=qa&&Q.paint.get(Se?"text-halo-width":"icon-halo-width").constantOr(1)!==0,zu={program:$a,buffers:za,uniformValues:qa?ua.iconsInText?wl(ha.kind,Ua,Nr,gr,K,Js,cs,$s,Da,Qa):_l(ha.kind,Ua,Nr,gr,K,Js,cs,$s,Se,Da,!0):Es(ha.kind,Ua,Nr,gr,K,Js,cs,$s,Se,Da),atlasTexture:Ia,atlasTextureIcon:po,atlasInterpolation:pa,atlasInterpolationIcon:Qi,isSDF:qa,hasHalo:El};if(Qr)for(var Fu=0,xs=za.segments.get();Fu<xs.length;Fu+=1){var Ll=xs[Fu];xn.push({segments:new t.SegmentVector([Ll]),sortKey:Ll.sortKey,state:zu})}else xn.push({segments:za.segments,sortKey:0,state:zu})}}}Qr&&xn.sort(function(zc,fo){return zc.sortKey-fo.sortKey});for(var mf=0,Ou=xn;mf<Ou.length;mf+=1){var Qs=Ou[mf],mo=Qs.state;if(ur.activeTexture.set(yr.TEXTURE0),mo.atlasTexture.bind(mo.atlasInterpolation,yr.CLAMP_TO_EDGE),mo.atlasTextureIcon&&(ur.activeTexture.set(yr.TEXTURE1),mo.atlasTextureIcon&&mo.atlasTextureIcon.bind(mo.atlasInterpolationIcon,yr.CLAMP_TO_EDGE)),mo.isSDF){var Ic=mo.uniformValues;mo.hasHalo&&(Ic.u_is_halo=1,_h(mo.buffers,Qs.segments,Q,K,mo.program,bn,Qt,nr,Ic)),Ic.u_is_halo=0}_h(mo.buffers,Qs.segments,Q,K,mo.program,bn,Qt,nr,mo.uniformValues)}}function _h(K,ee,Q,he,Se,Fe,We,it,dt){var Ft=he.context;Se.draw(Ft,Ft.gl.TRIANGLES,Fe,We,it,He.disabled,dt,Q.id,K.layoutVertexBuffer,K.indexBuffer,ee,Q.paint,he.transform.zoom,K.programConfigurations.get(Q.id),K.dynamicLayoutVertexBuffer,K.opacityVertexBuffer)}function Cc(K,ee,Q,he,Se,Fe,We){var it,dt,Ft,Qt,nr,ur=K.context.gl,yr=Q.paint.get("fill-pattern"),br=yr&&yr.constantOr(1),Pr=Q.getCrossfadeParameters();We?(dt=br&&!Q.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",it=ur.LINES):(dt=br?"fillPattern":"fill",it=ur.TRIANGLES);for(var gr=0,Cr=he;gr<Cr.length;gr+=1){var Nr=Cr[gr],Qr=ee.getTile(Nr);if(!br||Qr.patternsLoaded()){var bn=Qr.getBucket(Q);if(bn){var un=bn.programConfigurations.get(Q.id),xn=K.useProgram(dt,un);br&&(K.context.activeTexture.set(ur.TEXTURE0),Qr.imageAtlasTexture.bind(ur.LINEAR,ur.CLAMP_TO_EDGE),un.updatePaintBuffers(Pr));var zn=yr.constantOr(null);if(zn&&Qr.imageAtlas){var Jn=Qr.imageAtlas,Hn=Jn.patternPositions[zn.to.toString()],qn=Jn.patternPositions[zn.from.toString()];Hn&&qn&&un.setConstantPatternPositions(Hn,qn)}var ua=K.translatePosMatrix(Nr.posMatrix,Qr,Q.paint.get("fill-translate"),Q.paint.get("fill-translate-anchor"));if(We){Qt=bn.indexBuffer2,nr=bn.segments2;var za=[ur.drawingBufferWidth,ur.drawingBufferHeight];Ft=dt==="fillOutlinePattern"&&br?Cu(ua,K,Pr,Qr,za):ds(ua,za)}else Qt=bn.indexBuffer,nr=bn.segments,Ft=br?Ss(ua,K,Pr,Qr):iu(ua);xn.draw(K.context,it,Se,K.stencilModeForClipping(Nr),Fe,He.disabled,Ft,Q.id,bn.layoutVertexBuffer,Qt,nr,Q.paint,K.transform.zoom,un)}}}}function Tl(K,ee,Q,he,Se,Fe,We){for(var it=K.context,dt=it.gl,Ft=Q.paint.get("fill-extrusion-pattern"),Qt=Ft.constantOr(1),nr=Q.getCrossfadeParameters(),ur=Q.paint.get("fill-extrusion-opacity"),yr=0,br=he;yr<br.length;yr+=1){var Pr=br[yr],gr=ee.getTile(Pr),Cr=gr.getBucket(Q);if(Cr){var Nr=Cr.programConfigurations.get(Q.id),Qr=K.useProgram(Qt?"fillExtrusionPattern":"fillExtrusion",Nr);Qt&&(K.context.activeTexture.set(dt.TEXTURE0),gr.imageAtlasTexture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),Nr.updatePaintBuffers(nr));var bn=Ft.constantOr(null);if(bn&&gr.imageAtlas){var un=gr.imageAtlas,xn=un.patternPositions[bn.to.toString()],zn=un.patternPositions[bn.from.toString()];xn&&zn&&Nr.setConstantPatternPositions(xn,zn)}var Jn=K.translatePosMatrix(Pr.posMatrix,gr,Q.paint.get("fill-extrusion-translate"),Q.paint.get("fill-extrusion-translate-anchor")),Hn=Q.paint.get("fill-extrusion-vertical-gradient"),qn=Qt?Su(Jn,K,Hn,ur,Pr,nr,gr):Fl(Jn,K,Hn,ur);Qr.draw(it,it.gl.TRIANGLES,Se,Fe,We,He.backCCW,qn,Q.id,Cr.layoutVertexBuffer,Cr.indexBuffer,Cr.segments,Q.paint,K.transform.zoom,Nr)}}}function ms(K,ee,Q,he,Se,Fe){var We=K.context,it=We.gl,dt=ee.fbo;if(dt){var Ft=K.useProgram("hillshade");We.activeTexture.set(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,dt.colorAttachment.get());var Qt=function(nr,ur,yr){var br=yr.paint.get("hillshade-shadow-color"),Pr=yr.paint.get("hillshade-highlight-color"),gr=yr.paint.get("hillshade-accent-color"),Cr=yr.paint.get("hillshade-illumination-direction")*(Math.PI/180);yr.paint.get("hillshade-illumination-anchor")==="viewport"&&(Cr-=nr.transform.angle);var Nr,Qr,bn,un=!nr.options.moving;return{u_matrix:nr.transform.calculatePosMatrix(ur.tileID.toUnwrapped(),un),u_image:0,u_latrange:(Nr=ur.tileID,Qr=Math.pow(2,Nr.canonical.z),bn=Nr.canonical.y,[new t.MercatorCoordinate(0,bn/Qr).toLngLat().lat,new t.MercatorCoordinate(0,(bn+1)/Qr).toLngLat().lat]),u_light:[yr.paint.get("hillshade-exaggeration"),Cr],u_shadow:br,u_highlight:Pr,u_accent:gr}}(K,ee,Q);Ft.draw(We,it.TRIANGLES,he,Se,Fe,He.disabled,Qt,Q.id,K.rasterBoundsBuffer,K.quadTriangleIndexBuffer,K.rasterBoundsSegments)}}function Wf(K,ee,Q,he,Se,Fe,We){var it=K.context,dt=it.gl,Ft=ee.dem;if(Ft&&Ft.data){var Qt=Ft.dim,nr=Ft.stride,ur=Ft.getPixels();if(it.activeTexture.set(dt.TEXTURE1),it.pixelStoreUnpackPremultiplyAlpha.set(!1),ee.demTexture=ee.demTexture||K.getTileTexture(nr),ee.demTexture){var yr=ee.demTexture;yr.update(ur,{premultiply:!1}),yr.bind(dt.NEAREST,dt.CLAMP_TO_EDGE)}else ee.demTexture=new t.Texture(it,ur,dt.RGBA,{premultiply:!1}),ee.demTexture.bind(dt.NEAREST,dt.CLAMP_TO_EDGE);it.activeTexture.set(dt.TEXTURE0);var br=ee.fbo;if(!br){var Pr=new t.Texture(it,{width:Qt,height:Qt,data:null},dt.RGBA);Pr.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),(br=ee.fbo=it.createFramebuffer(Qt,Qt,!0)).colorAttachment.set(Pr.texture)}it.bindFramebuffer.set(br.framebuffer),it.viewport.set([0,0,Qt,Qt]),K.useProgram("hillshadePrepare").draw(it,dt.TRIANGLES,Se,Fe,We,He.disabled,function(gr,Cr,Nr){var Qr=Cr.stride,bn=t.create();return t.ortho(bn,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(bn,bn,[0,-t.EXTENT,0]),{u_matrix:bn,u_image:1,u_dimension:[Qr,Qr],u_zoom:gr.overscaledZ,u_maxzoom:Nr,u_unpack:Cr.getUnpackVector()}}(ee.tileID,Ft,he),Q.id,K.rasterBoundsBuffer,K.quadTriangleIndexBuffer,K.rasterBoundsSegments),ee.needsHillshadePrepare=!1}}function wh(K,ee,Q,he,Se){var Fe=he.paint.get("raster-fade-duration");if(Fe>0){var We=t.browser.now(),it=(We-K.timeAdded)/Fe,dt=ee?(We-ee.timeAdded)/Fe:-1,Ft=Q.getSource(),Qt=Se.coveringZoomLevel({tileSize:Ft.tileSize,roundZoom:Ft.roundZoom}),nr=!ee||Math.abs(ee.tileID.overscaledZ-Qt)>Math.abs(K.tileID.overscaledZ-Qt),ur=nr&&K.refreshedUponExpiration?1:t.clamp(nr?it:1-dt,0,1);return K.refreshedUponExpiration&&it>=1&&(K.refreshedUponExpiration=!1),ee?{opacity:1,mix:1-ur}:{opacity:ur,mix:0}}return{opacity:1,mix:0}}var lp=new t.Color(1,0,0,1),ff=new t.Color(0,1,0,1),Th=new t.Color(0,0,1,1),up=new t.Color(1,0,1,1),tc=new t.Color(0,1,1,1);function tn(K,ee,Q,he){_n(K,0,ee+Q/2,K.transform.width,Q,he)}function Dn(K,ee,Q,he){_n(K,ee-Q/2,0,Q,K.transform.height,he)}function _n(K,ee,Q,he,Se,Fe){var We=K.context,it=We.gl;it.enable(it.SCISSOR_TEST),it.scissor(ee*t.browser.devicePixelRatio,Q*t.browser.devicePixelRatio,he*t.browser.devicePixelRatio,Se*t.browser.devicePixelRatio),We.clear({color:Fe}),it.disable(it.SCISSOR_TEST)}function xa(K,ee,Q){var he=K.context,Se=he.gl,Fe=Q.posMatrix,We=K.useProgram("debug"),it=Qe.disabled,dt=Me.disabled,Ft=K.colorModeForRenderPass();he.activeTexture.set(Se.TEXTURE0),K.emptyTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),We.draw(he,Se.LINE_STRIP,it,dt,Ft,He.disabled,Sc(Fe,t.Color.red),"$debug",K.debugBuffer,K.tileBorderIndexBuffer,K.debugSegments);var Qt=ee.getTileByID(Q.key).latestRawTileData,nr=Math.floor((Qt&&Qt.byteLength||0)/1024),ur=ee.getTile(Q).tileSize,yr=512/Math.min(ur,512)*(Q.overscaledZ/K.transform.zoom)*.5,br=Q.canonical.toString();Q.overscaledZ!==Q.canonical.z&&(br+=" => "+Q.overscaledZ),function(Pr,gr){Pr.initDebugOverlayCanvas();var Cr=Pr.debugOverlayCanvas,Nr=Pr.context.gl,Qr=Pr.debugOverlayCanvas.getContext("2d");Qr.clearRect(0,0,Cr.width,Cr.height),Qr.shadowColor="white",Qr.shadowBlur=2,Qr.lineWidth=1.5,Qr.strokeStyle="white",Qr.textBaseline="top",Qr.font="bold 36px Open Sans, sans-serif",Qr.fillText(gr,5,5),Qr.strokeText(gr,5,5),Pr.debugOverlayTexture.update(Cr),Pr.debugOverlayTexture.bind(Nr.LINEAR,Nr.CLAMP_TO_EDGE)}(K,br+" "+nr+"kb"),We.draw(he,Se.TRIANGLES,it,dt,Ie.alphaBlended,He.disabled,Sc(Fe,t.Color.transparent,yr),"$debug",K.debugBuffer,K.quadTriangleIndexBuffer,K.debugSegments)}var Ja={symbol:function(K,ee,Q,he,Se){if(K.renderPass==="translucent"){var Fe=Me.disabled,We=K.colorModeForRenderPass();Q.layout.get("text-variable-anchor")&&function(it,dt,Ft,Qt,nr,ur,yr){for(var br=dt.transform,Pr=nr==="map",gr=ur==="map",Cr=0,Nr=it;Cr<Nr.length;Cr+=1){var Qr=Nr[Cr],bn=Qt.getTile(Qr),un=bn.getBucket(Ft);if(un&&un.text&&un.text.segments.get().length){var xn=t.evaluateSizeForZoom(un.textSizeData,br.zoom),zn=ln(bn,1,dt.transform.zoom),Jn=cr(Qr.posMatrix,gr,Pr,dt.transform,zn),Hn=Ft.layout.get("icon-text-fit")!=="none"&&un.hasIconData();if(xn){var qn=Math.pow(2,br.zoom-bn.tileID.overscaledZ);Ys(un,Pr,gr,yr,t.symbolSize,br,Jn,Qr.posMatrix,qn,xn,Hn)}}}}(he,K,Q,ee,Q.layout.get("text-rotation-alignment"),Q.layout.get("text-pitch-alignment"),Se),Q.paint.get("icon-opacity").constantOr(1)!==0&&Lu(K,ee,Q,he,!1,Q.paint.get("icon-translate"),Q.paint.get("icon-translate-anchor"),Q.layout.get("icon-rotation-alignment"),Q.layout.get("icon-pitch-alignment"),Q.layout.get("icon-keep-upright"),Fe,We),Q.paint.get("text-opacity").constantOr(1)!==0&&Lu(K,ee,Q,he,!0,Q.paint.get("text-translate"),Q.paint.get("text-translate-anchor"),Q.layout.get("text-rotation-alignment"),Q.layout.get("text-pitch-alignment"),Q.layout.get("text-keep-upright"),Fe,We),ee.map.showCollisionBoxes&&(ec(K,ee,Q,he,Q.paint.get("text-translate"),Q.paint.get("text-translate-anchor"),!0),ec(K,ee,Q,he,Q.paint.get("icon-translate"),Q.paint.get("icon-translate-anchor"),!1))}},circle:function(K,ee,Q,he){if(K.renderPass==="translucent"){var Se=Q.paint.get("circle-opacity"),Fe=Q.paint.get("circle-stroke-width"),We=Q.paint.get("circle-stroke-opacity"),it=Q.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Se.constantOr(1)!==0||Fe.constantOr(1)!==0&&We.constantOr(1)!==0){for(var dt=K.context,Ft=dt.gl,Qt=K.depthModeForSublayer(0,Qe.ReadOnly),nr=Me.disabled,ur=K.colorModeForRenderPass(),yr=[],br=0;br<he.length;br++){var Pr=he[br],gr=ee.getTile(Pr),Cr=gr.getBucket(Q);if(Cr){var Nr=Cr.programConfigurations.get(Q.id),Qr={programConfiguration:Nr,program:K.useProgram("circle",Nr),layoutVertexBuffer:Cr.layoutVertexBuffer,indexBuffer:Cr.indexBuffer,uniformValues:ou(K,Pr,gr,Q)};if(it)for(var bn=0,un=Cr.segments.get();bn<un.length;bn+=1){var xn=un[bn];yr.push({segments:new t.SegmentVector([xn]),sortKey:xn.sortKey,state:Qr})}else yr.push({segments:Cr.segments,sortKey:0,state:Qr})}}it&&yr.sort(function(ua,za){return ua.sortKey-za.sortKey});for(var zn=0,Jn=yr;zn<Jn.length;zn+=1){var Hn=Jn[zn],qn=Hn.state;qn.program.draw(dt,Ft.TRIANGLES,Qt,nr,ur,He.disabled,qn.uniformValues,Q.id,qn.layoutVertexBuffer,qn.indexBuffer,Hn.segments,Q.paint,K.transform.zoom,qn.programConfiguration)}}}},heatmap:function(K,ee,Q,he){if(Q.paint.get("heatmap-opacity")!==0)if(K.renderPass==="offscreen"){var Se=K.context,Fe=Se.gl,We=Me.disabled,it=new Ie([Fe.ONE,Fe.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(yr,br,Pr){var gr=yr.gl;yr.activeTexture.set(gr.TEXTURE1),yr.viewport.set([0,0,br.width/4,br.height/4]);var Cr=Pr.heatmapFbo;if(Cr)gr.bindTexture(gr.TEXTURE_2D,Cr.colorAttachment.get()),yr.bindFramebuffer.set(Cr.framebuffer);else{var Nr=gr.createTexture();gr.bindTexture(gr.TEXTURE_2D,Nr),gr.texParameteri(gr.TEXTURE_2D,gr.TEXTURE_WRAP_S,gr.CLAMP_TO_EDGE),gr.texParameteri(gr.TEXTURE_2D,gr.TEXTURE_WRAP_T,gr.CLAMP_TO_EDGE),gr.texParameteri(gr.TEXTURE_2D,gr.TEXTURE_MIN_FILTER,gr.LINEAR),gr.texParameteri(gr.TEXTURE_2D,gr.TEXTURE_MAG_FILTER,gr.LINEAR),Cr=Pr.heatmapFbo=yr.createFramebuffer(br.width/4,br.height/4,!1),function(Qr,bn,un,xn){var zn=Qr.gl;zn.texImage2D(zn.TEXTURE_2D,0,zn.RGBA,bn.width/4,bn.height/4,0,zn.RGBA,Qr.extRenderToTextureHalfFloat?Qr.extTextureHalfFloat.HALF_FLOAT_OES:zn.UNSIGNED_BYTE,null),xn.colorAttachment.set(un)}(yr,br,Nr,Cr)}})(Se,K,Q),Se.clear({color:t.Color.transparent});for(var dt=0;dt<he.length;dt++){var Ft=he[dt];if(!ee.hasRenderableParent(Ft)){var Qt=ee.getTile(Ft),nr=Qt.getBucket(Q);if(nr){var ur=nr.programConfigurations.get(Q.id);K.useProgram("heatmap",ur).draw(Se,Fe.TRIANGLES,Qe.disabled,We,it,He.disabled,xi(Ft.posMatrix,Qt,K.transform.zoom,Q.paint.get("heatmap-intensity")),Q.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,Q.paint,K.transform.zoom,ur)}}}Se.viewport.set([0,0,K.width,K.height])}else K.renderPass==="translucent"&&(K.context.setColorMode(K.colorModeForRenderPass()),function(yr,br){var Pr=yr.context,gr=Pr.gl,Cr=br.heatmapFbo;if(Cr){Pr.activeTexture.set(gr.TEXTURE0),gr.bindTexture(gr.TEXTURE_2D,Cr.colorAttachment.get()),Pr.activeTexture.set(gr.TEXTURE1);var Nr=br.colorRampTexture;Nr||(Nr=br.colorRampTexture=new t.Texture(Pr,br.colorRamp,gr.RGBA)),Nr.bind(gr.LINEAR,gr.CLAMP_TO_EDGE),yr.useProgram("heatmapTexture").draw(Pr,gr.TRIANGLES,Qe.disabled,Me.disabled,yr.colorModeForRenderPass(),He.disabled,function(Qr,bn,un,xn){var zn=t.create();t.ortho(zn,0,Qr.width,Qr.height,0,0,1);var Jn=Qr.context.gl;return{u_matrix:zn,u_world:[Jn.drawingBufferWidth,Jn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:bn.paint.get("heatmap-opacity")}}(yr,br),br.id,yr.viewportBuffer,yr.quadTriangleIndexBuffer,yr.viewportSegments,br.paint,yr.transform.zoom)}}(K,Q))},line:function(K,ee,Q,he){if(K.renderPass==="translucent"){var Se=Q.paint.get("line-opacity"),Fe=Q.paint.get("line-width");if(Se.constantOr(1)!==0&&Fe.constantOr(1)!==0){var We=K.depthModeForSublayer(0,Qe.ReadOnly),it=K.colorModeForRenderPass(),dt=Q.paint.get("line-dasharray"),Ft=Q.paint.get("line-pattern"),Qt=Ft.constantOr(1),nr=Q.paint.get("line-gradient"),ur=Q.getCrossfadeParameters(),yr=Qt?"linePattern":dt?"lineSDF":nr?"lineGradient":"line",br=K.context,Pr=br.gl,gr=!0;if(nr){br.activeTexture.set(Pr.TEXTURE0);var Cr=Q.gradientTexture;if(!Q.gradient)return;Cr||(Cr=Q.gradientTexture=new t.Texture(br,Q.gradient,Pr.RGBA)),Cr.bind(Pr.LINEAR,Pr.CLAMP_TO_EDGE)}for(var Nr=0,Qr=he;Nr<Qr.length;Nr+=1){var bn=Qr[Nr],un=ee.getTile(bn);if(!Qt||un.patternsLoaded()){var xn=un.getBucket(Q);if(xn){var zn=xn.programConfigurations.get(Q.id),Jn=K.context.program.get(),Hn=K.useProgram(yr,zn),qn=gr||Hn.program!==Jn,ua=Ft.constantOr(null);if(ua&&un.imageAtlas){var za=un.imageAtlas,Ca=za.patternPositions[ua.to.toString()],qa=za.patternPositions[ua.from.toString()];Ca&&qa&&zn.setConstantPatternPositions(Ca,qa)}var ha=Qt?Ol(K,un,Q,ur):dt?os(K,un,Q,dt,ur):nr?Gf(K,un,Q):bl(K,un,Q);Qt?(br.activeTexture.set(Pr.TEXTURE0),un.imageAtlasTexture.bind(Pr.LINEAR,Pr.CLAMP_TO_EDGE),zn.updatePaintBuffers(ur)):dt&&(qn||K.lineAtlas.dirty)&&(br.activeTexture.set(Pr.TEXTURE0),K.lineAtlas.bind(br)),Hn.draw(br,Pr.TRIANGLES,We,K.stencilModeForClipping(bn),it,He.disabled,ha,Q.id,xn.layoutVertexBuffer,xn.indexBuffer,xn.segments,Q.paint,K.transform.zoom,zn),gr=!1}}}}}},fill:function(K,ee,Q,he){var Se=Q.paint.get("fill-color"),Fe=Q.paint.get("fill-opacity");if(Fe.constantOr(1)!==0){var We=K.colorModeForRenderPass(),it=Q.paint.get("fill-pattern"),dt=K.opaquePassEnabledForLayer()&&!it.constantOr(1)&&Se.constantOr(t.Color.transparent).a===1&&Fe.constantOr(0)===1?"opaque":"translucent";if(K.renderPass===dt){var Ft=K.depthModeForSublayer(1,K.renderPass==="opaque"?Qe.ReadWrite:Qe.ReadOnly);Cc(K,ee,Q,he,Ft,We,!1)}if(K.renderPass==="translucent"&&Q.paint.get("fill-antialias")){var Qt=K.depthModeForSublayer(Q.getPaintProperty("fill-outline-color")?2:0,Qe.ReadOnly);Cc(K,ee,Q,he,Qt,We,!0)}}},"fill-extrusion":function(K,ee,Q,he){var Se=Q.paint.get("fill-extrusion-opacity");if(Se!==0&&K.renderPass==="translucent"){var Fe=new Qe(K.context.gl.LEQUAL,Qe.ReadWrite,K.depthRangeFor3D);if(Se!==1||Q.paint.get("fill-extrusion-pattern").constantOr(1))Tl(K,ee,Q,he,Fe,Me.disabled,Ie.disabled),Tl(K,ee,Q,he,Fe,K.stencilModeFor3D(),K.colorModeForRenderPass());else{var We=K.colorModeForRenderPass();Tl(K,ee,Q,he,Fe,Me.disabled,We)}}},hillshade:function(K,ee,Q,he){if(K.renderPass==="offscreen"||K.renderPass==="translucent"){for(var Se=K.context,Fe=ee.getSource().maxzoom,We=K.depthModeForSublayer(0,Qe.ReadOnly),it=K.colorModeForRenderPass(),dt=K.renderPass==="translucent"?K.stencilConfigForOverlap(he):[{},he],Ft=dt[0],Qt=0,nr=dt[1];Qt<nr.length;Qt+=1){var ur=nr[Qt],yr=ee.getTile(ur);yr.needsHillshadePrepare&&K.renderPass==="offscreen"?Wf(K,yr,Q,Fe,We,Me.disabled,it):K.renderPass==="translucent"&&ms(K,yr,Q,We,Ft[ur.overscaledZ],it)}Se.viewport.set([0,0,K.width,K.height])}},raster:function(K,ee,Q,he){if(K.renderPass==="translucent"&&Q.paint.get("raster-opacity")!==0&&he.length)for(var Se=K.context,Fe=Se.gl,We=ee.getSource(),it=K.useProgram("raster"),dt=K.colorModeForRenderPass(),Ft=We instanceof H?[{},he]:K.stencilConfigForOverlap(he),Qt=Ft[0],nr=Ft[1],ur=nr[nr.length-1].overscaledZ,yr=!K.options.moving,br=0,Pr=nr;br<Pr.length;br+=1){var gr=Pr[br],Cr=K.depthModeForSublayer(gr.overscaledZ-ur,Q.paint.get("raster-opacity")===1?Qe.ReadWrite:Qe.ReadOnly,Fe.LESS),Nr=ee.getTile(gr),Qr=K.transform.calculatePosMatrix(gr.toUnwrapped(),yr);Nr.registerFadeDuration(Q.paint.get("raster-fade-duration"));var bn=ee.findLoadedParent(gr,0),un=wh(Nr,bn,ee,Q,K.transform),xn=void 0,zn=void 0,Jn=Q.paint.get("raster-resampling")==="nearest"?Fe.NEAREST:Fe.LINEAR;Se.activeTexture.set(Fe.TEXTURE0),Nr.texture.bind(Jn,Fe.CLAMP_TO_EDGE,Fe.LINEAR_MIPMAP_NEAREST),Se.activeTexture.set(Fe.TEXTURE1),bn?(bn.texture.bind(Jn,Fe.CLAMP_TO_EDGE,Fe.LINEAR_MIPMAP_NEAREST),xn=Math.pow(2,bn.tileID.overscaledZ-Nr.tileID.overscaledZ),zn=[Nr.tileID.canonical.x*xn%1,Nr.tileID.canonical.y*xn%1]):Nr.texture.bind(Jn,Fe.CLAMP_TO_EDGE,Fe.LINEAR_MIPMAP_NEAREST);var Hn=Bl(Qr,zn||[0,0],xn||1,un,Q);We instanceof H?it.draw(Se,Fe.TRIANGLES,Cr,Me.disabled,dt,He.disabled,Hn,Q.id,We.boundsBuffer,K.quadTriangleIndexBuffer,We.boundsSegments):it.draw(Se,Fe.TRIANGLES,Cr,Qt[gr.overscaledZ],dt,He.disabled,Hn,Q.id,K.rasterBoundsBuffer,K.quadTriangleIndexBuffer,K.rasterBoundsSegments)}},background:function(K,ee,Q){var he=Q.paint.get("background-color"),Se=Q.paint.get("background-opacity");if(Se!==0){var Fe=K.context,We=Fe.gl,it=K.transform,dt=it.tileSize,Ft=Q.paint.get("background-pattern");if(!K.isPatternMissing(Ft)){var Qt=!Ft&&he.a===1&&Se===1&&K.opaquePassEnabledForLayer()?"opaque":"translucent";if(K.renderPass===Qt){var nr=Me.disabled,ur=K.depthModeForSublayer(0,Qt==="opaque"?Qe.ReadWrite:Qe.ReadOnly),yr=K.colorModeForRenderPass(),br=K.useProgram(Ft?"backgroundPattern":"background"),Pr=it.coveringTiles({tileSize:dt});Ft&&(Fe.activeTexture.set(We.TEXTURE0),K.imageManager.bind(K.context));for(var gr=Q.getCrossfadeParameters(),Cr=0,Nr=Pr;Cr<Nr.length;Cr+=1){var Qr=Nr[Cr],bn=K.transform.calculatePosMatrix(Qr.toUnwrapped()),un=Ft?bo(bn,Se,K,Ft,{tileID:Qr,tileSize:dt},gr):su(bn,Se,he);br.draw(Fe,We.TRIANGLES,ur,nr,yr,He.disabled,un,Q.id,K.tileExtentBuffer,K.quadTriangleIndexBuffer,K.tileExtentSegments)}}}}},debug:function(K,ee,Q){for(var he=0;he<Q.length;he++)xa(K,ee,Q[he])},custom:function(K,ee,Q){var he=K.context,Se=Q.implementation;if(K.renderPass==="offscreen"){var Fe=Se.prerender;Fe&&(K.setCustomLayerDefaults(),he.setColorMode(K.colorModeForRenderPass()),Fe.call(Se,he.gl,K.transform.customLayerMatrix()),he.setDirty(),K.setBaseState())}else if(K.renderPass==="translucent"){K.setCustomLayerDefaults(),he.setColorMode(K.colorModeForRenderPass()),he.setStencilMode(Me.disabled);var We=Se.renderingMode==="3d"?new Qe(K.context.gl.LEQUAL,Qe.ReadWrite,K.depthRangeFor3D):K.depthModeForSublayer(0,Qe.ReadOnly);he.setDepthMode(We),Se.render(he.gl,K.transform.customLayerMatrix()),he.setDirty(),K.setBaseState(),he.bindFramebuffer.set(null)}}},Ra=function(K,ee){this.context=new Ye(K),this.transform=ee,this._tileTextures={},this.setup(),this.numSublayers=ut.maxUnderzooming+ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ba,this.gpuTimers={}};Ra.prototype.resize=function(K,ee){if(this.width=K*t.browser.devicePixelRatio,this.height=ee*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Q=0,he=this.style._order;Q<he.length;Q+=1)this.style._layers[he[Q]].resize()},Ra.prototype.setup=function(){var K=this.context,ee=new t.StructArrayLayout2i4;ee.emplaceBack(0,0),ee.emplaceBack(t.EXTENT,0),ee.emplaceBack(0,t.EXTENT),ee.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=K.createVertexBuffer(ee,Gr.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Q=new t.StructArrayLayout2i4;Q.emplaceBack(0,0),Q.emplaceBack(t.EXTENT,0),Q.emplaceBack(0,t.EXTENT),Q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=K.createVertexBuffer(Q,Gr.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var he=new t.StructArrayLayout4i8;he.emplaceBack(0,0,0,0),he.emplaceBack(t.EXTENT,0,t.EXTENT,0),he.emplaceBack(0,t.EXTENT,0,t.EXTENT),he.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=K.createVertexBuffer(he,B.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Se=new t.StructArrayLayout2i4;Se.emplaceBack(0,0),Se.emplaceBack(1,0),Se.emplaceBack(0,1),Se.emplaceBack(1,1),this.viewportBuffer=K.createVertexBuffer(Se,Gr.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Fe=new t.StructArrayLayout1ui2;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=K.createIndexBuffer(Fe);var We=new t.StructArrayLayout3ui6;We.emplaceBack(0,1,2),We.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=K.createIndexBuffer(We),this.emptyTexture=new t.Texture(K,{width:1,height:1,data:new Uint8Array([0,0,0,0])},K.gl.RGBA);var it=this.context.gl;this.stencilClearMode=new Me({func:it.ALWAYS,mask:0},0,255,it.ZERO,it.ZERO,it.ZERO)},Ra.prototype.clearStencil=function(){var K=this.context,ee=K.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Q=t.create();t.ortho(Q,0,this.width,this.height,0,0,1),t.scale(Q,Q,[ee.drawingBufferWidth,ee.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(K,ee.TRIANGLES,Qe.disabled,this.stencilClearMode,Ie.disabled,He.disabled,qu(Q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ra.prototype._renderTileClippingMasks=function(K,ee){if(this.currentStencilSource!==K.source&&K.isTileClipped()&&ee&&ee.length){this.currentStencilSource=K.source;var Q=this.context,he=Q.gl;this.nextStencilID+ee.length>256&&this.clearStencil(),Q.setColorMode(Ie.disabled),Q.setDepthMode(Qe.disabled);var Se=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Fe=0,We=ee;Fe<We.length;Fe+=1){var it=We[Fe],dt=this._tileClippingMaskIDs[it.key]=this.nextStencilID++;Se.draw(Q,he.TRIANGLES,Qe.disabled,new Me({func:he.ALWAYS,mask:0},dt,255,he.KEEP,he.KEEP,he.REPLACE),Ie.disabled,He.disabled,qu(it.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ra.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var K=this.nextStencilID++,ee=this.context.gl;return new Me({func:ee.NOTEQUAL,mask:255},K,255,ee.KEEP,ee.KEEP,ee.REPLACE)},Ra.prototype.stencilModeForClipping=function(K){var ee=this.context.gl;return new Me({func:ee.EQUAL,mask:255},this._tileClippingMaskIDs[K.key],0,ee.KEEP,ee.KEEP,ee.REPLACE)},Ra.prototype.stencilConfigForOverlap=function(K){var ee,Q=this.context.gl,he=K.sort(function(dt,Ft){return Ft.overscaledZ-dt.overscaledZ}),Se=he[he.length-1].overscaledZ,Fe=he[0].overscaledZ-Se+1;if(Fe>1){this.currentStencilSource=void 0,this.nextStencilID+Fe>256&&this.clearStencil();for(var We={},it=0;it<Fe;it++)We[it+Se]=new Me({func:Q.GEQUAL,mask:255},it+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=Fe,[We,he]}return[(ee={},ee[Se]=Me.disabled,ee),he]},Ra.prototype.colorModeForRenderPass=function(){var K=this.context.gl;return this._showOverdrawInspector?new Ie([K.CONSTANT_COLOR,K.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ie.unblended:Ie.alphaBlended},Ra.prototype.depthModeForSublayer=function(K,ee,Q){if(!this.opaquePassEnabledForLayer())return Qe.disabled;var he=1-((1+this.currentLayer)*this.numSublayers+K)*this.depthEpsilon;return new Qe(Q||this.context.gl.LEQUAL,ee,[he,he])},Ra.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ra.prototype.render=function(K,ee){var Q=this;this.style=K,this.options=ee,this.lineAtlas=K.lineAtlas,this.imageManager=K.imageManager,this.glyphManager=K.glyphManager,this.symbolFadeChange=K.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var he=this.style._order,Se=this.style.sourceCaches;for(var Fe in Se){var We=Se[Fe];We.used&&We.prepare(this.context)}var it,dt,Ft={},Qt={},nr={};for(var ur in Se){var yr=Se[ur];Ft[ur]=yr.getVisibleCoordinates(),Qt[ur]=Ft[ur].slice().reverse(),nr[ur]=yr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var br=0;br<he.length;br++)if(this.style._layers[he[br]].is3D()){this.opaquePassCutoff=br;break}this.renderPass="offscreen";for(var Pr=0,gr=he;Pr<gr.length;Pr+=1){var Cr=this.style._layers[gr[Pr]];if(Cr.hasOffscreenPass()&&!Cr.isHidden(this.transform.zoom)){var Nr=Qt[Cr.source];(Cr.type==="custom"||Nr.length)&&this.renderLayer(this,Se[Cr.source],Cr,Nr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ee.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ee.showOverdrawInspector,this.depthRangeFor3D=[0,1-(K._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=he.length-1;this.currentLayer>=0;this.currentLayer--){var Qr=this.style._layers[he[this.currentLayer]],bn=Se[Qr.source],un=Ft[Qr.source];this._renderTileClippingMasks(Qr,un),this.renderLayer(this,bn,Qr,un)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<he.length;this.currentLayer++){var xn=this.style._layers[he[this.currentLayer]],zn=Se[xn.source],Jn=(xn.type==="symbol"?nr:Qt)[xn.source];this._renderTileClippingMasks(xn,Ft[xn.source]),this.renderLayer(this,zn,xn,Jn)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Hn){Hn.source&&!Hn.isHidden(Q.transform.zoom)&&(Hn.source!==(dt&&dt.id)&&(dt=Q.style.sourceCaches[Hn.source]),(!it||it.getSource().maxzoom<dt.getSource().maxzoom)&&(it=dt))}),it&&Ja.debug(this,it,it.getVisibleCoordinates())),this.options.showPadding&&function(Hn){var qn=Hn.transform.padding;tn(Hn,Hn.transform.height-(qn.top||0),3,lp),tn(Hn,qn.bottom||0,3,ff),Dn(Hn,qn.left||0,3,Th),Dn(Hn,Hn.transform.width-(qn.right||0),3,up);var ua=Hn.transform.centerPoint;(function(za,Ca,qa,ha){_n(za,Ca-1,qa-10,2,20,ha),_n(za,Ca-10,qa-1,20,2,ha)})(Hn,ua.x,Hn.transform.height-ua.y,tc)}(this),this.context.setDefault()},Ra.prototype.renderLayer=function(K,ee,Q,he){Q.isHidden(this.transform.zoom)||(Q.type==="background"||Q.type==="custom"||he.length)&&(this.id=Q.id,this.gpuTimingStart(Q),Ja[Q.type](K,ee,Q,he,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ra.prototype.gpuTimingStart=function(K){if(this.options.gpuTiming){var ee=this.context.extTimerQuery,Q=this.gpuTimers[K.id];Q||(Q=this.gpuTimers[K.id]={calls:0,cpuTime:0,query:ee.createQueryEXT()}),Q.calls++,ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,Q.query)}},Ra.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var K=this.context.extTimerQuery;K.endQueryEXT(K.TIME_ELAPSED_EXT)}},Ra.prototype.collectGpuTimers=function(){var K=this.gpuTimers;return this.gpuTimers={},K},Ra.prototype.queryGpuTimers=function(K){var ee={};for(var Q in K){var he=K[Q],Se=this.context.extTimerQuery,Fe=Se.getQueryObjectEXT(he.query,Se.QUERY_RESULT_EXT)/1e6;Se.deleteQueryEXT(he.query),ee[Q]=Fe}return ee},Ra.prototype.translatePosMatrix=function(K,ee,Q,he,Se){if(!Q[0]&&!Q[1])return K;var Fe=Se?he==="map"?this.transform.angle:0:he==="viewport"?-this.transform.angle:0;if(Fe){var We=Math.sin(Fe),it=Math.cos(Fe);Q=[Q[0]*it-Q[1]*We,Q[0]*We+Q[1]*it]}var dt=[Se?Q[0]:ln(ee,Q[0],this.transform.zoom),Se?Q[1]:ln(ee,Q[1],this.transform.zoom),0],Ft=new Float32Array(16);return t.translate(Ft,K,dt),Ft},Ra.prototype.saveTileTexture=function(K){var ee=this._tileTextures[K.size[0]];ee?ee.push(K):this._tileTextures[K.size[0]]=[K]},Ra.prototype.getTileTexture=function(K){var ee=this._tileTextures[K];return ee&&ee.length>0?ee.pop():null},Ra.prototype.isPatternMissing=function(K){if(!K)return!1;if(!K.from||!K.to)return!0;var ee=this.imageManager.getPattern(K.from.toString()),Q=this.imageManager.getPattern(K.to.toString());return!ee||!Q},Ra.prototype.useProgram=function(K,ee){this.cache=this.cache||{};var Q=""+K+(ee?ee.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Q]||(this.cache[Q]=new bh(this.context,sp[K],ee,Ws[K],this._showOverdrawInspector)),this.cache[Q]},Ra.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ra.prototype.setBaseState=function(){var K=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(K.FUNC_ADD)},Ra.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ra.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ao=function(K,ee){this.points=K,this.planes=ee};ao.fromInvProjectionMatrix=function(K,ee,Q){var he=Math.pow(2,Q),Se=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(We){return t.transformMat4([],We,K)}).map(function(We){return t.scale$1([],We,1/We[3]/ee*he)}),Fe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(We){var it=t.sub([],Se[We[0]],Se[We[1]]),dt=t.sub([],Se[We[2]],Se[We[1]]),Ft=t.normalize([],t.cross([],it,dt)),Qt=-t.dot(Ft,Se[We[1]]);return Ft.concat(Qt)});return new ao(Se,Fe)};var ei=function(K,ee){this.min=K,this.max=ee,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};ei.prototype.quadrant=function(K){for(var ee=[K%2==0,K<2],Q=t.clone$2(this.min),he=t.clone$2(this.max),Se=0;Se<ee.length;Se++)Q[Se]=ee[Se]?this.min[Se]:this.center[Se],he[Se]=ee[Se]?this.center[Se]:this.max[Se];return he[2]=this.max[2],new ei(Q,he)},ei.prototype.distanceX=function(K){return Math.max(Math.min(this.max[0],K[0]),this.min[0])-K[0]},ei.prototype.distanceY=function(K){return Math.max(Math.min(this.max[1],K[1]),this.min[1])-K[1]},ei.prototype.intersects=function(K){for(var ee=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Q=!0,he=0;he<K.planes.length;he++){for(var Se=K.planes[he],Fe=0,We=0;We<ee.length;We++)Fe+=t.dot$1(Se,ee[We])>=0;if(Fe===0)return 0;Fe!==ee.length&&(Q=!1)}if(Q)return 2;for(var it=0;it<3;it++){for(var dt=Number.MAX_VALUE,Ft=-Number.MAX_VALUE,Qt=0;Qt<K.points.length;Qt++){var nr=K.points[Qt][it]-this.min[it];dt=Math.min(dt,nr),Ft=Math.max(Ft,nr)}if(Ft<0||dt>this.max[it]-this.min[it])return 0}return 1};var Al=function(K,ee,Q,he){if(K===void 0&&(K=0),ee===void 0&&(ee=0),Q===void 0&&(Q=0),he===void 0&&(he=0),isNaN(K)||K<0||isNaN(ee)||ee<0||isNaN(Q)||Q<0||isNaN(he)||he<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=K,this.bottom=ee,this.left=Q,this.right=he};Al.prototype.interpolate=function(K,ee,Q){return ee.top!=null&&K.top!=null&&(this.top=t.number(K.top,ee.top,Q)),ee.bottom!=null&&K.bottom!=null&&(this.bottom=t.number(K.bottom,ee.bottom,Q)),ee.left!=null&&K.left!=null&&(this.left=t.number(K.left,ee.left,Q)),ee.right!=null&&K.right!=null&&(this.right=t.number(K.right,ee.right,Q)),this},Al.prototype.getCenter=function(K,ee){var Q=t.clamp((this.left+K-this.right)/2,0,K),he=t.clamp((this.top+ee-this.bottom)/2,0,ee);return new t.Point(Q,he)},Al.prototype.equals=function(K){return this.top===K.top&&this.bottom===K.bottom&&this.left===K.left&&this.right===K.right},Al.prototype.clone=function(){return new Al(this.top,this.bottom,this.left,this.right)},Al.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ti=function(K,ee,Q,he,Se){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Se===void 0||Se,this._minZoom=K||0,this._maxZoom=ee||22,this._minPitch=Q==null?0:Q,this._maxPitch=he==null?60:he,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Al,this._posMatrixCache={},this._alignedPosMatrixCache={}},si={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ti.prototype.clone=function(){var K=new ti(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return K.tileSize=this.tileSize,K.latRange=this.latRange,K.width=this.width,K.height=this.height,K._center=this._center,K.zoom=this.zoom,K.angle=this.angle,K._fov=this._fov,K._pitch=this._pitch,K._unmodified=this._unmodified,K._edgeInsets=this._edgeInsets.clone(),K._calcMatrices(),K},si.minZoom.get=function(){return this._minZoom},si.minZoom.set=function(K){this._minZoom!==K&&(this._minZoom=K,this.zoom=Math.max(this.zoom,K))},si.maxZoom.get=function(){return this._maxZoom},si.maxZoom.set=function(K){this._maxZoom!==K&&(this._maxZoom=K,this.zoom=Math.min(this.zoom,K))},si.minPitch.get=function(){return this._minPitch},si.minPitch.set=function(K){this._minPitch!==K&&(this._minPitch=K,this.pitch=Math.max(this.pitch,K))},si.maxPitch.get=function(){return this._maxPitch},si.maxPitch.set=function(K){this._maxPitch!==K&&(this._maxPitch=K,this.pitch=Math.min(this.pitch,K))},si.renderWorldCopies.get=function(){return this._renderWorldCopies},si.renderWorldCopies.set=function(K){K===void 0?K=!0:K===null&&(K=!1),this._renderWorldCopies=K},si.worldSize.get=function(){return this.tileSize*this.scale},si.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},si.size.get=function(){return new t.Point(this.width,this.height)},si.bearing.get=function(){return-this.angle/Math.PI*180},si.bearing.set=function(K){var ee=-t.wrap(K,-180,180)*Math.PI/180;this.angle!==ee&&(this._unmodified=!1,this.angle=ee,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},si.pitch.get=function(){return this._pitch/Math.PI*180},si.pitch.set=function(K){var ee=t.clamp(K,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ee&&(this._unmodified=!1,this._pitch=ee,this._calcMatrices())},si.fov.get=function(){return this._fov/Math.PI*180},si.fov.set=function(K){K=Math.max(.01,Math.min(60,K)),this._fov!==K&&(this._unmodified=!1,this._fov=K/180*Math.PI,this._calcMatrices())},si.zoom.get=function(){return this._zoom},si.zoom.set=function(K){var ee=Math.min(Math.max(K,this.minZoom),this.maxZoom);this._zoom!==ee&&(this._unmodified=!1,this._zoom=ee,this.scale=this.zoomScale(ee),this.tileZoom=Math.floor(ee),this.zoomFraction=ee-this.tileZoom,this._constrain(),this._calcMatrices())},si.center.get=function(){return this._center},si.center.set=function(K){K.lat===this._center.lat&&K.lng===this._center.lng||(this._unmodified=!1,this._center=K,this._constrain(),this._calcMatrices())},si.padding.get=function(){return this._edgeInsets.toJSON()},si.padding.set=function(K){this._edgeInsets.equals(K)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,K,1),this._calcMatrices())},si.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ti.prototype.isPaddingEqual=function(K){return this._edgeInsets.equals(K)},ti.prototype.interpolatePadding=function(K,ee,Q){this._unmodified=!1,this._edgeInsets.interpolate(K,ee,Q),this._constrain(),this._calcMatrices()},ti.prototype.coveringZoomLevel=function(K){var ee=(K.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/K.tileSize));return Math.max(0,ee)},ti.prototype.getVisibleUnwrappedCoordinates=function(K){var ee=[new t.UnwrappedTileID(0,K)];if(this._renderWorldCopies)for(var Q=this.pointCoordinate(new t.Point(0,0)),he=this.pointCoordinate(new t.Point(this.width,0)),Se=this.pointCoordinate(new t.Point(this.width,this.height)),Fe=this.pointCoordinate(new t.Point(0,this.height)),We=Math.floor(Math.min(Q.x,he.x,Se.x,Fe.x)),it=Math.floor(Math.max(Q.x,he.x,Se.x,Fe.x)),dt=We-1;dt<=it+1;dt++)dt!==0&&ee.push(new t.UnwrappedTileID(dt,K));return ee},ti.prototype.coveringTiles=function(K){var ee=this.coveringZoomLevel(K),Q=ee;if(K.minzoom!==void 0&&ee<K.minzoom)return[];K.maxzoom!==void 0&&ee>K.maxzoom&&(ee=K.maxzoom);var he=t.MercatorCoordinate.fromLngLat(this.center),Se=Math.pow(2,ee),Fe=[Se*he.x,Se*he.y,0],We=ao.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ee),it=K.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(it=ee);var dt=function(Hn){return{aabb:new ei([Hn*Se,0,0],[(Hn+1)*Se,Se,0]),zoom:0,x:0,y:0,wrap:Hn,fullyVisible:!1}},Ft=[],Qt=[],nr=ee,ur=K.reparseOverscaled?Q:ee;if(this._renderWorldCopies)for(var yr=1;yr<=3;yr++)Ft.push(dt(-yr)),Ft.push(dt(yr));for(Ft.push(dt(0));Ft.length>0;){var br=Ft.pop(),Pr=br.x,gr=br.y,Cr=br.fullyVisible;if(!Cr){var Nr=br.aabb.intersects(We);if(Nr===0)continue;Cr=Nr===2}var Qr=br.aabb.distanceX(Fe),bn=br.aabb.distanceY(Fe),un=Math.max(Math.abs(Qr),Math.abs(bn));if(br.zoom===nr||un>3+(1<<nr-br.zoom)-2&&br.zoom>=it)Qt.push({tileID:new t.OverscaledTileID(br.zoom===nr?ur:br.zoom,br.wrap,br.zoom,Pr,gr),distanceSq:t.sqrLen([Fe[0]-.5-Pr,Fe[1]-.5-gr])});else for(var xn=0;xn<4;xn++){var zn=(Pr<<1)+xn%2,Jn=(gr<<1)+(xn>>1);Ft.push({aabb:br.aabb.quadrant(xn),zoom:br.zoom+1,x:zn,y:Jn,wrap:br.wrap,fullyVisible:Cr})}}return Qt.sort(function(Hn,qn){return Hn.distanceSq-qn.distanceSq}).map(function(Hn){return Hn.tileID})},ti.prototype.resize=function(K,ee){this.width=K,this.height=ee,this.pixelsToGLUnits=[2/K,-2/ee],this._constrain(),this._calcMatrices()},si.unmodified.get=function(){return this._unmodified},ti.prototype.zoomScale=function(K){return Math.pow(2,K)},ti.prototype.scaleZoom=function(K){return Math.log(K)/Math.LN2},ti.prototype.project=function(K){var ee=t.clamp(K.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(K.lng)*this.worldSize,t.mercatorYfromLat(ee)*this.worldSize)},ti.prototype.unproject=function(K){return new t.MercatorCoordinate(K.x/this.worldSize,K.y/this.worldSize).toLngLat()},si.point.get=function(){return this.project(this.center)},ti.prototype.setLocationAtPoint=function(K,ee){var Q=this.pointCoordinate(ee),he=this.pointCoordinate(this.centerPoint),Se=this.locationCoordinate(K),Fe=new t.MercatorCoordinate(Se.x-(Q.x-he.x),Se.y-(Q.y-he.y));this.center=this.coordinateLocation(Fe),this._renderWorldCopies&&(this.center=this.center.wrap())},ti.prototype.locationPoint=function(K){return this.coordinatePoint(this.locationCoordinate(K))},ti.prototype.pointLocation=function(K){return this.coordinateLocation(this.pointCoordinate(K))},ti.prototype.locationCoordinate=function(K){return t.MercatorCoordinate.fromLngLat(K)},ti.prototype.coordinateLocation=function(K){return K.toLngLat()},ti.prototype.pointCoordinate=function(K){var ee=[K.x,K.y,0,1],Q=[K.x,K.y,1,1];t.transformMat4(ee,ee,this.pixelMatrixInverse),t.transformMat4(Q,Q,this.pixelMatrixInverse);var he=ee[3],Se=Q[3],Fe=ee[1]/he,We=Q[1]/Se,it=ee[2]/he,dt=Q[2]/Se,Ft=it===dt?0:(0-it)/(dt-it);return new t.MercatorCoordinate(t.number(ee[0]/he,Q[0]/Se,Ft)/this.worldSize,t.number(Fe,We,Ft)/this.worldSize)},ti.prototype.coordinatePoint=function(K){var ee=[K.x*this.worldSize,K.y*this.worldSize,0,1];return t.transformMat4(ee,ee,this.pixelMatrix),new t.Point(ee[0]/ee[3],ee[1]/ee[3])},ti.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},ti.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ti.prototype.setMaxBounds=function(K){K?(this.lngRange=[K.getWest(),K.getEast()],this.latRange=[K.getSouth(),K.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ti.prototype.calculatePosMatrix=function(K,ee){ee===void 0&&(ee=!1);var Q=K.key,he=ee?this._alignedPosMatrixCache:this._posMatrixCache;if(he[Q])return he[Q];var Se=K.canonical,Fe=this.worldSize/this.zoomScale(Se.z),We=Se.x+Math.pow(2,Se.z)*K.wrap,it=t.identity(new Float64Array(16));return t.translate(it,it,[We*Fe,Se.y*Fe,0]),t.scale(it,it,[Fe/t.EXTENT,Fe/t.EXTENT,1]),t.multiply(it,ee?this.alignedProjMatrix:this.projMatrix,it),he[Q]=new Float32Array(it),he[Q]},ti.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ti.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var K,ee,Q,he,Se=-90,Fe=90,We=-180,it=180,dt=this.size,Ft=this._unmodified;if(this.latRange){var Qt=this.latRange;Se=t.mercatorYfromLat(Qt[1])*this.worldSize,K=(Fe=t.mercatorYfromLat(Qt[0])*this.worldSize)-Se<dt.y?dt.y/(Fe-Se):0}if(this.lngRange){var nr=this.lngRange;We=t.mercatorXfromLng(nr[0])*this.worldSize,ee=(it=t.mercatorXfromLng(nr[1])*this.worldSize)-We<dt.x?dt.x/(it-We):0}var ur=this.point,yr=Math.max(ee||0,K||0);if(yr)return this.center=this.unproject(new t.Point(ee?(it+We)/2:ur.x,K?(Fe+Se)/2:ur.y)),this.zoom+=this.scaleZoom(yr),this._unmodified=Ft,void(this._constraining=!1);if(this.latRange){var br=ur.y,Pr=dt.y/2;br-Pr<Se&&(he=Se+Pr),br+Pr>Fe&&(he=Fe-Pr)}if(this.lngRange){var gr=ur.x,Cr=dt.x/2;gr-Cr<We&&(Q=We+Cr),gr+Cr>it&&(Q=it-Cr)}Q===void 0&&he===void 0||(this.center=this.unproject(new t.Point(Q!==void 0?Q:ur.x,he!==void 0?he:ur.y))),this._unmodified=Ft,this._constraining=!1}},ti.prototype._calcMatrices=function(){if(this.height){var K=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var ee=Math.PI/2+this._pitch,Q=this._fov*(.5+K.y/this.height),he=Math.sin(Q)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-ee-Q,.01,Math.PI-.01)),Se=this.point,Fe=Se.x,We=Se.y,it=1.01*(Math.cos(Math.PI/2-this._pitch)*he+this.cameraToCenterDistance),dt=this.height/50,Ft=new Float64Array(16);t.perspective(Ft,this._fov,this.width/this.height,dt,it),Ft[8]=2*-K.x/this.width,Ft[9]=2*K.y/this.height,t.scale(Ft,Ft,[1,-1,1]),t.translate(Ft,Ft,[0,0,-this.cameraToCenterDistance]),t.rotateX(Ft,Ft,this._pitch),t.rotateZ(Ft,Ft,this.angle),t.translate(Ft,Ft,[-Fe,-We,0]),this.mercatorMatrix=t.scale([],Ft,[this.worldSize,this.worldSize,this.worldSize]),t.scale(Ft,Ft,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ft,this.invProjMatrix=t.invert([],this.projMatrix);var Qt=this.width%2/2,nr=this.height%2/2,ur=Math.cos(this.angle),yr=Math.sin(this.angle),br=Fe-Math.round(Fe)+ur*Qt+yr*nr,Pr=We-Math.round(We)+ur*nr+yr*Qt,gr=new Float64Array(Ft);if(t.translate(gr,gr,[br>.5?br-1:br,Pr>.5?Pr-1:Pr,0]),this.alignedProjMatrix=gr,Ft=t.create(),t.scale(Ft,Ft,[this.width/2,-this.height/2,1]),t.translate(Ft,Ft,[1,-1,0]),this.labelPlaneMatrix=Ft,Ft=t.create(),t.scale(Ft,Ft,[1,-1,1]),t.translate(Ft,Ft,[-1,-1,0]),t.scale(Ft,Ft,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ft,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ft=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ft,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ti.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var K=this.pointCoordinate(new t.Point(0,0)),ee=[K.x*this.worldSize,K.y*this.worldSize,0,1];return t.transformMat4(ee,ee,this.pixelMatrix)[3]/this.cameraToCenterDistance},ti.prototype.getCameraPoint=function(){var K=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,K))},ti.prototype.getCameraQueryGeometry=function(K){var ee=this.getCameraPoint();if(K.length===1)return[K[0],ee];for(var Q=ee.x,he=ee.y,Se=ee.x,Fe=ee.y,We=0,it=K;We<it.length;We+=1){var dt=it[We];Q=Math.min(Q,dt.x),he=Math.min(he,dt.y),Se=Math.max(Se,dt.x),Fe=Math.max(Fe,dt.y)}return[new t.Point(Q,he),new t.Point(Se,he),new t.Point(Se,Fe),new t.Point(Q,Fe),new t.Point(Q,he)]},Object.defineProperties(ti.prototype,si);var Uo=function(K){var ee,Q,he,Se;this._hashName=K&&encodeURIComponent(K),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(ee=this._updateHashUnthrottled.bind(this),Q=!1,he=null,Se=function(){he=null,Q&&(ee(),he=setTimeout(Se,300),Q=!1)},function(){return Q=!0,he||Se(),he})};Uo.prototype.addTo=function(K){return this._map=K,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Uo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Uo.prototype.getHashString=function(K){var ee=this._map.getCenter(),Q=Math.round(100*this._map.getZoom())/100,he=Math.ceil((Q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Se=Math.pow(10,he),Fe=Math.round(ee.lng*Se)/Se,We=Math.round(ee.lat*Se)/Se,it=this._map.getBearing(),dt=this._map.getPitch(),Ft="";if(Ft+=K?"/"+Fe+"/"+We+"/"+Q:Q+"/"+We+"/"+Fe,(it||dt)&&(Ft+="/"+Math.round(10*it)/10),dt&&(Ft+="/"+Math.round(dt)),this._hashName){var Qt=this._hashName,nr=!1,ur=t.window.location.hash.slice(1).split("&").map(function(yr){var br=yr.split("=")[0];return br===Qt?(nr=!0,br+"="+Ft):yr}).filter(function(yr){return yr});return nr||ur.push(Qt+"="+Ft),"#"+ur.join("&")}return"#"+Ft},Uo.prototype._getCurrentHash=function(){var K,ee=this,Q=t.window.location.hash.replace("#","");return this._hashName?(Q.split("&").map(function(he){return he.split("=")}).forEach(function(he){he[0]===ee._hashName&&(K=he)}),(K&&K[1]||"").split("/")):Q.split("/")},Uo.prototype._onHashChange=function(){var K=this._getCurrentHash();if(K.length>=3&&!K.some(function(Q){return isNaN(Q)})){var ee=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(K[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+K[2],+K[1]],zoom:+K[0],bearing:ee,pitch:+(K[4]||0)}),!0}return!1},Uo.prototype._updateHashUnthrottled=function(){var K=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",K)}catch{}};var Ml={linearity:.3,easing:t.bezier(0,0,.3,1)},lu=t.extend({deceleration:2500,maxSpeed:1400},Ml),rc=t.extend({deceleration:20,maxSpeed:1400},Ml),Yf=t.extend({deceleration:1e3,maxSpeed:360},Ml),Li=t.extend({deceleration:1e3,maxSpeed:90},Ml),Ul=function(K){this._map=K,this.clear()};function gs(K,ee){(!K.duration||K.duration<ee.duration)&&(K.duration=ee.duration,K.easing=ee.easing)}function Vo(K,ee,Q){var he=Q.maxSpeed,Se=Q.linearity,Fe=Q.deceleration,We=t.clamp(K*Se/(ee/1e3),-he,he),it=Math.abs(We)/(Fe*Se);return{easing:Q.easing,duration:1e3*it,amount:We*(it/2)}}Ul.prototype.clear=function(){this._inertiaBuffer=[]},Ul.prototype.record=function(K){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:K})},Ul.prototype._drainInertiaBuffer=function(){for(var K=this._inertiaBuffer,ee=t.browser.now();K.length>0&&ee-K[0].time>160;)K.shift()},Ul.prototype._onMoveEnd=function(K){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ee={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},Q=0,he=this._inertiaBuffer;Q<he.length;Q+=1){var Se=he[Q].settings;ee.zoom+=Se.zoomDelta||0,ee.bearing+=Se.bearingDelta||0,ee.pitch+=Se.pitchDelta||0,Se.panDelta&&ee.pan._add(Se.panDelta),Se.around&&(ee.around=Se.around),Se.pinchAround&&(ee.pinchAround=Se.pinchAround)}var Fe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,We={};if(ee.pan.mag()){var it=Vo(ee.pan.mag(),Fe,t.extend({},lu,K||{}));We.offset=ee.pan.mult(it.amount/ee.pan.mag()),We.center=this._map.transform.center,gs(We,it)}if(ee.zoom){var dt=Vo(ee.zoom,Fe,rc);We.zoom=this._map.transform.zoom+dt.amount,gs(We,dt)}if(ee.bearing){var Ft=Vo(ee.bearing,Fe,Yf);We.bearing=this._map.transform.bearing+t.clamp(Ft.amount,-179,179),gs(We,Ft)}if(ee.pitch){var Qt=Vo(ee.pitch,Fe,Li);We.pitch=this._map.transform.pitch+Qt.amount,gs(We,Qt)}if(We.zoom||We.bearing){var nr=ee.pinchAround===void 0?ee.around:ee.pinchAround;We.around=nr?this._map.unproject(nr):this._map.getCenter()}return this.clear(),t.extend(We,{noMoveStart:!0})}};var So=function(K){function ee(he,Se,Fe,We){We===void 0&&(We={});var it=n.mousePos(Se.getCanvasContainer(),Fe),dt=Se.unproject(it);K.call(this,he,t.extend({point:it,lngLat:dt,originalEvent:Fe},We)),this._defaultPrevented=!1,this.target=Se}K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee;var Q={defaultPrevented:{configurable:!0}};return ee.prototype.preventDefault=function(){this._defaultPrevented=!0},Q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ee.prototype,Q),ee}(t.Event),uu=function(K){function ee(he,Se,Fe){var We=he==="touchend"?Fe.changedTouches:Fe.touches,it=n.touchPos(Se.getCanvasContainer(),We),dt=it.map(function(nr){return Se.unproject(nr)}),Ft=it.reduce(function(nr,ur,yr,br){return nr.add(ur.div(br.length))},new t.Point(0,0)),Qt=Se.unproject(Ft);K.call(this,he,{points:it,point:Ft,lngLats:dt,lngLat:Qt,originalEvent:Fe}),this._defaultPrevented=!1}K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee;var Q={defaultPrevented:{configurable:!0}};return ee.prototype.preventDefault=function(){this._defaultPrevented=!0},Q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ee.prototype,Q),ee}(t.Event),ga=function(K){function ee(he,Se,Fe){K.call(this,he,{originalEvent:Fe}),this._defaultPrevented=!1}K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee;var Q={defaultPrevented:{configurable:!0}};return ee.prototype.preventDefault=function(){this._defaultPrevented=!0},Q.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ee.prototype,Q),ee}(t.Event),io=function(K,ee){this._map=K,this._clickTolerance=ee.clickTolerance};io.prototype.reset=function(){delete this._mousedownPos},io.prototype.wheel=function(K){return this._firePreventable(new ga(K.type,this._map,K))},io.prototype.mousedown=function(K,ee){return this._mousedownPos=ee,this._firePreventable(new So(K.type,this._map,K))},io.prototype.mouseup=function(K){this._map.fire(new So(K.type,this._map,K))},io.prototype.click=function(K,ee){this._mousedownPos&&this._mousedownPos.dist(ee)>=this._clickTolerance||this._map.fire(new So(K.type,this._map,K))},io.prototype.dblclick=function(K){return this._firePreventable(new So(K.type,this._map,K))},io.prototype.mouseover=function(K){this._map.fire(new So(K.type,this._map,K))},io.prototype.mouseout=function(K){this._map.fire(new So(K.type,this._map,K))},io.prototype.touchstart=function(K){return this._firePreventable(new uu(K.type,this._map,K))},io.prototype.touchmove=function(K){this._map.fire(new uu(K.type,this._map,K))},io.prototype.touchend=function(K){this._map.fire(new uu(K.type,this._map,K))},io.prototype.touchcancel=function(K){this._map.fire(new uu(K.type,this._map,K))},io.prototype._firePreventable=function(K){if(this._map.fire(K),K.defaultPrevented)return{}},io.prototype.isEnabled=function(){return!0},io.prototype.isActive=function(){return!1},io.prototype.enable=function(){},io.prototype.disable=function(){};var Ho=function(K){this._map=K};Ho.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ho.prototype.mousemove=function(K){this._map.fire(new So(K.type,this._map,K))},Ho.prototype.mousedown=function(){this._delayContextMenu=!0},Ho.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new So("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ho.prototype.contextmenu=function(K){this._delayContextMenu?this._contextMenuEvent=K:this._map.fire(new So(K.type,this._map,K)),this._map.listens("contextmenu")&&K.preventDefault()},Ho.prototype.isEnabled=function(){return!0},Ho.prototype.isActive=function(){return!1},Ho.prototype.enable=function(){},Ho.prototype.disable=function(){};var ss=function(K,ee){this._map=K,this._el=K.getCanvasContainer(),this._container=K.getContainer(),this._clickTolerance=ee.clickTolerance||1};function Pu(K,ee){for(var Q={},he=0;he<K.length;he++)Q[K[he].identifier]=ee[he];return Q}ss.prototype.isEnabled=function(){return!!this._enabled},ss.prototype.isActive=function(){return!!this._active},ss.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ss.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ss.prototype.mousedown=function(K,ee){this.isEnabled()&&K.shiftKey&&K.button===0&&(n.disableDrag(),this._startPos=this._lastPos=ee,this._active=!0)},ss.prototype.mousemoveWindow=function(K,ee){if(this._active){var Q=ee;if(!(this._lastPos.equals(Q)||!this._box&&Q.dist(this._startPos)<this._clickTolerance)){var he=this._startPos;this._lastPos=Q,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",K));var Se=Math.min(he.x,Q.x),Fe=Math.max(he.x,Q.x),We=Math.min(he.y,Q.y),it=Math.max(he.y,Q.y);n.setTransform(this._box,"translate("+Se+"px,"+We+"px)"),this._box.style.width=Fe-Se+"px",this._box.style.height=it-We+"px"}}},ss.prototype.mouseupWindow=function(K,ee){var Q=this;if(this._active&&K.button===0){var he=this._startPos,Se=ee;if(this.reset(),n.suppressClick(),he.x!==Se.x||he.y!==Se.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:K})),{cameraAnimation:function(Fe){return Fe.fitScreenCoordinates(he,Se,Q._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",K)}},ss.prototype.keydown=function(K){this._active&&K.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",K))},ss.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},ss.prototype._fireEvent=function(K,ee){return this._map.fire(new t.Event(K,{originalEvent:ee}))};var Xs=function(K){this.reset(),this.numTouches=K.numTouches};Xs.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Xs.prototype.touchstart=function(K,ee,Q){(this.centroid||Q.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=K.timeStamp),Q.length===this.numTouches&&(this.centroid=function(he){for(var Se=new t.Point(0,0),Fe=0,We=he;Fe<We.length;Fe+=1)Se._add(We[Fe]);return Se.div(he.length)}(ee),this.touches=Pu(Q,ee)))},Xs.prototype.touchmove=function(K,ee,Q){if(!this.aborted&&this.centroid){var he=Pu(Q,ee);for(var Se in this.touches){var Fe=he[Se];(!Fe||Fe.dist(this.touches[Se])>30)&&(this.aborted=!0)}}},Xs.prototype.touchend=function(K,ee,Q){if((!this.centroid||K.timeStamp-this.startTime>500)&&(this.aborted=!0),Q.length===0){var he=!this.aborted&&this.centroid;if(this.reset(),he)return he}};var kl=function(K){this.singleTap=new Xs(K),this.numTaps=K.numTaps,this.reset()};kl.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},kl.prototype.touchstart=function(K,ee,Q){this.singleTap.touchstart(K,ee,Q)},kl.prototype.touchmove=function(K,ee,Q){this.singleTap.touchmove(K,ee,Q)},kl.prototype.touchend=function(K,ee,Q){var he=this.singleTap.touchend(K,ee,Q);if(he){var Se=K.timeStamp-this.lastTime<500,Fe=!this.lastTap||this.lastTap.dist(he)<30;if(Se&&Fe||this.reset(),this.count++,this.lastTime=K.timeStamp,this.lastTap=he,this.count===this.numTaps)return this.reset(),he}};var ea=function(){this._zoomIn=new kl({numTouches:1,numTaps:2}),this._zoomOut=new kl({numTouches:2,numTaps:1}),this.reset()};ea.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ea.prototype.touchstart=function(K,ee,Q){this._zoomIn.touchstart(K,ee,Q),this._zoomOut.touchstart(K,ee,Q)},ea.prototype.touchmove=function(K,ee,Q){this._zoomIn.touchmove(K,ee,Q),this._zoomOut.touchmove(K,ee,Q)},ea.prototype.touchend=function(K,ee,Q){var he=this,Se=this._zoomIn.touchend(K,ee,Q),Fe=this._zoomOut.touchend(K,ee,Q);return Se?(this._active=!0,K.preventDefault(),setTimeout(function(){return he.reset()},0),{cameraAnimation:function(We){return We.easeTo({duration:300,zoom:We.getZoom()+1,around:We.unproject(Se)},{originalEvent:K})}}):Fe?(this._active=!0,K.preventDefault(),setTimeout(function(){return he.reset()},0),{cameraAnimation:function(We){return We.easeTo({duration:300,zoom:We.getZoom()-1,around:We.unproject(Fe)},{originalEvent:K})}}):void 0},ea.prototype.touchcancel=function(){this.reset()},ea.prototype.enable=function(){this._enabled=!0},ea.prototype.disable=function(){this._enabled=!1,this.reset()},ea.prototype.isEnabled=function(){return this._enabled},ea.prototype.isActive=function(){return this._active};var _o=function(K){this.reset(),this._clickTolerance=K.clickTolerance||1};_o.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},_o.prototype._correctButton=function(K,ee){return!1},_o.prototype._move=function(K,ee){return{}},_o.prototype.mousedown=function(K,ee){if(!this._lastPoint){var Q=n.mouseButton(K);this._correctButton(K,Q)&&(this._lastPoint=ee,this._eventButton=Q)}},_o.prototype.mousemoveWindow=function(K,ee){var Q=this._lastPoint;if(Q&&(K.preventDefault(),this._moved||!(ee.dist(Q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ee,this._move(Q,ee)},_o.prototype.mouseupWindow=function(K){n.mouseButton(K)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},_o.prototype.enable=function(){this._enabled=!0},_o.prototype.disable=function(){this._enabled=!1,this.reset()},_o.prototype.isEnabled=function(){return this._enabled},_o.prototype.isActive=function(){return this._active};var hf=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.mousedown=function(Q,he){K.prototype.mousedown.call(this,Q,he),this._lastPoint&&(this._active=!0)},ee.prototype._correctButton=function(Q,he){return he===0&&!Q.ctrlKey},ee.prototype._move=function(Q,he){return{around:he,panDelta:he.sub(Q)}},ee}(_o),Sl=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype._correctButton=function(Q,he){return he===0&&Q.ctrlKey||he===2},ee.prototype._move=function(Q,he){var Se=.8*(he.x-Q.x);if(Se)return this._active=!0,{bearingDelta:Se}},ee.prototype.contextmenu=function(Q){Q.preventDefault()},ee}(_o),Vl=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype._correctButton=function(Q,he){return he===0&&Q.ctrlKey||he===2},ee.prototype._move=function(Q,he){var Se=-.5*(he.y-Q.y);if(Se)return this._active=!0,{pitchDelta:Se}},ee.prototype.contextmenu=function(Q){Q.preventDefault()},ee}(_o),ls=function(K){this._minTouches=1,this._clickTolerance=K.clickTolerance||1,this.reset()};ls.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},ls.prototype.touchstart=function(K,ee,Q){return this._calculateTransform(K,ee,Q)},ls.prototype.touchmove=function(K,ee,Q){if(this._active)return K.preventDefault(),this._calculateTransform(K,ee,Q)},ls.prototype.touchend=function(K,ee,Q){this._calculateTransform(K,ee,Q),this._active&&Q.length<this._minTouches&&this.reset()},ls.prototype.touchcancel=function(){this.reset()},ls.prototype._calculateTransform=function(K,ee,Q){Q.length>0&&(this._active=!0);var he=Pu(Q,ee),Se=new t.Point(0,0),Fe=new t.Point(0,0),We=0;for(var it in he){var dt=he[it],Ft=this._touches[it];Ft&&(Se._add(dt),Fe._add(dt.sub(Ft)),We++,he[it]=dt)}if(this._touches=he,!(We<this._minTouches)&&Fe.mag()){var Qt=Fe.div(We);if(this._sum._add(Qt),!(this._sum.mag()<this._clickTolerance))return{around:Se.div(We),panDelta:Qt}}},ls.prototype.enable=function(){this._enabled=!0},ls.prototype.disable=function(){this._enabled=!1,this.reset()},ls.prototype.isEnabled=function(){return this._enabled},ls.prototype.isActive=function(){return this._active};var ys=function(){this.reset()};function nc(K,ee,Q){for(var he=0;he<K.length;he++)if(K[he].identifier===Q)return ee[he]}function us(K,ee){return Math.log(K/ee)/Math.LN2}ys.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ys.prototype._start=function(K){},ys.prototype._move=function(K,ee,Q){return{}},ys.prototype.touchstart=function(K,ee,Q){this._firstTwoTouches||Q.length<2||(this._firstTwoTouches=[Q[0].identifier,Q[1].identifier],this._start([ee[0],ee[1]]))},ys.prototype.touchmove=function(K,ee,Q){if(this._firstTwoTouches){K.preventDefault();var he=this._firstTwoTouches,Se=he[1],Fe=nc(Q,ee,he[0]),We=nc(Q,ee,Se);if(Fe&&We){var it=this._aroundCenter?null:Fe.add(We).div(2);return this._move([Fe,We],it,K)}}},ys.prototype.touchend=function(K,ee,Q){if(this._firstTwoTouches){var he=this._firstTwoTouches,Se=he[1],Fe=nc(Q,ee,he[0]),We=nc(Q,ee,Se);Fe&&We||(this._active&&n.suppressClick(),this.reset())}},ys.prototype.touchcancel=function(){this.reset()},ys.prototype.enable=function(K){this._enabled=!0,this._aroundCenter=!!K&&K.around==="center"},ys.prototype.disable=function(){this._enabled=!1,this.reset()},ys.prototype.isEnabled=function(){return this._enabled},ys.prototype.isActive=function(){return this._active};var Zs=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.reset=function(){K.prototype.reset.call(this),delete this._distance,delete this._startDistance},ee.prototype._start=function(Q){this._startDistance=this._distance=Q[0].dist(Q[1])},ee.prototype._move=function(Q,he){var Se=this._distance;if(this._distance=Q[0].dist(Q[1]),this._active||!(Math.abs(us(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:us(this._distance,Se),pinchAround:he}},ee}(ys);function ac(K,ee){return 180*K.angleWith(ee)/Math.PI}var Ec=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.reset=function(){K.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},ee.prototype._start=function(Q){this._startVector=this._vector=Q[0].sub(Q[1]),this._minDiameter=Q[0].dist(Q[1])},ee.prototype._move=function(Q,he){var Se=this._vector;if(this._vector=Q[0].sub(Q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ac(this._vector,Se),pinchAround:he}},ee.prototype._isBelowThreshold=function(Q){this._minDiameter=Math.min(this._minDiameter,Q.mag());var he=25/(Math.PI*this._minDiameter)*360,Se=ac(Q,this._startVector);return Math.abs(Se)<he},ee}(ys);function Lc(K){return Math.abs(K.y)>Math.abs(K.x)}var Pc=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.reset=function(){K.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},ee.prototype._start=function(Q){this._lastPoints=Q,Lc(Q[0].sub(Q[1]))&&(this._valid=!1)},ee.prototype._move=function(Q,he,Se){var Fe=Q[0].sub(this._lastPoints[0]),We=Q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Fe,We,Se.timeStamp),this._valid)return this._lastPoints=Q,this._active=!0,{pitchDelta:(Fe.y+We.y)/2*-.5}},ee.prototype.gestureBeginsVertically=function(Q,he,Se){if(this._valid!==void 0)return this._valid;var Fe=Q.mag()>=2,We=he.mag()>=2;if(Fe||We){if(!Fe||!We)return this._firstMove===void 0&&(this._firstMove=Se),Se-this._firstMove<100&&void 0;var it=Q.y>0==he.y>0;return Lc(Q)&&Lc(he)&&it}},ee}(ys),Xf={panStep:100,bearingStep:15,pitchStep:10},Co=function(){var K=Xf;this._panStep=K.panStep,this._bearingStep=K.bearingStep,this._pitchStep=K.pitchStep};function Za(K){return K*(2-K)}Co.prototype.reset=function(){this._active=!1},Co.prototype.keydown=function(K){var ee=this;if(!(K.altKey||K.ctrlKey||K.metaKey)){var Q=0,he=0,Se=0,Fe=0,We=0;switch(K.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:K.shiftKey?he=-1:(K.preventDefault(),Fe=-1);break;case 39:K.shiftKey?he=1:(K.preventDefault(),Fe=1);break;case 38:K.shiftKey?Se=1:(K.preventDefault(),We=-1);break;case 40:K.shiftKey?Se=-1:(K.preventDefault(),We=1);break;default:return}return{cameraAnimation:function(it){var dt=it.getZoom();it.easeTo({duration:300,easeId:"keyboardHandler",easing:Za,zoom:Q?Math.round(dt)+Q*(K.shiftKey?2:1):dt,bearing:it.getBearing()+he*ee._bearingStep,pitch:it.getPitch()+Se*ee._pitchStep,offset:[-Fe*ee._panStep,-We*ee._panStep],center:it.getCenter()},{originalEvent:K})}}}},Co.prototype.enable=function(){this._enabled=!0},Co.prototype.disable=function(){this._enabled=!1,this.reset()},Co.prototype.isEnabled=function(){return this._enabled},Co.prototype.isActive=function(){return this._active};var ui=function(K,ee){this._map=K,this._el=K.getCanvasContainer(),this._handler=ee,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ui.prototype.setZoomRate=function(K){this._defaultZoomRate=K},ui.prototype.setWheelZoomRate=function(K){this._wheelZoomRate=K},ui.prototype.isEnabled=function(){return!!this._enabled},ui.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ui.prototype.isZooming=function(){return!!this._zooming},ui.prototype.enable=function(K){this.isEnabled()||(this._enabled=!0,this._aroundCenter=K&&K.around==="center")},ui.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ui.prototype.wheel=function(K){if(this.isEnabled()){var ee=K.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*K.deltaY:K.deltaY,Q=t.browser.now(),he=Q-(this._lastWheelEventTime||0);this._lastWheelEventTime=Q,ee!==0&&ee%4.000244140625==0?this._type="wheel":ee!==0&&Math.abs(ee)<4?this._type="trackpad":he>400?(this._type=null,this._lastValue=ee,this._timeout=setTimeout(this._onTimeout,40,K)):this._type||(this._type=Math.abs(he*ee)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ee+=this._lastValue)),K.shiftKey&&ee&&(ee/=4),this._type&&(this._lastWheelEvent=K,this._delta-=ee,this._active||this._start(K)),K.preventDefault()}},ui.prototype._onTimeout=function(K){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(K)},ui.prototype._start=function(K){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ee=n.mousePos(this._el,K);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ee)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ui.prototype.renderFrame=function(){return this._onScrollFrame()},ui.prototype._onScrollFrame=function(){var K=this;if(this._frameId&&(this._frameId=null,this.isActive())){var ee=this._map.transform;if(this._delta!==0){var Q=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,he=2/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&he!==0&&(he=1/he);var Se=typeof this._targetZoom=="number"?ee.zoomScale(this._targetZoom):ee.scale;this._targetZoom=Math.min(ee.maxZoom,Math.max(ee.minZoom,ee.scaleZoom(Se*he))),this._type==="wheel"&&(this._startZoom=ee.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Fe,We=typeof this._targetZoom=="number"?this._targetZoom:ee.zoom,it=this._startZoom,dt=this._easing,Ft=!1;if(this._type==="wheel"&&it&&dt){var Qt=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),nr=dt(Qt);Fe=t.number(it,We,nr),Qt<1?this._frameId||(this._frameId=!0):Ft=!0}else Fe=We,Ft=!0;return this._active=!0,Ft&&(this._active=!1,this._finishTimeout=setTimeout(function(){K._zooming=!1,K._handler._triggerRenderFrame(),delete K._targetZoom,delete K._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ft,zoomDelta:Fe-ee.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ui.prototype._smoothOutEasing=function(K){var ee=t.ease;if(this._prevEase){var Q=this._prevEase,he=(t.browser.now()-Q.start)/Q.duration,Se=Q.easing(he+.01)-Q.easing(he),Fe=.27/Math.sqrt(Se*Se+1e-4)*.01,We=Math.sqrt(.0729-Fe*Fe);ee=t.bezier(Fe,We,.25,1)}return this._prevEase={start:t.browser.now(),duration:K,easing:ee},ee},ui.prototype.reset=function(){this._active=!1};var cu=function(K,ee){this._clickZoom=K,this._tapZoom=ee};cu.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},cu.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},cu.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},cu.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Eo=function(){this.reset()};Eo.prototype.reset=function(){this._active=!1},Eo.prototype.dblclick=function(K,ee){return K.preventDefault(),{cameraAnimation:function(Q){Q.easeTo({duration:300,zoom:Q.getZoom()+(K.shiftKey?-1:1),around:Q.unproject(ee)},{originalEvent:K})}}},Eo.prototype.enable=function(){this._enabled=!0},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active};var Ls=function(){this._tap=new kl({numTouches:1,numTaps:1}),this.reset()};Ls.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ls.prototype.touchstart=function(K,ee,Q){this._swipePoint||(this._tapTime&&K.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?Q.length>0&&(this._swipePoint=ee[0],this._swipeTouch=Q[0].identifier):this._tap.touchstart(K,ee,Q))},Ls.prototype.touchmove=function(K,ee,Q){if(this._tapTime){if(this._swipePoint){if(Q[0].identifier!==this._swipeTouch)return;var he=ee[0],Se=he.y-this._swipePoint.y;return this._swipePoint=he,K.preventDefault(),this._active=!0,{zoomDelta:Se/128}}}else this._tap.touchmove(K,ee,Q)},Ls.prototype.touchend=function(K,ee,Q){this._tapTime?this._swipePoint&&Q.length===0&&this.reset():this._tap.touchend(K,ee,Q)&&(this._tapTime=K.timeStamp)},Ls.prototype.touchcancel=function(){this.reset()},Ls.prototype.enable=function(){this._enabled=!0},Ls.prototype.disable=function(){this._enabled=!1,this.reset()},Ls.prototype.isEnabled=function(){return this._enabled},Ls.prototype.isActive=function(){return this._active};var fu=function(K,ee,Q){this._el=K,this._mousePan=ee,this._touchPan=Q};fu.prototype.enable=function(K){this._inertiaOptions=K||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},fu.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},fu.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},fu.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ol=function(K,ee,Q){this._pitchWithRotate=K.pitchWithRotate,this._mouseRotate=ee,this._mousePitch=Q};ol.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ol.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ol.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ol.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var eo=function(K,ee,Q,he){this._el=K,this._touchZoom=ee,this._touchRotate=Q,this._tapDragZoom=he,this._rotationDisabled=!1,this._enabled=!0};eo.prototype.enable=function(K){this._touchZoom.enable(K),this._rotationDisabled||this._touchRotate.enable(K),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},eo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},eo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},eo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},eo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},eo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Cl=function(K){return K.zoom||K.drag||K.pitch||K.rotate},ma=function(K){function ee(){K.apply(this,arguments)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee}(t.Event);function ka(K){return K.panDelta&&K.panDelta.mag()||K.zoomDelta||K.bearingDelta||K.pitchDelta}var Bi=function(K,ee){this._map=K,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ul(K),this._bearingSnap=ee.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ee),t.bindAll(["handleEvent","handleWindowEvent"],this);var Q=this._el;this._listeners=[[Q,"touchstart",{passive:!1}],[Q,"touchmove",{passive:!1}],[Q,"touchend",void 0],[Q,"touchcancel",void 0],[Q,"mousedown",void 0],[Q,"mousemove",void 0],[Q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[Q,"mouseover",void 0],[Q,"mouseout",void 0],[Q,"dblclick",void 0],[Q,"click",void 0],[Q,"keydown",{capture:!1}],[Q,"keyup",void 0],[Q,"wheel",{passive:!1}],[Q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var he=0,Se=this._listeners;he<Se.length;he+=1){var Fe=Se[he],We=Fe[0];n.addEventListener(We,Fe[1],We===t.window.document?this.handleWindowEvent:this.handleEvent,Fe[2])}};Bi.prototype.destroy=function(){for(var K=0,ee=this._listeners;K<ee.length;K+=1){var Q=ee[K],he=Q[0];n.removeEventListener(he,Q[1],he===t.window.document?this.handleWindowEvent:this.handleEvent,Q[2])}},Bi.prototype._addDefaultHandlers=function(K){var ee=this._map,Q=ee.getCanvasContainer();this._add("mapEvent",new io(ee,K));var he=ee.boxZoom=new ss(ee,K);this._add("boxZoom",he);var Se=new ea,Fe=new Eo;ee.doubleClickZoom=new cu(Fe,Se),this._add("tapZoom",Se),this._add("clickZoom",Fe);var We=new Ls;this._add("tapDragZoom",We);var it=ee.touchPitch=new Pc;this._add("touchPitch",it);var dt=new Sl(K),Ft=new Vl(K);ee.dragRotate=new ol(K,dt,Ft),this._add("mouseRotate",dt,["mousePitch"]),this._add("mousePitch",Ft,["mouseRotate"]);var Qt=new hf(K),nr=new ls(K);ee.dragPan=new fu(Q,Qt,nr),this._add("mousePan",Qt),this._add("touchPan",nr,["touchZoom","touchRotate"]);var ur=new Ec,yr=new Zs;ee.touchZoomRotate=new eo(Q,yr,ur,We),this._add("touchRotate",ur,["touchPan","touchZoom"]),this._add("touchZoom",yr,["touchPan","touchRotate"]);var br=ee.scrollZoom=new ui(ee,this);this._add("scrollZoom",br,["mousePan"]);var Pr=ee.keyboard=new Co;this._add("keyboard",Pr),this._add("blockableMapEvent",new Ho(ee));for(var gr=0,Cr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];gr<Cr.length;gr+=1){var Nr=Cr[gr];K.interactive&&K[Nr]&&ee[Nr].enable(K[Nr])}},Bi.prototype._add=function(K,ee,Q){this._handlers.push({handlerName:K,handler:ee,allowed:Q}),this._handlersById[K]=ee},Bi.prototype.stop=function(){if(!this._updatingCamera){for(var K=0,ee=this._handlers;K<ee.length;K+=1)ee[K].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Bi.prototype.isActive=function(){for(var K=0,ee=this._handlers;K<ee.length;K+=1)if(ee[K].handler.isActive())return!0;return!1},Bi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Bi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Bi.prototype.isMoving=function(){return Boolean(Cl(this._eventsInProgress))||this.isZooming()},Bi.prototype._blockedByActive=function(K,ee,Q){for(var he in K)if(he!==Q&&(!ee||ee.indexOf(he)<0))return!0;return!1},Bi.prototype.handleWindowEvent=function(K){this.handleEvent(K,K.type+"Window")},Bi.prototype._getMapTouches=function(K){for(var ee=[],Q=0,he=K;Q<he.length;Q+=1){var Se=he[Q];this._el.contains(Se.target)&&ee.push(Se)}return ee},Bi.prototype.handleEvent=function(K,ee){if(K.type!=="blur"){this._updatingCamera=!0;for(var Q=K.type==="renderFrame"?void 0:K,he={needsRenderFrame:!1},Se={},Fe={},We=K.touches?this._getMapTouches(K.touches):void 0,it=We?n.touchPos(this._el,We):n.mousePos(this._el,K),dt=0,Ft=this._handlers;dt<Ft.length;dt+=1){var Qt=Ft[dt],nr=Qt.handlerName,ur=Qt.handler,yr=Qt.allowed;if(ur.isEnabled()){var br=void 0;this._blockedByActive(Fe,yr,nr)?ur.reset():ur[ee||K.type]&&(br=ur[ee||K.type](K,it,We),this.mergeHandlerResult(he,Se,br,nr,Q),br&&br.needsRenderFrame&&this._triggerRenderFrame()),(br||ur.isActive())&&(Fe[nr]=ur)}}var Pr={};for(var gr in this._previousActiveHandlers)Fe[gr]||(Pr[gr]=Q);this._previousActiveHandlers=Fe,(Object.keys(Pr).length||ka(he))&&(this._changes.push([he,Se,Pr]),this._triggerRenderFrame()),(Object.keys(Fe).length||ka(he))&&this._map._stop(!0),this._updatingCamera=!1;var Cr=he.cameraAnimation;Cr&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Cr(this._map))}else this.stop()},Bi.prototype.mergeHandlerResult=function(K,ee,Q,he,Se){if(Q){t.extend(K,Q);var Fe={handlerName:he,originalEvent:Q.originalEvent||Se};Q.zoomDelta!==void 0&&(ee.zoom=Fe),Q.panDelta!==void 0&&(ee.drag=Fe),Q.pitchDelta!==void 0&&(ee.pitch=Fe),Q.bearingDelta!==void 0&&(ee.rotate=Fe)}},Bi.prototype._applyChanges=function(){for(var K={},ee={},Q={},he=0,Se=this._changes;he<Se.length;he+=1){var Fe=Se[he],We=Fe[0],it=Fe[1],dt=Fe[2];We.panDelta&&(K.panDelta=(K.panDelta||new t.Point(0,0))._add(We.panDelta)),We.zoomDelta&&(K.zoomDelta=(K.zoomDelta||0)+We.zoomDelta),We.bearingDelta&&(K.bearingDelta=(K.bearingDelta||0)+We.bearingDelta),We.pitchDelta&&(K.pitchDelta=(K.pitchDelta||0)+We.pitchDelta),We.around!==void 0&&(K.around=We.around),We.pinchAround!==void 0&&(K.pinchAround=We.pinchAround),We.noInertia&&(K.noInertia=We.noInertia),t.extend(ee,it),t.extend(Q,dt)}this._updateMapTransform(K,ee,Q),this._changes=[]},Bi.prototype._updateMapTransform=function(K,ee,Q){var he=this._map,Se=he.transform;if(!ka(K))return this._fireEvents(ee,Q);var Fe=K.panDelta,We=K.zoomDelta,it=K.bearingDelta,dt=K.pitchDelta,Ft=K.around,Qt=K.pinchAround;Qt!==void 0&&(Ft=Qt),he._stop(!0),Ft=Ft||he.transform.centerPoint;var nr=Se.pointLocation(Fe?Ft.sub(Fe):Ft);it&&(Se.bearing+=it),dt&&(Se.pitch+=dt),We&&(Se.zoom+=We),Se.setLocationAtPoint(nr,Ft),this._map._update(),K.noInertia||this._inertia.record(K),this._fireEvents(ee,Q)},Bi.prototype._fireEvents=function(K,ee){var Q=this,he=Cl(this._eventsInProgress),Se=Cl(K),Fe={};for(var We in K)this._eventsInProgress[We]||(Fe[We+"start"]=K[We].originalEvent),this._eventsInProgress[We]=K[We];for(var it in!he&&Se&&this._fireEvent("movestart",Se.originalEvent),Fe)this._fireEvent(it,Fe[it]);for(var dt in K.rotate&&(this._bearingChanged=!0),Se&&this._fireEvent("move",Se.originalEvent),K)this._fireEvent(dt,K[dt].originalEvent);var Ft,Qt={};for(var nr in this._eventsInProgress){var ur=this._eventsInProgress[nr],yr=ur.handlerName,br=ur.originalEvent;this._handlersById[yr].isActive()||(delete this._eventsInProgress[nr],Qt[nr+"end"]=Ft=ee[yr]||br)}for(var Pr in Qt)this._fireEvent(Pr,Qt[Pr]);var gr=Cl(this._eventsInProgress);if((he||Se)&&!gr){this._updatingCamera=!0;var Cr=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Nr=function(Qr){return Qr!==0&&-Q._bearingSnap<Qr&&Qr<Q._bearingSnap};Cr?(Nr(Cr.bearing||this._map.getBearing())&&(Cr.bearing=0),this._map.easeTo(Cr,{originalEvent:Ft})):(this._map.fire(new t.Event("moveend",{originalEvent:Ft})),Nr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Bi.prototype._fireEvent=function(K,ee){this._map.fire(new t.Event(K,ee?{originalEvent:ee}:{}))},Bi.prototype._triggerRenderFrame=function(){var K=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ee){delete K._frameId,K.handleEvent(new ma("renderFrame",{timeStamp:ee})),K._applyChanges()}))};var Hl=function(K){function ee(Q,he){K.call(this),this._moving=!1,this._zooming=!1,this.transform=Q,this._bearingSnap=he.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},ee.prototype.setCenter=function(Q,he){return this.jumpTo({center:Q},he)},ee.prototype.panBy=function(Q,he,Se){return Q=t.Point.convert(Q).mult(-1),this.panTo(this.transform.center,t.extend({offset:Q},he),Se)},ee.prototype.panTo=function(Q,he,Se){return this.easeTo(t.extend({center:Q},he),Se)},ee.prototype.getZoom=function(){return this.transform.zoom},ee.prototype.setZoom=function(Q,he){return this.jumpTo({zoom:Q},he),this},ee.prototype.zoomTo=function(Q,he,Se){return this.easeTo(t.extend({zoom:Q},he),Se)},ee.prototype.zoomIn=function(Q,he){return this.zoomTo(this.getZoom()+1,Q,he),this},ee.prototype.zoomOut=function(Q,he){return this.zoomTo(this.getZoom()-1,Q,he),this},ee.prototype.getBearing=function(){return this.transform.bearing},ee.prototype.setBearing=function(Q,he){return this.jumpTo({bearing:Q},he),this},ee.prototype.getPadding=function(){return this.transform.padding},ee.prototype.setPadding=function(Q,he){return this.jumpTo({padding:Q},he),this},ee.prototype.rotateTo=function(Q,he,Se){return this.easeTo(t.extend({bearing:Q},he),Se)},ee.prototype.resetNorth=function(Q,he){return this.rotateTo(0,t.extend({duration:1e3},Q),he),this},ee.prototype.resetNorthPitch=function(Q,he){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},Q),he),this},ee.prototype.snapToNorth=function(Q,he){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Q,he):this},ee.prototype.getPitch=function(){return this.transform.pitch},ee.prototype.setPitch=function(Q,he){return this.jumpTo({pitch:Q},he),this},ee.prototype.cameraForBounds=function(Q,he){return Q=t.LngLatBounds.convert(Q),this._cameraForBoxAndBearing(Q.getNorthWest(),Q.getSouthEast(),0,he)},ee.prototype._cameraForBoxAndBearing=function(Q,he,Se,Fe){var We={top:0,bottom:0,right:0,left:0};if(typeof(Fe=t.extend({padding:We,offset:[0,0],maxZoom:this.transform.maxZoom},Fe)).padding=="number"){var it=Fe.padding;Fe.padding={top:it,bottom:it,right:it,left:it}}Fe.padding=t.extend(We,Fe.padding);var dt=this.transform,Ft=dt.padding,Qt=dt.project(t.LngLat.convert(Q)),nr=dt.project(t.LngLat.convert(he)),ur=Qt.rotate(-Se*Math.PI/180),yr=nr.rotate(-Se*Math.PI/180),br=new t.Point(Math.max(ur.x,yr.x),Math.max(ur.y,yr.y)),Pr=new t.Point(Math.min(ur.x,yr.x),Math.min(ur.y,yr.y)),gr=br.sub(Pr),Cr=(dt.width-(Ft.left+Ft.right+Fe.padding.left+Fe.padding.right))/gr.x,Nr=(dt.height-(Ft.top+Ft.bottom+Fe.padding.top+Fe.padding.bottom))/gr.y;if(!(Nr<0||Cr<0)){var Qr=Math.min(dt.scaleZoom(dt.scale*Math.min(Cr,Nr)),Fe.maxZoom),bn=t.Point.convert(Fe.offset),un=new t.Point(bn.x+(Fe.padding.left-Fe.padding.right)/2,bn.y+(Fe.padding.top-Fe.padding.bottom)/2).mult(dt.scale/dt.zoomScale(Qr));return{center:dt.unproject(Qt.add(nr).div(2).sub(un)),zoom:Qr,bearing:Se}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},ee.prototype.fitBounds=function(Q,he,Se){return this._fitInternal(this.cameraForBounds(Q,he),he,Se)},ee.prototype.fitScreenCoordinates=function(Q,he,Se,Fe,We){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(Q)),this.transform.pointLocation(t.Point.convert(he)),Se,Fe),Fe,We)},ee.prototype._fitInternal=function(Q,he,Se){return Q?(delete(he=t.extend(Q,he)).padding,he.linear?this.easeTo(he,Se):this.flyTo(he,Se)):this},ee.prototype.jumpTo=function(Q,he){this.stop();var Se=this.transform,Fe=!1,We=!1,it=!1;return"zoom"in Q&&Se.zoom!==+Q.zoom&&(Fe=!0,Se.zoom=+Q.zoom),Q.center!==void 0&&(Se.center=t.LngLat.convert(Q.center)),"bearing"in Q&&Se.bearing!==+Q.bearing&&(We=!0,Se.bearing=+Q.bearing),"pitch"in Q&&Se.pitch!==+Q.pitch&&(it=!0,Se.pitch=+Q.pitch),Q.padding==null||Se.isPaddingEqual(Q.padding)||(Se.padding=Q.padding),this.fire(new t.Event("movestart",he)).fire(new t.Event("move",he)),Fe&&this.fire(new t.Event("zoomstart",he)).fire(new t.Event("zoom",he)).fire(new t.Event("zoomend",he)),We&&this.fire(new t.Event("rotatestart",he)).fire(new t.Event("rotate",he)).fire(new t.Event("rotateend",he)),it&&this.fire(new t.Event("pitchstart",he)).fire(new t.Event("pitch",he)).fire(new t.Event("pitchend",he)),this.fire(new t.Event("moveend",he))},ee.prototype.easeTo=function(Q,he){var Se=this;this._stop(!1,Q.easeId),((Q=t.extend({offset:[0,0],duration:500,easing:t.ease},Q)).animate===!1||!Q.essential&&t.browser.prefersReducedMotion)&&(Q.duration=0);var Fe=this.transform,We=this.getZoom(),it=this.getBearing(),dt=this.getPitch(),Ft=this.getPadding(),Qt="zoom"in Q?+Q.zoom:We,nr="bearing"in Q?this._normalizeBearing(Q.bearing,it):it,ur="pitch"in Q?+Q.pitch:dt,yr="padding"in Q?Q.padding:Fe.padding,br=t.Point.convert(Q.offset),Pr=Fe.centerPoint.add(br),gr=Fe.pointLocation(Pr),Cr=t.LngLat.convert(Q.center||gr);this._normalizeCenter(Cr);var Nr,Qr,bn=Fe.project(gr),un=Fe.project(Cr).sub(bn),xn=Fe.zoomScale(Qt-We);Q.around&&(Nr=t.LngLat.convert(Q.around),Qr=Fe.locationPoint(Nr));var zn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Qt!==We,this._rotating=this._rotating||it!==nr,this._pitching=this._pitching||ur!==dt,this._padding=!Fe.isPaddingEqual(yr),this._easeId=Q.easeId,this._prepareEase(he,Q.noMoveStart,zn),clearTimeout(this._easeEndTimeoutID),this._ease(function(Jn){if(Se._zooming&&(Fe.zoom=t.number(We,Qt,Jn)),Se._rotating&&(Fe.bearing=t.number(it,nr,Jn)),Se._pitching&&(Fe.pitch=t.number(dt,ur,Jn)),Se._padding&&(Fe.interpolatePadding(Ft,yr,Jn),Pr=Fe.centerPoint.add(br)),Nr)Fe.setLocationAtPoint(Nr,Qr);else{var Hn=Fe.zoomScale(Fe.zoom-We),qn=Qt>We?Math.min(2,xn):Math.max(.5,xn),ua=Math.pow(qn,1-Jn),za=Fe.unproject(bn.add(un.mult(Jn*ua)).mult(Hn));Fe.setLocationAtPoint(Fe.renderWorldCopies?za.wrap():za,Pr)}Se._fireMoveEvents(he)},function(Jn){Se._afterEase(he,Jn)},Q),this},ee.prototype._prepareEase=function(Q,he,Se){Se===void 0&&(Se={}),this._moving=!0,he||Se.moving||this.fire(new t.Event("movestart",Q)),this._zooming&&!Se.zooming&&this.fire(new t.Event("zoomstart",Q)),this._rotating&&!Se.rotating&&this.fire(new t.Event("rotatestart",Q)),this._pitching&&!Se.pitching&&this.fire(new t.Event("pitchstart",Q))},ee.prototype._fireMoveEvents=function(Q){this.fire(new t.Event("move",Q)),this._zooming&&this.fire(new t.Event("zoom",Q)),this._rotating&&this.fire(new t.Event("rotate",Q)),this._pitching&&this.fire(new t.Event("pitch",Q))},ee.prototype._afterEase=function(Q,he){if(!this._easeId||!he||this._easeId!==he){delete this._easeId;var Se=this._zooming,Fe=this._rotating,We=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Se&&this.fire(new t.Event("zoomend",Q)),Fe&&this.fire(new t.Event("rotateend",Q)),We&&this.fire(new t.Event("pitchend",Q)),this.fire(new t.Event("moveend",Q))}},ee.prototype.flyTo=function(Q,he){var Se=this;if(!Q.essential&&t.browser.prefersReducedMotion){var Fe=t.pick(Q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,he)}this.stop(),Q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},Q);var We=this.transform,it=this.getZoom(),dt=this.getBearing(),Ft=this.getPitch(),Qt=this.getPadding(),nr="zoom"in Q?t.clamp(+Q.zoom,We.minZoom,We.maxZoom):it,ur="bearing"in Q?this._normalizeBearing(Q.bearing,dt):dt,yr="pitch"in Q?+Q.pitch:Ft,br="padding"in Q?Q.padding:We.padding,Pr=We.zoomScale(nr-it),gr=t.Point.convert(Q.offset),Cr=We.centerPoint.add(gr),Nr=We.pointLocation(Cr),Qr=t.LngLat.convert(Q.center||Nr);this._normalizeCenter(Qr);var bn=We.project(Nr),un=We.project(Qr).sub(bn),xn=Q.curve,zn=Math.max(We.width,We.height),Jn=zn/Pr,Hn=un.mag();if("minZoom"in Q){var qn=t.clamp(Math.min(Q.minZoom,it,nr),We.minZoom,We.maxZoom),ua=zn/We.zoomScale(qn-it);xn=Math.sqrt(ua/Hn*2)}var za=xn*xn;function Ca(Ia){var pa=(Jn*Jn-zn*zn+(Ia?-1:1)*za*za*Hn*Hn)/(2*(Ia?Jn:zn)*za*Hn);return Math.log(Math.sqrt(pa*pa+1)-pa)}function qa(Ia){return(Math.exp(Ia)-Math.exp(-Ia))/2}function ha(Ia){return(Math.exp(Ia)+Math.exp(-Ia))/2}var Ba=Ca(0),$a=function(Ia){return ha(Ba)/ha(Ba+xn*Ia)},Ua=function(Ia){return zn*((ha(Ba)*(qa(pa=Ba+xn*Ia)/ha(pa))-qa(Ba))/za)/Hn;var pa},Da=(Ca(1)-Ba)/xn;if(Math.abs(Hn)<1e-6||!isFinite(Da)){if(Math.abs(zn-Jn)<1e-6)return this.easeTo(Q,he);var Qa=Jn<zn?-1:1;Da=Math.abs(Math.log(Jn/zn))/xn,Ua=function(){return 0},$a=function(Ia){return Math.exp(Qa*xn*Ia)}}return Q.duration="duration"in Q?+Q.duration:1e3*Da/("screenSpeed"in Q?+Q.screenSpeed/xn:+Q.speed),Q.maxDuration&&Q.duration>Q.maxDuration&&(Q.duration=0),this._zooming=!0,this._rotating=dt!==ur,this._pitching=yr!==Ft,this._padding=!We.isPaddingEqual(br),this._prepareEase(he,!1),this._ease(function(Ia){var pa=Ia*Da,po=1/$a(pa);We.zoom=Ia===1?nr:it+We.scaleZoom(po),Se._rotating&&(We.bearing=t.number(dt,ur,Ia)),Se._pitching&&(We.pitch=t.number(Ft,yr,Ia)),Se._padding&&(We.interpolatePadding(Qt,br,Ia),Cr=We.centerPoint.add(gr));var Qi=Ia===1?Qr:We.unproject(bn.add(un.mult(Ua(pa))).mult(po));We.setLocationAtPoint(We.renderWorldCopies?Qi.wrap():Qi,Cr),Se._fireMoveEvents(he)},function(){return Se._afterEase(he)},Q),this},ee.prototype.isEasing=function(){return!!this._easeFrameId},ee.prototype.stop=function(){return this._stop()},ee.prototype._stop=function(Q,he){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Se=this._onEaseEnd;delete this._onEaseEnd,Se.call(this,he)}if(!Q){var Fe=this.handlers;Fe&&Fe.stop()}return this},ee.prototype._ease=function(Q,he,Se){Se.animate===!1||Se.duration===0?(Q(1),he()):(this._easeStart=t.browser.now(),this._easeOptions=Se,this._onEaseFrame=Q,this._onEaseEnd=he,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},ee.prototype._renderFrameCallback=function(){var Q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Q)),Q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},ee.prototype._normalizeBearing=function(Q,he){Q=t.wrap(Q,-180,180);var Se=Math.abs(Q-he);return Math.abs(Q-360-he)<Se&&(Q-=360),Math.abs(Q+360-he)<Se&&(Q+=360),Q},ee.prototype._normalizeCenter=function(Q){var he=this.transform;if(he.renderWorldCopies&&!he.lngRange){var Se=Q.lng-he.center.lng;Q.lng+=Se>180?-360:Se<-180?360:0}},ee}(t.Evented),wo=function(K){K===void 0&&(K={}),this.options=K,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};wo.prototype.getDefaultPosition=function(){return"bottom-right"},wo.prototype.onAdd=function(K){var ee=this.options&&this.options.compact;return this._map=K,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),ee&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ee===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},wo.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},wo.prototype._updateEditLink=function(){var K=this._editLink;K||(K=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ee=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(K){var Q=ee.reduce(function(he,Se,Fe){return Se.value&&(he+=Se.key+"="+Se.value+(Fe<ee.length-1?"&":"")),he},"?");K.href=t.config.FEEDBACK_URL+"/"+Q+(this._map._hash?this._map._hash.getHashString(!0):""),K.rel="noopener nofollow"}},wo.prototype._updateData=function(K){!K||K.sourceDataType!=="metadata"&&K.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},wo.prototype._updateAttributions=function(){if(this._map.style){var K=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?K=K.concat(this.options.customAttribution.map(function(it){return typeof it!="string"?"":it})):typeof this.options.customAttribution=="string"&&K.push(this.options.customAttribution)),this._map.style.stylesheet){var ee=this._map.style.stylesheet;this.styleOwner=ee.owner,this.styleId=ee.id}var Q=this._map.style.sourceCaches;for(var he in Q){var Se=Q[he];if(Se.used){var Fe=Se.getSource();Fe.attribution&&K.indexOf(Fe.attribution)<0&&K.push(Fe.attribution)}}K.sort(function(it,dt){return it.length-dt.length});var We=(K=K.filter(function(it,dt){for(var Ft=dt+1;Ft<K.length;Ft++)if(K[Ft].indexOf(it)>=0)return!1;return!0})).join(" | ");We!==this._attribHTML&&(this._attribHTML=We,K.length?(this._innerContainer.innerHTML=We,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},wo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var $i=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};$i.prototype.onAdd=function(K){this._map=K,this._container=n.create("div","mapboxgl-ctrl");var ee=n.create("a","mapboxgl-ctrl-logo");return ee.target="_blank",ee.rel="noopener nofollow",ee.href="https://www.mapbox.com/",ee.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ee.setAttribute("rel","noopener nofollow"),this._container.appendChild(ee),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},$i.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},$i.prototype.getDefaultPosition=function(){return"bottom-left"},$i.prototype._updateLogo=function(K){K&&K.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},$i.prototype._logoRequired=function(){if(this._map.style){var K=this._map.style.sourceCaches;for(var ee in K)if(K[ee].getSource().mapbox_logo)return!0;return!1}},$i.prototype._updateCompact=function(){var K=this._container.children;if(K.length){var ee=K[0];this._map.getCanvasContainer().offsetWidth<250?ee.classList.add("mapboxgl-compact"):ee.classList.remove("mapboxgl-compact")}};var Go=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Go.prototype.add=function(K){var ee=++this._id;return this._queue.push({callback:K,id:ee,cancelled:!1}),ee},Go.prototype.remove=function(K){for(var ee=this._currentlyRunning,Q=0,he=ee?this._queue.concat(ee):this._queue;Q<he.length;Q+=1){var Se=he[Q];if(Se.id===K)return void(Se.cancelled=!0)}},Go.prototype.run=function(K){K===void 0&&(K=0);var ee=this._currentlyRunning=this._queue;this._queue=[];for(var Q=0,he=ee;Q<he.length;Q+=1){var Se=he[Q];if(!Se.cancelled&&(Se.callback(K),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Go.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var cp={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Rc=t.window.HTMLImageElement,Ti=t.window.HTMLElement,Oi=t.window.ImageBitmap,Ru={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ic=function(K){function ee(he){var Se=this;if((he=t.extend({},Ru,he)).minZoom!=null&&he.maxZoom!=null&&he.minZoom>he.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(he.minPitch!=null&&he.maxPitch!=null&&he.minPitch>he.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(he.minPitch!=null&&he.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(he.maxPitch!=null&&he.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Fe=new ti(he.minZoom,he.maxZoom,he.minPitch,he.maxPitch,he.renderWorldCopies);if(K.call(this,Fe,he),this._interactive=he.interactive,this._maxTileCacheSize=he.maxTileCacheSize,this._failIfMajorPerformanceCaveat=he.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=he.preserveDrawingBuffer,this._antialias=he.antialias,this._trackResize=he.trackResize,this._bearingSnap=he.bearingSnap,this._refreshExpiredTiles=he.refreshExpiredTiles,this._fadeDuration=he.fadeDuration,this._crossSourceCollisions=he.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=he.collectResourceTiming,this._renderTaskQueue=new Go,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},cp,he.locale),this._requestManager=new t.RequestManager(he.transformRequest,he.accessToken),typeof he.container=="string"){if(this._container=t.window.document.getElementById(he.container),!this._container)throw new Error("Container '"+he.container+"' not found.")}else{if(!(he.container instanceof Ti))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=he.container}if(he.maxBounds&&this.setMaxBounds(he.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return Se._update(!1)}),this.on("moveend",function(){return Se._update(!1)}),this.on("zoom",function(){return Se._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Bi(this,he),this._hash=he.hash&&new Uo(typeof he.hash=="string"&&he.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:he.center,zoom:he.zoom,bearing:he.bearing,pitch:he.pitch}),he.bounds&&(this.resize(),this.fitBounds(he.bounds,t.extend({},he.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=he.localIdeographFontFamily,he.style&&this.setStyle(he.style,{localIdeographFontFamily:he.localIdeographFontFamily}),he.attributionControl&&this.addControl(new wo({customAttribution:he.customAttribution})),this.addControl(new $i,he.logoPosition),this.on("style.load",function(){Se.transform.unmodified&&Se.jumpTo(Se.style.stylesheet)}),this.on("data",function(We){Se._update(We.dataType==="style"),Se.fire(new t.Event(We.dataType+"data",We))}),this.on("dataloading",function(We){Se.fire(new t.Event(We.dataType+"dataloading",We))})}K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee;var Q={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return ee.prototype._getMapId=function(){return this._mapId},ee.prototype.addControl=function(he,Se){if(Se===void 0&&he.getDefaultPosition&&(Se=he.getDefaultPosition()),Se===void 0&&(Se="top-right"),!he||!he.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Fe=he.onAdd(this);this._controls.push(he);var We=this._controlPositions[Se];return Se.indexOf("bottom")!==-1?We.insertBefore(Fe,We.firstChild):We.appendChild(Fe),this},ee.prototype.removeControl=function(he){if(!he||!he.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Se=this._controls.indexOf(he);return Se>-1&&this._controls.splice(Se,1),he.onRemove(this),this},ee.prototype.resize=function(he){var Se=this._containerDimensions(),Fe=Se[0],We=Se[1];this._resizeCanvas(Fe,We),this.transform.resize(Fe,We),this.painter.resize(Fe,We);var it=!this._moving;return it&&(this.stop(),this.fire(new t.Event("movestart",he)).fire(new t.Event("move",he))),this.fire(new t.Event("resize",he)),it&&this.fire(new t.Event("moveend",he)),this},ee.prototype.getBounds=function(){return this.transform.getBounds()},ee.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},ee.prototype.setMaxBounds=function(he){return this.transform.setMaxBounds(t.LngLatBounds.convert(he)),this._update()},ee.prototype.setMinZoom=function(he){if((he=he==null?-2:he)>=-2&&he<=this.transform.maxZoom)return this.transform.minZoom=he,this._update(),this.getZoom()<he&&this.setZoom(he),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},ee.prototype.getMinZoom=function(){return this.transform.minZoom},ee.prototype.setMaxZoom=function(he){if((he=he==null?22:he)>=this.transform.minZoom)return this.transform.maxZoom=he,this._update(),this.getZoom()>he&&this.setZoom(he),this;throw new Error("maxZoom must be greater than the current minZoom")},ee.prototype.getMaxZoom=function(){return this.transform.maxZoom},ee.prototype.setMinPitch=function(he){if((he=he==null?0:he)<0)throw new Error("minPitch must be greater than or equal to 0");if(he>=0&&he<=this.transform.maxPitch)return this.transform.minPitch=he,this._update(),this.getPitch()<he&&this.setPitch(he),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},ee.prototype.getMinPitch=function(){return this.transform.minPitch},ee.prototype.setMaxPitch=function(he){if((he=he==null?60:he)>60)throw new Error("maxPitch must be less than or equal to 60");if(he>=this.transform.minPitch)return this.transform.maxPitch=he,this._update(),this.getPitch()>he&&this.setPitch(he),this;throw new Error("maxPitch must be greater than the current minPitch")},ee.prototype.getMaxPitch=function(){return this.transform.maxPitch},ee.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},ee.prototype.setRenderWorldCopies=function(he){return this.transform.renderWorldCopies=he,this._update()},ee.prototype.project=function(he){return this.transform.locationPoint(t.LngLat.convert(he))},ee.prototype.unproject=function(he){return this.transform.pointLocation(t.Point.convert(he))},ee.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},ee.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},ee.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},ee.prototype._createDelegatedListener=function(he,Se,Fe){var We,it=this;if(he==="mouseenter"||he==="mouseover"){var dt=!1;return{layer:Se,listener:Fe,delegates:{mousemove:function(Qt){var nr=it.getLayer(Se)?it.queryRenderedFeatures(Qt.point,{layers:[Se]}):[];nr.length?dt||(dt=!0,Fe.call(it,new So(he,it,Qt.originalEvent,{features:nr}))):dt=!1},mouseout:function(){dt=!1}}}}if(he==="mouseleave"||he==="mouseout"){var Ft=!1;return{layer:Se,listener:Fe,delegates:{mousemove:function(Qt){(it.getLayer(Se)?it.queryRenderedFeatures(Qt.point,{layers:[Se]}):[]).length?Ft=!0:Ft&&(Ft=!1,Fe.call(it,new So(he,it,Qt.originalEvent)))},mouseout:function(Qt){Ft&&(Ft=!1,Fe.call(it,new So(he,it,Qt.originalEvent)))}}}}return{layer:Se,listener:Fe,delegates:(We={},We[he]=function(Qt){var nr=it.getLayer(Se)?it.queryRenderedFeatures(Qt.point,{layers:[Se]}):[];nr.length&&(Qt.features=nr,Fe.call(it,Qt),delete Qt.features)},We)}},ee.prototype.on=function(he,Se,Fe){if(Fe===void 0)return K.prototype.on.call(this,he,Se);var We=this._createDelegatedListener(he,Se,Fe);for(var it in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[he]=this._delegatedListeners[he]||[],this._delegatedListeners[he].push(We),We.delegates)this.on(it,We.delegates[it]);return this},ee.prototype.once=function(he,Se,Fe){if(Fe===void 0)return K.prototype.once.call(this,he,Se);var We=this._createDelegatedListener(he,Se,Fe);for(var it in We.delegates)this.once(it,We.delegates[it]);return this},ee.prototype.off=function(he,Se,Fe){var We=this;return Fe===void 0?K.prototype.off.call(this,he,Se):(this._delegatedListeners&&this._delegatedListeners[he]&&function(it){for(var dt=it[he],Ft=0;Ft<dt.length;Ft++){var Qt=dt[Ft];if(Qt.layer===Se&&Qt.listener===Fe){for(var nr in Qt.delegates)We.off(nr,Qt.delegates[nr]);return dt.splice(Ft,1),We}}}(this._delegatedListeners),this)},ee.prototype.queryRenderedFeatures=function(he,Se){if(!this.style)return[];var Fe;if(Se!==void 0||he===void 0||he instanceof t.Point||Array.isArray(he)||(Se=he,he=void 0),Se=Se||{},(he=he||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof he[0]=="number")Fe=[t.Point.convert(he)];else{var We=t.Point.convert(he[0]),it=t.Point.convert(he[1]);Fe=[We,new t.Point(it.x,We.y),it,new t.Point(We.x,it.y),We]}return this.style.queryRenderedFeatures(Fe,Se,this.transform)},ee.prototype.querySourceFeatures=function(he,Se){return this.style.querySourceFeatures(he,Se)},ee.prototype.setStyle=function(he,Se){return(Se=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Se)).diff!==!1&&Se.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&he?(this._diffStyle(he,Se),this):(this._localIdeographFontFamily=Se.localIdeographFontFamily,this._updateStyle(he,Se))},ee.prototype._getUIString=function(he){var Se=this._locale[he];if(Se==null)throw new Error("Missing UI string '"+he+"'");return Se},ee.prototype._updateStyle=function(he,Se){return this.style&&(this.style.setEventedParent(null),this.style._remove()),he?(this.style=new Ur(this,Se||{}),this.style.setEventedParent(this,{style:this.style}),typeof he=="string"?this.style.loadURL(he):this.style.loadJSON(he),this):(delete this.style,this)},ee.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ur(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},ee.prototype._diffStyle=function(he,Se){var Fe=this;if(typeof he=="string"){var We=this._requestManager.normalizeStyleURL(he),it=this._requestManager.transformRequest(We,t.ResourceType.Style);t.getJSON(it,function(dt,Ft){dt?Fe.fire(new t.ErrorEvent(dt)):Ft&&Fe._updateDiff(Ft,Se)})}else typeof he=="object"&&this._updateDiff(he,Se)},ee.prototype._updateDiff=function(he,Se){try{this.style.setState(he)&&this._update(!0)}catch(Fe){t.warnOnce("Unable to perform style diff: "+(Fe.message||Fe.error||Fe)+".  Rebuilding the style from scratch."),this._updateStyle(he,Se)}},ee.prototype.getStyle=function(){if(this.style)return this.style.serialize()},ee.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},ee.prototype.addSource=function(he,Se){return this._lazyInitEmptyStyle(),this.style.addSource(he,Se),this._update(!0)},ee.prototype.isSourceLoaded=function(he){var Se=this.style&&this.style.sourceCaches[he];if(Se!==void 0)return Se.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+he+"'")))},ee.prototype.areTilesLoaded=function(){var he=this.style&&this.style.sourceCaches;for(var Se in he){var Fe=he[Se]._tiles;for(var We in Fe){var it=Fe[We];if(it.state!=="loaded"&&it.state!=="errored")return!1}}return!0},ee.prototype.addSourceType=function(he,Se,Fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(he,Se,Fe)},ee.prototype.removeSource=function(he){return this.style.removeSource(he),this._update(!0)},ee.prototype.getSource=function(he){return this.style.getSource(he)},ee.prototype.addImage=function(he,Se,Fe){Fe===void 0&&(Fe={});var We=Fe.pixelRatio;We===void 0&&(We=1);var it=Fe.sdf;it===void 0&&(it=!1);var dt=Fe.stretchX,Ft=Fe.stretchY,Qt=Fe.content;if(this._lazyInitEmptyStyle(),Se instanceof Rc||Oi&&Se instanceof Oi){var nr=t.browser.getImageData(Se);this.style.addImage(he,{data:new t.RGBAImage({width:nr.width,height:nr.height},nr.data),pixelRatio:We,stretchX:dt,stretchY:Ft,content:Qt,sdf:it,version:0})}else{if(Se.width===void 0||Se.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ur=Se;this.style.addImage(he,{data:new t.RGBAImage({width:Se.width,height:Se.height},new Uint8Array(Se.data)),pixelRatio:We,stretchX:dt,stretchY:Ft,content:Qt,sdf:it,version:0,userImage:ur}),ur.onAdd&&ur.onAdd(this,he)}},ee.prototype.updateImage=function(he,Se){var Fe=this.style.getImage(he);if(!Fe)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var We=Se instanceof Rc||Oi&&Se instanceof Oi?t.browser.getImageData(Se):Se,it=We.width,dt=We.height,Ft=We.data;return it===void 0||dt===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):it!==Fe.data.width||dt!==Fe.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Fe.data.replace(Ft,!(Se instanceof Rc||Oi&&Se instanceof Oi)),void this.style.updateImage(he,Fe))},ee.prototype.hasImage=function(he){return he?!!this.style.getImage(he):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},ee.prototype.removeImage=function(he){this.style.removeImage(he)},ee.prototype.loadImage=function(he,Se){t.getImage(this._requestManager.transformRequest(he,t.ResourceType.Image),Se)},ee.prototype.listImages=function(){return this.style.listImages()},ee.prototype.addLayer=function(he,Se){return this._lazyInitEmptyStyle(),this.style.addLayer(he,Se),this._update(!0)},ee.prototype.moveLayer=function(he,Se){return this.style.moveLayer(he,Se),this._update(!0)},ee.prototype.removeLayer=function(he){return this.style.removeLayer(he),this._update(!0)},ee.prototype.getLayer=function(he){return this.style.getLayer(he)},ee.prototype.setLayerZoomRange=function(he,Se,Fe){return this.style.setLayerZoomRange(he,Se,Fe),this._update(!0)},ee.prototype.setFilter=function(he,Se,Fe){return Fe===void 0&&(Fe={}),this.style.setFilter(he,Se,Fe),this._update(!0)},ee.prototype.getFilter=function(he){return this.style.getFilter(he)},ee.prototype.setPaintProperty=function(he,Se,Fe,We){return We===void 0&&(We={}),this.style.setPaintProperty(he,Se,Fe,We),this._update(!0)},ee.prototype.getPaintProperty=function(he,Se){return this.style.getPaintProperty(he,Se)},ee.prototype.setLayoutProperty=function(he,Se,Fe,We){return We===void 0&&(We={}),this.style.setLayoutProperty(he,Se,Fe,We),this._update(!0)},ee.prototype.getLayoutProperty=function(he,Se){return this.style.getLayoutProperty(he,Se)},ee.prototype.setLight=function(he,Se){return Se===void 0&&(Se={}),this._lazyInitEmptyStyle(),this.style.setLight(he,Se),this._update(!0)},ee.prototype.getLight=function(){return this.style.getLight()},ee.prototype.setFeatureState=function(he,Se){return this.style.setFeatureState(he,Se),this._update()},ee.prototype.removeFeatureState=function(he,Se){return this.style.removeFeatureState(he,Se),this._update()},ee.prototype.getFeatureState=function(he){return this.style.getFeatureState(he)},ee.prototype.getContainer=function(){return this._container},ee.prototype.getCanvasContainer=function(){return this._canvasContainer},ee.prototype.getCanvas=function(){return this._canvas},ee.prototype._containerDimensions=function(){var he=0,Se=0;return this._container&&(he=this._container.clientWidth||400,Se=this._container.clientHeight||300),[he,Se]},ee.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},ee.prototype._setupContainer=function(){var he=this._container;he.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",he)).style.visibility="hidden",this._detectMissingCSS();var Se=this._canvasContainer=n.create("div","mapboxgl-canvas-container",he);this._interactive&&Se.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Se),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Fe=this._containerDimensions();this._resizeCanvas(Fe[0],Fe[1]);var We=this._controlContainer=n.create("div","mapboxgl-control-container",he),it=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(dt){it[dt]=n.create("div","mapboxgl-ctrl-"+dt,We)})},ee.prototype._resizeCanvas=function(he,Se){var Fe=t.browser.devicePixelRatio||1;this._canvas.width=Fe*he,this._canvas.height=Fe*Se,this._canvas.style.width=he+"px",this._canvas.style.height=Se+"px"},ee.prototype._setupPainter=function(){var he=t.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Se=this._canvas.getContext("webgl",he)||this._canvas.getContext("experimental-webgl",he);Se?(this.painter=new Ra(Se,this.transform),t.webpSupported.testSupport(Se)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},ee.prototype._contextLost=function(he){he.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:he}))},ee.prototype._contextRestored=function(he){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:he}))},ee.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},ee.prototype._update=function(he){return this.style?(this._styleDirty=this._styleDirty||he,this._sourcesDirty=!0,this.triggerRepaint(),this):this},ee.prototype._requestRenderFrame=function(he){return this._update(),this._renderTaskQueue.add(he)},ee.prototype._cancelRenderFrame=function(he){this._renderTaskQueue.remove(he)},ee.prototype._render=function(he){var Se,Fe=this,We=0,it=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Se=it.createQueryEXT(),it.beginQueryEXT(it.TIME_ELAPSED_EXT,Se),We=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(he),!this._removed){var dt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ft=this.transform.zoom,Qt=t.browser.now();this.style.zoomHistory.update(Ft,Qt);var nr=new t.EvaluationParameters(Ft,{now:Qt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ur=nr.crossFadingFactor();ur===1&&ur===this._crossFadingFactor||(dt=!0,this._crossFadingFactor=ur),this.style.update(nr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||dt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var yr=t.browser.now()-We;it.endQueryEXT(it.TIME_ELAPSED_EXT,Se),setTimeout(function(){var Pr=it.getQueryObjectEXT(Se,it.QUERY_RESULT_EXT)/1e6;it.deleteQueryEXT(Se),Fe.fire(new t.Event("gpu-timing-frame",{cpuTime:yr,gpuTime:Pr}))},50)}if(this.listens("gpu-timing-layer")){var br=this.painter.collectGpuTimers();setTimeout(function(){var Pr=Fe.painter.queryGpuTimers(br);Fe.fire(new t.Event("gpu-timing-layer",{layerTimes:Pr}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},ee.prototype.remove=function(){this._hash&&this._hash.remove();for(var he=0,Se=this._controls;he<Se.length;he+=1)Se[he].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Fe=this.painter.context.gl.getExtension("WEBGL_lose_context");Fe&&Fe.loseContext(),er(this._canvasContainer),er(this._controlContainer),er(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},ee.prototype.triggerRepaint=function(){var he=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Se){he._frame=null,he._render(Se)}))},ee.prototype._onWindowOnline=function(){this._update()},ee.prototype._onWindowResize=function(he){this._trackResize&&this.resize({originalEvent:he})._update()},Q.showTileBoundaries.get=function(){return!!this._showTileBoundaries},Q.showTileBoundaries.set=function(he){this._showTileBoundaries!==he&&(this._showTileBoundaries=he,this._update())},Q.showPadding.get=function(){return!!this._showPadding},Q.showPadding.set=function(he){this._showPadding!==he&&(this._showPadding=he,this._update())},Q.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},Q.showCollisionBoxes.set=function(he){this._showCollisionBoxes!==he&&(this._showCollisionBoxes=he,he?this.style._generateCollisionBoxes():this._update())},Q.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},Q.showOverdrawInspector.set=function(he){this._showOverdrawInspector!==he&&(this._showOverdrawInspector=he,this._update())},Q.repaint.get=function(){return!!this._repaint},Q.repaint.set=function(he){this._repaint!==he&&(this._repaint=he,this.triggerRepaint())},Q.vertices.get=function(){return!!this._vertices},Q.vertices.set=function(he){this._vertices=he,this._update()},ee.prototype._setCacheLimits=function(he,Se){t.setCacheLimits(he,Se)},Q.version.get=function(){return t.version},Object.defineProperties(ee.prototype,Q),ee}(Hl);function er(K){K.parentNode&&K.parentNode.removeChild(K)}var Ps={showCompass:!0,showZoom:!0,visualizePitch:!1},rs=function(K){var ee=this;this.options=t.extend({},Ps,K),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Q){return ee._map.zoomIn({},{originalEvent:Q})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Q){return ee._map.zoomOut({},{originalEvent:Q})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Q){ee.options.visualizePitch?ee._map.resetNorthPitch({},{originalEvent:Q}):ee._map.resetNorth({},{originalEvent:Q})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};rs.prototype._updateZoomButtons=function(){var K=this._map.getZoom();this._zoomInButton.disabled=K===this._map.getMaxZoom(),this._zoomOutButton.disabled=K===this._map.getMinZoom()},rs.prototype._rotateCompassArrow=function(){var K=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=K},rs.prototype.onAdd=function(K){return this._map=K,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Si(this._map,this._compass,this.options.visualizePitch)),this._container},rs.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},rs.prototype._createButton=function(K,ee){var Q=n.create("button",K,this._container);return Q.type="button",Q.addEventListener("click",ee),Q},rs.prototype._setButtonTitle=function(K,ee){var Q=this._map._getUIString("NavigationControl."+ee);K.title=Q,K.setAttribute("aria-label",Q)};var Si=function(K,ee,Q){Q===void 0&&(Q=!1),this._clickTolerance=10,this.element=ee,this.mouseRotate=new Sl({clickTolerance:K.dragRotate._mouseRotate._clickTolerance}),this.map=K,Q&&(this.mousePitch=new Vl({clickTolerance:K.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ee,"mousedown",this.mousedown),n.addEventListener(ee,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ee,"touchmove",this.touchmove),n.addEventListener(ee,"touchend",this.touchend),n.addEventListener(ee,"touchcancel",this.reset)};function li(K,ee,Q){if(K=new t.LngLat(K.lng,K.lat),ee){var he=new t.LngLat(K.lng-360,K.lat),Se=new t.LngLat(K.lng+360,K.lat),Fe=Q.locationPoint(K).distSqr(ee);Q.locationPoint(he).distSqr(ee)<Fe?K=he:Q.locationPoint(Se).distSqr(ee)<Fe&&(K=Se)}for(;Math.abs(K.lng-Q.center.lng)>180;){var We=Q.locationPoint(K);if(We.x>=0&&We.y>=0&&We.x<=Q.width&&We.y<=Q.height)break;K.lng>Q.center.lng?K.lng-=360:K.lng+=360}return K}Si.prototype.down=function(K,ee){this.mouseRotate.mousedown(K,ee),this.mousePitch&&this.mousePitch.mousedown(K,ee),n.disableDrag()},Si.prototype.move=function(K,ee){var Q=this.map,he=this.mouseRotate.mousemoveWindow(K,ee);if(he&&he.bearingDelta&&Q.setBearing(Q.getBearing()+he.bearingDelta),this.mousePitch){var Se=this.mousePitch.mousemoveWindow(K,ee);Se&&Se.pitchDelta&&Q.setPitch(Q.getPitch()+Se.pitchDelta)}},Si.prototype.off=function(){var K=this.element;n.removeEventListener(K,"mousedown",this.mousedown),n.removeEventListener(K,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(K,"touchmove",this.touchmove),n.removeEventListener(K,"touchend",this.touchend),n.removeEventListener(K,"touchcancel",this.reset),this.offTemp()},Si.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},Si.prototype.mousedown=function(K){this.down(t.extend({},K,{ctrlKey:!0,preventDefault:function(){return K.preventDefault()}}),n.mousePos(this.element,K)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},Si.prototype.mousemove=function(K){this.move(K,n.mousePos(this.element,K))},Si.prototype.mouseup=function(K){this.mouseRotate.mouseupWindow(K),this.mousePitch&&this.mousePitch.mouseupWindow(K),this.offTemp()},Si.prototype.touchstart=function(K){K.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,K.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return K.preventDefault()}},this._startPos))},Si.prototype.touchmove=function(K){K.targetTouches.length!==1?this.reset():(this._lastPos=n.touchPos(this.element,K.targetTouches)[0],this.move({preventDefault:function(){return K.preventDefault()}},this._lastPos))},Si.prototype.touchend=function(K){K.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Si.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var hu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function pf(K,ee,Q){var he=K.classList;for(var Se in hu)he.remove("mapboxgl-"+Q+"-anchor-"+Se);he.add("mapboxgl-"+Q+"-anchor-"+ee)}var Dc,Ks=function(K){function ee(Q,he){var Se=this;if(K.call(this),(Q instanceof t.window.HTMLElement||he)&&(Q=t.extend({element:Q},he)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=Q&&Q.anchor||"center",this._color=Q&&Q.color||"#3FB1CE",this._draggable=Q&&Q.draggable||!1,this._state="inactive",this._rotation=Q&&Q.rotation||0,this._rotationAlignment=Q&&Q.rotationAlignment||"auto",this._pitchAlignment=Q&&Q.pitchAlignment&&Q.pitchAlignment!=="auto"?Q.pitchAlignment:this._rotationAlignment,Q&&Q.element)this._element=Q.element,this._offset=t.Point.convert(Q&&Q.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var Fe=n.createNS("http://www.w3.org/2000/svg","svg");Fe.setAttributeNS(null,"display","block"),Fe.setAttributeNS(null,"height","41px"),Fe.setAttributeNS(null,"width","27px"),Fe.setAttributeNS(null,"viewBox","0 0 27 41");var We=n.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"stroke","none"),We.setAttributeNS(null,"stroke-width","1"),We.setAttributeNS(null,"fill","none"),We.setAttributeNS(null,"fill-rule","evenodd");var it=n.createNS("http://www.w3.org/2000/svg","g");it.setAttributeNS(null,"fill-rule","nonzero");var dt=n.createNS("http://www.w3.org/2000/svg","g");dt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),dt.setAttributeNS(null,"fill","#000000");for(var Ft=0,Qt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ft<Qt.length;Ft+=1){var nr=Qt[Ft],ur=n.createNS("http://www.w3.org/2000/svg","ellipse");ur.setAttributeNS(null,"opacity","0.04"),ur.setAttributeNS(null,"cx","10.5"),ur.setAttributeNS(null,"cy","5.80029008"),ur.setAttributeNS(null,"rx",nr.rx),ur.setAttributeNS(null,"ry",nr.ry),dt.appendChild(ur)}var yr=n.createNS("http://www.w3.org/2000/svg","g");yr.setAttributeNS(null,"fill",this._color);var br=n.createNS("http://www.w3.org/2000/svg","path");br.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),yr.appendChild(br);var Pr=n.createNS("http://www.w3.org/2000/svg","g");Pr.setAttributeNS(null,"opacity","0.25"),Pr.setAttributeNS(null,"fill","#000000");var gr=n.createNS("http://www.w3.org/2000/svg","path");gr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Pr.appendChild(gr);var Cr=n.createNS("http://www.w3.org/2000/svg","g");Cr.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Cr.setAttributeNS(null,"fill","#FFFFFF");var Nr=n.createNS("http://www.w3.org/2000/svg","g");Nr.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Qr=n.createNS("http://www.w3.org/2000/svg","circle");Qr.setAttributeNS(null,"fill","#000000"),Qr.setAttributeNS(null,"opacity","0.25"),Qr.setAttributeNS(null,"cx","5.5"),Qr.setAttributeNS(null,"cy","5.5"),Qr.setAttributeNS(null,"r","5.4999962");var bn=n.createNS("http://www.w3.org/2000/svg","circle");bn.setAttributeNS(null,"fill","#FFFFFF"),bn.setAttributeNS(null,"cx","5.5"),bn.setAttributeNS(null,"cy","5.5"),bn.setAttributeNS(null,"r","5.4999962"),Nr.appendChild(Qr),Nr.appendChild(bn),it.appendChild(dt),it.appendChild(yr),it.appendChild(Pr),it.appendChild(Cr),it.appendChild(Nr),Fe.appendChild(it),this._element.appendChild(Fe),this._offset=t.Point.convert(Q&&Q.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(un){un.preventDefault()}),this._element.addEventListener("mousedown",function(un){un.preventDefault()}),this._element.addEventListener("focus",function(){var un=Se._map.getContainer();un.scrollTop=0,un.scrollLeft=0}),pf(this._element,this._anchor,"marker"),this._popup=null}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.addTo=function(Q){return this.remove(),this._map=Q,Q.getCanvasContainer().appendChild(this._element),Q.on("move",this._update),Q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},ee.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},ee.prototype.getLngLat=function(){return this._lngLat},ee.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},ee.prototype.getElement=function(){return this._element},ee.prototype.setPopup=function(Q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Q){if(!("offset"in Q.options)){var he=Math.sqrt(Math.pow(13.5,2)/2);Q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[he,-1*(24.6+he)],"bottom-right":[-he,-1*(24.6+he)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=Q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},ee.prototype._onKeyPress=function(Q){var he=Q.code,Se=Q.charCode||Q.keyCode;he!=="Space"&&he!=="Enter"&&Se!==32&&Se!==13||this.togglePopup()},ee.prototype._onMapClick=function(Q){var he=Q.originalEvent.target,Se=this._element;this._popup&&(he===Se||Se.contains(he))&&this.togglePopup()},ee.prototype.getPopup=function(){return this._popup},ee.prototype.togglePopup=function(){var Q=this._popup;return Q?(Q.isOpen()?Q.remove():Q.addTo(this._map),this):this},ee.prototype._update=function(Q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=li(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var he="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?he="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(he="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Se="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Se="rotateX(0deg)":this._pitchAlignment==="map"&&(Se="rotateX("+this._map.getPitch()+"deg)"),Q&&Q.type!=="moveend"||(this._pos=this._pos.round()),n.setTransform(this._element,hu[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Se+" "+he)}},ee.prototype.getOffset=function(){return this._offset},ee.prototype.setOffset=function(Q){return this._offset=t.Point.convert(Q),this._update(),this},ee.prototype._onMove=function(Q){this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},ee.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},ee.prototype._addDragHandler=function(Q){this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},ee.prototype.setDraggable=function(Q){return this._draggable=!!Q,this._map&&(Q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},ee.prototype.isDraggable=function(){return this._draggable},ee.prototype.setRotation=function(Q){return this._rotation=Q||0,this._update(),this},ee.prototype.getRotation=function(){return this._rotation},ee.prototype.setRotationAlignment=function(Q){return this._rotationAlignment=Q||"auto",this._update(),this},ee.prototype.getRotationAlignment=function(){return this._rotationAlignment},ee.prototype.setPitchAlignment=function(Q){return this._pitchAlignment=Q&&Q!=="auto"?Q:this._rotationAlignment,this._update(),this},ee.prototype.getPitchAlignment=function(){return this._pitchAlignment},ee}(t.Evented),vf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},df=0,sl=!1,Zf=function(K){function ee(Q){K.call(this),this.options=t.extend({},vf,Q),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.onAdd=function(Q){var he;return this._map=Q,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),he=this._setupUI,Dc!==void 0?he(Dc):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(Se){he(Dc=Se.state!=="denied")}):he(Dc=!!t.window.navigator.geolocation),this._container},ee.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,df=0,sl=!1},ee.prototype._isOutOfMapMaxBounds=function(Q){var he=this._map.getMaxBounds(),Se=Q.coords;return he&&(Se.longitude<he.getWest()||Se.longitude>he.getEast()||Se.latitude<he.getSouth()||Se.latitude>he.getNorth())},ee.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},ee.prototype._onSuccess=function(Q){if(this._map){if(this._isOutOfMapMaxBounds(Q))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",Q)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=Q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(Q),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(Q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",Q)),this._finish()}},ee.prototype._updateCamera=function(Q){var he=new t.LngLat(Q.coords.longitude,Q.coords.latitude),Se=Q.coords.accuracy,Fe=this._map.getBearing(),We=t.extend({bearing:Fe},this.options.fitBoundsOptions);this._map.fitBounds(he.toBounds(Se),We,{geolocateSource:!0})},ee.prototype._updateMarker=function(Q){if(Q){var he=new t.LngLat(Q.coords.longitude,Q.coords.latitude);this._accuracyCircleMarker.setLngLat(he).addTo(this._map),this._userLocationDotMarker.setLngLat(he).addTo(this._map),this._accuracy=Q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},ee.prototype._updateCircleRadius=function(){var Q=this._map._container.clientHeight/2,he=this._map.unproject([0,Q]),Se=this._map.unproject([1,Q]),Fe=he.distanceTo(Se),We=Math.ceil(2*this._accuracy/Fe);this._circleElement.style.width=We+"px",this._circleElement.style.height=We+"px"},ee.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},ee.prototype._onError=function(Q){if(this._map){if(this.options.trackUserLocation)if(Q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var he=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=he,this._geolocateButton.setAttribute("aria-label",he),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(Q.code===3&&sl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",Q)),this._finish()}},ee.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},ee.prototype._setupUI=function(Q){var he=this;if(this._container.addEventListener("contextmenu",function(We){return We.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",Q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Se=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Se,this._geolocateButton.setAttribute("aria-label",Se)}else{var Fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Fe,this._geolocateButton.setAttribute("aria-label",Fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ks(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ks({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(We){We.geolocateSource||he._watchState!=="ACTIVE_LOCK"||We.originalEvent&&We.originalEvent.type==="resize"||(he._watchState="BACKGROUND",he._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),he._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),he.fire(new t.Event("trackuserlocationend")))})},ee.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":df--,sl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var Q;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++df>1?(Q={maximumAge:6e5,timeout:0},sl=!0):(Q=this.options.positionOptions,sl=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},ee.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},ee}(t.Evented),Ah={maxWidth:100,unit:"metric"},jo=function(K){this.options=t.extend({},Ah,K),t.bindAll(["_onMove","setUnit"],this)};function Kf(K,ee,Q){var he=Q&&Q.maxWidth||100,Se=K._container.clientHeight/2,Fe=K.unproject([0,Se]),We=K.unproject([he,Se]),it=Fe.distanceTo(We);if(Q&&Q.unit==="imperial"){var dt=3.2808*it;dt>5280?Du(ee,he,dt/5280,K._getUIString("ScaleControl.Miles")):Du(ee,he,dt,K._getUIString("ScaleControl.Feet"))}else Q&&Q.unit==="nautical"?Du(ee,he,it/1852,K._getUIString("ScaleControl.NauticalMiles")):it>=1e3?Du(ee,he,it/1e3,K._getUIString("ScaleControl.Kilometers")):Du(ee,he,it,K._getUIString("ScaleControl.Meters"))}function Du(K,ee,Q,he){var Se,Fe,We,it=(Se=Q,(Fe=Math.pow(10,(""+Math.floor(Se)).length-1))*(We=(We=Se/Fe)>=10?10:We>=5?5:We>=3?3:We>=2?2:We>=1?1:function(dt){var Ft=Math.pow(10,Math.ceil(-Math.log(dt)/Math.LN10));return Math.round(dt*Ft)/Ft}(We)));K.style.width=ee*(it/Q)+"px",K.innerHTML=it+"&nbsp;"+he}jo.prototype.getDefaultPosition=function(){return"bottom-left"},jo.prototype._onMove=function(){Kf(this._map,this._container,this.options)},jo.prototype.onAdd=function(K){return this._map=K,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",K.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},jo.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},jo.prototype.setUnit=function(K){this.options.unit=K,Kf(this._map,this._container,this.options)};var Rs=function(K){this._fullscreen=!1,K&&K.container&&(K.container instanceof t.window.HTMLElement?this._container=K.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Rs.prototype.onAdd=function(K){return this._map=K,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Rs.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Rs.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Rs.prototype._setupUI=function(){var K=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",K).setAttribute("aria-hidden",!0),K.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Rs.prototype._updateTitle=function(){var K=this._getTitle();this._fullscreenButton.setAttribute("aria-label",K),this._fullscreenButton.title=K},Rs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Rs.prototype._isFullscreen=function(){return this._fullscreen},Rs.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Rs.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Iu={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},pu=function(K){function ee(Q){K.call(this),this.options=t.extend(Object.create(Iu),Q),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return K&&(ee.__proto__=K),(ee.prototype=Object.create(K&&K.prototype)).constructor=ee,ee.prototype.addTo=function(Q){return this._map&&this.remove(),this._map=Q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},ee.prototype.isOpen=function(){return!!this._map},ee.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},ee.prototype.getLngLat=function(){return this._lngLat},ee.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},ee.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},ee.prototype.getElement=function(){return this._container},ee.prototype.setText=function(Q){return this.setDOMContent(t.window.document.createTextNode(Q))},ee.prototype.setHTML=function(Q){var he,Se=t.window.document.createDocumentFragment(),Fe=t.window.document.createElement("body");for(Fe.innerHTML=Q;he=Fe.firstChild;)Se.appendChild(he);return this.setDOMContent(Se)},ee.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},ee.prototype.setMaxWidth=function(Q){return this.options.maxWidth=Q,this._update(),this},ee.prototype.setDOMContent=function(Q){return this._createContent(),this._content.appendChild(Q),this._update(),this},ee.prototype.addClassName=function(Q){this._container&&this._container.classList.add(Q)},ee.prototype.removeClassName=function(Q){this._container&&this._container.classList.remove(Q)},ee.prototype.toggleClassName=function(Q){if(this._container)return this._container.classList.toggle(Q)},ee.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},ee.prototype._onMouseUp=function(Q){this._update(Q.point)},ee.prototype._onMouseMove=function(Q){this._update(Q.point)},ee.prototype._onDrag=function(Q){this._update(Q.point)},ee.prototype._update=function(Q){var he=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(nr){return he._container.classList.add(nr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=li(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||Q)){var Se=this._pos=this._trackPointer&&Q?Q:this._map.project(this._lngLat),Fe=this.options.anchor,We=function nr(ur){if(ur){if(typeof ur=="number"){var yr=Math.round(Math.sqrt(.5*Math.pow(ur,2)));return{center:new t.Point(0,0),top:new t.Point(0,ur),"top-left":new t.Point(yr,yr),"top-right":new t.Point(-yr,yr),bottom:new t.Point(0,-ur),"bottom-left":new t.Point(yr,-yr),"bottom-right":new t.Point(-yr,-yr),left:new t.Point(ur,0),right:new t.Point(-ur,0)}}if(ur instanceof t.Point||Array.isArray(ur)){var br=t.Point.convert(ur);return{center:br,top:br,"top-left":br,"top-right":br,bottom:br,"bottom-left":br,"bottom-right":br,left:br,right:br}}return{center:t.Point.convert(ur.center||[0,0]),top:t.Point.convert(ur.top||[0,0]),"top-left":t.Point.convert(ur["top-left"]||[0,0]),"top-right":t.Point.convert(ur["top-right"]||[0,0]),bottom:t.Point.convert(ur.bottom||[0,0]),"bottom-left":t.Point.convert(ur["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(ur["bottom-right"]||[0,0]),left:t.Point.convert(ur.left||[0,0]),right:t.Point.convert(ur.right||[0,0])}}return nr(new t.Point(0,0))}(this.options.offset);if(!Fe){var it,dt=this._container.offsetWidth,Ft=this._container.offsetHeight;it=Se.y+We.bottom.y<Ft?["top"]:Se.y>this._map.transform.height-Ft?["bottom"]:[],Se.x<dt/2?it.push("left"):Se.x>this._map.transform.width-dt/2&&it.push("right"),Fe=it.length===0?"bottom":it.join("-")}var Qt=Se.add(We[Fe]).round();n.setTransform(this._container,hu[Fe]+" translate("+Qt.x+"px,"+Qt.y+"px)"),pf(this._container,Fe,"popup")}},ee.prototype._onClose=function(){this.remove()},ee}(t.Evented),ll={version:t.version,supported:f,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:ic,NavigationControl:rs,GeolocateControl:Zf,AttributionControl:wo,ScaleControl:jo,FullscreenControl:Rs,Popup:pu,Marker:Ks,Style:Ur,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){$t().acquire(et)},clearPrewarmedResources:function(){var K=Ct;K&&(K.isPreloaded()&&K.numActive()===1?(K.release(et),Ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(K){t.config.ACCESS_TOKEN=K},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(K){t.config.API_URL=K},get workerCount(){return lt.workerCount},set workerCount(K){lt.workerCount=K},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(K){t.config.MAX_PARALLEL_IMAGE_REQUESTS=K},clearStorage:function(K){t.clearTileCache(K)},workerUrl:""};return ll}),u})},{}],474:[function(e,d,S){d.exports=c;var r=e("convex-hull");function a(t,f,n){for(var o=new Array(t),l=0;l<t;++l)o[l]=0,l===f&&(o[l]+=.5),l===n&&(o[l]+=.5);return o}function u(t,f){if(f===0||f===(1<<t+1)-1)return[];for(var n=[],o=[],l=0;l<=t;++l)if(f&1<<l){n.push(a(t,l-1,l-1)),o.push(null);for(var h=0;h<=t;++h)~f&1<<h&&(n.push(a(t,l-1,h-1)),o.push([l,h]))}var i=r(n),s=[];e:for(var l=0;l<i.length;++l){for(var p=i[l],v=[],h=0;h<p.length;++h){if(!o[p[h]])continue e;v.push(o[p[h]].slice())}s.push(v)}return s}function c(t){for(var f=1<<t+1,n=new Array(f),o=0;o<f;++o)n[o]=u(t,o);return n}},{"convex-hull":135}],475:[function(e,d,S){var r=e("./normalize"),a=e("gl-mat4/create"),u=e("gl-mat4/clone"),c=e("gl-mat4/determinant"),t=e("gl-mat4/invert"),f=e("gl-mat4/transpose"),n={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},o=a(),l=a(),h=[0,0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],s=[0,0,0];d.exports=function(y,x,w,g,T,M){if(x||(x=[0,0,0]),w||(w=[0,0,0]),g||(g=[0,0,0]),T||(T=[0,0,0,1]),M||(M=[0,0,0,1]),!r(o,y)||(u(l,o),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(c(l)<1e-8)))return!1;var P=o[3],L=o[7],I=o[11],C=o[12],k=o[13],E=o[14],R=o[15];if(P!==0||L!==0||I!==0){h[0]=P,h[1]=L,h[2]=I,h[3]=R;var O=t(l,l);if(!O)return!1;f(l,l),p(T,h,l)}else T[0]=T[1]=T[2]=0,T[3]=1;if(x[0]=C,x[1]=k,x[2]=E,v(i,o),w[0]=n.length(i[0]),n.normalize(i[0],i[0]),g[0]=n.dot(i[0],i[1]),m(i[1],i[1],i[0],1,-g[0]),w[1]=n.length(i[1]),n.normalize(i[1],i[1]),g[0]/=w[1],g[1]=n.dot(i[0],i[2]),m(i[2],i[2],i[0],1,-g[1]),g[2]=n.dot(i[1],i[2]),m(i[2],i[2],i[1],1,-g[2]),w[2]=n.length(i[2]),n.normalize(i[2],i[2]),g[1]/=w[2],g[2]/=w[2],n.cross(s,i[1],i[2]),n.dot(i[0],s)<0)for(var N=0;N<3;N++)w[N]*=-1,i[N][0]*=-1,i[N][1]*=-1,i[N][2]*=-1;return M[0]=.5*Math.sqrt(Math.max(1+i[0][0]-i[1][1]-i[2][2],0)),M[1]=.5*Math.sqrt(Math.max(1-i[0][0]+i[1][1]-i[2][2],0)),M[2]=.5*Math.sqrt(Math.max(1-i[0][0]-i[1][1]+i[2][2],0)),M[3]=.5*Math.sqrt(Math.max(1+i[0][0]+i[1][1]+i[2][2],0)),i[2][1]>i[1][2]&&(M[0]=-M[0]),i[0][2]>i[2][0]&&(M[1]=-M[1]),i[1][0]>i[0][1]&&(M[2]=-M[2]),!0};function p(b,y,x){var w=y[0],g=y[1],T=y[2],M=y[3];return b[0]=x[0]*w+x[4]*g+x[8]*T+x[12]*M,b[1]=x[1]*w+x[5]*g+x[9]*T+x[13]*M,b[2]=x[2]*w+x[6]*g+x[10]*T+x[14]*M,b[3]=x[3]*w+x[7]*g+x[11]*T+x[15]*M,b}function v(b,y){b[0][0]=y[0],b[0][1]=y[1],b[0][2]=y[2],b[1][0]=y[4],b[1][1]=y[5],b[1][2]=y[6],b[2][0]=y[8],b[2][1]=y[9],b[2][2]=y[10]}function m(b,y,x,w,g){b[0]=y[0]*w+x[0]*g,b[1]=y[1]*w+x[1]*g,b[2]=y[2]*w+x[2]*g}},{"./normalize":476,"gl-mat4/clone":278,"gl-mat4/create":280,"gl-mat4/determinant":281,"gl-mat4/invert":293,"gl-mat4/transpose":306,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/length":380,"gl-vec3/normalize":387}],476:[function(e,d,S){d.exports=function(a,u){var c=u[15];if(c===0)return!1;for(var t=1/c,f=0;f<16;f++)a[f]=u[f]*t;return!0}},{}],477:[function(e,d,S){var r=e("gl-vec3/lerp"),a=e("mat4-recompose"),u=e("mat4-decompose"),c=e("gl-mat4/determinant"),t=e("quat-slerp"),f=h(),n=h(),o=h();d.exports=l;function l(p,v,m,b){if(c(v)===0||c(m)===0)return!1;var y=u(v,f.translate,f.scale,f.skew,f.perspective,f.quaternion),x=u(m,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return!y||!x?!1:(r(o.translate,f.translate,n.translate,b),r(o.skew,f.skew,n.skew,b),r(o.scale,f.scale,n.scale,b),r(o.perspective,f.perspective,n.perspective,b),t(o.quaternion,f.quaternion,n.quaternion,b),a(p,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function h(){return{translate:i(),scale:i(1),skew:i(),perspective:s(),quaternion:s()}}function i(p){return[p||0,p||0,p||0]}function s(){return[0,0,0,1]}},{"gl-mat4/determinant":281,"gl-vec3/lerp":381,"mat4-decompose":475,"mat4-recompose":478,"quat-slerp":527}],478:[function(e,d,S){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")};r.create();var a=r.create();d.exports=function(c,t,f,n,o,l){return r.identity(c),r.fromRotationTranslation(c,l,t),c[3]=o[0],c[7]=o[1],c[11]=o[2],c[15]=o[3],r.identity(a),n[2]!==0&&(a[9]=n[2],r.multiply(c,c,a)),n[1]!==0&&(a[9]=0,a[8]=n[1],r.multiply(c,c,a)),n[0]!==0&&(a[8]=0,a[4]=n[0],r.multiply(c,c,a)),r.scale(c,c,f),c}},{"gl-mat4/create":280,"gl-mat4/fromRotationTranslation":284,"gl-mat4/identity":291,"gl-mat4/multiply":295,"gl-mat4/scale":303,"gl-mat4/translate":305}],479:[function(e,d,S){d.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},{}],480:[function(e,d,S){var r=e("binary-search-bounds"),a=e("mat4-interpolate"),u=e("gl-mat4/invert"),c=e("gl-mat4/rotateX"),t=e("gl-mat4/rotateY"),f=e("gl-mat4/rotateZ"),n=e("gl-mat4/lookAt"),o=e("gl-mat4/translate");e("gl-mat4/scale");var l=e("gl-vec3/normalize"),h=[0,0,0];d.exports=v;function i(m){this._components=m.slice(),this._time=[0],this.prevMatrix=m.slice(),this.nextMatrix=m.slice(),this.computedMatrix=m.slice(),this.computedInverse=m.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var s=i.prototype;s.recalcMatrix=function(m){var b=this._time,y=r.le(b,m),x=this.computedMatrix;if(!(y<0)){var w=this._components;if(y===b.length-1)for(var g=16*y,T=0;T<16;++T)x[T]=w[g++];else{for(var M=b[y+1]-b[y],g=16*y,P=this.prevMatrix,L=!0,T=0;T<16;++T)P[T]=w[g++];for(var I=this.nextMatrix,T=0;T<16;++T)I[T]=w[g++],L=L&&P[T]===I[T];if(M<1e-6||L)for(var T=0;T<16;++T)x[T]=P[T];else a(x,P,I,(m-b[y])/M)}var C=this.computedUp;C[0]=x[1],C[1]=x[5],C[2]=x[9],l(C,C);var k=this.computedInverse;u(k,x);var E=this.computedEye,R=k[15];E[0]=k[12]/R,E[1]=k[13]/R,E[2]=k[14]/R;for(var O=this.computedCenter,N=Math.exp(this.computedRadius[0]),T=0;T<3;++T)O[T]=E[T]-x[2+4*T]*N}},s.idle=function(m){if(!(m<this.lastT())){for(var b=this._components,y=b.length-16,x=0;x<16;++x)b.push(b[y++]);this._time.push(m)}},s.flush=function(m){var b=r.gt(this._time,m)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},s.lastT=function(){return this._time[this._time.length-1]},s.lookAt=function(m,b,y,x){this.recalcMatrix(m),b=b||this.computedEye,y=y||h,x=x||this.computedUp,this.setMatrix(m,n(this.computedMatrix,b,y,x));for(var w=0,g=0;g<3;++g)w+=Math.pow(y[g]-b[g],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},s.rotate=function(m,b,y,x){this.recalcMatrix(m);var w=this.computedInverse;b&&t(w,w,b),y&&c(w,w,y),x&&f(w,w,x),this.setMatrix(m,u(this.computedMatrix,w))};var p=[0,0,0];s.pan=function(m,b,y,x){p[0]=-(b||0),p[1]=-(y||0),p[2]=-(x||0),this.recalcMatrix(m);var w=this.computedInverse;o(w,w,p),this.setMatrix(m,u(w,w))},s.translate=function(m,b,y,x){p[0]=b||0,p[1]=y||0,p[2]=x||0,this.recalcMatrix(m);var w=this.computedMatrix;o(w,w,p),this.setMatrix(m,w)},s.setMatrix=function(m,b){if(!(m<this.lastT())){this._time.push(m);for(var y=0;y<16;++y)this._components.push(b[y])}},s.setDistance=function(m,b){this.computedRadius[0]=b},s.setDistanceLimits=function(m,b){var y=this._limits;y[0]=m,y[1]=b},s.getDistanceLimits=function(m){var b=this._limits;return m?(m[0]=b[0],m[1]=b[1],m):b};function v(m){m=m||{};var b=m.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new i(b)}},{"binary-search-bounds":481,"gl-mat4/invert":293,"gl-mat4/lookAt":294,"gl-mat4/rotateX":300,"gl-mat4/rotateY":301,"gl-mat4/rotateZ":302,"gl-mat4/scale":303,"gl-mat4/translate":305,"gl-vec3/normalize":387,"mat4-interpolate":477}],481:[function(e,d,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],482:[function(e,d,S){d.exports=a;var r=e("robust-orientation")[3];function a(u){var c=u.length;if(c<3){for(var s=new Array(c),t=0;t<c;++t)s[t]=t;return c===2&&u[0][0]===u[1][0]&&u[0][1]===u[1][1]?[0]:s}for(var f=new Array(c),t=0;t<c;++t)f[t]=t;f.sort(function(b,y){var x=u[b][0]-u[y][0];return x||u[b][1]-u[y][1]});for(var n=[f[0],f[1]],o=[f[0],f[1]],t=2;t<c;++t){for(var l=f[t],h=u[l],i=n.length;i>1&&r(u[n[i-2]],u[n[i-1]],h)<=0;)i-=1,n.pop();for(n.push(l),i=o.length;i>1&&r(u[o[i-2]],u[o[i-1]],h)>=0;)i-=1,o.pop();o.push(l)}for(var s=new Array(o.length+n.length-2),p=0,t=0,v=n.length;t<v;++t)s[p++]=n[t];for(var m=o.length-2;m>0;--m)s[p++]=o[m];return s}},{"robust-orientation":548}],483:[function(e,d,S){d.exports=a;var r=e("mouse-event");function a(u,c){c||(c=u,u=window);var t=0,f=0,n=0,o={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function h(T){var M=!1;return"altKey"in T&&(M=M||T.altKey!==o.alt,o.alt=!!T.altKey),"shiftKey"in T&&(M=M||T.shiftKey!==o.shift,o.shift=!!T.shiftKey),"ctrlKey"in T&&(M=M||T.ctrlKey!==o.control,o.control=!!T.ctrlKey),"metaKey"in T&&(M=M||T.metaKey!==o.meta,o.meta=!!T.metaKey),M}function i(T,M){var P=r.x(M),L=r.y(M);"buttons"in M&&(T=M.buttons|0),(T!==t||P!==f||L!==n||h(M))&&(t=T|0,f=P||0,n=L||0,c&&c(t,f,n,o))}function s(T){i(0,T)}function p(){(t||f||n||o.shift||o.alt||o.meta||o.control)&&(f=n=0,t=0,o.shift=o.alt=o.control=o.meta=!1,c&&c(0,0,0,o))}function v(T){h(T)&&c&&c(t,f,n,o)}function m(T){r.buttons(T)===0?i(0,T):i(t,T)}function b(T){i(t|r.buttons(T),T)}function y(T){i(t&~r.buttons(T),T)}function x(){l||(l=!0,u.addEventListener("mousemove",m),u.addEventListener("mousedown",b),u.addEventListener("mouseup",y),u.addEventListener("mouseleave",s),u.addEventListener("mouseenter",s),u.addEventListener("mouseout",s),u.addEventListener("mouseover",s),u.addEventListener("blur",p),u.addEventListener("keyup",v),u.addEventListener("keydown",v),u.addEventListener("keypress",v),u!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",v),window.addEventListener("keydown",v),window.addEventListener("keypress",v)))}function w(){!l||(l=!1,u.removeEventListener("mousemove",m),u.removeEventListener("mousedown",b),u.removeEventListener("mouseup",y),u.removeEventListener("mouseleave",s),u.removeEventListener("mouseenter",s),u.removeEventListener("mouseout",s),u.removeEventListener("mouseover",s),u.removeEventListener("blur",p),u.removeEventListener("keyup",v),u.removeEventListener("keydown",v),u.removeEventListener("keypress",v),u!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",v),window.removeEventListener("keydown",v),window.removeEventListener("keypress",v)))}x();var g={element:u};return Object.defineProperties(g,{enabled:{get:function(){return l},set:function(T){T?x():w()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),g}},{"mouse-event":485}],484:[function(e,d,S){var r={left:0,top:0};d.exports=a;function a(c,t,f){t=t||c.currentTarget||c.srcElement,Array.isArray(f)||(f=[0,0]);var n=c.clientX||0,o=c.clientY||0,l=u(t);return f[0]=n-l.left,f[1]=o-l.top,f}function u(c){return c===window||c===document||c===document.body?r:c.getBoundingClientRect()}},{}],485:[function(e,d,S){function r(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var f=t.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in t){var f=t.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}S.buttons=r;function a(t){return t.target||t.srcElement||window}S.element=a;function u(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var f=a(t),n=f.getBoundingClientRect();return t.clientX-n.left}return 0}S.x=u;function c(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var f=a(t),n=f.getBoundingClientRect();return t.clientY-n.top}return 0}S.y=c},{}],486:[function(e,d,S){var r=e("to-px");d.exports=a;function a(u,c,t){typeof u=="function"&&(t=!!c,c=u,u=window);var f=r("ex",u),n=function(o){t&&o.preventDefault();var l=o.deltaX||0,h=o.deltaY||0,i=o.deltaZ||0,s=o.deltaMode,p=1;switch(s){case 1:p=f;break;case 2:p=window.innerHeight;break}if(l*=p,h*=p,i*=p,l||h||i)return c(l,h,i,o)};return u.addEventListener("wheel",n),n}},{"to-px":578}],487:[function(e,d,S){var r=e("typedarray-pool");d.exports=I;function a(C){return"a"+C}function u(C){return"d"+C}function c(C,k){return"c"+C+"_"+k}function t(C){return"s"+C}function f(C,k){return"t"+C+"_"+k}function n(C){return"o"+C}function o(C){return"x"+C}function l(C){return"p"+C}function h(C,k){return"d"+C+"_"+k}function i(C){return"i"+C}function s(C,k){return"u"+C+"_"+k}function p(C){return"b"+C}function v(C){return"y"+C}function m(C){return"e"+C}function b(C){return"v"+C}var y="V",x="P",w="N",g="Q",T="X",M="T";function P(C,k,E){for(var R=0,O=0;O<C;++O)k&1<<O&&(R|=1<<E[O]);return R}function L(C,k,E,R,O,N){var G=N.length,U=O.length;if(U<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var Y="extractContour"+O.join("_"),z=[],B=[],H=[],V=0;V<G;++V)H.push(a(V));for(var V=0;V<R;++V)H.push(o(V));for(var V=0;V<U;++V)B.push(t(V)+"="+a(0)+".shape["+V+"]|0");for(var V=0;V<G;++V){B.push(u(V)+"="+a(V)+".data",n(V)+"="+a(V)+".offset|0");for(var Z=0;Z<U;++Z)B.push(f(V,Z)+"="+a(V)+".stride["+Z+"]|0")}for(var V=0;V<G;++V){B.push(l(V)+"="+n(V)),B.push(c(V,0));for(var Z=1;Z<1<<U;++Z){for(var q=[],J=0;J<U;++J)Z&1<<J&&q.push("-"+f(V,J));B.push(h(V,Z)+"=("+q.join("")+")|0"),B.push(c(V,Z)+"=0")}}for(var V=0;V<G;++V)for(var Z=0;Z<U;++Z){var ne=[f(V,O[Z])];Z>0&&ne.push(f(V,O[Z-1])+"*"+t(O[Z-1])),B.push(s(V,O[Z])+"=("+ne.join("-")+")|0")}for(var V=0;V<U;++V)B.push(i(V)+"=0");B.push(w+"=0");for(var ve=["2"],V=U-2;V>=0;--V)ve.push(t(O[V]));B.push(g+"=("+ve.join("*")+")|0",x+"=mallocUint32("+g+")",y+"=mallocUint32("+g+")",T+"=0"),B.push(p(0)+"=0");for(var Z=1;Z<1<<U;++Z){for(var $=[],j=[],J=0;J<U;++J)Z&1<<J&&(j.length===0?$.push("1"):$.unshift(j.join("*"))),j.push(t(O[J]));var ae="";$[0].indexOf(t(O[U-2]))<0&&(ae="-");var ie=P(U,Z,O);B.push(m(ie)+"=(-"+$.join("-")+")|0",v(ie)+"=("+ae+$.join("-")+")|0",p(ie)+"=0")}B.push(b(0)+"=0",M+"=0");function te(xe,ke){z.push("for(",i(O[xe]),"=",ke,";",i(O[xe]),"<",t(O[xe]),";","++",i(O[xe]),"){")}function re(xe){for(var ke=0;ke<G;++ke)z.push(l(ke),"+=",s(ke,O[xe]),";");z.push("}")}function ce(xe){for(var ke=xe-1;ke>=0;--ke)te(ke,0);for(var Re=[],ke=0;ke<G;++ke)N[ke]?Re.push(u(ke)+".get("+l(ke)+")"):Re.push(u(ke)+"["+l(ke)+"]");for(var ke=0;ke<R;++ke)Re.push(o(ke));z.push(x,"[",T,"++]=phase(",Re.join(),");");for(var ke=0;ke<xe;++ke)re(ke);for(var Ke=0;Ke<G;++Ke)z.push(l(Ke),"+=",s(Ke,O[xe]),";")}function pe(xe){for(var ke=0;ke<G;++ke)N[ke]?z.push(c(ke,0),"=",u(ke),".get(",l(ke),");"):z.push(c(ke,0),"=",u(ke),"[",l(ke),"];");for(var Re=[],ke=0;ke<G;++ke)Re.push(c(ke,0));for(var ke=0;ke<R;++ke)Re.push(o(ke));z.push(p(0),"=",x,"[",T,"]=phase(",Re.join(),");");for(var Ke=1;Ke<1<<U;++Ke)z.push(p(Ke),"=",x,"[",T,"+",m(Ke),"];");for(var ze=[],Ke=1;Ke<1<<U;++Ke)ze.push("("+p(0)+"!=="+p(Ke)+")");z.push("if(",ze.join("||"),"){");for(var Je=[],ke=0;ke<U;++ke)Je.push(i(ke));for(var ke=0;ke<G;++ke){Je.push(c(ke,0));for(var Ke=1;Ke<1<<U;++Ke)N[ke]?z.push(c(ke,Ke),"=",u(ke),".get(",l(ke),"+",h(ke,Ke),");"):z.push(c(ke,Ke),"=",u(ke),"[",l(ke),"+",h(ke,Ke),"];"),Je.push(c(ke,Ke))}for(var ke=0;ke<1<<U;++ke)Je.push(p(ke));for(var ke=0;ke<R;++ke)Je.push(o(ke));z.push("vertex(",Je.join(),");",b(0),"=",y,"[",T,"]=",w,"++;");for(var qe=(1<<U)-1,Ee=p(qe),Ke=0;Ke<U;++Ke)if((xe&~(1<<Ke))===0){for(var Ae=qe^1<<Ke,Be=p(Ae),$e=[],xt=Ae;xt>0;xt=xt-1&Ae)$e.push(y+"["+T+"+"+m(xt)+"]");$e.push(b(0));for(var xt=0;xt<G;++xt)Ke&1?$e.push(c(xt,qe),c(xt,Ae)):$e.push(c(xt,Ae),c(xt,qe));Ke&1?$e.push(Ee,Be):$e.push(Be,Ee);for(var xt=0;xt<R;++xt)$e.push(o(xt));z.push("if(",Ee,"!==",Be,"){","face(",$e.join(),")}")}z.push("}",T,"+=1;")}function fe(){for(var xe=1;xe<1<<U;++xe)z.push(M,"=",m(xe),";",m(xe),"=",v(xe),";",v(xe),"=",M,";")}function se(xe,ke){if(xe<0){pe(ke);return}ce(xe),z.push("if(",t(O[xe]),">0){",i(O[xe]),"=1;"),se(xe-1,ke|1<<O[xe]);for(var Re=0;Re<G;++Re)z.push(l(Re),"+=",s(Re,O[xe]),";");xe===U-1&&(z.push(T,"=0;"),fe()),te(xe,2),se(xe-1,ke),xe===U-1&&(z.push("if(",i(O[U-1]),"&1){",T,"=0;}"),fe()),re(xe),z.push("}")}se(U-1,0),z.push("freeUint32(",y,");freeUint32(",x,");");var de=["'use strict';","function ",Y,"(",H.join(),"){","var ",B.join(),";",z.join(""),"}","return ",Y].join(""),be=new Function("vertex","face","phase","mallocUint32","freeUint32",de);return be(C,k,E,r.mallocUint32,r.freeUint32)}function I(C){function k(Y){throw new Error("ndarray-extract-contour: "+Y)}typeof C!="object"&&k("Must specify arguments");var E=C.order;Array.isArray(E)||k("Must specify order");var R=C.arrayArguments||1;R<1&&k("Must have at least one array argument");var O=C.scalarArguments||0;O<0&&k("Scalar arg count must be > 0"),typeof C.vertex!="function"&&k("Must specify vertex creation function"),typeof C.cell!="function"&&k("Must specify cell creation function"),typeof C.phase!="function"&&k("Must specify phase function");for(var N=C.getters||[],G=new Array(R),U=0;U<R;++U)N.indexOf(U)>=0?G[U]=!0:G[U]=!1;return L(C.vertex,C.cell,C.phase,O,E,G)}},{"typedarray-pool":595}],488:[function(e,d,S){d.exports=h;var r=e("dup"),a=e("cwise-compiler"),u={},c={},t={body:"",args:[],thisVars:[],localVars:[]},f=a({args:["array","array","array"],pre:t,post:t,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),n=a({args:["array"],pre:t,post:t,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"});function o(i){if(i in u)return u[i];for(var s=[],p=0;p<i;++p)s.push("out",p,"s=0.5*(inp",p,"l-inp",p,"r);");for(var v=["array"],m=["junk"],p=0;p<i;++p){v.push("array"),m.push("out"+p+"s");var b=r(i);b[p]=-1,v.push({array:0,offset:b.slice()}),b[p]=1,v.push({array:0,offset:b.slice()}),m.push("inp"+p+"l","inp"+p+"r")}return u[i]=a({args:v,pre:t,post:t,body:{body:s.join(""),args:m.map(function(y){return{name:y,lvalue:y.indexOf("out")===0,rvalue:y.indexOf("inp")===0,count:y!=="junk"|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+i})}function l(i){var s=i.join(),L=c[s];if(L)return L;var p=i.length,v=["function gradient(dst,src){var s=src.shape.slice();"];function m(I){for(var C=p-I.length,k=[],E=[],R=[],O=0;O<p;++O)I.indexOf(O+1)>=0?R.push("0"):I.indexOf(-(O+1))>=0?R.push("s["+O+"]-1"):(R.push("-1"),k.push("1"),E.push("s["+O+"]-2"));var N=".lo("+k.join()+").hi("+E.join()+")";if(k.length===0&&(N=""),C>0){v.push("if(1");for(var O=0;O<p;++O)I.indexOf(O+1)>=0||I.indexOf(-(O+1))>=0||v.push("&&s[",O,"]>2");v.push("){grad",C,"(src.pick(",R.join(),")",N);for(var O=0;O<p;++O)I.indexOf(O+1)>=0||I.indexOf(-(O+1))>=0||v.push(",dst.pick(",R.join(),",",O,")",N);v.push(");")}for(var O=0;O<I.length;++O){var G=Math.abs(I[O])-1,U="dst.pick("+R.join()+","+G+")"+N;switch(i[G]){case"clamp":var Y=R.slice(),z=R.slice();I[O]<0?Y[G]="s["+G+"]-2":z[G]="1",C===0?v.push("if(s[",G,"]>1){dst.set(",R.join(),",",G,",0.5*(src.get(",Y.join(),")-src.get(",z.join(),")))}else{dst.set(",R.join(),",",G,",0)};"):v.push("if(s[",G,"]>1){diff(",U,",src.pick(",Y.join(),")",N,",src.pick(",z.join(),")",N,");}else{zero(",U,");};");break;case"mirror":C===0?v.push("dst.set(",R.join(),",",G,",0);"):v.push("zero(",U,");");break;case"wrap":var B=R.slice(),H=R.slice();I[O]<0?(B[G]="s["+G+"]-2",H[G]="0"):(B[G]="s["+G+"]-1",H[G]="1"),C===0?v.push("if(s[",G,"]>2){dst.set(",R.join(),",",G,",0.5*(src.get(",B.join(),")-src.get(",H.join(),")))}else{dst.set(",R.join(),",",G,",0)};"):v.push("if(s[",G,"]>2){diff(",U,",src.pick(",B.join(),")",N,",src.pick(",H.join(),")",N,");}else{zero(",U,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}C>0&&v.push("};")}for(var b=0;b<1<<p;++b){for(var y=[],x=0;x<p;++x)b&1<<x&&y.push(x+1);for(var w=0;w<1<<y.length;++w){for(var g=y.slice(),x=0;x<y.length;++x)w&1<<x&&(g[x]=-g[x]);m(g)}}v.push("return dst;};return gradient");for(var T=["diff","zero"],M=[f,n],b=1;b<=p;++b)T.push("grad"+b),M.push(o(b));T.push(v.join(""));var P=Function.apply(void 0,T),L=P.apply(void 0,M);return u[s]=L,L}function h(i,s,p){if(Array.isArray(p)){if(p.length!==s.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else typeof p=="string"?p=r(s.dimension,p):p=r(s.dimension,"clamp");if(i.dimension!==s.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(i.shape[s.dimension]!==s.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var v=0;v<s.dimension;++v)if(i.shape[v]!==s.shape[v])throw new Error("ndarray-gradient: shape mismatch");if(s.size===0)return i;if(s.dimension<=0)return i.set(0),i;var m=l(p);return m(i,s)}},{"cwise-compiler":151,dup:176}],489:[function(e,d,S){function r(f,n){var o=Math.floor(n),l=n-o,h=0<=o&&o<f.shape[0],i=0<=o+1&&o+1<f.shape[0],s=h?+f.get(o):0,p=i?+f.get(o+1):0;return(1-l)*s+l*p}function a(f,n,o){var l=Math.floor(n),h=n-l,i=0<=l&&l<f.shape[0],s=0<=l+1&&l+1<f.shape[0],p=Math.floor(o),v=o-p,m=0<=p&&p<f.shape[1],b=0<=p+1&&p+1<f.shape[1],y=i&&m?f.get(l,p):0,x=i&&b?f.get(l,p+1):0,w=s&&m?f.get(l+1,p):0,g=s&&b?f.get(l+1,p+1):0;return(1-v)*((1-h)*y+h*w)+v*((1-h)*x+h*g)}function u(f,n,o,l){var h=Math.floor(n),i=n-h,s=0<=h&&h<f.shape[0],p=0<=h+1&&h+1<f.shape[0],v=Math.floor(o),m=o-v,b=0<=v&&v<f.shape[1],y=0<=v+1&&v+1<f.shape[1],x=Math.floor(l),w=l-x,g=0<=x&&x<f.shape[2],T=0<=x+1&&x+1<f.shape[2],M=s&&b&&g?f.get(h,v,x):0,P=s&&y&&g?f.get(h,v+1,x):0,L=p&&b&&g?f.get(h+1,v,x):0,I=p&&y&&g?f.get(h+1,v+1,x):0,C=s&&b&&T?f.get(h,v,x+1):0,k=s&&y&&T?f.get(h,v+1,x+1):0,E=p&&b&&T?f.get(h+1,v,x+1):0,R=p&&y&&T?f.get(h+1,v+1,x+1):0;return(1-w)*((1-m)*((1-i)*M+i*L)+m*((1-i)*P+i*I))+w*((1-m)*((1-i)*C+i*E)+m*((1-i)*k+i*R))}function c(f){var n=f.shape.length|0,o=new Array(n),l=new Array(n),h=new Array(n),i=new Array(n),s,p;for(s=0;s<n;++s)p=+arguments[s+1],o[s]=Math.floor(p),l[s]=p-o[s],h[s]=0<=o[s]&&o[s]<f.shape[s],i[s]=0<=o[s]+1&&o[s]+1<f.shape[s];var v=0,m,b,y;e:for(s=0;s<1<<n;++s){for(b=1,y=f.offset,m=0;m<n;++m)if(s&1<<m){if(!i[m])continue e;b*=l[m],y+=f.stride[m]*(o[m]+1)}else{if(!h[m])continue e;b*=1-l[m],y+=f.stride[m]*o[m]}v+=b*f.data[y]}return v}function t(f,n,o,l){switch(f.shape.length){case 0:return 0;case 1:return r(f,n);case 2:return a(f,n,o);case 3:return u(f,n,o,l);default:return c.apply(void 0,arguments)}}d.exports=t,d.exports.d1=r,d.exports.d2=a,d.exports.d3=u},{}],490:[function(e,d,S){var r=e("cwise-compiler"),a={body:"",args:[],thisVars:[],localVars:[]};function u(s){if(!s)return a;for(var p=0;p<s.args.length;++p){var v=s.args[p];p===0?s.args[p]={name:v,lvalue:!0,rvalue:!!s.rvalue,count:s.count||1}:s.args[p]={name:v,lvalue:!1,rvalue:!0,count:1}}return s.thisVars||(s.thisVars=[]),s.localVars||(s.localVars=[]),s}function c(s){return r({args:s.args,pre:u(s.pre),body:u(s.body),post:u(s.proc),funcName:s.funcName})}function t(s){for(var p=[],v=0;v<s.args.length;++v)p.push("a"+v);var m=new Function("P",["return function ",s.funcName,"_ndarrayops(",p.join(","),") {P(",p.join(","),");return a0}"].join(""));return m(c(s))}var f={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var s in f){var p=f[s];S[s]=t({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:s}),S[s+"eq"]=t({args:["array","array"],body:{args:["a","b"],body:"a"+p+"=b"},rvalue:!0,funcName:s+"eq"}),S[s+"s"]=t({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:s+"s"}),S[s+"seq"]=t({args:["array","scalar"],body:{args:["a","s"],body:"a"+p+"=s"},rvalue:!0,funcName:s+"seq"})}})();var n={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var s in n){var p=n[s];S[s]=t({args:["array","array"],body:{args:["a","b"],body:"a="+p+"b"},funcName:s}),S[s+"eq"]=t({args:["array"],body:{args:["a"],body:"a="+p+"a"},rvalue:!0,count:2,funcName:s+"eq"})}})();var o={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var s in o){var p=o[s];S[s]=t({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+p+"c"},funcName:s}),S[s+"s"]=t({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+p+"s"},funcName:s+"s"}),S[s+"eq"]=t({args:["array","array"],body:{args:["a","b"],body:"a=a"+p+"b"},rvalue:!0,count:2,funcName:s+"eq"}),S[s+"seq"]=t({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+p+"s"},rvalue:!0,count:2,funcName:s+"seq"})}})();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var s=0;s<l.length;++s){var p=l[s];S[p]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:p}),S[p+"eq"]=t({args:["array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var s=0;s<h.length;++s){var p=h[s];S[p]=t({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p}),S[p+"s"]=t({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:p+"s"}),S[p+"eq"]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"eq"}),S[p+"seq"]=t({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"seq"})}})();var i=["atan2","pow"];(function(){for(var s=0;s<i.length;++s){var p=i[s];S[p+"op"]=t({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"op"}),S[p+"ops"]=t({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:p+"ops"}),S[p+"opeq"]=t({args:["array","array"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opeq"}),S[p+"opseq"]=t({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+p,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:p+"opseq"})}})(),S.any=r({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),S.all=r({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),S.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),S.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),S.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),S.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),S.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),S.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),S.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),S.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),S.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),S.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),S.random=t({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),S.assign=t({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),S.assigns=t({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),S.equals=r({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],491:[function(e,d,S){var r=e("ndarray"),a=e("./doConvert.js");d.exports=function(c,t){for(var f=[],n=c,o=1;Array.isArray(n);)f.push(n.length),o*=n.length,n=n[0];return f.length===0?r():(t||(t=r(new Float64Array(o),f)),a(t,c),t)}},{"./doConvert.js":492,ndarray:495}],492:[function(e,d,S){d.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],493:[function(e,d,S){var r=e("typedarray-pool"),a=32;function u(o){switch(o){case"uint8":return[r.mallocUint8,r.freeUint8];case"uint16":return[r.mallocUint16,r.freeUint16];case"uint32":return[r.mallocUint32,r.freeUint32];case"int8":return[r.mallocInt8,r.freeInt8];case"int16":return[r.mallocInt16,r.freeInt16];case"int32":return[r.mallocInt32,r.freeInt32];case"float32":return[r.mallocFloat,r.freeFloat];case"float64":return[r.mallocDouble,r.freeDouble];default:return null}}function c(o){for(var l=[],h=0;h<o;++h)l.push("s"+h);for(var h=0;h<o;++h)l.push("n"+h);for(var h=1;h<o;++h)l.push("d"+h);for(var h=1;h<o;++h)l.push("e"+h);for(var h=1;h<o;++h)l.push("f"+h);return l}function t(o,l){var h=["'use strict'"],i=["ndarrayInsertionSort",o.join("d"),l].join(""),s=["left","right","data","offset"].concat(c(o.length)),p=u(l),v=["i,j,cptr,ptr=left*s0+offset"];if(o.length>1){for(var m=[],b=1;b<o.length;++b)v.push("i"+b),m.push("n"+b);p?v.push("scratch=malloc("+m.join("*")+")"):v.push("scratch=new Array("+m.join("*")+")"),v.push("dptr","sptr","a","b")}else v.push("scratch");function y(T){return l==="generic"?["data.get(",T,")"].join(""):["data[",T,"]"].join("")}function x(T,M){return l==="generic"?["data.set(",T,",",M,")"].join(""):["data[",T,"]=",M].join("")}if(h.push(["function ",i,"(",s.join(","),"){var ",v.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),o.length>1){h.push("dptr=0;sptr=ptr");for(var b=o.length-1;b>=0;--b){var w=o[b];w!==0&&h.push(["for(i",w,"=0;i",w,"<n",w,";++i",w,"){"].join(""))}h.push("scratch[dptr++]=",y("sptr"));for(var b=0;b<o.length;++b){var w=o[b];w!==0&&h.push("sptr+=d"+w,"}")}h.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var b=1;b<o.length;++b)b===1&&h.push("__l:"),h.push(["for(i",b,"=0;i",b,"<n",b,";++i",b,"){"].join(""));h.push(["a=",y("sptr"),`
b=scratch[dptr]
if(a<b){break __g}
if(a>b){break __l}`].join(""));for(var b=o.length-1;b>=1;--b)h.push("sptr+=e"+b,"dptr+=f"+b,"}");h.push("dptr=cptr;sptr=cptr-s0");for(var b=o.length-1;b>=0;--b){var w=o[b];w!==0&&h.push(["for(i",w,"=0;i",w,"<n",w,";++i",w,"){"].join(""))}h.push(x("dptr",y("sptr")));for(var b=0;b<o.length;++b){var w=o[b];w!==0&&h.push(["dptr+=d",w,";sptr+=d",w].join(""),"}")}h.push(`cptr-=s0
}`),h.push("dptr=cptr;sptr=0");for(var b=o.length-1;b>=0;--b){var w=o[b];w!==0&&h.push(["for(i",w,"=0;i",w,"<n",w,";++i",w,"){"].join(""))}h.push(x("dptr","scratch[sptr++]"));for(var b=0;b<o.length;++b){var w=o[b];w!==0&&h.push("dptr+=d"+w,"}")}}else h.push("scratch="+y("ptr"),"while((j-->left)&&("+y("cptr-s0")+">scratch)){",x("cptr",y("cptr-s0")),"cptr-=s0","}",x("cptr","scratch"));if(h.push("}"),o.length>1&&p&&h.push("free(scratch)"),h.push("} return "+i),p){var g=new Function("malloc","free",h.join(`
`));return g(p[0],p[1])}else{var g=new Function(h.join(`
`));return g()}}function f(o,l,h){var i=["'use strict'"],s=["ndarrayQuickSort",o.join("d"),l].join(""),p=["left","right","data","offset"].concat(c(o.length)),v=u(l),m=0;i.push(["function ",s,"(",p.join(","),"){"].join(""));var b=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(o.length>1){for(var y=[],x=1;x<o.length;++x)y.push("n"+x),b.push("i"+x);for(var x=0;x<8;++x)b.push("b_ptr"+x);b.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+y.join("*")),v?b.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):b.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else b.push("pivot1","pivot2");i.push("var "+b.join(","));function w(z){return["(offset+",z,"*s0)"].join("")}function g(z){return l==="generic"?["data.get(",z,")"].join(""):["data[",z,"]"].join("")}function T(z,B){return l==="generic"?["data.set(",z,",",B,")"].join(""):["data[",z,"]=",B].join("")}function M(z,B,H){if(z.length===1)i.push("ptr0="+w(z[0]));else for(var V=0;V<z.length;++V)i.push(["b_ptr",V,"=s0*",z[V]].join(""));B&&i.push("pivot_ptr=0"),i.push("ptr_shift=offset");for(var V=o.length-1;V>=0;--V){var Z=o[V];Z!==0&&i.push(["for(i",Z,"=0;i",Z,"<n",Z,";++i",Z,"){"].join(""))}if(z.length>1)for(var V=0;V<z.length;++V)i.push(["ptr",V,"=b_ptr",V,"+ptr_shift"].join(""));i.push(H),B&&i.push("++pivot_ptr");for(var V=0;V<o.length;++V){var Z=o[V];Z!==0&&(z.length>1?i.push("ptr_shift+=d"+Z):i.push("ptr0+=d"+Z),i.push("}"))}}function P(z,B,H,V){if(B.length===1)i.push("ptr0="+w(B[0]));else{for(var Z=0;Z<B.length;++Z)i.push(["b_ptr",Z,"=s0*",B[Z]].join(""));i.push("ptr_shift=offset")}H&&i.push("pivot_ptr=0"),z&&i.push(z+":");for(var Z=1;Z<o.length;++Z)i.push(["for(i",Z,"=0;i",Z,"<n",Z,";++i",Z,"){"].join(""));if(B.length>1)for(var Z=0;Z<B.length;++Z)i.push(["ptr",Z,"=b_ptr",Z,"+ptr_shift"].join(""));i.push(V);for(var Z=o.length-1;Z>=1;--Z)H&&i.push("pivot_ptr+=f"+Z),B.length>1?i.push("ptr_shift+=e"+Z):i.push("ptr0+=e"+Z),i.push("}")}function L(){o.length>1&&v&&i.push("free(pivot1)","free(pivot2)")}function I(z,B){var H="el"+z,V="el"+B;if(o.length>1){var Z="__l"+ ++m;P(Z,[H,V],!1,["comp=",g("ptr0"),"-",g("ptr1"),`
`,"if(comp>0){tmp0=",H,";",H,"=",V,";",V,"=tmp0;break ",Z,`}
`,"if(comp<0){break ",Z,"}"].join(""))}else i.push(["if(",g(w(H)),">",g(w(V)),"){tmp0=",H,";",H,"=",V,";",V,"=tmp0}"].join(""))}I(1,2),I(4,5),I(1,3),I(2,3),I(1,4),I(3,4),I(2,5),I(2,3),I(4,5),o.length>1?M(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),`
`,"pivot2[pivot_ptr]=",g("ptr3"),`
`,`pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])
`,"x=",g("ptr0"),`
`,"y=",g("ptr2"),`
`,"z=",g("ptr4"),`
`,T("ptr5","x"),`
`,T("ptr6","y"),`
`,T("ptr7","z")].join("")):i.push(["pivot1=",g(w("el2")),`
`,"pivot2=",g(w("el4")),`
`,`pivots_are_equal=pivot1===pivot2
`,"x=",g(w("el1")),`
`,"y=",g(w("el3")),`
`,"z=",g(w("el5")),`
`,T(w("index1"),"x"),`
`,T(w("index3"),"y"),`
`,T(w("index5"),"z")].join(""));function C(z,B){o.length>1?M([z,B],!1,T("ptr0",g("ptr1"))):i.push(T(w(z),g(w(B))))}C("index2","left"),C("index4","right");function k(z,B,H){if(o.length>1){var V="__l"+ ++m;P(V,[B],!0,[z,"=",g("ptr0"),"-pivot",H,`[pivot_ptr]
`,"if(",z,"!==0){break ",V,"}"].join(""))}else i.push([z,"=",g(w(B)),"-pivot",H].join(""))}function E(z,B){o.length>1?M([z,B],!1,["tmp=",g("ptr0"),`
`,T("ptr0",g("ptr1")),`
`,T("ptr1","tmp")].join("")):i.push(["ptr0=",w(z),`
`,"ptr1=",w(B),`
`,"tmp=",g("ptr0"),`
`,T("ptr0",g("ptr1")),`
`,T("ptr1","tmp")].join(""))}function R(z,B,H){o.length>1?(M([z,B,H],!1,["tmp=",g("ptr0"),`
`,T("ptr0",g("ptr1")),`
`,T("ptr1",g("ptr2")),`
`,T("ptr2","tmp")].join("")),i.push("++"+B,"--"+H)):i.push(["ptr0=",w(z),`
`,"ptr1=",w(B),`
`,"ptr2=",w(H),`
`,"++",B,`
`,"--",H,`
`,"tmp=",g("ptr0"),`
`,T("ptr0",g("ptr1")),`
`,T("ptr1",g("ptr2")),`
`,T("ptr2","tmp")].join(""))}function O(z,B){E(z,B),i.push("--"+B)}i.push("if(pivots_are_equal){"),i.push("for(k=less;k<=great;++k){"),k("comp","k",1),i.push("if(comp===0){continue}"),i.push("if(comp<0){"),i.push("if(k!==less){"),E("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),i.push("while(true){"),k("comp","great",1),i.push("if(comp>0){"),i.push("great--"),i.push("}else if(comp<0){"),R("k","less","great"),i.push("break"),i.push("}else{"),O("k","great"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}else{"),i.push("for(k=less;k<=great;++k){"),k("comp_pivot1","k",1),i.push("if(comp_pivot1<0){"),i.push("if(k!==less){"),E("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),k("comp_pivot2","k",2),i.push("if(comp_pivot2>0){"),i.push("while(true){"),k("comp","great",2),i.push("if(comp>0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),k("comp","great",1),i.push("if(comp<0){"),R("k","less","great"),i.push("}else{"),O("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}");function N(z,B,H){o.length>1?M([z,B],!0,[T("ptr0",g("ptr1")),`
`,T("ptr1",["pivot",H,"[pivot_ptr]"].join(""))].join("")):i.push(T(w(z),g(w(B))),T(w(B),"pivot"+H))}N("left","(less-1)",1),N("right","(great+1)",2);function G(z,B){i.push(["if((",B,"-",z,")<=",a,`){
`,"insertionSort(",z,",",B,",data,offset,",c(o.length).join(","),`)
`,`}else{
`,s,"(",z,",",B,",data,offset,",c(o.length).join(","),`)
`,"}"].join(""))}G("left","(less-2)"),G("(great+2)","right"),i.push("if(pivots_are_equal){"),L(),i.push("return"),i.push("}");function U(z,B,H){o.length>1?(i.push(["__l",++m,":while(true){"].join("")),M([z],!0,["if(",g("ptr0"),"!==pivot",B,"[pivot_ptr]){break __l",m,"}"].join("")),i.push(H,"}")):i.push(["while(",g(w(z)),"===pivot",B,"){",H,"}"].join(""))}if(i.push("if(less<index1&&great>index5){"),U("less",1,"++less"),U("great",2,"--great"),i.push("for(k=less;k<=great;++k){"),k("comp_pivot1","k",1),i.push("if(comp_pivot1===0){"),i.push("if(k!==less){"),E("k","less"),i.push("}"),i.push("++less"),i.push("}else{"),k("comp_pivot2","k",2),i.push("if(comp_pivot2===0){"),i.push("while(true){"),k("comp","great",2),i.push("if(comp===0){"),i.push("if(--great<k){break}"),i.push("continue"),i.push("}else{"),k("comp","great",1),i.push("if(comp<0){"),R("k","less","great"),i.push("}else{"),O("k","great"),i.push("}"),i.push("break"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),i.push("}"),L(),G("less","great"),i.push("}return "+s),o.length>1&&v){var Y=new Function("insertionSort","malloc","free",i.join(`
`));return Y(h,v[0],v[1])}var Y=new Function("insertionSort",i.join(`
`));return Y(h)}function n(o,l){var h=["'use strict'"],i=["ndarraySortWrapper",o.join("d"),l].join(""),s=["array"];h.push(["function ",i,"(",s.join(","),"){"].join(""));for(var p=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],v=0;v<o.length;++v)p.push(["s",v,"=stride[",v,"]|0,n",v,"=shape[",v,"]|0"].join(""));for(var m=new Array(o.length),b=[],v=0;v<o.length;++v){var y=o[v];y!==0&&(b.length===0?m[y]="1":m[y]=b.join("*"),b.push("n"+y))}for(var x=-1,w=-1,v=0;v<o.length;++v){var g=o[v];g!==0&&(x>0?p.push(["d",g,"=s",g,"-d",x,"*n",x].join("")):p.push(["d",g,"=s",g].join("")),x=g);var y=o.length-1-v;y!==0&&(w>0?p.push(["e",y,"=s",y,"-e",w,"*n",w,",f",y,"=",m[y],"-f",w,"*n",w].join("")):p.push(["e",y,"=s",y,",f",y,"=",m[y]].join("")),w=y)}h.push("var "+p.join(","));var T=["0","n0-1","data","offset"].concat(c(o.length));h.push(["if(n0<=",a,"){","insertionSort(",T.join(","),")}else{","quickSort(",T.join(","),")}"].join("")),h.push("}return "+i);var M=new Function("insertionSort","quickSort",h.join(`
`)),P=t(o,l),L=f(o,l,P);return M(P,L)}d.exports=n},{"typedarray-pool":595}],494:[function(e,d,S){var r=e("./lib/compile_sort.js"),a={};function u(c){var t=c.order,f=c.dtype,n=[t,f],o=n.join(":"),l=a[o];return l||(a[o]=l=r(t,f)),l(c),c}d.exports=u},{"./lib/compile_sort.js":493}],495:[function(e,d,S){var r=e("iota-array"),a=e("is-buffer"),u=typeof Float64Array<"u";function c(h,i){return h[0]-i[0]}function t(){var h=this.stride,i=new Array(h.length),s;for(s=0;s<i.length;++s)i[s]=[Math.abs(h[s]),s];i.sort(c);var p=new Array(i.length);for(s=0;s<p.length;++s)p[s]=i[s][1];return p}function f(h,i){var s=["View",i,"d",h].join("");i<0&&(s="View_Nil"+h);var p=h==="generic";if(i===-1){var v="function "+s+"(a){this.data=a;};	var proto="+s+".prototype;	proto.dtype='"+h+"';	proto.index=function(){return -1};	proto.size=0;	proto.dimension=-1;	proto.shape=proto.stride=proto.order=[];	proto.lo=proto.hi=proto.transpose=proto.step=	function(){return new "+s+"(this.data);};	proto.get=proto.set=function(){};	proto.pick=function(){return null};	return function construct_"+s+"(a){return new "+s+"(a);}",I=new Function(v);return I()}else if(i===0){var v="function "+s+"(a,d) {	this.data = a;	this.offset = d	};	var proto="+s+".prototype;	proto.dtype='"+h+"';	proto.index=function(){return this.offset};	proto.dimension=0;	proto.size=1;	proto.shape=	proto.stride=	proto.order=[];	proto.lo=	proto.hi=	proto.transpose=	proto.step=function "+s+"_copy() {	return new "+s+"(this.data,this.offset)	};	proto.pick=function "+s+"_pick(){	return TrivialArray(this.data);	};	proto.valueOf=proto.get=function "+s+"_get(){	return "+(p?"this.data.get(this.offset)":"this.data[this.offset]")+"};	proto.set=function "+s+"_set(v){	return "+(p?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"	};	return function construct_"+s+"(a,b,c,d){return new "+s+"(a,d)}",I=new Function("TrivialArray",v);return I(o[h][0])}var v=["'use strict'"],m=r(i),b=m.map(function(C){return"i"+C}),y="this.offset+"+m.map(function(C){return"this.stride["+C+"]*i"+C}).join("+"),x=m.map(function(C){return"b"+C}).join(","),w=m.map(function(C){return"c"+C}).join(",");v.push("function "+s+"(a,"+x+","+w+",d){this.data=a","this.shape=["+x+"]","this.stride=["+w+"]","this.offset=d|0}","var proto="+s+".prototype","proto.dtype='"+h+"'","proto.dimension="+i),v.push("Object.defineProperty(proto,'size',{get:function "+s+"_size(){	return "+m.map(function(C){return"this.shape["+C+"]"}).join("*"),"}})"),i===1?v.push("proto.order=[0]"):(v.push("Object.defineProperty(proto,'order',{get:"),i<4?(v.push("function "+s+"_order(){"),i===2?v.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):i===3&&v.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);	if(s0>s1){	if(s1>s2){	return [2,1,0];	}else if(s0>s2){	return [1,2,0];	}else{	return [1,0,2];	}	}else if(s0>s2){	return [2,0,1];	}else if(s2>s1){	return [0,1,2];	}else{	return [0,2,1];	}}})")):v.push("ORDER})")),v.push("proto.set=function "+s+"_set("+b.join(",")+",v){"),p?v.push("return this.data.set("+y+",v)}"):v.push("return this.data["+y+"]=v}"),v.push("proto.get=function "+s+"_get("+b.join(",")+"){"),p?v.push("return this.data.get("+y+")}"):v.push("return this.data["+y+"]}"),v.push("proto.index=function "+s+"_index(",b.join(),"){return "+y+"}"),v.push("proto.hi=function "+s+"_hi("+b.join(",")+"){return new "+s+"(this.data,"+m.map(function(C){return["(typeof i",C,"!=='number'||i",C,"<0)?this.shape[",C,"]:i",C,"|0"].join("")}).join(",")+","+m.map(function(C){return"this.stride["+C+"]"}).join(",")+",this.offset)}");var g=m.map(function(C){return"a"+C+"=this.shape["+C+"]"}),T=m.map(function(C){return"c"+C+"=this.stride["+C+"]"});v.push("proto.lo=function "+s+"_lo("+b.join(",")+"){var b=this.offset,d=0,"+g.join(",")+","+T.join(","));for(var M=0;M<i;++M)v.push("if(typeof i"+M+"==='number'&&i"+M+">=0){	d=i"+M+"|0;	b+=c"+M+"*d;	a"+M+"-=d}");v.push("return new "+s+"(this.data,"+m.map(function(C){return"a"+C}).join(",")+","+m.map(function(C){return"c"+C}).join(",")+",b)}"),v.push("proto.step=function "+s+"_step("+b.join(",")+"){var "+m.map(function(C){return"a"+C+"=this.shape["+C+"]"}).join(",")+","+m.map(function(C){return"b"+C+"=this.stride["+C+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var M=0;M<i;++M)v.push("if(typeof i"+M+"==='number'){	d=i"+M+"|0;	if(d<0){	c+=b"+M+"*(a"+M+"-1);	a"+M+"=ceil(-a"+M+"/d)	}else{	a"+M+"=ceil(a"+M+"/d)	}	b"+M+"*=d	}");v.push("return new "+s+"(this.data,"+m.map(function(C){return"a"+C}).join(",")+","+m.map(function(C){return"b"+C}).join(",")+",c)}");for(var P=new Array(i),L=new Array(i),M=0;M<i;++M)P[M]="a[i"+M+"]",L[M]="b[i"+M+"]";v.push("proto.transpose=function "+s+"_transpose("+b+"){"+b.map(function(C,k){return C+"=("+C+"===undefined?"+k+":"+C+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+s+"(this.data,"+P.join(",")+","+L.join(",")+",this.offset)}"),v.push("proto.pick=function "+s+"_pick("+b+"){var a=[],b=[],c=this.offset");for(var M=0;M<i;++M)v.push("if(typeof i"+M+"==='number'&&i"+M+">=0){c=(c+this.stride["+M+"]*i"+M+")|0}else{a.push(this.shape["+M+"]);b.push(this.stride["+M+"])}");v.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),v.push("return function construct_"+s+"(data,shape,stride,offset){return new "+s+"(data,"+m.map(function(C){return"shape["+C+"]"}).join(",")+","+m.map(function(C){return"stride["+C+"]"}).join(",")+",offset)}");var I=new Function("CTOR_LIST","ORDER",v.join(`
`));return I(o[h],t)}function n(h){if(a(h))return"buffer";if(u)switch(Object.prototype.toString.call(h)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(h)?"array":"generic"}var o={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function l(h,i,s,p){if(h===void 0){var w=o.array[0];return w([])}else typeof h=="number"&&(h=[h]);i===void 0&&(i=[h.length]);var v=i.length;if(s===void 0){s=new Array(v);for(var m=v-1,b=1;m>=0;--m)s[m]=b,b*=i[m]}if(p===void 0){p=0;for(var m=0;m<v;++m)s[m]<0&&(p-=(i[m]-1)*s[m])}for(var y=n(h),x=o[y];x.length<=v+1;)x.push(f(y,x.length-1));var w=x[v+1];return w(h,i,s,p)}d.exports=l},{"iota-array":463,"is-buffer":465}],496:[function(e,d,S){var r=e("double-bits"),a=Math.pow(2,-1074),u=-1>>>0;d.exports=c;function c(t,f){if(isNaN(t)||isNaN(f))return NaN;if(t===f)return t;if(t===0)return f<0?-a:a;var n=r.hi(t),o=r.lo(t);return f>t==t>0?o===u?(n+=1,o=0):o+=1:o===0?(o=u,n-=1):o-=1,r.pack(o,n)}},{"double-bits":173}],497:[function(e,d,S){var r=Math.PI,a=o(120);d.exports=u;function u(l){for(var h,i=[],s=0,p=0,v=0,m=0,b=null,y=null,x=0,w=0,g=0,T=l.length;g<T;g++){var M=l[g],P=M[0];switch(P){case"M":v=M[1],m=M[2];break;case"A":M=f(x,w,M[1],M[2],o(M[3]),M[4],M[5],M[6],M[7]),M.unshift("C"),M.length>7&&(i.push(M.splice(0,7)),M.unshift("C"));break;case"S":var L=x,I=w;(h=="C"||h=="S")&&(L+=L-s,I+=I-p),M=["C",L,I,M[1],M[2],M[3],M[4]];break;case"T":h=="Q"||h=="T"?(b=x*2-b,y=w*2-y):(b=x,y=w),M=t(x,w,b,y,M[1],M[2]);break;case"Q":b=M[1],y=M[2],M=t(x,w,M[1],M[2],M[3],M[4]);break;case"L":M=c(x,w,M[1],M[2]);break;case"H":M=c(x,w,M[1],w);break;case"V":M=c(x,w,x,M[1]);break;case"Z":M=c(x,w,v,m);break}h=P,x=M[M.length-2],w=M[M.length-1],M.length>4?(s=M[M.length-4],p=M[M.length-3]):(s=x,p=w),i.push(M)}return i}function c(l,h,i,s){return["C",l,h,i,s,i,s]}function t(l,h,i,s,p,v){return["C",l/3+2/3*i,h/3+2/3*s,p/3+2/3*i,v/3+2/3*s,p,v]}function f(l,h,i,s,p,v,m,b,y,x){if(x)E=x[0],R=x[1],C=x[2],k=x[3];else{var w=n(l,h,-p);l=w.x,h=w.y,w=n(b,y,-p),b=w.x,y=w.y;var g=(l-b)/2,T=(h-y)/2,M=g*g/(i*i)+T*T/(s*s);M>1&&(M=Math.sqrt(M),i=M*i,s=M*s);var P=i*i,L=s*s,I=(v==m?-1:1)*Math.sqrt(Math.abs((P*L-P*T*T-L*g*g)/(P*T*T+L*g*g)));I==1/0&&(I=1);var C=I*i*T/s+(l+b)/2,k=I*-s*g/i+(h+y)/2,E=Math.asin(((h-k)/s).toFixed(9)),R=Math.asin(((y-k)/s).toFixed(9));E=l<C?r-E:E,R=b<C?r-R:R,E<0&&(E=r*2+E),R<0&&(R=r*2+R),m&&E>R&&(E=E-r*2),!m&&R>E&&(R=R-r*2)}if(Math.abs(R-E)>a){var O=R,N=b,G=y;R=E+a*(m&&R>E?1:-1),b=C+i*Math.cos(R),y=k+s*Math.sin(R);var U=f(b,y,i,s,p,0,m,N,G,[R,O,C,k])}var Y=Math.tan((R-E)/4),z=4/3*i*Y,B=4/3*s*Y,H=[2*l-(l+z*Math.sin(E)),2*h-(h-B*Math.cos(E)),b+z*Math.sin(R),y-B*Math.cos(R),b,y];if(x)return H;U&&(H=H.concat(U));for(var V=0;V<H.length;){var Z=n(H[V],H[V+1],p);H[V++]=Z.x,H[V++]=Z.y}return H}function n(l,h,i){return{x:l*Math.cos(i)-h*Math.sin(i),y:l*Math.sin(i)+h*Math.cos(i)}}function o(l){return l*(r/180)}},{}],498:[function(e,d,S){var r=1e-6,a=1e-6;S.vertexNormals=function(u,c,t){for(var f=c.length,n=new Array(f),o=t===void 0?r:t,l=0;l<f;++l)n[l]=[0,0,0];for(var l=0;l<u.length;++l)for(var h=u[l],i=0,s=h[h.length-1],p=h[0],v=0;v<h.length;++v){i=s,s=p,p=h[(v+1)%h.length];for(var m=c[i],b=c[s],y=c[p],x=new Array(3),w=0,g=new Array(3),T=0,M=0;M<3;++M)x[M]=m[M]-b[M],w+=x[M]*x[M],g[M]=y[M]-b[M],T+=g[M]*g[M];if(w*T>o)for(var P=n[s],L=1/Math.sqrt(w*T),M=0;M<3;++M){var I=(M+1)%3,C=(M+2)%3;P[M]+=L*(g[I]*x[C]-g[C]*x[I])}}for(var l=0;l<f;++l){for(var P=n[l],k=0,M=0;M<3;++M)k+=P[M]*P[M];if(k>o)for(var L=1/Math.sqrt(k),M=0;M<3;++M)P[M]*=L;else for(var M=0;M<3;++M)P[M]=0}return n},S.faceNormals=function(u,c,t){for(var f=u.length,n=new Array(f),o=t===void 0?a:t,l=0;l<f;++l){for(var h=u[l],i=new Array(3),s=0;s<3;++s)i[s]=c[h[s]];for(var p=new Array(3),v=new Array(3),s=0;s<3;++s)p[s]=i[1][s]-i[0][s],v[s]=i[2][s]-i[0][s];for(var m=new Array(3),b=0,s=0;s<3;++s){var y=(s+1)%3,x=(s+2)%3;m[s]=p[y]*v[x]-p[x]*v[y],b+=m[s]*m[s]}b>o?b=1/Math.sqrt(b):b=0;for(var s=0;s<3;++s)m[s]*=b;n[l]=m}return n}},{}],499:[function(e,d,S){var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function c(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}function t(){try{if(!Object.assign)return!1;var f=new String("abc");if(f[5]="de",Object.getOwnPropertyNames(f)[0]==="5")return!1;for(var n={},o=0;o<10;o++)n["_"+String.fromCharCode(o)]=o;var l=Object.getOwnPropertyNames(n).map(function(i){return n[i]});if(l.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(i){h[i]=i}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}d.exports=t()?Object.assign:function(f,n){for(var o,l=c(f),h,i=1;i<arguments.length;i++){o=Object(arguments[i]);for(var s in o)a.call(o,s)&&(l[s]=o[s]);if(r){h=r(o);for(var p=0;p<h.length;p++)u.call(o,h[p])&&(l[h[p]]=o[h[p]])}}return l}},{}],500:[function(e,d,S){d.exports=r;function r(a,u,c,t,f,n,o,l,h,i){var s=u+n+i;if(p>0){var p=Math.sqrt(s+1);a[0]=.5*(o-h)/p,a[1]=.5*(l-t)/p,a[2]=.5*(c-n)/p,a[3]=.5*p}else{var v=Math.max(u,n,i),p=Math.sqrt(2*v-s+1);u>=v?(a[0]=.5*p,a[1]=.5*(f+c)/p,a[2]=.5*(l+t)/p,a[3]=.5*(o-h)/p):n>=v?(a[0]=.5*(c+f)/p,a[1]=.5*p,a[2]=.5*(h+o)/p,a[3]=.5*(l-t)/p):(a[0]=.5*(t+l)/p,a[1]=.5*(o+h)/p,a[2]=.5*p,a[3]=.5*(c-f)/p)}return a}},{}],501:[function(e,d,S){d.exports=i;var r=e("filtered-vector"),a=e("gl-mat4/lookAt"),u=e("gl-mat4/fromQuat"),c=e("gl-mat4/invert"),t=e("./lib/quatFromFrame");function f(s,p,v){return Math.sqrt(Math.pow(s,2)+Math.pow(p,2)+Math.pow(v,2))}function n(s,p,v,m){return Math.sqrt(Math.pow(s,2)+Math.pow(p,2)+Math.pow(v,2)+Math.pow(m,2))}function o(s,p){var v=p[0],m=p[1],b=p[2],y=p[3],x=n(v,m,b,y);x>1e-6?(s[0]=v/x,s[1]=m/x,s[2]=b/x,s[3]=y/x):(s[0]=s[1]=s[2]=0,s[3]=1)}function l(s,p,v){this.radius=r([v]),this.center=r(p),this.rotation=r(s),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=l.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(s){this.radius.curve(s),this.center.curve(s),this.rotation.curve(s);var p=this.computedRotation;o(p,p);var v=this.computedMatrix;u(v,p);var m=this.computedCenter,b=this.computedEye,y=this.computedUp,x=Math.exp(this.computedRadius[0]);b[0]=m[0]+x*v[2],b[1]=m[1]+x*v[6],b[2]=m[2]+x*v[10],y[0]=v[1],y[1]=v[5],y[2]=v[9];for(var w=0;w<3;++w){for(var g=0,T=0;T<3;++T)g+=v[w+4*T]*b[T];v[12+w]=-g}},h.getMatrix=function(s,p){this.recalcMatrix(s);var v=this.computedMatrix;if(p){for(var m=0;m<16;++m)p[m]=v[m];return p}return v},h.idle=function(s){this.center.idle(s),this.radius.idle(s),this.rotation.idle(s)},h.flush=function(s){this.center.flush(s),this.radius.flush(s),this.rotation.flush(s)},h.pan=function(s,p,v,m){p=p||0,v=v||0,m=m||0,this.recalcMatrix(s);var b=this.computedMatrix,y=b[1],x=b[5],w=b[9],g=f(y,x,w);y/=g,x/=g,w/=g;var T=b[0],M=b[4],P=b[8],L=T*y+M*x+P*w;T-=y*L,M-=x*L,P-=w*L;var I=f(T,M,P);T/=I,M/=I,P/=I,b[2],b[6],b[10];var C=T*p+y*v,k=M*p+x*v,E=P*p+w*v;this.center.move(s,C,k,E);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+m),this.radius.set(s,Math.log(R))},h.rotate=function(s,p,v,m){this.recalcMatrix(s),p=p||0,v=v||0;var b=this.computedMatrix,y=b[0],x=b[4],w=b[8],g=b[1],T=b[5],M=b[9],P=b[2],L=b[6],I=b[10],C=p*y+v*g,k=p*x+v*T,E=p*w+v*M,R=-(L*E-I*k),O=-(I*C-P*E),N=-(P*k-L*C),G=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(N,2))),U=n(R,O,N,G);U>1e-6?(R/=U,O/=U,N/=U,G/=U):(R=O=N=0,G=1);var Y=this.computedRotation,z=Y[0],B=Y[1],H=Y[2],V=Y[3],Z=z*G+V*R+B*N-H*O,q=B*G+V*O+H*R-z*N,J=H*G+V*N+z*O-B*R,ne=V*G-z*R-B*O-H*N;if(m){R=P,O=L,N=I;var ve=Math.sin(m)/f(R,O,N);R*=ve,O*=ve,N*=ve,G=Math.cos(p),Z=Z*G+ne*R+q*N-J*O,q=q*G+ne*O+J*R-Z*N,J=J*G+ne*N+Z*O-q*R,ne=ne*G-Z*R-q*O-J*N}var $=n(Z,q,J,ne);$>1e-6?(Z/=$,q/=$,J/=$,ne/=$):(Z=q=J=0,ne=1),this.rotation.set(s,Z,q,J,ne)},h.lookAt=function(s,p,v,m){this.recalcMatrix(s),v=v||this.computedCenter,p=p||this.computedEye,m=m||this.computedUp;var b=this.computedMatrix;a(b,p,v,m);var y=this.computedRotation;t(y,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),o(y,y),this.rotation.set(s,y[0],y[1],y[2],y[3]);for(var x=0,w=0;w<3;++w)x+=Math.pow(v[w]-p[w],2);this.radius.set(s,.5*Math.log(Math.max(x,1e-6))),this.center.set(s,v[0],v[1],v[2])},h.translate=function(s,p,v,m){this.center.move(s,p||0,v||0,m||0)},h.setMatrix=function(s,p){var v=this.computedRotation;t(v,p[0],p[1],p[2],p[4],p[5],p[6],p[8],p[9],p[10]),o(v,v),this.rotation.set(s,v[0],v[1],v[2],v[3]);var m=this.computedMatrix;c(m,p);var b=m[15];if(Math.abs(b)>1e-6){var y=m[12]/b,x=m[13]/b,w=m[14]/b;this.recalcMatrix(s);var g=Math.exp(this.computedRadius[0]);this.center.set(s,y-m[2]*g,x-m[6]*g,w-m[10]*g),this.radius.idle(s)}else this.center.idle(s),this.radius.idle(s)},h.setDistance=function(s,p){p>0&&this.radius.set(s,Math.log(p))},h.setDistanceLimits=function(s,p){s>0?s=Math.log(s):s=-1/0,p>0?p=Math.log(p):p=1/0,p=Math.max(p,s),this.radius.bounds[0][0]=s,this.radius.bounds[1][0]=p},h.getDistanceLimits=function(s){var p=this.radius.bounds;return s?(s[0]=Math.exp(p[0][0]),s[1]=Math.exp(p[1][0]),s):[Math.exp(p[0][0]),Math.exp(p[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(s){var p=this.lastT(),v=s.center;v&&this.center.set(p,v[0],v[1],v[2]);var m=s.rotation;m&&this.rotation.set(p,m[0],m[1],m[2],m[3]);var b=s.distance;b&&b>0&&this.radius.set(p,Math.log(b)),this.setDistanceLimits(s.zoomMin,s.zoomMax)};function i(s){s=s||{};var p=s.center||[0,0,0],v=s.rotation||[0,0,0,1],m=s.radius||1;p=[].slice.call(p,0,3),v=[].slice.call(v,0,4),o(v,v);var b=new l(v,p,Math.log(m));return b.setDistanceLimits(s.zoomMin,s.zoomMax),("eye"in s||"up"in s)&&b.lookAt(0,s.eye,s.center,s.up),b}},{"./lib/quatFromFrame":500,"filtered-vector":242,"gl-mat4/fromQuat":282,"gl-mat4/invert":293,"gl-mat4/lookAt":294}],502:[function(e,d,S){var r=e("repeat-string");d.exports=function(u,c,t){return t=typeof t<"u"?t+"":" ",r(t,c)+u}},{"repeat-string":541}],503:[function(e,d,S){function r(c,t){if(typeof c!="string")return[c];var f=[c];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var n=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],o=t.escape||"___",l=!!t.flat;n.forEach(function(s){var p=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),v=[];function m(b,y,x){var w=f.push(b.slice(s[0].length,-s[1].length))-1;return v.push(w),o+w+o}f.forEach(function(b,y){for(var x,w=0;b!=x;)if(x=b,b=b.replace(p,m),w++>1e4)throw Error("References have circular dependency. Please, check them.");f[y]=b}),v=v.reverse(),f=f.map(function(b){return v.forEach(function(y){b=b.replace(new RegExp("(\\"+o+y+"\\"+o+")","g"),s[0]+"$1"+s[1])}),b})});var h=new RegExp("\\"+o+"([0-9]+)\\"+o);function i(s,p,v){for(var m=[],b,y=0;b=h.exec(s);){if(y++>1e4)throw Error("Circular references in parenthesis");m.push(s.slice(0,b.index)),m.push(i(p[b[1]],p)),s=s.slice(b.index+b[0].length)}return m.push(s),m}return l?f:i(f[0],f)}function a(c,t){if(t&&t.flat){var f=t&&t.escape||"___",n=c[0],o;if(!n)return"";for(var l=new RegExp("\\"+f+"([0-9]+)\\"+f),h=0;n!=o;){if(h++>1e4)throw Error("Circular references in "+c);o=n,n=n.replace(l,i)}return n}return c.reduce(function s(p,v){return Array.isArray(v)&&(v=v.reduce(s,"")),p+v},"");function i(s,p){if(c[p]==null)throw Error("Reference "+p+"is undefined");return c[p]}}function u(c,t){return Array.isArray(c)?a(c,t):r(c,t)}u.parse=r,u.stringify=a,d.exports=u},{}],504:[function(e,d,S){var r=e("pick-by-alias");d.exports=a;function a(u){var c;return arguments.length>1&&(u=arguments),typeof u=="string"?u=u.split(/\s/).map(parseFloat):typeof u=="number"&&(u=[u]),u.length&&typeof u[0]=="number"?u.length===1?c={width:u[0],height:u[0],x:0,y:0}:u.length===2?c={width:u[0],height:u[1],x:0,y:0}:c={x:u[0],y:u[1],width:u[2]-u[0]||0,height:u[3]-u[1]||0}:u&&(u=r(u,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),c={x:u.left||0,y:u.top||0},u.width==null?u.right?c.width=u.right-c.x:c.width=0:c.width=u.width,u.height==null?u.bottom?c.height=u.bottom-c.y:c.height=0:c.height=u.height),c}},{"pick-by-alias":511}],505:[function(e,d,S){d.exports=u;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},a=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(f){var n=[];return f.replace(a,function(o,l,h){var i=l.toLowerCase();for(h=t(h),i=="m"&&h.length>2&&(n.push([l].concat(h.splice(0,2))),i="l",l=l=="m"?"l":"L");;){if(h.length==r[i])return h.unshift(l),n.push(h);if(h.length<r[i])throw new Error("malformed path data");n.push([l].concat(h.splice(0,r[i])))}}),n}var c=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(f){var n=f.match(c);return n?n.map(Number):[]}},{}],506:[function(e,d,S){d.exports=function(a,u){u||(u=[0,""]),a=String(a);var c=parseFloat(a,10);return u[0]=c,u[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",u}},{}],507:[function(e,d,S){(function(r){(function(){function a(f){if(typeof f!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(f))}function u(f,n){for(var o="",l=0,h=-1,i=0,s,p=0;p<=f.length;++p){if(p<f.length)s=f.charCodeAt(p);else{if(s===47)break;s=47}if(s===47){if(!(h===p-1||i===1))if(h!==p-1&&i===2){if(o.length<2||l!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var v=o.lastIndexOf("/");if(v!==o.length-1){v===-1?(o="",l=0):(o=o.slice(0,v),l=o.length-1-o.lastIndexOf("/")),h=p,i=0;continue}}else if(o.length===2||o.length===1){o="",l=0,h=p,i=0;continue}}n&&(o.length>0?o+="/..":o="..",l=2)}else o.length>0?o+="/"+f.slice(h+1,p):o=f.slice(h+1,p),l=p-h-1;h=p,i=0}else s===46&&i!==-1?++i:i=-1}return o}function c(f,n){var o=n.dir||n.root,l=n.base||(n.name||"")+(n.ext||"");return o?o===n.root?o+l:o+f+l:l}var t={resolve:function(){for(var n="",o=!1,l,h=arguments.length-1;h>=-1&&!o;h--){var i;h>=0?i=arguments[h]:(l===void 0&&(l=r.cwd()),i=l),a(i),i.length!==0&&(n=i+"/"+n,o=i.charCodeAt(0)===47)}return n=u(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(a(n),n.length===0)return".";var o=n.charCodeAt(0)===47,l=n.charCodeAt(n.length-1)===47;return n=u(n,!o),n.length===0&&!o&&(n="."),n.length>0&&l&&(n+="/"),o?"/"+n:n},isAbsolute:function(n){return a(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,o=0;o<arguments.length;++o){var l=arguments[o];a(l),l.length>0&&(n===void 0?n=l:n+="/"+l)}return n===void 0?".":t.normalize(n)},relative:function(n,o){if(a(n),a(o),n===o||(n=t.resolve(n),o=t.resolve(o),n===o))return"";for(var l=1;l<n.length&&n.charCodeAt(l)===47;++l);for(var h=n.length,i=h-l,s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var p=o.length,v=p-s,m=i<v?i:v,b=-1,y=0;y<=m;++y){if(y===m){if(v>m){if(o.charCodeAt(s+y)===47)return o.slice(s+y+1);if(y===0)return o.slice(s+y)}else i>m&&(n.charCodeAt(l+y)===47?b=y:y===0&&(b=0));break}var x=n.charCodeAt(l+y),w=o.charCodeAt(s+y);if(x!==w)break;x===47&&(b=y)}var g="";for(y=l+b+1;y<=h;++y)(y===h||n.charCodeAt(y)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+o.slice(s+b):(s+=b,o.charCodeAt(s)===47&&++s,o.slice(s))},_makeLong:function(n){return n},dirname:function(n){if(a(n),n.length===0)return".";for(var o=n.charCodeAt(0),l=o===47,h=-1,i=!0,s=n.length-1;s>=1;--s)if(o=n.charCodeAt(s),o===47){if(!i){h=s;break}}else i=!1;return h===-1?l?"/":".":l&&h===1?"//":n.slice(0,h)},basename:function(n,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');a(n);var l=0,h=-1,i=!0,s;if(o!==void 0&&o.length>0&&o.length<=n.length){if(o.length===n.length&&o===n)return"";var p=o.length-1,v=-1;for(s=n.length-1;s>=0;--s){var m=n.charCodeAt(s);if(m===47){if(!i){l=s+1;break}}else v===-1&&(i=!1,v=s+1),p>=0&&(m===o.charCodeAt(p)?--p===-1&&(h=s):(p=-1,h=v))}return l===h?h=v:h===-1&&(h=n.length),n.slice(l,h)}else{for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!i){l=s+1;break}}else h===-1&&(i=!1,h=s+1);return h===-1?"":n.slice(l,h)}},extname:function(n){a(n);for(var o=-1,l=0,h=-1,i=!0,s=0,p=n.length-1;p>=0;--p){var v=n.charCodeAt(p);if(v===47){if(!i){l=p+1;break}continue}h===-1&&(i=!1,h=p+1),v===46?o===-1?o=p:s!==1&&(s=1):o!==-1&&(s=-1)}return o===-1||h===-1||s===0||s===1&&o===h-1&&o===l+1?"":n.slice(o,h)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return c("/",n)},parse:function(n){a(n);var o={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return o;var l=n.charCodeAt(0),h=l===47,i;h?(o.root="/",i=1):i=0;for(var s=-1,p=0,v=-1,m=!0,b=n.length-1,y=0;b>=i;--b){if(l=n.charCodeAt(b),l===47){if(!m){p=b+1;break}continue}v===-1&&(m=!1,v=b+1),l===46?s===-1?s=b:y!==1&&(y=1):s!==-1&&(y=-1)}return s===-1||v===-1||y===0||y===1&&s===v-1&&s===p+1?v!==-1&&(p===0&&h?o.base=o.name=n.slice(1,v):o.base=o.name=n.slice(p,v)):(p===0&&h?(o.name=n.slice(1,s),o.base=n.slice(1,v)):(o.name=n.slice(p,s),o.base=n.slice(p,v)),o.ext=n.slice(s,v)),p>0?o.dir=n.slice(0,p-1):h&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};t.posix=t,d.exports=t}).call(this)}).call(this,e("_process"))},{_process:526}],508:[function(e,d,S){(function(r){(function(){(function(){var a,u,c,t,f,n;typeof performance<"u"&&performance!==null&&performance.now?d.exports=function(){return performance.now()}:typeof r<"u"&&r!==null&&r.hrtime?(d.exports=function(){return(a()-f)/1e6},u=r.hrtime,a=function(){var o;return o=u(),o[0]*1e9+o[1]},t=a(),n=r.uptime()*1e9,f=t-n):Date.now?(d.exports=function(){return Date.now()-c},c=Date.now()):(d.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:526}],509:[function(e,d,S){d.exports=u;var r=32,a=e("typedarray-pool");function u(c){var t=c.length;if(t<r){for(var f=1,n=0;n<t;++n)for(var o=0;o<n;++o)if(c[n]<c[o])f=-f;else if(c[n]===c[o])return 0;return f}else{for(var l=a.mallocUint8(t),n=0;n<t;++n)l[n]=0;for(var f=1,n=0;n<t;++n)if(!l[n]){var h=1;l[n]=1;for(var o=c[n];o!==n;o=c[o]){if(l[o])return a.freeUint8(l),0;h+=1,l[o]=1}h&1||(f=-f)}return a.freeUint8(l),f}}},{"typedarray-pool":595}],510:[function(e,d,S){var r=e("typedarray-pool"),a=e("invert-permutation");function u(t){var f=t.length;switch(f){case 0:case 1:return 0;case 2:return t[1]}var n=r.mallocUint32(f),o=r.mallocUint32(f),l=0,h,i,s;for(a(t,o),s=0;s<f;++s)n[s]=t[s];for(s=f-1;s>0;--s)i=o[s],h=n[s],n[s]=n[i],n[i]=h,o[s]=o[h],o[h]=i,l=(l+h)*s;return r.freeUint32(o),r.freeUint32(n),l}function c(t,f,n){switch(t){case 0:return n||[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(f?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):f?[0,1]:[1,0]}n=n||new Array(t);var o,l,h,i=1;for(n[0]=0,h=1;h<t;++h)n[h]=h,i=i*h|0;for(h=t-1;h>0;--h)o=f/i|0,f=f-o*i|0,i=i/h|0,l=n[h]|0,n[h]=n[o]|0,n[o]=l|0;return n}S.rank=u,S.unrank=c},{"invert-permutation":462,"typedarray-pool":595}],511:[function(e,d,S){d.exports=function(c,t,f){var n={},o,l;if(typeof t=="string"&&(t=a(t)),Array.isArray(t)){var h={};for(l=0;l<t.length;l++)h[t[l]]=!0;t=h}for(o in t)t[o]=a(t[o]);var i={};for(o in t){var s=t[o];if(Array.isArray(s))for(l=0;l<s.length;l++){var p=s[l];if(f&&(i[p]=!0),p in c){if(n[o]=c[p],f)for(var v=l;v<s.length;v++)i[s[v]]=!0;break}}else o in c&&(t[o]&&(n[o]=c[o]),f&&(i[o]=!0))}if(f)for(o in c)i[o]||(n[o]=c[o]);return n};var r={};function a(u){return r[u]?r[u]:(typeof u=="string"&&(u=r[u]=u.split(/\s*,\s*|\s+/)),u)}},{}],512:[function(e,d,S){d.exports=a;var r=e("compare-angle");function a(u,c){for(var t=c.length|0,f=u.length,n=[new Array(t),new Array(t)],o=0;o<t;++o)n[0][o]=[],n[1][o]=[];for(var o=0;o<f;++o){var l=u[o];n[0][l[0]].push(l),n[1][l[1]].push(l)}for(var h=[],o=0;o<t;++o)n[0][o].length+n[1][o].length===0&&h.push([o]);function i(x,w){var g=n[w][x[w]];g.splice(g.indexOf(x),1)}function s(x,w,g){for(var T,M,P,L=0;L<2;++L)if(n[L][w].length>0){T=n[L][w][0],P=L;break}M=T[P^1];for(var I=0;I<2;++I)for(var C=n[I][w],k=0;k<C.length;++k){var E=C[k],R=E[I^1],O=r(c[x],c[w],c[M],c[R]);O>0&&(T=E,M=R,P=I)}return g||T&&i(T,P),M}function p(x,w){var g=n[w][x][0],T=[x];i(g,w);for(var M=g[w^1];;){for(;M!==x;)T.push(M),M=s(T[T.length-2],M,!1);if(n[0][x].length+n[1][x].length===0)break;var P=T[T.length-1],L=x,I=T[1],C=s(P,L,!0);if(r(c[P],c[L],c[I],c[C])<0)break;T.push(x),M=s(P,L)}return T}function v(x,w){return w[1]===w[w.length-1]}for(var o=0;o<t;++o)for(var m=0;m<2;++m){for(var b=[];n[m][o].length>0;){n[0][o].length;var y=p(o,m);v(b,y)?b.push.apply(b,y):(b.length>0&&h.push(b),b=y)}b.length>0&&h.push(b)}return h}},{"compare-angle":132}],513:[function(e,d,S){d.exports=a;var r=e("edges-to-adjacency-list");function a(u,c){for(var t=r(u,c.length),f=new Array(c.length),n=new Array(c.length),o=[],l=0;l<c.length;++l){var h=t[l].length;n[l]=h,f[l]=!0,h<=1&&o.push(l)}for(;o.length>0;){var i=o.pop();f[i]=!1;for(var s=t[i],l=0;l<s.length;++l){var p=s[l];--n[p]===0&&o.push(p)}}for(var v=new Array(c.length),m=[],l=0;l<c.length;++l)if(f[l]){var i=m.length;v[l]=i,m.push(c[l])}else v[l]=-1;for(var b=[],l=0;l<u.length;++l){var y=u[l];f[y[0]]&&f[y[1]]&&b.push([v[y[0]],v[y[1]]])}return[b,m]}},{"edges-to-adjacency-list":178}],514:[function(e,d,S){d.exports=h;var r=e("edges-to-adjacency-list"),a=e("planar-dual"),u=e("point-in-big-polygon"),c=e("two-product"),t=e("robust-sum"),f=e("uniq"),n=e("./lib/trim-leaves");function o(i,s){for(var p=new Array(i),v=0;v<i;++v)p[v]=s;return p}function l(i){for(var s=new Array(i),p=0;p<i;++p)s[p]=[];return s}function h(i,s){var ne=n(i,s);i=ne[0],s=ne[1];var p=s.length;i.length;for(var v=r(i,s.length),m=0;m<p;++m)if(v[m].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=a(i,s);function y(re){for(var ce=re.length,pe=[0],fe=0;fe<ce;++fe){var se=s[re[fe]],de=s[re[(fe+1)%ce]],be=c(-se[0],se[1]),xe=c(-se[0],de[1]),ke=c(de[0],se[1]),Re=c(de[0],de[1]);pe=t(pe,t(t(be,xe),t(ke,Re)))}return pe[pe.length-1]>0}b=b.filter(y);for(var x=b.length,w=new Array(x),g=new Array(x),m=0;m<x;++m){w[m]=m;var T=new Array(x),M=b[m].map(function(ce){return s[ce]}),P=u([M]),L=0;e:for(var I=0;I<x;++I)if(T[I]=0,m!==I){for(var C=b[I],k=C.length,E=0;E<k;++E){var R=P(s[C[E]]);if(R!==0){R<0&&(T[I]=1,L+=1);continue e}}T[I]=1,L+=1}g[m]=[L,m,T]}g.sort(function(re,ce){return ce[0]-re[0]});for(var m=0;m<x;++m)for(var T=g[m],O=T[1],N=T[2],I=0;I<x;++I)N[I]&&(w[I]=O);for(var G=l(x),m=0;m<x;++m)G[m].push(w[m]),G[w[m]].push(m);for(var U={},Y=o(p,!1),m=0;m<x;++m)for(var C=b[m],k=C.length,I=0;I<k;++I){var z=C[I],B=C[(I+1)%k],H=Math.min(z,B)+":"+Math.max(z,B);if(H in U){var V=U[H];G[V].push(m),G[m].push(V),Y[z]=Y[B]=!0}else U[H]=m}function Z(re){for(var ce=re.length,pe=0;pe<ce;++pe)if(!Y[re[pe]])return!1;return!0}for(var q=[],J=o(x,-1),m=0;m<x;++m)w[m]===m&&!Z(b[m])?(q.push(m),J[m]=0):J[m]=-1;for(var ne=[];q.length>0;){var ve=q.pop(),$=G[ve];f($,function(re,ce){return re-ce});var j=$.length,ae=J[ve],ie;if(ae===0){var C=b[ve];ie=[C]}for(var m=0;m<j;++m){var te=$[m];if(!(J[te]>=0)&&(J[te]=ae^1,q.push(te),ae===0)){var C=b[te];Z(C)||(C.reverse(),ie.push(C))}}ae===0&&ne.push(ie)}return ne}},{"./lib/trim-leaves":513,"edges-to-adjacency-list":178,"planar-dual":512,"point-in-big-polygon":516,"robust-sum":553,"two-product":582,uniq:597}],515:[function(e,d,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],516:[function(e,d,S){d.exports=s;var r=e("robust-orientation")[3],a=e("slab-decomposition"),u=e("interval-tree-1d"),c=e("binary-search-bounds");function t(){return!0}function f(p){return function(v,m){var b=p[v];return b?!!b.queryPoint(m,t):!1}}function n(p){for(var v={},m=0;m<p.length;++m){var b=p[m],y=b[0][0],x=b[0][1],w=b[1][1],g=[Math.min(x,w),Math.max(x,w)];y in v?v[y].push(g):v[y]=[g]}for(var T={},M=Object.keys(v),m=0;m<M.length;++m){var P=v[M[m]];T[M[m]]=u(P)}return f(T)}function o(p,v){return function(m){var b=c.le(v,m[0]);if(b<0)return 1;var y=p[b];if(!y)if(b>0&&v[b]===m[0])y=p[b-1];else return 1;for(var x=1;y;){var w=y.key,g=r(m,w[0],w[1]);if(w[0][0]<w[1][0])if(g<0)y=y.left;else if(g>0)x=-1,y=y.right;else return 0;else if(g>0)y=y.left;else if(g<0)x=1,y=y.right;else return 0}return x}}function l(p){return 1}function h(p){return function(m){return p(m[0],m[1])?0:1}}function i(p,v){return function(b){return p(b[0],b[1])?0:v(b)}}function s(p){for(var v=p.length,m=[],b=[],y=0;y<v;++y)for(var x=p[y],w=x.length,g=w-1,T=0;T<w;g=T++){var M=x[g],P=x[T];M[0]===P[0]?b.push([M,P]):m.push([M,P])}if(m.length===0)return b.length===0?l:h(n(b));var L=a(m),I=o(L.slabs,L.coordinates);return b.length===0?I:i(n(b),I)}},{"binary-search-bounds":515,"interval-tree-1d":460,"robust-orientation":548,"slab-decomposition":565}],517:[function(e,d,S){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var r=e("./lib/build-log"),a=e("./lib/epsilon"),u=e("./lib/intersecter"),c=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),f=e("./lib/geojson"),n=!1,o=a(),l;l={buildLog:function(i){return i===!0?n=r():i===!1&&(n=!1),n===!1?!1:n.list},epsilon:function(i){return o.epsilon(i)},segments:function(i){var s=u(!0,o,n);return i.regions.forEach(s.addRegion),{segments:s.calculate(i.inverted),inverted:i.inverted}},combine:function(i,s){var p=u(!1,o,n);return{combined:p.calculate(i.segments,i.inverted,s.segments,s.inverted),inverted1:i.inverted,inverted2:s.inverted}},selectUnion:function(i){return{segments:t.union(i.combined,n),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:t.intersect(i.combined,n),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:t.difference(i.combined,n),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:t.differenceRev(i.combined,n),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:t.xor(i.combined,n),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:c(i.segments,o,n),inverted:i.inverted}},polygonFromGeoJSON:function(i){return f.toPolygon(l,i)},polygonToGeoJSON:function(i){return f.fromPolygon(l,o,i)},union:function(i,s){return h(i,s,l.selectUnion)},intersect:function(i,s){return h(i,s,l.selectIntersect)},difference:function(i,s){return h(i,s,l.selectDifference)},differenceRev:function(i,s){return h(i,s,l.selectDifferenceRev)},xor:function(i,s){return h(i,s,l.selectXor)}};function h(i,s,p){var v=l.segments(i),m=l.segments(s),b=l.combine(v,m),y=p(b);return l.polygon(y)}typeof window=="object"&&(window.PolyBool=l),d.exports=l},{"./lib/build-log":518,"./lib/epsilon":519,"./lib/geojson":520,"./lib/intersecter":521,"./lib/segment-chainer":523,"./lib/segment-selector":524}],518:[function(e,d,S){function r(){var a,u=0,c=!1;function t(f,n){return a.list.push({type:f,data:n?JSON.parse(JSON.stringify(n)):void 0}),a}return a={list:[],segmentId:function(){return u++},checkIntersection:function(f,n){return t("check",{seg1:f,seg2:n})},segmentChop:function(f,n){return t("div_seg",{seg:f,pt:n}),t("chop",{seg:f,pt:n})},statusRemove:function(f){return t("pop_seg",{seg:f})},segmentUpdate:function(f){return t("seg_update",{seg:f})},segmentNew:function(f,n){return t("new_seg",{seg:f,primary:n})},segmentRemove:function(f){return t("rem_seg",{seg:f})},tempStatus:function(f,n,o){return t("temp_status",{seg:f,above:n,below:o})},rewind:function(f){return t("rewind",{seg:f})},status:function(f,n,o){return t("status",{seg:f,above:n,below:o})},vert:function(f){return f===c?a:(c=f,t("vert",{x:f}))},log:function(f){return typeof f!="string"&&(f=JSON.stringify(f,!1,"  ")),t("log",{txt:f})},reset:function(){return t("reset")},selected:function(f){return t("selected",{segs:f})},chainStart:function(f){return t("chain_start",{seg:f})},chainRemoveHead:function(f,n){return t("chain_rem_head",{index:f,pt:n})},chainRemoveTail:function(f,n){return t("chain_rem_tail",{index:f,pt:n})},chainNew:function(f,n){return t("chain_new",{pt1:f,pt2:n})},chainMatch:function(f){return t("chain_match",{index:f})},chainClose:function(f){return t("chain_close",{index:f})},chainAddHead:function(f,n){return t("chain_add_head",{index:f,pt:n})},chainAddTail:function(f,n){return t("chain_add_tail",{index:f,pt:n})},chainConnect:function(f,n){return t("chain_con",{index1:f,index2:n})},chainReverse:function(f){return t("chain_rev",{index:f})},chainJoin:function(f,n){return t("chain_join",{index1:f,index2:n})},done:function(){return t("done")}},a}d.exports=r},{}],519:[function(e,d,S){function r(a){typeof a!="number"&&(a=1e-10);var u={epsilon:function(c){return typeof c=="number"&&(a=c),a},pointAboveOrOnLine:function(c,t,f){var n=t[0],o=t[1],l=f[0],h=f[1],i=c[0],s=c[1];return(l-n)*(s-o)-(h-o)*(i-n)>=-a},pointBetween:function(c,t,f){var n=c[1]-t[1],o=f[0]-t[0],l=c[0]-t[0],h=f[1]-t[1],i=l*o+n*h;if(i<a)return!1;var s=o*o+h*h;return!(i-s>-a)},pointsSameX:function(c,t){return Math.abs(c[0]-t[0])<a},pointsSameY:function(c,t){return Math.abs(c[1]-t[1])<a},pointsSame:function(c,t){return u.pointsSameX(c,t)&&u.pointsSameY(c,t)},pointsCompare:function(c,t){return u.pointsSameX(c,t)?u.pointsSameY(c,t)?0:c[1]<t[1]?-1:1:c[0]<t[0]?-1:1},pointsCollinear:function(c,t,f){var n=c[0]-t[0],o=c[1]-t[1],l=t[0]-f[0],h=t[1]-f[1];return Math.abs(n*h-l*o)<a},linesIntersect:function(c,t,f,n){var o=t[0]-c[0],l=t[1]-c[1],h=n[0]-f[0],i=n[1]-f[1],s=o*i-l*h;if(Math.abs(s)<a)return!1;var p=c[0]-f[0],v=c[1]-f[1],m=(h*v-i*p)/s,b=(o*v-l*p)/s,y={alongA:0,alongB:0,pt:[c[0]+m*o,c[1]+m*l]};return m<=-a?y.alongA=-2:m<a?y.alongA=-1:m-1<=-a?y.alongA=0:m-1<a?y.alongA=1:y.alongA=2,b<=-a?y.alongB=-2:b<a?y.alongB=-1:b-1<=-a?y.alongB=0:b-1<a?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(c,t){for(var f=c[0],n=c[1],o=t[t.length-1][0],l=t[t.length-1][1],h=!1,i=0;i<t.length;i++){var s=t[i][0],p=t[i][1];p-n>a!=l-n>a&&(o-s)*(n-p)/(l-p)+s-f>a&&(h=!h),o=s,l=p}return h}};return u}d.exports=r},{}],520:[function(e,d,S){var r={toPolygon:function(a,u){function c(n){if(n.length<=0)return a.segments({inverted:!1,regions:[]});function o(i){var s=i.slice(0,i.length-1);return a.segments({inverted:!1,regions:[s]})}for(var l=o(n[0]),h=1;h<n.length;h++)l=a.selectDifference(a.combine(l,o(n[h])));return l}if(u.type==="Polygon")return a.polygon(c(u.coordinates));if(u.type==="MultiPolygon"){for(var t=a.segments({inverted:!1,regions:[]}),f=0;f<u.coordinates.length;f++)t=a.selectUnion(a.combine(t,c(u.coordinates[f])));return a.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(a,u,c){c=a.polygon(a.segments(c));function t(m,b){return u.pointInsideRegion([(m[0][0]+m[1][0])*.5,(m[0][1]+m[1][1])*.5],b)}function f(m){return{region:m,children:[]}}var n=f(null);function o(m,b){for(var y=0;y<m.children.length;y++){var x=m.children[y];if(t(b,x.region)){o(x,b);return}}for(var w=f(b),y=0;y<m.children.length;y++){var x=m.children[y];t(x.region,b)&&(w.children.push(x),m.children.splice(y,1),y--)}m.children.push(w)}for(var l=0;l<c.regions.length;l++){var h=c.regions[l];h.length<3||o(n,h)}function i(m,b){for(var y=0,x=m[m.length-1][0],w=m[m.length-1][1],g=[],T=0;T<m.length;T++){var M=m[T][0],P=m[T][1];g.push([M,P]),y+=P*x-M*w,x=M,w=P}var L=y<0;return L!==b&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var s=[];function p(m){var b=[i(m.region,!1)];s.push(b);for(var y=0;y<m.children.length;y++)b.push(v(m.children[y]))}function v(m){for(var b=0;b<m.children.length;b++)p(m.children[b]);return i(m.region,!0)}for(var l=0;l<n.children.length;l++)p(n.children[l]);return s.length<=0?{type:"Polygon",coordinates:[]}:s.length==1?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}};d.exports=r},{}],521:[function(e,d,S){var r=e("./linked-list");function a(u,c,t){function f(y,x){return{id:t?t.segmentId():-1,start:y,end:x,myFill:{above:null,below:null},otherFill:null}}function n(y,x,w){return{id:t?t.segmentId():-1,start:y,end:x,myFill:{above:w.myFill.above,below:w.myFill.below},otherFill:null}}var o=r.create();function l(y,x,w,g,T,M){var P=c.pointsCompare(x,T);return P!==0?P:c.pointsSame(w,M)?0:y!==g?y?1:-1:c.pointAboveOrOnLine(w,g?T:M,g?M:T)?1:-1}function h(y,x){o.insertBefore(y,function(w){var g=l(y.isStart,y.pt,x,w.isStart,w.pt,w.other.pt);return g<0})}function i(y,x){var w=r.node({isStart:!0,pt:y.start,seg:y,primary:x,other:null,status:null});return h(w,y.end),w}function s(y,x,w){var g=r.node({isStart:!1,pt:x.end,seg:x,primary:w,other:y,status:null});y.other=g,h(g,y.pt)}function p(y,x){var w=i(y,x);return s(w,y,x),w}function v(y,x){t&&t.segmentChop(y.seg,x),y.other.remove(),y.seg.end=x,y.other.pt=x,h(y.other,y.pt)}function m(y,x){var w=n(x,y.seg.end,y.seg);return v(y,x),p(w,y.primary)}function b(y,x){var w=r.create();function g(Y,z){var B=Y.seg.start,H=Y.seg.end,V=z.seg.start,Z=z.seg.end;return c.pointsCollinear(B,V,Z)?c.pointsCollinear(H,V,Z)||c.pointAboveOrOnLine(H,V,Z)?1:-1:c.pointAboveOrOnLine(B,V,Z)?1:-1}function T(Y){return w.findTransition(function(z){var B=g(Y,z.ev);return B>0})}function M(Y,z){var B=Y.seg,H=z.seg,V=B.start,Z=B.end,q=H.start,J=H.end;t&&t.checkIntersection(B,H);var ne=c.linesIntersect(V,Z,q,J);if(ne===!1){if(!c.pointsCollinear(V,Z,q)||c.pointsSame(V,J)||c.pointsSame(Z,q))return!1;var ve=c.pointsSame(V,q),$=c.pointsSame(Z,J);if(ve&&$)return z;var j=!ve&&c.pointBetween(V,q,J),ae=!$&&c.pointBetween(Z,q,J);if(ve)return ae?m(z,Z):m(Y,J),z;j&&($||(ae?m(z,Z):m(Y,J)),m(z,V))}else ne.alongA===0&&(ne.alongB===-1?m(Y,q):ne.alongB===0?m(Y,ne.pt):ne.alongB===1&&m(Y,J)),ne.alongB===0&&(ne.alongA===-1?m(z,V):ne.alongA===0?m(z,ne.pt):ne.alongA===1&&m(z,Z));return!1}for(var P=[];!o.isEmpty();){var L=o.getHead();if(t&&t.vert(L.pt[0]),L.isStart){let Y=function(){if(C){var z=M(L,C);if(z)return z}return k?M(L,k):!1};var U=Y;t&&t.segmentNew(L.seg,L.primary);var I=T(L),C=I.before?I.before.ev:null,k=I.after?I.after.ev:null;t&&t.tempStatus(L.seg,C?C.seg:!1,k?k.seg:!1);var E=Y();if(E){if(u){var R;L.seg.myFill.below===null?R=!0:R=L.seg.myFill.above!==L.seg.myFill.below,R&&(E.seg.myFill.above=!E.seg.myFill.above)}else E.seg.otherFill=L.seg.myFill;t&&t.segmentUpdate(E.seg),L.other.remove(),L.remove()}if(o.getHead()!==L){t&&t.rewind(L.seg);continue}if(u){var R;L.seg.myFill.below===null?R=!0:R=L.seg.myFill.above!==L.seg.myFill.below,k?L.seg.myFill.below=k.seg.myFill.above:L.seg.myFill.below=y,R?L.seg.myFill.above=!L.seg.myFill.below:L.seg.myFill.above=L.seg.myFill.below}else if(L.seg.otherFill===null){var O;k?L.primary===k.primary?O=k.seg.otherFill.above:O=k.seg.myFill.above:O=L.primary?x:y,L.seg.otherFill={above:O,below:O}}t&&t.status(L.seg,C?C.seg:!1,k?k.seg:!1),L.other.status=I.insert(r.node({ev:L}))}else{var N=L.status;if(N===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(w.exists(N.prev)&&w.exists(N.next)&&M(N.prev.ev,N.next.ev),t&&t.statusRemove(N.ev.seg),N.remove(),!L.primary){var G=L.seg.myFill;L.seg.myFill=L.seg.otherFill,L.seg.otherFill=G}P.push(L.seg)}o.getHead().remove()}return t&&t.done(),P}return u?{addRegion:function(y){for(var x,w=y[y.length-1],g=0;g<y.length;g++){x=w,w=y[g];var T=c.pointsCompare(x,w);T!==0&&p(f(T<0?x:w,T<0?w:x),!0)}},calculate:function(y){return b(y,!1)}}:{calculate:function(y,x,w,g){return y.forEach(function(T){p(n(T.start,T.end,T),!0)}),w.forEach(function(T){p(n(T.start,T.end,T),!1)}),b(x,g)}}}d.exports=a},{"./linked-list":522}],522:[function(e,d,S){var r={create:function(){var a={root:{root:!0,next:null},exists:function(u){return!(u===null||u===a.root)},isEmpty:function(){return a.root.next===null},getHead:function(){return a.root.next},insertBefore:function(u,c){for(var t=a.root,f=a.root.next;f!==null;){if(c(f)){u.prev=f.prev,u.next=f,f.prev.next=u,f.prev=u;return}t=f,f=f.next}t.next=u,u.prev=t,u.next=null},findTransition:function(u){for(var c=a.root,t=a.root.next;t!==null&&!u(t);)c=t,t=t.next;return{before:c===a.root?null:c,after:t,insert:function(f){return f.prev=c,f.next=t,c.next=f,t!==null&&(t.prev=f),f}}}};return a},node:function(a){return a.prev=null,a.next=null,a.remove=function(){a.prev.next=a.next,a.next&&(a.next.prev=a.prev),a.prev=null,a.next=null},a}};d.exports=r},{}],523:[function(e,d,S){function r(a,u,c){var t=[],f=[];return a.forEach(function(n){var o=n.start,l=n.end;if(u.pointsSame(o,l)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}c&&c.chainStart(n);var h={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},s=h;function p(O,N,G){return s.index=O,s.matches_head=N,s.matches_pt1=G,s===h?(s=i,!1):(s=null,!0)}for(var v=0;v<t.length;v++){var m=t[v],b=m[0];m[1];var y=m[m.length-1];if(m[m.length-2],u.pointsSame(b,o)){if(p(v,!0,!0))break}else if(u.pointsSame(b,l)){if(p(v,!0,!1))break}else if(u.pointsSame(y,o)){if(p(v,!1,!0))break}else if(u.pointsSame(y,l)&&p(v,!1,!1))break}if(s===h){t.push([o,l]),c&&c.chainNew(o,l);return}if(s===i){c&&c.chainMatch(h.index);var x=h.index,w=h.matches_pt1?l:o,g=h.matches_head,m=t[x],T=g?m[0]:m[m.length-1],M=g?m[1]:m[m.length-2],P=g?m[m.length-1]:m[0],L=g?m[m.length-2]:m[1];if(u.pointsCollinear(M,T,w)&&(g?(c&&c.chainRemoveHead(h.index,w),m.shift()):(c&&c.chainRemoveTail(h.index,w),m.pop()),T=M),u.pointsSame(P,w)){t.splice(x,1),u.pointsCollinear(L,P,T)&&(g?(c&&c.chainRemoveTail(h.index,T),m.pop()):(c&&c.chainRemoveHead(h.index,T),m.shift())),c&&c.chainClose(h.index),f.push(m);return}g?(c&&c.chainAddHead(h.index,w),m.unshift(w)):(c&&c.chainAddTail(h.index,w),m.push(w));return}function I(O){c&&c.chainReverse(O),t[O].reverse()}function C(O,N){var G=t[O],U=t[N],Y=G[G.length-1],z=G[G.length-2],B=U[0],H=U[1];u.pointsCollinear(z,Y,B)&&(c&&c.chainRemoveTail(O,Y),G.pop(),Y=z),u.pointsCollinear(Y,B,H)&&(c&&c.chainRemoveHead(N,B),U.shift()),c&&c.chainJoin(O,N),t[O]=G.concat(U),t.splice(N,1)}var k=h.index,E=i.index;c&&c.chainConnect(k,E);var R=t[k].length<t[E].length;h.matches_head?i.matches_head?R?(I(k),C(k,E)):(I(E),C(E,k)):C(E,k):i.matches_head?C(k,E):R?(I(k),C(E,k)):(I(E),C(k,E))}),f}d.exports=r},{}],524:[function(e,d,S){function r(u,c,t){var f=[];return u.forEach(function(n){var o=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);c[o]!==0&&f.push({id:t?t.segmentId():-1,start:n.start,end:n.end,myFill:{above:c[o]===1,below:c[o]===2},otherFill:null})}),t&&t.selected(f),f}var a={union:function(u,c){return r(u,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],c)},intersect:function(u,c){return r(u,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],c)},difference:function(u,c){return r(u,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],c)},differenceRev:function(u,c){return r(u,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],c)},xor:function(u,c){return r(u,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],c)}};d.exports=a},{}],525:[function(e,d,S){var r=new Float64Array(4),a=new Float64Array(4),u=new Float64Array(4);function c(t,f,n,o,l){r.length<o.length&&(r=new Float64Array(o.length),a=new Float64Array(o.length),u=new Float64Array(o.length));for(var h=0;h<o.length;++h)r[h]=t[h]-o[h],a[h]=f[h]-t[h],u[h]=n[h]-t[h];for(var i=0,s=0,p=0,v=0,m=0,b=0,h=0;h<o.length;++h){var y=a[h],x=u[h],w=r[h];i+=y*y,s+=y*x,p+=x*x,v+=w*y,m+=w*x,b+=w*w}var g=Math.abs(i*p-s*s),T=s*m-p*v,M=s*v-i*m,P;if(T+M<=g)if(T<0)M<0&&v<0?(M=0,-v>=i?(T=1,P=i+2*v+b):(T=-v/i,P=v*T+b)):(T=0,m>=0?(M=0,P=b):-m>=p?(M=1,P=p+2*m+b):(M=-m/p,P=m*M+b));else if(M<0)M=0,v>=0?(T=0,P=b):-v>=i?(T=1,P=i+2*v+b):(T=-v/i,P=v*T+b);else{var L=1/g;T*=L,M*=L,P=T*(i*T+s*M+2*v)+M*(s*T+p*M+2*m)+b}else{var I,C,k,E;T<0?(I=s+v,C=p+m,C>I?(k=C-I,E=i-2*s+p,k>=E?(T=1,M=0,P=i+2*v+b):(T=k/E,M=1-T,P=T*(i*T+s*M+2*v)+M*(s*T+p*M+2*m)+b)):(T=0,C<=0?(M=1,P=p+2*m+b):m>=0?(M=0,P=b):(M=-m/p,P=m*M+b))):M<0?(I=s+m,C=i+v,C>I?(k=C-I,E=i-2*s+p,k>=E?(M=1,T=0,P=p+2*m+b):(M=k/E,T=1-M,P=T*(i*T+s*M+2*v)+M*(s*T+p*M+2*m)+b)):(M=0,C<=0?(T=1,P=i+2*v+b):v>=0?(T=0,P=b):(T=-v/i,P=v*T+b))):(k=p+m-s-v,k<=0?(T=0,M=1,P=p+2*m+b):(E=i-2*s+p,k>=E?(T=1,M=0,P=i+2*v+b):(T=k/E,M=1-T,P=T*(i*T+s*M+2*v)+M*(s*T+p*M+2*m)+b)))}for(var R=1-T-M,h=0;h<o.length;++h)l[h]=R*t[h]+T*f[h]+M*n[h];return P<0?0:P}d.exports=c},{}],526:[function(e,d,S){var r=d.exports={},a,u;function c(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=c}catch{a=c}try{typeof clearTimeout=="function"?u=clearTimeout:u=t}catch{u=t}})();function f(b){if(a===setTimeout)return setTimeout(b,0);if((a===c||!a)&&setTimeout)return a=setTimeout,setTimeout(b,0);try{return a(b,0)}catch{try{return a.call(null,b,0)}catch{return a.call(this,b,0)}}}function n(b){if(u===clearTimeout)return clearTimeout(b);if((u===t||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(b);try{return u(b)}catch{try{return u.call(null,b)}catch{return u.call(this,b)}}}var o=[],l=!1,h,i=-1;function s(){!l||!h||(l=!1,h.length?o=h.concat(o):i=-1,o.length&&p())}function p(){if(!l){var b=f(s);l=!0;for(var y=o.length;y;){for(h=o,o=[];++i<y;)h&&h[i].run();i=-1,y=o.length}h=null,l=!1,n(b)}}r.nextTick=function(b){var y=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)y[x-1]=arguments[x];o.push(new v(b,y)),o.length===1&&!l&&f(p)};function v(b,y){this.fun=b,this.array=y}v.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function m(){}r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(b){return[]},r.binding=function(b){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(b){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],527:[function(e,d,S){d.exports=e("gl-quat/slerp")},{"gl-quat/slerp":325}],528:[function(e,d,S){(function(r){(function(){for(var a=e("performance-now"),u=typeof window>"u"?r:window,c=["moz","webkit"],t="AnimationFrame",f=u["request"+t],n=u["cancel"+t]||u["cancelRequest"+t],o=0;!f&&o<c.length;o++)f=u[c[o]+"Request"+t],n=u[c[o]+"Cancel"+t]||u[c[o]+"CancelRequest"+t];if(!f||!n){var l=0,h=0,i=[],s=1e3/60;f=function(p){if(i.length===0){var v=a(),m=Math.max(0,s-(v-l));l=m+v,setTimeout(function(){var b=i.slice(0);i.length=0;for(var y=0;y<b.length;y++)if(!b[y].cancelled)try{b[y].callback(l)}catch(x){setTimeout(function(){throw x},0)}},Math.round(m))}return i.push({handle:++h,callback:p,cancelled:!1}),h},n=function(p){for(var v=0;v<i.length;v++)i[v].handle===p&&(i[v].cancelled=!0)}}d.exports=function(p){return f.call(u,p)},d.exports.cancel=function(){n.apply(u,arguments)},d.exports.polyfill=function(p){p||(p=u),p.requestAnimationFrame=f,p.cancelAnimationFrame=n}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":508}],529:[function(e,d,S){var r=e("big-rat/add");d.exports=a;function a(u,c){for(var t=u.length,f=new Array(t),n=0;n<t;++n)f[n]=r(u[n],c[n]);return f}},{"big-rat/add":80}],530:[function(e,d,S){d.exports=a;var r=e("big-rat");function a(u){for(var c=new Array(u.length),t=0;t<u.length;++t)c[t]=r(u[t]);return c}},{"big-rat":83}],531:[function(e,d,S){var r=e("big-rat"),a=e("big-rat/mul");d.exports=u;function u(c,t){for(var f=r(t),n=c.length,o=new Array(n),l=0;l<n;++l)o[l]=a(c[l],f);return o}},{"big-rat":83,"big-rat/mul":92}],532:[function(e,d,S){var r=e("big-rat/sub");d.exports=a;function a(u,c){for(var t=u.length,f=new Array(t),n=0;n<t;++n)f[n]=r(u[n],c[n]);return f}},{"big-rat/sub":94}],533:[function(e,d,S){var r=e("compare-cell"),a=e("compare-oriented-cell"),u=e("cell-orientation");d.exports=c;function c(t){t.sort(a);for(var f=t.length,n=0,o=0;o<f;++o){var l=t[o],h=u(l);if(h!==0){if(n>0){var i=t[n-1];if(r(l,i)===0&&u(i)!==h){n-=1;continue}}t[n++]=l}}return t.length=n,t}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],534:[function(e,d,S){var r=e("array-bounds"),a=e("color-normalize"),u=e("update-diff"),c=e("pick-by-alias"),t=e("object-assign"),f=e("flatten-vertex-data"),n=e("to-float32"),o=n.float32,l=n.fract32;d.exports=i;var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function i(s,p){if(typeof s=="function"?(p||(p={}),p.regl=s):p=s,p.length&&(p.positions=p),s=p.regl,!s.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var v=s._gl,m,b,y,x,w,g,T={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},M=[];return x=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),b=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=s.buffer({usage:"static",type:"float",data:h}),C(p),m=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(E,R){return[R.viewport.x,R.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:x,offset:function(E,R){return R.offset*4},divisor:1},position:{buffer:b,offset:function(E,R){return R.offset*8},divisor:1},positionFract:{buffer:y,offset:function(E,R){return R.offset*8},divisor:1},error:{buffer:w,offset:function(E,R){return R.offset*16},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:h.length}),t(P,{update:C,draw:L,destroy:k,regl:s,gl:v,canvas:v.canvas,groups:M}),P;function P(E){E?C(E):E===null&&k(),L()}function L(E){if(typeof E=="number")return I(E);E&&!Array.isArray(E)&&(E=[E]),s._refresh(),M.forEach(function(R,O){if(!!R){if(E&&(E[O]?R.draw=!0:R.draw=!1),!R.draw){R.draw=!0;return}I(O)}})}function I(E){typeof E=="number"&&(E=M[E]),E!=null&&(!(E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1)||(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],m(E),E.after&&E.after(E)))}function C(E){if(!!E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var R=0,O=0;if(P.groups=M=E.map(function(z,B){var H=M[B];if(z)typeof z=="function"?z={after:z}:typeof z[0]=="number"&&(z={positions:z});else return H;return z=c(z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),H||(M[B]=H={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},z=t({},T,z)),u(H,z,[{lineWidth:function(V){return+V*.5},capSize:function(V){return+V*.5},opacity:parseFloat,errors:function(V){return V=f(V),O+=V.length,V},positions:function(V,Z){return V=f(V,"float64"),Z.count=Math.floor(V.length/2),Z.bounds=r(V,2),Z.offset=R,R+=Z.count,V}},{color:function(V,Z){var q=Z.count;if(V||(V="transparent"),!Array.isArray(V)||typeof V[0]=="number"){var J=V;V=Array(q);for(var ne=0;ne<q;ne++)V[ne]=J}if(V.length<q)throw Error("Not enough colors");for(var ve=new Uint8Array(q*4),$=0;$<q;$++){var j=a(V[$],"uint8");ve.set(j,$*4)}return ve},range:function(V,Z,q){var J=Z.bounds;return V||(V=J),Z.scale=[1/(V[2]-V[0]),1/(V[3]-V[1])],Z.translate=[-V[0],-V[1]],Z.scaleFract=l(Z.scale),Z.translateFract=l(Z.translate),V},viewport:function(V){var Z;return Array.isArray(V)?Z={x:V[0],y:V[1],width:V[2]-V[0],height:V[3]-V[1]}:V?(Z={x:V.x||V.left||0,y:V.y||V.top||0},V.right?Z.width=V.right-Z.x:Z.width=V.w||V.width||0,V.bottom?Z.height=V.bottom-Z.y:Z.height=V.h||V.height||0):Z={x:0,y:0,width:v.drawingBufferWidth,height:v.drawingBufferHeight},Z}}]),H}),R||O){var N=M.reduce(function(z,B,H){return z+(B?B.count:0)},0),G=new Float64Array(N*2),U=new Uint8Array(N*4),Y=new Float32Array(N*4);M.forEach(function(z,B){if(!!z){var H=z.positions,V=z.count,Z=z.offset,q=z.color,J=z.errors;!V||(U.set(q,Z*4),Y.set(J,Z*4),G.set(H,Z*2))}}),b(o(G)),y(l(G)),x(U),w(Y)}}}function k(){b.destroy(),y.destroy(),x.destroy(),w.destroy(),g.destroy()}}},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":499,"pick-by-alias":511,"to-float32":577,"update-diff":599}],535:[function(e,d,S){var r=e("color-normalize"),a=e("array-bounds"),u=e("object-assign"),c=e("glslify"),t=e("pick-by-alias"),f=e("flatten-vertex-data"),n=e("earcut"),o=e("array-normalize"),l=e("to-float32"),h=l.float32,i=l.fract32,s=e("es6-weak-map"),p=e("parse-rect");d.exports=v;function v(m,b){if(!(this instanceof v))return new v(m,b);if(typeof m=="function"?(b||(b={}),b.regl=m):b=m,b.length&&(b.positions=b),m=b.regl,!m.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=m._gl,this.regl=m,this.passes=[],this.shaders=v.shaders.has(m)?v.shaders.get(m):v.shaders.set(m,v.createShaders(m)).get(m),this.update(b)}v.dashMult=2,v.maxPatternLength=256,v.precisionThreshold=3e6,v.maxPoints=1e4,v.maxLines=2048,v.shaders=new s,v.createShaders=function(m){var b=m.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),y={primitive:"triangle strip",instances:m.prop("count"),count:4,offset:0,uniforms:{miterMode:function(T,M){return M.join==="round"?2:1},miterLimit:m.prop("miterLimit"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),thickness:m.prop("thickness"),dashPattern:m.prop("dashTexture"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),dashSize:m.prop("dashLength"),viewport:function(T,M){return[M.viewport.x,M.viewport.y,T.viewportWidth,T.viewportHeight]},depth:m.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(T,M){return!M.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport")},x=m(u({vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D dashPattern;

uniform float dashSize, pixelRatio, thickness, opacity, id;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;
	float dash = texture2D(dashPattern, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},y)),w;try{w=m(u({cull:{enable:!0,face:"back"},vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

uniform sampler2D dashPattern;
uniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;
	float dash = texture2D(dashPattern, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aColor:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:m.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},y))}catch{w=x}var g=m({primitive:"triangle",elements:function(T,M){return M.triangles},offset:0,vert:c([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:m.prop("scale"),color:m.prop("fill"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),viewport:function(T,M){return[M.viewport.x,M.viewport.y,T.viewportWidth,T.viewportHeight]}},attributes:{position:{buffer:m.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8}},blend:y.blend,depth:{enable:!1},scissor:y.scissor,stencil:y.stencil,viewport:y.viewport});return{fill:g,rect:x,miter:w}},v.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},v.prototype.render=function(){for(var m,b=[],y=arguments.length;y--;)b[y]=arguments[y];b.length&&(m=this).update.apply(m,b),this.draw()},v.prototype.draw=function(){for(var m=this,b=[],y=arguments.length;y--;)b[y]=arguments[y];return(b.length?b:this.passes).forEach(function(x,w){var g;if(x&&Array.isArray(x))return(g=m).draw.apply(g,x);typeof x=="number"&&(x=m.passes[x]),x&&x.count>1&&x.opacity&&(m.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&m.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>v.precisionThreshold||x.scale[1]*x.viewport.height>v.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=v.maxPoints)?m.shaders.rect(x):m.shaders.miter(x)))}),this},v.prototype.update=function(m){var b=this;if(!!m){m.length!=null?typeof m[0]=="number"&&(m=[{positions:m}]):Array.isArray(m)||(m=[m]);var y=this,x=y.regl,w=y.gl;if(m.forEach(function(L,I){var C=b.passes[I];if(L!==void 0){if(L===null){b.passes[I]=null;return}if(typeof L[0]=="number"&&(L={positions:L}),L=t(L,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"}),C||(b.passes[I]=C={id:I,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},L=u({},v.defaults,L)),L.thickness!=null&&(C.thickness=parseFloat(L.thickness)),L.opacity!=null&&(C.opacity=parseFloat(L.opacity)),L.miterLimit!=null&&(C.miterLimit=parseFloat(L.miterLimit)),L.overlay!=null&&(C.overlay=!!L.overlay,I<v.maxLines&&(C.depth=2*(v.maxLines-1-I%v.maxLines)/v.maxLines-1)),L.join!=null&&(C.join=L.join),L.hole!=null&&(C.hole=L.hole),L.fill!=null&&(C.fill=L.fill?r(L.fill,"uint8"):null),L.viewport!=null&&(C.viewport=p(L.viewport)),C.viewport||(C.viewport=p([w.drawingBufferWidth,w.drawingBufferHeight])),L.close!=null&&(C.close=L.close),L.positions===null&&(L.positions=[]),L.positions){var k,E;if(L.positions.x&&L.positions.y){var R=L.positions.x,O=L.positions.y;E=C.count=Math.max(R.length,O.length),k=new Float64Array(E*2);for(var N=0;N<E;N++)k[N*2]=R[N],k[N*2+1]=O[N]}else k=f(L.positions,"float64"),E=C.count=Math.floor(k.length/2);var G=C.bounds=a(k,2);if(C.fill){for(var U=[],Y={},z=0,B=0,H=0,V=C.count;B<V;B++){var Z=k[B*2],q=k[B*2+1];isNaN(Z)||isNaN(q)||Z==null||q==null?(Z=k[z*2],q=k[z*2+1],Y[B]=z):z=B,U[H++]=Z,U[H++]=q}for(var J=n(U,C.hole||[]),ne=0,ve=J.length;ne<ve;ne++)Y[J[ne]]!=null&&(J[ne]=Y[J[ne]]);C.triangles=J}var $=new Float64Array(k);o($,2,G);var j=new Float64Array(E*2+6);C.close?k[0]===k[E*2-2]&&k[1]===k[E*2-1]?(j[0]=$[E*2-4],j[1]=$[E*2-3]):(j[0]=$[E*2-2],j[1]=$[E*2-1]):(j[0]=$[0],j[1]=$[1]),j.set($,2),C.close?k[0]===k[E*2-2]&&k[1]===k[E*2-1]?(j[E*2+2]=$[2],j[E*2+3]=$[3],C.count-=1):(j[E*2+2]=$[0],j[E*2+3]=$[1],j[E*2+4]=$[2],j[E*2+5]=$[3]):(j[E*2+2]=$[E*2-2],j[E*2+3]=$[E*2-1],j[E*2+4]=$[E*2-2],j[E*2+5]=$[E*2-1]),C.positionBuffer(h(j)),C.positionFractBuffer(i(j))}if(L.range?C.range=L.range:C.range||(C.range=C.bounds),(L.range||L.positions)&&C.count){var ae=C.bounds,ie=ae[2]-ae[0],te=ae[3]-ae[1],re=C.range[2]-C.range[0],ce=C.range[3]-C.range[1];C.scale=[ie/re,te/ce],C.translate=[-C.range[0]/re+ae[0]/re||0,-C.range[1]/ce+ae[1]/ce||0],C.scaleFract=i(C.scale),C.translateFract=i(C.translate)}if(L.dashes){var pe=0,fe;if(!L.dashes||L.dashes.length<2)pe=1,fe=new Uint8Array([255,255,255,255,255,255,255,255]);else{pe=0;for(var se=0;se<L.dashes.length;++se)pe+=L.dashes[se];fe=new Uint8Array(pe*v.dashMult);for(var de=0,be=255,xe=0;xe<2;xe++)for(var ke=0;ke<L.dashes.length;++ke){for(var Re=0,Ke=L.dashes[ke]*v.dashMult*.5;Re<Ke;++Re)fe[de++]=be;be^=255}}C.dashLength=pe,C.dashTexture({channels:1,data:fe,width:fe.length,height:1,mag:"linear",min:"linear"},0,0)}if(L.color){var ze=C.count,Je=L.color;Je||(Je="transparent");var qe=new Uint8Array(ze*4+4);if(!Array.isArray(Je)||typeof Je[0]=="number")for(var Ee=r(Je,"uint8"),Ae=0;Ae<ze+1;Ae++)qe.set(Ee,Ae*4);else{for(var Be=0;Be<ze;Be++){var $e=r(Je[Be],"uint8");qe.set($e,Be*4)}qe.set(r(Je[0],"uint8"),ze*4)}C.colorBuffer({usage:"dynamic",type:"uint8",data:qe})}}}),m.length<this.passes.length){for(var g=m.length;g<this.passes.length;g++){var T=this.passes[g];!T||(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=m.length}for(var M=[],P=0;P<this.passes.length;P++)this.passes[P]!==null&&M.push(this.passes[P]);return this.passes=M,this}},v.prototype.destroy=function(){return this.passes.forEach(function(m){m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:536,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577}],536:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],537:[function(e,d,S){function r(k,E){return c(k)||f(k,E)||n(k,E)||h()}function a(k){return u(k)||t(k)||n(k)||l()}function u(k){if(Array.isArray(k))return o(k)}function c(k){if(Array.isArray(k))return k}function t(k){if(typeof Symbol<"u"&&Symbol.iterator in Object(k))return Array.from(k)}function f(k,E){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(k)))){var R=[],O=!0,N=!1,G=void 0;try{for(var U=k[Symbol.iterator](),Y;!(O=(Y=U.next()).done)&&(R.push(Y.value),!(E&&R.length===E));O=!0);}catch(z){N=!0,G=z}finally{try{!O&&U.return!=null&&U.return()}finally{if(N)throw G}}return R}}function n(k,E){if(!!k){if(typeof k=="string")return o(k,E);var R=Object.prototype.toString.call(k).slice(8,-1);if(R==="Object"&&k.constructor&&(R=k.constructor.name),R==="Map"||R==="Set")return Array.from(k);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return o(k,E)}}function o(k,E){(E==null||E>k.length)&&(E=k.length);for(var R=0,O=new Array(E);R<E;R++)O[R]=k[R];return O}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=e("color-normalize"),s=e("array-bounds"),p=e("color-id"),v=e("@plotly/point-cluster"),m=e("object-assign"),b=e("glslify"),y=e("pick-by-alias"),x=e("update-diff"),w=e("flatten-vertex-data"),g=e("is-iexplorer"),T=e("to-float32"),M=e("parse-rect"),P=L;function L(k,E){var R=this;if(!(this instanceof L))return new L(k,E);typeof k=="function"?(E||(E={}),E.regl=k):(E=k,k=null),E&&E.length&&(E.positions=E),k=E.regl;var O=k._gl,N,G=[],U={},Y=[],z=[null],B=[null],H=255,V=100;this.tooManyColors=g,N=k.texture({data:new Uint8Array(H*4),width:H,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),m(this,{regl:k,gl:O,groups:Y,markerCache:B,markerTextures:z,palette:G,paletteIds:U,paletteTexture:N,maxColors:H,maxSize:V,canvas:O.canvas}),this.update(E);var Z={uniforms:{constPointSize:!!E.constPointSize,pixelRatio:k.context("pixelRatio"),palette:N,paletteSize:function(ve,$){return[R.tooManyColors?0:H,N.height]},scale:k.prop("scale"),scaleFract:k.prop("scaleFract"),translate:k.prop("translate"),translateFract:k.prop("translateFract"),opacity:k.prop("opacity"),marker:k.prop("markerTexture")},attributes:{x:function(ve,$){return $.xAttr||{buffer:$.positionBuffer,stride:8,offset:0}},y:function(ve,$){return $.yAttr||{buffer:$.positionBuffer,stride:8,offset:4}},xFract:function(ve,$){return $.xAttr?{constant:[0,0]}:{buffer:$.positionFractBuffer,stride:8,offset:0}},yFract:function(ve,$){return $.yAttr?{constant:[0,0]}:{buffer:$.positionFractBuffer,stride:8,offset:4}},size:function(ve,$){return $.size.length?{buffer:$.sizeBuffer,stride:2,offset:0}:{constant:[Math.round($.size*255/R.maxSize)]}},borderSize:function(ve,$){return $.borderSize.length?{buffer:$.sizeBuffer,stride:2,offset:1}:{constant:[Math.round($.borderSize*255/R.maxSize)]}},colorId:function(ve,$){return $.color.length?{buffer:$.colorBuffer,stride:R.tooManyColors?8:4,offset:0}:{constant:R.tooManyColors?G.slice($.color*4,$.color*4+4):[$.color]}},borderColorId:function(ve,$){return $.borderColor.length?{buffer:$.colorBuffer,stride:R.tooManyColors?8:4,offset:R.tooManyColors?4:2}:{constant:R.tooManyColors?G.slice($.borderColor*4,$.borderColor*4+4):[$.borderColor]}},isActive:function(ve,$){return $.activation===!0?{constant:[1]}:$.activation?$.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:k.prop("viewport")},viewport:k.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:k.prop("elements"),count:k.prop("count"),offset:k.prop("offset"),primitive:"points"},q=m({},Z);q.frag=b([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

uniform sampler2D marker;
uniform float opacity;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),q.vert=b([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform float pixelRatio;
uniform bool constPointSize;
uniform sampler2D palette;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(palette,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=k(q);var J=m({},Z);J.frag=b([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;

uniform float opacity;
varying float fragBorderRadius, fragWidth;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),J.vert=b([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio;
uniform bool constPointSize;
uniform sampler2D palette;
uniform vec2 paletteSize;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(palette,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),g&&(J.frag=J.frag.replace("smoothstep","smoothStep"),q.frag=q.frag.replace("smoothstep","smoothStep")),this.drawCircle=k(J)}L.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},L.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},L.prototype.draw=function(){for(var k=this,E=arguments.length,R=new Array(E),O=0;O<E;O++)R[O]=arguments[O];var N=this.groups;if(R.length===1&&Array.isArray(R[0])&&(R[0][0]===null||Array.isArray(R[0][0]))&&(R=R[0]),this.regl._refresh(),R.length)for(var G=0;G<R.length;G++)this.drawItem(G,R[G]);else N.forEach(function(U,Y){k.drawItem(Y)});return this},L.prototype.drawItem=function(k,E){var R=this.groups,O=R[k];if(typeof E=="number"&&(k=E,O=R[E],E=null),!!(O&&O.count&&O.opacity)){O.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,O,E));for(var N=[],G=1;G<O.activation.length;G++)!O.activation[G]||O.activation[G]!==!0&&!O.activation[G].data.length||N.push.apply(N,a(this.getMarkerDrawOptions(G,O,E)));N.length&&this.drawMarker(N)}},L.prototype.getMarkerDrawOptions=function(k,E,R){var O=E.range,N=E.tree,G=E.viewport,U=E.activation,Y=E.selectionBuffer,z=E.count;if(this.regl,!N)return R?[m({},E,{markerTexture:this.markerTextures[k],activation:U[k],count:R.length,elements:R,offset:0})]:[m({},E,{markerTexture:this.markerTextures[k],activation:U[k],offset:0})];var B=[],H=N.range(O,{lod:!0,px:[(O[2]-O[0])/G.width,(O[3]-O[1])/G.height]});if(R){for(var V=U[k],Z=V.data,q=new Uint8Array(z),J=0;J<R.length;J++){var ne=R[J];q[ne]=Z?Z[ne]:1}Y.subdata(q)}for(var ve=H.length;ve--;){var $=r(H[ve],2),j=$[0],ae=$[1];B.push(m({},E,{markerTexture:this.markerTextures[k],activation:R?Y:U[k],offset:j,count:ae-j}))}return B},L.prototype.update=function(){for(var k=this,E=arguments.length,R=new Array(E),O=0;O<E;O++)R[O]=arguments[O];if(!!R.length){R.length===1&&Array.isArray(R[0])&&(R=R[0]);var N=this.groups,G=this.gl,U=this.regl,Y=this.maxSize,z=this.maxColors,B=this.palette;this.groups=N=R.map(function(H,V){var Z=N[V];if(H===void 0)return Z;H===null?H={positions:null}:typeof H=="function"?H={ondraw:H}:typeof H[0]=="number"&&(H={positions:H}),H=y(H,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),H.positions===null&&(H.positions=[]),H.tooManyColors!=null&&(k.tooManyColors=H.tooManyColors),Z||(N[V]=Z={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:U.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:U.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},H=m({},L.defaults,H)),H.positions&&!("marker"in H)&&(H.marker=Z.marker,delete Z.marker),H.marker&&!("positions"in H)&&(H.positions=Z.positions,delete Z.positions);var q=0,J=0;if(x(Z,H,[{snap:!0,size:function(ze,Je){return ze==null&&(ze=L.defaults.size),q+=ze&&ze.length?1:0,ze},borderSize:function(ze,Je){return ze==null&&(ze=L.defaults.borderSize),q+=ze&&ze.length?1:0,ze},opacity:parseFloat,color:function(ze,Je){return ze==null&&(ze=L.defaults.color),ze=k.updateColor(ze),J++,ze},borderColor:function(ze,Je){return ze==null&&(ze=L.defaults.borderColor),ze=k.updateColor(ze),J++,ze},bounds:function(ze,Je,qe){return"range"in qe||(qe.range=null),ze},positions:function(ze,Je,qe){var Ee=Je.snap,Ae=Je.positionBuffer,Be=Je.positionFractBuffer,$e=Je.selectionBuffer;if(ze.x||ze.y)return ze.x.length?Je.xAttr={buffer:U.buffer(ze.x),offset:0,stride:4,count:ze.x.length}:Je.xAttr={buffer:ze.x.buffer,offset:ze.x.offset*4||0,stride:(ze.x.stride||1)*4,count:ze.x.count},ze.y.length?Je.yAttr={buffer:U.buffer(ze.y),offset:0,stride:4,count:ze.y.length}:Je.yAttr={buffer:ze.y.buffer,offset:ze.y.offset*4||0,stride:(ze.y.stride||1)*4,count:ze.y.count},Je.count=Math.max(Je.xAttr.count,Je.yAttr.count),ze;ze=w(ze,"float64");var xt=Je.count=Math.floor(ze.length/2),bt=Je.bounds=xt?s(ze,2):null;if(!qe.range&&!Je.range&&(delete Je.range,qe.range=bt),!qe.marker&&!Je.marker&&(delete Je.marker,qe.marker=null),Ee&&(Ee===!0||xt>Ee)?Je.tree=v(ze,{bounds:bt}):Ee&&Ee.length&&(Je.tree=Ee),Je.tree){var Ne={primitive:"points",usage:"static",data:Je.tree,type:"uint32"};Je.elements?Je.elements(Ne):Je.elements=U.elements(Ne)}return Ae({data:T.float(ze),usage:"dynamic"}),Be({data:T.fract(ze),usage:"dynamic"}),$e({data:new Uint8Array(xt),type:"uint8",usage:"stream"}),ze}},{marker:function(ze,Je,qe){var Ee=Je.activation;if(Ee.forEach(function(_t){return _t&&_t.destroy&&_t.destroy()}),Ee.length=0,!ze||typeof ze[0]=="number"){var Ae=k.addMarker(ze);Ee[Ae]=!0}else{for(var Be=[],$e=0,xt=Math.min(ze.length,Je.count);$e<xt;$e++){var bt=k.addMarker(ze[$e]);Be[bt]||(Be[bt]=new Uint8Array(Je.count)),Be[bt][$e]=1}for(var Ne=0;Ne<Be.length;Ne++)if(!!Be[Ne]){var st={data:Be[Ne],type:"uint8",usage:"static"};Ee[Ne]?Ee[Ne](st):Ee[Ne]=U.buffer(st),Ee[Ne].data=Be[Ne]}}return ze},range:function(ze,Je,qe){var Ee=Je.bounds;if(!!Ee)return ze||(ze=Ee),Je.scale=[1/(ze[2]-ze[0]),1/(ze[3]-ze[1])],Je.translate=[-ze[0],-ze[1]],Je.scaleFract=T.fract(Je.scale),Je.translateFract=T.fract(Je.translate),ze},viewport:function(ze){var Je=M(ze||[G.drawingBufferWidth,G.drawingBufferHeight]);return Je}}]),q){var ne=Z,ve=ne.count,$=ne.size,j=ne.borderSize,ae=ne.sizeBuffer,ie=new Uint8Array(ve*2);if($.length||j.length)for(var te=0;te<ve;te++)ie[te*2]=Math.round(($[te]==null?$:$[te])*255/Y),ie[te*2+1]=Math.round((j[te]==null?j:j[te])*255/Y);ae({data:ie,usage:"dynamic"})}if(J){var re=Z,ce=re.count,pe=re.color,fe=re.borderColor,se=re.colorBuffer,de;if(k.tooManyColors){if(pe.length||fe.length){de=new Uint8Array(ce*8);for(var be=0;be<ce;be++){var xe=pe[be];de[be*8]=B[xe*4],de[be*8+1]=B[xe*4+1],de[be*8+2]=B[xe*4+2],de[be*8+3]=B[xe*4+3];var ke=fe[be];de[be*8+4]=B[ke*4],de[be*8+5]=B[ke*4+1],de[be*8+6]=B[ke*4+2],de[be*8+7]=B[ke*4+3]}}}else if(pe.length||fe.length){de=new Uint8Array(ce*4+2);for(var Re=0;Re<ce;Re++)pe[Re]!=null&&(de[Re*4]=pe[Re]%z,de[Re*4+1]=Math.floor(pe[Re]/z)),fe[Re]!=null&&(de[Re*4+2]=fe[Re]%z,de[Re*4+3]=Math.floor(fe[Re]/z))}se({data:de||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return Z})}},L.prototype.addMarker=function(k){var E=this.markerTextures,R=this.regl,O=this.markerCache,N=k==null?0:O.indexOf(k);if(N>=0)return N;var G;if(k instanceof Uint8Array||k instanceof Uint8ClampedArray)G=k;else{G=new Uint8Array(k.length);for(var U=0,Y=k.length;U<Y;U++)G[U]=k[U]*255}var z=Math.floor(Math.sqrt(G.length));return N=E.length,O.push(k),E.push(R.texture({channels:1,data:G,radius:z,mag:"linear",min:"linear"})),N},L.prototype.updateColor=function(k){var E=this.paletteIds,R=this.palette,O=this.maxColors;Array.isArray(k)||(k=[k]);var N=[];if(typeof k[0]=="number"){var G=[];if(Array.isArray(k))for(var U=0;U<k.length;U+=4)G.push(k.slice(U,U+4));else for(var Y=0;Y<k.length;Y+=4)G.push(k.subarray(Y,Y+4));k=G}for(var z=0;z<k.length;z++){var B=k[z];B=i(B,"uint8");var H=p(B,!1);if(E[H]==null){var V=R.length;E[H]=Math.floor(V/4),R[V]=B[0],R[V+1]=B[1],R[V+2]=B[2],R[V+3]=B[3]}N[z]=E[H]}return!this.tooManyColors&&R.length>O*4&&(this.tooManyColors=!0),this.updatePalette(R),N.length===1?N[0]:N},L.prototype.updatePalette=function(k){if(!this.tooManyColors){var E=this.maxColors,R=this.paletteTexture,O=Math.ceil(k.length*.25/E);if(O>1){k=k.slice();for(var N=k.length*.25%E;N<O*E;N++)k.push(0,0,0,0)}R.height<O&&R.resize(E,O),R.subimage({width:Math.min(k.length*.25,E),height:O,data:k},0,0)}},L.prototype.destroy=function(){return this.groups.forEach(function(k){k.sizeBuffer.destroy(),k.positionBuffer.destroy(),k.positionFractBuffer.destroy(),k.colorBuffer.destroy(),k.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),k.selectionBuffer.destroy(),k.elements&&k.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(k){return k&&k.destroy&&k.destroy()}),this};var I=e("object-assign"),C=function(E,R){var O=new P(E,R),N=O.render.bind(O);return I(N,{render:N,update:O.update.bind(O),draw:O.draw.bind(O),destroy:O.destroy.bind(O),regl:O.regl,gl:O.gl,canvas:O.gl.canvas,groups:O.groups,markers:O.markerCache,palette:O.palette}),N};d.exports=C},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:538,"is-iexplorer":466,"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577,"update-diff":599}],538:[function(e,d,S){arguments[4][257][0].apply(S,arguments)},{dup:257}],539:[function(e,d,S){var r=e("regl-scatter2d"),a=e("pick-by-alias"),u=e("array-bounds"),c=e("raf"),t=e("array-range"),f=e("parse-rect"),n=e("flatten-vertex-data");d.exports=o;function o(s,p){if(!(this instanceof o))return new o(s);this.traces=[],this.passes={},this.regl=s,this.scatter=r(s),this.canvas=this.scatter.canvas}o.prototype.render=function(){for(var s=this,p,v=[],m=arguments.length;m--;)v[m]=arguments[m];return v.length&&(p=this).update.apply(p,v),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=c(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,c(function(){s.dirty=!1})),this)},o.prototype.update=function(){for(var s,p=[],v=arguments.length;v--;)p[v]=arguments[v];if(!!p.length){for(var m=0;m<p.length;m++)this.updateItem(m,p[m]);this.traces=this.traces.filter(Boolean);for(var b=[],y=0,x=0;x<this.traces.length;x++){for(var w=this.traces[x],g=this.traces[x].passes,T=0;T<g.length;T++)b.push(this.passes[g[T]]);w.passOffset=y,y+=w.passes.length}return(s=this.scatter).update.apply(s,b),this}},o.prototype.updateItem=function(s,p){var v=this,m=v.regl;if(p===null)return this.traces[s]=null,this;if(!p)return this;var b=a(p,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[s]||(this.traces[s]={id:s,buffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([m._gl.drawingBufferWidth,m._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(b.color!=null&&(y.color=b.color),b.size!=null&&(y.size=b.size),b.marker!=null&&(y.marker=b.marker),b.borderColor!=null&&(y.borderColor=b.borderColor),b.borderSize!=null&&(y.borderSize=b.borderSize),b.opacity!=null&&(y.opacity=b.opacity),b.viewport&&(y.viewport=f(b.viewport)),b.diagonal!=null&&(y.diagonal=b.diagonal),b.upper!=null&&(y.upper=b.upper),b.lower!=null&&(y.lower=b.lower),b.data){y.buffer(n(b.data)),y.columns=b.data.length,y.count=b.data[0].length,y.bounds=[];for(var x=0;x<y.columns;x++)y.bounds[x]=u(b.data[x],1)}var w;b.range&&(y.range=b.range,w=y.range&&typeof y.range[0]!="number"),b.domain&&(y.domain=b.domain);var g=!1;b.padding!=null&&(Array.isArray(b.padding)&&b.padding.length===y.columns&&typeof b.padding[b.padding.length-1]=="number"?(y.padding=b.padding.map(i),g=!0):y.padding=i(b.padding));var T=y.columns,M=y.count,P=y.viewport.width,L=y.viewport.height,I=y.viewport.x,C=y.viewport.y,k=P/T,E=L/T;y.passes=[];for(var R=0;R<T;R++)for(var O=0;O<T;O++)if(!(!y.diagonal&&O===R)&&!(!y.upper&&R>O)&&!(!y.lower&&R<O)){var N=l(y.id,R,O),G=this.passes[N]||(this.passes[N]={});if(b.data&&(b.transpose?G.positions={x:{buffer:y.buffer,offset:O,count:M,stride:T},y:{buffer:y.buffer,offset:R,count:M,stride:T}}:G.positions={x:{buffer:y.buffer,offset:O*M,count:M},y:{buffer:y.buffer,offset:R*M,count:M}},G.bounds=h(y.bounds,R,O)),b.domain||b.viewport||b.data){var U=g?h(y.padding,R,O):y.padding;if(y.domain){var Y=h(y.domain,R,O),z=Y[0],B=Y[1],H=Y[2],V=Y[3];G.viewport=[I+z*P+U[0],C+B*L+U[1],I+H*P-U[2],C+V*L-U[3]]}else G.viewport=[I+O*k+k*U[0],C+R*E+E*U[1],I+(O+1)*k-k*U[2],C+(R+1)*E-E*U[3]]}b.color&&(G.color=y.color),b.size&&(G.size=y.size),b.marker&&(G.marker=y.marker),b.borderSize&&(G.borderSize=y.borderSize),b.borderColor&&(G.borderColor=y.borderColor),b.opacity&&(G.opacity=y.opacity),b.range&&(G.range=w?h(y.range,R,O):y.range||G.bounds),y.passes.push(N)}return this},o.prototype.draw=function(){for(var s,p=[],v=arguments.length;v--;)p[v]=arguments[v];if(!p.length)this.scatter.draw();else{for(var m=[],b=0;b<p.length;b++)if(typeof p[b]=="number"){var y=this.traces[p[b]],x=y.passes,w=y.passOffset;m.push.apply(m,t(w,w+x.length))}else if(p[b].length){var g=p[b],T=this.traces[b],M=T.passes,P=T.passOffset;M=M.map(function(L,I){m[P+I]=g})}(s=this.scatter).draw.apply(s,m)}return this},o.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function l(s,p,v){var m=s.id!=null?s.id:s,b=p,y=v,x=m<<16|(b&255)<<8|y&255;return x}function h(s,p,v){var m,b,y,x,w=s[p],g=s[v];return w.length>2?(w[0],w[2],m=w[1],b=w[3]):w.length?(m=w[0],b=w[1]):(w.x,m=w.y,w.x+w.width,b=w.y+w.height),g.length>2?(y=g[0],x=g[2],g[1],g[3]):g.length?(y=g[0],x=g[1]):(y=g.x,g.y,x=g.x+g.width,g.y+g.height),[y,m,x,b]}function i(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var p=f(s);return[p.x,p.y,p.x+p.width,p.y+p.height]}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":504,"pick-by-alias":511,raf:528,"regl-scatter2d":537}],540:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?d.exports=a():r.createREGL=a()})(this,function(){function r(Ge,at){this.id=re++,this.type=Ge,this.data=at}function a(Ge){if(Ge.length===0)return[];var at=Ge.charAt(0),et=Ge.charAt(Ge.length-1);if(1<Ge.length&&at===et&&(at==='"'||at==="'"))return['"'+Ge.substr(1,Ge.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(at=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ge))return a(Ge.substr(0,at.index)).concat(a(at[1])).concat(a(Ge.substr(at.index+at[0].length)));if(at=Ge.split("."),at.length===1)return['"'+Ge.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ge=[],et=0;et<at.length;++et)Ge=Ge.concat(a(at[et]));return Ge}function u(Ge){return"["+a(Ge).join("][")+"]"}function c(){var Ge={"":0},at=[""];return{id:function(et){var lt=Ge[et];return lt||(lt=Ge[et]=at.length,at.push(et),lt)},str:function(et){return at[et]}}}function t(Ge,at,et){function lt(){var $t=window.innerWidth,je=window.innerHeight;Ge!==document.body&&(je=Ge.getBoundingClientRect(),$t=je.right-je.left,je=je.bottom-je.top),Ct.width=et*$t,Ct.height=et*je,te(Ct.style,{width:$t+"px",height:je+"px"})}var Ct=document.createElement("canvas");te(Ct.style,{border:0,margin:0,padding:0,top:0,left:0}),Ge.appendChild(Ct),Ge===document.body&&(Ct.style.position="absolute",te(Ge.style,{margin:0,padding:0}));var Pt;return Ge!==document.body&&typeof ResizeObserver=="function"?(Pt=new ResizeObserver(function(){setTimeout(lt)}),Pt.observe(Ge)):window.addEventListener("resize",lt,!1),lt(),{canvas:Ct,onDestroy:function(){Pt?Pt.disconnect():window.removeEventListener("resize",lt),Ge.removeChild(Ct)}}}function f(Ge,at){function et(lt){try{return Ge.getContext(lt,at)}catch{return null}}return et("webgl")||et("experimental-webgl")||et("webgl-experimental")}function n(Ge){return typeof Ge=="string"?Ge.split():Ge}function o(Ge){return typeof Ge=="string"?document.querySelector(Ge):Ge}function l(Ge){var at=Ge||{},et,lt,Ct,Pt;Ge={};var $t=[],je=[],Oe=typeof window>"u"?1:window.devicePixelRatio,mt=!1,wt=function(St){},yt=function(){};if(typeof at=="string"?et=document.querySelector(at):typeof at=="object"&&(typeof at.nodeName=="string"&&typeof at.appendChild=="function"&&typeof at.getBoundingClientRect=="function"?et=at:typeof at.drawArrays=="function"||typeof at.drawElements=="function"?(Pt=at,Ct=Pt.canvas):("gl"in at?Pt=at.gl:"canvas"in at?Ct=o(at.canvas):"container"in at&&(lt=o(at.container)),"attributes"in at&&(Ge=at.attributes),"extensions"in at&&($t=n(at.extensions)),"optionalExtensions"in at&&(je=n(at.optionalExtensions)),"onDone"in at&&(wt=at.onDone),"profile"in at&&(mt=!!at.profile),"pixelRatio"in at&&(Oe=+at.pixelRatio))),et&&(et.nodeName.toLowerCase()==="canvas"?Ct=et:lt=et),!Pt){if(!Ct){if(et=t(lt||document.body,wt,Oe),!et)return null;Ct=et.canvas,yt=et.onDestroy}Ge.premultipliedAlpha===void 0&&(Ge.premultipliedAlpha=!0),Pt=f(Ct,Ge)}return Pt?{gl:Pt,canvas:Ct,container:lt,extensions:$t,optionalExtensions:je,pixelRatio:Oe,profile:mt,onDone:wt,onDestroy:yt}:(yt(),wt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function h(Ge,at){function et($t){$t=$t.toLowerCase();var je;try{je=lt[$t]=Ge.getExtension($t)}catch{}return!!je}for(var lt={},Ct=0;Ct<at.extensions.length;++Ct){var Pt=at.extensions[Ct];if(!et(Pt))return at.onDestroy(),at.onDone('"'+Pt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return at.optionalExtensions.forEach(et),{extensions:lt,restore:function(){Object.keys(lt).forEach(function($t){if(lt[$t]&&!et($t))throw Error("(regl): error restoring extension "+$t)})}}}function i(Ge,at){for(var et=Array(Ge),lt=0;lt<Ge;++lt)et[lt]=at(lt);return et}function s(Ge){var at,et;return at=(65535<Ge)<<4,Ge>>>=at,et=(255<Ge)<<3,Ge>>>=et,at|=et,et=(15<Ge)<<2,Ge>>>=et,at|=et,et=(3<Ge)<<1,at|et|Ge>>>et>>1}function p(){function Ge(lt){e:{for(var Ct=16;268435456>=Ct;Ct*=16)if(lt<=Ct){lt=Ct;break e}lt=0}return Ct=et[s(lt)>>2],0<Ct.length?Ct.pop():new ArrayBuffer(lt)}function at(lt){et[s(lt.byteLength)>>2].push(lt)}var et=i(8,function(){return[]});return{alloc:Ge,free:at,allocType:function(lt,Ct){var Pt=null;switch(lt){case 5120:Pt=new Int8Array(Ge(Ct),0,Ct);break;case 5121:Pt=new Uint8Array(Ge(Ct),0,Ct);break;case 5122:Pt=new Int16Array(Ge(2*Ct),0,Ct);break;case 5123:Pt=new Uint16Array(Ge(2*Ct),0,Ct);break;case 5124:Pt=new Int32Array(Ge(4*Ct),0,Ct);break;case 5125:Pt=new Uint32Array(Ge(4*Ct),0,Ct);break;case 5126:Pt=new Float32Array(Ge(4*Ct),0,Ct);break;default:return null}return Pt.length!==Ct?Pt.subarray(0,Ct):Pt},freeType:function(lt){at(lt.buffer)}}}function v(Ge){return!!Ge&&typeof Ge=="object"&&Array.isArray(Ge.shape)&&Array.isArray(Ge.stride)&&typeof Ge.offset=="number"&&Ge.shape.length===Ge.stride.length&&(Array.isArray(Ge.data)||be(Ge.data))}function m(Ge,at,et,lt,Ct,Pt){for(var $t=0;$t<at;++$t)for(var je=Ge[$t],Oe=0;Oe<et;++Oe)for(var mt=je[Oe],wt=0;wt<lt;++wt)Ct[Pt++]=mt[wt]}function b(Ge,at,et,lt,Ct){for(var Pt=1,$t=et+1;$t<at.length;++$t)Pt*=at[$t];var je=at[et];if(at.length-et===4){var Oe=at[et+1],mt=at[et+2];for(at=at[et+3],$t=0;$t<je;++$t)m(Ge[$t],Oe,mt,at,lt,Ct),Ct+=Pt}else for($t=0;$t<je;++$t)b(Ge[$t],at,et+1,lt,Ct),Ct+=Pt}function y(Ge){return Re[Object.prototype.toString.call(Ge)]|0}function x(Ge,at){for(var et=0;et<at.length;++et)Ge[et]=at[et]}function w(Ge,at,et,lt,Ct,Pt,$t){for(var je=0,Oe=0;Oe<et;++Oe)for(var mt=0;mt<lt;++mt)Ge[je++]=at[Ct*Oe+Pt*mt+$t]}function g(Ge,at,et,lt){function Ct(yt){this.id=Oe++,this.buffer=Ge.createBuffer(),this.type=yt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,et.profile&&(this.stats={size:0})}function Pt(yt,St,kt){yt.byteLength=St.byteLength,Ge.bufferData(yt.type,St,kt)}function $t(yt,St,kt,Rt,zt,Xt){if(yt.usage=kt,Array.isArray(St)){if(yt.dtype=Rt||5126,0<St.length)if(Array.isArray(St[0])){zt=qe(St);for(var Yt=Rt=1;Yt<zt.length;++Yt)Rt*=zt[Yt];yt.dimension=Rt,St=Je(St,zt,yt.dtype),Pt(yt,St,kt),Xt?yt.persistentData=St:se.freeType(St)}else typeof St[0]=="number"?(yt.dimension=zt,zt=se.allocType(yt.dtype,St.length),x(zt,St),Pt(yt,zt,kt),Xt?yt.persistentData=zt:se.freeType(zt)):be(St[0])&&(yt.dimension=St[0].length,yt.dtype=Rt||y(St[0])||5126,St=Je(St,[St.length,St[0].length],yt.dtype),Pt(yt,St,kt),Xt?yt.persistentData=St:se.freeType(St))}else if(be(St))yt.dtype=Rt||y(St),yt.dimension=zt,Pt(yt,St,kt),Xt&&(yt.persistentData=new Uint8Array(new Uint8Array(St.buffer)));else if(v(St)){zt=St.shape;var Vt=St.stride,Yt=St.offset,cr=0,Or=0,kr=0,Sr=0;zt.length===1?(cr=zt[0],Or=1,kr=Vt[0],Sr=0):zt.length===2&&(cr=zt[0],Or=zt[1],kr=Vt[0],Sr=Vt[1]),yt.dtype=Rt||y(St.data)||5126,yt.dimension=Or,zt=se.allocType(yt.dtype,cr*Or),w(zt,St.data,cr,Or,kr,Sr,Yt),Pt(yt,zt,kt),Xt?yt.persistentData=zt:se.freeType(zt)}else St instanceof ArrayBuffer&&(yt.dtype=5121,yt.dimension=zt,Pt(yt,St,kt),Xt&&(yt.persistentData=new Uint8Array(new Uint8Array(St))))}function je(yt){at.bufferCount--,lt(yt),Ge.deleteBuffer(yt.buffer),yt.buffer=null,delete mt[yt.id]}var Oe=0,mt={};Ct.prototype.bind=function(){Ge.bindBuffer(this.type,this.buffer)},Ct.prototype.destroy=function(){je(this)};var wt=[];return et.profile&&(at.getTotalBufferSize=function(){var yt=0;return Object.keys(mt).forEach(function(St){yt+=mt[St].stats.size}),yt}),{create:function(yt,St,kt,Rt){function zt(Yt){var Vt=35044,cr=null,Or=0,kr=0,Sr=1;return Array.isArray(Yt)||be(Yt)||v(Yt)||Yt instanceof ArrayBuffer?cr=Yt:typeof Yt=="number"?Or=Yt|0:Yt&&("data"in Yt&&(cr=Yt.data),"usage"in Yt&&(Vt=ze[Yt.usage]),"type"in Yt&&(kr=Ke[Yt.type]),"dimension"in Yt&&(Sr=Yt.dimension|0),"length"in Yt&&(Or=Yt.length|0)),Xt.bind(),cr?$t(Xt,cr,Vt,kr,Sr,Rt):(Or&&Ge.bufferData(Xt.type,Or,Vt),Xt.dtype=kr||5121,Xt.usage=Vt,Xt.dimension=Sr,Xt.byteLength=Or),et.profile&&(Xt.stats.size=Xt.byteLength*Ee[Xt.dtype]),zt}at.bufferCount++;var Xt=new Ct(St);return mt[Xt.id]=Xt,kt||zt(yt),zt._reglType="buffer",zt._buffer=Xt,zt.subdata=function(Yt,Vt){var cr=(Vt||0)|0,Or;if(Xt.bind(),be(Yt)||Yt instanceof ArrayBuffer)Ge.bufferSubData(Xt.type,cr,Yt);else if(Array.isArray(Yt)){if(0<Yt.length)if(typeof Yt[0]=="number"){var kr=se.allocType(Xt.dtype,Yt.length);x(kr,Yt),Ge.bufferSubData(Xt.type,cr,kr),se.freeType(kr)}else(Array.isArray(Yt[0])||be(Yt[0]))&&(Or=qe(Yt),kr=Je(Yt,Or,Xt.dtype),Ge.bufferSubData(Xt.type,cr,kr),se.freeType(kr))}else if(v(Yt)){Or=Yt.shape;var Sr=Yt.stride,vn=kr=0,Rn=0,hn=0;Or.length===1?(kr=Or[0],vn=1,Rn=Sr[0],hn=0):Or.length===2&&(kr=Or[0],vn=Or[1],Rn=Sr[0],hn=Sr[1]),Or=Array.isArray(Yt.data)?Xt.dtype:y(Yt.data),Or=se.allocType(Or,kr*vn),w(Or,Yt.data,kr,vn,Rn,hn,Yt.offset),Ge.bufferSubData(Xt.type,cr,Or),se.freeType(Or)}return zt},et.profile&&(zt.stats=Xt.stats),zt.destroy=function(){je(Xt)},zt},createStream:function(yt,St){var kt=wt.pop();return kt||(kt=new Ct(yt)),kt.bind(),$t(kt,St,35040,0,1,!1),kt},destroyStream:function(yt){wt.push(yt)},clear:function(){xe(mt).forEach(je),wt.forEach(je)},getBuffer:function(yt){return yt&&yt._buffer instanceof Ct?yt._buffer:null},restore:function(){xe(mt).forEach(function(yt){yt.buffer=Ge.createBuffer(),Ge.bindBuffer(yt.type,yt.buffer),Ge.bufferData(yt.type,yt.persistentData||yt.byteLength,yt.usage)})},_initBuffer:$t}}function T(Ge,at,et,lt){function Ct(yt){this.id=Oe++,je[this.id]=this,this.buffer=yt,this.primType=4,this.type=this.vertCount=0}function Pt(yt,St,kt,Rt,zt,Xt,Yt){yt.buffer.bind();var Vt;if(St?((Vt=Yt)||be(St)&&(!v(St)||be(St.data))||(Vt=at.oes_element_index_uint?5125:5123),et._initBuffer(yt.buffer,St,kt,Vt,3)):(Ge.bufferData(34963,Xt,kt),yt.buffer.dtype=Vt||5121,yt.buffer.usage=kt,yt.buffer.dimension=3,yt.buffer.byteLength=Xt),Vt=Yt,!Yt){switch(yt.buffer.dtype){case 5121:case 5120:Vt=5121;break;case 5123:case 5122:Vt=5123;break;case 5125:case 5124:Vt=5125}yt.buffer.dtype=Vt}yt.type=Vt,St=zt,0>St&&(St=yt.buffer.byteLength,Vt===5123?St>>=1:Vt===5125&&(St>>=2)),yt.vertCount=St,St=Rt,0>Rt&&(St=4,Rt=yt.buffer.dimension,Rt===1&&(St=0),Rt===2&&(St=1),Rt===3&&(St=4)),yt.primType=St}function $t(yt){lt.elementsCount--,delete je[yt.id],yt.buffer.destroy(),yt.buffer=null}var je={},Oe=0,mt={uint8:5121,uint16:5123};at.oes_element_index_uint&&(mt.uint32=5125),Ct.prototype.bind=function(){this.buffer.bind()};var wt=[];return{create:function(yt,St){function kt(Xt){if(Xt)if(typeof Xt=="number")Rt(Xt),zt.primType=4,zt.vertCount=Xt|0,zt.type=5121;else{var Yt=null,Vt=35044,cr=-1,Or=-1,kr=0,Sr=0;Array.isArray(Xt)||be(Xt)||v(Xt)?Yt=Xt:("data"in Xt&&(Yt=Xt.data),"usage"in Xt&&(Vt=ze[Xt.usage]),"primitive"in Xt&&(cr=Ae[Xt.primitive]),"count"in Xt&&(Or=Xt.count|0),"type"in Xt&&(Sr=mt[Xt.type]),"length"in Xt?kr=Xt.length|0:(kr=Or,Sr===5123||Sr===5122?kr*=2:(Sr===5125||Sr===5124)&&(kr*=4))),Pt(zt,Yt,Vt,cr,Or,kr,Sr)}else Rt(),zt.primType=4,zt.vertCount=0,zt.type=5121;return kt}var Rt=et.create(null,34963,!0),zt=new Ct(Rt._buffer);return lt.elementsCount++,kt(yt),kt._reglType="elements",kt._elements=zt,kt.subdata=function(Xt,Yt){return Rt.subdata(Xt,Yt),kt},kt.destroy=function(){$t(zt)},kt},createStream:function(yt){var St=wt.pop();return St||(St=new Ct(et.create(null,34963,!0,!1)._buffer)),Pt(St,yt,35040,-1,-1,0,0),St},destroyStream:function(yt){wt.push(yt)},getElements:function(yt){return typeof yt=="function"&&yt._elements instanceof Ct?yt._elements:null},clear:function(){xe(je).forEach($t)}}}function M(Ge){for(var at=se.allocType(5123,Ge.length),et=0;et<Ge.length;++et)if(isNaN(Ge[et]))at[et]=65535;else if(Ge[et]===1/0)at[et]=31744;else if(Ge[et]===-1/0)at[et]=64512;else{Be[0]=Ge[et];var Pt=$e[0],lt=Pt>>>31<<15,Ct=(Pt<<1>>>24)-127,Pt=Pt>>13&1023;at[et]=-24>Ct?lt:-14>Ct?lt+(Pt+1024>>-14-Ct):15<Ct?lt+31744:lt+(Ct+15<<10)+Pt}return at}function P(Ge){return Array.isArray(Ge)||be(Ge)}function L(Ge){return"[object "+Ge+"]"}function I(Ge){return Array.isArray(Ge)&&(Ge.length===0||typeof Ge[0]=="number")}function C(Ge){return!!(Array.isArray(Ge)&&Ge.length!==0&&P(Ge[0]))}function k(Ge){return Object.prototype.toString.call(Ge)}function E(Ge){if(!Ge)return!1;var at=k(Ge);return 0<=Zt.indexOf(at)?!0:I(Ge)||C(Ge)||v(Ge)}function R(Ge,at){Ge.type===36193?(Ge.data=M(at),se.freeType(at)):Ge.data=at}function O(Ge,at,et,lt,Ct,Pt){if(Ge=typeof At[Ge]<"u"?At[Ge]:Ne[Ge]*Mt[at],Pt&&(Ge*=6),Ct){for(lt=0;1<=et;)lt+=Ge*et*et,et/=2;return lt}return Ge*et*lt}function N(Ge,at,et,lt,Ct,Pt,$t){function je(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Oe(ar,Wr){ar.internalformat=Wr.internalformat,ar.format=Wr.format,ar.type=Wr.type,ar.compressed=Wr.compressed,ar.premultiplyAlpha=Wr.premultiplyAlpha,ar.flipY=Wr.flipY,ar.unpackAlignment=Wr.unpackAlignment,ar.colorSpace=Wr.colorSpace,ar.width=Wr.width,ar.height=Wr.height,ar.channels=Wr.channels}function mt(ar,Wr){if(typeof Wr=="object"&&Wr){"premultiplyAlpha"in Wr&&(ar.premultiplyAlpha=Wr.premultiplyAlpha),"flipY"in Wr&&(ar.flipY=Wr.flipY),"alignment"in Wr&&(ar.unpackAlignment=Wr.alignment),"colorSpace"in Wr&&(ar.colorSpace=Vr[Wr.colorSpace]),"type"in Wr&&(ar.type=ln[Wr.type]);var Fr=ar.width,yn=ar.height,Sn=ar.channels,aa=!1;"shape"in Wr?(Fr=Wr.shape[0],yn=Wr.shape[1],Wr.shape.length===3&&(Sn=Wr.shape[2],aa=!0)):("radius"in Wr&&(Fr=yn=Wr.radius),"width"in Wr&&(Fr=Wr.width),"height"in Wr&&(yn=Wr.height),"channels"in Wr&&(Sn=Wr.channels,aa=!0)),ar.width=Fr|0,ar.height=yn|0,ar.channels=Sn|0,Fr=!1,"format"in Wr&&(Fr=Wr.format,yn=ar.internalformat=cn[Fr],ar.format=Lr[yn],Fr in ln&&!("type"in Wr)&&(ar.type=ln[Fr]),Fr in Zr&&(ar.compressed=!0),Fr=!0),!aa&&Fr?ar.channels=Ne[ar.format]:aa&&!Fr&&ar.channels!==bt[ar.format]&&(ar.format=ar.internalformat=bt[ar.channels])}}function wt(ar){Ge.pixelStorei(37440,ar.flipY),Ge.pixelStorei(37441,ar.premultiplyAlpha),Ge.pixelStorei(37443,ar.colorSpace),Ge.pixelStorei(3317,ar.unpackAlignment)}function yt(){je.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function St(ar,Wr){var Fr=null;if(E(Wr)?Fr=Wr:Wr&&(mt(ar,Wr),"x"in Wr&&(ar.xOffset=Wr.x|0),"y"in Wr&&(ar.yOffset=Wr.y|0),E(Wr.data)&&(Fr=Wr.data)),Wr.copy){var yn=Ct.viewportWidth,Sn=Ct.viewportHeight;ar.width=ar.width||yn-ar.xOffset,ar.height=ar.height||Sn-ar.yOffset,ar.needsCopy=!0}else if(!Fr)ar.width=ar.width||1,ar.height=ar.height||1,ar.channels=ar.channels||4;else if(be(Fr))ar.channels=ar.channels||4,ar.data=Fr,"type"in Wr||ar.type!==5121||(ar.type=Re[Object.prototype.toString.call(Fr)]|0);else if(I(Fr)){switch(ar.channels=ar.channels||4,yn=Fr,Sn=yn.length,ar.type){case 5121:case 5123:case 5125:case 5126:Sn=se.allocType(ar.type,Sn),Sn.set(yn),ar.data=Sn;break;case 36193:ar.data=M(yn)}ar.alignment=1,ar.needsFree=!0}else if(v(Fr)){yn=Fr.data,Array.isArray(yn)||ar.type!==5121||(ar.type=Re[Object.prototype.toString.call(yn)]|0);var Sn=Fr.shape,aa=Fr.stride,Xn,ra,na,ba;Sn.length===3?(na=Sn[2],ba=aa[2]):ba=na=1,Xn=Sn[0],ra=Sn[1],Sn=aa[0],aa=aa[1],ar.alignment=1,ar.width=Xn,ar.height=ra,ar.channels=na,ar.format=ar.internalformat=bt[na],ar.needsFree=!0,Xn=ba,Fr=Fr.offset,na=ar.width,ba=ar.height,ra=ar.channels;for(var Ut=se.allocType(ar.type===36193?5126:ar.type,na*ba*ra),lr=0,Ir=0;Ir<ba;++Ir)for(var Kr=0;Kr<na;++Kr)for(var Ur=0;Ur<ra;++Ur)Ut[lr++]=yn[Sn*Kr+aa*Ir+Xn*Ur+Fr];R(ar,Ut)}else if(k(Fr)===st||k(Fr)===_t||k(Fr)===Ot)k(Fr)===st||k(Fr)===_t?ar.element=Fr:ar.element=Fr.canvas,ar.width=ar.element.width,ar.height=ar.element.height,ar.channels=4;else if(k(Fr)===Wt)ar.element=Fr,ar.width=Fr.width,ar.height=Fr.height,ar.channels=4;else if(k(Fr)===Et)ar.element=Fr,ar.width=Fr.naturalWidth,ar.height=Fr.naturalHeight,ar.channels=4;else if(k(Fr)===jt)ar.element=Fr,ar.width=Fr.videoWidth,ar.height=Fr.videoHeight,ar.channels=4;else if(C(Fr)){for(yn=ar.width||Fr[0].length,Sn=ar.height||Fr.length,aa=ar.channels,aa=P(Fr[0][0])?aa||Fr[0][0].length:aa||1,Xn=ke.shape(Fr),na=1,ba=0;ba<Xn.length;++ba)na*=Xn[ba];na=se.allocType(ar.type===36193?5126:ar.type,na),ke.flatten(Fr,Xn,"",na),R(ar,na),ar.alignment=1,ar.width=yn,ar.height=Sn,ar.channels=aa,ar.format=ar.internalformat=bt[aa],ar.needsFree=!0}}function kt(ar,Wr,Fr,yn,Sn){var aa=ar.element,Xn=ar.data,ra=ar.internalformat,na=ar.format,ba=ar.type,Ut=ar.width,lr=ar.height;wt(ar),aa?Ge.texSubImage2D(Wr,Sn,Fr,yn,na,ba,aa):ar.compressed?Ge.compressedTexSubImage2D(Wr,Sn,Fr,yn,ra,Ut,lr,Xn):ar.needsCopy?(lt(),Ge.copyTexSubImage2D(Wr,Sn,Fr,yn,ar.xOffset,ar.yOffset,Ut,lr)):Ge.texSubImage2D(Wr,Sn,Fr,yn,Ut,lr,na,ba,Xn)}function Rt(){return pn.pop()||new yt}function zt(ar){ar.needsFree&&se.freeType(ar.data),yt.call(ar),pn.push(ar)}function Xt(){je.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Yt(ar,Wr,Fr){var yn=ar.images[0]=Rt();ar.mipmask=1,yn.width=ar.width=Wr,yn.height=ar.height=Fr,yn.channels=ar.channels=4}function Vt(ar,Wr){var Fr=null;if(E(Wr))Fr=ar.images[0]=Rt(),Oe(Fr,ar),St(Fr,Wr),ar.mipmask=1;else if(mt(ar,Wr),Array.isArray(Wr.mipmap))for(var yn=Wr.mipmap,Sn=0;Sn<yn.length;++Sn)Fr=ar.images[Sn]=Rt(),Oe(Fr,ar),Fr.width>>=Sn,Fr.height>>=Sn,St(Fr,yn[Sn]),ar.mipmask|=1<<Sn;else Fr=ar.images[0]=Rt(),Oe(Fr,ar),St(Fr,Wr),ar.mipmask=1;Oe(ar,ar.images[0])}function cr(ar,Wr){for(var Fr=ar.images,yn=0;yn<Fr.length&&Fr[yn];++yn){var Sn=Fr[yn],aa=Wr,Xn=yn,ra=Sn.element,na=Sn.data,ba=Sn.internalformat,Ut=Sn.format,lr=Sn.type,Ir=Sn.width,Kr=Sn.height;wt(Sn),ra?Ge.texImage2D(aa,Xn,Ut,Ut,lr,ra):Sn.compressed?Ge.compressedTexImage2D(aa,Xn,ba,Ir,Kr,0,na):Sn.needsCopy?(lt(),Ge.copyTexImage2D(aa,Xn,Ut,Sn.xOffset,Sn.yOffset,Ir,Kr,0)):Ge.texImage2D(aa,Xn,Ut,Ir,Kr,0,Ut,lr,na||null)}}function Or(){var ar=On.pop()||new Xt;je.call(ar);for(var Wr=ar.mipmask=0;16>Wr;++Wr)ar.images[Wr]=null;return ar}function kr(ar){for(var Wr=ar.images,Fr=0;Fr<Wr.length;++Fr)Wr[Fr]&&zt(Wr[Fr]),Wr[Fr]=null;On.push(ar)}function Sr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function vn(ar,Wr){"min"in Wr&&(ar.minFilter=on[Wr.min],0<=xt.indexOf(ar.minFilter)&&!("faces"in Wr)&&(ar.genMipmaps=!0)),"mag"in Wr&&(ar.magFilter=qr[Wr.mag]);var Fr=ar.wrapS,yn=ar.wrapT;if("wrap"in Wr){var Sn=Wr.wrap;typeof Sn=="string"?Fr=yn=dn[Sn]:Array.isArray(Sn)&&(Fr=dn[Sn[0]],yn=dn[Sn[1]])}else"wrapS"in Wr&&(Fr=dn[Wr.wrapS]),"wrapT"in Wr&&(yn=dn[Wr.wrapT]);if(ar.wrapS=Fr,ar.wrapT=yn,"anisotropic"in Wr&&(ar.anisotropic=Wr.anisotropic),"mipmap"in Wr){switch(Fr=!1,typeof Wr.mipmap){case"string":ar.mipmapHint=xr[Wr.mipmap],Fr=ar.genMipmaps=!0;break;case"boolean":Fr=ar.genMipmaps=Wr.mipmap;break;case"object":ar.genMipmaps=!1,Fr=!0}!Fr||"min"in Wr||(ar.minFilter=9984)}}function Rn(ar,Wr){Ge.texParameteri(Wr,10241,ar.minFilter),Ge.texParameteri(Wr,10240,ar.magFilter),Ge.texParameteri(Wr,10242,ar.wrapS),Ge.texParameteri(Wr,10243,ar.wrapT),at.ext_texture_filter_anisotropic&&Ge.texParameteri(Wr,34046,ar.anisotropic),ar.genMipmaps&&(Ge.hint(33170,ar.mipmapHint),Ge.generateMipmap(Wr))}function hn(ar){je.call(this),this.mipmask=0,this.internalformat=6408,this.id=Fn++,this.refCount=1,this.target=ar,this.texture=Ge.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Sr,$t.profile&&(this.stats={size:0})}function An(ar){Ge.activeTexture(33984),Ge.bindTexture(ar.target,ar.texture)}function En(){var ar=Sa[0];ar?Ge.bindTexture(ar.target,ar.texture):Ge.bindTexture(3553,null)}function Mr(ar){var Wr=ar.texture,Fr=ar.unit,yn=ar.target;0<=Fr&&(Ge.activeTexture(33984+Fr),Ge.bindTexture(yn,null),Sa[Fr]=null),Ge.deleteTexture(Wr),ar.texture=null,ar.params=null,ar.pixels=null,ar.refCount=0,delete Qn[ar.id],Pt.textureCount--}var xr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},dn={repeat:10497,clamp:33071,mirror:33648},qr={nearest:9728,linear:9729},on=te({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},qr),Vr={none:0,browser:37444},ln={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},cn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Zr={};at.ext_srgb&&(cn.srgb=35904,cn.srgba=35906),at.oes_texture_float&&(ln.float32=ln.float=5126),at.oes_texture_half_float&&(ln.float16=ln["half float"]=36193),at.webgl_depth_texture&&(te(cn,{depth:6402,"depth stencil":34041}),te(ln,{uint16:5123,uint32:5125,"depth stencil":34042})),at.webgl_compressed_texture_s3tc&&te(Zr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),at.webgl_compressed_texture_atc&&te(Zr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),at.webgl_compressed_texture_pvrtc&&te(Zr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),at.webgl_compressed_texture_etc1&&(Zr["rgb etc1"]=36196);var ht=Array.prototype.slice.call(Ge.getParameter(34467));Object.keys(Zr).forEach(function(ar){var Wr=Zr[ar];0<=ht.indexOf(Wr)&&(cn[ar]=Wr)});var Nt=Object.keys(cn);et.textureFormats=Nt;var rr=[];Object.keys(cn).forEach(function(ar){rr[cn[ar]]=ar});var mr=[];Object.keys(ln).forEach(function(ar){mr[ln[ar]]=ar});var Rr=[];Object.keys(qr).forEach(function(ar){Rr[qr[ar]]=ar});var Er=[];Object.keys(on).forEach(function(ar){Er[on[ar]]=ar});var Br=[];Object.keys(dn).forEach(function(ar){Br[dn[ar]]=ar});var Lr=Nt.reduce(function(ar,Wr){var Fr=cn[Wr];return Fr===6409||Fr===6406||Fr===6409||Fr===6410||Fr===6402||Fr===34041||at.ext_srgb&&(Fr===35904||Fr===35906)?ar[Fr]=Fr:Fr===32855||0<=Wr.indexOf("rgba")?ar[Fr]=6408:ar[Fr]=6407,ar},{}),pn=[],On=[],Fn=0,Qn={},ya=et.maxTextureUnits,Sa=Array(ya).map(function(){return null});return te(hn.prototype,{bind:function(){this.bindCount+=1;var ar=this.unit;if(0>ar){for(var Wr=0;Wr<ya;++Wr){var Fr=Sa[Wr];if(Fr){if(0<Fr.bindCount)continue;Fr.unit=-1}Sa[Wr]=this,ar=Wr;break}$t.profile&&Pt.maxTextureUnits<ar+1&&(Pt.maxTextureUnits=ar+1),this.unit=ar,Ge.activeTexture(33984+ar),Ge.bindTexture(this.target,this.texture)}return ar},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Mr(this)}}),$t.profile&&(Pt.getTotalTextureSize=function(){var ar=0;return Object.keys(Qn).forEach(function(Wr){ar+=Qn[Wr].stats.size}),ar}),{create2D:function(ar,Wr){function Fr(Sn,aa){var Xn=yn.texInfo;Sr.call(Xn);var ra=Or();return typeof Sn=="number"?typeof aa=="number"?Yt(ra,Sn|0,aa|0):Yt(ra,Sn|0,Sn|0):Sn?(vn(Xn,Sn),Vt(ra,Sn)):Yt(ra,1,1),Xn.genMipmaps&&(ra.mipmask=(ra.width<<1)-1),yn.mipmask=ra.mipmask,Oe(yn,ra),yn.internalformat=ra.internalformat,Fr.width=ra.width,Fr.height=ra.height,An(yn),cr(ra,3553),Rn(Xn,3553),En(),kr(ra),$t.profile&&(yn.stats.size=O(yn.internalformat,yn.type,ra.width,ra.height,Xn.genMipmaps,!1)),Fr.format=rr[yn.internalformat],Fr.type=mr[yn.type],Fr.mag=Rr[Xn.magFilter],Fr.min=Er[Xn.minFilter],Fr.wrapS=Br[Xn.wrapS],Fr.wrapT=Br[Xn.wrapT],Fr}var yn=new hn(3553);return Qn[yn.id]=yn,Pt.textureCount++,Fr(ar,Wr),Fr.subimage=function(Sn,aa,Xn,ra){aa|=0,Xn|=0,ra|=0;var na=Rt();return Oe(na,yn),na.width=0,na.height=0,St(na,Sn),na.width=na.width||(yn.width>>ra)-aa,na.height=na.height||(yn.height>>ra)-Xn,An(yn),kt(na,3553,aa,Xn,ra),En(),zt(na),Fr},Fr.resize=function(Sn,aa){var Xn=Sn|0,ra=aa|0||Xn;if(Xn===yn.width&&ra===yn.height)return Fr;Fr.width=yn.width=Xn,Fr.height=yn.height=ra,An(yn);for(var na=0;yn.mipmask>>na;++na){var ba=Xn>>na,Ut=ra>>na;if(!ba||!Ut)break;Ge.texImage2D(3553,na,yn.format,ba,Ut,0,yn.format,yn.type,null)}return En(),$t.profile&&(yn.stats.size=O(yn.internalformat,yn.type,Xn,ra,!1,!1)),Fr},Fr._reglType="texture2d",Fr._texture=yn,$t.profile&&(Fr.stats=yn.stats),Fr.destroy=function(){yn.decRef()},Fr},createCube:function(ar,Wr,Fr,yn,Sn,aa){function Xn(ba,Ut,lr,Ir,Kr,Ur){var Gr,$r=ra.texInfo;for(Sr.call($r),Gr=0;6>Gr;++Gr)na[Gr]=Or();if(typeof ba=="number"||!ba)for(ba=ba|0||1,Gr=0;6>Gr;++Gr)Yt(na[Gr],ba,ba);else if(typeof ba=="object")if(Ut)Vt(na[0],ba),Vt(na[1],Ut),Vt(na[2],lr),Vt(na[3],Ir),Vt(na[4],Kr),Vt(na[5],Ur);else if(vn($r,ba),mt(ra,ba),"faces"in ba)for(ba=ba.faces,Gr=0;6>Gr;++Gr)Oe(na[Gr],ra),Vt(na[Gr],ba[Gr]);else for(Gr=0;6>Gr;++Gr)Vt(na[Gr],ba);for(Oe(ra,na[0]),ra.mipmask=$r.genMipmaps?(na[0].width<<1)-1:na[0].mipmask,ra.internalformat=na[0].internalformat,Xn.width=na[0].width,Xn.height=na[0].height,An(ra),Gr=0;6>Gr;++Gr)cr(na[Gr],34069+Gr);for(Rn($r,34067),En(),$t.profile&&(ra.stats.size=O(ra.internalformat,ra.type,Xn.width,Xn.height,$r.genMipmaps,!0)),Xn.format=rr[ra.internalformat],Xn.type=mr[ra.type],Xn.mag=Rr[$r.magFilter],Xn.min=Er[$r.minFilter],Xn.wrapS=Br[$r.wrapS],Xn.wrapT=Br[$r.wrapT],Gr=0;6>Gr;++Gr)kr(na[Gr]);return Xn}var ra=new hn(34067);Qn[ra.id]=ra,Pt.cubeCount++;var na=Array(6);return Xn(ar,Wr,Fr,yn,Sn,aa),Xn.subimage=function(ba,Ut,lr,Ir,Kr){lr|=0,Ir|=0,Kr|=0;var Ur=Rt();return Oe(Ur,ra),Ur.width=0,Ur.height=0,St(Ur,Ut),Ur.width=Ur.width||(ra.width>>Kr)-lr,Ur.height=Ur.height||(ra.height>>Kr)-Ir,An(ra),kt(Ur,34069+ba,lr,Ir,Kr),En(),zt(Ur),Xn},Xn.resize=function(ba){if(ba|=0,ba!==ra.width){Xn.width=ra.width=ba,Xn.height=ra.height=ba,An(ra);for(var Ut=0;6>Ut;++Ut)for(var lr=0;ra.mipmask>>lr;++lr)Ge.texImage2D(34069+Ut,lr,ra.format,ba>>lr,ba>>lr,0,ra.format,ra.type,null);return En(),$t.profile&&(ra.stats.size=O(ra.internalformat,ra.type,Xn.width,Xn.height,!1,!0)),Xn}},Xn._reglType="textureCube",Xn._texture=ra,$t.profile&&(Xn.stats=ra.stats),Xn.destroy=function(){ra.decRef()},Xn},clear:function(){for(var ar=0;ar<ya;++ar)Ge.activeTexture(33984+ar),Ge.bindTexture(3553,null),Sa[ar]=null;xe(Qn).forEach(Mr),Pt.cubeCount=0,Pt.textureCount=0},getTexture:function(ar){return null},restore:function(){for(var ar=0;ar<ya;++ar){var Wr=Sa[ar];Wr&&(Wr.bindCount=0,Wr.unit=-1,Sa[ar]=null)}xe(Qn).forEach(function(Fr){Fr.texture=Ge.createTexture(),Ge.bindTexture(Fr.target,Fr.texture);for(var yn=0;32>yn;++yn)if((Fr.mipmask&1<<yn)!==0)if(Fr.target===3553)Ge.texImage2D(3553,yn,Fr.internalformat,Fr.width>>yn,Fr.height>>yn,0,Fr.internalformat,Fr.type,null);else for(var Sn=0;6>Sn;++Sn)Ge.texImage2D(34069+Sn,yn,Fr.internalformat,Fr.width>>yn,Fr.height>>yn,0,Fr.internalformat,Fr.type,null);Rn(Fr.texInfo,Fr.target)})}}}function G(Ge,at,et,lt,Ct,Pt){function $t(hn,An,En){this.target=hn,this.texture=An,this.renderbuffer=En;var Mr=hn=0;An?(hn=An.width,Mr=An.height):En&&(hn=En.width,Mr=En.height),this.width=hn,this.height=Mr}function je(hn){hn&&(hn.texture&&hn.texture._texture.decRef(),hn.renderbuffer&&hn.renderbuffer._renderbuffer.decRef())}function Oe(hn,An,En){hn&&(hn.texture?hn.texture._texture.refCount+=1:hn.renderbuffer._renderbuffer.refCount+=1)}function mt(hn,An){An&&(An.texture?Ge.framebufferTexture2D(36160,hn,An.target,An.texture._texture.texture,0):Ge.framebufferRenderbuffer(36160,hn,36161,An.renderbuffer._renderbuffer.renderbuffer))}function wt(hn){var An=3553,En=null,Mr=null,xr=hn;return typeof hn=="object"&&(xr=hn.data,"target"in hn&&(An=hn.target|0)),hn=xr._reglType,hn==="texture2d"||hn==="textureCube"?En=xr:hn==="renderbuffer"&&(Mr=xr,An=36161),new $t(An,En,Mr)}function yt(hn,An,En,Mr,xr){return En?(hn=lt.create2D({width:hn,height:An,format:Mr,type:xr}),hn._texture.refCount=0,new $t(3553,hn,null)):(hn=Ct.create({width:hn,height:An,format:Mr}),hn._renderbuffer.refCount=0,new $t(36161,null,hn))}function St(hn){return hn&&(hn.texture||hn.renderbuffer)}function kt(hn,An,En){hn&&(hn.texture?hn.texture.resize(An,En):hn.renderbuffer&&hn.renderbuffer.resize(An,En),hn.width=An,hn.height=En)}function Rt(){this.id=vn++,Rn[this.id]=this,this.framebuffer=Ge.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function zt(hn){hn.colorAttachments.forEach(je),je(hn.depthAttachment),je(hn.stencilAttachment),je(hn.depthStencilAttachment)}function Xt(hn){Ge.deleteFramebuffer(hn.framebuffer),hn.framebuffer=null,Pt.framebufferCount--,delete Rn[hn.id]}function Yt(hn){var An;Ge.bindFramebuffer(36160,hn.framebuffer);var En=hn.colorAttachments;for(An=0;An<En.length;++An)mt(36064+An,En[An]);for(An=En.length;An<et.maxColorAttachments;++An)Ge.framebufferTexture2D(36160,36064+An,3553,null,0);Ge.framebufferTexture2D(36160,33306,3553,null,0),Ge.framebufferTexture2D(36160,36096,3553,null,0),Ge.framebufferTexture2D(36160,36128,3553,null,0),mt(36096,hn.depthAttachment),mt(36128,hn.stencilAttachment),mt(33306,hn.depthStencilAttachment),Ge.checkFramebufferStatus(36160),Ge.isContextLost(),Ge.bindFramebuffer(36160,cr.next?cr.next.framebuffer:null),cr.cur=cr.next,Ge.getError()}function Vt(hn,An){function En(xr,dn){var qr,on=0,Vr=0,ln=!0,cn=!0;qr=null;var Zr=!0,ht="rgba",Nt="uint8",rr=1,mr=null,Rr=null,Er=null,Br=!1;typeof xr=="number"?(on=xr|0,Vr=dn|0||on):xr?("shape"in xr?(Vr=xr.shape,on=Vr[0],Vr=Vr[1]):("radius"in xr&&(on=Vr=xr.radius),"width"in xr&&(on=xr.width),"height"in xr&&(Vr=xr.height)),("color"in xr||"colors"in xr)&&(qr=xr.color||xr.colors),qr||("colorCount"in xr&&(rr=xr.colorCount|0),"colorTexture"in xr&&(Zr=!!xr.colorTexture,ht="rgba4"),"colorType"in xr&&(Nt=xr.colorType,!Zr)&&(Nt==="half float"||Nt==="float16"?ht="rgba16f":(Nt==="float"||Nt==="float32")&&(ht="rgba32f")),"colorFormat"in xr&&(ht=xr.colorFormat,0<=Or.indexOf(ht)?Zr=!0:0<=kr.indexOf(ht)&&(Zr=!1))),("depthTexture"in xr||"depthStencilTexture"in xr)&&(Br=!(!xr.depthTexture&&!xr.depthStencilTexture)),"depth"in xr&&(typeof xr.depth=="boolean"?ln=xr.depth:(mr=xr.depth,cn=!1)),"stencil"in xr&&(typeof xr.stencil=="boolean"?cn=xr.stencil:(Rr=xr.stencil,ln=!1)),"depthStencil"in xr&&(typeof xr.depthStencil=="boolean"?ln=cn=xr.depthStencil:(Er=xr.depthStencil,cn=ln=!1))):on=Vr=1;var Lr=null,pn=null,On=null,Fn=null;if(Array.isArray(qr))Lr=qr.map(wt);else if(qr)Lr=[wt(qr)];else for(Lr=Array(rr),qr=0;qr<rr;++qr)Lr[qr]=yt(on,Vr,Zr,ht,Nt);for(on=on||Lr[0].width,Vr=Vr||Lr[0].height,mr?pn=wt(mr):ln&&!cn&&(pn=yt(on,Vr,Br,"depth","uint32")),Rr?On=wt(Rr):cn&&!ln&&(On=yt(on,Vr,!1,"stencil","uint8")),Er?Fn=wt(Er):!mr&&!Rr&&cn&&ln&&(Fn=yt(on,Vr,Br,"depth stencil","depth stencil")),ln=null,qr=0;qr<Lr.length;++qr)Oe(Lr[qr]),Lr[qr]&&Lr[qr].texture&&(cn=Te[Lr[qr].texture._texture.format]*Le[Lr[qr].texture._texture.type],ln===null&&(ln=cn));return Oe(pn),Oe(On),Oe(Fn),zt(Mr),Mr.width=on,Mr.height=Vr,Mr.colorAttachments=Lr,Mr.depthAttachment=pn,Mr.stencilAttachment=On,Mr.depthStencilAttachment=Fn,En.color=Lr.map(St),En.depth=St(pn),En.stencil=St(On),En.depthStencil=St(Fn),En.width=Mr.width,En.height=Mr.height,Yt(Mr),En}var Mr=new Rt;return Pt.framebufferCount++,En(hn,An),te(En,{resize:function(xr,dn){var qr=Math.max(xr|0,1),on=Math.max(dn|0||qr,1);if(qr===Mr.width&&on===Mr.height)return En;for(var Vr=Mr.colorAttachments,ln=0;ln<Vr.length;++ln)kt(Vr[ln],qr,on);return kt(Mr.depthAttachment,qr,on),kt(Mr.stencilAttachment,qr,on),kt(Mr.depthStencilAttachment,qr,on),Mr.width=En.width=qr,Mr.height=En.height=on,Yt(Mr),En},_reglType:"framebuffer",_framebuffer:Mr,destroy:function(){Xt(Mr),zt(Mr)},use:function(xr){cr.setFBO({framebuffer:En},xr)}})}var cr={cur:null,next:null,dirty:!1,setFBO:null},Or=["rgba"],kr=["rgba4","rgb565","rgb5 a1"];at.ext_srgb&&kr.push("srgba"),at.ext_color_buffer_half_float&&kr.push("rgba16f","rgb16f"),at.webgl_color_buffer_float&&kr.push("rgba32f");var Sr=["uint8"];at.oes_texture_half_float&&Sr.push("half float","float16"),at.oes_texture_float&&Sr.push("float","float32");var vn=0,Rn={};return te(cr,{getFramebuffer:function(hn){return typeof hn=="function"&&hn._reglType==="framebuffer"&&(hn=hn._framebuffer,hn instanceof Rt)?hn:null},create:Vt,createCube:function(hn){function An(Mr){var xr,dn={color:null},qr=0,on=null;xr="rgba";var Vr="uint8",ln=1;if(typeof Mr=="number"?qr=Mr|0:Mr?("shape"in Mr?qr=Mr.shape[0]:("radius"in Mr&&(qr=Mr.radius|0),"width"in Mr?qr=Mr.width|0:"height"in Mr&&(qr=Mr.height|0)),("color"in Mr||"colors"in Mr)&&(on=Mr.color||Mr.colors),on||("colorCount"in Mr&&(ln=Mr.colorCount|0),"colorType"in Mr&&(Vr=Mr.colorType),"colorFormat"in Mr&&(xr=Mr.colorFormat)),"depth"in Mr&&(dn.depth=Mr.depth),"stencil"in Mr&&(dn.stencil=Mr.stencil),"depthStencil"in Mr&&(dn.depthStencil=Mr.depthStencil)):qr=1,on)if(Array.isArray(on))for(Mr=[],xr=0;xr<on.length;++xr)Mr[xr]=on[xr];else Mr=[on];else for(Mr=Array(ln),on={radius:qr,format:xr,type:Vr},xr=0;xr<ln;++xr)Mr[xr]=lt.createCube(on);for(dn.color=Array(Mr.length),xr=0;xr<Mr.length;++xr)ln=Mr[xr],qr=qr||ln.width,dn.color[xr]={target:34069,data:Mr[xr]};for(xr=0;6>xr;++xr){for(ln=0;ln<Mr.length;++ln)dn.color[ln].target=34069+xr;0<xr&&(dn.depth=En[0].depth,dn.stencil=En[0].stencil,dn.depthStencil=En[0].depthStencil),En[xr]?En[xr](dn):En[xr]=Vt(dn)}return te(An,{width:qr,height:qr,color:Mr})}var En=Array(6);return An(hn),te(An,{faces:En,resize:function(Mr){var xr=Mr|0;if(xr===An.width)return An;var dn=An.color;for(Mr=0;Mr<dn.length;++Mr)dn[Mr].resize(xr);for(Mr=0;6>Mr;++Mr)En[Mr].resize(xr);return An.width=An.height=xr,An},_reglType:"framebufferCube",destroy:function(){En.forEach(function(Mr){Mr.destroy()})}})},clear:function(){xe(Rn).forEach(Xt)},restore:function(){cr.cur=null,cr.next=null,cr.dirty=!0,xe(Rn).forEach(function(hn){hn.framebuffer=Ge.createFramebuffer(),Yt(hn)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function Y(Ge,at,et,lt,Ct){function Pt(zt){if(zt!==Rt.currentVAO){var Xt=at.oes_vertex_array_object;zt?Xt.bindVertexArrayOES(zt.vao):Xt.bindVertexArrayOES(null),Rt.currentVAO=zt}}function $t(zt){if(zt!==Rt.currentVAO){if(zt)zt.bindAttrs();else for(var Xt=at.angle_instanced_arrays,Yt=0;Yt<yt.length;++Yt){var Vt=yt[Yt];Vt.buffer?(Ge.enableVertexAttribArray(Yt),Ge.vertexAttribPointer(Yt,Vt.size,Vt.type,Vt.normalized,Vt.stride,Vt.offfset),Xt&&Xt.vertexAttribDivisorANGLE(Yt,Vt.divisor)):(Ge.disableVertexAttribArray(Yt),Ge.vertexAttrib4f(Yt,Vt.x,Vt.y,Vt.z,Vt.w))}Rt.currentVAO=zt}}function je(){xe(kt).forEach(function(zt){zt.destroy()})}function Oe(){this.id=++St,this.attributes=[];var zt=at.oes_vertex_array_object;this.vao=zt?zt.createVertexArrayOES():null,kt[this.id]=this,this.buffers=[]}function mt(){at.oes_vertex_array_object&&xe(kt).forEach(function(zt){zt.refresh()})}var wt=et.maxAttributes,yt=Array(wt);for(et=0;et<wt;++et)yt[et]=new U;var St=0,kt={},Rt={Record:U,scope:{},state:yt,currentVAO:null,targetVAO:null,restore:at.oes_vertex_array_object?mt:function(){},createVAO:function(zt){function Xt(Vt){for(var cr=0;cr<Yt.buffers.length;++cr)Yt.buffers[cr].destroy();Yt.buffers.length=0,cr=Yt.attributes,cr.length=Vt.length;for(var Or=0;Or<Vt.length;++Or){var kr=Vt[Or],Sr=cr[Or]=new U;Array.isArray(kr)||be(kr)||v(kr)?(kr=Ct.create(kr,34962,!1,!0),Sr.buffer=Ct.getBuffer(kr),Sr.size=Sr.buffer.dimension|0,Sr.normalized=!1,Sr.type=Sr.buffer.dtype,Sr.offset=0,Sr.stride=0,Sr.divisor=0,Sr.state=1,Yt.buffers.push(kr)):Ct.getBuffer(kr)?(Sr.buffer=Ct.getBuffer(kr),Sr.size=Sr.buffer.dimension|0,Sr.normalized=!1,Sr.type=Sr.buffer.dtype,Sr.offset=0,Sr.stride=0,Sr.divisor=0,Sr.state=1):Ct.getBuffer(kr.buffer)?(Sr.buffer=Ct.getBuffer(kr.buffer),Sr.size=(+kr.size||Sr.buffer.dimension)|0,Sr.normalized=!!kr.normalized||!1,Sr.type="type"in kr?Ke[kr.type]:Sr.buffer.dtype,Sr.offset=(kr.offset||0)|0,Sr.stride=(kr.stride||0)|0,Sr.divisor=(kr.divisor||0)|0,Sr.state=1):"x"in kr&&(Sr.x=+kr.x||0,Sr.y=+kr.y||0,Sr.z=+kr.z||0,Sr.w=+kr.w||0,Sr.state=2)}return Yt.refresh(),Xt}var Yt=new Oe;return lt.vaoCount+=1,Xt.destroy=function(){Yt.destroy()},Xt._vao=Yt,Xt._reglType="vao",Xt(zt)},getVAO:function(zt){return typeof zt=="function"&&zt._vao?zt._vao:null},destroyBuffer:function(zt){for(var Xt=0;Xt<yt.length;++Xt){var Yt=yt[Xt];Yt.buffer===zt&&(Ge.disableVertexAttribArray(Xt),Yt.buffer=null)}},setVAO:at.oes_vertex_array_object?Pt:$t,clear:at.oes_vertex_array_object?je:function(){}};return Oe.prototype.bindAttrs=function(){for(var zt=at.angle_instanced_arrays,Xt=this.attributes,Yt=0;Yt<Xt.length;++Yt){var Vt=Xt[Yt];Vt.buffer?(Ge.enableVertexAttribArray(Yt),Ge.bindBuffer(34962,Vt.buffer.buffer),Ge.vertexAttribPointer(Yt,Vt.size,Vt.type,Vt.normalized,Vt.stride,Vt.offset),zt&&zt.vertexAttribDivisorANGLE(Yt,Vt.divisor)):(Ge.disableVertexAttribArray(Yt),Ge.vertexAttrib4f(Yt,Vt.x,Vt.y,Vt.z,Vt.w))}for(zt=Xt.length;zt<wt;++zt)Ge.disableVertexAttribArray(zt)},Oe.prototype.refresh=function(){var zt=at.oes_vertex_array_object;zt&&(zt.bindVertexArrayOES(this.vao),this.bindAttrs(),Rt.currentVAO=this)},Oe.prototype.destroy=function(){if(this.vao){var zt=at.oes_vertex_array_object;this===Rt.currentVAO&&(Rt.currentVAO=null,zt.bindVertexArrayOES(null)),zt.deleteVertexArrayOES(this.vao),this.vao=null}kt[this.id]&&(delete kt[this.id],--lt.vaoCount)},Rt}function z(Ge,at,et,lt){function Ct(Rt,zt,Xt,Yt){this.name=Rt,this.id=zt,this.location=Xt,this.info=Yt}function Pt(Rt,zt){for(var Xt=0;Xt<Rt.length;++Xt)if(Rt[Xt].id===zt.id){Rt[Xt].location=zt.location;return}Rt.push(zt)}function $t(Rt,zt,Xt){Xt=Rt===35632?mt:wt;var Yt=Xt[zt];if(!Yt){var Vt=at.str(zt),Yt=Ge.createShader(Rt);Ge.shaderSource(Yt,Vt),Ge.compileShader(Yt),Xt[zt]=Yt}return Yt}function je(Rt,zt){this.id=kt++,this.fragId=Rt,this.vertId=zt,this.program=null,this.uniforms=[],this.attributes=[],lt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Oe(Rt,zt,Xt){var Yt;Yt=$t(35632,Rt.fragId);var Vt=$t(35633,Rt.vertId);if(zt=Rt.program=Ge.createProgram(),Ge.attachShader(zt,Yt),Ge.attachShader(zt,Vt),Xt)for(Yt=0;Yt<Xt.length;++Yt)Vt=Xt[Yt],Ge.bindAttribLocation(zt,Vt[0],Vt[1]);Ge.linkProgram(zt),Vt=Ge.getProgramParameter(zt,35718),lt.profile&&(Rt.stats.uniformsCount=Vt);var cr=Rt.uniforms;for(Yt=0;Yt<Vt;++Yt)if(Xt=Ge.getActiveUniform(zt,Yt))if(1<Xt.size)for(var Or=0;Or<Xt.size;++Or){var kr=Xt.name.replace("[0]","["+Or+"]");Pt(cr,new Ct(kr,at.id(kr),Ge.getUniformLocation(zt,kr),Xt))}else Pt(cr,new Ct(Xt.name,at.id(Xt.name),Ge.getUniformLocation(zt,Xt.name),Xt));for(Vt=Ge.getProgramParameter(zt,35721),lt.profile&&(Rt.stats.attributesCount=Vt),Rt=Rt.attributes,Yt=0;Yt<Vt;++Yt)(Xt=Ge.getActiveAttrib(zt,Yt))&&Pt(Rt,new Ct(Xt.name,at.id(Xt.name),Ge.getAttribLocation(zt,Xt.name),Xt))}var mt={},wt={},yt={},St=[],kt=0;return lt.profile&&(et.getMaxUniformsCount=function(){var Rt=0;return St.forEach(function(zt){zt.stats.uniformsCount>Rt&&(Rt=zt.stats.uniformsCount)}),Rt},et.getMaxAttributesCount=function(){var Rt=0;return St.forEach(function(zt){zt.stats.attributesCount>Rt&&(Rt=zt.stats.attributesCount)}),Rt}),{clear:function(){var Rt=Ge.deleteShader.bind(Ge);xe(mt).forEach(Rt),mt={},xe(wt).forEach(Rt),wt={},St.forEach(function(zt){Ge.deleteProgram(zt.program)}),St.length=0,yt={},et.shaderCount=0},program:function(Rt,zt,Xt,Yt){var Vt=yt[zt];Vt||(Vt=yt[zt]={});var cr=Vt[Rt];return cr&&!Yt?cr:(zt=new je(zt,Rt),et.shaderCount++,Oe(zt,Xt,Yt),cr||(Vt[Rt]=zt),St.push(zt),zt)},restore:function(){mt={},wt={};for(var Rt=0;Rt<St.length;++Rt)Oe(St[Rt],null,St[Rt].attributes.map(function(zt){return[zt.location,zt.name]}))},shader:$t,frag:-1,vert:-1}}function B(Ge,at,et,lt,Ct,Pt,$t){function je(mt){var wt;wt=at.next===null?5121:at.next.colorAttachments[0].texture._texture.type;var yt=0,St=0,kt=lt.framebufferWidth,Rt=lt.framebufferHeight,zt=null;return be(mt)?zt=mt:mt&&(yt=mt.x|0,St=mt.y|0,kt=(mt.width||lt.framebufferWidth-yt)|0,Rt=(mt.height||lt.framebufferHeight-St)|0,zt=mt.data||null),et(),mt=kt*Rt*4,zt||(wt===5121?zt=new Uint8Array(mt):wt===5126&&(zt=zt||new Float32Array(mt))),Ge.pixelStorei(3333,4),Ge.readPixels(yt,St,kt,Rt,6408,wt,zt),zt}function Oe(mt){var wt;return at.setFBO({framebuffer:mt.framebuffer},function(){wt=je(mt)}),wt}return function(mt){return mt&&"framebuffer"in mt?Oe(mt):je(mt)}}function H(Ge){return Array.prototype.slice.call(Ge)}function V(Ge){return H(Ge).join("")}function Z(){function Ge(){var je=[],Oe=[];return te(function(){je.push.apply(je,H(arguments))},{def:function(){var mt="v"+et++;return Oe.push(mt),0<arguments.length&&(je.push(mt,"="),je.push.apply(je,H(arguments)),je.push(";")),mt},toString:function(){return V([0<Oe.length?"var "+Oe.join(",")+";":"",V(je)])}})}function at(){function je(St,kt){mt(St,kt,"=",Oe.def(St,kt),";")}var Oe=Ge(),mt=Ge(),wt=Oe.toString,yt=mt.toString;return te(function(){Oe.apply(Oe,H(arguments))},{def:Oe.def,entry:Oe,exit:mt,save:je,set:function(St,kt,Rt){je(St,kt),Oe(St,kt,"=",Rt,";")},toString:function(){return wt()+yt()}})}var et=0,lt=[],Ct=[],Pt=Ge(),$t={};return{global:Pt,link:function(je){for(var Oe=0;Oe<Ct.length;++Oe)if(Ct[Oe]===je)return lt[Oe];return Oe="g"+et++,lt.push(Oe),Ct.push(je),Oe},block:Ge,proc:function(je,Oe){function mt(){var kt="a"+wt.length;return wt.push(kt),kt}var wt=[];Oe=Oe||0;for(var yt=0;yt<Oe;++yt)mt();var yt=at(),St=yt.toString;return $t[je]=te(yt,{arg:mt,toString:function(){return V(["function(",wt.join(),"){",St(),"}"])}})},scope:at,cond:function(){var je=V(arguments),Oe=at(),mt=at(),wt=Oe.toString,yt=mt.toString;return te(Oe,{then:function(){return Oe.apply(Oe,H(arguments)),this},else:function(){return mt.apply(mt,H(arguments)),this},toString:function(){var St=yt();return St&&(St="else{"+St+"}"),V(["if(",je,"){",wt(),"}",St])}})},compile:function(){var je=['"use strict";',Pt,"return {"];Object.keys($t).forEach(function(mt){je.push('"',mt,'":',$t[mt].toString(),",")}),je.push("}");var Oe=V(je).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,lt.concat(Oe)).apply(null,Ct)}}}function q(Ge){return Array.isArray(Ge)||be(Ge)||v(Ge)}function J(Ge){return Ge.sort(function(at,et){return at==="viewport"?-1:et==="viewport"?1:at<et?-1:1})}function ne(Ge,at,et,lt){this.thisDep=Ge,this.contextDep=at,this.propDep=et,this.append=lt}function ve(Ge){return Ge&&!(Ge.thisDep||Ge.contextDep||Ge.propDep)}function $(Ge){return new ne(!1,!1,!1,Ge)}function j(Ge,at){var et=Ge.type;return et===0?(et=Ge.data.length,new ne(!0,1<=et,2<=et,at)):et===4?(et=Ge.data,new ne(et.thisDep,et.contextDep,et.propDep,at)):new ne(et===3,et===2,et===1,at)}function ae(Ge,at,et,lt,Ct,Pt,$t,je,Oe,mt,wt,yt,St,kt,Rt){function zt(Ut){return Ut.replace(".","_")}function Xt(Ut,lr,Ir){var Kr=zt(Ut);Sn.push(Ut),yn[Kr]=Fr[Kr]=!!Ir,aa[Kr]=lr}function Yt(Ut,lr,Ir){var Kr=zt(Ut);Sn.push(Ut),Array.isArray(Ir)?(Fr[Kr]=Ir.slice(),yn[Kr]=Ir.slice()):Fr[Kr]=yn[Kr]=Ir,Xn[Kr]=lr}function Vt(){var Ut=Z(),lr=Ut.link,Ir=Ut.global;Ut.id=ba++,Ut.batchId="0";var Kr=lr(ra),Ur=Ut.shared={props:"a0"};Object.keys(ra).forEach(function(Tr){Ur[Tr]=Ir.def(Kr,".",Tr)});var Gr=Ut.next={},$r=Ut.current={};Object.keys(Xn).forEach(function(Tr){Array.isArray(Fr[Tr])&&(Gr[Tr]=Ir.def(Ur.next,".",Tr),$r[Tr]=Ir.def(Ur.current,".",Tr))});var Hr=Ut.constants={};Object.keys(na).forEach(function(Tr){Hr[Tr]=Ir.def(JSON.stringify(na[Tr]))}),Ut.invoke=function(Tr,hr){switch(hr.type){case 0:var Mn=["this",Ur.context,Ur.props,Ut.batchId];return Tr.def(lr(hr.data),".call(",Mn.slice(0,Math.max(hr.data.length+1,4)),")");case 1:return Tr.def(Ur.props,hr.data);case 2:return Tr.def(Ur.context,hr.data);case 3:return Tr.def("this",hr.data);case 4:return hr.data.append(Ut,Tr),hr.data.ref}},Ut.attribCache={};var fr={};return Ut.scopeAttrib=function(Tr){if(Tr=at.id(Tr),Tr in fr)return fr[Tr];var hr=mt.scope[Tr];return hr||(hr=mt.scope[Tr]=new ya),fr[Tr]=lr(hr)},Ut}function cr(Ut){var lr=Ut.static;Ut=Ut.dynamic;var Ir;if("profile"in lr){var Kr=!!lr.profile;Ir=$(function(Gr,$r){return Kr}),Ir.enable=Kr}else if("profile"in Ut){var Ur=Ut.profile;Ir=j(Ur,function(Gr,$r){return Gr.invoke($r,Ur)})}return Ir}function Or(Ut,lr){var Ir=Ut.static,Kr=Ut.dynamic;if("framebuffer"in Ir){var Ur=Ir.framebuffer;return Ur?(Ur=je.getFramebuffer(Ur),$(function($r,Hr){var fr=$r.link(Ur),Tr=$r.shared;return Hr.set(Tr.framebuffer,".next",fr),Tr=Tr.context,Hr.set(Tr,".framebufferWidth",fr+".width"),Hr.set(Tr,".framebufferHeight",fr+".height"),fr})):$(function($r,Hr){var fr=$r.shared;return Hr.set(fr.framebuffer,".next","null"),fr=fr.context,Hr.set(fr,".framebufferWidth",fr+".drawingBufferWidth"),Hr.set(fr,".framebufferHeight",fr+".drawingBufferHeight"),"null"})}if("framebuffer"in Kr){var Gr=Kr.framebuffer;return j(Gr,function($r,Hr){var hr=$r.invoke(Hr,Gr),fr=$r.shared,Tr=fr.framebuffer,hr=Hr.def(Tr,".getFramebuffer(",hr,")");return Hr.set(Tr,".next",hr),fr=fr.context,Hr.set(fr,".framebufferWidth",hr+"?"+hr+".width:"+fr+".drawingBufferWidth"),Hr.set(fr,".framebufferHeight",hr+"?"+hr+".height:"+fr+".drawingBufferHeight"),hr})}return null}function kr(Ut,lr,Ir){function Kr(Hr){if(Hr in Ur){var fr=Ur[Hr];Hr=!0;var Tr=fr.x|0,hr=fr.y|0,Mn,Cn;return"width"in fr?Mn=fr.width|0:Hr=!1,"height"in fr?Cn=fr.height|0:Hr=!1,new ne(!Hr&&lr&&lr.thisDep,!Hr&&lr&&lr.contextDep,!Hr&&lr&&lr.propDep,function(sa,Un){var Ea=sa.shared.context,Ga=Mn;"width"in fr||(Ga=Un.def(Ea,".","framebufferWidth","-",Tr));var ai=Cn;return"height"in fr||(ai=Un.def(Ea,".","framebufferHeight","-",hr)),[Tr,hr,Ga,ai]})}if(Hr in Gr){var jn=Gr[Hr];return Hr=j(jn,function(sa,Un){var Va=sa.invoke(Un,jn),Ea=sa.shared.context,Ga=Un.def(Va,".x|0"),ai=Un.def(Va,".y|0"),Ma=Un.def('"width" in ',Va,"?",Va,".width|0:","(",Ea,".","framebufferWidth","-",Ga,")"),Va=Un.def('"height" in ',Va,"?",Va,".height|0:","(",Ea,".","framebufferHeight","-",ai,")");return[Ga,ai,Ma,Va]}),lr&&(Hr.thisDep=Hr.thisDep||lr.thisDep,Hr.contextDep=Hr.contextDep||lr.contextDep,Hr.propDep=Hr.propDep||lr.propDep),Hr}return lr?new ne(lr.thisDep,lr.contextDep,lr.propDep,function(sa,Un){var Ea=sa.shared.context;return[0,0,Un.def(Ea,".","framebufferWidth"),Un.def(Ea,".","framebufferHeight")]}):null}var Ur=Ut.static,Gr=Ut.dynamic;if(Ut=Kr("viewport")){var $r=Ut;Ut=new ne(Ut.thisDep,Ut.contextDep,Ut.propDep,function(Hr,fr){var Tr=$r.append(Hr,fr),hr=Hr.shared.context;return fr.set(hr,".viewportWidth",Tr[2]),fr.set(hr,".viewportHeight",Tr[3]),Tr})}return{viewport:Ut,scissor_box:Kr("scissor.box")}}function Sr(Ut,lr){var Ir=Ut.static;if(typeof Ir.frag=="string"&&typeof Ir.vert=="string"){if(0<Object.keys(lr.dynamic).length)return null;var Ir=lr.static,Kr=Object.keys(Ir);if(0<Kr.length&&typeof Ir[Kr[0]]=="number"){for(var Ur=[],Gr=0;Gr<Kr.length;++Gr)Ur.push([Ir[Kr[Gr]]|0,Kr[Gr]]);return Ur}}return null}function vn(Ut,lr,Ir){function Kr(Tr){if(Tr in Ur){var hr=at.id(Ur[Tr]);return Tr=$(function(){return hr}),Tr.id=hr,Tr}if(Tr in Gr){var Mn=Gr[Tr];return j(Mn,function(Cn,jn){var sa=Cn.invoke(jn,Mn);return jn.def(Cn.shared.strings,".id(",sa,")")})}return null}var Ur=Ut.static,Gr=Ut.dynamic,$r=Kr("frag"),Hr=Kr("vert"),fr=null;return ve($r)&&ve(Hr)?(fr=wt.program(Hr.id,$r.id,null,Ir),Ut=$(function(Tr,hr){return Tr.link(fr)})):Ut=new ne($r&&$r.thisDep||Hr&&Hr.thisDep,$r&&$r.contextDep||Hr&&Hr.contextDep,$r&&$r.propDep||Hr&&Hr.propDep,function(Tr,hr){var Mn=Tr.shared.shader,Cn;Cn=$r?$r.append(Tr,hr):hr.def(Mn,".","frag");var jn;return jn=Hr?Hr.append(Tr,hr):hr.def(Mn,".","vert"),hr.def(Mn+".program("+jn+","+Cn+")")}),{frag:$r,vert:Hr,progVar:Ut,program:fr}}function Rn(Ut,lr){function Ir(Hr,fr){if(Hr in Kr){var Tr=Kr[Hr]|0;return $(function(Mn,Cn){return fr&&(Mn.OFFSET=Tr),Tr})}if(Hr in Ur){var hr=Ur[Hr];return j(hr,function(Mn,Cn){var jn=Mn.invoke(Cn,hr);return fr&&(Mn.OFFSET=jn),jn})}return fr&&Gr?$(function(Mn,Cn){return Mn.OFFSET="0",0}):null}var Kr=Ut.static,Ur=Ut.dynamic,Gr=function(){if("elements"in Kr){var Hr=Kr.elements;q(Hr)?Hr=Pt.getElements(Pt.create(Hr,!0)):Hr&&(Hr=Pt.getElements(Hr));var fr=$(function(hr,Mn){if(Hr){var Cn=hr.link(Hr);return hr.ELEMENTS=Cn}return hr.ELEMENTS=null});return fr.value=Hr,fr}if("elements"in Ur){var Tr=Ur.elements;return j(Tr,function(hr,Mn){var Cn=hr.shared,sa=Cn.isBufferArgs,Cn=Cn.elements,Un=hr.invoke(Mn,Tr),jn=Mn.def("null"),sa=Mn.def(sa,"(",Un,")"),Un=hr.cond(sa).then(jn,"=",Cn,".createStream(",Un,");").else(jn,"=",Cn,".getElements(",Un,");");return Mn.entry(Un),Mn.exit(hr.cond(sa).then(Cn,".destroyStream(",jn,");")),hr.ELEMENTS=jn})}return null}(),$r=Ir("offset",!0);return{elements:Gr,primitive:function(){if("primitive"in Kr){var Hr=Kr.primitive;return $(function(Tr,hr){return Ae[Hr]})}if("primitive"in Ur){var fr=Ur.primitive;return j(fr,function(Tr,hr){var Mn=Tr.constants.primTypes,Cn=Tr.invoke(hr,fr);return hr.def(Mn,"[",Cn,"]")})}return Gr?ve(Gr)?Gr.value?$(function(Tr,hr){return hr.def(Tr.ELEMENTS,".primType")}):$(function(){return 4}):new ne(Gr.thisDep,Gr.contextDep,Gr.propDep,function(Tr,hr){var Mn=Tr.ELEMENTS;return hr.def(Mn,"?",Mn,".primType:",4)}):null}(),count:function(){if("count"in Kr){var Hr=Kr.count|0;return $(function(){return Hr})}if("count"in Ur){var fr=Ur.count;return j(fr,function(Tr,hr){return Tr.invoke(hr,fr)})}return Gr?ve(Gr)?Gr?$r?new ne($r.thisDep,$r.contextDep,$r.propDep,function(Tr,hr){return hr.def(Tr.ELEMENTS,".vertCount-",Tr.OFFSET)}):$(function(Tr,hr){return hr.def(Tr.ELEMENTS,".vertCount")}):$(function(){return-1}):new ne(Gr.thisDep||$r.thisDep,Gr.contextDep||$r.contextDep,Gr.propDep||$r.propDep,function(Tr,hr){var Mn=Tr.ELEMENTS;return Tr.OFFSET?hr.def(Mn,"?",Mn,".vertCount-",Tr.OFFSET,":-1"):hr.def(Mn,"?",Mn,".vertCount:-1")}):null}(),instances:Ir("instances",!1),offset:$r}}function hn(Ut,lr){var Ir=Ut.static,Kr=Ut.dynamic,Ur={};return Sn.forEach(function(Gr){function $r(fr,Tr){if(Gr in Ir){var hr=fr(Ir[Gr]);Ur[Hr]=$(function(){return hr})}else if(Gr in Kr){var Mn=Kr[Gr];Ur[Hr]=j(Mn,function(Cn,jn){return Tr(Cn,jn,Cn.invoke(jn,Mn))})}}var Hr=zt(Gr);switch(Gr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return $r(function(fr){return fr},function(fr,Tr,hr){return hr});case"depth.func":return $r(function(fr){return Ie[fr]},function(fr,Tr,hr){return Tr.def(fr.constants.compareFuncs,"[",hr,"]")});case"depth.range":return $r(function(fr){return fr},function(fr,Tr,hr){return fr=Tr.def("+",hr,"[0]"),Tr=Tr.def("+",hr,"[1]"),[fr,Tr]});case"blend.func":return $r(function(fr){return[Me["srcRGB"in fr?fr.srcRGB:fr.src],Me["dstRGB"in fr?fr.dstRGB:fr.dst],Me["srcAlpha"in fr?fr.srcAlpha:fr.src],Me["dstAlpha"in fr?fr.dstAlpha:fr.dst]]},function(fr,Tr,hr){function Mn(Un,Ea){return Tr.def('"',Un,Ea,'" in ',hr,"?",hr,".",Un,Ea,":",hr,".",Un)}fr=fr.constants.blendFuncs;var Cn=Mn("src","RGB"),sa=Mn("dst","RGB"),Cn=Tr.def(fr,"[",Cn,"]"),jn=Tr.def(fr,"[",Mn("src","Alpha"),"]"),sa=Tr.def(fr,"[",sa,"]");return fr=Tr.def(fr,"[",Mn("dst","Alpha"),"]"),[Cn,sa,jn,fr]});case"blend.equation":return $r(function(fr){if(typeof fr=="string")return[Sa[fr],Sa[fr]];if(typeof fr=="object")return[Sa[fr.rgb],Sa[fr.alpha]]},function(fr,Tr,hr){var Mn=fr.constants.blendEquations,Cn=Tr.def(),jn=Tr.def();return fr=fr.cond("typeof ",hr,'==="string"'),fr.then(Cn,"=",jn,"=",Mn,"[",hr,"];"),fr.else(Cn,"=",Mn,"[",hr,".rgb];",jn,"=",Mn,"[",hr,".alpha];"),Tr(fr),[Cn,jn]});case"blend.color":return $r(function(fr){return i(4,function(Tr){return+fr[Tr]})},function(fr,Tr,hr){return i(4,function(Mn){return Tr.def("+",hr,"[",Mn,"]")})});case"stencil.mask":return $r(function(fr){return fr|0},function(fr,Tr,hr){return Tr.def(hr,"|0")});case"stencil.func":return $r(function(fr){return[Ie[fr.cmp||"keep"],fr.ref||0,"mask"in fr?fr.mask:-1]},function(fr,Tr,hr){fr=Tr.def('"cmp" in ',hr,"?",fr.constants.compareFuncs,"[",hr,".cmp]",":",7680);var Mn=Tr.def(hr,".ref|0");return Tr=Tr.def('"mask" in ',hr,"?",hr,".mask|0:-1"),[fr,Mn,Tr]});case"stencil.opFront":case"stencil.opBack":return $r(function(fr){return[Gr==="stencil.opBack"?1029:1028,He[fr.fail||"keep"],He[fr.zfail||"keep"],He[fr.zpass||"keep"]]},function(fr,Tr,hr){function Mn(jn){return Tr.def('"',jn,'" in ',hr,"?",Cn,"[",hr,".",jn,"]:",7680)}var Cn=fr.constants.stencilOps;return[Gr==="stencil.opBack"?1029:1028,Mn("fail"),Mn("zfail"),Mn("zpass")]});case"polygonOffset.offset":return $r(function(fr){return[fr.factor|0,fr.units|0]},function(fr,Tr,hr){return fr=Tr.def(hr,".factor|0"),Tr=Tr.def(hr,".units|0"),[fr,Tr]});case"cull.face":return $r(function(fr){var Tr=0;return fr==="front"?Tr=1028:fr==="back"&&(Tr=1029),Tr},function(fr,Tr,hr){return Tr.def(hr,'==="front"?',1028,":",1029)});case"lineWidth":return $r(function(fr){return fr},function(fr,Tr,hr){return hr});case"frontFace":return $r(function(fr){return Ye[fr]},function(fr,Tr,hr){return Tr.def(hr+'==="cw"?2304:2305')});case"colorMask":return $r(function(fr){return fr.map(function(Tr){return!!Tr})},function(fr,Tr,hr){return i(4,function(Mn){return"!!"+hr+"["+Mn+"]"})});case"sample.coverage":return $r(function(fr){return["value"in fr?fr.value:1,!!fr.invert]},function(fr,Tr,hr){return fr=Tr.def('"value" in ',hr,"?+",hr,".value:1"),Tr=Tr.def("!!",hr,".invert"),[fr,Tr]})}}),Ur}function An(Ut,lr){var Ir=Ut.static,Kr=Ut.dynamic,Ur={};return Object.keys(Ir).forEach(function(Gr){var $r=Ir[Gr],Hr;if(typeof $r=="number"||typeof $r=="boolean")Hr=$(function(){return $r});else if(typeof $r=="function"){var fr=$r._reglType;fr==="texture2d"||fr==="textureCube"?Hr=$(function(Tr){return Tr.link($r)}):(fr==="framebuffer"||fr==="framebufferCube")&&(Hr=$(function(Tr){return Tr.link($r.color[0])}))}else P($r)&&(Hr=$(function(Tr){return Tr.global.def("[",i($r.length,function(hr){return $r[hr]}),"]")}));Hr.value=$r,Ur[Gr]=Hr}),Object.keys(Kr).forEach(function(Gr){var $r=Kr[Gr];Ur[Gr]=j($r,function(Hr,fr){return Hr.invoke(fr,$r)})}),Ur}function En(Ut,lr){var Ir=Ut.static,Kr=Ut.dynamic,Ur={};return Object.keys(Ir).forEach(function(Gr){var $r=Ir[Gr],Hr=at.id(Gr),fr=new ya;if(q($r))fr.state=1,fr.buffer=Ct.getBuffer(Ct.create($r,34962,!1,!0)),fr.type=0;else{var Tr=Ct.getBuffer($r);if(Tr)fr.state=1,fr.buffer=Tr,fr.type=0;else if("constant"in $r){var hr=$r.constant;fr.buffer="null",fr.state=2,typeof hr=="number"?fr.x=hr:Ve.forEach(function(Ea,Ga){Ga<hr.length&&(fr[Ea]=hr[Ga])})}else{var Tr=q($r.buffer)?Ct.getBuffer(Ct.create($r.buffer,34962,!1,!0)):Ct.getBuffer($r.buffer),Mn=$r.offset|0,Cn=$r.stride|0,jn=$r.size|0,sa=!!$r.normalized,Un=0;"type"in $r&&(Un=Ke[$r.type]),$r=$r.divisor|0,fr.buffer=Tr,fr.state=1,fr.size=jn,fr.normalized=sa,fr.type=Un||Tr.dtype,fr.offset=Mn,fr.stride=Cn,fr.divisor=$r}}Ur[Gr]=$(function(Ea,Ga){var ai=Ea.attribCache;if(Hr in ai)return ai[Hr];var Ma={isStream:!1};return Object.keys(fr).forEach(function(Va){Ma[Va]=fr[Va]}),fr.buffer&&(Ma.buffer=Ea.link(fr.buffer),Ma.type=Ma.type||Ma.buffer+".dtype"),ai[Hr]=Ma})}),Object.keys(Kr).forEach(function(Gr){var $r=Kr[Gr];Ur[Gr]=j($r,function(Hr,fr){function Tr(ai){fr(sa[ai],"=",hr,".",ai,"|0;")}var hr=Hr.invoke(fr,$r),jn=Hr.shared,Mn=Hr.constants,Cn=jn.isBufferArgs,jn=jn.buffer,sa={isStream:fr.def(!1)},Un=new ya;Un.state=1,Object.keys(Un).forEach(function(ai){sa[ai]=fr.def(""+Un[ai])});var Ea=sa.buffer,Ga=sa.type;return fr("if(",Cn,"(",hr,")){",sa.isStream,"=true;",Ea,"=",jn,".createStream(",34962,",",hr,");",Ga,"=",Ea,".dtype;","}else{",Ea,"=",jn,".getBuffer(",hr,");","if(",Ea,"){",Ga,"=",Ea,".dtype;",'}else if("constant" in ',hr,"){",sa.state,"=",2,";","if(typeof "+hr+'.constant === "number"){',sa[Ve[0]],"=",hr,".constant;",Ve.slice(1).map(function(ai){return sa[ai]}).join("="),"=0;","}else{",Ve.map(function(ai,Ma){return sa[ai]+"="+hr+".constant.length>"+Ma+"?"+hr+".constant["+Ma+"]:0;"}).join(""),"}}else{","if(",Cn,"(",hr,".buffer)){",Ea,"=",jn,".createStream(",34962,",",hr,".buffer);","}else{",Ea,"=",jn,".getBuffer(",hr,".buffer);","}",Ga,'="type" in ',hr,"?",Mn.glTypes,"[",hr,".type]:",Ea,".dtype;",sa.normalized,"=!!",hr,".normalized;"),Tr("size"),Tr("offset"),Tr("stride"),Tr("divisor"),fr("}}"),fr.exit("if(",sa.isStream,"){",jn,".destroyStream(",Ea,");","}"),sa})}),Ur}function Mr(Ut,lr){var Ir=Ut.static,Kr=Ut.dynamic;if("vao"in Ir){var Ur=Ir.vao;return Ur!==null&&mt.getVAO(Ur)===null&&(Ur=mt.createVAO(Ur)),$(function($r){return $r.link(mt.getVAO(Ur))})}if("vao"in Kr){var Gr=Kr.vao;return j(Gr,function($r,Hr){var fr=$r.invoke(Hr,Gr);return Hr.def($r.shared.vao+".getVAO("+fr+")")})}return null}function xr(Ut){var lr=Ut.static,Ir=Ut.dynamic,Kr={};return Object.keys(lr).forEach(function(Ur){var Gr=lr[Ur];Kr[Ur]=$(function($r,Hr){return typeof Gr=="number"||typeof Gr=="boolean"?""+Gr:$r.link(Gr)})}),Object.keys(Ir).forEach(function(Ur){var Gr=Ir[Ur];Kr[Ur]=j(Gr,function($r,Hr){return $r.invoke(Hr,Gr)})}),Kr}function dn(Ut,lr,Ir,Kr,Ur){function Gr(Un){var Ea=Hr[Un];Ea&&(Tr[Un]=Ea)}var $r=Sr(Ut,lr),Cn=Or(Ut),Hr=kr(Ut,Cn),fr=Rn(Ut),Tr=hn(Ut),hr=vn(Ut,Ur,$r);Gr("viewport"),Gr(zt("scissor.box"));var Mn=0<Object.keys(Tr).length,Cn={framebuffer:Cn,draw:fr,shader:hr,state:Tr,dirty:Mn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Cn.profile=cr(Ut),Cn.uniforms=An(Ir),Cn.drawVAO=Cn.scopeVAO=Mr(Ut),!Cn.drawVAO&&hr.program&&!$r&&et.angle_instanced_arrays){var jn=!0;if(Ut=hr.program.attributes.map(function(Un){return Un=lr.static[Un],jn=jn&&!!Un,Un}),jn&&0<Ut.length){var sa=mt.getVAO(mt.createVAO(Ut));Cn.drawVAO=new ne(null,null,null,function(Un,Ea){return Un.link(sa)}),Cn.useVAO=!0}}return $r?Cn.useVAO=!0:Cn.attributes=En(lr),Cn.context=xr(Kr),Cn}function qr(Ut,lr,Ir){var Kr=Ut.shared.context,Ur=Ut.scope();Object.keys(Ir).forEach(function(Gr){lr.save(Kr,"."+Gr),Ur(Kr,".",Gr,"=",Ir[Gr].append(Ut,lr),";")}),lr(Ur)}function on(Ut,lr,Ir,Kr){var Hr=Ut.shared,Ur=Hr.gl,Gr=Hr.framebuffer,$r;Wr&&($r=lr.def(Hr.extensions,".webgl_draw_buffers"));var fr=Ut.constants,Hr=fr.drawBuffer,fr=fr.backBuffer;Ut=Ir?Ir.append(Ut,lr):lr.def(Gr,".next"),Kr||lr("if(",Ut,"!==",Gr,".cur){"),lr("if(",Ut,"){",Ur,".bindFramebuffer(",36160,",",Ut,".framebuffer);"),Wr&&lr($r,".drawBuffersWEBGL(",Hr,"[",Ut,".colorAttachments.length]);"),lr("}else{",Ur,".bindFramebuffer(",36160,",null);"),Wr&&lr($r,".drawBuffersWEBGL(",fr,");"),lr("}",Gr,".cur=",Ut,";"),Kr||lr("}")}function Vr(Ut,lr,Ir){var Kr=Ut.shared,Ur=Kr.gl,Gr=Ut.current,$r=Ut.next,Hr=Kr.current,fr=Kr.next,Tr=Ut.cond(Hr,".dirty");Sn.forEach(function(hr){if(hr=zt(hr),!(hr in Ir.state)){var Mn,Cn;if(hr in $r){Mn=$r[hr],Cn=Gr[hr];var jn=i(Fr[hr].length,function(sa){return Tr.def(Mn,"[",sa,"]")});Tr(Ut.cond(jn.map(function(sa,Un){return sa+"!=="+Cn+"["+Un+"]"}).join("||")).then(Ur,".",Xn[hr],"(",jn,");",jn.map(function(sa,Un){return Cn+"["+Un+"]="+sa}).join(";"),";"))}else Mn=Tr.def(fr,".",hr),jn=Ut.cond(Mn,"!==",Hr,".",hr),Tr(jn),hr in aa?jn(Ut.cond(Mn).then(Ur,".enable(",aa[hr],");").else(Ur,".disable(",aa[hr],");"),Hr,".",hr,"=",Mn,";"):jn(Ur,".",Xn[hr],"(",Mn,");",Hr,".",hr,"=",Mn,";")}}),Object.keys(Ir.state).length===0&&Tr(Hr,".dirty=false;"),lr(Tr)}function ln(Ut,lr,Ir,Kr){var Ur=Ut.shared,Gr=Ut.current,$r=Ur.current,Hr=Ur.gl;J(Object.keys(Ir)).forEach(function(fr){var Tr=Ir[fr];if(!Kr||Kr(Tr)){var hr=Tr.append(Ut,lr);if(aa[fr]){var Mn=aa[fr];ve(Tr)?hr?lr(Hr,".enable(",Mn,");"):lr(Hr,".disable(",Mn,");"):lr(Ut.cond(hr).then(Hr,".enable(",Mn,");").else(Hr,".disable(",Mn,");")),lr($r,".",fr,"=",hr,";")}else if(P(hr)){var Cn=Gr[fr];lr(Hr,".",Xn[fr],"(",hr,");",hr.map(function(jn,sa){return Cn+"["+sa+"]="+jn}).join(";"),";")}else lr(Hr,".",Xn[fr],"(",hr,");",$r,".",fr,"=",hr,";")}})}function cn(Ut,lr){ar&&(Ut.instancing=lr.def(Ut.shared.extensions,".angle_instanced_arrays"))}function Zr(Ut,lr,Ir,Kr,Ur){function Gr(){return typeof performance>"u"?"Date.now()":"performance.now()"}function $r(Un){jn=lr.def(),Un(jn,"=",Gr(),";"),typeof Ur=="string"?Un(hr,".count+=",Ur,";"):Un(hr,".count++;"),kt&&(Kr?(sa=lr.def(),Un(sa,"=",Cn,".getNumPendingQueries();")):Un(Cn,".beginQuery(",hr,");"))}function Hr(Un){Un(hr,".cpuTime+=",Gr(),"-",jn,";"),kt&&(Kr?Un(Cn,".pushScopeStats(",sa,",",Cn,".getNumPendingQueries(),",hr,");"):Un(Cn,".endQuery();"))}function fr(Un){var Ea=lr.def(Mn,".profile");lr(Mn,".profile=",Un,";"),lr.exit(Mn,".profile=",Ea,";")}var Tr=Ut.shared,hr=Ut.stats,Mn=Tr.current,Cn=Tr.timer;Ir=Ir.profile;var jn,sa;if(Ir){if(ve(Ir)){Ir.enable?($r(lr),Hr(lr.exit),fr("true")):fr("false");return}Ir=Ir.append(Ut,lr),fr(Ir)}else Ir=lr.def(Mn,".profile");Tr=Ut.block(),$r(Tr),lr("if(",Ir,"){",Tr,"}"),Ut=Ut.block(),Hr(Ut),lr.exit("if(",Ir,"){",Ut,"}")}function ht(Ut,lr,Ir,Kr,Ur){function Gr(fr){switch(fr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function $r(fr,Tr,hr){function Mn(){lr("if(!",Un,".buffer){",jn,".enableVertexAttribArray(",sa,");}");var Ma=hr.type,Va;Va=hr.size?lr.def(hr.size,"||",Tr):Tr,lr("if(",Un,".type!==",Ma,"||",Un,".size!==",Va,"||",ai.map(function(No){return Un+"."+No+"!=="+hr[No]}).join("||"),"){",jn,".bindBuffer(",34962,",",Ea,".buffer);",jn,".vertexAttribPointer(",[sa,Va,Ma,hr.normalized,hr.stride,hr.offset],");",Un,".type=",Ma,";",Un,".size=",Va,";",ai.map(function(No){return Un+"."+No+"="+hr[No]+";"}).join(""),"}"),ar&&(Ma=hr.divisor,lr("if(",Un,".divisor!==",Ma,"){",Ut.instancing,".vertexAttribDivisorANGLE(",[sa,Ma],");",Un,".divisor=",Ma,";}"))}function Cn(){lr("if(",Un,".buffer){",jn,".disableVertexAttribArray(",sa,");",Un,".buffer=null;","}if(",Ve.map(function(Ma,Va){return Un+"."+Ma+"!=="+Ga[Va]}).join("||"),"){",jn,".vertexAttrib4f(",sa,",",Ga,");",Ve.map(function(Ma,Va){return Un+"."+Ma+"="+Ga[Va]+";"}).join(""),"}")}var jn=Hr.gl,sa=lr.def(fr,".location"),Un=lr.def(Hr.attributes,"[",sa,"]");fr=hr.state;var Ea=hr.buffer,Ga=[hr.x,hr.y,hr.z,hr.w],ai=["buffer","normalized","offset","stride"];fr===1?Mn():fr===2?Cn():(lr("if(",fr,"===",1,"){"),Mn(),lr("}else{"),Cn(),lr("}"))}var Hr=Ut.shared;Kr.forEach(function(fr){var Tr=fr.name,hr=Ir.attributes[Tr],Mn;if(hr){if(!Ur(hr))return;Mn=hr.append(Ut,lr)}else{if(!Ur(ut))return;var Cn=Ut.scopeAttrib(Tr);Mn={},Object.keys(new ya).forEach(function(jn){Mn[jn]=lr.def(Cn,".",jn)})}$r(Ut.link(fr),Gr(fr.info.type),Mn)})}function Nt(Ut,lr,Ir,Kr,Ur){for(var Gr=Ut.shared,$r=Gr.gl,Hr,fr=0;fr<Kr.length;++fr){var Cn=Kr[fr],Tr=Cn.name,hr=Cn.info.type,Mn=Ir.uniforms[Tr],Cn=Ut.link(Cn)+".location",jn;if(Mn){if(!Ur(Mn))continue;if(ve(Mn)){if(Tr=Mn.value,hr===35678||hr===35680)hr=Ut.link(Tr._texture||Tr.color[0]._texture),lr($r,".uniform1i(",Cn,",",hr+".bind());"),lr.exit(hr,".unbind();");else if(hr===35674||hr===35675||hr===35676)Tr=Ut.global.def("new Float32Array(["+Array.prototype.slice.call(Tr)+"])"),Mn=2,hr===35675?Mn=3:hr===35676&&(Mn=4),lr($r,".uniformMatrix",Mn,"fv(",Cn,",false,",Tr,");");else{switch(hr){case 5126:Hr="1f";break;case 35664:Hr="2f";break;case 35665:Hr="3f";break;case 35666:Hr="4f";break;case 35670:Hr="1i";break;case 5124:Hr="1i";break;case 35671:Hr="2i";break;case 35667:Hr="2i";break;case 35672:Hr="3i";break;case 35668:Hr="3i";break;case 35673:Hr="4i";break;case 35669:Hr="4i"}lr($r,".uniform",Hr,"(",Cn,",",P(Tr)?Array.prototype.slice.call(Tr):Tr,");")}continue}else jn=Mn.append(Ut,lr)}else{if(!Ur(ut))continue;jn=lr.def(Gr.uniforms,"[",at.id(Tr),"]")}switch(hr===35678?lr("if(",jn,"&&",jn,'._reglType==="framebuffer"){',jn,"=",jn,".color[0];","}"):hr===35680&&lr("if(",jn,"&&",jn,'._reglType==="framebufferCube"){',jn,"=",jn,".color[0];","}"),Tr=1,hr){case 35678:case 35680:hr=lr.def(jn,"._texture"),lr($r,".uniform1i(",Cn,",",hr,".bind());"),lr.exit(hr,".unbind();");continue;case 5124:case 35670:Hr="1i";break;case 35667:case 35671:Hr="2i",Tr=2;break;case 35668:case 35672:Hr="3i",Tr=3;break;case 35669:case 35673:Hr="4i",Tr=4;break;case 5126:Hr="1f";break;case 35664:Hr="2f",Tr=2;break;case 35665:Hr="3f",Tr=3;break;case 35666:Hr="4f",Tr=4;break;case 35674:Hr="Matrix2fv";break;case 35675:Hr="Matrix3fv";break;case 35676:Hr="Matrix4fv"}if(lr($r,".uniform",Hr,"(",Cn,","),Hr.charAt(0)==="M"){var Cn=Math.pow(hr-35674+2,2),sa=Ut.global.def("new Float32Array(",Cn,")");lr("false,(Array.isArray(",jn,")||",jn," instanceof Float32Array)?",jn,":(",i(Cn,function(Ea){return sa+"["+Ea+"]="+jn+"["+Ea+"]"}),",",sa,")")}else 1<Tr?lr(i(Tr,function(Un){return jn+"["+Un+"]"})):lr(jn);lr(");")}}function rr(Ut,lr,Ir,Kr){function Ur(Ma){var Va=hr[Ma];return Va?Va.contextDep&&Kr.contextDynamic||Va.propDep?Va.append(Ut,Ir):Va.append(Ut,lr):lr.def(Tr,".",Ma)}function Gr(){function Ma(){Ir(Ea,".drawElementsInstancedANGLE(",[Cn,sa,Ga,jn+"<<(("+Ga+"-5121)>>1)",Un],");")}function Va(){Ir(Ea,".drawArraysInstancedANGLE(",[Cn,jn,sa,Un],");")}Mn?ai?Ma():(Ir("if(",Mn,"){"),Ma(),Ir("}else{"),Va(),Ir("}")):Va()}function $r(){function Ma(){Ir(fr+".drawElements("+[Cn,sa,Ga,jn+"<<(("+Ga+"-5121)>>1)"]+");")}function Va(){Ir(fr+".drawArrays("+[Cn,jn,sa]+");")}Mn?ai?Ma():(Ir("if(",Mn,"){"),Ma(),Ir("}else{"),Va(),Ir("}")):Va()}var Hr=Ut.shared,fr=Hr.gl,Tr=Hr.draw,hr=Kr.draw,Mn=function(){var Ma=hr.elements,Va=lr;return Ma?((Ma.contextDep&&Kr.contextDynamic||Ma.propDep)&&(Va=Ir),Ma=Ma.append(Ut,Va)):Ma=Va.def(Tr,".","elements"),Ma&&Va("if("+Ma+")"+fr+".bindBuffer(34963,"+Ma+".buffer.buffer);"),Ma}(),Cn=Ur("primitive"),jn=Ur("offset"),sa=function(){var Ma=hr.count,Va=lr;return Ma?((Ma.contextDep&&Kr.contextDynamic||Ma.propDep)&&(Va=Ir),Ma=Ma.append(Ut,Va)):Ma=Va.def(Tr,".","count"),Ma}();if(typeof sa=="number"){if(sa===0)return}else Ir("if(",sa,"){"),Ir.exit("}");var Un,Ea;ar&&(Un=Ur("instances"),Ea=Ut.instancing);var Ga=Mn+".type",ai=hr.elements&&ve(hr.elements);ar&&(typeof Un!="number"||0<=Un)?typeof Un=="string"?(Ir("if(",Un,">0){"),Gr(),Ir("}else if(",Un,"<0){"),$r(),Ir("}")):Gr():$r()}function mr(Ut,lr,Ir,Kr,Ur){return lr=Vt(),Ur=lr.proc("body",Ur),ar&&(lr.instancing=Ur.def(lr.shared.extensions,".angle_instanced_arrays")),Ut(lr,Ur,Ir,Kr),lr.compile().body}function Rr(Ut,lr,Ir,Kr){cn(Ut,lr),Ir.useVAO?Ir.drawVAO?lr(Ut.shared.vao,".setVAO(",Ir.drawVAO.append(Ut,lr),");"):lr(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(lr(Ut.shared.vao,".setVAO(null);"),ht(Ut,lr,Ir,Kr.attributes,function(){return!0})),Nt(Ut,lr,Ir,Kr.uniforms,function(){return!0}),rr(Ut,lr,lr,Ir)}function Er(Ut,lr){var Ir=Ut.proc("draw",1);cn(Ut,Ir),qr(Ut,Ir,lr.context),on(Ut,Ir,lr.framebuffer),Vr(Ut,Ir,lr),ln(Ut,Ir,lr.state),Zr(Ut,Ir,lr,!1,!0);var Kr=lr.shader.progVar.append(Ut,Ir);if(Ir(Ut.shared.gl,".useProgram(",Kr,".program);"),lr.shader.program)Rr(Ut,Ir,lr,lr.shader.program);else{Ir(Ut.shared.vao,".setVAO(null);");var Ur=Ut.global.def("{}"),Gr=Ir.def(Kr,".id"),$r=Ir.def(Ur,"[",Gr,"]");Ir(Ut.cond($r).then($r,".call(this,a0);").else($r,"=",Ur,"[",Gr,"]=",Ut.link(function(Hr){return mr(Rr,Ut,lr,Hr,1)}),"(",Kr,");",$r,".call(this,a0);"))}0<Object.keys(lr.state).length&&Ir(Ut.shared.current,".dirty=true;")}function Br(Ut,lr,Ir,Kr){function Ur(){return!0}Ut.batchId="a1",cn(Ut,lr),ht(Ut,lr,Ir,Kr.attributes,Ur),Nt(Ut,lr,Ir,Kr.uniforms,Ur),rr(Ut,lr,lr,Ir)}function Lr(Ut,lr,Ir,Kr){function Ur(Mn){return Mn.contextDep&&$r||Mn.propDep}function Gr(Mn){return!Ur(Mn)}cn(Ut,lr);var $r=Ir.contextDep,Hr=lr.def(),fr=lr.def();Ut.shared.props=fr,Ut.batchId=Hr;var Tr=Ut.scope(),hr=Ut.scope();lr(Tr.entry,"for(",Hr,"=0;",Hr,"<","a1",";++",Hr,"){",fr,"=","a0","[",Hr,"];",hr,"}",Tr.exit),Ir.needsContext&&qr(Ut,hr,Ir.context),Ir.needsFramebuffer&&on(Ut,hr,Ir.framebuffer),ln(Ut,hr,Ir.state,Ur),Ir.profile&&Ur(Ir.profile)&&Zr(Ut,hr,Ir,!1,!0),Kr?(Ir.useVAO?Ir.drawVAO?Ur(Ir.drawVAO)?hr(Ut.shared.vao,".setVAO(",Ir.drawVAO.append(Ut,hr),");"):Tr(Ut.shared.vao,".setVAO(",Ir.drawVAO.append(Ut,Tr),");"):Tr(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(Tr(Ut.shared.vao,".setVAO(null);"),ht(Ut,Tr,Ir,Kr.attributes,Gr),ht(Ut,hr,Ir,Kr.attributes,Ur)),Nt(Ut,Tr,Ir,Kr.uniforms,Gr),Nt(Ut,hr,Ir,Kr.uniforms,Ur),rr(Ut,Tr,hr,Ir)):(lr=Ut.global.def("{}"),Kr=Ir.shader.progVar.append(Ut,hr),fr=hr.def(Kr,".id"),Tr=hr.def(lr,"[",fr,"]"),hr(Ut.shared.gl,".useProgram(",Kr,".program);","if(!",Tr,"){",Tr,"=",lr,"[",fr,"]=",Ut.link(function(Mn){return mr(Br,Ut,Ir,Mn,2)}),"(",Kr,");}",Tr,".call(this,a0[",Hr,"],",Hr,");"))}function pn(Ut,lr){function Ir(Tr){return Tr.contextDep&&Ur||Tr.propDep}var Kr=Ut.proc("batch",2);Ut.batchId="0",cn(Ut,Kr);var Ur=!1,Gr=!0;Object.keys(lr.context).forEach(function(Tr){Ur=Ur||lr.context[Tr].propDep}),Ur||(qr(Ut,Kr,lr.context),Gr=!1);var $r=lr.framebuffer,Hr=!1;if($r?($r.propDep?Ur=Hr=!0:$r.contextDep&&Ur&&(Hr=!0),Hr||on(Ut,Kr,$r)):on(Ut,Kr,null),lr.state.viewport&&lr.state.viewport.propDep&&(Ur=!0),Vr(Ut,Kr,lr),ln(Ut,Kr,lr.state,function(Tr){return!Ir(Tr)}),lr.profile&&Ir(lr.profile)||Zr(Ut,Kr,lr,!1,"a1"),lr.contextDep=Ur,lr.needsContext=Gr,lr.needsFramebuffer=Hr,Gr=lr.shader.progVar,Gr.contextDep&&Ur||Gr.propDep)Lr(Ut,Kr,lr,null);else if(Gr=Gr.append(Ut,Kr),Kr(Ut.shared.gl,".useProgram(",Gr,".program);"),lr.shader.program)Lr(Ut,Kr,lr,lr.shader.program);else{Kr(Ut.shared.vao,".setVAO(null);");var $r=Ut.global.def("{}"),Hr=Kr.def(Gr,".id"),fr=Kr.def($r,"[",Hr,"]");Kr(Ut.cond(fr).then(fr,".call(this,a0,a1);").else(fr,"=",$r,"[",Hr,"]=",Ut.link(function(Mn){return mr(Lr,Ut,lr,Mn,2)}),"(",Gr,");",fr,".call(this,a0,a1);"))}0<Object.keys(lr.state).length&&Kr(Ut.shared.current,".dirty=true;")}function On(Ut,lr){function Ir($r){var Hr=lr.shader[$r];Hr&&Kr.set(Ur.shader,"."+$r,Hr.append(Ut,Kr))}var Kr=Ut.proc("scope",3);Ut.batchId="a2";var Ur=Ut.shared,Gr=Ur.current;qr(Ut,Kr,lr.context),lr.framebuffer&&lr.framebuffer.append(Ut,Kr),J(Object.keys(lr.state)).forEach(function($r){var Hr=lr.state[$r].append(Ut,Kr);P(Hr)?Hr.forEach(function(fr,Tr){Kr.set(Ut.next[$r],"["+Tr+"]",fr)}):Kr.set(Ur.next,"."+$r,Hr)}),Zr(Ut,Kr,lr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function($r){var Hr=lr.draw[$r];Hr&&Kr.set(Ur.draw,"."+$r,""+Hr.append(Ut,Kr))}),Object.keys(lr.uniforms).forEach(function($r){Kr.set(Ur.uniforms,"["+at.id($r)+"]",lr.uniforms[$r].append(Ut,Kr))}),Object.keys(lr.attributes).forEach(function($r){var Hr=lr.attributes[$r].append(Ut,Kr),fr=Ut.scopeAttrib($r);Object.keys(new ya).forEach(function(Tr){Kr.set(fr,"."+Tr,Hr[Tr])})}),lr.scopeVAO&&Kr.set(Ur.vao,".targetVAO",lr.scopeVAO.append(Ut,Kr)),Ir("vert"),Ir("frag"),0<Object.keys(lr.state).length&&(Kr(Gr,".dirty=true;"),Kr.exit(Gr,".dirty=true;")),Kr("a1(",Ut.shared.context,",a0,",Ut.batchId,");")}function Fn(Ut){if(typeof Ut=="object"&&!P(Ut)){for(var lr=Object.keys(Ut),Ir=0;Ir<lr.length;++Ir)if(ce.isDynamic(Ut[lr[Ir]]))return!0;return!1}}function Qn(Ut,lr,Ir){function Kr(Mn,Cn){$r.forEach(function(jn){var sa=Ur[jn];ce.isDynamic(sa)&&(sa=Mn.invoke(Cn,sa),Cn(hr,".",jn,"=",sa,";"))})}var Ur=lr.static[Ir];if(Ur&&Fn(Ur)){var Gr=Ut.global,$r=Object.keys(Ur),Hr=!1,fr=!1,Tr=!1,hr=Ut.global.def("{}");$r.forEach(function(Mn){var Cn=Ur[Mn];if(ce.isDynamic(Cn))typeof Cn=="function"&&(Cn=Ur[Mn]=ce.unbox(Cn)),Mn=j(Cn,null),Hr=Hr||Mn.thisDep,Tr=Tr||Mn.propDep,fr=fr||Mn.contextDep;else{switch(Gr(hr,".",Mn,"="),typeof Cn){case"number":Gr(Cn);break;case"string":Gr('"',Cn,'"');break;case"object":Array.isArray(Cn)&&Gr("[",Cn.join(),"]");break;default:Gr(Ut.link(Cn))}Gr(";")}}),lr.dynamic[Ir]=new ce.DynamicVariable(4,{thisDep:Hr,contextDep:fr,propDep:Tr,ref:hr,append:Kr}),delete lr.static[Ir]}}var ya=mt.Record,Sa={add:32774,subtract:32778,"reverse subtract":32779};et.ext_blend_minmax&&(Sa.min=32775,Sa.max=32776);var ar=et.angle_instanced_arrays,Wr=et.webgl_draw_buffers,Fr={dirty:!0,profile:Rt.profile},yn={},Sn=[],aa={},Xn={};Xt("dither",3024),Xt("blend.enable",3042),Yt("blend.color","blendColor",[0,0,0,0]),Yt("blend.equation","blendEquationSeparate",[32774,32774]),Yt("blend.func","blendFuncSeparate",[1,0,1,0]),Xt("depth.enable",2929,!0),Yt("depth.func","depthFunc",513),Yt("depth.range","depthRange",[0,1]),Yt("depth.mask","depthMask",!0),Yt("colorMask","colorMask",[!0,!0,!0,!0]),Xt("cull.enable",2884),Yt("cull.face","cullFace",1029),Yt("frontFace","frontFace",2305),Yt("lineWidth","lineWidth",1),Xt("polygonOffset.enable",32823),Yt("polygonOffset.offset","polygonOffset",[0,0]),Xt("sample.alpha",32926),Xt("sample.enable",32928),Yt("sample.coverage","sampleCoverage",[1,!1]),Xt("stencil.enable",2960),Yt("stencil.mask","stencilMask",-1),Yt("stencil.func","stencilFunc",[519,0,-1]),Yt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Yt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Xt("scissor.enable",3089),Yt("scissor.box","scissor",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]),Yt("viewport","viewport",[0,0,Ge.drawingBufferWidth,Ge.drawingBufferHeight]);var ra={gl:Ge,context:St,strings:at,next:yn,current:Fr,draw:yt,elements:Pt,buffer:Ct,shader:wt,attributes:mt.state,vao:mt,uniforms:Oe,framebuffer:je,extensions:et,timer:kt,isBufferArgs:q},na={primTypes:Ae,compareFuncs:Ie,blendFuncs:Me,blendEquations:Sa,stencilOps:He,glTypes:Ke,orientationType:Ye};Wr&&(na.backBuffer=[1029],na.drawBuffer=i(lt.maxDrawbuffers,function(Ut){return Ut===0?[0]:i(Ut,function(lr){return 36064+lr})}));var ba=0;return{next:yn,current:Fr,procs:function(){var Ut=Vt(),lr=Ut.proc("poll"),Ir=Ut.proc("refresh"),Kr=Ut.block();lr(Kr),Ir(Kr);var Ur=Ut.shared,Gr=Ur.gl,$r=Ur.next,Hr=Ur.current;Kr(Hr,".dirty=false;"),on(Ut,lr),on(Ut,Ir,null,!0);var fr;ar&&(fr=Ut.link(ar)),et.oes_vertex_array_object&&Ir(Ut.link(et.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Tr=0;Tr<lt.maxAttributes;++Tr){var hr=Ir.def(Ur.attributes,"[",Tr,"]"),Mn=Ut.cond(hr,".buffer");Mn.then(Gr,".enableVertexAttribArray(",Tr,");",Gr,".bindBuffer(",34962,",",hr,".buffer.buffer);",Gr,".vertexAttribPointer(",Tr,",",hr,".size,",hr,".type,",hr,".normalized,",hr,".stride,",hr,".offset);").else(Gr,".disableVertexAttribArray(",Tr,");",Gr,".vertexAttrib4f(",Tr,",",hr,".x,",hr,".y,",hr,".z,",hr,".w);",hr,".buffer=null;"),Ir(Mn),ar&&Ir(fr,".vertexAttribDivisorANGLE(",Tr,",",hr,".divisor);")}return Ir(Ut.shared.vao,".currentVAO=null;",Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"),Object.keys(aa).forEach(function(Cn){var jn=aa[Cn],sa=Kr.def($r,".",Cn),Un=Ut.block();Un("if(",sa,"){",Gr,".enable(",jn,")}else{",Gr,".disable(",jn,")}",Hr,".",Cn,"=",sa,";"),Ir(Un),lr("if(",sa,"!==",Hr,".",Cn,"){",Un,"}")}),Object.keys(Xn).forEach(function(Cn){var jn=Xn[Cn],sa=Fr[Cn],Un,Ea,Ga=Ut.block();Ga(Gr,".",jn,"("),P(sa)?(jn=sa.length,Un=Ut.global.def($r,".",Cn),Ea=Ut.global.def(Hr,".",Cn),Ga(i(jn,function(ai){return Un+"["+ai+"]"}),");",i(jn,function(ai){return Ea+"["+ai+"]="+Un+"["+ai+"];"}).join("")),lr("if(",i(jn,function(ai){return Un+"["+ai+"]!=="+Ea+"["+ai+"]"}).join("||"),"){",Ga,"}")):(Un=Kr.def($r,".",Cn),Ea=Kr.def(Hr,".",Cn),Ga(Un,");",Hr,".",Cn,"=",Un,";"),lr("if(",Un,"!==",Ea,"){",Ga,"}")),Ir(Ga)}),Ut.compile()}(),compile:function(Ut,lr,Ir,Kr,Ur){var Gr=Vt();return Gr.stats=Gr.link(Ur),Object.keys(lr.static).forEach(function($r){Qn(Gr,lr,$r)}),Qe.forEach(function($r){Qn(Gr,Ut,$r)}),Ir=dn(Ut,lr,Ir,Kr,Gr),Er(Gr,Ir),On(Gr,Ir),pn(Gr,Ir),Gr.compile()}}}function ie(Ge,at){for(var et=0;et<Ge.length;++et)if(Ge[et]===at)return et;return-1}var te=function(Ge,at){for(var et=Object.keys(at),lt=0;lt<et.length;++lt)Ge[et[lt]]=at[et[lt]];return Ge},re=0,ce={DynamicVariable:r,define:function(Ge,at){return new r(Ge,u(at+""))},isDynamic:function(Ge){return typeof Ge=="function"&&!Ge._reglType||Ge instanceof r},unbox:function(Ge,at){return typeof Ge=="function"?new r(0,Ge):Ge},accessor:u},pe={next:typeof requestAnimationFrame=="function"?function(Ge){return requestAnimationFrame(Ge)}:function(Ge){return setTimeout(Ge,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ge){return cancelAnimationFrame(Ge)}:clearTimeout},fe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},se=p();se.zero=p();var de=function(Ge,at){var et=1;at.ext_texture_filter_anisotropic&&(et=Ge.getParameter(34047));var lt=1,Ct=1;at.webgl_draw_buffers&&(lt=Ge.getParameter(34852),Ct=Ge.getParameter(36063));var Pt=!!at.oes_texture_float;if(Pt){Pt=Ge.createTexture(),Ge.bindTexture(3553,Pt),Ge.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var $t=Ge.createFramebuffer();if(Ge.bindFramebuffer(36160,$t),Ge.framebufferTexture2D(36160,36064,3553,Pt,0),Ge.bindTexture(3553,null),Ge.checkFramebufferStatus(36160)!==36053)Pt=!1;else{Ge.viewport(0,0,1,1),Ge.clearColor(1,0,0,1),Ge.clear(16384);var je=se.allocType(5126,4);Ge.readPixels(0,0,1,1,6408,5126,je),Ge.getError()?Pt=!1:(Ge.deleteFramebuffer($t),Ge.deleteTexture(Pt),Pt=je[0]===1),se.freeType(je)}}return je=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(je=Ge.createTexture(),$t=se.allocType(5121,36),Ge.activeTexture(33984),Ge.bindTexture(34067,je),Ge.texImage2D(34069,0,6408,3,3,0,6408,5121,$t),se.freeType($t),Ge.bindTexture(34067,null),Ge.deleteTexture(je),je=!Ge.getError()),{colorBits:[Ge.getParameter(3410),Ge.getParameter(3411),Ge.getParameter(3412),Ge.getParameter(3413)],depthBits:Ge.getParameter(3414),stencilBits:Ge.getParameter(3415),subpixelBits:Ge.getParameter(3408),extensions:Object.keys(at).filter(function(Oe){return!!at[Oe]}),maxAnisotropic:et,maxDrawbuffers:lt,maxColorAttachments:Ct,pointSizeDims:Ge.getParameter(33901),lineWidthDims:Ge.getParameter(33902),maxViewportDims:Ge.getParameter(3386),maxCombinedTextureUnits:Ge.getParameter(35661),maxCubeMapSize:Ge.getParameter(34076),maxRenderbufferSize:Ge.getParameter(34024),maxTextureUnits:Ge.getParameter(34930),maxTextureSize:Ge.getParameter(3379),maxAttributes:Ge.getParameter(34921),maxVertexUniforms:Ge.getParameter(36347),maxVertexTextureUnits:Ge.getParameter(35660),maxVaryingVectors:Ge.getParameter(36348),maxFragmentUniforms:Ge.getParameter(36349),glsl:Ge.getParameter(35724),renderer:Ge.getParameter(7937),vendor:Ge.getParameter(7936),version:Ge.getParameter(7938),readFloat:Pt,npotTextureCube:je}},be=function(Ge){return Ge instanceof Uint8Array||Ge instanceof Uint16Array||Ge instanceof Uint32Array||Ge instanceof Int8Array||Ge instanceof Int16Array||Ge instanceof Int32Array||Ge instanceof Float32Array||Ge instanceof Float64Array||Ge instanceof Uint8ClampedArray},xe=function(Ge){return Object.keys(Ge).map(function(at){return Ge[at]})},ke={shape:function(Ge){for(var at=[];Ge.length;Ge=Ge[0])at.push(Ge.length);return at},flatten:function(Ge,at,et,lt){var Ct=1;if(at.length)for(var Pt=0;Pt<at.length;++Pt)Ct*=at[Pt];else Ct=0;switch(et=lt||se.allocType(et,Ct),at.length){case 0:break;case 1:for(lt=at[0],at=0;at<lt;++at)et[at]=Ge[at];break;case 2:for(lt=at[0],at=at[1],Pt=Ct=0;Pt<lt;++Pt)for(var $t=Ge[Pt],je=0;je<at;++je)et[Ct++]=$t[je];break;case 3:m(Ge,at[0],at[1],at[2],et,0);break;default:b(Ge,at,0,et,0)}return et}},Re={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ke={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ze={dynamic:35048,stream:35040,static:35044},Je=ke.flatten,qe=ke.shape,Ee=[];Ee[5120]=1,Ee[5122]=2,Ee[5124]=4,Ee[5121]=1,Ee[5123]=2,Ee[5125]=4,Ee[5126]=4;var Ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Be=new Float32Array(1),$e=new Uint32Array(Be.buffer),xt=[9984,9986,9985,9987],bt=[0,6409,6410,6407,6408],Ne={};Ne[6409]=Ne[6406]=Ne[6402]=1,Ne[34041]=Ne[6410]=2,Ne[6407]=Ne[35904]=3,Ne[6408]=Ne[35906]=4;var st=L("HTMLCanvasElement"),_t=L("OffscreenCanvas"),Ot=L("CanvasRenderingContext2D"),Wt=L("ImageBitmap"),Et=L("HTMLImageElement"),jt=L("HTMLVideoElement"),Zt=Object.keys(Re).concat([st,_t,Ot,Wt,Et,jt]),Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2,Mt[5123]=2,Mt[5125]=4;var At=[];At[32854]=2,At[32855]=2,At[36194]=2,At[34041]=4,At[33776]=.5,At[33777]=.5,At[33778]=1,At[33779]=1,At[35986]=.5,At[35987]=1,At[34798]=1,At[35840]=.5,At[35841]=.25,At[35842]=.5,At[35843]=.25,At[36196]=.5;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[33189]=2,ft[36168]=1,ft[34041]=4,ft[35907]=4,ft[34836]=16,ft[34842]=8,ft[34843]=6;var ot=function(Ge,at,et,lt,Ct){function Pt(yt){this.id=mt++,this.refCount=1,this.renderbuffer=yt,this.format=32854,this.height=this.width=0,Ct.profile&&(this.stats={size:0})}function $t(yt){var St=yt.renderbuffer;Ge.bindRenderbuffer(36161,null),Ge.deleteRenderbuffer(St),yt.renderbuffer=null,yt.refCount=0,delete wt[yt.id],lt.renderbufferCount--}var je={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};at.ext_srgb&&(je.srgba=35907),at.ext_color_buffer_half_float&&(je.rgba16f=34842,je.rgb16f=34843),at.webgl_color_buffer_float&&(je.rgba32f=34836);var Oe=[];Object.keys(je).forEach(function(yt){Oe[je[yt]]=yt});var mt=0,wt={};return Pt.prototype.decRef=function(){0>=--this.refCount&&$t(this)},Ct.profile&&(lt.getTotalRenderbufferSize=function(){var yt=0;return Object.keys(wt).forEach(function(St){yt+=wt[St].stats.size}),yt}),{create:function(yt,St){function kt(zt,Xt){var Yt=0,Vt=0,cr=32854;if(typeof zt=="object"&&zt?("shape"in zt?(Vt=zt.shape,Yt=Vt[0]|0,Vt=Vt[1]|0):("radius"in zt&&(Yt=Vt=zt.radius|0),"width"in zt&&(Yt=zt.width|0),"height"in zt&&(Vt=zt.height|0)),"format"in zt&&(cr=je[zt.format])):typeof zt=="number"?(Yt=zt|0,Vt=typeof Xt=="number"?Xt|0:Yt):zt||(Yt=Vt=1),Yt!==Rt.width||Vt!==Rt.height||cr!==Rt.format)return kt.width=Rt.width=Yt,kt.height=Rt.height=Vt,Rt.format=cr,Ge.bindRenderbuffer(36161,Rt.renderbuffer),Ge.renderbufferStorage(36161,cr,Yt,Vt),Ct.profile&&(Rt.stats.size=ft[Rt.format]*Rt.width*Rt.height),kt.format=Oe[Rt.format],kt}var Rt=new Pt(Ge.createRenderbuffer());return wt[Rt.id]=Rt,lt.renderbufferCount++,kt(yt,St),kt.resize=function(zt,Xt){var Yt=zt|0,Vt=Xt|0||Yt;return Yt===Rt.width&&Vt===Rt.height||(kt.width=Rt.width=Yt,kt.height=Rt.height=Vt,Ge.bindRenderbuffer(36161,Rt.renderbuffer),Ge.renderbufferStorage(36161,Rt.format,Yt,Vt),Ct.profile&&(Rt.stats.size=ft[Rt.format]*Rt.width*Rt.height)),kt},kt._reglType="renderbuffer",kt._renderbuffer=Rt,Ct.profile&&(kt.stats=Rt.stats),kt.destroy=function(){Rt.decRef()},kt},clear:function(){xe(wt).forEach($t)},restore:function(){xe(wt).forEach(function(yt){yt.renderbuffer=Ge.createRenderbuffer(),Ge.bindRenderbuffer(36161,yt.renderbuffer),Ge.renderbufferStorage(36161,yt.format,yt.width,yt.height)}),Ge.bindRenderbuffer(36161,null)}}},Te=[];Te[6408]=4,Te[6407]=3;var Le=[];Le[5121]=1,Le[5126]=4,Le[36193]=2;var Ve=["x","y","z","w"],Qe="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Me={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ie={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},He={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ye={cw:2304,ccw:2305},ut=new ne(!1,!1,!1,function(){}),nt=function(Ge,at){function et(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function lt(wt,yt,St){var kt=$t.pop()||new et;kt.startQueryIndex=wt,kt.endQueryIndex=yt,kt.sum=0,kt.stats=St,je.push(kt)}if(!at.ext_disjoint_timer_query)return null;var Ct=[],Pt=[],$t=[],je=[],Oe=[],mt=[];return{beginQuery:function(wt){var yt=Ct.pop()||at.ext_disjoint_timer_query.createQueryEXT();at.ext_disjoint_timer_query.beginQueryEXT(35007,yt),Pt.push(yt),lt(Pt.length-1,Pt.length,wt)},endQuery:function(){at.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:lt,update:function(){var wt,yt;if(wt=Pt.length,wt!==0){mt.length=Math.max(mt.length,wt+1),Oe.length=Math.max(Oe.length,wt+1),Oe[0]=0;var St=mt[0]=0;for(yt=wt=0;yt<Pt.length;++yt){var kt=Pt[yt];at.ext_disjoint_timer_query.getQueryObjectEXT(kt,34919)?(St+=at.ext_disjoint_timer_query.getQueryObjectEXT(kt,34918),Ct.push(kt)):Pt[wt++]=kt,Oe[yt+1]=St,mt[yt+1]=wt}for(Pt.length=wt,yt=wt=0;yt<je.length;++yt){var St=je[yt],Rt=St.startQueryIndex,kt=St.endQueryIndex;St.sum+=Oe[kt]-Oe[Rt],Rt=mt[Rt],kt=mt[kt],kt===Rt?(St.stats.gpuTime+=St.sum/1e6,$t.push(St)):(St.startQueryIndex=Rt,St.endQueryIndex=kt,je[wt++]=St)}je.length=wt}},getNumPendingQueries:function(){return Pt.length},clear:function(){Ct.push.apply(Ct,Pt);for(var wt=0;wt<Ct.length;wt++)at.ext_disjoint_timer_query.deleteQueryEXT(Ct[wt]);Pt.length=0,Ct.length=0},restore:function(){Pt.length=0,Ct.length=0}}};return function(Ge){function at(){if(cn.length===0)Vt&&Vt.update(),rr=null;else{rr=pe.next(at),wt();for(var Rr=cn.length-1;0<=Rr;--Rr){var Er=cn[Rr];Er&&Er(Sr,null,0)}kt.flush(),Vt&&Vt.update()}}function et(){!rr&&0<cn.length&&(rr=pe.next(at))}function lt(){rr&&(pe.cancel(at),rr=null)}function Ct(Rr){Rr.preventDefault(),lt(),Zr.forEach(function(Er){Er()})}function Pt(Rr){kt.getError(),zt.restore(),En.restore(),Rn.restore(),Mr.restore(),xr.restore(),dn.restore(),hn.restore(),Vt&&Vt.restore(),qr.procs.refresh(),et(),ht.forEach(function(Er){Er()})}function $t(Rr){function Er(Wr){var Fr={},yn={};return Object.keys(Wr).forEach(function(Sn){var aa=Wr[Sn];ce.isDynamic(aa)?yn[Sn]=ce.unbox(aa,Sn):Fr[Sn]=aa}),{dynamic:yn,static:Fr}}function Br(Wr){for(;ar.length<Wr;)ar.push(null);return ar}var Fn=Er(Rr.context||{}),Lr=Er(Rr.uniforms||{}),pn=Er(Rr.attributes||{}),On=Er(function(Wr){function Fr(Sn){if(Sn in yn){var aa=yn[Sn];delete yn[Sn],Object.keys(aa).forEach(function(Xn){yn[Sn+"."+Xn]=aa[Xn]})}}var yn=te({},Wr);return delete yn.uniforms,delete yn.attributes,delete yn.context,delete yn.vao,"stencil"in yn&&yn.stencil.op&&(yn.stencil.opBack=yn.stencil.opFront=yn.stencil.op,delete yn.stencil.op),Fr("blend"),Fr("depth"),Fr("cull"),Fr("stencil"),Fr("polygonOffset"),Fr("scissor"),Fr("sample"),"vao"in Wr&&(yn.vao=Wr.vao),yn}(Rr));Rr={gpuTime:0,cpuTime:0,count:0};var Fn=qr.compile(On,pn,Lr,Fn,Rr),Qn=Fn.draw,ya=Fn.batch,Sa=Fn.scope,ar=[];return te(function(Wr,Fr){var yn;if(typeof Wr=="function")return Sa.call(this,null,Wr,0);if(typeof Fr=="function")if(typeof Wr=="number")for(yn=0;yn<Wr;++yn)Sa.call(this,null,Fr,yn);else if(Array.isArray(Wr))for(yn=0;yn<Wr.length;++yn)Sa.call(this,Wr[yn],Fr,yn);else return Sa.call(this,Wr,Fr,0);else if(typeof Wr=="number"){if(0<Wr)return ya.call(this,Br(Wr|0),Wr|0)}else if(Array.isArray(Wr)){if(Wr.length)return ya.call(this,Wr,Wr.length)}else return Qn.call(this,Wr)},{stats:Rr})}function je(Rr,Er){var Br=0;qr.procs.poll();var Lr=Er.color;Lr&&(kt.clearColor(+Lr[0]||0,+Lr[1]||0,+Lr[2]||0,+Lr[3]||0),Br|=16384),"depth"in Er&&(kt.clearDepth(+Er.depth),Br|=256),"stencil"in Er&&(kt.clearStencil(Er.stencil|0),Br|=1024),kt.clear(Br)}function Oe(Rr){return cn.push(Rr),et(),{cancel:function(){function Er(){var Lr=ie(cn,Er);cn[Lr]=cn[cn.length-1],--cn.length,0>=cn.length&&lt()}var Br=ie(cn,Rr);cn[Br]=Er}}}function mt(){var Rr=Vr.viewport,Er=Vr.scissor_box;Rr[0]=Rr[1]=Er[0]=Er[1]=0,Sr.viewportWidth=Sr.framebufferWidth=Sr.drawingBufferWidth=Rr[2]=Er[2]=kt.drawingBufferWidth,Sr.viewportHeight=Sr.framebufferHeight=Sr.drawingBufferHeight=Rr[3]=Er[3]=kt.drawingBufferHeight}function wt(){Sr.tick+=1,Sr.time=St(),mt(),qr.procs.poll()}function yt(){mt(),qr.procs.refresh(),Vt&&Vt.update()}function St(){return(fe()-cr)/1e3}if(Ge=l(Ge),!Ge)return null;var kt=Ge.gl,Rt=kt.getContextAttributes();kt.isContextLost();var zt=h(kt,Ge);if(!zt)return null;var on=c(),Xt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Yt=zt.extensions,Vt=nt(kt,Yt),cr=fe(),Or=kt.drawingBufferWidth,kr=kt.drawingBufferHeight,Sr={tick:0,time:0,viewportWidth:Or,viewportHeight:kr,framebufferWidth:Or,framebufferHeight:kr,drawingBufferWidth:Or,drawingBufferHeight:kr,pixelRatio:Ge.pixelRatio},vn=de(kt,Yt),Rn=g(kt,Xt,Ge,function(Rr){return hn.destroyBuffer(Rr)}),hn=Y(kt,Yt,vn,Xt,Rn),An=T(kt,Yt,Rn,Xt),En=z(kt,on,Xt,Ge),Mr=N(kt,Yt,vn,function(){qr.procs.poll()},Sr,Xt,Ge),xr=ot(kt,Yt,vn,Xt,Ge),dn=G(kt,Yt,vn,Mr,xr,Xt),qr=ae(kt,on,Yt,vn,Rn,An,Mr,dn,{},hn,En,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Sr,Vt,Ge),on=B(kt,dn,qr.procs.poll,Sr),Vr=qr.next,ln=kt.canvas,cn=[],Zr=[],ht=[],Nt=[Ge.onDestroy],rr=null;ln&&(ln.addEventListener("webglcontextlost",Ct,!1),ln.addEventListener("webglcontextrestored",Pt,!1));var mr=dn.setFBO=$t({framebuffer:ce.define.call(null,1,"framebuffer")});return yt(),Rt=te($t,{clear:function(Rr){if("framebuffer"in Rr)if(Rr.framebuffer&&Rr.framebuffer_reglType==="framebufferCube")for(var Er=0;6>Er;++Er)mr(te({framebuffer:Rr.framebuffer.faces[Er]},Rr),je);else mr(Rr,je);else je(null,Rr)},prop:ce.define.bind(null,1),context:ce.define.bind(null,2),this:ce.define.bind(null,3),draw:$t({}),buffer:function(Rr){return Rn.create(Rr,34962,!1,!1)},elements:function(Rr){return An.create(Rr,!1)},texture:Mr.create2D,cube:Mr.createCube,renderbuffer:xr.create,framebuffer:dn.create,framebufferCube:dn.createCube,vao:hn.createVAO,attributes:Rt,frame:Oe,on:function(Rr,Er){var Br;switch(Rr){case"frame":return Oe(Er);case"lost":Br=Zr;break;case"restore":Br=ht;break;case"destroy":Br=Nt}return Br.push(Er),{cancel:function(){for(var Lr=0;Lr<Br.length;++Lr)if(Br[Lr]===Er){Br[Lr]=Br[Br.length-1],Br.pop();break}}}},limits:vn,hasExtension:function(Rr){return 0<=vn.extensions.indexOf(Rr.toLowerCase())},read:on,destroy:function(){cn.length=0,lt(),ln&&(ln.removeEventListener("webglcontextlost",Ct),ln.removeEventListener("webglcontextrestored",Pt)),En.clear(),dn.clear(),xr.clear(),Mr.clear(),An.clear(),Rn.clear(),hn.clear(),Vt&&Vt.clear(),Nt.forEach(function(Rr){Rr()})},_gl:kt,_refresh:yt,poll:function(){wt(),Vt&&Vt.update()},now:St,stats:Xt}),Ge.onDone(null,Rt),Rt}})},{}],541:[function(e,d,S){var r="",a;d.exports=u;function u(c,t){if(typeof c!="string")throw new TypeError("expected a string");if(t===1)return c;if(t===2)return c+c;var f=c.length*t;if(a!==c||typeof a>"u")a=c,r="";else if(r.length>=f)return r.substr(0,f);for(;f>r.length&&t>1;)t&1&&(r+=c),t>>=1,c+=c;return r+=c,r=r.substr(0,f),r}},{}],542:[function(e,d,S){(function(r){(function(){d.exports=r.performance&&r.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],543:[function(e,d,S){d.exports=r;function r(a){for(var u=a.length,c=a[a.length-1],t=u,f=u-2;f>=0;--f){var n=c,o=a[f];c=n+o;var l=c-n,h=o-l;h&&(a[--t]=c,c=h)}for(var i=0,f=t;f<u;++f){var n=a[f],o=c;c=n+o;var l=c-n,h=o-l;h&&(a[i++]=h)}return a[i++]=c,a.length=i,a}},{}],544:[function(e,d,S){var r=e("two-product"),a=e("robust-sum"),u=e("robust-scale"),c=e("robust-compress"),t=6;function f(v,m){for(var b=new Array(v.length-1),y=1;y<v.length;++y)for(var x=b[y-1]=new Array(v.length-1),w=0,g=0;w<v.length;++w)w!==m&&(x[g++]=v[y][w]);return b}function n(v){for(var m=new Array(v),b=0;b<v;++b){m[b]=new Array(v);for(var y=0;y<v;++y)m[b][y]=["m[",b,"][",y,"]"].join("")}return m}function o(v){return v&1?"-":""}function l(v){if(v.length===1)return v[0];if(v.length===2)return["sum(",v[0],",",v[1],")"].join("");var m=v.length>>1;return["sum(",l(v.slice(0,m)),",",l(v.slice(m)),")"].join("")}function h(v){if(v.length===2)return["sum(prod(",v[0][0],",",v[1][1],"),prod(-",v[0][1],",",v[1][0],"))"].join("");for(var m=[],b=0;b<v.length;++b)m.push(["scale(",h(f(v,b)),",",o(b),v[0][b],")"].join(""));return l(m)}function i(v){var m=new Function("sum","scale","prod","compress",["function robustDeterminant",v,"(m){return compress(",h(n(v)),")};return robustDeterminant",v].join(""));return m(a,u,r,c)}var s=[function(){return[0]},function(m){return[m[0][0]]}];function p(){for(;s.length<t;)s.push(i(s.length));for(var v=[],m=["function robustDeterminant(m){switch(m.length){"],b=0;b<t;++b)v.push("det"+b),m.push("case ",b,":return det",b,"(m);");m.push("}	var det=CACHE[m.length];	if(!det)	det=CACHE[m.length]=gen(m.length);	return det(m);	}	return robustDeterminant"),v.push("CACHE","gen",m.join(""));var y=Function.apply(void 0,v);d.exports=y.apply(void 0,s.concat([s,i]));for(var b=0;b<s.length;++b)d.exports[b]=s[b]}p()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":582}],545:[function(e,d,S){var r=e("two-product"),a=e("robust-sum");d.exports=u;function u(c,t){for(var f=r(c[0],t[0]),n=1;n<c.length;++n)f=a(f,r(c[n],t[n]));return f}},{"robust-sum":553,"two-product":582}],546:[function(e,d,S){var r=e("two-product"),a=e("robust-sum"),u=e("robust-subtract"),c=e("robust-scale"),t=6;function f(g,T){for(var M=new Array(g.length-1),P=1;P<g.length;++P)for(var L=M[P-1]=new Array(g.length-1),I=0,C=0;I<g.length;++I)I!==T&&(L[C++]=g[P][I]);return M}function n(g){for(var T=new Array(g),M=0;M<g;++M){T[M]=new Array(g);for(var P=0;P<g;++P)T[M][P]=["m",P,"[",g-M-2,"]"].join("")}return T}function o(g){if(g.length===1)return g[0];if(g.length===2)return["sum(",g[0],",",g[1],")"].join("");var T=g.length>>1;return["sum(",o(g.slice(0,T)),",",o(g.slice(T)),")"].join("")}function l(g,T){if(g.charAt(0)==="m")if(T.charAt(0)==="w"){var M=g.split("[");return["w",T.substr(1),"m",M[0].substr(1)].join("")}else return["prod(",g,",",T,")"].join("");else return l(T,g)}function h(g){return g&!0?"-":""}function i(g){if(g.length===2)return[["diff(",l(g[0][0],g[1][1]),",",l(g[1][0],g[0][1]),")"].join("")];for(var T=[],M=0;M<g.length;++M)T.push(["scale(",o(i(f(g,M))),",",h(M),g[0][M],")"].join(""));return T}function s(g,T){for(var M=[],P=0;P<T-2;++P)M.push(["prod(m",g,"[",P,"],m",g,"[",P,"])"].join(""));return o(M)}function p(g){for(var T=[],M=[],P=n(g),L=0;L<g;++L)P[0][L]="1",P[g-1][L]="w"+L;for(var L=0;L<g;++L)(L&1)===0?T.push.apply(T,i(f(P,L))):M.push.apply(M,i(f(P,L)));for(var I=o(T),C=o(M),k="exactInSphere"+g,E=[],L=0;L<g;++L)E.push("m"+L);for(var R=["function ",k,"(",E.join(),"){"],L=0;L<g;++L){R.push("var w",L,"=",s(L,g),";");for(var O=0;O<g;++O)O!==L&&R.push("var w",L,"m",O,"=scale(w",L,",m",O,"[0]);")}R.push("var p=",I,",n=",C,",d=diff(p,n);return d[d.length-1];}return ",k);var N=new Function("sum","diff","prod","scale",R.join(""));return N(a,u,r,c)}function v(){return 0}function m(){return 0}function b(){return 0}var y=[v,m,b];function x(g){var T=y[g.length];return T||(T=y[g.length]=p(g.length)),T.apply(void 0,g)}function w(){for(;y.length<=t;)y.push(p(y.length));for(var g=[],T=["slow"],M=0;M<=t;++M)g.push("a"+M),T.push("o"+M);for(var P=["function testInSphere(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"],M=2;M<=t;++M)P.push("case ",M,":return o",M,"(",g.slice(0,M).join(),");");P.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),T.push(P.join(""));var L=Function.apply(void 0,T);d.exports=L.apply(void 0,[x].concat(y));for(var M=0;M<=t;++M)d.exports[M]=y[M]}w()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],547:[function(e,d,S){var r=e("robust-determinant"),a=6;function u(o){for(var l="robustLinearSolve"+o+"d",h=["function ",l,"(A,b){return ["],i=0;i<o;++i){h.push("det([");for(var s=0;s<o;++s){s>0&&h.push(","),h.push("[");for(var p=0;p<o;++p)p>0&&h.push(","),p===i?h.push("+b[",s,"]"):h.push("+A[",s,"][",p,"]");h.push("]")}h.push("]),")}h.push("det(A)]}return ",l);var v=new Function("det",h.join(""));return o<6?v(r[o]):v(r)}function c(){return[0]}function t(o,l){return[[l[0]],[o[0][0]]]}var f=[c,t];function n(){for(;f.length<a;)f.push(u(f.length));for(var o=[],l=["function dispatchLinearSolve(A,b){switch(A.length){"],h=0;h<a;++h)o.push("s"+h),l.push("case ",h,":return s",h,"(A,b);");l.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),o.push("CACHE","g",l.join(""));var i=Function.apply(void 0,o);d.exports=i.apply(void 0,f.concat([f,u]));for(var h=0;h<a;++h)d.exports[h]=f[h]}n()},{"robust-determinant":544}],548:[function(e,d,S){var r=e("two-product"),a=e("robust-sum"),u=e("robust-scale"),c=e("robust-subtract"),t=5,f=11102230246251565e-32,n=(3+16*f)*f,o=(7+56*f)*f;function l(g,T){for(var M=new Array(g.length-1),P=1;P<g.length;++P)for(var L=M[P-1]=new Array(g.length-1),I=0,C=0;I<g.length;++I)I!==T&&(L[C++]=g[P][I]);return M}function h(g){for(var T=new Array(g),M=0;M<g;++M){T[M]=new Array(g);for(var P=0;P<g;++P)T[M][P]=["m",P,"[",g-M-1,"]"].join("")}return T}function i(g){return g&1?"-":""}function s(g){if(g.length===1)return g[0];if(g.length===2)return["sum(",g[0],",",g[1],")"].join("");var T=g.length>>1;return["sum(",s(g.slice(0,T)),",",s(g.slice(T)),")"].join("")}function p(g){if(g.length===2)return[["sum(prod(",g[0][0],",",g[1][1],"),prod(-",g[0][1],",",g[1][0],"))"].join("")];for(var T=[],M=0;M<g.length;++M)T.push(["scale(",s(p(l(g,M))),",",i(M),g[0][M],")"].join(""));return T}function v(g){for(var T=[],M=[],P=h(g),L=[],I=0;I<g;++I)(I&1)===0?T.push.apply(T,p(l(P,I))):M.push.apply(M,p(l(P,I))),L.push("m"+I);var C=s(T),k=s(M),E="orientation"+g+"Exact",R=["function ",E,"(",L.join(),"){var p=",C,",n=",k,",d=sub(p,n);	return d[d.length-1];};return ",E].join(""),O=new Function("sum","prod","scale","sub",R);return O(a,r,u,c)}var m=v(3),b=v(4),y=[function(){return 0},function(){return 0},function(T,M){return M[0]-T[0]},function(T,M,P){var L=(T[1]-P[1])*(M[0]-P[0]),I=(T[0]-P[0])*(M[1]-P[1]),C=L-I,k;if(L>0){if(I<=0)return C;k=L+I}else if(L<0){if(I>=0)return C;k=-(L+I)}else return C;var E=n*k;return C>=E||C<=-E?C:m(T,M,P)},function(T,M,P,L){var I=T[0]-L[0],C=M[0]-L[0],k=P[0]-L[0],E=T[1]-L[1],R=M[1]-L[1],O=P[1]-L[1],N=T[2]-L[2],G=M[2]-L[2],U=P[2]-L[2],Y=C*O,z=k*R,B=k*E,H=I*O,V=I*R,Z=C*E,q=N*(Y-z)+G*(B-H)+U*(V-Z),J=(Math.abs(Y)+Math.abs(z))*Math.abs(N)+(Math.abs(B)+Math.abs(H))*Math.abs(G)+(Math.abs(V)+Math.abs(Z))*Math.abs(U),ne=o*J;return q>ne||-q>ne?q:b(T,M,P,L)}];function x(g){var T=y[g.length];return T||(T=y[g.length]=v(g.length)),T.apply(void 0,g)}function w(){for(;y.length<=t;)y.push(v(y.length));for(var g=[],T=["slow"],M=0;M<=t;++M)g.push("a"+M),T.push("o"+M);for(var P=["function getOrientation(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"],M=2;M<=t;++M)P.push("case ",M,":return o",M,"(",g.slice(0,M).join(),");");P.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),T.push(P.join(""));var L=Function.apply(void 0,T);d.exports=L.apply(void 0,[x].concat(y));for(var M=0;M<=t;++M)d.exports[M]=y[M]}w()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],549:[function(e,d,S){var r=e("robust-sum"),a=e("robust-scale");d.exports=u;function u(c,t){if(c.length===1)return a(t,c[0]);if(t.length===1)return a(c,t[0]);if(c.length===0||t.length===0)return[0];var f=[0];if(c.length<t.length)for(var n=0;n<c.length;++n)f=r(f,a(t,c[n]));else for(var n=0;n<t.length;++n)f=r(f,a(c,t[n]));return f}},{"robust-scale":550,"robust-sum":553}],550:[function(e,d,S){var r=e("two-product"),a=e("two-sum");d.exports=u;function u(c,t){var f=c.length;if(f===1){var n=r(c[0],t);return n[0]?n:[n[1]]}var o=new Array(2*f),l=[.1,.1],h=[.1,.1],i=0;r(c[0],t,l),l[0]&&(o[i++]=l[0]);for(var s=1;s<f;++s){r(c[s],t,h);var p=l[1];a(p,h[0],l),l[0]&&(o[i++]=l[0]);var v=h[1],m=l[1],b=v+m,y=b-v,x=m-y;l[1]=b,x&&(o[i++]=x)}return l[1]&&(o[i++]=l[1]),i===0&&(o[i++]=0),o.length=i,o}},{"two-product":582,"two-sum":583}],551:[function(e,d,S){d.exports=u;var r=e("robust-orientation")[3];function a(c,t,f,n){for(var o=0;o<2;++o){var l=c[o],h=t[o],i=Math.min(l,h),s=Math.max(l,h),p=f[o],v=n[o],m=Math.min(p,v),b=Math.max(p,v);if(b<i||s<m)return!1}return!0}function u(c,t,f,n){var o=r(c,f,n),l=r(t,f,n);if(o>0&&l>0||o<0&&l<0)return!1;var h=r(f,c,t),i=r(n,c,t);return h>0&&i>0||h<0&&i<0?!1:o===0&&l===0&&h===0&&i===0?a(c,t,f,n):!0}},{"robust-orientation":548}],552:[function(e,d,S){d.exports=a;function r(u,c){var t=u+c,f=t-u,n=t-f,o=c-f,l=u-n,h=l+o;return h?[h,t]:[t]}function a(u,c){var t=u.length|0,f=c.length|0;if(t===1&&f===1)return r(u[0],-c[0]);var n=t+f,o=new Array(n),l=0,h=0,i=0,s=Math.abs,p=u[h],v=s(p),m=-c[i],b=s(m),y,x;v<b?(x=p,h+=1,h<t&&(p=u[h],v=s(p))):(x=m,i+=1,i<f&&(m=-c[i],b=s(m))),h<t&&v<b||i>=f?(y=p,h+=1,h<t&&(p=u[h],v=s(p))):(y=m,i+=1,i<f&&(m=-c[i],b=s(m)));for(var w=y+x,g=w-y,T=x-g,M=T,P=w,L,I,C,k,E;h<t&&i<f;)v<b?(y=p,h+=1,h<t&&(p=u[h],v=s(p))):(y=m,i+=1,i<f&&(m=-c[i],b=s(m))),x=M,w=y+x,g=w-y,T=x-g,T&&(o[l++]=T),L=P+w,I=L-P,C=L-I,k=w-I,E=P-C,M=E+k,P=L;for(;h<t;)y=p,x=M,w=y+x,g=w-y,T=x-g,T&&(o[l++]=T),L=P+w,I=L-P,C=L-I,k=w-I,E=P-C,M=E+k,P=L,h+=1,h<t&&(p=u[h]);for(;i<f;)y=m,x=M,w=y+x,g=w-y,T=x-g,T&&(o[l++]=T),L=P+w,I=L-P,C=L-I,k=w-I,E=P-C,M=E+k,P=L,i+=1,i<f&&(m=-c[i]);return M&&(o[l++]=M),P&&(o[l++]=P),l||(o[l++]=0),o.length=l,o}},{}],553:[function(e,d,S){d.exports=a;function r(u,c){var t=u+c,f=t-u,n=t-f,o=c-f,l=u-n,h=l+o;return h?[h,t]:[t]}function a(u,c){var t=u.length|0,f=c.length|0;if(t===1&&f===1)return r(u[0],c[0]);var n=t+f,o=new Array(n),l=0,h=0,i=0,s=Math.abs,p=u[h],v=s(p),m=c[i],b=s(m),y,x;v<b?(x=p,h+=1,h<t&&(p=u[h],v=s(p))):(x=m,i+=1,i<f&&(m=c[i],b=s(m))),h<t&&v<b||i>=f?(y=p,h+=1,h<t&&(p=u[h],v=s(p))):(y=m,i+=1,i<f&&(m=c[i],b=s(m)));for(var w=y+x,g=w-y,T=x-g,M=T,P=w,L,I,C,k,E;h<t&&i<f;)v<b?(y=p,h+=1,h<t&&(p=u[h],v=s(p))):(y=m,i+=1,i<f&&(m=c[i],b=s(m))),x=M,w=y+x,g=w-y,T=x-g,T&&(o[l++]=T),L=P+w,I=L-P,C=L-I,k=w-I,E=P-C,M=E+k,P=L;for(;h<t;)y=p,x=M,w=y+x,g=w-y,T=x-g,T&&(o[l++]=T),L=P+w,I=L-P,C=L-I,k=w-I,E=P-C,M=E+k,P=L,h+=1,h<t&&(p=u[h]);for(;i<f;)y=m,x=M,w=y+x,g=w-y,T=x-g,T&&(o[l++]=T),L=P+w,I=L-P,C=L-I,k=w-I,E=P-C,M=E+k,P=L,i+=1,i<f&&(m=c[i]);return M&&(o[l++]=M),P&&(o[l++]=P),l||(o[l++]=0),o.length=l,o}},{}],554:[function(e,d,S){d.exports=function(a){return a<0?-1:a>0?1:0}},{}],555:[function(e,d,S){d.exports=u;var r=e("boundary-cells"),a=e("reduce-simplicial-complex");function u(c){return a(r(c))}},{"boundary-cells":100,"reduce-simplicial-complex":533}],556:[function(e,d,S){d.exports=i;var r=e("ndarray"),a=e("typedarray-pool"),u=e("ndarray-sort"),c=e("./lib/codegen");function t(s){for(var p=s.length,v=0,m=0;m<p;++m)v=Math.max(v,s[m].length)|0;return v-1}function f(s,p){for(var v=s.length,m=a.mallocUint8(v),b=0;b<v;++b)m[b]=s[b]<p|0;return m}function n(s,p){for(var v=s.length,m=p*(p+1)/2*v|0,b=a.mallocUint32(m*2),y=0,x=0;x<v;++x)for(var w=s[x],p=w.length,g=0;g<p;++g)for(var T=0;T<g;++T){var M=w[T],P=w[g];b[y++]=Math.min(M,P)|0,b[y++]=Math.max(M,P)|0}var L=y/2|0;u(r(b,[L,2]));for(var I=2,x=2;x<y;x+=2)b[x-2]===b[x]&&b[x-1]===b[x+1]||(b[I++]=b[x],b[I++]=b[x+1]);return r(b,[I/2|0,2])}function o(s,p,v,m){for(var b=s.data,y=s.shape[0],x=a.mallocDouble(y),w=0,g=0;g<y;++g){var T=b[2*g],M=b[2*g+1];if(v[T]!==v[M]){var P=p[T],L=p[M];b[2*w]=T,b[2*w+1]=M,x[w++]=(L-m)/(L-P)}}return s.shape[0]=w,r(x,[w])}function l(s,p){var v=a.mallocInt32(p*2),m=s.shape[0],b=s.data;v[0]=0;for(var y=0,x=0;x<m;++x){var w=b[2*x];if(w!==y){for(v[2*y+1]=x;++y<w;)v[2*y]=x,v[2*y+1]=x;v[2*y]=x}}for(v[2*y+1]=m;++y<p;)v[2*y]=v[2*y+1]=m;return v}function h(s){for(var p=s.shape[0]|0,v=s.data,m=new Array(p),b=0;b<p;++b)m[b]=[v[2*b],v[2*b+1]];return m}function i(s,p,v,m){v=v||0,typeof m>"u"&&(m=t(s));var b=s.length;if(b===0||m<1)return{cells:[],vertexIds:[],vertexWeights:[]};var y=f(p,+v),x=n(s,m),w=o(x,p,y,+v),g=l(x,p.length|0),T=c(m)(s,x.data,g,y),M=h(x),P=[].slice.call(w.data,0,w.shape[0]);return a.free(y),a.free(x.data),a.free(w.data),a.free(g),{cells:T,vertexIds:M,vertexWeights:P}}},{"./lib/codegen":557,ndarray:495,"ndarray-sort":494,"typedarray-pool":595}],557:[function(e,d,S){d.exports=t;var r=e("typedarray-pool"),a=e("marching-simplex-table"),u={};function c(f){var n=0,o=new Array(f+1);o[0]=[[]];for(var l=1;l<=f;++l)for(var h=o[l]=a(l),i=0;i<h.length;++i)n=Math.max(n,h[l].length);var s=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",f,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function p(b){if(!(b.length<=0)){s.push("R.push(");for(var y=0;y<b.length;++y){var x=b[y];y>0&&s.push(","),s.push("[");for(var w=0;w<x.length;++w){var g=x[w];w>0&&s.push(","),s.push("B(C,E,c[",g[0],"],c[",g[1],"])")}s.push("]")}s.push(");")}}for(var l=f+1;l>1;--l){l<f+1&&s.push("else "),s.push("if(l===",l,"){");for(var v=[],i=0;i<l;++i)v.push("(S[c["+i+"]]<<"+i+")");s.push("var M=",v.join("+"),";if(M===0||M===",(1<<l)-1,"){continue}switch(M){");for(var h=o[l-1],i=0;i<h.length;++i)s.push("case ",i,":"),p(h[i]),s.push("break;");s.push("}}")}s.push("}return R;};return getContour",f,"d");var m=new Function("pool",s.join(""));return m(r)}function t(f){var n=u[f];return n||(n=u[f]=c(f)),n}},{"marching-simplex-table":474,"typedarray-pool":595}],558:[function(e,d,S){var r=e("bit-twiddle"),a=e("union-find");function u(w){for(var g=0,T=Math.max,M=0,P=w.length;M<P;++M)g=T(g,w[M].length);return g-1}S.dimension=u;function c(w){for(var g=-1,T=Math.max,M=0,P=w.length;M<P;++M)for(var L=w[M],I=0,C=L.length;I<C;++I)g=T(g,L[I]);return g+1}S.countVertices=c;function t(w){for(var g=new Array(w.length),T=0,M=w.length;T<M;++T)g[T]=w[T].slice(0);return g}S.cloneCells=t;function f(w,g){var T=w.length,M=w.length-g.length,P=Math.min;if(M)return M;switch(T){case 0:return 0;case 1:return w[0]-g[0];case 2:var E=w[0]+w[1]-g[0]-g[1];return E||P(w[0],w[1])-P(g[0],g[1]);case 3:var L=w[0]+w[1],I=g[0]+g[1];if(E=L+w[2]-(I+g[2]),E)return E;var C=P(w[0],w[1]),k=P(g[0],g[1]),E=P(C,w[2])-P(k,g[2]);return E||P(C+w[2],L)-P(k+g[2],I);default:var R=w.slice(0);R.sort();var O=g.slice(0);O.sort();for(var N=0;N<T;++N)if(M=R[N]-O[N],M)return M;return 0}}S.compareCells=f;function n(w,g){return f(w[0],g[0])}function o(w,g){if(g){for(var T=w.length,M=new Array(T),P=0;P<T;++P)M[P]=[w[P],g[P]];M.sort(n);for(var P=0;P<T;++P)w[P]=M[P][0],g[P]=M[P][1];return w}else return w.sort(f),w}S.normalize=o;function l(w){if(w.length===0)return[];for(var g=1,T=w.length,M=1;M<T;++M){var P=w[M];if(f(P,w[M-1])){if(M===g){g++;continue}w[g++]=P}}return w.length=g,w}S.unique=l;function h(w,g){for(var T=0,M=w.length-1,P=-1;T<=M;){var L=T+M>>1,I=f(w[L],g);I<=0?(I===0&&(P=L),T=L+1):I>0&&(M=L-1)}return P}S.findCell=h;function i(w,g){for(var T=new Array(w.length),M=0,P=T.length;M<P;++M)T[M]=[];for(var L=[],M=0,I=g.length;M<I;++M)for(var C=g[M],k=C.length,E=1,R=1<<k;E<R;++E){L.length=r.popCount(E);for(var O=0,N=0;N<k;++N)E&1<<N&&(L[O++]=C[N]);var G=h(w,L);if(!(G<0))for(;T[G++].push(M),!(G>=w.length||f(w[G],L)!==0););}return T}S.incidence=i;function s(w,g){if(!g)return i(l(v(w,0)),w);for(var T=new Array(g),M=0;M<g;++M)T[M]=[];for(var M=0,P=w.length;M<P;++M)for(var L=w[M],I=0,C=L.length;I<C;++I)T[L[I]].push(M);return T}S.dual=s;function p(w){for(var g=[],T=0,M=w.length;T<M;++T)for(var P=w[T],L=P.length|0,I=1,C=1<<L;I<C;++I){for(var k=[],E=0;E<L;++E)I>>>E&1&&k.push(P[E]);g.push(k)}return o(g)}S.explode=p;function v(w,g){if(g<0)return[];for(var T=[],M=(1<<g+1)-1,P=0;P<w.length;++P)for(var L=w[P],I=M;I<1<<L.length;I=r.nextCombination(I)){for(var C=new Array(g+1),k=0,E=0;E<L.length;++E)I&1<<E&&(C[k++]=L[E]);T.push(C)}return o(T)}S.skeleton=v;function m(w){for(var g=[],T=0,M=w.length;T<M;++T)for(var P=w[T],L=0,I=P.length;L<I;++L){for(var C=new Array(P.length-1),k=0,E=0;k<I;++k)k!==L&&(C[E++]=P[k]);g.push(C)}return o(g)}S.boundary=m;function b(w,g){for(var T=new a(g),M=0;M<w.length;++M)for(var P=w[M],L=0;L<P.length;++L)for(var I=L+1;I<P.length;++I)T.link(P[L],P[I]);for(var C=[],k=T.ranks,M=0;M<k.length;++M)k[M]=-1;for(var M=0;M<w.length;++M){var E=T.find(w[M][0]);k[E]<0?(k[E]=C.length,C.push([w[M].slice(0)])):C[k[E]].push(w[M].slice(0))}return C}function y(w){for(var g=l(o(v(w,0))),T=new a(g.length),M=0;M<w.length;++M)for(var P=w[M],L=0;L<P.length;++L)for(var I=h(g,[P[L]]),C=L+1;C<P.length;++C)T.link(I,h(g,[P[C]]));for(var k=[],E=T.ranks,M=0;M<E.length;++M)E[M]=-1;for(var M=0;M<w.length;++M){var R=T.find(h(g,[w[M][0]]));E[R]<0?(E[R]=k.length,k.push([w[M].slice(0)])):k[E[R]].push(w[M].slice(0))}return k}function x(w,g){return g?b(w,g):y(w)}S.connectedComponents=x},{"bit-twiddle":97,"union-find":596}],559:[function(e,d,S){arguments[4][97][0].apply(S,arguments)},{dup:97}],560:[function(e,d,S){arguments[4][558][0].apply(S,arguments)},{"bit-twiddle":559,dup:558,"union-find":561}],561:[function(e,d,S){d.exports=r;function r(a){this.roots=new Array(a),this.ranks=new Array(a);for(var u=0;u<a;++u)this.roots[u]=u,this.ranks[u]=0}r.prototype.length=function(){return this.roots.length},r.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},r.prototype.find=function(a){for(var u=this.roots;u[a]!==a;){var c=u[a];u[a]=u[c],a=c}return a},r.prototype.link=function(a,u){var c=this.find(a),t=this.find(u);if(c!==t){var f=this.ranks,n=this.roots,o=f[c],l=f[t];o<l?n[c]=t:l<o?n[t]=c:(n[t]=c,++f[c])}}},{}],562:[function(e,d,S){d.exports=c;var r=e("robust-orientation"),a=e("simplicial-complex");function u(t,f,n){var o=Math.abs(r(t,f,n)),l=Math.sqrt(Math.pow(f[0]-n[0],2)+Math.pow(f[1]-n[1],2));return o/l}function c(t,f,n){for(var o=f.length,l=t.length,h=new Array(o),i=new Array(o),s=new Array(o),p=new Array(o),v=0;v<o;++v)h[v]=i[v]=-1,s[v]=1/0,p[v]=!1;for(var v=0;v<l;++v){var m=t[v];if(m.length!==2)throw new Error("Input must be a graph");var b=m[1],y=m[0];i[y]!==-1?i[y]=-2:i[y]=b,h[b]!==-1?h[b]=-2:h[b]=y}function x(z){if(p[z])return 1/0;var B=h[z],H=i[z];return B<0||H<0?1/0:u(f[z],f[B],f[H])}function w(z,B){var H=k[z],V=k[B];k[z]=V,k[B]=H,E[H]=B,E[V]=z}function g(z){return s[k[z]]}function T(z){return z&1?z-1>>1:(z>>1)-1}function M(z){for(var B=g(z);;){var H=B,V=2*z+1,Z=2*(z+1),q=z;if(V<O){var J=g(V);J<H&&(q=V,H=J)}if(Z<O){var ne=g(Z);ne<H&&(q=Z)}if(q===z)return z;w(z,q),z=q}}function P(z){for(var B=g(z);z>0;){var H=T(z);if(H>=0){var V=g(H);if(B<V){w(z,H),z=H;continue}}return z}}function L(){if(O>0){var z=k[0];return w(0,O-1),O-=1,M(0),z}return-1}function I(z,B){var H=k[z];return s[H]===B?z:(s[H]=-1/0,P(z),L(),s[H]=B,O+=1,P(O-1))}function C(z){if(!p[z]){p[z]=!0;var B=h[z],H=i[z];h[H]>=0&&(h[H]=B),i[B]>=0&&(i[B]=H),E[B]>=0&&I(E[B],x(B)),E[H]>=0&&I(E[H],x(H))}}for(var k=[],E=new Array(o),v=0;v<o;++v){var R=s[v]=x(v);R<1/0?(E[v]=k.length,k.push(v)):E[v]=-1}for(var O=k.length,v=O>>1;v>=0;--v)M(v);for(;;){var N=L();if(N<0||s[N]>n)break;C(N)}for(var G=[],v=0;v<o;++v)p[v]||(E[v]=G.length,G.push(f[v].slice()));G.length;function U(z,B){if(z[B]<0)return B;var H=B,V=B;do{var Z=z[V];if(!p[V]||Z<0||Z===V||(V=Z,Z=z[V],!p[V]||Z<0||Z===V))break;V=Z,H=z[H]}while(H!==V);for(var q=B;q!==V;q=z[q])z[q]=V;return V}var Y=[];return t.forEach(function(z){var B=U(h,z[0]),H=U(i,z[1]);if(B>=0&&H>=0&&B!==H){var V=E[B],Z=E[H];V!==Z&&Y.push([V,Z])}}),a.unique(a.normalize(Y)),{positions:G,edges:Y}}},{"robust-orientation":548,"simplicial-complex":560}],563:[function(e,d,S){d.exports=u;var r=e("robust-orientation");function a(c,t){var f,n;if(t[0][0]<t[1][0])f=t[0],n=t[1];else if(t[0][0]>t[1][0])f=t[1],n=t[0];else{var o=Math.min(c[0][1],c[1][1]),l=Math.max(c[0][1],c[1][1]),h=Math.min(t[0][1],t[1][1]),i=Math.max(t[0][1],t[1][1]);return l<h?l-h:o>i?o-i:l-i}var s,p;c[0][1]<c[1][1]?(s=c[0],p=c[1]):(s=c[1],p=c[0]);var v=r(n,f,s);return v||(v=r(n,f,p),v)?v:p-n}function u(c,t){var f,n;if(t[0][0]<t[1][0])f=t[0],n=t[1];else if(t[0][0]>t[1][0])f=t[1],n=t[0];else return a(t,c);var o,l;if(c[0][0]<c[1][0])o=c[0],l=c[1];else if(c[0][0]>c[1][0])o=c[1],l=c[0];else return-a(c,t);var h=r(f,n,l),i=r(f,n,o);if(h<0){if(i<=0)return h}else if(h>0){if(i>=0)return h}else if(i)return i;if(h=r(l,o,n),i=r(l,o,f),h<0){if(i<=0)return h}else if(h>0){if(i>=0)return h}else if(i)return i;return n[0]-l[0]}},{"robust-orientation":548}],564:[function(e,d,S){arguments[4][243][0].apply(S,arguments)},{dup:243}],565:[function(e,d,S){d.exports=i;var r=e("binary-search-bounds"),a=e("functional-red-black-tree"),u=e("robust-orientation"),c=e("./lib/order-segments");function t(s,p,v){this.slabs=s,this.coordinates=p,this.horizontal=v}var f=t.prototype;function n(s,p){return s.y-p}function o(s,p){for(var v=null;s;){var m=s.key,b,y;m[0][0]<m[1][0]?(b=m[0],y=m[1]):(b=m[1],y=m[0]);var x=u(b,y,p);if(x<0)s=s.left;else if(x>0)if(p[0]!==m[1][0])v=s,s=s.right;else{var w=o(s.right,p);if(w)return w;s=s.left}else{if(p[0]!==m[1][0])return s;var w=o(s.right,p);if(w)return w;s=s.left}}return v}f.castUp=function(s){var p=r.le(this.coordinates,s[0]);if(p<0)return-1;this.slabs[p];var v=o(this.slabs[p],s),m=-1;if(v&&(m=v.value),this.coordinates[p]===s[0]){var b=null;if(v&&(b=v.key),p>0){var y=o(this.slabs[p-1],s);y&&(b?c(y.key,b)>0&&(b=y.key,m=y.value):(m=y.value,b=y.key))}var x=this.horizontal[p];if(x.length>0){var w=r.ge(x,s[1],n);if(w<x.length){var g=x[w];if(s[1]===g.y){if(g.closed)return g.index;for(;w<x.length-1&&x[w+1].y===s[1];)if(w=w+1,g=x[w],g.closed)return g.index;if(g.y===s[1]&&!g.start){if(w=w+1,w>=x.length)return m;g=x[w]}}if(g.start)if(b){var T=u(b[0],b[1],[s[0],g.y]);b[0][0]>b[1][0]&&(T=-T),T>0&&(m=g.index)}else m=g.index;else g.y!==s[1]&&(m=g.index)}}}return m};function l(s,p,v,m){this.y=s,this.index=p,this.start=v,this.closed=m}function h(s,p,v,m){this.x=s,this.segment=p,this.create=v,this.index=m}function i(s){for(var p=s.length,v=2*p,m=new Array(v),b=0;b<p;++b){var y=s[b],x=y[0][0]<y[1][0];m[2*b]=new h(y[0][0],y,x,b),m[2*b+1]=new h(y[1][0],y,!x,b)}m.sort(function(C,k){var E=C.x-k.x;return E||(E=C.create-k.create,E)?E:Math.min(C.segment[0][1],C.segment[1][1])-Math.min(k.segment[0][1],k.segment[1][1])});for(var w=a(c),g=[],T=[],M=[],b=0;b<v;){for(var P=m[b].x,L=[];b<v;){var I=m[b];if(I.x!==P)break;b+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(L.push(new l(I.segment[0][1],I.index,!0,!0)),L.push(new l(I.segment[1][1],I.index,!1,!1))):(L.push(new l(I.segment[1][1],I.index,!0,!1)),L.push(new l(I.segment[0][1],I.index,!1,!0)))):I.create?w=w.insert(I.segment,I.index):w=w.remove(I.segment)}g.push(w.root),T.push(P),M.push(L)}return new t(g,T,M)}},{"./lib/order-segments":563,"binary-search-bounds":564,"functional-red-black-tree":247,"robust-orientation":548}],566:[function(e,d,S){var r=e("robust-dot-product"),a=e("robust-sum");d.exports=t,d.exports.positive=f,d.exports.negative=n;function u(o,l){var h=a(r(o,l),[l[l.length-1]]);return h[h.length-1]}function c(o,l,h,i){var s=i-l,p=-l/s;p<0?p=0:p>1&&(p=1);for(var v=1-p,m=o.length,b=new Array(m),y=0;y<m;++y)b[y]=p*o[y]+v*h[y];return b}function t(o,l){for(var h=[],i=[],s=u(o[o.length-1],l),p=o[o.length-1],v=o[0],m=0;m<o.length;++m,p=v){v=o[m];var b=u(v,l);if(s<0&&b>0||s>0&&b<0){var y=c(p,b,v,s);h.push(y),i.push(y.slice())}b<0?i.push(v.slice()):b>0?h.push(v.slice()):(h.push(v.slice()),i.push(v.slice())),s=b}return{positive:h,negative:i}}function f(o,l){for(var h=[],i=u(o[o.length-1],l),s=o[o.length-1],p=o[0],v=0;v<o.length;++v,s=p){p=o[v];var m=u(p,l);(i<0&&m>0||i>0&&m<0)&&h.push(c(s,m,p,i)),m>=0&&h.push(p.slice()),i=m}return h}function n(o,l){for(var h=[],i=u(o[o.length-1],l),s=o[o.length-1],p=o[0],v=0;v<o.length;++v,s=p){p=o[v];var m=u(p,l);(i<0&&m>0||i>0&&m<0)&&h.push(c(s,m,p,i)),m<=0&&h.push(p.slice()),i=m}return h}},{"robust-dot-product":545,"robust-sum":553}],567:[function(e,d,S){(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(n){return c(f(n),arguments)}function u(n,o){return a.apply(null,[n].concat(o||[]))}function c(n,o){var l=1,h=n.length,i,s="",p,v,m,b,y,x,w,g;for(p=0;p<h;p++)if(typeof n[p]=="string")s+=n[p];else if(typeof n[p]=="object"){if(m=n[p],m.keys)for(i=o[l],v=0;v<m.keys.length;v++){if(i==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[v],m.keys[v-1]));i=i[m.keys[v]]}else m.param_no?i=o[m.param_no]:i=o[l++];if(r.not_type.test(m.type)&&r.not_primitive.test(m.type)&&i instanceof Function&&(i=i()),r.numeric_arg.test(m.type)&&typeof i!="number"&&isNaN(i))throw new TypeError(a("[sprintf] expecting number but found %T",i));switch(r.number.test(m.type)&&(w=i>=0),m.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,m.width?parseInt(m.width):0);break;case"e":i=m.precision?parseFloat(i).toExponential(m.precision):parseFloat(i).toExponential();break;case"f":i=m.precision?parseFloat(i).toFixed(m.precision):parseFloat(i);break;case"g":i=m.precision?String(Number(i.toPrecision(m.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=m.precision?i.substring(0,m.precision):i;break;case"t":i=String(!!i),i=m.precision?i.substring(0,m.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=m.precision?i.substring(0,m.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=m.precision?i.substring(0,m.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase();break}r.json.test(m.type)?s+=i:(r.number.test(m.type)&&(!w||m.sign)?(g=w?"+":"-",i=i.toString().replace(r.sign,"")):g="",y=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",x=m.width-(g+i).length,b=m.width&&x>0?y.repeat(x):"",s+=m.align?g+i+b:y==="0"?g+b+i:b+g+i)}return s}var t=Object.create(null);function f(n){if(t[n])return t[n];for(var o=n,l,h=[],i=0;o;){if((l=r.text.exec(o))!==null)h.push(l[0]);else if((l=r.modulo.exec(o))!==null)h.push("%");else if((l=r.placeholder.exec(o))!==null){if(l[2]){i|=1;var s=[],p=l[2],v=[];if((v=r.key.exec(p))!==null)for(s.push(v[1]);(p=p.substring(v[0].length))!=="";)if((v=r.key_access.exec(p))!==null)s.push(v[1]);else if((v=r.index_access.exec(p))!==null)s.push(v[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=s}else i|=2;if(i===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(l[0].length)}return t[n]=h}typeof S<"u"&&(S.sprintf=a,S.vsprintf=u),typeof window<"u"&&(window.sprintf=a,window.vsprintf=u)})()},{}],568:[function(e,d,S){var r=e("parenthesis");d.exports=function(u,c,t){if(u==null)throw Error("First argument should be a string");if(c==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(p){return p.length===1&&(p=p+p),p}));var f=r.parse(u,{flat:!0,brackets:t.ignore}),n=f[0],o=n.split(c);if(t.escape){for(var l=[],h=0;h<o.length;h++){var i=o[h],s=o[h+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(l.push(i+c+s),h++):l.push(i)}o=l}for(var h=0;h<o.length;h++)f[0]=o[h],o[h]=r.stringify(f,{flat:!0});return o}},{parenthesis:503}],569:[function(e,d,S){d.exports=r;function r(a){for(var u=a.length,c=new Array(u),t=new Array(u),f=new Array(u),n=new Array(u),o=new Array(u),l=new Array(u),h=0;h<u;++h)c[h]=-1,t[h]=0,f[h]=!1,n[h]=0,o[h]=-1,l[h]=[];var i=0,s=[],p=[];function v(x){var w=[x],g=[x];for(c[x]=t[x]=i,f[x]=!0,i+=1;g.length>0;){x=g[g.length-1];var T=a[x];if(n[x]<T.length){for(var M=n[x];M<T.length;++M){var P=T[M];if(c[P]<0){c[P]=t[P]=i,f[P]=!0,i+=1,w.push(P),g.push(P);break}else f[P]&&(t[x]=Math.min(t[x],t[P])|0);o[P]>=0&&l[x].push(o[P])}n[x]=M}else{if(t[x]===c[x]){for(var L=[],I=[],C=0,M=w.length-1;M>=0;--M){var k=w[M];if(f[k]=!1,L.push(k),I.push(l[k]),C+=l[k].length,o[k]=s.length,k===x){w.length=M;break}}s.push(L);for(var E=new Array(C),M=0;M<I.length;M++)for(var R=0;R<I[M].length;R++)E[--C]=I[M][R];p.push(E)}g.pop()}}}for(var h=0;h<u;++h)c[h]<0&&v(h);for(var m,h=0;h<p.length;h++){var b=p[h];if(b.length!==0){b.sort(function(w,g){return w-g}),m=[b[0]];for(var y=1;y<b.length;y++)b[y]!==b[y-1]&&m.push(b[y]);p[h]=m}}return{components:s,adjacencyList:p}}},{}],570:[function(e,d,S){d.exports=n;var r=e("ndarray-extract-contour"),a=e("triangulate-hypercube"),u=e("zero-crossings");function c(o,l){var h=o.length,i=["'use strict';"],s="surfaceNets"+o.join("_")+"d"+l;i.push("var contour=genContour({","order:[",o.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),l==="generic"&&i.push("getters:[0],");for(var p=[],v=[],m=0;m<h;++m)p.push("d"+m),v.push("d"+m);for(var m=0;m<1<<h;++m)p.push("v"+m),v.push("v"+m);for(var m=0;m<1<<h;++m)p.push("p"+m),v.push("p"+m);p.push("a","b","c"),v.push("a","c"),i.push("vertex:function vertexFunc(",p.join(),"){");for(var b=[],m=0;m<1<<h;++m)b.push("(p"+m+"<<"+m+")");i.push("var m=(",b.join("+"),")|0;if(m===0||m===",(1<<(1<<h))-1,"){return}");var y=[],x=[];1<<(1<<h)<=128?(i.push("switch(m){"),x=i):i.push("switch(m>>>7){");for(var m=0;m<1<<(1<<h);++m){if(1<<(1<<h)>128&&m%128===0){y.length>0&&x.push("}}");var w="vExtra"+y.length;i.push("case ",m>>>7,":",w,"(m&0x7f,",v.join(),");break;"),x=["function ",w,"(m,",v.join(),"){switch(m){"],y.push(x)}x.push("case ",m&127,":");for(var g=new Array(h),T=new Array(h),M=new Array(h),P=new Array(h),L=0,I=0;I<h;++I)g[I]=[],T[I]=[],M[I]=0,P[I]=0;for(var I=0;I<1<<h;++I)for(var C=0;C<h;++C){var k=I^1<<C;if(!(k>I)&&!(m&1<<k)!=!(m&1<<I)){var E=1;m&1<<k?T[C].push("v"+k+"-v"+I):(T[C].push("v"+I+"-v"+k),E=-E),E<0?(g[C].push("-v"+I+"-v"+k),M[C]+=2):(g[C].push("v"+I+"+v"+k),M[C]-=2),L+=1;for(var R=0;R<h;++R)R!==C&&(k&1<<R?P[R]+=1:P[R]-=1)}}for(var O=[],C=0;C<h;++C)if(g[C].length===0)O.push("d"+C+"-0.5");else{var N="";M[C]<0?N=M[C]+"*c":M[C]>0&&(N="+"+M[C]+"*c");var G=.5*(g[C].length/L),U=.5+.5*(P[C]/L);O.push("d"+C+"-"+U+"-"+G+"*("+g[C].join("+")+N+")/("+T[C].join("+")+")")}x.push("a.push([",O.join(),"]);","break;")}i.push("}},"),y.length>0&&x.push("}}");for(var Y=[],m=0;m<1<<h-1;++m)Y.push("v"+m);Y.push("c0","c1","p0","p1","a","b","c"),i.push("cell:function cellFunc(",Y.join(),"){");var z=a(h-1);i.push("if(p0){b.push(",z.map(function(H){return"["+H.map(function(V){return"v"+V})+"]"}).join(),")}else{b.push(",z.map(function(H){var V=H.slice();return V.reverse(),"["+V.map(function(Z){return"v"+Z})+"]"}).join(),")}}});function ",s,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",s,";");for(var m=0;m<y.length;++m)i.push(y[m].join(""));var B=new Function("genContour",i.join(""));return B(r)}function t(o,l){for(var h=u(o,l),i=h.length,s=new Array(i),p=new Array(i),v=0;v<i;++v)s[v]=[h[v]],p[v]=[v];return{positions:s,cells:p}}var f={};function n(o,s){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return t(o,s);var h=o.order.join()+"-"+o.dtype,i=f[h],s=+s||0;return i||(i=f[h]=c(o.order,o.dtype)),i(o,s)}},{"ndarray-extract-contour":487,"triangulate-hypercube":580,"zero-crossings":624}],571:[function(e,d,S){Object.defineProperty(S,"__esModule",{value:!0});var r=function(){function o(l,h){var i=[],s=!0,p=!1,v=void 0;try{for(var m=l[Symbol.iterator](),b;!(s=(b=m.next()).done)&&(i.push(b.value),!(h&&i.length===h));s=!0);}catch(y){p=!0,v=y}finally{try{!s&&m.return&&m.return()}finally{if(p)throw v}}return i}return function(l,h){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return o(l,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Math.PI*2,u=function(l,h,i,s,p,v,m){var b=l.x,y=l.y;b*=h,y*=i;var x=s*b-p*y,w=p*b+s*y;return{x:x+v,y:w+m}},c=function(l,h){var i=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),s=Math.cos(l),p=Math.sin(l),v=Math.cos(l+h),m=Math.sin(l+h);return[{x:s-p*i,y:p+s*i},{x:v+m*i,y:m-v*i},{x:v,y:m}]},t=function(l,h,i,s){var p=l*s-h*i<0?-1:1,v=l*i+h*s;return v>1&&(v=1),v<-1&&(v=-1),p*Math.acos(v)},f=function(l,h,i,s,p,v,m,b,y,x,w,g){var T=Math.pow(p,2),M=Math.pow(v,2),P=Math.pow(w,2),L=Math.pow(g,2),I=T*M-T*L-M*P;I<0&&(I=0),I/=T*L+M*P,I=Math.sqrt(I)*(m===b?-1:1);var C=I*p/v*g,k=I*-v/p*w,E=x*C-y*k+(l+i)/2,R=y*C+x*k+(h+s)/2,O=(w-C)/p,N=(g-k)/v,G=(-w-C)/p,U=(-g-k)/v,Y=t(1,0,O,N),z=t(O,N,G,U);return b===0&&z>0&&(z-=a),b===1&&z<0&&(z+=a),[E,R,Y,z]},n=function(l){var h=l.px,i=l.py,s=l.cx,p=l.cy,v=l.rx,m=l.ry,b=l.xAxisRotation,y=b===void 0?0:b,x=l.largeArcFlag,w=x===void 0?0:x,g=l.sweepFlag,T=g===void 0?0:g,M=[];if(v===0||m===0)return[];var P=Math.sin(y*a/360),L=Math.cos(y*a/360),I=L*(h-s)/2+P*(i-p)/2,C=-P*(h-s)/2+L*(i-p)/2;if(I===0&&C===0)return[];v=Math.abs(v),m=Math.abs(m);var k=Math.pow(I,2)/Math.pow(v,2)+Math.pow(C,2)/Math.pow(m,2);k>1&&(v*=Math.sqrt(k),m*=Math.sqrt(k));var E=f(h,i,s,p,v,m,w,T,P,L,I,C),R=r(E,4),O=R[0],N=R[1],G=R[2],U=R[3],Y=Math.abs(U)/(a/4);Math.abs(1-Y)<1e-7&&(Y=1);var z=Math.max(Math.ceil(Y),1);U/=z;for(var B=0;B<z;B++)M.push(c(G,U)),G+=U;return M.map(function(H){var V=u(H[0],v,m,L,P,O,N),Z=V.x,q=V.y,J=u(H[1],v,m,L,P,O,N),ne=J.x,ve=J.y,$=u(H[2],v,m,L,P,O,N),j=$.x,ae=$.y;return{x1:Z,y1:q,x2:ne,y2:ve,x:j,y:ae}})};S.default=n,d.exports=S.default},{}],572:[function(e,d,S){var r=e("parse-svg-path"),a=e("abs-svg-path"),u=e("normalize-svg-path"),c=e("is-svg-path"),t=e("assert");d.exports=f;function f(n){if(Array.isArray(n)&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),typeof n=="string"&&(t(c(n),"String is not an SVG path."),n=r(n)),t(Array.isArray(n),"Argument should be a string or an array of path segments."),n=a(n),n=u(n),!n.length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],l=0,h=n.length;l<h;l++)for(var i=n[l].slice(1),s=0;s<i.length;s+=2)i[s+0]<o[0]&&(o[0]=i[s+0]),i[s+1]<o[1]&&(o[1]=i[s+1]),i[s+0]>o[2]&&(o[2]=i[s+0]),i[s+1]>o[3]&&(o[3]=i[s+1]);return o}},{"abs-svg-path":65,assert:73,"is-svg-path":471,"normalize-svg-path":573,"parse-svg-path":505}],573:[function(e,d,S){d.exports=a;var r=e("svg-arc-to-cubic-bezier");function a(t){for(var f,n=[],o=0,l=0,h=0,i=0,s=null,p=null,v=0,m=0,b=0,y=t.length;b<y;b++){var x=t[b],w=x[0];switch(w){case"M":h=x[1],i=x[2];break;case"A":var g=r({px:v,py:m,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!g.length)continue;for(var T=0,M;T<g.length;T++)M=g[T],x=["C",M.x1,M.y1,M.x2,M.y2,M.x,M.y],T<g.length-1&&n.push(x);break;case"S":var P=v,L=m;(f=="C"||f=="S")&&(P+=P-o,L+=L-l),x=["C",P,L,x[1],x[2],x[3],x[4]];break;case"T":f=="Q"||f=="T"?(s=v*2-s,p=m*2-p):(s=v,p=m),x=c(v,m,s,p,x[1],x[2]);break;case"Q":s=x[1],p=x[2],x=c(v,m,x[1],x[2],x[3],x[4]);break;case"L":x=u(v,m,x[1],x[2]);break;case"H":x=u(v,m,x[1],m);break;case"V":x=u(v,m,v,x[1]);break;case"Z":x=u(v,m,h,i);break}f=w,v=x[x.length-2],m=x[x.length-1],x.length>4?(o=x[x.length-4],l=x[x.length-3]):(o=v,l=m),n.push(x)}return n}function u(t,f,n,o){return["C",t,f,n,o,n,o]}function c(t,f,n,o,l,h){return["C",t/3+2/3*n,f/3+2/3*o,l/3+2/3*n,h/3+2/3*o,l,h]}},{"svg-arc-to-cubic-bezier":571}],574:[function(e,d,S){var r=e("svg-path-bounds"),a=e("parse-svg-path"),u=e("draw-svg-path"),c=e("is-svg-path"),t=e("bitmap-sdf"),f=document.createElement("canvas"),n=f.getContext("2d");d.exports=o;function o(i,s){if(!c(i))throw Error("Argument should be valid svg path string");s||(s={});var p,v;s.shape?(p=s.shape[0],v=s.shape[1]):(p=f.width=s.w||s.width||200,v=f.height=s.h||s.height||200);var m=Math.min(p,v),b=s.stroke||0,y=s.viewbox||s.viewBox||r(i),x=[p/(y[2]-y[0]),v/(y[3]-y[1])],w=Math.min(x[0]||0,x[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,p,v),n.fillStyle="white",b&&(typeof b!="number"&&(b=1),b>0?n.strokeStyle="white":n.strokeStyle="black",n.lineWidth=Math.abs(b)),n.translate(p*.5,v*.5),n.scale(w,w),h()){var g=new Path2D(i);n.fill(g),b&&n.stroke(g)}else{var T=a(i);u(n,T),n.fill(),b&&n.stroke()}n.setTransform(1,0,0,1,0,0);var M=t(n,{cutoff:s.cutoff!=null?s.cutoff:.5,radius:s.radius!=null?s.radius:m*.5});return M}var l;function h(){if(l!=null)return l;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return l=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(s);var p=i.getImageData(0,0,1,1);return l=p&&p.data&&p.data[3]===255}},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":471,"parse-svg-path":505,"svg-path-bounds":572}],575:[function(e,d,S){(function(r){(function(){d.exports=f;var a=e("vectorize-text"),u=window||r.global||{},c=u.__TEXT_CACHE||{};u.__TEXT_CACHE={};function t(n){for(var o=n.cells,l=n.positions,h=new Float32Array(o.length*6),i=0,s=0,p=0;p<o.length;++p)for(var v=o[p],m=0;m<3;++m){var b=l[v[m]];h[i++]=b[0],h[i++]=b[1]+1.4,s=Math.max(b[0],s)}return{data:h,shape:s}}function f(n,o,h){var h=h||{},i=c[n];i||(i=c[n]={" ":{data:new Float32Array(0),shape:.2}});var s=i[o];if(!s)if(o.length<=1||!/\d/.test(o))s=i[o]=t(a(o,{triangles:!0,font:n,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=o.split(/(\d|\s)/),v=new Array(p.length),m=0,b=0,y=0;y<p.length;++y)v[y]=f(n,p[y]),m+=v[y].data.length,b+=v[y].shape,y>0&&(b+=.02);for(var x=new Float32Array(m),w=0,g=-.5*b,y=0;y<v.length;++y){for(var T=v[y].data,M=0;M<T.length;M+=2)x[w++]=T[M]+g,x[w++]=T[M+1];g+=v[y].shape+.02}s=i[o]={data:x,shape:b}}return s}}).call(this)}).call(this,e("_process"))},{_process:526,"vectorize-text":600}],576:[function(e,d,S){(function(r){var a=/^\s+/,u=/\s+$/,c=0,t=r.round,f=r.min,n=r.max,o=r.random;function l(re,ce){if(re=re||"",ce=ce||{},re instanceof l)return re;if(!(this instanceof l))return new l(re,ce);var pe=h(re);this._originalInput=re,this._r=pe.r,this._g=pe.g,this._b=pe.b,this._a=pe.a,this._roundA=t(100*this._a)/100,this._format=ce.format||pe.format,this._gradientType=ce.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=pe.ok,this._tc_id=c++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var re=this.toRgb();return(re.r*299+re.g*587+re.b*114)/1e3},getLuminance:function(){var re=this.toRgb(),ce,pe,fe,se,de,be;return ce=re.r/255,pe=re.g/255,fe=re.b/255,ce<=.03928?se=ce/12.92:se=r.pow((ce+.055)/1.055,2.4),pe<=.03928?de=pe/12.92:de=r.pow((pe+.055)/1.055,2.4),fe<=.03928?be=fe/12.92:be=r.pow((fe+.055)/1.055,2.4),.2126*se+.7152*de+.0722*be},setAlpha:function(re){return this._a=z(re),this._roundA=t(100*this._a)/100,this},toHsv:function(){var re=v(this._r,this._g,this._b);return{h:re.h*360,s:re.s,v:re.v,a:this._a}},toHsvString:function(){var re=v(this._r,this._g,this._b),ce=t(re.h*360),pe=t(re.s*100),fe=t(re.v*100);return this._a==1?"hsv("+ce+", "+pe+"%, "+fe+"%)":"hsva("+ce+", "+pe+"%, "+fe+"%, "+this._roundA+")"},toHsl:function(){var re=s(this._r,this._g,this._b);return{h:re.h*360,s:re.s,l:re.l,a:this._a}},toHslString:function(){var re=s(this._r,this._g,this._b),ce=t(re.h*360),pe=t(re.s*100),fe=t(re.l*100);return this._a==1?"hsl("+ce+", "+pe+"%, "+fe+"%)":"hsla("+ce+", "+pe+"%, "+fe+"%, "+this._roundA+")"},toHex:function(re){return b(this._r,this._g,this._b,re)},toHexString:function(re){return"#"+this.toHex(re)},toHex8:function(re){return y(this._r,this._g,this._b,this._a,re)},toHex8String:function(re){return"#"+this.toHex8(re)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(B(this._r,255)*100)+"%",g:t(B(this._g,255)*100)+"%",b:t(B(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(B(this._r,255)*100)+"%, "+t(B(this._g,255)*100)+"%, "+t(B(this._b,255)*100)+"%)":"rgba("+t(B(this._r,255)*100)+"%, "+t(B(this._g,255)*100)+"%, "+t(B(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:U[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(re){var ce="#"+x(this._r,this._g,this._b,this._a),pe=ce,fe=this._gradientType?"GradientType = 1, ":"";if(re){var se=l(re);pe="#"+x(se._r,se._g,se._b,se._a)}return"progid:DXImageTransform.Microsoft.gradient("+fe+"startColorstr="+ce+",endColorstr="+pe+")"},toString:function(re){var ce=!!re;re=re||this._format;var pe=!1,fe=this._a<1&&this._a>=0,se=!ce&&fe&&(re==="hex"||re==="hex6"||re==="hex3"||re==="hex4"||re==="hex8"||re==="name");return se?re==="name"&&this._a===0?this.toName():this.toRgbString():(re==="rgb"&&(pe=this.toRgbString()),re==="prgb"&&(pe=this.toPercentageRgbString()),(re==="hex"||re==="hex6")&&(pe=this.toHexString()),re==="hex3"&&(pe=this.toHexString(!0)),re==="hex4"&&(pe=this.toHex8String(!0)),re==="hex8"&&(pe=this.toHex8String()),re==="name"&&(pe=this.toName()),re==="hsl"&&(pe=this.toHslString()),re==="hsv"&&(pe=this.toHsvString()),pe||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(re,ce){var pe=re.apply(null,[this].concat([].slice.call(ce)));return this._r=pe._r,this._g=pe._g,this._b=pe._b,this.setAlpha(pe._a),this},lighten:function(){return this._applyModification(M,arguments)},brighten:function(){return this._applyModification(P,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(w,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(T,arguments)},spin:function(){return this._applyModification(I,arguments)},_applyCombination:function(re,ce){return re.apply(null,[this].concat([].slice.call(ce)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(R,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},l.fromRatio=function(re,ce){if(typeof re=="object"){var pe={};for(var fe in re)re.hasOwnProperty(fe)&&(fe==="a"?pe[fe]=re[fe]:pe[fe]=ne(re[fe]));re=pe}return l(re,ce)};function h(re){var ce={r:0,g:0,b:0},pe=1,fe=null,se=null,de=null,be=!1,xe=!1;return typeof re=="string"&&(re=ie(re)),typeof re=="object"&&(ae(re.r)&&ae(re.g)&&ae(re.b)?(ce=i(re.r,re.g,re.b),be=!0,xe=String(re.r).substr(-1)==="%"?"prgb":"rgb"):ae(re.h)&&ae(re.s)&&ae(re.v)?(fe=ne(re.s),se=ne(re.v),ce=m(re.h,fe,se),be=!0,xe="hsv"):ae(re.h)&&ae(re.s)&&ae(re.l)&&(fe=ne(re.s),de=ne(re.l),ce=p(re.h,fe,de),be=!0,xe="hsl"),re.hasOwnProperty("a")&&(pe=re.a)),pe=z(pe),{ok:be,format:re.format||xe,r:f(255,n(ce.r,0)),g:f(255,n(ce.g,0)),b:f(255,n(ce.b,0)),a:pe}}function i(re,ce,pe){return{r:B(re,255)*255,g:B(ce,255)*255,b:B(pe,255)*255}}function s(re,ce,pe){re=B(re,255),ce=B(ce,255),pe=B(pe,255);var fe=n(re,ce,pe),se=f(re,ce,pe),de,be,xe=(fe+se)/2;if(fe==se)de=be=0;else{var ke=fe-se;switch(be=xe>.5?ke/(2-fe-se):ke/(fe+se),fe){case re:de=(ce-pe)/ke+(ce<pe?6:0);break;case ce:de=(pe-re)/ke+2;break;case pe:de=(re-ce)/ke+4;break}de/=6}return{h:de,s:be,l:xe}}function p(re,ce,pe){var fe,se,de;re=B(re,360),ce=B(ce,100),pe=B(pe,100);function be(Re,Ke,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?Re+(Ke-Re)*6*ze:ze<1/2?Ke:ze<2/3?Re+(Ke-Re)*(2/3-ze)*6:Re}if(ce===0)fe=se=de=pe;else{var xe=pe<.5?pe*(1+ce):pe+ce-pe*ce,ke=2*pe-xe;fe=be(ke,xe,re+1/3),se=be(ke,xe,re),de=be(ke,xe,re-1/3)}return{r:fe*255,g:se*255,b:de*255}}function v(re,ce,pe){re=B(re,255),ce=B(ce,255),pe=B(pe,255);var fe=n(re,ce,pe),se=f(re,ce,pe),de,be,xe=fe,ke=fe-se;if(be=fe===0?0:ke/fe,fe==se)de=0;else{switch(fe){case re:de=(ce-pe)/ke+(ce<pe?6:0);break;case ce:de=(pe-re)/ke+2;break;case pe:de=(re-ce)/ke+4;break}de/=6}return{h:de,s:be,v:xe}}function m(re,ce,pe){re=B(re,360)*6,ce=B(ce,100),pe=B(pe,100);var fe=r.floor(re),se=re-fe,de=pe*(1-ce),be=pe*(1-se*ce),xe=pe*(1-(1-se)*ce),ke=fe%6,Re=[pe,be,de,de,xe,pe][ke],Ke=[xe,pe,pe,be,de,de][ke],ze=[de,de,xe,pe,pe,be][ke];return{r:Re*255,g:Ke*255,b:ze*255}}function b(re,ce,pe,fe){var se=[J(t(re).toString(16)),J(t(ce).toString(16)),J(t(pe).toString(16))];return fe&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0):se.join("")}function y(re,ce,pe,fe,se){var de=[J(t(re).toString(16)),J(t(ce).toString(16)),J(t(pe).toString(16)),J(ve(fe))];return se&&de[0].charAt(0)==de[0].charAt(1)&&de[1].charAt(0)==de[1].charAt(1)&&de[2].charAt(0)==de[2].charAt(1)&&de[3].charAt(0)==de[3].charAt(1)?de[0].charAt(0)+de[1].charAt(0)+de[2].charAt(0)+de[3].charAt(0):de.join("")}function x(re,ce,pe,fe){var se=[J(ve(fe)),J(t(re).toString(16)),J(t(ce).toString(16)),J(t(pe).toString(16))];return se.join("")}l.equals=function(re,ce){return!re||!ce?!1:l(re).toRgbString()==l(ce).toRgbString()},l.random=function(){return l.fromRatio({r:o(),g:o(),b:o()})};function w(re,ce){ce=ce===0?0:ce||10;var pe=l(re).toHsl();return pe.s-=ce/100,pe.s=H(pe.s),l(pe)}function g(re,ce){ce=ce===0?0:ce||10;var pe=l(re).toHsl();return pe.s+=ce/100,pe.s=H(pe.s),l(pe)}function T(re){return l(re).desaturate(100)}function M(re,ce){ce=ce===0?0:ce||10;var pe=l(re).toHsl();return pe.l+=ce/100,pe.l=H(pe.l),l(pe)}function P(re,ce){ce=ce===0?0:ce||10;var pe=l(re).toRgb();return pe.r=n(0,f(255,pe.r-t(255*-(ce/100)))),pe.g=n(0,f(255,pe.g-t(255*-(ce/100)))),pe.b=n(0,f(255,pe.b-t(255*-(ce/100)))),l(pe)}function L(re,ce){ce=ce===0?0:ce||10;var pe=l(re).toHsl();return pe.l-=ce/100,pe.l=H(pe.l),l(pe)}function I(re,ce){var pe=l(re).toHsl(),fe=(pe.h+ce)%360;return pe.h=fe<0?360+fe:fe,l(pe)}function C(re){var ce=l(re).toHsl();return ce.h=(ce.h+180)%360,l(ce)}function k(re){var ce=l(re).toHsl(),pe=ce.h;return[l(re),l({h:(pe+120)%360,s:ce.s,l:ce.l}),l({h:(pe+240)%360,s:ce.s,l:ce.l})]}function E(re){var ce=l(re).toHsl(),pe=ce.h;return[l(re),l({h:(pe+90)%360,s:ce.s,l:ce.l}),l({h:(pe+180)%360,s:ce.s,l:ce.l}),l({h:(pe+270)%360,s:ce.s,l:ce.l})]}function R(re){var ce=l(re).toHsl(),pe=ce.h;return[l(re),l({h:(pe+72)%360,s:ce.s,l:ce.l}),l({h:(pe+216)%360,s:ce.s,l:ce.l})]}function O(re,ce,pe){ce=ce||6,pe=pe||30;var fe=l(re).toHsl(),se=360/pe,de=[l(re)];for(fe.h=(fe.h-(se*ce>>1)+720)%360;--ce;)fe.h=(fe.h+se)%360,de.push(l(fe));return de}function N(re,ce){ce=ce||6;for(var pe=l(re).toHsv(),fe=pe.h,se=pe.s,de=pe.v,be=[],xe=1/ce;ce--;)be.push(l({h:fe,s:se,v:de})),de=(de+xe)%1;return be}l.mix=function(re,ce,pe){pe=pe===0?0:pe||50;var fe=l(re).toRgb(),se=l(ce).toRgb(),de=pe/100,be={r:(se.r-fe.r)*de+fe.r,g:(se.g-fe.g)*de+fe.g,b:(se.b-fe.b)*de+fe.b,a:(se.a-fe.a)*de+fe.a};return l(be)},l.readability=function(re,ce){var pe=l(re),fe=l(ce);return(r.max(pe.getLuminance(),fe.getLuminance())+.05)/(r.min(pe.getLuminance(),fe.getLuminance())+.05)},l.isReadable=function(re,ce,pe){var fe=l.readability(re,ce),se,de;switch(de=!1,se=te(pe),se.level+se.size){case"AAsmall":case"AAAlarge":de=fe>=4.5;break;case"AAlarge":de=fe>=3;break;case"AAAsmall":de=fe>=7;break}return de},l.mostReadable=function(re,ce,pe){var fe=null,se=0,de,be,xe,ke;pe=pe||{},be=pe.includeFallbackColors,xe=pe.level,ke=pe.size;for(var Re=0;Re<ce.length;Re++)de=l.readability(re,ce[Re]),de>se&&(se=de,fe=l(ce[Re]));return l.isReadable(re,fe,{level:xe,size:ke})||!be?fe:(pe.includeFallbackColors=!1,l.mostReadable(re,["#fff","#000"],pe))};var G=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=l.hexNames=Y(G);function Y(re){var ce={};for(var pe in re)re.hasOwnProperty(pe)&&(ce[re[pe]]=pe);return ce}function z(re){return re=parseFloat(re),(isNaN(re)||re<0||re>1)&&(re=1),re}function B(re,ce){Z(re)&&(re="100%");var pe=q(re);return re=f(ce,n(0,parseFloat(re))),pe&&(re=parseInt(re*ce,10)/100),r.abs(re-ce)<1e-6?1:re%ce/parseFloat(ce)}function H(re){return f(1,n(0,re))}function V(re){return parseInt(re,16)}function Z(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1}function q(re){return typeof re=="string"&&re.indexOf("%")!=-1}function J(re){return re.length==1?"0"+re:""+re}function ne(re){return re<=1&&(re=re*100+"%"),re}function ve(re){return r.round(parseFloat(re)*255).toString(16)}function $(re){return V(re)/255}var j=function(){var re="[-\\+]?\\d+%?",ce="[-\\+]?\\d*\\.\\d+%?",pe="(?:"+ce+")|(?:"+re+")",fe="[\\s|\\(]+("+pe+")[,|\\s]+("+pe+")[,|\\s]+("+pe+")\\s*\\)?",se="[\\s|\\(]+("+pe+")[,|\\s]+("+pe+")[,|\\s]+("+pe+")[,|\\s]+("+pe+")\\s*\\)?";return{CSS_UNIT:new RegExp(pe),rgb:new RegExp("rgb"+fe),rgba:new RegExp("rgba"+se),hsl:new RegExp("hsl"+fe),hsla:new RegExp("hsla"+se),hsv:new RegExp("hsv"+fe),hsva:new RegExp("hsva"+se),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ae(re){return!!j.CSS_UNIT.exec(re)}function ie(re){re=re.replace(a,"").replace(u,"").toLowerCase();var ce=!1;if(G[re])re=G[re],ce=!0;else if(re=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var pe;return(pe=j.rgb.exec(re))?{r:pe[1],g:pe[2],b:pe[3]}:(pe=j.rgba.exec(re))?{r:pe[1],g:pe[2],b:pe[3],a:pe[4]}:(pe=j.hsl.exec(re))?{h:pe[1],s:pe[2],l:pe[3]}:(pe=j.hsla.exec(re))?{h:pe[1],s:pe[2],l:pe[3],a:pe[4]}:(pe=j.hsv.exec(re))?{h:pe[1],s:pe[2],v:pe[3]}:(pe=j.hsva.exec(re))?{h:pe[1],s:pe[2],v:pe[3],a:pe[4]}:(pe=j.hex8.exec(re))?{r:V(pe[1]),g:V(pe[2]),b:V(pe[3]),a:$(pe[4]),format:ce?"name":"hex8"}:(pe=j.hex6.exec(re))?{r:V(pe[1]),g:V(pe[2]),b:V(pe[3]),format:ce?"name":"hex"}:(pe=j.hex4.exec(re))?{r:V(pe[1]+""+pe[1]),g:V(pe[2]+""+pe[2]),b:V(pe[3]+""+pe[3]),a:$(pe[4]+""+pe[4]),format:ce?"name":"hex8"}:(pe=j.hex3.exec(re))?{r:V(pe[1]+""+pe[1]),g:V(pe[2]+""+pe[2]),b:V(pe[3]+""+pe[3]),format:ce?"name":"hex"}:!1}function te(re){var ce,pe;return re=re||{level:"AA",size:"small"},ce=(re.level||"AA").toUpperCase(),pe=(re.size||"small").toLowerCase(),ce!=="AA"&&ce!=="AAA"&&(ce="AA"),pe!=="small"&&pe!=="large"&&(pe="small"),{level:ce,size:pe}}typeof d<"u"&&d.exports?d.exports=l:window.tinycolor=l})(Math)},{}],577:[function(e,d,S){d.exports=u,d.exports.float32=d.exports.float=u,d.exports.fract32=d.exports.fract=a;var r=new Float32Array(1);function a(c){if(c.length){for(var t=u(c),f=0,n=t.length;f<n;f++)t[f]=c[f]-t[f];return t}return u(c-u(c))}function u(c){if(c.length){if(c instanceof Float32Array)return c;var t=new Float32Array(c);return t.set(c),t}return r[0]=c,r[0]}},{}],578:[function(e,d,S){var r=e("parse-unit");d.exports=t;var a=96;function u(f,n){var o=r(getComputedStyle(f).getPropertyValue(n));return o[0]*t(o[1],f)}function c(f,n){var o=document.createElement("div");o.style["font-size"]="128"+f,n.appendChild(o);var l=u(o,"font-size")/128;return n.removeChild(o),l}function t(f,n){switch(n=n||document.body,f=(f||"px").trim().toLowerCase(),(n===window||n===document)&&(n=document.body),f){case"%":return n.clientHeight/100;case"ch":case"ex":return c(f,n);case"em":return u(n,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":506}],579:[function(e,d,S){(function(r,a){typeof S=="object"&&typeof d<"u"?a(S):(r=r||self,a(r.topojson=r.topojson||{}))})(this,function(r){function a(g){return g}function u(g){if(g==null)return a;var T,M,P=g.scale[0],L=g.scale[1],I=g.translate[0],C=g.translate[1];return function(k,E){E||(T=M=0);var R=2,O=k.length,N=new Array(O);for(N[0]=(T+=k[0])*P+I,N[1]=(M+=k[1])*L+C;R<O;)N[R]=k[R],++R;return N}}function c(g){var T=u(g.transform),M,P=1/0,L=P,I=-P,C=-P;function k(R){R=T(R),R[0]<P&&(P=R[0]),R[0]>I&&(I=R[0]),R[1]<L&&(L=R[1]),R[1]>C&&(C=R[1])}function E(R){switch(R.type){case"GeometryCollection":R.geometries.forEach(E);break;case"Point":k(R.coordinates);break;case"MultiPoint":R.coordinates.forEach(k);break}}g.arcs.forEach(function(R){for(var O=-1,N=R.length,G;++O<N;)G=T(R[O],O),G[0]<P&&(P=G[0]),G[0]>I&&(I=G[0]),G[1]<L&&(L=G[1]),G[1]>C&&(C=G[1])});for(M in g.objects)E(g.objects[M]);return[P,L,I,C]}function t(g,T){for(var M,P=g.length,L=P-T;L<--P;)M=g[L],g[L++]=g[P],g[P]=M}function f(g,T){return typeof T=="string"&&(T=g.objects[T]),T.type==="GeometryCollection"?{type:"FeatureCollection",features:T.geometries.map(function(M){return n(g,M)})}:n(g,T)}function n(g,T){var M=T.id,P=T.bbox,L=T.properties==null?{}:T.properties,I=o(g,T);return M==null&&P==null?{type:"Feature",properties:L,geometry:I}:P==null?{type:"Feature",id:M,properties:L,geometry:I}:{type:"Feature",id:M,bbox:P,properties:L,geometry:I}}function o(g,T){var M=u(g.transform),P=g.arcs;function L(O,N){N.length&&N.pop();for(var G=P[O<0?~O:O],U=0,Y=G.length;U<Y;++U)N.push(M(G[U],U));O<0&&t(N,Y)}function I(O){return M(O)}function C(O){for(var N=[],G=0,U=O.length;G<U;++G)L(O[G],N);return N.length<2&&N.push(N[0]),N}function k(O){for(var N=C(O);N.length<4;)N.push(N[0]);return N}function E(O){return O.map(k)}function R(O){var N=O.type,G;switch(N){case"GeometryCollection":return{type:N,geometries:O.geometries.map(R)};case"Point":G=I(O.coordinates);break;case"MultiPoint":G=O.coordinates.map(I);break;case"LineString":G=C(O.arcs);break;case"MultiLineString":G=O.arcs.map(C);break;case"Polygon":G=E(O.arcs);break;case"MultiPolygon":G=O.arcs.map(E);break;default:return null}return{type:N,coordinates:G}}return R(T)}function l(g,T){var M={},P={},L={},I=[],C=-1;T.forEach(function(R,O){var N=g.arcs[R<0?~R:R],G;N.length<3&&!N[1][0]&&!N[1][1]&&(G=T[++C],T[C]=R,T[O]=G)}),T.forEach(function(R){var O=k(R),N=O[0],G=O[1],U,Y;if(U=L[N])if(delete L[U.end],U.push(R),U.end=G,Y=P[G]){delete P[Y.start];var z=Y===U?U:U.concat(Y);P[z.start=U.start]=L[z.end=Y.end]=z}else P[U.start]=L[U.end]=U;else if(U=P[G])if(delete P[U.start],U.unshift(R),U.start=N,Y=L[N]){delete L[Y.end];var B=Y===U?U:Y.concat(U);P[B.start=Y.start]=L[B.end=U.end]=B}else P[U.start]=L[U.end]=U;else U=[R],P[U.start=N]=L[U.end=G]=U});function k(R){var O=g.arcs[R<0?~R:R],N=O[0],G;return g.transform?(G=[0,0],O.forEach(function(U){G[0]+=U[0],G[1]+=U[1]})):G=O[O.length-1],R<0?[G,N]:[N,G]}function E(R,O){for(var N in R){var G=R[N];delete O[G.start],delete G.start,delete G.end,G.forEach(function(U){M[U<0?~U:U]=1}),I.push(G)}}return E(L,P),E(P,L),T.forEach(function(R){M[R<0?~R:R]||I.push([R])}),I}function h(g){return o(g,i.apply(this,arguments))}function i(g,T,M){var P,L,I;if(arguments.length>1)P=s(g,T,M);else for(L=0,P=new Array(I=g.arcs.length);L<I;++L)P[L]=L;return{type:"MultiLineString",arcs:l(g,P)}}function s(g,T,M){var P=[],L=[],I;function C(N){var G=N<0?~N:N;(L[G]||(L[G]=[])).push({i:N,g:I})}function k(N){N.forEach(C)}function E(N){N.forEach(k)}function R(N){N.forEach(E)}function O(N){switch(I=N,N.type){case"GeometryCollection":N.geometries.forEach(O);break;case"LineString":k(N.arcs);break;case"MultiLineString":case"Polygon":E(N.arcs);break;case"MultiPolygon":R(N.arcs);break}}return O(T),L.forEach(M==null?function(N){P.push(N[0].i)}:function(N){M(N[0].g,N[N.length-1].g)&&P.push(N[0].i)}),P}function p(g){for(var T=-1,M=g.length,P,L=g[M-1],I=0;++T<M;)P=L,L=g[T],I+=P[0]*L[1]-P[1]*L[0];return Math.abs(I)}function v(g){return o(g,m.apply(this,arguments))}function m(g,T){var M={},P=[],L=[];T.forEach(I);function I(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(I);break;case"Polygon":C(E.arcs);break;case"MultiPolygon":E.arcs.forEach(C);break}}function C(E){E.forEach(function(R){R.forEach(function(O){(M[O=O<0?~O:O]||(M[O]=[])).push(E)})}),P.push(E)}function k(E){return p(o(g,{type:"Polygon",arcs:[E]}).coordinates[0])}return P.forEach(function(E){if(!E._){var R=[],O=[E];for(E._=1,L.push(R);E=O.pop();)R.push(E),E.forEach(function(N){N.forEach(function(G){M[G<0?~G:G].forEach(function(U){U._||(U._=1,O.push(U))})})})}}),P.forEach(function(E){delete E._}),{type:"MultiPolygon",arcs:L.map(function(E){var R=[],O;if(E.forEach(function(z){z.forEach(function(B){B.forEach(function(H){M[H<0?~H:H].length<2&&R.push(H)})})}),R=l(g,R),(O=R.length)>1)for(var N=1,G=k(R[0]),U,Y;N<O;++N)(U=k(R[N]))>G&&(Y=R[0],R[0]=R[N],R[N]=Y,G=U);return R}).filter(function(E){return E.length>0})}}function b(g,T){for(var M=0,P=g.length;M<P;){var L=M+P>>>1;g[L]<T?M=L+1:P=L}return M}function y(g){var T={},M=g.map(function(){return[]});function P(z,B){z.forEach(function(H){H<0&&(H=~H);var V=T[H];V?V.push(B):T[H]=[B]})}function L(z,B){z.forEach(function(H){P(H,B)})}function I(z,B){z.type==="GeometryCollection"?z.geometries.forEach(function(H){I(H,B)}):z.type in C&&C[z.type](z.arcs,B)}var C={LineString:P,MultiLineString:L,Polygon:L,MultiPolygon:function(z,B){z.forEach(function(H){L(H,B)})}};g.forEach(I);for(var k in T)for(var E=T[k],R=E.length,O=0;O<R;++O)for(var N=O+1;N<R;++N){var G=E[O],U=E[N],Y;(Y=M[G])[k=b(Y,U)]!==U&&Y.splice(k,0,U),(Y=M[U])[k=b(Y,G)]!==G&&Y.splice(k,0,G)}return M}function x(g){if(g==null)return a;var T,M,P=g.scale[0],L=g.scale[1],I=g.translate[0],C=g.translate[1];return function(k,E){E||(T=M=0);var R=2,O=k.length,N=new Array(O),G=Math.round((k[0]-I)/P),U=Math.round((k[1]-C)/L);for(N[0]=G-T,T=G,N[1]=U-M,M=U;R<O;)N[R]=k[R],++R;return N}}function w(g,T){if(g.transform)throw new Error("already quantized");if(!T||!T.scale){if(!((C=Math.floor(T))>=2))throw new Error("n must be \u22652");E=g.bbox||c(g);var M=E[0],P=E[1],L=E[2],I=E[3],C;T={scale:[L-M?(L-M)/(C-1):1,I-P?(I-P)/(C-1):1],translate:[M,P]}}else E=g.bbox;var k=x(T),E,R,O=g.objects,N={};function G(z){return k(z)}function U(z){var B;switch(z.type){case"GeometryCollection":B={type:"GeometryCollection",geometries:z.geometries.map(U)};break;case"Point":B={type:"Point",coordinates:G(z.coordinates)};break;case"MultiPoint":B={type:"MultiPoint",coordinates:z.coordinates.map(G)};break;default:return z}return z.id!=null&&(B.id=z.id),z.bbox!=null&&(B.bbox=z.bbox),z.properties!=null&&(B.properties=z.properties),B}function Y(z){var B=0,H=1,V=z.length,Z,q=new Array(V);for(q[0]=k(z[0],0);++B<V;)((Z=k(z[B],B))[0]||Z[1])&&(q[H++]=Z);return H===1&&(q[H++]=[0,0]),q.length=H,q}for(R in O)N[R]=U(O[R]);return{type:"Topology",bbox:E,transform:T,objects:N,arcs:g.arcs.map(Y)}}r.bbox=c,r.feature=f,r.merge=v,r.mergeArcs=m,r.mesh=h,r.meshArcs=i,r.neighbors=y,r.quantize=w,r.transform=u,r.untransform=x,Object.defineProperty(r,"__esModule",{value:!0})})},{}],580:[function(e,d,S){d.exports=c;var r=e("permutation-rank"),a=e("permutation-parity"),u=e("gamma");function c(t){if(t<0)return[];if(t===0)return[[0]];for(var f=Math.round(u(t+1))|0,n=[],o=0;o<f;++o){for(var l=r.unrank(t,o),h=[0],i=0,s=0;s<l.length;++s)i+=1<<l[s],h.push(i);a(l)<1&&(h[0]=i,h[t]=0),n.push(h)}return n}},{gamma:248,"permutation-parity":509,"permutation-rank":510}],581:[function(e,d,S){d.exports=p;var r=e("filtered-vector"),a=e("gl-mat4/invert"),u=e("gl-mat4/rotate"),c=e("gl-vec3/cross"),t=e("gl-vec3/normalize"),f=e("gl-vec3/dot");function n(v,m,b){return Math.sqrt(Math.pow(v,2)+Math.pow(m,2)+Math.pow(b,2))}function o(v){return Math.min(1,Math.max(-1,v))}function l(v){var m=Math.abs(v[0]),b=Math.abs(v[1]),y=Math.abs(v[2]),x=[0,0,0];m>Math.max(b,y)?x[2]=1:b>Math.max(m,y)?x[0]=1:x[1]=1;for(var w=0,g=0,T=0;T<3;++T)w+=v[T]*v[T],g+=x[T]*v[T];for(var T=0;T<3;++T)x[T]-=g/w*v[T];return t(x,x),x}function h(v,m,b,y,x,w,g,T){this.center=r(b),this.up=r(y),this.right=r(x),this.radius=r([w]),this.angle=r([g,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(v,m),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var M=0;M<16;++M)this.computedMatrix[M]=.5;this.recalcMatrix(0)}var i=h.prototype;i.setDistanceLimits=function(v,m){v>0?v=Math.log(v):v=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=m},i.getDistanceLimits=function(v){var m=this.radius.bounds[0];return v?(v[0]=Math.exp(m[0][0]),v[1]=Math.exp(m[1][0]),v):[Math.exp(m[0][0]),Math.exp(m[1][0])]},i.recalcMatrix=function(v){this.center.curve(v),this.up.curve(v),this.right.curve(v),this.radius.curve(v),this.angle.curve(v);for(var m=this.computedUp,b=this.computedRight,y=0,x=0,w=0;w<3;++w)x+=m[w]*b[w],y+=m[w]*m[w];for(var g=Math.sqrt(y),T=0,w=0;w<3;++w)b[w]-=m[w]*x/y,T+=b[w]*b[w],m[w]/=g;for(var M=Math.sqrt(T),w=0;w<3;++w)b[w]/=M;var P=this.computedToward;c(P,m,b),t(P,P);for(var L=Math.exp(this.computedRadius[0]),I=this.computedAngle[0],C=this.computedAngle[1],k=Math.cos(I),E=Math.sin(I),R=Math.cos(C),O=Math.sin(C),N=this.computedCenter,G=k*R,U=E*R,Y=O,z=-k*O,B=-E*O,H=R,V=this.computedEye,Z=this.computedMatrix,w=0;w<3;++w){var q=G*b[w]+U*P[w]+Y*m[w];Z[4*w+1]=z*b[w]+B*P[w]+H*m[w],Z[4*w+2]=q,Z[4*w+3]=0}var J=Z[1],ne=Z[5],ve=Z[9],$=Z[2],j=Z[6],ae=Z[10],ie=ne*ae-ve*j,te=ve*$-J*ae,re=J*j-ne*$,ce=n(ie,te,re);ie/=ce,te/=ce,re/=ce,Z[0]=ie,Z[4]=te,Z[8]=re;for(var w=0;w<3;++w)V[w]=N[w]+Z[2+4*w]*L;for(var w=0;w<3;++w){for(var T=0,pe=0;pe<3;++pe)T+=Z[w+4*pe]*V[pe];Z[12+w]=-T}Z[15]=1},i.getMatrix=function(v,m){this.recalcMatrix(v);var b=this.computedMatrix;if(m){for(var y=0;y<16;++y)m[y]=b[y];return m}return b};var s=[0,0,0];i.rotate=function(v,m,b,y){if(this.angle.move(v,m,b),y){this.recalcMatrix(v);var x=this.computedMatrix;s[0]=x[2],s[1]=x[6],s[2]=x[10];for(var w=this.computedUp,g=this.computedRight,T=this.computedToward,M=0;M<3;++M)x[4*M]=w[M],x[4*M+1]=g[M],x[4*M+2]=T[M];u(x,x,y,s);for(var M=0;M<3;++M)w[M]=x[4*M],g[M]=x[4*M+1];this.up.set(v,w[0],w[1],w[2]),this.right.set(v,g[0],g[1],g[2])}},i.pan=function(v,m,b,y){m=m||0,b=b||0,y=y||0,this.recalcMatrix(v);var x=this.computedMatrix;Math.exp(this.computedRadius[0]);var w=x[1],g=x[5],T=x[9],M=n(w,g,T);w/=M,g/=M,T/=M;var P=x[0],L=x[4],I=x[8],C=P*w+L*g+I*T;P-=w*C,L-=g*C,I-=T*C;var k=n(P,L,I);P/=k,L/=k,I/=k;var E=P*m+w*b,R=L*m+g*b,O=I*m+T*b;this.center.move(v,E,R,O);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+y),this.radius.set(v,Math.log(N))},i.translate=function(v,m,b,y){this.center.move(v,m||0,b||0,y||0)},i.setMatrix=function(v,m,b,y){var x=1;typeof b=="number"&&(x=b|0),(x<0||x>3)&&(x=1);var w=(x+2)%3;m||(this.recalcMatrix(v),m=this.computedMatrix);var g=m[x],T=m[x+4],M=m[x+8];if(y){var L=Math.abs(g),I=Math.abs(T),C=Math.abs(M),k=Math.max(L,I,C);L===k?(g=g<0?-1:1,T=M=0):C===k?(M=M<0?-1:1,g=T=0):(T=T<0?-1:1,g=M=0)}else{var P=n(g,T,M);g/=P,T/=P,M/=P}var E=m[w],R=m[w+4],O=m[w+8],N=E*g+R*T+O*M;E-=g*N,R-=T*N,O-=M*N;var G=n(E,R,O);E/=G,R/=G,O/=G;var U=T*O-M*R,Y=M*E-g*O,z=g*R-T*E,B=n(U,Y,z);U/=B,Y/=B,z/=B,this.center.jump(v,be,xe,ke),this.radius.idle(v),this.up.jump(v,g,T,M),this.right.jump(v,E,R,O);var H,V;if(x===2){var Z=m[1],q=m[5],J=m[9],ne=Z*E+q*R+J*O,ve=Z*U+q*Y+J*z;ie<0?H=-Math.PI/2:H=Math.PI/2,V=Math.atan2(ve,ne)}else{var $=m[2],j=m[6],ae=m[10],ie=$*g+j*T+ae*M,te=$*E+j*R+ae*O,re=$*U+j*Y+ae*z;H=Math.asin(o(ie)),V=Math.atan2(re,te)}this.angle.jump(v,V,H),this.recalcMatrix(v);var ce=m[2],pe=m[6],fe=m[10],se=this.computedMatrix;a(se,m);var de=se[15],be=se[12]/de,xe=se[13]/de,ke=se[14]/de,Re=Math.exp(this.computedRadius[0]);this.center.jump(v,be-ce*Re,xe-pe*Re,ke-fe*Re)},i.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},i.idle=function(v){this.center.idle(v),this.up.idle(v),this.right.idle(v),this.radius.idle(v),this.angle.idle(v)},i.flush=function(v){this.center.flush(v),this.up.flush(v),this.right.flush(v),this.radius.flush(v),this.angle.flush(v)},i.setDistance=function(v,m){m>0&&this.radius.set(v,Math.log(m))},i.lookAt=function(v,m,b,y){this.recalcMatrix(v),m=m||this.computedEye,b=b||this.computedCenter,y=y||this.computedUp;var x=y[0],w=y[1],g=y[2],T=n(x,w,g);if(!(T<1e-6)){x/=T,w/=T,g/=T;var M=m[0]-b[0],P=m[1]-b[1],L=m[2]-b[2],I=n(M,P,L);if(!(I<1e-6)){M/=I,P/=I,L/=I;var C=this.computedRight,k=C[0],E=C[1],R=C[2],O=x*k+w*E+g*R;k-=O*x,E-=O*w,R-=O*g;var N=n(k,E,R);if(!(N<.01&&(k=w*L-g*P,E=g*M-x*L,R=x*P-w*M,N=n(k,E,R),N<1e-6))){k/=N,E/=N,R/=N,this.up.set(v,x,w,g),this.right.set(v,k,E,R),this.center.set(v,b[0],b[1],b[2]),this.radius.set(v,Math.log(I));var G=w*R-g*E,U=g*k-x*R,Y=x*E-w*k,z=n(G,U,Y);G/=z,U/=z,Y/=z;var B=x*M+w*P+g*L,H=k*M+E*P+R*L,V=G*M+U*P+Y*L,Z=Math.asin(o(B)),q=Math.atan2(V,H),J=this.angle._state,ne=J[J.length-1],ve=J[J.length-2];ne=ne%(2*Math.PI);var $=Math.abs(ne+2*Math.PI-q),j=Math.abs(ne-q),ae=Math.abs(ne-2*Math.PI-q);$<j&&(ne+=2*Math.PI),ae<j&&(ne-=2*Math.PI),this.angle.jump(this.angle.lastT(),ne,ve),this.angle.set(v,q,Z)}}}};function p(v){v=v||{};var m=v.center||[0,0,0],b=v.up||[0,1,0],y=v.right||l(b),x=v.radius||1,w=v.theta||0,g=v.phi||0;if(m=[].slice.call(m,0,3),b=[].slice.call(b,0,3),t(b,b),y=[].slice.call(y,0,3),t(y,y),"eye"in v){var T=v.eye,M=[T[0]-m[0],T[1]-m[1],T[2]-m[2]];c(y,M,b),n(y[0],y[1],y[2])<1e-6?y=l(b):t(y,y),x=n(M[0],M[1],M[2]);var P=f(b,M)/x,L=f(y,M)/x;g=Math.acos(P),w=Math.acos(L)}return x=Math.log(x),new h(v.zoomMin,v.zoomMax,m,b,y,x,w,g)}},{"filtered-vector":242,"gl-mat4/invert":293,"gl-mat4/rotate":299,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/normalize":387}],582:[function(e,d,S){d.exports=a;var r=+(Math.pow(2,27)+1);function a(u,c,t){var f=u*c,n=r*u,o=n-u,l=n-o,h=u-l,i=r*c,s=i-c,p=i-s,v=c-p,m=f-l*p,b=m-h*p,y=b-l*v,x=h*v-y;return t?(t[0]=x,t[1]=f,t):[x,f]}},{}],583:[function(e,d,S){d.exports=r;function r(a,u,c){var t=a+u,f=t-a,n=t-f,o=u-f,l=a-n;return c?(c[0]=l+o,c[1]=t,c):[l+o,t]}},{}],584:[function(e,d,S){var r=e("../prototype/is");d.exports=function(a){if(typeof a!="function"||!hasOwnProperty.call(a,"length"))return!1;try{if(typeof a.length!="number"||typeof a.call!="function"||typeof a.apply!="function")return!1}catch{return!1}return!r(a)}},{"../prototype/is":591}],585:[function(e,d,S){var r=e("../value/is"),a=e("../object/is"),u=e("../string/coerce"),c=e("./to-short-string"),t=function(f,n){return f.replace("%v",c(n))};d.exports=function(f,n,o){if(!a(o))throw new TypeError(t(n,f));if(!r(f)){if("default"in o)return o.default;if(o.isOptional)return null}var l=u(o.errorMessage);throw r(l)||(l=n),new TypeError(t(l,f))}},{"../object/is":588,"../string/coerce":592,"../value/is":594,"./to-short-string":587}],586:[function(e,d,S){d.exports=function(r){try{return r.toString()}catch{try{return String(r)}catch{return null}}}},{}],587:[function(e,d,S){var r=e("./safe-to-string"),a=/[\n\r\u2028\u2029]/g;d.exports=function(u){var c=r(u);return c===null?"<Non-coercible to string value>":(c.length>100&&(c=c.slice(0,99)+"\u2026"),c=c.replace(a,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),c)}},{"./safe-to-string":586}],588:[function(e,d,S){var r=e("../value/is"),a={object:!0,function:!0,undefined:!0};d.exports=function(u){return r(u)?hasOwnProperty.call(a,typeof u):!1}},{"../value/is":594}],589:[function(e,d,S){var r=e("../lib/resolve-exception"),a=e("./is");d.exports=function(u){return a(u)?u:r(u,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":585,"./is":590}],590:[function(e,d,S){var r=e("../function/is"),a=/^\s*class[\s{/}]/,u=Function.prototype.toString;d.exports=function(c){return!(!r(c)||a.test(u.call(c)))}},{"../function/is":584}],591:[function(e,d,S){var r=e("../object/is");d.exports=function(a){if(!r(a))return!1;try{return a.constructor?a.constructor.prototype===a:!1}catch{return!1}}},{"../object/is":588}],592:[function(e,d,S){var r=e("../value/is"),a=e("../object/is"),u=Object.prototype.toString;d.exports=function(c){if(!r(c))return null;if(a(c)){var t=c.toString;if(typeof t!="function"||t===u)return null}try{return""+c}catch{return null}}},{"../object/is":588,"../value/is":594}],593:[function(e,d,S){var r=e("../lib/resolve-exception"),a=e("./is");d.exports=function(u){return a(u)?u:r(u,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":585,"./is":594}],594:[function(e,d,S){var r=void 0;d.exports=function(a){return a!==r&&a!==null}},{}],595:[function(e,d,S){(function(r){(function(){var a=e("bit-twiddle"),u=e("dup"),c=e("buffer").Buffer;r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:u([32,0]),UINT16:u([32,0]),UINT32:u([32,0]),BIGUINT64:u([32,0]),INT8:u([32,0]),INT16:u([32,0]),INT32:u([32,0]),BIGINT64:u([32,0]),FLOAT:u([32,0]),DOUBLE:u([32,0]),DATA:u([32,0]),UINT8C:u([32,0]),BUFFER:u([32,0])});var t=typeof Uint8ClampedArray<"u",f=typeof BigUint64Array<"u",n=typeof BigInt64Array<"u",o=r.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=u([32,0])),o.BIGUINT64||(o.BIGUINT64=u([32,0])),o.BIGINT64||(o.BIGINT64=u([32,0])),o.BUFFER||(o.BUFFER=u([32,0]));var l=o.DATA,h=o.BUFFER;S.free=function(E){if(c.isBuffer(E))h[a.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var R=E.length||E.byteLength,O=a.log2(R)|0;l[O].push(E)}};function i(k){if(!!k){var E=k.length||k.byteLength,R=a.log2(E);l[R].push(k)}}function s(k){i(k.buffer)}S.freeUint8=S.freeUint16=S.freeUint32=S.freeBigUint64=S.freeInt8=S.freeInt16=S.freeInt32=S.freeBigInt64=S.freeFloat32=S.freeFloat=S.freeFloat64=S.freeDouble=S.freeUint8Clamped=S.freeDataView=s,S.freeArrayBuffer=i,S.freeBuffer=function(E){h[a.log2(E.length)].push(E)},S.malloc=function(E,R){if(R===void 0||R==="arraybuffer")return p(E);switch(R){case"uint8":return v(E);case"uint16":return m(E);case"uint32":return b(E);case"int8":return y(E);case"int16":return x(E);case"int32":return w(E);case"float":case"float32":return g(E);case"double":case"float64":return T(E);case"uint8_clamped":return M(E);case"bigint64":return L(E);case"biguint64":return P(E);case"buffer":return C(E);case"data":case"dataview":return I(E);default:return null}return null};function p(E){var E=a.nextPow2(E),R=a.log2(E),O=l[R];return O.length>0?O.pop():new ArrayBuffer(E)}S.mallocArrayBuffer=p;function v(k){return new Uint8Array(p(k),0,k)}S.mallocUint8=v;function m(k){return new Uint16Array(p(2*k),0,k)}S.mallocUint16=m;function b(k){return new Uint32Array(p(4*k),0,k)}S.mallocUint32=b;function y(k){return new Int8Array(p(k),0,k)}S.mallocInt8=y;function x(k){return new Int16Array(p(2*k),0,k)}S.mallocInt16=x;function w(k){return new Int32Array(p(4*k),0,k)}S.mallocInt32=w;function g(k){return new Float32Array(p(4*k),0,k)}S.mallocFloat32=S.mallocFloat=g;function T(k){return new Float64Array(p(8*k),0,k)}S.mallocFloat64=S.mallocDouble=T;function M(k){return t?new Uint8ClampedArray(p(k),0,k):v(k)}S.mallocUint8Clamped=M;function P(k){return f?new BigUint64Array(p(8*k),0,k):null}S.mallocBigUint64=P;function L(k){return n?new BigInt64Array(p(8*k),0,k):null}S.mallocBigInt64=L;function I(k){return new DataView(p(k),0,k)}S.mallocDataView=I;function C(k){k=a.nextPow2(k);var E=a.log2(k),R=h[E];return R.length>0?R.pop():new c(k)}S.mallocBuffer=C,S.clearCache=function(){for(var E=0;E<32;++E)o.UINT8[E].length=0,o.UINT16[E].length=0,o.UINT32[E].length=0,o.INT8[E].length=0,o.INT16[E].length=0,o.INT32[E].length=0,o.FLOAT[E].length=0,o.DOUBLE[E].length=0,o.BIGUINT64[E].length=0,o.BIGINT64[E].length=0,o.UINT8C[E].length=0,l[E].length=0,h[E].length=0}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],596:[function(e,d,S){d.exports=r;function r(u){this.roots=new Array(u),this.ranks=new Array(u);for(var c=0;c<u;++c)this.roots[c]=c,this.ranks[c]=0}var a=r.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var u=this.roots.length;return this.roots.push(u),this.ranks.push(0),u},a.find=function(u){for(var c=u,t=this.roots;t[u]!==u;)u=t[u];for(;t[c]!==u;){var f=t[c];t[c]=u,c=f}return u},a.link=function(u,c){var t=this.find(u),f=this.find(c);if(t!==f){var n=this.ranks,o=this.roots,l=n[t],h=n[f];l<h?o[t]=f:h<l?o[f]=t:(o[f]=t,++n[t])}}},{}],597:[function(e,d,S){function r(c,t){for(var f=1,n=c.length,o=c[0],l=c[0],h=1;h<n;++h)if(l=o,o=c[h],t(o,l)){if(h===f){f++;continue}c[f++]=o}return c.length=f,c}function a(c){for(var t=1,f=c.length,n=c[0],o=c[0],l=1;l<f;++l,o=n)if(o=n,n=c[l],n!==o){if(l===t){t++;continue}c[t++]=n}return c.length=t,c}function u(c,t,f){return c.length===0?c:t?(f||c.sort(t),r(c,t)):(f||c.sort(),a(c))}d.exports=u},{}],598:[function(e,d,S){var r=/[\'\"]/;d.exports=function(u){return u?(r.test(u.charAt(0))&&(u=u.substr(1)),r.test(u.charAt(u.length-1))&&(u=u.substr(0,u.length-1)),u):""}},{}],599:[function(e,d,S){d.exports=function(a,u,c){Array.isArray(c)||(c=[].slice.call(arguments,2));for(var t=0,f=c.length;t<f;t++){var n=c[t];for(var o in n)if(!(u[o]!==void 0&&!Array.isArray(u[o])&&a[o]===u[o])&&o in u){var l;if(n[o]===!0)l=u[o];else{if(n[o]===!1)continue;if(typeof n[o]=="function"&&(l=n[o](u[o],a,u),l===void 0))continue}a[o]=l}}return a}},{}],600:[function(e,d,S){d.exports=c;var r=e("./lib/vtext"),a=null,u=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,u=a.getContext("2d"));function c(t,f){return(typeof f!="object"||f===null)&&(f={}),r(t,f.canvas||a,f.context||u,f)}},{"./lib/vtext":601}],601:[function(e,d,S){d.exports=P,d.exports.processPixels=M;var r=e("surface-nets"),a=e("ndarray"),u=e("simplify-planar-graph"),c=e("clean-pslg"),t=e("cdt2d"),f=e("planar-graph-to-polyline"),n="b",o="b|",l="i",h="i|",i="sup",s="+",p="+1",v="sub",m="-",b="-1";function y(L,I,C,k){for(var E="<"+L+">",R="</"+L+">",O=E.length,N=R.length,G=I[0]===s||I[0]===m,U=0,Y=-N;U>-1&&(U=C.indexOf(E,U),!(U===-1||(Y=C.indexOf(R,U+O),Y===-1)||Y<=U));){for(var z=U;z<Y+N;++z)if(z<U+O||z>=Y)k[z]=null,C=C.substr(0,z)+" "+C.substr(z+1);else if(k[z]!==null){var B=k[z].indexOf(I[0]);B===-1?k[z]+=I:G&&(k[z]=k[z].substr(0,B+1)+(1+parseInt(k[z][B+1]))+k[z].substr(B+2))}var H=U+O,V=C.substr(H,Y-H),Z=V.indexOf(E);Z!==-1?U=Z:U=Y+N}return k}function x(L,I,C){for(var k=I.textAlign||"start",E=I.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],N=L.length,G=0;G<N;++G)for(var U=L[G],Y=0;Y<2;++Y)R[Y]=Math.min(R[Y],U[Y])|0,O[Y]=Math.max(O[Y],U[Y])|0;var z=0;switch(k){case"center":z=-.5*(R[0]+O[0]);break;case"right":case"end":z=-O[0];break;case"left":case"start":z=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+k+"'")}var B=0;switch(E){case"hanging":case"top":B=-R[1];break;case"middle":B=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":B=-3*C;break;case"bottom":B=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+E+"'")}var H=1/C;return"lineHeight"in I?H*=+I.lineHeight:"width"in I?H=I.width/(O[0]-R[0]):"height"in I&&(H=I.height/(O[1]-R[1])),L.map(function(V){return[H*(V[0]+z),H*(V[1]+B)]})}function w(L,I,C,k,E,R){C=C.replace(/\n/g,""),R.breaklines===!0?C=C.replace(/\<br\>/g,`
`):C=C.replace(/\<br\>/g," ");var O="",N=[];for(ne=0;ne<C.length;++ne)N[ne]=O;R.bolds===!0&&(N=y(n,o,C,N)),R.italics===!0&&(N=y(l,h,C,N)),R.superscripts===!0&&(N=y(i,p,C,N)),R.subscripts===!0&&(N=y(v,b,C,N));var G=[],U="";for(ne=0;ne<C.length;++ne)N[ne]!==null&&(U+=C[ne],G.push(N[ne]));var Y=U.split(`
`),z=Y.length,B=Math.round(E*k),H=k,V=k*2,Z=0,q=z*B+V;L.height<q&&(L.height=q),I.fillStyle="#000",I.fillRect(0,0,L.width,L.height),I.fillStyle="#fff";var J,ne,ve,$,j,ae=0,ie="";function te(){if(ie!==""){var ke=I.measureText(ie).width;I.fillText(ie,H+ve,V+$),ve+=ke}}function re(){return""+Math.round(j)+"px "}function ce(ke,Re){var Ke=""+I.font;if(R.subscripts===!0){var ze=ke.indexOf(m),Je=Re.indexOf(m),qe=ze>-1?parseInt(ke[1+ze]):0,Ee=Je>-1?parseInt(Re[1+Je]):0;qe!==Ee&&(Ke=Ke.replace(re(),"?px "),j*=Math.pow(.75,Ee-qe),Ke=Ke.replace("?px ",re())),$+=.25*B*(Ee-qe)}if(R.superscripts===!0){var Ae=ke.indexOf(s),Be=Re.indexOf(s),$e=Ae>-1?parseInt(ke[1+Ae]):0,xt=Be>-1?parseInt(Re[1+Be]):0;$e!==xt&&(Ke=Ke.replace(re(),"?px "),j*=Math.pow(.75,xt-$e),Ke=Ke.replace("?px ",re())),$-=.25*B*(xt-$e)}if(R.bolds===!0){var bt=ke.indexOf(o)>-1,Ne=Re.indexOf(o)>-1;!bt&&Ne&&(st?Ke=Ke.replace("italic ","italic bold "):Ke="bold "+Ke),bt&&!Ne&&(Ke=Ke.replace("bold ",""))}if(R.italics===!0){var st=ke.indexOf(h)>-1,_t=Re.indexOf(h)>-1;!st&&_t&&(Ke="italic "+Ke),st&&!_t&&(Ke=Ke.replace("italic ",""))}I.font=Ke}for(J=0;J<z;++J){var pe=Y[J]+`
`;for(ve=0,$=J*B,j=k,ie="",ne=0;ne<pe.length;++ne){var fe=ne+ae<G.length?G[ne+ae]:G[G.length-1];O===fe?ie+=pe[ne]:(te(),ie=pe[ne],fe!==void 0&&(ce(O,fe),O=fe))}te(),ae+=pe.length;var se=Math.round(ve+2*H)|0;Z<se&&(Z=se)}var de=Z,be=V+B*z,xe=a(I.getImageData(0,0,de,be).data,[be,de,4]);return xe.pick(-1,-1,0).transpose(1,0)}function g(L,I){var C=r(L,128);return I?u(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions}}function T(L,I,C,k){var E=g(L,k),R=x(E.positions,I,C),O=E.edges,N=I.orientation==="ccw";if(c(R,O),I.polygons||I.polygon||I.polyline){for(var G=f(O,R),U=new Array(G.length),Y=0;Y<G.length;++Y){for(var z=G[Y],B=new Array(z.length),H=0;H<z.length;++H){for(var V=z[H],Z=new Array(V.length),q=0;q<V.length;++q)Z[q]=R[V[q]].slice();N&&Z.reverse(),B[H]=Z}U[Y]=B}return U}else return I.triangles||I.triangulate||I.triangle?{cells:t(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function M(L,I,C){try{return T(L,I,C,!0)}catch{}try{return T(L,I,C,!1)}catch{}return I.polygons||I.polyline||I.polygon?[]:I.triangles||I.triangulate||I.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function P(L,I,C,k){var E=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};k&&(k.size&&k.size>0&&(E=k.size),k.lineSpacing&&k.lineSpacing>0&&(R=k.lineSpacing),k.styletags&&k.styletags.breaklines&&(O.breaklines=!!k.styletags.breaklines),k.styletags&&k.styletags.bolds&&(O.bolds=!!k.styletags.bolds),k.styletags&&k.styletags.italics&&(O.italics=!!k.styletags.italics),k.styletags&&k.styletags.subscripts&&(O.subscripts=!!k.styletags.subscripts),k.styletags&&k.styletags.superscripts&&(O.superscripts=!!k.styletags.superscripts)),C.font=[k.fontStyle,k.fontVariant,k.fontWeight,E+"px",k.font].filter(function(G){return G}).join(" "),C.textAlign="start",C.textBaseline="alphabetic",C.direction="ltr";var N=w(I,C,L,E,R,O);return M(N,k,E)}},{cdt2d:112,"clean-pslg":121,ndarray:495,"planar-graph-to-polyline":514,"simplify-planar-graph":562,"surface-nets":570}],602:[function(e,d,S){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(M){M.permitHostObjects___&&M.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var u=!1;if(typeof WeakMap=="function"){var c=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new c,f=Object.freeze({});if(t.set(f,1),t.get(f)!==1)u=!0;else{d.exports=WeakMap;return}}}var n=Object.getOwnPropertyNames,o=Object.defineProperty,l=Object.isExtensible,h="weakmap:",i=h+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var s=new ArrayBuffer(25),p=new Uint8Array(s);crypto.getRandomValues(p),i=h+"rand:"+Array.prototype.map.call(p,function(M){return(M%36).toString(36)}).join("")+"___"}function v(M){return!(M.substr(0,h.length)==h&&M.substr(M.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(P){return n(P).filter(v)}}),"getPropertyNames"in Object){var m=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(P){return m(P).filter(v)}})}function b(M){if(M!==Object(M))throw new TypeError("Not an object: "+M);var P=M[i];if(P&&P.key===M)return P;if(!!l(M)){P={key:M};try{return o(M,i,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}(function(){var M=Object.freeze;o(Object,"freeze",{value:function(C){return b(C),M(C)}});var P=Object.seal;o(Object,"seal",{value:function(C){return b(C),P(C)}});var L=Object.preventExtensions;o(Object,"preventExtensions",{value:function(C){return b(C),L(C)}})})();function y(M){return M.prototype=null,Object.freeze(M)}var x=!1;function w(){!x&&typeof console<"u"&&(x=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var g=0,T=function(){this instanceof T||w();var M=[],P=[],L=g++;function I(R,O){var N,G=b(R);return G?L in G?G[L]:O:(N=M.indexOf(R),N>=0?P[N]:O)}function C(R){var O=b(R);return O?L in O:M.indexOf(R)>=0}function k(R,O){var N,G=b(R);return G?G[L]=O:(N=M.indexOf(R),N>=0?P[N]=O:(N=M.length,P[N]=O,M[N]=R)),this}function E(R){var O=b(R),N,G;return O?L in O&&delete O[L]:(N=M.indexOf(R),N<0?!1:(G=M.length-1,M[N]=void 0,P[N]=P[G],M[N]=M[G],M.length=G,P.length=G,!0))}return Object.create(T.prototype,{get___:{value:y(I)},has___:{value:y(C)},set___:{value:y(k)},delete___:{value:y(E)}})};T.prototype=Object.create(Object.prototype,{get:{value:function(P,L){return this.get___(P,L)},writable:!0,configurable:!0},has:{value:function(P){return this.has___(P)},writable:!0,configurable:!0},set:{value:function(P,L){return this.set___(P,L)},writable:!0,configurable:!0},delete:{value:function(P){return this.delete___(P)},writable:!0,configurable:!0}}),typeof c=="function"?function(){u&&typeof Proxy<"u"&&(Proxy=void 0);function M(){this instanceof T||w();var P=new c,L=void 0,I=!1;function C(O,N){return L?P.has(O)?P.get(O):L.get___(O,N):P.get(O,N)}function k(O){return P.has(O)||(L?L.has___(O):!1)}var E;u?E=function(O,N){return P.set(O,N),P.has(O)||(L||(L=new T),L.set(O,N)),this}:E=function(O,N){if(I)try{P.set(O,N)}catch{L||(L=new T),L.set___(O,N)}else P.set(O,N);return this};function R(O){var N=!!P.delete(O);return L&&L.delete___(O)||N}return Object.create(T.prototype,{get___:{value:y(C)},has___:{value:y(k)},set___:{value:y(E)},delete___:{value:y(R)},permitHostObjects___:{value:y(function(O){if(O===a)I=!0;else throw new Error("bogus call to permitHostObjects___")})}})}M.prototype=T.prototype,d.exports=M,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),d.exports=T)})()},{}],603:[function(e,d,S){var r=e("./hidden-store.js");d.exports=a;function a(){var u={};return function(c){if((typeof c!="object"||c===null)&&typeof c!="function")throw new Error("Weakmap-shim: Key must be object");var t=c.valueOf(u);return t&&t.identity===u?t:r(c,u)}}},{"./hidden-store.js":604}],604:[function(e,d,S){d.exports=r;function r(a,u){var c={identity:u},t=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(f){return f!==u?t.apply(this,arguments):c},writable:!0}),c}},{}],605:[function(e,d,S){var r=e("./create-store.js");d.exports=a;function a(){var u=r();return{get:function(c,t){var f=u(c);return f.hasOwnProperty("value")?f.value:t},set:function(c,t){return u(c).value=t,this},has:function(c){return"value"in u(c)},delete:function(c){return delete u(c).value}}}},{"./create-store.js":603}],606:[function(e,d,S){var r=e("get-canvas-context");d.exports=function(u){return r("webgl",u)}},{"get-canvas-context":249}],607:[function(e,d,S){var r=e("../main"),a=e("object-assign"),u=r.instance();function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,a(c.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(p,v){if(typeof p=="string"){var m=p.match(f);return m?m[0]:""}var b=this._validateYear(p),y=p.month(),x=""+this.toChineseMonth(b,y);return v&&x.length<2&&(x="0"+x),this.isIntercalaryMonth(b,y)&&(x+="i"),x},monthNames:function(p){if(typeof p=="string"){var v=p.match(n);return v?v[0]:""}var m=this._validateYear(p),b=p.month(),y=this.toChineseMonth(m,b),x=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(m,b)&&(x="\u95F0"+x),x},monthNamesShort:function(p){if(typeof p=="string"){var v=p.match(o);return v?v[0]:""}var m=this._validateYear(p),b=p.month(),y=this.toChineseMonth(m,b),x=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(m,b)&&(x="\u95F0"+x),x},parseMonth:function(p,v){p=this._validateYear(p);var m=parseInt(v),b;if(isNaN(m))v[0]==="\u95F0"&&(b=!0,v=v.substring(1)),v[v.length-1]==="\u6708"&&(v=v.substring(0,v.length-1)),m=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(v);else{var y=v[v.length-1];b=y==="i"||y==="I"}var x=this.toMonthIndex(p,m,b);return x},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(p,v){if(p.year&&(p=p.year()),typeof p!="number"||p<1888||p>2111)throw v.replace(/\{0\}/,this.local.name);return p},toMonthIndex:function(p,v,m){var b=this.intercalaryMonth(p),y=m&&v!==b;if(y||v<1||v>12)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var x;return b?!m&&v<=b?x=v-1:x=v:x=v-1,x},toChineseMonth:function(p,v){p.year&&(p=p.year(),v=p.month());var m=this.intercalaryMonth(p),b=m?12:11;if(v<0||v>b)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return m?v<m?y=v+1:y=v:y=v+1,y},intercalaryMonth:function(p){p=this._validateYear(p);var v=l[p-l[0]],m=v>>13;return m},isIntercalaryMonth:function(p,v){p.year&&(p=p.year(),v=p.month());var m=this.intercalaryMonth(p);return!!m&&m===v},leapYear:function(p){return this.intercalaryMonth(p)!==0},weekOfYear:function(p,v,m){var b=this._validateYear(p,r.local.invalidyear),y=h[b-h[0]],x=y>>9&4095,w=y>>5&15,g=y&31,T;T=u.newDate(x,w,g),T.add(4-(T.dayOfWeek()||7),"d");var M=this.toJD(p,v,m)-T.toJD();return 1+Math.floor(M/7)},monthsInYear:function(p){return this.leapYear(p)?13:12},daysInMonth:function(p,v){p.year&&(v=p.month(),p=p.year()),p=this._validateYear(p);var m=l[p-l[0]],b=m>>13,y=b?12:11;if(v>y)throw r.local.invalidMonth.replace(/\{0\}/,this.local.name);var x=m&1<<12-v?30:29;return x},weekDay:function(p,v,m){return(this.dayOfWeek(p,v,m)||7)<6},toJD:function(p,v,m){var b=this._validate(p,x,m,r.local.invalidDate);p=this._validateYear(b.year()),v=b.month(),m=b.day();var y=this.isIntercalaryMonth(p,v),x=this.toChineseMonth(p,v),w=s(p,x,m,y);return u.toJD(w.year,w.month,w.day)},fromJD:function(p){var v=u.fromJD(p),m=i(v.year(),v.month(),v.day()),b=this.toMonthIndex(m.year,m.month,m.isIntercalary);return this.newDate(m.year,b,m.day)},fromString:function(p){var v=p.match(t),m=this._validateYear(+v[1]),b=+v[2],y=!!v[3],x=this.toMonthIndex(m,b,y),w=+v[4];return this.newDate(m,x,w)},add:function(p,v,m){var b=p.year(),y=p.month(),x=this.isIntercalaryMonth(b,y),w=this.toChineseMonth(b,y),g=Object.getPrototypeOf(c.prototype).add.call(this,p,v,m);if(m==="y"){var T=g.year(),M=g.month(),P=this.isIntercalaryMonth(T,w),L=x&&P?this.toMonthIndex(T,w,!0):this.toMonthIndex(T,w,!1);L!==M&&g.month(L)}return g}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,n=/^??[]?/m,o=/^??[]?/m;r.calendars.chinese=c;var l=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],h=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function i(p,v,m,b){var y,x;if(typeof p=="object")y=p,x=v||{};else{var w=typeof p=="number"&&p>=1888&&p<=2111;if(!w)throw new Error("Solar year outside range 1888-2111");var g=typeof v=="number"&&v>=1&&v<=12;if(!g)throw new Error("Solar month outside range 1 - 12");var T=typeof m=="number"&&m>=1&&m<=31;if(!T)throw new Error("Solar day outside range 1 - 31");y={year:p,month:v,day:m},x=b||{}}var M=h[y.year-h[0]],P=y.year<<9|y.month<<5|y.day;x.year=P>=M?y.year:y.year-1,M=h[x.year-h[0]];var L=M>>9&4095,I=M>>5&15,C=M&31,k,E=new Date(L,I-1,C),R=new Date(y.year,y.month-1,y.day);k=Math.round((R-E)/(24*3600*1e3));var O=l[x.year-l[0]],N;for(N=0;N<13;N++){var G=O&1<<12-N?30:29;if(k<G)break;k-=G}var U=O>>13;return!U||N<U?(x.isIntercalary=!1,x.month=1+N):N===U?(x.isIntercalary=!0,x.month=N):(x.isIntercalary=!1,x.month=N),x.day=1+k,x}function s(p,v,m,b,y){var x,w;if(typeof p=="object")w=p,x=v||{};else{var g=typeof p=="number"&&p>=1888&&p<=2111;if(!g)throw new Error("Lunar year outside range 1888-2111");var T=typeof v=="number"&&v>=1&&v<=12;if(!T)throw new Error("Lunar month outside range 1 - 12");var M=typeof m=="number"&&m>=1&&m<=30;if(!M)throw new Error("Lunar day outside range 1 - 30");var P;typeof b=="object"?(P=!1,x=b):(P=!!b,x=y||{}),w={year:p,month:v,day:m,isIntercalary:P}}var L;L=w.day-1;var I=l[w.year-l[0]],C=I>>13,k;C&&(w.month>C||w.isIntercalary)?k=w.month:k=w.month-1;for(var E=0;E<k;E++){var R=I&1<<12-E?30:29;L+=R}var O=h[w.year-h[0]],N=O>>9&4095,G=O>>5&15,U=O&31,Y=new Date(N,G-1,U+L);return x.year=Y.getFullYear(),x.month=1+Y.getMonth(),x.day=Y.getDate(),x}},{"../main":621,"object-assign":499}],608:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===3||f%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),c<0&&c++,n.day()+(n.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var t=Math.floor(c)+.5-this.jdEpoch,f=Math.floor((t-Math.floor((t+366)/1461))/365)+1;f<=0&&f--,t=Math.floor(c)+.5-this.newDate(f,1,1).toJD();var n=Math.floor(t/30)+1,o=t-(n-1)*30+1;return this.newDate(f,n,o)}}),r.calendars.coptic=u},{"../main":621,"object-assign":499}],609:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),400},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/8)+1},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return(o.day()+1)%8},weekDay:function(t,f,n){var o=this.dayOfWeek(t,f,n);return o>=2&&o<=6},extraInfo:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return{century:c[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return t=o.year()+(o.year()<0?1:0),f=o.month(),n=o.day(),n+(f>1?16:0)+(f>2?(f-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(t/400)+1;t-=(f-1)*400,t+=t>15?16:0;var n=Math.floor(t/32)+1,o=t-(n-1)*32+1;return this.newDate(f<=0?f-1:f,n,o)}});var c={20:"Fruitbat",21:"Anchovy"};r.calendars.discworld=u},{"../main":621,"object-assign":499}],610:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===3||f%4===-1},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),c<0&&c++,n.day()+(n.month()-1)*30+(c-1)*365+Math.floor(c/4)+this.jdEpoch-1},fromJD:function(c){var t=Math.floor(c)+.5-this.jdEpoch,f=Math.floor((t-Math.floor((t+366)/1461))/365)+1;f<=0&&f--,t=Math.floor(c)+.5-this.newDate(f,1,1).toJD();var n=Math.floor(t/30)+1,o=t-(n-1)*30+1;return this.newDate(f,n,o)}}),r.calendars.ethiopian=u},{"../main":621,"object-assign":499}],611:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(t){return t=t<0?t+1:t,c(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,r.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return t=f.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,f){return t.year&&(f=t.month(),t=t.year()),this._validate(t,f,this.minDay,r.local.invalidMonth),f===12&&this.leapYear(t)||f===8&&c(this.daysInYear(t),10)===5?30:f===9&&c(this.daysInYear(t),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(t,f,n){return this.dayOfWeek(t,f,n)!==6},extraInfo:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);t=o.year(),f=o.month(),n=o.day();var l=t<=0?t+1:t,h=this.jdEpoch+this._delay1(l)+this._delay2(l)+n+1;if(f<7){for(var i=7;i<=this.monthsInYear(t);i++)h+=this.daysInMonth(t,i);for(var i=1;i<f;i++)h+=this.daysInMonth(t,i)}else for(var i=7;i<f;i++)h+=this.daysInMonth(t,i);return h},_delay1:function(t){var f=Math.floor((235*t-234)/19),n=12084+13753*f,o=f*29+Math.floor(n/25920);return c(3*(o+1),7)<3&&o++,o},_delay2:function(t){var f=this._delay1(t-1),n=this._delay1(t),o=this._delay1(t+1);return o-n===356?2:n-f===382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var f=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var n=t<this.toJD(f,1,1)?7:1;t>this.toJD(f,n,this.daysInMonth(f,n));)n++;var o=t-this.toJD(f,n,1)+1;return this.newDate(f,n,o)}});function c(t,f){return t-f*Math.floor(t/f)}r.calendars.hebrew=u},{"../main":621,"object-assign":499}],612:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(c){var t=this._validate(c,this.minMonth,this.minDay,r.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(c){return this.leapYear(c)?355:354},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return this.dayOfWeek(c,t,f)!==5},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),t=n.month(),f=n.day(),c=c<=0?c+1:c,f+Math.ceil(29.5*(t-1))+(c-1)*354+Math.floor((3+11*c)/30)+this.jdEpoch-1},fromJD:function(c){c=Math.floor(c)+.5;var t=Math.floor((30*(c-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var f=Math.min(12,Math.ceil((c-29-this.toJD(t,1,1))/29.5)+1),n=c-this.toJD(t,f,1)+1;return this.newDate(t,f,n)}}),r.calendars.islamic=u},{"../main":621,"object-assign":499}],613:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),f=t.year()<0?t.year()+1:t.year();return f%4===0},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(c,t){var f=this._validate(c,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(c,t,f){return(this.dayOfWeek(c,t,f)||7)<6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);return c=n.year(),t=n.month(),f=n.day(),c<0&&c++,t<=2&&(c--,t+=12),Math.floor(365.25*(c+4716))+Math.floor(30.6001*(t+1))+f-1524.5},fromJD:function(c){var t=Math.floor(c+.5),f=t+1524,n=Math.floor((f-122.1)/365.25),o=Math.floor(365.25*n),l=Math.floor((f-o)/30.6001),h=l-Math.floor(l<14?1:13),i=n-Math.floor(h>2?4716:4715),s=f-o-Math.floor(30.6001*l);return i<=0&&i--,this.newDate(i,h,s)}}),r.calendars.julian=u},{"../main":621,"object-assign":499}],614:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(f){var n=this._validate(f,this.minMonth,this.minDay,r.local.invalidYear);f=n.year();var o=Math.floor(f/400);f=f%400,f+=f<0?400:0;var l=Math.floor(f/20);return o+"."+l+"."+f%20},forYear:function(f){if(f=f.split("."),f.length<3)throw"Invalid Mayan year";for(var n=0,o=0;o<f.length;o++){var l=parseInt(f[o],10);if(Math.abs(l)>19||o>0&&l<0)throw"Invalid Mayan year";n=n*20+l}return n},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(f,n,o){return this._validate(f,n,o,r.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(f,n){return this._validate(f,n,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,n,o){var l=this._validate(f,n,o,r.local.invalidDate);return l.day()},weekDay:function(f,n,o){return this._validate(f,n,o,r.local.invalidDate),!0},extraInfo:function(f,n,o){var l=this._validate(f,n,o,r.local.invalidDate),h=l.toJD(),i=this._toHaab(h),s=this._toTzolkin(h);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(f){f-=this.jdEpoch;var n=c(f+8+(18-1)*20,365);return[Math.floor(n/20)+1,c(n,20)]},_toTzolkin:function(f){return f-=this.jdEpoch,[t(f+20,20),t(f+4,13)]},toJD:function(f,n,o){var l=this._validate(f,n,o,r.local.invalidDate);return l.day()+l.month()*20+l.year()*360+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var n=Math.floor(f/360);f=f%360,f+=f<0?360:0;var o=Math.floor(f/20),l=f%20;return this.newDate(n,o,l)}});function c(f,n){return f-n*Math.floor(f/n)}function t(f,n){return c(f-1,n)+1}r.calendars.mayan=u},{"../main":621,"object-assign":499}],615:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar;var c=r.instance("gregorian");a(u.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear);return c.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(1-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return(this.dayOfWeek(t,f,n)||7)<6},toJD:function(l,f,n){var o=this._validate(l,f,n,r.local.invalidMonth),l=o.year();l<0&&l++;for(var h=o.day(),i=1;i<o.month();i++)h+=this.daysPerMonth[i-1];return h+c.toJD(l+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var f=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(f+1,1,1);)f++;for(var n=t-Math.floor(this.toJD(f,1,1)+.5)+1,o=1;n>this.daysInMonth(f,o);)n-=this.daysInMonth(f,o),o++;return this.newDate(f,o,n)}}),r.calendars.nanakshahi=u},{"../main":621,"object-assign":499}],616:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(c){return this.daysInYear(c)!==this.daysPerYear},weekOfYear:function(c,t,f){var n=this.newDate(c,t,f);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(c){var t=this._validate(c,this.minMonth,this.minDay,r.local.invalidYear);if(c=t.year(),typeof this.NEPALI_CALENDAR_DATA[c]>"u")return this.daysPerYear;for(var f=0,n=this.minMonth;n<=12;n++)f+=this.NEPALI_CALENDAR_DATA[c][n];return f},daysInMonth:function(c,t){return c.year&&(t=c.month(),c=c.year()),this._validate(c,t,this.minDay,r.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[c]>"u"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[c][t]},weekDay:function(c,t,f){return this.dayOfWeek(c,t,f)!==6},toJD:function(c,t,f){var n=this._validate(c,t,f,r.local.invalidDate);c=n.year(),t=n.month(),f=n.day();var o=r.instance(),l=0,h=t,i=c;this._createMissingCalendarData(c);var s=c-(h>9||h===9&&f>=this.NEPALI_CALENDAR_DATA[i][0]?56:57);for(t!==9&&(l=f,h--);h!==9;)h<=0&&(h=12,i--),l+=this.NEPALI_CALENDAR_DATA[i][h],h--;return t===9?(l+=f-this.NEPALI_CALENDAR_DATA[i][0],l<0&&(l+=o.daysInYear(s))):l+=this.NEPALI_CALENDAR_DATA[i][9]-this.NEPALI_CALENDAR_DATA[i][0],o.newDate(s,1,1).add(l,"d").toJD()},fromJD:function(c){var t=r.instance(),f=t.fromJD(c),n=f.year(),o=f.dayOfYear(),l=n+56;this._createMissingCalendarData(l);for(var h=9,i=this.NEPALI_CALENDAR_DATA[l][0],s=this.NEPALI_CALENDAR_DATA[l][h]-i+1;o>s;)h++,h>12&&(h=1,l++),s+=this.NEPALI_CALENDAR_DATA[l][h];var p=this.NEPALI_CALENDAR_DATA[l][h]-(s-o);return this.newDate(l,h,p)},_createMissingCalendarData:function(c){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var f=c-1;f<c+2;f++)typeof this.NEPALI_CALENDAR_DATA[f]>"u"&&(this.NEPALI_CALENDAR_DATA[f]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),r.calendars.nepali=u},{"../main":621,"object-assign":499}],617:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return((f.year()-(f.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-((o.dayOfWeek()+1)%7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return this.dayOfWeek(t,f,n)!==5},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate);t=o.year(),f=o.month(),n=o.day();var l=t-(t>=0?474:473),h=474+c(l,2820);return n+(f<=7?(f-1)*31:(f-1)*30+6)+Math.floor((h*682-110)/2816)+(h-1)*365+Math.floor(l/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var f=t-this.toJD(475,1,1),n=Math.floor(f/1029983),o=c(f,1029983),l=2820;if(o!==1029982){var h=Math.floor(o/366),i=c(o,366);l=Math.floor((2134*h+2816*i+2815)/1028522)+h+1}var s=l+2820*n+474;s=s<=0?s-1:s;var p=t-this.toJD(s,1,1)+1,v=p<=186?Math.ceil(p/31):Math.ceil((p-6)/30),m=t-this.toJD(s,v,1)+1;return this.newDate(s,v,m)}});function c(t,f){return t-f*Math.floor(t/f)}r.calendars.persian=u,r.calendars.jalali=u},{"../main":621,"object-assign":499}],618:[function(e,d,S){var r=e("../main"),a=e("object-assign"),u=r.instance();function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,a(c.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(n){var f=this._validate(n,this.minMonth,this.minDay,r.local.invalidYear),n=this._t2gYear(f.year());return u.leapYear(n)},weekOfYear:function(l,f,n){var o=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear),l=this._t2gYear(o.year());return u.weekOfYear(l,o.month(),o.day())},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return(this.dayOfWeek(t,f,n)||7)<6},toJD:function(l,f,n){var o=this._validate(l,f,n,r.local.invalidDate),l=this._t2gYear(o.year());return u.toJD(l,o.month(),o.day())},fromJD:function(t){var f=u.fromJD(t),n=this._g2tYear(f.year());return this.newDate(n,f.month(),f.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),r.calendars.taiwan=c},{"../main":621,"object-assign":499}],619:[function(e,d,S){var r=e("../main"),a=e("object-assign"),u=r.instance();function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new r.baseCalendar,a(c.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var f=this._validate(n,this.minMonth,this.minDay,r.local.invalidYear),n=this._t2gYear(f.year());return u.leapYear(n)},weekOfYear:function(l,f,n){var o=this._validate(l,this.minMonth,this.minDay,r.local.invalidYear),l=this._t2gYear(o.year());return u.weekOfYear(l,o.month(),o.day())},daysInMonth:function(t,f){var n=this._validate(t,f,this.minDay,r.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,f,n){return(this.dayOfWeek(t,f,n)||7)<6},toJD:function(l,f,n){var o=this._validate(l,f,n,r.local.invalidDate),l=this._t2gYear(o.year());return u.toJD(l,o.month(),o.day())},fromJD:function(t){var f=u.fromJD(t),n=this._g2tYear(f.year());return this.newDate(n,f.month(),f.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),r.calendars.thai=c},{"../main":621,"object-assign":499}],620:[function(e,d,S){var r=e("../main"),a=e("object-assign");function u(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}u.prototype=new r.baseCalendar,a(u.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var f=this._validate(t,this.minMonth,this.minDay,r.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(t,f,n){var o=this.newDate(t,f,n);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var f=0,n=1;n<=12;n++)f+=this.daysInMonth(t,n);return f},daysInMonth:function(t,f){for(var n=this._validate(t,f,this.minDay,r.local.invalidMonth),o=n.toJD()-24e5+.5,l=0,h=0;h<c.length;h++){if(c[h]>o)return c[l]-c[l-1];l++}return 30},weekDay:function(t,f,n){return this.dayOfWeek(t,f,n)!==5},toJD:function(t,f,n){var o=this._validate(t,f,n,r.local.invalidDate),l=12*(o.year()-1)+o.month()-15292,h=o.day()+c[l-1]-1;return h+24e5-.5},fromJD:function(t){for(var f=t-24e5+.5,n=0,o=0;o<c.length&&!(c[o]>f);o++)n++;var l=n+15292,h=Math.floor((l-1)/12),i=h+1,s=l-12*h,p=f-c[n-1]+1;return this.newDate(i,s,p)},isValid:function(t,f,n){var o=r.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(t=t.year!=null?t.year:t,o=t>=1276&&t<=1500),o},_validate:function(t,f,n,o){var l=r.baseCalendar.prototype._validate.apply(this,arguments);if(l.year<1276||l.year>1500)throw o.replace(/\{0\}/,this.local.name);return l}}),r.calendars.ummalqura=u;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":621,"object-assign":499}],621:[function(e,d,S){var r=e("object-assign");function a(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}r(a.prototype,{instance:function(o,l){o=(o||"gregorian").toLowerCase(),l=l||"";var h=this._localCals[o+"-"+l];if(!h&&this.calendars[o]&&(h=new this.calendars[o](l),this._localCals[o+"-"+l]=h),!h)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,o);return h},newDate:function(o,l,h,i,s){return i=(o!=null&&o.year?o.calendar():typeof i=="string"?this.instance(i,s):i)||this.instance(),i.newDate(o,l,h)},substituteDigits:function(o){return function(l){return(l+"").replace(/[0-9]/g,function(h){return o[h]})}},substituteChineseDigits:function(o,l){return function(h){for(var i="",s=0;h>0;){var p=h%10;i=(p===0?"":o[p]+l[s])+i,s++,h=Math.floor(h/10)}return i.indexOf(o[1]+l[1])===0&&(i=i.substr(1)),i||o[0]}}});function u(o,l,h,i){if(this._calendar=o,this._year=l,this._month=h,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function c(o,l){return o=""+o,"000000".substring(0,l-o.length)+o}r(u.prototype,{newDate:function(o,l,h){return this._calendar.newDate(o==null?this:o,l,h)},year:function(o){return arguments.length===0?this._year:this.set(o,"y")},month:function(o){return arguments.length===0?this._month:this.set(o,"m")},day:function(o){return arguments.length===0?this._day:this.set(o,"d")},date:function(o,l,h){if(!this._calendar.isValid(o,l,h))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=o,this._month=l,this._day=h,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(o,l){return this._calendar.add(this,o,l)},set:function(o,l){return this._calendar.set(this,o,l)},compareTo:function(o){if(this._calendar.name!==o._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,o._calendar.local.name);var l=this._year!==o._year?this._year-o._year:this._month!==o._month?this.monthOfYear()-o.monthOfYear():this._day-o._day;return l===0?0:l<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(o){return this._calendar.fromJD(o)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(o){return this._calendar.fromJSDate(o)},toString:function(){return(this.year()<0?"-":"")+c(Math.abs(this.year()),4)+"-"+c(this.month(),2)+"-"+c(this.day(),2)}});function t(){this.shortYearCutoff="+10"}r(t.prototype,{_validateLevel:0,newDate:function(o,l,h){return o==null?this.today():(o.year&&(this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),h=o.day(),l=o.month(),o=o.year()),new u(this,o,l,h))},today:function(){return this.fromJSDate(new Date)},epoch:function(o){var l=this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return l.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(o){var l=this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(l.year()<0?"-":"")+c(Math.abs(l.year()),4)},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(o,l){var h=this._validate(o,l,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(o,l){var h=(l+this.firstMonth-2*this.minMonth)%this.monthsInYear(o)+this.minMonth;return this._validate(o,h,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),h},daysInYear:function(o){var l=this._validate(o,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(l)?366:365},dayOfYear:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(o,l,h){return this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(o,l,h){return this._validate(o,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(o,this._add(o,l,h),l,h)},_add:function(o,l,h){if(this._validateLevel++,h==="d"||h==="w"){var i=o.toJD()+l*(h==="w"?this.daysInWeek():1),s=o.calendar().fromJD(i);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var p=o.year()+(h==="y"?l:0),v=o.monthOfYear()+(h==="m"?l:0),s=o.day(),m=function(x){for(;v<x.minMonth;)p--,v+=x.monthsInYear(p);for(var w=x.monthsInYear(p);v>w-1+x.minMonth;)p++,v-=w,w=x.monthsInYear(p)};h==="y"?(o.month()!==this.fromMonthOfYear(p,v)&&(v=this.newDate(p,o.month(),this.minDay).monthOfYear()),v=Math.min(v,this.monthsInYear(p)),s=Math.min(s,this.daysInMonth(p,this.fromMonthOfYear(p,v)))):h==="m"&&(m(this),s=Math.min(s,this.daysInMonth(p,this.fromMonthOfYear(p,v))));var b=[p,this.fromMonthOfYear(p,v),s];return this._validateLevel--,b}catch(y){throw this._validateLevel--,y}},_correctAdd:function(o,l,h,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(l[0]===0||o.year()>0!=l[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],p=h<0?-1:1;l=this._add(o,h*s[0]+p*s[1],s[2])}return o.date(l[0],l[1],l[2])},set:function(o,l,h){this._validate(o,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var i=h==="y"?l:o.year(),s=h==="m"?l:o.month(),p=h==="d"?l:o.day();return(h==="y"||h==="m")&&(p=Math.min(p,this.daysInMonth(i,s))),o.date(i,s,p)},isValid:function(o,l,h){this._validateLevel++;var i=this.hasYearZero||o!==0;if(i){var s=this.newDate(o,l,this.minDay);i=l>=this.minMonth&&l-this.minMonth<this.monthsInYear(s)&&h>=this.minDay&&h-this.minDay<this.daysInMonth(s)}return this._validateLevel--,i},toJSDate:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(o){return this.fromJD(n.instance().fromJSDate(o).toJD())},_validate:function(o,l,h,i){if(o.year){if(this._validateLevel===0&&this.name!==o.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,o.calendar().local.name);return o}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(o,l,h))throw i.replace(/\{0\}/,this.local.name);var s=this.newDate(o,l,h);return this._validateLevel--,s}catch(p){throw this._validateLevel--,p}}});function f(o){this.local=this.regionalOptions[o]||this.regionalOptions[""]}f.prototype=new t,r(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var l=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),h=l.year()+(l.year()<0?1:0);return h%4===0&&(h%100!==0||h%400===0)},weekOfYear:function(o,l,h){var i=this.newDate(o,l,h);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(o,l){var h=this._validate(o,l,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(o,l,h){return(this.dayOfWeek(o,l,h)||7)<6},toJD:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);o=i.year(),l=i.month(),h=i.day(),o<0&&o++,l<3&&(l+=12,o--);var s=Math.floor(o/100),p=2-s+Math.floor(s/4);return Math.floor(365.25*(o+4716))+Math.floor(30.6001*(l+1))+h+p-1524.5},fromJD:function(o){var l=Math.floor(o+.5),h=Math.floor((l-186721625e-2)/36524.25);h=l+1+h-Math.floor(h/4);var i=h+1524,s=Math.floor((i-122.1)/365.25),p=Math.floor(365.25*s),v=Math.floor((i-p)/30.6001),m=i-p-Math.floor(v*30.6001),b=v-(v>13.5?13:1),y=s-(b>2.5?4716:4715);return y<=0&&y--,this.newDate(y,b,m)},toJSDate:function(o,l,h){var i=this._validate(o,l,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),s=new Date(i.year(),i.month()-1,i.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(o){return this.newDate(o.getFullYear(),o.getMonth()+1,o.getDate())}});var n=d.exports=new a;n.cdate=u,n.baseCalendar=t,n.calendars.gregorian=f},{"object-assign":499}],622:[function(e,d,S){var r=e("object-assign"),a=e("./main");r(a.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),a.local=a.regionalOptions[""],r(a.cdate.prototype,{formatDate:function(u,c){return typeof u!="string"&&(c=u,u=""),this._calendar.formatDate(u||"",this,c)}}),r(a.baseCalendar.prototype,{UNIX_EPOCH:a.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:a.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(u,c,t){if(typeof u!="string"&&(t=c,c=u,u=""),!c)return"";if(c.calendar()!==this)throw a.local.invalidFormat||a.regionalOptions[""].invalidFormat;u=u||this.local.dateFormat,t=t||{};var f=t.dayNamesShort||this.local.dayNamesShort,n=t.dayNames||this.local.dayNames,o=t.monthNumbers||this.local.monthNumbers,l=t.monthNamesShort||this.local.monthNamesShort,h=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var i=function(M,P){for(var L=1;T+L<u.length&&u.charAt(T+L)===M;)L++;return T+=L-1,Math.floor(L/(P||1))>1},s=function(M,P,L,I){var C=""+P;if(i(M,I))for(;C.length<L;)C="0"+C;return C},p=function(M,P,L,I){return i(M)?I[P]:L[P]},v=this,m=function(M){return typeof o=="function"?o.call(v,M,i("m")):x(s("m",M.month(),2))},b=function(M,P){return P?typeof h=="function"?h.call(v,M):h[M.month()-v.minMonth]:typeof l=="function"?l.call(v,M):l[M.month()-v.minMonth]},y=this.local.digits,x=function(M){return t.localNumbers&&y?y(M):M},w="",g=!1,T=0;T<u.length;T++)if(g)u.charAt(T)==="'"&&!i("'")?g=!1:w+=u.charAt(T);else switch(u.charAt(T)){case"d":w+=x(s("d",c.day(),2));break;case"D":w+=p("D",c.dayOfWeek(),f,n);break;case"o":w+=s("o",c.dayOfYear(),3);break;case"w":w+=s("w",c.weekOfYear(),2);break;case"m":w+=m(c);break;case"M":w+=b(c,i("M"));break;case"y":w+=i("y",2)?c.year():(c.year()%100<10?"0":"")+c.year()%100;break;case"Y":i("Y",2),w+=c.formatYear();break;case"J":w+=c.toJD();break;case"@":w+=(c.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":w+=(c.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":i("'")?w+="'":g=!0;break;default:w+=u.charAt(T)}return w},parseDate:function(u,c,t){if(c==null)throw a.local.invalidArguments||a.regionalOptions[""].invalidArguments;if(c=typeof c=="object"?c.toString():c+"",c==="")return null;u=u||this.local.dateFormat,t=t||{};var f=t.shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var n=t.dayNamesShort||this.local.dayNamesShort,o=t.dayNames||this.local.dayNames,l=t.parseMonth||this.local.parseMonth,h=t.monthNumbers||this.local.monthNumbers,i=t.monthNamesShort||this.local.monthNamesShort,s=t.monthNames||this.local.monthNames,p=-1,v=-1,m=-1,b=-1,y=-1,x=!1,w=!1,g=function(N,G){for(var U=1;E+U<u.length&&u.charAt(E+U)===N;)U++;return E+=U-1,Math.floor(U/(G||1))>1},T=function(N,G){var U=g(N,G),Y=[2,3,U?4:2,U?4:2,10,11,20]["oyYJ@!".indexOf(N)+1],z=new RegExp("^-?\\d{1,"+Y+"}"),B=c.substring(k).match(z);if(!B)throw(a.local.missingNumberAt||a.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=B[0].length,parseInt(B[0],10)},M=this,P=function(){if(typeof h=="function"){g("m");var N=h.call(M,c.substring(k));return k+=N.length,N}return T("m")},L=function(N,G,U,Y){for(var z=g(N,Y)?U:G,B=0;B<z.length;B++)if(c.substr(k,z[B].length).toLowerCase()===z[B].toLowerCase())return k+=z[B].length,B+M.minMonth;throw(a.local.unknownNameAt||a.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},I=function(){if(typeof s=="function"){var N=g("M")?s.call(M,c.substring(k)):i.call(M,c.substring(k));return k+=N.length,N}return L("M",i,s)},C=function(){if(c.charAt(k)!==u.charAt(E))throw(a.local.unexpectedLiteralAt||a.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,E=0;E<u.length;E++)if(w)u.charAt(E)==="'"&&!g("'")?w=!1:C();else switch(u.charAt(E)){case"d":b=T("d");break;case"D":L("D",n,o);break;case"o":y=T("o");break;case"w":T("w");break;case"m":m=P();break;case"M":m=I();break;case"y":var R=E;x=!g("y",2),E=R,v=T("y",2);break;case"Y":v=T("Y",2);break;case"J":p=T("J")+.5,c.charAt(k)==="."&&(k++,T("J"));break;case"@":p=T("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=T("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=c.length;break;case"'":g("'")?C():w=!0;break;default:C()}if(k<c.length)throw a.local.unexpectedText||a.regionalOptions[""].unexpectedText;if(v===-1?v=this.today().year():v<100&&x&&(v+=f===-1?1900:this.today().year()-this.today().year()%100-(v<=f?0:100)),typeof m=="string"&&(m=l.call(this,v,m)),y>-1){m=1,b=y;for(var O=this.daysInMonth(v,m);b>O;O=this.daysInMonth(v,m))m++,b-=O}return p>-1?this.fromJD(p):this.newDate(v,m,b)},determineDate:function(u,c,t,f,n){t&&typeof t!="object"&&(n=f,f=t,t=null),typeof f!="string"&&(n=f,f="");var o=this,l=function(h){try{return o.parseDate(f,h,n)}catch{}h=h.toLowerCase();for(var i=(h.match(/^c/)&&t?t.newDate():null)||o.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,p=s.exec(h);p;)i.add(parseInt(p[1],10),p[2]||"d"),p=s.exec(h);return i};return c=c?c.newDate():null,u=u==null?c:typeof u=="string"?l(u):typeof u=="number"?isNaN(u)||u===1/0||u===-1/0?c:o.today().add(u,"d"):o.newDate(u),u}})},{"./main":621,"object-assign":499}],623:[function(e,d,S){d.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_
        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_
        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {
          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))
        }
      }`,args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],624:[function(e,d,S){d.exports=a;var r=e("./lib/zc-core");function a(u,c){var t=[];return c=+c||0,r(u.hi(u.shape[0]-1),t,c),t}},{"./lib/zc-core":623}],625:[function(e,d,S){d.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],626:[function(e,d,S){var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),u=e("../../plots/cartesian/constants"),c=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),d.exports=c("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/font_attributes":856,"./arrow_paths":625}],627:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("./draw").draw;d.exports=function(n){var o=n._fullLayout,l=r.filterVisible(o.annotations);if(l.length&&n._fullData.length)return r.syncOrAsync([u,c],n)};function c(f){var n=f._fullLayout;r.filterVisible(n.annotations).forEach(function(o){var l=a.getFromId(f,o.xref),h=a.getFromId(f,o.yref),i=a.getRefType(o.xref),s=a.getRefType(o.yref);o._extremes={},i==="range"&&t(o,l),s==="range"&&t(o,h)})}function t(f,n){var o=n._id,l=o.charAt(0),h=f[l],i=f["a"+l],s=f[l+"ref"],p=f["a"+l+"ref"],v=f["_"+l+"padplus"],m=f["_"+l+"padminus"],b={x:1,y:-1}[l]*f[l+"shift"],y=3*f.arrowsize*f.arrowwidth||0,x=y+b,w=y-b,g=3*f.startarrowsize*f.arrowwidth||0,T=g+b,M=g-b,P;if(p===s){var L=a.findExtremes(n,[n.r2c(h)],{ppadplus:x,ppadminus:w}),I=a.findExtremes(n,[n.r2c(i)],{ppadplus:Math.max(v,T),ppadminus:Math.max(m,M)});P={min:[L.min[0],I.min[0]],max:[L.max[0],I.max[0]]}}else T=i?T+i:T,M=i?M-i:M,P=a.findExtremes(n,[n.r2c(h)],{ppadplus:Math.max(v,x,T),ppadminus:Math.max(m,w,M)});f._extremes[o]=P}},{"../../lib":778,"../../plots/cartesian/axes":828,"./draw":632}],628:[function(e,d,S){var r=e("../../lib"),a=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;d.exports={hasClickToShow:c,onClick:t};function c(o,l){var h=f(o,l);return h.on.length>0||h.explicitOff.length>0}function t(o,l){var h=f(o,l),i=h.on,s=h.off.concat(h.explicitOff),p={},v=o._fullLayout.annotations,m,b;if(!!(i.length||s.length)){for(m=0;m<i.length;m++)b=u(o.layout,"annotations",v[i[m]]),b.modifyItem("visible",!0),r.extendFlat(p,b.getUpdateObj());for(m=0;m<s.length;m++)b=u(o.layout,"annotations",v[s[m]]),b.modifyItem("visible",!1),r.extendFlat(p,b.getUpdateObj());return a.call("update",o,{},p)}}function f(o,l){var h=o._fullLayout.annotations,i=[],s=[],p=[],v=(l||[]).length,m,b,y,x,w,g,T,M;for(m=0;m<h.length;m++)if(y=h[m],x=y.clicktoshow,x){for(b=0;b<v;b++)if(w=l[b],g=w.xaxis,T=w.yaxis,g._id===y.xref&&T._id===y.yref&&g.d2r(w.x)===n(y._xclick,g)&&T.d2r(w.y)===n(y._yclick,T)){y.visible?x==="onout"?M=s:M=p:M=i,M.push(m);break}b===v&&y.visible&&x==="onout"&&s.push(m)}return{on:i,off:s,explicitOff:p}}function n(o,l){return l.type==="log"?l.l2r(o):l.d2r(o)}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911}],629:[function(e,d,S){var r=e("../../lib"),a=e("../color");d.exports=function(c,t,f,n){n("opacity");var o=n("bgcolor"),l=n("bordercolor"),h=a.opacity(l);n("borderpad");var i=n("borderwidth"),s=n("showarrow");n("text",s?" ":f._dfltTitle.annotation),n("textangle"),r.coerceFont(n,"font",f.font),n("width"),n("align");var p=n("height");if(p&&n("valign"),s){var v=n("arrowside"),m,b;v.indexOf("end")!==-1&&(m=n("arrowhead"),b=n("arrowsize")),v.indexOf("start")!==-1&&(n("startarrowhead",m),n("startarrowsize",b)),n("arrowcolor",h?t.bordercolor:a.defaultLine),n("arrowwidth",(h&&i||1)*2),n("standoff"),n("startstandoff")}var y=n("hovertext"),x=f.hoverlabel||{};if(y){var w=n("hoverlabel.bgcolor",x.bgcolor||(a.opacity(o)?a.rgb(o):a.defaultLine)),g=n("hoverlabel.bordercolor",x.bordercolor||a.contrast(w));r.coerceFont(n,"hoverlabel.font",{family:x.font.family,size:x.font.size,color:x.font.color||g})}n("captureevents",!!y)}},{"../../lib":778,"../color":643}],630:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib/to_log_range");d.exports=function(c,t,f,n){t=t||{};var o=f==="log"&&t.type==="linear",l=f==="linear"&&t.type==="log";if(!(o||l))return;var h=c._fullLayout.annotations,i=t._id.charAt(0),s,p;function v(b){var y=s[b],x=null;o?x=a(y,t.range):x=Math.pow(10,y),r(x)||(x=null),n(p+b,x)}for(var m=0;m<h.length;m++)s=h[m],p="annotations["+m+"].",s[i+"ref"]===t._id&&v(i),s["a"+i+"ref"]===t._id&&v("a"+i)}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],631:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("./common_defaults"),t=e("./attributes");d.exports=function(o,l){u(o,l,{name:"annotations",handleItemDefaults:f})};function f(n,o,l){function h(C,k){return r.coerce(n,o,t,C,k)}var i=h("visible"),s=h("clicktoshow");if(!!(i||s)){c(n,o,l,h);for(var p=o.showarrow,v=["x","y"],m=[-10,-30],b={_fullLayout:l},y=0;y<2;y++){var x=v[y],w=a.coerceRef(n,o,b,x,"","paper");if(w!=="paper"){var g=a.getFromId(b,w);g._annIndices.push(o._index)}if(a.coercePosition(o,b,h,w,x,.5),p){var T="a"+x,M=a.coerceRef(n,o,b,T,"pixel",["pixel","paper"]);M!=="pixel"&&M!==w&&(M=o[T]="pixel");var P=M==="pixel"?m[y]:.4;a.coercePosition(o,b,h,M,T,P)}h(x+"anchor"),h(x+"shift")}if(r.noneOrAll(n,o,["x","y"]),p&&r.noneOrAll(n,o,["ax","ay"]),s){var L=h("xclick"),I=h("yclick");o._xclick=L===void 0?o.x:a.cleanPosition(L,b,o.xref),o._yclick=I===void 0?o.y:a.cleanPosition(I,b,o.yref)}}}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":626,"./common_defaults":629}],632:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../plots/plots"),c=e("../../lib"),t=c.strTranslate,f=e("../../plots/cartesian/axes"),n=e("../color"),o=e("../drawing"),l=e("../fx"),h=e("../../lib/svg_text_utils"),i=e("../../lib/setcursor"),s=e("../dragelement"),p=e("../../plot_api/plot_template").arrayEditor,v=e("./draw_arrow_head");d.exports={draw:m,drawOne:b,drawRaw:x};function m(w){var g=w._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var T=0;T<g.annotations.length;T++)g.annotations[T].visible&&b(w,T);return u.previousPromises(w)}function b(w,g){var T=w._fullLayout,M=T.annotations[g]||{},P=f.getFromId(w,M.xref),L=f.getFromId(w,M.yref);P&&P.setScale(),L&&L.setScale(),x(w,M,g,!1,P,L)}function y(w,g,T,M,P){var L=P[T],I=P[T+"ref"],C=T.indexOf("y")!==-1,k=f.getRefType(I)==="domain",E=C?M.h:M.w;return w?k?L+(C?-g:g)/w._length:w.p2r(w.r2p(L)+g):L+(C?-g:g)/E}function x(w,g,T,M,P,L){var I=w._fullLayout,C=w._fullLayout._size,k=w._context.edits,E,R;M?(E="annotation-"+M,R=M+".annotations"):(E="annotation",R="annotations");var O=p(w.layout,R,g),N=O.modifyBase,G=O.modifyItem,U=O.getUpdateObj;I._infolayer.selectAll("."+E+'[data-index="'+T+'"]').remove();var Y="clip"+I._uid+"_ann"+T;if(!g._input||g.visible===!1){r.selectAll("#"+Y).remove();return}var z={x:{},y:{}},B=+g.textangle||0,H=I._infolayer.append("g").classed(E,!0).attr("data-index",String(T)).style("opacity",g.opacity),V=H.append("g").classed("annotation-text-g",!0),Z=k[g.showarrow?"annotationTail":"annotationPosition"],q=g.captureevents||k.annotationText||Z;function J(de){var be={index:T,annotation:g._input,fullAnnotation:g,event:de};return M&&(be.subplotId=M),be}var ne=V.append("g").style("pointer-events",q?"all":null).call(i,"pointer").on("click",function(){w._dragging=!1,w.emit("plotly_clickannotation",J(r.event))});g.hovertext&&ne.on("mouseover",function(){var de=g.hoverlabel,be=de.font,xe=this.getBoundingClientRect(),ke=w.getBoundingClientRect();l.loneHover({x0:xe.left-ke.left,x1:xe.right-ke.left,y:(xe.top+xe.bottom)/2-ke.top,text:g.hovertext,color:de.bgcolor,borderColor:de.bordercolor,fontFamily:be.family,fontSize:be.size,fontColor:be.color},{container:I._hoverlayer.node(),outerContainer:I._paper.node(),gd:w})}).on("mouseout",function(){l.loneUnhover(I._hoverlayer.node())});var ve=g.borderwidth,$=g.borderpad,j=ve+$,ae=ne.append("rect").attr("class","bg").style("stroke-width",ve+"px").call(n.stroke,g.bordercolor).call(n.fill,g.bgcolor),ie=g.width||g.height,te=I._topclips.selectAll("#"+Y).data(ie?[0]:[]);te.enter().append("clipPath").classed("annclip",!0).attr("id",Y).append("rect"),te.exit().remove();var re=g.font,ce=I._meta?c.templateString(g.text,I._meta):g.text,pe=ne.append("text").classed("annotation-text",!0).text(ce);function fe(de){return de.call(o.font,re).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),h.convertToTspans(de,w,se),de}function se(){var de=pe.selectAll("a");if(de.size()===1&&de.text()===pe.text()){var be=ne.insert("a",":first-child").attr({"xlink:xlink:href":de.attr("xlink:href"),"xlink:xlink:show":de.attr("xlink:show")}).style({cursor:"pointer"});be.node().appendChild(ae.node())}var xe=ne.select(".annotation-text-math-group"),ke=!xe.empty(),Re=o.bBox((ke?xe:pe).node()),Ke=Re.width,ze=Re.height,Je=g.width||Ke,qe=g.height||ze,Ee=Math.round(Je+2*j),Ae=Math.round(qe+2*j);function Be(Oe,mt){return mt==="auto"&&(Oe<1/3?mt="left":Oe>2/3?mt="right":mt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mt]}for(var $e=!1,xt=["x","y"],bt=0;bt<xt.length;bt++){var Ne=xt[bt],st=g[Ne+"ref"]||Ne,_t=g["a"+Ne+"ref"],Ot={x:P,y:L}[Ne],Wt=(B+(Ne==="x"?0:-90))*Math.PI/180,Et=Ee*Math.cos(Wt),jt=Ae*Math.sin(Wt),Zt=Math.abs(Et)+Math.abs(jt),Mt=g[Ne+"anchor"],At=g[Ne+"shift"]*(Ne==="x"?1:-1),ft=z[Ne],ot,Te,Le,Ve,Qe,Me=f.getRefType(st);if(Ot&&Me!=="domain"){var Ie=Ot.r2fraction(g[Ne]);(Ie<0||Ie>1)&&(_t===st?(Ie=Ot.r2fraction(g["a"+Ne]),(Ie<0||Ie>1)&&($e=!0)):$e=!0),ot=Ot._offset+Ot.r2p(g[Ne]),Ve=.5}else{var He=Me==="domain";Ne==="x"?(Le=g[Ne],ot=He?Ot._offset+Ot._length*Le:ot=C.l+C.w*Le):(Le=1-g[Ne],ot=He?Ot._offset+Ot._length*Le:ot=C.t+C.h*Le),Ve=g.showarrow?.5:Le}if(g.showarrow){ft.head=ot;var Ye=g["a"+Ne];if(Qe=Et*Be(.5,g.xanchor)-jt*Be(.5,g.yanchor),_t===st){var ut=f.getRefType(_t);ut==="domain"?(Ne==="y"&&(Ye=1-Ye),ft.tail=Ot._offset+Ot._length*Ye):ut==="paper"?Ne==="y"?(Ye=1-Ye,ft.tail=C.t+C.h*Ye):ft.tail=C.l+C.w*Ye:ft.tail=Ot._offset+Ot.r2p(Ye),Te=Qe}else ft.tail=ot+Ye,Te=Qe+Ye;ft.text=ft.tail+Qe;var nt=I[Ne==="x"?"width":"height"];if(st==="paper"&&(ft.head=c.constrain(ft.head,1,nt-1)),_t==="pixel"){var Ge=-Math.max(ft.tail-3,ft.text),at=Math.min(ft.tail+3,ft.text)-nt;Ge>0?(ft.tail+=Ge,ft.text+=Ge):at>0&&(ft.tail-=at,ft.text-=at)}ft.tail+=At,ft.head+=At}else Qe=Zt*Be(Ve,Mt),Te=Qe,ft.text=ot+Qe;ft.text+=At,Qe+=At,Te+=At,g["_"+Ne+"padplus"]=Zt/2+Te,g["_"+Ne+"padminus"]=Zt/2-Te,g["_"+Ne+"size"]=Zt,g["_"+Ne+"shift"]=Qe}if($e){ne.remove();return}var et=0,lt=0;if(g.align!=="left"&&(et=(Je-Ke)*(g.align==="center"?.5:1)),g.valign!=="top"&&(lt=(qe-ze)*(g.valign==="middle"?.5:1)),ke)xe.select("svg").attr({x:j+et-1,y:j+lt}).call(o.setClipUrl,ie?Y:null,w);else{var Ct=j+lt-Re.top,Pt=j+et-Re.left;pe.call(h.positionText,Pt,Ct).call(o.setClipUrl,ie?Y:null,w)}te.select("rect").call(o.setRect,j,j,Je,qe),ae.call(o.setRect,ve/2,ve/2,Ee-ve,Ae-ve),ne.call(o.setTranslate,Math.round(z.x.text-Ee/2),Math.round(z.y.text-Ae/2)),V.attr({transform:"rotate("+B+","+z.x.text+","+z.y.text+")"});var $t=function(Oe,mt){H.selectAll(".annotation-arrow-g").remove();var wt=z.x.head,yt=z.y.head,St=z.x.tail+Oe,kt=z.y.tail+mt,Rt=z.x.text+Oe,zt=z.y.text+mt,Xt=c.rotationXYMatrix(B,Rt,zt),Yt=c.apply2DTransform(Xt),Vt=c.apply2DTransform2(Xt),cr=+ae.attr("width"),Or=+ae.attr("height"),kr=Rt-.5*cr,Sr=kr+cr,vn=zt-.5*Or,Rn=vn+Or,hn=[[kr,vn,kr,Rn],[kr,Rn,Sr,Rn],[Sr,Rn,Sr,vn],[Sr,vn,kr,vn]].map(Vt);if(!hn.reduce(function(ht,Nt){return ht^!!c.segmentsIntersect(wt,yt,wt+1e6,yt+1e6,Nt[0],Nt[1],Nt[2],Nt[3])},!1)){hn.forEach(function(ht){var Nt=c.segmentsIntersect(St,kt,wt,yt,ht[0],ht[1],ht[2],ht[3]);Nt&&(St=Nt.x,kt=Nt.y)});var An=g.arrowwidth,En=g.arrowcolor,Mr=g.arrowside,xr=H.append("g").style({opacity:n.opacity(En)}).classed("annotation-arrow-g",!0),dn=xr.append("path").attr("d","M"+St+","+kt+"L"+wt+","+yt).style("stroke-width",An+"px").call(n.stroke,n.rgb(En));if(v(dn,Mr,g),k.annotationPosition&&dn.node().parentNode&&!M){var qr=wt,on=yt;if(g.standoff){var Vr=Math.sqrt(Math.pow(wt-St,2)+Math.pow(yt-kt,2));qr+=g.standoff*(St-wt)/Vr,on+=g.standoff*(kt-yt)/Vr}var ln=xr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(St-qr)+","+(kt-on),transform:t(qr,on)}).style("stroke-width",An+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)"),cn,Zr;s.init({element:ln.node(),gd:w,prepFn:function(){var ht=o.getTranslate(ne);cn=ht.x,Zr=ht.y,P&&P.autorange&&N(P._name+".autorange",!0),L&&L.autorange&&N(L._name+".autorange",!0)},moveFn:function(ht,Nt){var rr=Yt(cn,Zr),mr=rr[0]+ht,Rr=rr[1]+Nt;ne.call(o.setTranslate,mr,Rr),G("x",y(P,ht,"x",C,g)),G("y",y(L,Nt,"y",C,g)),g.axref===g.xref&&G("ax",y(P,ht,"ax",C,g)),g.ayref===g.yref&&G("ay",y(L,Nt,"ay",C,g)),xr.attr("transform",t(ht,Nt)),V.attr({transform:"rotate("+B+","+mr+","+Rr+")"})},doneFn:function(){a.call("_guiRelayout",w,U());var ht=document.querySelector(".js-notes-box-panel");ht&&ht.redraw(ht.selectedObj)}})}}};if(g.showarrow&&$t(0,0),Z){var je;s.init({element:ne.node(),gd:w,prepFn:function(){je=V.attr("transform")},moveFn:function(Oe,mt){var wt="pointer";if(g.showarrow)g.axref===g.xref?G("ax",y(P,Oe,"ax",C,g)):G("ax",g.ax+Oe),g.ayref===g.yref?G("ay",y(L,mt,"ay",C.w,g)):G("ay",g.ay+mt),$t(Oe,mt);else{if(M)return;var yt,St;if(P)yt=y(P,Oe,"x",C,g);else{var kt=g._xsize/C.w,Rt=g.x+(g._xshift-g.xshift)/C.w-kt/2;yt=s.align(Rt+Oe/C.w,kt,0,1,g.xanchor)}if(L)St=y(L,mt,"y",C,g);else{var zt=g._ysize/C.h,Xt=g.y-(g._yshift+g.yshift)/C.h-zt/2;St=s.align(Xt-mt/C.h,zt,0,1,g.yanchor)}G("x",yt),G("y",St),(!P||!L)&&(wt=s.getCursor(P?.5:yt,L?.5:St,g.xanchor,g.yanchor))}V.attr({transform:t(Oe,mt)+je}),i(ne,wt)},clickFn:function(Oe,mt){g.captureevents&&w.emit("plotly_clickannotation",J(mt))},doneFn:function(){i(ne),a.call("_guiRelayout",w,U());var Oe=document.querySelector(".js-notes-box-panel");Oe&&Oe.redraw(Oe.selectedObj)}})}}k.annotationText?pe.call(h.makeEditable,{delegate:ne,gd:w}).call(fe).on("edit",function(de){g.text=de,this.call(fe),G("text",de),P&&P.autorange&&N(P._name+".autorange",!0),L&&L.autorange&&N(L._name+".autorange",!0),a.call("_guiRelayout",w,U())}):pe.call(fe)}},{"../../lib":778,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../fx":683,"./draw_arrow_head":633,d3:169}],633:[function(e,d,S){var r=e("d3"),a=e("../color"),u=e("./arrow_paths"),c=e("../../lib"),t=c.strScale,f=c.strRotate,n=c.strTranslate;d.exports=function(l,h,i){var s=l.node(),p=u[i.arrowhead||0],v=u[i.startarrowhead||0],m=(i.arrowwidth||1)*(i.arrowsize||1),b=(i.arrowwidth||1)*(i.startarrowsize||1),y=h.indexOf("start")>=0,x=h.indexOf("end")>=0,w=p.backoff*m+i.standoff,g=v.backoff*b+i.startstandoff,T,M,P,L;if(s.nodeName==="line"){T={x:+l.attr("x1"),y:+l.attr("y1")},M={x:+l.attr("x2"),y:+l.attr("y2")};var I=T.x-M.x,C=T.y-M.y;if(P=Math.atan2(C,I),L=P+Math.PI,w&&g&&w+g>Math.sqrt(I*I+C*C)){V();return}if(w){if(w*w>I*I+C*C){V();return}var k=w*Math.cos(P),E=w*Math.sin(P);M.x+=k,M.y+=E,l.attr({x2:M.x,y2:M.y})}if(g){if(g*g>I*I+C*C){V();return}var R=g*Math.cos(P),O=g*Math.sin(P);T.x-=R,T.y-=O,l.attr({x1:T.x,y1:T.y})}}else if(s.nodeName==="path"){var N=s.getTotalLength(),G="";if(N<w+g){V();return}var U=s.getPointAtLength(0),Y=s.getPointAtLength(.1);P=Math.atan2(U.y-Y.y,U.x-Y.x),T=s.getPointAtLength(Math.min(g,N)),G="0px,"+g+"px,";var z=s.getPointAtLength(N),B=s.getPointAtLength(N-.1);L=Math.atan2(z.y-B.y,z.x-B.x),M=s.getPointAtLength(Math.max(0,N-w));var H=G?g+w:w;G+=N-H+"px,"+N+"px",l.style("stroke-dasharray",G)}function V(){l.style("stroke-dasharray","0px,100px")}function Z(q,J,ne,ve){!q.path||(q.noRotate&&(ne=0),r.select(s.parentNode).append("path").attr({class:l.attr("class"),d:q.path,transform:n(J.x,J.y)+f(ne*180/Math.PI)+t(ve)}).style({fill:a.rgb(i.arrowcolor),"stroke-width":0}))}y&&Z(v,T,P,b),x&&Z(p,M,L,m)}},{"../../lib":778,"../color":643,"./arrow_paths":625,d3:169}],634:[function(e,d,S){var r=e("./draw"),a=e("./click");d.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":626,"./calc_autorange":627,"./click":628,"./convert_coords":630,"./defaults":631,"./draw":632}],635:[function(e,d,S){var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll,u=e("../../plot_api/plot_template").templatedArray;d.exports=a(u("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../annotations/attributes":626}],636:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes");d.exports=function(t){for(var f=t.fullSceneLayout,n=f.annotations,o=0;o<n.length;o++)u(n[o],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function u(c,t){var f=t.fullSceneLayout,n=f.domain,o=t.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};c._xa={},r.extendFlat(c._xa,l),a.setConvert(c._xa),c._xa._offset=o.l+n.x[0]*o.w,c._xa.l2p=function(){return .5*(1+c._pdata[0]/c._pdata[3])*o.w*(n.x[1]-n.x[0])},c._ya={},r.extendFlat(c._ya,l),a.setConvert(c._ya),c._ya._offset=o.t+(1-n.y[1])*o.h,c._ya.l2p=function(){return .5*(1-c._pdata[1]/c._pdata[3])*o.h*(n.y[1]-n.y[0])}}},{"../../lib":778,"../../plots/cartesian/axes":828}],637:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("../annotations/common_defaults"),t=e("./attributes");d.exports=function(o,l,h){u(o,l,{name:"annotations",handleItemDefaults:f,fullLayout:h.fullLayout})};function f(n,o,l,h){function i(v,m){return r.coerce(n,o,t,v,m)}function s(v){var m=v+"axis",b={_fullLayout:{}};return b._fullLayout[m]=l[m],a.coercePosition(o,b,i,v,v,.5)}var p=i("visible");!p||(c(n,o,h.fullLayout,i),s("x"),s("y"),s("z"),r.noneOrAll(n,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",i("ax",-10),i("ay",-30),r.noneOrAll(n,o,["ax","ay"])))}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../annotations/common_defaults":629,"./attributes":635}],638:[function(e,d,S){var r=e("../annotations/draw").drawRaw,a=e("../../plots/gl3d/project"),u=["x","y","z"];d.exports=function(t){for(var f=t.fullSceneLayout,n=t.dataScale,o=f.annotations,l=0;l<o.length;l++){for(var h=o[l],i=!1,s=0;s<3;s++){var p=u[s],v=h[p],m=f[p+"axis"],b=m.r2fraction(v);if(b<0||b>1){i=!0;break}}i?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+l+'"]').remove():(h._pdata=a(t.glplot.cameraParams,[f.xaxis.r2l(h.x)*n[0],f.yaxis.r2l(h.y)*n[1],f.zaxis.r2l(h.z)*n[2]]),r(t.graphDiv,h,l,t.id,h._xa,h._ya))}}},{"../../plots/gl3d/project":879,"../annotations/draw":632}],639:[function(e,d,S){var r=e("../../registry"),a=e("../../lib");d.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:u,convert:e("./convert"),draw:e("./draw")};function u(c,t){var f=r.subplotsRegistry.gl3d;if(!!f)for(var n=f.attrRegex,o=Object.keys(c),l=0;l<o.length;l++){var h=o[l];n.test(h)&&(c[h].annotations||[]).length&&(a.pushUnique(t._basePlotModules,f),a.pushUnique(t._subplots.gl3d,h))}}},{"../../lib":778,"../../registry":911,"./attributes":635,"./convert":636,"./defaults":637,"./draw":638}],640:[function(e,d,S){d.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":607,"world-calendars/dist/calendars/coptic":608,"world-calendars/dist/calendars/discworld":609,"world-calendars/dist/calendars/ethiopian":610,"world-calendars/dist/calendars/hebrew":611,"world-calendars/dist/calendars/islamic":612,"world-calendars/dist/calendars/julian":613,"world-calendars/dist/calendars/mayan":614,"world-calendars/dist/calendars/nanakshahi":615,"world-calendars/dist/calendars/nepali":616,"world-calendars/dist/calendars/persian":617,"world-calendars/dist/calendars/taiwan":618,"world-calendars/dist/calendars/thai":619,"world-calendars/dist/calendars/ummalqura":620,"world-calendars/dist/main":621,"world-calendars/dist/plus":622}],641:[function(e,d,S){var r=e("./calendars"),a=e("../../lib"),u=e("../../constants/numerical"),c=u.EPOCHJD,t=u.ONEDAY,f={valType:"enumerated",values:Object.keys(r.calendars),editType:"calc",dflt:"gregorian"},n=function(P,L,I,C){var k={};return k[I]=f,a.coerce(P,L,k,I,C)},o=function(P,L,I,C){for(var k=0;k<I.length;k++)n(P,L,I[k]+"calendar",C.calendar)},l={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},h={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},i={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",p={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function v(P,L,I){for(var C=Math.floor((L+.05)/t)+c,k=b(I).fromJD(C),E=0,R,O,N,G,U;(E=P.indexOf("%",E))!==-1;)R=P.charAt(E+1),R==="0"||R==="-"||R==="_"?(N=3,O=P.charAt(E+2),R==="_"&&(R="-")):(O=R,R="0",N=2),G=p[O],G?(G===s?U=s:U=k.formatDate(G[R]),P=P.substr(0,E)+U+P.substr(E+N),E+=U.length):E+=N;return P}var m={};function b(P){var L=m[P];return L||(L=m[P]=r.instance(P),L)}function y(P){return a.extendFlat({},f,{description:P})}function x(P){return"Sets the calendar system to use with `"+P+"` date data."}var w={xcalendar:y(x("x"))},g=a.extendFlat({},w,{ycalendar:y(x("y"))}),T=a.extendFlat({},g,{zcalendar:y(x("z"))}),M=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));d.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:T,surface:T,mesh3d:T,scattergl:g,ohlc:w,candlestick:w},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:M},yaxis:{calendar:M},scene:{xaxis:{calendar:M},yaxis:{calendar:M},zaxis:{calendar:M}},polar:{radialaxis:{calendar:M}}},transforms:{filter:{valuecalendar:y(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:n,handleTraceDefaults:o,CANONICAL_SUNDAY:h,CANONICAL_TICK:l,DFLTRANGE:i,getCal:b,worldCalFmt:v}},{"../../constants/numerical":753,"../../lib":778,"./calendars":640}],642:[function(e,d,S){S.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],S.defaultLine="#444",S.lightLine="#eee",S.background="#fff",S.borderLine="#BEC8D9",S.lightFraction=100*(14-4)/(15-4)},{}],643:[function(e,d,S){var r=e("tinycolor2"),a=e("fast-isnumeric"),u=d.exports={},c=e("./attributes");u.defaults=c.defaults;var t=u.defaultLine=c.defaultLine;u.lightLine=c.lightLine;var f=u.background=c.background;u.tinyRGB=function(o){var l=o.toRgb();return"rgb("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+")"},u.rgb=function(o){return u.tinyRGB(r(o))},u.opacity=function(o){return o?r(o).getAlpha():0},u.addOpacity=function(o,l){var h=r(o).toRgb();return"rgba("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+", "+l+")"},u.combine=function(o,l){var h=r(o).toRgb();if(h.a===1)return r(o).toRgbString();var i=r(l||f).toRgb(),s=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},p={r:s.r*(1-h.a)+h.r*h.a,g:s.g*(1-h.a)+h.g*h.a,b:s.b*(1-h.a)+h.b*h.a};return r(p).toRgbString()},u.contrast=function(o,l,h){var i=r(o);i.getAlpha()!==1&&(i=r(u.combine(o,f)));var s=i.isDark()?l?i.lighten(l):f:h?i.darken(h):t;return s.toString()},u.stroke=function(o,l){var h=r(l);o.style({stroke:u.tinyRGB(h),"stroke-opacity":h.getAlpha()})},u.fill=function(o,l){var h=r(l);o.style({fill:u.tinyRGB(h),"fill-opacity":h.getAlpha()})},u.clean=function(o){if(!(!o||typeof o!="object")){var l=Object.keys(o),h,i,s,p;for(h=0;h<l.length;h++)if(s=l[h],p=o[s],s.substr(s.length-5)==="color")if(Array.isArray(p))for(i=0;i<p.length;i++)p[i]=n(p[i]);else o[s]=n(p);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(p))for(i=0;i<p.length;i++)Array.isArray(p[i])&&(p[i][1]=n(p[i][1]));else if(Array.isArray(p)){var v=p[0];if(!Array.isArray(v)&&v&&typeof v=="object")for(i=0;i<p.length;i++)u.clean(p[i])}else p&&typeof p=="object"&&u.clean(p)}};function n(o){if(a(o)||typeof o!="string")return o;var l=o.trim();if(l.substr(0,3)!=="rgb")return o;var h=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!h)return o;var i=h[1].trim().split(/\s*[\s,]\s*/),s=l.charAt(3)==="a"&&i.length===4;if(!s&&i.length!==3)return o;for(var p=0;p<i.length;p++){if(!i[p].length||(i[p]=Number(i[p]),!(i[p]>=0)))return o;if(p===3)i[p]>1&&(i[p]=1);else if(i[p]>=1)return o}var v=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return s?"rgba("+v+", "+i[3]+")":"rgb("+v+")"}},{"./attributes":642,"fast-isnumeric":241,tinycolor2:576}],644:[function(e,d,S){var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),u=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll;d.exports=c({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:u({},r.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:a({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],645:[function(e,d,S){d.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],646:[function(e,d,S){var r=e("../../lib"),a=e("../../plot_api/plot_template"),u=e("../../plots/cartesian/tick_value_defaults"),c=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),f=e("./attributes");d.exports=function(o,l,h){var i=a.newContainer(l,"colorbar"),s=o.colorbar||{};function p(x,w){return r.coerce(s,i,f,x,w)}var v=p("thicknessmode");p("thickness",v==="fraction"?30/(h.width-h.margin.l-h.margin.r):30);var m=p("lenmode");p("len",m==="fraction"?1:h.height-h.margin.t-h.margin.b),p("x"),p("xanchor"),p("xpad"),p("y"),p("yanchor"),p("ypad"),r.noneOrAll(s,i,["x","y"]),p("outlinecolor"),p("outlinewidth"),p("bordercolor"),p("borderwidth"),p("bgcolor");var b=p("ticklabelposition");u(s,i,p,"linear");var y={outerTicks:!1,font:h.font};b.indexOf("inside")!==-1&&(y.bgColor="black"),t(s,i,p,"linear",y),c(s,i,p,"linear",y),p("title.text",h._dfltTitle.colorbar),r.coerceFont(p,"title.font",h.font),p("title.side")}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"./attributes":644}],647:[function(e,d,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../plots/cartesian/axes"),f=e("../dragelement"),n=e("../../lib"),o=n.strTranslate,l=e("../../lib/extend").extendFlat,h=e("../../lib/setcursor"),i=e("../drawing"),s=e("../color"),p=e("../titles"),v=e("../../lib/svg_text_utils"),m=e("../colorscale/helpers").flipScale,b=e("../../plots/cartesian/axis_defaults"),y=e("../../plots/cartesian/position_defaults"),x=e("../../plots/cartesian/layout_attributes"),w=e("../../constants/alignment"),g=w.LINE_SPACING,T=w.FROM_TL,M=w.FROM_BR,P=e("./constants").cn;function L(O){var N=O._fullLayout,G=N._infolayer.selectAll("g."+P.colorbar).data(I(O),function(U){return U._id});G.enter().append("g").attr("class",function(U){return U._id}).classed(P.colorbar,!0),G.each(function(U){var Y=r.select(this);n.ensureSingle(Y,"rect",P.cbbg),n.ensureSingle(Y,"g",P.cbfills),n.ensureSingle(Y,"g",P.cblines),n.ensureSingle(Y,"g",P.cbaxis,function(B){B.classed(P.crisp,!0)}),n.ensureSingle(Y,"g",P.cbtitleunshift,function(B){B.append("g").classed(P.cbtitle,!0)}),n.ensureSingle(Y,"rect",P.cboutline);var z=C(Y,U,O);z&&z.then&&(O._promises||[]).push(z),O._context.edits.colorbarPosition&&k(Y,U,O)}),G.exit().each(function(U){u.autoMargin(O,U._id)}).remove(),G.order()}function I(O){var N=O._fullLayout,G=O.calcdata,U=[],Y,z,B,H;function V(re){return l(re,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof H.calc=="function"?H.calc(O,B,Y):(Y._fillgradient=z.reversescale?m(z.colorscale):z.colorscale,Y._zrange=[z[H.min],z[H.max]])}for(var q=0;q<G.length;q++){var J=G[q];B=J[0].trace;var ne=B._module.colorbar;if(B.visible===!0&&ne)for(var ve=Array.isArray(ne),$=ve?ne:[ne],j=0;j<$.length;j++){H=$[j];var ae=H.container;z=ae?B[ae]:B,z&&z.showscale&&(Y=V(z.colorbar),Y._id="cb"+B.uid+(ve&&ae?"-"+ae:""),Y._traceIndex=B.index,Y._propPrefix=(ae?ae+".":"")+"colorbar.",Y._meta=B._meta,Z(),U.push(Y))}}for(var ie in N._colorAxes)if(z=N[ie],z.showscale){var te=N._colorAxes[ie];Y=V(z.colorbar),Y._id="cb"+ie,Y._propPrefix=ie+".colorbar.",Y._meta=N._meta,H={min:"cmin",max:"cmax"},te[0]!=="heatmap"&&(B=te[1],H.calc=B._module.colorbar.calc),Z(),U.push(Y)}return U}function C(O,N,G){var U=G._fullLayout,Y=U._size,z=N._fillcolor,B=N._line,H=N.title,V=H.side,Z=N._zrange||r.extent((typeof z=="function"?z:B.color).domain()),q=typeof B.color=="function"?B.color:function(){return B.color},J=typeof z=="function"?z:function(){return z},ne=N._levels,ve=E(G,N,Z),$=ve.fill,j=ve.line,ae=Math.round(N.thickness*(N.thicknessmode==="fraction"?Y.w:1)),ie=ae/Y.w,te=Math.round(N.len*(N.lenmode==="fraction"?Y.h:1)),re=te/Y.h,ce=N.xpad/Y.w,pe=(N.borderwidth+N.outlinewidth)/2,fe=N.ypad/Y.h,se=Math.round(N.x*Y.w+N.xpad),de=N.x-ie*({middle:.5,right:1}[N.xanchor]||0),be=N.y+re*(({top:-.5,bottom:.5}[N.yanchor]||0)-.5),xe=Math.round(Y.h*(1-be)),ke=xe-te;N._lenFrac=re,N._thickFrac=ie,N._xLeftFrac=de,N._yBottomFrac=be;var Re=N._axis=R(G,N,Z);if(Re.position=N.x+ce+ie,["top","bottom"].indexOf(V)!==-1&&(Re.title.side=V,Re.titlex=N.x+ce,Re.titley=be+(H.side==="top"?re-fe:fe)),B.color&&N.tickmode==="auto"){Re.tickmode="linear",Re.tick0=ne.start;var Ke=ne.size,ze=n.constrain((xe-ke)/50,4,15)+1,Je=(Z[1]-Z[0])/((N.nticks||ze)*Ke);if(Je>1){var qe=Math.pow(10,Math.floor(Math.log(Je)/Math.LN10));Ke*=qe*n.roundUp(Je/qe,[2,5,10]),(Math.abs(ne.start)/ne.size+1e-6)%1<2e-6&&(Re.tick0=0)}Re.dtick=Ke}Re.domain=[be+fe,be+re-fe],Re.setScale(),O.attr("transform",o(Math.round(Y.l),Math.round(Y.t)));var Ee=O.select("."+P.cbtitleunshift).attr("transform",o(-Math.round(Y.l),-Math.round(Y.t))),Ae=O.select("."+P.cbaxis),Be,$e=0;function xt(Ot,Wt){var Et={propContainer:Re,propName:N._propPrefix+"title",traceIndex:N._traceIndex,_meta:N._meta,placeholder:U._dfltTitle.colorbar,containerGroup:O.select("."+P.cbtitle)},jt=Ot.charAt(0)==="h"?Ot.substr(1):"h"+Ot;O.selectAll("."+jt+",."+jt+"-math-group").remove(),p.draw(G,Ot,l(Et,Wt||{}))}function bt(){if(["top","bottom"].indexOf(V)!==-1){var Ot=Y.l+(N.x+ce)*Y.w,Wt=Re.title.font.size,Et;V==="top"?Et=(1-(be+re-fe))*Y.h+Y.t+3+Wt*.75:Et=(1-(be+fe))*Y.h+Y.t-3-Wt*.25,xt(Re._id+"title",{attributes:{x:Ot,y:Et,"text-anchor":"start"}})}}function Ne(){if(["top","bottom"].indexOf(V)===-1){var Ot=Re.title.font.size,Wt=Re._offset+Re._length/2,Et=Y.l+(Re.position||0)*Y.w+(Re.side==="right"?10+Ot*(Re.showticklabels?1:.5):-10-Ot*(Re.showticklabels?.5:0));xt("h"+Re._id+"title",{avoid:{selection:r.select(G).selectAll("g."+Re._id+"tick"),side:V,offsetLeft:Y.l,offsetTop:0,maxShift:U.width},attributes:{x:Et,y:Wt,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function st(){if(["top","bottom"].indexOf(V)!==-1){var Ot=O.select("."+P.cbtitle),Wt=Ot.select("text"),Et=[-N.outlinewidth/2,N.outlinewidth/2],jt=Ot.select(".h"+Re._id+"title-math-group").node(),Zt=15.6;if(Wt.node()&&(Zt=parseInt(Wt.node().style.fontSize,10)*g),jt?($e=i.bBox(jt).height,$e>Zt&&(Et[1]-=($e-Zt)/2)):Wt.node()&&!Wt.classed(P.jsPlaceholder)&&($e=i.bBox(Wt.node()).height),$e){if($e+=5,V==="top")Re.domain[1]-=$e/Y.h,Et[1]*=-1;else{Re.domain[0]+=$e/Y.h;var Mt=v.lineCount(Wt);Et[1]+=(1-Mt)*Zt}Ot.attr("transform",o(Et[0],Et[1])),Re.setScale()}}O.selectAll("."+P.cbfills+",."+P.cblines).attr("transform",o(0,Math.round(Y.h*(1-Re.domain[1])))),Ae.attr("transform",o(0,Math.round(-Y.t)));var At=O.select("."+P.cbfills).selectAll("rect."+P.cbfill).attr("style","").data($);At.enter().append("rect").classed(P.cbfill,!0).style("stroke","none"),At.exit().remove();var ft=Z.map(Re.c2p).map(Math.round).sort(function(Qe,Me){return Qe-Me});At.each(function(Qe,Me){var Ie=[Me===0?Z[0]:($[Me]+$[Me-1])/2,Me===$.length-1?Z[1]:($[Me]+$[Me+1])/2].map(Re.c2p).map(Math.round);Ie[1]=n.constrain(Ie[1]+(Ie[1]>Ie[0])?1:-1,ft[0],ft[1]);var He=r.select(this).attr({x:se,width:Math.max(ae,2),y:r.min(Ie),height:Math.max(r.max(Ie)-r.min(Ie),2)});if(N._fillgradient)i.gradient(He,G,N._id,"vertical",N._fillgradient,"fill");else{var Ye=J(Qe).replace("e-","");He.attr("fill",a(Ye).toHexString())}});var ot=O.select("."+P.cblines).selectAll("path."+P.cbline).data(B.color&&B.width?j:[]);ot.enter().append("path").classed(P.cbline,!0),ot.exit().remove(),ot.each(function(Qe){r.select(this).attr("d","M"+se+","+(Math.round(Re.c2p(Qe))+B.width/2%1)+"h"+ae).call(i.lineGroupStyle,B.width,q(Qe),B.dash)}),Ae.selectAll("g."+Re._id+"tick,path").remove();var Te=se+ae+(N.outlinewidth||0)/2-(N.ticks==="outside"?1:0),Le=t.calcTicks(Re),Ve=t.getTickSigns(Re)[2];return t.drawTicks(G,Re,{vals:Re.ticks==="inside"?t.clipEnds(Re,Le):Le,layer:Ae,path:t.makeTickPath(Re,Te,Ve),transFn:t.makeTransTickFn(Re)}),t.drawLabels(G,Re,{vals:Le,layer:Ae,transFn:t.makeTransTickLabelFn(Re),labelFns:t.makeLabelFns(Re,Te)})}function _t(){var Ot=ae+N.outlinewidth/2;if(Re.ticklabelposition.indexOf("inside")===-1&&(Ot+=i.bBox(Ae.node()).width),Be=Ee.select("text"),Be.node()&&!Be.classed(P.jsPlaceholder)){var Wt=Ee.select(".h"+Re._id+"title-math-group").node(),Et;Wt&&["top","bottom"].indexOf(V)!==-1?Et=i.bBox(Wt).width:Et=i.bBox(Ee.node()).right-se-Y.l,Ot=Math.max(Ot,Et)}var jt=2*N.xpad+Ot+N.borderwidth+N.outlinewidth/2,Zt=xe-ke;O.select("."+P.cbbg).attr({x:se-N.xpad-(N.borderwidth+N.outlinewidth)/2,y:ke-pe,width:Math.max(jt,2),height:Math.max(Zt+2*pe,2)}).call(s.fill,N.bgcolor).call(s.stroke,N.bordercolor).style("stroke-width",N.borderwidth),O.selectAll("."+P.cboutline).attr({x:se,y:ke+N.ypad+(V==="top"?$e:0),width:Math.max(ae,2),height:Math.max(Zt-2*N.ypad-$e,2)}).call(s.stroke,N.outlinecolor).style({fill:"none","stroke-width":N.outlinewidth});var Mt=({center:.5,right:1}[N.xanchor]||0)*jt;O.attr("transform",o(Y.l-Mt,Y.t));var At={},ft=T[N.yanchor],ot=M[N.yanchor];N.lenmode==="pixels"?(At.y=N.y,At.t=Zt*ft,At.b=Zt*ot):(At.t=At.b=0,At.yt=N.y+N.len*ft,At.yb=N.y-N.len*ot);var Te=T[N.xanchor],Le=M[N.xanchor];if(N.thicknessmode==="pixels")At.x=N.x,At.l=jt*Te,At.r=jt*Le;else{var Ve=jt-ae;At.l=Ve*Te,At.r=Ve*Le,At.xl=N.x-N.thickness*Te,At.xr=N.x+N.thickness*Le}u.autoMargin(G,N._id,At)}return n.syncOrAsync([u.previousPromises,bt,st,Ne,u.previousPromises,_t],G)}function k(O,N,G){var U=G._fullLayout,Y=U._size,z,B,H;f.init({element:O.node(),gd:G,prepFn:function(){z=O.attr("transform"),h(O)},moveFn:function(V,Z){O.attr("transform",z+o(V,Z)),B=f.align(N._xLeftFrac+V/Y.w,N._thickFrac,0,1,N.xanchor),H=f.align(N._yBottomFrac-Z/Y.h,N._lenFrac,0,1,N.yanchor);var q=f.getCursor(B,H,N.xanchor,N.yanchor);h(O,q)},doneFn:function(){if(h(O),B!==void 0&&H!==void 0){var V={};V[N._propPrefix+"x"]=B,V[N._propPrefix+"y"]=H,N._traceIndex!==void 0?c.call("_guiRestyle",G,V,N._traceIndex):c.call("_guiRelayout",G,V)}}})}function E(O,N,G){var U=N._levels,Y=[],z=[],B,H,V=U.end+U.size/100,Z=U.size,q=1.001*G[0]-.001*G[1],J=1.001*G[1]-.001*G[0];for(H=0;H<1e5&&(B=U.start+H*Z,!(Z>0?B>=V:B<=V));H++)B>q&&B<J&&Y.push(B);if(N._fillgradient)z=[0];else if(typeof N._fillcolor=="function"){var ne=N._filllevels;if(ne)for(V=ne.end+ne.size/100,Z=ne.size,H=0;H<1e5&&(B=ne.start+H*Z,!(Z>0?B>=V:B<=V));H++)B>G[0]&&B<G[1]&&z.push(B);else z=Y.map(function(ve){return ve-U.size/2}),z.push(z[z.length-1]+U.size)}else N._fillcolor&&typeof N._fillcolor=="string"&&(z=[0]);return U.size<0&&(Y.reverse(),z.reverse()),{line:Y,fill:z}}function R(O,N,G){var U=O._fullLayout,Y={type:"linear",range:G,tickmode:N.tickmode,nticks:N.nticks,tick0:N.tick0,dtick:N.dtick,tickvals:N.tickvals,ticktext:N.ticktext,ticks:N.ticks,ticklen:N.ticklen,tickwidth:N.tickwidth,tickcolor:N.tickcolor,showticklabels:N.showticklabels,ticklabelposition:N.ticklabelposition,tickfont:N.tickfont,tickangle:N.tickangle,tickformat:N.tickformat,exponentformat:N.exponentformat,minexponent:N.minexponent,separatethousands:N.separatethousands,showexponent:N.showexponent,showtickprefix:N.showtickprefix,tickprefix:N.tickprefix,showticksuffix:N.showticksuffix,ticksuffix:N.ticksuffix,title:N.title,showline:!0,anchor:"free",side:"right",position:1},z={type:"linear",_id:"y"+N._id},B={letter:"y",font:U.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:U.calendar};function H(V,Z){return n.coerce(Y,z,x,V,Z)}return b(Y,z,H,B,U),y(Y,z,H,B),z}d.exports={draw:L}},{"../../constants/alignment":745,"../../lib":778,"../../lib/extend":768,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"../../plots/plots":891,"../../registry":911,"../color":643,"../colorscale/helpers":654,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":645,d3:169,tinycolor2:576}],648:[function(e,d,S){var r=e("../../lib");d.exports=function(u){return r.isPlainObject(u.colorbar)}},{"../../lib":778}],649:[function(e,d,S){d.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":644,"./defaults":646,"./draw":647,"./has_colorbar":648}],650:[function(e,d,S){var r=e("../colorbar/attributes"),a=e("../../lib/regex").counter,u=e("./scales.js").scales;d.exports=function(t,f){t=t||"",f=f||{};var n=f.cLetter||"c";"onlyIfNumerical"in f?f.onlyIfNumerical:Boolean(t);var o="noScale"in f?f.noScale:t==="marker.line",l="showScaleDflt"in f?f.showScaleDflt:n==="z",h=typeof f.colorscaleDflt=="string"?u[f.colorscaleDflt]:null,i=f.editTypeOverride||"",s;"colorAttr"in f?(s=f.colorAttr,f.colorAttr):s={z:"z",c:"color"}[n];var p=n+"auto",v=n+"min",m=n+"max",b=n+"mid",y={};y[v]=y[m]=void 0;var x={};x[p]=!1;var w={};return s==="color"&&(w.color={valType:"color",arrayOk:!0,editType:i||"style"},f.anim&&(w.color.anim=!0)),w[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:y},w[v]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:x},w[m]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:x},w[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:y},w.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:f.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},o||(w.showscale={valType:"boolean",dflt:l,editType:"calc"},w.colorbar=r),f.noColorAxis||(w.coloraxis={valType:"subplotid",regex:a("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":795,"../colorbar/attributes":644,"./scales.js":658}],651:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("./helpers").extractOpts;d.exports=function(t,f,n){var o=t._fullLayout,l=n.vals,h=n.containerStr,i=h?a.nestedProperty(f,h).get():f,s=u(i),p=s.auto!==!1,v=s.min,m=s.max,b=s.mid,y=function(){return a.aggNums(Math.min,null,l)},x=function(){return a.aggNums(Math.max,null,l)};if(v===void 0?v=y():p&&(i._colorAx&&r(v)?v=Math.min(v,y()):v=y()),m===void 0?m=x():p&&(i._colorAx&&r(m)?m=Math.max(m,x()):m=x()),p&&b!==void 0&&(m-b>b-v?v=b-(m-b):m-b<b-v&&(m=b+(b-v))),v===m&&(v-=.5,m+=.5),s._sync("min",v),s._sync("max",m),s.autocolorscale){var w;v*m<0?w=o.colorscale.diverging:v>=0?w=o.colorscale.sequential:w=o.colorscale.sequentialminus,s._sync("colorscale",w)}}},{"../../lib":778,"./helpers":654,"fast-isnumeric":241}],652:[function(e,d,S){var r=e("../../lib"),a=e("./helpers").hasColorscale,u=e("./helpers").extractOpts;d.exports=function(t,f){function n(v,m){var b=v["_"+m];b!==void 0&&(v[m]=b)}function o(v,m){var b=m.container?r.nestedProperty(v,m.container).get():v;if(b)if(b.coloraxis)b._colorAx=f[b.coloraxis];else{var y=u(b),x=y.auto;(x||y.min===void 0)&&n(b,m.min),(x||y.max===void 0)&&n(b,m.max),y.autocolorscale&&n(b,"colorscale")}}for(var l=0;l<t.length;l++){var h=t[l],i=h._module.colorbar;if(i)if(Array.isArray(i))for(var s=0;s<i.length;s++)o(h,i[s]);else o(h,i);a(h,"marker.line")&&o(h,{container:"marker.line",min:"cmin",max:"cmax"})}for(var p in f._colorAxes)o(f[p],{min:"cmin",max:"cmax"})}},{"../../lib":778,"./helpers":654}],653:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../colorbar/has_colorbar"),c=e("../colorbar/defaults"),t=e("./scales").isValid,f=e("../../registry").traceIs;function n(o,l){var h=l.slice(0,l.length-1);return l?a.nestedProperty(o,h).get()||{}:o}d.exports=function o(l,h,i,s,p){var v=p.prefix,m=p.cLetter,b="_module"in h,y=n(l,v),x=n(h,v),w=n(h._template||{},v)||{},g=function(){return delete l.coloraxis,delete h.coloraxis,o(l,h,i,s,p)};if(b){var T=i._colorAxes||{},M=s(v+"coloraxis");if(M){var P=f(h,"contour")&&a.nestedProperty(h,"contours.coloring").get()||"heatmap",L=T[M];L?(L[2].push(g),L[0]!==P&&(L[0]=!1,a.warn(["Ignoring coloraxis:",M,"setting","as it is linked to incompatible colorscales."].join(" ")))):T[M]=[P,h,[g]];return}}var I=y[m+"min"],C=y[m+"max"],k=r(I)&&r(C)&&I<C,E=s(v+m+"auto",!k);E?s(v+m+"mid"):(s(v+m+"min"),s(v+m+"max"));var R=y.colorscale,O=w.colorscale,N;if(R!==void 0&&(N=!t(R)),O!==void 0&&(N=!t(O)),s(v+"autocolorscale",N),s(v+"colorscale"),s(v+"reversescale"),v!=="marker.line."){var G;v&&b&&(G=u(y));var U=s(v+"showscale",G);U&&(v&&w&&(x._template=w),c(y,x,i))}}},{"../../lib":778,"../../registry":911,"../colorbar/defaults":646,"../colorbar/has_colorbar":648,"./scales":658,"fast-isnumeric":241}],654:[function(e,d,S){var r=e("d3"),a=e("tinycolor2"),u=e("fast-isnumeric"),c=e("../../lib"),t=e("../color"),f=e("./scales").isValid;function n(b,y,x){var w=y?c.nestedProperty(b,y).get()||{}:b,g=w[x||"color"],T=!1;if(c.isArrayOrTypedArray(g)){for(var M=0;M<g.length;M++)if(u(g[M])){T=!0;break}}return c.isPlainObject(w)&&(T||w.showscale===!0||u(w.cmin)&&u(w.cmax)||f(w.colorscale)||c.isPlainObject(w.colorbar))}var o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function h(b){var y=b._colorAx,x=y||b,w={},g,T,M;for(T=0;T<o.length;T++)M=o[T],w[M]=x[M];if(y)for(g="c",T=0;T<l.length;T++)M=l[T],w[M]=x["c"+M];else{var P;for(T=0;T<l.length;T++){if(M=l[T],P="c"+M,P in x){w[M]=x[P];continue}P="z"+M,P in x&&(w[M]=x[P])}g=P.charAt(0)}return w._sync=function(L,I){var C=l.indexOf(L)!==-1?g+L:L;x[C]=x["_"+C]=I},w}function i(b){for(var y=h(b),x=y.min,w=y.max,g=y.reversescale?s(y.colorscale):y.colorscale,T=g.length,M=new Array(T),P=new Array(T),L=0;L<T;L++){var I=g[L];M[L]=x+I[0]*(w-x),P[L]=I[1]}return{domain:M,range:P}}function s(b){for(var y=b.length,x=new Array(y),w=y-1,g=0;w>=0;w--,g++){var T=b[w];x[g]=[1-T[0],T[1]]}return x}function p(b,y){y=y||{};for(var x=b.domain,w=b.range,g=w.length,T=new Array(g),M=0;M<g;M++){var P=a(w[M]).toRgb();T[M]=[P.r,P.g,P.b,P.a]}var L=r.scale.linear().domain(x).range(T).clamp(!0),I=y.noNumericCheck,C=y.returnArray,k;return I&&C?k=L:I?k=function(E){return m(L(E))}:C?k=function(E){return u(E)?L(E):a(E).isValid()?E:t.defaultLine}:k=function(E){return u(E)?m(L(E)):a(E).isValid()?E:t.defaultLine},k.domain=L.domain,k.range=function(){return w},k}function v(b,y){return p(i(b),y)}function m(b){var y={r:b[0],g:b[1],b:b[2],a:b[3]};return a(y).toRgbString()}d.exports={hasColorscale:n,extractOpts:h,extractScale:i,flipScale:s,makeColorScaleFunc:p,makeColorScaleFuncFromTrace:v}},{"../../lib":778,"../color":643,"./scales":658,d3:169,"fast-isnumeric":241,tinycolor2:576}],655:[function(e,d,S){var r=e("./scales"),a=e("./helpers");d.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":650,"./calc":651,"./cross_trace_defaults":652,"./defaults":653,"./helpers":654,"./layout_attributes":656,"./layout_defaults":657,"./scales":658}],656:[function(e,d,S){var r=e("../../lib/extend").extendFlat,a=e("./attributes"),u=e("./scales").scales;d.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:u.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:u.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:u.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":768,"./attributes":650,"./scales":658}],657:[function(e,d,S){var r=e("../../lib"),a=e("../../plot_api/plot_template"),u=e("./layout_attributes"),c=e("./defaults");d.exports=function(f,n){function o(b,y){return r.coerce(f,n,u,b,y)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var l=n._colorAxes,h,i;function s(b,y){return r.coerce(h,i,u.coloraxis,b,y)}for(var p in l){var v=l[p];if(v[0])h=f[p]||{},i=a.newContainer(n,p,"coloraxis"),i._name=p,c(h,i,n,s,{prefix:"",cLetter:"c"});else{for(var m=0;m<v[2].length;m++)v[2][m]();delete n._colorAxes[p]}}}},{"../../lib":778,"../../plot_api/plot_template":817,"./defaults":653,"./layout_attributes":656}],658:[function(e,d,S){var r=e("tinycolor2"),a={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=a.RdBu;function c(n,o){if(o||(o=u),!n)return o;function l(){try{n=a[n]||JSON.parse(n)}catch{n=o}}return typeof n=="string"&&(l(),typeof n=="string"&&l()),t(n)?n:o}function t(n){var o=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var l=0;l<n.length;l++){var h=n[l];if(h.length!==2||+h[0]<o||!r(h[1]).isValid())return!1;o=+h[0]}return!0}function f(n){return a[n]!==void 0?!0:t(n)}d.exports={scales:a,defaultScale:u,get:c,isValid:f}},{tinycolor2:576}],659:[function(e,d,S){d.exports=function(a,u,c,t,f){var n=(a-c)/(t-c),o=n+u/(t-c),l=(n+o)/2;return f==="left"||f==="bottom"?n:f==="center"||f==="middle"?l:f==="right"||f==="top"?o:n<2/3-l?n:o>4/3-l?o:l}},{}],660:[function(e,d,S){var r=e("../../lib"),a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];d.exports=function(c,t,f,n){return f==="left"?c=0:f==="center"?c=1:f==="right"?c=2:c=r.constrain(Math.floor(c*3),0,2),n==="bottom"?t=0:n==="middle"?t=1:n==="top"?t=2:t=r.constrain(Math.floor(t*3),0,2),a[t][c]}},{"../../lib":778}],661:[function(e,d,S){S.selectMode=function(r){return r==="lasso"||r==="select"},S.drawMode=function(r){return r==="drawclosedpath"||r==="drawopenpath"||r==="drawline"||r==="drawrect"||r==="drawcircle"},S.openMode=function(r){return r==="drawline"||r==="drawopenpath"},S.rectMode=function(r){return r==="select"||r==="drawline"||r==="drawrect"||r==="drawcircle"},S.freeMode=function(r){return r==="lasso"||r==="drawclosedpath"||r==="drawopenpath"},S.selectingOrDrawing=function(r){return S.freeMode(r)||S.rectMode(r)}},{}],662:[function(e,d,S){var r=e("mouse-event-offset"),a=e("has-hover"),u=e("has-passive-events"),c=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),f=d.exports={};f.align=e("./align"),f.getCursor=e("./cursor");var n=e("./unhover");f.unhover=n.wrapped,f.unhoverRaw=n.raw,f.init=function(i){var s=i.gd,p=1,v=s._context.doubleClickDelay,m=i.element,b,y,x,w,g,T,M,P;s._mouseDownTime||(s._mouseDownTime=0),m.style.pointerEvents="all",m.onmousedown=C,u?(m._ontouchstart&&m.removeEventListener("touchstart",m._ontouchstart),m._ontouchstart=C,m.addEventListener("touchstart",C,{passive:!1})):m.ontouchstart=C;function L(R,O,N){return Math.abs(R)<N&&(R=0),Math.abs(O)<N&&(O=0),[R,O]}var I=i.clampFn||L;function C(R){s._dragged=!1,s._dragging=!0;var O=l(R);b=O[0],y=O[1],M=R.target,T=R,P=R.buttons===2||R.ctrlKey,typeof R.clientX>"u"&&typeof R.clientY>"u"&&(R.clientX=b,R.clientY=y),x=new Date().getTime(),x-s._mouseDownTime<v?p+=1:(p=1,s._mouseDownTime=x),i.prepFn&&i.prepFn(R,b,y),a&&!P?(g=o(),g.style.cursor=window.getComputedStyle(m).cursor):a||(g=document,w=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(m).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),i.dragmode!==!1&&(R.preventDefault(),document.addEventListener("mousemove",k),document.addEventListener("touchmove",k,{passive:!1}))}function k(R){R.preventDefault();var O=l(R),N=i.minDrag||t.MINDRAG,G=I(O[0]-b,O[1]-y,N),U=G[0],Y=G[1];(U||Y)&&(s._dragged=!0,f.unhover(s)),s._dragged&&i.moveFn&&!P&&(s._dragdata={element:m,dx:U,dy:Y},i.moveFn(U,Y))}function E(R){if(delete s._dragdata,i.dragmode!==!1&&(R.preventDefault(),document.removeEventListener("mousemove",k),document.removeEventListener("touchmove",k)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),a?c(g):w&&(g.documentElement.style.cursor=w,w=null),!s._dragging){s._dragged=!1;return}if(s._dragging=!1,new Date().getTime()-s._mouseDownTime>v&&(p=Math.max(p-1,1)),s._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(p,T),!P){var O;try{O=new MouseEvent("click",R)}catch{var N=l(R);O=document.createEvent("MouseEvents"),O.initMouseEvent("click",R.bubbles,R.cancelable,R.view,R.detail,R.screenX,R.screenY,N[0],N[1],R.ctrlKey,R.altKey,R.shiftKey,R.metaKey,R.button,R.relatedTarget)}M.dispatchEvent(O)}s._dragging=!1,s._dragged=!1}};function o(){var h=document.createElement("div");h.className="dragcover";var i=h.style;return i.position="fixed",i.left=0,i.right=0,i.top=0,i.bottom=0,i.zIndex=999999999,i.background="none",document.body.appendChild(h),h}f.coverSlip=o;function l(h){return r(h.changedTouches?h.changedTouches[0]:h,document.body)}},{"../../lib":778,"../../plots/cartesian/constants":834,"./align":659,"./cursor":660,"./unhover":663,"has-hover":440,"has-passive-events":441,"mouse-event-offset":484}],663:[function(e,d,S){var r=e("../../lib/events"),a=e("../../lib/throttle"),u=e("../../lib/dom").getGraphDiv,c=e("../fx/constants"),t=d.exports={};t.wrapped=function(f,n,o){f=u(f),f._fullLayout&&a.clear(f._fullLayout._uid+c.HOVERID),t.raw(f,n,o)},t.raw=function(n,o){var l=n._fullLayout,h=n._hoverdata;o||(o={}),!(o.target&&r.triggerHandler(n,"plotly_beforehover",o)===!1)&&(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,o.target&&h&&n.emit("plotly_unhover",{event:o,points:h}))}},{"../../lib/dom":766,"../../lib/events":767,"../../lib/throttle":804,"../fx/constants":677}],664:[function(e,d,S){S.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],665:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("tinycolor2"),c=e("../../registry"),t=e("../color"),f=e("../colorscale"),n=e("../../lib"),o=n.strTranslate,l=e("../../lib/svg_text_utils"),h=e("../../constants/xmlns_namespaces"),i=e("../../constants/alignment"),s=i.LINE_SPACING,p=e("../../constants/interactions").DESELECTDIM,v=e("../../traces/scatter/subtypes"),m=e("../../traces/scatter/make_bubble_size_func"),b=e("../../components/fx/helpers").appendArrayPointValue,y=d.exports={};y.font=function(Z,q,J,ne){n.isPlainObject(q)&&(ne=q.color,J=q.size,q=q.family),q&&Z.style("font-family",q),J+1&&Z.style("font-size",J+"px"),ne&&Z.call(t.fill,ne)},y.setPosition=function(Z,q,J){Z.attr("x",q).attr("y",J)},y.setSize=function(Z,q,J){Z.attr("width",q).attr("height",J)},y.setRect=function(Z,q,J,ne,ve){Z.call(y.setPosition,q,J).call(y.setSize,ne,ve)},y.translatePoint=function(Z,q,J,ne){var ve=J.c2p(Z.x),$=ne.c2p(Z.y);if(a(ve)&&a($)&&q.node())q.node().nodeName==="text"?q.attr("x",ve).attr("y",$):q.attr("transform",o(ve,$));else return!1;return!0},y.translatePoints=function(Z,q,J){Z.each(function(ne){var ve=r.select(this);y.translatePoint(ne,ve,q,J)})},y.hideOutsideRangePoint=function(Z,q,J,ne,ve,$){q.attr("display",J.isPtWithinRange(Z,ve)&&ne.isPtWithinRange(Z,$)?null:"none")},y.hideOutsideRangePoints=function(Z,q){if(!!q._hasClipOnAxisFalse){var J=q.xaxis,ne=q.yaxis;Z.each(function(ve){var $=ve[0].trace,j=$.xcalendar,ae=$.ycalendar,ie=c.traceIs($,"bar-like")?".bartext":".point,.textpoint";Z.selectAll(ie).each(function(te){y.hideOutsideRangePoint(te,r.select(this),J,ne,j,ae)})})}},y.crispRound=function(Z,q,J){return!q||!a(q)?J||0:Z._context.staticPlot?q:q<1?1:Math.round(q)},y.singleLineStyle=function(Z,q,J,ne,ve){q.style("fill","none");var $=(((Z||[])[0]||{}).trace||{}).line||{},j=J||$.width||0,ae=ve||$.dash||"";t.stroke(q,ne||$.color),y.dashLine(q,ae,j)},y.lineGroupStyle=function(Z,q,J,ne){Z.style("fill","none").each(function(ve){var $=(((ve||[])[0]||{}).trace||{}).line||{},j=q||$.width||0,ae=ne||$.dash||"";r.select(this).call(t.stroke,J||$.color).call(y.dashLine,ae,j)})},y.dashLine=function(Z,q,J){J=+J||0,q=y.dashStyle(q,J),Z.style({"stroke-dasharray":q,"stroke-width":J+"px"})},y.dashStyle=function(Z,q){q=+q||1;var J=Math.max(q,3);return Z==="solid"?Z="":Z==="dot"?Z=J+"px,"+J+"px":Z==="dash"?Z=3*J+"px,"+3*J+"px":Z==="longdash"?Z=5*J+"px,"+5*J+"px":Z==="dashdot"?Z=3*J+"px,"+J+"px,"+J+"px,"+J+"px":Z==="longdashdot"&&(Z=5*J+"px,"+2*J+"px,"+J+"px,"+2*J+"px"),Z},y.singleFillStyle=function(Z){var q=r.select(Z.node()),J=q.data(),ne=(((J[0]||[])[0]||{}).trace||{}).fillcolor;ne&&Z.call(t.fill,ne)},y.fillGroupStyle=function(Z){Z.style("stroke-width",0).each(function(q){var J=r.select(this);q[0].trace&&J.call(t.fill,q[0].trace.fillcolor)})};var x=e("./symbol_defs");y.symbolNames=[],y.symbolFuncs=[],y.symbolNeedLines={},y.symbolNoDot={},y.symbolNoFill={},y.symbolList=[],Object.keys(x).forEach(function(Z){var q=x[Z],J=q.n;y.symbolList.push(J,String(J),Z,J+100,String(J+100),Z+"-open"),y.symbolNames[J]=Z,y.symbolFuncs[J]=q.f,q.needLine&&(y.symbolNeedLines[J]=!0),q.noDot?y.symbolNoDot[J]=!0:y.symbolList.push(J+200,String(J+200),Z+"-dot",J+300,String(J+300),Z+"-open-dot"),q.noFill&&(y.symbolNoFill[J]=!0)});var w=y.symbolNames.length,g="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";y.symbolNumber=function(Z){if(a(Z))Z=+Z;else if(typeof Z=="string"){var q=0;Z.indexOf("-open")>0&&(q=100,Z=Z.replace("-open","")),Z.indexOf("-dot")>0&&(q+=200,Z=Z.replace("-dot","")),Z=y.symbolNames.indexOf(Z),Z>=0&&(Z+=q)}return Z%100>=w||Z>=400?0:Math.floor(Math.max(Z,0))};function T(Z,q){var J=Z%100;return y.symbolFuncs[J](q)+(Z>=200?g:"")}var M={x1:1,x2:0,y1:0,y2:0},P={x1:0,x2:0,y1:1,y2:0},L=r.format("~.1f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:P},verticalreversed:{node:"linearGradient",attrs:P,reversed:!0}};y.gradient=function(Z,q,J,ne,ve,$){for(var j=ve.length,ae=I[ne],ie=new Array(j),te=0;te<j;te++)ae.reversed?ie[j-1-te]=[L((1-ve[te][0])*100),ve[te][1]]:ie[te]=[L(ve[te][0]*100),ve[te][1]];var re=q._fullLayout,ce="g"+re._uid+"-"+J,pe=re._defs.select(".gradients").selectAll("#"+ce).data([ne+ie.join(";")],n.identity);pe.exit().remove(),pe.enter().append(ae.node).each(function(){var de=r.select(this);ae.attrs&&de.attr(ae.attrs),de.attr("id",ce);var be=de.selectAll("stop").data(ie);be.exit().remove(),be.enter().append("stop"),be.each(function(xe){var ke=u(xe[1]);r.select(this).attr({offset:xe[0]+"%","stop-color":t.tinyRGB(ke),"stop-opacity":ke.getAlpha()})})}),Z.style($,B(ce,q)).style($+"-opacity",null);var fe=function(de){return"."+de.attr("class").replace(/\s/g,".")},se=fe(r.select(Z.node().parentNode))+">"+fe(Z);re._gradientUrlQueryParts[se]=1},y.initGradients=function(Z){var q=Z._fullLayout,J=n.ensureSingle(q._defs,"g","gradients");J.selectAll("linearGradient,radialGradient").remove(),q._gradientUrlQueryParts={}},y.pointStyle=function(Z,q,J){if(!!Z.size()){var ne=y.makePointStyleFns(q);Z.each(function(ve){y.singlePointStyle(ve,r.select(this),q,ne,J)})}},y.singlePointStyle=function(Z,q,J,ne,ve){var $=J.marker,j=$.line;if(q.style("opacity",ne.selectedOpacityFn?ne.selectedOpacityFn(Z):Z.mo===void 0?$.opacity:Z.mo),ne.ms2mrc){var ae;Z.ms==="various"||$.size==="various"?ae=3:ae=ne.ms2mrc(Z.ms),Z.mrc=ae,ne.selectedSizeFn&&(ae=Z.mrc=ne.selectedSizeFn(Z));var ie=y.symbolNumber(Z.mx||$.symbol)||0;Z.om=ie%200>=100,q.attr("d",T(ie,ae))}var te=!1,re,ce,pe;if(Z.so)pe=j.outlierwidth,ce=j.outliercolor,re=$.outliercolor;else{var fe=(j||{}).width;pe=(Z.mlw+1||fe+1||(Z.trace?(Z.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Z?ce=Z.mlcc=ne.lineScale(Z.mlc):n.isArrayOrTypedArray(j.color)?ce=t.defaultLine:ce=j.color,n.isArrayOrTypedArray($.color)&&(re=t.defaultLine,te=!0),"mc"in Z?re=Z.mcc=ne.markerScale(Z.mc):re=$.color||"rgba(0,0,0,0)",ne.selectedColorFn&&(re=ne.selectedColorFn(Z))}if(Z.om)q.call(t.stroke,re).style({"stroke-width":(pe||1)+"px",fill:"none"});else{q.style("stroke-width",(Z.isBlank?0:pe)+"px");var se=$.gradient,de=Z.mgt;if(de?te=!0:de=se&&se.type,Array.isArray(de)&&(de=de[0],I[de]||(de=0)),de&&de!=="none"){var be=Z.mgc;be?te=!0:be=se.color;var xe=J.uid;te&&(xe+="-"+Z.i),y.gradient(q,ve,xe,de,[[0,be],[1,re]],"fill")}else t.fill(q,re);pe&&t.stroke(q,ce)}},y.makePointStyleFns=function(Z){var q={},J=Z.marker;return q.markerScale=y.tryColorscale(J,""),q.lineScale=y.tryColorscale(J,"line"),c.traceIs(Z,"symbols")&&(q.ms2mrc=v.isBubble(Z)?m(Z):function(){return(J.size||6)/2}),Z.selectedpoints&&n.extendFlat(q,y.makeSelectedPointStyleFns(Z)),q},y.makeSelectedPointStyleFns=function(Z){var q={},J=Z.selected||{},ne=Z.unselected||{},ve=Z.marker||{},$=J.marker||{},j=ne.marker||{},ae=ve.opacity,ie=$.opacity,te=j.opacity,re=ie!==void 0,ce=te!==void 0;(n.isArrayOrTypedArray(ae)||re||ce)&&(q.selectedOpacityFn=function(Ke){var ze=Ke.mo===void 0?ve.opacity:Ke.mo;return Ke.selected?re?ie:ze:ce?te:p*ze});var pe=ve.color,fe=$.color,se=j.color;(fe||se)&&(q.selectedColorFn=function(Ke){var ze=Ke.mcc||pe;return Ke.selected?fe||ze:se||ze});var de=ve.size,be=$.size,xe=j.size,ke=be!==void 0,Re=xe!==void 0;return c.traceIs(Z,"symbols")&&(ke||Re)&&(q.selectedSizeFn=function(Ke){var ze=Ke.mrc||de/2;return Ke.selected?ke?be/2:ze:Re?xe/2:ze}),q},y.makeSelectedTextStyleFns=function(Z){var q={},J=Z.selected||{},ne=Z.unselected||{},ve=Z.textfont||{},$=J.textfont||{},j=ne.textfont||{},ae=ve.color,ie=$.color,te=j.color;return q.selectedTextColorFn=function(re){var ce=re.tc||ae;return re.selected?ie||ce:te||(ie?ce:t.addOpacity(ce,p))},q},y.selectedPointStyle=function(Z,q){if(!(!Z.size()||!q.selectedpoints)){var J=y.makeSelectedPointStyleFns(q),ne=q.marker||{},ve=[];J.selectedOpacityFn&&ve.push(function($,j){$.style("opacity",J.selectedOpacityFn(j))}),J.selectedColorFn&&ve.push(function($,j){t.fill($,J.selectedColorFn(j))}),J.selectedSizeFn&&ve.push(function($,j){var ae=j.mx||ne.symbol||0,ie=J.selectedSizeFn(j);$.attr("d",T(y.symbolNumber(ae),ie)),j.mrc2=ie}),ve.length&&Z.each(function($){for(var j=r.select(this),ae=0;ae<ve.length;ae++)ve[ae](j,$)})}},y.tryColorscale=function(Z,q){var J=q?n.nestedProperty(Z,q).get():Z;if(J){var ne=J.color;if((J.colorscale||J._colorAx)&&n.isArrayOrTypedArray(ne))return f.makeColorScaleFuncFromTrace(J)}return n.identity};var C={start:1,end:-1,middle:0,bottom:1,top:-1};function k(Z,q,J,ne){var ve=r.select(Z.node().parentNode),$=q.indexOf("top")!==-1?"top":q.indexOf("bottom")!==-1?"bottom":"middle",j=q.indexOf("left")!==-1?"end":q.indexOf("right")!==-1?"start":"middle",ae=ne?ne/.8+1:0,ie=(l.lineCount(Z)-1)*s+1,te=C[j]*ae,re=J*.75+C[$]*ae+(C[$]-1)*ie*J/2;Z.attr("text-anchor",j),ve.attr("transform",o(te,re))}function E(Z,q){var J=Z.ts||q.textfont.size;return a(J)&&J>0?J:0}y.textPointStyle=function(Z,q,J){if(!!Z.size()){var ne;if(q.selectedpoints){var ve=y.makeSelectedTextStyleFns(q);ne=ve.selectedTextColorFn}var $=q.texttemplate,j=J._fullLayout;Z.each(function(ae){var ie=r.select(this),te=$?n.extractOption(ae,q,"txt","texttemplate"):n.extractOption(ae,q,"tx","text");if(!te&&te!==0){ie.remove();return}if($){var re=q._module.formatLabels?q._module.formatLabels(ae,q,j):{},ce={};b(ce,q,ae.i);var pe=q._meta||{};te=n.texttemplateString(te,re,j._d3locale,ce,ae,pe)}var fe=ae.tp||q.textposition,se=E(ae,q),de=ne?ne(ae):ae.tc||q.textfont.color;ie.call(y.font,ae.tf||q.textfont.family,se,de).text(te).call(l.convertToTspans,J).call(k,fe,se,ae.mrc)})}},y.selectedTextStyle=function(Z,q){if(!(!Z.size()||!q.selectedpoints)){var J=y.makeSelectedTextStyleFns(q);Z.each(function(ne){var ve=r.select(this),$=J.selectedTextColorFn(ne),j=ne.tp||q.textposition,ae=E(ne,q);t.fill(ve,$),k(ve,j,ae,ne.mrc2||ne.mrc)})}};var R=.5;y.smoothopen=function(Z,q){if(Z.length<3)return"M"+Z.join("L");var J="M"+Z[0],ne=[],ve;for(ve=1;ve<Z.length-1;ve++)ne.push(O(Z[ve-1],Z[ve],Z[ve+1],q));for(J+="Q"+ne[0][0]+" "+Z[1],ve=2;ve<Z.length-1;ve++)J+="C"+ne[ve-2][1]+" "+ne[ve-1][0]+" "+Z[ve];return J+="Q"+ne[Z.length-3][1]+" "+Z[Z.length-1],J},y.smoothclosed=function(Z,q){if(Z.length<3)return"M"+Z.join("L")+"Z";var J="M"+Z[0],ne=Z.length-1,ve=[O(Z[ne],Z[0],Z[1],q)],$;for($=1;$<ne;$++)ve.push(O(Z[$-1],Z[$],Z[$+1],q));for(ve.push(O(Z[ne-1],Z[ne],Z[0],q)),$=1;$<=ne;$++)J+="C"+ve[$-1][1]+" "+ve[$][0]+" "+Z[$];return J+="C"+ve[ne][1]+" "+ve[0][0]+" "+Z[0]+"Z",J};function O(Z,q,J,ne){var ve=Z[0]-q[0],$=Z[1]-q[1],j=J[0]-q[0],ae=J[1]-q[1],ie=Math.pow(ve*ve+$*$,R/2),te=Math.pow(j*j+ae*ae,R/2),re=(te*te*ve-ie*ie*j)*ne,ce=(te*te*$-ie*ie*ae)*ne,pe=3*te*(ie+te),fe=3*ie*(ie+te);return[[r.round(q[0]+(pe&&re/pe),2),r.round(q[1]+(pe&&ce/pe),2)],[r.round(q[0]-(fe&&re/fe),2),r.round(q[1]-(fe&&ce/fe),2)]]}var N={hv:function(Z,q){return"H"+r.round(q[0],2)+"V"+r.round(q[1],2)},vh:function(Z,q){return"V"+r.round(q[1],2)+"H"+r.round(q[0],2)},hvh:function(Z,q){return"H"+r.round((Z[0]+q[0])/2,2)+"V"+r.round(q[1],2)+"H"+r.round(q[0],2)},vhv:function(Z,q){return"V"+r.round((Z[1]+q[1])/2,2)+"H"+r.round(q[0],2)+"V"+r.round(q[1],2)}},G=function(Z,q){return"L"+r.round(q[0],2)+","+r.round(q[1],2)};y.steps=function(Z){var q=N[Z]||G;return function(J){for(var ne="M"+r.round(J[0][0],2)+","+r.round(J[0][1],2),ve=1;ve<J.length;ve++)ne+=q(J[ve-1],J[ve]);return ne}},y.makeTester=function(){var Z=n.ensureSingleById(r.select("body"),"svg","js-plotly-tester",function(J){J.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),q=n.ensureSingle(Z,"path","js-reference-point",function(J){J.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=Z,y.testref=q},y.savedBBoxes={};var U=0,Y=1e4;y.bBox=function(Z,q,J){J||(J=z(Z));var ne;if(J){if(ne=y.savedBBoxes[J],ne)return n.extendFlat({},ne)}else if(Z.childNodes.length===1){var ve=Z.childNodes[0];if(J=z(ve),J){var $=+ve.getAttribute("x")||0,j=+ve.getAttribute("y")||0,ae=ve.getAttribute("transform");if(!ae){var ie=y.bBox(ve,!1,J);return $&&(ie.left+=$,ie.right+=$),j&&(ie.top+=j,ie.bottom+=j),ie}if(J+="~"+$+"~"+j+"~"+ae,ne=y.savedBBoxes[J],ne)return n.extendFlat({},ne)}}var te,re;q?te=Z:(re=y.tester.node(),te=Z.cloneNode(!0),re.appendChild(te)),r.select(te).attr("transform",null).call(l.positionText,0,0);var ce=te.getBoundingClientRect(),pe=y.testref.node().getBoundingClientRect();q||re.removeChild(te);var fe={height:ce.height,width:ce.width,left:ce.left-pe.left,top:ce.top-pe.top,right:ce.right-pe.left,bottom:ce.bottom-pe.top};return U>=Y&&(y.savedBBoxes={},U=0),J&&(y.savedBBoxes[J]=fe),U++,n.extendFlat({},fe)};function z(Z){var q=Z.getAttribute("data-unformatted");if(q!==null)return q+Z.getAttribute("data-math")+Z.getAttribute("text-anchor")+Z.getAttribute("style")}y.setClipUrl=function(Z,q,J){Z.attr("clip-path",B(q,J))};function B(Z,q){if(!Z)return null;var J=q._context,ne=J._exportedPlot?"":J._baseUrl||"";return"url('"+ne+"#"+Z+"')"}y.getTranslate=function(Z){var q=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,J=Z.attr?"attr":"getAttribute",ne=Z[J]("transform")||"",ve=ne.replace(q,function($,j,ae){return[j,ae].join(" ")}).split(" ");return{x:+ve[0]||0,y:+ve[1]||0}},y.setTranslate=function(Z,q,J){var ne=/(\btranslate\(.*?\);?)/,ve=Z.attr?"attr":"getAttribute",$=Z.attr?"attr":"setAttribute",j=Z[ve]("transform")||"";return q=q||0,J=J||0,j=j.replace(ne,"").trim(),j+=o(q,J),j=j.trim(),Z[$]("transform",j),j},y.getScale=function(Z){var q=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,J=Z.attr?"attr":"getAttribute",ne=Z[J]("transform")||"",ve=ne.replace(q,function($,j,ae){return[j,ae].join(" ")}).split(" ");return{x:+ve[0]||1,y:+ve[1]||1}},y.setScale=function(Z,q,J){var ne=/(\bscale\(.*?\);?)/,ve=Z.attr?"attr":"getAttribute",$=Z.attr?"attr":"setAttribute",j=Z[ve]("transform")||"";return q=q||1,J=J||1,j=j.replace(ne,"").trim(),j+="scale("+q+","+J+")",j=j.trim(),Z[$]("transform",j),j};var H=/\s*sc.*/;y.setPointGroupScale=function(Z,q,J){if(q=q||1,J=J||1,!!Z){var ne=q===1&&J===1?"":"scale("+q+","+J+")";Z.each(function(){var ve=(this.getAttribute("transform")||"").replace(H,"");ve+=ne,ve=ve.trim(),this.setAttribute("transform",ve)})}};var V=/translate\([^)]*\)\s*$/;y.setTextPointsScale=function(Z,q,J){!Z||Z.each(function(){var ne,ve=r.select(this),$=ve.select("text");if(!!$.node()){var j=parseFloat($.attr("x")||0),ae=parseFloat($.attr("y")||0),ie=(ve.attr("transform")||"").match(V);q===1&&J===1?ne=[]:ne=[o(j,ae),"scale("+q+","+J+")",o(-j,-ae)],ie&&ne.push(ie),ve.attr("transform",ne.join(""))}})}},{"../../components/fx/helpers":679,"../../constants/alignment":745,"../../constants/interactions":752,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../registry":911,"../../traces/scatter/make_bubble_size_func":1204,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale":655,"./symbol_defs":666,d3:169,"fast-isnumeric":241,tinycolor2:576}],666:[function(e,d,S){var r=e("d3");d.exports={circle:{n:0,f:function(a){var u=r.round(a,2);return"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"}},square:{n:1,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"}},diamond:{n:2,f:function(a){var u=r.round(a*1.3,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"Z"}},cross:{n:3,f:function(a){var u=r.round(a*.4,2),c=r.round(a*1.2,2);return"M"+c+","+u+"H"+u+"V"+c+"H-"+u+"V"+u+"H-"+c+"V-"+u+"H-"+u+"V-"+c+"H"+u+"V-"+u+"H"+c+"Z"}},x:{n:4,f:function(a){var u=r.round(a*.8/Math.sqrt(2),2),c="l"+u+","+u,t="l"+u+",-"+u,f="l-"+u+",-"+u,n="l-"+u+","+u;return"M0,"+u+c+t+f+t+f+n+f+n+c+n+c+"Z"}},"triangle-up":{n:5,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M-"+u+","+c+"H"+u+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M-"+u+",-"+c+"H"+u+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M"+c+",-"+u+"V"+u+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(a){var u=r.round(a*2/Math.sqrt(3),2),c=r.round(a/2,2),t=r.round(a,2);return"M-"+c+",-"+u+"V"+u+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M-"+c+",-"+u+"H"+u+"V"+c+"Z"}},"triangle-se":{n:10,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M"+u+",-"+c+"V"+u+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M"+c+","+u+"H-"+u+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(a){var u=r.round(a*.6,2),c=r.round(a*1.2,2);return"M-"+u+","+c+"V-"+u+"H"+c+"Z"}},pentagon:{n:13,f:function(a){var u=r.round(a*.951,2),c=r.round(a*.588,2),t=r.round(-a,2),f=r.round(a*-.309,2),n=r.round(a*.809,2);return"M"+u+","+f+"L"+c+","+n+"H-"+c+"L-"+u+","+f+"L0,"+t+"Z"}},hexagon:{n:14,f:function(a){var u=r.round(a,2),c=r.round(a/2,2),t=r.round(a*Math.sqrt(3)/2,2);return"M"+t+",-"+c+"V"+c+"L0,"+u+"L-"+t+","+c+"V-"+c+"L0,-"+u+"Z"}},hexagon2:{n:15,f:function(a){var u=r.round(a,2),c=r.round(a/2,2),t=r.round(a*Math.sqrt(3)/2,2);return"M-"+c+","+t+"H"+c+"L"+u+",0L"+c+",-"+t+"H-"+c+"L-"+u+",0Z"}},octagon:{n:16,f:function(a){var u=r.round(a*.924,2),c=r.round(a*.383,2);return"M-"+c+",-"+u+"H"+c+"L"+u+",-"+c+"V"+c+"L"+c+","+u+"H-"+c+"L-"+u+","+c+"V-"+c+"Z"}},star:{n:17,f:function(a){var u=a*1.4,c=r.round(u*.225,2),t=r.round(u*.951,2),f=r.round(u*.363,2),n=r.round(u*.588,2),o=r.round(-u,2),l=r.round(u*-.309,2),h=r.round(u*.118,2),i=r.round(u*.809,2),s=r.round(u*.382,2);return"M"+c+","+l+"H"+t+"L"+f+","+h+"L"+n+","+i+"L0,"+s+"L-"+n+","+i+"L-"+f+","+h+"L-"+t+","+l+"H-"+c+"L0,"+o+"Z"}},hexagram:{n:18,f:function(a){var u=r.round(a*.66,2),c=r.round(a*.38,2),t=r.round(a*.76,2);return"M-"+t+",0l-"+c+",-"+u+"h"+t+"l"+c+",-"+u+"l"+c+","+u+"h"+t+"l-"+c+","+u+"l"+c+","+u+"h-"+t+"l-"+c+","+u+"l-"+c+",-"+u+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(a){var u=r.round(a*Math.sqrt(3)*.8,2),c=r.round(a*.8,2),t=r.round(a*1.6,2),f=r.round(a*4,2),n="A "+f+","+f+" 0 0 1 ";return"M-"+u+","+c+n+u+","+c+n+"0,-"+t+n+"-"+u+","+c+"Z"}},"star-triangle-down":{n:20,f:function(a){var u=r.round(a*Math.sqrt(3)*.8,2),c=r.round(a*.8,2),t=r.round(a*1.6,2),f=r.round(a*4,2),n="A "+f+","+f+" 0 0 1 ";return"M"+u+",-"+c+n+"-"+u+",-"+c+n+"0,"+t+n+u+",-"+c+"Z"}},"star-square":{n:21,f:function(a){var u=r.round(a*1.1,2),c=r.round(a*2,2),t="A "+c+","+c+" 0 0 1 ";return"M-"+u+",-"+u+t+"-"+u+","+u+t+u+","+u+t+u+",-"+u+t+"-"+u+",-"+u+"Z"}},"star-diamond":{n:22,f:function(a){var u=r.round(a*1.4,2),c=r.round(a*1.9,2),t="A "+c+","+c+" 0 0 1 ";return"M-"+u+",0"+t+"0,"+u+t+u+",0"+t+"0,-"+u+t+"-"+u+",0Z"}},"diamond-tall":{n:23,f:function(a){var u=r.round(a*.7,2),c=r.round(a*1.4,2);return"M0,"+c+"L"+u+",0L0,-"+c+"L-"+u+",0Z"}},"diamond-wide":{n:24,f:function(a){var u=r.round(a*1.4,2),c=r.round(a*.7,2);return"M0,"+c+"L"+u+",0L0,-"+c+"L-"+u+",0Z"}},hourglass:{n:25,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"H-"+u+"L"+u+",-"+u+"H-"+u+"Z"},noDot:!0},bowtie:{n:26,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"V-"+u+"L-"+u+","+u+"V-"+u+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){var u=r.round(a,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var u=r.round(a,2),c=r.round(a/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){var u=r.round(a,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u+"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){var u=r.round(a*1.3,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"ZM0,-"+u+"V"+u+"M-"+u+",0H"+u},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var u=r.round(a*1.3,2),c=r.round(a*.65,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){var u=r.round(a*1.4,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*.85,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(a){var u=r.round(a/2,2),c=r.round(a,2);return"M"+u+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+u+"H-"+c+"m0,-"+c+"H"+c},needLine:!0,noFill:!0},"y-up":{n:37,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M-"+u+","+t+"L0,0M"+u+","+t+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M-"+u+",-"+t+"L0,0M"+u+",-"+t+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M"+t+","+u+"L0,0M"+t+",-"+u+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(a){var u=r.round(a*1.2,2),c=r.round(a*1.6,2),t=r.round(a*.8,2);return"M-"+t+","+u+"L0,0M-"+t+",-"+u+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(a){var u=r.round(a*1.4,2);return"M"+u+",0H-"+u},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(a){var u=r.round(a*1.4,2);return"M0,"+u+"V-"+u},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(a){var u=r.round(a,2);return"M"+u+",-"+u+"L-"+u+","+u},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(a){var u=r.round(a,2);return"M"+u+","+u+"L-"+u+",-"+u},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M0,0L-"+u+","+c+"H"+u+"Z"},noDot:!0},"arrow-down":{n:46,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M0,0L-"+u+",-"+c+"H"+u+"Z"},noDot:!0},"arrow-left":{n:47,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,0L"+u+",-"+c+"V"+c+"Z"},noDot:!0},"arrow-right":{n:48,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,0L-"+u+",-"+c+"V"+c+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M-"+u+",0H"+u+"M0,0L-"+u+","+c+"H"+u+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(a){var u=r.round(a,2),c=r.round(a*2,2);return"M-"+u+",0H"+u+"M0,0L-"+u+",-"+c+"H"+u+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,-"+c+"V"+c+"M0,0L"+u+",-"+c+"V"+c+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(a){var u=r.round(a*2,2),c=r.round(a,2);return"M0,-"+c+"V"+c+"M0,0L-"+u+",-"+c+"V"+c+"Z"},needLine:!0,noDot:!0}}},{d3:169}],667:[function(e,d,S){d.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],668:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../registry"),u=e("../../plots/cartesian/axes"),c=e("../../lib"),t=e("./compute_error");d.exports=function(o){for(var l=o.calcdata,h=0;h<l.length;h++){var i=l[h],s=i[0].trace;if(s.visible===!0&&a.traceIs(s,"errorBarsOK")){var p=u.getFromId(o,s.xaxis),v=u.getFromId(o,s.yaxis);f(i,s,p,"x"),f(i,s,v,"y")}}};function f(n,o,l,h){var i=o["error_"+h]||{},s=i.visible&&["linear","log"].indexOf(l.type)!==-1,p=[];if(!!s){for(var v=t(i),m=0;m<n.length;m++){var b=n[m],y=b.i;if(y===void 0)y=m;else if(y===null)continue;var x=b[h];if(!!r(l.c2l(x))){var w=v(x,y);if(r(w[0])&&r(w[1])){var g=b[h+"s"]=x-w[0],T=b[h+"h"]=x+w[1];p.push(g,T)}}}var M=l._id,P=o._extremes[M],L=u.findExtremes(l,p,c.extendFlat({tozero:P.opts.tozero},{padded:!0}));P.min=P.min.concat(L.min),P.max=P.max.concat(L.max)}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./compute_error":669,"fast-isnumeric":241}],669:[function(e,d,S){d.exports=function(u){var c=u.type,t=u.symmetric;if(c==="data"){var f=u.array||[];if(t)return function(i,s){var p=+f[s];return[p,p]};var n=u.arrayminus||[];return function(i,s){var p=+f[s],v=+n[s];return!isNaN(p)||!isNaN(v)?[v||0,p||0]:[NaN,NaN]}}else{var o=r(c,u.value),l=r(c,u.valueminus);return t||u.valueminus===void 0?function(i){var s=o(i);return[s,s]}:function(i){return[l(i),o(i)]}}};function r(a,u){if(a==="percent")return function(c){return Math.abs(c*u/100)};if(a==="constant")return function(){return Math.abs(u)};if(a==="sqrt")return function(c){return Math.sqrt(Math.abs(c))}}},{}],670:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../registry"),u=e("../../lib"),c=e("../../plot_api/plot_template"),t=e("./attributes");d.exports=function(f,n,o,l){var h="error_"+l.axis,i=c.newContainer(n,h),s=f[h]||{};function p(g,T){return u.coerce(s,i,t,g,T)}var v=s.array!==void 0||s.value!==void 0||s.type==="sqrt",m=p("visible",v);if(m!==!1){var b=p("type","array"in s?"data":"percent"),y=!0;b!=="sqrt"&&(y=p("symmetric",!((b==="data"?"arrayminus":"valueminus")in s))),b==="data"?(p("array"),p("traceref"),y||(p("arrayminus"),p("tracerefminus"))):(b==="percent"||b==="constant")&&(p("value"),y||p("valueminus"));var x="copy_"+l.inherit+"style";if(l.inherit){var w=n["error_"+l.inherit];(w||{}).visible&&p(x,!(s.color||r(s.thickness)||r(s.width)))}(!l.inherit||!i[x])&&(p("color",o),p("thickness"),p("width",a.traceIs(n,"gl3d")?0:4))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"./attributes":667,"fast-isnumeric":241}],671:[function(e,d,S){var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,u=e("./attributes"),c={error_x:r.extendFlat({},u),error_y:r.extendFlat({},u)};delete c.error_x.copy_zstyle,delete c.error_y.copy_zstyle,delete c.error_y.copy_ystyle;var t={error_x:r.extendFlat({},u),error_y:r.extendFlat({},u),error_z:r.extendFlat({},u)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,d.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:c,bar:c,histogram:c,scatter3d:a(t,"calc","nested"),scattergl:a(c,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:f};function f(n,o,l){(o.error_y||{}).visible&&(l.yerr=n.yh-n.y,o.error_y.symmetric||(l.yerrneg=n.y-n.ys)),(o.error_x||{}).visible&&(l.xerr=n.xh-n.x,o.error_x.symmetric||(l.xerrneg=n.x-n.xs))}},{"../../lib":778,"../../plot_api/edit_types":810,"./attributes":667,"./calc":668,"./compute_error":669,"./defaults":670,"./plot":672,"./style":673}],672:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../drawing"),c=e("../../traces/scatter/subtypes");d.exports=function(n,o,l,h){var i,s=l.xaxis,p=l.yaxis,v=h&&h.duration>0;o.each(function(m){var b=m[0].trace,y=b.error_x||{},x=b.error_y||{},w;b.ids&&(w=function(P){return P.id});var g=c.hasMarkers(b)&&b.marker.maxdisplayed>0;!x.visible&&!y.visible&&(m=[]);var T=r.select(this).selectAll("g.errorbar").data(m,w);if(T.exit().remove(),!!m.length){y.visible||T.selectAll("path.xerror").remove(),x.visible||T.selectAll("path.yerror").remove(),T.style("opacity",1);var M=T.enter().append("g").classed("errorbar",!0);v&&M.style("opacity",0).transition().duration(h.duration).style("opacity",1),u.setClipUrl(T,l.layerClipId,n),T.each(function(P){var L=r.select(this),I=t(P,s,p);if(!(g&&!P.vis)){var C,k=L.select("path.yerror");if(x.visible&&a(I.x)&&a(I.yh)&&a(I.ys)){var E=x.width;C="M"+(I.x-E)+","+I.yh+"h"+2*E+"m-"+E+",0V"+I.ys,I.noYS||(C+="m-"+E+",0h"+2*E),i=!k.size(),i?k=L.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):v&&(k=k.transition().duration(h.duration).ease(h.easing)),k.attr("d",C)}else k.remove();var R=L.select("path.xerror");if(y.visible&&a(I.y)&&a(I.xh)&&a(I.xs)){var O=(y.copy_ystyle?x:y).width;C="M"+I.xh+","+(I.y-O)+"v"+2*O+"m0,-"+O+"H"+I.xs,I.noXS||(C+="m0,-"+O+"v"+2*O),i=!R.size(),i?R=L.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):v&&(R=R.transition().duration(h.duration).ease(h.easing)),R.attr("d",C)}else R.remove()}})}})};function t(f,n,o){var l={x:n.c2p(f.x),y:o.c2p(f.y)};return f.yh!==void 0&&(l.yh=o.c2p(f.yh),l.ys=o.c2p(f.ys),a(l.ys)||(l.noYS=!0,l.ys=o.c2p(f.ys,!0))),f.xh!==void 0&&(l.xh=n.c2p(f.xh),l.xs=n.c2p(f.xs),a(l.xs)||(l.noXS=!0,l.xs=n.c2p(f.xs,!0))),l}},{"../../traces/scatter/subtypes":1212,"../drawing":665,d3:169,"fast-isnumeric":241}],673:[function(e,d,S){var r=e("d3"),a=e("../color");d.exports=function(c){c.each(function(t){var f=t[0].trace,n=f.error_y||{},o=f.error_x||{},l=r.select(this);l.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(a.stroke,n.color),o.copy_ystyle&&(o=n),l.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(a.stroke,o.color)})}},{"../color":643,d3:169}],674:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("./layout_attributes").hoverlabel,u=e("../../lib/extend").extendFlat;d.exports={hoverlabel:{bgcolor:u({},a.bgcolor,{arrayOk:!0}),bordercolor:u({},a.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:u({},a.align,{arrayOk:!0}),namelength:u({},a.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":768,"../../plots/font_attributes":856,"./layout_attributes":684}],675:[function(e,d,S){var r=e("../../lib"),a=e("../../registry");d.exports=function(t){var f=t.calcdata,n=t._fullLayout;function o(p){return function(v){return r.coerceHoverinfo({hoverinfo:v},{_module:p._module},n)}}for(var l=0;l<f.length;l++){var h=f[l],i=h[0].trace;if(!a.traceIs(i,"pie-like")){var s=a.traceIs(i,"2dMap")?u:r.fillArray;s(i.hoverinfo,h,"hi",o(i)),i.hovertemplate&&s(i.hovertemplate,h,"ht"),i.hoverlabel&&(s(i.hoverlabel.bgcolor,h,"hbg"),s(i.hoverlabel.bordercolor,h,"hbc"),s(i.hoverlabel.font.size,h,"hts"),s(i.hoverlabel.font.color,h,"htc"),s(i.hoverlabel.font.family,h,"htf"),s(i.hoverlabel.namelength,h,"hnl"),s(i.hoverlabel.align,h,"hta"))}}};function u(c,t,f,n){n=n||r.identity,Array.isArray(c)&&(t[0][f]=n(c))}},{"../../lib":778,"../../registry":911}],676:[function(e,d,S){var r=e("../../registry"),a=e("./hover").hover;d.exports=function(c,t,f){var n=r.getComponentMethod("annotations","onClick")(c,c._hoverdata);f!==void 0&&a(c,t,f,!0);function o(){c.emit("plotly_click",{points:c._hoverdata,event:t})}c._hoverdata&&t&&t.target&&(n&&n.then?n.then(o):o(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":911,"./hover":680}],677:[function(e,d,S){d.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],678:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("./hoverlabel_defaults");d.exports=function(t,f,n,o){function l(i,s){return r.coerce(t,f,a,i,s)}var h=r.extendFlat({},o.hoverlabel);f.hovertemplate&&(h.namelength=-1),u(t,f,l,h)}},{"../../lib":778,"./attributes":674,"./hoverlabel_defaults":681}],679:[function(e,d,S){var r=e("../../lib");S.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},S.isTraceInSubplots=function(n,o){if(n.type==="splom"){for(var l=n.xaxes||[],h=n.yaxes||[],i=0;i<l.length;i++)for(var s=0;s<h.length;s++)if(o.indexOf(l[i]+h[s])!==-1)return!0;return!1}return o.indexOf(S.getSubplot(n))!==-1},S.flat=function(n,o){for(var l=new Array(n.length),h=0;h<n.length;h++)l[h]=o;return l},S.p2c=function(n,o){for(var l=new Array(n.length),h=0;h<n.length;h++)l[h]=n[h].p2c(o);return l},S.getDistanceFunction=function(n,o,l,h){return n==="closest"?h||S.quadrature(o,l):n.charAt(0)==="x"?o:l},S.getClosest=function(n,o,l){if(l.index!==!1)l.index>=0&&l.index<n.length?l.distance=0:l.index=!1;else for(var h=0;h<n.length;h++){var i=o(n[h]);i<=l.distance&&(l.index=h,l.distance=i)}return l},S.inbox=function(n,o,l){return n*o<0||n===0?l:1/0},S.quadrature=function(n,o){return function(l){var h=n(l),i=o(l);return Math.sqrt(h*h+i*i)}},S.makeEventData=function(n,o,l){var h="index"in n?n.index:n.pointNumber,i={data:o._input,fullData:o,curveNumber:o.index,pointNumber:h};if(o._indexToPoints){var s=o._indexToPoints[h];s.length===1?i.pointIndex=s[0]:i.pointIndices=s}else i.pointIndex=h;return o._module.eventData?i=o._module.eventData(i,n,o,l,h):("xVal"in n?i.x=n.xVal:"x"in n&&(i.x=n.x),"yVal"in n?i.y=n.yVal:"y"in n&&(i.y=n.y),n.xa&&(i.xaxis=n.xa),n.ya&&(i.yaxis=n.ya),n.zLabelVal!==void 0&&(i.z=n.zLabelVal)),S.appendArrayPointValue(i,o,h),i},S.appendArrayPointValue=function(n,o,l){var h=o._arrayAttrs;if(!!h)for(var i=0;i<h.length;i++){var s=h[i],p=u(s);if(n[p]===void 0){var v=r.nestedProperty(o,s).get(),m=c(v,l);m!==void 0&&(n[p]=m)}}},S.appendArrayMultiPointValues=function(n,o,l){var h=o._arrayAttrs;if(!!h)for(var i=0;i<h.length;i++){var s=h[i],p=u(s);if(n[p]===void 0){for(var v=r.nestedProperty(o,s).get(),m=new Array(l.length),b=0;b<l.length;b++)m[b]=c(v,l[b]);n[p]=m}}};var a={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function u(n){return a[n]||n}function c(n,o){if(Array.isArray(o)){if(Array.isArray(n)&&Array.isArray(n[o[0]]))return n[o[0]][o[1]]}else return n[o]}var t={x:!0,y:!0},f={"x unified":!0,"y unified":!0};S.isUnifiedHover=function(n){return typeof n!="string"?!1:!!f[n]},S.isXYhover=function(n){return typeof n!="string"?!1:!!t[n]}},{"../../lib":778}],680:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("tinycolor2"),c=e("../../lib"),t=c.strTranslate,f=c.strRotate,n=e("../../lib/events"),o=e("../../lib/svg_text_utils"),l=e("../../lib/override_cursor"),h=e("../drawing"),i=e("../color"),s=e("../dragelement"),p=e("../../plots/cartesian/axes"),v=e("../../registry"),m=e("./helpers"),b=e("./constants"),y=e("../legend/defaults"),x=e("../legend/draw"),w=b.YANGLE,g=Math.PI*w/180,T=1/Math.sin(g),M=Math.cos(g),P=Math.sin(g),L=b.HOVERARROWSIZE,I=b.HOVERTEXTPAD;S.hover=function(Z,q,J,ne){Z=c.getGraphDiv(Z),c.throttle(Z._fullLayout._uid+b.HOVERID,b.HOVERMINTIME,function(){C(Z,q,J,ne)})},S.loneHover=function(Z,q){var J=!0;Array.isArray(Z)||(J=!1,Z=[Z]);var ne=Z.map(function(fe){return{color:fe.color||i.defaultLine,x0:fe.x0||fe.x||0,x1:fe.x1||fe.x||0,y0:fe.y0||fe.y||0,y1:fe.y1||fe.y||0,xLabel:fe.xLabel,yLabel:fe.yLabel,zLabel:fe.zLabel,text:fe.text,name:fe.name,idealAlign:fe.idealAlign,borderColor:fe.borderColor,fontFamily:fe.fontFamily,fontSize:fe.fontSize,fontColor:fe.fontColor,nameLength:fe.nameLength,textAlign:fe.textAlign,trace:fe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:fe.hovertemplate||!1,eventData:fe.eventData||!1,hovertemplateLabels:fe.hovertemplateLabels||!1}}),ve=r.select(q.container),$=q.outerContainer?r.select(q.outerContainer):ve,j={hovermode:"closest",rotateLabels:!1,bgColor:q.bgColor||i.background,container:ve,outerContainer:$},ae=R(ne,j,q.gd),ie=5,te=0,re=0;ae.sort(function(fe,se){return fe.y0-se.y0}).each(function(fe,se){var de=fe.y0-fe.by/2;de-ie<te?fe.offset=te-de+ie:fe.offset=0,te=de+fe.by+fe.offset,se===q.anchorIndex&&(re=fe.offset)}).each(function(fe){fe.offset-=re});var ce=q.gd._fullLayout._invScaleX,pe=q.gd._fullLayout._invScaleY;return G(ae,j.rotateLabels,ce,pe),J?ae:ae.node()};function C(V,Z,q,J){q||(q="xy");var ne=Array.isArray(q)?q:[q],ve=V._fullLayout,$=ve._plots||[],j=$[q],ae=ve._has("cartesian");if(j){var ie=j.overlays.map(function(Vt){return Vt.id});ne=ne.concat(ie)}for(var te=ne.length,re=new Array(te),ce=new Array(te),pe=!1,fe=0;fe<te;fe++){var se=ne[fe];if($[se])pe=!0,re[fe]=$[se].xaxis,ce[fe]=$[se].yaxis;else if(ve[se]&&ve[se]._subplot){var de=ve[se]._subplot;re[fe]=de.xaxis,ce[fe]=de.yaxis}else{c.warn("Unrecognized subplot: "+se);return}}var be=Z.hovermode||ve.hovermode;if(be&&!pe&&(be="closest"),["x","y","closest","x unified","y unified"].indexOf(be)===-1||!V.calcdata||V.querySelector(".zoombox")||V._dragging)return s.unhoverRaw(V,Z);var xe=ve.hoverdistance===-1?1/0:ve.hoverdistance,ke=ve.spikedistance===-1?1/0:ve.spikedistance,Re=[],Ke=[],ze,Je,qe,Ee,Ae,Be,$e,xt,bt,Ne,st,_t,Ot,Wt={hLinePoint:null,vLinePoint:null},Et=!1;if(Array.isArray(Z))for(be="array",qe=0;qe<Z.length;qe++)Ae=V.calcdata[Z[qe].curveNumber||0],Ae&&(Be=Ae[0].trace,Ae[0].trace.hoverinfo!=="skip"&&(Ke.push(Ae),Be.orientation==="h"&&(Et=!0)));else{for(Ee=0;Ee<V.calcdata.length;Ee++)Ae=V.calcdata[Ee],Be=Ae[0].trace,Be.hoverinfo!=="skip"&&m.isTraceInSubplots(Be,ne)&&(Ke.push(Ae),Be.orientation==="h"&&(Et=!0));var jt=!Z.target,Zt,Mt;if(jt)"xpx"in Z?Zt=Z.xpx:Zt=re[0]._length/2,"ypx"in Z?Mt=Z.ypx:Mt=ce[0]._length/2;else{if(n.triggerHandler(V,"plotly_beforehover",Z)===!1)return;var At=Z.target.getBoundingClientRect();Zt=Z.clientX-At.left,Mt=Z.clientY-At.top,ve._calcInverseTransform(V);var ft=c.apply3DTransform(ve._invTransform)(Zt,Mt);if(Zt=ft[0],Mt=ft[1],Zt<0||Zt>re[0]._length||Mt<0||Mt>ce[0]._length)return s.unhoverRaw(V,Z)}if(Z.pointerX=Zt+re[0]._offset,Z.pointerY=Mt+ce[0]._offset,"xval"in Z?ze=m.flat(ne,Z.xval):ze=m.p2c(re,Zt),"yval"in Z?Je=m.flat(ne,Z.yval):Je=m.p2c(ce,Mt),!a(ze[0])||!a(Je[0]))return c.warn("Fx.hover failed",Z,V),s.unhoverRaw(V,Z)}var ot=1/0;function Te(Vt,cr){for(Ee=0;Ee<Ke.length;Ee++)if(Ae=Ke[Ee],!(!Ae||!Ae[0]||!Ae[0].trace)&&(Be=Ae[0].trace,!(Be.visible!==!0||Be._length===0)&&["carpet","contourcarpet"].indexOf(Be._module.name)===-1)){if(Be.type==="splom"?(xt=0,$e=ne[xt]):($e=m.getSubplot(Be),xt=ne.indexOf($e)),bt=be,m.isUnifiedHover(bt)&&(bt=bt.charAt(0)),_t={cd:Ae,trace:Be,xa:re[xt],ya:ce[xt],maxHoverDistance:xe,maxSpikeDistance:ke,index:!1,distance:Math.min(ot,xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:i.defaultLine,name:Be.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ve[$e]&&(_t.subplot=ve[$e]._subplot),ve._splomScenes&&ve._splomScenes[Be.uid]&&(_t.scene=ve._splomScenes[Be.uid]),Ot=Re.length,bt==="array"){var Or=Z[Ee];"pointNumber"in Or?(_t.index=Or.pointNumber,bt="closest"):(bt="","xval"in Or&&(Ne=Or.xval,bt="x"),"yval"in Or&&(st=Or.yval,bt=bt?"closest":"y"))}else Vt!==void 0&&cr!==void 0?(Ne=Vt,st=cr):(Ne=ze[xt],st=Je[xt]);if(xe!==0)if(Be._module&&Be._module.hoverPoints){var kr=Be._module.hoverPoints(_t,Ne,st,bt,ve._hoverlayer);if(kr)for(var Sr,vn=0;vn<kr.length;vn++)Sr=kr[vn],a(Sr.x0)&&a(Sr.y0)&&Re.push(U(Sr,be))}else c.log("Unrecognized trace type in hover:",Be);if(be==="closest"&&Re.length>Ot&&(Re.splice(0,Ot),ot=Re[0].distance),ae&&ke!==0&&Re.length===0){_t.distance=ke,_t.index=!1;var Rn=Be._module.hoverPoints(_t,Ne,st,"closest",ve._hoverlayer);if(Rn&&(Rn=Rn.filter(function(dn){return dn.spikeDistance<=ke})),Rn&&Rn.length){var hn,An=Rn.filter(function(dn){return dn.xa.showspikes&&dn.xa.spikesnap!=="hovered data"});if(An.length){var En=An[0];a(En.x0)&&a(En.y0)&&(hn=Ve(En),(!Wt.vLinePoint||Wt.vLinePoint.spikeDistance>hn.spikeDistance)&&(Wt.vLinePoint=hn))}var Mr=Rn.filter(function(dn){return dn.ya.showspikes&&dn.ya.spikesnap!=="hovered data"});if(Mr.length){var xr=Mr[0];a(xr.x0)&&a(xr.y0)&&(hn=Ve(xr),(!Wt.hLinePoint||Wt.hLinePoint.spikeDistance>hn.spikeDistance)&&(Wt.hLinePoint=hn))}}}}}Te();function Le(Vt,cr){for(var Or=null,kr=1/0,Sr,vn=0;vn<Vt.length;vn++)Sr=Vt[vn].spikeDistance,Sr<=kr&&Sr<=cr&&(Or=Vt[vn],kr=Sr);return Or}function Ve(Vt){return Vt?{xa:Vt.xa,ya:Vt.ya,x:Vt.xSpike!==void 0?Vt.xSpike:(Vt.x0+Vt.x1)/2,y:Vt.ySpike!==void 0?Vt.ySpike:(Vt.y0+Vt.y1)/2,distance:Vt.distance,spikeDistance:Vt.spikeDistance,curveNumber:Vt.trace.index,color:Vt.color,pointNumber:Vt.index}:null}var Qe={fullLayout:ve,container:ve._hoverlayer,outerContainer:ve._paperdiv,event:Z},Me=V._spikepoints,Ie={vLinePoint:Wt.vLinePoint,hLinePoint:Wt.hLinePoint};if(V._spikepoints=Ie,ae&&ke!==0&&Re.length!==0){var He=Re.filter(function(Vt){return Vt.ya.showspikes}),Ye=Le(He,ke);Wt.hLinePoint=Ve(Ye);var ut=Re.filter(function(Vt){return Vt.xa.showspikes}),nt=Le(ut,ke);Wt.vLinePoint=Ve(nt)}if(Re.length===0){var Ge=s.unhoverRaw(V,Z);return ae&&(Wt.hLinePoint!==null||Wt.vLinePoint!==null)&&B(Me)&&Y(V,Wt,Qe),Ge}if(ae&&B(Me)&&Y(V,Wt,Qe),Re.sort(function(Vt,cr){return Vt.distance-cr.distance}),m.isXYhover(bt)&&Re[0].length!==0&&Re[0].trace.type!=="splom"){var at=Re[0],et=at.cd[at.index],lt=ve.boxmode==="group"||ve.violinmode==="group",Ct=at.xVal,Pt=at.xa;Pt.type==="category"&&(Ct=Pt._categoriesMap[Ct]),Pt.type==="date"&&(Ct=Pt.d2c(Ct)),et&&et.t&&et.t.posLetter===Pt._id&&lt&&(Ct+=et.t.dPos);var $t=at.yVal;Pt=at.ya,Pt.type==="category"&&($t=Pt._categoriesMap[$t]),Pt.type==="date"&&($t=Pt.d2c($t)),et&&et.t&&et.t.posLetter===Pt._id&&lt&&($t+=et.t.dPos),Te(Ct,$t);var je={};Re=Re.filter(function(Vt){var cr=k(Vt);if(!je[cr])return je[cr]=!0,je[cr]})}var Oe=V._hoverdata,mt=[];for(qe=0;qe<Re.length;qe++){var wt=Re[qe],yt=m.makeEventData(wt,wt.trace,wt.cd);if(wt.hovertemplate!==!1){var St=!1;wt.cd[wt.index]&&wt.cd[wt.index].ht&&(St=wt.cd[wt.index].ht),wt.hovertemplate=St||wt.trace.hovertemplate||!1}wt.eventData=[yt],mt.push(yt)}V._hoverdata=mt;var kt=be==="y"&&(Ke.length>1||Re.length>1)||be==="closest"&&Et&&Re.length>1,Rt=i.combine(ve.plot_bgcolor||i.background,ve.paper_bgcolor),zt={hovermode:be,rotateLabels:kt,bgColor:Rt,container:ve._hoverlayer,outerContainer:ve._paperdiv,commonLabelOpts:ve.hoverlabel,hoverdistance:ve.hoverdistance},Xt=R(Re,zt,V);if(m.isUnifiedHover(be)||(N(Xt,kt?"xa":"ya",ve),G(Xt,kt,ve._invScaleX,ve._invScaleY)),Z.target&&Z.target.tagName){var Yt=v.getComponentMethod("annotations","hasClickToShow")(V,mt);l(r.select(Z.target),Yt?"pointer":"")}!Z.target||J||!z(V,Z,Oe)||(Oe&&V.emit("plotly_unhover",{event:Z,points:Oe}),V.emit("plotly_hover",{event:Z,points:V._hoverdata,xaxes:re,yaxes:ce,xvals:ze,yvals:Je}))}function k(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa,V.ya||""].join(",")}var E=/<extra>([\s\S]*)<\/extra>/;function R(V,Z,q){var J=q._fullLayout,ne=Z.hovermode,ve=Z.rotateLabels,$=Z.bgColor,j=Z.container,ae=Z.outerContainer,ie=Z.commonLabelOpts||{},te=Z.fontFamily||b.HOVERFONT,re=Z.fontSize||b.HOVERFONTSIZE,ce=V[0],pe=ce.xa,fe=ce.ya,se=ne.charAt(0)==="y"?"yLabel":"xLabel",de=ce[se],be=(String(de)||"").split(" ")[0],xe=ae.node().getBoundingClientRect(),ke=xe.top,Re=xe.width,Ke=xe.height,ze=de!==void 0&&ce.distance<=Z.hoverdistance&&(ne==="x"||ne==="y");if(ze){var Je=!0,qe,Ee;for(qe=0;qe<V.length;qe++)if(Je&&V[qe].zLabel===void 0&&(Je=!1),Ee=V[qe].hoverinfo||V[qe].trace.hoverinfo,Ee){var Ae=Array.isArray(Ee)?Ee:Ee.split("+");if(Ae.indexOf("all")===-1&&Ae.indexOf(ne)===-1){ze=!1;break}}Je&&(ze=!1)}var Be=j.selectAll("g.axistext").data(ze?[0]:[]);Be.enter().append("g").classed("axistext",!0),Be.exit().remove(),Be.each(function(){var Ye=r.select(this),ut=c.ensureSingle(Ye,"path","",function(Vt){Vt.style({"stroke-width":"1px"})}),nt=c.ensureSingle(Ye,"text","",function(Vt){Vt.attr("data-notex",1)}),Ge=ie.bgcolor||i.defaultLine,at=ie.bordercolor||i.contrast(Ge),et=i.contrast(Ge),lt={family:ie.font.family||te,size:ie.font.size||re,color:ie.font.color||et};ut.style({fill:Ge,stroke:at}),nt.text(de).call(h.font,lt).call(o.positionText,0,0).call(o.convertToTspans,q),Ye.attr("transform","");var Ct=nt.node().getBoundingClientRect(),Pt,$t;if(ne==="x"){var je=pe.side==="top"?"-":"";nt.attr("text-anchor","middle").call(o.positionText,0,pe.side==="top"?ke-Ct.bottom-L-I:ke-Ct.top+L+I),Pt=pe._offset+(ce.x0+ce.x1)/2,$t=fe._offset+(pe.side==="top"?0:fe._length);var Oe=Ct.width/2+I;Pt<Oe?(Pt=Oe,ut.attr("d","M-"+(Oe-L)+",0L-"+(Oe-L*2)+","+je+L+"H"+(I+Ct.width/2)+"v"+je+(I*2+Ct.height)+"H-"+Oe+"V"+je+L+"Z")):Pt>J.width-Oe?(Pt=J.width-Oe,ut.attr("d","M"+(Oe-L)+",0L"+Oe+","+je+L+"v"+je+(I*2+Ct.height)+"H-"+Oe+"V"+je+L+"H"+(Oe-L*2)+"Z")):ut.attr("d","M0,0L"+L+","+je+L+"H"+(I+Ct.width/2)+"v"+je+(I*2+Ct.height)+"H-"+(I+Ct.width/2)+"V"+je+L+"H-"+L+"Z")}else{var mt,wt,yt;fe.side==="right"?(mt="start",wt=1,yt="",Pt=pe._offset+pe._length):(mt="end",wt=-1,yt="-",Pt=pe._offset),$t=fe._offset+(ce.y0+ce.y1)/2,nt.attr("text-anchor",mt),ut.attr("d","M0,0L"+yt+L+","+L+"V"+(I+Ct.height/2)+"h"+yt+(I*2+Ct.width)+"V-"+(I+Ct.height/2)+"H"+yt+L+"V-"+L+"Z");var St=Ct.height/2,kt=ke-Ct.top-St,Rt="clip"+J._uid+"commonlabel"+fe._id,zt;if(Pt<Ct.width+2*I+L){zt="M-"+(L+I)+"-"+St+"h-"+(Ct.width-I)+"V"+St+"h"+(Ct.width-I)+"Z";var Xt=Ct.width-Pt+I;o.positionText(nt,Xt,kt),mt==="end"&&nt.selectAll("tspan").each(function(){var Vt=r.select(this),cr=h.tester.append("text").text(Vt.text()).call(h.font,lt),Or=cr.node().getBoundingClientRect();Math.round(Or.width)<Math.round(Ct.width)&&Vt.attr("x",Xt-Or.width),cr.remove()})}else o.positionText(nt,wt*(I+L),kt),zt=null;var Yt=J._topclips.selectAll("#"+Rt).data(zt?[0]:[]);Yt.enter().append("clipPath").attr("id",Rt).append("path"),Yt.exit().remove(),Yt.select("path").attr("d",zt),h.setClipUrl(nt,zt?Rt:null,q)}Ye.attr("transform",t(Pt,$t)),V=$e(V)});function $e(Ye){return Ye.filter(function(ut){return ut.zLabelVal!==void 0||(ut[se]||"").split(" ")[0]===be})}if(m.isUnifiedHover(ne)){if(j.selectAll("g.hovertext").remove(),de!==void 0&&ce.distance<=Z.hoverdistance&&(V=$e(V)),V.length===0)return;var xt={showlegend:!0,legend:{title:{text:de,font:J.hoverlabel.font},font:J.hoverlabel.font,bgcolor:J.hoverlabel.bgcolor,bordercolor:J.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:J.legend?J.legend.traceorder:void 0,orientation:"v"}},bt={};y(xt,bt,q._fullData);var Ne=bt.legend;Ne.entries=[];for(var st=0;st<V.length;st++){var _t=O(V[st],!0,ne,J,de),Ot=_t[0],Wt=_t[1],Et=V[st];Et.name=Wt,Wt!==""?Et.text=Wt+" : "+Ot:Et.text=Ot;var jt=Et.cd[Et.index];jt&&(jt.mc&&(Et.mc=jt.mc),jt.mcc&&(Et.mc=jt.mcc),jt.mlc&&(Et.mlc=jt.mlc),jt.mlcc&&(Et.mlc=jt.mlcc),jt.mlw&&(Et.mlw=jt.mlw),jt.mrc&&(Et.mrc=jt.mrc),jt.dir&&(Et.dir=jt.dir)),Et._distinct=!0,Ne.entries.push([Et])}Ne.entries.sort(function(Ye,ut){return Ye[0].trace.index-ut[0].trace.index}),Ne.layer=j,x(q,Ne);var Zt=c.mean(V.map(function(Ye){return(Ye.y0+Ye.y1)/2})),Mt=c.mean(V.map(function(Ye){return(Ye.x0+Ye.x1)/2})),At=j.select("g.legend"),ft=At.node().getBoundingClientRect();Mt+=pe._offset,Zt+=fe._offset-ft.height/2;var ot=ft.width+2*I,Te=Mt+ot<=Re,Le=Mt-ot>=0;!Te&&Le?Mt-=ot:Mt+=2*I;var Ve=ft.height+2*I,Qe=Zt<=ke,Me=Zt+Ve>=Ke,Ie=Ve<=Ke;return Ie&&(Qe?Zt=fe._offset+2*I:Me&&(Zt=Ke-Ve)),At.attr("transform",t(Mt,Zt)),At}var He=j.selectAll("g.hovertext").data(V,function(Ye){return k(Ye)});return He.enter().append("g").classed("hovertext",!0).each(function(){var Ye=r.select(this);Ye.append("rect").call(i.fill,i.addOpacity($,.8)),Ye.append("text").classed("name",!0),Ye.append("path").style("stroke-width","1px"),Ye.append("text").classed("nums",!0).call(h.font,te,re)}),He.exit().remove(),He.each(function(Ye){var ut=r.select(this).attr("transform",""),nt=Ye.color;Array.isArray(nt)&&(nt=nt[Ye.eventData[0].pointNumber]);var Ge=Ye.bgcolor||nt,at=i.combine(i.opacity(Ge)?Ge:i.defaultLine,$),et=i.combine(i.opacity(nt)?nt:i.defaultLine,$),lt=Ye.borderColor||i.contrast(at),Ct=O(Ye,ze,ne,J,de,ut),Pt=Ct[0],$t=Ct[1],je=ut.select("text.nums").call(h.font,Ye.fontFamily||te,Ye.fontSize||re,Ye.fontColor||lt).text(Pt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,q),Oe=ut.select("text.name"),mt=0,wt=0;if($t&&$t!==Pt){Oe.call(h.font,Ye.fontFamily||te,Ye.fontSize||re,et).text($t).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,q);var yt=Oe.node().getBoundingClientRect();mt=yt.width+2*I,wt=yt.height+2*I}else Oe.remove(),ut.select("rect").remove();ut.select("path").style({fill:at,stroke:lt});var St=je.node().getBoundingClientRect(),kt=Ye.xa._offset+(Ye.x0+Ye.x1)/2,Rt=Ye.ya._offset+(Ye.y0+Ye.y1)/2,zt=Math.abs(Ye.x1-Ye.x0),Xt=Math.abs(Ye.y1-Ye.y0),Yt=St.width+L+I+mt,Vt,cr;if(Ye.ty0=ke-St.top,Ye.bx=St.width+2*I,Ye.by=Math.max(St.height+2*I,wt),Ye.anchor="start",Ye.txwidth=St.width,Ye.tx2width=mt,Ye.offset=0,ve)Ye.pos=kt,Vt=Rt+Xt/2+Yt<=Ke,cr=Rt-Xt/2-Yt>=0,(Ye.idealAlign==="top"||!Vt)&&cr?(Rt-=Xt/2,Ye.anchor="end"):Vt?(Rt+=Xt/2,Ye.anchor="start"):Ye.anchor="middle";else if(Ye.pos=Rt,Vt=kt+zt/2+Yt<=Re,cr=kt-zt/2-Yt>=0,(Ye.idealAlign==="left"||!Vt)&&cr)kt-=zt/2,Ye.anchor="end";else if(Vt)kt+=zt/2,Ye.anchor="start";else{Ye.anchor="middle";var Or=Yt/2,kr=kt+Or-Re,Sr=kt-Or;kr>0&&(kt-=kr),Sr<0&&(kt+=-Sr)}je.attr("text-anchor",Ye.anchor),mt&&Oe.attr("text-anchor",Ye.anchor),ut.attr("transform",t(kt,Rt)+(ve?f(w):""))}),He}function O(V,Z,q,J,ne,ve){var $="",j="";V.nameOverride!==void 0&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=c.templateString(V.name,V.trace._meta)),$=H(V.name,V.nameLength)),V.zLabel!==void 0?(V.xLabel!==void 0&&(j+="x: "+V.xLabel+"<br>"),V.yLabel!==void 0&&(j+="y: "+V.yLabel+"<br>"),V.trace.type!=="choropleth"&&V.trace.type!=="choroplethmapbox"&&(j+=(j?"z: ":"")+V.zLabel)):Z&&V[q.charAt(0)+"Label"]===ne?j=V[(q.charAt(0)==="x"?"y":"x")+"Label"]||"":V.xLabel===void 0?V.yLabel!==void 0&&V.trace.type!=="scattercarpet"&&(j=V.yLabel):V.yLabel===void 0?j=V.xLabel:j="("+V.xLabel+", "+V.yLabel+")",(V.text||V.text===0)&&!Array.isArray(V.text)&&(j+=(j?"<br>":"")+V.text),V.extraText!==void 0&&(j+=(j?"<br>":"")+V.extraText),ve&&j===""&&!V.hovertemplate&&($===""&&ve.remove(),j=$);var ae=J._d3locale,ie=V.hovertemplate||!1,te=V.hovertemplateLabels||V,re=V.eventData[0]||{};return ie&&(j=c.hovertemplateString(ie,te,ae,re,V.trace._meta),j=j.replace(E,function(ce,pe){return $=H(pe,V.nameLength),""})),[j,$]}function N(V,Z,q){var J=0,ne=1,ve=V.size(),$=new Array(ve),j=0;V.each(function(Je){var qe=Je[Z],Ee=qe._id.charAt(0)==="x",Ae=qe.range;j===0&&Ae&&Ae[0]>Ae[1]!==Ee&&(ne=-1),$[j++]=[{datum:Je,traceIndex:Je.trace.index,dp:0,pos:Je.pos,posref:Je.posref,size:Je.by*(Ee?T:1)/2,pmin:0,pmax:Ee?q.width:q.height}]}),$.sort(function(Je,qe){return Je[0].posref-qe[0].posref||ne*(qe[0].traceIndex-Je[0].traceIndex)});var ae,ie,te,re,ce,pe,fe;function se(Je){var qe=Je[0],Ee=Je[Je.length-1];if(ie=qe.pmin-qe.pos-qe.dp+qe.size,te=Ee.pos+Ee.dp+Ee.size-qe.pmax,ie>.01){for(ce=Je.length-1;ce>=0;ce--)Je[ce].dp+=ie;ae=!1}if(!(te<.01)){if(ie<-.01){for(ce=Je.length-1;ce>=0;ce--)Je[ce].dp-=te;ae=!1}if(!!ae){var Ae=0;for(re=0;re<Je.length;re++)pe=Je[re],pe.pos+pe.dp+pe.size>qe.pmax&&Ae++;for(re=Je.length-1;re>=0&&!(Ae<=0);re--)pe=Je[re],pe.pos>qe.pmax-1&&(pe.del=!0,Ae--);for(re=0;re<Je.length&&!(Ae<=0);re++)if(pe=Je[re],pe.pos<qe.pmin+1)for(pe.del=!0,Ae--,te=pe.size*2,ce=Je.length-1;ce>=0;ce--)Je[ce].dp-=te;for(re=Je.length-1;re>=0&&!(Ae<=0);re--)pe=Je[re],pe.pos+pe.dp+pe.size>qe.pmax&&(pe.del=!0,Ae--)}}}for(;!ae&&J<=ve;){for(J++,ae=!0,re=0;re<$.length-1;){var de=$[re],be=$[re+1],xe=de[de.length-1],ke=be[0];if(ie=xe.pos+xe.dp+xe.size-ke.pos-ke.dp+ke.size,ie>.01&&xe.pmin===ke.pmin&&xe.pmax===ke.pmax){for(ce=be.length-1;ce>=0;ce--)be[ce].dp+=ie;for(de.push.apply(de,be),$.splice(re+1,1),fe=0,ce=de.length-1;ce>=0;ce--)fe+=de[ce].dp;for(te=fe/de.length,ce=de.length-1;ce>=0;ce--)de[ce].dp-=te;ae=!1}else re++}$.forEach(se)}for(re=$.length-1;re>=0;re--){var Re=$[re];for(ce=Re.length-1;ce>=0;ce--){var Ke=Re[ce],ze=Ke.datum;ze.offset=Ke.dp,ze.del=Ke.del}}}function G(V,Z,q,J){var ne=function($){return $*q},ve=function($){return $*J};V.each(function($){var j=r.select(this);if($.del)return j.remove();var ae=j.select("text.nums"),ie=$.anchor,te=ie==="end"?-1:1,re={start:1,end:-1,middle:0}[ie],ce=re*(L+I),pe=ce+re*($.txwidth+I),fe=0,se=$.offset,de=ie==="middle";de&&(ce-=$.tx2width/2,pe+=$.txwidth/2+I),Z&&(se*=-P,fe=$.offset*M),j.select("path").attr("d",de?"M-"+ne($.bx/2+$.tx2width/2)+","+ve(se-$.by/2)+"h"+ne($.bx)+"v"+ve($.by)+"h-"+ne($.bx)+"Z":"M0,0L"+ne(te*L+fe)+","+ve(L+se)+"v"+ve($.by/2-L)+"h"+ne(te*$.bx)+"v-"+ve($.by)+"H"+ne(te*L+fe)+"V"+ve(se-L)+"Z");var be=fe+ce,xe=se+$.ty0-$.by/2+I,ke=$.textAlign||"auto";ke!=="auto"&&(ke==="left"&&ie!=="start"?(ae.attr("text-anchor","start"),be=de?-$.bx/2-$.tx2width/2+I:-$.bx-I):ke==="right"&&ie!=="end"&&(ae.attr("text-anchor","end"),be=de?$.bx/2-$.tx2width/2-I:$.bx+I)),ae.call(o.positionText,ne(be),ve(xe)),$.tx2width&&(j.select("text.name").call(o.positionText,ne(pe+re*I+fe),ve(se+$.ty0-$.by/2+I)),j.select("rect").call(h.setRect,ne(pe+(re-1)*$.tx2width/2+fe),ve(se-$.by/2-1),ne($.tx2width),ve($.by+2)))})}function U(V,Z){var q=V.index,J=V.trace||{},ne=V.cd[0],ve=V.cd[q]||{};function $(ce){return ce||a(ce)&&ce===0}var j=Array.isArray(q)?function(ce,pe){var fe=c.castOption(ne,q,ce);return $(fe)?fe:c.extractOption({},J,"",pe)}:function(ce,pe){return c.extractOption(ve,J,ce,pe)};function ae(ce,pe,fe){var se=j(pe,fe);$(se)&&(V[ce]=se)}if(ae("hoverinfo","hi","hoverinfo"),ae("bgcolor","hbg","hoverlabel.bgcolor"),ae("borderColor","hbc","hoverlabel.bordercolor"),ae("fontFamily","htf","hoverlabel.font.family"),ae("fontSize","hts","hoverlabel.font.size"),ae("fontColor","htc","hoverlabel.font.color"),ae("nameLength","hnl","hoverlabel.namelength"),ae("textAlign","hta","hoverlabel.align"),V.posref=Z==="y"||Z==="closest"&&J.orientation==="h"?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=c.constrain(V.x0,0,V.xa._length),V.x1=c.constrain(V.x1,0,V.xa._length),V.y0=c.constrain(V.y0,0,V.ya._length),V.y1=c.constrain(V.y1,0,V.ya._length),V.xLabelVal!==void 0&&(V.xLabel="xLabel"in V?V.xLabel:p.hoverLabelText(V.xa,V.xLabelVal),V.xVal=V.xa.c2d(V.xLabelVal)),V.yLabelVal!==void 0&&(V.yLabel="yLabel"in V?V.yLabel:p.hoverLabelText(V.ya,V.yLabelVal),V.yVal=V.ya.c2d(V.yLabelVal)),V.zLabelVal!==void 0&&V.zLabel===void 0&&(V.zLabel=String(V.zLabelVal)),!isNaN(V.xerr)&&!(V.xa.type==="log"&&V.xerr<=0)){var ie=p.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xerrneg!==void 0?V.xLabel+=" +"+ie+" / -"+p.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:V.xLabel+=" \xB1 "+ie,Z==="x"&&(V.distance+=1)}if(!isNaN(V.yerr)&&!(V.ya.type==="log"&&V.yerr<=0)){var te=p.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yerrneg!==void 0?V.yLabel+=" +"+te+" / -"+p.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:V.yLabel+=" \xB1 "+te,Z==="y"&&(V.distance+=1)}var re=V.hoverinfo||V.trace.hoverinfo;return re&&re!=="all"&&(re=Array.isArray(re)?re:re.split("+"),re.indexOf("x")===-1&&(V.xLabel=void 0),re.indexOf("y")===-1&&(V.yLabel=void 0),re.indexOf("z")===-1&&(V.zLabel=void 0),re.indexOf("text")===-1&&(V.text=void 0),re.indexOf("name")===-1&&(V.name=void 0)),V}function Y(V,Z,q){var J=q.container,ne=q.fullLayout,ve=ne._size,$=q.event,j=!!Z.hLinePoint,ae=!!Z.vLinePoint,ie,te;if(J.selectAll(".spikeline").remove(),!!(ae||j)){var re=i.combine(ne.plot_bgcolor,ne.paper_bgcolor);if(j){var ce=Z.hLinePoint,pe,fe;ie=ce&&ce.xa,te=ce&&ce.ya;var se=te.spikesnap;se==="cursor"?(pe=$.pointerX,fe=$.pointerY):(pe=ie._offset+ce.x,fe=te._offset+ce.y);var de=u.readability(ce.color,re)<1.5?i.contrast(re):ce.color,be=te.spikemode,xe=te.spikethickness,ke=te.spikecolor||de,Re=p.getPxPosition(V,te),Ke,ze;if(be.indexOf("toaxis")!==-1||be.indexOf("across")!==-1){if(be.indexOf("toaxis")!==-1&&(Ke=Re,ze=pe),be.indexOf("across")!==-1){var Je=te._counterDomainMin,qe=te._counterDomainMax;te.anchor==="free"&&(Je=Math.min(Je,te.position),qe=Math.max(qe,te.position)),Ke=ve.l+Je*ve.w,ze=ve.l+qe*ve.w}J.insert("line",":first-child").attr({x1:Ke,x2:ze,y1:fe,y2:fe,"stroke-width":xe,stroke:ke,"stroke-dasharray":h.dashStyle(te.spikedash,xe)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:Ke,x2:ze,y1:fe,y2:fe,"stroke-width":xe+2,stroke:re}).classed("spikeline",!0).classed("crisp",!0)}be.indexOf("marker")!==-1&&J.insert("circle",":first-child").attr({cx:Re+(te.side!=="right"?xe:-xe),cy:fe,r:xe,fill:ke}).classed("spikeline",!0)}if(ae){var Ee=Z.vLinePoint,Ae,Be;ie=Ee&&Ee.xa,te=Ee&&Ee.ya;var $e=ie.spikesnap;$e==="cursor"?(Ae=$.pointerX,Be=$.pointerY):(Ae=ie._offset+Ee.x,Be=te._offset+Ee.y);var xt=u.readability(Ee.color,re)<1.5?i.contrast(re):Ee.color,bt=ie.spikemode,Ne=ie.spikethickness,st=ie.spikecolor||xt,_t=p.getPxPosition(V,ie),Ot,Wt;if(bt.indexOf("toaxis")!==-1||bt.indexOf("across")!==-1){if(bt.indexOf("toaxis")!==-1&&(Ot=_t,Wt=Be),bt.indexOf("across")!==-1){var Et=ie._counterDomainMin,jt=ie._counterDomainMax;ie.anchor==="free"&&(Et=Math.min(Et,ie.position),jt=Math.max(jt,ie.position)),Ot=ve.t+(1-jt)*ve.h,Wt=ve.t+(1-Et)*ve.h}J.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Ot,y2:Wt,"stroke-width":Ne,stroke:st,"stroke-dasharray":h.dashStyle(ie.spikedash,Ne)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:Ae,x2:Ae,y1:Ot,y2:Wt,"stroke-width":Ne+2,stroke:re}).classed("spikeline",!0).classed("crisp",!0)}bt.indexOf("marker")!==-1&&J.insert("circle",":first-child").attr({cx:Ae,cy:_t-(ie.side!=="top"?Ne:-Ne),r:Ne,fill:st}).classed("spikeline",!0)}}}function z(V,Z,q){if(!q||q.length!==V._hoverdata.length)return!0;for(var J=q.length-1;J>=0;J--){var ne=q[J],ve=V._hoverdata[J];if(ne.curveNumber!==ve.curveNumber||String(ne.pointNumber)!==String(ve.pointNumber)||String(ne.pointNumbers)!==String(ve.pointNumbers))return!0}return!1}function B(V,Z){return!Z||Z.vLinePoint!==V._spikepoints.vLinePoint||Z.hLinePoint!==V._spikepoints.hLinePoint}function H(V,Z){return o.plainText(V||"",{len:Z,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":778,"../../lib/events":767,"../../lib/override_cursor":789,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../legend/defaults":695,"../legend/draw":696,"./constants":677,"./helpers":679,d3:169,"fast-isnumeric":241,tinycolor2:576}],681:[function(e,d,S){var r=e("../../lib"),a=e("../color"),u=e("./helpers").isUnifiedHover;d.exports=function(t,f,n,o){o=o||{};function l(h){o.font[h]||(o.font[h]=f.legend?f.legend.font[h]:f.font[h])}f&&u(f.hovermode)&&(o.font||(o.font={}),l("size"),l("family"),l("color"),f.legend?(o.bgcolor||(o.bgcolor=a.combine(f.legend.bgcolor,f.paper_bgcolor)),o.bordercolor||(o.bordercolor=f.legend.bordercolor)):o.bgcolor||(o.bgcolor=f.paper_bgcolor)),n("hoverlabel.bgcolor",o.bgcolor),n("hoverlabel.bordercolor",o.bordercolor),n("hoverlabel.namelength",o.namelength),r.coerceFont(n,"hoverlabel.font",o.font),n("hoverlabel.align",o.align)}},{"../../lib":778,"../color":643,"./helpers":679}],682:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(t,f,n){function o(i,s){return f[i]!==void 0?f[i]:r.coerce(t,f,a,i,s)}var l=o("clickmode"),h;return f._has("cartesian")?l.indexOf("select")>-1?h="closest":(f._isHoriz=u(n,f),h=f._isHoriz?"y":"x"):h="closest",o("hovermode",h)};function u(c,t){for(var f=t._scatterStackOpts||{},n=0;n<c.length;n++){var o=c[n],l=o.xaxis+o.yaxis,h=f[l]||{},i=h[o.stackgroup]||{};if(o.orientation!=="h"&&i.orientation!=="h")return!1}return!0}},{"../../lib":778,"./layout_attributes":684}],683:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../dragelement"),c=e("./helpers"),t=e("./layout_attributes"),f=e("./hover");d.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:c.getDistanceFunction,getClosest:c.getClosest,inbox:c.inbox,quadrature:c.quadrature,appendArrayPointValue:c.appendArrayPointValue,castHoverOption:o,castHoverinfo:l,hover:f.hover,unhover:u.unhover,loneHover:f.loneHover,loneUnhover:n,click:e("./click")};function n(h){var i=a.isD3Selection(h)?h:r.select(h);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()}function o(h,i,s){return a.castOption(h,i,"hoverlabel."+s)}function l(h,i,s){function p(v){return a.coerceHoverinfo({hoverinfo:v},{_module:h._module},i)}return a.castOption(h,s,"hoverinfo",p)}},{"../../lib":778,"../dragelement":662,"./attributes":674,"./calc":675,"./click":676,"./constants":677,"./defaults":678,"./helpers":679,"./hover":680,"./layout_attributes":684,"./layout_defaults":685,"./layout_global_defaults":686,d3:169}],684:[function(e,d,S){var r=e("./constants"),a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=r.HOVERFONT,a.size.dflt=r.HOVERFONTSIZE,d.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":856,"./constants":677}],685:[function(e,d,S){var r=e("../../lib"),a=e("./helpers").isUnifiedHover,u=e("./layout_attributes"),c=e("./hovermode_defaults"),t=e("./hoverlabel_defaults");d.exports=function(n,o,l){function h(b,y){return r.coerce(n,o,u,b,y)}var i=c(n,o,l);i&&(h("hoverdistance"),h("spikedistance",a(i)?-1:void 0));var s=h("dragmode");s==="select"&&h("selectdirection");var p=o._has("mapbox"),v=o._has("geo"),m=o._basePlotModules.length;o.dragmode==="zoom"&&((p||v)&&m===1||p&&v&&m===2)&&(o.dragmode="pan"),t(n,o,h)}},{"../../lib":778,"./helpers":679,"./hoverlabel_defaults":681,"./hovermode_defaults":682,"./layout_attributes":684}],686:[function(e,d,S){var r=e("../../lib"),a=e("./hoverlabel_defaults"),u=e("./layout_attributes");d.exports=function(t,f){function n(o,l){return r.coerce(t,f,u,o,l)}a(t,f,n)}},{"../../lib":778,"./hoverlabel_defaults":681,"./layout_attributes":684}],687:[function(e,d,S){var r=e("../../lib"),a=e("../../lib/regex").counter,u=e("../../plots/domain").attributes,c=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[c.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[c.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:u({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(s,p,v){var m=p[v+"axes"],b=Object.keys((s._splomAxes||{})[v]||{});if(Array.isArray(m))return m;if(b.length)return b}function o(s,p){var v=s.grid||{},m=n(p,v,"x"),b=n(p,v,"y");if(!s.grid&&!m&&!b)return;var y=Array.isArray(v.subplots)&&Array.isArray(v.subplots[0]),x=Array.isArray(m),w=Array.isArray(b),g=x&&m!==v.xaxes&&w&&b!==v.yaxes,T,M;y?(T=v.subplots.length,M=v.subplots[0].length):(w&&(T=b.length),x&&(M=m.length));var P=t.newContainer(p,"grid");function L(Y,z){return r.coerce(v,P,f,Y,z)}var I=L("rows",T),C=L("columns",M);if(!(I*C>1)){delete p.grid;return}if(!y&&!x&&!w){var k=L("pattern")==="independent";k&&(y=!0)}P._hasSubplotGrid=y;var E=L("roworder"),R=E==="top to bottom",O=y?.2:.1,N=y?.3:.1,G,U;g&&p._splomGridDflt&&(G=p._splomGridDflt.xside,U=p._splomGridDflt.yside),P._domains={x:l("x",L,O,G,C),y:l("y",L,N,U,I,R)}}function l(s,p,v,m,b,y){var x=p(s+"gap",v),w=p("domain."+s);p(s+"side",m);for(var g=new Array(b),T=w[0],M=(w[1]-T)/(b-x),P=M*(1-x),L=0;L<b;L++){var I=T+M*L;g[y?b-1-L:L]=[I,I+P]}return g}function h(s,p){var v=p.grid;if(!(!v||!v._domains)){var m=s.grid||{},b=p._subplots,y=v._hasSubplotGrid,x=v.rows,w=v.columns,g=v.pattern==="independent",T,M,P,L,I,C,k,E=v._axisMap={};if(y){var R=m.subplots||[];C=v.subplots=new Array(x);var O=1;for(T=0;T<x;T++){var N=C[T]=new Array(w),G=R[T]||[];for(M=0;M<w;M++)if(g?(I=O===1?"xy":"x"+O+"y"+O,O++):I=G[M],N[M]="",b.cartesian.indexOf(I)!==-1){if(k=I.indexOf("y"),P=I.slice(0,k),L=I.slice(k),E[P]!==void 0&&E[P]!==M||E[L]!==void 0&&E[L]!==T)continue;N[M]=I,E[P]=M,E[L]=T}}}else{var U=n(p,m,"x"),Y=n(p,m,"y");v.xaxes=i(U,b.xaxis,w,E,"x"),v.yaxes=i(Y,b.yaxis,x,E,"y")}var z=v._anchors={},B=v.roworder==="top to bottom";for(var H in E){var V=H.charAt(0),Z=v[V+"side"],q,J,ne;if(Z.length<8)z[H]="free";else if(V==="x"){if(Z.charAt(0)==="t"===B?(q=0,J=1,ne=x):(q=x-1,J=-1,ne=-1),y){var ve=E[H];for(T=q;T!==ne;T+=J)if(I=C[T][ve],!!I&&(k=I.indexOf("y"),I.slice(0,k)===H)){z[H]=I.slice(k);break}}else for(T=q;T!==ne;T+=J)if(L=v.yaxes[T],b.cartesian.indexOf(H+L)!==-1){z[H]=L;break}}else if(Z.charAt(0)==="l"?(q=0,J=1,ne=w):(q=w-1,J=-1,ne=-1),y){var $=E[H];for(T=q;T!==ne;T+=J)if(I=C[$][T],!!I&&(k=I.indexOf("y"),I.slice(k)===H)){z[H]=I.slice(0,k);break}}else for(T=q;T!==ne;T+=J)if(P=v.xaxes[T],b.cartesian.indexOf(P+H)!==-1){z[H]=P;break}}}}function i(s,p,v,m,b){var y=new Array(v),x;function w(g,T){p.indexOf(T)!==-1&&m[T]===void 0?(y[g]=T,m[T]=g):y[g]=""}if(Array.isArray(s))for(x=0;x<v;x++)w(x,s[x]);else for(w(0,b),x=1;x<v;x++)w(x,b+(x+1));return y}d.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:o,contentDefaults:h}},{"../../lib":778,"../../lib/regex":795,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/domain":855}],688:[function(e,d,S){var r=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),d.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834}],689:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib/to_log_range");d.exports=function(c,t,f,n){t=t||{};var o=f==="log"&&t.type==="linear",l=f==="linear"&&t.type==="log";if(!!(o||l)){for(var h=c._fullLayout.images,i=t._id.charAt(0),s,p,v=0;v<h.length;v++)if(s=h[v],p="images["+v+"].",s[i+"ref"]===t._id){var m=s[i],b=s["size"+i],y=null,x=null;if(o){y=a(m,t.range);var w=b/Math.pow(10,y)/2;x=2*Math.log(w+Math.sqrt(1+w*w))/Math.LN10}else y=Math.pow(10,m),x=y*(Math.pow(10,b/2)-Math.pow(10,-b/2));r(y)?r(x)||(x=null):(y=null,x=null),n(p+i,y),n(p+"size"+i,x)}}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],690:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("./attributes"),t="images";d.exports=function(o,l){var h={name:t,handleItemDefaults:f};u(o,l,h)};function f(n,o,l){function h(w,g){return r.coerce(n,o,c,w,g)}var i=h("source"),s=h("visible",!!i);if(!s)return o;h("layer"),h("xanchor"),h("yanchor"),h("sizex"),h("sizey"),h("sizing"),h("opacity");for(var p={_fullLayout:l},v=["x","y"],m=0;m<2;m++){var b=v[m],y=a.coerceRef(n,o,p,b,"paper",void 0);if(y!=="paper"){var x=a.getFromId(p,y);x._imgIndices.push(o._index)}a.coercePosition(o,p,h,y,b,0)}return o}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":688}],691:[function(e,d,S){var r=e("d3"),a=e("../drawing"),u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");d.exports=function(n){var o=n._fullLayout,l=[],h={},i=[],s,p;for(p=0;p<o.images.length;p++){var v=o.images[p];if(v.visible)if(v.layer==="below"&&v.xref!=="paper"&&v.yref!=="paper"){s=c.ref2id(v.xref)+c.ref2id(v.yref);var m=o._plots[s];if(!m){i.push(v);continue}m.mainplot&&(s=m.mainplot.id),h[s]||(h[s]=[]),h[s].push(v)}else v.layer==="above"?l.push(v):i.push(v)}var b={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(L){var I=r.select(this);if(this._imgSrc!==L.source)if(I.attr("xmlns",t.svg),L.source&&L.source.slice(0,5)==="data:")I.attr("xlink:href",L.source),this._imgSrc=L.source;else{var C=new Promise(function(k){var E=new Image;this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=R,E.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height;var N=O.getContext("2d");N.drawImage(this,0,0);var G=O.toDataURL("image/png");I.attr("xlink:href",G),k()},I.on("error",R),E.src=L.source,this._imgSrc=L.source;function R(){I.remove(),k()}}.bind(this));n._promises.push(C)}}function x(L){var I=r.select(this),C=u.getFromId(n,L.xref),k=u.getFromId(n,L.yref),E=u.getRefType(L.xref)==="domain",R=u.getRefType(L.yref)==="domain",O=o._size,N,G;C!==void 0?N=typeof L.xref=="string"&&E?C._length*L.sizex:Math.abs(C.l2p(L.sizex)-C.l2p(0)):N=L.sizex*O.w,k!==void 0?G=typeof L.yref=="string"&&R?k._length*L.sizey:Math.abs(k.l2p(L.sizey)-k.l2p(0)):G=L.sizey*O.h;var U=N*b.x[L.xanchor].offset,Y=G*b.y[L.yanchor].offset,z=b.x[L.xanchor].sizing+b.y[L.yanchor].sizing,B,H;switch(C!==void 0?B=typeof L.xref=="string"&&E?C._length*L.x+C._offset:C.r2p(L.x)+C._offset:B=L.x*O.w+O.l,B+=U,k!==void 0?H=typeof L.yref=="string"&&R?k._length*(1-L.y)+k._offset:k.r2p(L.y)+k._offset:H=O.h-L.y*O.h+O.t,H+=Y,L.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}I.attr({x:B,y:H,width:N,height:G,preserveAspectRatio:z,opacity:L.opacity});var V=C&&u.getRefType(L.xref)!=="domain"?C._id:"",Z=k&&u.getRefType(L.yref)!=="domain"?k._id:"",q=V+Z;a.setClipUrl(I,q?"clip"+o._uid+q:null,n)}var w=o._imageLowerLayer.selectAll("image").data(i),g=o._imageUpperLayer.selectAll("image").data(l);w.enter().append("image"),g.enter().append("image"),w.exit().remove(),g.exit().remove(),w.each(function(L){y.bind(this)(L),x.bind(this)(L)}),g.each(function(L){y.bind(this)(L),x.bind(this)(L)});var T=Object.keys(o._plots);for(p=0;p<T.length;p++){s=T[p];var M=o._plots[s];if(!!M.imagelayer){var P=M.imagelayer.selectAll("image").data(h[s]||[]);P.enter().append("image"),P.exit().remove(),P.each(function(L){y.bind(this)(L),x.bind(this)(L)})}}}},{"../../constants/xmlns_namespaces":754,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../drawing":665,d3:169}],692:[function(e,d,S){d.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":688,"./convert_coords":689,"./defaults":690,"./draw":691}],693:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("../color/attributes");d.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":856,"../color/attributes":642}],694:[function(e,d,S){d.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],695:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../plot_api/plot_template"),c=e("./attributes"),t=e("../../plots/layout_attributes"),f=e("./helpers");d.exports=function(o,l,h){for(var i=o.legend||{},s=0,p=!1,v="normal",m=0;m<h.length;m++){var b=h[m];!b.visible||((b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(s++,b.showlegend&&(p=!0,(r.traceIs(b,"pie-like")||b._input.showlegend===!0)&&s++)),(r.traceIs(b,"bar")&&l.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(v=f.isGrouped({traceorder:v})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(v=f.isReversed({traceorder:v})?"reversed+grouped":"grouped"))}var y=a.coerce(o,l,t,"showlegend",p&&s>1);if(y===!1&&!i.uirevision)return;var x=u.newContainer(l,"legend");function w(I,C){return a.coerce(i,x,c,I,C)}if(w("uirevision",l.uirevision),y!==!1){w("bgcolor",l.paper_bgcolor),w("bordercolor"),w("borderwidth"),a.coerceFont(w,"font",l.font);var g=w("orientation"),T,M,P;g==="h"?(T=0,r.getComponentMethod("rangeslider","isVisible")(o.xaxis)?(M=1.1,P="bottom"):(M=-.1,P="top")):(T=1.02,M=1,P="auto"),w("traceorder",v),f.isGrouped(l.legend)&&w("tracegroupgap"),w("itemsizing"),w("itemwidth"),w("itemclick"),w("itemdoubleclick"),w("x",T),w("xanchor"),w("y",M),w("yanchor",P),w("valign"),a.noneOrAll(i,x,["x","y"]);var L=w("title.text");L&&(w("title.side",g==="h"?"left":"top"),a.coerceFont(w,"title.font",l.font))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/layout_attributes":882,"../../registry":911,"./attributes":693,"./helpers":699}],696:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib/events"),f=e("../dragelement"),n=e("../drawing"),o=e("../color"),l=e("../../lib/svg_text_utils"),h=e("./handle_click"),i=e("./constants"),s=e("../../constants/alignment"),p=s.LINE_SPACING,v=s.FROM_TL,m=s.FROM_BR,b=e("./get_legend_data"),y=e("./style"),x=e("./helpers");d.exports=function(N,G){var U=N._fullLayout,Y="legend"+U._uid,z;if(G?(z=G.layer,Y+="-hover"):(G=U.legend||{},G._main=!0,z=U._infolayer),!!z){N._legendMouseDownTime||(N._legendMouseDownTime=0);var B;if(G._main){if(!N.calcdata)return;B=U.showlegend&&b(N.calcdata,G)}else{if(!G.entries)return;B=b(G.entries,G)}var H=U.hiddenlabels||[];if(G._main&&(!U.showlegend||!B.length))return z.selectAll(".legend").remove(),U._topdefs.select("#"+Y).remove(),u.autoMargin(N,"legend");var V=a.ensureSingle(z,"g","legend",function(ie){G._main&&ie.attr("pointer-events","all")}),Z=a.ensureSingleById(U._topdefs,"clipPath",Y,function(ie){ie.append("rect")}),q=a.ensureSingle(V,"rect","bg",function(ie){ie.attr("shape-rendering","crispEdges")});q.call(o.stroke,G.bordercolor).call(o.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px");var J=a.ensureSingle(V,"g","scrollbox"),ne=G.title;if(G._titleWidth=0,G._titleHeight=0,ne.text){var ve=a.ensureSingle(J,"text","legendtitletext");ve.attr("text-anchor","start").call(n.font,ne.font).text(ne.text),P(ve,J,N,G)}else J.selectAll(".legendtitletext").remove();var $=a.ensureSingle(V,"rect","scrollbar",function(ie){ie.attr(i.scrollBarEnterAttrs).call(o.fill,i.scrollBarColor)}),j=J.selectAll("g.groups").data(B);j.enter().append("g").attr("class","groups"),j.exit().remove();var ae=j.selectAll("g.traces").data(a.identity);ae.enter().append("g").attr("class","traces"),ae.exit().remove(),ae.style("opacity",function(ie){var te=ie[0].trace;return c.traceIs(te,"pie-like")?H.indexOf(ie[0].label)!==-1?.5:1:te.visible==="legendonly"?.5:1}).each(function(){r.select(this).call(g,N,G)}).call(y,N,G).each(function(){G._main&&r.select(this).call(M,N)}),a.syncOrAsync([u.previousPromises,function(){return C(N,j,ae,G)},function(){if(G._main&&k(N))return;var ie=U._size,te=G.borderwidth,re=ie.l+ie.w*G.x-v[E(G)]*G._width,ce=ie.t+ie.h*(1-G.y)-v[R(G)]*G._effHeight;if(G._main&&U.margin.autoexpand){var pe=re,fe=ce;re=a.constrain(re,0,U.width-G._width),ce=a.constrain(ce,0,U.height-G._effHeight),re!==pe&&a.log("Constrain legend.x to make legend fit inside graph"),ce!==fe&&a.log("Constrain legend.y to make legend fit inside graph")}if(G._main&&n.setTranslate(V,re,ce),$.on(".drag",null),V.on("wheel",null),!G._main||G._height<=G._maxHeight||N._context.staticPlot){var se=G._effHeight;G._main||(se=G._height),q.attr({width:G._width-te,height:se-te,x:te/2,y:te/2}),n.setTranslate(J,0,0),Z.select("rect").attr({width:G._width-2*te,height:se-2*te,x:te,y:te}),n.setClipUrl(J,Y,N),n.setRect($,0,0,0,0),delete G._scrollY}else{var de=Math.max(i.scrollBarMinHeight,G._effHeight*G._effHeight/G._height),be=G._effHeight-de-2*i.scrollBarMargin,xe=G._height-G._effHeight,ke=be/xe,Re=Math.min(G._scrollY||0,xe);q.attr({width:G._width-2*te+i.scrollBarWidth+i.scrollBarMargin,height:G._effHeight-te,x:te/2,y:te/2}),Z.select("rect").attr({width:G._width-2*te+i.scrollBarWidth+i.scrollBarMargin,height:G._effHeight-2*te,x:te,y:te+Re}),n.setClipUrl(J,Y,N),$e(Re,de,ke),V.on("wheel",function(){Re=a.constrain(G._scrollY+r.event.deltaY/be*xe,0,xe),$e(Re,de,ke),Re!==0&&Re!==xe&&r.event.preventDefault()});var Ke,ze,Je,qe=function(_t,Ot,Wt){var Et=(Wt-Ot)/ke+_t;return a.constrain(Et,0,xe)},Ee=function(_t,Ot,Wt){var Et=(Ot-Wt)/ke+_t;return a.constrain(Et,0,xe)},Ae=r.behavior.drag().on("dragstart",function(){var _t=r.event.sourceEvent;_t.type==="touchstart"?Ke=_t.changedTouches[0].clientY:Ke=_t.clientY,Je=Re}).on("drag",function(){var _t=r.event.sourceEvent;_t.buttons===2||_t.ctrlKey||(_t.type==="touchmove"?ze=_t.changedTouches[0].clientY:ze=_t.clientY,Re=qe(Je,Ke,ze),$e(Re,de,ke))});$.call(Ae);var Be=r.behavior.drag().on("dragstart",function(){var _t=r.event.sourceEvent;_t.type==="touchstart"&&(Ke=_t.changedTouches[0].clientY,Je=Re)}).on("drag",function(){var _t=r.event.sourceEvent;_t.type==="touchmove"&&(ze=_t.changedTouches[0].clientY,Re=Ee(Je,Ke,ze),$e(Re,de,ke))});J.call(Be)}function $e(_t,Ot,Wt){G._scrollY=N._fullLayout.legend._scrollY=_t,n.setTranslate(J,0,-_t),n.setRect($,G._width,i.scrollBarMargin+_t*Wt,i.scrollBarWidth,Ot),Z.select("rect").attr("y",te+_t)}if(N._context.edits.legendPosition){var xt,bt,Ne,st;V.classed("cursor-move",!0),f.init({element:V.node(),gd:N,prepFn:function(){var _t=n.getTranslate(V);Ne=_t.x,st=_t.y},moveFn:function(_t,Ot){var Wt=Ne+_t,Et=st+Ot;n.setTranslate(V,Wt,Et),xt=f.align(Wt,0,ie.l,ie.l+ie.w,G.xanchor),bt=f.align(Et,0,ie.t+ie.h,ie.t,G.yanchor)},doneFn:function(){xt!==void 0&&bt!==void 0&&c.call("_guiRelayout",N,{"legend.x":xt,"legend.y":bt})},clickFn:function(_t,Ot){var Wt=z.selectAll("g.traces").filter(function(){var Et=this.getBoundingClientRect();return Ot.clientX>=Et.left&&Ot.clientX<=Et.right&&Ot.clientY>=Et.top&&Ot.clientY<=Et.bottom});Wt.size()>0&&w(N,V,Wt,_t,Ot)}})}}],N)}};function w(O,N,G,U,Y){var z=G.data()[0][0].trace,B={event:Y,node:G.node(),curveNumber:z.index,expandedIndex:z._expandedIndex,data:O.data,layout:O.layout,frames:O._transitionData._frames,config:O._context,fullData:O._fullData,fullLayout:O._fullLayout};z._group&&(B.group=z._group),c.traceIs(z,"pie-like")&&(B.label=G.datum()[0].label);var H=t.triggerHandler(O,"plotly_legendclick",B);if(H!==!1){if(U===1)N._clickTimeout=setTimeout(function(){h(G,O,U)},O._context.doubleClickDelay);else if(U===2){N._clickTimeout&&clearTimeout(N._clickTimeout),O._legendMouseDownTime=0;var V=t.triggerHandler(O,"plotly_legenddoubleclick",B);V!==!1&&h(G,O,U)}}}function g(O,N,G){var U=O.data()[0][0],Y=U.trace,z=c.traceIs(Y,"pie-like"),B=Y.index,H=G._main&&N._context.edits.legendText&&!z,V=G._maxNameLength,Z;G.entries?Z=U.text:(Z=z?U.label:Y.name,Y._meta&&(Z=a.templateString(Z,Y._meta)));var q=a.ensureSingle(O,"text","legendtext");q.attr("text-anchor","start").call(n.font,G.font).text(H?T(Z,V):Z);var J=G.itemwidth+i.itemGap*2;l.positionText(q,J,0),H?q.call(l.makeEditable,{gd:N,text:Z}).call(P,O,N,G).on("edit",function(ne){this.text(T(ne,V)).call(P,O,N,G);var ve=U.trace._fullInput||{},$={};if(c.hasTransform(ve,"groupby")){var j=c.getTransformIndices(ve,"groupby"),ae=j[j.length-1],ie=a.keyedContainer(ve,"transforms["+ae+"].styles","target","value.name");ie.set(U.trace._group,ne),$=ie.constructUpdate()}else $.name=ne;return c.call("_guiRestyle",N,$,B)}):P(q,O,N,G)}function T(O,N){var G=Math.max(4,N);if(O&&O.trim().length>=G/2)return O;O=O||"";for(var U=G-O.length;U>0;U--)O+=" ";return O}function M(O,N){var G=N._context.doubleClickDelay,U,Y=1,z=a.ensureSingle(O,"rect","legendtoggle",function(B){N._context.staticPlot||B.style("cursor","pointer").attr("pointer-events","all"),B.call(o.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(z.on("mousedown",function(){U=new Date().getTime(),U-N._legendMouseDownTime<G?Y+=1:(Y=1,N._legendMouseDownTime=U)}),z.on("mouseup",function(){if(!(N._dragged||N._editing)){var B=N._fullLayout.legend;new Date().getTime()-N._legendMouseDownTime>G&&(Y=Math.max(Y-1,1)),w(N,B,O,Y,r.event)}}))}function P(O,N,G,U){U._main||O.attr("data-notex",!0),l.convertToTspans(O,G,function(){L(N,G,U)})}function L(O,N,G){var U=O.data()[0][0];if(G._main&&U&&!U.trace.showlegend){O.remove();return}var Y=O.select("g[class*=math-group]"),z=Y.node();G||(G=N._fullLayout.legend);var B=G.borderwidth,H=(U?G:G.title).font.size*p,V,Z;if(z){var q=n.bBox(z);V=q.height,Z=q.width,U?n.setTranslate(Y,0,V*.25):n.setTranslate(Y,B,V*.75+B)}else{var J=O.select(U?".legendtext":".legendtitletext"),ne=l.lineCount(J),ve=J.node();V=H*ne,Z=ve?n.bBox(ve).width:0;var $=H*((ne-1)/2-.3);if(U){var j=G.itemwidth+i.itemGap*2;l.positionText(J,j,-$)}else l.positionText(J,i.titlePad+B,H+B)}U?(U.lineHeight=H,U.height=Math.max(V,16)+3,U.width=Z):(G._titleWidth=Z,G._titleHeight=V)}function I(O){var N=0,G=0,U=O.title.side;return U&&(U.indexOf("left")!==-1&&(N=O._titleWidth),U.indexOf("top")!==-1&&(G=O._titleHeight)),[N,G]}function C(O,N,G,U){var Y=O._fullLayout;U||(U=Y.legend);var z=Y._size,B=x.isVertical(U),H=x.isGrouped(U),V=U.borderwidth,Z=2*V,q=i.itemGap,J=U.itemwidth+q*2,ne=2*(V+q),ve=R(U),$=U.y<0||U.y===0&&ve==="top",j=U.y>1||U.y===1&&ve==="bottom";U._maxHeight=Math.max($||j?Y.height/2:z.h,30);var ae=0;U._width=0,U._height=0;var ie=I(U);if(B)G.each(function(xt){var bt=xt[0].height;n.setTranslate(this,V+ie[0],V+ie[1]+U._height+bt/2+q),U._height+=bt,U._width=Math.max(U._width,xt[0].width)}),ae=J+U._width,U._width+=q+J+Z,U._height+=ne,H&&(N.each(function(xt,bt){n.setTranslate(this,0,bt*U.tracegroupgap)}),U._height+=(U._lgroupsLength-1)*U.tracegroupgap);else{var te=E(U),re=U.x<0||U.x===0&&te==="right",ce=U.x>1||U.x===1&&te==="left",pe=j||$,fe=Y.width/2;U._maxWidth=Math.max(re?pe&&te==="left"?z.l+z.w:fe:ce?pe&&te==="right"?z.r+z.w:fe:z.w,2*J);var se=0,de=0;G.each(function(xt){var bt=xt[0].width+J;se=Math.max(se,bt),de+=bt}),ae=null;var be=0;if(H){var xe=0,ke=0,Re=0;N.each(function(){var xt=0,bt=0;r.select(this).selectAll("g.traces").each(function(st){var _t=st[0].height;n.setTranslate(this,ie[0],ie[1]+V+q+_t/2+bt),bt+=_t,xt=Math.max(xt,J+st[0].width)}),xe=Math.max(xe,bt);var Ne=xt+q;Ne+V+ke>U._maxWidth&&(be=Math.max(be,ke),ke=0,Re+=xe+U.tracegroupgap,xe=bt),n.setTranslate(this,ke,Re),ke+=Ne}),U._width=Math.max(be,ke)+V,U._height=Re+xe+ne}else{var Ke=G.size(),ze=de+Z+(Ke-1)*q<U._maxWidth,Je=0,qe=0,Ee=0,Ae=0;G.each(function(xt){var bt=xt[0].height,Ne=J+xt[0].width,st=(ze?Ne:se)+q;st+V+qe-q>=U._maxWidth&&(be=Math.max(be,Ae),qe=0,Ee+=Je,U._height+=Je,Je=0),n.setTranslate(this,ie[0]+V+qe,ie[1]+V+Ee+bt/2+q),Ae=qe+Ne+q,qe+=st,Je=Math.max(Je,bt)}),ze?(U._width=qe+Z,U._height=Je+ne):(U._width=Math.max(be,Ae)+Z,U._height+=Je+ne)}}U._width=Math.ceil(Math.max(U._width+ie[0],U._titleWidth+2*(V+i.titlePad))),U._height=Math.ceil(Math.max(U._height+ie[1],U._titleHeight+2*(V+i.itemGap))),U._effHeight=Math.min(U._height,U._maxHeight);var Be=O._context.edits,$e=Be.legendText||Be.legendPosition;G.each(function(xt){var bt=r.select(this).select(".legendtoggle"),Ne=xt[0].height,st=$e?J:ae||J+xt[0].width;B||(st+=q/2),n.setRect(bt,0,-Ne/2,st,Ne)})}function k(O){var N=O._fullLayout,G=N.legend,U=E(G),Y=R(G);return u.autoMargin(O,"legend",{x:G.x,y:G.y,l:G._width*v[U],r:G._width*m[U],b:G._effHeight*m[Y],t:G._effHeight*v[Y]})}function E(O){return a.isRightAnchor(O)?"right":a.isCenterAnchor(O)?"center":"left"}function R(O){return a.isBottomAnchor(O)?"bottom":a.isMiddleAnchor(O)?"middle":"top"}},{"../../constants/alignment":745,"../../lib":778,"../../lib/events":767,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":694,"./get_legend_data":697,"./handle_click":698,"./helpers":699,"./style":701,d3:169}],697:[function(e,d,S){var r=e("../../registry"),a=e("./helpers");d.exports=function(c,t){var f={},n=[],o=!1,l={},h=0,i=0,s,p,v=t._main;function m(L,I){if(L===""||!a.isGrouped(t)){var C="~~i"+h;n.push(C),f[C]=[[I]],h++}else n.indexOf(L)===-1?(n.push(L),o=!0,f[L]=[[I]]):f[L].push([I])}for(s=0;s<c.length;s++){var b=c[s],y=b[0],x=y.trace,w=x.legendgroup;if(!(v&&(!x.visible||!x.showlegend)))if(r.traceIs(x,"pie-like"))for(l[w]||(l[w]={}),p=0;p<b.length;p++){var g=b[p].label;l[w][g]||(m(w,{label:g,color:b[p].color,i:b[p].i,trace:x,pts:b[p].pts}),l[w][g]=!0,i=Math.max(i,(g||"").length))}else m(w,y),i=Math.max(i,(x.name||"").length)}if(!n.length)return[];var T=n.length,M,P;if(o&&a.isGrouped(t))for(P=new Array(T),s=0;s<T;s++)M=f[n[s]],P[s]=a.isReversed(t)?M.reverse():M;else{for(P=[new Array(T)],s=0;s<T;s++)M=f[n[s]][0],P[0][a.isReversed(t)?T-s-1:s]=M;T=1}return t._lgroupsLength=T,t._maxNameLength=i,P}},{"../../registry":911,"./helpers":699}],698:[function(e,d,S){var r=e("../../lib"),a=e("../../registry"),u=!0;d.exports=function(t,f,n){var o=f._fullLayout;if(f._dragged||f._editing)return;var l=o.legend.itemclick,h=o.legend.itemdoubleclick;n===1&&l==="toggle"&&h==="toggleothers"&&u&&f.data&&f._context.showTips&&r.notifier(r._(f,"Double-click on legend to isolate one trace"),"long"),u=!1;var i;if(n===1?i=l:n===2&&(i=h),!i)return;var s=o.hiddenlabels?o.hiddenlabels.slice():[],p=t.data()[0][0],v=f._fullData,m=p.trace,b=m.legendgroup,y,x,w,g,T,M,P={},L=[],I=[],C=[];function k(ne,ve,$){var j=L.indexOf(ne),ae=P[ve];return ae||(ae=P[ve]=[]),L.indexOf(ne)===-1&&(L.push(ne),j=L.length-1),ae[j]=$,j}function E(ne,ve){var $=ne._fullInput;if(a.hasTransform($,"groupby")){var j=I[$.index];if(!j){var ae=a.getTransformIndices($,"groupby"),ie=ae[ae.length-1];j=r.keyedContainer($,"transforms["+ie+"].styles","target","value.visible"),I[$.index]=j}var te=j.get(ne._group);te===void 0&&(te=!0),te!==!1&&j.set(ne._group,ve),C[$.index]=k($.index,"visible",$.visible!==!1)}else{var re=$.visible===!1?!1:ve;k($.index,"visible",re)}}if(a.traceIs(m,"pie-like")){var R=p.label,O=s.indexOf(R);i==="toggle"?O===-1?s.push(R):s.splice(O,1):i==="toggleothers"&&(s=[],f.calcdata[0].forEach(function(ne){R!==ne.label&&s.push(ne.label)}),f._fullLayout.hiddenlabels&&f._fullLayout.hiddenlabels.length===s.length&&O===-1&&(s=[])),a.call("_guiRelayout",f,"hiddenlabels",s)}else{var N=b&&b.length,G=[],U;if(N)for(y=0;y<v.length;y++)U=v[y],!!U.visible&&U.legendgroup===b&&G.push(y);if(i==="toggle"){var Y;switch(m.visible){case!0:Y="legendonly";break;case!1:Y=!1;break;case"legendonly":Y=!0;break}if(N)for(y=0;y<v.length;y++)v[y].visible!==!1&&v[y].legendgroup===b&&E(v[y],Y);else E(m,Y)}else if(i==="toggleothers"){var z,B,H,V,Z=!0;for(y=0;y<v.length;y++)if(z=v[y]===m,H=v[y].showlegend!==!0,!(z||H)&&(B=N&&v[y].legendgroup===b,!B&&v[y].visible===!0&&!a.traceIs(v[y],"notLegendIsolatable"))){Z=!1;break}for(y=0;y<v.length;y++)if(v[y].visible!==!1&&!a.traceIs(v[y],"notLegendIsolatable"))switch(m.visible){case"legendonly":E(v[y],!0);break;case!0:V=Z?!0:"legendonly",z=v[y]===m,H=v[y].showlegend!==!0&&!v[y].legendgroup,B=z||N&&v[y].legendgroup===b,E(v[y],B||H?!0:V);break}}for(y=0;y<I.length;y++)if(w=I[y],!!w){var q=w.constructUpdate(),J=Object.keys(q);for(x=0;x<J.length;x++)g=J[x],M=P[g]=P[g]||[],M[C[y]]=q[g]}for(T=Object.keys(P),y=0;y<T.length;y++)for(g=T[y],x=0;x<L.length;x++)P[g].hasOwnProperty(x)||(P[g][x]=void 0);a.call("_guiRestyle",f,P,L)}}},{"../../lib":778,"../../registry":911}],699:[function(e,d,S){S.isGrouped=function(a){return(a.traceorder||"").indexOf("grouped")!==-1},S.isVertical=function(a){return a.orientation!=="h"},S.isReversed=function(a){return(a.traceorder||"").indexOf("reversed")!==-1}},{}],700:[function(e,d,S){d.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":693,"./defaults":695,"./draw":696,"./style":701}],701:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=u.strTranslate,t=e("../drawing"),f=e("../color"),n=e("../colorscale/helpers").extractOpts,o=e("../../traces/scatter/subtypes"),l=e("../../traces/pie/style_one"),h=e("../../traces/pie/helpers").castOption,i=e("./constants"),s=12,p=5,v=2,m=10,b=5;d.exports=function(w,g,T){var M=g._fullLayout;T||(T=M.legend);var P=T.itemsizing==="constant",L=T.itemwidth,I=(L+i.itemGap*2)/2,C=c(I,0),k=function(J,ne,ve,$){var j;if(J+1)j=J;else if(ne&&ne.width>0)j=ne.width;else return 0;return P?$:Math.min(j,ve)};w.each(function(J){var ne=r.select(this),ve=u.ensureSingle(ne,"g","layers");ve.style("opacity",J[0].trace.opacity);var $=T.valign,j=J[0].lineHeight,ae=J[0].height;if($==="middle"||!j||!ae)ve.attr("transform",null);else{var ie={top:1,bottom:-1}[$],te=ie*(.5*(j-ae+3));ve.attr("transform",c(0,te))}var re=ve.selectAll("g.legendfill").data([J]);re.enter().append("g").classed("legendfill",!0);var ce=ve.selectAll("g.legendlines").data([J]);ce.enter().append("g").classed("legendlines",!0);var pe=ve.selectAll("g.legendsymbols").data([J]);pe.enter().append("g").classed("legendsymbols",!0),pe.selectAll("g.legendpoints").data([J]).enter().append("g").classed("legendpoints",!0)}).each(q).each(O).each(G).each(N).each(Y).each(V).each(H).each(E).each(R).each(z).each(B);function E(J){var ne=J[0],ve=ne.trace,$=ve.visible&&ve.fill&&ve.fill!=="none",j=o.hasLines(ve),ae=ve.contours,ie=!1,te=!1,re,ce,pe=n(ve),fe=pe.colorscale,se=pe.reversescale,de=function(Be){if(Be.size()){var $e="legendfill-"+ve.uid;t.gradient(Be,g,$e,y(se),fe,"fill")}},be=function(Be){if(Be.size()){var $e="legendline-"+ve.uid;t.lineGroupStyle(Be),t.gradient(Be,g,$e,y(se),fe,"stroke")}};if(ae){var xe=ae.coloring;xe==="lines"?ie=!0:j=xe==="none"||xe==="heatmap"||ae.showlines,ae.type==="constraint"?$=ae._operation!=="=":(xe==="fill"||xe==="heatmap")&&(te=!0)}var ke=o.hasMarkers(ve)||o.hasText(ve),Re=$||te,Ke=j||ie,ze=ke||!Re?"M5,0":Ke?"M5,-2":"M5,-3",Je=r.select(this),qe=Je.select(".legendfill").selectAll("path").data($||te?[J]:[]);if(qe.enter().append("path").classed("js-fill",!0),qe.exit().remove(),qe.attr("d",ze+"h"+L+"v6h-"+L+"z").call($?t.fillGroupStyle:de),j||ie){var Ee=k(void 0,ve.line,m,p);ce=u.minExtend(ve,{line:{width:Ee}}),re=[u.minExtend(ne,{trace:ce})]}var Ae=Je.select(".legendlines").selectAll("path").data(j||ie?[re]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",ze+(ie?"l"+L+",0.0001":"h"+L)).call(j?t.lineGroupStyle:be)}function R(J){var ne=J[0],ve=ne.trace,$=o.hasMarkers(ve),j=o.hasText(ve),ae=o.hasLines(ve),ie,te;function re(ke,Re,Ke,ze){var Je=u.nestedProperty(ve,ke).get(),qe=u.isArrayOrTypedArray(Je)&&Re?Re(Je):Je;if(P&&qe&&ze!==void 0&&(qe=ze),Ke){if(qe<Ke[0])return Ke[0];if(qe>Ke[1])return Ke[1]}return qe}function ce(ke){return ne._distinct&&ne.index&&ke[ne.index]?ke[ne.index]:ke[0]}if($||j||ae){var pe={},fe={};if($){pe.mc=re("marker.color",ce),pe.mx=re("marker.symbol",ce),pe.mo=re("marker.opacity",u.mean,[.2,1]),pe.mlc=re("marker.line.color",ce),pe.mlw=re("marker.line.width",u.mean,[0,5],v),fe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var se=re("marker.size",u.mean,[2,16],s);pe.ms=se,fe.marker.size=se}ae&&(fe.line={width:re("line.width",ce,[0,10],p)}),j&&(pe.tx="Aa",pe.tp=re("textposition",ce),pe.ts=10,pe.tc=re("textfont.color",ce),pe.tf=re("textfont.family",ce)),ie=[u.minExtend(ne,pe)],te=u.minExtend(ve,fe),te.selectedpoints=null,te.texttemplate=null}var de=r.select(this).select("g.legendpoints"),be=de.selectAll("path.scatterpts").data($?ie:[]);be.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",C),be.exit().remove(),be.call(t.pointStyle,te,g),$&&(ie[0].mrc=3);var xe=de.selectAll("g.pointtext").data(j?ie:[]);xe.enter().append("g").classed("pointtext",!0).append("text").attr("transform",C),xe.exit().remove(),xe.selectAll("text").call(t.textPointStyle,te,g)}function O(J){var ne=J[0].trace,ve=ne.type==="waterfall";if(J[0]._distinct&&ve){var $=J[0].trace[J[0].dir].marker;return J[0].mc=$.color,J[0].mlw=$.line.width,J[0].mlc=$.line.color,U(J,this,"waterfall")}var j=[];ne.visible&&ve&&(j=J[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ae=r.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(j);ae.enter().append("path").classed("legendwaterfall",!0).attr("transform",C).style("stroke-miterlimit",1),ae.exit().remove(),ae.each(function(ie){var te=r.select(this),re=ne[ie[0]].marker,ce=k(void 0,re.line,b,v);te.attr("d",ie[1]).style("stroke-width",ce+"px").call(f.fill,re.color),ce&&te.call(f.stroke,re.line.color)})}function N(J){U(J,this)}function G(J){U(J,this,"funnel")}function U(J,ne,ve){var $=J[0].trace,j=$.marker||{},ae=j.line||{},ie=ve?$.visible&&$.type===ve:a.traceIs($,"bar"),te=r.select(ne).select("g.legendpoints").selectAll("path.legend"+ve).data(ie?[J]:[]);te.enter().append("path").classed("legend"+ve,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C),te.exit().remove(),te.each(function(re){var ce=r.select(this),pe=re[0],fe=k(pe.mlw,j.line,b,v);ce.style("stroke-width",fe+"px").call(f.fill,pe.mc||j.color),fe&&f.stroke(ce,pe.mlc||ae.color)})}function Y(J){var ne=J[0].trace,ve=r.select(this).select("g.legendpoints").selectAll("path.legendbox").data(ne.visible&&a.traceIs(ne,"box-violin")?[J]:[]);ve.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C),ve.exit().remove(),ve.each(function(){var $=r.select(this);if((ne.boxpoints==="all"||ne.points==="all")&&f.opacity(ne.fillcolor)===0&&f.opacity((ne.line||{}).color)===0){var j=u.minExtend(ne,{marker:{size:P?s:u.constrain(ne.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ve.call(t.pointStyle,j,g)}else{var ae=k(void 0,ne.line,b,v);$.style("stroke-width",ae+"px").call(f.fill,ne.fillcolor),ae&&f.stroke($,ne.line.color)}})}function z(J){var ne=J[0].trace,ve=r.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(ne.visible&&ne.type==="candlestick"?[J,J]:[]);ve.enter().append("path").classed("legendcandle",!0).attr("d",function($,j){return j?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",C).style("stroke-miterlimit",1),ve.exit().remove(),ve.each(function($,j){var ae=r.select(this),ie=ne[j?"increasing":"decreasing"],te=k(void 0,ie.line,b,v);ae.style("stroke-width",te+"px").call(f.fill,ie.fillcolor),te&&f.stroke(ae,ie.line.color)})}function B(J){var ne=J[0].trace,ve=r.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(ne.visible&&ne.type==="ohlc"?[J,J]:[]);ve.enter().append("path").classed("legendohlc",!0).attr("d",function($,j){return j?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",C).style("stroke-miterlimit",1),ve.exit().remove(),ve.each(function($,j){var ae=r.select(this),ie=ne[j?"increasing":"decreasing"],te=k(void 0,ie.line,b,v);ae.style("fill","none").call(t.dashLine,ie.line.dash,te),te&&f.stroke(ae,ie.line.color)})}function H(J){Z(J,this,"pie")}function V(J){Z(J,this,"funnelarea")}function Z(J,ne,ve){var $=J[0],j=$.trace,ae=ve?j.visible&&j.type===ve:a.traceIs(j,ve),ie=r.select(ne).select("g.legendpoints").selectAll("path.legend"+ve).data(ae?[J]:[]);if(ie.enter().append("path").classed("legend"+ve,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C),ie.exit().remove(),ie.size()){var te=(j.marker||{}).line,re=k(h(te.width,$.pts),te,b,v),ce=u.minExtend(j,{marker:{line:{width:re}}});ce.marker.line.color=te.color;var pe=u.minExtend($,{trace:ce});l(ie,pe,ce)}}function q(J){var ne=J[0].trace,ve,$=[];if(ne.visible)switch(ne.type){case"histogram2d":case"heatmap":$=[["M-15,-2V4H15V-2Z"]],ve=!0;break;case"choropleth":case"choroplethmapbox":$=[["M-6,-6V6H6V-6Z"]],ve=!0;break;case"densitymapbox":$=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ve="radial";break;case"cone":$=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ve=!1;break;case"streamtube":$=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ve=!1;break;case"surface":$=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ve=!0;break;case"mesh3d":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ve=!1;break;case"volume":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ve=!0;break;case"isosurface":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ve=!1;break}var j=r.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data($);j.enter().append("path").classed("legend3dandfriends",!0).attr("transform",C).style("stroke-miterlimit",1),j.exit().remove(),j.each(function(ae,ie){var te=r.select(this),re=n(ne),ce=re.colorscale,pe=re.reversescale,fe=function(xe){if(xe.size()){var ke="legendfill-"+ne.uid;t.gradient(xe,g,ke,y(pe,ve==="radial"),ce,"fill")}},se;if(ce){if(!ve){var be=ce.length;se=ie===0?ce[pe?be-1:0][1]:ie===1?ce[pe?0:be-1][1]:ce[Math.floor((be-1)/2)][1]}}else{var de=ne.vertexcolor||ne.facecolor||ne.color;se=u.isArrayOrTypedArray(de)?de[ie]||de[0]:de}te.attr("d",ae[0]),se?te.call(f.fill,se):te.call(fe)})}};function y(x,w){var g=w?"radial":"horizontal";return g+(x?"":"reversed")}},{"../../lib":778,"../../registry":911,"../../traces/pie/helpers":1166,"../../traces/pie/style_one":1172,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale/helpers":654,"../drawing":665,"./constants":694,d3:169}],702:[function(e,d,S){var r=e("../../registry"),a=e("../../plots/plots"),u=e("../../plots/cartesian/axis_ids"),c=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,f=e("../../lib"),n=f._,o=d.exports={};o.toImage={name:"toImage",title:function(g){var T=g._context.toImageButtonOptions||{},M=T.format||"png";return M==="png"?n(g,"Download plot as a png"):n(g,"Download plot")},icon:c.camera,click:function(g){var T=g._context.toImageButtonOptions,M={format:T.format||"png"};f.notifier(n(g,"Taking snapshot - this may take a few seconds"),"long"),M.format!=="svg"&&f.isIE()&&(f.notifier(n(g,"IE only supports svg.  Changing format to svg."),"long"),M.format="svg"),["filename","width","height","scale"].forEach(function(P){P in T&&(M[P]=T[P])}),r.call("downloadImage",g,M).then(function(P){f.notifier(n(g,"Snapshot succeeded")+" - "+P,"long")}).catch(function(){f.notifier(n(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(g){return n(g,"Edit in Chart Studio")},icon:c.disk,click:function(g){a.sendDataToCloud(g)}},o.editInChartStudio={name:"editInChartStudio",title:function(g){return n(g,"Edit in Chart Studio")},icon:c.pencil,click:function(g){a.sendDataToCloud(g)}},o.zoom2d={name:"zoom2d",title:function(g){return n(g,"Zoom")},attr:"dragmode",val:"zoom",icon:c.zoombox,click:l},o.pan2d={name:"pan2d",title:function(g){return n(g,"Pan")},attr:"dragmode",val:"pan",icon:c.pan,click:l},o.select2d={name:"select2d",title:function(g){return n(g,"Box Select")},attr:"dragmode",val:"select",icon:c.selectbox,click:l},o.lasso2d={name:"lasso2d",title:function(g){return n(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:c.lasso,click:l},o.drawclosedpath={name:"drawclosedpath",title:function(g){return n(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:c.drawclosedpath,click:l},o.drawopenpath={name:"drawopenpath",title:function(g){return n(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:c.drawopenpath,click:l},o.drawline={name:"drawline",title:function(g){return n(g,"Draw line")},attr:"dragmode",val:"drawline",icon:c.drawline,click:l},o.drawrect={name:"drawrect",title:function(g){return n(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:c.drawrect,click:l},o.drawcircle={name:"drawcircle",title:function(g){return n(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:c.drawcircle,click:l},o.eraseshape={name:"eraseshape",title:function(g){return n(g,"Erase active shape")},icon:c.eraseshape,click:t},o.zoomIn2d={name:"zoomIn2d",title:function(g){return n(g,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:l},o.zoomOut2d={name:"zoomOut2d",title:function(g){return n(g,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:l},o.autoScale2d={name:"autoScale2d",title:function(g){return n(g,"Autoscale")},attr:"zoom",val:"auto",icon:c.autoscale,click:l},o.resetScale2d={name:"resetScale2d",title:function(g){return n(g,"Reset axes")},attr:"zoom",val:"reset",icon:c.home,click:l},o.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(g){return n(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:c.tooltip_basic,gravity:"ne",click:l},o.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(g){return n(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:c.tooltip_compare,gravity:"ne",click:l};function l(g,T){var M=T.currentTarget,P=M.getAttribute("data-attr"),L=M.getAttribute("data-val")||!0,I=g._fullLayout,C={},k=u.list(g,null,!0),E=I._cartesianSpikesEnabled,R,O;if(P==="zoom"){var N=L==="in"?.5:2,G=(1+N)/2,U=(1-N)/2,Y;for(O=0;O<k.length;O++)if(R=k[O],!R.fixedrange)if(Y=R._name,L==="auto")C[Y+".autorange"]=!0;else if(L==="reset"){if(R._rangeInitial===void 0)C[Y+".autorange"]=!0;else{var z=R._rangeInitial.slice();C[Y+".range[0]"]=z[0],C[Y+".range[1]"]=z[1]}R._showSpikeInitial!==void 0&&(C[Y+".showspikes"]=R._showSpikeInitial,E==="on"&&!R._showSpikeInitial&&(E="off"))}else{var B=[R.r2l(R.range[0]),R.r2l(R.range[1])],H=[G*B[0]+U*B[1],G*B[1]+U*B[0]];C[Y+".range[0]"]=R.l2r(H[0]),C[Y+".range[1]"]=R.l2r(H[1])}}else P==="hovermode"&&(L==="x"||L==="y")&&(L=I._isHoriz?"y":"x",M.setAttribute("data-val",L)),C[P]=L;I._cartesianSpikesEnabled=E,r.call("_guiRelayout",g,C)}o.zoom3d={name:"zoom3d",title:function(g){return n(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:c.zoombox,click:h},o.pan3d={name:"pan3d",title:function(g){return n(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:c.pan,click:h},o.orbitRotation={name:"orbitRotation",title:function(g){return n(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:c["3d_rotate"],click:h},o.tableRotation={name:"tableRotation",title:function(g){return n(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:c["z-axis"],click:h};function h(g,T){for(var M=T.currentTarget,P=M.getAttribute("data-attr"),L=M.getAttribute("data-val")||!0,I=g._fullLayout._subplots.gl3d||[],C={},k=P.split("."),E=0;E<I.length;E++)C[I[E]+"."+k[1]]=L;var R=L==="pan"?L:"zoom";C.dragmode=R,r.call("_guiRelayout",g,C)}o.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(g){return n(g,"Reset camera to default")},attr:"resetDefault",icon:c.home,click:i},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(g){return n(g,"Reset camera to last save")},attr:"resetLastSave",icon:c.movie,click:i};function i(g,T){for(var M=T.currentTarget,P=M.getAttribute("data-attr"),L=P==="resetLastSave",I=P==="resetDefault",C=g._fullLayout,k=C._subplots.gl3d||[],E={},R=0;R<k.length;R++){var O=k[R],N=O+".camera",G=O+".aspectratio",U=O+".aspectmode",Y=C[O]._scene,z;L?(E[N+".up"]=Y.viewInitial.up,E[N+".eye"]=Y.viewInitial.eye,E[N+".center"]=Y.viewInitial.center,z=!0):I&&(E[N+".up"]=null,E[N+".eye"]=null,E[N+".center"]=null,z=!0),z&&(E[G+".x"]=Y.viewInitial.aspectratio.x,E[G+".y"]=Y.viewInitial.aspectratio.y,E[G+".z"]=Y.viewInitial.aspectratio.z,E[U]=Y.viewInitial.aspectmode)}r.call("_guiRelayout",g,E)}o.hoverClosest3d={name:"hoverClosest3d",title:function(g){return n(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:p};function s(g,T){var M=T.currentTarget,P=M._previousVal,L=g._fullLayout,I=L._subplots.gl3d||[],C=["xaxis","yaxis","zaxis"],k={},E={};if(P)E=P,M._previousVal=null;else{for(var R=0;R<I.length;R++){var O=I[R],N=L[O],G=O+".hovermode";k[G]=N.hovermode,E[G]=!1;for(var U=0;U<3;U++){var Y=C[U],z=O+"."+Y+".showspikes";E[z]=!1,k[z]=N[Y].showspikes}}M._previousVal=k}return E}function p(g,T){var M=s(g,T);r.call("_guiRelayout",g,M)}o.zoomInGeo={name:"zoomInGeo",title:function(g){return n(g,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:v},o.zoomOutGeo={name:"zoomOutGeo",title:function(g){return n(g,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:v},o.resetGeo={name:"resetGeo",title:function(g){return n(g,"Reset")},attr:"reset",val:null,icon:c.autoscale,click:v},o.hoverClosestGeo={name:"hoverClosestGeo",title:function(g){return n(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:b};function v(g,T){for(var M=T.currentTarget,P=M.getAttribute("data-attr"),L=M.getAttribute("data-val")||!0,I=g._fullLayout,C=I._subplots.geo||[],k=0;k<C.length;k++){var E=C[k],R=I[E];if(P==="zoom"){var O=R.projection.scale,N=L==="in"?2*O:.5*O;r.call("_guiRelayout",g,E+".projection.scale",N)}}P==="reset"&&w(g,"geo")}o.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(g){return n(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:b},o.hoverClosestPie={name:"hoverClosestPie",title:function(g){return n(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:c.tooltip_basic,gravity:"ne",click:b};function m(g){var T=g._fullLayout;return T.hovermode?!1:T._has("cartesian")?T._isHoriz?"y":"x":"closest"}function b(g){var T=m(g);r.call("_guiRelayout",g,"hovermode",T)}o.resetViewSankey={name:"resetSankeyGroup",title:function(g){return n(g,"Reset view")},icon:c.home,click:function(g){for(var T={"node.groups":[],"node.x":[],"node.y":[]},M=0;M<g._fullData.length;M++){var P=g._fullData[M]._viewInitial;T["node.groups"].push(P.node.groups.slice()),T["node.x"].push(P.node.x.slice()),T["node.y"].push(P.node.y.slice())}r.call("restyle",g,T)}},o.toggleHover={name:"toggleHover",title:function(g){return n(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:c.tooltip_basic,gravity:"ne",click:function(g,T){var M=s(g,T);M.hovermode=m(g),r.call("_guiRelayout",g,M)}},o.resetViews={name:"resetViews",title:function(g){return n(g,"Reset views")},icon:c.home,click:function(g,T){var M=T.currentTarget;M.setAttribute("data-attr","zoom"),M.setAttribute("data-val","reset"),l(g,T),M.setAttribute("data-attr","resetLastSave"),i(g,T),w(g,"geo"),w(g,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(g){return n(g,"Toggle Spike Lines")},icon:c.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var T=g._fullLayout,M=T._cartesianSpikesEnabled;T._cartesianSpikesEnabled=M==="on"?"off":"on",r.call("_guiRelayout",g,y(g))}};function y(g){for(var T=g._fullLayout,M=T._cartesianSpikesEnabled==="on",P=u.list(g,null,!0),L={},I=0;I<P.length;I++){var C=P[I];L[C._name+".showspikes"]=M?!0:C._showSpikeInitial}return L}o.resetViewMapbox={name:"resetViewMapbox",title:function(g){return n(g,"Reset view")},attr:"reset",icon:c.home,click:function(g){w(g,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",title:function(g){return n(g,"Zoom in")},attr:"zoom",val:"in",icon:c.zoom_plus,click:x},o.zoomOutMapbox={name:"zoomOutMapbox",title:function(g){return n(g,"Zoom out")},attr:"zoom",val:"out",icon:c.zoom_minus,click:x};function x(g,T){for(var M=T.currentTarget,P=M.getAttribute("data-val"),L=g._fullLayout,I=L._subplots.mapbox||[],C=1.05,k={},E=0;E<I.length;E++){var R=I[E],O=L[R].zoom,N=P==="in"?C*O:O/C;k[R+".zoom"]=N}r.call("_guiRelayout",g,k)}function w(g,T){for(var M=g._fullLayout,P=M._subplots[T]||[],L={},I=0;I<P.length;I++)for(var C=P[I],k=M[C]._subplot,E=k.viewInitial,R=Object.keys(E),O=0;O<R.length;O++){var N=R[O];L[C+"."+N]=E[N]}r.call("_guiRelayout",g,L)}},{"../../fonts/ploticon":757,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../shapes/draw":724}],703:[function(e,d,S){S.manage=e("./manage")},{"./manage":704}],704:[function(e,d,S){var r=e("../../plots/cartesian/axis_ids"),a=e("../../traces/scatter/subtypes"),u=e("../../registry"),c=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),f=e("./buttons");d.exports=function(m){var b=m._fullLayout,y=m._context,x=b._modeBar;if(!y.displayModeBar&&!y.watermark){x&&(x.destroy(),delete b._modeBar);return}if(!Array.isArray(y.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(y.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var w=y.modeBarButtons,g;Array.isArray(w)&&w.length?g=p(w):!y.displayModeBar&&y.watermark?g=[]:g=o(m),x?x.update(m,g):b._modeBar=t(m,g)};var n=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];function o(v){var m=v._fullLayout,b=v._fullData,y=v._context,x=y.modeBarButtonsToRemove,w=y.modeBarButtonsToAdd,g=m._has("cartesian"),T=m._has("gl3d"),M=m._has("geo"),P=m._has("pie"),L=m._has("funnelarea"),I=m._has("gl2d"),C=m._has("ternary"),k=m._has("mapbox"),E=m._has("polar"),R=m._has("sankey"),O=l(m),N=c(m.hovermode),G=[];function U(ne){if(!!ne.length){for(var ve=[],$=0;$<ne.length;$++){var j=ne[$];x.indexOf(j)===-1&&ve.push(f[j])}G.push(ve)}}var Y=["toImage"];y.showEditInChartStudio?Y.push("editInChartStudio"):y.showSendToCloud&&Y.push("sendDataToCloud"),U(Y);var z=[],B=[],H=[],V=[];if((g||I||P||L||C)+M+T+k+E>1?(B=["toggleHover"],H=["resetViews"]):M?(z=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],H=["resetGeo"]):T?(B=["hoverClosest3d"],H=["resetCameraDefault3d","resetCameraLastSave3d"]):k?(z=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],H=["resetViewMapbox"]):I?B=["hoverClosestGl2d"]:P?B=["hoverClosestPie"]:R?(B=["hoverClosestCartesian","hoverCompareCartesian"],H=["resetViewSankey"]):B=["toggleHover"],g&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(i(b)||N)&&(B=[]),(g||I)&&!O&&(z=["zoomIn2d","zoomOut2d","autoScale2d"],H[0]!=="resetViews"&&(H=["resetScale2d"])),T?V=["zoom3d","pan3d","orbitRotation","tableRotation"]:(g||I)&&!O||C?V=["zoom2d","pan2d"]:k||M?V=["pan2d"]:E&&(V=["zoom2d"]),h(b)&&V.push("select2d","lasso2d"),Array.isArray(w)){for(var Z=[],q=0;q<w.length;q++){var J=w[q];typeof J=="string"?n.indexOf(J)!==-1&&(m._has("mapbox")||m._has("cartesian"))&&V.push(J):Z.push(J)}w=Z}return U(V),U(z.concat(H)),U(B),s(G,w)}function l(v){for(var m=r.list({_fullLayout:v},null,!0),b=0;b<m.length;b++)if(!m[b].fixedrange)return!1;return!0}function h(v){for(var m=!1,b=0;b<v.length&&!m;b++){var y=v[b];!y._module||!y._module.selectPoints||(u.traceIs(y,"scatter-like")?(a.hasMarkers(y)||a.hasText(y))&&(m=!0):u.traceIs(y,"box-violin")?(y.boxpoints==="all"||y.points==="all")&&(m=!0):m=!0)}return m}function i(v){for(var m=0;m<v.length;m++)if(!u.traceIs(v[m],"noHover"))return!1;return!0}function s(v,m){if(m.length)if(Array.isArray(m[0]))for(var b=0;b<m.length;b++)v.push(m[b]);else v.push(m);return v}function p(v){for(var m=0;m<v.length;m++)for(var b=v[m],y=0;y<b.length;y++){var x=b[y];if(typeof x=="string")if(f[x]!==void 0)v[m][y]=f[x];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return v}},{"../../plots/cartesian/axis_ids":831,"../../registry":911,"../../traces/scatter/subtypes":1212,"../fx/helpers":679,"./buttons":702,"./modebar":705}],705:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../fonts/ploticon"),t=new DOMParser;function f(l){this.container=l.container,this.element=document.createElement("div"),this.update(l.graphInfo,l.buttons),this.container.appendChild(this.element)}var n=f.prototype;n.update=function(l,h){this.graphInfo=l;var i=this.graphInfo._context,s=this.graphInfo._fullLayout,p="modebar-"+s._uid;this.element.setAttribute("id",p),this._uid=p,this.element.className="modebar",i.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",h=h.reverse());var v=s.modebar,m=i.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";u.deleteRelatedStyleRule(p),u.addRelatedStyleRule(p,m+"#"+p+" .modebar-group","background-color: "+v.bgcolor),u.addRelatedStyleRule(p,"#"+p+" .modebar-btn .icon path","fill: "+v.color),u.addRelatedStyleRule(p,"#"+p+" .modebar-btn:hover .icon path","fill: "+v.activecolor),u.addRelatedStyleRule(p,"#"+p+" .modebar-btn.active .icon path","fill: "+v.activecolor);var b=!this.hasButtons(h),y=this.hasLogo!==i.displaylogo,x=this.locale!==i.locale;if(this.locale=i.locale,(b||y||x)&&(this.removeAllButtons(),this.updateButtons(h),i.watermark||i.displaylogo)){var w=this.getLogo();i.watermark&&(w.className=w.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(l){var h=this;this.buttons=l,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var s=h.createGroup();i.forEach(function(p){var v=p.name;if(!v)throw new Error("must provide button 'name' in button config");if(h.buttonsNames.indexOf(v)!==-1)throw new Error("button name '"+v+"' is taken");h.buttonsNames.push(v);var m=h.createButton(p);h.buttonElements.push(m),s.appendChild(m)}),h.element.appendChild(s)})},n.createGroup=function(){var l=document.createElement("div");return l.className="modebar-group",l},n.createButton=function(l){var h=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var s=l.title;s===void 0?s=l.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&i.setAttribute("data-title",s),l.attr!==void 0&&i.setAttribute("data-attr",l.attr);var p=l.val;p!==void 0&&(typeof p=="function"&&(p=p(this.graphInfo)),i.setAttribute("data-val",p));var v=l.click;if(typeof v!="function")throw new Error("must provide button 'click' function in button config");i.addEventListener("click",function(b){l.click(h.graphInfo,b),h.updateActiveButton(b.currentTarget)}),i.setAttribute("data-toggle",l.toggle||!1),l.toggle&&r.select(i).classed("active",!0);var m=l.icon;return typeof m=="function"?i.appendChild(m()):i.appendChild(this.createIcon(m||c.question)),i.setAttribute("data-gravity",l.gravity||"n"),i},n.createIcon=function(l){var h=a(l.height)?Number(l.height):l.ascent-l.descent,i="http://www.w3.org/2000/svg",s;if(l.path){s=document.createElementNS(i,"svg"),s.setAttribute("viewBox",[0,0,l.width,h].join(" ")),s.setAttribute("class","icon");var p=document.createElementNS(i,"path");p.setAttribute("d",l.path),l.transform?p.setAttribute("transform",l.transform):l.ascent!==void 0&&p.setAttribute("transform","matrix(1 0 0 -1 0 "+l.ascent+")"),s.appendChild(p)}if(l.svg){var v=t.parseFromString(l.svg,"application/xml");s=v.childNodes[0]}return s.setAttribute("height","1em"),s.setAttribute("width","1em"),s},n.updateActiveButton=function(l){var h=this.graphInfo._fullLayout,i=l!==void 0?l.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var p=s.getAttribute("data-val")||!0,v=s.getAttribute("data-attr"),m=s.getAttribute("data-toggle")==="true",b=r.select(s);if(m)v===i&&b.classed("active",!b.classed("active"));else{var y=v===null?v:u.nestedProperty(h,v).get();b.classed("active",y===p)}})},n.hasButtons=function(l){var h=this.buttons;if(!h||l.length!==h.length)return!1;for(var i=0;i<l.length;++i){if(l[i].length!==h[i].length)return!1;for(var s=0;s<l[i].length;s++)if(l[i][s].name!==h[i][s].name)return!1}return!0},n.getLogo=function(){var l=this.createGroup(),h=document.createElement("a");return h.href="https://plotly.com/",h.target="_blank",h.setAttribute("data-title",u._(this.graphInfo,"Produced with Plotly")),h.className="modebar-btn plotlyjsicon modebar-btn--logo",h.appendChild(this.createIcon(c.newplotlylogo)),l.appendChild(h),l},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){u.removeElement(this.container.querySelector(".modebar")),u.deleteRelatedStyleRule(this._uid)};function o(l,h){var i=l._fullLayout,s=new f({graphInfo:l,container:i._modebardiv.node(),buttons:h});return i._privateplot&&r.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}d.exports=o},{"../../fonts/ploticon":757,"../../lib":778,d3:169,"fast-isnumeric":241}],706:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("../color/attributes"),u=e("../../plot_api/plot_template").templatedArray,c=u("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});d.exports={visible:{valType:"boolean",editType:"plot"},buttons:c,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../color/attributes":642}],707:[function(e,d,S){d.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],708:[function(e,d,S){var r=e("../../lib"),a=e("../color"),u=e("../../plot_api/plot_template"),c=e("../../plots/array_container_defaults"),t=e("./attributes"),f=e("./constants");d.exports=function(h,i,s,p,v){var m=h.rangeselector||{},b=u.newContainer(i,"rangeselector");function y(M,P){return r.coerce(m,b,t,M,P)}var x=c(m,b,{name:"buttons",handleItemDefaults:n,calendar:v}),w=y("visible",x.length>0);if(w){var g=o(i,s,p);y("x",g[0]),y("y",g[1]),r.noneOrAll(h,i,["x","y"]),y("xanchor"),y("yanchor"),r.coerceFont(y,"font",s.font);var T=y("bgcolor");y("activecolor",a.contrast(T,f.lightAmount,f.darkAmount)),y("bordercolor"),y("borderwidth")}};function n(l,h,i,s){var p=s.calendar;function v(y,x){return r.coerce(l,h,t.buttons,y,x)}var m=v("visible");if(m){var b=v("step");b!=="all"&&(p&&p!=="gregorian"&&(b==="month"||b==="year")?h.stepmode="backward":v("stepmode"),v("count")),v("label")}}function o(l,h,i){for(var s=i.filter(function(b){return h[b].anchor===l._id}),p=0,v=0;v<s.length;v++){var m=h[s[v]].domain;m&&(p=Math.max(m[1],p))}return[l.domain[0],p+f.yPad]}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../color":643,"./attributes":706,"./constants":707}],709:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../plots/plots"),c=e("../color"),t=e("../drawing"),f=e("../../lib"),n=f.strTranslate,o=e("../../lib/svg_text_utils"),l=e("../../plots/cartesian/axis_ids"),h=e("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,p=h.FROM_BR,v=e("./constants"),m=e("./get_update_object");d.exports=function(I){var C=I._fullLayout,k=C._infolayer.selectAll(".rangeselector").data(b(I),y);k.enter().append("g").classed("rangeselector",!0),k.exit().remove(),k.style({cursor:"pointer","pointer-events":"all"}),k.each(function(E){var R=r.select(this),O=E,N=O.rangeselector,G=R.selectAll("g.button").data(f.filterVisible(N.buttons));G.enter().append("g").classed("button",!0),G.exit().remove(),G.each(function(U){var Y=r.select(this),z=m(O,U);U._isActive=x(O,U,z),Y.call(w,N,U),Y.call(T,N,U,I),Y.on("click",function(){I._dragged||a.call("_guiRelayout",I,z)}),Y.on("mouseover",function(){U._isHovered=!0,Y.call(w,N,U)}),Y.on("mouseout",function(){U._isHovered=!1,Y.call(w,N,U)})}),P(I,G,N,O._name,R)})};function b(L){for(var I=l.list(L,"x",!0),C=[],k=0;k<I.length;k++){var E=I[k];E.rangeselector&&E.rangeselector.visible&&C.push(E)}return C}function y(L){return L._id}function x(L,I,C){if(I.step==="all")return L.autorange===!0;var k=Object.keys(C);return L.range[0]===C[k[0]]&&L.range[1]===C[k[1]]}function w(L,I,C){var k=f.ensureSingle(L,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});k.attr({rx:v.rx,ry:v.ry}),k.call(c.stroke,I.bordercolor).call(c.fill,g(I,C)).style("stroke-width",I.borderwidth+"px")}function g(L,I){return I._isActive||I._isHovered?L.activecolor:L.bgcolor}function T(L,I,C,k){function E(O){o.convertToTspans(O,k)}var R=f.ensureSingle(L,"text","selector-text",function(O){O.attr("text-anchor","middle")});R.call(t.font,I.font).text(M(C,k._fullLayout._meta)).call(E)}function M(L,I){return L.label?I?f.templateString(L.label,I):L.label:L.step==="all"?"all":L.count+L.step.charAt(0)}function P(L,I,C,k,E){var R=0,O=0,N=C.borderwidth;I.each(function(){var H=r.select(this),V=H.select(".selector-text"),Z=C.font.size*i,q=Math.max(Z*o.lineCount(V),16)+3;O=Math.max(O,q)}),I.each(function(){var H=r.select(this),V=H.select(".selector-rect"),Z=H.select(".selector-text"),q=Z.node()&&t.bBox(Z.node()).width,J=C.font.size*i,ne=o.lineCount(Z),ve=Math.max(q+10,v.minButtonWidth);H.attr("transform",n(N+R,N)),V.attr({x:0,y:0,width:ve,height:O}),o.positionText(Z,ve/2,O/2-(ne-1)*J/2+3),R+=ve+5});var G=L._fullLayout._size,U=G.l+G.w*C.x,Y=G.t+G.h*(1-C.y),z="left";f.isRightAnchor(C)&&(U-=R,z="right"),f.isCenterAnchor(C)&&(U-=R/2,z="center");var B="top";f.isBottomAnchor(C)&&(Y-=O,B="bottom"),f.isMiddleAnchor(C)&&(Y-=O/2,B="middle"),R=Math.ceil(R),O=Math.ceil(O),U=Math.round(U),Y=Math.round(Y),u.autoMargin(L,k+"-range-selector",{x:C.x,y:C.y,l:R*s[z],r:R*p[z],b:O*p[B],t:O*s[B]}),E.attr("transform",n(U,Y))}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,"./constants":707,"./get_update_object":710,d3:169}],710:[function(e,d,S){var r=e("d3");d.exports=function(c,t){var f=c._name,n={};if(t.step==="all")n[f+".autorange"]=!0;else{var o=a(c,t);n[f+".range[0]"]=o[0],n[f+".range[1]"]=o[1]}return n};function a(u,c){var t=u.range,f=new Date(u.r2l(t[1])),n=c.step,o=c.count,l;switch(c.stepmode){case"backward":l=u.l2r(+r.time[n].utc.offset(f,-o));break;case"todate":var h=r.time[n].utc.offset(f,-o);l=u.l2r(+r.time[n].utc.ceil(h));break}var i=t[1];return[l,i]}},{d3:169}],711:[function(e,d,S){d.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":706,"./defaults":708,"./draw":709}],712:[function(e,d,S){var r=e("../color/attributes");d.exports={bgcolor:{valType:"color",dflt:r.background,editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":642}],713:[function(e,d,S){var r=e("../../plots/cartesian/axis_ids").list,a=e("../../plots/cartesian/autorange").getAutoRange,u=e("./constants");d.exports=function(t){for(var f=r(t,"x",!0),n=0;n<f.length;n++){var o=f[n],l=o[u.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=a(t,o))}}},{"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"./constants":714}],714:[function(e,d,S){d.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],715:[function(e,d,S){var r=e("../../lib"),a=e("../../plot_api/plot_template"),u=e("../../plots/cartesian/axis_ids"),c=e("./attributes"),t=e("./oppaxis_attributes");d.exports=function(n,o,l){var h=n[l],i=o[l];if(!(h.rangeslider||o._requestRangeslider[i._id]))return;r.isPlainObject(h.rangeslider)||(h.rangeslider={});var s=h.rangeslider,p=a.newContainer(i,"rangeslider");function v(k,E){return r.coerce(s,p,c,k,E)}var m,b;function y(k,E){return r.coerce(m,b,t,k,E)}var x=v("visible");if(!!x){v("bgcolor",o.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),v("autorange",!i.isValidRange(s.range)),v("range");var w=o._subplots;if(w)for(var g=w.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===u.name2id(l)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),T=r.simpleMap(g,u.id2name),M=0;M<T.length;M++){var P=T[M];m=s[P]||{},b=a.newContainer(p,P,"yaxis");var L=o[P],I;m.range&&L.isValidRange(m.range)&&(I="fixed");var C=y("rangemode",I);C!=="match"&&y("range",L.range.slice())}p._input=s}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_ids":831,"./attributes":712,"./oppaxis_attributes":719}],716:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../plots/plots"),c=e("../../lib"),t=c.strTranslate,f=e("../drawing"),n=e("../color"),o=e("../titles"),l=e("../../plots/cartesian"),h=e("../../plots/cartesian/axis_ids"),i=e("../dragelement"),s=e("../../lib/setcursor"),p=e("./constants");d.exports=function(L){for(var I=L._fullLayout,C=I._rangeSliderData,k=0;k<C.length;k++){var E=C[k][p.name];E._clipId=E._id+"-"+I._uid}function R(N){return N._name}var O=I._infolayer.selectAll("g."+p.containerClassName).data(C,R);O.exit().each(function(N){var G=N[p.name];I._topdefs.select("#"+G._clipId).remove()}).remove(),C.length!==0&&(O.enter().append("g").classed(p.containerClassName,!0).attr("pointer-events","all"),O.each(function(N){var G=r.select(this),U=N[p.name],Y=I[h.id2name(N.anchor)],z=U[h.id2name(N.anchor)];if(U.range){var B=c.simpleMap(U.range,N.r2l),H=c.simpleMap(N.range,N.r2l),V;H[0]<H[1]?V=[Math.min(B[0],H[0]),Math.max(B[1],H[1])]:V=[Math.max(B[0],H[0]),Math.min(B[1],H[1])],U.range=U._input.range=c.simpleMap(V,N.l2r)}N.cleanRange("rangeslider.range");var Z=I._size,q=N.domain;U._width=Z.w*(q[1]-q[0]);var J=Math.round(Z.l+Z.w*q[0]),ne=Math.round(Z.t+Z.h*(1-N._counterDomainMin)+(N.side==="bottom"?N._depth:0)+U._offsetShift+p.extraPad);G.attr("transform",t(J,ne)),U._rl=c.simpleMap(U.range,N.r2l);var ve=U._rl[0],$=U._rl[1],j=$-ve;if(U.p2d=function(be){return be/U._width*j+ve},U.d2p=function(be){return(be-ve)/j*U._width},N.rangebreaks){var ae=N.locateBreaks(ve,$);if(ae.length){var ie,te,re=0;for(ie=0;ie<ae.length;ie++)te=ae[ie],re+=te.max-te.min;var ce=U._width/($-ve-re),pe=[-ce*ve];for(ie=0;ie<ae.length;ie++)te=ae[ie],pe.push(pe[pe.length-1]-ce*(te.max-te.min));for(U.d2p=function(be){for(var xe=pe[0],ke=0;ke<ae.length;ke++){var Re=ae[ke];if(be>=Re.max)xe=pe[ke+1];else if(be<Re.min)break}return xe+ce*be},ie=0;ie<ae.length;ie++)te=ae[ie],te.pmin=U.d2p(te.min),te.pmax=U.d2p(te.max);U.p2d=function(be){for(var xe=pe[0],ke=0;ke<ae.length;ke++){var Re=ae[ke];if(be>=Re.pmax)xe=pe[ke+1];else if(be<Re.pmin)break}return(be-xe)/ce}}}if(z.rangemode!=="match"){var fe=Y.r2l(z.range[0]),se=Y.r2l(z.range[1]),de=se-fe;U.d2pOppAxis=function(be){return(be-fe)/de*U._height}}G.call(y,L,N,U).call(x,L,N,U).call(w,L,N,U).call(T,L,N,U,z).call(M,L,N,U).call(P,L,N,U),v(G,L,N,U),b(G,L,N,U,Y,z),N.side==="bottom"&&o.draw(L,N._id+"title",{propContainer:N,propName:N._name+".title",placeholder:I._dfltTitle.x,attributes:{x:N._offset+N._length/2,y:ne+U._height+U._offsetShift+10+1.5*N.title.font.size,"text-anchor":"middle"}})}))};function v(L,I,C,k){if(I._context.staticPlot)return;var E=L.select("rect."+p.slideBoxClassName).node(),R=L.select("rect."+p.grabAreaMinClassName).node(),O=L.select("rect."+p.grabAreaMaxClassName).node();function N(){var G=r.event,U=G.target,Y=G.clientX||G.touches[0].clientX,z=Y-L.node().getBoundingClientRect().left,B=k.d2p(C._rl[0]),H=k.d2p(C._rl[1]),V=i.coverSlip();this.addEventListener("touchmove",Z),this.addEventListener("touchend",q),V.addEventListener("mousemove",Z),V.addEventListener("mouseup",q);function Z(J){var ne=J.clientX||J.touches[0].clientX,ve=+ne-Y,$,j,ae;switch(U){case E:ae="ew-resize",$=B+ve,j=H+ve;break;case R:ae="col-resize",$=B+ve,j=H;break;case O:ae="col-resize",$=B,j=H+ve;break;default:ae="ew-resize",$=z,j=z+ve;break}if(j<$){var ie=j;j=$,$=ie}k._pixelMin=$,k._pixelMax=j,s(r.select(V),ae),m(L,I,C,k)}function q(){V.removeEventListener("mousemove",Z),V.removeEventListener("mouseup",q),this.removeEventListener("touchmove",Z),this.removeEventListener("touchend",q),c.removeElement(V)}}L.on("mousedown",N),L.on("touchstart",N)}function m(L,I,C,k){function E(N){return C.l2r(c.constrain(N,k._rl[0],k._rl[1]))}var R=E(k.p2d(k._pixelMin)),O=E(k.p2d(k._pixelMax));window.requestAnimationFrame(function(){a.call("_guiRelayout",I,C._name+".range",[R,O])})}function b(L,I,C,k,E,R){var O=p.handleWidth/2;function N(J){return c.constrain(J,0,k._width)}function G(J){return c.constrain(J,0,k._height)}function U(J){return c.constrain(J,-O,k._width+O)}var Y=N(k.d2p(C._rl[0])),z=N(k.d2p(C._rl[1]));if(L.select("rect."+p.slideBoxClassName).attr("x",Y).attr("width",z-Y),L.select("rect."+p.maskMinClassName).attr("width",Y),L.select("rect."+p.maskMaxClassName).attr("x",z).attr("width",k._width-z),R.rangemode!=="match"){var B=k._height-G(k.d2pOppAxis(E._rl[1])),H=k._height-G(k.d2pOppAxis(E._rl[0]));L.select("rect."+p.maskMinOppAxisClassName).attr("x",Y).attr("height",B).attr("width",z-Y),L.select("rect."+p.maskMaxOppAxisClassName).attr("x",Y).attr("y",H).attr("height",k._height-H).attr("width",z-Y),L.select("rect."+p.slideBoxClassName).attr("y",B).attr("height",H-B)}var V=.5,Z=Math.round(U(Y-O))-V,q=Math.round(U(z-O))+V;L.select("g."+p.grabberMinClassName).attr("transform",t(Z,V)),L.select("g."+p.grabberMaxClassName).attr("transform",t(q,V))}function y(L,I,C,k){var E=c.ensureSingle(L,"rect",p.bgClassName,function(G){G.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),R=k.borderwidth%2===0?k.borderwidth:k.borderwidth-1,O=-k._offsetShift,N=f.crispRound(I,k.borderwidth);E.attr({width:k._width+R,height:k._height+R,transform:t(O,O),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":N})}function x(L,I,C,k){var E=I._fullLayout,R=c.ensureSingleById(E._topdefs,"clipPath",k._clipId,function(O){O.append("rect").attr({x:0,y:0})});R.select("rect").attr({width:k._width,height:k._height})}function w(L,I,C,k){var E=I.calcdata,R=L.selectAll("g."+p.rangePlotClassName).data(C._subplotsWith,c.identity);R.enter().append("g").attr("class",function(N){return p.rangePlotClassName+" "+N}).call(f.setClipUrl,k._clipId,I),R.order(),R.exit().remove();var O;R.each(function(N,G){var U=r.select(this),Y=G===0,z=h.getFromId(I,N,"y"),B=z._name,H=k[B],V={data:[],layout:{xaxis:{type:C.type,domain:[0,1],range:k.range.slice(),calendar:C.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:I._context};C.rangebreaks&&(V.layout.xaxis.rangebreaks=C.rangebreaks),V.layout[B]={type:z.type,domain:[0,1],range:H.rangemode!=="match"?H.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(V.layout[B].rangebreaks=z.rangebreaks),u.supplyDefaults(V);var Z=V._fullLayout.xaxis,q=V._fullLayout[B];Z.clearCalc(),Z.setScale(),q.clearCalc(),q.setScale();var J={id:N,plotgroup:U,xaxis:Z,yaxis:q,isRangePlot:!0};Y?O=J:(J.mainplot="xy",J.mainplotinfo=O),l.rangePlot(I,J,g(E,N))})}function g(L,I){for(var C=[],k=0;k<L.length;k++){var E=L[k],R=E[0].trace;R.xaxis+R.yaxis===I&&C.push(E)}return C}function T(L,I,C,k,E){var R=c.ensureSingle(L,"rect",p.maskMinClassName,function(U){U.attr({x:0,y:0,"shape-rendering":"crispEdges"})});R.attr("height",k._height).call(n.fill,p.maskColor);var O=c.ensureSingle(L,"rect",p.maskMaxClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});if(O.attr("height",k._height).call(n.fill,p.maskColor),E.rangemode!=="match"){var N=c.ensureSingle(L,"rect",p.maskMinOppAxisClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});N.attr("width",k._width).call(n.fill,p.maskOppAxisColor);var G=c.ensureSingle(L,"rect",p.maskMaxOppAxisClassName,function(U){U.attr({y:0,"shape-rendering":"crispEdges"})});G.attr("width",k._width).style("border-top",p.maskOppBorder).call(n.fill,p.maskOppAxisColor)}}function M(L,I,C,k){if(!I._context.staticPlot){var E=c.ensureSingle(L,"rect",p.slideBoxClassName,function(R){R.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})});E.attr({height:k._height,fill:p.slideBoxFill})}}function P(L,I,C,k){var E=c.ensureSingle(L,"g",p.grabberMinClassName),R=c.ensureSingle(L,"g",p.grabberMaxClassName),O={x:0,width:p.handleWidth,rx:p.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"},N={y:Math.round(k._height/4),height:Math.round(k._height/2)},G=c.ensureSingle(E,"rect",p.handleMinClassName,function(H){H.attr(O)});G.attr(N);var U=c.ensureSingle(R,"rect",p.handleMaxClassName,function(H){H.attr(O)});U.attr(N);var Y={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:I._context.staticPlot?void 0:p.grabAreaCursor},z=c.ensureSingle(E,"rect",p.grabAreaMinClassName,function(H){H.attr(Y)});z.attr("height",k._height);var B=c.ensureSingle(R,"rect",p.grabAreaMaxClassName,function(H){H.attr(Y)});B.attr("height",k._height)}},{"../../lib":778,"../../lib/setcursor":799,"../../plots/cartesian":841,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":714,d3:169}],717:[function(e,d,S){var r=e("../../plots/cartesian/axis_ids"),a=e("../../lib/svg_text_utils"),u=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,t=u.name;function f(n){var o=n&&n[t];return o&&o.visible}S.isVisible=f,S.makeData=function(n){var o=r.list({_fullLayout:n},"x",!0),l=n.margin,h=[];if(!n._has("gl2d"))for(var i=0;i<o.length;i++){var s=o[i];if(f(s)){h.push(s);var p=s[t];p._id=t+s._id,p._height=(n.height-l.b-l.t)*p.thickness,p._offsetShift=Math.floor(p.borderwidth/2)}}n._rangeSliderData=h},S.autoMarginOpts=function(n,o){var l=n._fullLayout,h=o[t],i=o._id.charAt(0),s=0,p=0;if(o.side==="bottom"&&(s=o._depth,o.title.text!==l._dfltTitle[i])){p=1.5*o.title.font.size+10+h._offsetShift;var v=(o.title.text.match(a.BR_TAG_ALL)||[]).length;p+=v*o.title.font.size*c}return{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:h._height+s+Math.max(l.margin.b,p),pad:u.extraPad+h._offsetShift*2}}},{"../../constants/alignment":745,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"./constants":714}],718:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("./oppaxis_attributes"),c=e("./helpers");d.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:u})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:c.isVisible,makeData:c.makeData,autoMarginOpts:c.autoMarginOpts}},{"../../lib":778,"./attributes":712,"./calc_autorange":713,"./defaults":715,"./draw":716,"./helpers":717,"./oppaxis_attributes":719}],719:[function(e,d,S){d.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],720:[function(e,d,S){var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,u=e("../drawing/attributes").dash,c=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),d.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:c({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:c({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:c({},a.color,{editType:"arraydraw"}),width:c({},a.width,{editType:"calc+arraydraw"}),dash:c({},u,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../annotations/attributes":626,"../drawing/attributes":664}],721:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("./constants"),c=e("./helpers");d.exports=function(h){var i=h._fullLayout,s=r.filterVisible(i.shapes);if(!(!s.length||!h._fullData.length))for(var p=0;p<s.length;p++){var v=s[p];v._extremes={};var m,b,y=a.getRefType(v.xref),x=a.getRefType(v.yref);if(v.xref!=="paper"&&y!=="domain"){var w=v.xsizemode==="pixel"?v.xanchor:v.x0,g=v.xsizemode==="pixel"?v.xanchor:v.x1;m=a.getFromId(h,v.xref),b=o(m,w,g,v.path,u.paramIsX),b&&(v._extremes[m._id]=a.findExtremes(m,b,t(v)))}if(v.yref!=="paper"&&x!=="domain"){var T=v.ysizemode==="pixel"?v.yanchor:v.y0,M=v.ysizemode==="pixel"?v.yanchor:v.y1;m=a.getFromId(h,v.yref),b=o(m,T,M,v.path,u.paramIsY),b&&(v._extremes[m._id]=a.findExtremes(m,b,f(v)))}}};function t(l){return n(l.line.width,l.xsizemode,l.x0,l.x1,l.path,!1)}function f(l){return n(l.line.width,l.ysizemode,l.y0,l.y1,l.path,!0)}function n(l,h,i,s,p,v){var m=l/2,b=v;if(h==="pixel"){var y=p?c.extractPathCoords(p,v?u.paramIsY:u.paramIsX):[i,s],x=r.aggNums(Math.max,null,y),w=r.aggNums(Math.min,null,y),g=w<0?Math.abs(w)+m:m,T=x>0?x+m:m;return{ppad:m,ppadplus:b?g:T,ppadminus:b?T:g}}else return{ppad:m}}function o(l,h,i,s,p){var v=l.type==="category"||l.type==="multicategory"?l.r2c:l.d2c;if(h!==void 0)return[v(h),v(i)];if(!!s){var m=1/0,b=-1/0,y=s.match(u.segmentRE),x,w,g,T,M;for(l.type==="date"&&(v=c.decodeDate(v)),x=0;x<y.length;x++)w=y[x],g=p[w.charAt(0)].drawn,g!==void 0&&(T=y[x].substr(1).match(u.paramRE),!(!T||T.length<g)&&(M=v(T[g]),M<m&&(m=M),M>b&&(b=M)));if(b>=m)return[m,b]}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":722,"./helpers":731}],722:[function(e,d,S){d.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],723:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/array_container_defaults"),c=e("./attributes"),t=e("./helpers");d.exports=function(o,l){u(o,l,{name:"shapes",handleItemDefaults:f})};function f(n,o,l){function h(B,H){return r.coerce(n,o,c,B,H)}var i=h("visible");if(!!i){var s=h("path"),p=s?"path":"rect",v=h("type",p);o.type!=="path"&&delete o.path,h("editable"),h("layer"),h("opacity"),h("fillcolor"),h("fillrule");var m=h("line.width");m&&(h("line.color"),h("line.dash"));for(var b=h("xsizemode"),y=h("ysizemode"),x=["x","y"],w=0;w<2;w++){var g=x[w],T=g+"anchor",M=g==="x"?b:y,P={_fullLayout:l},L,I,C,k=a.coerceRef(n,o,P,g,void 0,"paper"),E=a.getRefType(k);if(E==="range"?(L=a.getFromId(P,k),L._shapeIndices.push(o._index),C=t.rangeToShapePosition(L),I=t.shapePositionToRange(L)):I=C=r.identity,v!=="path"){var R=.25,O=.75,N=g+"0",G=g+"1",U=n[N],Y=n[G];n[N]=I(n[N],!0),n[G]=I(n[G],!0),M==="pixel"?(h(N,0),h(G,10)):(a.coercePosition(o,P,h,k,N,R),a.coercePosition(o,P,h,k,G,O)),o[N]=C(o[N]),o[G]=C(o[G]),n[N]=U,n[G]=Y}if(M==="pixel"){var z=n[T];n[T]=I(n[T],!0),a.coercePosition(o,P,h,k,T,.25),o[T]=C(o[T]),n[T]=z}}v==="path"?h("path"):r.noneOrAll(n,o,["x0","x1","y0","y1"])}}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":720,"./helpers":731}],724:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),f=e("../../plots/cartesian/handle_outline").clearOutlineControllers,n=e("../color"),o=e("../drawing"),l=e("../../plot_api/plot_template").arrayEditor,h=e("../dragelement"),i=e("../../lib/setcursor"),s=e("./constants"),p=e("./helpers");d.exports={draw:v,drawOne:y,eraseActiveShape:I};function v(C){var k=C._fullLayout;k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove();for(var E in k._plots){var R=k._plots[E].shapelayer;R&&R.selectAll("path").remove()}for(var O=0;O<k.shapes.length;O++)k.shapes[O].visible&&y(C,O)}function m(C){return!!C._fullLayout._drawing}function b(C){return!C._context.edits.shapePosition}function y(C,k){C._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var E=p.makeOptionsAndPlotinfo(C,k),R=E.options,O=E.plotinfo;if(!R._input||R.visible===!1)return;if(R.layer!=="below")G(C._fullLayout._shapeUpperLayer);else if(R.xref==="paper"||R.yref==="paper")G(C._fullLayout._shapeLowerLayer);else if(O._hadPlotinfo){var N=O.mainplotinfo||O;G(N.shapelayer)}else G(C._fullLayout._shapeLowerLayer);function G(U){var Y=g(C,R),z={"data-index":k,"fill-rule":R.fillrule,d:Y},B=R.opacity,H=R.fillcolor,V=R.line.width?R.line.color:"rgba(0,0,0,0)",Z=R.line.width,q=R.line.dash;!Z&&R.editable===!0&&(Z=5,q="solid");var J=Y[Y.length-1]!=="Z",ne=b(C)&&R.editable&&C._fullLayout._activeShapeIndex===k;ne&&(H=J?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,B=C._fullLayout.activeshape.opacity);var ve=U.append("path").attr(z).style("opacity",B).call(n.stroke,V).call(n.fill,H).call(o.dashLine,q,Z);x(ve,C,R);var $;if((ne||C._context.edits.shapePosition)&&($=l(C.layout,"shapes",R)),ne){ve.style({cursor:"move"});var j={element:ve.node(),plotinfo:O,gd:C,editHelpers:$,isActiveShape:!0},ae=c(Y,C);t(ae,ve,j)}else C._context.edits.shapePosition?w(C,ve,R,k,U,$):R.editable===!0&&ve.style("pointer-events",J||n.opacity(H)*B<=.5?"stroke":"all");ve.node().addEventListener("click",function(){return P(C,ve)})}}function x(C,k,E){var R=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(C,R?"clip"+k._fullLayout._uid+R:null,k)}function w(C,k,E,R,O,N){var G=10,U=10,Y=E.xsizemode==="pixel",z=E.ysizemode==="pixel",B=E.type==="line",H=E.type==="path",V=N.modifyItem,Z,q,J,ne,ve,$,j,ae,ie,te,re,ce,pe,fe,se,de=u.getFromId(C,E.xref),be=u.getRefType(E.xref),xe=u.getFromId(C,E.yref),ke=u.getRefType(E.yref),Re=p.getDataToPixel(C,de,!1,be),Ke=p.getDataToPixel(C,xe,!0,ke),ze=p.getPixelToData(C,de,!1,be),Je=p.getPixelToData(C,xe,!0,ke),qe=Be(),Ee={element:qe.node(),gd:C,prepFn:bt,doneFn:Ne,clickFn:st},Ae;h.init(Ee),qe.node().onmousemove=xt;function Be(){return B?$e():k}function $e(){var Zt=10,Mt=Math.max(E.line.width,Zt),At=O.append("g").attr("data-index",R);At.append("path").attr("d",k.attr("d")).style({cursor:"move","stroke-width":Mt,"stroke-opacity":"0"});var ft={"fill-opacity":"0"},ot=Math.max(Mt/2,Zt);return At.append("circle").attr({"data-line-point":"start-point",cx:Y?Re(E.xanchor)+E.x0:Re(E.x0),cy:z?Ke(E.yanchor)-E.y0:Ke(E.y0),r:ot}).style(ft).classed("cursor-grab",!0),At.append("circle").attr({"data-line-point":"end-point",cx:Y?Re(E.xanchor)+E.x1:Re(E.x1),cy:z?Ke(E.yanchor)-E.y1:Ke(E.y1),r:ot}).style(ft).classed("cursor-grab",!0),At}function xt(Zt){if(m(C)){Ae=null;return}if(B)Zt.target.tagName==="path"?Ae="move":Ae=Zt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Mt=Ee.element.getBoundingClientRect(),At=Mt.right-Mt.left,ft=Mt.bottom-Mt.top,ot=Zt.clientX-Mt.left,Te=Zt.clientY-Mt.top,Le=!H&&At>G&&ft>U&&!Zt.shiftKey?h.getCursor(ot/At,1-Te/ft):"move";i(k,Le),Ae=Le.split("-")[0]}}function bt(Zt){m(C)||(Y&&(ve=Re(E.xanchor)),z&&($=Ke(E.yanchor)),E.type==="path"?se=E.path:(Z=Y?E.x0:Re(E.x0),q=z?E.y0:Ke(E.y0),J=Y?E.x1:Re(E.x1),ne=z?E.y1:Ke(E.y1)),Z<J?(ie=Z,pe="x0",te=J,fe="x1"):(ie=J,pe="x1",te=Z,fe="x0"),!z&&q<ne||z&&q>ne?(j=q,re="y0",ae=ne,ce="y1"):(j=ne,re="y1",ae=q,ce="y0"),xt(Zt),Wt(O,E),jt(k,E,C),Ee.moveFn=Ae==="move"?_t:Ot,Ee.altKey=Zt.altKey)}function Ne(){m(C)||(i(k),Et(O),x(k,C,E),r.call("_guiRelayout",C,N.getUpdateObj()))}function st(){m(C)||Et(O)}function _t(Zt,Mt){if(E.type==="path"){var At=function(Te){return Te},ft=At,ot=At;Y?V("xanchor",E.xanchor=ze(ve+Zt)):(ft=function(Le){return ze(Re(Le)+Zt)},de&&de.type==="date"&&(ft=p.encodeDate(ft))),z?V("yanchor",E.yanchor=Je($+Mt)):(ot=function(Le){return Je(Ke(Le)+Mt)},xe&&xe.type==="date"&&(ot=p.encodeDate(ot))),V("path",E.path=M(se,ft,ot))}else Y?V("xanchor",E.xanchor=ze(ve+Zt)):(V("x0",E.x0=ze(Z+Zt)),V("x1",E.x1=ze(J+Zt))),z?V("yanchor",E.yanchor=Je($+Mt)):(V("y0",E.y0=Je(q+Mt)),V("y1",E.y1=Je(ne+Mt)));k.attr("d",g(C,E)),Wt(O,E)}function Ot(Zt,Mt){if(H){var At=function(lt){return lt},ft=At,ot=At;Y?V("xanchor",E.xanchor=ze(ve+Zt)):(ft=function(Ct){return ze(Re(Ct)+Zt)},de&&de.type==="date"&&(ft=p.encodeDate(ft))),z?V("yanchor",E.yanchor=Je($+Mt)):(ot=function(Ct){return Je(Ke(Ct)+Mt)},xe&&xe.type==="date"&&(ot=p.encodeDate(ot))),V("path",E.path=M(se,ft,ot))}else if(B){if(Ae==="resize-over-start-point"){var Te=Z+Zt,Le=z?q-Mt:q+Mt;V("x0",E.x0=Y?Te:ze(Te)),V("y0",E.y0=z?Le:Je(Le))}else if(Ae==="resize-over-end-point"){var Ve=J+Zt,Qe=z?ne-Mt:ne+Mt;V("x1",E.x1=Y?Ve:ze(Ve)),V("y1",E.y1=z?Qe:Je(Qe))}}else{var Me=function(lt){return Ae.indexOf(lt)!==-1},Ie=Me("n"),He=Me("s"),Ye=Me("w"),ut=Me("e"),nt=Ie?j+Mt:j,Ge=He?ae+Mt:ae,at=Ye?ie+Zt:ie,et=ut?te+Zt:te;z&&(Ie&&(nt=j-Mt),He&&(Ge=ae-Mt)),(!z&&Ge-nt>U||z&&nt-Ge>U)&&(V(re,E[re]=z?nt:Je(nt)),V(ce,E[ce]=z?Ge:Je(Ge))),et-at>G&&(V(pe,E[pe]=Y?at:ze(at)),V(fe,E[fe]=Y?et:ze(et)))}k.attr("d",g(C,E)),Wt(O,E)}function Wt(Zt,Mt){(Y||z)&&At();function At(){var ft=Mt.type!=="path",ot=Zt.selectAll(".visual-cue").data([0]),Te=1;ot.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Te}).classed("visual-cue",!0);var Le=Re(Y?Mt.xanchor:a.midRange(ft?[Mt.x0,Mt.x1]:p.extractPathCoords(Mt.path,s.paramIsX))),Ve=Ke(z?Mt.yanchor:a.midRange(ft?[Mt.y0,Mt.y1]:p.extractPathCoords(Mt.path,s.paramIsY)));if(Le=p.roundPositionForSharpStrokeRendering(Le,Te),Ve=p.roundPositionForSharpStrokeRendering(Ve,Te),Y&&z){var Qe="M"+(Le-1-Te)+","+(Ve-1-Te)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ot.attr("d",Qe)}else if(Y){var Me="M"+(Le-1-Te)+","+(Ve-9-Te)+"v18 h2 v-18 Z";ot.attr("d",Me)}else{var Ie="M"+(Le-9-Te)+","+(Ve-1-Te)+"h18 v2 h-18 Z";ot.attr("d",Ie)}}}function Et(Zt){Zt.selectAll(".visual-cue").remove()}function jt(Zt,Mt,At){var ft=Mt.xref,ot=Mt.yref,Te=u.getFromId(At,ft),Le=u.getFromId(At,ot),Ve="";ft!=="paper"&&!Te.autorange&&(Ve+=ft),ot!=="paper"&&!Le.autorange&&(Ve+=ot),o.setClipUrl(Zt,Ve?"clip"+At._fullLayout._uid+Ve:null,At)}}function g(C,k){var E=k.type,R=u.getRefType(k.xref),O=u.getRefType(k.yref),N=u.getFromId(C,k.xref),G=u.getFromId(C,k.yref),U=C._fullLayout._size,Y,z,B,H,V,Z,q,J;if(N?R==="domain"?z=function(pe){return N._offset+N._length*pe}:(Y=p.shapePositionToRange(N),z=function(pe){return N._offset+N.r2p(Y(pe,!0))}):z=function(pe){return U.l+U.w*pe},G?O==="domain"?H=function(pe){return G._offset+G._length*(1-pe)}:(B=p.shapePositionToRange(G),H=function(pe){return G._offset+G.r2p(B(pe,!0))}):H=function(pe){return U.t+U.h*(1-pe)},E==="path")return N&&N.type==="date"&&(z=p.decodeDate(z)),G&&G.type==="date"&&(H=p.decodeDate(H)),T(k,z,H);if(k.xsizemode==="pixel"){var ne=z(k.xanchor);V=ne+k.x0,Z=ne+k.x1}else V=z(k.x0),Z=z(k.x1);if(k.ysizemode==="pixel"){var ve=H(k.yanchor);q=ve-k.y0,J=ve-k.y1}else q=H(k.y0),J=H(k.y1);if(E==="line")return"M"+V+","+q+"L"+Z+","+J;if(E==="rect")return"M"+V+","+q+"H"+Z+"V"+J+"H"+V+"Z";var $=(V+Z)/2,j=(q+J)/2,ae=Math.abs($-V),ie=Math.abs(j-q),te="A"+ae+","+ie,re=$+ae+","+j,ce=$+","+(j-ie);return"M"+re+te+" 0 1,1 "+ce+te+" 0 0,1 "+re+"Z"}function T(C,k,E){var R=C.path,O=C.xsizemode,N=C.ysizemode,G=C.xanchor,U=C.yanchor;return R.replace(s.segmentRE,function(Y){var z=0,B=Y.charAt(0),H=s.paramIsX[B],V=s.paramIsY[B],Z=s.numParams[B],q=Y.substr(1).replace(s.paramRE,function(J){return H[z]?O==="pixel"?J=k(G)+Number(J):J=k(J):V[z]&&(N==="pixel"?J=E(U)-Number(J):J=E(J)),z++,z>Z&&(J="X"),J});return z>Z&&(q=q.replace(/[\s,]*X.*/,""),a.log("Ignoring extra params in segment "+Y)),B+q})}function M(C,k,E){return C.replace(s.segmentRE,function(R){var O=0,N=R.charAt(0),G=s.paramIsX[N],U=s.paramIsY[N],Y=s.numParams[N],z=R.substr(1).replace(s.paramRE,function(B){return O>=Y||(G[O]?B=k(B):U[O]&&(B=E(B)),O++),B});return N+z})}function P(C,k){if(!!b(C)){var E=k.node(),R=+E.getAttribute("data-index");if(R>=0){if(R===C._fullLayout._activeShapeIndex){L(C);return}C._fullLayout._activeShapeIndex=R,C._fullLayout._deactivateShape=L,v(C)}}}function L(C){if(!!b(C)){var k=C._fullLayout._activeShapeIndex;k>=0&&(f(C),delete C._fullLayout._activeShapeIndex,v(C))}}function I(C){if(!!b(C)){f(C);var k=C._fullLayout._activeShapeIndex,E=(C.layout||{}).shapes||[];if(k<E.length){for(var R=[],O=0;O<E.length;O++)O!==k&&R.push(E[O]);delete C._fullLayout._activeShapeIndex,r.call("_guiRelayout",C,{shapes:R})}}}},{"../../lib":778,"../../lib/setcursor":799,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/cartesian/handle_outline":838,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":722,"./draw_newshape/display_outlines":728,"./draw_newshape/helpers":729,"./helpers":731}],725:[function(e,d,S){var r=e("../../drawing/attributes").dash,a=e("../../../lib/extend").extendFlat;d.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:a({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":768,"../../drawing/attributes":664}],726:[function(e,d,S){var r=32;d.exports={CIRCLE_SIDES:r,i000:0,i090:r/4,i180:r/2,i270:r/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],727:[function(e,d,S){var r=e("../../color");d.exports=function(u,c,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var f=t("newshape.line.width");if(f){var n=(u||{}).plot_bgcolor||"#FFF";t("newshape.line.color",r.contrast(n)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":643}],728:[function(e,d,S){var r=e("../../dragelement"),a=e("../../dragelement/helpers"),u=a.drawMode,c=e("../../../registry"),t=e("./constants"),f=t.i000,n=t.i090,o=t.i180,l=t.i270,h=e("../../../plots/cartesian/handle_outline"),i=h.clearOutlineControllers,s=e("./helpers"),p=s.pointsShapeRectangle,v=s.pointsShapeEllipse,m=s.writePaths,b=e("./newshapes");d.exports=function x(w,g,T,M){M||(M=0);var P=T.gd;function L(){x(w,g,T,M++),v(w[0])&&I({redrawing:!0})}function I(te){T.isActiveShape=!1;var re=b(g,T);Object.keys(re).length&&c.call((te||{}).redrawing?"relayout":"_guiRelayout",P,re)}var C=T.isActiveShape,k=P._fullLayout,E=k._zoomlayer,R=T.dragmode,O=u(R);O?P._fullLayout._drawing=!0:P._fullLayout._activeShapeIndex>=0&&i(P),g.attr("d",m(w));var N,G,U,Y,z;if(C&&!M){z=y([],w);var B=E.append("g").attr("class","outline-controllers");ne(B),ie()}function H(te){U=+te.srcElement.getAttribute("data-i"),Y=+te.srcElement.getAttribute("data-j"),N[U][Y].moveFn=V}function V(te,re){if(!!w.length){var ce=z[U][Y][1],pe=z[U][Y][2],fe=w[U],se=fe.length;if(p(fe)){for(var de=0;de<se;de++)if(de!==Y){var be=fe[de];be[1]===fe[Y][1]&&(be[1]=ce+te),be[2]===fe[Y][2]&&(be[2]=pe+re)}if(fe[Y][1]=ce+te,fe[Y][2]=pe+re,!p(fe))for(var xe=0;xe<se;xe++)for(var ke=0;ke<fe[xe].length;ke++)fe[xe][ke]=z[U][xe][ke]}else fe[Y][1]=ce+te,fe[Y][2]=pe+re;L()}}function Z(){I()}function q(){if(!!w.length&&!!w[U]&&!!w[U].length){for(var te=[],re=0;re<w[U].length;re++)re!==Y&&te.push(w[U][re]);te.length>1&&!(te.length===2&&te[1][0]==="Z")&&(Y===0&&(te[0][0]="M"),w[U]=te,L(),I())}}function J(te,re){if(te===2){U=+re.srcElement.getAttribute("data-i"),Y=+re.srcElement.getAttribute("data-j");var ce=w[U];!p(ce)&&!v(ce)&&q()}}function ne(te){N=[];for(var re=0;re<w.length;re++){var ce=w[re],pe=p(ce),fe=!pe&&v(ce);N[re]=[];for(var se=0;se<ce.length;se++)if(ce[se][0]!=="Z"&&!(fe&&se!==f&&se!==n&&se!==o&&se!==l)){var de=ce[se][1],be=ce[se][2],xe=te.append("circle").classed("cursor-grab",!0).attr("data-i",re).attr("data-j",se).attr("cx",de).attr("cy",be).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});N[re][se]={element:xe.node(),gd:P,prepFn:H,doneFn:Z,clickFn:J},r.init(N[re][se])}}}function ve(te,re){if(!!w.length)for(var ce=0;ce<w.length;ce++)for(var pe=0;pe<w[ce].length;pe++)for(var fe=0;fe+2<w[ce][pe].length;fe+=2)w[ce][pe][fe+1]=z[ce][pe][fe+1]+te,w[ce][pe][fe+2]=z[ce][pe][fe+2]+re}function $(te,re){ve(te,re),L()}function j(te){U=+te.srcElement.getAttribute("data-i"),U||(U=0),G[U].moveFn=$}function ae(){I()}function ie(){if(G=[],!!w.length){var te=0;G[te]={element:g[0][0],gd:P,prepFn:j,doneFn:ae},r.init(G[te])}}};function y(x,w){for(var g=0;g<w.length;g++){var T=w[g];x[g]=[];for(var M=0;M<T.length;M++){x[g][M]=[];for(var P=0;P<T[M].length;P++)x[g][M][P]=T[M][P]}}return x}},{"../../../plots/cartesian/handle_outline":838,"../../../registry":911,"../../dragelement":662,"../../dragelement/helpers":661,"./constants":726,"./helpers":729,"./newshapes":730}],729:[function(e,d,S){var r=e("parse-svg-path"),a=e("./constants"),u=a.CIRCLE_SIDES,c=a.SQRT2,t=e("../../../plots/cartesian/helpers"),f=t.p2r,n=t.r2p,o=[0,3,4,5,6,1,2],l=[0,3,4,1,2];S.writePaths=function(s){var p=s.length;if(!p)return"M0,0Z";for(var v="",m=0;m<p;m++)for(var b=s[m].length,y=0;y<b;y++){var x=s[m][y][0];if(x==="Z")v+="Z";else for(var w=s[m][y].length,g=0;g<w;g++){var T=g;x==="Q"||x==="S"?T=l[g]:x==="C"&&(T=o[g]),v+=s[m][y][T],g>0&&g<w-1&&(v+=",")}}return v},S.readPaths=function(s,p,v,m){var b=r(s),y=[],x=-1,w=function(){x++,y[x]=[]},g,T=0,M=0,P,L,I=function(){P=T,L=M};I();for(var C=0;C<b.length;C++){var k=[],E,R,O,N,G=b[C][0],U=G;switch(G){case"M":w(),T=+b[C][1],M=+b[C][2],k.push([U,T,M]),I();break;case"Q":case"S":E=+b[C][1],O=+b[C][2],T=+b[C][3],M=+b[C][4],k.push([U,T,M,E,O]);break;case"C":E=+b[C][1],O=+b[C][2],R=+b[C][3],N=+b[C][4],T=+b[C][5],M=+b[C][6],k.push([U,T,M,E,O,R,N]);break;case"T":case"L":T=+b[C][1],M=+b[C][2],k.push([U,T,M]);break;case"H":U="L",T=+b[C][1],k.push([U,T,M]);break;case"V":U="L",M=+b[C][1],k.push([U,T,M]);break;case"A":U="L";var Y=+b[C][1],z=+b[C][2];+b[C][4]||(Y=-Y,z=-z);var B=T-Y,H=M;for(g=1;g<=u/2;g++){var V=2*Math.PI*g/u;k.push([U,B+Y*Math.cos(V),H+z*Math.sin(V)])}break;case"Z":(T!==P||M!==L)&&(T=P,M=L,k.push([U,T,M]));break}for(var Z=(v||{}).domain,q=p._fullLayout._size,J=v&&v.xsizemode==="pixel",ne=v&&v.ysizemode==="pixel",ve=m===!1,$=0;$<k.length;$++){for(g=0;g+2<7;g+=2){var j=k[$][g+1],ae=k[$][g+2];j===void 0||ae===void 0||(T=j,M=ae,v&&(v.xaxis&&v.xaxis.p2r?(ve&&(j-=v.xaxis._offset),J?j=n(v.xaxis,v.xanchor)+j:j=f(v.xaxis,j)):(ve&&(j-=q.l),Z?j=Z.x[0]+j/q.w:j=j/q.w),v.yaxis&&v.yaxis.p2r?(ve&&(ae-=v.yaxis._offset),ne?ae=n(v.yaxis,v.yanchor)-ae:ae=f(v.yaxis,ae)):(ve&&(ae-=q.t),Z?ae=Z.y[1]-ae/q.h:ae=1-ae/q.h)),k[$][g+1]=j,k[$][g+2]=ae)}y[x].push(k[$].slice())}}return y};function h(s,p){return Math.abs(s-p)<=1e-6}function i(s,p){var v=p[1]-s[1],m=p[2]-s[2];return Math.sqrt(v*v+m*m)}S.pointsShapeRectangle=function(s){var p=s.length;if(p!==5)return!1;for(var v=1;v<3;v++){var m=s[0][v]-s[1][v],b=s[3][v]-s[2][v];if(!h(m,b))return!1;var y=s[0][v]-s[3][v],x=s[1][v]-s[2][v];if(!h(y,x))return!1}return!h(s[0][1],s[1][1])&&!h(s[0][1],s[3][1])?!1:!!(i(s[0],s[1])*i(s[0],s[3]))},S.pointsShapeEllipse=function(s){var p=s.length;if(p!==u+1)return!1;p=u;for(var v=0;v<p;v++){var m=(p*2-v)%p,b=(p/2+m)%p,y=(p/2+v)%p;if(!h(i(s[v],s[y]),i(s[m],s[b])))return!1}return!0},S.handleEllipse=function(s,p,v){if(!s)return[p,v];var m=S.ellipseOver({x0:p[0],y0:p[1],x1:v[0],y1:v[1]}),b=(m.x1+m.x0)/2,y=(m.y1+m.y0)/2,x=(m.x1-m.x0)/2,w=(m.y1-m.y0)/2;x||(x=w=w/c),w||(w=x=x/c);for(var g=[],T=0;T<u;T++){var M=T*2*Math.PI/u;g.push([b+x*Math.cos(M),y+w*Math.sin(M)])}return g},S.ellipseOver=function(s){var p=s.x0,v=s.y0,m=s.x1,b=s.y1,y=m-p,x=b-v;p-=y,v-=x;var w=(p+m)/2,g=(v+b)/2,T=c;return y*=T,x*=T,{x0:w-y,y0:g-x,x1:w+y,y1:g+x}}},{"../../../plots/cartesian/helpers":839,"./constants":726,"parse-svg-path":505}],730:[function(e,d,S){var r=e("../../dragelement/helpers"),a=r.drawMode,u=r.openMode,c=e("./constants"),t=c.i000,f=c.i090,n=c.i180,o=c.i270,l=c.cos45,h=c.sin45,i=e("../../../plots/cartesian/helpers"),s=i.p2r,p=i.r2p,v=e("../../../plots/cartesian/handle_outline"),m=v.clearSelect,b=e("./helpers"),y=b.readPaths,x=b.writePaths,w=b.ellipseOver;d.exports=function(M,P){if(!!M.length){var L=M[0][0];if(!!L){var I=L.getAttribute("d"),C=P.gd,k=C._fullLayout.newshape,E=P.plotinfo,R=E.xaxis,O=E.yaxis,N=!!E.domain||!E.xaxis,G=!!E.domain||!E.yaxis,U=P.isActiveShape,Y=P.dragmode,z=(C.layout||{}).shapes||[];if(!a(Y)&&U!==void 0){var B=C._fullLayout._activeShapeIndex;if(B<z.length)switch(C._fullLayout.shapes[B].type){case"rect":Y="drawrect";break;case"circle":Y="drawcircle";break;case"line":Y="drawline";break;case"path":var H=z[B].path||"";H[H.length-1]==="Z"?Y="drawclosedpath":Y="drawopenpath";break}}var V=u(Y),Z=y(I,C,E,U),q={editable:!0,xref:N?"paper":R._id,yref:G?"paper":O._id,layer:k.layer,opacity:k.opacity,line:{color:k.line.color,width:k.line.width,dash:k.line.dash}};V||(q.fillcolor=k.fillcolor,q.fillrule=k.fillrule);var J;if(Z.length===1&&(J=Z[0]),J&&Y==="drawrect")q.type="rect",q.x0=J[0][1],q.y0=J[0][2],q.x1=J[2][1],q.y1=J[2][2];else if(J&&Y==="drawline")q.type="line",q.x0=J[0][1],q.y0=J[0][2],q.x1=J[1][1],q.y1=J[1][2];else if(J&&Y==="drawcircle"){q.type="circle";var ne=J[t][1],ve=J[f][1],$=J[n][1],j=J[o][1],ae=J[t][2],ie=J[f][2],te=J[n][2],re=J[o][2],ce=E.xaxis&&(E.xaxis.type==="date"||E.xaxis.type==="log"),pe=E.yaxis&&(E.yaxis.type==="date"||E.yaxis.type==="log");ce&&(ne=p(E.xaxis,ne),ve=p(E.xaxis,ve),$=p(E.xaxis,$),j=p(E.xaxis,j)),pe&&(ae=p(E.yaxis,ae),ie=p(E.yaxis,ie),te=p(E.yaxis,te),re=p(E.yaxis,re));var fe=(ve+j)/2,se=(ae+te)/2,de=(j-ve+$-ne)/2,be=(re-ie+te-ae)/2,xe=w({x0:fe,y0:se,x1:fe+de*l,y1:se+be*h});ce&&(xe.x0=s(E.xaxis,xe.x0),xe.x1=s(E.xaxis,xe.x1)),pe&&(xe.y0=s(E.yaxis,xe.y0),xe.y1=s(E.yaxis,xe.y1)),q.x0=xe.x0,q.y0=xe.y0,q.x1=xe.x1,q.y1=xe.y1}else q.type="path",R&&O&&g(Z,R,O),q.path=x(Z),J=null;m(C);for(var ke=P.editHelpers,Re=(ke||{}).modifyItem,Ke=[],ze=0;ze<z.length;ze++){var Je=C._fullLayout.shapes[ze];if(Ke[ze]=Je._input,U!==void 0&&ze===C._fullLayout._activeShapeIndex){var qe=q;switch(Je.type){case"line":case"rect":case"circle":Re("x0",qe.x0),Re("x1",qe.x1),Re("y0",qe.y0),Re("y1",qe.y1);break;case"path":Re("path",qe.path);break}}}return U===void 0?(Ke.push(q),Ke):ke?ke.getUpdateObj():{}}}};function g(T,M,P){var L=M.type==="date",I=P.type==="date";if(!L&&!I)return T;for(var C=0;C<T.length;C++)for(var k=0;k<T[C].length;k++)for(var E=0;E+2<T[C][k].length;E+=2)L&&(T[C][k][E+1]=T[C][k][E+1].replace(" ","_")),I&&(T[C][k][E+2]=T[C][k][E+2].replace(" ","_"));return T}},{"../../../plots/cartesian/handle_outline":838,"../../../plots/cartesian/helpers":839,"../../dragelement/helpers":661,"./constants":726,"./helpers":729}],731:[function(e,d,S){var r=e("./constants"),a=e("../../lib");S.rangeToShapePosition=function(u){return u.type==="log"?u.r2d:function(c){return c}},S.shapePositionToRange=function(u){return u.type==="log"?u.d2r:function(c){return c}},S.decodeDate=function(u){return function(c){return c.replace&&(c=c.replace("_"," ")),u(c)}},S.encodeDate=function(u){return function(c){return u(c).replace(" ","_")}},S.extractPathCoords=function(u,c){var t=[],f=u.match(r.segmentRE);return f.forEach(function(n){var o=c[n.charAt(0)].drawn;if(o!==void 0){var l=n.substr(1).match(r.paramRE);!l||l.length<o||t.push(a.cleanNumber(l[o]))}}),t},S.getDataToPixel=function(u,c,t,f){var n=u._fullLayout._size,o;if(c)if(f==="domain")o=function(h){return c._length*(t?1-h:h)+c._offset};else{var l=S.shapePositionToRange(c);o=function(h){return c._offset+c.r2p(l(h,!0))},c.type==="date"&&(o=S.decodeDate(o))}else t?o=function(h){return n.t+n.h*(1-h)}:o=function(h){return n.l+n.w*h};return o},S.getPixelToData=function(u,c,t,f){var n=u._fullLayout._size,o;if(c)if(f==="domain")o=function(h){var i=(h-c._offset)/c._length;return t?1-i:i};else{var l=S.rangeToShapePosition(c);o=function(h){return l(c.p2r(h-c._offset))}}else t?o=function(h){return 1-(h-n.t)/n.h}:o=function(h){return(h-n.l)/n.w};return o},S.roundPositionForSharpStrokeRendering=function(u,c){var t=Math.round(c%2)===1,f=Math.round(u);return t?f+.5:f},S.makeOptionsAndPlotinfo=function(u,c){var t=u._fullLayout.shapes[c]||{},f=u._fullLayout._plots[t.xref+t.yref],n=!!f;return n?f._hadPlotinfo=!0:(f={},t.xref&&t.xref!=="paper"&&(f.xaxis=u._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(f.yaxis=u._fullLayout[t.yref+"axis"])),f.xsizemode=t.xsizemode,f.ysizemode=t.ysizemode,f.xanchor=t.xanchor,f.yanchor=t.yanchor,{options:t,plotinfo:f}}},{"../../lib":778,"./constants":722}],732:[function(e,d,S){var r=e("./draw");d.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":840,"./attributes":720,"./calc_autorange":721,"./defaults":723,"./draw":724,"./draw_newshape/defaults":727}],733:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),u=e("../../lib/extend").extendDeepAll,c=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),f=e("../../plot_api/plot_template").templatedArray,n=e("./constants"),o=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});d.exports=c(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:o,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:u(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/animation_attributes":822,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"./constants":734}],734:[function(e,d,S){d.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],735:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/array_container_defaults"),u=e("./attributes"),c=e("./constants"),t=c.name,f=u.steps;d.exports=function(h,i){a(h,i,{name:t,handleItemDefaults:n})};function n(l,h,i){function s(g,T){return r.coerce(l,h,u,g,T)}for(var p=a(l,h,{name:"steps",handleItemDefaults:o}),v=0,m=0;m<p.length;m++)p[m].visible&&v++;var b;if(v<2?b=h.visible=!1:b=s("visible"),!!b){h._stepCount=v;var y=h._visibleSteps=r.filterVisible(p),x=s("active");(p[x]||{}).visible||(h.active=y[0]._index),s("x"),s("y"),r.noneOrAll(l,h,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),r.coerceFont(s,"font",i.font);var w=s("currentvalue.visible");w&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),r.coerceFont(s,"currentvalue.font",h.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function o(l,h){function i(v,m){return r.coerce(l,h,f,v,m)}var s;if(l.method!=="skip"&&!Array.isArray(l.args)?s=h.visible=!1:s=i("visible"),s){i("method"),i("args");var p=i("label","step-"+h._index);i("value",p),i("execute")}}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":733,"./constants":734}],736:[function(e,d,S){var r=e("d3"),a=e("../../plots/plots"),u=e("../color"),c=e("../drawing"),t=e("../../lib"),f=t.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../plot_api/plot_template").arrayEditor,l=e("./constants"),h=e("../../constants/alignment"),i=h.LINE_SPACING,s=h.FROM_TL,p=h.FROM_BR;d.exports=function(Y){var z=Y._fullLayout,B=m(z,Y),H=z._infolayer.selectAll("g."+l.containerClassName).data(B.length>0?[0]:[]);H.enter().append("g").classed(l.containerClassName,!0).style("cursor","ew-resize");function V(ne){ne._commandObserver&&(ne._commandObserver.remove(),delete ne._commandObserver),a.autoMargin(Y,v(ne))}if(H.exit().each(function(){r.select(this).selectAll("g."+l.groupClassName).each(V)}).remove(),B.length!==0){var Z=H.selectAll("g."+l.groupClassName).data(B,b);Z.enter().append("g").classed(l.groupClassName,!0),Z.exit().each(V).remove();for(var q=0;q<B.length;q++){var J=B[q];y(Y,J)}Z.each(function(ne){var ve=r.select(this);k(ne),a.manageCommandObserver(Y,ne,ne._visibleSteps,function($){var j=ve.data()[0];j.active!==$.index&&(j._dragging||L(Y,ve,j,$.index,!1,!0))}),x(Y,r.select(this),ne)})}};function v(U){return l.autoMarginIdRoot+U._index}function m(U,Y){for(var z=U[l.name],B=[],H=0;H<z.length;H++){var V=z[H];!V.visible||(V._gd=Y,B.push(V))}return B}function b(U){return U._index}function y(U,Y){var z=c.tester.selectAll("g."+l.labelGroupClass).data(Y._visibleSteps);z.enter().append("g").classed(l.labelGroupClass,!0);var B=0,H=0;z.each(function(ie){var te=r.select(this),re=T(te,{step:ie},Y),ce=re.node();if(ce){var pe=c.bBox(ce);H=Math.max(H,pe.height),B=Math.max(B,pe.width)}}),z.remove();var V=Y._dims={};V.inputAreaWidth=Math.max(l.railWidth,l.gripHeight);var Z=U._fullLayout._size;V.lx=Z.l+Z.w*Y.x,V.ly=Z.t+Z.h*(1-Y.y),Y.lenmode==="fraction"?V.outerLength=Math.round(Z.w*Y.len):V.outerLength=Y.len,V.inputAreaStart=0,V.inputAreaLength=Math.round(V.outerLength-Y.pad.l-Y.pad.r);var q=V.inputAreaLength-2*l.stepInset,J=q/(Y._stepCount-1),ne=B+l.labelPadding;if(V.labelStride=Math.max(1,Math.ceil(ne/J)),V.labelHeight=H,V.currentValueMaxWidth=0,V.currentValueHeight=0,V.currentValueTotalHeight=0,V.currentValueMaxLines=1,Y.currentvalue.visible){var ve=c.tester.append("g");z.each(function(ie){var te=w(ve,Y,ie.label),re=te.node()&&c.bBox(te.node())||{width:0,height:0},ce=n.lineCount(te);V.currentValueMaxWidth=Math.max(V.currentValueMaxWidth,Math.ceil(re.width)),V.currentValueHeight=Math.max(V.currentValueHeight,Math.ceil(re.height)),V.currentValueMaxLines=Math.max(V.currentValueMaxLines,ce)}),V.currentValueTotalHeight=V.currentValueHeight+Y.currentvalue.offset,ve.remove()}V.height=V.currentValueTotalHeight+l.tickOffset+Y.ticklen+l.labelOffset+V.labelHeight+Y.pad.t+Y.pad.b;var $="left";t.isRightAnchor(Y)&&(V.lx-=V.outerLength,$="right"),t.isCenterAnchor(Y)&&(V.lx-=V.outerLength/2,$="center");var j="top";t.isBottomAnchor(Y)&&(V.ly-=V.height,j="bottom"),t.isMiddleAnchor(Y)&&(V.ly-=V.height/2,j="middle"),V.outerLength=Math.ceil(V.outerLength),V.height=Math.ceil(V.height),V.lx=Math.round(V.lx),V.ly=Math.round(V.ly);var ae={y:Y.y,b:V.height*p[j],t:V.height*s[j]};Y.lenmode==="fraction"?(ae.l=0,ae.xl=Y.x-Y.len*s[$],ae.r=0,ae.xr=Y.x+Y.len*p[$]):(ae.x=Y.x,ae.l=V.outerLength*s[$],ae.r=V.outerLength*p[$]),a.autoMargin(U,v(Y),ae)}function x(U,Y,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),Y.call(w,z).call(G,z).call(M,z).call(C,z).call(N,U,z).call(g,U,z);var B=z._dims;c.setTranslate(Y,B.lx+z.pad.l,B.ly+z.pad.t),Y.call(E,z,!1),Y.call(w,z)}function w(U,Y,z){if(!!Y.currentvalue.visible){var B=Y._dims,H,V;switch(Y.currentvalue.xanchor){case"right":H=B.inputAreaLength-l.currentValueInset-B.currentValueMaxWidth,V="left";break;case"center":H=B.inputAreaLength*.5,V="middle";break;default:H=l.currentValueInset,V="left"}var Z=t.ensureSingle(U,"text",l.labelClass,function(j){j.attr({"text-anchor":V,"data-notex":1})}),q=Y.currentvalue.prefix?Y.currentvalue.prefix:"";if(typeof z=="string")q+=z;else{var J=Y.steps[Y.active].label,ne=Y._gd._fullLayout._meta;ne&&(J=t.templateString(J,ne)),q+=J}Y.currentvalue.suffix&&(q+=Y.currentvalue.suffix),Z.call(c.font,Y.currentvalue.font).text(q).call(n.convertToTspans,Y._gd);var ve=n.lineCount(Z),$=(B.currentValueMaxLines+1-ve)*Y.currentvalue.font.size*i;return n.positionText(Z,H,$),Z}}function g(U,Y,z){var B=t.ensureSingle(U,"rect",l.gripRectClass,function(H){H.call(I,Y,U,z).style("pointer-events","all")});B.attr({width:l.gripWidth,height:l.gripHeight,rx:l.gripRadius,ry:l.gripRadius}).call(u.stroke,z.bordercolor).call(u.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function T(U,Y,z){var B=t.ensureSingle(U,"text",l.labelClass,function(Z){Z.attr({"text-anchor":"middle","data-notex":1})}),H=Y.step.label,V=z._gd._fullLayout._meta;return V&&(H=t.templateString(H,V)),B.call(c.font,z.font).text(H).call(n.convertToTspans,z._gd),B}function M(U,Y){var z=t.ensureSingle(U,"g",l.labelsClass),B=Y._dims,H=z.selectAll("g."+l.labelGroupClass).data(B.labelSteps);H.enter().append("g").classed(l.labelGroupClass,!0),H.exit().remove(),H.each(function(V){var Z=r.select(this);Z.call(T,V,Y),c.setTranslate(Z,R(Y,V.fraction),l.tickOffset+Y.ticklen+Y.font.size*i+l.labelOffset+B.currentValueTotalHeight)})}function P(U,Y,z,B,H){var V=Math.round(B*(z._stepCount-1)),Z=z._visibleSteps[V]._index;Z!==z.active&&L(U,Y,z,Z,!0,H)}function L(U,Y,z,B,H,V){var Z=z.active;z.active=B,o(U.layout,l.name,z).applyUpdate("active",B);var q=z.steps[z.active];Y.call(E,z,V),Y.call(w,z),U.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:H,previousActive:Z}),q&&q.method&&H&&(Y._nextMethod?(Y._nextMethod.step=q,Y._nextMethod.doCallback=H,Y._nextMethod.doTransition=V):(Y._nextMethod={step:q,doCallback:H,doTransition:V},Y._nextMethodRaf=window.requestAnimationFrame(function(){var J=Y._nextMethod.step;!J.method||(J.execute&&a.executeAPICommand(U,J.method,J.args),Y._nextMethod=null,Y._nextMethodRaf=null)})))}function I(U,Y,z){var B=z.node(),H=r.select(Y);function V(){return z.data()[0]}U.on("mousedown",function(){var Z=V();Y.emit("plotly_sliderstart",{slider:Z});var q=z.select("."+l.gripRectClass);r.event.stopPropagation(),r.event.preventDefault(),q.call(u.fill,Z.activebgcolor);var J=O(Z,r.mouse(B)[0]);P(Y,z,Z,J,!0),Z._dragging=!0,H.on("mousemove",function(){var ne=V(),ve=O(ne,r.mouse(B)[0]);P(Y,z,ne,ve,!1)}),H.on("mouseup",function(){var ne=V();ne._dragging=!1,q.call(u.fill,ne.bgcolor),H.on("mouseup",null),H.on("mousemove",null),Y.emit("plotly_sliderend",{slider:ne,step:ne.steps[ne.active]})})})}function C(U,Y){var z=U.selectAll("rect."+l.tickRectClass).data(Y._visibleSteps),B=Y._dims;z.enter().append("rect").classed(l.tickRectClass,!0),z.exit().remove(),z.attr({width:Y.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(H,V){var Z=V%B.labelStride===0,q=r.select(this);q.attr({height:Z?Y.ticklen:Y.minorticklen}).call(u.fill,Y.tickcolor),c.setTranslate(q,R(Y,V/(Y._stepCount-1))-.5*Y.tickwidth,(Z?l.tickOffset:l.minorTickOffset)+B.currentValueTotalHeight)})}function k(U){var Y=U._dims;Y.labelSteps=[];for(var z=U._stepCount,B=0;B<z;B+=Y.labelStride)Y.labelSteps.push({fraction:B/(z-1),step:U._visibleSteps[B]})}function E(U,Y,z){for(var B=U.select("rect."+l.gripRectClass),H=0,V=0;V<Y._stepCount;V++)if(Y._visibleSteps[V]._index===Y.active){H=V;break}var Z=R(Y,H/(Y._stepCount-1));if(!Y._invokingCommand){var q=B;z&&Y.transition.duration>0&&(q=q.transition().duration(Y.transition.duration).ease(Y.transition.easing)),q.attr("transform",f(Z-l.gripWidth*.5,Y._dims.currentValueTotalHeight))}}function R(U,Y){var z=U._dims;return z.inputAreaStart+l.stepInset+(z.inputAreaLength-2*l.stepInset)*Math.min(1,Math.max(0,Y))}function O(U,Y){var z=U._dims;return Math.min(1,Math.max(0,(Y-l.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*l.stepInset-2*z.inputAreaStart)))}function N(U,Y,z){var B=z._dims,H=t.ensureSingle(U,"rect",l.railTouchRectClass,function(V){V.call(I,Y,U,z).style("pointer-events","all")});H.attr({width:B.inputAreaLength,height:Math.max(B.inputAreaWidth,l.tickOffset+z.ticklen+B.labelHeight)}).call(u.fill,z.bgcolor).attr("opacity",0),c.setTranslate(H,0,B.currentValueTotalHeight)}function G(U,Y){var z=Y._dims,B=z.inputAreaLength-l.railInset*2,H=t.ensureSingle(U,"rect",l.railRectClass);H.attr({width:B,height:l.railWidth,rx:l.railRadius,ry:l.railRadius,"shape-rendering":"crispEdges"}).call(u.stroke,Y.bordercolor).call(u.fill,Y.bgcolor).style("stroke-width",Y.borderwidth+"px"),c.setTranslate(H,l.railInset,(z.inputAreaWidth-l.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":734,d3:169}],737:[function(e,d,S){var r=e("./constants");d.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":733,"./constants":734,"./defaults":735,"./draw":736}],738:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,n=e("../drawing"),o=e("../color"),l=e("../../lib/svg_text_utils"),h=e("../../constants/interactions"),i=e("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;function p(v,m,b){var y=b.propContainer,x=b.propName,w=b.placeholder,g=b.traceIndex,T=b.avoid||{},M=b.attributes,P=b.transform,L=b.containerGroup,I=v._fullLayout,C=1,k=!1,E=y.title,R=(E&&E.text?E.text:"").trim(),O=E&&E.font?E.font:{},N=O.family,G=O.size,U=O.color,Y;x==="title.text"?Y="titleText":x.indexOf("axis")!==-1?Y="axisTitleText":x.indexOf("colorbar"!==-1)&&(Y="colorbarTitleText");var z=v._context.edits[Y];R===""?C=0:R.replace(s," % ")===w.replace(s," % ")&&(C=.2,k=!0,z||(R="")),b._meta?R=t.templateString(R,b._meta):I._meta&&(R=t.templateString(R,I._meta));var B=R||z;L||(L=t.ensureSingle(I._infolayer,"g","g-"+m));var H=L.selectAll("text").data(B?[0]:[]);if(H.enter().append("text"),H.text(R).attr("class",m),H.exit().remove(),!B)return L;function V(ne){t.syncOrAsync([Z,q],ne)}function Z(ne){var ve;return P?(ve="",P.rotate&&(ve+="rotate("+[P.rotate,M.x,M.y]+")"),P.offset&&(ve+=f(0,P.offset))):ve=null,ne.attr("transform",ve),ne.style({"font-family":N,"font-size":r.round(G,2)+"px",fill:o.rgb(U),opacity:C*o.opacity(U),"font-weight":u.fontWeight}).attr(M).call(l.convertToTspans,v),u.previousPromises(v)}function q(ne){var ve=r.select(ne.node().parentNode);if(T&&T.selection&&T.side&&R){ve.attr("transform",null);var $=i[T.side],j=T.side==="left"||T.side==="top"?-1:1,ae=a(T.pad)?T.pad:2,ie=n.bBox(ve.node()),te={left:0,top:0,right:I.width,bottom:I.height},re=T.maxShift||j*(te[T.side]-ie[T.side]),ce=0;if(re<0)ce=re;else{var pe=T.offsetLeft||0,fe=T.offsetTop||0;ie.left-=pe,ie.right-=pe,ie.top-=fe,ie.bottom-=fe,T.selection.each(function(){var de=n.bBox(this);t.bBoxIntersect(ie,de,ae)&&(ce=Math.max(ce,j*(de[T.side]-ie[$])+ae))}),ce=Math.min(re,ce)}if(ce>0||re<0){var se={left:[-ce,0],right:[ce,0],top:[0,-ce],bottom:[0,ce]}[T.side];ve.attr("transform",f(se[0],se[1]))}}}H.call(V);function J(){C=0,k=!0,H.text(w).on("mouseover.opacity",function(){r.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(R?H.on(".opacity",null):J(),H.call(l.makeEditable,{gd:v}).on("edit",function(ne){g!==void 0?c.call("_guiRestyle",v,x,ne,g):c.call("_guiRelayout",v,x,ne)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(V)}).on("input",function(ne){this.text(ne||" ").call(l.positionText,M.x,M.y)})),H.classed("js-placeholder",k),L}d.exports={draw:p}},{"../../constants/alignment":745,"../../constants/interactions":752,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,d3:169,"fast-isnumeric":241}],739:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("../color/attributes"),u=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),f=e("../../plot_api/plot_template").templatedArray,n=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});d.exports=c(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:u(t({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"../color/attributes":642}],740:[function(e,d,S){d.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],741:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/array_container_defaults"),u=e("./attributes"),c=e("./constants"),t=c.name,f=u.buttons;d.exports=function(h,i){var s={name:t,handleItemDefaults:n};a(h,i,s)};function n(l,h,i){function s(m,b){return r.coerce(l,h,u,m,b)}var p=a(l,h,{name:"buttons",handleItemDefaults:o}),v=s("visible",p.length>0);!v||(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),r.noneOrAll(l,h,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),r.coerceFont(s,"font",i.font),s("bgcolor",i.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function o(l,h){function i(p,v){return r.coerce(l,h,f,p,v)}var s=i("visible",l.method==="skip"||Array.isArray(l.args));s&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":739,"./constants":740}],742:[function(e,d,S){var r=e("d3"),a=e("../../plots/plots"),u=e("../color"),c=e("../drawing"),t=e("../../lib"),f=e("../../lib/svg_text_utils"),n=e("../../plot_api/plot_template").arrayEditor,o=e("../../constants/alignment").LINE_SPACING,l=e("./constants"),h=e("./scrollbox");d.exports=function(O){var N=O._fullLayout,G=t.filterVisible(N[l.name]);function U(J){a.autoMargin(O,C(J))}var Y=N._menulayer.selectAll("g."+l.containerClassName).data(G.length>0?[0]:[]);if(Y.enter().append("g").classed(l.containerClassName,!0).style("cursor","pointer"),Y.exit().each(function(){r.select(this).selectAll("g."+l.headerGroupClassName).each(U)}).remove(),G.length!==0){var z=Y.selectAll("g."+l.headerGroupClassName).data(G,i);z.enter().append("g").classed(l.headerGroupClassName,!0);for(var B=t.ensureSingle(Y,"g",l.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),H=0;H<G.length;H++){var V=G[H];I(O,V)}var Z="updatemenus"+N._uid,q=new h(O,B,Z);z.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(E)),z.exit().each(function(J){B.call(E),U(J)}).remove(),z.each(function(J){var ne=r.select(this),ve=J.type==="dropdown"?B:null;a.manageCommandObserver(O,J,J.buttons,function($){v(O,J,J.buttons[$.index],ne,ve,q,$.index,!0)}),J.type==="dropdown"?(m(O,ne,B,q,J),p(B,J)&&b(O,ne,B,q,J)):b(O,ne,null,null,J)})}};function i(R){return R._index}function s(R){return+R.attr(l.menuIndexAttrName)==-1}function p(R,O){return+R.attr(l.menuIndexAttrName)===O._index}function v(R,O,N,G,U,Y,z,B){O.active=z,n(R.layout,l.name,O).applyUpdate("active",z),O.type==="buttons"?b(R,G,null,null,O):O.type==="dropdown"&&(U.attr(l.menuIndexAttrName,"-1"),m(R,G,U,Y,O),B||b(R,G,U,Y,O))}function m(R,O,N,G,U){var Y=t.ensureSingle(O,"g",l.headerClassName,function(J){J.style("pointer-events","all")}),z=U._dims,B=U.active,H=U.buttons[B]||l.blankHeaderOpts,V={y:U.pad.t,yPad:0,x:U.pad.l,xPad:0,index:0},Z={width:z.headerWidth,height:z.headerHeight};Y.call(w,U,H,R).call(k,U,V,Z);var q=t.ensureSingle(O,"text",l.headerArrowClassName,function(J){J.attr("text-anchor","end").call(c.font,U.font).text(l.arrowSymbol[U.direction])});q.attr({x:z.headerWidth-l.arrowOffsetX+U.pad.l,y:z.headerHeight/2+l.textOffsetY+U.pad.t}),Y.on("click",function(){N.call(E,String(p(N,U)?-1:U._index)),b(R,O,N,G,U)}),Y.on("mouseover",function(){Y.call(P)}),Y.on("mouseout",function(){Y.call(L,U)}),c.setTranslate(O,z.lx,z.ly)}function b(R,O,N,G,U){N||(N=O,N.attr("pointer-events","all"));var Y=!s(N)||U.type==="buttons"?U.buttons:[],z=U.type==="dropdown"?l.dropdownButtonClassName:l.buttonClassName,B=N.selectAll("g."+z).data(t.filterVisible(Y)),H=B.enter().append("g").classed(z,!0),V=B.exit();U.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),V.transition().attr("opacity","0").remove()):V.remove();var Z=0,q=0,J=U._dims,ne=["up","down"].indexOf(U.direction)!==-1;U.type==="dropdown"&&(ne?q=J.headerHeight+l.gapButtonHeader:Z=J.headerWidth+l.gapButtonHeader),U.type==="dropdown"&&U.direction==="up"&&(q=-l.gapButtonHeader+l.gapButton-J.openHeight),U.type==="dropdown"&&U.direction==="left"&&(Z=-l.gapButtonHeader+l.gapButton-J.openWidth);var ve={x:J.lx+Z+U.pad.l,y:J.ly+q+U.pad.t,yPad:l.gapButton,xPad:l.gapButton,index:0},$={l:ve.x+U.borderwidth,t:ve.y+U.borderwidth};B.each(function(j,ae){var ie=r.select(this);ie.call(w,U,j,R).call(k,U,ve),ie.on("click",function(){r.event.defaultPrevented||(j.execute&&(j.args2&&U.active===ae?(v(R,U,j,O,N,G,-1),a.executeAPICommand(R,j.method,j.args2)):(v(R,U,j,O,N,G,ae),a.executeAPICommand(R,j.method,j.args))),R.emit("plotly_buttonclicked",{menu:U,button:j,active:U.active}))}),ie.on("mouseover",function(){ie.call(P)}),ie.on("mouseout",function(){ie.call(L,U),B.call(M,U)})}),B.call(M,U),ne?($.w=Math.max(J.openWidth,J.headerWidth),$.h=ve.y-$.t):($.w=ve.x-$.l,$.h=Math.max(J.openHeight,J.headerHeight)),$.direction=U.direction,G&&(B.size()?y(R,O,N,G,U,$):x(G))}function y(R,O,N,G,U,Y){var z=U.direction,B=z==="up"||z==="down",H=U._dims,V=U.active,Z,q,J;if(B)for(q=0,J=0;J<V;J++)q+=H.heights[J]+l.gapButton;else for(Z=0,J=0;J<V;J++)Z+=H.widths[J]+l.gapButton;G.enable(Y,Z,q),G.hbar&&G.hbar.attr("opacity","0").transition().attr("opacity","1"),G.vbar&&G.vbar.attr("opacity","0").transition().attr("opacity","1")}function x(R){var O=!!R.hbar,N=!!R.vbar;O&&R.hbar.transition().attr("opacity","0").each("end",function(){O=!1,N||R.disable()}),N&&R.vbar.transition().attr("opacity","0").each("end",function(){N=!1,O||R.disable()})}function w(R,O,N,G){R.call(g,O).call(T,O,N,G)}function g(R,O){var N=t.ensureSingle(R,"rect",l.itemRectClassName,function(G){G.attr({rx:l.rx,ry:l.ry,"shape-rendering":"crispEdges"})});N.call(u.stroke,O.bordercolor).call(u.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function T(R,O,N,G){var U=t.ensureSingle(R,"text",l.itemTextClassName,function(B){B.attr({"text-anchor":"start","data-notex":1})}),Y=N.label,z=G._fullLayout._meta;z&&(Y=t.templateString(Y,z)),U.call(c.font,O.font).text(Y).call(f.convertToTspans,G)}function M(R,O){var N=O.active;R.each(function(G,U){var Y=r.select(this);U===N&&O.showactive&&Y.select("rect."+l.itemRectClassName).call(u.fill,l.activeColor)})}function P(R){R.select("rect."+l.itemRectClassName).call(u.fill,l.hoverColor)}function L(R,O){R.select("rect."+l.itemRectClassName).call(u.fill,O.bgcolor)}function I(R,O){var N=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},G=c.tester.selectAll("g."+l.dropdownButtonClassName).data(t.filterVisible(O.buttons));G.enter().append("g").classed(l.dropdownButtonClassName,!0);var U=["up","down"].indexOf(O.direction)!==-1;G.each(function(Z,q){var J=r.select(this);J.call(w,O,Z,R);var ne=J.select("."+l.itemTextClassName),ve=ne.node()&&c.bBox(ne.node()).width,$=Math.max(ve+l.textPadX,l.minWidth),j=O.font.size*o,ae=f.lineCount(ne),ie=Math.max(j*ae,l.minHeight)+l.textOffsetY;ie=Math.ceil(ie),$=Math.ceil($),N.widths[q]=$,N.heights[q]=ie,N.height1=Math.max(N.height1,ie),N.width1=Math.max(N.width1,$),U?(N.totalWidth=Math.max(N.totalWidth,$),N.openWidth=N.totalWidth,N.totalHeight+=ie+l.gapButton,N.openHeight+=ie+l.gapButton):(N.totalWidth+=$+l.gapButton,N.openWidth+=$+l.gapButton,N.totalHeight=Math.max(N.totalHeight,ie),N.openHeight=N.totalHeight)}),U?N.totalHeight-=l.gapButton:N.totalWidth-=l.gapButton,N.headerWidth=N.width1+l.arrowPadX,N.headerHeight=N.height1,O.type==="dropdown"&&(U?(N.width1+=l.arrowPadX,N.totalHeight=N.height1):N.totalWidth=N.width1,N.totalWidth+=l.arrowPadX),G.remove();var Y=N.totalWidth+O.pad.l+O.pad.r,z=N.totalHeight+O.pad.t+O.pad.b,B=R._fullLayout._size;N.lx=B.l+B.w*O.x,N.ly=B.t+B.h*(1-O.y);var H="left";t.isRightAnchor(O)&&(N.lx-=Y,H="right"),t.isCenterAnchor(O)&&(N.lx-=Y/2,H="center");var V="top";t.isBottomAnchor(O)&&(N.ly-=z,V="bottom"),t.isMiddleAnchor(O)&&(N.ly-=z/2,V="middle"),N.totalWidth=Math.ceil(N.totalWidth),N.totalHeight=Math.ceil(N.totalHeight),N.lx=Math.round(N.lx),N.ly=Math.round(N.ly),a.autoMargin(R,C(O),{x:O.x,y:O.y,l:Y*({right:1,center:.5}[H]||0),r:Y*({left:1,center:.5}[H]||0),b:z*({top:1,middle:.5}[V]||0),t:z*({bottom:1,middle:.5}[V]||0)})}function C(R){return l.autoMarginIdRoot+R._index}function k(R,O,N,G){G=G||{};var U=R.select("."+l.itemRectClassName),Y=R.select("."+l.itemTextClassName),z=O.borderwidth,B=N.index,H=O._dims;c.setTranslate(R,z+N.x,z+N.y);var V=["up","down"].indexOf(O.direction)!==-1,Z=G.height||(V?H.heights[B]:H.height1);U.attr({x:0,y:0,width:G.width||(V?H.width1:H.widths[B]),height:Z});var q=O.font.size*o,J=f.lineCount(Y),ne=(J-1)*q/2;f.positionText(Y,l.textOffsetX,Z/2-ne+l.textOffsetY),V?N.y+=H.heights[B]+N.yPad:N.x+=H.widths[B]+N.xPad,N.index++}function E(R,O){R.attr(l.menuIndexAttrName,O||"-1").selectAll("g."+l.dropdownButtonClassName).remove()}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":740,"./scrollbox":744,d3:169}],743:[function(e,d,S){arguments[4][737][0].apply(S,arguments)},{"./attributes":739,"./constants":740,"./defaults":741,"./draw":742,dup:737}],744:[function(e,d,S){d.exports=t;var r=e("d3"),a=e("../color"),u=e("../drawing"),c=e("../../lib");function t(f,n,o){this.gd=f,this.container=n,this.id=o,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(n,o,l){var h=this.gd._fullLayout,i=h.width,s=h.height;this.position=n;var p=this.position.l,v=this.position.w,m=this.position.t,b=this.position.h,y=this.position.direction,x=y==="down",w=y==="left",g=y==="right",T=y==="up",M=v,P=b,L,I,C,k;!x&&!w&&!g&&!T&&(this.position.direction="down",x=!0);var E=x||T;E?(L=p,I=L+M,x?(C=m,k=Math.min(C+P,s),P=k-C):(k=m+P,C=Math.max(k-P,0),P=k-C)):(C=m,k=C+P,w?(I=p+M,L=Math.max(I-M,0),M=I-L):(L=p,I=Math.min(L+M,i),M=I-L)),this._box={l:L,t:C,w:M,h:P};var R=v>M,O=t.barLength+2*t.barPad,N=t.barWidth+2*t.barPad,G=p,U=m+b;U+N>s&&(U=s-N);var Y=this.container.selectAll("rect.scrollbar-horizontal").data(R?[0]:[]);Y.exit().on(".drag",null).remove(),Y.enter().append("rect").classed("scrollbar-horizontal",!0).call(a.fill,t.barColor),R?(this.hbar=Y.attr({rx:t.barRadius,ry:t.barRadius,x:G,y:U,width:O,height:N}),this._hbarXMin=G+O/2,this._hbarTranslateMax=M-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=b>P,B=t.barWidth+2*t.barPad,H=t.barLength+2*t.barPad,V=p+v,Z=m;V+B>i&&(V=i-B);var q=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);q.exit().on(".drag",null).remove(),q.enter().append("rect").classed("scrollbar-vertical",!0).call(a.fill,t.barColor),z?(this.vbar=q.attr({rx:t.barRadius,ry:t.barRadius,x:V,y:Z,width:B,height:H}),this._vbarYMin=Z+H/2,this._vbarTranslateMax=P-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,ne=L-.5,ve=z?I+B+.5:I+.5,$=C-.5,j=R?k+N+.5:k+.5,ae=h._topdefs.selectAll("#"+J).data(R||z?[0]:[]);if(ae.exit().remove(),ae.enter().append("clipPath").attr("id",J).append("rect"),R||z?(this._clipRect=ae.select("rect").attr({x:Math.floor(ne),y:Math.floor($),width:Math.ceil(ve)-Math.floor(ne),height:Math.ceil(j)-Math.floor($)}),this.container.call(u.setClipUrl,J,this.gd),this.bg.attr({x:p,y:m,width:v,height:b})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),R||z){var ie=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ie);var te=r.behavior.drag().on("dragstart",function(){r.event.sourceEvent.preventDefault(),r.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));R&&this.hbar.on(".drag",null).call(te),z&&this.vbar.on(".drag",null).call(te)}this.setTranslate(o,l)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var n=this.translateX,o=this.translateY;this.hbar&&(n-=r.event.dx),this.vbar&&(o-=r.event.dy),this.setTranslate(n,o)},t.prototype._onBoxWheel=function(){var n=this.translateX,o=this.translateY;this.hbar&&(n+=r.event.deltaY),this.vbar&&(o+=r.event.deltaY),this.setTranslate(n,o)},t.prototype._onBarDrag=function(){var n=this.translateX,o=this.translateY;if(this.hbar){var l=n+this._hbarXMin,h=l+this._hbarTranslateMax,i=c.constrain(r.event.x,l,h),s=(i-l)/(h-l),p=this.position.w-this._box.w;n=s*p}if(this.vbar){var v=o+this._vbarYMin,m=v+this._vbarTranslateMax,b=c.constrain(r.event.y,v,m),y=(b-v)/(m-v),x=this.position.h-this._box.h;o=y*x}this.setTranslate(n,o)},t.prototype.setTranslate=function(n,o){var l=this.position.w-this._box.w,h=this.position.h-this._box.h;if(n=c.constrain(n||0,0,l),o=c.constrain(o||0,0,h),this.translateX=n,this.translateY=o,this.container.call(u.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var i=n/l;this.hbar.call(u.setTranslate,n+i*this._hbarTranslateMax,o)}if(this.vbar){var s=o/h;this.vbar.call(u.setTranslate,n,o+s*this._vbarTranslateMax)}}},{"../../lib":778,"../color":643,"../drawing":665,d3:169}],745:[function(e,d,S){d.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],746:[function(e,d,S){d.exports={axisRefDescription:function(r,a,u){return["If set to a",r,"axis id (e.g. *"+r+"* or","*"+r+"2*), the `"+r+"` position refers to a",r,"coordinate. If set to *paper*, the `"+r+"`","position refers to the distance from the",a,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",a,"("+u+"). If set to a",r,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",a,"of the domain of that axis: e.g.,","*"+r+"2 domain* refers to the domain of the second",r," axis and a",r,"position of 0.5 refers to the","point between the",a,"and the",u,"of the domain of the","second",r,"axis."].join(" ")}}},{}],747:[function(e,d,S){d.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],748:[function(e,d,S){d.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],749:[function(e,d,S){d.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],750:[function(e,d,S){d.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],751:[function(e,d,S){d.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],752:[function(e,d,S){d.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],753:[function(e,d,S){d.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],754:[function(e,d,S){S.xmlns="http://www.w3.org/2000/xmlns/",S.svg="http://www.w3.org/2000/svg",S.xlink="http://www.w3.org/1999/xlink",S.svgAttrs={xmlns:S.svg,"xmlns:xlink":S.xlink}},{}],755:[function(e,d,S){S.version=e("./version").version,e("es6-promise").polyfill(),e("../build/plotcss"),e("./fonts/mathjax_config")();for(var r=e("./registry"),a=S.register=r.register,u=e("./plot_api"),c=Object.keys(u),t=0;t<c.length;t++){var f=c[t];f.charAt(0)!=="_"&&(S[f]=u[f]),a({moduleType:"apiMethod",name:f,fn:u[f]})}a(e("./traces/scatter")),a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar")]),a([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(a(window.PlotlyLocales),delete window.PlotlyLocales),S.Icons=e("./fonts/ploticon"),S.Plots=e("./plots/plots"),S.Fx=e("./components/fx"),S.Snapshot=e("./snapshot"),S.PlotSchema=e("./plot_api/plot_schema"),S.Queue=e("./lib/queue"),S.d3=e("d3")},{"../build/plotcss":1,"./components/annotations":634,"./components/annotations3d":639,"./components/colorbar":649,"./components/colorscale":655,"./components/errorbars":671,"./components/fx":683,"./components/grid":687,"./components/images":692,"./components/legend":700,"./components/rangeselector":711,"./components/rangeslider":718,"./components/shapes":732,"./components/sliders":737,"./components/updatemenus":743,"./fonts/mathjax_config":756,"./fonts/ploticon":757,"./lib/queue":794,"./locale-en":808,"./locale-en-us":807,"./plot_api":812,"./plot_api/plot_schema":816,"./plots/plots":891,"./registry":911,"./snapshot":916,"./traces/scatter":1199,"./version":1370,d3:169,"es6-promise":224}],756:[function(e,d,S){d.exports=function(){if(typeof MathJax<"u"){var r=(window.PlotlyConfig||{}).MathJaxConfig!=="local";r&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}}},{}],757:[function(e,d,S){d.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],758:[function(e,d,S){S.isLeftAnchor=function(a){return a.xanchor==="left"||a.xanchor==="auto"&&a.x<=1/3},S.isCenterAnchor=function(a){return a.xanchor==="center"||a.xanchor==="auto"&&a.x>1/3&&a.x<2/3},S.isRightAnchor=function(a){return a.xanchor==="right"||a.xanchor==="auto"&&a.x>=2/3},S.isTopAnchor=function(a){return a.yanchor==="top"||a.yanchor==="auto"&&a.y>=2/3},S.isMiddleAnchor=function(a){return a.yanchor==="middle"||a.yanchor==="auto"&&a.y>1/3&&a.y<2/3},S.isBottomAnchor=function(a){return a.yanchor==="bottom"||a.yanchor==="auto"&&a.y<=1/3}},{}],759:[function(e,d,S){var r=e("./mod"),a=r.mod,u=r.modHalf,c=Math.PI,t=2*c;function f(y){return y/180*c}function n(y){return y/c*180}function o(y){return Math.abs(y[1]-y[0])>t-1e-14}function l(y,x){return u(x-y,t)}function h(y,x){return Math.abs(l(y,x))}function i(y,x){if(o(x))return!0;var w,g;x[0]<x[1]?(w=x[0],g=x[1]):(w=x[1],g=x[0]),w=a(w,t),g=a(g,t),w>g&&(g+=t);var T=a(y,t),M=T+t;return T>=w&&T<=g||M>=w&&M<=g}function s(y,x,w,g){if(!i(x,g))return!1;var T,M;return w[0]<w[1]?(T=w[0],M=w[1]):(T=w[1],M=w[0]),y>=T&&y<=M}function p(y,x,w,g,T,M,P){T=T||0,M=M||0;var L=o([w,g]),I,C,k,E,R;L?(I=0,C=c,k=t):w<g?(I=w,k=g):(I=g,k=w),y<x?(E=y,R=x):(E=x,R=y);function O(Y,z){return[Y*Math.cos(z)+T,M-Y*Math.sin(z)]}var N=Math.abs(k-I)<=c?0:1;function G(Y,z,B){return"A"+[Y,Y]+" "+[0,N,B]+" "+O(Y,z)}var U;return L?E===null?U="M"+O(R,I)+G(R,C,0)+G(R,k,0)+"Z":U="M"+O(E,I)+G(E,C,0)+G(E,k,0)+"ZM"+O(R,I)+G(R,C,1)+G(R,k,1)+"Z":E===null?(U="M"+O(R,I)+G(R,k,0),P&&(U+="L0,0Z")):U="M"+O(E,I)+"L"+O(R,I)+G(R,k,0)+"L"+O(E,k)+G(E,I,1)+"Z",U}function v(y,x,w,g,T){return p(null,y,x,w,g,T,0)}function m(y,x,w,g,T){return p(null,y,x,w,g,T,1)}function b(y,x,w,g,T,M){return p(y,x,w,g,T,M,1)}d.exports={deg2rad:f,rad2deg:n,angleDelta:l,angleDist:h,isFullCircle:o,isAngleInsideSector:i,isPtInsideSector:s,pathArc:v,pathSector:m,pathAnnulus:b}},{"./mod":785}],760:[function(e,d,S){var r=Array.isArray,a=typeof ArrayBuffer>"u"||!ArrayBuffer.isView?{isView:function(){return!1}}:ArrayBuffer,u=typeof DataView>"u"?function(){}:DataView;function c(o){return a.isView(o)&&!(o instanceof u)}S.isTypedArray=c;function t(o){return r(o)||c(o)}S.isArrayOrTypedArray=t;function f(o){return!t(o[0])}S.isArray1D=f,S.ensureArray=function(o,l){return r(o)||(o=[]),o.length=l,o},S.concat=function(){var o=[],l=!0,h=0,i,s,p,v,m,b,y,x;for(p=0;p<arguments.length;p++)v=arguments[p],b=v.length,b&&(s?o.push(v):(s=v,m=b),r(v)?i=!1:(l=!1,h?i!==v.constructor&&(i=!1):i=v.constructor),h+=b);if(!h)return[];if(!o.length)return s;if(l)return s.concat.apply(s,o);if(i){for(y=new i(h),y.set(s),p=0;p<o.length;p++)v=o[p],y.set(v,m),m+=v.length;return y}for(y=new Array(h),x=0;x<s.length;x++)y[x]=s[x];for(p=0;p<o.length;p++){for(v=o[p],x=0;x<v.length;x++)y[m+x]=v[x];m+=x}return y},S.maxRowLength=function(o){return n(o,Math.max,0)},S.minRowLength=function(o){return n(o,Math.min,1/0)};function n(o,l,h){if(t(o))if(t(o[0])){for(var i=h,s=0;s<o.length;s++)i=l(i,o[s].length);return i}else return o.length;return 0}},{}],761:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,u=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;d.exports=function(t){return typeof t=="string"&&(t=t.replace(u,"")),r(t)?Number(t):a}},{"../constants/numerical":753,"fast-isnumeric":241}],762:[function(e,d,S){d.exports=function(a){var u=a._fullLayout;u._glcanvas&&u._glcanvas.size()&&u._glcanvas.each(function(c){c.regl&&c.regl.clear({color:!0,depth:!0})})}},{}],763:[function(e,d,S){d.exports=function(a){a._responsiveChartHandler&&(window.removeEventListener("resize",a._responsiveChartHandler),delete a._responsiveChartHandler)}},{}],764:[function(e,d,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("../plots/attributes"),c=e("../components/colorscale/scales"),t=e("../constants/interactions").DESELECTDIM,f=e("./nested_property"),n=e("./regex").counter,o=e("./mod").modHalf,l=e("./array").isArrayOrTypedArray;S.valObjectMeta={data_array:{coerceFunction:function(i,s,p){l(i)?s.set(i):p!==void 0&&s.set(p)}},enumerated:{coerceFunction:function(i,s,p,v){v.coerceNumber&&(i=+i),v.values.indexOf(i)===-1?s.set(p):s.set(i)},validateFunction:function(i,s){s.coerceNumber&&(i=+i);for(var p=s.values,v=0;v<p.length;v++){var m=String(p[v]);if(m.charAt(0)==="/"&&m.charAt(m.length-1)==="/"){var b=new RegExp(m.substr(1,m.length-2));if(b.test(i))return!0}else if(i===p[v])return!0}return!1}},boolean:{coerceFunction:function(i,s,p){i===!0||i===!1?s.set(i):s.set(p)}},number:{coerceFunction:function(i,s,p,v){!r(i)||v.min!==void 0&&i<v.min||v.max!==void 0&&i>v.max?s.set(p):s.set(+i)}},integer:{coerceFunction:function(i,s,p,v){i%1||!r(i)||v.min!==void 0&&i<v.min||v.max!==void 0&&i>v.max?s.set(p):s.set(+i)}},string:{coerceFunction:function(i,s,p,v){if(typeof i!="string"){var m=typeof i=="number";v.strict===!0||!m?s.set(p):s.set(String(i))}else v.noBlank&&!i?s.set(p):s.set(i)}},color:{coerceFunction:function(i,s,p){a(i).isValid()?s.set(i):s.set(p)}},colorlist:{coerceFunction:function(i,s,p){function v(m){return a(m).isValid()}!Array.isArray(i)||!i.length?s.set(p):i.every(v)?s.set(i):s.set(p)}},colorscale:{coerceFunction:function(i,s,p){s.set(c.get(i,p))}},angle:{coerceFunction:function(i,s,p){i==="auto"?s.set("auto"):r(i)?s.set(o(+i,360)):s.set(p)}},subplotid:{coerceFunction:function(i,s,p,v){var m=v.regex||n(p);if(typeof i=="string"&&m.test(i)){s.set(i);return}s.set(p)},validateFunction:function(i,s){var p=s.dflt;return i===p?!0:typeof i!="string"?!1:!!n(p).test(i)}},flaglist:{coerceFunction:function(i,s,p,v){if(typeof i!="string"){s.set(p);return}if((v.extras||[]).indexOf(i)!==-1){s.set(i);return}for(var m=i.split("+"),b=0;b<m.length;){var y=m[b];v.flags.indexOf(y)===-1||m.indexOf(y)<b?m.splice(b,1):b++}m.length?s.set(m.join("+")):s.set(p)}},any:{coerceFunction:function(i,s,p){i===void 0?s.set(p):s.set(i)}},info_array:{coerceFunction:function(i,s,p,v){function m(R,O,N){var G,U={set:function(Y){G=Y}};return N===void 0&&(N=O.dflt),S.valObjectMeta[O.valType].coerceFunction(R,U,N,O),G}var b=v.dimensions===2||v.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){s.set(p);return}var y=v.items,x=[],w=Array.isArray(y),g=w&&b&&Array.isArray(y[0]),T=b&&w&&!g,M=w&&!T?y.length:i.length,P,L,I,C,k,E;if(p=Array.isArray(p)?p:[],b)for(P=0;P<M;P++)for(x[P]=[],I=Array.isArray(i[P])?i[P]:[],T?k=y.length:w?k=y[P].length:k=I.length,L=0;L<k;L++)T?C=y[L]:w?C=y[P][L]:C=y,E=m(I[L],C,(p[P]||[])[L]),E!==void 0&&(x[P][L]=E);else for(P=0;P<M;P++)E=m(i[P],w?y[P]:y,p[P]),E!==void 0&&(x[P]=E);s.set(x)},validateFunction:function(i,s){if(!Array.isArray(i))return!1;var p=s.items,v=Array.isArray(p),m=s.dimensions===2;if(!s.freeLength&&i.length!==p.length)return!1;for(var b=0;b<i.length;b++)if(m){if(!Array.isArray(i[b])||!s.freeLength&&i[b].length!==p[b].length)return!1;for(var y=0;y<i[b].length;y++)if(!h(i[b][y],v?p[b][y]:p))return!1}else if(!h(i[b],v?p[b]:p))return!1;return!0}}},S.coerce=function(i,s,p,v,m){var b=f(p,v).get(),y=f(i,v),x=f(s,v),w=y.get(),g=s._template;if(w===void 0&&g&&(w=f(g,v).get(),g=0),m===void 0&&(m=b.dflt),b.arrayOk&&l(w))return x.set(w),w;var T=S.valObjectMeta[b.valType].coerceFunction;T(w,x,m,b);var M=x.get();return g&&M===m&&!h(w,b)&&(w=f(g,v).get(),T(w,x,m,b),M=x.get()),M},S.coerce2=function(i,s,p,v,m){var b=f(i,v),y=S.coerce(i,s,p,v,m),x=b.get();return x!=null?y:!1},S.coerceFont=function(i,s,p){var v={};return p=p||{},v.family=i(s+".family",p.family),v.size=i(s+".size",p.size),v.color=i(s+".color",p.color),v},S.coerceHoverinfo=function(i,s,p){var v=s._module.attributes,m=v.hoverinfo?v:u,b=m.hoverinfo,y;if(p._dataLength===1){var x=b.dflt==="all"?b.flags.slice():b.dflt.split("+");x.splice(x.indexOf("name"),1),y=x.join("+")}return S.coerce(i,s,m,"hoverinfo",y)},S.coerceSelectionMarkerOpacity=function(i,s){if(!!i.marker){var p=i.marker.opacity;if(p!==void 0){var v,m;!l(p)&&!i.selected&&!i.unselected&&(v=p,m=t*p),s("selected.marker.opacity",v),s("unselected.marker.opacity",m)}}};function h(i,s){var p=S.valObjectMeta[s.valType];if(s.arrayOk&&l(i))return!0;if(p.validateFunction)return p.validateFunction(i,s);var v={},m=v,b={set:function(y){m=y}};return p.coerceFunction(i,b,v,s),m!==v}S.validate=h},{"../components/colorscale/scales":658,"../constants/interactions":752,"../plots/attributes":824,"./array":760,"./mod":785,"./nested_property":786,"./regex":795,"fast-isnumeric":241,tinycolor2:576}],765:[function(e,d,S){var r=e("d3-time-format").timeFormat,a=e("fast-isnumeric"),u=e("./loggers"),c=e("./mod").mod,t=e("../constants/numerical"),f=t.BADNUM,n=t.ONEDAY,o=t.ONEHOUR,l=t.ONEMIN,h=t.ONESEC,i=t.EPOCHJD,s=e("../registry"),p=e("d3-time-format").utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=new Date().getFullYear()-70;function y(N){return N&&s.componentsRegistry.calendars&&typeof N=="string"&&N!=="gregorian"}S.dateTick0=function(N,G){var U=x(N,!!G);if(G<2)return U;var Y=S.dateTime2ms(U,N);return Y+=n*(G-1),S.ms2DateTime(Y,0,N)};function x(N,G){return y(N)?G?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:s.getComponentMethod("calendars","CANONICAL_TICK")[N]:G?"2000-01-02":"2000-01-01"}S.dfltRange=function(N){return y(N)?s.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]},S.isJSDate=function(N){return typeof N=="object"&&N!==null&&typeof N.getTime=="function"};var w,g;S.dateTime2ms=function(N,G){if(S.isJSDate(N)){var U=N.getTimezoneOffset()*l,Y=(N.getUTCMinutes()-N.getMinutes())*l+(N.getUTCSeconds()-N.getSeconds())*h+(N.getUTCMilliseconds()-N.getMilliseconds());if(Y){var z=3*l;U=U-z/2+c(Y-U+z/2,z)}return N=Number(N)-U,N>=w&&N<=g?N:f}if(typeof N!="string"&&typeof N!="number")return f;N=String(N);var B=y(G),H=N.charAt(0);B&&(H==="G"||H==="g")&&(N=N.substr(1),G="");var V=B&&G.substr(0,7)==="chinese",Z=N.match(V?m:v);if(!Z)return f;var q=Z[1],J=Z[3]||"1",ne=Number(Z[5]||1),ve=Number(Z[7]||0),$=Number(Z[9]||0),j=Number(Z[11]||0);if(B){if(q.length===2)return f;q=Number(q);var ae;try{var ie=s.getComponentMethod("calendars","getCal")(G);if(V){var te=J.charAt(J.length-1)==="i";J=parseInt(J,10),ae=ie.newDate(q,ie.toMonthIndex(q,J,te),ne)}else ae=ie.newDate(q,Number(J),ne)}catch{return f}return ae?(ae.toJD()-i)*n+ve*o+$*l+j*h:f}q.length===2?q=(Number(q)+2e3-b)%100+b:q=Number(q),J-=1;var re=new Date(Date.UTC(2e3,J,ne,ve,$));return re.setUTCFullYear(q),re.getUTCMonth()!==J||re.getUTCDate()!==ne?f:re.getTime()+j*h},w=S.MIN_MS=S.dateTime2ms("-9999"),g=S.MAX_MS=S.dateTime2ms("9999-12-31 23:59:59.9999"),S.isDateTime=function(N,G){return S.dateTime2ms(N,G)!==f};function T(N,G){return String(N+Math.pow(10,G)).substr(1)}var M=90*n,P=3*o,L=5*l;S.ms2DateTime=function(N,G,U){if(typeof N!="number"||!(N>=w&&N<=g))return f;G||(G=0);var Y=Math.floor(c(N+.05,1)*10),z=Math.round(N-Y/10),B,H,V,Z,q,J;if(y(U)){var ne=Math.floor(z/n)+i,ve=Math.floor(c(N,n));try{B=s.getComponentMethod("calendars","getCal")(U).fromJD(ne).formatDate("yyyy-mm-dd")}catch{B=p("G%Y-%m-%d")(new Date(z))}if(B.charAt(0)==="-")for(;B.length<11;)B="-0"+B.substr(1);else for(;B.length<10;)B="0"+B;H=G<M?Math.floor(ve/o):0,V=G<M?Math.floor(ve%o/l):0,Z=G<P?Math.floor(ve%l/h):0,q=G<L?ve%h*10+Y:0}else J=new Date(z),B=p("%Y-%m-%d")(J),H=G<M?J.getUTCHours():0,V=G<M?J.getUTCMinutes():0,Z=G<P?J.getUTCSeconds():0,q=G<L?J.getUTCMilliseconds()*10+Y:0;return I(B,H,V,Z,q)},S.ms2DateTimeLocal=function(N){if(!(N>=w+n&&N<=g-n))return f;var G=Math.floor(c(N+.05,1)*10),U=new Date(Math.round(N-G/10)),Y=r("%Y-%m-%d")(U),z=U.getHours(),B=U.getMinutes(),H=U.getSeconds(),V=U.getUTCMilliseconds()*10+G;return I(Y,z,B,H,V)};function I(N,G,U,Y,z){if((G||U||Y||z)&&(N+=" "+T(G,2)+":"+T(U,2),(Y||z)&&(N+=":"+T(Y,2),z))){for(var B=4;z%10===0;)B-=1,z/=10;N+="."+T(z,B)}return N}S.cleanDate=function(N,G,U){if(N===f)return G;if(S.isJSDate(N)||typeof N=="number"&&isFinite(N)){if(y(U))return u.error("JS Dates and milliseconds are incompatible with world calendars",N),G;if(N=S.ms2DateTimeLocal(+N),!N&&G!==void 0)return G}else if(!S.isDateTime(N,U))return u.error("unrecognized date",N),G;return N};var C=/%\d?f/g;function k(N,G,U,Y){N=N.replace(C,function(B){var H=Math.min(+B.charAt(1)||6,6),V=(G/1e3%1+2).toFixed(H).substr(2).replace(/0+$/,"")||"0";return V});var z=new Date(Math.floor(G+.05));if(y(Y))try{N=s.getComponentMethod("calendars","worldCalFmt")(N,G,Y)}catch{return"Invalid"}return U(N)(z)}var E=[59,59.9,59.99,59.999,59.9999];function R(N,G){var U=c(N+.05,n),Y=T(Math.floor(U/o),2)+":"+T(c(Math.floor(U/l),60),2);if(G!=="M"){a(G)||(G=0);var z=Math.min(c(N/h,60),E[G]),B=(100+z).toFixed(G).substr(1);G>0&&(B=B.replace(/0+$/,"").replace(/[\.]$/,"")),Y+=":"+B}return Y}S.formatDate=function(N,G,U,Y,z,B){if(z=y(z)&&z,!G)if(U==="y")G=B.year;else if(U==="m")G=B.month;else if(U==="d")G=B.dayMonth+`
`+B.year;else return R(N,U)+`
`+k(B.dayMonthYear,N,Y,z);return k(G,N,Y,z)};var O=3*n;S.incrementMonth=function(N,G,U){U=y(U)&&U;var Y=c(N,n);if(N=Math.round(N-Y),U)try{var z=Math.round(N/n)+i,B=s.getComponentMethod("calendars","getCal")(U),H=B.fromJD(z);return G%12?B.add(H,G,"m"):B.add(H,G/12,"y"),(H.toJD()-i)*n+Y}catch{u.error("invalid ms "+N+" in calendar "+U)}var V=new Date(N+O);return V.setUTCMonth(V.getUTCMonth()+G)+Y-O},S.findExactDates=function(N,G){for(var U=0,Y=0,z=0,B=0,H,V,Z=y(G)&&s.getComponentMethod("calendars","getCal")(G),q=0;q<N.length;q++){if(V=N[q],!a(V)){B++;continue}if(!(V%n))if(Z)try{H=Z.fromJD(V/n+i),H.day()===1?H.month()===1?U++:Y++:z++}catch{}else H=new Date(V),H.getUTCDate()===1?H.getUTCMonth()===0?U++:Y++:z++}Y+=U,z+=Y;var J=N.length-B;return{exactYears:U/J,exactMonths:Y/J,exactDays:z/J}}},{"../constants/numerical":753,"../registry":911,"./loggers":782,"./mod":785,"d3-time-format":166,"fast-isnumeric":241}],766:[function(e,d,S){var r=e("d3"),a=e("./loggers"),u=e("./matrix"),c=e("gl-mat4");function t(b){var y;if(typeof b=="string"){if(y=document.getElementById(b),y===null)throw new Error("No DOM element with id '"+b+"' exists on the page.");return y}else if(b==null)throw new Error("DOM element provided is null or undefined");return b}function f(b){var y=r.select(b);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function n(b){var y=b&&b.parentNode;y&&y.removeChild(b)}function o(b,y){l("global",b,y)}function l(b,y,x){var w="plotly.js-style-"+b,g=document.getElementById(w);g||(g=document.createElement("style"),g.setAttribute("id",w),g.appendChild(document.createTextNode("")),document.head.appendChild(g));var T=g.sheet;T.insertRule?T.insertRule(y+"{"+x+"}",0):T.addRule?T.addRule(y,x,0):a.warn("addStyleRule failed")}function h(b){var y="plotly.js-style-"+b,x=document.getElementById(y);x&&n(x)}function i(b){var y=p(b),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(w){var g=s(w);if(g){var T=u.convertCssMatrix(g);x=c.multiply(x,x,T)}}),x}function s(b){var y=window.getComputedStyle(b,null),x=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return x==="none"?null:x.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(w){return+w})}function p(b){for(var y=[];v(b);)y.push(b),b=b.parentNode;return y}function v(b){return b&&(b instanceof Element||b instanceof HTMLElement)}function m(b,y){return b&&y&&b.x===y.x&&b.y===y.y&&b.top===y.top&&b.left===y.left&&b.right===y.right&&b.bottom===y.bottom}d.exports={getGraphDiv:t,isPlotDiv:f,removeElement:n,addStyleRule:o,addRelatedStyleRule:l,deleteRelatedStyleRule:h,getFullTransformMatrix:i,getElementTransformMatrix:s,getElementAndAncestors:p,equalDomRects:m}},{"./loggers":782,"./matrix":784,d3:169,"gl-mat4":292}],767:[function(e,d,S){var r=e("events").EventEmitter,a={init:function(u){if(u._ev instanceof r)return u;var c=new r,t=new r;return u._ev=c,u._internalEv=t,u.on=c.on.bind(c),u.once=c.once.bind(c),u.removeListener=c.removeListener.bind(c),u.removeAllListeners=c.removeAllListeners.bind(c),u._internalOn=t.on.bind(t),u._internalOnce=t.once.bind(t),u._removeInternalListener=t.removeListener.bind(t),u._removeAllInternalListeners=t.removeAllListeners.bind(t),u.emit=function(f,n){typeof jQuery<"u"&&jQuery(u).trigger(f,n),c.emit(f,n),t.emit(f,n)},u},triggerHandler:function(u,c,t){var f,n;typeof jQuery<"u"&&(f=jQuery(u).triggerHandler(c,t));var o=u._ev;if(!o)return f;var l=o._events[c];if(!l)return f;function h(s){if(s.listener){if(o.removeListener(c,s.listener),!s.fired)return s.fired=!0,s.listener.apply(o,[t])}else return s.apply(o,[t])}l=Array.isArray(l)?l:[l];var i;for(i=0;i<l.length-1;i++)h(l[i]);return n=h(l[i]),f!==void 0?f:n},purge:function(u){return delete u._ev,delete u.on,delete u.once,delete u.removeListener,delete u.removeAllListeners,delete u.emit,delete u._ev,delete u._internalEv,delete u._internalOn,delete u._internalOnce,delete u._removeInternalListener,delete u._removeAllInternalListeners,u}};d.exports=a},{events:110}],768:[function(e,d,S){var r=e("./is_plain_object.js"),a=Array.isArray;function u(t,f){var n,o;for(n=0;n<t.length;n++){if(o=t[n],o!==null&&typeof o=="object")return!1;o!==void 0&&(f[n]=o)}return!0}S.extendFlat=function(){return c(arguments,!1,!1,!1)},S.extendDeep=function(){return c(arguments,!0,!1,!1)},S.extendDeepAll=function(){return c(arguments,!0,!0,!1)},S.extendDeepNoArrays=function(){return c(arguments,!0,!1,!0)};function c(t,f,n,o){var l=t[0],h=t.length,i,s,p,v,m,b,y;if(h===2&&a(l)&&a(t[1])&&l.length===0){if(y=u(t[1],l),y)return l;l.splice(0,l.length)}for(var x=1;x<h;x++){i=t[x];for(s in i)p=l[s],v=i[s],o&&a(v)?l[s]=v:f&&v&&(r(v)||(m=a(v)))?(m?(m=!1,b=p&&a(p)?p:[]):b=p&&r(p)?p:{},l[s]=c([b,v],f,n,o)):(typeof v<"u"||n)&&(l[s]=v)}return l}},{"./is_plain_object.js":779}],769:[function(e,d,S){d.exports=function(a){for(var u={},c=[],t=0,f=0;f<a.length;f++){var n=a[f];u[n]!==1&&(u[n]=1,c[t++]=n)}return c}},{}],770:[function(e,d,S){d.exports=function(t){for(var f=u(t)?a:r,n=[],o=0;o<t.length;o++){var l=t[o];f(l)&&n.push(l)}return n};function r(c){return c.visible===!0}function a(c){var t=c[0].trace;return t.visible===!0&&t._length!==0}function u(c){return Array.isArray(c)&&Array.isArray(c[0])&&c[0][0]&&c[0][0].trace}},{}],771:[function(e,d,S){var r=e("d3"),a=e("country-regex"),u=e("@turf/area"),c=e("@turf/centroid"),t=e("@turf/bbox"),f=e("./identity"),n=e("./loggers"),o=e("./is_plain_object"),l=e("./nested_property"),h=e("./polygon"),i=Object.keys(a),s={"ISO-3":f,"USA-states":f,"country names":p};function p(T){for(var M=0;M<i.length;M++){var P=i[M],L=new RegExp(a[P]);if(L.test(T.trim().toLowerCase()))return P}return n.log("Unrecognized country name: "+T+"."),!1}function v(T,M,P){if(!M||typeof M!="string")return!1;var L=s[T](M),I,C,k;if(L){if(T==="USA-states")for(I=[],k=0;k<P.length;k++)C=P[k],C.properties&&C.properties.gu&&C.properties.gu==="USA"&&I.push(C);else I=P;for(k=0;k<I.length;k++)if(C=I[k],C.id===L)return C;n.log(["Location with id",L,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function m(T){var M=T.geometry,P=M.coordinates,L=T.id,I=[],C,k,E,R;function O(N){for(var G=0;G<N.length-1;G++)if(N[G][0]>0&&N[G+1][0]<0)return G;return null}switch(L==="RUS"||L==="FJI"?C=function(N){var G;if(O(N)===null)G=N;else for(G=new Array(N.length),R=0;R<N.length;R++)G[R]=[N[R][0]<0?N[R][0]+360:N[R][0],N[R][1]];I.push(h.tester(G))}:L==="ATA"?C=function(N){var G=O(N);if(G===null)return I.push(h.tester(N));var U=new Array(N.length+1),Y=0;for(R=0;R<N.length;R++)R>G?U[Y++]=[N[R][0]+360,N[R][1]]:R===G?(U[Y++]=N[R],U[Y++]=[N[R][0],-90]):U[Y++]=N[R];var z=h.tester(U);z.pts.pop(),I.push(z)}:C=function(N){I.push(h.tester(N))},M.type){case"MultiPolygon":for(k=0;k<P.length;k++)for(E=0;E<P[k].length;E++)C(P[k][E]);break;case"Polygon":for(k=0;k<P.length;k++)C(P[k]);break}return I}function b(T){var M=T.geojson,P=window.PlotlyGeoAssets||{},L=typeof M=="string"?P[M]:M;return o(L)?L:(n.error("Oops ... something went wrong when fetching "+M),!1)}function y(T){var M=T[0].trace,P=b(M);if(!P)return!1;var L={},I=[],C;for(C=0;C<M._length;C++){var k=T[C];(k.loc||k.loc===0)&&(L[k.loc]=k)}function E(N){var G=l(N,M.featureidkey||"id").get(),U=L[G];if(U){var Y=N.geometry;if(Y.type==="Polygon"||Y.type==="MultiPolygon"){var z={type:"Feature",id:G,geometry:Y,properties:{}};z.properties.ct=x(z),U.fIn=N,U.fOut=z,I.push(z)}else n.log(["Location",U.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete L[G]}switch(P.type){case"FeatureCollection":var R=P.features;for(C=0;C<R.length;C++)E(R[C]);break;case"Feature":E(P);break;default:return n.warn(["Invalid GeoJSON type",(P.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var O in L)n.log(["Location *"+O+"*","does not have a matching feature with id-key","*"+M.featureidkey+"*."].join(" "));return I}function x(T){var M=T.geometry,P;if(M.type==="MultiPolygon")for(var L=M.coordinates,I=0,C=0;C<L.length;C++){var k={type:"Polygon",coordinates:L[C]},E=u.default(k);E>I&&(I=E,P=k)}else P=M;return c.default(P).geometry.coordinates}function w(T){var M=window.PlotlyGeoAssets||{},P=[];function L(R){return new Promise(function(O,N){r.json(R,function(G,U){if(G){delete M[R];var Y=G.status===404?'GeoJSON at URL "'+R+'" does not exist.':"Unexpected error while fetching from "+R;return N(new Error(Y))}return M[R]=U,O(U)})})}function I(R){return new Promise(function(O,N){var G=0,U=setInterval(function(){if(M[R]&&M[R]!=="pending")return clearInterval(U),O(M[R]);if(G>100)return clearInterval(U),N("Unexpected error while fetching from "+R);G++},50)})}for(var C=0;C<T.length;C++){var k=T[C][0].trace,E=k.geojson;typeof E=="string"&&(M[E]?M[E]==="pending"&&P.push(I(E)):(M[E]="pending",P.push(L(E))))}return P}function g(T){return t.default(T)}d.exports={locationToFeature:v,feature2polygons:m,getTraceGeojson:b,extractTraceFeature:y,fetchTraceGeoData:w,computeBbox:g}},{"./identity":776,"./is_plain_object":779,"./loggers":782,"./nested_property":786,"./polygon":790,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],772:[function(e,d,S){var r=e("../constants/numerical").BADNUM;S.calcTraceToLineCoords=function(a){for(var u=a[0].trace,c=u.connectgaps,t=[],f=[],n=0;n<a.length;n++){var o=a[n],l=o.lonlat;l[0]!==r?f.push(l):!c&&f.length>0&&(t.push(f),f=[])}return f.length>0&&t.push(f),t},S.makeLine=function(a){return a.length===1?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}},S.makePolygon=function(a){if(a.length===1)return{type:"Polygon",coordinates:a};for(var u=new Array(a.length),c=0;c<a.length;c++)u[c]=[a[c]];return{type:"MultiPolygon",coordinates:u}},S.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":753}],773:[function(e,d,S){var r=e("./mod").mod;S.segmentsIntersect=a;function a(n,o,l,h,i,s,p,v){var m=l-n,b=i-n,y=p-i,x=h-o,w=s-o,g=v-s,T=m*g-y*x;if(T===0)return null;var M=(b*g-y*w)/T,P=(b*x-m*w)/T;return P<0||P>1||M<0||M>1?null:{x:n+m*M,y:o+x*M}}S.segmentDistance=function(o,l,h,i,s,p,v,m){if(a(o,l,h,i,s,p,v,m))return 0;var b=h-o,y=i-l,x=v-s,w=m-p,g=b*b+y*y,T=x*x+w*w,M=Math.min(u(b,y,g,s-o,p-l),u(b,y,g,v-o,m-l),u(x,w,T,o-s,l-p),u(x,w,T,h-s,i-p));return Math.sqrt(M)};function u(n,o,l,h,i){var s=h*n+i*o;if(s<0)return h*h+i*i;if(s>l){var p=h-n,v=i-o;return p*p+v*v}else{var m=h*o-i*n;return m*m/l}}var c,t,f;S.getTextLocation=function(o,l,h,i){if((o!==t||i!==f)&&(c={},t=o,f=i),c[h])return c[h];var s=o.getPointAtLength(r(h-i/2,l)),p=o.getPointAtLength(r(h+i/2,l)),v=Math.atan((p.y-s.y)/(p.x-s.x)),m=o.getPointAtLength(r(h,l)),b=(m.x*4+s.x+p.x)/6,y=(m.y*4+s.y+p.y)/6,x={x:b,y,theta:v};return c[h]=x,x},S.clearLocationCache=function(){t=null},S.getVisibleSegment=function(o,l,h){var i=l.left,s=l.right,p=l.top,v=l.bottom,m=0,b=o.getTotalLength(),y=b,x,w;function g(M){var P=o.getPointAtLength(M);M===0?x=P:M===b&&(w=P);var L=P.x<i?i-P.x:P.x>s?P.x-s:0,I=P.y<p?p-P.y:P.y>v?P.y-v:0;return Math.sqrt(L*L+I*I)}for(var T=g(m);T;){if(m+=T+h,m>y)return;T=g(m)}for(T=g(y);T;){if(y-=T+h,m>y)return;T=g(y)}return{min:m,max:y,len:y-m,total:b,isClosed:m===0&&y===b&&Math.abs(x.x-w.x)<.1&&Math.abs(x.y-w.y)<.1}},S.findPointOnPath=function(o,l,h,i){i=i||{};for(var s=i.pathLength||o.getTotalLength(),p=i.tolerance||.001,v=i.iterationLimit||30,m=o.getPointAtLength(0)[h]>o.getPointAtLength(s)[h]?-1:1,b=0,y=0,x=s,w,g,T;b<v;){if(w=(y+x)/2,g=o.getPointAtLength(w),T=g[h]-l,Math.abs(T)<p)return g;m*T>0?x=w:y=w,b++}return g}},{"./mod":785}],774:[function(e,d,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("color-normalize"),c=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,f=e("./array").isArrayOrTypedArray,n=u(t),o=1;function l(v,m){var b=v;return b[3]*=m,b}function h(v){if(r(v))return n;var m=u(v);return m.length?m:n}function i(v){return r(v)?v:o}function s(v,m,b){var y=v.color,x=f(y),w=f(m),g=c.extractOpts(v),T=[],M,P,L,I,C;if(g.colorscale!==void 0?M=c.makeColorScaleFuncFromTrace(v):M=h,x?P=function(E,R){return E[R]===void 0?n:u(M(E[R]))}:P=h,w?L=function(E,R){return E[R]===void 0?o:i(E[R])}:L=i,x||w)for(var k=0;k<b;k++)I=P(y,k),C=L(m,k),T[k]=l(I,C);else T=l(u(y),m);return T}function p(v){var m=c.extractOpts(v),b=m.colorscale;return m.reversescale&&(b=c.flipScale(m.colorscale)),b.map(function(y){var x=y[0],w=a(y[1]),g=w.toRgb();return{index:x,rgb:[g.r,g.g,g.b,g.a]}})}d.exports={formatColor:s,parseColorScale:p}},{"../components/color/attributes":642,"../components/colorscale":655,"./array":760,"color-normalize":125,"fast-isnumeric":241,tinycolor2:576}],775:[function(e,d,S){var r=e("./identity");function a(u){return[u]}d.exports={keyFun:function(u){return u.key},repeat:a,descend:r,wrap:a,unwrap:function(u){return u[0]}}},{"./identity":776}],776:[function(e,d,S){d.exports=function(a){return a}},{}],777:[function(e,d,S){d.exports=function(a,u){if(!u)return a;var c=1/Math.abs(u),t=c>1?(c*a+c*u)/c:a+u,f=String(t).length;if(f>16){var n=String(u).length,o=String(a).length;if(f>=o+n){var l=parseFloat(t).toPrecision(12);l.indexOf("e+")===-1&&(t=+l)}}return t}},{}],778:[function(e,d,S){var r=e("d3"),a=e("d3-time-format").utcFormat,u=e("fast-isnumeric"),c=e("../constants/numerical"),t=c.FP_SAFE,f=c.BADNUM,n=d.exports={};n.nestedProperty=e("./nested_property"),n.keyedContainer=e("./keyed_container"),n.relativeAttr=e("./relative_attr"),n.isPlainObject=e("./is_plain_object"),n.toLogRange=e("./to_log_range"),n.relinkPrivateKeys=e("./relink_private");var o=e("./array");n.isTypedArray=o.isTypedArray,n.isArrayOrTypedArray=o.isArrayOrTypedArray,n.isArray1D=o.isArray1D,n.ensureArray=o.ensureArray,n.concat=o.concat,n.maxRowLength=o.maxRowLength,n.minRowLength=o.minRowLength;var l=e("./mod");n.mod=l.mod,n.modHalf=l.modHalf;var h=e("./coerce");n.valObjectMeta=h.valObjectMeta,n.coerce=h.coerce,n.coerce2=h.coerce2,n.coerceFont=h.coerceFont,n.coerceHoverinfo=h.coerceHoverinfo,n.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,n.validate=h.validate;var i=e("./dates");n.dateTime2ms=i.dateTime2ms,n.isDateTime=i.isDateTime,n.ms2DateTime=i.ms2DateTime,n.ms2DateTimeLocal=i.ms2DateTimeLocal,n.cleanDate=i.cleanDate,n.isJSDate=i.isJSDate,n.formatDate=i.formatDate,n.incrementMonth=i.incrementMonth,n.dateTick0=i.dateTick0,n.dfltRange=i.dfltRange,n.findExactDates=i.findExactDates,n.MIN_MS=i.MIN_MS,n.MAX_MS=i.MAX_MS;var s=e("./search");n.findBin=s.findBin,n.sorterAsc=s.sorterAsc,n.sorterDes=s.sorterDes,n.distinctVals=s.distinctVals,n.roundUp=s.roundUp,n.sort=s.sort,n.findIndexOfMin=s.findIndexOfMin;var p=e("./stats");n.aggNums=p.aggNums,n.len=p.len,n.mean=p.mean,n.median=p.median,n.midRange=p.midRange,n.variance=p.variance,n.stdev=p.stdev,n.interp=p.interp;var v=e("./matrix");n.init2dArray=v.init2dArray,n.transposeRagged=v.transposeRagged,n.dot=v.dot,n.translationMatrix=v.translationMatrix,n.rotationMatrix=v.rotationMatrix,n.rotationXYMatrix=v.rotationXYMatrix,n.apply3DTransform=v.apply3DTransform,n.apply2DTransform=v.apply2DTransform,n.apply2DTransform2=v.apply2DTransform2,n.convertCssMatrix=v.convertCssMatrix,n.inverseTransformMatrix=v.inverseTransformMatrix;var m=e("./angles");n.deg2rad=m.deg2rad,n.rad2deg=m.rad2deg,n.angleDelta=m.angleDelta,n.angleDist=m.angleDist,n.isFullCircle=m.isFullCircle,n.isAngleInsideSector=m.isAngleInsideSector,n.isPtInsideSector=m.isPtInsideSector,n.pathArc=m.pathArc,n.pathSector=m.pathSector,n.pathAnnulus=m.pathAnnulus;var b=e("./anchor_utils");n.isLeftAnchor=b.isLeftAnchor,n.isCenterAnchor=b.isCenterAnchor,n.isRightAnchor=b.isRightAnchor,n.isTopAnchor=b.isTopAnchor,n.isMiddleAnchor=b.isMiddleAnchor,n.isBottomAnchor=b.isBottomAnchor;var y=e("./geometry2d");n.segmentsIntersect=y.segmentsIntersect,n.segmentDistance=y.segmentDistance,n.getTextLocation=y.getTextLocation,n.clearLocationCache=y.clearLocationCache,n.getVisibleSegment=y.getVisibleSegment,n.findPointOnPath=y.findPointOnPath;var x=e("./extend");n.extendFlat=x.extendFlat,n.extendDeep=x.extendDeep,n.extendDeepAll=x.extendDeepAll,n.extendDeepNoArrays=x.extendDeepNoArrays;var w=e("./loggers");n.log=w.log,n.warn=w.warn,n.error=w.error;var g=e("./regex");n.counterRegex=g.counter;var T=e("./throttle");n.throttle=T.throttle,n.throttleDone=T.done,n.clearThrottle=T.clear;var M=e("./dom");n.getGraphDiv=M.getGraphDiv,n.isPlotDiv=M.isPlotDiv,n.removeElement=M.removeElement,n.addStyleRule=M.addStyleRule,n.addRelatedStyleRule=M.addRelatedStyleRule,n.deleteRelatedStyleRule=M.deleteRelatedStyleRule,n.getFullTransformMatrix=M.getFullTransformMatrix,n.getElementTransformMatrix=M.getElementTransformMatrix,n.getElementAndAncestors=M.getElementAndAncestors,n.equalDomRects=M.equalDomRects,n.clearResponsive=e("./clear_responsive"),n.preserveDrawingBuffer=e("./preserve_drawing_buffer"),n.makeTraceGroups=e("./make_trace_groups"),n._=e("./localize"),n.notifier=e("./notifier"),n.filterUnique=e("./filter_unique"),n.filterVisible=e("./filter_visible"),n.pushUnique=e("./push_unique"),n.increment=e("./increment"),n.cleanNumber=e("./clean_number"),n.ensureNumber=function(V){return!u(V)||(V=Number(V),V<-t||V>t)?f:u(V)?Number(V):f},n.isIndex=function(H,V){return V!==void 0&&H>=V?!1:u(H)&&H>=0&&H%1===0},n.noop=e("./noop"),n.identity=e("./identity"),n.repeat=function(H,V){for(var Z=new Array(V),q=0;q<V;q++)Z[q]=H;return Z},n.swapAttrs=function(H,V,Z,q){Z||(Z="x"),q||(q="y");for(var J=0;J<V.length;J++){var ne=V[J],ve=n.nestedProperty(H,ne.replace("?",Z)),$=n.nestedProperty(H,ne.replace("?",q)),j=ve.get();ve.set($.get()),$.set(j)}},n.raiseToTop=function(V){V.parentNode.appendChild(V)},n.cancelTransition=function(H){return H.transition().duration(0)},n.constrain=function(H,V,Z){return V>Z?Math.max(Z,Math.min(V,H)):Math.max(V,Math.min(Z,H))},n.bBoxIntersect=function(H,V,Z){return Z=Z||0,H.left<=V.right+Z&&V.left<=H.right+Z&&H.top<=V.bottom+Z&&V.top<=H.bottom+Z},n.simpleMap=function(H,V,Z,q,J){for(var ne=H.length,ve=new Array(ne),$=0;$<ne;$++)ve[$]=V(H[$],Z,q,J);return ve},n.randstr=function H(V,Z,q,J){if(q||(q=16),Z===void 0&&(Z=24),Z<=0)return"0";var ne=Math.log(Math.pow(2,Z))/Math.log(q),ve="",$,j,ae;for($=2;ne===1/0;$*=2)ne=Math.log(Math.pow(2,Z/$))/Math.log(q)*$;var ie=ne-Math.floor(ne);for($=0;$<Math.floor(ne);$++)ae=Math.floor(Math.random()*q).toString(q),ve=ae+ve;ie&&(j=Math.pow(q,ie),ae=Math.floor(Math.random()*j).toString(q),ve=ae+ve);var te=parseInt(ve,q);return V&&V[ve]||te!==1/0&&te>=Math.pow(2,Z)?J>10?(n.warn("randstr failed uniqueness"),ve):H(V,Z,q,(J||0)+1):ve},n.OptionControl=function(H,V){H||(H={}),V||(V="opt");var Z={};return Z.optionList=[],Z._newoption=function(q){q[V]=H,Z[q.name]=q,Z.optionList.push(q)},Z["_"+V]=H,Z},n.smooth=function(H,V){if(V=Math.round(V)||0,V<2)return H;var Z=H.length,q=2*Z,J=2*V-1,ne=new Array(J),ve=new Array(Z),$,j,ae,ie;for($=0;$<J;$++)ne[$]=(1-Math.cos(Math.PI*($+1)/V))/(2*V);for($=0;$<Z;$++){for(ie=0,j=0;j<J;j++)ae=$+j+1-V,ae<-Z?ae-=q*Math.round(ae/q):ae>=q&&(ae-=q*Math.floor(ae/q)),ae<0?ae=-1-ae:ae>=Z&&(ae=q-1-ae),ie+=H[ae]*ne[j];ve[$]=ie}return ve},n.syncOrAsync=function(H,V,Z){var q,J;function ne(){return n.syncOrAsync(H,V,Z)}for(;H.length;)if(J=H.splice(0,1)[0],q=J(V),q&&q.then)return q.then(ne).then(void 0,n.promiseError);return Z&&Z(V)},n.stripTrailingSlash=function(H){return H.substr(-1)==="/"?H.substr(0,H.length-1):H},n.noneOrAll=function(H,V,Z){if(!!H){var q=!1,J=!0,ne,ve;for(ne=0;ne<Z.length;ne++)ve=H[Z[ne]],ve!=null?q=!0:J=!1;if(q&&!J)for(ne=0;ne<Z.length;ne++)H[Z[ne]]=V[Z[ne]]}},n.mergeArray=function(H,V,Z,q){var J=typeof q=="function";if(n.isArrayOrTypedArray(H))for(var ne=Math.min(H.length,V.length),ve=0;ve<ne;ve++){var $=H[ve];V[ve][Z]=J?q($):$}},n.mergeArrayCastPositive=function(H,V,Z){return n.mergeArray(H,V,Z,function(q){var J=+q;return isFinite(J)&&J>0?J:0})},n.fillArray=function(H,V,Z,q){if(q=q||n.identity,n.isArrayOrTypedArray(H))for(var J=0;J<V.length;J++)V[J][Z]=q(H[J])},n.castOption=function(H,V,Z,q){q=q||n.identity;var J=n.nestedProperty(H,Z).get();return n.isArrayOrTypedArray(J)?Array.isArray(V)&&n.isArrayOrTypedArray(J[V[0]])?q(J[V[0]][V[1]]):q(J[V]):J},n.extractOption=function(H,V,Z,q){if(Z in H)return H[Z];var J=n.nestedProperty(V,q).get();if(!Array.isArray(J))return J};function P(H){var V={};for(var Z in H)for(var q=H[Z],J=0;J<q.length;J++)V[q[J]]=+Z;return V}n.tagSelected=function(H,V,Z){var q=V.selectedpoints,J=V._indexToPoints,ne;J&&(ne=P(J));function ve(te){return te!==void 0&&te<H.length}for(var $=0;$<q.length;$++){var j=q[$];if(n.isIndex(j)||n.isArrayOrTypedArray(j)&&n.isIndex(j[0])&&n.isIndex(j[1])){var ae=ne?ne[j]:j,ie=Z?Z[ae]:ae;ve(ie)&&(H[ie].selected=1)}}},n.selIndices2selPoints=function(H){var V=H.selectedpoints,Z=H._indexToPoints;if(Z){for(var q=P(Z),J=[],ne=0;ne<V.length;ne++){var ve=V[ne];if(n.isIndex(ve)){var $=q[ve];n.isIndex($)&&J.push($)}}return J}else return V},n.getTargetArray=function(H,V){var Z=V.target;if(typeof Z=="string"&&Z){var q=n.nestedProperty(H,Z).get();return Array.isArray(q)?q:!1}else if(Array.isArray(Z))return Z;return!1},n.minExtend=function(H,V){var Z={};typeof V!="object"&&(V={});var q=3,J=Object.keys(H),ne,ve,$;for(ne=0;ne<J.length;ne++)ve=J[ne],$=H[ve],!(ve.charAt(0)==="_"||typeof $=="function")&&(ve==="module"?Z[ve]=$:Array.isArray($)?ve==="colorscale"?Z[ve]=$.slice():Z[ve]=$.slice(0,q):n.isTypedArray($)?Z[ve]=$.subarray(0,q):$&&typeof $=="object"?Z[ve]=n.minExtend(H[ve],V[ve]):Z[ve]=$);for(J=Object.keys(V),ne=0;ne<J.length;ne++)ve=J[ne],$=V[ve],(typeof $!="object"||!(ve in Z)||typeof Z[ve]!="object")&&(Z[ve]=$);return Z},n.titleCase=function(H){return H.charAt(0).toUpperCase()+H.substr(1)},n.containsAny=function(H,V){for(var Z=0;Z<V.length;Z++)if(H.indexOf(V[Z])!==-1)return!0;return!1},n.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var L=/MSIE [1-9]\./;n.isIE9orBelow=function(){return n.isIE()&&L.test(window.navigator.userAgent)};var I=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return I.test(window.navigator.userAgent)};var C=/iPad|iPhone|iPod/;n.isIOS=function(){return C.test(window.navigator.userAgent)},n.isD3Selection=function(H){return H&&typeof H.classed=="function"},n.ensureSingle=function(H,V,Z,q){var J=H.select(V+(Z?"."+Z:""));if(J.size())return J;var ne=H.append(V);return Z&&ne.classed(Z,!0),q&&ne.call(q),ne},n.ensureSingleById=function(H,V,Z,q){var J=H.select(V+"#"+Z);if(J.size())return J;var ne=H.append(V).attr("id",Z);return q&&ne.call(q),ne},n.objectFromPath=function(H,V){for(var Z=H.split("."),q,J=q={},ne=0;ne<Z.length;ne++){var ve=Z[ne],$=null,j=Z[ne].match(/(.*)\[([0-9]+)\]/);j?(ve=j[1],$=j[2],q=q[ve]=[],ne===Z.length-1?q[$]=V:q[$]={},q=q[$]):(ne===Z.length-1?q[ve]=V:q[ve]={},q=q[ve])}return J};var k=/^([^\[\.]+)\.(.+)?/,E=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(H){var V,Z,q,J,ne,ve,$;if(typeof H=="object"&&!Array.isArray(H))for(Z in H)H.hasOwnProperty(Z)&&((V=Z.match(k))?(J=H[Z],q=V[1],delete H[Z],H[q]=n.extendDeepNoArrays(H[q]||{},n.objectFromPath(Z,n.expandObjectPaths(J))[q])):(V=Z.match(E))?(J=H[Z],q=V[1],ne=parseInt(V[2]),delete H[Z],H[q]=H[q]||[],V[3]==="."?($=V[4],ve=H[q][ne]=H[q][ne]||{},n.extendDeepNoArrays(ve,n.objectFromPath($,n.expandObjectPaths(J)))):H[q][ne]=n.expandObjectPaths(J)):H[Z]=n.expandObjectPaths(H[Z]));return H},n.numSeparate=function(H,V,Z){if(Z||(Z=!1),typeof V!="string"||V.length===0)throw new Error("Separator string required for formatting!");typeof H=="number"&&(H=String(H));var q=/(\d+)(\d{3})/,J=V.charAt(0),ne=V.charAt(1),ve=H.split("."),$=ve[0],j=ve.length>1?J+ve[1]:"";if(ne&&(ve.length>1||$.length>4||Z))for(;q.test($);)$=$.replace(q,"$1"+ne+"$2");return $+j},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var R=/^\w*$/;n.templateString=function(H,V){var Z={};return H.replace(n.TEMPLATE_STRING_REGEX,function(q,J){var ne;return R.test(J)?ne=V[J]:(Z[J]=Z[J]||n.nestedProperty(V,J).get,ne=Z[J]()),n.isValidTextValue(ne)?ne:""})};var O={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return U.apply(O,arguments)};var N={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return U.apply(N,arguments)};var G=/^[:|\|]/;function U(H,V,Z){var q=this,J=arguments;V||(V={});var ne={};return H.replace(n.TEMPLATE_STRING_REGEX,function(ve,$,j){var ae,ie,te;for(te=3;te<J.length;te++)if(ae=J[te],!!ae){if(ae.hasOwnProperty($)){ie=ae[$];break}if(R.test($)||(ie=ne[$]||n.nestedProperty(ae,$).get(),ie&&(ne[$]=ie)),ie!==void 0)break}if(ie===void 0&&q)return q.count<q.max&&(n.warn("Variable '"+$+"' in "+q.name+" could not be found!"),ie=ve),q.count===q.max&&n.warn("Too many "+q.name+" warnings - additional warnings will be suppressed"),q.count++,ve;if(j){var re;if(j[0]===":"&&(re=Z?Z.numberFormat:r.format,ie=re(j.replace(G,""))(ie)),j[0]==="|"){re=Z?Z.timeFormat:a;var ce=n.dateTime2ms(ie);ie=n.formatDate(ce,j.replace(G,""),!1,re)}}else V.hasOwnProperty($+"Label")&&(ie=V[$+"Label"]);return ie})}var Y=48,z=57;n.subplotSort=function(H,V){for(var Z=Math.min(H.length,V.length)+1,q=0,J=0,ne=0;ne<Z;ne++){var ve=H.charCodeAt(ne)||0,$=V.charCodeAt(ne)||0,j=ve>=Y&&ve<=z,ae=$>=Y&&$<=z;if(j&&(q=10*q+ve-Y),ae&&(J=10*J+$-Y),!j||!ae){if(q!==J)return q-J;if(ve!==$)return ve-$}}return J-q};var B=2e9;n.seedPseudoRandom=function(){B=2e9},n.pseudoRandom=function(){var H=B;return B=(69069*B+1)%4294967296,Math.abs(B-H)<429496729?n.pseudoRandom():B/4294967296},n.fillText=function(H,V,Z){var q=Array.isArray(Z)?function(ve){Z.push(ve)}:function(ve){Z.text=ve},J=n.extractOption(H,V,"htx","hovertext");if(n.isValidTextValue(J))return q(J);var ne=n.extractOption(H,V,"tx","text");if(n.isValidTextValue(ne))return q(ne)},n.isValidTextValue=function(H){return H||H===0},n.formatPercent=function(H,V){V=V||0;for(var Z=(Math.round(100*H*Math.pow(10,V))*Math.pow(.1,V)).toFixed(V)+"%",q=0;q<V;q++)Z.indexOf(".")!==-1&&(Z=Z.replace("0%","%"),Z=Z.replace(".%","%"));return Z},n.isHidden=function(H){var V=window.getComputedStyle(H).display;return!V||V==="none"},n.strTranslate=function(H,V){return H||V?"translate("+H+","+V+")":""},n.strRotate=function(H){return H?"rotate("+H+")":""},n.strScale=function(H){return H!==1?"scale("+H+")":""},n.getTextTransform=function(H){var V=H.noCenter,Z=H.textX,q=H.textY,J=H.targetX,ne=H.targetY,ve=H.anchorX||0,$=H.anchorY||0,j=H.rotate,ae=H.scale;return ae?ae>1&&(ae=1):ae=0,n.strTranslate(J-ae*(Z+ve),ne-ae*(q+$))+n.strScale(ae)+(j?"rotate("+j+(V?"":" "+Z+" "+q)+")":"")},n.ensureUniformFontSize=function(H,V){var Z=n.extendFlat({},V);return Z.size=Math.max(V.size,H._fullLayout.uniformtext.minsize||0),Z},n.join2=function(H,V,Z){var q=H.length;return q>1?H.slice(0,-1).join(V)+Z+H[q-1]:H.join(V)}},{"../constants/numerical":753,"./anchor_utils":758,"./angles":759,"./array":760,"./clean_number":761,"./clear_responsive":763,"./coerce":764,"./dates":765,"./dom":766,"./extend":768,"./filter_unique":769,"./filter_visible":770,"./geometry2d":773,"./identity":776,"./increment":777,"./is_plain_object":779,"./keyed_container":780,"./localize":781,"./loggers":782,"./make_trace_groups":783,"./matrix":784,"./mod":785,"./nested_property":786,"./noop":787,"./notifier":788,"./preserve_drawing_buffer":792,"./push_unique":793,"./regex":795,"./relative_attr":796,"./relink_private":797,"./search":798,"./stats":801,"./throttle":804,"./to_log_range":805,d3:169,"d3-time-format":166,"fast-isnumeric":241}],779:[function(e,d,S){d.exports=function(a){return window&&window.process&&window.process.versions?Object.prototype.toString.call(a)==="[object Object]":Object.prototype.toString.call(a)==="[object Object]"&&Object.getPrototypeOf(a)===Object.prototype}},{}],780:[function(e,d,S){var r=e("./nested_property"),a=/^\w*$/,u=0,c=1,t=2,f=3,n=4;d.exports=function(l,h,i,s){i=i||"name",s=s||"value";var p,v,m,b={};h&&h.length?(m=r(l,h),v=m.get()):v=l,h=h||"";var y={};if(v)for(p=0;p<v.length;p++)y[v[p][i]]=p;var x=a.test(s),w={set:function(g,T){var M=T===null?n:u;if(!v){if(!m||M===n)return;v=[],m.set(v)}var P=y[g];if(P===void 0){if(M===n)return;M=M|f,P=v.length,y[g]=P}else T!==(x?v[P][s]:r(v[P],s).get())&&(M=M|t);var L=v[P]=v[P]||{};return L[i]=g,x?L[s]=T:r(L,s).set(T),T!==null&&(M=M&~n),b[P]=b[P]|M,w},get:function(g){if(!!v){var T=y[g];if(T!==void 0)return x?v[T][s]:r(v[T],s).get()}},rename:function(g,T){var M=y[g];return M===void 0||(b[M]=b[M]|c,y[T]=M,delete y[g],v[M][i]=T),w},remove:function(g){var T=y[g];if(T===void 0)return w;var M=v[T];if(Object.keys(M).length>2)return b[T]=b[T]|t,w.set(g,null);if(x){for(p=T;p<v.length;p++)b[p]=b[p]|f;for(p=T;p<v.length;p++)y[v[p][i]]--;v.splice(T,1),delete y[g]}else r(M,s).set(null),b[T]=b[T]|t|n;return w},constructUpdate:function(){for(var g,T,M={},P=Object.keys(b),L=0;L<P.length;L++)T=P[L],g=h+"["+T+"]",v[T]?(b[T]&c&&(M[g+"."+i]=v[T][i]),b[T]&t&&(x?M[g+"."+s]=b[T]&n?null:v[T][s]:M[g+"."+s]=b[T]&n?null:r(v[T],s).get())):M[g]=null;return M}};return w}},{"./nested_property":786}],781:[function(e,d,S){var r=e("../registry");d.exports=function(u,c){for(var t=u._context.locale,f=0;f<2;f++){for(var n=u._context.locales,o=0;o<2;o++){var l=(n[t]||{}).dictionary;if(l){var h=l[c];if(h)return h}n=r.localeRegistry}var i=t.split("-")[0];if(i===t)break;t=i}return c}},{"../registry":911}],782:[function(e,d,S){var r=e("../plot_api/plot_config").dfltConfig,a=e("./notifier"),u=d.exports={};u.log=function(){var t;if(r.logging>1){var f=["LOG:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.trace||console.log,f)}if(r.notifyOnLogging>1){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"long")}},u.warn=function(){var t;if(r.logging>0){var f=["WARN:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.trace||console.log,f)}if(r.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}},u.error=function(){var t;if(r.logging>0){var f=["ERROR:"];for(t=0;t<arguments.length;t++)f.push(arguments[t]);c(console.error,f)}if(r.notifyOnLogging>0){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}};function c(t,f){if(t&&t.apply)try{t.apply(console,f);return}catch{}for(var n=0;n<f.length;n++)try{t(f[n])}catch{console.log(f[n])}}},{"../plot_api/plot_config":815,"./notifier":788}],783:[function(e,d,S){var r=e("d3");d.exports=function(u,c,t){var f=u.selectAll("g."+t.replace(/\s/g,".")).data(c,function(o){return o[0].trace.uid});f.exit().remove(),f.enter().append("g").attr("class",t),f.order();var n=u.classed("rangeplot")?"nodeRangePlot3":"node3";return f.each(function(o){o[0][n]=r.select(this)}),f}},{d3:169}],784:[function(e,d,S){var r=e("gl-mat4");S.init2dArray=function(a,u){for(var c=new Array(a),t=0;t<a;t++)c[t]=new Array(u);return c},S.transposeRagged=function(a){var u=0,c=a.length,t,f;for(t=0;t<c;t++)u=Math.max(u,a[t].length);var n=new Array(u);for(t=0;t<u;t++)for(n[t]=new Array(c),f=0;f<c;f++)n[t][f]=a[f][t];return n},S.dot=function(a,u){if(!(a.length&&u.length)||a.length!==u.length)return null;var c=a.length,t,f;if(a[0].length)for(t=new Array(c),f=0;f<c;f++)t[f]=S.dot(a[f],u);else if(u[0].length){var n=S.transposeRagged(u);for(t=new Array(n.length),f=0;f<n.length;f++)t[f]=S.dot(a,n[f])}else for(t=0,f=0;f<c;f++)t+=a[f]*u[f];return t},S.translationMatrix=function(a,u){return[[1,0,a],[0,1,u],[0,0,1]]},S.rotationMatrix=function(a){var u=a*Math.PI/180;return[[Math.cos(u),-Math.sin(u),0],[Math.sin(u),Math.cos(u),0],[0,0,1]]},S.rotationXYMatrix=function(a,u,c){return S.dot(S.dot(S.translationMatrix(u,c),S.rotationMatrix(a)),S.translationMatrix(-u,-c))},S.apply3DTransform=function(a){return function(){var u=arguments,c=arguments.length===1?u[0]:[u[0],u[1],u[2]||0];return S.dot(a,[c[0],c[1],c[2],1]).slice(0,3)}},S.apply2DTransform=function(a){return function(){var u=arguments;u.length===3&&(u=u[0]);var c=arguments.length===1?u[0]:[u[0],u[1]];return S.dot(a,[c[0],c[1],1]).slice(0,2)}},S.apply2DTransform2=function(a){var u=S.apply2DTransform(a);return function(c){return u(c.slice(0,2)).concat(u(c.slice(2,4)))}},S.convertCssMatrix=function(a){if(a){var u=a.length;if(u===16)return a;if(u===6)return[a[0],a[1],0,0,a[2],a[3],0,0,0,0,1,0,a[4],a[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},S.inverseTransformMatrix=function(a){var u=[];return r.invert(u,a),[[u[0],u[1],u[2],u[3]],[u[4],u[5],u[6],u[7]],[u[8],u[9],u[10],u[11]],[u[12],u[13],u[14],u[15]]]}},{"gl-mat4":292}],785:[function(e,d,S){function r(u,c){var t=u%c;return t<0?t+c:t}function a(u,c){return Math.abs(u)>c/2?u-Math.round(u/c)*c:u}d.exports={mod:r,modHalf:a}},{}],786:[function(e,d,S){var r=e("fast-isnumeric"),a=e("./array").isArrayOrTypedArray;d.exports=function(s,p){if(r(p))p=String(p);else if(typeof p!="string"||p.substr(p.length-4)==="[-1]")throw"bad property string";for(var v=0,m=p.split("."),b,y,x;v<m.length;){if(b=String(m[v]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),b){if(b[1])m[v]=b[1];else if(v===0)m.splice(0,1);else throw"bad property string";for(y=b[2].substr(1,b[2].length-2).split("]["),x=0;x<y.length;x++)v++,m.splice(v,0,Number(y[x]))}v++}return typeof s!="object"?h(s,p,m):{set:f(s,m,p),get:u(s,m),astr:p,parts:m,obj:s}};function u(i,s){return function(){var p=i,v,m,b,y,x;for(y=0;y<s.length-1;y++){if(v=s[y],v===-1){for(m=!0,b=[],x=0;x<p.length;x++)b[x]=u(p[x],s.slice(y+1))(),b[x]!==b[0]&&(m=!1);return m?b[0]:b}if(typeof v=="number"&&!a(p)||(p=p[v],typeof p!="object"||p===null))return}if(!(typeof p!="object"||p===null)&&(b=p[s[y]],b!==null))return b}}var c=/(^|\.)args\[/;function t(i,s){return i===void 0||i===null&&!s.match(c)}function f(i,s,p){return function(v){var m=i,b="",y=t(v,p),x,w;for(w=0;w<s.length-1;w++){if(x=s[w],typeof x=="number"&&!a(m))throw"array index but container is not an array";if(x===-1){if(y=!o(m,s.slice(w+1),v,p),y)break;return}if(!l(m,x,s[w+1],y))break;if(m=m[x],typeof m!="object"||m===null)throw"container is not an object";b=n(b,x)}if(y){if(w===s.length-1&&(delete m[s[w]],Array.isArray(m)&&+s[w]===m.length-1))for(;m.length&&m[m.length-1]===void 0;)m.pop()}else m[s[w]]=v}}function n(i,s){var p=s;return r(s)?p="["+s+"]":i&&(p="."+s),i+p}function o(i,s,p,v){var m=a(p),b=!0,y=p,x=v.replace("-1",0),w=m?!1:t(p,x),g=s[0],T;for(T=0;T<i.length;T++)x=v.replace("-1",T),m&&(y=p[T%p.length],w=t(y,x)),w&&(b=!1),l(i,T,g,w)&&f(i[T],s,v.replace("-1",T))(y);return b}function l(i,s,p,v){if(i[s]===void 0){if(v)return!1;typeof p=="number"?i[s]=[]:i[s]={}}return!0}function h(i,s,p){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:p,obj:i}}},{"./array":760,"fast-isnumeric":241}],787:[function(e,d,S){d.exports=function(){}},{}],788:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=[];d.exports=function(c,t){if(u.indexOf(c)!==-1)return;u.push(c);var f=1e3;a(t)?f=t:t==="long"&&(f=3e3);var n=r.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0);var o=n.selectAll(".notifier-note").data(u);function l(h){h.duration(700).style("opacity",0).each("end",function(i){var s=u.indexOf(i);s!==-1&&u.splice(s,1),r.select(this).remove()})}o.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(h){var i=r.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(l)});for(var s=i.append("p"),p=h.split(/<br\s*\/?>/g),v=0;v<p.length;v++)v&&s.append("br"),s.append("span").text(p[v]);t==="stick"?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(f).call(l)})}},{d3:169,"fast-isnumeric":241}],789:[function(e,d,S){var r=e("./setcursor"),a="data-savedcursor",u="!!";d.exports=function(t,f){var n=t.attr(a);if(f){if(!n){for(var o=(t.attr("class")||"").split(" "),l=0;l<o.length;l++){var h=o[l];h.indexOf("cursor-")===0&&t.attr(a,h.substr(7)).classed(h,!1)}t.attr(a)||t.attr(a,u)}r(t,f)}else n&&(t.attr(a,null),n===u?r(t):r(t,n))}},{"./setcursor":799}],790:[function(e,d,S){var r=e("./matrix").dot,a=e("../constants/numerical").BADNUM,u=d.exports={};u.tester=function(t){var f=t.slice(),n=f[0][0],o=n,l=f[0][1],h=l,i;for(f.push(f[0]),i=1;i<f.length;i++)n=Math.min(n,f[i][0]),o=Math.max(o,f[i][0]),l=Math.min(l,f[i][1]),h=Math.max(h,f[i][1]);var s=!1,p;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(s=!0,p=function(x){return x[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(s=!0,p=function(x){return x[1]===f[0][1]}));function v(x,w){var g=x[0],T=x[1];return!(g===a||g<n||g>o||T===a||T<l||T>h||w&&p(x))}function m(x,w){var g=x[0],T=x[1];if(g===a||g<n||g>o||T===a||T<l||T>h)return!1;var M=f.length,P=f[0][0],L=f[0][1],I=0,C,k,E,R,O;for(C=1;C<M;C++)if(k=P,E=L,P=f[C][0],L=f[C][1],R=Math.min(k,P),!(g<R||g>Math.max(k,P)||T>Math.max(E,L)))if(T<Math.min(E,L))g!==R&&I++;else{if(P===k?O=T:O=E+(g-k)*(L-E)/(P-k),T===O)return!(C===1&&w);T<=O&&g!==R&&I++}return I%2===1}var b=!0,y=f[0];for(i=1;i<f.length;i++)if(y[0]!==f[i][0]||y[1]!==f[i][1]){b=!1;break}return{xmin:n,xmax:o,ymin:l,ymax:h,pts:f,contains:s?v:m,isRect:s,degenerate:b}},u.isSegmentBent=function(t,f,n,o){var l=t[f],h=[t[n][0]-l[0],t[n][1]-l[1]],i=r(h,h),s=Math.sqrt(i),p=[-h[1]/s,h[0]/s],v,m,b;for(v=f+1;v<n;v++)if(m=[t[v][0]-l[0],t[v][1]-l[1]],b=r(m,h),b<0||b>i||Math.abs(r(m,p))>o)return!0;return!1},u.filter=function(t,f){var n=[t[0]],o=0,l=0;function h(s){t.push(s);var p=n.length,v=o;n.splice(l+1);for(var m=v+1;m<t.length;m++)(m===t.length-1||u.isSegmentBent(t,v,m+1,f))&&(n.push(t[m]),n.length<p-2&&(o=m,l=n.length-1),v=m)}if(t.length>1){var i=t.pop();h(i)}return{addPt:h,raw:t,filtered:n}}},{"../constants/numerical":753,"./matrix":784}],791:[function(e,d,S){(function(r){(function(){var a=e("./show_no_webgl_msg"),u=e("regl");d.exports=function(t,f){var n=t._fullLayout,o=!0;return n._glcanvas.each(function(l){if(!l.regl&&!(l.pick&&!n._has("parcoords"))){try{l.regl=u({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||r.devicePixelRatio,extensions:f||[]})}catch{o=!1}l.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(h){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:h,layer:l.key})},!1)}}),o||a({container:n._glcontainer.node()}),o}}).call(this)}).call(this,typeof Fo<"u"?Fo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":800,regl:540}],792:[function(e,d,S){var r=e("fast-isnumeric"),a=e("is-mobile");d.exports=function(t){var f;if(t&&t.hasOwnProperty("userAgent")?f=t.userAgent:f=u(),typeof f!="string")return!0;var n=a({ua:{headers:{"user-agent":f}},tablet:!0,featureDetect:!1});if(!n)for(var o=f.split(" "),l=1;l<o.length;l++){var h=o[l];if(h.indexOf("Safari")!==-1)for(var i=l-1;i>-1;i--){var s=o[i];if(s.substr(0,8)==="Version/"){var p=s.substr(8).split(".")[0];if(r(p)&&(p=+p),p>=13)return!0}}}return n};function u(){var c;return typeof navigator<"u"&&(c=navigator.userAgent),c&&c.headers&&typeof c.headers["user-agent"]=="string"&&(c=c.headers["user-agent"]),c}},{"fast-isnumeric":241,"is-mobile":467}],793:[function(e,d,S){d.exports=function(a,u){if(u instanceof RegExp){for(var c=u.toString(),t=0;t<a.length;t++)if(a[t]instanceof RegExp&&a[t].toString()===c)return a;a.push(u)}else(u||u===0)&&a.indexOf(u)===-1&&a.push(u);return a}},{}],794:[function(e,d,S){var r=e("../lib"),a=e("../plot_api/plot_config").dfltConfig;function u(t,f){for(var n=[],o,l=0;l<f.length;l++)o=f[l],o===t?n[l]=o:typeof o=="object"?n[l]=Array.isArray(o)?r.extendDeep([],o):r.extendDeepAll({},o):n[l]=o;return n}var c={};c.add=function(t,f,n,o,l){var h,i;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},i=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(h={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(i,t.undoQueue.queue.length-i,h),t.undoQueue.index+=1):h=t.undoQueue.queue[i-1],t.undoQueue.beginSequence=!1,h&&(h.undo.calls.unshift(f),h.undo.args.unshift(n),h.redo.calls.push(o),h.redo.args.push(l)),t.undoQueue.queue.length>a.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},c.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},c.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},c.undo=function(f){var n,o;if(f.framework&&f.framework.isPolar){f.framework.undo();return}if(!(f.undoQueue===void 0||isNaN(f.undoQueue.index)||f.undoQueue.index<=0)){for(f.undoQueue.index--,n=f.undoQueue.queue[f.undoQueue.index],f.undoQueue.inSequence=!0,o=0;o<n.undo.calls.length;o++)c.plotDo(f,n.undo.calls[o],n.undo.args[o]);f.undoQueue.inSequence=!1,f.autoplay=!1}},c.redo=function(f){var n,o;if(f.framework&&f.framework.isPolar){f.framework.redo();return}if(!(f.undoQueue===void 0||isNaN(f.undoQueue.index)||f.undoQueue.index>=f.undoQueue.queue.length)){for(n=f.undoQueue.queue[f.undoQueue.index],f.undoQueue.inSequence=!0,o=0;o<n.redo.calls.length;o++)c.plotDo(f,n.redo.calls[o],n.redo.args[o]);f.undoQueue.inSequence=!1,f.autoplay=!1,f.undoQueue.index++}},c.plotDo=function(t,f,n){t.autoplay=!0,n=u(t,n),f.apply(null,n)},d.exports=c},{"../lib":778,"../plot_api/plot_config":815}],795:[function(e,d,S){S.counter=function(r,a,u,c){var t=(a||"")+(u?"":"$"),f=c===!1?"":"^";return r==="xy"?new RegExp(f+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(f+r+"([2-9]|[1-9][0-9]+)?"+t)}},{}],796:[function(e,d,S){var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;d.exports=function(u,c){for(;c;){var t=u.match(r);if(t)u=t[1];else if(u.match(a))u="";else throw new Error("bad relativeAttr call:"+[u,c]);if(c.charAt(0)==="^")c=c.slice(1);else break}return u&&c.charAt(0)!=="["?u+"."+c:u+c}},{}],797:[function(e,d,S){var r=e("./array").isArrayOrTypedArray,a=e("./is_plain_object");d.exports=function u(c,t){for(var f in t){var n=t[f],o=c[f];if(o!==n)if(f.charAt(0)==="_"||typeof n=="function"){if(f in c)continue;c[f]=n}else if(r(n)&&r(o)&&a(n[0])){if(f==="customdata"||f==="ids")continue;for(var l=Math.min(n.length,o.length),h=0;h<l;h++)o[h]!==n[h]&&a(n[h])&&a(o[h])&&u(o[h],n[h])}else a(n)&&a(o)&&(u(o,n),Object.keys(o).length||delete c[f])}}},{"./array":760,"./is_plain_object":779}],798:[function(e,d,S){var r=e("fast-isnumeric"),a=e("./loggers"),u=e("./identity"),c=e("../constants/numerical").BADNUM,t=1e-9;S.findBin=function(h,i,s){if(r(i.start))return s?Math.ceil((h-i.start)/i.size-t)-1:Math.floor((h-i.start)/i.size+t);var p=0,v=i.length,m=0,b=v>1?(i[v-1]-i[0])/(v-1):1,y,x;for(b>=0?x=s?f:n:x=s?l:o,h+=b*t*(s?-1:1)*(b>=0?1:-1);p<v&&m++<100;)y=Math.floor((p+v)/2),x(i[y],h)?p=y+1:v=y;return m>90&&a.log("Long binary search..."),p-1};function f(h,i){return h<i}function n(h,i){return h<=i}function o(h,i){return h>i}function l(h,i){return h>=i}S.sorterAsc=function(h,i){return h-i},S.sorterDes=function(h,i){return i-h},S.distinctVals=function(h,i){var s=(i||{}).unitMinDiff,p=h.slice();p.sort(S.sorterAsc);var v;for(v=p.length-1;v>-1&&p[v]===c;v--);var m=1;s||(m=p[v]-p[0]||1);for(var b=m/(v||1)/1e4,y=[],x,w=0;w<=v;w++){var g=p[w],T=g-x;x===void 0?(y.push(g),x=g):T>b&&(m=Math.min(m,T),y.push(g),x=g)}return{vals:y,minDiff:m}},S.roundUp=function(h,i,s){for(var p=0,v=i.length-1,m,b=0,y=s?0:1,x=s?1:0,w=s?Math.ceil:Math.floor;p<v&&b++<100;)m=w((p+v)/2),i[m]<=h?p=m+y:v=m-x;return i[p]},S.sort=function(h,i){for(var s=0,p=0,v=1;v<h.length;v++){var m=i(h[v],h[v-1]);if(m<0?s=1:m>0&&(p=1),s&&p)return h.sort(i)}return p?h:h.reverse()},S.findIndexOfMin=function(h,i){i=i||u;for(var s=1/0,p,v=0;v<h.length;v++){var m=i(h[v]);m<s&&(s=m,p=v)}return p}},{"../constants/numerical":753,"./identity":776,"./loggers":782,"fast-isnumeric":241}],799:[function(e,d,S){d.exports=function(a,u){(a.attr("class")||"").split(" ").forEach(function(c){c.indexOf("cursor-")===0&&a.classed(c,!1)}),u&&a.classed("cursor-"+u,!0)}},{}],800:[function(e,d,S){var r=e("../components/color"),a=function(){};d.exports=function(c){for(var t in c)typeof c[t]=="function"&&(c[t]=a);c.destroy=function(){c.container.parentNode.removeChild(c.container)};var f=document.createElement("div");f.className="no-webgl",f.style.cursor="pointer",f.style.fontSize="24px",f.style.color=r.defaults[0],f.style.position="absolute",f.style.left=f.style.top="0px",f.style.width=f.style.height="100%",f.style["background-color"]=r.lightLine,f.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",f.appendChild(n),c.container.appendChild(f),c.container.style.background="#FFFFFF",c.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":643}],801:[function(e,d,S){var r=e("fast-isnumeric"),a=e("./array").isArrayOrTypedArray;S.aggNums=function(u,c,t,f){var n,o;if((!f||f>t.length)&&(f=t.length),r(c)||(c=!1),a(t[0])){for(o=new Array(f),n=0;n<f;n++)o[n]=S.aggNums(u,c,t[n]);t=o}for(n=0;n<f;n++)r(c)?r(t[n])&&(c=u(+c,+t[n])):c=t[n];return c},S.len=function(u){return S.aggNums(function(c){return c+1},0,u)},S.mean=function(u,c){return c||(c=S.len(u)),S.aggNums(function(t,f){return t+f},0,u)/c},S.midRange=function(u){if(!(u===void 0||u.length===0))return(S.aggNums(Math.max,null,u)+S.aggNums(Math.min,null,u))/2},S.variance=function(u,c,t){return c||(c=S.len(u)),r(t)||(t=S.mean(u,c)),S.aggNums(function(f,n){return f+Math.pow(n-t,2)},0,u)/c},S.stdev=function(u,c,t){return Math.sqrt(S.variance(u,c,t))},S.median=function(u){var c=u.slice().sort();return S.interp(c,.5)},S.interp=function(u,c){if(!r(c))throw"n should be a finite number";if(c=c*u.length-.5,c<0)return u[0];if(c>u.length-1)return u[u.length-1];var t=c%1;return t*u[Math.ceil(c)]+(1-t)*u[Math.floor(c)]}},{"./array":760,"fast-isnumeric":241}],802:[function(e,d,S){var r=e("color-normalize");function a(u){return u?r(u):[0,0,0,1]}d.exports=a},{"color-normalize":125}],803:[function(e,d,S){var r=e("d3"),a=e("../lib"),u=a.strTranslate,c=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING;function f(U,Y){return U.node().getBoundingClientRect()[Y]}var n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;S.convertToTspans=function(U,Y,z){var B=U.text(),H=!U.attr("data-notex")&&typeof MathJax<"u"&&B.match(n),V=r.select(U.node().parentNode);if(V.empty())return;var Z=U.attr("class")?U.attr("class").split(" ")[0]:"text";Z+="-math",V.selectAll("svg."+Z).remove(),V.selectAll("g."+Z+"-group").remove(),U.style("display",null).attr({"data-unformatted":B,"data-math":"N"});function q(){V.empty()||(Z=U.attr("class")+"-math",V.select("svg."+Z).remove()),U.text("").style("white-space","pre");var J=N(U.node(),B);J&&U.style("pointer-events","all"),S.positionText(U),z&&z.call(U)}return H?(Y&&Y._promises||[]).push(new Promise(function(J){U.style("display","none");var ne=parseInt(U.node().style.fontSize,10),ve={fontSize:ne};i(H[2],ve,function($,j,ae){V.selectAll("svg."+Z).remove(),V.selectAll("g."+Z+"-group").remove();var ie=$&&$.select("svg");if(!ie||!ie.node()){q(),J();return}var te=V.append("g").classed(Z+"-group",!0).attr({"pointer-events":"none","data-unformatted":B,"data-math":"Y"});te.node().appendChild(ie.node()),j&&j.node()&&ie.node().insertBefore(j.node().cloneNode(!0),ie.node().firstChild),ie.attr({class:Z,height:ae.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var re=U.node().style.fill||"black",ce=ie.select("g");ce.attr({fill:re,stroke:re});var pe=f(ce,"width"),fe=f(ce,"height"),se=+U.attr("x")-pe*{start:0,middle:.5,end:1}[U.attr("text-anchor")||"start"],de=ne||f(U,"height"),be=-de/4;Z[0]==="y"?(te.attr({transform:"rotate("+[-90,+U.attr("x"),+U.attr("y")]+")"+u(-pe/2,be-fe/2)}),ie.attr({x:+U.attr("x"),y:+U.attr("y")})):Z[0]==="l"?ie.attr({x:U.attr("x"),y:be-fe/2}):Z[0]==="a"&&Z.indexOf("atitle")!==0?ie.attr({x:0,y:be}):ie.attr({x:se,y:+U.attr("y")+be-fe/2}),z&&z.call(U,te),J(te)})})):q(),U};var o=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g;function h(U){return U.replace(o,"\\lt ").replace(l,"\\gt ")}function i(U,Y,z){var B,H,V,Z;MathJax.Hub.Queue(function(){return H=a.extendDeepAll({},MathJax.Hub.config),V=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(B=MathJax.Hub.config.menuSettings.renderer,B!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var q="math-output-"+a.randstr({},64);return Z=r.select("body").append("div").attr({id:q}).style({visibility:"hidden",position:"absolute"}).style({"font-size":Y.fontSize+"px"}).text(h(U)),MathJax.Hub.Typeset(Z.node())},function(){var q=r.select("body").select("#MathJax_SVG_glyphs");if(Z.select(".MathJax_SVG").empty()||!Z.select("svg").node())a.log("There was an error in the tex syntax.",U),z();else{var J=Z.select("svg").node().getBoundingClientRect();z(Z.select(".MathJax_SVG"),q,J)}if(Z.remove(),B!=="SVG")return MathJax.Hub.setRenderer(B)},function(){return V!==void 0&&(MathJax.Hub.processSectionDelay=V),MathJax.Hub.Config(H)})}var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},p={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},m="\u200B",b=["http:","https:","mailto:","",void 0,":"],y=S.NEWLINES=/(\r\n?|\n)/g,x=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;S.BR_TAG_ALL=/<br(\s+.*)?>/gi;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,P=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,L=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function I(U,Y){if(!U)return null;var z=U.match(Y),B=z&&(z[3]||z[4]);return B&&R(B)}var C=/(^|;)\s*color:/;S.plainText=function(U,Y){Y=Y||{};for(var z=Y.len!==void 0&&Y.len!==-1?Y.len:1/0,B=Y.allowedTags!==void 0?Y.allowedTags:["br"],H="...",V=H.length,Z=U.split(x),q=[],J="",ne=0,ve=0;ve<Z.length;ve++){var $=Z[ve],j=$.match(w),ae=j&&j[2].toLowerCase();if(ae)B.indexOf(ae)!==-1&&(q.push($),J=ae);else{var ie=$.length;if(ne+ie<z)q.push($),ne+=ie;else if(ne<z){var te=z-ne;J&&(J!=="br"||te<=V||ie<=V)&&q.pop(),z>V?q.push($.substr(0,te-V)+H):q.push($.substr(0,te));break}J=""}}return q.join("")};var k={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function R(U){return U.replace(E,function(Y,z){var B;return z.charAt(0)==="#"?B=O(z.charAt(1)==="x"?parseInt(z.substr(2),16):parseInt(z.substr(1),10)):B=k[z],B||Y})}S.convertEntities=R;function O(U){if(!(U>1114111)){var Y=String.fromCodePoint;if(Y)return Y(U);var z=String.fromCharCode;return U<=65535?z(U):z((U>>10)+55232,U%1024+56320)}}function N(U,Y){Y=Y.replace(y," ");var z=!1,B=[],H,V=-1;function Z(){V++;var be=document.createElementNS(c.svg,"tspan");r.select(be).attr({class:"line",dy:V*t+"em"}),U.appendChild(be),H=be;var xe=B;if(B=[{node:be}],xe.length>1)for(var ke=1;ke<xe.length;ke++)q(xe[ke])}function q(be){var xe=be.type,ke={},Re;if(xe==="a"){Re="a";var Ke=be.target,ze=be.href,Je=be.popup;ze&&(ke={"xlink:xlink:show":Ke==="_blank"||Ke.charAt(0)!=="_"?"new":"replace",target:Ke,"xlink:xlink:href":ze},Je&&(ke.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Je+'");return false;'))}else Re="tspan";be.style&&(ke.style=be.style);var qe=document.createElementNS(c.svg,Re);if(xe==="sup"||xe==="sub"){J(H,m),H.appendChild(qe);var Ee=document.createElementNS(c.svg,"tspan");J(Ee,m),r.select(Ee).attr("dy",v[xe]),ke.dy=p[xe],H.appendChild(qe),H.appendChild(Ee)}else H.appendChild(qe);r.select(qe).attr(ke),H=be.node=qe,B.push(be)}function J(be,xe){be.appendChild(document.createTextNode(xe))}function ne(be){if(B.length===1){a.log("Ignoring unexpected end tag </"+be+">.",Y);return}var xe=B.pop();be!==xe.type&&a.log("Start tag <"+xe.type+"> doesnt match end tag <"+be+">. Pretending it did match.",Y),H=B[B.length-1].node}var ve=g.test(Y);ve?Z():(H=U,B=[{node:U}]);for(var $=Y.split(x),j=0;j<$.length;j++){var ae=$[j],ie=ae.match(w),te=ie&&ie[2].toLowerCase(),re=s[te];if(te==="br")Z();else if(re===void 0)J(H,R(ae));else if(ie[1])ne(te);else{var ce=ie[4],pe={type:te},fe=I(ce,T);if(fe?(fe=fe.replace(C,"$1 fill:"),re&&(fe+=";"+re)):re&&(fe=re),fe&&(pe.style=fe),te==="a"){z=!0;var se=I(ce,M);if(se){var de=document.createElement("a");de.href=se,b.indexOf(de.protocol)!==-1&&(pe.href=encodeURI(decodeURI(se)),pe.target=I(ce,P)||"_blank",pe.popup=I(ce,L))}}q(pe)}}return z}S.sanitizeHTML=function(Y){Y=Y.replace(y," ");for(var z=document.createElement("p"),B=z,H=[],V=Y.split(x),Z=0;Z<V.length;Z++){var q=V[Z],J=q.match(w),ne=J&&J[2].toLowerCase();if(ne in s)if(J[1])H.length&&(B=H.pop());else{var ve=J[4],$=I(ve,T),j=$?{style:$}:{};if(ne==="a"){var ae=I(ve,M);if(ae){var ie=document.createElement("a");if(ie.href=ae,b.indexOf(ie.protocol)!==-1){j.href=encodeURI(decodeURI(ae));var te=I(ve,P);te&&(j.target=te)}}}var re=document.createElement(ne);B.appendChild(re),r.select(re).attr(j),B=re,H.push(re)}else B.appendChild(document.createTextNode(R(q)))}var ce="innerHTML";return z[ce]},S.lineCount=function(Y){return Y.selectAll("tspan.line").size()||1},S.positionText=function(Y,z,B){return Y.each(function(){var H=r.select(this);function V(J,ne){return ne===void 0?(ne=H.attr(J),ne===null&&(H.attr(J,0),ne=0)):H.attr(J,ne),ne}var Z=V("x",z),q=V("y",B);this.nodeName==="text"&&H.selectAll("tspan.line").attr({x:Z,y:q})})};function G(U,Y,z){var B=z.horizontalAlign,H=z.verticalAlign||"top",V=U.node().getBoundingClientRect(),Z=Y.node().getBoundingClientRect(),q,J,ne;return H==="bottom"?J=function(){return V.bottom-q.height}:H==="middle"?J=function(){return V.top+(V.height-q.height)/2}:J=function(){return V.top},B==="right"?ne=function(){return V.right-q.width}:B==="center"?ne=function(){return V.left+(V.width-q.width)/2}:ne=function(){return V.left},function(){q=this.node().getBoundingClientRect();var ve=ne()-Z.left,$=J()-Z.top,j=z.gd||{};if(z.gd){j._fullLayout._calcInverseTransform(j);var ae=a.apply3DTransform(j._fullLayout._invTransform)(ve,$);ve=ae[0],$=ae[1]}return this.style({top:$+"px",left:ve+"px","z-index":1e3}),this}}S.makeEditable=function(U,Y){var z=Y.gd,B=Y.delegate,H=r.dispatch("edit","input","cancel"),V=B||U;if(U.style({"pointer-events":B?"none":"all"}),U.size()!==1)throw new Error("boo");function Z(){J(),U.style({opacity:0});var ne=V.attr("class"),ve;ne?ve="."+ne.split(" ")[0]+"-math-group":ve="[class*=-math-group]",ve&&r.select(U.node().parentNode).select(ve).style({opacity:0})}function q(ne){var ve=ne.node(),$=document.createRange();$.selectNodeContents(ve);var j=window.getSelection();j.removeAllRanges(),j.addRange($),ve.focus()}function J(){var ne=r.select(z),ve=ne.select(".svg-container"),$=ve.append("div"),j=U.node().style,ae=parseFloat(j.fontSize||12),ie=Y.text;ie===void 0&&(ie=U.attr("data-unformatted")),$.classed("plugin-editable editable",!0).style({position:"absolute","font-family":j.fontFamily||"Arial","font-size":ae,color:Y.fill||j.fill||"black",opacity:1,"background-color":Y.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ae/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ie).call(G(U,ve,Y)).on("blur",function(){z._editing=!1,U.text(this.textContent).style({opacity:1});var te=r.select(this).attr("class"),re;te?re="."+te.split(" ")[0]+"-math-group":re="[class*=-math-group]",re&&r.select(U.node().parentNode).select(re).style({opacity:0});var ce=this.textContent;r.select(this).transition().duration(0).remove(),r.select(document).on("mouseup",null),H.edit.call(U,ce)}).on("focus",function(){var te=this;z._editing=!0,r.select(document).on("mouseup",function(){if(r.event.target===te)return!1;document.activeElement===$.node()&&$.node().blur()})}).on("keyup",function(){r.event.which===27?(z._editing=!1,U.style({opacity:1}),r.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),H.cancel.call(U,this.textContent)):(H.input.call(U,this.textContent),r.select(this).call(G(U,ve,Y)))}).on("keydown",function(){r.event.which===13&&this.blur()}).call(q)}return Y.immediate?Z():V.on("click",Z),r.rebind(U,H,"on")}},{"../constants/alignment":745,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],804:[function(e,d,S){var r={};S.throttle=function(c,t,f){var n=r[c],o=Date.now();if(!n){for(var l in r)r[l].ts<o-6e4&&delete r[l];n=r[c]={ts:0,timer:null}}a(n);function h(){f(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(o>n.ts+t){h();return}n.timer=setTimeout(function(){h(),n.timer=null},t)},S.done=function(u){var c=r[u];return!c||!c.timer?Promise.resolve():new Promise(function(t){var f=c.onDone;c.onDone=function(){f&&f(),t(),c.onDone=null}})},S.clear=function(u){if(u)a(r[u]),delete r[u];else for(var c in r)S.clear(c)};function a(u){u&&u.timer!==null&&(clearTimeout(u.timer),u.timer=null)}},{}],805:[function(e,d,S){var r=e("fast-isnumeric");d.exports=function(u,c){if(u>0)return Math.log(u)/Math.LN10;var t=Math.log(Math.min(c[0],c[1]))/Math.LN10;return r(t)||(t=Math.log(Math.max(c[0],c[1]))/Math.LN10-6),t}},{"fast-isnumeric":241}],806:[function(e,d,S){var r=d.exports={},a=e("../plots/geo/constants").locationmodeToLayer,u=e("topojson-client").feature;r.getTopojsonName=function(c){return[c.scope.replace(/ /g,"-"),"_",c.resolution.toString(),"m"].join("")},r.getTopojsonPath=function(c,t){return c+t+".json"},r.getTopojsonFeatures=function(c,t){var f=a[c.locationmode],n=t.objects[f];return u(t,n).features}},{"../plots/geo/constants":858,"topojson-client":579}],807:[function(e,d,S){d.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],808:[function(e,d,S){d.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],809:[function(e,d,S){var r=e("../registry");d.exports=function(u){for(var c=r.layoutArrayContainers,t=r.layoutArrayRegexes,f=u.split("[")[0],n,o,l=0;l<t.length;l++)if(o=u.match(t[l]),o&&o.index===0){n=o[0];break}if(n||(n=c[c.indexOf(f)]),!n)return!1;var h=u.substr(n.length);return h?(o=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),o?{array:n,index:Number(o[1]),property:o[3]||""}:!1):{array:n,index:"",property:""}}},{"../registry":911}],810:[function(e,d,S){var r=e("../lib"),a=r.extendFlat,u=r.isPlainObject,c={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},f=c.flags.slice().concat(["fullReplot"]),n=t.flags.slice().concat("layoutReplot");d.exports={traces:c,layout:t,traceFlags:function(){return o(f)},layoutFlags:function(){return o(n)},update:function(i,s){var p=s.editType;if(p&&p!=="none")for(var v=p.split("+"),m=0;m<v.length;m++)i[v[m]]=!0},overrideAll:l};function o(i){for(var s={},p=0;p<i.length;p++)s[i[p]]=!1;return s}function l(i,s,p){var v=a({},i);for(var m in v){var b=v[m];u(b)&&(v[m]=h(b,s,p,m))}return p==="from-root"&&(v.editType=s),v}function h(i,s,p,v){if(i.valType){var m=a({},i);if(m.editType=s,Array.isArray(i.items)){m.items=new Array(i.items.length);for(var b=0;b<i.items.length;b++)m.items[b]=h(i.items[b],s)}return m}else return l(i,s,v.charAt(0)==="_"?"nested":"from-root")}},{"../lib":778}],811:[function(e,d,S){var r=e("fast-isnumeric"),a=e("gl-mat4/fromQuat"),u=e("../registry"),c=e("../lib"),t=e("../plots/plots"),f=e("../plots/cartesian/axis_ids"),n=e("../components/color"),o=f.cleanId,l=f.getFromTrace,h=u.traceIs;S.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&c.log("Clearing previous rejected promises from queue."),g._promises=[]},S.cleanLayout=function(g){var T,M;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var P=(t.subplotsRegistry.cartesian||{}).attrRegex,L=(t.subplotsRegistry.polar||{}).attrRegex,I=(t.subplotsRegistry.ternary||{}).attrRegex,C=(t.subplotsRegistry.gl3d||{}).attrRegex,k=Object.keys(g);for(T=0;T<k.length;T++){var E=k[T];if(P&&P.test(E)){var R=g[E];R.anchor&&R.anchor!=="free"&&(R.anchor=o(R.anchor)),R.overlaying&&(R.overlaying=o(R.overlaying)),R.type||(R.isdate?R.type="date":R.islog?R.type="log":R.isdate===!1&&R.islog===!1&&(R.type="linear")),(R.autorange==="withzero"||R.autorange==="tozero")&&(R.autorange=!0,R.rangemode="tozero"),delete R.islog,delete R.isdate,delete R.categories,b(R,"domain")&&delete R.domain,R.autotick!==void 0&&(R.tickmode===void 0&&(R.tickmode=R.autotick?"auto":"linear"),delete R.autotick),s(R)}else if(L&&L.test(E)){var O=g[E];s(O.radialaxis)}else if(I&&I.test(E)){var N=g[E];s(N.aaxis),s(N.baxis),s(N.caxis)}else if(C&&C.test(E)){var G=g[E],U=G.cameraposition;if(Array.isArray(U)&&U[0].length===4){var Y=U[0],z=U[1],B=U[2],H=a([],Y),V=[];for(M=0;M<3;++M)V[M]=z[M]+B*H[2+4*M];G.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete G.cameraposition}s(G.xaxis),s(G.yaxis),s(G.zaxis)}}var Z=Array.isArray(g.annotations)?g.annotations.length:0;for(T=0;T<Z;T++){var q=g.annotations[T];!c.isPlainObject(q)||(q.ref&&(q.ref==="paper"?(q.xref="paper",q.yref="paper"):q.ref==="data"&&(q.xref="x",q.yref="y"),delete q.ref),i(q,"xref"),i(q,"yref"))}var J=Array.isArray(g.shapes)?g.shapes.length:0;for(T=0;T<J;T++){var ne=g.shapes[T];!c.isPlainObject(ne)||(i(ne,"xref"),i(ne,"yref"))}var ve=Array.isArray(g.images)?g.images.length:0;for(T=0;T<ve;T++){var $=g.images[T];!c.isPlainObject($)||(i($,"xref"),i($,"yref"))}var j=g.legend;return j&&(j.x>3?(j.x=1.02,j.xanchor="left"):j.x<-2&&(j.x=-.02,j.xanchor="right"),j.y>3?(j.y=1.02,j.yanchor="bottom"):j.y<-2&&(j.y=-.02,j.yanchor="top")),s(g),g.dragmode==="rotate"&&(g.dragmode="orbit"),n.clean(g),g.template&&g.template.layout&&S.cleanLayout(g.template.layout),g};function i(g,T){var M=g[T],P=T.charAt(0);M&&M!=="paper"&&(g[T]=o(M,P,!0))}function s(g){g&&((typeof g.title=="string"||typeof g.title=="number")&&(g.title={text:g.title}),T("titlefont","font"),T("titleposition","position"),T("titleside","side"),T("titleoffset","offset"));function T(M,P){var L=g[M],I=g.title&&g.title[P];L&&!I&&(g.title||(g.title={}),g.title[P]=g[M],delete g[M])}}S.cleanData=function(g){for(var T=0;T<g.length;T++){var M=g[T],P;if(M.type==="histogramy"&&"xbins"in M&&!("ybins"in M)&&(M.ybins=M.xbins,delete M.xbins),M.error_y&&"opacity"in M.error_y){var L=n.defaults,I=M.error_y.color||(h(M,"bar")?n.defaultLine:L[T%L.length]);M.error_y.color=n.addOpacity(n.rgb(I),n.opacity(I)*M.error_y.opacity),delete M.error_y.opacity}if("bardir"in M&&(M.bardir==="h"&&(h(M,"bar")||M.type.substr(0,9)==="histogram")&&(M.orientation="h",S.swapXYData(M)),delete M.bardir),M.type==="histogramy"&&S.swapXYData(M),(M.type==="histogramx"||M.type==="histogramy")&&(M.type="histogram"),"scl"in M&&!("colorscale"in M)&&(M.colorscale=M.scl,delete M.scl),"reversescl"in M&&!("reversescale"in M)&&(M.reversescale=M.reversescl,delete M.reversescl),M.xaxis&&(M.xaxis=o(M.xaxis,"x")),M.yaxis&&(M.yaxis=o(M.yaxis,"y")),h(M,"gl3d")&&M.scene&&(M.scene=t.subplotsRegistry.gl3d.cleanId(M.scene)),!h(M,"pie-like")&&!h(M,"bar-like"))if(Array.isArray(M.textposition))for(P=0;P<M.textposition.length;P++)M.textposition[P]=m(M.textposition[P]);else M.textposition&&(M.textposition=m(M.textposition));var C=u.getModule(M);if(C&&C.colorbar){var k=C.colorbar.container,E=k?M[k]:M;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(M.type==="surface"&&c.isPlainObject(M.contours)){var R=["x","y","z"];for(P=0;P<R.length;P++){var O=M.contours[R[P]];!c.isPlainObject(O)||(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(M.type==="candlestick"||M.type==="ohlc"){var N=(M.increasing||{}).showlegend!==!1,G=(M.decreasing||{}).showlegend!==!1,U=p(M.increasing),Y=p(M.decreasing);if(U!==!1&&Y!==!1){var z=v(U,Y,N,G);z&&(M.name=z)}else(U||Y)&&!M.name&&(M.name=U||Y)}if(Array.isArray(M.transforms)){var B=M.transforms;for(P=0;P<B.length;P++){var H=B[P];if(!!c.isPlainObject(H))switch(H.type){case"filter":H.filtersrc&&(H.target=H.filtersrc,delete H.filtersrc),H.calendar&&(H.valuecalendar||(H.valuecalendar=H.calendar),delete H.calendar);break;case"groupby":if(H.styles=H.styles||H.style,H.styles&&!Array.isArray(H.styles)){var V=H.styles,Z=Object.keys(V);H.styles=[];for(var q=0;q<Z.length;q++)H.styles.push({target:Z[q],value:V[Z[q]]})}break}}}b(M,"line")&&delete M.line,"marker"in M&&(b(M.marker,"line")&&delete M.marker.line,b(M,"marker")&&delete M.marker),n.clean(M),M.autobinx&&(delete M.autobinx,delete M.xbins),M.autobiny&&(delete M.autobiny,delete M.ybins),s(M),M.colorbar&&s(M.colorbar),M.marker&&M.marker.colorbar&&s(M.marker.colorbar),M.line&&M.line.colorbar&&s(M.line.colorbar),M.aaxis&&s(M.aaxis),M.baxis&&s(M.baxis)}};function p(g){if(!c.isPlainObject(g))return!1;var T=g.name;return delete g.name,delete g.showlegend,(typeof T=="string"||typeof T=="number")&&String(T)}function v(g,T,M,P){if(M&&!P)return g;if(P&&!M||!g.trim())return T;if(!T.trim())return g;var L=Math.min(g.length,T.length),I;for(I=0;I<L&&g.charAt(I)===T.charAt(I);I++);var C=g.substr(0,I);return C.trim()}function m(g){var T="middle",M="center";return typeof g=="string"&&(g.indexOf("top")!==-1?T="top":g.indexOf("bottom")!==-1&&(T="bottom"),g.indexOf("left")!==-1?M="left":g.indexOf("right")!==-1&&(M="right")),T+" "+M}function b(g,T){return T in g&&typeof g[T]=="object"&&Object.keys(g[T]).length===0}S.swapXYData=function(g){var T;if(c.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var M=g.error_y,P="copy_ystyle"in M?M.copy_ystyle:!(M.color||M.thickness||M.width);c.swapAttrs(g,["error_?.copy_ystyle"]),P&&c.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if(typeof g.hoverinfo=="string"){var L=g.hoverinfo.split("+");for(T=0;T<L.length;T++)L[T]==="x"?L[T]="y":L[T]==="y"&&(L[T]="x");g.hoverinfo=L.join("+")}},S.coerceTraceIndices=function(g,T){if(r(T))return[T];if(!Array.isArray(T)||!T.length)return g.data.map(function(L,I){return I});if(Array.isArray(T)){for(var M=[],P=0;P<T.length;P++)c.isIndex(T[P],g.data.length)?M.push(T[P]):c.warn("trace index (",T[P],") is not a number or is out of bounds");return M}return T},S.manageArrayContainers=function(g,T,M){var P=g.obj,L=g.parts,I=L.length,C=L[I-1],k=r(C);if(k&&T===null){var E=L.slice(0,I-1).join("."),R=c.nestedProperty(P,E).get();R.splice(C,1)}else k&&g.get()===void 0&&g.get()===void 0&&(M[g.astr]=null),g.set(T)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(g){var T=g.search(y);if(T>0)return g.substr(0,T)}S.hasParent=function(g,T){for(var M=x(T);M;){if(M in g)return!0;M=x(M)}return!1};var w=["x","y","z"];S.clearAxisTypes=function(g,T,M){for(var P=0;P<T.length;P++)for(var L=g._fullData[P],I=0;I<3;I++){var C=l(g,L,w[I]);if(C&&C.type!=="log"){var k=C._name,E=C._id.substr(1);if(E.substr(0,5)==="scene"){if(M[E]!==void 0)continue;k=E+"."+k}var R=k+".type";M[k]===void 0&&M[R]===void 0&&c.nestedProperty(g.layout,R).set(null)}}}},{"../components/color":643,"../lib":778,"../plots/cartesian/axis_ids":831,"../plots/plots":891,"../registry":911,"fast-isnumeric":241,"gl-mat4/fromQuat":282}],812:[function(e,d,S){var r=e("./plot_api");S.plot=r.plot,S.newPlot=r.newPlot,S.restyle=r.restyle,S.relayout=r.relayout,S.redraw=r.redraw,S.update=r.update,S._guiRestyle=r._guiRestyle,S._guiRelayout=r._guiRelayout,S._guiUpdate=r._guiUpdate,S._storeDirectGUIEdit=r._storeDirectGUIEdit,S.react=r.react,S.extendTraces=r.extendTraces,S.prependTraces=r.prependTraces,S.addTraces=r.addTraces,S.deleteTraces=r.deleteTraces,S.moveTraces=r.moveTraces,S.purge=r.purge,S.addFrames=r.addFrames,S.deleteFrames=r.deleteFrames,S.animate=r.animate,S.setPlotConfig=r.setPlotConfig,S.toImage=e("./to_image"),S.validate=e("./validate"),S.downloadImage=e("../snapshot/download");var a=e("./template_api");S.makeTemplate=a.makeTemplate,S.validateTemplate=a.validateTemplate},{"../snapshot/download":913,"./plot_api":814,"./template_api":819,"./to_image":820,"./validate":821}],813:[function(e,d,S){var r=e("../lib/is_plain_object"),a=e("../lib/noop"),u=e("../lib/loggers"),c=e("../lib/search").sorterAsc,t=e("../registry");S.containerArrayMatch=e("./container_array_match");var f=S.isAddVal=function(l){return l==="add"||r(l)},n=S.isRemoveVal=function(l){return l===null||l==="remove"};S.applyContainerArrayChanges=function(l,h,i,s,p){var v=h.astr,m=t.getComponentMethod(v,"supplyLayoutDefaults"),b=t.getComponentMethod(v,"draw"),y=t.getComponentMethod(v,"drawOne"),x=s.replot||s.recalc||m===a||b===a,w=l.layout,g=l._fullLayout;if(i[""]){Object.keys(i).length>1&&u.warn("Full array edits are incompatible with other edits",v);var T=i[""][""];if(n(T))h.set(null);else if(Array.isArray(T))h.set(T);else return u.warn("Unrecognized full array edit value",v,T),!0;return x?!1:(m(w,g),b(l),!0)}var M=Object.keys(i).map(Number).sort(c),P=h.get(),L=P||[],I=p(g,v).get(),C=[],k=-1,E=L.length,R,O,N,G,U,Y,z,B;for(R=0;R<M.length;R++){if(N=M[R],G=i[N],U=Object.keys(G),Y=G[""],z=f(Y),N<0||N>L.length-(z?0:1)){u.warn("index out of range",v,N);continue}if(Y!==void 0)U.length>1&&u.warn("Insertion & removal are incompatible with edits to the same index.",v,N),n(Y)?C.push(N):z?(Y==="add"&&(Y={}),L.splice(N,0,Y),I&&I.splice(N,0,{})):u.warn("Unrecognized full object edit value",v,N,Y),k===-1&&(k=N);else for(O=0;O<U.length;O++)B=v+"["+N+"].",p(L[N],U[O],B).set(G[U[O]])}for(R=C.length-1;R>=0;R--)L.splice(C[R],1),I&&I.splice(C[R],1);if(L.length?P||h.set(L):h.set(null),x)return!1;if(m(w,g),y!==a){var H;if(k===-1)H=M;else{for(E=Math.max(L.length,E),H=[],R=0;R<M.length&&(N=M[R],!(N>=k));R++)H.push(N);for(R=k;R<E;R++)H.push(R)}for(R=0;R<H.length;R++)y(l,H[R])}else b(l);return!0}},{"../lib/is_plain_object":779,"../lib/loggers":782,"../lib/noop":787,"../lib/search":798,"../registry":911,"./container_array_match":809}],814:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("has-hover"),c=e("../lib"),t=c.nestedProperty,f=e("../lib/events"),n=e("../lib/queue"),o=e("../registry"),l=e("./plot_schema"),h=e("../plots/plots"),i=e("../plots/polar/legacy"),s=e("../plots/cartesian/axes"),p=e("../components/drawing"),v=e("../components/color"),m=e("../plots/cartesian/graph_interact").initInteractions,b=e("../constants/xmlns_namespaces"),y=e("../lib/svg_text_utils"),x=e("../plots/cartesian/select").clearSelect,w=e("./plot_config").dfltConfig,g=e("./manage_arrays"),T=e("./helpers"),M=e("./subroutines"),P=e("./edit_types"),L=e("../plots/cartesian/constants").AX_NAME_PATTERN,I=0,C=5;function k(Me,Ie,He,Ye){var ut;if(Me=c.getGraphDiv(Me),f.init(Me),c.isPlainObject(Ie)){var nt=Ie;Ie=nt.data,He=nt.layout,Ye=nt.config,ut=nt.frames}var Ge=f.triggerHandler(Me,"plotly_beforeplot",[Ie,He,Ye]);if(Ge===!1)return Promise.reject();!Ie&&!He&&!c.isPlotDiv(Me)&&c.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Me);function at(){if(ut)return S.addFrames(Me,ut)}G(Me,Ye),He||(He={}),r.select(Me).classed("js-plotly-plot",!0),p.makeTester(),Array.isArray(Me._promises)||(Me._promises=[]);var et=(Me.data||[]).length===0&&Array.isArray(Ie);Array.isArray(Ie)&&(T.cleanData(Ie),et?Me.data=Ie:Me.data.push.apply(Me.data,Ie),Me.empty=!1),(!Me.layout||et)&&(Me.layout=T.cleanLayout(He)),h.supplyDefaults(Me);var lt=Me._fullLayout,Ct=lt._has("cartesian");if(!lt._has("polar")&&Ie&&Ie[0]&&Ie[0].r)return c.log("Legacy polar charts are deprecated!"),U(Me,Ie,He);lt._replotting=!0,(et||lt._shouldCreateBgLayer)&&(Qe(Me),lt._shouldCreateBgLayer&&delete lt._shouldCreateBgLayer),Me.framework!==Qe&&(Me.framework=Qe,Qe(Me)),p.initGradients(Me),et&&s.saveShowSpikeInitial(Me);var Pt=!Me.calcdata||Me.calcdata.length!==(Me._fullData||[]).length;Pt&&h.doCalcdata(Me);for(var $t=0;$t<Me.calcdata.length;$t++)Me.calcdata[$t][0].trace=Me._fullData[$t];Me._context.responsive?Me._responsiveChartHandler||(Me._responsiveChartHandler=function(){c.isHidden(Me)||h.resize(Me)},window.addEventListener("resize",Me._responsiveChartHandler)):c.clearResponsive(Me);var je=c.extendFlat({},lt._size),Oe=0;function mt(){for(var Vt=lt._basePlotModules,cr=0;cr<Vt.length;cr++)Vt[cr].drawFramework&&Vt[cr].drawFramework(Me);if(!lt._glcanvas&&lt._has("gl")&&(lt._glcanvas=lt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Sr){return Sr.key}),lt._glcanvas.enter().append("canvas").attr("class",function(Sr){return"gl-canvas gl-canvas-"+Sr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),lt._glcanvas){lt._glcanvas.attr("width",lt.width).attr("height",lt.height);var Or=lt._glcanvas.data()[0].regl;if(Or&&(Math.floor(lt.width)!==Or._gl.drawingBufferWidth||Math.floor(lt.height)!==Or._gl.drawingBufferHeight)){var kr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Oe)c.error(kr);else return c.log(kr+" Clearing graph and plotting again."),h.cleanPlot([],{},Me._fullData,lt),h.supplyDefaults(Me),lt=Me._fullLayout,h.doCalcdata(Me),Oe++,mt()}}return lt.modebar.orientation==="h"?lt._modebardiv.style("height",null).style("width","100%"):lt._modebardiv.style("width",null).style("height",lt.height+"px"),h.previousPromises(Me)}function wt(){if(h.clearAutoMarginIds(Me),M.drawMarginPushers(Me),s.allowAutoMargin(Me),lt._has("pie"))for(var Vt=Me._fullData,cr=0;cr<Vt.length;cr++){var Or=Vt[cr];Or.type==="pie"&&Or.automargin&&h.allowAutoMargin(Me,"pie."+Or.uid+".automargin")}return h.doAutoMargin(Me),h.previousPromises(Me)}function yt(){if(!!h.didMarginChange(je,lt._size))return c.syncOrAsync([wt,M.layoutStyles],Me)}function St(){if(!Pt){kt();return}return c.syncOrAsync([o.getComponentMethod("shapes","calcAutorange"),o.getComponentMethod("annotations","calcAutorange"),kt],Me)}function kt(){Me._transitioning||(M.doAutoRangeAndConstraints(Me),et&&s.saveRangeInitial(Me),o.getComponentMethod("rangeslider","calcAutorange")(Me))}function Rt(){return s.draw(Me,et?"":"redraw")}var zt=[h.previousPromises,at,mt,wt,yt];Ct&&zt.push(St),zt.push(M.layoutStyles),Ct&&zt.push(Rt,function(cr){cr._fullLayout._insideTickLabelsAutorange&&xe(cr,cr._fullLayout._insideTickLabelsAutorange).then(function(){cr._fullLayout._insideTickLabelsAutorange=void 0})}),zt.push(M.drawData,M.finalDraw,m,h.addLinks,h.rehover,h.redrag,h.doAutoMargin,Xt,h.previousPromises);function Xt(Vt){Vt._fullLayout._insideTickLabelsAutorange&&et&&s.saveRangeInitial(Vt,!0)}var Yt=c.syncOrAsync(zt,Me);return(!Yt||!Yt.then)&&(Yt=Promise.resolve()),Yt.then(function(){return E(Me),Me})}function E(Me){var Ie=Me._fullLayout;Ie._redrawFromAutoMarginCount?Ie._redrawFromAutoMarginCount--:Me.emit("plotly_afterplot")}function R(Me){return c.extendFlat(w,Me)}function O(Me,Ie){try{Me._fullLayout._paper.style("background",Ie)}catch(He){c.error(He)}}function N(Me,Ie){var He=v.combine(Ie,"white");O(Me,He)}function G(Me,Ie){if(!Me._context){Me._context=c.extendDeep({},w);var He=r.select("base");Me._context._baseUrl=He.size()&&He.attr("href")?window.location.href.split("#")[0]:""}var Ye=Me._context,ut,nt,Ge;if(Ie){for(nt=Object.keys(Ie),ut=0;ut<nt.length;ut++)Ge=nt[ut],!(Ge==="editable"||Ge==="edits")&&Ge in Ye&&(Ge==="setBackground"&&Ie[Ge]==="opaque"?Ye[Ge]=N:Ye[Ge]=Ie[Ge]);Ie.plot3dPixelRatio&&!Ye.plotGlPixelRatio&&(Ye.plotGlPixelRatio=Ye.plot3dPixelRatio);var at=Ie.editable;if(at!==void 0)for(Ye.editable=at,nt=Object.keys(Ye.edits),ut=0;ut<nt.length;ut++)Ye.edits[nt[ut]]=at;if(Ie.edits)for(nt=Object.keys(Ie.edits),ut=0;ut<nt.length;ut++)Ge=nt[ut],Ge in Ye.edits&&(Ye.edits[Ge]=Ie.edits[Ge]);Ye._exportedPlot=Ie._exportedPlot}Ye.staticPlot&&(Ye.editable=!1,Ye.edits={},Ye.autosizable=!1,Ye.scrollZoom=!1,Ye.doubleClick=!1,Ye.showTips=!1,Ye.showLink=!1,Ye.displayModeBar=!1),Ye.displayModeBar==="hover"&&!u&&(Ye.displayModeBar=!0),(Ye.setBackground==="transparent"||typeof Ye.setBackground!="function")&&(Ye.setBackground=O),Ye._hasZeroHeight=Ye._hasZeroHeight||Me.clientHeight===0,Ye._hasZeroWidth=Ye._hasZeroWidth||Me.clientWidth===0;var et=Ye.scrollZoom,lt=Ye._scrollZoom={};if(et===!0)lt.cartesian=1,lt.gl3d=1,lt.geo=1,lt.mapbox=1;else if(typeof et=="string"){var Ct=et.split("+");for(ut=0;ut<Ct.length;ut++)lt[Ct[ut]]=1}else et!==!1&&(lt.gl3d=1,lt.geo=1,lt.mapbox=1)}function U(Me,Ie,He){var Ye=r.select(Me).selectAll(".plot-container").data([0]);Ye.enter().insert("div",":first-child").classed("plot-container plotly",!0);var ut=Ye.selectAll(".svg-container").data([0]);ut.enter().append("div").classed("svg-container",!0).style("position","relative"),ut.html(""),Ie&&(Me.data=Ie),He&&(Me.layout=He),i.manager.fillLayout(Me),ut.style({width:Me._fullLayout.width+"px",height:Me._fullLayout.height+"px"}),Me.framework=i.manager.framework(Me),Me.framework({data:Me.data,layout:Me.layout},ut.node()),Me.framework.setUndoPoint();var nt=Me.framework.svg(),Ge=1,at=Me._fullLayout.title?Me._fullLayout.title.text:"";(at===""||!at)&&(Ge=0);var et=function(){this.call(y.convertToTspans,Me)},lt=nt.select(".title-group text").call(et);if(Me._context.edits.titleText){var Ct=c._(Me,"Click to enter Plot title");(!at||at===Ct)&&(Ge=.2,lt.attr({"data-unformatted":Ct}).text(Ct).style({opacity:Ge}).on("mouseover.opacity",function(){r.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(1e3).style("opacity",0)}));var Pt=function(){this.call(y.makeEditable,{gd:Me}).on("edit",function($t){Me.framework({layout:{title:{text:$t}}}),this.text($t).call(et),this.call(Pt)}).on("cancel",function(){var $t=this.attr("data-unformatted");this.text($t).call(et)})};lt.call(Pt)}return Me._context.setBackground(Me,Me._fullLayout.paper_bgcolor),h.addLinks(Me),Promise.resolve()}function Y(Me){if(Me=c.getGraphDiv(Me),!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);return T.cleanData(Me.data),T.cleanLayout(Me.layout),Me.calcdata=void 0,S.plot(Me).then(function(){return Me.emit("plotly_redraw"),Me})}function z(Me,Ie,He,Ye){return Me=c.getGraphDiv(Me),h.cleanPlot([],{},Me._fullData||[],Me._fullLayout||{}),h.purge(Me),S.plot(Me,Ie,He,Ye)}function B(Me,Ie){var He=Ie+1,Ye=[],ut,nt;for(ut=0;ut<Me.length;ut++)nt=Me[ut],nt<0?Ye.push(He+nt):Ye.push(nt);return Ye}function H(Me,Ie,He){var Ye,ut;for(Ye=0;Ye<Ie.length;Ye++){if(ut=Ie[Ye],ut!==parseInt(ut,10))throw new Error("all values in "+He+" must be integers");if(ut>=Me.data.length||ut<-Me.data.length)throw new Error(He+" must be valid indices for gd.data.");if(Ie.indexOf(ut,Ye+1)>-1||ut>=0&&Ie.indexOf(-Me.data.length+ut)>-1||ut<0&&Ie.indexOf(Me.data.length+ut)>-1)throw new Error("each index in "+He+" must be unique.")}}function V(Me,Ie,He){if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof Ie>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ie)||(Ie=[Ie]),H(Me,Ie,"currentIndices"),typeof He<"u"&&!Array.isArray(He)&&(He=[He]),typeof He<"u"&&H(Me,He,"newIndices"),typeof He<"u"&&Ie.length!==He.length)throw new Error("current and new indices must be of equal length.")}function Z(Me,Ie,He){var Ye,ut;if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof Ie>"u")throw new Error("traces must be defined.");for(Array.isArray(Ie)||(Ie=[Ie]),Ye=0;Ye<Ie.length;Ye++)if(ut=Ie[Ye],typeof ut!="object"||Array.isArray(ut)||ut===null)throw new Error("all values in traces array must be non-array objects");if(typeof He<"u"&&!Array.isArray(He)&&(He=[He]),typeof He<"u"&&He.length!==Ie.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function q(Me,Ie,He,Ye){var ut=c.isPlainObject(Ye);if(!Array.isArray(Me.data))throw new Error("gd.data must be an array");if(!c.isPlainObject(Ie))throw new Error("update must be a key:value object");if(typeof He>"u")throw new Error("indices must be an integer or array of integers");H(Me,He,"indices");for(var nt in Ie){if(!Array.isArray(Ie[nt])||Ie[nt].length!==He.length)throw new Error("attribute "+nt+" must be an array of length equal to indices array length");if(ut&&(!(nt in Ye)||!Array.isArray(Ye[nt])||Ye[nt].length!==Ie[nt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function J(Me,Ie,He,Ye){var ut=c.isPlainObject(Ye),nt=[],Ge,at,et,lt,Ct;Array.isArray(He)||(He=[He]),He=B(He,Me.data.length-1);for(var Pt in Ie)for(var $t=0;$t<He.length;$t++){if(Ge=Me.data[He[$t]],et=t(Ge,Pt),at=et.get(),lt=Ie[Pt][$t],!c.isArrayOrTypedArray(lt))throw new Error("attribute: "+Pt+" index: "+$t+" must be an array");if(!c.isArrayOrTypedArray(at))throw new Error("cannot extend missing or non-array attribute: "+Pt);if(at.constructor!==lt.constructor)throw new Error("cannot extend array with an array of a different type: "+Pt);Ct=ut?Ye[Pt][$t]:Ye,a(Ct)||(Ct=-1),nt.push({prop:et,target:at,insert:lt,maxp:Math.floor(Ct)})}return nt}function ne(Me,Ie,He,Ye,ut){q(Me,Ie,He,Ye);for(var nt=J(Me,Ie,He,Ye),Ge={},at={},et=0;et<nt.length;et++){var lt=nt[et].prop,Ct=nt[et].maxp,Pt=ut(nt[et].target,nt[et].insert,Ct);lt.set(Pt[0]),Array.isArray(Ge[lt.astr])||(Ge[lt.astr]=[]),Ge[lt.astr].push(Pt[1]),Array.isArray(at[lt.astr])||(at[lt.astr]=[]),at[lt.astr].push(nt[et].target.length)}return{update:Ge,maxPoints:at}}function ve(Me,Ie){var He=new Me.constructor(Me.length+Ie.length);return He.set(Me),He.set(Ie,Me.length),He}function $(Me,Ie,He,Ye){Me=c.getGraphDiv(Me);function ut(et,lt,Ct){var Pt,$t;if(c.isTypedArray(et))if(Ct<0){var je=new et.constructor(0),Oe=ve(et,lt);Ct<0?(Pt=Oe,$t=je):(Pt=je,$t=Oe)}else if(Pt=new et.constructor(Ct),$t=new et.constructor(et.length+lt.length-Ct),Ct===lt.length)Pt.set(lt),$t.set(et);else if(Ct<lt.length){var mt=lt.length-Ct;Pt.set(lt.subarray(mt)),$t.set(et),$t.set(lt.subarray(0,mt),et.length)}else{var wt=Ct-lt.length,yt=et.length-wt;Pt.set(et.subarray(yt)),Pt.set(lt,wt),$t.set(et.subarray(0,yt))}else Pt=et.concat(lt),$t=Ct>=0&&Ct<Pt.length?Pt.splice(0,Pt.length-Ct):[];return[Pt,$t]}var nt=ne(Me,Ie,He,Ye,ut),Ge=S.redraw(Me),at=[Me,nt.update,He,nt.maxPoints];return n.add(Me,S.prependTraces,at,$,arguments),Ge}function j(Me,Ie,He,Ye){Me=c.getGraphDiv(Me);function ut(et,lt,Ct){var Pt,$t;if(c.isTypedArray(et))if(Ct<=0){var je=new et.constructor(0),Oe=ve(lt,et);Ct<0?(Pt=Oe,$t=je):(Pt=je,$t=Oe)}else if(Pt=new et.constructor(Ct),$t=new et.constructor(et.length+lt.length-Ct),Ct===lt.length)Pt.set(lt),$t.set(et);else if(Ct<lt.length){var mt=lt.length-Ct;Pt.set(lt.subarray(0,mt)),$t.set(lt.subarray(mt)),$t.set(et,mt)}else{var wt=Ct-lt.length;Pt.set(lt),Pt.set(et.subarray(0,wt),lt.length),$t.set(et.subarray(wt))}else Pt=lt.concat(et),$t=Ct>=0&&Ct<Pt.length?Pt.splice(Ct,Pt.length):[];return[Pt,$t]}var nt=ne(Me,Ie,He,Ye,ut),Ge=S.redraw(Me),at=[Me,nt.update,He,nt.maxPoints];return n.add(Me,S.extendTraces,at,j,arguments),Ge}function ae(Me,Ie,He){Me=c.getGraphDiv(Me);var Ye=[],ut=S.deleteTraces,nt=ae,Ge=[Me,Ye],at=[Me,Ie],et,lt;for(Z(Me,Ie,He),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(Ct){return c.extendFlat({},Ct)}),T.cleanData(Ie),et=0;et<Ie.length;et++)Me.data.push(Ie[et]);for(et=0;et<Ie.length;et++)Ye.push(-Ie.length+et);if(typeof He>"u")return lt=S.redraw(Me),n.add(Me,ut,Ge,nt,at),lt;Array.isArray(He)||(He=[He]);try{V(Me,Ye,He)}catch(Ct){throw Me.data.splice(Me.data.length-Ie.length,Ie.length),Ct}return n.startSequence(Me),n.add(Me,ut,Ge,nt,at),lt=S.moveTraces(Me,Ye,He),n.stopSequence(Me),lt}function ie(Me,Ie){Me=c.getGraphDiv(Me);var He=[],Ye=S.addTraces,ut=ie,nt=[Me,He,Ie],Ge=[Me,Ie],at,et;if(typeof Ie>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),H(Me,Ie,"indices"),Ie=B(Ie,Me.data.length-1),Ie.sort(c.sorterDes),at=0;at<Ie.length;at+=1)et=Me.data.splice(Ie[at],1)[0],He.push(et);var lt=S.redraw(Me);return n.add(Me,Ye,nt,ut,Ge),lt}function te(Me,Ie,He){Me=c.getGraphDiv(Me);var Ye=[],ut=[],nt=te,Ge=te,at=[Me,He,Ie],et=[Me,Ie,He],lt;if(V(Me,Ie,He),Ie=Array.isArray(Ie)?Ie:[Ie],typeof He>"u")for(He=[],lt=0;lt<Ie.length;lt++)He.push(-Ie.length+lt);for(He=Array.isArray(He)?He:[He],Ie=B(Ie,Me.data.length-1),He=B(He,Me.data.length-1),lt=0;lt<Me.data.length;lt++)Ie.indexOf(lt)===-1&&Ye.push(Me.data[lt]);for(lt=0;lt<Ie.length;lt++)ut.push({newIndex:He[lt],trace:Me.data[Ie[lt]]});for(ut.sort(function(Pt,$t){return Pt.newIndex-$t.newIndex}),lt=0;lt<ut.length;lt+=1)Ye.splice(ut[lt].newIndex,0,ut[lt].trace);Me.data=Ye;var Ct=S.redraw(Me);return n.add(Me,nt,at,Ge,et),Ct}function re(Me,Ie,He,Ye){Me=c.getGraphDiv(Me),T.clearPromiseQueue(Me);var ut={};if(typeof Ie=="string")ut[Ie]=He;else if(c.isPlainObject(Ie))ut=c.extendFlat({},Ie),Ye===void 0&&(Ye=He);else return c.warn("Restyle fail.",Ie,He,Ye),Promise.reject();Object.keys(ut).length&&(Me.changed=!0);var nt=T.coerceTraceIndices(Me,Ye),Ge=de(Me,ut,nt),at=Ge.flags;at.calc&&(Me.calcdata=void 0),at.clearAxisTypes&&T.clearAxisTypes(Me,nt,{});var et=[];at.fullReplot?et.push(S.plot):(et.push(h.previousPromises),h.supplyDefaults(Me),at.markerSize&&(h.doCalcdata(Me),Re(et)),at.style&&et.push(M.doTraceStyle),at.colorbars&&et.push(M.doColorBars),et.push(E)),et.push(h.rehover,h.redrag),n.add(Me,re,[Me,Ge.undoit,Ge.traces],re,[Me,Ge.redoit,Ge.traces]);var lt=c.syncOrAsync(et,Me);return(!lt||!lt.then)&&(lt=Promise.resolve()),lt.then(function(){return Me.emit("plotly_restyle",Ge.eventData),Me})}function ce(Me){return Me===void 0?null:Me}function pe(Me,Ie){return Ie?function(He,Ye,ut){var nt=t(He,Ye),Ge=nt.set;return nt.set=function(at){var et=(ut||"")+Ye;fe(et,nt.get(),at,Me),Ge(at)},nt}:t}function fe(Me,Ie,He,Ye){if(Array.isArray(Ie)||Array.isArray(He))for(var ut=Array.isArray(Ie)?Ie:[],nt=Array.isArray(He)?He:[],Ge=Math.max(ut.length,nt.length),at=0;at<Ge;at++)fe(Me+"["+at+"]",ut[at],nt[at],Ye);else if(c.isPlainObject(Ie)||c.isPlainObject(He)){var et=c.isPlainObject(Ie)?Ie:{},lt=c.isPlainObject(He)?He:{},Ct=c.extendFlat({},et,lt);for(var Pt in Ct)fe(Me+"."+Pt,et[Pt],lt[Pt],Ye)}else Ye[Me]===void 0&&(Ye[Me]=ce(Ie))}function se(Me,Ie,He){for(var Ye in He){var ut=t(Me,Ye);fe(Ye,ut.get(),He[Ye],Ie)}}function de(Me,Ie,He){var Ye=Me._fullLayout,ut=Me._fullData,nt=Me.data,Ge=Ye._guiEditing,at=pe(Ye._preGUI,Ge),et=c.extendDeepAll({},Ie),lt;be(Ie);var Ct=P.traceFlags(),Pt={},$t={},je;function Oe(){return He.map(function(){})}function mt(Er){var Br=s.id2name(Er);je.indexOf(Br)===-1&&je.push(Br)}function wt(Er){return"LAYOUT"+Er+".autorange"}function yt(Er){return"LAYOUT"+Er+".range"}function St(Er){for(var Br=Er;Br<ut.length;Br++)if(ut[Br]._input===nt[Er])return ut[Br]}function kt(Er,Br,Lr){if(Array.isArray(Er)){Er.forEach(function(Qn){kt(Qn,Br,Lr)});return}if(!(Er in Ie||T.hasParent(Ie,Er))){var pn;if(Er.substr(0,6)==="LAYOUT")pn=at(Me.layout,Er.replace("LAYOUT",""));else{var On=He[Lr],Fn=Ye._tracePreGUI[St(On)._fullInput.uid];pn=pe(Fn,Ge)(nt[On],Er)}Er in $t||($t[Er]=Oe()),$t[Er][Lr]===void 0&&($t[Er][Lr]=ce(pn.get())),Br!==void 0&&pn.set(Br)}}function Rt(Er){return function(Br){return ut[Br][Er]}}function zt(Er){return function(Br,Lr){return Br===!1?ut[He[Lr]][Er]:null}}for(var Xt in Ie){if(T.hasParent(Ie,Xt))throw new Error("cannot set "+Xt+" and a parent attribute simultaneously");var Yt=Ie[Xt],Vt,cr,Or,kr,Sr,vn;if((Xt==="autobinx"||Xt==="autobiny")&&(Xt=Xt.charAt(Xt.length-1)+"bins",Array.isArray(Yt)?Yt=Yt.map(zt(Xt)):Yt===!1?Yt=He.map(Rt(Xt)):Yt=null),Pt[Xt]=Yt,Xt.substr(0,6)==="LAYOUT"){Or=at(Me.layout,Xt.replace("LAYOUT","")),$t[Xt]=[ce(Or.get())],Or.set(Array.isArray(Yt)?Yt[0]:Yt),Ct.calc=!0;continue}for($t[Xt]=Oe(),lt=0;lt<He.length;lt++){Vt=nt[He[lt]],cr=St(He[lt]);var Rn=Ye._tracePreGUI[cr._fullInput.uid];if(Or=pe(Rn,Ge)(Vt,Xt),kr=Or.get(),Sr=Array.isArray(Yt)?Yt[lt%Yt.length]:Yt,Sr!==void 0){var hn=Or.parts[Or.parts.length-1],An=Xt.substr(0,Xt.length-hn.length-1),En=An?An+".":"",Mr=An?t(cr,An).get():cr;if(vn=l.getTraceValObject(cr,Or.parts),vn&&vn.impliedEdits&&Sr!==null)for(var xr in vn.impliedEdits)kt(c.relativeAttr(Xt,xr),vn.impliedEdits[xr],lt);else if((hn==="thicknessmode"||hn==="lenmode")&&kr!==Sr&&(Sr==="fraction"||Sr==="pixels")&&Mr){var dn=Ye._size,qr=Mr.orient,on=qr==="top"||qr==="bottom";if(hn==="thicknessmode"){var Vr=on?dn.h:dn.w;kt(En+"thickness",Mr.thickness*(Sr==="fraction"?1/Vr:Vr),lt)}else{var ln=on?dn.w:dn.h;kt(En+"len",Mr.len*(Sr==="fraction"?1/ln:ln),lt)}}else if(Xt==="type"&&(Sr==="pie"!=(kr==="pie")||Sr==="funnelarea"!=(kr==="funnelarea"))){var cn="x",Zr="y";(Sr==="bar"||kr==="bar")&&Vt.orientation==="h"&&(cn="y",Zr="x"),c.swapAttrs(Vt,["?","?src"],"labels",cn),c.swapAttrs(Vt,["d?","?0"],"label",cn),c.swapAttrs(Vt,["?","?src"],"values",Zr),kr==="pie"||kr==="funnelarea"?(t(Vt,"marker.color").set(t(Vt,"marker.colors").get()),Ye._pielayer.selectAll("g.trace").remove()):o.traceIs(Vt,"cartesian")&&t(Vt,"marker.colors").set(t(Vt,"marker.color").get())}$t[Xt][lt]=ce(kr);var ht=["swapxy","swapxyaxes","orientation","orientationaxes"];if(ht.indexOf(Xt)!==-1){if(Xt==="orientation"){Or.set(Sr);var Nt=Vt.x&&!Vt.y?"h":"v";if((Or.get()||Nt)===cr.orientation)continue}else Xt==="orientationaxes"&&(Vt.orientation={v:"h",h:"v"}[cr.orientation]);T.swapXYData(Vt),Ct.calc=Ct.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Or.parts[0])!==-1?(T.manageArrayContainers(Or,Sr,$t),Ct.calc=!0):(vn?vn.arrayOk&&!o.traceIs(cr,"regl")&&(c.isArrayOrTypedArray(Sr)||c.isArrayOrTypedArray(kr))?Ct.calc=!0:P.update(Ct,vn):Ct.calc=!0,Or.set(Sr))}}if(["swapxyaxes","orientationaxes"].indexOf(Xt)!==-1&&s.swap(Me,He),Xt==="orientationaxes"){var rr=t(Me.layout,"hovermode"),mr=rr.get();mr==="x"?rr.set("y"):mr==="y"?rr.set("x"):mr==="x unified"?rr.set("y unified"):mr==="y unified"&&rr.set("x unified")}if(["orientation","type"].indexOf(Xt)!==-1){for(je=[],lt=0;lt<He.length;lt++){var Rr=nt[He[lt]];o.traceIs(Rr,"cartesian")&&(mt(Rr.xaxis||"x"),mt(Rr.yaxis||"y"))}kt(je.map(wt),!0,0),kt(je.map(yt),[0,1],0)}}return(Ct.calc||Ct.plot)&&(Ct.fullReplot=!0),{flags:Ct,undoit:$t,redoit:Pt,traces:He,eventData:c.extendDeepNoArrays([],[et,He])}}function be(Me){var Ie=c.counterRegex("axis",".title",!1,!1),He=/colorbar\.title$/,Ye=Object.keys(Me),ut,nt,Ge;for(ut=0;ut<Ye.length;ut++)nt=Ye[ut],Ge=Me[nt],(nt==="title"||Ie.test(nt)||He.test(nt))&&(typeof Ge=="string"||typeof Ge=="number")?at(nt,nt.replace("title","title.text")):nt.indexOf("titlefont")>-1?at(nt,nt.replace("titlefont","title.font")):nt.indexOf("titleposition")>-1?at(nt,nt.replace("titleposition","title.position")):nt.indexOf("titleside")>-1?at(nt,nt.replace("titleside","title.side")):nt.indexOf("titleoffset")>-1&&at(nt,nt.replace("titleoffset","title.offset"));function at(et,lt){Me[lt]=Me[et],delete Me[et]}}function xe(Me,Ie,He){if(Me=c.getGraphDiv(Me),T.clearPromiseQueue(Me),Me.framework&&Me.framework.isPolar)return Promise.resolve(Me);var Ye={};if(typeof Ie=="string")Ye[Ie]=He;else if(c.isPlainObject(Ie))Ye=c.extendFlat({},Ie);else return c.warn("Relayout fail.",Ie,He),Promise.reject();Object.keys(Ye).length&&(Me.changed=!0);var ut=qe(Me,Ye),nt=ut.flags;nt.calc&&(Me.calcdata=void 0);var Ge=[h.previousPromises];nt.layoutReplot?Ge.push(M.layoutReplot):Object.keys(Ye).length&&(ke(Me,nt,ut)||h.supplyDefaults(Me),nt.legend&&Ge.push(M.doLegend),nt.layoutstyle&&Ge.push(M.layoutStyles),nt.axrange&&Re(Ge,ut.rangesAltered),nt.ticks&&Ge.push(M.doTicksRelayout),nt.modebar&&Ge.push(M.doModeBar),nt.camera&&Ge.push(M.doCamera),nt.colorbars&&Ge.push(M.doColorBars),Ge.push(E)),Ge.push(h.rehover,h.redrag),n.add(Me,xe,[Me,ut.undoit],xe,[Me,ut.redoit]);var at=c.syncOrAsync(Ge,Me);return(!at||!at.then)&&(at=Promise.resolve(Me)),at.then(function(){return Me.emit("plotly_relayout",ut.eventData),Me})}function ke(Me,Ie,He){var Ye=Me._fullLayout;if(!Ie.axrange)return!1;for(var ut in Ie)if(ut!=="axrange"&&Ie[ut])return!1;for(var nt in He.rangesAltered){var Ge=s.id2name(nt),at=Me.layout[Ge],et=Ye[Ge];if(et.autorange=at.autorange,at.range&&(et.range=at.range.slice()),et.cleanRange(),et._matchGroup){for(var lt in et._matchGroup)if(lt!==nt){var Ct=Ye[s.id2name(lt)];Ct.autorange=et.autorange,Ct.range=et.range.slice(),Ct._input.range=et.range.slice()}}}return!0}function Re(Me,Ie){var He=Ie?function(Ye){var ut=[],nt=!0;for(var Ge in Ie){var at=s.getFromId(Ye,Ge);if(ut.push(Ge),(at.ticklabelposition||"").indexOf("inside")!==-1&&at._anchorAxis&&ut.push(at._anchorAxis._id),at._matchGroup)for(var et in at._matchGroup)Ie[et]||ut.push(et);at.automargin&&(nt=!1)}return s.draw(Ye,ut,{skipTitle:nt})}:function(Ye){return s.draw(Ye,"redraw")};Me.push(x,M.doAutoRangeAndConstraints,He,M.drawData,M.finalDraw)}var Ke=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ze=/^[xyz]axis[0-9]*\.autorange$/,Je=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function qe(Me,Ie){var He=Me.layout,Ye=Me._fullLayout,ut=Ye._guiEditing,nt=pe(Ye._preGUI,ut),Ge=Object.keys(Ie),at=s.list(Me),et=c.extendDeepAll({},Ie),lt={},Ct,Pt,$t;for(be(Ie),Ge=Object.keys(Ie),Pt=0;Pt<Ge.length;Pt++)if(Ge[Pt].indexOf("allaxes")===0){for($t=0;$t<at.length;$t++){var je=at[$t]._id.substr(1),Oe=je.indexOf("scene")!==-1?je+".":"",mt=Ge[Pt].replace("allaxes",Oe+at[$t]._name);Ie[mt]||(Ie[mt]=Ie[Ge[Pt]])}delete Ie[Ge[Pt]]}var wt=P.layoutFlags(),yt={},St={};function kt(On,Fn){if(Array.isArray(On)){On.forEach(function(ya){kt(ya,Fn)});return}if(!(On in Ie||T.hasParent(Ie,On))){var Qn=nt(He,On);On in St||(St[On]=ce(Qn.get())),Fn!==void 0&&Qn.set(Fn)}}var Rt={},zt;function Xt(On){var Fn=s.name2id(On.split(".")[0]);return Rt[Fn]=1,Fn}for(var Yt in Ie){if(T.hasParent(Ie,Yt))throw new Error("cannot set "+Yt+" and a parent attribute simultaneously");for(var Vt=nt(He,Yt),cr=Ie[Yt],Or=Vt.parts.length,kr=Or-1;kr>0&&typeof Vt.parts[kr]!="string";)kr--;var Sr=Vt.parts[kr],vn=Vt.parts[kr-1]+"."+Sr,Rn=Vt.parts.slice(0,kr).join("."),hn=t(Me.layout,Rn).get(),An=t(Ye,Rn).get(),En=Vt.get();if(cr!==void 0){yt[Yt]=cr,St[Yt]=Sr==="reverse"?cr:ce(En);var Mr=l.getLayoutValObject(Ye,Vt.parts);if(Mr&&Mr.impliedEdits&&cr!==null)for(var xr in Mr.impliedEdits)kt(c.relativeAttr(Yt,xr),Mr.impliedEdits[xr]);if(["width","height"].indexOf(Yt)!==-1)if(cr){kt("autosize",null);var dn=Yt==="height"?"width":"height";kt(dn,Ye[dn])}else Ye[Yt]=Me._initialAutoSize[Yt];else if(Yt==="autosize")kt("width",cr?null:Ye.width),kt("height",cr?null:Ye.height);else if(vn.match(Ke))Xt(vn),t(Ye,Rn+"._inputRange").set(null);else if(vn.match(ze)){Xt(vn),t(Ye,Rn+"._inputRange").set(null);var qr=t(Ye,Rn).get();qr._inputDomain&&(qr._input.domain=qr._inputDomain.slice())}else vn.match(Je)&&t(Ye,Rn+"._inputDomain").set(null);if(Sr==="type"){zt=hn;var on=An.type==="linear"&&cr==="log",Vr=An.type==="log"&&cr==="linear";if(on||Vr){if(!zt||!zt.range)kt(Rn+".autorange",!0);else if(An.autorange)on&&(zt.range=zt.range[1]>zt.range[0]?[1,2]:[2,1]);else{var ln=zt.range[0],cn=zt.range[1];on?(ln<=0&&cn<=0&&kt(Rn+".autorange",!0),ln<=0?ln=cn/1e6:cn<=0&&(cn=ln/1e6),kt(Rn+".range[0]",Math.log(ln)/Math.LN10),kt(Rn+".range[1]",Math.log(cn)/Math.LN10)):(kt(Rn+".range[0]",Math.pow(10,ln)),kt(Rn+".range[1]",Math.pow(10,cn)))}Array.isArray(Ye._subplots.polar)&&Ye._subplots.polar.length&&Ye[Vt.parts[0]]&&Vt.parts[1]==="radialaxis"&&delete Ye[Vt.parts[0]]._subplot.viewInitial["radialaxis.range"],o.getComponentMethod("annotations","convertCoords")(Me,An,cr,kt),o.getComponentMethod("images","convertCoords")(Me,An,cr,kt)}else kt(Rn+".autorange",!0),kt(Rn+".range",null);t(Ye,Rn+"._inputRange").set(null)}else if(Sr.match(L)){var Zr=t(Ye,Yt).get(),ht=(cr||{}).type;(!ht||ht==="-")&&(ht="linear"),o.getComponentMethod("annotations","convertCoords")(Me,Zr,ht,kt),o.getComponentMethod("images","convertCoords")(Me,Zr,ht,kt)}var Nt=g.containerArrayMatch(Yt);if(Nt){Ct=Nt.array,Pt=Nt.index;var rr=Nt.property,mr=Mr||{editType:"calc"};Pt!==""&&rr===""&&(g.isAddVal(cr)?St[Yt]=null:g.isRemoveVal(cr)?St[Yt]=(t(He,Ct).get()||[])[Pt]:c.warn("unrecognized full object value",Ie)),P.update(wt,mr),lt[Ct]||(lt[Ct]={});var Rr=lt[Ct][Pt];Rr||(Rr=lt[Ct][Pt]={}),Rr[rr]=cr,delete Ie[Yt]}else Sr==="reverse"?(hn.range?hn.range.reverse():(kt(Rn+".autorange",!0),hn.range=[1,0]),An.autorange?wt.calc=!0:wt.plot=!0):(Ye._has("scatter-like")&&Ye._has("regl")&&Yt==="dragmode"&&(cr==="lasso"||cr==="select")&&!(En==="lasso"||En==="select")||Ye._has("gl2d")?wt.plot=!0:Mr?P.update(wt,Mr):wt.calc=!0,Vt.set(cr))}}for(Ct in lt){var Er=g.applyContainerArrayChanges(Me,nt(He,Ct),lt[Ct],wt,nt);Er||(wt.plot=!0)}for(var Br in Rt){zt=s.getFromId(Me,Br);var Lr=zt&&zt._constraintGroup;if(Lr){wt.calc=!0;for(var pn in Lr)Rt[pn]||(s.getFromId(Me,pn)._constraintShrinkable=!0)}}return(Ee(Me)||Ie.height||Ie.width)&&(wt.plot=!0),(wt.plot||wt.calc)&&(wt.layoutReplot=!0),{flags:wt,rangesAltered:Rt,undoit:St,redoit:yt,eventData:et}}function Ee(Me){var Ie=Me._fullLayout,He=Ie.width,Ye=Ie.height;return Me.layout.autosize&&h.plotAutoSize(Me,Me.layout,Ie),Ie.width!==He||Ie.height!==Ye}function Ae(Me,Ie,He,Ye){if(Me=c.getGraphDiv(Me),T.clearPromiseQueue(Me),Me.framework&&Me.framework.isPolar)return Promise.resolve(Me);c.isPlainObject(Ie)||(Ie={}),c.isPlainObject(He)||(He={}),Object.keys(Ie).length&&(Me.changed=!0),Object.keys(He).length&&(Me.changed=!0);var ut=T.coerceTraceIndices(Me,Ye),nt=de(Me,c.extendFlat({},Ie),ut),Ge=nt.flags,at=qe(Me,c.extendFlat({},He)),et=at.flags;(Ge.calc||et.calc)&&(Me.calcdata=void 0),Ge.clearAxisTypes&&T.clearAxisTypes(Me,ut,He);var lt=[];et.layoutReplot?lt.push(M.layoutReplot):Ge.fullReplot?lt.push(S.plot):(lt.push(h.previousPromises),ke(Me,et,at)||h.supplyDefaults(Me),Ge.style&&lt.push(M.doTraceStyle),(Ge.colorbars||et.colorbars)&&lt.push(M.doColorBars),et.legend&&lt.push(M.doLegend),et.layoutstyle&&lt.push(M.layoutStyles),et.axrange&&Re(lt,at.rangesAltered),et.ticks&&lt.push(M.doTicksRelayout),et.modebar&&lt.push(M.doModeBar),et.camera&&lt.push(M.doCamera),lt.push(E)),lt.push(h.rehover,h.redrag),n.add(Me,Ae,[Me,nt.undoit,at.undoit,nt.traces],Ae,[Me,nt.redoit,at.redoit,nt.traces]);var Ct=c.syncOrAsync(lt,Me);return(!Ct||!Ct.then)&&(Ct=Promise.resolve(Me)),Ct.then(function(){return Me.emit("plotly_update",{data:nt.eventData,layout:at.eventData}),Me})}function Be(Me){return function(He){He._fullLayout._guiEditing=!0;var Ye=Me.apply(null,arguments);return He._fullLayout._guiEditing=!1,Ye}}var $e=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],xt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function bt(Me,Ie){for(var He=0;He<Ie.length;He++){var Ye=Ie[He],ut=Me.match(Ye.pattern);if(ut)return{head:ut[1],attr:Ye.attr}}}function Ne(Me,Ie){var He=t(Ie,Me).get();if(He!==void 0)return He;var Ye=Me.split(".");for(Ye.pop();Ye.length>1;)if(Ye.pop(),He=t(Ie,Ye.join(".")+".uirevision").get(),He!==void 0)return He;return Ie.uirevision}function st(Me,Ie){for(var He=0;He<Ie.length;He++)if(Ie[He]._fullInput.uid===Me)return He;return-1}function _t(Me,Ie,He){for(var Ye=0;Ye<Ie.length;Ye++)if(Ie[Ye].uid===Me)return Ye;return!Ie[He]||Ie[He].uid?-1:He}function Ot(Me,Ie){var He=c.isPlainObject(Me),Ye=Array.isArray(Me);return He||Ye?(He&&c.isPlainObject(Ie)||Ye&&Array.isArray(Ie))&&JSON.stringify(Me)===JSON.stringify(Ie):Me===Ie}function Wt(Me,Ie,He,Ye){var ut=Ye._preGUI,nt,Ge,at,et,lt,Ct,Pt,$t,je=[],Oe={};for(nt in ut){if(lt=bt(nt,$e),lt){if(Ge=lt.attr||lt.head+".uirevision",at=t(Ye,Ge).get(),et=at&&Ne(Ge,Ie),et&&et===at&&(Ct=ut[nt],Ct===null&&(Ct=void 0),Pt=t(Ie,nt),$t=Pt.get(),Ot($t,Ct))){$t===void 0&&nt.substr(nt.length-9)==="autorange"&&je.push(nt.substr(0,nt.length-10)),Pt.set(ce(t(Ye,nt).get()));continue}}else c.warn("unrecognized GUI edit: "+nt);delete ut[nt],nt.substr(nt.length-8,6)==="range["&&(Oe[nt.substr(0,nt.length-9)]=1)}for(var mt=0;mt<je.length;mt++){var wt=je[mt];if(Oe[wt]){var yt=t(Ie,wt).get();yt&&delete yt.autorange}}var St=Ye._tracePreGUI;for(var kt in St){var Rt=St[kt],zt=null,Xt;for(nt in Rt){if(!zt){var Yt=st(kt,He);if(Yt<0){delete St[kt];break}var Vt=He[Yt];Xt=Vt._fullInput;var cr=_t(kt,Me,Xt.index);if(cr<0){delete St[kt];break}zt=Me[cr]}if(lt=bt(nt,xt),lt){if(lt.attr?(at=t(Ye,lt.attr).get(),et=at&&Ne(lt.attr,Ie)):(at=Xt.uirevision,et=zt.uirevision,et===void 0&&(et=Ie.uirevision)),et&&et===at&&(Ct=Rt[nt],Ct===null&&(Ct=void 0),Pt=t(zt,nt),$t=Pt.get(),Ot($t,Ct))){Pt.set(ce(t(Xt,nt).get()));continue}}else c.warn("unrecognized GUI edit: "+nt+" in trace uid "+kt);delete Rt[nt]}}}function Et(Me,Ie,He,Ye){var ut,nt;function Ge(){return S.addFrames(Me,ut)}Me=c.getGraphDiv(Me),T.clearPromiseQueue(Me);var at=Me._fullData,et=Me._fullLayout;if(!c.isPlotDiv(Me)||!at||!et)nt=S.newPlot(Me,Ie,He,Ye);else{if(c.isPlainObject(Ie)){var lt=Ie;Ie=lt.data,He=lt.layout,Ye=lt.config,ut=lt.frames}var Ct=!1;if(Ye){var Pt=c.extendDeep({},Me._context);Me._context=void 0,G(Me,Ye),Ct=At(Pt,Me._context)}Me.data=Ie||[],T.cleanData(Me.data),Me.layout=He||{},T.cleanLayout(Me.layout),Wt(Me.data,Me.layout,at,et),h.supplyDefaults(Me,{skipUpdateCalc:!0});var $t=Me._fullData,je=Me._fullLayout,Oe=je.datarevision===void 0,mt=je.transition,wt=Zt(Me,et,je,Oe,mt),yt=wt.newDataRevision,St=jt(Me,at,$t,Oe,mt,yt);if(Ee(Me)&&(wt.layoutReplot=!0),St.calc||wt.calc){Me.calcdata=void 0;for(var kt=Object.getOwnPropertyNames(je),Rt=0;Rt<kt.length;Rt++){var zt=kt[Rt],Xt=zt.substring(0,5);if(Xt==="xaxis"||Xt==="yaxis"){var Yt=je[zt]._emptyCategories;Yt&&Yt()}}}else h.supplyDefaultsUpdateCalc(Me.calcdata,$t);var Vt=[];if(ut&&(Me._transitionData={},h.createTransitionData(Me),Vt.push(Ge)),je.transition&&!Ct&&(St.anim||wt.anim))wt.ticks&&Vt.push(M.doTicksRelayout),h.doCalcdata(Me),M.doAutoRangeAndConstraints(Me),Vt.push(function(){return h.transitionFromReact(Me,St,wt,et)});else if(St.fullReplot||wt.layoutReplot||Ct)Me._fullLayout._skipDefaults=!0,Vt.push(S.plot);else{for(var cr in wt.arrays){var Or=wt.arrays[cr];if(Or.length){var kr=o.getComponentMethod(cr,"drawOne");if(kr!==c.noop)for(var Sr=0;Sr<Or.length;Sr++)kr(Me,Or[Sr]);else{var vn=o.getComponentMethod(cr,"draw");if(vn===c.noop)throw new Error("cannot draw components: "+cr);vn(Me)}}}Vt.push(h.previousPromises),St.style&&Vt.push(M.doTraceStyle),(St.colorbars||wt.colorbars)&&Vt.push(M.doColorBars),wt.legend&&Vt.push(M.doLegend),wt.layoutstyle&&Vt.push(M.layoutStyles),wt.axrange&&Re(Vt),wt.ticks&&Vt.push(M.doTicksRelayout),wt.modebar&&Vt.push(M.doModeBar),wt.camera&&Vt.push(M.doCamera),Vt.push(E)}Vt.push(h.rehover,h.redrag),nt=c.syncOrAsync(Vt,Me),(!nt||!nt.then)&&(nt=Promise.resolve(Me))}return nt.then(function(){return Me.emit("plotly_react",{data:Ie,layout:He}),Me})}function jt(Me,Ie,He,Ye,ut,nt){var Ge=Ie.length===He.length;if(!ut&&!Ge)return{fullReplot:!0,calc:!0};var at=P.traceFlags();at.arrays={},at.nChanges=0,at.nChangesAnim=0;var et,lt;function Ct(je){var Oe=l.getTraceValObject(lt,je);return!lt._module.animatable&&Oe.anim&&(Oe.anim=!1),Oe}var Pt={getValObject:Ct,flags:at,immutable:Ye,transition:ut,newDataRevision:nt,gd:Me},$t={};for(et=0;et<Ie.length;et++)if(He[et]){if(lt=He[et]._fullInput,h.hasMakesDataTransform(lt)&&(lt=He[et]),$t[lt.uid])continue;$t[lt.uid]=1,Mt(Ie[et]._fullInput,lt,[],Pt)}return(at.calc||at.plot)&&(at.fullReplot=!0),ut&&at.nChanges&&at.nChangesAnim&&(at.anim=at.nChanges===at.nChangesAnim&&Ge?"all":"some"),at}function Zt(Me,Ie,He,Ye,ut){var nt=P.layoutFlags();nt.arrays={},nt.rangesAltered={},nt.nChanges=0,nt.nChangesAnim=0;function Ge(et){return l.getLayoutValObject(He,et)}var at={getValObject:Ge,flags:nt,immutable:Ye,transition:ut,gd:Me};return Mt(Ie,He,[],at),(nt.plot||nt.calc)&&(nt.layoutReplot=!0),ut&&nt.nChanges&&nt.nChangesAnim&&(nt.anim=nt.nChanges===nt.nChangesAnim?"all":"some"),nt}function Mt(Me,Ie,He,Ye){var ut,nt,Ge,at=Ye.getValObject,et=Ye.flags,lt=Ye.immutable,Ct=Ye.inArray,Pt=Ye.arrayIndex;function $t(){var Rn=ut.editType;if(Ct&&Rn.indexOf("arraydraw")!==-1){c.pushUnique(et.arrays[Ct],Pt);return}P.update(et,ut),Rn!=="none"&&et.nChanges++,Ye.transition&&ut.anim&&et.nChangesAnim++,(Ke.test(Ge)||ze.test(Ge))&&(et.rangesAltered[He[0]]=1),Je.test(Ge)&&t(Ie,"_inputDomain").set(null),nt==="datarevision"&&(et.newDataRevision=1)}function je(Rn){return Rn.valType==="data_array"||Rn.arrayOk}for(nt in Me){if(et.calc&&!Ye.transition)return;var Oe=Me[nt],mt=Ie[nt],wt=He.concat(nt);if(Ge=wt.join("."),!(nt.charAt(0)==="_"||typeof Oe=="function"||Oe===mt)){if((nt==="tick0"||nt==="dtick")&&He[0]!=="geo"){var yt=Ie.tickmode;if(yt==="auto"||yt==="array"||!yt)continue}if(!(nt==="range"&&Ie.autorange)&&!((nt==="zmin"||nt==="zmax")&&Ie.type==="contourcarpet")&&(ut=at(wt),!!ut&&!(ut._compareAsJSON&&JSON.stringify(Oe)===JSON.stringify(mt)))){var St=ut.valType,kt,Rt=je(ut),zt=Array.isArray(Oe),Xt=Array.isArray(mt);if(zt&&Xt){var Yt="_input_"+nt,Vt=Me[Yt],cr=Ie[Yt];if(Array.isArray(Vt)&&Vt===cr)continue}if(mt===void 0)Rt&&zt?et.calc=!0:$t();else if(ut._isLinkedToArray){var Or=[],kr=!1;Ct||(et.arrays[nt]=Or);var Sr=Math.min(Oe.length,mt.length),vn=Math.max(Oe.length,mt.length);if(Sr!==vn)if(ut.editType==="arraydraw")kr=!0;else{$t();continue}for(kt=0;kt<Sr;kt++)Mt(Oe[kt],mt[kt],wt.concat(kt),c.extendFlat({inArray:nt,arrayIndex:kt},Ye));if(kr)for(kt=Sr;kt<vn;kt++)Or.push(kt)}else!St&&c.isPlainObject(Oe)?Mt(Oe,mt,wt,Ye):Rt?zt&&Xt?(lt&&(et.calc=!0),(lt||Ye.newDataRevision)&&$t()):zt!==Xt?et.calc=!0:$t():zt&&Xt?(Oe.length!==mt.length||String(Oe)!==String(mt))&&$t():$t()}}}for(nt in Ie)if(!(nt in Me||nt.charAt(0)==="_"||typeof Ie[nt]=="function"))if(ut=at(He.concat(nt)),je(ut)&&Array.isArray(Ie[nt])){et.calc=!0;return}else $t()}function At(Me,Ie){var He;for(He in Me)if(He.charAt(0)!=="_"){var Ye=Me[He],ut=Ie[He];if(Ye!==ut)if(c.isPlainObject(Ye)&&c.isPlainObject(ut)){if(At(Ye,ut))return!0}else if(Array.isArray(Ye)&&Array.isArray(ut)){if(Ye.length!==ut.length)return!0;for(var nt=0;nt<Ye.length;nt++)if(Ye[nt]!==ut[nt])if(c.isPlainObject(Ye[nt])&&c.isPlainObject(ut[nt])){if(At(Ye[nt],ut[nt]))return!0}else return!0}else return!0}}function ft(Me,Ie,He){if(Me=c.getGraphDiv(Me),!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ye=Me._transitionData;Ye._frameQueue||(Ye._frameQueue=[]),He=h.supplyAnimationDefaults(He);var ut=He.transition,nt=He.frame;Ye._frameWaitingCnt===void 0&&(Ye._frameWaitingCnt=0);function Ge(lt){return Array.isArray(ut)?lt>=ut.length?ut[0]:ut[lt]:ut}function at(lt){return Array.isArray(nt)?lt>=nt.length?nt[0]:nt[lt]:nt}function et(lt,Ct){var Pt=0;return function(){if(lt&&++Pt===Ct)return lt()}}return new Promise(function(lt,Ct){function Pt(){if(Ye._frameQueue.length!==0){for(;Ye._frameQueue.length;){var Sr=Ye._frameQueue.pop();Sr.onInterrupt&&Sr.onInterrupt()}Me.emit("plotly_animationinterrupted",[])}}function $t(Sr){if(Sr.length!==0){for(var vn=0;vn<Sr.length;vn++){var Rn;Sr[vn].type==="byname"?Rn=h.computeFrame(Me,Sr[vn].name):Rn=Sr[vn].data;var hn=at(vn),An=Ge(vn);An.duration=Math.min(An.duration,hn.duration);var En={frame:Rn,name:Sr[vn].name,frameOpts:hn,transitionOpts:An};vn===Sr.length-1&&(En.onComplete=et(lt,2),En.onInterrupt=Ct),Ye._frameQueue.push(En)}He.mode==="immediate"&&(Ye._lastFrameAt=-1/0),Ye._animationRaf||mt()}}function je(){Me.emit("plotly_animated"),window.cancelAnimationFrame(Ye._animationRaf),Ye._animationRaf=null}function Oe(){Ye._currentFrame&&Ye._currentFrame.onComplete&&Ye._currentFrame.onComplete();var Sr=Ye._currentFrame=Ye._frameQueue.shift();if(Sr){var vn=Sr.name?Sr.name.toString():null;Me._fullLayout._currentFrame=vn,Ye._lastFrameAt=Date.now(),Ye._timeToNext=Sr.frameOpts.duration,h.transition(Me,Sr.frame.data,Sr.frame.layout,T.coerceTraceIndices(Me,Sr.frame.traces),Sr.frameOpts,Sr.transitionOpts).then(function(){Sr.onComplete&&Sr.onComplete()}),Me.emit("plotly_animatingframe",{name:vn,frame:Sr.frame,animation:{frame:Sr.frameOpts,transition:Sr.transitionOpts}})}else je()}function mt(){Me.emit("plotly_animating"),Ye._lastFrameAt=-1/0,Ye._timeToNext=0,Ye._runningTransitions=0,Ye._currentFrame=null;var Sr=function(){Ye._animationRaf=window.requestAnimationFrame(Sr),Date.now()-Ye._lastFrameAt>Ye._timeToNext&&Oe()};Sr()}var wt=0;function yt(Sr){return Array.isArray(ut)?wt>=ut.length?Sr.transitionOpts=ut[wt]:Sr.transitionOpts=ut[0]:Sr.transitionOpts=ut,wt++,Sr}var St,kt,Rt=[],zt=Ie==null,Xt=Array.isArray(Ie),Yt=!zt&&!Xt&&c.isPlainObject(Ie);if(Yt)Rt.push({type:"object",data:yt(c.extendFlat({},Ie))});else if(zt||["string","number"].indexOf(typeof Ie)!==-1)for(St=0;St<Ye._frames.length;St++)kt=Ye._frames[St],!!kt&&(zt||String(kt.group)===String(Ie))&&Rt.push({type:"byname",name:String(kt.name),data:yt({name:kt.name})});else if(Xt)for(St=0;St<Ie.length;St++){var Vt=Ie[St];["number","string"].indexOf(typeof Vt)!==-1?(Vt=String(Vt),Rt.push({type:"byname",name:Vt,data:yt({name:Vt})})):c.isPlainObject(Vt)&&Rt.push({type:"object",data:yt(c.extendFlat({},Vt))})}for(St=0;St<Rt.length;St++)if(kt=Rt[St],kt.type==="byname"&&!Ye._frameHash[kt.data.name]){c.warn('animate failure: frame not found: "'+kt.data.name+'"'),Ct();return}["next","immediate"].indexOf(He.mode)!==-1&&Pt(),He.direction==="reverse"&&Rt.reverse();var cr=Me._fullLayout._currentFrame;if(cr&&He.fromcurrent){var Or=-1;for(St=0;St<Rt.length;St++)if(kt=Rt[St],kt.type==="byname"&&kt.name===cr){Or=St;break}if(Or>0&&Or<Rt.length-1){var kr=[];for(St=0;St<Rt.length;St++)kt=Rt[St],(Rt[St].type!=="byname"||St>Or)&&kr.push(kt);Rt=kr}}Rt.length>0?$t(Rt):(Me.emit("plotly_animated"),lt())})}function ot(Me,Ie,He){if(Me=c.getGraphDiv(Me),Ie==null)return Promise.resolve();if(!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ye,ut,nt,Ge,at=Me._transitionData._frames,et=Me._transitionData._frameHash;if(!Array.isArray(Ie))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ie);var lt=at.length+Ie.length*2,Ct=[],Pt={};for(Ye=Ie.length-1;Ye>=0;Ye--)if(!!c.isPlainObject(Ie[Ye])){var $t=Ie[Ye].name,je=(et[$t]||Pt[$t]||{}).name,Oe=Ie[Ye].name,mt=et[je]||Pt[je];je&&Oe&&typeof Oe=="number"&&mt&&I<C&&(I++,c.warn('addFrames: overwriting frame "'+(et[je]||Pt[je]).name+'" with a frame whose name of type "number" also equates to "'+je+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),I===C&&c.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Pt[$t]={name:$t},Ct.push({frame:h.supplyFrameDefaults(Ie[Ye]),index:He&&He[Ye]!==void 0&&He[Ye]!==null?He[Ye]:lt+Ye})}Ct.sort(function(Yt,Vt){return Yt.index>Vt.index?-1:Yt.index<Vt.index?1:0});var wt=[],yt=[],St=at.length;for(Ye=Ct.length-1;Ye>=0;Ye--){if(ut=Ct[Ye].frame,typeof ut.name=="number"&&c.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ut.name)for(;et[ut.name="frame "+Me._transitionData._counter++];);if(et[ut.name]){for(nt=0;nt<at.length&&(at[nt]||{}).name!==ut.name;nt++);wt.push({type:"replace",index:nt,value:ut}),yt.unshift({type:"replace",index:nt,value:at[nt]})}else Ge=Math.max(0,Math.min(Ct[Ye].index,St)),wt.push({type:"insert",index:Ge,value:ut}),yt.unshift({type:"delete",index:Ge}),St++}var kt=h.modifyFrames,Rt=h.modifyFrames,zt=[Me,yt],Xt=[Me,wt];return n&&n.add(Me,kt,zt,Rt,Xt),h.modifyFrames(Me,wt)}function Te(Me,Ie){if(Me=c.getGraphDiv(Me),!c.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);var He,Ye,ut=Me._transitionData._frames,nt=[],Ge=[];if(!Ie)for(Ie=[],He=0;He<ut.length;He++)Ie.push(He);for(Ie=Ie.slice(),Ie.sort(),He=Ie.length-1;He>=0;He--)Ye=Ie[He],nt.push({type:"delete",index:Ye}),Ge.unshift({type:"insert",index:Ye,value:ut[Ye]});var at=h.modifyFrames,et=h.modifyFrames,lt=[Me,Ge],Ct=[Me,nt];return n&&n.add(Me,at,lt,et,Ct),h.modifyFrames(Me,nt)}function Le(Me){Me=c.getGraphDiv(Me);var Ie=Me._fullLayout||{},He=Me._fullData||[];return h.cleanPlot([],{},He,Ie),h.purge(Me),f.purge(Me),Ie._container&&Ie._container.remove(),delete Me._context,Me}function Ve(Me){var Ie=Me._fullLayout,He=Me.getBoundingClientRect();if(!c.equalDomRects(He,Ie._lastBBox)){var Ye=Ie._invTransform=c.inverseTransformMatrix(c.getFullTransformMatrix(Me));Ie._invScaleX=Math.sqrt(Ye[0][0]*Ye[0][0]+Ye[0][1]*Ye[0][1]+Ye[0][2]*Ye[0][2]),Ie._invScaleY=Math.sqrt(Ye[1][0]*Ye[1][0]+Ye[1][1]*Ye[1][1]+Ye[1][2]*Ye[1][2]),Ie._lastBBox=He}}function Qe(Me){var Ie=r.select(Me),He=Me._fullLayout;if(He._calcInverseTransform=Ve,He._calcInverseTransform(Me),He._container=Ie.selectAll(".plot-container").data([0]),He._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),He._paperdiv=He._container.selectAll(".svg-container").data([0]),He._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),He._glcontainer=He._paperdiv.selectAll(".gl-container").data([{}]),He._glcontainer.enter().append("div").classed("gl-container",!0),He._paperdiv.selectAll(".main-svg").remove(),He._paperdiv.select(".modebar-container").remove(),He._paper=He._paperdiv.insert("svg",":first-child").classed("main-svg",!0),He._toppaper=He._paperdiv.append("svg").classed("main-svg",!0),He._modebardiv=He._paperdiv.append("div"),delete He._modeBar,He._hoverpaper=He._paperdiv.append("svg").classed("main-svg",!0),!He._uid){var Ye={};r.selectAll("defs").each(function(){this.id&&(Ye[this.id.split("-")[1]]=1)}),He._uid=c.randstr(Ye)}He._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),He._defs=He._paper.append("defs").attr("id","defs-"+He._uid),He._clips=He._defs.append("g").classed("clips",!0),He._topdefs=He._toppaper.append("defs").attr("id","topdefs-"+He._uid),He._topclips=He._topdefs.append("g").classed("clips",!0),He._bgLayer=He._paper.append("g").classed("bglayer",!0),He._draggers=He._paper.append("g").classed("draglayer",!0);var ut=He._paper.append("g").classed("layer-below",!0);He._imageLowerLayer=ut.append("g").classed("imagelayer",!0),He._shapeLowerLayer=ut.append("g").classed("shapelayer",!0),He._cartesianlayer=He._paper.append("g").classed("cartesianlayer",!0),He._polarlayer=He._paper.append("g").classed("polarlayer",!0),He._ternarylayer=He._paper.append("g").classed("ternarylayer",!0),He._geolayer=He._paper.append("g").classed("geolayer",!0),He._funnelarealayer=He._paper.append("g").classed("funnelarealayer",!0),He._pielayer=He._paper.append("g").classed("pielayer",!0),He._treemaplayer=He._paper.append("g").classed("treemaplayer",!0),He._sunburstlayer=He._paper.append("g").classed("sunburstlayer",!0),He._indicatorlayer=He._toppaper.append("g").classed("indicatorlayer",!0),He._glimages=He._paper.append("g").classed("glimages",!0);var nt=He._toppaper.append("g").classed("layer-above",!0);He._imageUpperLayer=nt.append("g").classed("imagelayer",!0),He._shapeUpperLayer=nt.append("g").classed("shapelayer",!0),He._infolayer=He._toppaper.append("g").classed("infolayer",!0),He._menulayer=He._toppaper.append("g").classed("menulayer",!0),He._zoomlayer=He._toppaper.append("g").classed("zoomlayer",!0),He._hoverlayer=He._hoverpaper.append("g").classed("hoverlayer",!0),He._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Me.emit("plotly_framework")}S.animate=ft,S.addFrames=ot,S.deleteFrames=Te,S.addTraces=ae,S.deleteTraces=ie,S.extendTraces=$,S.moveTraces=te,S.prependTraces=j,S.newPlot=z,S.plot=k,S.purge=Le,S.react=Et,S.redraw=Y,S.relayout=xe,S.restyle=re,S.setPlotConfig=R,S.update=Ae,S._guiRelayout=Be(xe),S._guiRestyle=Be(re),S._guiUpdate=Be(Ae),S._storeDirectGUIEdit=se},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,"../lib/events":767,"../lib/queue":794,"../lib/svg_text_utils":803,"../plots/cartesian/axes":828,"../plots/cartesian/constants":834,"../plots/cartesian/graph_interact":837,"../plots/cartesian/select":847,"../plots/plots":891,"../plots/polar/legacy":899,"../registry":911,"./edit_types":810,"./helpers":811,"./manage_arrays":813,"./plot_config":815,"./plot_schema":816,"./subroutines":818,d3:169,"fast-isnumeric":241,"has-hover":440}],815:[function(e,d,S){var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},a={};function u(c,t){for(var f in c){var n=c[f];n.valType?t[f]=n.dflt:(t[f]||(t[f]={}),u(n,t[f]))}}u(r,a),d.exports={configAttributes:r,dfltConfig:a}},{}],816:[function(e,d,S){var r=e("../registry"),a=e("../lib"),u=e("../plots/attributes"),c=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),f=e("../plots/animation_attributes"),n=e("./plot_config").configAttributes,o=e("../plots/polar/legacy/area_attributes"),l=e("../plots/polar/legacy/axis_attributes"),h=e("./edit_types"),i=a.extendFlat,s=a.extendDeepAll,p=a.isPlainObject,v=a.isArrayOrTypedArray,m=a.nestedProperty,b=a.valObjectMeta,y="_isSubplotObj",x="_isLinkedToArray",w="_arrayAttrRegexps",g="_deprecated",T=[y,x,w,g];S.IS_SUBPLOT_OBJ=y,S.IS_LINKED_TO_ARRAY=x,S.DEPRECATED=g,S.UNDERSCORE_ATTRS=T,S.get=function(){var B={};r.allTypes.concat("area").forEach(function(V){B[V]=I(V)});var H={};return Object.keys(r.transformsRegistry).forEach(function(V){H[V]=k(V)}),{defs:{valObjects:b,metaKeys:T.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:B,layout:C(),transforms:H,frames:E(),animation:R(f),config:R(n)}},S.crawl=function(B,H,V,Z){var q=V||0;Z=Z||"",Object.keys(B).forEach(function(J){var ne=B[J];if(T.indexOf(J)===-1){var ve=(Z?Z+".":"")+J;H(ne,J,B,q,ve),!S.isValObject(ne)&&p(ne)&&J!=="impliedEdits"&&S.crawl(ne,H,q+1,ve)}})},S.isValObject=function(B){return B&&B.valType!==void 0},S.findArrayAttributes=function(B){var H=[],V=[],Z=[],q,J;function ne(te,re,ce,pe){V=V.slice(0,pe).concat([re]),Z=Z.slice(0,pe).concat([te&&te._isLinkedToArray]);var fe=te&&(te.valType==="data_array"||te.arrayOk===!0)&&!(V[pe-1]==="colorbar"&&(re==="ticktext"||re==="tickvals"));!fe||ve(q,0,"")}function ve(te,re,ce){var pe=te[V[re]],fe=ce+V[re];if(re===V.length-1)v(pe)&&H.push(J+fe);else if(Z[re]){if(Array.isArray(pe))for(var se=0;se<pe.length;se++)p(pe[se])&&ve(pe[se],re+1,fe+"["+se+"].")}else p(pe)&&ve(pe,re+1,fe+".")}q=B,J="",S.crawl(u,ne),B._module&&B._module.attributes&&S.crawl(B._module.attributes,ne);var $=B.transforms;if($)for(var j=0;j<$.length;j++){var ae=$[j],ie=ae._module;ie&&(J="transforms["+j+"].",q=ae,S.crawl(ie.attributes,ne))}return H},S.getTraceValObject=function(B,H){var V=H[0],Z=1,q,J;if(V==="transforms"){if(H.length===1)return u.transforms;var ne=B.transforms;if(!Array.isArray(ne)||!ne.length)return!1;var ve=H[1];if(!L(ve)||ve>=ne.length)return!1;q=(r.transformsRegistry[ne[ve].type]||{}).attributes,J=q&&q[H[2]],Z=3}else if(B.type==="area")J=o[V];else{var $=B._module;if($||($=(r.modules[B.type||u.type.dflt]||{})._module),!$)return!1;if(q=$.attributes,J=q&&q[V],!J){var j=$.basePlotModule;j&&j.attributes&&(J=j.attributes[V])}J||(J=u[V])}return P(J,H,Z)},S.getLayoutValObject=function(B,H){var V=M(B,H[0]);return P(V,H,1)};function M(B,H){var V,Z,q,J,ne=B._basePlotModules;if(ne){var ve;for(V=0;V<ne.length;V++){if(q=ne[V],q.attrRegex&&q.attrRegex.test(H)){if(q.layoutAttrOverrides)return q.layoutAttrOverrides;!ve&&q.layoutAttributes&&(ve=q.layoutAttributes)}var $=q.baseLayoutAttrOverrides;if($&&H in $)return $[H]}if(ve)return ve}var j=B._modules;if(j){for(V=0;V<j.length;V++)if(J=j[V].layoutAttributes,J&&H in J)return J[H]}for(Z in r.componentsRegistry){if(q=r.componentsRegistry[Z],q.name==="colorscale"&&H.indexOf("coloraxis")===0)return q.layoutAttributes[H];if(!q.schema&&H===q.name)return q.layoutAttributes}return H in c?c[H]:H==="radialaxis"||H==="angularaxis"?l[H]:l.layout[H]||!1}function P(B,H,V){if(!B)return!1;if(B._isLinkedToArray){if(L(H[V]))V++;else if(V<H.length)return!1}for(;V<H.length;V++){var Z=B[H[V]];if(p(Z))B=Z;else break;if(V===H.length-1)break;if(B._isLinkedToArray){if(V++,!L(H[V]))return!1}else if(B.valType==="info_array"){V++;var q=H[V];if(!L(q))return!1;var J=B.items;if(Array.isArray(J)){if(q>=J.length)return!1;if(B.dimensions===2){if(V++,H.length===V)return B;var ne=H[V];if(!L(ne))return!1;B=J[q][ne]}else B=J[q]}else B=J}}return B}function L(B){return B===Math.round(B)&&B>=0}function I(B){var H,V;B==="area"?(H={attributes:o},V={}):(H=r.modules[B]._module,V=H.basePlotModule);var Z={};Z.type=null;var q=s({},u),J=s({},H.attributes);S.crawl(J,function($,j,ae,ie,te){m(q,te).set(void 0),$===void 0&&m(J,te).set(void 0)}),s(Z,q),r.traceIs(B,"noOpacity")&&delete Z.opacity,r.traceIs(B,"showLegend")||(delete Z.showlegend,delete Z.legendgroup),r.traceIs(B,"noHover")&&(delete Z.hoverinfo,delete Z.hoverlabel),H.selectPoints||delete Z.selectedpoints,s(Z,J),V.attributes&&s(Z,V.attributes),Z.type=B;var ne={meta:H.meta||{},categories:H.categories||{},animatable:Boolean(H.animatable),type:B,attributes:R(Z)};if(H.layoutAttributes){var ve={};s(ve,H.layoutAttributes),ne.layoutAttributes=R(ve)}return H.animatable||S.crawl(ne,function($){S.isValObject($)&&"anim"in $&&delete $.anim}),ne}function C(){var B={},H,V;s(B,c);for(H in r.subplotsRegistry)if(V=r.subplotsRegistry[H],!!V.layoutAttributes)if(Array.isArray(V.attr))for(var Z=0;Z<V.attr.length;Z++)Y(B,V,V.attr[Z]);else{var q=V.attr==="subplot"?V.name:V.attr;Y(B,V,q)}B=U(B);for(H in r.componentsRegistry){V=r.componentsRegistry[H];var J=V.schema;if(J&&(J.subplots||J.layout)){var ne=J.subplots;if(ne&&ne.xaxis&&!ne.yaxis)for(var ve in ne.xaxis)delete B.yaxis[ve]}else V.name==="colorscale"?s(B,V.layoutAttributes):V.layoutAttributes&&z(B,V.layoutAttributes,V.name)}return{layoutAttributes:R(B)}}function k(B){var H=r.transformsRegistry[B],V=s({},H.attributes);return Object.keys(r.componentsRegistry).forEach(function(Z){var q=r.componentsRegistry[Z];q.schema&&q.schema.transforms&&q.schema.transforms[B]&&Object.keys(q.schema.transforms[B]).forEach(function(J){z(V,q.schema.transforms[B][J],J)})}),{attributes:R(V)}}function E(){var B={frames:s({},t)};return R(B),B.frames}function R(B){return O(B),N(B),G(B),B}function O(B){function H(Z){return{valType:"string",editType:"none"}}function V(Z,q,J){S.isValObject(Z)?Z.valType==="data_array"?(Z.role="data",J[q+"src"]=H()):Z.arrayOk===!0&&(J[q+"src"]=H()):p(Z)&&(Z.role="object")}S.crawl(B,V)}function N(B){function H(V,Z,q){if(!!V){var J=V[x];!J||(delete V[x],q[Z]={items:{}},q[Z].items[J]=V,q[Z].role="object")}}S.crawl(B,H)}function G(B){function H(V){for(var Z in V)if(p(V[Z]))H(V[Z]);else if(Array.isArray(V[Z]))for(var q=0;q<V[Z].length;q++)H(V[Z][q]);else V[Z]instanceof RegExp&&(V[Z]=V[Z].toString())}H(B)}function U(B){return i(B,{radialaxis:l.radialaxis,angularaxis:l.angularaxis}),i(B,l.layout),B}function Y(B,H,V){var Z=m(B,V),q=s({},H.layoutAttributes);q[y]=!0,Z.set(q)}function z(B,H,V){var Z=m(B,V);Z.set(s(Z.get()||{},H))}},{"../lib":778,"../plots/animation_attributes":822,"../plots/attributes":824,"../plots/frame_attributes":857,"../plots/layout_attributes":882,"../plots/polar/legacy/area_attributes":897,"../plots/polar/legacy/axis_attributes":898,"../registry":911,"./edit_types":810,"./plot_config":815}],817:[function(e,d,S){var r=e("../lib"),a=e("../plots/attributes"),u="templateitemname",c={name:{valType:"string",editType:"none"}};c[u]={valType:"string",editType:"calc"},S.templatedArray=function(n,o){return o._isLinkedToArray=n,o.name=c.name,o[u]=c[u],o},S.traceTemplater=function(n){var o={},l,h;for(l in n)h=n[l],Array.isArray(h)&&h.length&&(o[l]=0);function i(s){l=r.coerce(s,{},a,"type");var p={type:l,_template:null};if(l in o){h=n[l];var v=o[l]%h.length;o[l]++,p._template=h[v]}return p}return{newTrace:i}},S.newContainer=function(n,o,l){var h=n._template,i=h&&(h[o]||l&&h[l]);r.isPlainObject(i)||(i=null);var s=n[o]={_template:i};return s},S.arrayTemplater=function(n,o,l){var h=n._template,i=h&&h[f(o)],s=h&&h[o];(!Array.isArray(s)||!s.length)&&(s=[]);var p={};function v(b){var y={name:b.name,_input:b},x=y[u]=b[u];if(!t(x))return y._template=i,y;for(var w=0;w<s.length;w++){var g=s[w];if(g.name===x)return p[x]=1,y._template=g,y}return y[l]=b[l]||!1,y._template=!1,y}function m(){for(var b=[],y=0;y<s.length;y++){var x=s[y],w=x.name;if(t(w)&&!p[w]){var g={_template:x,name:w,_input:{_templateitemname:w}};g[u]=x[u],b.push(g),p[w]=1}}return b}return{newItem:v,defaultItems:m}};function t(n){return n&&typeof n=="string"}function f(n){var o=n.length-1;return n.charAt(o)!=="s"&&r.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}S.arrayDefaultKey=f,S.arrayEditor=function(n,o,l){var h=(r.nestedProperty(n,o).get()||[]).length,i=l._index,s=i>=h&&(l._input||{})._templateitemname;s&&(i=h);var p=o+"["+i+"]",v;function m(){v={},s&&(v[p]={},v[p][u]=s)}m();function b(g,T){v[g]=T}function y(g,T){s?r.nestedProperty(v[p],g).set(T):v[p+"."+g]=T}function x(){var g=v;return m(),g}function w(g,T){g&&y(g,T);var M=x();for(var P in M)r.nestedProperty(n,P).set(M[P])}return{modifyBase:b,modifyItem:y,getUpdateObj:x,applyUpdate:w}}},{"../lib":778,"../plots/attributes":824}],818:[function(e,d,S){var r=e("d3"),a=e("../registry"),u=e("../plots/plots"),c=e("../lib"),t=e("../lib/clear_gl_canvases"),f=e("../components/color"),n=e("../components/drawing"),o=e("../components/titles"),l=e("../components/modebar"),h=e("../plots/cartesian/axes"),i=e("../constants/alignment"),s=e("../plots/cartesian/constraints"),p=s.enforce,v=s.clean,m=e("../plots/cartesian/autorange").doAutoRange,b="start",y="middle",x="end";S.layoutStyles=function(E){return c.syncOrAsync([u.doAutoMargin,g],E)};function w(E,R,O){for(var N=0;N<O.length;N++){var G=O[N][0],U=O[N][1];if(!(G[0]>=E[1]||G[1]<=E[0])&&U[0]<R[1]&&U[1]>R[0])return!0}return!1}function g(E){var R=E._fullLayout,O=R._size,N=O.p,G=h.list(E,"",!0),U,Y,z,B,H,V;if(R._paperdiv.style({width:E._context.responsive&&R.autosize&&!E._context._hasZeroWidth&&!E.layout.width?"100%":R.width+"px",height:E._context.responsive&&R.autosize&&!E._context._hasZeroHeight&&!E.layout.height?"100%":R.height+"px"}).selectAll(".main-svg").call(n.setSize,R.width,R.height),E._context.setBackground(E,R.paper_bgcolor),S.drawMainTitle(E),l.manage(E),!R._has("cartesian"))return u.previousPromises(E);function Z(jt,Zt,Mt){var At=jt._lw/2;if(jt._id.charAt(0)==="x"){if(Zt){if(Mt==="top")return Zt._offset-N-At}else return O.t+O.h*(1-(jt.position||0))+At%1;return Zt._offset+Zt._length+N+At}if(Zt){if(Mt==="right")return Zt._offset+Zt._length+N+At}else return O.l+O.w*(jt.position||0)+At%1;return Zt._offset-N-At}for(U=0;U<G.length;U++){B=G[U];var q=B._anchorAxis;B._linepositions={},B._lw=n.crispRound(E,B.linewidth,1),B._mainLinePosition=Z(B,q,B.side),B._mainMirrorPosition=B.mirror&&q?Z(B,q,i.OPPOSITE_SIDE[B.side]):null}var J=[],ne=[],ve=[],$=f.opacity(R.paper_bgcolor)===1&&f.opacity(R.plot_bgcolor)===1&&R.paper_bgcolor===R.plot_bgcolor;for(Y in R._plots)if(z=R._plots[Y],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var j=z.xaxis.domain,ae=z.yaxis.domain,ie=z.plotgroup;if(w(j,ae,ve)){var te=ie.node(),re=z.bg=c.ensureSingle(ie,"rect","bg");te.insertBefore(re.node(),te.childNodes[0]),ne.push(Y)}else ie.select("rect.bg").remove(),ve.push([j,ae]),$||(J.push(Y),ne.push(Y))}var ce=R._bgLayer.selectAll(".bg").data(J);for(ce.enter().append("rect").classed("bg",!0),ce.exit().remove(),ce.each(function(jt){R._plots[jt].bg=r.select(this)}),U=0;U<ne.length;U++)z=R._plots[ne[U]],H=z.xaxis,V=z.yaxis,z.bg&&H._offset!==void 0&&V._offset!==void 0&&z.bg.call(n.setRect,H._offset-N,V._offset-N,H._length+2*N,V._length+2*N).call(f.fill,R.plot_bgcolor).style("stroke-width",0);if(!R._hasOnlyLargeSploms)for(Y in R._plots){z=R._plots[Y],H=z.xaxis,V=z.yaxis;var pe=z.clipId="clip"+R._uid+Y+"plot",fe=c.ensureSingleById(R._clips,"clipPath",pe,function(jt){jt.classed("plotclip",!0).append("rect")});z.clipRect=fe.select("rect").attr({width:H._length,height:V._length}),n.setTranslate(z.plot,H._offset,V._offset);var se,de;z._hasClipOnAxisFalse?(se=null,de=pe):(se=pe,de=null),n.setClipUrl(z.plot,se,E),z.layerClipId=de}var be,xe,ke,Re,Ke,ze,Je,qe,Ee,Ae,Be,$e,xt;function bt(jt){return"M"+be+","+jt+"H"+xe}function Ne(jt){return"M"+H._offset+","+jt+"h"+H._length}function st(jt){return"M"+jt+","+qe+"V"+Je}function _t(jt){return"M"+jt+","+V._offset+"v"+V._length}function Ot(jt,Zt,Mt){if(!jt.showline||Y!==jt._mainSubplot)return"";if(!jt._anchorAxis)return Mt(jt._mainLinePosition);var At=Zt(jt._mainLinePosition);return jt.mirror&&(At+=Zt(jt._mainMirrorPosition)),At}for(Y in R._plots){z=R._plots[Y],H=z.xaxis,V=z.yaxis;var Wt="M0,0";T(H,Y)&&(Ke=P(H,"left",V,G),be=H._offset-(Ke?N+Ke:0),ze=P(H,"right",V,G),xe=H._offset+H._length+(ze?N+ze:0),ke=Z(H,V,"bottom"),Re=Z(H,V,"top"),xt=!H._anchorAxis||Y!==H._mainSubplot,xt&&(H.mirror==="allticks"||H.mirror==="all")&&(H._linepositions[Y]=[ke,Re]),Wt=Ot(H,bt,Ne),xt&&H.showline&&(H.mirror==="all"||H.mirror==="allticks")&&(Wt+=bt(ke)+bt(Re)),z.xlines.style("stroke-width",H._lw+"px").call(f.stroke,H.showline?H.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",Wt);var Et="M0,0";T(V,Y)&&(Be=P(V,"bottom",H,G),Je=V._offset+V._length+(Be?N:0),$e=P(V,"top",H,G),qe=V._offset-($e?N:0),Ee=Z(V,H,"left"),Ae=Z(V,H,"right"),xt=!V._anchorAxis||Y!==V._mainSubplot,xt&&(V.mirror==="allticks"||V.mirror==="all")&&(V._linepositions[Y]=[Ee,Ae]),Et=Ot(V,st,_t),xt&&V.showline&&(V.mirror==="all"||V.mirror==="allticks")&&(Et+=st(Ee)+st(Ae)),z.ylines.style("stroke-width",V._lw+"px").call(f.stroke,V.showline?V.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",Et)}return h.makeClipPaths(E),u.previousPromises(E)}function T(E,R){return(E.ticks||E.showline)&&(R===E._mainSubplot||E.mirror==="all"||E.mirror==="allticks")}function M(E,R,O){if(!O.showline||!O._lw)return!1;if(O.mirror==="all"||O.mirror==="allticks")return!0;var N=O._anchorAxis;if(!N)return!1;var G=i.FROM_BL[R];return O.side===R?N.domain[G]===E.domain[G]:O.mirror&&N.domain[1-G]===E.domain[1-G]}function P(E,R,O,N){if(M(E,R,O))return O._lw;for(var G=0;G<N.length;G++){var U=N[G];if(U._mainAxis===O._mainAxis&&M(E,R,U))return U._lw}return 0}S.drawMainTitle=function(E){var R=E._fullLayout,O=C(R),N=k(R);o.draw(E,"gtitle",{propContainer:R,propName:"title.text",placeholder:R._dfltTitle.plot,attributes:{x:L(R,O),y:I(R,N),"text-anchor":O,dy:N}})};function L(E,R){var O=E.title,N=E._size,G=0;switch(R===b?G=O.pad.l:R===x&&(G=-O.pad.r),O.xref){case"paper":return N.l+N.w*O.x+G;case"container":default:return E.width*O.x+G}}function I(E,R){var O=E.title,N=E._size,G=0;if(R==="0em"||!R?G=-O.pad.b:R===i.CAP_SHIFT+"em"&&(G=O.pad.t),O.y==="auto")return N.t/2;switch(O.yref){case"paper":return N.t+N.h-N.h*O.y+G;case"container":default:return E.height-E.height*O.y+G}}function C(E){var R=E.title,O=y;return c.isRightAnchor(R)?O=x:c.isLeftAnchor(R)&&(O=b),O}function k(E){var R=E.title,O="0em";return c.isTopAnchor(R)?O=i.CAP_SHIFT+"em":c.isMiddleAnchor(R)&&(O=i.MID_SHIFT+"em"),O}S.doTraceStyle=function(E){var R=E.calcdata,O=[],N;for(N=0;N<R.length;N++){var G=R[N],U=G[0]||{},Y=U.trace||{},z=Y._module||{},B=z.arraysToCalcdata;B&&B(G,Y);var H=z.editStyle;H&&O.push({fn:H,cd0:U})}if(O.length){for(N=0;N<O.length;N++){var V=O[N];V.fn(E,V.cd0)}t(E),S.redrawReglTraces(E)}return u.style(E),a.getComponentMethod("legend","draw")(E),u.previousPromises(E)},S.doColorBars=function(E){return a.getComponentMethod("colorbar","draw")(E),u.previousPromises(E)},S.layoutReplot=function(E){var R=E.layout;return E.layout=void 0,a.call("plot",E,"",R)},S.doLegend=function(E){return a.getComponentMethod("legend","draw")(E),u.previousPromises(E)},S.doTicksRelayout=function(E){return h.draw(E,"redraw"),E._fullLayout._hasOnlyLargeSploms&&(a.subplotsRegistry.splom.updateGrid(E),t(E),S.redrawReglTraces(E)),S.drawMainTitle(E),u.previousPromises(E)},S.doModeBar=function(E){var R=E._fullLayout;l.manage(E);for(var O=0;O<R._basePlotModules.length;O++){var N=R._basePlotModules[O].updateFx;N&&N(E)}return u.previousPromises(E)},S.doCamera=function(E){for(var R=E._fullLayout,O=R._subplots.gl3d,N=0;N<O.length;N++){var G=R[O[N]],U=G._scene;U.setViewport(G)}},S.drawData=function(E){var R=E._fullLayout;t(E);for(var O=R._basePlotModules,N=0;N<O.length;N++)O[N].plot(E);return S.redrawReglTraces(E),u.style(E),a.getComponentMethod("shapes","draw")(E),a.getComponentMethod("annotations","draw")(E),a.getComponentMethod("images","draw")(E),R._replotting=!1,u.previousPromises(E)},S.redrawReglTraces=function(E){var R=E._fullLayout;if(R._has("regl")){var O=E._fullData,N=[],G=[],U,Y;for(R._hasOnlyLargeSploms&&R._splomGrid.draw(),U=0;U<O.length;U++){var z=O[U];z.visible===!0&&z._length!==0&&(z.type==="splom"?R._splomScenes[z.uid].draw():z.type==="scattergl"?c.pushUnique(N,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&c.pushUnique(G,z.subplot))}for(U=0;U<N.length;U++)Y=R._plots[N[U]],Y._scene&&Y._scene.draw();for(U=0;U<G.length;U++)Y=R[G[U]]._subplot,Y._scene&&Y._scene.draw()}},S.doAutoRangeAndConstraints=function(E){for(var R=h.list(E,"",!0),O,N={},G=0;G<R.length;G++)if(O=R[G],!N[O._id]){N[O._id]=1,v(E,O),m(E,O);var U=O._matchGroup;if(U)for(var Y in U){var z=h.getFromId(E,Y);m(E,z,O.range),N[Y]=1}}p(E)},S.finalDraw=function(E){a.getComponentMethod("rangeslider","draw")(E),a.getComponentMethod("rangeselector","draw")(E)},S.drawMarginPushers=function(E){a.getComponentMethod("legend","draw")(E),a.getComponentMethod("rangeselector","draw")(E),a.getComponentMethod("sliders","draw")(E),a.getComponentMethod("updatemenus","draw")(E),a.getComponentMethod("colorbar","draw")(E)}},{"../components/color":643,"../components/drawing":665,"../components/modebar":703,"../components/titles":738,"../constants/alignment":745,"../lib":778,"../lib/clear_gl_canvases":762,"../plots/cartesian/autorange":827,"../plots/cartesian/axes":828,"../plots/cartesian/constraints":835,"../plots/plots":891,"../registry":911,d3:169}],819:[function(e,d,S){var r=e("../lib"),a=r.isPlainObject,u=e("./plot_schema"),c=e("../plots/plots"),t=e("../plots/attributes"),f=e("./plot_template"),n=e("./plot_config").dfltConfig;S.makeTemplate=function(b){b=r.isPlainObject(b)?b:r.getGraphDiv(b),b=r.extendDeep({_context:n},{data:b.data,layout:b.layout}),c.supplyDefaults(b);var y=b.data||[],x=b.layout||{};x._basePlotModules=b._fullLayout._basePlotModules,x._modules=b._fullLayout._modules;var w={data:{},layout:{}};y.forEach(function(R){var O={};h(R,O,s.bind(null,R));var N=r.coerce(R,{},t,"type"),G=w.data[N];G||(G=w.data[N]=[]),G.push(O)}),h(x,w.layout,i.bind(null,x)),delete w.layout.template;var g=x.template;if(a(g)){var T=g.layout,M,P,L,I,C,k;a(T)&&o(T,w.layout);var E=g.data;if(a(E)){for(P in w.data)if(L=E[P],Array.isArray(L)){for(C=w.data[P],k=C.length,I=L.length,M=0;M<k;M++)o(L[M%I],C[M]);for(M=k;M<I;M++)C.push(r.extendDeep({},L[M]))}for(P in E)P in w.data||(w.data[P]=r.extendDeep([],E[P]))}}return w};function o(b,y){b=r.extendDeep({},b);var x=Object.keys(b).sort(),w,g;function T(C,k,E){if(a(k)&&a(C))o(C,k);else if(Array.isArray(k)&&Array.isArray(C)){var R=f.arrayTemplater({_template:b},E);for(g=0;g<k.length;g++){var O=k[g],N=R.newItem(O)._template;N&&o(N,O)}var G=R.defaultItems();for(g=0;g<G.length;g++)k.push(G[g]._template);for(g=0;g<k.length;g++)delete k[g].templateitemname}}for(w=0;w<x.length;w++){var M=x[w],P=b[M];if(M in y?T(P,y[M],M):y[M]=P,l(M)===M)for(var L in y){var I=l(L);L!==I&&I===M&&!(L in b)&&T(P,y[L],M)}}}function l(b){return b.replace(/[0-9]+$/,"")}function h(b,y,x,w,g){var T=g&&x(g);for(var M in b){var P=b[M],L=p(b,M,w),I=p(b,M,g),C=x(I);if(!C){var k=l(M);k!==M&&(I=p(b,k,g),C=x(I))}if(!(T&&T===C)&&!(!C||C._noTemplating||C.valType==="data_array"||C.arrayOk&&Array.isArray(P)))if(!C.valType&&a(P))h(P,y,x,L,I);else if(C._isLinkedToArray&&Array.isArray(P))for(var E=!1,R=0,O={},N=0;N<P.length;N++){var G=P[N];if(a(G)){var U=G.name;if(U)O[U]||(h(G,y,x,p(P,R,L),p(P,R,I)),R++,O[U]=1);else if(!E){var Y=f.arrayDefaultKey(M),z=p(b,Y,w),B=p(P,R,L);h(G,y,x,B,p(P,R,I));var H=r.nestedProperty(y,B),V=r.nestedProperty(y,z);V.set(H.get()),H.set(null),E=!0}}}else{var Z=r.nestedProperty(y,L);Z.set(P)}}}function i(b,y){return u.getLayoutValObject(b,r.nestedProperty({},y).parts)}function s(b,y){return u.getTraceValObject(b,r.nestedProperty({},y).parts)}function p(b,y,x){var w;return x?Array.isArray(b)?w=x+"["+y+"]":w=x+"."+y:w=y,w}S.validateTemplate=function(b,y){var x=r.extendDeep({},{_context:n,data:b.data,layout:b.layout}),w=x.layout||{};a(y)||(y=w.template||{});var g=y.layout,T=y.data,M=[];x.layout=w,x.layout.template=y,c.supplyDefaults(x);var P=x._fullLayout,L=x._fullData,I={};function C(z,B){for(var H in z)if(H.charAt(0)!=="_"&&a(z[H])){var V=l(H),Z=[],q;for(q=0;q<B.length;q++)Z.push(p(z,H,B[q])),V!==H&&Z.push(p(z,V,B[q]));for(q=0;q<Z.length;q++)I[Z[q]]=1;C(z[H],Z)}}function k(z,B){for(var H in z)if(H.indexOf("defaults")===-1&&a(z[H])){var V=p(z,H,B);I[V]?k(z[H],V):M.push({code:"unused",path:V})}}if(a(g)?(C(P,["layout"]),k(g,"layout")):M.push({code:"layout"}),!a(T))M.push({code:"data"});else{for(var E={},R,O=0;O<L.length;O++){var N=L[O];R=N.type,E[R]=(E[R]||0)+1,N._fullInput._template||M.push({code:"missing",index:N._fullInput.index,traceType:R})}for(R in T){var G=T[R].length,U=E[R]||0;G>U?M.push({code:"unused",traceType:R,templateCount:G,dataCount:U}):U>G&&M.push({code:"reused",traceType:R,templateCount:G,dataCount:U})}}function Y(z,B){for(var H in z)if(H.charAt(0)!=="_"){var V=z[H],Z=p(z,H,B);a(V)?(Array.isArray(z)&&V._template===!1&&V.templateitemname&&M.push({code:"missing",path:Z,templateitemname:V.templateitemname}),Y(V,Z)):Array.isArray(V)&&v(V)&&Y(V,Z)}}if(Y({data:L,layout:P},""),M.length)return M.map(m)};function v(b){for(var y=0;y<b.length;y++)if(a(b[y]))return!0}function m(b){var y;switch(b.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":b.path?y="There are no templates for item "+b.path+" with name "+b.templateitemname:y="There are no templates for trace "+b.index+", of type "+b.traceType+".";break;case"unused":b.path?y="The template item at "+b.path+" was not used in constructing the plot.":b.dataCount?y="Some of the templates of type "+b.traceType+" were not used. The template has "+b.templateCount+" traces, the data only has "+b.dataCount+" of this type.":y="The template has "+b.templateCount+" traces of type "+b.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+b.traceType+" were used more than once. The template has "+b.templateCount+" traces, the data has "+b.dataCount+" of this type.";break}return b.msg=y,b}},{"../lib":778,"../plots/attributes":824,"../plots/plots":891,"./plot_config":815,"./plot_schema":816,"./plot_template":817}],820:[function(e,d,S){var r=e("fast-isnumeric"),a=e("./plot_api"),u=e("../plots/plots"),c=e("../lib"),t=e("../snapshot/helpers"),f=e("../snapshot/tosvg"),n=e("../snapshot/svgtoimg"),o=e("../version").version,l={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function h(i,s){s=s||{};var p,v,m,b;c.isPlainObject(i)?(p=i.data||[],v=i.layout||{},m=i.config||{},b={}):(i=c.getGraphDiv(i),p=c.extendDeep([],i.data),v=c.extendDeep({},i.layout),m=i._context,b=i._fullLayout||{});function y(U){return!(U in s)||c.validate(s[U],l[U])}if(!y("width")&&s.width!==null||!y("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+c.join2(l.format.values,", "," or ")+".");var x={};function w(U,Y){return c.coerce(s,x,l,U,Y)}var g=w("format"),T=w("width"),M=w("height"),P=w("scale"),L=w("setBackground"),I=w("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var k=c.extendFlat({},v);T?k.width=T:s.width===null&&r(b.width)&&(k.width=b.width),M?k.height=M:s.height===null&&r(b.height)&&(k.height=b.height);var E=c.extendFlat({},m,{_exportedPlot:!0,staticPlot:!0,setBackground:L}),R=t.getRedrawFunc(C);function O(){return new Promise(function(U){setTimeout(U,t.getDelay(C._fullLayout))})}function N(){return new Promise(function(U,Y){var z=f(C,g,P),B=C._fullLayout.width,H=C._fullLayout.height;function V(){a.purge(C),document.body.removeChild(C)}if(g==="full-json"){var Z=u.graphJson(C,!1,"keepdata","object",!0,!0);return Z.version=o,Z=JSON.stringify(Z),V(),U(I?Z:t.encodeJSON(Z))}if(V(),g==="svg")return U(I?z:t.encodeSVG(z));var q=document.createElement("canvas");q.id=c.randstr(),n({format:g,width:B,height:H,scale:P,canvas:q,svg:z,promise:!0}).then(U).catch(Y)})}function G(U){return I?U.replace(t.IMAGE_URL_PREFIX,""):U}return new Promise(function(U,Y){a.plot(C,p,k,E).then(R).then(O).then(N).then(function(z){U(G(z))}).catch(function(z){Y(z)})})}d.exports=h},{"../lib":778,"../plots/plots":891,"../snapshot/helpers":915,"../snapshot/svgtoimg":917,"../snapshot/tosvg":919,"../version":1370,"./plot_api":814,"fast-isnumeric":241}],821:[function(e,d,S){var r=e("../lib"),a=e("../plots/plots"),u=e("./plot_schema"),c=e("./plot_config").dfltConfig,t=r.isPlainObject,f=Array.isArray,n=r.isArrayOrTypedArray;d.exports=function(w,g){w===void 0&&(w=[]),g===void 0&&(g={});var T=u.get(),M=[],P={_context:r.extendFlat({},c)},L,I;f(w)?(P.data=r.extendDeep([],w),L=w):(P.data=[],L=[],M.push(s("array","data"))),t(g)?(P.layout=r.extendDeep({},g),I=g):(P.layout={},I={},arguments.length>1&&M.push(s("object","layout"))),a.supplyDefaults(P);for(var C=P._fullData,k=L.length,E=0;E<k;E++){var R=L[E],O=["data",E];if(!t(R)){M.push(s("object",O));continue}var N=C[E],G=N.type,U=T.traces[G].attributes;U.type={valType:"enumerated",values:[G]},N.visible===!1&&R.visible!==!1&&M.push(s("invisible",O)),o(R,N,U,M,O);var Y=R.transforms,z=N.transforms;if(Y){f(Y)||M.push(s("array",O,["transforms"])),O.push("transforms");for(var B=0;B<Y.length;B++){var H=["transforms",B],V=Y[B].type;if(!t(Y[B])){M.push(s("object",O,H));continue}var Z=T.transforms[V]?T.transforms[V].attributes:{};Z.type={valType:"enumerated",values:Object.keys(T.transforms)},o(Y[B],z[B],Z,M,O,H)}}}var q=P._fullLayout,J=l(T,C);return o(I,q,J,M,"layout"),M.length===0?void 0:M};function o(x,w,g,T,M,P){P=P||[];for(var L=Object.keys(x),I=0;I<L.length;I++){var C=L[I];if(C!=="transforms"){var k=P.slice();k.push(C);var E=x[C],R=w[C],O=v(g,C),N=(O||{}).valType,G=N==="info_array",U=N==="colorscale",Y=(O||{}).items;if(!p(g,C))T.push(s("schema",M,k));else if(t(E)&&t(R)&&N!=="any")o(E,R,O,T,M,k);else if(G&&f(E)){E.length>R.length&&T.push(s("unused",M,k.concat(R.length)));var z=R.length,B=Array.isArray(Y);B&&(z=Math.min(z,Y.length));var H,V,Z,q,J;if(O.dimensions===2)for(V=0;V<z;V++)if(f(E[V])){E[V].length>R[V].length&&T.push(s("unused",M,k.concat(V,R[V].length)));var ne=R[V].length;for(H=0;H<(B?Math.min(ne,Y[V].length):ne);H++)Z=B?Y[V][H]:Y,q=E[V][H],J=R[V][H],r.validate(q,Z)?J!==q&&J!==+q&&T.push(s("dynamic",M,k.concat(V,H),q,J)):T.push(s("value",M,k.concat(V,H),q))}else T.push(s("array",M,k.concat(V),E[V]));else for(V=0;V<z;V++)Z=B?Y[V]:Y,q=E[V],J=R[V],r.validate(q,Z)?J!==q&&J!==+q&&T.push(s("dynamic",M,k.concat(V),q,J)):T.push(s("value",M,k.concat(V),q))}else if(O.items&&!G&&f(E)){var ve=Y[Object.keys(Y)[0]],$=[],j,ae;for(j=0;j<R.length;j++){var ie=R[j]._index||j;if(ae=k.slice(),ae.push(ie),t(E[ie])&&t(R[j])){$.push(ie);var te=E[ie],re=R[j];t(te)&&te.visible!==!1&&re.visible===!1?T.push(s("invisible",M,ae)):o(te,re,ve,T,M,ae)}}for(j=0;j<E.length;j++)ae=k.slice(),ae.push(j),t(E[j])?$.indexOf(j)===-1&&T.push(s("unused",M,ae)):T.push(s("object",M,ae,E[j]))}else!t(E)&&t(R)?T.push(s("object",M,k,E)):!n(E)&&n(R)&&!G&&!U?T.push(s("array",M,k,E)):C in w?r.validate(E,O)?O.valType==="enumerated"&&(O.coerceNumber&&E!==+R||E!==R)&&T.push(s("dynamic",M,k,E,R)):T.push(s("value",M,k,E)):T.push(s("unused",M,k,E))}}return T}function l(x,w){for(var g=x.layout.layoutAttributes,T=0;T<w.length;T++){var M=w[T],P=x.traces[M.type],L=P.layoutAttributes;L&&(M.subplot?r.extendFlat(g[P.attributes.subplot.dflt],L):r.extendFlat(g,L))}return g}var h={object:function(x,w){var g;return x==="layout"&&w===""?g="The layout argument":x[0]==="data"&&w===""?g="Trace "+x[1]+" in the data argument":g=i(x)+"key "+w,g+" must be linked to an object container"},array:function(x,w){var g;return x==="data"?g="The data argument":g=i(x)+"key "+w,g+" must be linked to an array container"},schema:function(x,w){return i(x)+"key "+w+" is not part of the schema"},unused:function(x,w,g){var T=t(g)?"container":"key";return i(x)+T+" "+w+" did not get coerced"},dynamic:function(x,w,g,T){return[i(x)+"key",w,"(set to '"+g+"')","got reset to","'"+T+"'","during defaults."].join(" ")},invisible:function(x,w){return(w?i(x)+"item "+w:"Trace "+x[1])+" got defaulted to be not visible"},value:function(x,w,g){return[i(x)+"key "+w,"is set to an invalid value ("+g+")"].join(" ")}};function i(x){return f(x)?"In data trace "+x[1]+", ":"In "+x+", "}function s(x,w,g,T,M){g=g||"";var P,L;f(w)?(P=w[0],L=w[1]):(P=w,L=null);var I=y(g),C=h[x](w,I,T,M);return r.log(C),{code:x,container:P,trace:L,path:g,astr:I,msg:C}}function p(x,w){var g=b(w),T=g.keyMinusId,M=g.id;return T in x&&x[T]._isSubplotObj&&M?!0:w in x}function v(x,w){if(w in x)return x[w];var g=b(w);return x[g.keyMinusId]}var m=r.counterRegex("([a-z]+)");function b(x){var w=x.match(m);return{keyMinusId:w&&w[1],id:w&&w[2]}}function y(x){if(!f(x))return String(x);for(var w="",g=0;g<x.length;g++){var T=x[g];typeof T=="number"?w=w.substr(0,w.length-1)+"["+T+"]":w+=T,g<x.length-1&&(w+=".")}return w}},{"../lib":778,"../plots/plots":891,"./plot_config":815,"./plot_schema":816}],822:[function(e,d,S){d.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],823:[function(e,d,S){var r=e("../lib"),a=e("../plot_api/plot_template");d.exports=function(c,t,f){var n=f.name,o=f.inclusionAttr||"visible",l=t[n],h=r.isArrayOrTypedArray(c[n])?c[n]:[],i=t[n]=[],s=a.arrayTemplater(t,n,o),p,v;for(p=0;p<h.length;p++){var m=h[p];r.isPlainObject(m)?v=s.newItem(m):(v=s.newItem({}),v[o]=!1),v._index=p,v[o]!==!1&&f.handleItemDefaults(m,v,t,f),i.push(v)}var b=s.defaultItems();for(p=0;p<b.length;p++)v=b[p],v._index=i.length,f.handleItemDefaults({},v,t,f,{}),i.push(v);if(r.isArrayOrTypedArray(l)){var y=Math.min(l.length,i.length);for(p=0;p<y;p++)r.relinkPrivateKeys(i[p],l[p])}return i}},{"../lib":778,"../plot_api/plot_template":817}],824:[function(e,d,S){var r=e("../components/fx/attributes");d.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:r.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":674}],825:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=a.dateTime2ms,c=a.incrementMonth,t=e("../../constants/numerical"),f=t.ONEAVGMONTH;d.exports=function(o,l,h,i){if(l.type!=="date")return i;var s=o[h+"periodalignment"];if(!s)return i;var p=o[h+"period"],v;if(r(p)){if(p=+p,p<=0)return i}else if(typeof p=="string"&&p.charAt(0)==="M"){var m=+p.substring(1);if(m>0&&Math.round(m)===m)v=m;else return i}for(var b=l.calendar,y=s==="start",x=s==="end",w=o[h+"period0"],g=u(w,b)||0,T=[],M=i.length,P=0;P<M;P++){var L=i[P],I,C,k;if(v){for(I=Math.round((L-g)/(v*f)),k=c(g,v*I,b);k>L;)k=c(k,-v,b);for(;k<=L;)k=c(k,v,b);C=c(k,-v,b)}else{for(I=Math.round((L-g)/p),k=g+I*p;k>L;)k-=p;for(;k<=L;)k+=p;C=k-p}T[P]=y?C:x?k:(C+k)/2}return T}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],826:[function(e,d,S){d.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],827:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").FP_SAFE,c=e("../../registry"),t=e("./axis_ids"),f=t.getFromId,n=t.isLinked;d.exports={getAutoRange:o,makePadFn:h,doAutoRange:v,findExtremes:m,concatExtremes:p};function o(M,P){var L,I,C=[],k=M._fullLayout,E=h(k,P,0),R=h(k,P,1),O=p(M,P),N=O.min,G=O.max;if(N.length===0||G.length===0)return a.simpleMap(P.range,P.r2l);var U=N[0].val,Y=G[0].val;for(L=1;L<N.length&&U===Y;L++)U=Math.min(U,N[L].val);for(L=1;L<G.length&&U===Y;L++)Y=Math.max(Y,G[L].val);var z=!1;if(P.range){var B=a.simpleMap(P.range,P.r2l);z=B[1]<B[0]}P.autorange==="reversed"&&(z=!0,P.autorange=!0);var H=P.rangemode,V=H==="tozero",Z=H==="nonnegative",q=P._length,J=q/10,ne=0,ve,$,j,ae,ie,te;for(L=0;L<N.length;L++)for(ve=N[L],I=0;I<G.length;I++)$=G[I],te=$.val-ve.val-l(P,ve.val,$.val),te>0&&(ie=q-E(ve)-R($),ie>J?te/ie>ne&&(j=ve,ae=$,ne=te/ie):te/q>ne&&(j={val:ve.val,nopad:1},ae={val:$.val,nopad:1},ne=te/q));function re(de,be){return Math.max(de,R(be))}if(U===Y){var ce=U-1,pe=U+1;if(V)if(U===0)C=[0,1];else{var fe=(U>0?G:N).reduce(re,0),se=U/(1-Math.min(.5,fe/q));C=U>0?[0,se]:[se,0]}else Z?C=[Math.max(0,ce),Math.max(1,pe)]:C=[ce,pe]}else V?(j.val>=0&&(j={val:0,nopad:1}),ae.val<=0&&(ae={val:0,nopad:1})):Z&&(j.val-ne*E(j)<0&&(j={val:0,nopad:1}),ae.val<=0&&(ae={val:1,nopad:1})),ne=(ae.val-j.val-l(P,ve.val,$.val))/(q-E(j)-R(ae)),C=[j.val-ne*E(j),ae.val+ne*R(ae)];return z&&C.reverse(),a.simpleMap(C,P.l2r||Number)}function l(M,P,L){var I=0;if(M.rangebreaks)for(var C=M.locateBreaks(P,L),k=0;k<C.length;k++){var E=C[k];I+=E.max-E.min}return I}function h(M,P,L){var I=.05*P._length,C=P._anchorAxis||{};if((P.ticklabelposition||"").indexOf("inside")!==-1||(C.ticklabelposition||"").indexOf("inside")!==-1){var k=P.autorange==="reversed";if(!k){var E=a.simpleMap(P.range,P.r2l);k=E[1]<E[0]}k&&(L=!L)}var R=0;return n(M,P._id)||(R=s(P,L)),I=Math.max(R,I),P.constrain==="domain"&&P._inputDomain&&(I*=(P._inputDomain[1]-P._inputDomain[0])/(P.domain[1]-P.domain[0])),function(N){return N.nopad?0:N.pad+(N.extrapad?I:R)}}var i=3;function s(M,P){var L=0,I=M._anchorAxis||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!P&&(I.side==="left"||I.side==="bottom")||P&&(I.side==="top"||I.side==="right"))){var C=M._id.charAt(0)==="x";if(I._vals){var k=a.deg2rad(I._tickAngles[I._id+"tick"]||0),E=Math.abs(Math.cos(k)),R=Math.abs(Math.sin(k));I._vals.forEach(function(O){if(O.bb){var N=2*i+O.bb.width,G=2*i+O.bb.height;L=Math.max(L,C?Math.max(N*E,G*R):Math.max(G*E,N*R))}})}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(L+=I.ticklen||0)}return L}function p(M,P,L){var I=P._id,C=M._fullData,k=M._fullLayout,E=[],R=[],O,N,G;function U(V,Z){for(O=0;O<Z.length;O++){var q=V[Z[O]],J=(q._extremes||{})[I];if(q.visible===!0&&J){for(N=0;N<J.min.length;N++)G=J.min[N],b(E,G.val,G.pad,{extrapad:G.extrapad});for(N=0;N<J.max.length;N++)G=J.max[N],y(R,G.val,G.pad,{extrapad:G.extrapad})}}}if(U(C,P._traceIndices),U(k.annotations||[],P._annIndices||[]),U(k.shapes||[],P._shapeIndices||[]),P._matchGroup&&!L){for(var Y in P._matchGroup)if(Y!==P._id){var z=f(M,Y),B=p(M,z,!0),H=P._length/z._length;for(N=0;N<B.min.length;N++)G=B.min[N],b(E,G.val,G.pad*H,{extrapad:G.extrapad});for(N=0;N<B.max.length;N++)G=B.max[N],y(R,G.val,G.pad*H,{extrapad:G.extrapad})}}return{min:E,max:R}}function v(M,P,L){if(P.setScale(),P.autorange){P.range=L?L.slice():o(M,P),P._r=P.range.slice(),P._rl=a.simpleMap(P._r,P.r2l);var I=P._input,C={};C[P._attr+".range"]=P.range,C[P._attr+".autorange"]=P.autorange,c.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,C),I.range=P.range.slice(),I.autorange=P.autorange}var k=P._anchorAxis;if(k&&k.rangeslider){var E=k.rangeslider[P._name];E&&E.rangemode==="auto"&&(E.range=o(M,P)),k._input.rangeslider[P._name]=a.extendFlat({},E)}}function m(M,P,L){L||(L={}),M._m||M.setScale();var I=[],C=[],k=P.length,E=L.padded||!1,R=L.tozero&&(M.type==="linear"||M.type==="-"),O=M.type==="log",N=!1,G=L.vpadLinearized||!1,U,Y,z,B,H,V,Z,q,J;function ne(ce){if(Array.isArray(ce))return N=!0,function(fe){return Math.max(Number(ce[fe]||0),0)};var pe=Math.max(Number(ce||0),0);return function(){return pe}}var ve=ne((M._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),$=ne((M._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),j=ne(L.vpadplus||L.vpad),ae=ne(L.vpadminus||L.vpad);if(!N){if(q=1/0,J=-1/0,O)for(U=0;U<k;U++)Y=P[U],Y<q&&Y>0&&(q=Y),Y>J&&Y<u&&(J=Y);else for(U=0;U<k;U++)Y=P[U],Y<q&&Y>-u&&(q=Y),Y>J&&Y<u&&(J=Y);P=[q,J],k=2}var ie={tozero:R,extrapad:E};function te(ce){z=P[ce],r(z)&&(V=ve(ce),Z=$(ce),G?(B=M.c2l(z)-ae(ce),H=M.c2l(z)+j(ce)):(q=z-ae(ce),J=z+j(ce),O&&q<J/10&&(q=J/10),B=M.c2l(q),H=M.c2l(J)),R&&(B=Math.min(0,B),H=Math.max(0,H)),w(B)&&b(I,B,Z,ie),w(H)&&y(C,H,V,ie))}var re=Math.min(6,k);for(U=0;U<re;U++)te(U);for(U=k-1;U>=re;U--)te(U);return{min:I,max:C,opts:L}}function b(M,P,L,I){x(M,P,L,I,g)}function y(M,P,L,I){x(M,P,L,I,T)}function x(M,P,L,I,C){for(var k=I.tozero,E=I.extrapad,R=!0,O=0;O<M.length&&R;O++){var N=M[O];if(C(N.val,P)&&N.pad>=L&&(N.extrapad||!E)){R=!1;break}else C(P,N.val)&&N.pad<=L&&(E||!N.extrapad)&&(M.splice(O,1),O--)}if(R){var G=k&&P===0;M.push({val:P,pad:G?0:L,extrapad:G?!1:E})}}function w(M){return r(M)&&Math.abs(M)<u}function g(M,P){return M<=P}function T(M,P){return M>=P}},{"../../constants/numerical":753,"../../lib":778,"../../registry":911,"./axis_ids":831,"fast-isnumeric":241}],828:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../plots/plots"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../components/titles"),l=e("../../components/color"),h=e("../../components/drawing"),i=e("./layout_attributes"),s=e("./clean_ticks"),p=e("../../constants/numerical"),v=p.ONEMAXYEAR,m=p.ONEAVGYEAR,b=p.ONEMINYEAR,y=p.ONEMAXQUARTER,x=p.ONEAVGQUARTER,w=p.ONEMINQUARTER,g=p.ONEMAXMONTH,T=p.ONEAVGMONTH,M=p.ONEMINMONTH,P=p.ONEWEEK,L=p.ONEDAY,I=L/2,C=p.ONEHOUR,k=p.ONEMIN,E=p.ONESEC,R=p.MINUS_SIGN,O=p.BADNUM,N=e("../../constants/alignment"),G=N.MID_SHIFT,U=N.CAP_SHIFT,Y=N.LINE_SPACING,z=N.OPPOSITE_SIDE,B=3,H=d.exports={};H.setConvert=e("./set_convert");var V=e("./axis_autotype"),Z=e("./axis_ids"),q=Z.idSort,J=Z.isLinked;H.id2name=Z.id2name,H.name2id=Z.name2id,H.cleanId=Z.cleanId,H.list=Z.list,H.listIds=Z.listIds,H.getFromId=Z.getFromId,H.getFromTrace=Z.getFromTrace;var ne=e("./autorange");H.getAutoRange=ne.getAutoRange,H.findExtremes=ne.findExtremes;var ve=1e-4;function $(je){var Oe=(je[1]-je[0])*ve;return[je[0]-Oe,je[1]+Oe]}H.coerceRef=function(je,Oe,mt,wt,yt,St){var kt=wt.charAt(wt.length-1),Rt=mt._fullLayout._subplots[kt+"axis"],zt=wt+"ref",Xt={};return yt||(yt=Rt[0]||(typeof St=="string"?St:St[0])),St||(St=yt),Rt=Rt.concat(Rt.map(function(Yt){return Yt+" domain"})),Xt[zt]={valType:"enumerated",values:Rt.concat(St?typeof St=="string"?[St]:St:[]),dflt:yt},t.coerce(je,Oe,Xt,zt)},H.getRefType=function(je){return je===void 0?je:je==="paper"?"paper":je==="pixel"?"pixel":/( domain)$/.test(je)?"domain":"range"},H.coercePosition=function(je,Oe,mt,wt,yt,St){var kt,Rt,zt=H.getRefType(wt);if(zt!=="range")kt=t.ensureNumber,Rt=mt(yt,St);else{var Xt=H.getFromId(Oe,wt);St=Xt.fraction2r(St),Rt=mt(yt,St),kt=Xt.cleanPos}je[yt]=kt(Rt)},H.cleanPosition=function(je,Oe,mt){var wt=mt==="paper"||mt==="pixel"?t.ensureNumber:H.getFromId(Oe,mt).cleanPos;return wt(je)},H.redrawComponents=function(je,Oe){Oe=Oe||H.listIds(je);var mt=je._fullLayout;function wt(yt,St,kt,Rt){for(var zt=c.getComponentMethod(yt,St),Xt={},Yt=0;Yt<Oe.length;Yt++)for(var Vt=mt[H.id2name(Oe[Yt])],cr=Vt[kt],Or=0;Or<cr.length;Or++){var kr=cr[Or];if(!Xt[kr]&&(zt(je,kr),Xt[kr]=1,Rt))return}}wt("annotations","drawOne","_annIndices"),wt("shapes","drawOne","_shapeIndices"),wt("images","draw","_imgIndices",!0)};var j=H.getDataConversions=function(je,Oe,mt,wt){var yt,St=mt==="x"||mt==="y"||mt==="z"?mt:wt;if(Array.isArray(St)){if(yt={type:V(wt,void 0,{autotypenumbers:je._fullLayout.autotypenumbers}),_categories:[]},H.setConvert(yt),yt.type==="category")for(var kt=0;kt<wt.length;kt++)yt.d2c(wt[kt])}else yt=H.getFromTrace(je,Oe,St);return yt?{d2c:yt.d2c,c2d:yt.c2d}:St==="ids"?{d2c:ie,c2d:ie}:{d2c:ae,c2d:ae}};function ae(je){return+je}function ie(je){return String(je)}H.getDataToCoordFunc=function(je,Oe,mt,wt){return j(je,Oe,mt,wt).d2c},H.counterLetter=function(je){var Oe=je.charAt(0);if(Oe==="x")return"y";if(Oe==="y")return"x"},H.minDtick=function(je,Oe,mt,wt){["log","category","multicategory"].indexOf(je.type)!==-1||!wt?je._minDtick=0:je._minDtick===void 0?(je._minDtick=Oe,je._forceTick0=mt):je._minDtick&&((je._minDtick/Oe+1e-6)%1<2e-6&&((mt-je._forceTick0)/Oe%1+1.000001)%1<2e-6?(je._minDtick=Oe,je._forceTick0=mt):((Oe/je._minDtick+1e-6)%1>2e-6||((mt-je._forceTick0)/je._minDtick%1+1.000001)%1>2e-6)&&(je._minDtick=0))},H.saveRangeInitial=function(je,Oe){for(var mt=H.list(je,"",!0),wt=!1,yt=0;yt<mt.length;yt++){var St=mt[yt],kt=St._rangeInitial===void 0,Rt=kt||!(St.range[0]===St._rangeInitial[0]&&St.range[1]===St._rangeInitial[1]);(kt&&St.autorange===!1||Oe&&Rt)&&(St._rangeInitial=St.range.slice(),wt=!0)}return wt},H.saveShowSpikeInitial=function(je,Oe){for(var mt=H.list(je,"",!0),wt=!1,yt="on",St=0;St<mt.length;St++){var kt=mt[St],Rt=kt._showSpikeInitial===void 0,zt=Rt||kt.showspikes!==kt._showspikes;(Rt||Oe&&zt)&&(kt._showSpikeInitial=kt.showspikes,wt=!0),yt==="on"&&!kt.showspikes&&(yt="off")}return je._fullLayout._cartesianSpikesEnabled=yt,wt},H.autoBin=function(je,Oe,mt,wt,yt,St){var kt=t.aggNums(Math.min,null,je),Rt=t.aggNums(Math.max,null,je);if(Oe.type==="category"||Oe.type==="multicategory")return{start:kt-.5,end:Rt+.5,size:Math.max(1,Math.round(St)||1),_dataSpan:Rt-kt};yt||(yt=Oe.calendar);var zt;if(Oe.type==="log"?zt={type:"linear",range:[kt,Rt]}:zt={type:Oe.type,range:t.simpleMap([kt,Rt],Oe.c2r,0,yt),calendar:yt},H.setConvert(zt),St=St&&s.dtick(St,zt.type),St)zt.dtick=St,zt.tick0=s.tick0(void 0,zt.type,yt);else{var Xt;if(mt)Xt=(Rt-kt)/mt;else{var Yt=t.distinctVals(je),Vt=Math.pow(10,Math.floor(Math.log(Yt.minDiff)/Math.LN10)),cr=Vt*t.roundUp(Yt.minDiff/Vt,[.9,1.9,4.9,9.9],!0);Xt=Math.max(cr,2*t.stdev(je)/Math.pow(je.length,wt?.25:.4)),a(Xt)||(Xt=1)}H.autoTicks(zt,Xt)}var Or=zt.dtick,kr=H.tickIncrement(H.tickFirst(zt),Or,"reverse",yt),Sr,vn;if(typeof Or=="number")kr=te(kr,je,zt,kt,Rt),vn=1+Math.floor((Rt-kr)/Or),Sr=kr+vn*Or;else for(zt.dtick.charAt(0)==="M"&&(kr=re(kr,je,Or,kt,yt)),Sr=kr,vn=0;Sr<=Rt;)Sr=H.tickIncrement(Sr,Or,!1,yt),vn++;return{start:Oe.c2r(kr,0,yt),end:Oe.c2r(Sr,0,yt),size:Or,_dataSpan:Rt-kt}};function te(je,Oe,mt,wt,yt){var St=0,kt=0,Rt=0,zt=0;function Xt(Or){return(1+(Or-je)*100/mt.dtick)%100<2}for(var Yt=0;Yt<Oe.length;Yt++)Oe[Yt]%1===0?Rt++:a(Oe[Yt])||zt++,Xt(Oe[Yt])&&St++,Xt(Oe[Yt]+mt.dtick/2)&&kt++;var Vt=Oe.length-zt;if(Rt===Vt&&mt.type!=="date")mt.dtick<1?je=wt-.5*mt.dtick:(je-=.5,je+mt.dtick<wt&&(je+=mt.dtick));else if(kt<Vt*.1&&(St>Vt*.3||Xt(wt)||Xt(yt))){var cr=mt.dtick/2;je+=je+cr<wt?cr:-cr}return je}function re(je,Oe,mt,wt,yt){var St=t.findExactDates(Oe,yt),kt=.8;if(St.exactDays>kt){var Rt=Number(mt.substr(1));St.exactYears>kt&&Rt%12===0?je=H.tickIncrement(je,"M6","reverse")+L*1.5:St.exactMonths>kt?je=H.tickIncrement(je,"M1","reverse")+L*15.5:je-=I;var zt=H.tickIncrement(je,mt);if(zt<=wt)return zt}return je}H.prepTicks=function(je,Oe){var mt=t.simpleMap(je.range,je.r2l,void 0,void 0,Oe);if(je._dtickInit=je.dtick,je._tick0Init=je.tick0,je.tickmode==="auto"||!je.dtick){var wt=je.nticks,yt;wt||(je.type==="category"||je.type==="multicategory"?(yt=je.tickfont?(je.tickfont.size||12)*1.2:15,wt=je._length/yt):(yt=je._id.charAt(0)==="y"?40:80,wt=t.constrain(je._length/yt,4,9)+1),je._name==="radialaxis"&&(wt*=2)),je.tickmode==="array"&&(wt*=100),je._roughDTick=Math.abs(mt[1]-mt[0])/wt,H.autoTicks(je,je._roughDTick),je._minDtick>0&&je.dtick<je._minDtick*2&&(je.dtick=je._minDtick,je.tick0=je.l2r(je._forceTick0))}je.ticklabelmode==="period"&&pe(je),je.tick0||(je.tick0=je.type==="date"?"2000-01-01":0),je.type==="date"&&je.dtick<.1&&(je.dtick=.1),qe(je)};function ce(je){return+je.substring(1)}function pe(je){var Oe;function mt(){return!(a(je.dtick)||je.dtick.charAt(0)!=="M")}var wt=mt(),yt=H.getTickFormat(je);if(yt){var St=je._dtickInit!==je.dtick;/%[fLQsSMX]/.test(yt)||(/%[HI]/.test(yt)?(Oe=C,St&&!wt&&je.dtick<C&&(je.dtick=C)):/%p/.test(yt)?(Oe=I,St&&!wt&&je.dtick<I&&(je.dtick=I)):/%[Aadejuwx]/.test(yt)?(Oe=L,St&&!wt&&je.dtick<L&&(je.dtick=L)):/%[UVW]/.test(yt)?(Oe=P,St&&!wt&&je.dtick<P&&(je.dtick=P)):/%[Bbm]/.test(yt)?(Oe=T,St&&(wt?ce(je.dtick)<1:je.dtick<M)&&(je.dtick="M1")):/%[q]/.test(yt)?(Oe=x,St&&(wt?ce(je.dtick)<3:je.dtick<w)&&(je.dtick="M3")):/%[Yy]/.test(yt)&&(Oe=m,St&&(wt?ce(je.dtick)<12:je.dtick<b)&&(je.dtick="M12")))}wt=mt(),wt&&je.tick0===je._dowTick0&&(je.tick0=je._rawTick0),je._definedDelta=Oe}function fe(je,Oe,mt){for(var wt=0;wt<je.length;wt++){var yt=je[wt].value,St=wt,kt=wt+1;wt<je.length-1?(St=wt,kt=wt+1):wt>0?(St=wt-1,kt=wt):(St=wt,kt=wt);var Rt=je[St].value,zt=je[kt].value,Xt=Math.abs(zt-Rt),Yt=mt||Xt,Vt=0;Yt>=b?Xt>=b&&Xt<=v?Vt=Xt:Vt=m:mt===x&&Yt>=w?Xt>=w&&Xt<=y?Vt=Xt:Vt=x:Yt>=M?Xt>=M&&Xt<=g?Vt=Xt:Vt=T:mt===P&&Yt>=P?Vt=P:Yt>=L?Vt=L:mt===I&&Yt>=I?Vt=I:mt===C&&Yt>=C&&(Vt=C);var cr;Vt>=Xt&&(Vt=Xt,cr=!0);var Or=yt+Vt;if(Oe.rangebreaks&&Vt>0){for(var kr=84,Sr=0,vn=0;vn<kr;vn++){var Rn=(vn+.5)/kr;Oe.maskBreaks(yt*(1-Rn)+Rn*Or)!==O&&Sr++}Vt*=Sr/kr,Vt||(je[wt].drop=!0),cr&&Xt>P&&(Vt=Xt)}(Vt>0||wt===0)&&(je[wt].periodX=yt+Vt/2)}}H.calcTicks=function(Oe,mt){H.prepTicks(Oe,mt);var wt=t.simpleMap(Oe.range,Oe.r2l,void 0,void 0,mt);if(Oe.tickmode==="array")return se(Oe);var yt=$(wt),St=yt[0],kt=yt[1],Rt=wt[1]<wt[0],zt=Math.min(wt[0],wt[1]),Xt=Math.max(wt[0],wt[1]),Yt=Oe.type==="log"&&!(a(Oe.dtick)||Oe.dtick.charAt(0)==="L"),Vt=Oe.ticklabelmode==="period";if(Oe._tmin=H.tickFirst(Oe,mt),Oe._tmin<St!==Rt)return[];(Oe.type==="category"||Oe.type==="multicategory")&&(kt=Rt?Math.max(-.5,kt):Math.min(Oe._categories.length-.5,kt));var cr=Oe._tmin;Oe.rangebreaks&&Oe._tick0Init!==Oe.tick0&&(cr=$t(cr,Oe),Rt||(cr=H.tickIncrement(cr,Oe.dtick,!Rt,Oe.calendar))),Vt&&(cr=H.tickIncrement(cr,Oe.dtick,!Rt,Oe.calendar));for(var Or=Math.max(1e3,Oe._length||0),kr=[],Sr=null;Rt?cr>=kt:cr<=kt;cr=H.tickIncrement(cr,Oe.dtick,Rt,Oe.calendar)){if(Oe.rangebreaks&&!Rt){if(cr<St)continue;if(Oe.maskBreaks(cr)===O&&$t(cr,Oe)>=Xt)break}if(kr.length>Or||cr===Sr)break;Sr=cr;var vn=!1;Yt&&cr!==(cr|0)&&(vn=!0),kr.push({minor:vn,value:cr})}Vt&&fe(kr,Oe,Oe._definedDelta);var Rn;if(Oe.rangebreaks){var hn=Oe._id.charAt(0)==="y",An=1;Oe.tickmode==="auto"&&(An=Oe.tickfont?Oe.tickfont.size:12);var En=NaN;for(Rn=kr.length-1;Rn>-1;Rn--){if(kr[Rn].drop){kr.splice(Rn,1);continue}kr[Rn].value=$t(kr[Rn].value,Oe);var Mr=Oe.c2p(kr[Rn].value);(hn?En>Mr-An:En<Mr+An)?kr.splice(Rt?Rn+1:Rn,1):En=Mr}}Pt(Oe)&&Math.abs(wt[1]-wt[0])===360&&kr.pop(),Oe._tmax=(kr[kr.length-1]||{}).value,Oe._prevDateHead="",Oe._inCalcTicks=!0;var xr=[],dn,qr;for(Rn=0;Rn<kr.length;Rn++){var on=kr[Rn].minor,Vr=kr[Rn].value;dn=H.tickText(Oe,Vr,!1,on),qr=kr[Rn].periodX,qr!==void 0&&(dn.periodX=qr,(qr>Xt||qr<zt)&&(qr>Xt&&(dn.periodX=Xt),qr<zt&&(dn.periodX=zt),dn.text=" ",Oe._prevDateHead="")),xr.push(dn)}return Oe._inCalcTicks=!1,xr};function se(je){var Oe=je.tickvals,mt=je.ticktext,wt=new Array(Oe.length),yt=t.simpleMap(je.range,je.r2l),St=$(yt),kt=Math.min(St[0],St[1]),Rt=Math.max(St[0],St[1]),zt=0;Array.isArray(mt)||(mt=[]);var Xt=je.type==="category"?je.d2l_noadd:je.d2l;je.type==="log"&&String(je.dtick).charAt(0)!=="L"&&(je.dtick="L"+Math.pow(10,Math.floor(Math.min(je.range[0],je.range[1]))-1));for(var Yt=0;Yt<Oe.length;Yt++){var Vt=Xt(Oe[Yt]);Vt>kt&&Vt<Rt&&(mt[Yt]===void 0?wt[zt]=H.tickText(je,Vt):wt[zt]=Ee(je,Vt,String(mt[Yt])),zt++)}return zt<Oe.length&&wt.splice(zt,Oe.length-zt),je.rangebreaks&&(wt=wt.filter(function(cr){return je.maskBreaks(cr.x)!==O})),wt}var de=[2,5,10],be=[1,2,3,6,12],xe=[1,2,5,10,15,30],ke=[1,2,3,7,14],Re=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ke=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Je(je,Oe,mt){return Oe*t.roundUp(je/Oe,mt)}H.autoTicks=function(je,Oe){var mt;function wt(Yt){return Math.pow(Yt,Math.floor(Math.log(Oe)/Math.LN10))}if(je.type==="date"){je.tick0=t.dateTick0(je.calendar,0);var yt=2*Oe;if(yt>m)Oe/=m,mt=wt(10),je.dtick="M"+12*Je(Oe,mt,de);else if(yt>T)Oe/=T,je.dtick="M"+Je(Oe,1,be);else if(yt>L){je.dtick=Je(Oe,L,je._hasDayOfWeekBreaks?[1,2,7,14]:ke);var St=H.getTickFormat(je),kt=je.ticklabelmode==="period";kt&&(je._rawTick0=je.tick0),/%[uVW]/.test(St)?je.tick0=t.dateTick0(je.calendar,2):je.tick0=t.dateTick0(je.calendar,1),kt&&(je._dowTick0=je.tick0)}else yt>C?je.dtick=Je(Oe,C,be):yt>k?je.dtick=Je(Oe,k,xe):yt>E?je.dtick=Je(Oe,E,xe):(mt=wt(10),je.dtick=Je(Oe,mt,de))}else if(je.type==="log"){je.tick0=0;var Rt=t.simpleMap(je.range,je.r2l);if(Oe>.7)je.dtick=Math.ceil(Oe);else if(Math.abs(Rt[1]-Rt[0])<1){var zt=1.5*Math.abs((Rt[1]-Rt[0])/Oe);Oe=Math.abs(Math.pow(10,Rt[1])-Math.pow(10,Rt[0]))/zt,mt=wt(10),je.dtick="L"+Je(Oe,mt,de)}else je.dtick=Oe>.3?"D2":"D1"}else je.type==="category"||je.type==="multicategory"?(je.tick0=0,je.dtick=Math.ceil(Math.max(Oe,1))):Pt(je)?(je.tick0=0,mt=1,je.dtick=Je(Oe,mt,ze)):(je.tick0=0,mt=wt(10),je.dtick=Je(Oe,mt,de));if(je.dtick===0&&(je.dtick=1),!a(je.dtick)&&typeof je.dtick!="string"){var Xt=je.dtick;throw je.dtick=1,"ax.dtick error: "+String(Xt)}};function qe(je){var Oe=je.dtick;if(je._tickexponent=0,!a(Oe)&&typeof Oe!="string"&&(Oe=1),(je.type==="category"||je.type==="multicategory")&&(je._tickround=null),je.type==="date"){var mt=je.r2l(je.tick0),wt=je.l2r(mt).replace(/(^-|i)/g,""),yt=wt.length;if(String(Oe).charAt(0)==="M")yt>10||wt.substr(5)!=="01-01"?je._tickround="d":je._tickround=+Oe.substr(1)%12===0?"y":"m";else if(Oe>=L&&yt<=10||Oe>=L*15)je._tickround="d";else if(Oe>=k&&yt<=16||Oe>=C)je._tickround="M";else if(Oe>=E&&yt<=19||Oe>=k)je._tickround="S";else{var St=je.l2r(mt+Oe).replace(/^-/,"").length;je._tickround=Math.max(yt,St)-20,je._tickround<0&&(je._tickround=4)}}else if(a(Oe)||Oe.charAt(0)==="L"){var kt=je.range.map(je.r2d||Number);a(Oe)||(Oe=Number(Oe.substr(1))),je._tickround=2-Math.floor(Math.log(Oe)/Math.LN10+.01);var Rt=Math.max(Math.abs(kt[0]),Math.abs(kt[1])),zt=Math.floor(Math.log(Rt)/Math.LN10+.01),Xt=je.minexponent===void 0?3:je.minexponent;Math.abs(zt)>Xt&&(Ot(je.exponentformat)&&!Wt(zt)?je._tickexponent=3*Math.round((zt-1)/3):je._tickexponent=zt)}else je._tickround=null}H.tickIncrement=function(je,Oe,mt,wt){var yt=mt?-1:1;if(a(Oe))return t.increment(je,yt*Oe);var St=Oe.charAt(0),kt=yt*Number(Oe.substr(1));if(St==="M")return t.incrementMonth(je,kt,wt);if(St==="L")return Math.log(Math.pow(10,je)+kt)/Math.LN10;if(St==="D"){var Rt=Oe==="D2"?Ke:Re,zt=je+yt*.01,Xt=t.roundUp(t.mod(zt,1),Rt,mt);return Math.floor(zt)+Math.log(r.round(Math.pow(10,Xt),1))/Math.LN10}throw"unrecognized dtick "+String(Oe)},H.tickFirst=function(je,Oe){var mt=je.r2l||Number,wt=t.simpleMap(je.range,mt,void 0,void 0,Oe),yt=wt[1]<wt[0],St=yt?Math.floor:Math.ceil,kt=$(wt)[0],Rt=je.dtick,zt=mt(je.tick0);if(a(Rt)){var Xt=St((kt-zt)/Rt)*Rt+zt;return(je.type==="category"||je.type==="multicategory")&&(Xt=t.constrain(Xt,0,je._categories.length-1)),Xt}var Yt=Rt.charAt(0),Vt=Number(Rt.substr(1));if(Yt==="M"){for(var cr=0,Or=zt,kr,Sr,vn;cr<10;){if(kr=H.tickIncrement(Or,Rt,yt,je.calendar),(kr-kt)*(Or-kt)<=0)return yt?Math.min(Or,kr):Math.max(Or,kr);Sr=(kt-(Or+kr)/2)/(kr-Or),vn=Yt+(Math.abs(Math.round(Sr))||1)*Vt,Or=H.tickIncrement(Or,vn,Sr<0?!yt:yt,je.calendar),cr++}return t.error("tickFirst did not converge",je),Or}else{if(Yt==="L")return Math.log(St((Math.pow(10,kt)-zt)/Vt)*Vt+zt)/Math.LN10;if(Yt==="D"){var Rn=Rt==="D2"?Ke:Re,hn=t.roundUp(t.mod(kt,1),Rn,yt);return Math.floor(kt)+Math.log(r.round(Math.pow(10,hn),1))/Math.LN10}else throw"unrecognized dtick "+String(Rt)}},H.tickText=function(je,Oe,mt,wt){var yt=Ee(je,Oe),St=je.tickmode==="array",kt=mt||St,Rt=je.type,zt=Rt==="category"?je.d2l_noadd:je.d2l,Xt;if(St&&Array.isArray(je.ticktext)){var Yt=t.simpleMap(je.range,je.r2l),Vt=(Math.abs(Yt[1]-Yt[0])-(je._lBreaks||0))/1e4;for(Xt=0;Xt<je.ticktext.length&&!(Math.abs(Oe-zt(je.tickvals[Xt]))<Vt);Xt++);if(Xt<je.ticktext.length)return yt.text=String(je.ticktext[Xt]),yt}function cr(Sr){if(Sr===void 0)return!0;if(mt)return Sr==="none";var vn={first:je._tmin,last:je._tmax}[Sr];return Sr!=="all"&&Oe!==vn}var Or=mt?"never":je.exponentformat!=="none"&&cr(je.showexponent)?"hide":"";if(Rt==="date"?Ae(je,yt,mt,kt):Rt==="log"?Be(je,yt,mt,kt,Or):Rt==="category"?$e(je,yt):Rt==="multicategory"?xt(je,yt,mt):Pt(je)?Ne(je,yt,mt,kt,Or):bt(je,yt,mt,kt,Or),wt||(je.tickprefix&&!cr(je.showtickprefix)&&(yt.text=je.tickprefix+yt.text),je.ticksuffix&&!cr(je.showticksuffix)&&(yt.text+=je.ticksuffix)),je.tickson==="boundaries"||je.showdividers){var kr=function(Sr){var vn=je.l2p(Sr);return vn>=0&&vn<=je._length?Sr:null};yt.xbnd=[kr(yt.x-.5),kr(yt.x+je.dtick-.5)]}return yt},H.hoverLabelText=function(je,Oe,mt){if(mt!==O&&mt!==Oe)return H.hoverLabelText(je,Oe)+" - "+H.hoverLabelText(je,mt);var wt=je.type==="log"&&Oe<=0,yt=H.tickText(je,je.c2l(wt?-Oe:Oe),"hover").text;return wt?Oe===0?"0":R+yt:yt};function Ee(je,Oe,mt){var wt=je.tickfont||{};return{x:Oe,dx:0,dy:0,text:mt||"",fontSize:wt.size,font:wt.family,fontColor:wt.color}}function Ae(je,Oe,mt,wt){var yt=je._tickround,St=mt&&je.hoverformat||H.getTickFormat(je);wt&&(a(yt)?yt=4:yt={y:"m",m:"d",d:"M",M:"S",S:4}[yt]);var kt=t.formatDate(Oe.x,St,yt,je._dateFormat,je.calendar,je._extraFormat),Rt,zt=kt.indexOf(`
`);if(zt!==-1&&(Rt=kt.substr(zt+1),kt=kt.substr(0,zt)),wt&&(kt==="00:00:00"||kt==="00:00"?(kt=Rt,Rt=""):kt.length===8&&(kt=kt.replace(/:00$/,""))),Rt)if(mt)yt==="d"?kt+=", "+Rt:kt=Rt+(kt?", "+kt:"");else if(!je._inCalcTicks||je._prevDateHead!==Rt)je._prevDateHead=Rt,kt+="<br>"+Rt;else{var Xt=(je.ticklabelposition||"").indexOf("inside")!==-1,Yt=je._realSide||je.side;(!Xt&&Yt==="top"||Xt&&Yt==="bottom")&&(kt+="<br> ")}Oe.text=kt}function Be(je,Oe,mt,wt,yt){var St=je.dtick,kt=Oe.x,Rt=je.tickformat,zt=typeof St=="string"&&St.charAt(0);if(yt==="never"&&(yt=""),wt&&zt!=="L"&&(St="L3",zt="L"),Rt||zt==="L")Oe.text=Et(Math.pow(10,kt),je,yt,wt);else if(a(St)||zt==="D"&&t.mod(kt+.01,1)<.1){var Xt=Math.round(kt),Yt=Math.abs(Xt),Vt=je.exponentformat;Vt==="power"||Ot(Vt)&&Wt(Xt)?(Xt===0?Oe.text=1:Xt===1?Oe.text="10":Oe.text="10<sup>"+(Xt>1?"":R)+Yt+"</sup>",Oe.fontSize*=1.25):(Vt==="e"||Vt==="E")&&Yt>2?Oe.text="1"+Vt+(Xt>0?"+":R)+Yt:(Oe.text=Et(Math.pow(10,kt),je,"","fakehover"),St==="D1"&&je._id.charAt(0)==="y"&&(Oe.dy-=Oe.fontSize/6))}else if(zt==="D")Oe.text=String(Math.round(Math.pow(10,t.mod(kt,1)))),Oe.fontSize*=.75;else throw"unrecognized dtick "+String(St);if(je.dtick==="D1"){var cr=String(Oe.text).charAt(0);(cr==="0"||cr==="1")&&(je._id.charAt(0)==="y"?Oe.dx-=Oe.fontSize/4:(Oe.dy+=Oe.fontSize/2,Oe.dx+=(je.range[1]>je.range[0]?1:-1)*Oe.fontSize*(kt<0?.5:.25)))}}function $e(je,Oe){var mt=je._categories[Math.round(Oe.x)];mt===void 0&&(mt=""),Oe.text=String(mt)}function xt(je,Oe,mt){var wt=Math.round(Oe.x),yt=je._categories[wt]||[],St=yt[1]===void 0?"":String(yt[1]),kt=yt[0]===void 0?"":String(yt[0]);mt?Oe.text=kt+" - "+St:(Oe.text=St,Oe.text2=kt)}function bt(je,Oe,mt,wt,yt){yt==="never"?yt="":je.showexponent==="all"&&Math.abs(Oe.x/je.dtick)<1e-6&&(yt="hide"),Oe.text=Et(Oe.x,je,yt,wt)}function Ne(je,Oe,mt,wt,yt){if(je.thetaunit==="radians"&&!mt){var St=Oe.x/180;if(St===0)Oe.text="0";else{var kt=st(St);if(kt[1]>=100)Oe.text=Et(t.deg2rad(Oe.x),je,yt,wt);else{var Rt=Oe.x<0;kt[1]===1?kt[0]===1?Oe.text="\u03C0":Oe.text=kt[0]+"\u03C0":Oe.text=["<sup>",kt[0],"</sup>","\u2044","<sub>",kt[1],"</sub>","\u03C0"].join(""),Rt&&(Oe.text=R+Oe.text)}}}else Oe.text=Et(Oe.x,je,yt,wt)}function st(je){function Oe(Rt,zt){return Math.abs(Rt-zt)<=1e-6}function mt(Rt,zt){return Oe(zt,0)?Rt:mt(zt,Rt%zt)}function wt(Rt){for(var zt=1;!Oe(Math.round(Rt*zt)/zt,Rt);)zt*=10;return zt}var yt=wt(je),St=je*yt,kt=Math.abs(mt(St,yt));return[Math.round(St/kt),Math.round(yt/kt)]}var _t=["f","p","n","\u03BC","m","","k","M","G","T"];function Ot(je){return je==="SI"||je==="B"}function Wt(je){return je>14||je<-15}function Et(je,Oe,mt,wt){var yt=je<0,St=Oe._tickround,kt=mt||Oe.exponentformat||"B",Rt=Oe._tickexponent,zt=H.getTickFormat(Oe),Xt=Oe.separatethousands;if(wt){var Yt={exponentformat:kt,minexponent:Oe.minexponent,dtick:Oe.showexponent==="none"?Oe.dtick:a(je)&&Math.abs(je)||1,range:Oe.showexponent==="none"?Oe.range.map(Oe.r2d):[0,je||1]};qe(Yt),St=(Number(Yt._tickround)||0)+4,Rt=Yt._tickexponent,Oe.hoverformat&&(zt=Oe.hoverformat)}if(zt)return Oe._numFormat(zt)(je).replace(/-/g,R);var Vt=Math.pow(10,-St)/2;if(kt==="none"&&(Rt=0),je=Math.abs(je),je<Vt)je="0",yt=!1;else{if(je+=Vt,Rt&&(je*=Math.pow(10,-Rt),St+=Rt),St===0)je=String(Math.floor(je));else if(St<0){je=String(Math.round(je)),je=je.substr(0,je.length+St);for(var cr=St;cr<0;cr++)je+="0"}else{je=String(je);var Or=je.indexOf(".")+1;Or&&(je=je.substr(0,Or+St).replace(/\.?0+$/,""))}je=t.numSeparate(je,Oe._separators,Xt)}if(Rt&&kt!=="hide"){Ot(kt)&&Wt(Rt)&&(kt="power");var kr;Rt<0?kr=R+-Rt:kt!=="power"?kr="+"+Rt:kr=String(Rt),kt==="e"||kt==="E"?je+=kt+kr:kt==="power"?je+="\xD710<sup>"+kr+"</sup>":kt==="B"&&Rt===9?je+="B":Ot(kt)&&(je+=_t[Rt/3+5])}return yt?R+je:je}H.getTickFormat=function(je){var Oe;function mt(zt){return typeof zt!="string"?zt:Number(zt.replace("M",""))*T}function wt(zt,Xt){var Yt=["L","D"];if(typeof zt==typeof Xt){if(typeof zt=="number")return zt-Xt;var Vt=Yt.indexOf(zt.charAt(0)),cr=Yt.indexOf(Xt.charAt(0));return Vt===cr?Number(zt.replace(/(L|D)/g,""))-Number(Xt.replace(/(L|D)/g,"")):Vt-cr}else return typeof zt=="number"?1:-1}function yt(zt,Xt,Yt){var Vt=Yt||function(kr){return kr},cr=Xt[0],Or=Xt[1];return(!cr&&typeof cr!="number"||Vt(cr)<=Vt(zt))&&(!Or&&typeof Or!="number"||Vt(Or)>=Vt(zt))}function St(zt,Xt){var Yt=Xt[0]===null,Vt=Xt[1]===null,cr=wt(zt,Xt[0])>=0,Or=wt(zt,Xt[1])<=0;return(Yt||cr)&&(Vt||Or)}var kt,Rt;if(je.tickformatstops&&je.tickformatstops.length>0)switch(je.type){case"date":case"linear":{for(Oe=0;Oe<je.tickformatstops.length;Oe++)if(Rt=je.tickformatstops[Oe],Rt.enabled&&yt(je.dtick,Rt.dtickrange,mt)){kt=Rt;break}break}case"log":{for(Oe=0;Oe<je.tickformatstops.length;Oe++)if(Rt=je.tickformatstops[Oe],Rt.enabled&&St(je.dtick,Rt.dtickrange)){kt=Rt;break}break}}return kt?kt.value:je.tickformat},H.getSubplots=function(je,Oe){var mt=je._fullLayout._subplots,wt=mt.cartesian.concat(mt.gl2d||[]),yt=Oe?H.findSubplotsWithAxis(wt,Oe):wt;return yt.sort(function(St,kt){var Rt=St.substr(1).split("y"),zt=kt.substr(1).split("y");return Rt[0]===zt[0]?+Rt[1]-+zt[1]:+Rt[0]-+zt[0]}),yt},H.findSubplotsWithAxis=function(je,Oe){for(var mt=new RegExp(Oe._id.charAt(0)==="x"?"^"+Oe._id+"y":Oe._id+"$"),wt=[],yt=0;yt<je.length;yt++){var St=je[yt];mt.test(St)&&wt.push(St)}return wt},H.makeClipPaths=function(je){var Oe=je._fullLayout;if(!Oe._hasOnlyLargeSploms){var mt={_offset:0,_length:Oe.width,_id:""},wt={_offset:0,_length:Oe.height,_id:""},yt=H.list(je,"x",!0),St=H.list(je,"y",!0),kt=[],Rt,zt;for(Rt=0;Rt<yt.length;Rt++)for(kt.push({x:yt[Rt],y:wt}),zt=0;zt<St.length;zt++)Rt===0&&kt.push({x:mt,y:St[zt]}),kt.push({x:yt[Rt],y:St[zt]});var Xt=Oe._clips.selectAll(".axesclip").data(kt,function(Yt){return Yt.x._id+Yt.y._id});Xt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Yt){return"clip"+Oe._uid+Yt.x._id+Yt.y._id}).append("rect"),Xt.exit().remove(),Xt.each(function(Yt){r.select(this).select("rect").attr({x:Yt.x._offset||0,y:Yt.y._offset||0,width:Yt.x._length||1,height:Yt.y._length||1})})}},H.draw=function(je,Oe,mt){var wt=je._fullLayout;Oe==="redraw"&&wt._paper.selectAll("g.subplot").each(function(St){var kt=St[0],Rt=wt._plots[kt];if(Rt){var zt=Rt.xaxis,Xt=Rt.yaxis;Rt.xaxislayer.selectAll("."+zt._id+"tick").remove(),Rt.yaxislayer.selectAll("."+Xt._id+"tick").remove(),Rt.xaxislayer.selectAll("."+zt._id+"tick2").remove(),Rt.yaxislayer.selectAll("."+Xt._id+"tick2").remove(),Rt.xaxislayer.selectAll("."+zt._id+"divider").remove(),Rt.yaxislayer.selectAll("."+Xt._id+"divider").remove(),Rt.gridlayer&&Rt.gridlayer.selectAll("path").remove(),Rt.zerolinelayer&&Rt.zerolinelayer.selectAll("path").remove(),wt._infolayer.select(".g-"+zt._id+"title").remove(),wt._infolayer.select(".g-"+Xt._id+"title").remove()}});var yt=!Oe||Oe==="redraw"?H.listIds(je):Oe;return t.syncOrAsync(yt.map(function(St){return function(){if(!!St){var kt=H.getFromId(je,St),Rt=H.drawOne(je,kt,mt);return kt._r=kt.range.slice(),kt._rl=t.simpleMap(kt._r,kt.r2l),Rt}}}))},H.drawOne=function(je,Oe,mt){mt=mt||{};var wt,yt,St;Oe.setScale();var kt=je._fullLayout,Rt=Oe._id,zt=Rt.charAt(0),Xt=H.counterLetter(Rt),Yt=kt._plots[Oe._mainSubplot];if(!Yt)return;var Vt=Yt[zt+"axislayer"],cr=Oe._mainLinePosition,Or=Oe._mainMirrorPosition,kr=Oe._vals=H.calcTicks(Oe),Sr=[Oe.mirror,cr,Or].join("_");for(wt=0;wt<kr.length;wt++)kr[wt].axInfo=Sr;Oe._selections={},Oe._tickAngles&&(Oe._prevTickAngles=Oe._tickAngles),Oe._tickAngles={},Oe._depth=null;var vn={};function Rn(ar){var Wr=Rt+(ar||"tick");return vn[Wr]||(vn[Wr]=At(Oe,Wr)),vn[Wr]}if(!!Oe.visible){var hn=H.makeTransTickFn(Oe),An=H.makeTransTickLabelFn(Oe),En,Mr,xr=Oe.ticks==="inside",dn=Oe.ticks==="outside";if(Oe.tickson==="boundaries"){var qr=jt(Oe,kr);Mr=H.clipEnds(Oe,qr),En=xr?Mr:qr}else Mr=H.clipEnds(Oe,kr),En=xr&&Oe.ticklabelmode!=="period"?Mr:kr;var on=Oe._gridVals=Mr,Vr=Mt(Oe,kr);if(!kt._hasOnlyLargeSploms){var ln=Oe._subplotsWith,cn={};for(wt=0;wt<ln.length;wt++){yt=ln[wt],St=kt._plots[yt];var Zr=St[Xt+"axis"],ht=Zr._mainAxis._id;if(!cn[ht]){cn[ht]=1;var Nt=zt==="x"?"M0,"+Zr._offset+"v"+Zr._length:"M"+Zr._offset+",0h"+Zr._length;H.drawGrid(je,Oe,{vals:on,counterAxis:Zr,layer:St.gridlayer.select("."+Rt),path:Nt,transFn:hn}),H.drawZeroLine(je,Oe,{counterAxis:Zr,layer:St.zerolinelayer,path:Nt,transFn:hn})}}}var rr=H.getTickSigns(Oe),mr=[];if(Oe.ticks){var Rr=H.makeTickPath(Oe,cr,rr[2]),Er,Br;Oe._anchorAxis&&Oe.mirror&&Oe.mirror!==!0?(Er=H.makeTickPath(Oe,Or,rr[3]),Br=Rr+Er):(Er="",Br=Rr);var Lr;if(Oe.showdividers&&dn&&Oe.tickson==="boundaries"){var pn={};for(wt=0;wt<Vr.length;wt++)pn[Vr[wt].x]=1;Lr=function(ar){return pn[ar.x]?Er:Br}}else Lr=Br;H.drawTicks(je,Oe,{vals:En,layer:Vt,path:Lr,transFn:hn}),Oe.mirror==="allticks"&&(mr=Object.keys(Oe._linepositions||{}))}for(wt=0;wt<mr.length;wt++){yt=mr[wt],St=kt._plots[yt];var On=Oe._linepositions[yt]||[],Fn=H.makeTickPath(Oe,On[0],rr[0])+H.makeTickPath(Oe,On[1],rr[1]);H.drawTicks(je,Oe,{vals:En,layer:St[zt+"axislayer"],path:Fn,transFn:hn})}var Qn=[];if(Qn.push(function(){return H.drawLabels(je,Oe,{vals:kr,layer:Vt,transFn:An,labelFns:H.makeLabelFns(Oe,cr)})}),Oe.type==="multicategory"){var ya={x:2,y:10}[zt];Qn.push(function(){var ar={x:"height",y:"width"}[zt],Wr=Rn()[ar]+ya+(Oe._tickAngles[Rt+"tick"]?Oe.tickfont.size*Y:0);return H.drawLabels(je,Oe,{vals:Zt(Oe,kr),layer:Vt,cls:Rt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:hn,labelFns:H.makeLabelFns(Oe,cr+Wr*rr[4])})}),Qn.push(function(){return Oe._depth=rr[4]*(Rn("tick2")[Oe.side]-cr),Le(je,Oe,{vals:Vr,layer:Vt,path:H.makeTickPath(Oe,cr,rr[4],Oe._depth),transFn:hn})})}else Oe.title.hasOwnProperty("standoff")&&Qn.push(function(){Oe._depth=rr[4]*(Rn()[Oe.side]-cr)});var Sa=c.getComponentMethod("rangeslider","isVisible")(Oe);return Qn.push(function(){var ar=Oe.side.charAt(0),Wr=z[Oe.side].charAt(0),Fr=H.getPxPosition(je,Oe),yn=dn?Oe.ticklen:0,Sn,aa,Xn,ra;if((Oe.automargin||Sa)&&(Oe.type==="multicategory"?Sn=Rn("tick2"):(Sn=Rn(),zt==="x"&&ar==="b"&&(Oe._depth=Math.max(Sn.width>0?Sn.bottom-Fr:0,yn)))),Oe.automargin){aa={x:0,y:0,r:0,l:0,t:0,b:0};var na=[0,1];if(zt==="x"){if(ar==="b"?aa[ar]=Oe._depth:(aa[ar]=Oe._depth=Math.max(Sn.width>0?Fr-Sn.top:0,yn),na.reverse()),Sn.width>0){var ba=Sn.right-(Oe._offset+Oe._length);ba>0&&(aa.xr=1,aa.r=ba);var Ut=Oe._offset-Sn.left;Ut>0&&(aa.xl=0,aa.l=Ut)}}else if(ar==="l"?aa[ar]=Oe._depth=Math.max(Sn.height>0?Fr-Sn.left:0,yn):(aa[ar]=Oe._depth=Math.max(Sn.height>0?Sn.right-Fr:0,yn),na.reverse()),Sn.height>0){var lr=Sn.bottom-(Oe._offset+Oe._length);lr>0&&(aa.yb=0,aa.b=lr);var Ir=Oe._offset-Sn.top;Ir>0&&(aa.yt=1,aa.t=Ir)}aa[Xt]=Oe.anchor==="free"?Oe.position:Oe._anchorAxis.domain[na[0]],Oe.title.text!==kt._dfltTitle[zt]&&(aa[ar]+=Ve(Oe)+(Oe.title.standoff||0)),Oe.mirror&&Oe.anchor!=="free"&&(Xn={x:0,y:0,r:0,l:0,t:0,b:0},Xn[Wr]=Oe.linewidth,Oe.mirror&&Oe.mirror!==!0&&(Xn[Wr]+=yn),Oe.mirror===!0||Oe.mirror==="ticks"?Xn[Xt]=Oe._anchorAxis.domain[na[1]]:(Oe.mirror==="all"||Oe.mirror==="allticks")&&(Xn[Xt]=[Oe._counterDomainMin,Oe._counterDomainMax][na[1]]))}Sa&&(ra=c.getComponentMethod("rangeslider","autoMarginOpts")(je,Oe)),u.autoMargin(je,ut(Oe),aa),u.autoMargin(je,nt(Oe),Xn),u.autoMargin(je,Ge(Oe),ra)}),!mt.skipTitle&&!(Sa&&Oe.side==="bottom")&&Qn.push(function(){return Qe(je,Oe)}),t.syncOrAsync(Qn)}};function jt(je,Oe){var mt=[],wt,yt=function(St,kt){var Rt=St.xbnd[kt];Rt!==null&&mt.push(t.extendFlat({},St,{x:Rt}))};if(Oe.length){for(wt=0;wt<Oe.length;wt++)yt(Oe[wt],0);yt(Oe[wt-1],1)}return mt}function Zt(je,Oe){for(var mt=[],wt={},yt=0;yt<Oe.length;yt++){var St=Oe[yt];wt[St.text2]?wt[St.text2].push(St.x):wt[St.text2]=[St.x]}for(var kt in wt)mt.push(Ee(je,t.interp(wt[kt],.5),kt));return mt}function Mt(je,Oe){var mt=[],wt,yt,St=Oe.length&&Oe[Oe.length-1].x<Oe[0].x,kt=function(zt,Xt){var Yt=zt.xbnd[Xt];Yt!==null&&mt.push(t.extendFlat({},zt,{x:Yt}))};if(je.showdividers&&Oe.length){for(wt=0;wt<Oe.length;wt++){var Rt=Oe[wt];Rt.text2!==yt&&kt(Rt,St?1:0),yt=Rt.text2}kt(Oe[wt-1],St?0:1)}return mt}function At(je,Oe){var mt,wt,yt,St;return je._selections[Oe].size()?(mt=1/0,wt=-1/0,yt=1/0,St=-1/0,je._selections[Oe].each(function(){var kt=Ye(this),Rt=h.bBox(kt.node().parentNode);mt=Math.min(mt,Rt.top),wt=Math.max(wt,Rt.bottom),yt=Math.min(yt,Rt.left),St=Math.max(St,Rt.right)})):(mt=0,wt=0,yt=0,St=0),{top:mt,bottom:wt,left:yt,right:St,height:wt-mt,width:St-yt}}H.getTickSigns=function(je){var Oe=je._id.charAt(0),mt={x:"top",y:"right"}[Oe],wt=je.side===mt?1:-1,yt=[-1,1,wt,-wt];return je.ticks!=="inside"==(Oe==="x")&&(yt=yt.map(function(St){return-St})),je.side&&yt.push({l:-1,t:-1,r:1,b:1}[je.side.charAt(0)]),yt},H.makeTransTickFn=function(je){return je._id.charAt(0)==="x"?function(Oe){return f(je._offset+je.l2p(Oe.x),0)}:function(Oe){return f(0,je._offset+je.l2p(Oe.x))}},H.makeTransTickLabelFn=function(je){var Oe=ot(je),mt=Oe[0],wt=Oe[1];return je._id.charAt(0)==="x"?function(yt){return f(mt+je._offset+je.l2p(ft(yt)),wt)}:function(yt){return f(wt,mt+je._offset+je.l2p(ft(yt)))}};function ft(je){return je.periodX!==void 0?je.periodX:je.x}function ot(je){var Oe=je.ticklabelposition||"",mt=function(Or){return Oe.indexOf(Or)!==-1},wt=mt("top"),yt=mt("left"),St=mt("right"),kt=mt("bottom"),Rt=mt("inside"),zt=kt||yt||wt||St;if(!zt&&!Rt)return[0,0];var Xt=je.side,Yt=zt?(je.tickwidth||0)/2:0,Vt=B,cr=je.tickfont?je.tickfont.size:12;return(kt||wt)&&(Yt+=cr*U,Vt+=(je.linewidth||0)/2),(yt||St)&&(Yt+=(je.linewidth||0)/2,Vt+=B),Rt&&Xt==="top"&&(Vt-=cr*(1-U)),(yt||wt)&&(Yt=-Yt),(Xt==="bottom"||Xt==="right")&&(Vt=-Vt),[zt?Yt:0,Rt?Vt:0]}H.makeTickPath=function(je,Oe,mt,wt){wt=wt!==void 0?wt:je.ticklen;var yt=je._id.charAt(0),St=(je.linewidth||1)/2;return yt==="x"?"M0,"+(Oe+St*mt)+"v"+wt*mt:"M"+(Oe+St*mt)+",0h"+wt*mt},H.makeLabelFns=function(je,Oe,mt){var wt=je.ticklabelposition||"",yt=function(cn){return wt.indexOf(cn)!==-1},St=yt("top"),kt=yt("left"),Rt=yt("right"),zt=yt("bottom"),Xt=zt||kt||St||Rt,Yt=yt("inside"),Vt=wt==="inside"&&je.ticks==="inside"||!Yt&&je.ticks==="outside"&&je.tickson!=="boundaries",cr=0,Or=0,kr=Vt?je.ticklen:0;if(Yt?kr*=-1:Xt&&(kr=0),Vt&&(cr+=kr,mt)){var Sr=t.deg2rad(mt);cr=kr*Math.cos(Sr)+1,Or=kr*Math.sin(Sr)}je.showticklabels&&(Vt||je.showline)&&(cr+=.2*je.tickfont.size),cr+=(je.linewidth||1)/2*(Yt?-1:1);var vn={labelStandoff:cr,labelShift:Or},Rn,hn,An,En,Mr=0,xr=je.side,dn=je._id.charAt(0),qr=je.tickangle,on;if(dn==="x")on=!Yt&&xr==="bottom"||Yt&&xr==="top",En=on?1:-1,Yt&&(En*=-1),Rn=Or*En,hn=Oe+cr*En,An=on?1:-.2,Math.abs(qr)===90&&(Yt?An+=G:qr===-90&&xr==="bottom"?An=U:qr===90&&xr==="top"?An=G:An=.5,Mr=G/2*(qr/90)),vn.xFn=function(cn){return cn.dx+Rn+Mr*cn.fontSize},vn.yFn=function(cn){return cn.dy+hn+cn.fontSize*An},vn.anchorFn=function(cn,Zr){if(Xt){if(kt)return"end";if(Rt)return"start"}return!a(Zr)||Zr===0||Zr===180?"middle":Zr*En<0!==Yt?"end":"start"},vn.heightFn=function(cn,Zr,ht){return Zr<-60||Zr>60?-.5*ht:je.side==="top"!==Yt?-ht:0};else if(dn==="y"){if(on=!Yt&&xr==="left"||Yt&&xr==="right",En=on?1:-1,Yt&&(En*=-1),Rn=cr,hn=Or*En,An=0,!Yt&&Math.abs(qr)===90&&(qr===-90&&xr==="left"||qr===90&&xr==="right"?An=U:An=.5),Yt){var Vr=a(qr)?+qr:0;if(Vr!==0){var ln=t.deg2rad(Vr);Mr=Math.abs(Math.sin(ln))*U*En,An=0}}vn.xFn=function(cn){return cn.dx+Oe-(Rn+cn.fontSize*An)*En+Mr*cn.fontSize},vn.yFn=function(cn){return cn.dy+hn+cn.fontSize*G},vn.anchorFn=function(cn,Zr){return a(Zr)&&Math.abs(Zr)===90?"middle":on?"end":"start"},vn.heightFn=function(cn,Zr,ht){return je.side==="right"&&(Zr*=-1),Zr<-30?-ht:Zr<30?-.5*ht:0}}return vn};function Te(je){return[je.text,je.x,je.axInfo,je.font,je.fontSize,je.fontColor].join("_")}H.drawTicks=function(je,Oe,mt){mt=mt||{};var wt=Oe._id+"tick",yt=mt.vals;Oe.ticklabelmode==="period"&&(yt=yt.slice(),yt.shift());var St=mt.layer.selectAll("path."+wt).data(Oe.ticks?yt:[],Te);St.exit().remove(),St.enter().append("path").classed(wt,1).classed("ticks",1).classed("crisp",mt.crisp!==!1).call(l.stroke,Oe.tickcolor).style("stroke-width",h.crispRound(je,Oe.tickwidth,1)+"px").attr("d",mt.path),St.attr("transform",mt.transFn)},H.drawGrid=function(je,Oe,mt){mt=mt||{};var wt=Oe._id+"grid",yt=mt.vals,St=mt.counterAxis;if(Oe.showgrid===!1)yt=[];else if(St&&H.shouldShowZeroLine(je,Oe,St))for(var kt=Oe.tickmode==="array",Rt=0;Rt<yt.length;Rt++){var zt=yt[Rt].x;if(kt?!zt:Math.abs(zt)<Oe.dtick/100)if(yt=yt.slice(0,Rt).concat(yt.slice(Rt+1)),kt)Rt--;else break}var Xt=mt.layer.selectAll("path."+wt).data(yt,Te);Xt.exit().remove(),Xt.enter().append("path").classed(wt,1).classed("crisp",mt.crisp!==!1),Oe._gw=h.crispRound(je,Oe.gridwidth,1),Xt.attr("transform",mt.transFn).attr("d",mt.path).call(l.stroke,Oe.gridcolor||"#ddd").style("stroke-width",Oe._gw+"px"),typeof mt.path=="function"&&Xt.attr("d",mt.path)},H.drawZeroLine=function(je,Oe,mt){mt=mt||mt;var wt=Oe._id+"zl",yt=H.shouldShowZeroLine(je,Oe,mt.counterAxis),St=mt.layer.selectAll("path."+wt).data(yt?[{x:0,id:Oe._id}]:[]);St.exit().remove(),St.enter().append("path").classed(wt,1).classed("zl",1).classed("crisp",mt.crisp!==!1).each(function(){mt.layer.selectAll("path").sort(function(kt,Rt){return q(kt.id,Rt.id)})}),St.attr("transform",mt.transFn).attr("d",mt.path).call(l.stroke,Oe.zerolinecolor||l.defaultLine).style("stroke-width",h.crispRound(je,Oe.zerolinewidth,Oe._gw||1)+"px")},H.drawLabels=function(je,Oe,mt){mt=mt||{};var wt=je._fullLayout,yt=Oe._id,St=yt.charAt(0),kt=mt.cls||yt+"tick",Rt=mt.vals,zt=mt.labelFns,Xt=mt.secondary?0:Oe.tickangle,Yt=(Oe._prevTickAngles||{})[kt],Vt=mt.layer.selectAll("g."+kt).data(Oe.showticklabels?Rt:[],Te),cr=[];Vt.enter().append("g").classed(kt,1).append("text").attr("text-anchor","middle").each(function(En){var Mr=r.select(this),xr=je._promises.length;Mr.call(n.positionText,zt.xFn(En),zt.yFn(En)).call(h.font,En.font,En.fontSize,En.fontColor).text(En.text).call(n.convertToTspans,je),je._promises[xr]?cr.push(je._promises.pop().then(function(){Or(Mr,Xt)})):Or(Mr,Xt)}),Vt.exit().remove(),mt.repositionOnUpdate&&Vt.each(function(En){r.select(this).select("text").call(n.positionText,zt.xFn(En),zt.yFn(En))});function Or(En,Mr){var xr=(Oe.ticklabelposition||"").indexOf("inside")!==-1;En.each(function(dn){var qr=r.select(this),on=qr.select(".text-math-group"),Vr=zt.anchorFn(dn,Mr),ln=mt.transFn.call(qr.node(),dn)+(a(Mr)&&+Mr!=0?" rotate("+Mr+","+zt.xFn(dn)+","+(zt.yFn(dn)-dn.fontSize/2)+")":""),cn=n.lineCount(qr),Zr=Y*dn.fontSize,ht=zt.heightFn(dn,a(Mr)?+Mr:0,(cn-1)*Zr);if(ht&&(ln+=f(0,ht)),on.empty()){var Nt=qr.select("text");Nt.attr({transform:ln,"text-anchor":Vr}),xr&&(Nt.style({opacity:100}),Oe._hideOutOfRangeInsideTickLabels&&Oe._hideOutOfRangeInsideTickLabels())}else{var rr=h.bBox(on.node()).width,mr=rr*{end:-.5,start:.5}[Vr];on.attr("transform",ln+f(mr,0))}})}Oe._hideOutOfRangeInsideTickLabels=void 0,(Oe.ticklabelposition||"").indexOf("inside")!==-1&&(Oe._hideOutOfRangeInsideTickLabels=function(){var En=t.simpleMap(Oe.range,Oe.r2l),Mr=Oe.l2p(En[0]),xr=Oe.l2p(En[1]),dn=Math.min(Mr,xr)+Oe._offset,qr=Math.max(Mr,xr)+Oe._offset,on=Oe._id.charAt(0)==="x";Vt.each(function(Vr){var ln=r.select(this),cn=ln.select(".text-math-group");if(cn.empty()){var Zr=h.bBox(ln.node()),ht=!1;on?(Zr.right>qr||Zr.left<dn)&&(ht=!0):(Zr.bottom>qr||Zr.top+(Oe.tickangle?0:Vr.fontSize/4)<dn)&&(ht=!0),ht&&ln.select("text").style({opacity:0})}})}),Or(Vt,Yt+1?Yt:Xt);function kr(){return cr.length&&Promise.all(cr)}var Sr=null;function vn(){if(Or(Vt,Xt),Rt.length&&St==="x"&&!a(Xt)&&(Oe.type!=="log"||String(Oe.dtick).charAt(0)!=="D")){Sr=0;var En=0,Mr=[],xr;if(Vt.each(function(Lr){En=Math.max(En,Lr.fontSize);var pn=Oe.l2p(Lr.x),On=Ye(this),Fn=h.bBox(On.node());Mr.push({top:0,bottom:10,height:10,left:pn-Fn.width/2,right:pn+Fn.width/2+2,width:Fn.width+2})}),(Oe.tickson==="boundaries"||Oe.showdividers)&&!mt.secondary){var dn=2;for(Oe.ticks&&(dn+=Oe.tickwidth/2),xr=0;xr<Mr.length;xr++){var qr=Rt[xr].xbnd,on=Mr[xr];if(qr[0]!==null&&on.left-Oe.l2p(qr[0])<dn||qr[1]!==null&&Oe.l2p(qr[1])-on.right<dn){Sr=90;break}}}else{var Vr=Rt.length,ln=Math.abs((Rt[Vr-1].x-Rt[0].x)*Oe._m)/(Vr-1),cn=Oe.ticklabelposition||"",Zr=function(Lr){return cn.indexOf(Lr)!==-1},ht=Zr("top"),Nt=Zr("left"),rr=Zr("right"),mr=Zr("bottom"),Rr=mr||Nt||ht||rr,Er=Rr?(Oe.tickwidth||0)+2*B:0,Br=ln<En*2.5||Oe.type==="multicategory";for(xr=0;xr<Mr.length-1;xr++)if(t.bBoxIntersect(Mr[xr],Mr[xr+1],Er)){Sr=Br?90:30;break}}Sr&&Or(Vt,Sr)}}Oe._selections&&(Oe._selections[kt]=Vt);var Rn=[kr];Oe.automargin&&wt._redrawFromAutoMarginCount&&Yt===90?(Sr=90,Rn.push(function(){Or(Vt,Yt)})):Rn.push(vn),Oe._tickAngles&&Rn.push(function(){Oe._tickAngles[kt]=Sr===null?a(Xt)?Xt:0:Sr});var hn=Oe._anchorAxis;hn&&hn.autorange&&(Oe.ticklabelposition||"").indexOf("inside")!==-1&&!J(wt,Oe._id)&&(wt._insideTickLabelsAutorange||(wt._insideTickLabelsAutorange={}),wt._insideTickLabelsAutorange[hn._name+".autorange"]=hn.autorange,Rn.push(function(){Vt.each(function(Mr,xr){var dn=Ye(this);Oe._vals[xr].bb=h.bBox(dn.node())})}));var An=t.syncOrAsync(Rn);return An&&An.then&&je._promises.push(An),An};function Le(je,Oe,mt){var wt=Oe._id+"divider",yt=mt.vals,St=mt.layer.selectAll("path."+wt).data(yt,Te);St.exit().remove(),St.enter().insert("path",":first-child").classed(wt,1).classed("crisp",1).call(l.stroke,Oe.dividercolor).style("stroke-width",h.crispRound(je,Oe.dividerwidth,1)+"px"),St.attr("transform",mt.transFn).attr("d",mt.path)}H.getPxPosition=function(je,Oe){var mt=je._fullLayout._size,wt=Oe._id.charAt(0),yt=Oe.side,St;if(Oe.anchor!=="free"?St=Oe._anchorAxis:wt==="x"?St={_offset:mt.t+(1-(Oe.position||0))*mt.h,_length:0}:wt==="y"&&(St={_offset:mt.l+(Oe.position||0)*mt.w,_length:0}),yt==="top"||yt==="left")return St._offset;if(yt==="bottom"||yt==="right")return St._offset+St._length};function Ve(je){var Oe=je.title.font.size,mt=(je.title.text.match(n.BR_TAG_ALL)||[]).length;return je.title.hasOwnProperty("standoff")?mt?Oe*(U+mt*Y):Oe*U:mt?Oe*(mt+1)*Y:Oe}function Qe(je,Oe){var mt=je._fullLayout,wt=Oe._id,yt=wt.charAt(0),St=Oe.title.font.size,kt;if(Oe.title.hasOwnProperty("standoff"))kt=Oe._depth+Oe.title.standoff+Ve(Oe);else{var Rt=(Oe.ticklabelposition||"").indexOf("inside")!==-1;if(Oe.type==="multicategory")kt=Oe._depth;else{var zt=1.5*St;Rt&&(zt=.5*St,Oe.ticks==="outside"&&(zt+=Oe.ticklen)),kt=10+zt+(Oe.linewidth?Oe.linewidth-1:0)}Rt||(yt==="x"?kt+=Oe.side==="top"?St*(Oe.showticklabels?1:0):St*(Oe.showticklabels?1.5:.5):kt+=Oe.side==="right"?St*(Oe.showticklabels?1:.5):St*(Oe.showticklabels?.5:0))}var Xt=H.getPxPosition(je,Oe),Yt,Vt,cr;yt==="x"?(Vt=Oe._offset+Oe._length/2,cr=Oe.side==="top"?Xt-kt:Xt+kt):(cr=Oe._offset+Oe._length/2,Vt=Oe.side==="right"?Xt+kt:Xt-kt,Yt={rotate:"-90",offset:0});var Or;if(Oe.type!=="multicategory"){var kr=Oe._selections[Oe._id+"tick"];if(Or={selection:kr,side:Oe.side},kr&&kr.node()&&kr.node().parentNode){var Sr=h.getTranslate(kr.node().parentNode);Or.offsetLeft=Sr.x,Or.offsetTop=Sr.y}Oe.title.hasOwnProperty("standoff")&&(Or.pad=0)}return o.draw(je,wt+"title",{propContainer:Oe,propName:Oe._name+".title.text",placeholder:mt._dfltTitle[yt],avoid:Or,transform:Yt,attributes:{x:Vt,y:cr,"text-anchor":"middle"}})}H.shouldShowZeroLine=function(je,Oe,mt){var wt=t.simpleMap(Oe.range,Oe.r2l);return wt[0]*wt[1]<=0&&Oe.zeroline&&(Oe.type==="linear"||Oe.type==="-")&&!(Oe.rangebreaks&&Oe.maskBreaks(0)===O)&&(Me(Oe,0)||!Ie(je,Oe,mt,wt)||He(je,Oe))},H.clipEnds=function(je,Oe){return Oe.filter(function(mt){return Me(je,mt.x)})};function Me(je,Oe){var mt=je.l2p(Oe);return mt>1&&mt<je._length-1}function Ie(je,Oe,mt,wt){var yt=mt._mainAxis;if(!yt)return;var St=je._fullLayout,kt=Oe._id.charAt(0),Rt=H.counterLetter(Oe._id),zt=Oe._offset+(Math.abs(wt[0])<Math.abs(wt[1])==(kt==="x")?0:Oe._length);function Xt(kr){if(!kr.showline||!kr.linewidth)return!1;var Sr=Math.max((kr.linewidth+Oe.zerolinewidth)/2,1);function vn(An){return typeof An=="number"&&Math.abs(An-zt)<Sr}if(vn(kr._mainLinePosition)||vn(kr._mainMirrorPosition))return!0;var Rn=kr._linepositions||{};for(var hn in Rn)if(vn(Rn[hn][0])||vn(Rn[hn][1]))return!0}var Yt=St._plots[mt._mainSubplot];if(!(Yt.mainplotinfo||Yt).overlays.length)return Xt(mt);for(var Vt=H.list(je,Rt),cr=0;cr<Vt.length;cr++){var Or=Vt[cr];if(Or._mainAxis===yt&&Xt(Or))return!0}}function He(je,Oe){for(var mt=je._fullData,wt=Oe._mainSubplot,yt=Oe._id.charAt(0),St=0;St<mt.length;St++){var kt=mt[St];if(kt.visible===!0&&kt.xaxis+kt.yaxis===wt&&(c.traceIs(kt,"bar-like")&&kt.orientation==={x:"h",y:"v"}[yt]||kt.fill&&kt.fill.charAt(kt.fill.length-1)===yt))return!0}return!1}function Ye(je){var Oe=r.select(je),mt=Oe.select(".text-math-group");return mt.empty()?Oe.select("text"):mt}H.allowAutoMargin=function(je){for(var Oe=H.list(je,"",!0),mt=0;mt<Oe.length;mt++){var wt=Oe[mt];wt.automargin&&(u.allowAutoMargin(je,ut(wt)),wt.mirror&&u.allowAutoMargin(je,nt(wt))),c.getComponentMethod("rangeslider","isVisible")(wt)&&u.allowAutoMargin(je,Ge(wt))}};function ut(je){return je._id+".automargin"}function nt(je){return ut(je)+".mirror"}function Ge(je){return je._id+".rangeslider"}H.swap=function(je,Oe){for(var mt=at(je,Oe),wt=0;wt<mt.length;wt++)lt(je,mt[wt].x,mt[wt].y)};function at(je,Oe){var mt=[],wt,yt;for(wt=0;wt<Oe.length;wt++){var St=[],kt=je._fullData[Oe[wt]].xaxis,Rt=je._fullData[Oe[wt]].yaxis;if(!(!kt||!Rt)){for(yt=0;yt<mt.length;yt++)(mt[yt].x.indexOf(kt)!==-1||mt[yt].y.indexOf(Rt)!==-1)&&St.push(yt);if(!St.length){mt.push({x:[kt],y:[Rt]});continue}var zt=mt[St[0]],Xt;if(St.length>1)for(yt=1;yt<St.length;yt++)Xt=mt[St[yt]],et(zt.x,Xt.x),et(zt.y,Xt.y);et(zt.x,[kt]),et(zt.y,[Rt])}}return mt}function et(je,Oe){for(var mt=0;mt<Oe.length;mt++)je.indexOf(Oe[mt])===-1&&je.push(Oe[mt])}function lt(je,Oe,mt){var wt=[],yt=[],St=je.layout,kt,Rt;for(kt=0;kt<Oe.length;kt++)wt.push(H.getFromId(je,Oe[kt]));for(kt=0;kt<mt.length;kt++)yt.push(H.getFromId(je,mt[kt]));var zt=Object.keys(i),Xt=["anchor","domain","overlaying","position","side","tickangle","editType"],Yt=["linear","log"];for(kt=0;kt<zt.length;kt++){var Vt=zt[kt],cr=wt[0][Vt],Or=yt[0][Vt],kr=!0,Sr=!1,vn=!1;if(!(Vt.charAt(0)==="_"||typeof cr=="function"||Xt.indexOf(Vt)!==-1)){for(Rt=1;Rt<wt.length&&kr;Rt++){var Rn=wt[Rt][Vt];Vt==="type"&&Yt.indexOf(cr)!==-1&&Yt.indexOf(Rn)!==-1&&cr!==Rn?Sr=!0:Rn!==cr&&(kr=!1)}for(Rt=1;Rt<yt.length&&kr;Rt++){var hn=yt[Rt][Vt];Vt==="type"&&Yt.indexOf(Or)!==-1&&Yt.indexOf(hn)!==-1&&Or!==hn?vn=!0:yt[Rt][Vt]!==Or&&(kr=!1)}kr&&(Sr&&(St[wt[0]._name].type="linear"),vn&&(St[yt[0]._name].type="linear"),Ct(St,Vt,wt,yt,je._fullLayout._dfltTitle))}}for(kt=0;kt<je._fullLayout.annotations.length;kt++){var An=je._fullLayout.annotations[kt];Oe.indexOf(An.xref)!==-1&&mt.indexOf(An.yref)!==-1&&t.swapAttrs(St.annotations[kt],["?"])}}function Ct(je,Oe,mt,wt,yt){var St=t.nestedProperty,kt=St(je[mt[0]._name],Oe).get(),Rt=St(je[wt[0]._name],Oe).get(),zt;for(Oe==="title"&&(kt&&kt.text===yt.x&&(kt.text=yt.y),Rt&&Rt.text===yt.y&&(Rt.text=yt.x)),zt=0;zt<mt.length;zt++)St(je,mt[zt]._name+"."+Oe).set(Rt);for(zt=0;zt<wt.length;zt++)St(je,wt[zt]._name+"."+Oe).set(kt)}function Pt(je){return je._id==="angularaxis"}function $t(je,Oe){for(var mt=Oe._rangebreaks.length,wt=0;wt<mt;wt++){var yt=Oe._rangebreaks[wt];if(je>=yt.min&&je<yt.max)return yt.max}return je}},{"../../components/color":643,"../../components/drawing":665,"../../components/titles":738,"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"./autorange":827,"./axis_autotype":829,"./axis_ids":831,"./clean_ticks":833,"./layout_attributes":842,"./set_convert":848,d3:169,"fast-isnumeric":241}],829:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").BADNUM,c=a.isArrayOrTypedArray,t=a.isDateTime,f=a.cleanNumber,n=Math.round;d.exports=function(m,b,y){var x=m,w=y.noMultiCategory;if(c(x)&&!x.length)return"-";if(!w&&p(x))return"multicategory";if(w&&Array.isArray(x[0])){for(var g=[],T=0;T<x.length;T++)if(c(x[T]))for(var M=0;M<x[T].length;M++)g.push(x[T][M]);x=g}if(h(x,b))return"date";var P=y.autotypenumbers!=="strict";return s(x,P)?"category":l(x,P)?"linear":"-"};function o(v,m){return m?r(v):typeof v=="number"}function l(v,m){for(var b=v.length,y=0;y<b;y++)if(o(v[y],m))return!0;return!1}function h(v,m){for(var b=v.length,y=i(b),x=0,w=0,g={},T=0;T<b;T+=y){var M=n(T),P=v[M],L=String(P);g[L]||(g[L]=1,t(P,m)&&x++,r(P)&&w++)}return x>w*2}function i(v){return Math.max(1,(v-1)/1e3)}function s(v,m){for(var b=v.length,y=i(b),x=0,w=0,g={},T=0;T<b;T+=y){var M=n(T),P=v[M],L=String(P);if(!g[L]){g[L]=1;var I=typeof P;I==="boolean"?w++:(m?f(P)!==u:I==="number")?x++:I==="string"&&w++}}return w>x*2}function p(v){return c(v[0])&&c(v[1])}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],830:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../registry"),u=e("../../lib"),c=e("../array_container_defaults"),t=e("./layout_attributes"),f=e("./tick_value_defaults"),n=e("./tick_mark_defaults"),o=e("./tick_label_defaults"),l=e("./category_order_defaults"),h=e("./line_grid_defaults"),i=e("./set_convert"),s=e("./constants").WEEKDAY_PATTERN,p=e("./constants").HOUR_PATTERN;d.exports=function(x,w,g,T,M){var P=T.letter,L=T.font||{},I=T.splomStash||{},C=g("visible",!T.visibleDflt),k=w._template||{},E=w.type||k.type||"-",R;if(E==="date"){var O=a.getComponentMethod("calendars","handleDefaults");O(x,w,"calendar",T.calendar),T.noTicklabelmode||(R=g("ticklabelmode"))}(!T.noTicklabelposition||E==="multicategory")&&u.coerce(x,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:R==="period"?["outside","inside"]:P==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition"),i(w,M);var N=!w.isValidRange(x.range);N&&T.reverseDflt&&(N="reversed");var G=g("autorange",N);G&&(E==="linear"||E==="-")&&g("rangemode"),g("range"),w.cleanRange(),l(x,w,g,T),E!=="category"&&!T.noHover&&g("hoverformat");var U=g("color"),Y=U!==t.color.dflt?U:L.color,z=I.label||M._dfltTitle[P];if(o(x,w,g,E,T,{pass:1}),!C)return w;g("title.text",z),u.coerceFont(g,"title.font",{family:L.family,size:Math.round(L.size*1.2),color:Y}),f(x,w,g,E),o(x,w,g,E,T,{pass:2}),n(x,w,g,T),h(x,w,g,{dfltColor:U,bgColor:T.bgColor,showGrid:T.showGrid,attributes:t}),(w.showline||w.ticks)&&g("mirror"),T.automargin&&g("automargin");var B=E==="multicategory";if(!T.noTickson&&(E==="category"||B)&&(w.ticks||w.showgrid)){var H;B&&(H="boundaries");var V=g("tickson",H);V==="boundaries"&&delete w.ticklabelposition}if(B){var Z=g("showdividers");Z&&(g("dividercolor"),g("dividerwidth"))}if(E==="date")if(c(x,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:v}),!w.rangebreaks.length)delete w.rangebreaks;else{for(var q=0;q<w.rangebreaks.length;q++)if(w.rangebreaks[q].pattern===s){w._hasDayOfWeekBreaks=!0;break}if(i(w,M),M._has("scattergl")||M._has("splom"))for(var J=0;J<T.data.length;J++){var ne=T.data[J];(ne.type==="scattergl"||ne.type==="splom")&&(ne.visible=!1,u.warn(ne.type+" traces do not work on axes with rangebreaks. Setting trace "+ne.index+" to `visible: false`."))}}return w};function v(y,x,w){function g(R,O){return u.coerce(y,x,t.rangebreaks,R,O)}var T=g("enabled");if(T){var M=g("bounds");if(M&&M.length>=2){var P="",L,I;if(M.length===2){for(L=0;L<2;L++)if(I=b(M[L]),I){P=s;break}}var C=g("pattern",P);if(C===s)for(L=0;L<2;L++)I=b(M[L]),I&&(x.bounds[L]=M[L]=I-1);if(C)for(L=0;L<2;L++)switch(I=M[L],C){case s:if(!r(I)){x.enabled=!1;return}if(I=+I,I!==Math.floor(I)||I<0||I>=7){x.enabled=!1;return}x.bounds[L]=M[L]=I;break;case p:if(!r(I)){x.enabled=!1;return}if(I=+I,I<0||I>24){x.enabled=!1;return}x.bounds[L]=M[L]=I;break}if(w.autorange===!1){var k=w.range;if(k[0]<k[1]){if(M[0]<k[0]&&M[1]>k[1]){x.enabled=!1;return}}else if(M[0]>k[0]&&M[1]<k[1]){x.enabled=!1;return}}}else{var E=g("values");if(E&&E.length)g("dvalue");else{x.enabled=!1;return}}}}var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function b(y){if(typeof y=="string")return m[y.substr(0,3).toLowerCase()]}},{"../../lib":778,"../../registry":911,"../array_container_defaults":823,"./category_order_defaults":832,"./constants":834,"./layout_attributes":842,"./line_grid_defaults":844,"./set_convert":848,"./tick_label_defaults":849,"./tick_mark_defaults":850,"./tick_value_defaults":851,"fast-isnumeric":241}],831:[function(e,d,S){var r=e("../../registry"),a=e("./constants");S.id2name=function(t){if(!(typeof t!="string"||!t.match(a.AX_ID_PATTERN))){var f=t.split(" ")[0].substr(1);return f==="1"&&(f=""),t.charAt(0)+"axis"+f}},S.name2id=function(t){if(!!t.match(a.AX_NAME_PATTERN)){var f=t.substr(5);return f==="1"&&(f=""),t.charAt(0)+f}},S.cleanId=function(t,f,n){var o=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(a.AX_ID_PATTERN))&&!(f&&t.charAt(0)!==f)&&!(o&&!n)){var l=t.split(" ")[0].substr(1).replace(/^0+/,"");return l==="1"&&(l=""),t.charAt(0)+l+(o&&n?" domain":"")}},S.list=function(c,t,f){var n=c._fullLayout;if(!n)return[];var o=S.listIds(c,t),l=new Array(o.length),h;for(h=0;h<o.length;h++){var i=o[h];l[h]=n[i.charAt(0)+"axis"+i.substr(1)]}if(!f){var s=n._subplots.gl3d||[];for(h=0;h<s.length;h++){var p=n[s[h]];t?l.push(p[t+"axis"]):l.push(p.xaxis,p.yaxis,p.zaxis)}}return l},S.listIds=function(c,t){var f=c._fullLayout;if(!f)return[];var n=f._subplots;return t?n[t+"axis"]:n.xaxis.concat(n.yaxis)},S.getFromId=function(c,t,f){var n=c._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),f==="x"?t=t.replace(/y[0-9]*/,""):f==="y"&&(t=t.replace(/x[0-9]*/,"")),n[S.id2name(t)]},S.getFromTrace=function(c,t,f){var n=c._fullLayout,o=null;if(r.traceIs(t,"gl3d")){var l=t.scene;l.substr(0,5)==="scene"&&(o=n[l][f+"axis"])}else o=S.getFromId(c,t[f+"axis"]||f);return o},S.idSort=function(c,t){var f=c.charAt(0),n=t.charAt(0);return f!==n?f>n?1:-1:+(c.substr(1)||1)-+(t.substr(1)||1)},S.ref2id=function(c){return/^[xyz]/.test(c)?c.split(" ")[0]:!1};function u(c,t){if(t&&t.length){for(var f=0;f<t.length;f++)if(t[f][c])return!0}return!1}S.isLinked=function(c,t){return u(t,c._axisMatchGroups)||u(t,c._axisConstraintGroups)}},{"../../registry":911,"./constants":834}],832:[function(e,d,S){function r(a,u){var c=u.dataAttr||a._id.charAt(0),t={},f,n,o;if(u.axData)f=u.axData;else for(f=[],n=0;n<u.data.length;n++){var l=u.data[n];l[c+"axis"]===a._id&&f.push(l)}for(n=0;n<f.length;n++){var h=f[n][c];for(o=0;o<h.length;o++){var i=h[o];i!=null&&(t[i]=1)}}return Object.keys(t)}d.exports=function(u,c,t,f){if(c.type==="category"){var n=u.categoryarray,o=Array.isArray(n)&&n.length>0,l;o&&(l="array");var h=t("categoryorder",l),i;h==="array"&&(i=t("categoryarray")),!o&&h==="array"&&(h=c.categoryorder="trace"),h==="trace"?c._initialCategories=[]:h==="array"?c._initialCategories=i.slice():(i=r(c,f).sort(),h==="category ascending"?c._initialCategories=i:h==="category descending"&&(c._initialCategories=i.reverse()))}}},{}],833:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical"),c=u.ONEDAY,t=u.ONEWEEK;S.dtick=function(f,n){var o=n==="log",l=n==="date",h=n==="category",i=l?c:1;if(!f)return i;if(r(f))return f=Number(f),f<=0?i:h?Math.max(1,Math.round(f)):l?Math.max(.1,f):f;if(typeof f!="string"||!(l||o))return i;var s=f.charAt(0),p=f.substr(1);return p=r(p)?Number(p):0,p<=0||!(l&&s==="M"&&p===Math.round(p)||o&&s==="L"||o&&s==="D"&&(p===1||p===2))?i:f},S.tick0=function(f,n,o,l){if(n==="date")return a.cleanDate(f,a.dateTick0(o,l%t===0?1:0));if(!(l==="D1"||l==="D2"))return r(f)?Number(f):0}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],834:[function(e,d,S){var r=e("../../lib/regex").counter;d.exports={idRegex:{x:r("x","( domain)?"),y:r("y","( domain)?")},attrRegex:r("[xy]axis"),xAxisMatch:r("xaxis"),yAxisMatch:r("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":795}],835:[function(e,d,S){var r=e("../../lib"),a=e("./autorange"),u=e("./axis_ids").id2name,c=e("./layout_attributes"),t=e("./scale_zoom"),f=e("./set_convert"),n=e("../../constants/numerical").ALMOST_EQUAL,o=e("../../constants/alignment").FROM_BL;S.handleDefaults=function(b,y,x){var w=x.axIds,g=x.axHasImage,T=y._axisConstraintGroups=[],M=y._axisMatchGroups=[],P,L,I,C,k,E,R,O;for(P=0;P<w.length;P++)C=u(w[P]),k=b[C],E=y[C],l(k,E,{axIds:w,layoutOut:y,hasImage:g[C]});function N(q,J){for(P=0;P<q.length;P++){L=q[P];for(I in L)y[u(I)][J]=L}}for(N(M,"_matchGroup"),P=0;P<T.length;P++){L=T[P];for(I in L)if(E=y[u(I)],E.fixedrange){for(var G in L){var U=u(G);(b[U]||{}).fixedrange===!1&&r.warn("fixedrange was specified as false for axis "+U+" but was overridden because another axis in its constraint group has fixedrange true"),y[U].fixedrange=!0}break}}for(P=0;P<T.length;){L=T[P];for(I in L){E=y[u(I)],E._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(L).length&&(T.splice(P,1),P--);break}P++}N(T,"_constraintGroup");var Y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,B=!1;function H(){O=E[R],R==="rangebreaks"&&(B=E._hasDayOfWeekBreaks)}for(P=0;P<M.length;P++){L=M[P];for(var V=0;V<Y.length;V++){R=Y[V],O=null;var Z;for(I in L)if(C=u(I),k=b[C],E=y[C],R in E){if(!E.matches&&(Z=E,R in k)){H();break}O===null&&R in k&&H()}if(R==="range"&&O&&(z=!0),R==="autorange"&&O===null&&z&&(O=!1),O===null&&R in Z&&(O=Z[R]),O!==null)for(I in L)E=y[u(I)],E[R]=R==="range"?O.slice():O,R==="rangebreaks"&&(E._hasDayOfWeekBreaks=B,f(E,y))}}};function l(b,y,x){var w=x.axIds,g=x.layoutOut,T=x.hasImage,M=g._axisConstraintGroups,P=g._axisMatchGroups,L=y._id,I=L.charAt(0),C=((g._splomAxes||{})[I]||{})[L]||{},k=y._id,E=k.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function R($,j){return r.coerce(b,y,c,$,j)}R("constrain",T?"domain":"range"),r.coerce(b,y,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var O=y.type,N,G,U=[];for(N=0;N<w.length;N++)if(G=w[N],G!==k){var Y=g[u(G)];Y.type===O&&U.push(G)}var z=i(M,k);if(z){var B=[];for(N=0;N<U.length;N++)G=U[N],z[G]||B.push(G);U=B}var H=U.length,V,Z;H&&(b.matches||C.matches)&&(V=r.coerce(b,y,{matches:{valType:"enumerated",values:U,dflt:U.indexOf(C.matches)!==-1?C.matches:void 0}},"matches"));var q=T&&!E?y.anchor:void 0;if(H&&!V&&(b.scaleanchor||q)&&(Z=r.coerce(b,y,{scaleanchor:{valType:"enumerated",values:U}},"scaleanchor",q)),V){y._matchGroup=s(P,k,V,1);var J=g[u(V)],ne=h(g,y)/h(g,J);E!==(V.charAt(0)==="x")&&(ne=(E?"x":"y")+ne),s(M,k,V,ne)}else b.matches&&w.indexOf(b.matches)!==-1&&r.warn("ignored "+y._name+'.matches: "'+b.matches+'" to avoid an infinite loop');if(Z){var ve=R("scaleratio");ve||(ve=y.scaleratio=1),s(M,k,Z,ve)}else b.scaleanchor&&w.indexOf(b.scaleanchor)!==-1&&r.warn("ignored "+y._name+'.scaleanchor: "'+b.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(b,y){var x=y.domain;return x||(x=b[u(y.overlaying)].domain),x[1]-x[0]}function i(b,y){for(var x=0;x<b.length;x++)if(b[x][y])return b[x];return null}function s(b,y,x,w){var g,T,M,P,L,I=i(b,y);I===null?(I={},I[y]=1,L=b.length,b.push(I)):L=b.indexOf(I);var C=Object.keys(I);for(g=0;g<b.length;g++)if(M=b[g],g!==L&&M[x]){var k=M[x];for(T=0;T<C.length;T++)P=C[T],M[P]=p(k,p(w,I[P]));b.splice(L,1);return}if(w!==1)for(T=0;T<C.length;T++){var E=C[T];I[E]=p(w,I[E])}I[x]=1}function p(b,y){var x="",w="",g,T;typeof b=="string"&&(x=b.match(/^[xy]*/)[0],g=x.length,b=+b.substr(g)),typeof y=="string"&&(w=y.match(/^[xy]*/)[0],T=w.length,y=+y.substr(T));var M=b*y;return!g&&!T?M:!g||!T||x.charAt(0)===w.charAt(0)?x+w+b*y:g===T?M:(g>T?x.substr(T):w.substr(g))+M}function v(b,y){for(var x=y._size,w=x.h/x.w,g={},T=Object.keys(b),M=0;M<T.length;M++){var P=T[M],L=b[P];if(typeof L=="string"){var I=L.match(/^[xy]*/)[0],C=I.length;L=+L.substr(C);for(var k=I.charAt(0)==="y"?w:1/w,E=0;E<C;E++)L*=k}g[P]=L}return g}S.enforce=function(y){var x=y._fullLayout,w=x._axisConstraintGroups||[],g,T,M,P,L,I,C,k;for(g=0;g<w.length;g++){M=v(w[g],x);var E=Object.keys(M),R=1/0,O=0,N=1/0,G={},U={},Y=!1;for(T=0;T<E.length;T++)P=E[T],U[P]=L=x[u(P)],L._inputDomain?L.domain=L._inputDomain.slice():L._inputDomain=L.domain.slice(),L._inputRange||(L._inputRange=L.range.slice()),L.setScale(),G[P]=I=Math.abs(L._m)/M[P],R=Math.min(R,I),(L.constrain==="domain"||!L._constraintShrinkable)&&(N=Math.min(N,I)),delete L._constraintShrinkable,O=Math.max(O,I),L.constrain==="domain"&&(Y=!0);if(!(R>n*O&&!Y)){for(T=0;T<E.length;T++)if(P=E[T],I=G[P],L=U[P],C=L.constrain,I!==N||C==="domain")if(k=I/N,C==="range")t(L,k);else{var z=L._inputDomain,B=(L.domain[1]-L.domain[0])/(z[1]-z[0]),H=(L.r2l(L.range[1])-L.r2l(L.range[0]))/(L.r2l(L._inputRange[1])-L.r2l(L._inputRange[0]));if(k/=B,k*H<1){L.domain=L._input.domain=z.slice(),t(L,k);continue}if(H<1&&(L.range=L._input.range=L._inputRange.slice(),k*=H),L.autorange){var V=L.r2l(L.range[0]),Z=L.r2l(L.range[1]),q=(V+Z)/2,J=q,ne=q,ve=Math.abs(Z-q),$=q-ve*k*1.0001,j=q+ve*k*1.0001,ae=a.makePadFn(x,L,0),ie=a.makePadFn(x,L,1);m(L,k);var te=Math.abs(L._m),re=a.concatExtremes(y,L),ce=re.min,pe=re.max,fe,se;for(se=0;se<ce.length;se++)fe=ce[se].val-ae(ce[se])/te,fe>$&&fe<J&&(J=fe);for(se=0;se<pe.length;se++)fe=pe[se].val+ie(pe[se])/te,fe<j&&fe>ne&&(ne=fe);var de=(ne-J)/(2*ve);k/=de,J=L.l2r(J),ne=L.l2r(ne),L.range=L._input.range=V<Z?[J,ne]:[ne,J]}m(L,k)}}}},S.getAxisGroup=function(y,x){for(var w=y._axisMatchGroups,g=0;g<w.length;g++){var T=w[g];if(T[x])return"g"+g}return x},S.clean=function(y,x){if(x._inputDomain){for(var w=!1,g=x._id,T=y._fullLayout._axisConstraintGroups,M=0;M<T.length;M++)if(T[M][g]){w=!0;break}(!w||x.constrain!=="domain")&&(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}};function m(b,y){var x=b._inputDomain,w=o[b.constraintoward],g=x[0]+(x[1]-x[0])*w;b.domain=b._input.domain=[g+(x[0]-g)/y,g+(x[1]-g)/y],b.setScale()}},{"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"./autorange":827,"./axis_ids":831,"./layout_attributes":842,"./scale_zoom":846,"./set_convert":848}],836:[function(e,d,S){var r=e("d3"),a=e("tinycolor2"),u=e("has-passive-events"),c=e("../../registry"),t=e("../../lib"),f=t.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../components/color"),l=e("../../components/drawing"),h=e("../../components/fx"),i=e("./axes"),s=e("../../lib/setcursor"),p=e("../../components/dragelement"),v=e("../../components/dragelement/helpers"),m=v.selectingOrDrawing,b=v.freeMode,y=e("../../constants/alignment").FROM_TL,x=e("../../lib/clear_gl_canvases"),w=e("../../plot_api/subroutines").redrawReglTraces,g=e("../plots"),T=e("./axis_ids").getFromId,M=e("./select").prepSelect,P=e("./select").clearSelect,L=e("./select").selectOnClick,I=e("./scale_zoom"),C=e("./constants"),k=C.MINDRAG,E=C.MINZOOM,R=!0;function O(pe,fe,se,de,be,xe,ke,Re){var Ke=pe._fullLayout._zoomlayer,ze=ke+Re==="nsew",Je=(ke+Re).length===1,qe,Ee,Ae,Be,$e,xt,bt,Ne,st,_t,Ot,Wt,Et,jt,Zt,Mt,At,ft,ot,Te,Le,Ve,Qe;function Me(){if(qe=fe.xaxis,Ee=fe.yaxis,st=qe._length,_t=Ee._length,bt=qe._offset,Ne=Ee._offset,Ae={},Ae[qe._id]=qe,Be={},Be[Ee._id]=Ee,ke&&Re)for(var Mr=fe.overlays,xr=0;xr<Mr.length;xr++){var dn=Mr[xr].xaxis;Ae[dn._id]=dn;var qr=Mr[xr].yaxis;Be[qr._id]=qr}$e=ce(Ae),xt=ce(Be),Et=U($e,Re),jt=U(xt,ke),Zt=!jt&&!Et,Wt=te(pe,pe._fullLayout._axisMatchGroups,Ae,Be),Ot=te(pe,pe._fullLayout._axisConstraintGroups,Ae,Be,Wt);var on=Ot.isSubplotConstrained||Wt.isSubplotConstrained;Mt=Re||on,At=ke||on;var Vr=pe._fullLayout;ft=Vr._has("scattergl"),ot=Vr._has("splom"),Te=Vr._has("svg")}Me();var Ie=V(jt+Et,pe._fullLayout.dragmode,ze),He=G(fe,ke+Re+"drag",Ie,se,de,be,xe);if(Zt&&!ze)return He.onmousedown=null,He.style.pointerEvents="none",He;var Ye={element:He,gd:pe,plotinfo:fe};Ye.prepFn=function(Mr,xr,dn){var qr=Ye.dragmode,on=pe._fullLayout.dragmode;on!==qr&&(Ye.dragmode=on),Me(),Ve=pe._fullLayout._invScaleX,Qe=pe._fullLayout._invScaleY,Zt||(ze?Mr.shiftKey?on==="pan"?on="zoom":m(on)||(on="pan"):Mr.ctrlKey&&(on="pan"):on="pan"),b(on)?Ye.minDrag=1:Ye.minDrag=void 0,m(on)?(Ye.xaxes=$e,Ye.yaxes=xt,M(Mr,xr,dn,Ye,on)):(Ye.clickFn=nt,m(qr)&&ut(),Zt||(on==="zoom"?(Ye.moveFn=yt,Ye.doneFn=kt,Ye.minDrag=1,wt(Mr,xr,dn)):on==="pan"&&(Ye.moveFn=cr,Ye.doneFn=vn))),pe._fullLayout._redrag=function(){var Vr=pe._dragdata;if(Vr&&Vr.element===He){var ln=pe._fullLayout.dragmode;m(ln)||(Me(),Rn([0,0,st,_t]),Ye.moveFn(Vr.dx,Vr.dy))}}};function ut(){Ye.plotinfo.selection=!1,P(pe)}function nt(Mr,xr){var dn=Ye.gd;if(dn._fullLayout._activeShapeIndex>=0){dn._fullLayout._deactivateShape(dn);return}var qr=dn._fullLayout.clickmode;if(ve(dn),Mr===2&&!Je&&Sr(),ze)qr.indexOf("select")>-1&&L(xr,dn,$e,xt,fe.id,Ye),qr.indexOf("event")>-1&&h.click(dn,xr,fe.id);else if(Mr===1&&Je){var on=ke?Ee:qe,Vr=ke==="s"||Re==="w"?0:1,ln=on._name+".range["+Vr+"]",cn=Y(on,Vr),Zr="left",ht="middle";if(on.fixedrange)return;ke?(ht=ke==="n"?"top":"bottom",on.side==="right"&&(Zr="right")):Re==="e"&&(Zr="right"),dn._context.showAxisRangeEntryBoxes&&r.select(He).call(n.makeEditable,{gd:dn,immediate:!0,background:dn._fullLayout.paper_bgcolor,text:String(cn),fill:on.tickfont?on.tickfont.color:"#444",horizontalAlign:Zr,verticalAlign:ht}).on("edit",function(Nt){var rr=on.d2r(Nt);rr!==void 0&&c.call("_guiRelayout",dn,ln,rr)})}}p.init(Ye);var Ge,at,et,lt,Ct,Pt,$t,je,Oe,mt;function wt(Mr,xr,dn){var qr=He.getBoundingClientRect();Ge=xr-qr.left,at=dn-qr.top,pe._fullLayout._calcInverseTransform(pe);var on=t.apply3DTransform(pe._fullLayout._invTransform)(Ge,at);Ge=on[0],at=on[1],et={l:Ge,r:Ge,w:0,t:at,b:at,h:0},lt=pe._hmpixcount?pe._hmlumcount/pe._hmpixcount:a(pe._fullLayout.plot_bgcolor).getLuminance(),Ct="M0,0H"+st+"V"+_t+"H0V0",Pt=!1,$t="xy",mt=!1,je=Z(Ke,lt,bt,Ne,Ct),Oe=q(Ke,bt,Ne)}function yt(Mr,xr){if(pe._transitioningWithDuration)return!1;var dn=Math.max(0,Math.min(st,Ve*Mr+Ge)),qr=Math.max(0,Math.min(_t,Qe*xr+at)),on=Math.abs(dn-Ge),Vr=Math.abs(qr-at);et.l=Math.min(Ge,dn),et.r=Math.max(Ge,dn),et.t=Math.min(at,qr),et.b=Math.max(at,qr);function ln(){$t="",et.r=et.l,et.t=et.b,Oe.attr("d","M0,0Z")}if(Ot.isSubplotConstrained)on>E||Vr>E?($t="xy",on/st>Vr/_t?(Vr=on*_t/st,at>qr?et.t=at-Vr:et.b=at+Vr):(on=Vr*st/_t,Ge>dn?et.l=Ge-on:et.r=Ge+on),Oe.attr("d",ie(et))):ln();else if(Wt.isSubplotConstrained)if(on>E||Vr>E){$t="xy";var cn=Math.min(et.l/st,(_t-et.b)/_t),Zr=Math.max(et.r/st,(_t-et.t)/_t);et.l=cn*st,et.r=Zr*st,et.b=(1-cn)*_t,et.t=(1-Zr)*_t,Oe.attr("d",ie(et))}else ln();else!jt||Vr<Math.min(Math.max(on*.6,k),E)?on<k||!Et?ln():(et.t=0,et.b=_t,$t="x",Oe.attr("d",j(et,at))):!Et||on<Math.min(Vr*.6,E)?(et.l=0,et.r=st,$t="y",Oe.attr("d",ae(et,Ge))):($t="xy",Oe.attr("d",ie(et)));et.w=et.r-et.l,et.h=et.b-et.t,$t&&(mt=!0),pe._dragged=mt,J(je,Oe,et,Ct,Pt,lt),St(),pe.emit("plotly_relayouting",Le),Pt=!0}function St(){Le={},($t==="xy"||$t==="x")&&(z($e,et.l/st,et.r/st,Le,Ot.xaxes),Or("x",Le)),($t==="xy"||$t==="y")&&(z(xt,(_t-et.b)/_t,(_t-et.t)/_t,Le,Ot.yaxes),Or("y",Le))}function kt(){St(),ve(pe),vn(),$(pe)}var Rt=[0,0,st,_t],zt=null,Xt=C.REDRAWDELAY,Yt=fe.mainplot?pe._fullLayout._plots[fe.mainplot]:fe;function Vt(Mr){if(!pe._context._scrollZoom.cartesian&&!pe._fullLayout._enablescrollzoom)return;if(ut(),pe._transitioningWithDuration){Mr.preventDefault(),Mr.stopPropagation();return}Me(),clearTimeout(zt);var xr=-Mr.deltaY;if(isFinite(xr)||(xr=Mr.wheelDelta/10),!isFinite(xr)){t.log("Did not find wheel motion attributes: ",Mr);return}var dn=Math.exp(-Math.min(Math.max(xr,-20),20)/200),qr=Yt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),on=(Mr.clientX-qr.left)/qr.width,Vr=(qr.bottom-Mr.clientY)/qr.height,ln;function cn(Zr,ht,Nt){if(Zr.fixedrange)return;var rr=t.simpleMap(Zr.range,Zr.r2l),mr=rr[0]+(rr[1]-rr[0])*ht;function Rr(Er){return Zr.l2r(mr+(Er-mr)*Nt)}Zr.range=rr.map(Rr)}if(Mt){for(Re||(on=.5),ln=0;ln<$e.length;ln++)cn($e[ln],on,dn);Or("x"),Rt[2]*=dn,Rt[0]+=Rt[2]*on*(1/dn-1)}if(At){for(ke||(Vr=.5),ln=0;ln<xt.length;ln++)cn(xt[ln],Vr,dn);Or("y"),Rt[3]*=dn,Rt[1]+=Rt[3]*(1-Vr)*(1/dn-1)}Rn(Rt),kr(),pe.emit("plotly_relayouting",Le),zt=setTimeout(function(){Rt=[0,0,st,_t],vn()},Xt),Mr.preventDefault()}ke.length*Re.length!==1&&re(He,Vt);function cr(Mr,xr){if(Mr=Mr*Ve,xr=xr*Qe,pe._transitioningWithDuration)return;if(pe._fullLayout._replotting=!0,Et==="ew"||jt==="ns"){var dn=Et?-Mr:0,qr=jt?-xr:0;if(Wt.isSubplotConstrained){if(Et&&jt){var on=(Mr/st-xr/_t)/2;Mr=on*st,xr=-on*_t,dn=-Mr,qr=-xr}jt?dn=-qr*st/_t:qr=-dn*_t/st}Et&&(B($e,Mr),Or("x")),jt&&(B(xt,xr),Or("y")),Rn([dn,qr,st,_t]),kr(),pe.emit("plotly_relayouting",Le);return}function Vr(Rr,Er,Br){for(var Lr=1-Er,pn,On,Fn=0;Fn<Rr.length;Fn++){var Qn=Rr[Fn];if(!Qn.fixedrange){pn=Qn,On=Qn._rl[Lr]+(Qn._rl[Er]-Qn._rl[Lr])/H(Br/Qn._length);var ya=Qn.l2r(On);ya!==!1&&ya!==void 0&&(Qn.range[Er]=ya)}}return pn._length*(pn._rl[Er]-On)/(pn._rl[Er]-pn._rl[Lr])}var ln=Et==="w"==(jt==="n")?1:-1;if(Et&&jt&&(Ot.isSubplotConstrained||Wt.isSubplotConstrained)){var cn=(Mr/st+ln*xr/_t)/2;Mr=cn*st,xr=ln*cn*_t}var Zr,ht;if(Et==="w"?Mr=Vr($e,0,Mr):Et==="e"?Mr=Vr($e,1,-Mr):Et||(Mr=0),jt==="n"?xr=Vr(xt,1,xr):jt==="s"?xr=Vr(xt,0,-xr):jt||(xr=0),Zr=Et==="w"?Mr:0,ht=jt==="n"?xr:0,Ot.isSubplotConstrained&&!Wt.isSubplotConstrained||Wt.isSubplotConstrained&&Et&&jt&&ln>0){var Nt;if(Wt.isSubplotConstrained||!Et&&jt.length===1){for(Nt=0;Nt<$e.length;Nt++)$e[Nt].range=$e[Nt]._r.slice(),I($e[Nt],1-xr/_t);Mr=xr*st/_t,Zr=Mr/2}if(Wt.isSubplotConstrained||!jt&&Et.length===1){for(Nt=0;Nt<xt.length;Nt++)xt[Nt].range=xt[Nt]._r.slice(),I(xt[Nt],1-Mr/st);xr=Mr*_t/st,ht=xr/2}}(!Wt.isSubplotConstrained||!jt)&&Or("x"),(!Wt.isSubplotConstrained||!Et)&&Or("y");var rr=st-Mr,mr=_t-xr;Wt.isSubplotConstrained&&!(Et&&jt)&&(Et?(ht=Zr?0:Mr*_t/st,mr=rr*_t/st):(Zr=ht?0:xr*st/_t,rr=mr*st/_t)),Rn([Zr,ht,rr,mr]),kr(),pe.emit("plotly_relayouting",Le)}function Or(Mr,xr){for(var dn=Wt.isSubplotConstrained?{x:xt,y:$e}[Mr]:Wt[Mr+"axes"],qr=Wt.isSubplotConstrained?{x:$e,y:xt}[Mr]:[],on=0;on<dn.length;on++){var Vr=dn[on],ln=Vr._id,cn=Wt.xLinks[ln]||Wt.yLinks[ln],Zr=qr[0]||Ae[cn]||Be[cn];Zr&&(xr?(xr[Vr._name+".range[0]"]=xr[Zr._name+".range[0]"],xr[Vr._name+".range[1]"]=xr[Zr._name+".range[1]"]):Vr.range=Zr.range.slice())}}function kr(){var Mr=[],xr;function dn(Vr){for(xr=0;xr<Vr.length;xr++)Vr[xr].fixedrange||Mr.push(Vr[xr]._id)}for(Mt&&(dn($e),dn(Ot.xaxes),dn(Wt.xaxes)),At&&(dn(xt),dn(Ot.yaxes),dn(Wt.yaxes)),Le={},xr=0;xr<Mr.length;xr++){var qr=Mr[xr],on=T(pe,qr);i.drawOne(pe,on,{skipTitle:!0}),Le[on._name+".range[0]"]=on.range[0],Le[on._name+".range[1]"]=on.range[1]}i.redrawComponents(pe,Mr)}function Sr(){if(!pe._transitioningWithDuration){var Mr=pe._context.doubleClick,xr=[];Et&&(xr=xr.concat($e)),jt&&(xr=xr.concat(xt)),Wt.xaxes&&(xr=xr.concat(Wt.xaxes)),Wt.yaxes&&(xr=xr.concat(Wt.yaxes));var dn={},qr,on,Vr;if(Mr==="reset+autosize"){for(Mr="autosize",on=0;on<xr.length;on++)if(qr=xr[on],qr._rangeInitial&&(qr.range[0]!==qr._rangeInitial[0]||qr.range[1]!==qr._rangeInitial[1])||!qr._rangeInitial&&!qr.autorange){Mr="reset";break}}if(Mr==="autosize")for(on=0;on<xr.length;on++)qr=xr[on],qr.fixedrange||(dn[qr._name+".autorange"]=!0);else if(Mr==="reset")for((Et||Ot.isSubplotConstrained)&&(xr=xr.concat(Ot.xaxes)),jt&&!Ot.isSubplotConstrained&&(xr=xr.concat(Ot.yaxes)),Ot.isSubplotConstrained&&(Et?jt||(xr=xr.concat(xt)):xr=xr.concat($e)),on=0;on<xr.length;on++)qr=xr[on],qr.fixedrange||(qr._rangeInitial?(Vr=qr._rangeInitial,dn[qr._name+".range[0]"]=Vr[0],dn[qr._name+".range[1]"]=Vr[1]):dn[qr._name+".autorange"]=!0);pe.emit("plotly_doubleclick",null),c.call("_guiRelayout",pe,dn)}}function vn(){Rn([0,0,st,_t]),t.syncOrAsync([g.previousPromises,function(){pe._fullLayout._replotting=!1,c.call("_guiRelayout",pe,Le)}],pe)}function Rn(Mr){var xr=pe._fullLayout,dn=xr._plots,qr=xr._subplots.cartesian,on,Vr,ln,cn;if(ot&&c.subplotsRegistry.splom.drag(pe),ft){for(on=0;on<qr.length;on++)if(Vr=dn[qr[on]],ln=Vr.xaxis,cn=Vr.yaxis,Vr._scene){var Zr=t.simpleMap(ln.range,ln.r2l),ht=t.simpleMap(cn.range,cn.r2l);Vr._scene.update({range:[Zr[0],ht[0],Zr[1],ht[1]]})}}if((ot||ft)&&(x(pe),w(pe)),Te){var Nt=Mr[2]/qe._length,rr=Mr[3]/Ee._length;for(on=0;on<qr.length;on++){Vr=dn[qr[on]],ln=Vr.xaxis,cn=Vr.yaxis;var mr=(Mt||Wt.isSubplotConstrained)&&!ln.fixedrange&&Ae[ln._id],Rr=(At||Wt.isSubplotConstrained)&&!cn.fixedrange&&Be[cn._id],Er,Br,Lr,pn;if(mr?(Er=Nt,Lr=Re||Wt.isSubplotConstrained?Mr[0]:En(ln,Er)):Wt.xaHash[ln._id]?(Er=Nt,Lr=Mr[0]*ln._length/qe._length):Wt.yaHash[ln._id]?(Er=rr,Lr=jt==="ns"?-Mr[1]*ln._length/Ee._length:En(ln,Er,{n:"top",s:"bottom"}[jt])):(Er=hn(ln,Nt,rr),Lr=An(ln,Er)),Rr?(Br=rr,pn=ke||Wt.isSubplotConstrained?Mr[1]:En(cn,Br)):Wt.yaHash[cn._id]?(Br=rr,pn=Mr[1]*cn._length/Ee._length):Wt.xaHash[cn._id]?(Br=Nt,pn=Et==="ew"?-Mr[0]*cn._length/qe._length:En(cn,Br,{e:"right",w:"left"}[Et])):(Br=hn(cn,Nt,rr),pn=An(cn,Br)),!(!Er&&!Br)){Er||(Er=1),Br||(Br=1);var On=ln._offset-Lr/Er,Fn=cn._offset-pn/Br;Vr.clipRect.call(l.setTranslate,Lr,pn).call(l.setScale,Er,Br),Vr.plot.call(l.setTranslate,On,Fn).call(l.setScale,1/Er,1/Br),(Er!==Vr.xScaleFactor||Br!==Vr.yScaleFactor)&&(l.setPointGroupScale(Vr.zoomScalePts,Er,Br),l.setTextPointsScale(Vr.zoomScaleTxt,Er,Br)),l.hideOutsideRangePoints(Vr.clipOnAxisFalseTraces,Vr),Vr.xScaleFactor=Er,Vr.yScaleFactor=Br}}}}function hn(Mr,xr,dn){return Mr.fixedrange?0:Mt&&Ot.xaHash[Mr._id]?xr:At&&(Ot.isSubplotConstrained?Ot.xaHash:Ot.yaHash)[Mr._id]?dn:0}function An(Mr,xr){return xr?(Mr.range=Mr._r.slice(),I(Mr,xr),En(Mr,xr)):0}function En(Mr,xr,dn){return Mr._length*(1-xr)*y[dn||Mr.constraintoward||"middle"]}return He}function N(pe,fe,se,de){var be=t.ensureSingle(pe.draglayer,fe,se,function(xe){xe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",pe.id)});return be.call(s,de),be.node()}function G(pe,fe,se,de,be,xe,ke){var Re=N(pe,"rect",fe,se);return r.select(Re).call(l.setRect,de,be,xe,ke),Re}function U(pe,fe){for(var se=0;se<pe.length;se++)if(!pe[se].fixedrange)return fe;return""}function Y(pe,fe){var se=pe.range[fe],de=Math.abs(se-pe.range[1-fe]),be;return pe.type==="date"?se:pe.type==="log"?(be=Math.ceil(Math.max(0,-Math.log(de)/Math.LN10))+3,r.format("."+be+"g")(Math.pow(10,se))):(be=Math.floor(Math.log(Math.abs(se))/Math.LN10)-Math.floor(Math.log(de)/Math.LN10)+4,r.format("."+String(be)+"g")(se))}function z(pe,fe,se,de,be){for(var xe=0;xe<pe.length;xe++){var ke=pe[xe];if(!ke.fixedrange)if(ke.rangebreaks){var Re=ke._id.charAt(0)==="y",Ke=Re?1-fe:fe,ze=Re?1-se:se;de[ke._name+".range[0]"]=ke.l2r(ke.p2l(Ke*ke._length)),de[ke._name+".range[1]"]=ke.l2r(ke.p2l(ze*ke._length))}else{var Je=ke._rl[0],qe=ke._rl[1]-Je;de[ke._name+".range[0]"]=ke.l2r(Je+qe*fe),de[ke._name+".range[1]"]=ke.l2r(Je+qe*se)}}if(be&&be.length){var Ee=(fe+(1-se))/2;z(be,Ee,1-Ee,de,[])}}function B(pe,fe){for(var se=0;se<pe.length;se++){var de=pe[se];if(!de.fixedrange)if(de.rangebreaks){var be=0,xe=de._length,ke=de.p2l(be+fe)-de.p2l(be),Re=de.p2l(xe+fe)-de.p2l(xe),Ke=(ke+Re)/2;de.range=[de.l2r(de._rl[0]-Ke),de.l2r(de._rl[1]-Ke)]}else de.range=[de.l2r(de._rl[0]-fe/de._m),de.l2r(de._rl[1]-fe/de._m)]}}function H(pe){return 1-(pe>=0?Math.min(pe,.9):1/(1/Math.max(pe,-.3)+3.222))}function V(pe,fe,se){return pe?pe==="nsew"?se?"":fe==="pan"?"move":"crosshair":pe.toLowerCase()+"-resize":"pointer"}function Z(pe,fe,se,de,be){return pe.append("path").attr("class","zoombox").style({fill:fe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",f(se,de)).attr("d",be+"Z")}function q(pe,fe,se){return pe.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",f(fe,se)).attr("d","M0,0Z")}function J(pe,fe,se,de,be,xe){pe.attr("d",de+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),ne(pe,fe,be,xe)}function ne(pe,fe,se,de){se||(pe.transition().style("fill",de>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fe.transition().style("opacity",1).duration(200))}function ve(pe){r.select(pe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function $(pe){R&&pe.data&&pe._context.showTips&&(t.notifier(t._(pe,"Double-click to zoom back out"),"long"),R=!1)}function j(pe,fe){return"M"+(pe.l-.5)+","+(fe-E-.5)+"h-3v"+(2*E+1)+"h3ZM"+(pe.r+.5)+","+(fe-E-.5)+"h3v"+(2*E+1)+"h-3Z"}function ae(pe,fe){return"M"+(fe-E-.5)+","+(pe.t-.5)+"v-3h"+(2*E+1)+"v3ZM"+(fe-E-.5)+","+(pe.b+.5)+"v3h"+(2*E+1)+"v-3Z"}function ie(pe){var fe=Math.floor(Math.min(pe.b-pe.t,pe.r-pe.l,E)/2);return"M"+(pe.l-3.5)+","+(pe.t-.5+fe)+"h3v"+-fe+"h"+fe+"v-3h-"+(fe+3)+"ZM"+(pe.r+3.5)+","+(pe.t-.5+fe)+"h-3v"+-fe+"h"+-fe+"v-3h"+(fe+3)+"ZM"+(pe.r+3.5)+","+(pe.b+.5-fe)+"h-3v"+fe+"h"+-fe+"v3h"+(fe+3)+"ZM"+(pe.l-3.5)+","+(pe.b+.5-fe)+"h3v"+fe+"h"+fe+"v3h-"+(fe+3)+"Z"}function te(pe,fe,se,de,be){for(var xe=!1,ke={},Re={},Ke,ze,Je,qe,Ee=(be||{}).xaHash,Ae=(be||{}).yaHash,Be=0;Be<fe.length;Be++){var $e=fe[Be];for(Ke in se)if($e[Ke]){for(Je in $e)!(be&&(Ee[Je]||Ae[Je]))&&!(Je.charAt(0)==="x"?se:de)[Je]&&(ke[Je]=Ke);for(ze in de)!(be&&(Ee[ze]||Ae[ze]))&&$e[ze]&&(xe=!0)}for(ze in de)if($e[ze])for(qe in $e)!(be&&(Ee[qe]||Ae[qe]))&&!(qe.charAt(0)==="x"?se:de)[qe]&&(Re[qe]=ze)}xe&&(t.extendFlat(ke,Re),Re={});var xt={},bt=[];for(Je in ke){var Ne=T(pe,Je);bt.push(Ne),xt[Ne._id]=Ne}var st={},_t=[];for(qe in Re){var Ot=T(pe,qe);_t.push(Ot),st[Ot._id]=Ot}return{xaHash:xt,yaHash:st,xaxes:bt,yaxes:_t,xLinks:ke,yLinks:Re,isSubplotConstrained:xe}}function re(pe,fe){if(!u)pe.onwheel!==void 0?pe.onwheel=fe:pe.onmousewheel!==void 0?pe.onmousewheel=fe:pe.isAddedWheelEvent||(pe.isAddedWheelEvent=!0,pe.addEventListener("wheel",fe,{passive:!1}));else{var se=pe.onwheel!==void 0?"wheel":"mousewheel";pe._onwheel&&pe.removeEventListener(se,pe._onwheel),pe._onwheel=fe,pe.addEventListener(se,fe,{passive:!1})}}function ce(pe){var fe=[];for(var se in pe)fe.push(pe[se]);return fe}d.exports={makeDragBox:O,makeDragger:N,makeRectDragger:G,makeZoombox:Z,makeCorners:q,updateZoombox:J,xyCorners:ie,transitionZoombox:ne,removeZoombox:ve,showDoubleClickNotifier:$,attachWheelEventHandler:re}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/subroutines":818,"../../registry":911,"../plots":891,"./axes":828,"./axis_ids":831,"./constants":834,"./scale_zoom":846,"./select":847,d3:169,"has-passive-events":441,tinycolor2:576}],837:[function(e,d,S){var r=e("d3"),a=e("../../components/fx"),u=e("../../components/dragelement"),c=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,f=e("./constants").DRAGGERSIZE;S.initInteractions=function(o){var l=o._fullLayout;if(o._context.staticPlot){r.select(o).selectAll(".drag").remove();return}if(!(!l._has("cartesian")&&!l._has("splom"))){var h=Object.keys(l._plots||{}).sort(function(s,p){if((l._plots[s].mainplot&&!0)===(l._plots[p].mainplot&&!0)){var v=s.split("y"),m=p.split("y");return v[0]===m[0]?Number(v[1]||1)-Number(m[1]||1):Number(v[0]||1)-Number(m[0]||1)}return l._plots[s].mainplot?1:-1});h.forEach(function(s){var p=l._plots[s],v=p.xaxis,m=p.yaxis;if(!p.mainplot){var b=t(o,p,v._offset,m._offset,v._length,m._length,"ns","ew");b.onmousemove=function(w){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===s&&o._fullLayout._plots[s]&&a.hover(o,w,s)},a.hover(o,w,s),o._fullLayout._lasthover=b,o._fullLayout._hoversubplot=s},b.onmouseout=function(w){o._dragging||(o._fullLayout._hoversubplot=null,u.unhover(o,w))},o._context.showAxisDragHandles&&(t(o,p,v._offset-f,m._offset-f,f,f,"n","w"),t(o,p,v._offset+v._length,m._offset-f,f,f,"n","e"),t(o,p,v._offset-f,m._offset+m._length,f,f,"s","w"),t(o,p,v._offset+v._length,m._offset+m._length,f,f,"s","e"))}if(o._context.showAxisDragHandles){if(s===v._mainSubplot){var y=v._mainLinePosition;v.side==="top"&&(y-=f),t(o,p,v._offset+v._length*.1,y,v._length*.8,f,"","ew"),t(o,p,v._offset,y,v._length*.1,f,"","w"),t(o,p,v._offset+v._length*.9,y,v._length*.1,f,"","e")}if(s===m._mainSubplot){var x=m._mainLinePosition;m.side!=="right"&&(x-=f),t(o,p,x,m._offset+m._length*.1,f,m._length*.8,"ns",""),t(o,p,x,m._offset+m._length*.9,f,m._length*.1,"s",""),t(o,p,x,m._offset,f,m._length*.1,"n","")}}});var i=l._hoverlayer.node();i.onmousemove=function(s){s.target=o._fullLayout._lasthover,a.hover(o,s,l._hoversubplot)},i.onclick=function(s){s.target=o._fullLayout._lasthover,a.click(o,s)},i.onmousedown=function(s){o._fullLayout._lasthover.onmousedown(s)},S.updateFx(o)}},S.updateFx=function(n){var o=n._fullLayout,l=o.dragmode==="pan"?"move":"crosshair";c(o._draggers,l)}},{"../../components/dragelement":662,"../../components/fx":683,"../../lib/setcursor":799,"./constants":834,"./dragbox":836,d3:169}],838:[function(e,d,S){function r(u){var c=u._fullLayout._zoomlayer;c&&c.selectAll(".outline-controllers").remove()}function a(u){var c=u._fullLayout._zoomlayer;c&&c.selectAll(".select-outline").remove(),u._fullLayout._drawing=!1}d.exports={clearOutlineControllers:r,clearSelect:a}},{}],839:[function(e,d,S){var r=e("../../lib").strTranslate;function a(f,n){switch(f.type){case"log":return f.p2d(n);case"date":return f.p2r(n,0,f.calendar);default:return f.p2r(n)}}function u(f,n){switch(f.type){case"log":return f.d2p(n);case"date":return f.r2p(n,0,f.calendar);default:return f.r2p(n)}}function c(f){var n=f._id.charAt(0)==="y"?1:0;return function(o){return a(f,o[n])}}function t(f){return r(f.xaxis._offset,f.yaxis._offset)}d.exports={p2r:a,r2p:u,axValue:c,getTransform:t}},{"../../lib":778}],840:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("./axis_ids");d.exports=function(t){return function(n,o){var l=n[t];if(!!Array.isArray(l))for(var h=r.subplotsRegistry.cartesian,i=h.idRegex,s=o._subplots,p=s.xaxis,v=s.yaxis,m=s.cartesian,b=o._has("cartesian")||o._has("gl2d"),y=0;y<l.length;y++){var x=l[y];if(!!a.isPlainObject(x)){var w=u.cleanId(x.xref,"x",!1),g=u.cleanId(x.yref,"y",!1),T=i.x.test(w),M=i.y.test(g);if(T||M){b||a.pushUnique(o._basePlotModules,h);var P=!1;T&&p.indexOf(w)===-1&&(p.push(w),P=!0),M&&v.indexOf(g)===-1&&(v.push(g),P=!0),P&&T&&M&&m.push(w+g)}}}}}},{"../../lib":778,"../../registry":911,"./axis_ids":831}],841:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=e("../plots"),t=e("../../components/drawing"),f=e("../get_data").getModuleCalcData,n=e("./axis_ids"),o=e("./constants"),l=e("../../constants/xmlns_namespaces"),h=u.ensureSingle;function i(y,x,w){return u.ensureSingle(y,x,w,function(g){g.datum(w)})}S.name="cartesian",S.attr=["xaxis","yaxis"],S.idRoot=["x","y"],S.idRegex=o.idRegex,S.attrRegex=o.attrRegex,S.attributes=e("./attributes"),S.layoutAttributes=e("./layout_attributes"),S.supplyLayoutDefaults=e("./layout_defaults"),S.transitionAxes=e("./transition_axes"),S.finalizeSubplots=function(y,x){var w=x._subplots,g=w.xaxis,T=w.yaxis,M=w.cartesian,P=M.concat(w.gl2d||[]),L={},I={},C,k,E;for(C=0;C<P.length;C++){var R=P[C].split("y");L[R[0]]=1,I["y"+R[1]]=1}for(C=0;C<g.length;C++)k=g[C],L[k]||(E=(y[n.id2name(k)]||{}).anchor,o.idRegex.y.test(E)||(E="y"),M.push(k+E),P.push(k+E),I[E]||(I[E]=1,u.pushUnique(T,E)));for(C=0;C<T.length;C++)E=T[C],I[E]||(k=(y[n.id2name(E)]||{}).anchor,o.idRegex.x.test(k)||(k="x"),M.push(k+E),P.push(k+E),L[k]||(L[k]=1,u.pushUnique(g,k)));if(!P.length){k="",E="";for(var O in y)if(o.attrRegex.test(O)){var N=O.charAt(0);N==="x"?(!k||+O.substr(5)<+k.substr(5))&&(k=O):(!E||+O.substr(5)<+E.substr(5))&&(E=O)}k=k?n.name2id(k):"x",E=E?n.name2id(E):"y",g.push(k),T.push(E),M.push(k+E)}},S.plot=function(y,x,w,g){var T=y._fullLayout,M=T._subplots.cartesian,P=y.calcdata,L;if(!Array.isArray(x))for(x=[],L=0;L<P.length;L++)x.push(L);for(L=0;L<M.length;L++){for(var I=M[L],C=T._plots[I],k=[],E,R=0;R<P.length;R++){var O=P[R],N=O[0].trace;N.xaxis+N.yaxis===I&&((x.indexOf(N.index)!==-1||N.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===I&&["tonextx","tonexty","tonext"].indexOf(N.fill)!==-1&&k.indexOf(E)===-1&&k.push(E),k.push(O)),E=O)}s(y,C,k,w,g)}};function s(y,x,w,g,T){for(var M=o.traceLayerClasses,P=y._fullLayout,L=P._modules,I,C,k,E=[],R=[],O=0;O<L.length;O++){I=L[O];var N=I.name,G=a.modules[N].categories;if(G.svg){var U=I.layerName||N+"layer",Y=I.plot;C=f(w,Y),k=C[0],w=C[1],k.length&&E.push({i:M.indexOf(U),className:U,plotMethod:Y,cdModule:k}),G.zoomScale&&R.push("."+U)}}E.sort(function(H,V){return H.i-V.i});var z=x.plot.selectAll("g.mlayer").data(E,function(H){return H.className});if(z.enter().append("g").attr("class",function(H){return H.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),z.exit().remove(),z.order(),z.each(function(H){var V=r.select(this),Z=H.className;H.plotMethod(y,x,H.cdModule,V,g,T),o.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&t.setClipUrl(V,x.layerClipId,y)}),P._has("scattergl")&&(I=a.getModule("scattergl"),k=f(w,I)[0],I.plot(y,x,k)),!y._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var B=x.plot.selectAll(R.join(",")).selectAll(".trace");x.zoomScalePts=B.selectAll("path.point"),x.zoomScaleTxt=B.selectAll(".textpoint")}}S.clean=function(y,x,w,g){var T=g._plots||{},M=x._plots||{},P=g._subplots||{},L,I,C;if(g._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(C in T)L=T[C],L.plotgroup&&L.plotgroup.remove();var k=g._has&&g._has("gl"),E=x._has&&x._has("gl");if(k&&!E)for(C in T)L=T[C],L._scene&&L._scene.destroy();if(P.xaxis&&P.yaxis){var R=n.listIds({_fullLayout:g});for(I=0;I<R.length;I++){var O=R[I];x[n.id2name(O)]||g._infolayer.selectAll(".g-"+O+"title").remove()}}var N=g._has&&g._has("cartesian"),G=x._has&&x._has("cartesian");if(N&&!G)m(g._cartesianlayer.selectAll(".subplot"),g),g._defs.selectAll(".axesclip").remove(),delete g._axisConstraintGroups,delete g._axisMatchGroups;else if(P.cartesian)for(I=0;I<P.cartesian.length;I++){var U=P.cartesian[I];if(!M[U]){var Y="."+U+",."+U+"-x,."+U+"-y";g._cartesianlayer.selectAll(Y).remove(),b(U,g)}}},S.drawFramework=function(y){var x=y._fullLayout,w=p(y),g=x._cartesianlayer.selectAll(".subplot").data(w,String);g.enter().append("g").attr("class",function(T){return"subplot "+T[0]}),g.order(),g.exit().call(m,x),g.each(function(T){var M=T[0],P=x._plots[M];P.plotgroup=r.select(this),v(y,P),P.draglayer=h(x._draggers,"g",M)})},S.rangePlot=function(y,x,w){v(y,x),s(y,x,w),c.style(y)};function p(y){var x=y._fullLayout,w=x._subplots.cartesian,g=w.length,T,M,P,L,I,C,k=[],E=[];for(T=0;T<g;T++){P=w[T],L=x._plots[P],I=L.xaxis,C=L.yaxis;var R=I._mainAxis,O=C._mainAxis,N=R._id+O._id,G=x._plots[N];L.overlays=[],N!==P&&G?(L.mainplot=N,L.mainplotinfo=G,E.push(P)):(L.mainplot=void 0,L.mainplotinfo=void 0,k.push(P))}for(T=0;T<E.length;T++)P=E[T],L=x._plots[P],L.mainplotinfo.overlays.push(L);var U=k.concat(E),Y=new Array(g);for(T=0;T<g;T++){P=U[T],L=x._plots[P],I=L.xaxis,C=L.yaxis;var z=[P,I.layer,C.layer,I.overlaying||"",C.overlaying||""];for(M=0;M<L.overlays.length;M++)z.push(L.overlays[M].id);Y[T]=z}return Y}function v(y,x){var w=x.plotgroup,g=x.id,T=o.layerValue2layerClass[x.xaxis.layer],M=o.layerValue2layerClass[x.yaxis.layer],P=y._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var I=x.mainplotinfo,C=I.plotgroup,k=g+"-x",E=g+"-y";x.gridlayer=I.gridlayer,x.zerolinelayer=I.zerolinelayer,h(I.overlinesBelow,"path",k),h(I.overlinesBelow,"path",E),h(I.overaxesBelow,"g",k),h(I.overaxesBelow,"g",E),x.plot=h(I.overplot,"g",g),h(I.overlinesAbove,"path",k),h(I.overlinesAbove,"path",E),h(I.overaxesAbove,"g",k),h(I.overaxesAbove,"g",E),x.xlines=C.select(".overlines-"+T).select("."+k),x.ylines=C.select(".overlines-"+M).select("."+E),x.xaxislayer=C.select(".overaxes-"+T).select("."+k),x.yaxislayer=C.select(".overaxes-"+M).select("."+E)}else if(P)x.xlines=h(w,"path","xlines-above"),x.ylines=h(w,"path","ylines-above"),x.xaxislayer=h(w,"g","xaxislayer-above"),x.yaxislayer=h(w,"g","yaxislayer-above");else{var L=h(w,"g","layer-subplot");x.shapelayer=h(L,"g","shapelayer"),x.imagelayer=h(L,"g","imagelayer"),x.gridlayer=h(w,"g","gridlayer"),x.zerolinelayer=h(w,"g","zerolinelayer"),h(w,"path","xlines-below"),h(w,"path","ylines-below"),x.overlinesBelow=h(w,"g","overlines-below"),h(w,"g","xaxislayer-below"),h(w,"g","yaxislayer-below"),x.overaxesBelow=h(w,"g","overaxes-below"),x.plot=h(w,"g","plot"),x.overplot=h(w,"g","overplot"),x.xlines=h(w,"path","xlines-above"),x.ylines=h(w,"path","ylines-above"),x.overlinesAbove=h(w,"g","overlines-above"),h(w,"g","xaxislayer-above"),h(w,"g","yaxislayer-above"),x.overaxesAbove=h(w,"g","overaxes-above"),x.xlines=w.select(".xlines-"+T),x.ylines=w.select(".ylines-"+M),x.xaxislayer=w.select(".xaxislayer-"+T),x.yaxislayer=w.select(".yaxislayer-"+M)}P||(i(x.gridlayer,"g",x.xaxis._id),i(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(R){return R[0]}).sort(n.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function m(y,x){if(!!y){var w={};y.each(function(I){var C=I[0],k=r.select(this);k.remove(),b(C,x),w[C]=!0});for(var g in x._plots)for(var T=x._plots[g],M=T.overlays||[],P=0;P<M.length;P++){var L=M[P];w[L.id]&&L.plot.selectAll(".trace").remove()}}}function b(y,x){x._draggers.selectAll("g."+y).remove(),x._defs.select("#clip"+x._uid+y+"plot").remove()}S.toSVG=function(y){var x=y._fullLayout._glimages,w=r.select(y).selectAll(".svg-container"),g=w.filter(function(M,P){return P===w.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function T(){var M=this,P=M.toDataURL("image/png"),L=x.append("svg:image");L.attr({xmlns:l.svg,"xlink:href":P,preserveAspectRatio:"none",x:0,y:0,width:M.width,height:M.height})}g.each(T)},S.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,"../get_data":865,"../plots":891,"./attributes":826,"./axis_ids":831,"./constants":834,"./graph_interact":837,"./layout_attributes":842,"./layout_defaults":843,"./transition_axes":852,d3:169}],842:[function(e,d,S){var r=e("../font_attributes"),a=e("../../components/color/attributes"),u=e("../../components/drawing/attributes").dash,c=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/docs").FORMAT_LINK,e("../../constants/docs").DATE_FORMAT_LINK;var f=e("../../constants/numerical").ONEDAY,n=e("./constants"),o=n.HOUR_PATTERN,l=n.WEEKDAY_PATTERN;d.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[l,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:f},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:c({},u,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":642,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/numerical":753,"../../lib/extend":768,"../../plot_api/plot_template":817,"../font_attributes":856,"./constants":834}],843:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../components/fx/helpers").isUnifiedHover,c=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),f=e("../layout_attributes"),n=e("./layout_attributes"),o=e("./type_defaults"),l=e("./axis_defaults"),h=e("./constraints"),i=e("./position_defaults"),s=e("./axis_ids"),p=s.id2name,v=s.name2id,m=e("./constants").AX_ID_PATTERN,b=e("../../registry"),y=b.traceIs,x=b.getComponentMethod;function w(g,T,M){Array.isArray(g[T])?g[T].push(M):g[T]=[M]}d.exports=function(T,M,P){var L=M.autotypenumbers,I={},C={},k={},E={},R={},O={},N={},G={},U={},Y={},z,B;for(z=0;z<P.length;z++){var H=P[z];if(!(!y(H,"cartesian")&&!y(H,"gl2d"))){var V;if(H.xaxis)V=p(H.xaxis),w(I,V,H);else if(H.xaxes)for(B=0;B<H.xaxes.length;B++)w(I,p(H.xaxes[B]),H);var Z;if(H.yaxis)Z=p(H.yaxis),w(I,Z,H);else if(H.yaxes)for(B=0;B<H.yaxes.length;B++)w(I,p(H.yaxes[B]),H);if(H.type==="funnel"?H.orientation==="h"?(V&&(C[V]=!0),Z&&(N[Z]=!0)):Z&&(k[Z]=!0):H.type==="image"?(Z&&(G[Z]=!0),V&&(G[V]=!0)):(Z&&(R[Z]=!0,O[Z]=!0),(!y(H,"carpet")||H.type==="carpet"&&!H._cheater)&&V&&(E[V]=!0)),H.type==="carpet"&&H._cheater&&V&&(C[V]=!0),y(H,"2dMap")&&(U[V]=!0,U[Z]=!0),y(H,"oriented")){var q=H.orientation==="h"?Z:V;Y[q]=!0}}}var J=M._subplots,ne=J.xaxis,ve=J.yaxis,$=r.simpleMap(ne,p),j=r.simpleMap(ve,p),ae=$.concat(j),ie=a.background;ne.length&&ve.length&&(ie=r.coerce(T,M,f,"plot_bgcolor"));var te=a.combine(ie,M.paper_bgcolor),re,ce,pe,fe,se;function de(){var Te=I[re]||[];se._traceIndices=Te.map(function(Le){return Le._expandedIndex}),se._annIndices=[],se._shapeIndices=[],se._imgIndices=[],se._subplotsWith=[],se._counterAxes=[],se._name=se._attr=re,se._id=ce}function be(Te,Le){return r.coerce(fe,se,n,Te,Le)}function xe(Te,Le){return r.coerce2(fe,se,n,Te,Le)}function ke(Te){return Te==="x"?ve:ne}function Re(Te,Le){for(var Ve=Te==="x"?$:j,Qe=[],Me=0;Me<Ve.length;Me++){var Ie=Ve[Me];Ie!==Le&&!(T[Ie]||{}).overlaying&&Qe.push(v(Ie))}return Qe}var Ke={x:ke("x"),y:ke("y")},ze=Ke.x.concat(Ke.y),Je={},qe=[];function Ee(){var Te=fe.matches;m.test(Te)&&ze.indexOf(Te)===-1&&(Je[Te]=fe.type,qe=Object.keys(Je))}var Ae=c(T,M,P),Be=u(Ae);for(z=0;z<ae.length;z++){re=ae[z],ce=v(re),pe=re.charAt(0),r.isPlainObject(T[re])||(T[re]={}),fe=T[re],se=t.newContainer(M,re,pe+"axis"),de();var $e=pe==="x"&&!E[re]&&C[re]||pe==="y"&&!R[re]&&k[re],xt=pe==="y"&&(!O[re]&&N[re]||G[re]),bt={letter:pe,font:M.font,outerTicks:U[re],showGrid:!Y[re],data:I[re]||[],bgColor:te,calendar:M.calendar,automargin:!0,visibleDflt:$e,reverseDflt:xt,autotypenumbersDflt:L,splomStash:((M._splomAxes||{})[pe]||{})[ce]};be("uirevision",M.uirevision),o(fe,se,be,bt),l(fe,se,be,bt,M);var Ne=Be&&pe===Ae.charAt(0),st=xe("spikecolor",Be?se.color:void 0),_t=xe("spikethickness",Be?1.5:void 0),Ot=xe("spikedash",Be?"dot":void 0),Wt=xe("spikemode",Be?"across":void 0),Et=xe("spikesnap",Be?"hovered data":void 0),jt=be("showspikes",!!Ne||!!st||!!_t||!!Ot||!!Wt||!!Et);jt||(delete se.spikecolor,delete se.spikethickness,delete se.spikedash,delete se.spikemode,delete se.spikesnap),i(fe,se,be,{letter:pe,counterAxes:Ke[pe],overlayableAxes:Re(pe,re),grid:M.grid}),be("title.standoff"),Ee(),se._input=fe}for(z=0;z<qe.length;){ce=qe[z++],re=p(ce),pe=re.charAt(0),r.isPlainObject(T[re])||(T[re]={}),fe=T[re],se=t.newContainer(M,re,pe+"axis"),de();var Zt={letter:pe,font:M.font,outerTicks:U[re],showGrid:!Y[re],data:[],bgColor:te,calendar:M.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((M._splomAxes||{})[pe]||{})[ce]};be("uirevision",M.uirevision),se.type=Je[ce]||"linear",l(fe,se,be,Zt,M),i(fe,se,be,{letter:pe,counterAxes:Ke[pe],overlayableAxes:Re(pe,re),grid:M.grid}),be("fixedrange"),Ee(),se._input=fe}var Mt=x("rangeslider","handleDefaults"),At=x("rangeselector","handleDefaults");for(z=0;z<$.length;z++)re=$[z],fe=T[re],se=M[re],Mt(T,M,re),se.type==="date"&&At(fe,se,M,j,se.calendar),be("fixedrange");for(z=0;z<j.length;z++){re=j[z],fe=T[re],se=M[re];var ft=M[p(se.anchor)],ot=x("rangeslider","isVisible")(ft);be("fixedrange",ot)}h.handleDefaults(T,M,{axIds:ze.concat(qe).sort(s.idSort),axHasImage:G})}},{"../../components/color":643,"../../components/fx/helpers":679,"../../components/fx/hovermode_defaults":682,"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"../layout_attributes":882,"./axis_defaults":830,"./axis_ids":831,"./constants":834,"./constraints":835,"./layout_attributes":842,"./position_defaults":845,"./type_defaults":853}],844:[function(e,d,S){var r=e("tinycolor2").mix,a=e("../../components/color/attributes").lightFraction,u=e("../../lib");d.exports=function(t,f,n,o){o=o||{};var l=o.dfltColor;function h(T,M){return u.coerce2(t,f,o.attributes,T,M)}var i=h("linecolor",l),s=h("linewidth"),p=n("showline",o.showLine||!!i||!!s);p||(delete f.linecolor,delete f.linewidth);var v=r(l,o.bgColor,o.blend||a).toRgbString(),m=h("gridcolor",v),b=h("gridwidth"),y=n("showgrid",o.showGrid||!!m||!!b);if(y||(delete f.gridcolor,delete f.gridwidth),!o.noZeroLine){var x=h("zerolinecolor",l),w=h("zerolinewidth"),g=n("zeroline",o.showGrid||!!x||!!w);g||(delete f.zerolinecolor,delete f.zerolinewidth)}}},{"../../components/color/attributes":642,"../../lib":778,tinycolor2:576}],845:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib");d.exports=function(c,t,f,n){var o=n.counterAxes||[],l=n.overlayableAxes||[],h=n.letter,i=n.grid,s,p,v,m;i&&(p=i._domains[h][i._axisMap[t._id]],s=i._anchors[t._id],p&&(v=i[h+"side"].split(" ")[0],m=i.domain[h][v==="right"||v==="top"?1:0])),p=p||[0,1],s=s||(r(c.position)?"free":o[0]||"free"),v=v||(h==="x"?"bottom":"left"),m=m||0;var b=a.coerce(c,t,{anchor:{valType:"enumerated",values:["free"].concat(o),dflt:s}},"anchor");b==="free"&&f("position",m),a.coerce(c,t,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:v}},"side");var y=!1;if(l.length&&(y=a.coerce(c,t,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying")),!y){var x=f("domain",p);x[0]>x[1]-1/4096&&(t.domain=p),a.noneOrAll(c.domain,t.domain,p)}return f("layer"),t}},{"../../lib":778,"fast-isnumeric":241}],846:[function(e,d,S){var r=e("../../constants/alignment").FROM_BL;d.exports=function(u,c,t){t===void 0&&(t=r[u.constraintoward||"center"]);var f=[u.r2l(u.range[0]),u.r2l(u.range[1])],n=f[0]+(f[1]-f[0])*t;u.range=u._input.range=[u.l2r(n+(f[0]-n)*c),u.l2r(n+(f[1]-n)*c)],u.setScale()}},{"../../constants/alignment":745}],847:[function(e,d,S){var r=e("polybooljs"),a=e("../../registry"),u=e("../../components/drawing").dashStyle,c=e("../../components/color"),t=e("../../components/fx"),f=e("../../components/fx/helpers").makeEventData,n=e("../../components/dragelement/helpers"),o=n.freeMode,l=n.rectMode,h=n.drawMode,i=n.openMode,s=n.selectMode,p=e("../../components/shapes/draw_newshape/display_outlines"),v=e("../../components/shapes/draw_newshape/helpers").handleEllipse,m=e("../../components/shapes/draw_newshape/newshapes"),b=e("../../lib"),y=e("../../lib/polygon"),x=e("../../lib/throttle"),w=e("./axis_ids").getFromId,g=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,M=e("./constants"),P=M.MINSELECT,L=y.filter,I=y.tester,C=e("./handle_outline").clearSelect,k=e("./helpers"),E=k.p2r,R=k.axValue,O=k.getTransform;function N(re,ce,pe,fe,se){var de=o(se),be=l(se),xe=i(se),ke=h(se),Re=s(se),Ke=se==="drawline",ze=se==="drawcircle",Je=Ke||ze,qe=fe.gd,Ee=qe._fullLayout,Ae=Ee._zoomlayer,Be=fe.element.getBoundingClientRect(),$e=fe.plotinfo,xt=O($e),bt=ce-Be.left,Ne=pe-Be.top;Ee._calcInverseTransform(qe);var st=b.apply3DTransform(Ee._invTransform)(bt,Ne);bt=st[0],Ne=st[1];var _t=Ee._invScaleX,Ot=Ee._invScaleY,Wt=bt,Et=Ne,jt="M"+bt+","+Ne,Zt=fe.xaxes[0]._length,Mt=fe.yaxes[0]._length,At=fe.xaxes.concat(fe.yaxes),ft=re.altKey&&!(h(se)&&xe),ot,Te,Le,Ve,Qe,Me,Ie;H(re,qe,fe),de&&(ot=L([[bt,Ne]],M.BENDPX));var He=Ae.selectAll("path.select-outline-"+$e.id).data(ke?[0]:[1,2]),Ye=Ee.newshape;He.enter().append("path").attr("class",function(Ct){return"select-outline select-outline-"+Ct+" select-outline-"+$e.id}).style(ke?{opacity:Ye.opacity/2,fill:xe?void 0:Ye.fillcolor,stroke:Ye.line.color,"stroke-dasharray":u(Ye.line.dash,Ye.line.width),"stroke-width":Ye.line.width+"px"}:{}).attr("fill-rule",Ye.fillrule).classed("cursor-move",!!ke).attr("transform",xt).attr("d",jt+"Z");var ut=Ae.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1}).attr("transform",xt).attr("d","M0,0Z"),nt=Ee._uid+M.SELECTID,Ge=[],at=Z(qe,fe.xaxes,fe.yaxes,fe.subplot);function et(Ct,Pt){return Ct-Pt}var lt;$e.fillRangeItems?lt=$e.fillRangeItems:be?lt=function(Ct,Pt){var $t=Ct.range={};for(Qe=0;Qe<At.length;Qe++){var je=At[Qe],Oe=je._id.charAt(0);$t[je._id]=[E(je,Pt[Oe+"min"]),E(je,Pt[Oe+"max"])].sort(et)}}:lt=function(Ct,Pt,$t){var je=Ct.lassoPoints={};for(Qe=0;Qe<At.length;Qe++){var Oe=At[Qe];je[Oe._id]=$t.filtered.map(R(Oe))}},fe.moveFn=function(Ct,Pt){Wt=Math.max(0,Math.min(Zt,_t*Ct+bt)),Et=Math.max(0,Math.min(Mt,Ot*Pt+Ne));var $t=Math.abs(Wt-bt),je=Math.abs(Et-Ne);if(be){var Oe,mt,wt;if(Re){var yt=Ee.selectdirection;switch(yt==="any"?je<Math.min($t*.6,P)?Oe="h":$t<Math.min(je*.6,P)?Oe="v":Oe="d":Oe=yt,Oe){case"h":mt=ze?Mt/2:0,wt=Mt;break;case"v":mt=ze?Zt/2:0,wt=Zt;break}}if(ke)switch(Ee.newshape.drawdirection){case"vertical":Oe="h",mt=ze?Mt/2:0,wt=Mt;break;case"horizontal":Oe="v",mt=ze?Zt/2:0,wt=Zt;break;case"ortho":$t<je?(Oe="h",mt=Ne,wt=Et):(Oe="v",mt=bt,wt=Wt);break;default:Oe="d"}Oe==="h"?(Ve=Je?v(ze,[Wt,mt],[Wt,wt]):[[bt,mt],[bt,wt],[Wt,wt],[Wt,mt]],Ve.xmin=Je?Wt:Math.min(bt,Wt),Ve.xmax=Je?Wt:Math.max(bt,Wt),Ve.ymin=Math.min(mt,wt),Ve.ymax=Math.max(mt,wt),ut.attr("d","M"+Ve.xmin+","+(Ne-P)+"h-4v"+2*P+"h4ZM"+(Ve.xmax-1)+","+(Ne-P)+"h4v"+2*P+"h-4Z")):Oe==="v"?(Ve=Je?v(ze,[mt,Et],[wt,Et]):[[mt,Ne],[mt,Et],[wt,Et],[wt,Ne]],Ve.xmin=Math.min(mt,wt),Ve.xmax=Math.max(mt,wt),Ve.ymin=Je?Et:Math.min(Ne,Et),Ve.ymax=Je?Et:Math.max(Ne,Et),ut.attr("d","M"+(bt-P)+","+Ve.ymin+"v-4h"+2*P+"v4ZM"+(bt-P)+","+(Ve.ymax-1)+"v4h"+2*P+"v-4Z")):Oe==="d"&&(Ve=Je?v(ze,[bt,Ne],[Wt,Et]):[[bt,Ne],[bt,Et],[Wt,Et],[Wt,Ne]],Ve.xmin=Math.min(bt,Wt),Ve.xmax=Math.max(bt,Wt),Ve.ymin=Math.min(Ne,Et),Ve.ymax=Math.max(Ne,Et),ut.attr("d","M0,0Z"))}else de&&(ot.addPt([Wt,Et]),Ve=ot.filtered);fe.selectionDefs&&fe.selectionDefs.length?(Le=ae(fe.mergedPolygons,Ve,ft),Ve.subtract=ft,Te=B(fe.selectionDefs.concat([Ve]))):(Le=[Ve],Te=I(Ve)),p(te(Le,xe),He,fe),Re&&x.throttle(nt,M.SELECTDELAY,function(){Ge=[];var St,kt;for(Qe=0;Qe<at.length;Qe++)if(Me=at[Qe],kt=Me._module.selectPoints(Me,Te),St=ie(kt,Me),Ge.length)for(var Rt=0;Rt<St.length;Rt++)Ge.push(St[Rt]);else Ge=St;Ie={points:Ge},j(qe,at,Ie),lt(Ie,Ve,ot),fe.gd.emit("plotly_selecting",Ie)})},fe.clickFn=function(Ct,Pt){if(ut.remove(),qe._fullLayout._activeShapeIndex>=0){qe._fullLayout._deactivateShape(qe);return}if(!ke){var $t=Ee.clickmode;x.done(nt).then(function(){if(x.clear(nt),Ct===2){for(He.remove(),Qe=0;Qe<at.length;Qe++)Me=at[Qe],Me._module.selectPoints(Me,!1);j(qe,at),V(fe),qe.emit("plotly_deselect",null)}else $t.indexOf("select")>-1&&G(Pt,qe,fe.xaxes,fe.yaxes,fe.subplot,fe,He),$t==="event"&&qe.emit("plotly_selected",void 0);t.click(qe,Pt)}).catch(b.error)}},fe.doneFn=function(){ut.remove(),x.done(nt).then(function(){x.clear(nt),fe.gd.emit("plotly_selected",Ie),Ve&&fe.selectionDefs&&(Ve.subtract=ft,fe.selectionDefs.push(Ve),fe.mergedPolygons.length=0,[].push.apply(fe.mergedPolygons,Le)),fe.doneFnCompleted&&fe.doneFnCompleted(Ge)}).catch(b.error),ke&&V(fe)}}function G(re,ce,pe,fe,se,de,be){var xe=ce._hoverdata,ke=ce._fullLayout,Re=ke.clickmode,Ke=Re.indexOf("event")>-1,ze=[],Je,qe,Ee,Ae,Be,$e,xt,bt,Ne,st;if(q(xe)){H(re,ce,de),Je=Z(ce,pe,fe,se);var _t=J(xe,Je),Ot=_t.pointNumbers.length>0;if(Ot?ve(Je,_t):$(Je)&&(xt=ne(_t))){for(be&&be.remove(),st=0;st<Je.length;st++)qe=Je[st],qe._module.selectPoints(qe,!1);j(ce,Je),V(de),Ke&&ce.emit("plotly_deselect",null)}else{bt=re.shiftKey&&(xt!==void 0?xt:ne(_t)),Ee=U(_t.pointNumber,_t.searchInfo,bt);var Wt=de.selectionDefs.concat([Ee]);for(Ae=B(Wt),st=0;st<Je.length;st++)if(Be=Je[st]._module.selectPoints(Je[st],Ae),$e=ie(Be,Je[st]),ze.length)for(var Et=0;Et<$e.length;Et++)ze.push($e[Et]);else ze=$e;if(Ne={points:ze},j(ce,Je,Ne),Ee&&de&&de.selectionDefs.push(Ee),be){var jt=de.mergedPolygons,Zt=i(de.dragmode);p(te(jt,Zt),be,de)}Ke&&ce.emit("plotly_selected",Ne)}}}function U(re,ce,pe){return{pointNumber:re,searchInfo:ce,subtract:pe}}function Y(re){return"pointNumber"in re&&"searchInfo"in re}function z(re){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ce,pe,fe,se){var de=re.searchInfo.cd[0].trace._expandedIndex,be=se.cd[0].trace._expandedIndex;return be===de&&fe===re.pointNumber},isRect:!1,degenerate:!1,subtract:re.subtract}}function B(re){for(var ce=[],pe=Y(re[0])?0:re[0][0][0],fe=pe,se=Y(re[0])?0:re[0][0][1],de=se,be=0;be<re.length;be++)if(Y(re[be]))ce.push(z(re[be]));else{var xe=y.tester(re[be]);xe.subtract=re[be].subtract,ce.push(xe),pe=Math.min(pe,xe.xmin),fe=Math.max(fe,xe.xmax),se=Math.min(se,xe.ymin),de=Math.max(de,xe.ymax)}function ke(Re,Ke,ze,Je){for(var qe=!1,Ee=0;Ee<ce.length;Ee++)ce[Ee].contains(Re,Ke,ze,Je)&&(qe=ce[Ee].subtract===!1);return qe}return{xmin:pe,xmax:fe,ymin:se,ymax:de,pts:[],contains:ke,isRect:!1,degenerate:!1}}function H(re,ce,pe){ce._fullLayout._drawing=!1;var fe=ce._fullLayout,se=pe.plotinfo,de=pe.dragmode,be=fe._lastSelectedSubplot&&fe._lastSelectedSubplot===se.id,xe=(re.shiftKey||re.altKey)&&!(h(de)&&i(de));be&&xe&&se.selection&&se.selection.selectionDefs&&!pe.selectionDefs?(pe.selectionDefs=se.selection.selectionDefs,pe.mergedPolygons=se.selection.mergedPolygons):(!xe||!se.selection)&&V(pe),be||(C(ce),fe._lastSelectedSubplot=se.id)}function V(re){var ce=re.dragmode,pe=re.plotinfo,fe=re.gd;if(fe._fullLayout._activeShapeIndex>=0&&fe._fullLayout._deactivateShape(fe),h(ce)){var se=fe._fullLayout,de=se._zoomlayer,be=de.selectAll(".select-outline-"+pe.id);if(be&&fe._fullLayout._drawing){var xe=m(be,re);xe&&a.call("_guiRelayout",fe,{shapes:xe}),fe._fullLayout._drawing=!1}}pe.selection={},pe.selection.selectionDefs=re.selectionDefs=[],pe.selection.mergedPolygons=re.mergedPolygons=[]}function Z(re,ce,pe,fe){var se=[],de=ce.map(function(qe){return qe._id}),be=pe.map(function(qe){return qe._id}),xe,ke,Re;for(Re=0;Re<re.calcdata.length;Re++)if(xe=re.calcdata[Re],ke=xe[0].trace,!(ke.visible!==!0||!ke._module||!ke._module.selectPoints))if(fe&&(ke.subplot===fe||ke.geo===fe))se.push(Je(ke._module,xe,ce[0],pe[0]));else if(ke.type==="splom"&&ke._xaxes[de[0]]&&ke._yaxes[be[0]]){var Ke=Je(ke._module,xe,ce[0],pe[0]);Ke.scene=re._fullLayout._splomScenes[ke.uid],se.push(Ke)}else if(ke.type==="sankey"){var ze=Je(ke._module,xe,ce[0],pe[0]);se.push(ze)}else{if(de.indexOf(ke.xaxis)===-1||be.indexOf(ke.yaxis)===-1)continue;se.push(Je(ke._module,xe,w(re,ke.xaxis),w(re,ke.yaxis)))}return se;function Je(qe,Ee,Ae,Be){return{_module:qe,cd:Ee,xaxis:Ae,yaxis:Be}}}function q(re){return re&&Array.isArray(re)&&re[0].hoverOnBox!==!0}function J(re,ce){var pe=re[0],fe=-1,se=[],de,be;for(be=0;be<ce.length;be++)if(de=ce[be],pe.fullData._expandedIndex===de.cd[0].trace._expandedIndex){if(pe.hoverOnBox===!0)break;pe.pointNumber!==void 0?fe=pe.pointNumber:pe.binNumber!==void 0&&(fe=pe.binNumber,se=pe.pointNumbers);break}return{pointNumber:fe,pointNumbers:se,searchInfo:de}}function ne(re){var ce=re.searchInfo.cd[0].trace,pe=re.pointNumber,fe=re.pointNumbers,se=fe.length>0,de=se?fe[0]:pe;return ce.selectedpoints?ce.selectedpoints.indexOf(de)>-1:!1}function ve(re,ce){var pe=[],fe,se,de,be;for(be=0;be<re.length;be++)fe=re[be],fe.cd[0].trace.selectedpoints&&fe.cd[0].trace.selectedpoints.length>0&&pe.push(fe);if(pe.length===1&&(de=pe[0]===ce.searchInfo,de&&(se=ce.searchInfo.cd[0].trace,se.selectedpoints.length===ce.pointNumbers.length))){for(be=0;be<ce.pointNumbers.length;be++)if(se.selectedpoints.indexOf(ce.pointNumbers[be])<0)return!1;return!0}return!1}function $(re){var ce=0,pe,fe,se;for(se=0;se<re.length;se++)if(pe=re[se],fe=pe.cd[0].trace,fe.selectedpoints&&(fe.selectedpoints.length>1||(ce+=fe.selectedpoints.length,ce>1)))return!1;return ce===1}function j(re,ce,pe){var fe,se,de,be;for(fe=0;fe<ce.length;fe++){var xe=ce[fe].cd[0].trace._fullInput,ke=re._fullLayout._tracePreGUI[xe.uid]||{};ke.selectedpoints===void 0&&(ke.selectedpoints=xe._input.selectedpoints||null)}if(pe){var Re=pe.points||[];for(fe=0;fe<ce.length;fe++)be=ce[fe].cd[0].trace,be._input.selectedpoints=be._fullInput.selectedpoints=[],be._fullInput!==be&&(be.selectedpoints=[]);for(fe=0;fe<Re.length;fe++){var Ke=Re[fe],ze=Ke.data,Je=Ke.fullData;Ke.pointIndices?([].push.apply(ze.selectedpoints,Ke.pointIndices),be._fullInput!==be&&[].push.apply(Je.selectedpoints,Ke.pointIndices)):(ze.selectedpoints.push(Ke.pointIndex),be._fullInput!==be&&Je.selectedpoints.push(Ke.pointIndex))}}else for(fe=0;fe<ce.length;fe++)be=ce[fe].cd[0].trace,delete be.selectedpoints,delete be._input.selectedpoints,be._fullInput!==be&&delete be._fullInput.selectedpoints;var qe=!1;for(fe=0;fe<ce.length;fe++){se=ce[fe],de=se.cd,be=de[0].trace,a.traceIs(be,"regl")&&(qe=!0);var Ee=se._module,Ae=Ee.styleOnSelect||Ee.style;Ae&&(Ae(re,de,de[0].node3),de[0].nodeRangePlot3&&Ae(re,de,de[0].nodeRangePlot3))}qe&&(g(re),T(re))}function ae(re,ce,pe){var fe;return pe?(fe=r.difference({regions:re,inverted:!1},{regions:[ce],inverted:!1}),fe.regions):(fe=r.union({regions:re,inverted:!1},{regions:[ce],inverted:!1}),fe.regions)}function ie(re,ce){if(Array.isArray(re))for(var pe=ce.cd,fe=ce.cd[0].trace,se=0;se<re.length;se++)re[se]=f(re[se],fe,pe);return re}function te(re,ce){for(var pe=[],fe=0;fe<re.length;fe++){pe[fe]=[];for(var se=0;se<re[fe].length;se++){pe[fe][se]=[],pe[fe][se][0]=se?"L":"M";for(var de=0;de<re[fe][se].length;de++)pe[fe][se].push(re[fe][se][de])}ce||pe[fe].push(["Z",pe[fe][0][1],pe[fe][0][2]])}return pe}d.exports={prepSelect:N,clearSelect:C,clearSelectionsCache:V,selectOnClick:G}},{"../../components/color":643,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/fx/helpers":679,"../../components/shapes/draw_newshape/display_outlines":728,"../../components/shapes/draw_newshape/helpers":729,"../../components/shapes/draw_newshape/newshapes":730,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/polygon":790,"../../lib/throttle":804,"../../plot_api/subroutines":818,"../../registry":911,"./axis_ids":831,"./constants":834,"./handle_outline":838,"./helpers":839,polybooljs:517}],848:[function(e,d,S){var r=e("d3"),a=e("d3-time-format").utcFormat,u=e("fast-isnumeric"),c=e("../../lib"),t=c.cleanNumber,f=c.ms2DateTime,n=c.dateTime2ms,o=c.ensureNumber,l=c.isArrayOrTypedArray,h=e("../../constants/numerical"),i=h.FP_SAFE,s=h.BADNUM,p=h.LOG_CLIP,v=h.ONEWEEK,m=h.ONEDAY,b=h.ONEHOUR,y=h.ONEMIN,x=h.ONESEC,w=e("./axis_ids"),g=e("./constants"),T=g.HOUR_PATTERN,M=g.WEEKDAY_PATTERN;function P(I){return Math.pow(10,I)}function L(I){return I!=null}d.exports=function(C,k){k=k||{};var E=C._id||"x",R=E.charAt(0);function O(j,ae){if(j>0)return Math.log(j)/Math.LN10;if(j<=0&&ae&&C.range&&C.range.length===2){var ie=C.range[0],te=C.range[1];return .5*(ie+te-2*p*Math.abs(ie-te))}else return s}function N(j,ae,ie,te){if((te||{}).msUTC&&u(j))return+j;var re=n(j,ie||C.calendar);if(re===s)if(u(j)){j=+j;var ce=Math.floor(c.mod(j+.05,1)*10),pe=Math.round(j-ce/10);re=n(new Date(pe))+ce/10}else return s;return re}function G(j,ae,ie){return f(j,ae,ie||C.calendar)}function U(j){return C._categories[Math.round(j)]}function Y(j){if(L(j)){if(C._categoriesMap===void 0&&(C._categoriesMap={}),C._categoriesMap[j]!==void 0)return C._categoriesMap[j];C._categories.push(typeof j=="number"?String(j):j);var ae=C._categories.length-1;return C._categoriesMap[j]=ae,ae}return s}function z(j,ae){for(var ie=new Array(ae),te=0;te<ae;te++){var re=(j[0]||[])[te],ce=(j[1]||[])[te];ie[te]=B([re,ce])}return ie}function B(j){if(C._categoriesMap)return C._categoriesMap[j]}function H(j){var ae=B(j);if(ae!==void 0)return ae;if(u(j))return+j}function V(j){return u(j)?+j:B(j)}function Z(j,ae,ie){return r.round(ie+ae*j,2)}function q(j,ae,ie){return(j-ie)/ae}var J=function(ae){return u(ae)?Z(ae,C._m,C._b):s},ne=function(j){return q(j,C._m,C._b)};if(C.rangebreaks){var ve=R==="y";J=function(j){if(!u(j))return s;var ae=C._rangebreaks.length;if(!ae)return Z(j,C._m,C._b);var ie=ve;C.range[0]>C.range[1]&&(ie=!ie);for(var te=ie?-1:1,re=te*j,ce=0,pe=0;pe<ae;pe++){var fe=te*C._rangebreaks[pe].min,se=te*C._rangebreaks[pe].max;if(re<fe)break;if(re>se)ce=pe+1;else{ce=re<(fe+se)/2?pe:pe+1;break}}var de=C._B[ce]||0;return isFinite(de)?Z(j,C._m2,de):0},ne=function(j){var ae=C._rangebreaks.length;if(!ae)return q(j,C._m,C._b);for(var ie=0,te=0;te<ae&&!(j<C._rangebreaks[te].pmin);te++)j>C._rangebreaks[te].pmax&&(ie=te+1);return q(j,C._m2,C._B[ie])}}C.c2l=C.type==="log"?O:o,C.l2c=C.type==="log"?P:o,C.l2p=J,C.p2l=ne,C.c2p=C.type==="log"?function(j,ae){return J(O(j,ae))}:J,C.p2c=C.type==="log"?function(j){return P(ne(j))}:ne,["linear","-"].indexOf(C.type)!==-1?(C.d2r=C.r2d=C.d2c=C.r2c=C.d2l=C.r2l=t,C.c2d=C.c2r=C.l2d=C.l2r=o,C.d2p=C.r2p=function(j){return C.l2p(t(j))},C.p2d=C.p2r=ne,C.cleanPos=o):C.type==="log"?(C.d2r=C.d2l=function(j,ae){return O(t(j),ae)},C.r2d=C.r2c=function(j){return P(t(j))},C.d2c=C.r2l=t,C.c2d=C.l2r=o,C.c2r=O,C.l2d=P,C.d2p=function(j,ae){return C.l2p(C.d2r(j,ae))},C.p2d=function(j){return P(ne(j))},C.r2p=function(j){return C.l2p(t(j))},C.p2r=ne,C.cleanPos=o):C.type==="date"?(C.d2r=C.r2d=c.identity,C.d2c=C.r2c=C.d2l=C.r2l=N,C.c2d=C.c2r=C.l2d=C.l2r=G,C.d2p=C.r2p=function(j,ae,ie){return C.l2p(N(j,0,ie))},C.p2d=C.p2r=function(j,ae,ie){return G(ne(j),ae,ie)},C.cleanPos=function(j){return c.cleanDate(j,s,C.calendar)}):C.type==="category"?(C.d2c=C.d2l=Y,C.r2d=C.c2d=C.l2d=U,C.d2r=C.d2l_noadd=H,C.r2c=function(j){var ae=V(j);return ae!==void 0?ae:C.fraction2r(.5)},C.l2r=C.c2r=o,C.r2l=V,C.d2p=function(j){return C.l2p(C.r2c(j))},C.p2d=function(j){return U(ne(j))},C.r2p=C.d2p,C.p2r=ne,C.cleanPos=function(j){return typeof j=="string"&&j!==""?j:o(j)}):C.type==="multicategory"&&(C.r2d=C.c2d=C.l2d=U,C.d2r=C.d2l_noadd=H,C.r2c=function(j){var ae=H(j);return ae!==void 0?ae:C.fraction2r(.5)},C.r2c_just_indices=B,C.l2r=C.c2r=o,C.r2l=H,C.d2p=function(j){return C.l2p(C.r2c(j))},C.p2d=function(j){return U(ne(j))},C.r2p=C.d2p,C.p2r=ne,C.cleanPos=function(j){return Array.isArray(j)||typeof j=="string"&&j!==""?j:o(j)},C.setupMultiCategory=function(j){var ae=C._traceIndices,ie,te,re=C._matchGroup;if(re&&C._categories.length===0){for(var ce in re)if(ce!==E){var pe=k[w.id2name(ce)];ae=ae.concat(pe._traceIndices)}}var fe=[[0,{}],[0,{}]],se=[];for(ie=0;ie<ae.length;ie++){var de=j[ae[ie]];if(R in de){var be=de[R],xe=de._length||c.minRowLength(be);if(l(be[0])&&l(be[1]))for(te=0;te<xe;te++){var ke=be[0][te],Re=be[1][te];L(ke)&&L(Re)&&(se.push([ke,Re]),ke in fe[0][1]||(fe[0][1][ke]=fe[0][0]++),Re in fe[1][1]||(fe[1][1][Re]=fe[1][0]++))}}}for(se.sort(function(Ke,ze){var Je=fe[0][1],qe=Je[Ke[0]]-Je[ze[0]];if(qe)return qe;var Ee=fe[1][1];return Ee[Ke[1]]-Ee[ze[1]]}),ie=0;ie<se.length;ie++)Y(se[ie])}),C.fraction2r=function(j){var ae=C.r2l(C.range[0]),ie=C.r2l(C.range[1]);return C.l2r(ae+j*(ie-ae))},C.r2fraction=function(j){var ae=C.r2l(C.range[0]),ie=C.r2l(C.range[1]);return(C.r2l(j)-ae)/(ie-ae)},C.cleanRange=function(j,ae){ae||(ae={}),j||(j="range");var ie=c.nestedProperty(C,j).get(),te,re;if(C.type==="date"?re=c.dfltRange(C.calendar):R==="y"?re=g.DFLTRANGEY:re=ae.dfltRange||g.DFLTRANGEX,re=re.slice(),(C.rangemode==="tozero"||C.rangemode==="nonnegative")&&(re[0]=0),!ie||ie.length!==2){c.nestedProperty(C,j).set(re);return}for(C.type==="date"&&!C.autorange&&(ie[0]=c.cleanDate(ie[0],s,C.calendar),ie[1]=c.cleanDate(ie[1],s,C.calendar)),te=0;te<2;te++)if(C.type==="date"){if(!c.isDateTime(ie[te],C.calendar)){C[j]=re;break}if(C.r2l(ie[0])===C.r2l(ie[1])){var ce=c.constrain(C.r2l(ie[0]),c.MIN_MS+1e3,c.MAX_MS-1e3);ie[0]=C.l2r(ce-1e3),ie[1]=C.l2r(ce+1e3);break}}else{if(!u(ie[te]))if(u(ie[1-te]))ie[te]=ie[1-te]*(te?10:.1);else{C[j]=re;break}if(ie[te]<-i?ie[te]=-i:ie[te]>i&&(ie[te]=i),ie[0]===ie[1]){var pe=Math.max(1,Math.abs(ie[0]*1e-6));ie[0]-=pe,ie[1]+=pe}}},C.setScale=function(j){var ae=k._size;if(C.overlaying){var ie=w.getFromId({_fullLayout:k},C.overlaying);C.domain=ie.domain}var te=j&&C._r?"_r":"range",re=C.calendar;C.cleanRange(te);var ce=C.r2l(C[te][0],re),pe=C.r2l(C[te][1],re),fe=R==="y";if(fe?(C._offset=ae.t+(1-C.domain[1])*ae.h,C._length=ae.h*(C.domain[1]-C.domain[0]),C._m=C._length/(ce-pe),C._b=-C._m*pe):(C._offset=ae.l+C.domain[0]*ae.w,C._length=ae.w*(C.domain[1]-C.domain[0]),C._m=C._length/(pe-ce),C._b=-C._m*ce),C._rangebreaks=[],C._lBreaks=0,C._m2=0,C._B=[],C.rangebreaks){var se,de;if(C._rangebreaks=C.locateBreaks(Math.min(ce,pe),Math.max(ce,pe)),C._rangebreaks.length){for(se=0;se<C._rangebreaks.length;se++)de=C._rangebreaks[se],C._lBreaks+=Math.abs(de.max-de.min);var be=fe;ce>pe&&(be=!be),be&&C._rangebreaks.reverse();var xe=be?-1:1;for(C._m2=xe*C._length/(Math.abs(pe-ce)-C._lBreaks),C._B.push(-C._m2*(fe?pe:ce)),se=0;se<C._rangebreaks.length;se++)de=C._rangebreaks[se],C._B.push(C._B[C._B.length-1]-xe*C._m2*(de.max-de.min));for(se=0;se<C._rangebreaks.length;se++)de=C._rangebreaks[se],de.pmin=J(de.min),de.pmax=J(de.max)}}if(!isFinite(C._m)||!isFinite(C._b)||C._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},C.maskBreaks=function(j){for(var ae=C.rangebreaks||[],ie,te,re,ce,pe,fe=0;fe<ae.length;fe++){var se=ae[fe];if(se.enabled){if(se.bounds){var de=se.pattern;switch(ie=c.simpleMap(se.bounds,de?t:C.d2c),te=ie[0],re=ie[1],de){case M:pe=new Date(j),ce=pe.getUTCDay(),te>re&&(re+=7,ce<te&&(ce+=7));break;case T:pe=new Date(j);var be=pe.getUTCHours(),xe=pe.getUTCMinutes(),ke=pe.getUTCSeconds(),Re=pe.getUTCMilliseconds();ce=be+(xe/60+ke/3600+Re/36e5),te>re&&(re+=24,ce<te&&(ce+=24));break;case"":ce=j;break}if(ce>=te&&ce<re)return s}else for(var Ke=c.simpleMap(se.values,C.d2c).sort(c.sorterAsc),ze=0;ze<Ke.length;ze++)if(te=Ke[ze],re=te+se.dvalue,j>=te&&j<re)return s}}return j},C.locateBreaks=function(j,ae){var ie,te,re,ce,pe=[];if(!C.rangebreaks)return pe;var fe=C.rangebreaks.slice().sort(function(Ee,Ae){return Ee.pattern===M&&Ae.pattern===T?-1:Ae.pattern===M&&Ee.pattern===T?1:0}),se=function(Ee,Ae){if(Ee=c.constrain(Ee,j,ae),Ae=c.constrain(Ae,j,ae),Ee!==Ae){for(var Be=!0,$e=0;$e<pe.length;$e++){var xt=pe[$e];Ee<xt.max&&Ae>=xt.min&&(Ee<xt.min&&(xt.min=Ee),Ae>xt.max&&(xt.max=Ae),Be=!1)}Be&&pe.push({min:Ee,max:Ae})}};for(ie=0;ie<fe.length;ie++){var de=fe[ie];if(de.enabled)if(de.bounds){var be=j,xe=ae;de.pattern&&(be=Math.floor(be)),te=c.simpleMap(de.bounds,de.pattern?t:C.r2l),re=te[0],ce=te[1];var ke=new Date(be),Re,Ke;switch(de.pattern){case M:Ke=v,Re=((ce<re?7:0)+(ce-re))*m,be+=re*m-(ke.getUTCDay()*m+ke.getUTCHours()*b+ke.getUTCMinutes()*y+ke.getUTCSeconds()*x+ke.getUTCMilliseconds());break;case T:Ke=m,Re=((ce<re?24:0)+(ce-re))*b,be+=re*b-(ke.getUTCHours()*b+ke.getUTCMinutes()*y+ke.getUTCSeconds()*x+ke.getUTCMilliseconds());break;default:be=Math.min(te[0],te[1]),xe=Math.max(te[0],te[1]),Ke=xe-be,Re=Ke}for(var ze=be;ze<xe;ze+=Ke)se(ze,ze+Re)}else for(var Je=c.simpleMap(de.values,C.d2c),qe=0;qe<Je.length;qe++)re=Je[qe],ce=re+de.dvalue,se(re,ce)}return pe.sort(function(Ee,Ae){return Ee.min-Ae.min}),pe},C.makeCalcdata=function(j,ae,ie){var te,re,ce,pe,fe=C.type,se=fe==="date"&&j[ae+"calendar"];if(ae in j){if(te=j[ae],pe=j._length||c.minRowLength(te),c.isTypedArray(te)&&(fe==="linear"||fe==="log")){if(pe===te.length)return te;if(te.subarray)return te.subarray(0,pe)}if(fe==="multicategory")return z(te,pe);for(re=new Array(pe),ce=0;ce<pe;ce++)re[ce]=C.d2c(te[ce],0,se,ie)}else{var de=ae+"0"in j?C.d2c(j[ae+"0"],0,se):0,be=j["d"+ae]?Number(j["d"+ae]):1;for(te=j[{x:"y",y:"x"}[ae]],pe=j._length||te.length,re=new Array(pe),ce=0;ce<pe;ce++)re[ce]=de+ce*be}if(C.rangebreaks)for(ce=0;ce<pe;ce++)re[ce]=C.maskBreaks(re[ce]);return re},C.isValidRange=function(j){return Array.isArray(j)&&j.length===2&&u(C.r2l(j[0]))&&u(C.r2l(j[1]))},C.isPtWithinRange=function(j,ae){var ie=C.c2l(j[R],null,ae),te=C.r2l(C.range[0]),re=C.r2l(C.range[1]);return te<re?te<=ie&&ie<=re:re<=ie&&ie<=te},C._emptyCategories=function(){C._categories=[],C._categoriesMap={}},C.clearCalc=function(){var j=C._matchGroup;if(j){var ae=null,ie=null;for(var te in j){var re=k[w.id2name(te)];if(re._categories){ae=re._categories,ie=re._categoriesMap;break}}ae&&ie?(C._categories=ae,C._categoriesMap=ie):C._emptyCategories()}else C._emptyCategories();if(C._initialCategories)for(var ce=0;ce<C._initialCategories.length;ce++)Y(C._initialCategories[ce])},C.sortByInitialCategories=function(){var j=[];if(C._emptyCategories(),C._initialCategories)for(var ae=0;ae<C._initialCategories.length;ae++)Y(C._initialCategories[ae]);j=j.concat(C._traceIndices);var ie=C._matchGroup;for(var te in ie)if(E!==te){var re=k[w.id2name(te)];re._categories=C._categories,re._categoriesMap=C._categoriesMap,j=j.concat(re._traceIndices)}return j};var $=k._d3locale;C.type==="date"&&(C._dateFormat=$?$.timeFormat:a,C._extraFormat=k._extraFormat),C._separators=k.separators,C._numFormat=$?$.numberFormat:r.format,delete C._minDtick,delete C._forceTick0}},{"../../constants/numerical":753,"../../lib":778,"./axis_ids":831,"./constants":834,d3:169,"d3-time-format":166,"fast-isnumeric":241}],849:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color").contrast,u=e("./layout_attributes"),c=e("../array_container_defaults");d.exports=function(h,i,s,p,v,m){(!m||m.pass===1)&&t(h,i,s,p,v),(!m||m.pass===2)&&f(h,i,s,p,v)};function t(l,h,i,s,p){var v=n(l),m=i("tickprefix");m&&i("showtickprefix",v);var b=i("ticksuffix",p.tickSuffixDflt);b&&i("showticksuffix",v)}function f(l,h,i,s,p){var v=n(l),m=i("tickprefix");m&&i("showtickprefix",v);var b=i("ticksuffix",p.tickSuffixDflt);b&&i("showticksuffix",v);var y=i("showticklabels");if(y){var x=p.font||{},w=h.color,g=h.ticklabelposition||"",T=g.indexOf("inside")!==-1?a(p.bgColor):w&&w!==u.color.dflt?w:x.color;if(r.coerceFont(i,"tickfont",{family:x.family,size:x.size,color:T}),i("tickangle"),s!=="category"){var M=i("tickformat");c(l,h,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),h.tickformatstops.length||delete h.tickformatstops,!M&&s!=="date"&&(i("showexponent",v),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}function n(l){var h=["showexponent","showtickprefix","showticksuffix"],i=h.filter(function(p){return l[p]!==void 0}),s=function(p){return l[p]===l[i[0]]};if(i.every(s)||i.length===1)return l[i[0]]}function o(l,h){function i(p,v){return r.coerce(l,h,u.tickformatstops,p,v)}var s=i("enabled");s&&(i("dtickrange"),i("value"))}},{"../../components/color":643,"../../lib":778,"../array_container_defaults":823,"./layout_attributes":842}],850:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(c,t,f,n){var o=r.coerce2(c,t,a,"ticklen"),l=r.coerce2(c,t,a,"tickwidth"),h=r.coerce2(c,t,a,"tickcolor",t.color),i=f("ticks",n.outerTicks||o||l||h?"outside":"");i||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":778,"./layout_attributes":842}],851:[function(e,d,S){var r=e("./clean_ticks"),a=e("../../lib").isArrayOrTypedArray;d.exports=function(c,t,f,n){function o(b){var y=c[b];return y!==void 0?y:(t._template||{})[b]}var l=o("tick0"),h=o("dtick"),i=o("tickvals"),s=a(i)?"array":h?"linear":"auto",p=f("tickmode",s);if(p==="auto")f("nticks");else if(p==="linear"){var v=t.dtick=r.dtick(h,n);t.tick0=r.tick0(l,n,t.calendar,v)}else if(n!=="multicategory"){var m=f("tickvals");m===void 0?t.tickmode="auto":f("ticktext")}}},{"../../lib":778,"./clean_ticks":833}],852:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=e("../../components/drawing"),t=e("./axes");d.exports=function(n,o,l,h){var i=n._fullLayout;if(o.length===0){t.redrawComponents(n);return}function s(M){var P=M.xaxis,L=M.yaxis;i._defs.select("#"+M.clipId+"> rect").call(c.setTranslate,0,0).call(c.setScale,1,1),M.plot.call(c.setTranslate,P._offset,L._offset).call(c.setScale,1,1);var I=M.plot.selectAll(".scatterlayer .trace");I.selectAll(".point").call(c.setPointGroupScale,1,1),I.selectAll(".textpoint").call(c.setTextPointsScale,1,1),I.call(c.hideOutsideRangePoints,M)}function p(M,P){var L=M.plotinfo,I=L.xaxis,C=L.yaxis,k=I._length,E=C._length,R=!!M.xr1,O=!!M.yr1,N=[];if(R){var G=u.simpleMap(M.xr0,I.r2l),U=u.simpleMap(M.xr1,I.r2l),Y=G[1]-G[0],z=U[1]-U[0];N[0]=(G[0]*(1-P)+P*U[0]-G[0])/(G[1]-G[0])*k,N[2]=k*(1-P+P*z/Y),I.range[0]=I.l2r(G[0]*(1-P)+P*U[0]),I.range[1]=I.l2r(G[1]*(1-P)+P*U[1])}else N[0]=0,N[2]=k;if(O){var B=u.simpleMap(M.yr0,C.r2l),H=u.simpleMap(M.yr1,C.r2l),V=B[1]-B[0],Z=H[1]-H[0];N[1]=(B[1]*(1-P)+P*H[1]-B[1])/(B[0]-B[1])*E,N[3]=E*(1-P+P*Z/V),C.range[0]=I.l2r(B[0]*(1-P)+P*H[0]),C.range[1]=C.l2r(B[1]*(1-P)+P*H[1])}else N[1]=0,N[3]=E;t.drawOne(n,I,{skipTitle:!0}),t.drawOne(n,C,{skipTitle:!0}),t.redrawComponents(n,[I._id,C._id]);var q=R?k/N[2]:1,J=O?E/N[3]:1,ne=R?N[0]:0,ve=O?N[1]:0,$=R?N[0]/N[2]*k:0,j=O?N[1]/N[3]*E:0,ae=I._offset-$,ie=C._offset-j;L.clipRect.call(c.setTranslate,ne,ve).call(c.setScale,1/q,1/J),L.plot.call(c.setTranslate,ae,ie).call(c.setScale,q,J),c.setPointGroupScale(L.zoomScalePts,1/q,1/J),c.setTextPointsScale(L.zoomScaleTxt,1/q,1/J)}var v;h&&(v=h());function m(){for(var M={},P=0;P<o.length;P++){var L=o[P],I=L.plotinfo.xaxis,C=L.plotinfo.yaxis;L.xr1&&(M[I._name+".range"]=L.xr1.slice()),L.yr1&&(M[C._name+".range"]=L.yr1.slice())}return v&&v(),a.call("relayout",n,M).then(function(){for(var k=0;k<o.length;k++)s(o[k].plotinfo)})}function b(){for(var M={},P=0;P<o.length;P++){var L=o[P],I=L.plotinfo.xaxis,C=L.plotinfo.yaxis;L.xr0&&(M[I._name+".range"]=L.xr0.slice()),L.yr0&&(M[C._name+".range"]=L.yr0.slice())}return a.call("relayout",n,M).then(function(){for(var k=0;k<o.length;k++)s(o[k].plotinfo)})}var y,x,w,g=r.ease(l.easing);n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(w),w=null,b()});function T(){x=Date.now();for(var M=Math.min(1,(x-y)/l.duration),P=g(M),L=0;L<o.length;L++)p(o[L],P);x-y>l.duration?(m(),w=window.cancelAnimationFrame(T)):w=window.requestAnimationFrame(T)}return y=Date.now(),w=window.requestAnimationFrame(T),Promise.resolve()}},{"../../components/drawing":665,"../../lib":778,"../../registry":911,"./axes":828,d3:169}],853:[function(e,d,S){var r=e("../../registry").traceIs,a=e("./axis_autotype");d.exports=function(o,l,h,i){h("autotypenumbers",i.autotypenumbersDflt);var s=h("type",(i.splomStash||{}).type);s==="-"&&(u(l,i.data),l.type==="-"?l.type="linear":o.type=l.type)};function u(n,o){if(n.type==="-"){var l=n._id,h=l.charAt(0),i;l.indexOf("scene")!==-1&&(l=h);var s=c(o,l,h);if(!!s){if(s.type==="histogram"&&h==={v:"y",h:"x"}[s.orientation||"v"]){n.type="linear";return}var p=h+"calendar",v=s[p],m={noMultiCategory:!r(s,"cartesian")||r(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&h==={h:"x",v:"y"}[s.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=n.autotypenumbers,f(s,h)){var b=t(s),y=[];for(i=0;i<o.length;i++){var x=o[i];!r(x,"box-violin")||(x[h+"axis"]||h)!==l||(x[b]!==void 0?y.push(x[b][0]):x.name!==void 0?y.push(x.name):y.push("text"),x[p]!==v&&(v=void 0))}n.type=a(y,v,m)}else if(s.type==="splom"){var w=s.dimensions,g=w[s._axesDim[l]];g.visible&&(n.type=a(g.values,v,m))}else n.type=a(s[h]||[s[h+"0"]],v,m)}}}function c(n,o,l){for(var h=0;h<n.length;h++){var i=n[h];if(i.type==="splom"&&i._length>0&&(i["_"+l+"axes"]||{})[o])return i;if((i[l+"axis"]||l)===o){if(f(i,l))return i;if((i[l]||[]).length||i[l+"0"])return i}}}function t(n){return{v:"x",h:"y"}[n.orientation||"v"]}function f(n,o){var l=t(n),h=r(n,"box-violin"),i=r(n._fullInput||{},"candlestick");return h&&!i&&o===l&&n[l]===void 0&&n[l+"0"]===void 0}},{"../../registry":911,"./axis_autotype":829}],854:[function(e,d,S){var r=e("../registry"),a=e("../lib");S.manageCommandObserver=function(o,l,h,i){var s={},p=!0;l&&l._commandObserver&&(s=l._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var v=S.hasSimpleAPICommandBindings(o,h,s.lookupTable);if(l&&l._commandObserver){if(v)return s;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,s}if(v){u(o,v,s.cache),s.check=function(){if(!!p){var x=u(o,v,s.cache);return x.changed&&i&&s.lookupTable[x.value]!==void 0&&(s.disable(),Promise.resolve(i({value:x.value,type:v.type,prop:v.prop,traces:v.traces,index:s.lookupTable[x.value]})).then(s.enable,s.enable)),x.changed}};for(var m=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],b=0;b<m.length;b++)o._internalOn(m[b],s.check);s.remove=function(){for(var y=0;y<m.length;y++)o._removeInternalListener(m[y],s.check)}}else a.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){p=!1},s.enable=function(){p=!0},l&&(l._commandObserver=s),s},S.hasSimpleAPICommandBindings=function(o,l,h){var i,s=l.length,p;for(i=0;i<s;i++){var v,m=l[i],b=m.method,y=m.args;if(Array.isArray(y)||(y=[]),!b)return!1;var x=S.computeAPICommandBindings(o,b,y);if(x.length!==1)return!1;if(!p)p=x[0],Array.isArray(p.traces)&&p.traces.sort();else{if(v=x[0],v.type!==p.type||v.prop!==p.prop)return!1;if(Array.isArray(p.traces))if(Array.isArray(v.traces)){v.traces.sort();for(var w=0;w<p.traces.length;w++)if(p.traces[w]!==v.traces[w])return!1}else return!1;else if(v.prop!==p.prop)return!1}v=x[0];var g=v.value;if(Array.isArray(g))if(g.length===1)g=g[0];else return!1;h&&(h[g]=i)}return p};function u(o,l,h){var i,s,p,v=!1;if(l.type==="data")i=o._fullData[l.traces!==null?l.traces[0]:0];else if(l.type==="layout")i=o._fullLayout;else return!1;return s=a.nestedProperty(i,l.prop).get(),p=h[l.type]=h[l.type]||{},p.hasOwnProperty(l.prop)&&p[l.prop]!==s&&(v=!0),p[l.prop]=s,{changed:v,value:s}}S.executeAPICommand=function(o,l,h){if(l==="skip")return Promise.resolve();var i=r.apiMethodRegistry[l],s=[o];Array.isArray(h)||(h=[]);for(var p=0;p<h.length;p++)s.push(h[p]);return i.apply(null,s).catch(function(v){return a.warn("API call to Plotly."+l+" rejected.",v),Promise.reject(v)})},S.computeAPICommandBindings=function(o,l,h){var i;switch(Array.isArray(h)||(h=[]),l){case"restyle":i=f(o,h);break;case"relayout":i=t(o,h);break;case"update":i=f(o,[h[0],h[2]]).concat(t(o,[h[1]]));break;case"animate":i=c(o,h);break;default:i=[]}return i};function c(o,l){return Array.isArray(l[0])&&l[0].length===1&&["string","number"].indexOf(typeof l[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:l[0][0].toString()}]:[]}function t(o,l){var h=[],i=l[0],s={};if(typeof i=="string")s[i]=l[1];else if(a.isPlainObject(i))s=i;else return h;return n(s,function(p,v,m){h.push({type:"layout",prop:p,value:m})},"",0),h}function f(o,l){var h,i,s,p,v=[];if(i=l[0],s=l[1],h=l[2],p={},typeof i=="string")p[i]=s;else if(a.isPlainObject(i))p=i,h===void 0&&(h=s);else return v;return h===void 0&&(h=null),n(p,function(m,b,y){var x,w;if(Array.isArray(y)){w=y.slice();var g=Math.min(w.length,o.data.length);h&&(g=Math.min(g,h.length)),x=[];for(var T=0;T<g;T++)x[T]=h?h[T]:T}else w=y,x=h?h.slice():null;if(x===null)Array.isArray(w)&&(w=w[0]);else if(Array.isArray(x)){if(!Array.isArray(w)){var M=w;w=[];for(var P=0;P<x.length;P++)w[P]=M}w.length=Math.min(x.length,w.length)}v.push({type:"data",prop:m,traces:x,value:w})},"",0),v}function n(o,l,h,i){Object.keys(o).forEach(function(s){var p=o[s];if(s[0]!=="_"){var v=h+(i>0?".":"")+s;a.isPlainObject(p)?n(p,l,v,i+1):l(v,s,p)}})}},{"../lib":778,"../registry":911}],855:[function(e,d,S){var r=e("../lib/extend").extendFlat;S.attributes=function(a,u){a=a||{},u=u||{};var c={valType:"info_array",editType:a.editType,items:[{valType:"number",min:0,max:1,editType:a.editType},{valType:"number",min:0,max:1,editType:a.editType}],dflt:[0,1]};a.name&&a.name+"",a.trace,u.description&&""+u.description;var t={x:r({},c,{}),y:r({},c,{}),editType:a.editType};return a.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:a.editType},t.column={valType:"integer",min:0,dflt:0,editType:a.editType}),t},S.defaults=function(a,u,c,t){var f=t&&t.x||[0,1],n=t&&t.y||[0,1],o=u.grid;if(o){var l=c("domain.column");l!==void 0&&(l<o.columns?f=o._domains.x[l]:delete a.domain.column);var h=c("domain.row");h!==void 0&&(h<o.rows?n=o._domains.y[h]:delete a.domain.row)}var i=c("domain.x",f),s=c("domain.y",n);i[0]<i[1]||(a.domain.x=f.slice()),s[0]<s[1]||(a.domain.y=n.slice())}},{"../lib/extend":768}],856:[function(e,d,S){d.exports=function(r){var a=r.editType,u=r.colorEditType;u===void 0&&(u=a);var c={family:{valType:"string",noBlank:!0,strict:!0,editType:a},size:{valType:"number",min:1,editType:a},color:{valType:"color",editType:u},editType:a};return r.arrayOk&&(c.family.arrayOk=!0,c.size.arrayOk=!0,c.color.arrayOk=!0),c}},{}],857:[function(e,d,S){d.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],858:[function(e,d,S){S.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},S.axesNames=["lonaxis","lataxis"],S.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},S.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},S.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},S.clipPad=.001,S.precision=.1,S.landColor="#F0DC82",S.waterColor="#3399FF",S.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},S.sphereSVG={type:"Sphere"},S.fillLayers={ocean:1,land:1,lakes:1},S.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},S.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],S.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],S.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],859:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=u.strTranslate,t=e("../../components/color"),f=e("../../components/drawing"),n=e("../../components/fx"),o=e("../plots"),l=e("../cartesian/axes"),h=e("../cartesian/autorange").getAutoRange,i=e("../../components/dragelement"),s=e("../cartesian/select").prepSelect,p=e("../cartesian/select").clearSelect,v=e("../cartesian/select").selectOnClick,m=e("./zoom"),b=e("./constants"),y=e("../../lib/geo_location_utils"),x=e("../../lib/topojson_utils"),w=e("topojson-client").feature;e("./projections")(r);function g(I){this.id=I.id,this.graphDiv=I.graphDiv,this.container=I.container,this.topojsonURL=I.topojsonURL,this.isStatic=I.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var T=g.prototype;d.exports=function(C){return new g(C)},T.plot=function(I,C,k){var E=this,R=C[this.id],O=[],N=!1;for(var G in b.layerNameToAdjective)if(G!=="frame"&&R["show"+G]){N=!0;break}for(var U=0;U<I.length;U++)if(I[0][0].trace.locationmode){N=!0;break}if(N){var Y=x.getTopojsonName(R);(E.topojson===null||Y!==E.topojsonName)&&(E.topojsonName=Y,PlotlyGeoAssets.topojson[E.topojsonName]===void 0&&O.push(E.fetchTopojson()))}O=O.concat(y.fetchTraceGeoData(I)),k.push(new Promise(function(z,B){Promise.all(O).then(function(){E.topojson=PlotlyGeoAssets.topojson[E.topojsonName],E.update(I,C),z()}).catch(B)}))},T.fetchTopojson=function(){var I=this,C=x.getTopojsonPath(I.topojsonURL,I.topojsonName);return new Promise(function(k,E){r.json(C,function(R,O){if(R)return R.status===404?E(new Error(["plotly.js could not find topojson file at",C,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):E(new Error(["unexpected error while fetching topojson file at",C].join(" ")));PlotlyGeoAssets.topojson[I.topojsonName]=O,k()})})},T.update=function(I,C){var k=C[this.id];this.hasChoropleth=!1;for(var E=0;E<I.length;E++){var R=I[E],O=R[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(R,C)}var N=this.updateProjection(I,C);if(!N){(!this.viewInitial||this.scope!==k.scope)&&this.saveViewInitial(k),this.scope=k.scope,this.updateBaseLayers(C,k),this.updateDims(C,k),this.updateFx(C,k),o.generalUpdatePerTraceModule(this.graphDiv,this,I,k);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var U=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=U.selectAll("path"),this.render()}},T.updateProjection=function(I,C){var k=this.graphDiv,E=C[this.id],R=C._size,O=E.domain,N=E.projection,G=E.lonaxis,U=E.lataxis,Y=G._ax,z=U._ax,B=this.projection=M(E),H=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],V=E.center||{},Z=N.rotation||{},q=G.range||[],J=U.range||[];if(E.fitbounds){Y._length=H[1][0]-H[0][0],z._length=H[1][1]-H[0][1],Y.range=h(k,Y),z.range=h(k,z);var ne=(Y.range[0]+Y.range[1])/2,ve=(z.range[0]+z.range[1])/2;if(E._isScoped)V={lon:ne,lat:ve};else if(E._isClipped){V={lon:ne,lat:ve},Z={lon:ne,lat:ve,roll:Z.roll};var $=N.type,j=b.lonaxisSpan[$]/2||180,ae=b.lataxisSpan[$]/2||90;q=[ne-j,ne+j],J=[ve-ae,ve+ae]}else V={lon:ne,lat:ve},Z={lon:ne,lat:Z.lat,roll:Z.roll}}B.center([V.lon-Z.lon,V.lat-Z.lat]).rotate([-Z.lon,-Z.lat,Z.roll]).parallels(N.parallels);var ie=L(q,J);B.fitExtent(H,ie);var te=this.bounds=B.getBounds(ie),re=this.fitScale=B.scale(),ce=B.translate();if(!isFinite(te[0][0])||!isFinite(te[0][1])||!isFinite(te[1][0])||!isFinite(te[1][1])||isNaN(ce[0])||isNaN(ce[0])){for(var pe=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"],fe="Invalid geo settings, relayout'ing to default view.",se={},de=0;de<pe.length;de++)se[this.id+"."+pe[de]]=null;return this.viewInitial=null,u.warn(fe),k._promises.push(a.call("relayout",k,se)),fe}if(E.fitbounds){var be=B.getBounds(L(Y.range,z.range)),xe=Math.min((te[1][0]-te[0][0])/(be[1][0]-be[0][0]),(te[1][1]-te[0][1])/(be[1][1]-be[0][1]));isFinite(xe)?B.scale(xe*re):u.warn("Something went wrong during"+this.id+"fitbounds computations.")}else B.scale(N.scale*re);var ke=this.midPt=[(te[0][0]+te[1][0])/2,(te[0][1]+te[1][1])/2];if(B.translate([ce[0]+(ke[0]-ce[0]),ce[1]+(ke[1]-ce[1])]).clipExtent(te),E._isAlbersUsa){var Re=B([V.lon,V.lat]),Ke=B.translate();B.translate([Ke[0]-(Re[0]-Ke[0]),Ke[1]-(Re[1]-Ke[1])])}},T.updateBaseLayers=function(I,C){var k=this,E=k.topojson,R=k.layers,O=k.basePaths;function N(H){return H==="lonaxis"||H==="lataxis"}function G(H){return Boolean(b.lineLayers[H])}function U(H){return Boolean(b.fillLayers[H])}var Y=this.hasChoropleth?b.layersForChoropleth:b.layers,z=Y.filter(function(H){return G(H)||U(H)?C["show"+H]:N(H)?C[H].showgrid:!0}),B=k.framework.selectAll(".layer").data(z,String);B.exit().each(function(H){delete R[H],delete O[H],r.select(this).remove()}),B.enter().append("g").attr("class",function(H){return"layer "+H}).each(function(H){var V=R[H]=r.select(this);H==="bg"?k.bgRect=V.append("rect").style("pointer-events","all"):N(H)?O[H]=V.append("path").style("fill","none"):H==="backplot"?V.append("g").classed("choroplethlayer",!0):H==="frontplot"?V.append("g").classed("scatterlayer",!0):G(H)?O[H]=V.append("path").style("fill","none").style("stroke-miterlimit",2):U(H)&&(O[H]=V.append("path").style("stroke","none"))}),B.order(),B.each(function(H){var V=O[H],Z=b.layerNameToAdjective[H];H==="frame"?V.datum(b.sphereSVG):G(H)||U(H)?V.datum(w(E,E.objects[H])):N(H)&&V.datum(P(H,C,I)).call(t.stroke,C[H].gridcolor).call(f.dashLine,"",C[H].gridwidth),G(H)?V.call(t.stroke,C[Z+"color"]).call(f.dashLine,"",C[Z+"width"]):U(H)&&V.call(t.fill,C[Z+"color"])})},T.updateDims=function(I,C){var k=this.bounds,E=(C.framewidth||0)/2,R=k[0][0]-E,O=k[0][1]-E,N=k[1][0]-R+E,G=k[1][1]-O+E;f.setRect(this.clipRect,R,O,N,G),this.bgRect.call(f.setRect,R,O,N,G).call(t.fill,C.bgcolor),this.xaxis._offset=R,this.xaxis._length=N,this.yaxis._offset=O,this.yaxis._length=G},T.updateFx=function(I,C){var k=this,E=k.graphDiv,R=k.bgRect,O=I.dragmode,N=I.clickmode;if(k.isStatic)return;function G(){var B=k.viewInitial,H={};for(var V in B)H[k.id+"."+V]=B[V];a.call("_guiRelayout",E,H),E.emit("plotly_doubleclick",null)}function U(B){return k.projection.invert([B[0]+k.xaxis._offset,B[1]+k.yaxis._offset])}var Y;O==="select"?Y=function(B,H){var V=B.range={};V[k.id]=[U([H.xmin,H.ymin]),U([H.xmax,H.ymax])]}:O==="lasso"&&(Y=function(B,H,V){var Z=B.lassoPoints={};Z[k.id]=V.filtered.map(U)});var z={element:k.bgRect.node(),gd:E,plotinfo:{id:k.id,xaxis:k.xaxis,yaxis:k.yaxis,fillRangeItems:Y},xaxes:[k.xaxis],yaxes:[k.yaxis],subplot:k.id,clickFn:function(B){B===2&&p(E)}};O==="pan"?(R.node().onmousedown=null,R.call(m(k,C)),R.on("dblclick.zoom",G),E._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),z.prepFn=function(B,H,V){s(B,H,V,z,O)},i.init(z)),R.on("mousemove",function(){var B=k.projection.invert(r.mouse(this));if(!B||isNaN(B[0])||isNaN(B[1]))return i.unhover(E,r.event);k.xaxis.p2c=function(){return B[0]},k.yaxis.p2c=function(){return B[1]},n.hover(E,r.event,k.id)}),R.on("mouseout",function(){E._dragging||i.unhover(E,r.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(N.indexOf("select")>-1&&v(r.event,E,[k.xaxis],[k.yaxis],k.id,z),N.indexOf("event")>-1&&n.click(E,r.event))})},T.makeFramework=function(){var I=this,C=I.graphDiv,k=C._fullLayout,E="clip"+k._uid+I.id;I.clipDef=k._clips.append("clipPath").attr("id",E),I.clipRect=I.clipDef.append("rect"),I.framework=r.select(I.container).append("g").attr("class","geo "+I.id).call(f.setClipUrl,E,C),I.project=function(R){var O=I.projection(R);return O?[O[0]-I.xaxis._offset,O[1]-I.yaxis._offset]:[null,null]},I.xaxis={_id:"x",c2p:function(R){return I.project(R)[0]}},I.yaxis={_id:"y",c2p:function(R){return I.project(R)[1]}},I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(I.mockAxis,k)},T.saveViewInitial=function(I){var C=I.center||{},k=I.projection,E=k.rotation||{};this.viewInitial={fitbounds:I.fitbounds,"projection.scale":k.scale};var R;I._isScoped?R={"center.lon":C.lon,"center.lat":C.lat}:I._isClipped?R={"projection.rotation.lon":E.lon,"projection.rotation.lat":E.lat}:R={"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":E.lon},u.extendFlat(this.viewInitial,R)},T.render=function(){var I=this.projection,C=I.getPath(),k;function E(O){var N=I(O.lonlat);return N?c(N[0],N[1]):null}function R(O){return I.isLonLatOverEdges(O.lonlat)?"none":null}for(k in this.basePaths)this.basePaths[k].attr("d",C);for(k in this.dataPaths)this.dataPaths[k].attr("d",function(O){return C(O.geojson)});for(k in this.dataPoints)this.dataPoints[k].attr("display",R).attr("transform",E)};function M(I){for(var C=I.projection,k=C.type,E=r.geo[b.projNames[k]](),R=I._isClipped?b.lonaxisSpan[k]/2:null,O=["center","rotate","parallels","clipExtent"],N=function(Y){return Y?E:[]},G=0;G<O.length;G++){var U=O[G];typeof E[U]!="function"&&(E[U]=N)}return E.isLonLatOverEdges=function(Y){if(E(Y)===null)return!0;if(R){var z=E.rotate(),B=r.geo.distance(Y,[-z[0],-z[1]]),H=R*Math.PI/180;return B>H}else return!1},E.getPath=function(){return r.geo.path().projection(E)},E.getBounds=function(Y){return E.getPath().bounds(Y)},E.fitExtent=function(Y,z){var B=Y[1][0]-Y[0][0],H=Y[1][1]-Y[0][1],V=E.clipExtent&&E.clipExtent();E.scale(150).translate([0,0]),V&&E.clipExtent(null);var Z=E.getBounds(z),q=Math.min(B/(Z[1][0]-Z[0][0]),H/(Z[1][1]-Z[0][1])),J=+Y[0][0]+(B-q*(Z[1][0]+Z[0][0]))/2,ne=+Y[0][1]+(H-q*(Z[1][1]+Z[0][1]))/2;return V&&E.clipExtent(V),E.scale(q*150).translate([J,ne])},E.precision(b.precision),R&&E.clipAngle(R-b.clipPad),E}function P(I,C,k){var E=1e-6,R=2.5,O=C[I],N=b.scopeDefaults[C.scope],G,U,Y;I==="lonaxis"?(G=N.lonaxisRange,U=N.lataxisRange,Y=function(ve,$){return[ve,$]}):I==="lataxis"&&(G=N.lataxisRange,U=N.lonaxisRange,Y=function(ve,$){return[$,ve]});var z={type:"linear",range:[G[0],G[1]-E],tick0:O.tick0,dtick:O.dtick};l.setConvert(z,k);var B=l.calcTicks(z);!C.isScoped&&I==="lonaxis"&&B.pop();for(var H=B.length,V=new Array(H),Z=0;Z<H;Z++)for(var q=B[Z].x,J=V[Z]=[],ne=U[0];ne<U[1]+R;ne+=R)J.push(Y(q,ne));return{type:"MultiLineString",coordinates:V}}function L(I,C){var k=b.clipPad,E=I[0]+k,R=I[1]-k,O=C[0]+k,N=C[1]-k;E>0&&R<0&&(R+=360);var G=(R-E)/4;return{type:"Polygon",coordinates:[[[E,O],[E,N],[E+G,N],[E+2*G,N],[E+3*G,N],[R,N],[R,O],[R-G,O],[R-2*G,O],[R-3*G,O],[E,O]]]}}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../registry":911,"../cartesian/autorange":827,"../cartesian/axes":828,"../cartesian/select":847,"../plots":891,"./constants":858,"./projections":863,"./zoom":864,d3:169,"topojson-client":579}],860:[function(e,d,S){var r=e("../../plots/get_data").getSubplotCalcData,a=e("../../lib").counterRegex,u=e("./geo"),c="geo",t=a(c),f={};f[c]={valType:"subplotid",dflt:c,editType:"calc"};function n(h){for(var i=h._fullLayout,s=h.calcdata,p=i._subplots[c],v=0;v<p.length;v++){var m=p[v],b=r(s,c,m),y=i[m],x=y._subplot;x||(x=u({id:m,graphDiv:h,container:i._geolayer.node(),topojsonURL:h._context.topojsonURL,staticPlot:h._context.staticPlot}),i[m]._subplot=x),x.plot(b,i,h._promises)}}function o(h,i,s,p){for(var v=p._subplots[c]||[],m=0;m<v.length;m++){var b=v[m],y=p[b]._subplot;!i[b]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function l(h){for(var i=h._fullLayout,s=i._subplots[c],p=0;p<s.length;p++){var v=i[s[p]],m=v._subplot;m.updateFx(i,v)}}d.exports={attr:c,name:c,idRoot:c,idRegex:t,attrRegex:t,attributes:f,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,updateFx:l,clean:o}},{"../../lib":778,"../../plots/get_data":865,"./geo":859,"./layout_attributes":861,"./layout_defaults":862}],861:[function(e,d,S){var r=e("../../components/color/attributes"),a=e("../domain").attributes,u=e("./constants"),c=e("../../plot_api/edit_types").overrideAll,t={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:r.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},f=d.exports=c({domain:a({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(u.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(u.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:r.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:u.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:u.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:u.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:u.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:r.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:r.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:r.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:r.background},lonaxis:t,lataxis:t},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../plot_api/edit_types":810,"../domain":855,"./constants":858}],862:[function(e,d,S){var r=e("../../lib"),a=e("../subplot_defaults"),u=e("../get_data").getSubplotData,c=e("./constants"),t=e("./layout_attributes"),f=c.axesNames;d.exports=function(l,h,i){a(l,h,i,{type:"geo",attributes:t,handleDefaults:n,fullData:i,partition:"y"})};function n(o,l,h,i){var s=u(i.fullData,"geo",i.id),p=s.map(function($){return $._expandedIndex}),v=h("resolution"),m=h("scope"),b=c.scopeDefaults[m],y=h("projection.type",b.projType),x=l._isAlbersUsa=y==="albers usa";x&&(m=l.scope="usa");var w=l._isScoped=m!=="world",g=l._isConic=y.indexOf("conic")!==-1,T=l._isClipped=!!c.lonaxisSpan[y];if(o.visible===!1){var M=r.extendDeep({},l._template);M.showcoastlines=!1,M.showcountries=!1,M.showframe=!1,M.showlakes=!1,M.showland=!1,M.showocean=!1,M.showrivers=!1,M.showsubunits=!1,M.lonaxis&&(M.lonaxis.showgrid=!1),M.lataxis&&(M.lataxis.showgrid=!1),l._template=M}for(var P=h("visible"),L,I=0;I<f.length;I++){var C=f[I],k=[30,10][I],E;if(w)E=b[C+"Range"];else{var R=c[C+"Span"],O=(R[y]||R["*"])/2,N=h("projection.rotation."+C.substr(0,3),b.projRotate[I]);E=[N-O,N+O]}var G=h(C+".range",E);h(C+".tick0"),h(C+".dtick",k),L=h(C+".showgrid",P?void 0:!1),L&&(h(C+".gridcolor"),h(C+".gridwidth")),l[C]._ax={type:"linear",_id:C.slice(0,3),_traceIndices:p,setScale:r.identity,c2l:r.identity,r2l:r.identity,autorange:!0,range:G.slice(),_m:1,_input:{}}}var U=l.lonaxis.range,Y=l.lataxis.range,z=U[0],B=U[1];z>0&&B<0&&(B+=360);var H=(z+B)/2,V;if(!x){var Z=w?b.projRotate:[H,0,0];V=h("projection.rotation.lon",Z[0]),h("projection.rotation.lat",Z[1]),h("projection.rotation.roll",Z[2]),L=h("showcoastlines",!w&&P),L&&(h("coastlinecolor"),h("coastlinewidth")),L=h("showocean",P?void 0:!1),L&&h("oceancolor")}var q,J;if(x?(q=-96.6,J=38.7):(q=w?H:V,J=(Y[0]+Y[1])/2),h("center.lon",q),h("center.lat",J),g){var ne=b.projParallels||[0,60];h("projection.parallels",ne)}h("projection.scale"),L=h("showland",P?void 0:!1),L&&h("landcolor"),L=h("showlakes",P?void 0:!1),L&&h("lakecolor"),L=h("showrivers",P?void 0:!1),L&&(h("rivercolor"),h("riverwidth")),L=h("showcountries",w&&m!=="usa"&&P),L&&(h("countrycolor"),h("countrywidth")),(m==="usa"||m==="north america"&&v===50)&&(h("showsubunits",P),h("subunitcolor"),h("subunitwidth")),w||(L=h("showframe",P),L&&(h("framecolor"),h("framewidth"))),h("bgcolor");var ve=h("fitbounds");ve&&(delete l.projection.scale,w?(delete l.center.lon,delete l.center.lat):T?(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon,delete l.projection.rotation.lat,delete l.lonaxis.range,delete l.lataxis.range):(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon))}},{"../../lib":778,"../get_data":865,"../subplot_defaults":905,"./constants":858,"./layout_attributes":861}],863:[function(e,d,S){function r(a){a.geo.project=function(ne,ve){var $=ve.stream;if(!$)throw new Error("not yet supported");return(ne&&t.hasOwnProperty(ne.type)?t[ne.type]:c)(ne,$)};function u(ne,ve){return{type:"Feature",id:ne.id,properties:ne.properties,geometry:c(ne.geometry,ve)}}function c(ne,ve){if(!ne)return null;if(ne.type==="GeometryCollection")return{type:"GeometryCollection",geometries:object.geometries.map(function(j){return c(j,ve)})};if(!i.hasOwnProperty(ne.type))return null;var $=i[ne.type];return a.geo.stream(ne,ve($)),$.result()}var t={Feature:u,FeatureCollection:function(ne,ve){return{type:"FeatureCollection",features:ne.features.map(function($){return u($,ve)})}}},f=[],n=[],o={point:function(ne,ve){f.push([ne,ve])},result:function(){var ne=f.length?f.length<2?{type:"Point",coordinates:f[0]}:{type:"MultiPoint",coordinates:f}:null;return f=[],ne}},l={lineStart:s,point:function(ne,ve){f.push([ne,ve])},lineEnd:function(){f.length&&(n.push(f),f=[])},result:function(){var ne=n.length?n.length<2?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}:null;return n=[],ne}},h={polygonStart:s,lineStart:s,point:function(ne,ve){f.push([ne,ve])},lineEnd:function(){var ne=f.length;if(ne){do f.push(f[0].slice());while(++ne<4);n.push(f),f=[]}},polygonEnd:s,result:function(){if(!n.length)return null;var ne=[],ve=[];return n.forEach(function($){p($)?ne.push([$]):ve.push($)}),ve.forEach(function($){var j=$[0];ne.some(function(ae){if(v(ae[0],j))return ae.push($),!0})||ne.push([$])}),n=[],ne.length?ne.length>1?{type:"MultiPolygon",coordinates:ne}:{type:"Polygon",coordinates:ne[0]}:null}},i={Point:o,MultiPoint:o,LineString:l,MultiLineString:l,Polygon:h,MultiPolygon:h,Sphere:h};function s(){}function p(ne){if(($=ne.length)<4)return!1;for(var ve=0,$,j=ne[$-1][1]*ne[0][0]-ne[$-1][0]*ne[0][1];++ve<$;)j+=ne[ve-1][1]*ne[ve][0]-ne[ve-1][0]*ne[ve][1];return j<=0}function v(ne,ve){for(var $=ve[0],j=ve[1],ae=!1,ie=0,te=ne.length,re=te-1;ie<te;re=ie++){var ce=ne[ie],pe=ce[0],fe=ce[1],se=ne[re],de=se[0],be=se[1];fe>j^be>j&&$<(de-pe)*(j-fe)/(be-fe)+pe&&(ae=!ae)}return ae}var m=1e-6,b=m*m,y=Math.PI,x=y/2,w=y/180,g=180/y;function T(ne){return ne?ne/Math.sin(ne):1}function M(ne){return ne>1?x:ne<-1?-x:Math.asin(ne)}function P(ne){return ne>1?0:ne<-1?y:Math.acos(ne)}var L=a.geo.projection,I=a.geo.projectionMutator;a.geo.interrupt=function(ne){var ve=[[[[-y,0],[0,x],[y,0]]],[[[-y,0],[0,-x],[y,0]]]],$;function j(fe,se){for(var de=se<0?-1:1,be=ve[+(se<0)],xe=0,ke=be.length-1;xe<ke&&fe>be[xe][2][0];++xe);var Re=ne(fe-be[xe][1][0],se);return Re[0]+=ne(be[xe][1][0],de*se>de*be[xe][0][1]?be[xe][0][1]:se)[0],Re}function ae(){$=ve.map(function(fe){return fe.map(function(se){var de=ne(se[0][0],se[0][1])[0],be=ne(se[2][0],se[2][1])[0],xe=ne(se[1][0],se[0][1])[1],ke=ne(se[1][0],se[1][1])[1],Re;return xe>ke&&(Re=xe,xe=ke,ke=Re),[[de,xe],[be,ke]]})})}ne.invert&&(j.invert=function(fe,se){for(var de=$[+(se<0)],be=ve[+(se<0)],xe=0,ke=de.length;xe<ke;++xe){var Re=de[xe];if(Re[0][0]<=fe&&fe<Re[1][0]&&Re[0][1]<=se&&se<Re[1][1]){var Ke=ne.invert(fe-ne(be[xe][1][0],0)[0],se);return Ke[0]+=be[xe][1][0],pe(j(Ke[0],Ke[1]),[fe,se])?Ke:null}}});var ie=a.geo.projection(j),te=ie.stream;ie.stream=function(fe){var se=ie.rotate(),de=te(fe),be=(ie.rotate([0,0]),te(fe));return ie.rotate(se),de.sphere=function(){a.geo.stream(re(),be)},de},ie.lobes=function(fe){return arguments.length?(ve=fe.map(function(se){return se.map(function(de){return[[de[0][0]*y/180,de[0][1]*y/180],[de[1][0]*y/180,de[1][1]*y/180],[de[2][0]*y/180,de[2][1]*y/180]]})}),ae(),ie):ve.map(function(se){return se.map(function(de){return[[de[0][0]*180/y,de[0][1]*180/y],[de[1][0]*180/y,de[1][1]*180/y],[de[2][0]*180/y,de[2][1]*180/y]]})})};function re(){for(var fe=1e-6,se=[],de=0,be=ve[0].length;de<be;++de){var xe=ve[0][de],ke=xe[0][0]*180/y,Re=xe[0][1]*180/y,Ke=xe[1][1]*180/y,ze=xe[2][0]*180/y,Je=xe[2][1]*180/y;se.push(ce([[ke+fe,Re+fe],[ke+fe,Ke-fe],[ze-fe,Ke-fe],[ze-fe,Je+fe]],30))}for(var de=ve[1].length-1;de>=0;--de){var xe=ve[1][de],ke=xe[0][0]*180/y,Re=xe[0][1]*180/y,Ke=xe[1][1]*180/y,ze=xe[2][0]*180/y,Je=xe[2][1]*180/y;se.push(ce([[ze-fe,Je-fe],[ze-fe,Ke+fe],[ke+fe,Ke+fe],[ke+fe,Re-fe]],30))}return{type:"Polygon",coordinates:[a.merge(se)]}}function ce(fe,se){for(var de=-1,be=fe.length,xe=fe[0],ke,Re,Ke,ze=[];++de<be;){ke=fe[de],Re=(ke[0]-xe[0])/se,Ke=(ke[1]-xe[1])/se;for(var Je=0;Je<se;++Je)ze.push([xe[0]+Je*Re,xe[1]+Je*Ke]);xe=ke}return ze.push(ke),ze}function pe(fe,se){return Math.abs(fe[0]-se[0])<m&&Math.abs(fe[1]-se[1])<m}return ie};function C(ne,ve){var $=(2+x)*Math.sin(ve);ve/=2;for(var j=0,ae=1/0;j<10&&Math.abs(ae)>m;j++){var ie=Math.cos(ve);ve-=ae=(ve+Math.sin(ve)*(ie+2)-$)/(2*ie*(1+ie))}return[2/Math.sqrt(y*(4+y))*ne*(1+Math.cos(ve)),2*Math.sqrt(y/(4+y))*Math.sin(ve)]}C.invert=function(ne,ve){var $=.5*ve*Math.sqrt((4+y)/y),j=M($),ae=Math.cos(j);return[ne/(2/Math.sqrt(y*(4+y))*(1+ae)),M((j+$*(ae+2))/(2+x))]},(a.geo.eckert4=function(){return L(C)}).raw=C;var k=a.geo.azimuthalEqualArea.raw;function E(ne,ve){if(arguments.length<2&&(ve=ne),ve===1)return k;if(ve===1/0)return O;function $(j,ae){var ie=k(j/ve,ae);return ie[0]*=ne,ie}return $.invert=function(j,ae){var ie=k.invert(j/ne,ae);return ie[0]*=ve,ie},$}function R(){var ne=2,ve=I(E),$=ve(ne);return $.coefficient=function(j){return arguments.length?ve(ne=+j):ne},$}function O(ne,ve){return[ne*Math.cos(ve)/Math.cos(ve/=2),2*Math.sin(ve)]}O.invert=function(ne,ve){var $=2*M(ve/2);return[ne*Math.cos($/2)/Math.cos($),$]},(a.geo.hammer=R).raw=E;function N(ne,ve){return[3*ne/(2*y)*Math.sqrt(y*y/3-ve*ve),ve]}N.invert=function(ne,ve){return[2/3*y*ne/Math.sqrt(y*y/3-ve*ve),ve]},(a.geo.kavrayskiy7=function(){return L(N)}).raw=N;function G(ne,ve){return[ne,1.25*Math.log(Math.tan(y/4+.4*ve))]}G.invert=function(ne,ve){return[ne,2.5*Math.atan(Math.exp(.8*ve))-.625*y]},(a.geo.miller=function(){return L(G)}).raw=G;function U(ne){return function(ve){var $=ne*Math.sin(ve),j=30,ae;do ve-=ae=(ve+Math.sin(ve)-$)/(1+Math.cos(ve));while(Math.abs(ae)>m&&--j>0);return ve/2}}function Y(ne,ve,$){var j=U($);function ae(ie,te){return[ne*ie*Math.cos(te=j(te)),ve*Math.sin(te)]}return ae.invert=function(ie,te){var re=M(te/ve);return[ie/(ne*Math.cos(re)),M((2*re+Math.sin(2*re))/$)]},ae}var z=Y(Math.SQRT2/x,Math.SQRT2,y);(a.geo.mollweide=function(){return L(z)}).raw=z;function B(ne,ve){var $=ve*ve,j=$*$;return[ne*(.8707-.131979*$+j*(-.013791+j*(.003971*$-.001529*j))),ve*(1.007226+$*(.015085+j*(-.044475+.028874*$-.005916*j)))]}B.invert=function(ne,ve){var $=ve,j=25,ae;do{var ie=$*$,te=ie*ie;$-=ae=($*(1.007226+ie*(.015085+te*(-.044475+.028874*ie-.005916*te)))-ve)/(1.007226+ie*(.015085*3+te*(-.044475*7+.028874*9*ie-.005916*11*te)))}while(Math.abs(ae)>m&&--j>0);return[ne/(.8707+(ie=$*$)*(-.131979+ie*(-.013791+ie*ie*ie*(.003971-.001529*ie)))),$]},(a.geo.naturalEarth=function(){return L(B)}).raw=B;var H=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];H.forEach(function(ne){ne[1]*=1.0144});function V(ne,ve){var $=Math.min(18,Math.abs(ve)*36/y),j=Math.floor($),ae=$-j,ie=(se=H[j])[0],te=se[1],re=(se=H[++j])[0],ce=se[1],pe=(se=H[Math.min(19,++j)])[0],fe=se[1],se;return[ne*(re+ae*(pe-ie)/2+ae*ae*(pe-2*re+ie)/2),(ve>0?x:-x)*(ce+ae*(fe-te)/2+ae*ae*(fe-2*ce+te)/2)]}V.invert=function(ne,ve){var $=ve/x,j=$*90,ae=Math.min(18,Math.abs(j/5)),ie=Math.max(0,Math.floor(ae));do{var te=H[ie][1],re=H[ie+1][1],ce=H[Math.min(19,ie+2)][1],pe=ce-te,fe=ce-2*re+te,se=2*(Math.abs($)-re)/pe,de=fe/pe,be=se*(1-de*se*(1-2*de*se));if(be>=0||ie===1){j=(ve>=0?5:-5)*(be+ae);var xe=50,ke;do ae=Math.min(18,Math.abs(j)/5),ie=Math.floor(ae),be=ae-ie,te=H[ie][1],re=H[ie+1][1],ce=H[Math.min(19,ie+2)][1],j-=(ke=(ve>=0?x:-x)*(re+be*(ce-te)/2+be*be*(ce-2*re+te)/2)-ve)*g;while(Math.abs(ke)>b&&--xe>0);break}}while(--ie>=0);var Re=H[ie][0],Ke=H[ie+1][0],ze=H[Math.min(19,ie+2)][0];return[ne/(Ke+be*(ze-Re)/2+be*be*(ze-2*Ke+Re)/2),j*w]},(a.geo.robinson=function(){return L(V)}).raw=V;function Z(ne,ve){return[ne*Math.cos(ve),ve]}Z.invert=function(ne,ve){return[ne/Math.cos(ve),ve]},(a.geo.sinusoidal=function(){return L(Z)}).raw=Z;function q(ne,ve){var $=Math.cos(ve),j=T(P($*Math.cos(ne/=2)));return[2*$*Math.sin(ne)*j,Math.sin(ve)*j]}q.invert=function(ne,ve){if(!(ne*ne+4*ve*ve>y*y+m)){var $=ne,j=ve,ae=25;do{var ie=Math.sin($),te=Math.sin($/2),re=Math.cos($/2),ce=Math.sin(j),pe=Math.cos(j),fe=Math.sin(2*j),se=ce*ce,de=pe*pe,be=te*te,xe=1-de*re*re,ke=xe?P(pe*re)*Math.sqrt(Re=1/xe):Re=0,Re,Ke=2*ke*pe*te-ne,ze=ke*ce-ve,Je=Re*(de*be+ke*pe*re*se),qe=Re*(.5*ie*fe-ke*2*ce*te),Ee=Re*.25*(fe*te-ke*ce*de*ie),Ae=Re*(se*re+ke*be*pe),Be=qe*Ee-Ae*Je;if(!Be)break;var $e=(ze*qe-Ke*Ae)/Be,xt=(Ke*Ee-ze*Je)/Be;$-=$e,j-=xt}while((Math.abs($e)>m||Math.abs(xt)>m)&&--ae>0);return[$,j]}},(a.geo.aitoff=function(){return L(q)}).raw=q;function J(ne,ve){var $=q(ne,ve);return[($[0]+ne/x)/2,($[1]+ve)/2]}J.invert=function(ne,ve){var $=ne,j=ve,ae=25;do{var ie=Math.cos(j),te=Math.sin(j),re=Math.sin(2*j),ce=te*te,pe=ie*ie,fe=Math.sin($),se=Math.cos($/2),de=Math.sin($/2),be=de*de,xe=1-pe*se*se,ke=xe?P(ie*se)*Math.sqrt(Re=1/xe):Re=0,Re,Ke=.5*(2*ke*ie*de+$/x)-ne,ze=.5*(ke*te+j)-ve,Je=.5*Re*(pe*be+ke*ie*se*ce)+.5/x,qe=Re*(fe*re/4-ke*te*de),Ee=.125*Re*(re*de-ke*te*pe*fe),Ae=.5*Re*(ce*se+ke*be*ie)+.5,Be=qe*Ee-Ae*Je,$e=(ze*qe-Ke*Ae)/Be,xt=(Ke*Ee-ze*Je)/Be;$-=$e,j-=xt}while((Math.abs($e)>m||Math.abs(xt)>m)&&--ae>0);return[$,j]},(a.geo.winkel3=function(){return L(J)}).raw=J}d.exports=r},{}],864:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../registry"),c=Math.PI/180,t=180/Math.PI,f={cursor:"pointer"},n={cursor:"auto"};function o(k,E){var R=k.projection,O;return E._isScoped?O=i:E._isClipped?O=p:O=s,O(k,R)}d.exports=o;function l(k,E){return r.behavior.zoom().translate(E.translate()).scale(E.scale())}function h(k,E,R){var O=k.id,N=k.graphDiv,G=N.layout,U=G[O],Y=N._fullLayout,z=Y[O],B={},H={};function V(Z,q){B[O+"."+Z]=a.nestedProperty(U,Z).get(),u.call("_storeDirectGUIEdit",G,Y._preGUI,B);var J=a.nestedProperty(z,Z);J.get()!==q&&(J.set(q),a.nestedProperty(U,Z).set(q),H[O+"."+Z]=q)}R(V),V("projection.scale",E.scale()/k.fitScale),V("fitbounds",!1),N.emit("plotly_relayout",H)}function i(k,E){var R=l(k,E);function O(){r.select(this).style(f)}function N(){E.scale(r.event.scale).translate(r.event.translate),k.render();var Y=E.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.center.lon":Y[0],"geo.center.lat":Y[1]})}function G(Y){var z=E.invert(k.midPt);Y("center.lon",z[0]),Y("center.lat",z[1])}function U(){r.select(this).style(n),h(k,E,G)}return R.on("zoomstart",O).on("zoom",N).on("zoomend",U),R}function s(k,E){var R=l(k,E),O=2,N,G,U,Y,z,B,H,V,Z;function q(ae){return E.invert(ae)}function J(ae){var ie=q(ae);if(!ie)return!0;var te=E(ie);return Math.abs(te[0]-ae[0])>O||Math.abs(te[1]-ae[1])>O}function ne(){r.select(this).style(f),N=r.mouse(this),G=E.rotate(),U=E.translate(),Y=G,z=q(N)}function ve(){if(B=r.mouse(this),J(N)){R.scale(E.scale()),R.translate(E.translate());return}E.scale(r.event.scale),E.translate([U[0],r.event.translate[1]]),z?q(B)&&(V=q(B),H=[Y[0]+(V[0]-z[0]),G[1],G[2]],E.rotate(H),Y=H):(N=B,z=q(N)),Z=!0,k.render();var ae=E.rotate(),ie=E.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.center.lon":ie[0],"geo.center.lat":ie[1],"geo.projection.rotation.lon":-ae[0]})}function $(){r.select(this).style(n),Z&&h(k,E,j)}function j(ae){var ie=E.rotate(),te=E.invert(k.midPt);ae("projection.rotation.lon",-ie[0]),ae("center.lon",te[0]),ae("center.lat",te[1])}return R.on("zoomstart",ne).on("zoom",ve).on("zoomend",$),R}function p(k,E){E.rotate(),E.scale();var R=l(k,E),O=C(R,"zoomstart","zoom","zoomend"),N=0,G=R.on,U;R.on("zoomstart",function(){r.select(this).style(f);var V=r.mouse(this),Z=E.rotate(),q=Z,J=E.translate(),ne=m(Z);U=v(E,V),G.call(R,"zoom",function(){var ve=r.mouse(this);if(E.scale(r.event.scale),!U)V=ve,U=v(E,V);else if(v(E,ve)){E.rotate(Z).translate(J);var $=v(E,ve),j=y(U,$),ae=M(b(ne,j)),ie=x(ae,U,q);(!isFinite(ie[0])||!isFinite(ie[1])||!isFinite(ie[2]))&&(ie=q),E.rotate(ie),q=ie}z(O.of(this,arguments))}),Y(O.of(this,arguments))}).on("zoomend",function(){r.select(this).style(n),G.call(R,"zoom",null),B(O.of(this,arguments)),h(k,E,H)}).on("zoom.redraw",function(){k.render();var V=E.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/k.fitScale,"geo.projection.rotation.lon":-V[0],"geo.projection.rotation.lat":-V[1]})});function Y(V){N++||V({type:"zoomstart"})}function z(V){V({type:"zoom"})}function B(V){--N||V({type:"zoomend"})}function H(V){var Z=E.rotate();V("projection.rotation.lon",-Z[0]),V("projection.rotation.lat",-Z[1])}return r.rebind(R,O,"on")}function v(k,E){var R=k.invert(E);return R&&isFinite(R[0])&&isFinite(R[1])&&P(R)}function m(k){var E=.5*k[0]*c,R=.5*k[1]*c,O=.5*k[2]*c,N=Math.sin(E),G=Math.cos(E),U=Math.sin(R),Y=Math.cos(R),z=Math.sin(O),B=Math.cos(O);return[G*Y*B+N*U*z,N*Y*B-G*U*z,G*U*B+N*Y*z,G*Y*z-N*U*B]}function b(k,E){var R=k[0],O=k[1],N=k[2],G=k[3],U=E[0],Y=E[1],z=E[2],B=E[3];return[R*U-O*Y-N*z-G*B,R*Y+O*U+N*B-G*z,R*z-O*B+N*U+G*Y,R*B+O*z-N*Y+G*U]}function y(k,E){if(!(!k||!E)){var R=I(k,E),O=Math.sqrt(L(R,R)),N=.5*Math.acos(Math.max(-1,Math.min(1,L(k,E)))),G=Math.sin(N)/O;return O&&[Math.cos(N),R[2]*G,-R[1]*G,R[0]*G]}}function x(k,E,R){var O=T(E,2,k[0]);O=T(O,1,k[1]),O=T(O,0,k[2]-R[2]);var N=E[0],G=E[1],U=E[2],Y=O[0],z=O[1],B=O[2],H=Math.atan2(G,N)*t,V=Math.sqrt(N*N+G*G),Z,q;Math.abs(z)>V?(q=(z>0?90:-90)-H,Z=0):(q=Math.asin(z/V)*t-H,Z=Math.sqrt(V*V-z*z));var J=180-q-2*H,ne=(Math.atan2(B,Y)-Math.atan2(U,Z))*t,ve=(Math.atan2(B,Y)-Math.atan2(U,-Z))*t,$=w(R[0],R[1],q,ne),j=w(R[0],R[1],J,ve);return $<=j?[q,ne,R[2]]:[J,ve,R[2]]}function w(k,E,R,O){var N=g(R-k),G=g(O-E);return Math.sqrt(N*N+G*G)}function g(k){return(k%360+540)%360-180}function T(k,E,R){var O=R*c,N=k.slice(),G=E===0?1:0,U=E===2?1:2,Y=Math.cos(O),z=Math.sin(O);return N[G]=k[G]*Y-k[U]*z,N[U]=k[U]*Y+k[G]*z,N}function M(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*t,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*t]}function P(k){var E=k[0]*c,R=k[1]*c,O=Math.cos(R);return[O*Math.cos(E),O*Math.sin(E),Math.sin(R)]}function L(k,E){for(var R=0,O=0,N=k.length;O<N;++O)R+=k[O]*E[O];return R}function I(k,E){return[k[1]*E[2]-k[2]*E[1],k[2]*E[0]-k[0]*E[2],k[0]*E[1]-k[1]*E[0]]}function C(k){for(var E=0,R=arguments.length,O=[];++E<R;)O.push(arguments[E]);var N=r.dispatch.apply(null,O);return N.of=function(G,U){return function(Y){var z;try{z=Y.sourceEvent=r.event,Y.target=k,r.event=Y,N[Y.type].apply(G,U)}finally{r.event=z}}},N}},{"../../lib":778,"../../registry":911,d3:169}],865:[function(e,d,S){var r=e("../registry"),a=e("./cartesian/constants").SUBPLOT_PATTERN;S.getSubplotCalcData=function(u,c,t){var f=r.subplotsRegistry[c];if(!f)return[];for(var n=f.attr,o=[],l=0;l<u.length;l++){var h=u[l],i=h[0].trace;i[n]===t&&o.push(h)}return o},S.getModuleCalcData=function(u,c){var t=[],f=[],n;if(typeof c=="string"?n=r.getModule(c).plot:typeof c=="function"?n=c:n=c.plot,!n)return[t,u];for(var o=0;o<u.length;o++){var l=u[o],h=l[0].trace;h.visible!==!0||h._length===0||(h._module.plot===n?t.push(l):f.push(l))}return[t,f]},S.getSubplotData=function(c,t,f){if(!r.subplotsRegistry[t])return[];var n=r.subplotsRegistry[t].attr,o=[],l,h,i;if(t==="gl2d"){var s=f.match(a);h="x"+s[1],i="y"+s[2]}for(var p=0;p<c.length;p++)l=c[p],t==="gl2d"&&r.traceIs(l,"gl2d")?l[n[0]]===h&&l[n[1]]===i&&o.push(l):l[n]===f&&o.push(l);return o}},{"../registry":911,"./cartesian/constants":834}],866:[function(e,d,S){var r=e("mouse-change"),a=e("mouse-wheel"),u=e("mouse-event-offset"),c=e("../cartesian/constants"),t=e("has-passive-events");d.exports=n;function f(o,l){this.element=o,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function n(o){var l=o.mouseContainer,h=o.glplot,i=new f(l,h);function s(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function p(){for(var m=o.graphDiv._fullLayout._axisConstraintGroups,b=o.xaxis._id,y=o.yaxis._id,x=0;x<m.length;x++)if(m[x][b]!==-1){if(m[x][y]!==-1)return!0;break}return!1}i.mouseListener=r(l,v),l.addEventListener("touchstart",function(m){var b=u(m.changedTouches[0],l);v(0,b[0],b[1]),v(1,b[0],b[1]),m.preventDefault()},t?{passive:!1}:!1),l.addEventListener("touchmove",function(m){m.preventDefault();var b=u(m.changedTouches[0],l);v(1,b[0],b[1]),m.preventDefault()},t?{passive:!1}:!1),l.addEventListener("touchend",function(m){v(0,i.lastPos[0],i.lastPos[1]),m.preventDefault()},t?{passive:!1}:!1);function v(m,b,y){var x=o.calcDataBox(),w=h.viewBox,g=i.lastPos[0],T=i.lastPos[1],M=c.MINDRAG*h.pixelRatio,P=c.MINZOOM*h.pixelRatio,L,I;b*=h.pixelRatio,y*=h.pixelRatio,y=w[3]-w[1]-y;function C(G,U,Y){var z=Math.min(U,Y),B=Math.max(U,Y);z!==B?(x[G]=z,x[G+2]=B,i.dataBox=x,o.setRanges(x)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(o.fullLayout.dragmode){case"zoom":if(m){var k=b/(w[2]-w[0])*(x[2]-x[0])+x[0],E=y/(w[3]-w[1])*(x[3]-x[1])+x[1];i.boxInited||(i.boxStart[0]=k,i.boxStart[1]=E,i.dragStart[0]=b,i.dragStart[1]=y),i.boxEnd[0]=k,i.boxEnd[1]=E,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var R=Math.abs(i.dragStart[0]-b)<P,O=Math.abs(i.dragStart[1]-y)<P;if(p()&&!(R&&O)){L=i.boxEnd[0]-i.boxStart[0],I=i.boxEnd[1]-i.boxStart[1];var N=(x[3]-x[1])/(x[2]-x[0]);Math.abs(L*N)>Math.abs(I)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(L)*N*(I>=0?1:-1),i.boxEnd[1]<x[1]?(i.boxEnd[1]=x[1],i.boxEnd[0]=i.boxStart[0]+(x[1]-i.boxStart[1])/Math.abs(N)):i.boxEnd[1]>x[3]&&(i.boxEnd[1]=x[3],i.boxEnd[0]=i.boxStart[0]+(x[3]-i.boxStart[1])/Math.abs(N))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(I)/N*(L>=0?1:-1),i.boxEnd[0]<x[0]?(i.boxEnd[0]=x[0],i.boxEnd[1]=i.boxStart[1]+(x[0]-i.boxStart[0])*Math.abs(N)):i.boxEnd[0]>x[2]&&(i.boxEnd[0]=x[2],i.boxEnd[1]=i.boxStart[1]+(x[2]-i.boxStart[0])*Math.abs(N)))}else R&&(i.boxEnd[0]=i.boxStart[0]),O&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(L=i.boxStart[0]!==i.boxEnd[0],I=i.boxStart[1]!==i.boxEnd[1],L||I?(L&&(C(0,i.boxStart[0],i.boxEnd[0]),o.xaxis.autorange=!1),I&&(C(1,i.boxStart[1],i.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,m?(i.panning||(i.dragStart[0]=b,i.dragStart[1]=y),Math.abs(i.dragStart[0]-b)<M&&(b=i.dragStart[0]),Math.abs(i.dragStart[1]-y)<M&&(y=i.dragStart[1]),L=(g-b)*(x[2]-x[0])/(h.viewBox[2]-h.viewBox[0]),I=(T-y)*(x[3]-x[1])/(h.viewBox[3]-h.viewBox[1]),x[0]+=L,x[2]+=L,x[1]+=I,x[3]+=I,o.setRanges(x),i.panning=!0,i.lastInputTime=Date.now(),s(),o.cameraChanged(),o.handleAnnotations()):i.panning&&(i.panning=!1,o.relayoutCallback());break}i.lastPos[0]=b,i.lastPos[1]=y}return i.wheelListener=a(l,function(m,b){if(!o.scrollZoom)return!1;var y=o.calcDataBox(),x=h.viewBox,w=i.lastPos[0],g=i.lastPos[1],T=Math.exp(5*b/(x[3]-x[1])),M=w/(x[2]-x[0])*(y[2]-y[0])+y[0],P=g/(x[3]-x[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-M)*T+M,y[2]=(y[2]-M)*T+M,y[1]=(y[1]-P)*T+P,y[3]=(y[3]-P)*T+P,o.setRanges(y),i.lastInputTime=Date.now(),s(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),i}},{"../cartesian/constants":834,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486}],867:[function(e,d,S){var r=e("../cartesian/axes"),a=e("../../lib/str2rgbarray");function u(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var c=u.prototype,t=["xaxis","yaxis"];c.merge=function(n){this.titleEnable=!1,this.backgroundColor=a(n.plot_bgcolor);var o,l,h,i,s,p,v,m,b,y,x;for(y=0;y<2;++y){o=t[y];var w=o.charAt(0);for(l=n[this.scene[o]._name],h=l.title.text===this.scene.fullLayout._dfltTitle[w]?"":l.title.text,x=0;x<=2;x+=2)this.labelEnable[y+x]=!1,this.labels[y+x]=h,this.labelColor[y+x]=a(l.title.font.color),this.labelFont[y+x]=l.title.font.family,this.labelSize[y+x]=l.title.font.size,this.labelPad[y+x]=this.getLabelPad(o,l),this.tickEnable[y+x]=!1,this.tickColor[y+x]=a((l.tickfont||{}).color),this.tickAngle[y+x]=l.tickangle==="auto"?0:Math.PI*-l.tickangle/180,this.tickPad[y+x]=this.getTickPad(l),this.tickMarkLength[y+x]=0,this.tickMarkWidth[y+x]=l.tickwidth||0,this.tickMarkColor[y+x]=a(l.tickcolor),this.borderLineEnable[y+x]=!1,this.borderLineColor[y+x]=a(l.linecolor),this.borderLineWidth[y+x]=l.linewidth||0;v=this.hasSharedAxis(l),s=this.hasAxisInDfltPos(o,l)&&!v,p=this.hasAxisInAltrPos(o,l)&&!v,i=l.mirror||!1,m=v?String(i).indexOf("all")!==-1:!!i,b=v?i==="allticks":String(i).indexOf("ticks")!==-1,s?this.labelEnable[y]=!0:p&&(this.labelEnable[y+2]=!0),s?this.tickEnable[y]=l.showticklabels:p&&(this.tickEnable[y+2]=l.showticklabels),(s||m)&&(this.borderLineEnable[y]=l.showline),(p||m)&&(this.borderLineEnable[y+2]=l.showline),(s||b)&&(this.tickMarkLength[y]=this.getTickMarkLength(l)),(p||b)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(l)),this.gridLineEnable[y]=l.showgrid,this.gridLineColor[y]=a(l.gridcolor),this.gridLineWidth[y]=l.gridwidth,this.zeroLineEnable[y]=l.zeroline,this.zeroLineColor[y]=a(l.zerolinecolor),this.zeroLineWidth[y]=l.zerolinewidth}},c.hasSharedAxis=function(n){var o=this.scene,l=o.fullLayout._subplots.gl2d,h=r.findSubplotsWithAxis(l,n);return h.indexOf(o.id)!==0},c.hasAxisInDfltPos=function(n,o){var l=o.side;if(n==="xaxis")return l==="bottom";if(n==="yaxis")return l==="left"},c.hasAxisInAltrPos=function(n,o){var l=o.side;if(n==="xaxis")return l==="top";if(n==="yaxis")return l==="right"},c.getLabelPad=function(n,o){var l=1.5,h=o.title.font.size,i=o.showticklabels;if(n==="xaxis")return o.side==="top"?-10+h*(l+(i?1:0)):-10+h*(l+(i?.5:0));if(n==="yaxis")return o.side==="right"?10+h*(l+(i?1:.5)):10+h*(l+(i?.5:0))},c.getTickPad=function(n){return n.ticks==="outside"?10+n.ticklen:15},c.getTickMarkLength=function(n){if(!n.ticks)return 0;var o=n.ticklen;return n.ticks==="inside"?-o:o};function f(n){return new u(n)}d.exports=f},{"../../lib/str2rgbarray":802,"../cartesian/axes":828}],868:[function(e,d,S){var r=e("../../plot_api/edit_types").overrideAll,a=e("./scene2d"),u=e("../layout_attributes"),c=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),f=e("../cartesian"),n=e("../../components/fx/layout_attributes"),o=e("../get_data").getSubplotData;S.name="gl2d",S.attr=["xaxis","yaxis"],S.idRoot=["x","y"],S.idRegex=t.idRegex,S.attrRegex=t.attrRegex,S.attributes=e("../cartesian/attributes"),S.supplyLayoutDefaults=function(l,h,i){h._has("cartesian")||f.supplyLayoutDefaults(l,h,i)},S.layoutAttrOverrides=r(f.layoutAttributes,"plot","from-root"),S.baseLayoutAttrOverrides=r({plot_bgcolor:u.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),S.plot=function(h){for(var i=h._fullLayout,s=h._fullData,p=i._subplots.gl2d,v=0;v<p.length;v++){var m=p[v],b=i._plots[m],y=o(s,"gl2d",m),x=b._scene2d;x===void 0&&(x=new a({id:m,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio},i),b._scene2d=x),x.plot(y,h.calcdata,i,h.layout)}},S.clean=function(l,h,i,s){for(var p=s._subplots.gl2d||[],v=0;v<p.length;v++){var m=p[v],b=s._plots[m];if(!!b._scene2d){var y=o(l,"gl2d",m);y.length===0&&(b._scene2d.destroy(),delete s._plots[m])}}f.clean.apply(this,arguments)},S.drawFramework=function(l){l._context.staticPlot||f.drawFramework(l)},S.toSVG=function(l){for(var h=l._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var p=h._plots[i[s]],v=p._scene2d,m=v.toImage("png"),b=h._glimages.append("svg:image");b.attr({xmlns:c.svg,"xlink:href":m,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),v.destroy()}},S.updateFx=function(l){for(var h=l._fullLayout,i=h._subplots.gl2d,s=0;s<i.length;s++){var p=h._plots[i[s]]._scene2d;p.updateFx(h.dragmode)}}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../plot_api/edit_types":810,"../cartesian":841,"../cartesian/attributes":826,"../cartesian/constants":834,"../get_data":865,"../layout_attributes":882,"./scene2d":869}],869:[function(e,d,S){var r=e("../../registry"),a=e("../../plots/cartesian/axes"),u=e("../../components/fx"),c=e("gl-plot2d"),t=e("gl-spikes2d"),f=e("gl-select-box"),n=e("webgl-context"),o=e("./convert"),l=e("./camera"),h=e("../../lib/show_no_webgl_msg"),i=e("../cartesian/constraints"),s=i.enforce,p=i.clean,v=e("../cartesian/autorange").doAutoRange,m=e("../../components/dragelement/helpers"),b=m.drawMode,y=m.selectMode,x=["xaxis","yaxis"],w,g,T=e("../cartesian/constants").SUBPLOT_PATTERN;function M(I,C){this.container=I.container,this.graphDiv=I.graphDiv,this.pixelRatio=I.plotGlPixelRatio||window.devicePixelRatio,this.id=I.id,this.staticPlot=!!I.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(C),this.makeFramework(),!this.stopped&&(this.glplotOptions=o(this),this.glplotOptions.merge(C),this.glplot=c(this.glplotOptions),this.camera=l(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=f(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}d.exports=M;var P=M.prototype;P.makeFramework=function(){if(this.staticPlot){if(!g&&(w=document.createElement("canvas"),g=n({canvas:w,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("Error creating static canvas/context for image server");this.canvas=w,this.gl=g}else{var I=this.container.querySelector(".gl-canvas-focus"),C=n({canvas:I,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C){h(this),this.stopped=!0;return}this.canvas=I,this.gl=C}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var R=this.mouseContainer=document.createElement("div");R.style.position="absolute",R.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var O=this.container;O.appendChild(E),O.appendChild(R);var N=this;R.addEventListener("mouseout",function(){N.isMouseOver=!1,N.unhover()}),R.addEventListener("mouseover",function(){N.isMouseOver=!0})},P.toImage=function(I){I||(I="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(w),this.updateSize(this.canvas);var C=this.glplot.gl,k=C.drawingBufferWidth,E=C.drawingBufferHeight;C.clearColor(1,1,1,0),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),C.bindFramebuffer(C.FRAMEBUFFER,null);var R=new Uint8Array(k*E*4);C.readPixels(0,0,k,E,C.RGBA,C.UNSIGNED_BYTE,R);for(var O=0,N=E-1;O<N;++O,--N)for(var G=0;G<k;++G)for(var U=0;U<4;++U){var Y=R[4*(k*O+G)+U];R[4*(k*O+G)+U]=R[4*(k*N+G)+U],R[4*(k*N+G)+U]=Y}var z=document.createElement("canvas");z.width=k,z.height=E;var B=z.getContext("2d"),H=B.createImageData(k,E);H.data.set(R),B.putImageData(H,0,0);var V;switch(I){case"jpeg":V=z.toDataURL("image/jpeg");break;case"webp":V=z.toDataURL("image/webp");break;default:V=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(w),V},P.updateSize=function(I){I||(I=this.canvas);var C=this.pixelRatio,k=this.fullLayout,E=k.width,R=k.height,O=Math.ceil(C*E)|0,N=Math.ceil(C*R)|0;return(I.width!==O||I.height!==N)&&(I.width=O,I.height=N),I},P.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var I=[a.calcTicks(this.xaxis),a.calcTicks(this.yaxis)],C=0;C<2;++C)for(var k=0;k<I[C].length;++k)I[C][k].text=I[C][k].text+"";return I};function L(I,C){for(var k=0;k<2;++k){var E=I[k],R=C[k];if(E.length!==R.length)return!0;for(var O=0;O<E.length;++O)if(E[O].x!==R[O].x)return!0}return!1}P.updateRefs=function(I){this.fullLayout=I;var C=this.id.match(T),k="xaxis"+C[1],E="yaxis"+C[2];this.xaxis=this.fullLayout[k],this.yaxis=this.fullLayout[E]},P.relayoutCallback=function(){var I=this.graphDiv,C=this.xaxis,k=this.yaxis,E=I.layout,R={},O=R[C._name+".range"]=C.range.slice(),N=R[k._name+".range"]=k.range.slice();R[C._name+".autorange"]=C.autorange,R[k._name+".autorange"]=k.autorange,r.call("_storeDirectGUIEdit",I.layout,I._fullLayout._preGUI,R);var G=E[C._name];G.range=O,G.autorange=C.autorange;var U=E[k._name];U.range=N,U.autorange=k.autorange,R.lastInputTime=this.camera.lastInputTime,I.emit("plotly_relayout",R)},P.cameraChanged=function(){var I=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),k=this.glplotOptions.ticks;L(C,k)&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=I.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},P.handleAnnotations=function(){for(var I=this.graphDiv,C=this.fullLayout.annotations,k=0;k<C.length;k++){var E=C[k];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&r.getComponentMethod("annotations","drawOne")(I,k)}},P.destroy=function(){if(!!this.glplot){var I=this.traces;I&&Object.keys(I).map(function(C){I[C].dispose(),delete I[C]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},P.plot=function(I,C,k){var E=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(I,C),this.updateFx(k.dragmode);var R=k.width,O=k.height;this.updateSize(this.canvas);var N=this.glplotOptions;N.merge(k),N.screenBox=[0,0,R,O];var G={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};p(G,this.xaxis),p(G,this.yaxis);var U=k._size,Y=this.xaxis.domain,z=this.yaxis.domain;N.viewBox=[U.l+Y[0]*U.w,U.b+z[0]*U.h,R-U.r-(1-Y[1])*U.w,O-U.t-(1-z[1])*U.h],this.mouseContainer.style.width=U.w*(Y[1]-Y[0])+"px",this.mouseContainer.style.height=U.h*(z[1]-z[0])+"px",this.mouseContainer.height=U.h*(z[1]-z[0]),this.mouseContainer.style.left=U.l+Y[0]*U.w+"px",this.mouseContainer.style.top=U.t+(1-z[1])*U.h+"px";var B,H;for(H=0;H<2;++H)B=this[x[H]],B._length=N.viewBox[H+2]-N.viewBox[H],v(this.graphDiv,B),B.setScale();s(G),N.ticks=this.computeTickMarks(),N.dataBox=this.calcDataBox(),N.merge(k),E.update(N),this.glplot.draw()},P.calcDataBox=function(){var I=this.xaxis,C=this.yaxis,k=I.range,E=C.range,R=I.r2l,O=C.r2l;return[R(k[0]),O(E[0]),R(k[1]),O(E[1])]},P.setRanges=function(I){var C=this.xaxis,k=this.yaxis,E=C.l2r,R=k.l2r;C.range=[E(I[0]),E(I[2])],k.range=[R(I[1]),R(I[3])]},P.updateTraces=function(I,C){var k=Object.keys(this.traces),E,R,O;this.fullData=I;e:for(E=0;E<k.length;E++){var N=k[E],G=this.traces[N];for(R=0;R<I.length;R++)if(O=I[R],O.uid===N&&O.type===G.type)continue e;G.dispose(),delete this.traces[N]}for(E=0;E<I.length;E++){O=I[E];var U=C[E],Y=this.traces[O.uid];Y?Y.update(O,U):(Y=O._module.plot(this,O,U),this.traces[O.uid]=Y)}this.glplot.objects.sort(function(z,B){return z._trace.index-B._trace.index})},P.updateFx=function(I){y(I)||b(I)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),I==="pan"?this.mouseContainer.style.cursor="move":I==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},P.emitPointAction=function(I,C){for(var k=I.trace.uid,E=I.pointIndex,R,O=0;O<this.fullData.length;O++)this.fullData[O].uid===k&&(R=this.fullData[O]);var N={x:I.traceCoord[0],y:I.traceCoord[1],curveNumber:R.index,pointNumber:E,data:R._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};u.appendArrayPointValue(N,R,E),this.graphDiv.emit(C,{points:[N]})},P.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var I=this.glplot,C=this.camera,k=C.mouseListener,E=this.lastButtonState===1&&k.buttons===0,R=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var O=k.x*I.pixelRatio,N=this.canvas.height-I.pixelRatio*k.y,G;if(C.boxEnabled&&R.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])],Y=0;Y<2;Y++)C.boxStart[Y]===C.boxEnd[Y]&&(U[Y]=I.dataBox[Y],U[Y+2]=I.dataBox[Y+2]);I.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=R._size,B=this.xaxis.domain,H=this.yaxis.domain;G=I.pick(O/I.pixelRatio+z.l+B[0]*z.w,N/I.pixelRatio-(z.t+(1-H[1])*z.h));var V=G&&G.object._trace.handlePick(G);if(V&&E&&this.emitPointAction(V,"plotly_click"),G&&G.object._trace.hoverinfo!=="skip"&&R.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var Z=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:G.dataCoord}),Z.screenCoord=[((I.viewBox[2]-I.viewBox[0])*(G.dataCoord[0]-I.dataBox[0])/(I.dataBox[2]-I.dataBox[0])+I.viewBox[0])/I.pixelRatio,(this.canvas.height-(I.viewBox[3]-I.viewBox[1])*(G.dataCoord[1]-I.dataBox[1])/(I.dataBox[3]-I.dataBox[1])-I.viewBox[1])/I.pixelRatio],this.emitPointAction(V,"plotly_hover");var q=this.fullData[Z.trace.index]||{},J=Z.pointIndex,ne=u.castHoverinfo(q,R,J);if(ne&&ne!=="all"){var ve=ne.split("+");ve.indexOf("x")===-1&&(Z.traceCoord[0]=void 0),ve.indexOf("y")===-1&&(Z.traceCoord[1]=void 0),ve.indexOf("z")===-1&&(Z.traceCoord[2]=void 0),ve.indexOf("text")===-1&&(Z.textLabel=void 0),ve.indexOf("name")===-1&&(Z.name=void 0)}u.loneHover({x:Z.screenCoord[0],y:Z.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Z.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Z.traceCoord[1]),zLabel:Z.traceCoord[2],text:Z.textLabel,name:Z.name,color:u.castHoverOption(q,J,"bgcolor")||Z.color,borderColor:u.castHoverOption(q,J,"bordercolor"),fontFamily:u.castHoverOption(q,J,"font.family"),fontSize:u.castHoverOption(q,J,"font.size"),fontColor:u.castHoverOption(q,J,"font.color"),nameLength:u.castHoverOption(q,J,"namelength"),textAlign:u.castHoverOption(q,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}G||this.unhover(),I.draw()}},P.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),u.loneUnhover(this.svgContainer))},P.hoverFormatter=function(I,C){if(C!==void 0){var k=this[I];return a.tickText(k,k.c2l(C),"hover").text}}},{"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib/show_no_webgl_msg":800,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/constants":834,"../cartesian/constraints":835,"./camera":866,"./convert":867,"gl-plot2d":317,"gl-select-box":333,"gl-spikes2d":342,"webgl-context":606}],870:[function(e,d,S){var r=e("../../plot_api/edit_types").overrideAll,a=e("../../components/fx/layout_attributes"),u=e("./scene"),c=e("../get_data").getSubplotData,t=e("../../lib"),f=e("../../constants/xmlns_namespaces"),n="gl3d",o="scene";S.name=n,S.attr=o,S.idRoot=o,S.idRegex=S.attrRegex=t.counterRegex("scene"),S.attributes=e("./layout/attributes"),S.layoutAttributes=e("./layout/layout_attributes"),S.baseLayoutAttrOverrides=r({hoverlabel:a.hoverlabel},"plot","nested"),S.supplyLayoutDefaults=e("./layout/defaults"),S.plot=function(h){for(var i=h._fullLayout,s=h._fullData,p=i._subplots[n],v=0;v<p.length;v++){var m=p[v],b=c(s,n,m),y=i[m],x=y.camera,w=y._scene;w||(w=new u({id:m,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio,camera:x},i),y._scene=w),w.viewInitial||(w.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),w.plot(b,i,h.layout)}},S.clean=function(l,h,i,s){for(var p=s._subplots[n]||[],v=0;v<p.length;v++){var m=p[v];!h[m]&&!!s[m]._scene&&(s[m]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+m).remove())}},S.toSVG=function(l){for(var h=l._fullLayout,i=h._subplots[n],s=h._size,p=0;p<i.length;p++){var v=h[i[p]],m=v.domain,b=v._scene,y=b.toImage("png"),x=h._glimages.append("svg:image");x.attr({xmlns:f.svg,"xlink:href":y,x:s.l+s.w*m.x[0],y:s.t+s.h*(1-m.y[1]),width:s.w*(m.x[1]-m.x[0]),height:s.h*(m.y[1]-m.y[0]),preserveAspectRatio:"none"}),b.destroy()}},S.cleanId=function(h){if(!!h.match(/^scene[0-9]*$/)){var i=h.substr(5);return i==="1"&&(i=""),o+i}},S.updateFx=function(l){for(var h=l._fullLayout,i=h._subplots[n],s=0;s<i.length;s++){var p=h[i[s]]._scene;p.updateFx(h.dragmode,h.hovermode)}}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../plot_api/edit_types":810,"../get_data":865,"./layout/attributes":871,"./layout/defaults":875,"./layout/layout_attributes":876,"./scene":880}],871:[function(e,d,S){d.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],872:[function(e,d,S){var r=e("../../../components/color"),a=e("../../cartesian/layout_attributes"),u=e("../../../lib/extend").extendFlat,c=e("../../../plot_api/edit_types").overrideAll;d.exports=c({visible:a.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:r.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:a.color,categoryorder:a.categoryorder,categoryarray:a.categoryarray,title:{text:a.title.text,font:a.title.font},type:u({},a.type,{values:["-","linear","log","date","category"]}),autotypenumbers:a.autotypenumbers,autorange:a.autorange,rangemode:a.rangemode,range:u({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,mirror:a.mirror,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:a.tickfont,tickangle:a.tickangle,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:a.showline,linecolor:a.linecolor,linewidth:a.linewidth,showgrid:a.showgrid,gridcolor:u({},a.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:a.gridwidth,zeroline:a.zeroline,zerolinecolor:a.zerolinecolor,zerolinewidth:a.zerolinewidth,_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":643,"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],873:[function(e,d,S){var r=e("tinycolor2").mix,a=e("../../../lib"),u=e("../../../plot_api/plot_template"),c=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),f=e("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],o=100*(204-68)/(255-68);d.exports=function(h,i,s){var p,v;function m(x,w){return a.coerce(p,v,c,x,w)}for(var b=0;b<n.length;b++){var y=n[b];p=h[y]||{},v=u.newContainer(i,y),v._id=y[0]+s.scene,v._name=y,t(p,v,m,s),f(p,v,m,{font:s.font,letter:y[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),m("gridcolor",r(v.color,s.bgColor,o).toRgbString()),m("title.text",y[0]),v.setScale=a.noop,m("showspikes")&&(m("spikesides"),m("spikethickness"),m("spikecolor",v.color)),m("showaxeslabels"),m("showbackground")&&m("backgroundcolor")}}},{"../../../lib":778,"../../../plot_api/plot_template":817,"../../cartesian/axis_defaults":830,"../../cartesian/type_defaults":853,"./axis_attributes":872,tinycolor2:576}],874:[function(e,d,S){var r=e("../../../lib/str2rgbarray"),a=e("../../../lib"),u=["xaxis","yaxis","zaxis"];function c(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=c.prototype;t.merge=function(n,o){for(var l=this,h=0;h<3;++h){var i=o[u[h]];if(!i.visible){l.tickEnable[h]=!1,l.labelEnable[h]=!1,l.lineEnable[h]=!1,l.lineTickEnable[h]=!1,l.gridEnable[h]=!1,l.zeroEnable[h]=!1,l.backgroundEnable[h]=!1;continue}l.labels[h]=n._meta?a.templateString(i.title.text,n._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(l.labelColor[h]=r(i.title.font.color)),i.title.font.family&&(l.labelFont[h]=i.title.font.family),i.title.font.size&&(l.labelSize[h]=i.title.font.size)),"showline"in i&&(l.lineEnable[h]=i.showline),"linecolor"in i&&(l.lineColor[h]=r(i.linecolor)),"linewidth"in i&&(l.lineWidth[h]=i.linewidth),"showgrid"in i&&(l.gridEnable[h]=i.showgrid),"gridcolor"in i&&(l.gridColor[h]=r(i.gridcolor)),"gridwidth"in i&&(l.gridWidth[h]=i.gridwidth),i.type==="log"?l.zeroEnable[h]=!1:"zeroline"in i&&(l.zeroEnable[h]=i.zeroline),"zerolinecolor"in i&&(l.zeroLineColor[h]=r(i.zerolinecolor)),"zerolinewidth"in i&&(l.zeroLineWidth[h]=i.zerolinewidth),"ticks"in i&&!!i.ticks?l.lineTickEnable[h]=!0:l.lineTickEnable[h]=!1,"ticklen"in i&&(l.lineTickLength[h]=l._defaultLineTickLength[h]=i.ticklen),"tickcolor"in i&&(l.lineTickColor[h]=r(i.tickcolor)),"tickwidth"in i&&(l.lineTickWidth[h]=i.tickwidth),"tickangle"in i&&(l.tickAngle[h]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(l.tickEnable[h]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(l.tickColor[h]=r(i.tickfont.color)),i.tickfont.family&&(l.tickFont[h]=i.tickfont.family),i.tickfont.size&&(l.tickSize[h]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(l.lineTickMirror[h]=!0,l.lineMirror[h]=!0):i.mirror===!0?(l.lineTickMirror[h]=!1,l.lineMirror[h]=!0):(l.lineTickMirror[h]=!1,l.lineMirror[h]=!1):l.lineMirror[h]=!1,"showbackground"in i&&i.showbackground!==!1?(l.backgroundEnable[h]=!0,l.backgroundColor[h]=r(i.backgroundcolor)):l.backgroundEnable[h]=!1}};function f(n,o){var l=new c;return l.merge(n,o),l}d.exports=f},{"../../../lib":778,"../../../lib/str2rgbarray":802}],875:[function(e,d,S){var r=e("../../../lib"),a=e("../../../components/color"),u=e("../../../registry"),c=e("../../subplot_defaults"),t=e("./axis_defaults"),f=e("./layout_attributes"),n=e("../../get_data").getSubplotData,o="gl3d";d.exports=function(i,s,p){var v=s._basePlotModules.length>1;function m(b){if(!v){var y=r.validate(i[b],f[b]);if(y)return i[b]}}c(i,s,p,{type:o,attributes:f,handleDefaults:l,fullLayout:s,font:s.font,fullData:p,getDfltFromLayout:m,autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})};function l(h,i,s,p){for(var v=s("bgcolor"),m=a.combine(v,p.paper_bgcolor),b=["up","center","eye"],y=0;y<b.length;y++)s("camera."+b[y]+".x"),s("camera."+b[y]+".y"),s("camera."+b[y]+".z");s("camera.projection.type");var x=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),w=x?"manual":"auto",g=s("aspectmode",w);x||(h.aspectratio=i.aspectratio={x:1,y:1,z:1},g==="manual"&&(i.aspectmode="auto"),h.aspectmode=i.aspectmode);var T=n(p.fullData,o,p.id);t(h,i,{font:p.font,scene:p.id,data:T,bgColor:m,calendar:p.calendar,autotypenumbersDflt:p.autotypenumbersDflt,fullLayout:p.fullLayout}),u.getComponentMethod("annotations3d","handleDefaults")(h,i,p);var M=p.getDfltFromLayout("dragmode");if(M!==!1&&!M)if(M="orbit",h.camera&&h.camera.up){var P=h.camera.up.x,L=h.camera.up.y,I=h.camera.up.z;I!==0&&(!P||!L||!I||I/Math.sqrt(P*P+L*L+I*I)>.999)&&(M="turntable")}else M="turntable";s("dragmode",M),s("hovermode",p.getDfltFromLayout("hovermode"))}},{"../../../components/color":643,"../../../lib":778,"../../../registry":911,"../../get_data":865,"../../subplot_defaults":905,"./axis_defaults":873,"./layout_attributes":876}],876:[function(e,d,S){var r=e("./axis_attributes"),a=e("../../domain").attributes,u=e("../../../lib/extend").extendFlat,c=e("../../../lib").counterRegex;function t(f,n,o){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:o,editType:"camera"},editType:"camera"}}d.exports={_arrayAttrRegexps:[c("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:u(t(0,0,1),{}),center:u(t(0,0,0),{}),eye:u(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:a({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:r,yaxis:r,zaxis:r,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":778,"../../../lib/extend":768,"../../domain":855,"./axis_attributes":872}],877:[function(e,d,S){var r=e("../../../lib/str2rgbarray"),a=["xaxis","yaxis","zaxis"];function u(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var c=u.prototype;c.merge=function(f){for(var n=0;n<3;++n){var o=f[a[n]];if(!o.visible){this.enabled[n]=!1,this.drawSides[n]=!1;continue}this.enabled[n]=o.showspikes,this.colors[n]=r(o.spikecolor),this.drawSides[n]=o.spikesides,this.lineWidth[n]=o.spikethickness}};function t(f){var n=new u;return n.merge(f),n}d.exports=t},{"../../../lib/str2rgbarray":802}],878:[function(e,d,S){d.exports=t;var r=e("../../cartesian/axes"),a=e("../../../lib"),u=["xaxis","yaxis","zaxis"];function c(f){for(var n=new Array(3),o=0;o<3;++o){for(var l=f[o],h=new Array(l.length),i=0;i<l.length;++i)h[i]=l[i].x;n[o]=h}return n}function t(f){for(var n=f.axesOptions,o=f.glplot.axesPixels,l=f.fullSceneLayout,h=[[],[],[]],i=0;i<3;++i){var s=l[u[i]];if(s._length=(o[i].hi-o[i].lo)*o[i].pixelsPerDataUnit/f.dataScale[i],Math.abs(s._length)===1/0||isNaN(s._length))h[i]=[];else{s._input_range=s.range.slice(),s.range[0]=o[i].lo/f.dataScale[i],s.range[1]=o[i].hi/f.dataScale[i],s._m=1/(f.dataScale[i]*o[i].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var p=s.tickmode;if(s.tickmode==="auto"){s.tickmode="linear";var v=s.nticks||a.constrain(s._length/40,4,9);r.autoTicks(s,Math.abs(s.range[1]-s.range[0])/v)}for(var m=r.calcTicks(s,{msUTC:!0}),b=0;b<m.length;++b)m[b].x=m[b].x*f.dataScale[i],s.type==="date"&&(m[b].text=m[b].text.replace(/\<br\>/g," "));h[i]=m,s.tickmode=p}}n.ticks=h;for(var i=0;i<3;++i){.5*(f.glplot.bounds[0][i]+f.glplot.bounds[1][i]);for(var b=0;b<2;++b)n.bounds[b][i]=f.glplot.bounds[b][i]}f.contourLevels=c(h)}},{"../../../lib":778,"../../cartesian/axes":828}],879:[function(e,d,S){function r(u,c){var t=[0,0,0,0],f,n;for(f=0;f<4;++f)for(n=0;n<4;++n)t[n]+=u[4*f+n]*c[f];return t}function a(u,c){var t=r(u.projection,r(u.view,r(u.model,[c[0],c[1],c[2],1])));return t}d.exports=a},{}],880:[function(e,d,S){var r=e("gl-plot3d"),a=r.createCamera,u=r.createScene,c=e("webgl-context"),t=e("has-passive-events"),f=e("../../registry"),n=e("../../lib"),o=n.preserveDrawingBuffer(),l=e("../../plots/cartesian/axes"),h=e("../../components/fx"),i=e("../../lib/str2rgbarray"),s=e("../../lib/show_no_webgl_msg"),p=e("./project"),v=e("./layout/convert"),m=e("./layout/spikes"),b=e("./layout/tick_marks"),y,x;function w(R,O){var N=document.createElement("div"),G=R.container;this.graphDiv=R.graphDiv;var U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.style.position="absolute",U.style.top=U.style.left="0px",U.style.width=U.style.height="100%",U.style["z-index"]=20,U.style["pointer-events"]="none",N.appendChild(U),this.svgContainer=U,N.id=R.id,N.style.position="absolute",N.style.top=N.style.left="0px",N.style.width=N.style.height="100%",G.appendChild(N),this.fullLayout=O,this.id=R.id||"scene",this.fullSceneLayout=O[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(O,O[this.id]),this.spikeOptions=m(O[this.id]),this.container=N,this.staticMode=!!R.staticPlot,this.pixelRatio=this.pixelRatio||R.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=f.getComponentMethod("annotations3d","convert"),this.drawAnnotations=f.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var g=w.prototype;g.prepareOptions=function(){var R=this,O={canvas:R.canvas,gl:R.gl,glOptions:{preserveDrawingBuffer:o,premultipliedAlpha:!0,antialias:!0},container:R.container,axes:R.axesOptions,spikes:R.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:R.camera,pixelRatio:R.pixelRatio};if(R.staticMode){if(!x&&(y=document.createElement("canvas"),x=c({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!x))throw new Error("error creating static canvas/context for image server");O.gl=x,O.canvas=y}return O};var T=!0;g.tryCreatePlot=function(){var R=this,O=R.prepareOptions(),N=!0;try{R.glplot=u(O)}catch{if(R.staticMode||!T||o)N=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{o=O.glOptions.preserveDrawingBuffer=!0,R.glplot=u(O)}catch{o=O.glOptions.preserveDrawingBuffer=!1,N=!1}}}return T=!1,N},g.initializeGLCamera=function(){var R=this,O=R.fullSceneLayout.camera,N=O.projection.type==="orthographic";R.camera=a(R.container,{center:[O.center.x,O.center.y,O.center.z],eye:[O.eye.x,O.eye.y,O.eye.z],up:[O.up.x,O.up.y,O.up.z],_ortho:N,zoomMin:.01,zoomMax:100,mode:"orbit"})},g.initializeGLPlot=function(){var R=this;R.initializeGLCamera();var O=R.tryCreatePlot();if(!O)return s(R);R.traces={},R.make4thDimension();var N=R.graphDiv,G=N.layout,U=function(){var z={};return R.isCameraChanged(G)&&(z[R.id+".camera"]=R.getCamera()),R.isAspectChanged(G)&&(z[R.id+".aspectratio"]=R.glplot.getAspectratio(),G[R.id].aspectmode!=="manual"&&(R.fullSceneLayout.aspectmode=G[R.id].aspectmode=z[R.id+".aspectmode"]="manual")),z},Y=function(z){if(z.fullSceneLayout.dragmode!==!1){var B=U();z.saveLayout(G),z.graphDiv.emit("plotly_relayout",B)}};return R.glplot.canvas&&(R.glplot.canvas.addEventListener("mouseup",function(){Y(R)}),R.glplot.canvas.addEventListener("wheel",function(z){if(N._context._scrollZoom.gl3d){if(R.camera._ortho){var B=z.deltaX>z.deltaY?1.1:.9090909090909091,H=R.glplot.getAspectratio();R.glplot.setAspectratio({x:B*H.x,y:B*H.y,z:B*H.z})}Y(R)}},t?{passive:!1}:!1),R.glplot.canvas.addEventListener("mousemove",function(){if(R.fullSceneLayout.dragmode!==!1&&R.camera.mouseListener.buttons!==0){var z=U();R.graphDiv.emit("plotly_relayouting",z)}}),R.staticMode||R.glplot.canvas.addEventListener("webglcontextlost",function(z){N&&N.emit&&N.emit("plotly_webglcontextlost",{event:z,layer:R.id})},!1)),R.glplot.oncontextloss=function(){R.recoverContext()},R.glplot.onrender=function(){R.render()},!0},g.render=function(){var R=this,O=R.graphDiv,N,G=R.svgContainer,U=R.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var Y=O._fullLayout._invScaleX,z=O._fullLayout._invScaleY,B=U.width*Y,H=U.height*z;G.setAttributeNS(null,"viewBox","0 0 "+B+" "+H),G.setAttributeNS(null,"width",B),G.setAttributeNS(null,"height",H),b(R),R.glplot.axes.update(R.axesOptions);for(var V=Object.keys(R.traces),Z=null,q=R.glplot.selection,J=0;J<V.length;++J)N=R.traces[V[J]],N.data.hoverinfo!=="skip"&&N.handlePick(q)&&(Z=N),N.setContourLevels&&N.setContourLevels();function ne(be,xe){var ke=R.fullSceneLayout[be];return l.tickText(ke,ke.d2l(xe),"hover").text}var ve;if(Z!==null){var $=p(R.glplot.cameraParams,q.dataCoordinate);N=Z.data;var j=O._fullData[N.index],ae=q.index,ie={xLabel:ne("xaxis",q.traceCoordinate[0]),yLabel:ne("yaxis",q.traceCoordinate[1]),zLabel:ne("zaxis",q.traceCoordinate[2])},te=h.castHoverinfo(j,R.fullLayout,ae),re=(te||"").split("+"),ce=te&&te==="all";!j.hovertemplate&&!ce&&(re.indexOf("x")===-1&&(ie.xLabel=void 0),re.indexOf("y")===-1&&(ie.yLabel=void 0),re.indexOf("z")===-1&&(ie.zLabel=void 0),re.indexOf("text")===-1&&(q.textLabel=void 0),re.indexOf("name")===-1&&(Z.name=void 0));var pe,fe=[];N.type==="cone"||N.type==="streamtube"?(ie.uLabel=ne("xaxis",q.traceCoordinate[3]),(ce||re.indexOf("u")!==-1)&&fe.push("u: "+ie.uLabel),ie.vLabel=ne("yaxis",q.traceCoordinate[4]),(ce||re.indexOf("v")!==-1)&&fe.push("v: "+ie.vLabel),ie.wLabel=ne("zaxis",q.traceCoordinate[5]),(ce||re.indexOf("w")!==-1)&&fe.push("w: "+ie.wLabel),ie.normLabel=q.traceCoordinate[6].toPrecision(3),(ce||re.indexOf("norm")!==-1)&&fe.push("norm: "+ie.normLabel),N.type==="streamtube"&&(ie.divergenceLabel=q.traceCoordinate[7].toPrecision(3),(ce||re.indexOf("divergence")!==-1)&&fe.push("divergence: "+ie.divergenceLabel)),q.textLabel&&fe.push(q.textLabel),pe=fe.join("<br>")):N.type==="isosurface"||N.type==="volume"?(ie.valueLabel=l.tickText(R._mockAxis,R._mockAxis.d2l(q.traceCoordinate[3]),"hover").text,fe.push("value: "+ie.valueLabel),q.textLabel&&fe.push(q.textLabel),pe=fe.join("<br>")):pe=q.textLabel;var se={x:q.traceCoordinate[0],y:q.traceCoordinate[1],z:q.traceCoordinate[2],data:j._input,fullData:j,curveNumber:j.index,pointNumber:ae};h.appendArrayPointValue(se,j,ae),N._module.eventData&&(se=j._module.eventData(se,q,j,{},ae));var de={points:[se]};R.fullSceneLayout.hovermode&&h.loneHover({trace:j,x:(.5+.5*$[0]/$[3])*B,y:(.5-.5*$[1]/$[3])*H,xLabel:ie.xLabel,yLabel:ie.yLabel,zLabel:ie.zLabel,text:pe,name:Z.name,color:h.castHoverOption(j,ae,"bgcolor")||Z.color,borderColor:h.castHoverOption(j,ae,"bordercolor"),fontFamily:h.castHoverOption(j,ae,"font.family"),fontSize:h.castHoverOption(j,ae,"font.size"),fontColor:h.castHoverOption(j,ae,"font.color"),nameLength:h.castHoverOption(j,ae,"namelength"),textAlign:h.castHoverOption(j,ae,"align"),hovertemplate:n.castOption(j,ae,"hovertemplate"),hovertemplateLabels:n.extendFlat({},se,ie),eventData:[se]},{container:G,gd:O}),q.buttons&&q.distance<5?O.emit("plotly_click",de):O.emit("plotly_hover",de),ve=de}else h.loneUnhover(G),O.emit("plotly_unhover",ve);R.drawAnnotations(R)},g.recoverContext=function(){var R=this;R.glplot.dispose();var O=function(){if(R.glplot.gl.isContextLost()){requestAnimationFrame(O);return}if(!R.initializeGLPlot()){n.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}R.plot.apply(R,R.plotArgs)};requestAnimationFrame(O)};var M=["xaxis","yaxis","zaxis"];function P(R,O,N){for(var G=R.fullSceneLayout,U=0;U<3;U++){var Y=M[U],z=Y.charAt(0),B=G[Y],H=O[z],V=O[z+"calendar"],Z=O["_"+z+"length"];if(!n.isArrayOrTypedArray(H))N[0][U]=Math.min(N[0][U],0),N[1][U]=Math.max(N[1][U],Z-1);else for(var q,J=0;J<(Z||H.length);J++)if(n.isArrayOrTypedArray(H[J]))for(var ne=0;ne<H[J].length;++ne)q=B.d2l(H[J][ne],0,V),!isNaN(q)&&isFinite(q)&&(N[0][U]=Math.min(N[0][U],q),N[1][U]=Math.max(N[1][U],q));else q=B.d2l(H[J],0,V),!isNaN(q)&&isFinite(q)&&(N[0][U]=Math.min(N[0][U],q),N[1][U]=Math.max(N[1][U],q))}}function L(R,O){for(var N=R.fullSceneLayout,G=N.annotations||[],U=0;U<3;U++)for(var Y=M[U],z=Y.charAt(0),B=N[Y],H=0;H<G.length;H++){var V=G[H];if(V.visible){var Z=B.r2l(V[z]);!isNaN(Z)&&isFinite(Z)&&(O[0][U]=Math.min(O[0][U],Z),O[1][U]=Math.max(O[1][U],Z))}}}g.plot=function(R,O,N){var G=this;if(G.plotArgs=[R,O,N],G.glplot.contextLost)return;var U,Y,z,B,H,V,Z=O[G.id],q=N[G.id];G.fullLayout=O,G.fullSceneLayout=Z,G.axesOptions.merge(O,Z),G.spikeOptions.merge(Z),G.setViewport(Z),G.updateFx(Z.dragmode,Z.hovermode),G.camera.enableWheel=G.graphDiv._context._scrollZoom.gl3d,G.glplot.setClearColor(i(Z.bgcolor)),G.setConvert(H),R?Array.isArray(R)||(R=[R]):R=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<R.length;++z)U=R[z],!(U.visible!==!0||U._length===0)&&P(this,U,J);L(this,J);var ne=[1,1,1];for(B=0;B<3;++B)J[1][B]===J[0][B]?ne[B]=1:ne[B]=1/(J[1][B]-J[0][B]);for(G.dataScale=ne,G.convertAnnotations(this),z=0;z<R.length;++z)U=R[z],!(U.visible!==!0||U._length===0)&&(Y=G.traces[U.uid],Y?Y.data.type===U.type?Y.update(U):(Y.dispose(),Y=U._module.plot(this,U),G.traces[U.uid]=Y):(Y=U._module.plot(this,U),G.traces[U.uid]=Y),Y.name=U.name);var ve=Object.keys(G.traces);e:for(z=0;z<ve.length;++z){for(B=0;B<R.length;++B)if(R[B].uid===ve[z]&&R[B].visible===!0&&R[B]._length!==0)continue e;Y=G.traces[ve[z]],Y.dispose(),delete G.traces[ve[z]]}G.glplot.objects.sort(function(Be,$e){return Be._trace.data.index-$e._trace.data.index});var $=[[0,0,0],[0,0,0]],j={};for(z=0;z<3;++z){if(H=Z[M[z]],V=H.type,V in j?(j[V].acc*=ne[z],j[V].count+=1):j[V]={acc:ne[z],count:1},H.autorange){$[0][z]=1/0,$[1][z]=-1/0;var ae=G.glplot.objects,ie=G.fullSceneLayout.annotations||[],te=H._name.charAt(0);for(B=0;B<ae.length;B++){var re=ae[B],ce=re.bounds,pe=re._trace.data._pad||0;re.constructor.name==="ErrorBars"&&H._lowerLogErrorBound?$[0][z]=Math.min($[0][z],H._lowerLogErrorBound):$[0][z]=Math.min($[0][z],ce[0][z]/ne[z]-pe),$[1][z]=Math.max($[1][z],ce[1][z]/ne[z]+pe)}for(B=0;B<ie.length;B++){var fe=ie[B];if(fe.visible){var se=H.r2l(fe[te]);$[0][z]=Math.min($[0][z],se),$[1][z]=Math.max($[1][z],se)}}if("rangemode"in H&&H.rangemode==="tozero"&&($[0][z]=Math.min($[0][z],0),$[1][z]=Math.max($[1][z],0)),$[0][z]>$[1][z])$[0][z]=-1,$[1][z]=1;else{var de=$[1][z]-$[0][z];$[0][z]-=de/32,$[1][z]+=de/32}if(H.autorange==="reversed"){var be=$[0][z];$[0][z]=$[1][z],$[1][z]=be}}else{var xe=H.range;$[0][z]=H.r2l(xe[0]),$[1][z]=H.r2l(xe[1])}$[0][z]===$[1][z]&&($[0][z]-=1,$[1][z]+=1),G.glplot.setBounds(z,{min:$[0][z]*ne[z],max:$[1][z]*ne[z]})}var ke,Re=Z.aspectmode;if(Re==="cube")ke=[1,1,1];else if(Re==="manual"){var Ke=Z.aspectratio;ke=[Ke.x,Ke.y,Ke.z]}else if(Re==="auto"||Re==="data"){var ze=[1,1,1];for(z=0;z<3;++z){H=Z[M[z]],V=H.type;var Je=j[V];ze[z]=Math.pow(Je.acc,1/Je.count)/ne[z]}Re==="data"||Math.max.apply(null,ze)/Math.min.apply(null,ze)<=4?ke=ze:ke=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");Z.aspectratio.x=q.aspectratio.x=ke[0],Z.aspectratio.y=q.aspectratio.y=ke[1],Z.aspectratio.z=q.aspectratio.z=ke[2],G.glplot.setAspectratio(Z.aspectratio),G.viewInitial.aspectratio||(G.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),G.viewInitial.aspectmode||(G.viewInitial.aspectmode=Z.aspectmode);var qe=Z.domain||null,Ee=O._size||null;if(qe&&Ee){var Ae=G.container.style;Ae.position="absolute",Ae.left=Ee.l+qe.x[0]*Ee.w+"px",Ae.top=Ee.t+(1-qe.y[1])*Ee.h+"px",Ae.width=Ee.w*(qe.x[1]-qe.x[0])+"px",Ae.height=Ee.h*(qe.y[1]-qe.y[0])+"px"}G.glplot.redraw()},g.destroy=function(){var R=this;!R.glplot||(R.camera.mouseListener.enabled=!1,R.container.removeEventListener("wheel",R.camera.wheelListener),R.camera=null,R.glplot.dispose(),R.container.parentNode.removeChild(R.container),R.glplot=null)};function I(R){return[[R.eye.x,R.eye.y,R.eye.z],[R.center.x,R.center.y,R.center.z],[R.up.x,R.up.y,R.up.z]]}function C(R){return{up:{x:R.up[0],y:R.up[1],z:R.up[2]},center:{x:R.center[0],y:R.center[1],z:R.center[2]},eye:{x:R.eye[0],y:R.eye[1],z:R.eye[2]},projection:{type:R._ortho===!0?"orthographic":"perspective"}}}g.getCamera=function(){var R=this;return R.camera.view.recalcMatrix(R.camera.view.lastT()),C(R.camera)},g.setViewport=function(R){var O=this,N=R.camera;O.camera.lookAt.apply(this,I(N)),O.glplot.setAspectratio(R.aspectratio);var G=N.projection.type==="orthographic",U=O.camera._ortho;G!==U&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},g.isCameraChanged=function(R){var O=this,N=O.getCamera(),G=n.nestedProperty(R,O.id+".camera"),U=G.get();function Y(V,Z,q,J){var ne=["up","center","eye"],ve=["x","y","z"];return Z[ne[q]]&&V[ne[q]][ve[J]]===Z[ne[q]][ve[J]]}var z=!1;if(U===void 0)z=!0;else{for(var B=0;B<3;B++)for(var H=0;H<3;H++)if(!Y(N,U,B,H)){z=!0;break}(!U.projection||N.projection&&N.projection.type!==U.projection.type)&&(z=!0)}return z},g.isAspectChanged=function(R){var O=this,N=O.glplot.getAspectratio(),G=n.nestedProperty(R,O.id+".aspectratio"),U=G.get();return U===void 0||U.x!==N.x||U.y!==N.y||U.z!==N.z},g.saveLayout=function(R){var O=this,N=O.fullLayout,G,U,Y,z,B,H,V=O.isCameraChanged(R),Z=O.isAspectChanged(R),q=V||Z;if(q){var J={};if(V&&(G=O.getCamera(),U=n.nestedProperty(R,O.id+".camera"),Y=U.get(),J[O.id+".camera"]=Y),Z&&(z=O.glplot.getAspectratio(),B=n.nestedProperty(R,O.id+".aspectratio"),H=B.get(),J[O.id+".aspectratio"]=H),f.call("_storeDirectGUIEdit",R,N._preGUI,J),V){U.set(G);var ne=n.nestedProperty(N,O.id+".camera");ne.set(G)}if(Z){B.set(z);var ve=n.nestedProperty(N,O.id+".aspectratio");ve.set(z),O.glplot.redraw()}}return q},g.updateFx=function(R,O){var N=this,G=N.camera;if(G)if(R==="orbit")G.mode="orbit",G.keyBindingMode="rotate";else if(R==="turntable"){G.up=[0,0,1],G.mode="turntable",G.keyBindingMode="rotate";var U=N.graphDiv,Y=U._fullLayout,z=N.fullSceneLayout.camera,B=z.up.x,H=z.up.y,V=z.up.z;if(V/Math.sqrt(B*B+H*H+V*V)<.999){var Z=N.id+".camera.up",q={x:0,y:0,z:1},J={};J[Z]=q;var ne=U.layout;f.call("_storeDirectGUIEdit",ne,Y._preGUI,J),z.up=q,n.nestedProperty(ne,Z).set(q)}}else G.keyBindingMode=R;N.fullSceneLayout.hovermode=O};function k(R,O,N){for(var G=0,U=N-1;G<U;++G,--U)for(var Y=0;Y<O;++Y)for(var z=0;z<4;++z){var B=4*(O*G+Y)+z,H=4*(O*U+Y)+z,V=R[B];R[B]=R[H],R[H]=V}}function E(R,O,N){for(var G=0;G<N;++G)for(var U=0;U<O;++U){var Y=4*(O*G+U),z=R[Y+3];if(z>0)for(var B=255/z,H=0;H<3;++H)R[Y+H]=Math.min(B*R[Y+H],255)}}g.toImage=function(R){var O=this;R||(R="png"),O.staticMode&&O.container.appendChild(y),O.glplot.redraw();var N=O.glplot.gl,G=N.drawingBufferWidth,U=N.drawingBufferHeight;N.bindFramebuffer(N.FRAMEBUFFER,null);var Y=new Uint8Array(G*U*4);N.readPixels(0,0,G,U,N.RGBA,N.UNSIGNED_BYTE,Y),k(Y,G,U),E(Y,G,U);var z=document.createElement("canvas");z.width=G,z.height=U;var B=z.getContext("2d"),H=B.createImageData(G,U);H.data.set(Y),B.putImageData(H,0,0);var V;switch(R){case"jpeg":V=z.toDataURL("image/jpeg");break;case"webp":V=z.toDataURL("image/webp");break;default:V=z.toDataURL("image/png")}return O.staticMode&&O.container.removeChild(y),V},g.setConvert=function(){for(var R=this,O=0;O<3;O++){var N=R.fullSceneLayout[M[O]];l.setConvert(N,R.fullLayout),N.setScale=n.noop}},g.make4thDimension=function(){var R=this,O=R.graphDiv,N=O._fullLayout;R._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(R._mockAxis,N)},d.exports=w},{"../../components/fx":683,"../../lib":778,"../../lib/show_no_webgl_msg":800,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../../registry":911,"./layout/convert":874,"./layout/spikes":877,"./layout/tick_marks":878,"./project":879,"gl-plot3d":321,"has-passive-events":441,"webgl-context":606}],881:[function(e,d,S){d.exports=function(a,u,c,t){t=t||a.length;for(var f=new Array(t),n=0;n<t;n++)f[n]=[a[n],u[n],c[n]];return f}},{}],882:[function(e,d,S){var r=e("./font_attributes"),a=e("./animation_attributes"),u=e("../components/color/attributes"),c=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),f=e("../lib/extend").extendFlat,n=r({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=u.defaultLine,d.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:f(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:u.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:u.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:u.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:c.newshape,activeshape:c.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:f({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":642,"../components/shapes/draw_newshape/attributes":725,"../lib/extend":768,"./animation_attributes":822,"./font_attributes":856,"./pad_attributes":890}],883:[function(e,d,S){var r="1.10.1",a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'<a href="http://www.openstreetmap.org/about/" target="_blank">\xA9 OpenStreetMap</a>',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">\xA9 CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'<a href="https://carto.com/" target="_blank">\xA9 CARTO</a>',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},u=Object.keys(a);d.exports={requiredVersion:r,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:u,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+r+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",u.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{}],884:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){var t=u.split(" "),f=t[0],n=t[1],o=r.isArrayOrTypedArray(c)?r.mean(c):c,l=.5+o/100,h=1.5+o/100,i=["",""],s=[0,0];switch(f){case"top":i[0]="top",s[1]=-h;break;case"bottom":i[0]="bottom",s[1]=h;break}switch(n){case"left":i[1]="right",s[0]=-l;break;case"right":i[1]="left",s[0]=l;break}var p;return i[0]&&i[1]?p=i.join("-"):i[0]?p=i[0]:i[1]?p=i[1]:p="center",{anchor:p,offset:s}}},{"../../lib":778}],885:[function(e,d,S){var r=e("mapbox-gl"),a=e("../../lib"),u=a.strTranslate,c=a.strScale,t=e("../../plots/get_data").getSubplotCalcData,f=e("../../constants/xmlns_namespaces"),n=e("d3"),o=e("../../components/drawing"),l=e("../../lib/svg_text_utils"),h=e("./mapbox"),i="mapbox",s=S.constants=e("./constants");S.name=i,S.attr="subplot",S.idRoot=i,S.idRegex=S.attrRegex=a.counterRegex(i),S.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},S.layoutAttributes=e("./layout_attributes"),S.supplyLayoutDefaults=e("./layout_defaults"),S.plot=function(b){var y=b._fullLayout,x=b.calcdata,w=y._subplots[i];if(r.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var g=p(b,w);r.accessToken=g;for(var T=0;T<w.length;T++){var M=w[T],P=t(x,i,M),L=y[M],I=L._subplot;I||(I=new h(b,M),y[M]._subplot=I),I.viewInitial||(I.viewInitial={center:a.extendFlat({},L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),I.plot(P,y,b._promises)}},S.clean=function(m,b,y,x){for(var w=x._subplots[i]||[],g=0;g<w.length;g++){var T=w[g];!b[T]&&!!x[T]._subplot&&x[T]._subplot.destroy()}},S.toSVG=function(m){for(var b=m._fullLayout,y=b._subplots[i],x=b._size,w=0;w<y.length;w++){var g=b[y[w]],T=g.domain,M=g._subplot,P=M.toImage("png"),L=b._glimages.append("svg:image");L.attr({xmlns:f.svg,"xlink:href":P,x:x.l+x.w*T.x[0],y:x.t+x.h*(1-T.y[1]),width:x.w*(T.x[1]-T.x[0]),height:x.h*(T.y[1]-T.y[0]),preserveAspectRatio:"none"});var I=n.select(g._subplot.div),C=I.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!C){var k=b._glimages.append("g");k.attr("transform",u(x.l+x.w*T.x[0]+10,x.t+x.h*(1-T.y[0])-31)),k.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),k.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),k.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),k.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=I.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),R=b._glimages.append("g"),O=R.append("text");O.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var N=o.bBox(O.node()),G=x.w*(T.x[1]-T.x[0]);if(N.width>G/2){var U=E.split("|").join("<br>");O.text(U).attr("data-unformatted",U).call(l.convertToTspans,m),N=o.bBox(O.node())}O.attr("transform",u(-3,-N.height+8)),R.insert("rect",".static-attribution").attr({x:-N.width-6,y:-N.height-3,width:N.width+6,height:N.height+3,fill:"rgba(255, 255, 255, 0.75)"});var Y=1;N.width+6>G&&(Y=G/(N.width+6));var z=[x.l+x.w*T.x[1],x.t+x.h*(1-T.y[0])];R.attr("transform",u(z[0],z[1])+c(Y))}};function p(m,b){var y=m._fullLayout,x=m._context;if(x.mapboxAccessToken==="")return"";for(var w=[],g=[],T=!1,M=!1,P=0;P<b.length;P++){var L=y[b[P]],I=L.accesstoken;v(L.style)&&(I?a.pushUnique(w,I):(v(L._input.style)&&(a.error("Uses Mapbox map style, but did not set an access token."),T=!0),M=!0)),I&&a.pushUnique(g,I)}if(M){var C=T?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw a.error(C),new Error(C)}return w.length?(w.length>1&&a.warn(s.multipleTokensErrorMsg),w[0]):(g.length&&a.log(["Listed mapbox access token(s)",g.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function v(m){return typeof m=="string"&&(s.styleValuesMapbox.indexOf(m)!==-1||m.indexOf("mapbox://")===0)}S.updateFx=function(m){for(var b=m._fullLayout,y=b._subplots[i],x=0;x<y.length;x++){var w=b[y[x]]._subplot;w.updateFx(b)}}},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/get_data":865,"./constants":883,"./layout_attributes":887,"./layout_defaults":888,"./mapbox":889,d3:169,"mapbox-gl":473}],886:[function(e,d,S){var r=e("../../lib"),a=e("../../lib/svg_text_utils").sanitizeHTML,u=e("./convert_text_opts"),c=e("./constants");function t(h,i){this.subplot=h,this.uid=h.uid+"-"+i,this.index=i,this.idSource="source-"+this.uid,this.idLayer=c.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=t.prototype;f.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=n(i)},f.needsNewImage=function(h){var i=this.subplot.map;return i.getSource(this.idSource)&&this.sourceType==="image"&&h.sourcetype==="image"&&(this.source!==h.source||JSON.stringify(this.coordinates)!==JSON.stringify(h.coordinates))},f.needsNewSource=function(h){return this.sourceType!==h.sourcetype||JSON.stringify(this.source)!==JSON.stringify(h.source)||this.layerType!==h.type},f.needsNewLayer=function(h){return this.layerType!==h.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(h){var i=this.subplot.map;i.getSource(this.idSource).updateImage({url:h.source,coordinates:h.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());s!==null&&this.subplot.map.moveLayer(this.idLayer,s)},f.updateSource=function(h){var i=this.subplot.map;if(i.getSource(this.idSource)&&i.removeSource(this.idSource),this.sourceType=h.sourcetype,this.source=h.source,!!n(h)){var s=l(h);i.addSource(this.idSource,s)}},f.findFollowingMapboxLayerId=function(h){if(h==="traces")for(var i=this.subplot.getMapLayers(),s=0;s<i.length;s++){var p=i[s].id;if(typeof p=="string"&&p.indexOf(c.traceLayerPrefix)===0){h=p;break}}return h},f.updateLayer=function(h){var i=this.subplot,s=o(h),p=this.lookupBelow(),v=this.findFollowingMapboxLayerId(p);this.removeLayer(),n(h)&&i.addLayer({id:this.idLayer,source:this.idSource,"source-layer":h.sourcelayer||"",type:h.type,minzoom:h.minzoom,maxzoom:h.maxzoom,layout:s.layout,paint:s.paint},v),this.layerType=h.type,this.below=p},f.updateStyle=function(h){if(n(h)){var i=o(h);this.subplot.setOptions(this.idLayer,"setLayoutProperty",i.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",i.paint)}},f.removeLayer=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer)},f.dispose=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer),h.getSource(this.idSource)&&h.removeSource(this.idSource)};function n(h){if(!h.visible)return!1;var i=h.source;if(Array.isArray(i)&&i.length>0){for(var s=0;s<i.length;s++)if(typeof i[s]!="string"||i[s].length===0)return!1;return!0}return r.isPlainObject(i)||typeof i=="string"&&i.length>0}function o(h){var i={},s={};switch(h.type){case"circle":r.extendFlat(s,{"circle-radius":h.circle.radius,"circle-color":h.color,"circle-opacity":h.opacity});break;case"line":r.extendFlat(s,{"line-width":h.line.width,"line-color":h.color,"line-opacity":h.opacity,"line-dasharray":h.line.dash});break;case"fill":r.extendFlat(s,{"fill-color":h.color,"fill-outline-color":h.fill.outlinecolor,"fill-opacity":h.opacity});break;case"symbol":var p=h.symbol,v=u(p.textposition,p.iconsize);r.extendFlat(i,{"icon-image":p.icon+"-15","icon-size":p.iconsize/10,"text-field":p.text,"text-size":p.textfont.size,"text-anchor":v.anchor,"text-offset":v.offset,"symbol-placement":p.placement}),r.extendFlat(s,{"icon-color":h.color,"text-color":p.textfont.color,"text-opacity":h.opacity});break;case"raster":r.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":h.opacity});break}return{layout:i,paint:s}}function l(h){var i=h.sourcetype,s=h.source,p={type:i},v;return i==="geojson"?v="data":i==="vector"?v=typeof s=="string"?"url":"tiles":i==="raster"?(v="tiles",p.tileSize=256):i==="image"&&(v="url",p.coordinates=h.coordinates),p[v]=s,h.sourceattribution&&(p.attribution=a(h.sourceattribution)),p}d.exports=function(i,s,p){var v=new t(i,s);return v.update(p),v}},{"../../lib":778,"../../lib/svg_text_utils":803,"./constants":883,"./convert_text_opts":884}],887:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color").defaultLine,u=e("../domain").attributes,c=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,f=e("../../plot_api/edit_types").overrideAll,n=e("../../plot_api/plot_template").templatedArray,o=e("./constants"),l=c({});l.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var h=d.exports=f({_arrayAttrRegexps:[r.counterRegex("mapbox",".layers",!0)],domain:u({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:o.styleValuesMapbox.concat(o.styleValuesNonMapbox),dflt:o.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:a},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:a}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:l,textposition:r.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");h.uirevision={valType:"any",editType:"none"}},{"../../components/color":643,"../../lib":778,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../domain":855,"../font_attributes":856,"./constants":883}],888:[function(e,d,S){var r=e("../../lib"),a=e("../subplot_defaults"),u=e("../array_container_defaults"),c=e("./layout_attributes");d.exports=function(o,l,h){a(o,l,h,{type:"mapbox",attributes:c,handleDefaults:t,partition:"y",accessToken:l._mapboxAccessToken})};function t(n,o,l,h){l("accesstoken",h.accessToken),l("style"),l("center.lon"),l("center.lat"),l("zoom"),l("bearing"),l("pitch"),u(n,o,{name:"layers",handleItemDefaults:f}),o._input=n}function f(n,o){function l(m,b){return r.coerce(n,o,c.layers,m,b)}var h=l("visible");if(h){var i=l("sourcetype"),s=i==="raster"||i==="image";l("source"),l("sourceattribution"),i==="vector"&&l("sourcelayer"),i==="image"&&l("coordinates");var p;s&&(p="raster");var v=l("type",p);s&&v!=="raster"&&(v=o.type="raster",r.log("Source types *raster* and *image* must drawn *raster* layer type.")),l("below"),l("color"),l("opacity"),l("minzoom"),l("maxzoom"),v==="circle"&&l("circle.radius"),v==="line"&&(l("line.width"),l("line.dash")),v==="fill"&&l("fill.outlinecolor"),v==="symbol"&&(l("symbol.icon"),l("symbol.iconsize"),l("symbol.text"),r.coerceFont(l,"symbol.textfont"),l("symbol.textposition"),l("symbol.placement"))}}},{"../../lib":778,"../array_container_defaults":823,"../subplot_defaults":905,"./layout_attributes":887}],889:[function(e,d,S){var r=e("mapbox-gl"),a=e("../../lib"),u=e("../../lib/geo_location_utils"),c=e("../../registry"),t=e("../cartesian/axes"),f=e("../../components/dragelement"),n=e("../../components/fx"),o=e("../../components/dragelement/helpers"),l=o.rectMode,h=o.drawMode,i=o.selectMode,s=e("../cartesian/select").prepSelect,p=e("../cartesian/select").clearSelect,v=e("../cartesian/select").clearSelectionsCache,m=e("../cartesian/select").selectOnClick,b=e("./constants"),y=e("./layers");function x(L,I){this.id=I,this.gd=L;var C=L._fullLayout,k=L._context;this.container=C._glcontainer.node(),this.isStatic=k.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=x.prototype;w.plot=function(L,I,C){var k=this,E=I[k.id];k.map&&E.accesstoken!==k.accessToken&&(k.map.remove(),k.map=null,k.styleObj=null,k.traceHash={},k.layerList=[]);var R;k.map?R=new Promise(function(O,N){k.updateMap(L,I,O,N)}):R=new Promise(function(O,N){k.createMap(L,I,O,N)}),C.push(R)},w.createMap=function(L,I,C,k){var E=this,R=I[E.id],O=E.styleObj=T(R.style);E.accessToken=R.accesstoken;var N=E.map=new r.Map({container:E.div,style:O.style,center:P(R.center),zoom:R.zoom,bearing:R.bearing,pitch:R.pitch,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new r.AttributionControl({compact:!0}));N._canvas.style.left="0px",N._canvas.style.top="0px",E.rejectOnError(k),E.isStatic||E.initFx(L,I);var G=[];G.push(new Promise(function(U){N.once("load",U)})),G=G.concat(u.fetchTraceGeoData(L)),Promise.all(G).then(function(){E.fillBelowLookup(L,I),E.updateData(L),E.updateLayout(I),E.resolveOnRender(C)}).catch(k)},w.updateMap=function(L,I,C,k){var E=this,R=E.map,O=I[this.id];E.rejectOnError(k);var N=[],G=T(O.style);JSON.stringify(E.styleObj)!==JSON.stringify(G)&&(E.styleObj=G,R.setStyle(G.style),E.traceHash={},N.push(new Promise(function(U){R.once("styledata",U)}))),N=N.concat(u.fetchTraceGeoData(L)),Promise.all(N).then(function(){E.fillBelowLookup(L,I),E.updateData(L),E.updateLayout(I),E.resolveOnRender(C)}).catch(k)},w.fillBelowLookup=function(L,I){var C=I[this.id],k=C.layers,E,R,O=this.belowLookup={},N=!1;for(E=0;E<L.length;E++){var G=L[E][0].trace,U=G._module;typeof G.below=="string"?R=G.below:U.getBelow&&(R=U.getBelow(G,this)),R===""&&(N=!0),O["trace-"+G.uid]=R||""}for(E=0;E<k.length;E++){var Y=k[E];typeof Y.below=="string"?R=Y.below:N?R="traces":R="",O["layout-"+E]=R}var z={},B,H;for(B in O)R=O[B],z[R]?z[R].push(B):z[R]=[B];for(R in z){var V=z[R];if(V.length>1)for(E=0;E<V.length;E++)B=V[E],B.indexOf("trace-")===0?(H=B.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):B.indexOf("layout-")===0&&(H=B.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};w.updateData=function(L){var I=this.traceHash,C,k,E,R,O=L.slice().sort(function(z,B){return g[z[0].trace.type]-g[B[0].trace.type]});for(E=0;E<O.length;E++){var N=O[E];k=N[0].trace,C=I[k.uid];var G=!1;C&&(C.type===k.type?(C.update(N),G=!0):C.dispose()),!G&&k._module&&(I[k.uid]=k._module.plot(this,N))}var U=Object.keys(I);e:for(E=0;E<U.length;E++){var Y=U[E];for(R=0;R<L.length;R++)if(k=L[R][0].trace,Y===k.uid)continue e;C=I[Y],C.dispose(),delete I[Y]}},w.updateLayout=function(L){var I=this.map,C=L[this.id];!this.dragging&&!this.wheeling&&(I.setCenter(P(C.center)),I.setZoom(C.zoom),I.setBearing(C.bearing),I.setPitch(C.pitch)),this.updateLayers(L),this.updateFramework(L),this.updateFx(L),this.map.resize(),this.gd._context._scrollZoom.mapbox?I.scrollZoom.enable():I.scrollZoom.disable()},w.resolveOnRender=function(L){var I=this.map;I.on("render",function C(){I.loaded()&&(I.off("render",C),setTimeout(L,10))})},w.rejectOnError=function(L){var I=this.map;function C(){L(new Error(b.mapOnErrorMsg))}I.once("error",C),I.once("style.error",C),I.once("source.error",C),I.once("tile.error",C),I.once("layer.error",C)},w.createFramework=function(L){var I=this,C=I.div=document.createElement("div");C.id=I.uid,C.style.position="absolute",I.container.appendChild(C),I.xaxis={_id:"x",c2p:function(k){return I.project(k).x}},I.yaxis={_id:"y",c2p:function(k){return I.project(k).y}},I.updateFramework(L),I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(I.mockAxis,L)},w.initFx=function(L,I){var C=this,k=C.gd,E=C.map;E.on("moveend",function(N){if(!!C.map){var G=k._fullLayout;if(N.originalEvent||C.wheeling){var U=G[C.id];c.call("_storeDirectGUIEdit",k.layout,G._preGUI,C.getViewEdits(U));var Y=C.getView();U._input.center=U.center=Y.center,U._input.zoom=U.zoom=Y.zoom,U._input.bearing=U.bearing=Y.bearing,U._input.pitch=U.pitch=Y.pitch,k.emit("plotly_relayout",C.getViewEditsWithDerived(Y))}N.originalEvent&&N.originalEvent.type==="mouseup"?C.dragging=!1:C.wheeling&&(C.wheeling=!1),G._rehover&&G._rehover()}}),E.on("wheel",function(){C.wheeling=!0}),E.on("mousemove",function(N){var G=C.div.getBoundingClientRect(),U=[N.originalEvent.offsetX,N.originalEvent.offsetY];N.target.getBoundingClientRect=function(){return G},C.xaxis.p2c=function(){return E.unproject(U).lng},C.yaxis.p2c=function(){return E.unproject(U).lat},k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===C.id&&k._fullLayout[C.id]&&n.hover(k,N,C.id)},n.hover(k,N,C.id),k._fullLayout._hoversubplot=C.id});function R(){n.loneUnhover(I._hoverlayer)}E.on("dragstart",function(){C.dragging=!0,R()}),E.on("zoomstart",R),E.on("mouseout",function(){k._fullLayout._hoversubplot=null});function O(){var N=C.getView();k.emit("plotly_relayouting",C.getViewEditsWithDerived(N))}E.on("drag",O),E.on("zoom",O),E.on("dblclick",function(){var N=k._fullLayout[C.id];c.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,C.getViewEdits(N));var G=C.viewInitial;E.setCenter(P(G.center)),E.setZoom(G.zoom),E.setBearing(G.bearing),E.setPitch(G.pitch);var U=C.getView();N._input.center=N.center=U.center,N._input.zoom=N.zoom=U.zoom,N._input.bearing=N.bearing=U.bearing,N._input.pitch=N.pitch=U.pitch,k.emit("plotly_doubleclick",null),k.emit("plotly_relayout",C.getViewEditsWithDerived(U))}),C.clearSelect=function(){v(C.dragOptions),p(C.dragOptions.gd)},C.onClickInPanFn=function(N){return function(G){var U=k._fullLayout.clickmode;U.indexOf("select")>-1&&m(G.originalEvent,k,[C.xaxis],[C.yaxis],C.id,N),U.indexOf("event")>-1&&n.click(k,G.originalEvent)}}},w.updateFx=function(L){var I=this,C=I.map,k=I.gd;if(I.isStatic)return;function E(G){var U=I.map.unproject(G);return[U.lng,U.lat]}var R=L.dragmode,O;l(R)?O=function(G,U){var Y=G.range={};Y[I.id]=[E([U.xmin,U.ymin]),E([U.xmax,U.ymax])]}:O=function(G,U,Y){var z=G.lassoPoints={};z[I.id]=Y.filtered.map(E)};var N=I.dragOptions;I.dragOptions=a.extendDeep(N||{},{dragmode:L.dragmode,element:I.div,gd:k,plotinfo:{id:I.id,domain:L[I.id].domain,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:O},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id}),C.off("click",I.onClickInPanHandler),i(R)||h(R)?(C.dragPan.disable(),C.on("zoomstart",I.clearSelect),I.dragOptions.prepFn=function(G,U,Y){s(G,U,Y,I.dragOptions,R)},f.init(I.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",I.clearSelect),I.div.onmousedown=null,I.onClickInPanHandler=I.onClickInPanFn(I.dragOptions),C.on("click",I.onClickInPanHandler))},w.updateFramework=function(L){var I=L[this.id].domain,C=L._size,k=this.div.style;k.width=C.w*(I.x[1]-I.x[0])+"px",k.height=C.h*(I.y[1]-I.y[0])+"px",k.left=C.l+I.x[0]*C.w+"px",k.top=C.t+(1-I.y[1])*C.h+"px",this.xaxis._offset=C.l+I.x[0]*C.w,this.xaxis._length=C.w*(I.x[1]-I.x[0]),this.yaxis._offset=C.t+(1-I.y[1])*C.h,this.yaxis._length=C.h*(I.y[1]-I.y[0])},w.updateLayers=function(L){var I=L[this.id],C=I.layers,k=this.layerList,E;if(C.length!==k.length){for(E=0;E<k.length;E++)k[E].dispose();for(k=this.layerList=[],E=0;E<C.length;E++)k.push(y(this,E,C[E]))}else for(E=0;E<C.length;E++)k[E].update(C[E])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(L,I,C){for(var k in C)this.map[I](L,k,C[k])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(L,I){var C=this.map;if(typeof I=="string"){if(I===""){C.addLayer(L,I);return}for(var k=this.getMapLayers(),E=0;E<k.length;E++)if(I===k[E].id){C.addLayer(L,I);return}a.warn(["Trying to add layer with *below* value",I,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(L)},w.project=function(L){return this.map.project(new r.LngLat(L[0],L[1]))},w.getView=function(){var L=this.map,I=L.getCenter(),C={lon:I.lng,lat:I.lat},k=L.getCanvas(),E=k.width,R=k.height;return{center:C,zoom:L.getZoom(),bearing:L.getBearing(),pitch:L.getPitch(),_derived:{coordinates:[L.unproject([0,0]).toArray(),L.unproject([E,0]).toArray(),L.unproject([E,R]).toArray(),L.unproject([0,R]).toArray()]}}},w.getViewEdits=function(L){for(var I=this.id,C=["center","zoom","bearing","pitch"],k={},E=0;E<C.length;E++){var R=C[E];k[I+"."+R]=L[R]}return k},w.getViewEditsWithDerived=function(L){var I=this.id,C=this.getViewEdits(L);return C[I+"._derived"]=L._derived,C};function T(L){var I={};return a.isPlainObject(L)?(I.id=L.id,I.style=L):typeof L=="string"?(I.id=L,b.styleValuesMapbox.indexOf(L)!==-1?I.style=M(L):b.stylesNonMapbox[L]?I.style=b.stylesNonMapbox[L]:I.style=L):(I.id=b.styleValueDflt,I.style=M(b.styleValueDflt)),I.transition={duration:0,delay:0},I}function M(L){return b.styleUrlPrefix+L+"-"+b.styleUrlSuffix}function P(L){return[L.lon,L.lat]}d.exports=x},{"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../registry":911,"../cartesian/axes":828,"../cartesian/select":847,"./constants":883,"./layers":886,"mapbox-gl":473}],890:[function(e,d,S){d.exports=function(r){var a=r.editType;return{t:{valType:"number",dflt:0,editType:a},r:{valType:"number",dflt:0,editType:a},b:{valType:"number",dflt:0,editType:a},l:{valType:"number",dflt:0,editType:a},editType:a}}},{}],891:[function(e,d,S){var r=e("d3"),a=e("d3-time-format").timeFormatLocale,u=e("fast-isnumeric"),c=e("../registry"),t=e("../plot_api/plot_schema"),f=e("../plot_api/plot_template"),n=e("../lib"),o=e("../components/color"),l=e("../constants/numerical").BADNUM,h=e("./cartesian/axis_ids"),i=e("./cartesian/handle_outline").clearSelect,s=e("./animation_attributes"),p=e("./frame_attributes"),v=e("../plots/get_data").getModuleCalcData,m=n.relinkPrivateKeys,b=n._,y=d.exports={};n.extendFlat(y,c),y.attributes=e("./attributes"),y.attributes.type.values=y.allTypes,y.fontAttrs=e("./font_attributes"),y.layoutAttributes=e("./layout_attributes"),y.fontWeight="normal";var x=y.transformsRegistry,w=e("./command");y.executeAPICommand=w.executeAPICommand,y.computeAPICommandBindings=w.computeAPICommandBindings,y.manageCommandObserver=w.manageCommandObserver,y.hasSimpleAPICommandBindings=w.hasSimpleAPICommandBindings,y.redrawText=function($){$=n.getGraphDiv($);var j=$._fullLayout||{},ae=j._has&&j._has("polar"),ie=!ae&&$.data&&$.data[0]&&$.data[0].r;if(!ie)return new Promise(function(te){setTimeout(function(){c.getComponentMethod("annotations","draw")($),c.getComponentMethod("legend","draw")($),c.getComponentMethod("colorbar","draw")($),te(y.previousPromises($))},300)})},y.resize=function($){$=n.getGraphDiv($);var j,ae=new Promise(function(ie,te){(!$||n.isHidden($))&&te(new Error("Resize must be passed a displayed plot div element.")),$._redrawTimer&&clearTimeout($._redrawTimer),$._resolveResize&&(j=$._resolveResize),$._resolveResize=ie,$._redrawTimer=setTimeout(function(){if(!$.layout||$.layout.width&&$.layout.height||n.isHidden($)){ie($);return}delete $.layout.width,delete $.layout.height;var re=$.changed;$.autoplay=!0,c.call("relayout",$,{autosize:!0}).then(function(){$.changed=re,$._resolveResize===ie&&(delete $._resolveResize,ie($))})},100)});return j&&j(ae),ae},y.previousPromises=function($){if(($._promises||[]).length)return Promise.all($._promises).then(function(){$._promises=[]})},y.addLinks=function($){if(!(!$._context.showLink&&!$._context.showSources)){var j=$._fullLayout,ae=n.ensureSingle(j._paper,"text","js-plot-link-container",function(fe){fe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:o.defaultLine,"pointer-events":"all"}).each(function(){var se=r.select(this);se.append("tspan").classed("js-link-to-tool",!0),se.append("tspan").classed("js-link-spacer",!0),se.append("tspan").classed("js-sourcelinks",!0)})}),ie=ae.node(),te={y:j._paper.attr("height")-9};document.body.contains(ie)&&ie.getComputedTextLength()>=j.width-20?(te["text-anchor"]="start",te.x=5):(te["text-anchor"]="end",te.x=j._paper.attr("width")-7),ae.attr(te);var re=ae.select(".js-link-to-tool"),ce=ae.select(".js-link-spacer"),pe=ae.select(".js-sourcelinks");$._context.showSources&&$._context.showSources($),$._context.showLink&&g($,re),ce.text(re.text()&&pe.text()?" - ":"")}};function g($,j){j.text("");var ae=j.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text($._context.linkText+" "+String.fromCharCode(187));if($._context.sendData)ae.on("click",function(){y.sendDataToCloud($)});else{var ie=window.location.pathname.split("/"),te=window.location.search;ae.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ie[2].split(".")[0]+"/"+ie[1]+te})}}y.sendDataToCloud=function($){var j=(window.PLOTLYENV||{}).BASE_URL||$._context.plotlyServerURL;if(!!j){$.emit("plotly_beforeexport");var ae=r.select($).append("div").attr("id","hiddenform").style("display","none"),ie=ae.append("form").attr({action:j+"/external",method:"post",target:"_blank"}),te=ie.append("input").attr({type:"text",name:"data"});return te.node().value=y.graphJson($,!1,"keepdata"),ie.node().submit(),ae.remove(),$.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];y.supplyDefaults=function($,j){var ae=j&&j.skipUpdateCalc,ie=$._fullLayout||{};if(ie._skipDefaults){delete ie._skipDefaults;return}var te=$._fullLayout={},re=$.layout||{},ce=$._fullData||[],pe=$._fullData=[],fe=$.data||[],se=$.calcdata||[],de=$._context||{},be;$._transitionData||y.createTransitionData($),te._dfltTitle={plot:b($,"Click to enter Plot title"),x:b($,"Click to enter X axis title"),y:b($,"Click to enter Y axis title"),colorbar:b($,"Click to enter Colorscale title"),annotation:b($,"new text")},te._traceWord=b($,"trace");var xe=I($,T);if(te._mapboxAccessToken=de.mapboxAccessToken,ie._initialAutoSizeIsDone){var ke=ie.width,Re=ie.height;y.supplyLayoutGlobalDefaults(re,te,xe),re.width||(te.width=ke),re.height||(te.height=Re),y.sanitizeMargins(te)}else{y.supplyLayoutGlobalDefaults(re,te,xe);var Ke=!re.width||!re.height,ze=te.autosize,Je=de.autosizable,qe=Ke&&(ze||Je);qe?y.plotAutoSize($,re,te):Ke&&y.sanitizeMargins(te),!ze&&Ke&&(re.width=te.width,re.height=te.height)}te._d3locale=C(xe,te.separators),te._extraFormat=I($,M),te._initialAutoSizeIsDone=!0,te._dataLength=fe.length,te._modules=[],te._visibleModules=[],te._basePlotModules=[];var Ee=te._subplots=L(),Ae=te._splomAxes={x:{},y:{}},Be=te._splomSubplots={};te._splomGridDflt={},te._scatterStackOpts={},te._firstScatter={},te._alignmentOpts={},te._colorAxes={},te._requestRangeslider={},te._traceUids=P(ce,fe),te._globalTransforms=($._context||{}).globalTransforms,y.supplyDataDefaults(fe,pe,re,te);var $e=Object.keys(Ae.x),xt=Object.keys(Ae.y);if($e.length>1&&xt.length>1){for(c.getComponentMethod("grid","sizeDefaults")(re,te),be=0;be<$e.length;be++)n.pushUnique(Ee.xaxis,$e[be]);for(be=0;be<xt.length;be++)n.pushUnique(Ee.yaxis,xt[be]);for(var bt in Be)n.pushUnique(Ee.cartesian,bt)}if(te._has=y._hasPlotType.bind(te),ce.length===pe.length)for(be=0;be<pe.length;be++)m(pe[be],ce[be]);y.supplyLayoutModuleDefaults(re,te,pe,$._transitionData);var Ne=te._visibleModules,st=[];for(be=0;be<Ne.length;be++){var _t=Ne[be].crossTraceDefaults;_t&&n.pushUnique(st,_t)}for(be=0;be<st.length;be++)st[be](pe,te);te._hasOnlyLargeSploms=te._basePlotModules.length===1&&te._basePlotModules[0].name==="splom"&&$e.length>15&&xt.length>15&&te.shapes.length===0&&te.images.length===0,te._hasCartesian=te._has("cartesian"),te._hasGeo=te._has("geo"),te._hasGL3D=te._has("gl3d"),te._hasGL2D=te._has("gl2d"),te._hasTernary=te._has("ternary"),te._hasPie=te._has("pie"),y.linkSubplots(pe,te,ce,ie),y.cleanPlot(pe,te,ce,ie);var Ot=!!(ie._has&&ie._has("gl2d")),Wt=!!(te._has&&te._has("gl2d")),Et=!!(ie._has&&ie._has("cartesian")),jt=!!(te._has&&te._has("cartesian")),Zt=Et||Ot,Mt=jt||Wt;Zt&&!Mt?ie._bgLayer.remove():Mt&&!Zt&&(te._shouldCreateBgLayer=!0),ie._zoomlayer&&!$._dragging&&i({_fullLayout:ie}),k(pe,te),m(te,ie),c.getComponentMethod("colorscale","crossTraceDefaults")(pe,te),te._preGUI||(te._preGUI={}),te._tracePreGUI||(te._tracePreGUI={});var At=te._tracePreGUI,ft={},ot;for(ot in At)ft[ot]="old";for(be=0;be<pe.length;be++)ot=pe[be]._fullInput.uid,ft[ot]||(At[ot]={}),ft[ot]="new";for(ot in ft)ft[ot]==="old"&&delete At[ot];G(te),c.getComponentMethod("rangeslider","makeData")(te),!ae&&se.length===pe.length&&y.supplyDefaultsUpdateCalc(se,pe)},y.supplyDefaultsUpdateCalc=function($,j){for(var ae=0;ae<j.length;ae++){var ie=j[ae],te=($[ae]||[])[0];if(te&&te.trace){var re=te.trace;if(re._hasCalcTransform){var ce=re._arrayAttrs,pe,fe,se;for(pe=0;pe<ce.length;pe++)fe=ce[pe],se=n.nestedProperty(re,fe).get().slice(),n.nestedProperty(ie,fe).set(se)}te.trace=ie}}};function P($,j){var ae=j.length,ie=[],te,re;for(te=0;te<$.length;te++){var ce=$[te]._fullInput;ce!==re&&ie.push(ce),re=ce}var pe=ie.length,fe=new Array(ae),se={};function de(ke,Re){fe[Re]=ke,se[ke]=1}function be(ke,Re){if(ke&&typeof ke=="string"&&!se[ke])return de(ke,Re),!0}for(te=0;te<ae;te++){var xe=j[te].uid;typeof xe=="number"&&(xe=String(xe)),!be(xe,te)&&(te<pe&&be(ie[te].uid,te)||de(n.randstr(se),te))}return fe}function L(){var $=c.collectableSubplotTypes,j={},ae,ie;if(!$){$=[];var te=c.subplotsRegistry;for(var re in te){var ce=te[re],pe=ce.attr;if(pe&&($.push(re),Array.isArray(pe)))for(ie=0;ie<pe.length;ie++)n.pushUnique($,pe[ie])}}for(ae=0;ae<$.length;ae++)j[$[ae]]=[];return j}function I($,j){var ae=$._context.locale;ae||(ae="en-US");var ie=!1,te={};function re(be){for(var xe=!0,ke=0;ke<j.length;ke++){var Re=j[ke];te[Re]||(be[Re]?te[Re]=be[Re]:xe=!1)}xe&&(ie=!0)}for(var ce=0;ce<2;ce++){for(var pe=$._context.locales,fe=0;fe<2;fe++){var se=(pe[ae]||{}).format;if(se&&(re(se),ie))break;pe=c.localeRegistry}var de=ae.split("-")[0];if(ie||de===ae)break;ae=de}return ie||re(c.localeRegistry.en.format),te}function C($,j){return $.decimal=j.charAt(0),$.thousands=j.charAt(1),{numberFormat:r.locale($).numberFormat,timeFormat:a($).utcFormat}}function k($,j){var ae,ie=[];j.meta&&(ae=j._meta={meta:j.meta,layout:{meta:j.meta}});for(var te=0;te<$.length;te++){var re=$[te];re.meta?ie[re.index]=re._meta={meta:re.meta}:j.meta&&(re._meta={meta:j.meta}),j.meta&&(re._meta.layout={meta:j.meta})}ie.length&&(ae||(ae=j._meta={}),ae.data=ie)}y.createTransitionData=function($){$._transitionData||($._transitionData={}),$._transitionData._frames||($._transitionData._frames=[]),$._transitionData._frameHash||($._transitionData._frameHash={}),$._transitionData._counter||($._transitionData._counter=0),$._transitionData._interruptCallbacks||($._transitionData._interruptCallbacks=[])},y._hasPlotType=function($){var j,ae=this._basePlotModules||[];for(j=0;j<ae.length;j++)if(ae[j].name===$)return!0;var ie=this._modules||[];for(j=0;j<ie.length;j++){var te=ie[j].name;if(te===$)return!0;var re=c.modules[te];if(re&&re.categories[$])return!0}return!1},y.cleanPlot=function($,j,ae,ie){var te,re,ce=ie._basePlotModules||[];for(te=0;te<ce.length;te++){var pe=ce[te];pe.clean&&pe.clean($,j,ae,ie)}var fe=ie._has&&ie._has("gl"),se=j._has&&j._has("gl");fe&&!se&&ie._glcontainer!==void 0&&(ie._glcontainer.selectAll(".gl-canvas").remove(),ie._glcontainer.selectAll(".no-webgl").remove(),ie._glcanvas=null);var de=!!ie._infolayer;e:for(te=0;te<ae.length;te++){var be=ae[te],xe=be.uid;for(re=0;re<$.length;re++){var ke=$[re];if(xe===ke.uid)continue e}de&&ie._infolayer.select(".cb"+xe).remove()}},y.linkSubplots=function($,j,ae,ie){var te,re,ce=ie._plots||{},pe=j._plots={},fe=j._subplots,se={_fullData:$,_fullLayout:j},de=fe.cartesian.concat(fe.gl2d||[]);for(te=0;te<de.length;te++){var be=de[te],xe=ce[be],ke=h.getFromId(se,be,"x"),Re=h.getFromId(se,be,"y"),Ke;for(xe?Ke=pe[be]=xe:(Ke=pe[be]={},Ke.id=be),ke._counterAxes.push(Re._id),Re._counterAxes.push(ke._id),ke._subplotsWith.push(be),Re._subplotsWith.push(be),Ke.xaxis=ke,Ke.yaxis=Re,Ke._hasClipOnAxisFalse=!1,re=0;re<$.length;re++){var ze=$[re];if(ze.xaxis===Ke.xaxis._id&&ze.yaxis===Ke.yaxis._id&&ze.cliponaxis===!1){Ke._hasClipOnAxisFalse=!0;break}}}var Je=h.list(se,null,!0),qe;for(te=0;te<Je.length;te++){qe=Je[te];var Ee=null;qe.overlaying&&(Ee=h.getFromId(se,qe.overlaying),Ee&&Ee.overlaying&&(qe.overlaying=!1,Ee=null)),qe._mainAxis=Ee||qe,Ee&&(qe.domain=Ee.domain.slice()),qe._anchorAxis=qe.anchor==="free"?null:h.getFromId(se,qe.anchor)}for(te=0;te<Je.length;te++)if(qe=Je[te],qe._counterAxes.sort(h.idSort),qe._subplotsWith.sort(n.subplotSort),qe._mainSubplot=E(qe,j),qe._counterAxes.length&&(qe.spikemode&&qe.spikemode.indexOf("across")!==-1||qe.automargin&&qe.mirror&&qe.anchor!=="free"||c.getComponentMethod("rangeslider","isVisible")(qe))){var Ae=1,Be=0;for(re=0;re<qe._counterAxes.length;re++){var $e=h.getFromId(se,qe._counterAxes[re]);Ae=Math.min(Ae,$e.domain[0]),Be=Math.max(Be,$e.domain[1])}Ae<Be&&(qe._counterDomainMin=Ae,qe._counterDomainMax=Be)}};function E($,j){var ae={_fullLayout:j},ie=$._id.charAt(0)==="x",te=$._mainAxis._anchorAxis,re="",ce="",pe="";if(te&&(pe=te._mainAxis._id,re=ie?$._id+pe:pe+$._id),!re||!j._plots[re]){re="";for(var fe=$._counterAxes,se=0;se<fe.length;se++){var de=fe[se],be=ie?$._id+de:de+$._id;ce||(ce=be);var xe=h.getFromId(ae,de);if(pe&&xe.overlaying===pe){re=be;break}}}return re||ce}y.clearExpandedTraceDefaultColors=function($){var j,ae,ie;function te(ce,pe,fe,se){ae[se]=pe,ae.length=se+1,ce.valType==="color"&&ce.dflt===void 0&&j.push(ae.join("."))}for(ae=[],j=$._module._colorAttrs,j||($._module._colorAttrs=j=[],t.crawl($._module.attributes,te)),ie=0;ie<j.length;ie++){var re=n.nestedProperty($,"_input."+j[ie]);re.get()||n.nestedProperty($,j[ie]).set(null)}},y.supplyDataDefaults=function($,j,ae,ie){var te=ie._modules,re=ie._visibleModules,ce=ie._basePlotModules,pe=0,fe=0,se,de,be;ie._transformModules=[];function xe(xt){j.push(xt);var bt=xt._module;!bt||(n.pushUnique(te,bt),xt.visible===!0&&n.pushUnique(re,bt),n.pushUnique(ce,xt._module.basePlotModule),pe++,xt._input.visible!==!1&&fe++)}var ke={},Re=[],Ke=(ae.template||{}).data||{},ze=f.traceTemplater(Ke);for(se=0;se<$.length;se++){if(be=$[se],de=ze.newTrace(be),de.uid=ie._traceUids[se],y.supplyTraceDefaults(be,de,fe,ie,se),de.index=se,de._input=be,de._expandedIndex=pe,de.transforms&&de.transforms.length)for(var Je=be.visible!==!1&&de.visible===!1,qe=O(de,j,ae,ie),Ee=0;Ee<qe.length;Ee++){var Ae=qe[Ee],Be={_template:de._template,type:de.type,uid:de.uid+Ee};Je&&Ae.visible===!1&&delete Ae.visible,y.supplyTraceDefaults(Ae,Be,pe,ie,se),m(Be,Ae),Be.index=se,Be._input=be,Be._fullInput=de,Be._expandedIndex=pe,Be._expandedInput=Ae,xe(Be)}else de._fullInput=de,de._expandedInput=de,xe(de);c.traceIs(de,"carpetAxis")&&(ke[de.carpet]=de),c.traceIs(de,"carpetDependent")&&Re.push(se)}for(se=0;se<Re.length;se++)if(de=j[Re[se]],!!de.visible){var $e=ke[de.carpet];if(de._carpet=$e,!$e||!$e.visible){de.visible=!1;continue}de.xaxis=$e.xaxis,de.yaxis=$e.yaxis}},y.supplyAnimationDefaults=function($){$=$||{};var j,ae={};function ie(te,re){return n.coerce($||{},ae,s,te,re)}if(ie("mode"),ie("direction"),ie("fromcurrent"),Array.isArray($.frame))for(ae.frame=[],j=0;j<$.frame.length;j++)ae.frame[j]=y.supplyAnimationFrameDefaults($.frame[j]||{});else ae.frame=y.supplyAnimationFrameDefaults($.frame||{});if(Array.isArray($.transition))for(ae.transition=[],j=0;j<$.transition.length;j++)ae.transition[j]=y.supplyAnimationTransitionDefaults($.transition[j]||{});else ae.transition=y.supplyAnimationTransitionDefaults($.transition||{});return ae},y.supplyAnimationFrameDefaults=function($){var j={};function ae(ie,te){return n.coerce($||{},j,s.frame,ie,te)}return ae("duration"),ae("redraw"),j},y.supplyAnimationTransitionDefaults=function($){var j={};function ae(ie,te){return n.coerce($||{},j,s.transition,ie,te)}return ae("duration"),ae("easing"),j},y.supplyFrameDefaults=function($){var j={};function ae(ie,te){return n.coerce($,j,p,ie,te)}return ae("group"),ae("name"),ae("traces"),ae("baseframe"),ae("data"),ae("layout"),j},y.supplyTraceDefaults=function($,j,ae,ie,te){var re=ie.colorway||o.defaults,ce=re[ae%re.length],pe;function fe(qe,Ee){return n.coerce($,j,y.attributes,qe,Ee)}var se=fe("visible");fe("type"),fe("name",ie._traceWord+" "+te),fe("uirevision",ie.uirevision);var de=y.getModule(j);if(j._module=de,de){var be=de.basePlotModule,xe=be.attr,ke=be.attributes;if(xe&&ke){var Re=ie._subplots,Ke="";if(se||be.name!=="gl2d"){if(Array.isArray(xe))for(pe=0;pe<xe.length;pe++){var ze=xe[pe],Je=n.coerce($,j,ke,ze);Re[ze]&&n.pushUnique(Re[ze],Je),Ke+=Je}else Ke=n.coerce($,j,ke,xe);Re[be.name]&&n.pushUnique(Re[be.name],Ke)}}}return se&&(fe("customdata"),fe("ids"),fe("meta"),c.traceIs(j,"showLegend")?(n.coerce($,j,de.attributes.showlegend?de.attributes:y.attributes,"showlegend"),fe("legendgroup"),j._dfltShowLegend=!0):j._dfltShowLegend=!1,de&&de.supplyDefaults($,j,ce,ie),c.traceIs(j,"noOpacity")||fe("opacity"),c.traceIs(j,"notLegendIsolatable")&&(j.visible=!!j.visible),c.traceIs(j,"noHover")||(j.hovertemplate||n.coerceHoverinfo($,j,ie),j.type!=="parcats"&&c.getComponentMethod("fx","supplyDefaults")($,j,ce,ie)),de&&de.selectPoints&&fe("selectedpoints"),y.supplyTransformDefaults($,j,ie)),j};function R($){var j=$.transforms;if(Array.isArray(j)&&j.length)for(var ae=0;ae<j.length;ae++){var ie=j[ae],te=ie._module||x[ie.type];if(te&&te.makesData)return!0}return!1}y.hasMakesDataTransform=R,y.supplyTransformDefaults=function($,j,ae){if(!!(j._length||R($))){var ie=ae._globalTransforms||[],te=ae._transformModules||[];if(!(!Array.isArray($.transforms)&&ie.length===0))for(var re=$.transforms||[],ce=ie.concat(re),pe=j.transforms=[],fe=0;fe<ce.length;fe++){var se=ce[fe],de=se.type,be=x[de],xe,ke=!(se._module&&se._module===be),Re=be&&typeof be.transform=="function";be||n.warn("Unrecognized transform type "+de+"."),be&&be.supplyDefaults&&(ke||Re)?(xe=be.supplyDefaults(se,j,ae,$),xe.type=de,xe._module=be,n.pushUnique(te,be)):xe=n.extendFlat({},se),pe.push(xe)}}};function O($,j,ae,ie){for(var te=$.transforms,re=[$],ce=0;ce<te.length;ce++){var pe=te[ce],fe=x[pe.type];fe&&fe.transform&&(re=fe.transform(re,{transform:pe,fullTrace:$,fullData:j,layout:ae,fullLayout:ie,transformIndex:ce}))}return re}y.supplyLayoutGlobalDefaults=function($,j,ae){function ie(se,de){return n.coerce($,j,y.layoutAttributes,se,de)}var te=$.template;n.isPlainObject(te)&&(j.template=te,j._template=te.layout,j._dataTemplate=te.data),ie("autotypenumbers");var re=n.coerceFont(ie,"font");ie("title.text",j._dfltTitle.plot),n.coerceFont(ie,"title.font",{family:re.family,size:Math.round(re.size*1.4),color:re.color}),ie("title.xref"),ie("title.yref"),ie("title.x"),ie("title.y"),ie("title.xanchor"),ie("title.yanchor"),ie("title.pad.t"),ie("title.pad.r"),ie("title.pad.b"),ie("title.pad.l");var ce=ie("uniformtext.mode");ce&&ie("uniformtext.minsize"),ie("autosize",!($.width&&$.height)),ie("width"),ie("height"),ie("margin.l"),ie("margin.r"),ie("margin.t"),ie("margin.b"),ie("margin.pad"),ie("margin.autoexpand"),$.width&&$.height&&y.sanitizeMargins(j),c.getComponentMethod("grid","sizeDefaults")($,j),ie("paper_bgcolor"),ie("separators",ae.decimal+ae.thousands),ie("hidesources"),ie("colorway"),ie("datarevision");var pe=ie("uirevision");ie("editrevision",pe),ie("selectionrevision",pe),ie("modebar.orientation"),ie("modebar.bgcolor",o.addOpacity(j.paper_bgcolor,.5));var fe=o.contrast(o.rgb(j.modebar.bgcolor));ie("modebar.color",o.addOpacity(fe,.3)),ie("modebar.activecolor",o.addOpacity(fe,.7)),ie("modebar.uirevision",pe),c.getComponentMethod("shapes","supplyDrawNewShapeDefaults")($,j,ie),ie("meta"),n.isPlainObject($.transition)&&(ie("transition.duration"),ie("transition.easing"),ie("transition.ordering")),c.getComponentMethod("calendars","handleDefaults")($,j,"calendar"),c.getComponentMethod("fx","supplyLayoutGlobalDefaults")($,j,ie)};function N($){return typeof $=="string"&&$.substr($.length-2)==="px"&&parseFloat($)}y.plotAutoSize=function(j,ae,ie){var te=j._context||{},re=te.frameMargins,ce,pe,fe=n.isPlotDiv(j);if(fe&&j.emit("plotly_autosize"),te.fillFrame)ce=window.innerWidth,pe=window.innerHeight,document.body.style.overflow="hidden";else{var se=fe?window.getComputedStyle(j):{};if(ce=N(se.width)||N(se.maxWidth)||ie.width,pe=N(se.height)||N(se.maxHeight)||ie.height,u(re)&&re>0){var de=1-2*re;ce=Math.round(de*ce),pe=Math.round(de*pe)}}var be=y.layoutAttributes.width.min,xe=y.layoutAttributes.height.min;ce<be&&(ce=be),pe<xe&&(pe=xe);var ke=!ae.width&&Math.abs(ie.width-ce)>1,Re=!ae.height&&Math.abs(ie.height-pe)>1;(Re||ke)&&(ke&&(ie.width=ce),Re&&(ie.height=pe)),j._initialAutoSize||(j._initialAutoSize={width:ce,height:pe}),y.sanitizeMargins(ie)},y.supplyLayoutModuleDefaults=function($,j,ae,ie){var te=c.componentsRegistry,re=j._basePlotModules,ce,pe,fe,se=c.subplotsRegistry.cartesian;for(ce in te)fe=te[ce],fe.includeBasePlot&&fe.includeBasePlot($,j);re.length||re.push(se),j._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")($,j),se.finalizeSubplots($,j));for(var de in j._subplots)j._subplots[de].sort(n.subplotSort);for(pe=0;pe<re.length;pe++)fe=re[pe],fe.supplyLayoutDefaults&&fe.supplyLayoutDefaults($,j,ae);var be=j._modules;for(pe=0;pe<be.length;pe++)fe=be[pe],fe.supplyLayoutDefaults&&fe.supplyLayoutDefaults($,j,ae);var xe=j._transformModules;for(pe=0;pe<xe.length;pe++)fe=xe[pe],fe.supplyLayoutDefaults&&fe.supplyLayoutDefaults($,j,ae,ie);for(ce in te)fe=te[ce],fe.supplyLayoutDefaults&&fe.supplyLayoutDefaults($,j,ae)},y.purge=function($){var j=$._fullLayout||{};j._glcontainer!==void 0&&(j._glcontainer.selectAll(".gl-canvas").remove(),j._glcontainer.remove(),j._glcanvas=null),j._modeBar&&j._modeBar.destroy(),$._transitionData&&($._transitionData._interruptCallbacks&&($._transitionData._interruptCallbacks.length=0),$._transitionData._animationRaf&&window.cancelAnimationFrame($._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive($),delete $.data,delete $.layout,delete $._fullData,delete $._fullLayout,delete $.calcdata,delete $.framework,delete $.empty,delete $.fid,delete $.undoqueue,delete $.undonum,delete $.autoplay,delete $.changed,delete $._promises,delete $._redrawTimer,delete $._hmlumcount,delete $._hmpixcount,delete $._transitionData,delete $._transitioning,delete $._initialAutoSize,delete $._transitioningWithDuration,delete $._dragging,delete $._dragged,delete $._dragdata,delete $._hoverdata,delete $._snapshotInProgress,delete $._editing,delete $._mouseDownTime,delete $._legendMouseDownTime,$.removeAllListeners&&$.removeAllListeners()},y.style=function($){var j=$._fullLayout._visibleModules,ae=[],ie;for(ie=0;ie<j.length;ie++){var te=j[ie];te.style&&n.pushUnique(ae,te.style)}for(ie=0;ie<ae.length;ie++)ae[ie]($)},y.sanitizeMargins=function($){if(!(!$||!$.margin)){var j=$.width,ae=$.height,ie=$.margin,te=j-(ie.l+ie.r),re=ae-(ie.t+ie.b),ce;te<0&&(ce=(j-1)/(ie.l+ie.r),ie.l=Math.floor(ce*ie.l),ie.r=Math.floor(ce*ie.r)),re<0&&(ce=(ae-1)/(ie.t+ie.b),ie.t=Math.floor(ce*ie.t),ie.b=Math.floor(ce*ie.b))}},y.clearAutoMarginIds=function($){$._fullLayout._pushmarginIds={}},y.allowAutoMargin=function($,j){$._fullLayout._pushmarginIds[j]=1};function G($){var j=$.margin;if(!$._size){var ae=$._size={l:Math.round(j.l),r:Math.round(j.r),t:Math.round(j.t),b:Math.round(j.b),p:Math.round(j.pad)};ae.w=Math.round($.width)-ae.l-ae.r,ae.h=Math.round($.height)-ae.t-ae.b}$._pushmargin||($._pushmargin={}),$._pushmarginIds||($._pushmarginIds={})}var U=2,Y=2,z=64,B=64;y.autoMargin=function($,j,ae){var ie=$._fullLayout,te=ie.width,re=ie.height,ce=ie.margin,pe=n.constrain(te-ce.l-ce.r,U,z),fe=n.constrain(re-ce.t-ce.b,Y,B),se=Math.max(0,te-pe),de=Math.max(0,re-fe),be=ie._pushmargin,xe=ie._pushmarginIds;if(ce.autoexpand!==!1){if(!ae)delete be[j],delete xe[j];else{var ke=ae.pad;if(ke===void 0&&(ke=Math.min(12,ce.l,ce.r,ce.t,ce.b)),se){var Re=(ae.l+ae.r)/se;Re>1&&(ae.l/=Re,ae.r/=Re)}if(de){var Ke=(ae.t+ae.b)/de;Ke>1&&(ae.t/=Ke,ae.b/=Ke)}var ze=ae.xl!==void 0?ae.xl:ae.x,Je=ae.xr!==void 0?ae.xr:ae.x,qe=ae.yt!==void 0?ae.yt:ae.y,Ee=ae.yb!==void 0?ae.yb:ae.y;be[j]={l:{val:ze,size:ae.l+ke},r:{val:Je,size:ae.r+ke},b:{val:Ee,size:ae.b+ke},t:{val:qe,size:ae.t+ke}},xe[j]=1}if(!ie._replotting)return y.doAutoMargin($)}},y.doAutoMargin=function($){var j=$._fullLayout,ae=j.width,ie=j.height;j._size||(j._size={}),G(j);var te=j._size,re=j.margin,ce=n.extendFlat({},te),pe=re.l,fe=re.r,se=re.t,de=re.b,be=j._pushmargin,xe=j._pushmarginIds;if(j.margin.autoexpand!==!1){for(var ke in be)xe[ke]||delete be[ke];be.base={l:{val:0,size:pe},r:{val:1,size:fe},t:{val:1,size:se},b:{val:0,size:de}};for(var Re in be){var Ke=be[Re].l||{},ze=be[Re].b||{},Je=Ke.val,qe=Ke.size,Ee=ze.val,Ae=ze.size;for(var Be in be){if(u(qe)&&be[Be].r){var $e=be[Be].r.val,xt=be[Be].r.size;if($e>Je){var bt=(qe*$e+(xt-ae)*Je)/($e-Je),Ne=(xt*(1-Je)+(qe-ae)*(1-$e))/($e-Je);bt+Ne>pe+fe&&(pe=bt,fe=Ne)}}if(u(Ae)&&be[Be].t){var st=be[Be].t.val,_t=be[Be].t.size;if(st>Ee){var Ot=(Ae*st+(_t-ie)*Ee)/(st-Ee),Wt=(_t*(1-Ee)+(Ae-ie)*(1-st))/(st-Ee);Ot+Wt>de+se&&(de=Ot,se=Wt)}}}}}var Et=n.constrain(ae-re.l-re.r,U,z),jt=n.constrain(ie-re.t-re.b,Y,B),Zt=Math.max(0,ae-Et),Mt=Math.max(0,ie-jt);if(Zt){var At=(pe+fe)/Zt;At>1&&(pe/=At,fe/=At)}if(Mt){var ft=(de+se)/Mt;ft>1&&(de/=ft,se/=ft)}if(te.l=Math.round(pe),te.r=Math.round(fe),te.t=Math.round(se),te.b=Math.round(de),te.p=Math.round(re.pad),te.w=Math.round(ae)-te.l-te.r,te.h=Math.round(ie)-te.t-te.b,!j._replotting&&y.didMarginChange(ce,te)){"_redrawFromAutoMarginCount"in j?j._redrawFromAutoMarginCount++:j._redrawFromAutoMarginCount=1;var ot=3*(1+Object.keys(xe).length);if(j._redrawFromAutoMarginCount<ot)return c.call("plot",$);j._size=ce,n.warn("Too many auto-margin redraws.")}H($)};function H($){for(var j=h.list($,"",!0),ae=0;ae<j.length;ae++){var ie=j[ae],te=ie._hideOutOfRangeInsideTickLabels;te&&te()}}var V=["l","r","t","b","p","w","h"];y.didMarginChange=function($,j){for(var ae=0;ae<V.length;ae++){var ie=V[ae],te=$[ie],re=j[ie];if(!u(te)||Math.abs(re-te)>1)return!0}return!1},y.graphJson=function($,j,ae,ie,te,re){(te&&j&&!$._fullData||te&&!j&&!$._fullLayout)&&y.supplyDefaults($);var ce=te?$._fullData:$.data,pe=te?$._fullLayout:$.layout,fe=($._transitionData||{})._frames;function se(xe,ke){if(typeof xe=="function")return ke?"_function_":null;if(n.isPlainObject(xe)){var Re={},Ke;return Object.keys(xe).sort().forEach(function(ze){if(["_","["].indexOf(ze.charAt(0))===-1){if(typeof xe[ze]=="function"){ke&&(Re[ze]="_function");return}if(ae==="keepdata"){if(ze.substr(ze.length-3)==="src")return}else if(ae==="keepstream"){if(Ke=xe[ze+"src"],typeof Ke=="string"&&Ke.indexOf(":")>0&&!n.isPlainObject(xe.stream))return}else if(ae!=="keepall"&&(Ke=xe[ze+"src"],typeof Ke=="string"&&Ke.indexOf(":")>0))return;Re[ze]=se(xe[ze],ke)}}),Re}return Array.isArray(xe)?xe.map(function(ze){return se(ze,ke)}):n.isTypedArray(xe)?n.simpleMap(xe,n.identity):n.isJSDate(xe)?n.ms2DateTimeLocal(+xe):xe}var de={data:(ce||[]).map(function(xe){var ke=se(xe);return j&&delete ke.fit,ke})};if(!j&&(de.layout=se(pe),te)){var be=pe._size;de.layout.computed={margin:{b:be.b,l:be.l,r:be.r,t:be.t}}}return $.framework&&$.framework.isPolar&&(de=$.framework.getConfig()),fe&&(de.frames=se(fe)),re&&(de.config=se($._context,!0)),ie==="object"?de:JSON.stringify(de)},y.modifyFrames=function($,j){var ae,ie,te,re=$._transitionData._frames,ce=$._transitionData._frameHash;for(ae=0;ae<j.length;ae++)switch(ie=j[ae],ie.type){case"replace":te=ie.value;var pe=(re[ie.index]||{}).name,fe=te.name;re[ie.index]=ce[fe]=te,fe!==pe&&(delete ce[pe],ce[fe]=te);break;case"insert":te=ie.value,ce[te.name]=te,re.splice(ie.index,0,te);break;case"delete":te=re[ie.index],delete ce[te.name],re.splice(ie.index,1);break}return Promise.resolve()},y.computeFrame=function($,j){var ae=$._transitionData._frameHash,ie,te,re,ce;if(!j)throw new Error("computeFrame must be given a string frame name");var pe=ae[j.toString()];if(!pe)return!1;for(var fe=[pe],se=[pe.name];pe.baseframe&&(pe=ae[pe.baseframe.toString()])&&se.indexOf(pe.name)===-1;)fe.push(pe),se.push(pe.name);for(var de={};pe=fe.pop();)if(pe.layout&&(de.layout=y.extendLayout(de.layout,pe.layout)),pe.data){if(de.data||(de.data=[]),te=pe.traces,!te)for(te=[],ie=0;ie<pe.data.length;ie++)te[ie]=ie;for(de.traces||(de.traces=[]),ie=0;ie<pe.data.length;ie++)re=te[ie],re!=null&&(ce=de.traces.indexOf(re),ce===-1&&(ce=de.data.length,de.traces[ce]=re),de.data[ce]=y.extendTrace(de.data[ce],pe.data[ie]))}return de},y.recomputeFrameHash=function($){for(var j=$._transitionData._frameHash={},ae=$._transitionData._frames,ie=0;ie<ae.length;ie++){var te=ae[ie];te&&te.name&&(j[te.name]=te)}},y.extendObjectWithContainers=function($,j,ae){var ie,te,re,ce,pe,fe,se,de,be=n.extendDeepNoArrays({},j||{}),xe=n.expandObjectPaths(be),ke={};if(ae&&ae.length)for(re=0;re<ae.length;re++)ie=n.nestedProperty(xe,ae[re]),te=ie.get(),te===void 0?n.nestedProperty(ke,ae[re]).set(null):(ie.set(null),n.nestedProperty(ke,ae[re]).set(te));if($=n.extendDeepNoArrays($||{},xe),ae&&ae.length){for(re=0;re<ae.length;re++)if(pe=n.nestedProperty(ke,ae[re]),se=pe.get(),!!se){for(fe=n.nestedProperty($,ae[re]),de=fe.get(),Array.isArray(de)||(de=[],fe.set(de)),ce=0;ce<se.length;ce++){var Re=se[ce];Re===null?de[ce]=null:de[ce]=y.extendObjectWithContainers(de[ce],Re)}fe.set(de)}}return $},y.dataArrayContainers=["transforms","dimensions"],y.layoutArrayContainers=c.layoutArrayContainers,y.extendTrace=function($,j){return y.extendObjectWithContainers($,j,y.dataArrayContainers)},y.extendLayout=function($,j){return y.extendObjectWithContainers($,j,y.layoutArrayContainers)},y.transition=function($,j,ae,ie,te,re){var ce={redraw:te.redraw},pe={},fe=[];return ce.prepareFn=function(){for(var se=Array.isArray(j)?j.length:0,de=ie.slice(0,se),be=0;be<de.length;be++){var xe=de[be],ke=$._fullData[xe],Re=ke._module;if(!!Re){if(Re.animatable){var Ke=Re.basePlotModule.name;pe[Ke]||(pe[Ke]=[]),pe[Ke].push(xe)}$.data[de[be]]=y.extendTrace($.data[de[be]],j[be])}}var ze=n.expandObjectPaths(n.extendDeepNoArrays({},ae)),Je=/^[xy]axis[0-9]*$/;for(var qe in ze)!Je.test(qe)||delete ze[qe].range;y.extendLayout($.layout,ze),delete $.calcdata,y.supplyDefaults($),y.doCalcdata($);var Ee=n.expandObjectPaths(ae);if(Ee){var Ae=$._fullLayout._plots;for(var Be in Ae){var $e=Ae[Be],xt=$e.xaxis,bt=$e.yaxis,Ne=xt.range.slice(),st=bt.range.slice(),_t=null,Ot=null,Wt=null,Et=null;Array.isArray(Ee[xt._name+".range"])?_t=Ee[xt._name+".range"].slice():Array.isArray((Ee[xt._name]||{}).range)&&(_t=Ee[xt._name].range.slice()),Array.isArray(Ee[bt._name+".range"])?Ot=Ee[bt._name+".range"].slice():Array.isArray((Ee[bt._name]||{}).range)&&(Ot=Ee[bt._name].range.slice()),Ne&&_t&&(xt.r2l(Ne[0])!==xt.r2l(_t[0])||xt.r2l(Ne[1])!==xt.r2l(_t[1]))&&(Wt={xr0:Ne,xr1:_t}),st&&Ot&&(bt.r2l(st[0])!==bt.r2l(Ot[0])||bt.r2l(st[1])!==bt.r2l(Ot[1]))&&(Et={yr0:st,yr1:Ot}),(Wt||Et)&&fe.push(n.extendFlat({plotinfo:$e},Wt,Et))}}return Promise.resolve()},ce.runFn=function(se){var de,be=$._fullLayout._basePlotModules,xe=fe.length,ke;if(ae)for(ke=0;ke<be.length;ke++)be[ke].transitionAxes&&be[ke].transitionAxes($,fe,re,se);xe?(de=n.extendFlat({},re),de.duration=0,delete pe.cartesian):de=re;for(var Re in pe){var Ke=pe[Re],ze=$._fullData[Ke[0]]._module;ze.basePlotModule.plot($,Ke,de,se)}},Z($,re,ce)},y.transitionFromReact=function($,j,ae,ie){var te=$._fullLayout,re=te.transition,ce={},pe=[];return ce.prepareFn=function(){var fe=te._plots;ce.redraw=!1,j.anim==="some"&&(ce.redraw=!0),ae.anim==="some"&&(ce.redraw=!0);for(var se in fe){var de=fe[se],be=de.xaxis,xe=de.yaxis,ke=ie[be._name].range.slice(),Re=ie[xe._name].range.slice(),Ke=be.range.slice(),ze=xe.range.slice();be.setScale(),xe.setScale();var Je=null,qe=null;(be.r2l(ke[0])!==be.r2l(Ke[0])||be.r2l(ke[1])!==be.r2l(Ke[1]))&&(Je={xr0:ke,xr1:Ke}),(xe.r2l(Re[0])!==xe.r2l(ze[0])||xe.r2l(Re[1])!==xe.r2l(ze[1]))&&(qe={yr0:Re,yr1:ze}),(Je||qe)&&pe.push(n.extendFlat({plotinfo:de},Je,qe))}return Promise.resolve()},ce.runFn=function(fe){for(var se=$._fullData,de=$._fullLayout,be=de._basePlotModules,xe,ke,Re,Ke=[],ze=0;ze<se.length;ze++)Ke.push(ze);function Je(){for(var Ee=0;Ee<be.length;Ee++)be[Ee].transitionAxes&&be[Ee].transitionAxes($,pe,xe,fe)}function qe(){for(var Ee=0;Ee<be.length;Ee++)be[Ee].plot($,Re,ke,fe)}pe.length&&j.anim?re.ordering==="traces first"?(xe=n.extendFlat({},re,{duration:0}),Re=Ke,ke=re,setTimeout(Je,re.duration),qe()):(xe=re,Re=null,ke=n.extendFlat({},re,{duration:0}),setTimeout(qe,xe.duration),Je()):pe.length?(xe=re,Je()):j.anim&&(Re=Ke,ke=re,qe())},Z($,re,ce)};function Z($,j,ae){var ie=!1;function te(be){var xe=Promise.resolve();if(!be)return xe;for(;be.length;)xe=xe.then(be.shift());return xe}function re(be){if(!!be)for(;be.length;)be.shift()}function ce(){return $.emit("plotly_transitioning",[]),new Promise(function(be){$._transitioning=!0,j.duration>0&&($._transitioningWithDuration=!0),$._transitionData._interruptCallbacks.push(function(){ie=!0}),ae.redraw&&$._transitionData._interruptCallbacks.push(function(){return c.call("redraw",$)}),$._transitionData._interruptCallbacks.push(function(){$.emit("plotly_transitioninterrupted",[])});var xe=0,ke=0;function Re(){return xe++,function(){ke++,!ie&&ke===xe&&pe(be)}}ae.runFn(Re),setTimeout(Re())})}function pe(be){if(!!$._transitionData)return re($._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ae.redraw)return c.call("redraw",$)}).then(function(){$._transitioning=!1,$._transitioningWithDuration=!1,$.emit("plotly_transitioned",[])}).then(be)}function fe(){if(!!$._transitionData)return $._transitioning=!1,te($._transitionData._interruptCallbacks)}var se=[y.previousPromises,fe,ae.prepareFn,y.rehover,ce],de=n.syncOrAsync(se,$);return(!de||!de.then)&&(de=Promise.resolve()),de.then(function(){return $})}y.doCalcdata=function($,j){var ae=h.list($),ie=$._fullData,te=$._fullLayout,re,ce,pe,fe,se=new Array(ie.length),de=($.calcdata||[]).slice();for($.calcdata=se,te._numBoxes=0,te._numViolins=0,te._violinScaleGroupStats={},$._hmpixcount=0,$._hmlumcount=0,te._piecolormap={},te._sunburstcolormap={},te._treemapcolormap={},te._funnelareacolormap={},pe=0;pe<ie.length;pe++)if(Array.isArray(j)&&j.indexOf(pe)===-1){se[pe]=de[pe];continue}for(pe=0;pe<ie.length;pe++)re=ie[pe],re._arrayAttrs=t.findArrayAttributes(re),re._extremes={};var be=te._subplots.polar||[];for(pe=0;pe<be.length;pe++)ae.push(te[be[pe]].radialaxis,te[be[pe]].angularaxis);for(var xe in te._colorAxes){var ke=te[xe];ke.cauto!==!1&&(delete ke.cmin,delete ke.cmax)}var Re=!1;function Ke(qe){if(re=ie[qe],ce=re._module,re.visible===!0&&re.transforms){if(ce&&ce.calc){var Ee=ce.calc($,re);Ee[0]&&Ee[0].t&&Ee[0].t._scene&&delete Ee[0].t._scene.dirty}for(fe=0;fe<re.transforms.length;fe++){var Ae=re.transforms[fe];ce=x[Ae.type],ce&&ce.calcTransform&&(re._hasCalcTransform=!0,Re=!0,ce.calcTransform($,re,Ae))}}}function ze(qe,Ee){if(re=ie[qe],ce=re._module,!!ce.isContainer===Ee){var Ae=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var Be=re.transforms||[];for(fe=Be.length-1;fe>=0;fe--)if(Be[fe].enabled){re._indexToPoints=Be[fe]._indexToPoints;break}ce&&ce.calc&&(Ae=ce.calc($,re))}(!Array.isArray(Ae)||!Ae[0])&&(Ae=[{x:l,y:l}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=re,se[qe]=Ae}}for(ne(ae,ie,te),pe=0;pe<ie.length;pe++)ze(pe,!0);for(pe=0;pe<ie.length;pe++)Ke(pe);for(Re&&ne(ae,ie,te),pe=0;pe<ie.length;pe++)ze(pe,!0);for(pe=0;pe<ie.length;pe++)ze(pe,!1);ve($);var Je=J(ae,$);if(Je.length){for(te._numBoxes=0,te._numViolins=0,pe=0;pe<Je.length;pe++)ze(Je[pe],!0);for(pe=0;pe<Je.length;pe++)ze(Je[pe],!1);ve($)}c.getComponentMethod("fx","calc")($),c.getComponentMethod("errorbars","calc")($)};var q=/(total|sum|min|max|mean|median) (ascending|descending)/;function J($,j){var ae=[],ie,te,re,ce,pe;function fe(Zt,Mt,At){var ft=Mt._id.charAt(0);if(Zt==="histogram2dcontour"){var ot=Mt._counterAxes[0],Te=h.getFromId(j,ot),Le=ft==="x"||ot==="x"&&Te.type==="category",Ve=ft==="y"||ot==="y"&&Te.type==="category";return function(Qe,Me){return Qe===0||Me===0||Le&&Qe===At[Me].length-1||Ve&&Me===At.length-1?-1:(ft==="y"?Me:Qe)-1}}else return function(Qe,Me){return ft==="y"?Me:Qe}}var se={min:function(Zt){return n.aggNums(Math.min,null,Zt)},max:function(Zt){return n.aggNums(Math.max,null,Zt)},sum:function(Zt){return n.aggNums(function(Mt,At){return Mt+At},null,Zt)},total:function(Zt){return n.aggNums(function(Mt,At){return Mt+At},null,Zt)},mean:function(Zt){return n.mean(Zt)},median:function(Zt){return n.median(Zt)}};for(ie=0;ie<$.length;ie++){var de=$[ie];if(de.type==="category"){var be=de.categoryorder.match(q);if(be){var xe=be[1],ke=be[2],Re=de._id.charAt(0),Ke=Re==="x",ze=[];for(te=0;te<de._categories.length;te++)ze.push([de._categories[te],[]]);for(te=0;te<de._traceIndices.length;te++){var Je=de._traceIndices[te],qe=j._fullData[Je];if(qe.visible===!0){var Ee=qe.type;c.traceIs(qe,"histogram")&&(delete qe._xautoBinFinished,delete qe._yautoBinFinished);var Ae=Ee==="splom",Be=Ee==="scattergl",$e=j.calcdata[Je];for(re=0;re<$e.length;re++){var xt=$e[re],bt,Ne;if(Ae){var st=qe._axesDim[de._id];if(!Ke){var _t=qe._diag[st][0];_t&&(de=j._fullLayout[h.id2name(_t)])}var Ot=xt.trace.dimensions[st].values;for(ce=0;ce<Ot.length;ce++)for(bt=de._categoriesMap[Ot[ce]],pe=0;pe<xt.trace.dimensions.length;pe++)if(pe!==st){var Wt=xt.trace.dimensions[pe];ze[bt][1].push(Wt.values[ce])}}else if(Be){for(ce=0;ce<xt.t.x.length;ce++)Ke?(bt=xt.t.x[ce],Ne=xt.t.y[ce]):(bt=xt.t.y[ce],Ne=xt.t.x[ce]),ze[bt][1].push(Ne);xt.t&&xt.t._scene&&delete xt.t._scene.dirty}else if(xt.hasOwnProperty("z")){Ne=xt.z;var Et=fe(qe.type,de,Ne);for(ce=0;ce<Ne.length;ce++)for(pe=0;pe<Ne[ce].length;pe++)bt=Et(pe,ce),bt+1&&ze[bt][1].push(Ne[ce][pe])}else for(bt=xt.p,bt===void 0&&(bt=xt[Re]),Ne=xt.s,Ne===void 0&&(Ne=xt.v),Ne===void 0&&(Ne=Ke?xt.y:xt.x),Array.isArray(Ne)||(Ne===void 0?Ne=[]:Ne=[Ne]),ce=0;ce<Ne.length;ce++)ze[bt][1].push(Ne[ce])}}}de._categoriesValue=ze;var jt=[];for(te=0;te<ze.length;te++)jt.push([ze[te][0],se[xe](ze[te][1])]);jt.sort(function(Zt,Mt){return Zt[1]-Mt[1]}),de._categoriesAggregatedValue=jt,de._initialCategories=jt.map(function(Zt){return Zt[0]}),ke==="descending"&&de._initialCategories.reverse(),ae=ae.concat(de.sortByInitialCategories())}}}return ae}function ne($,j,ae){var ie={};function te(fe){fe.clearCalc(),fe.type==="multicategory"&&fe.setupMultiCategory(j),ie[fe._id]=1}n.simpleMap($,te);for(var re=ae._axisMatchGroups||[],ce=0;ce<re.length;ce++)for(var pe in re[ce])ie[pe]||te(ae[h.id2name(pe)])}function ve($){var j=$._fullLayout,ae=j._visibleModules,ie={},te,re,ce;for(re=0;re<ae.length;re++){var pe=ae[re],fe=pe.crossTraceCalc;if(fe){var se=pe.basePlotModule.name;ie[se]?n.pushUnique(ie[se],fe):ie[se]=[fe]}}for(ce in ie){var de=ie[ce],be=j._subplots[ce];if(Array.isArray(be))for(te=0;te<be.length;te++){var xe=be[te],ke=ce==="cartesian"?j._plots[xe]:j[xe];for(re=0;re<de.length;re++)de[re]($,ke,xe)}else for(re=0;re<de.length;re++)de[re]($)}}y.rehover=function($){$._fullLayout._rehover&&$._fullLayout._rehover()},y.redrag=function($){$._fullLayout._redrag&&$._fullLayout._redrag()},y.generalUpdatePerTraceModule=function($,j,ae,ie){var te=j.traceHash,re={},ce;for(ce=0;ce<ae.length;ce++){var pe=ae[ce],fe=pe[0].trace;fe.visible&&(re[fe.type]=re[fe.type]||[],re[fe.type].push(pe))}for(var se in te)if(!re[se]){var de=te[se][0],be=de[0].trace;be.visible=!1,re[se]=[de]}for(var xe in re){var ke=re[xe],Re=ke[0][0].trace._module;Re.plot($,j,n.filterVisible(ke),ie)}j.traceHash=re},y.plotBasePlot=function($,j,ae,ie,te){var re=c.getModule($),ce=v(j.calcdata,re)[0];re.plot(j,ce,ie,te)},y.cleanBasePlot=function($,j,ae,ie,te){var re=te._has&&te._has($),ce=ae._has&&ae._has($);re&&!ce&&te["_"+$+"layer"].selectAll("g.trace").remove()}},{"../components/color":643,"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plot_api/plot_template":817,"../plots/get_data":865,"../registry":911,"./animation_attributes":822,"./attributes":824,"./cartesian/axis_ids":831,"./cartesian/handle_outline":838,"./command":854,"./font_attributes":856,"./frame_attributes":857,"./layout_attributes":882,d3:169,"d3-time-format":166,"fast-isnumeric":241}],892:[function(e,d,S){d.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],893:[function(e,d,S){var r=e("../../lib"),a=e("../../lib/polygon").tester,u=r.findIndexOfMin,c=r.isAngleInsideSector,t=r.angleDelta,f=r.angleDist;function n(w,g,T,M,P){if(!c(g,M))return!1;var L,I;T[0]<T[1]?(L=T[0],I=T[1]):(L=T[1],I=T[0]);var C=a(s(L,M[0],M[1],P)),k=a(s(I,M[0],M[1],P)),E=[w*Math.cos(g),w*Math.sin(g)];return k.contains(E)&&!C.contains(E)}function o(w,g,T,M){var P,L,I=M[0],C=M[1],k=m(Math.sin(g)-Math.sin(w)),E=m(Math.cos(g)-Math.cos(w)),R=Math.tan(T),O=m(1/R),N=k/E,G=C-N*I;return O?k&&E?(P=G/(R-N),L=R*P):E?(P=C*O,L=C):(P=I,L=I*R):k&&E?(P=0,L=G):E?(P=0,L=C):P=L=NaN,[P,L]}function l(w,g,T,M){var P=-g*T,L=g*g+1,I=2*(g*P-T),C=P*P+T*T-w*w,k=Math.sqrt(I*I-4*L*C),E=(-I+k)/(2*L),R=(-I-k)/(2*L);return[[E,g*E+P+M],[R,g*R+P+M]]}function h(w,g){var T=g.length,M=new Array(T+1),P;for(P=0;P<T;P++){var L=g[P];M[P]=[w*Math.cos(L),w*Math.sin(L)]}return M[P]=M[0].slice(),M}function i(w,g,T,M){var P=M.length,L=[],I,C;function k(B){return[w*Math.cos(B),w*Math.sin(B)]}function E(B,H,V){return o(B,H,V,k(B))}function R(B){return r.mod(B,P)}function O(B){return c(B,[g,T])}var N=u(M,function(B){return O(B)?f(B,g):1/0}),G=E(M[N],M[R(N-1)],g);for(L.push(G),I=N,C=0;C<P;I++,C++){var U=M[R(I)];if(!O(U))break;L.push(k(U))}var Y=u(M,function(B){return O(B)?f(B,T):1/0}),z=E(M[Y],M[R(Y+1)],T);return L.push(z),L.push([0,0]),L.push(L[0].slice()),L}function s(w,g,T,M){return r.isFullCircle([g,T])?h(w,M):i(w,g,T,M)}function p(w,g,T,M){for(var P=1/0,L=1/0,I=s(w,g,T,M),C=0;C<I.length;C++){var k=I[C];P=Math.min(P,k[0]),L=Math.min(L,-k[1])}return[P,L]}function v(w,g){var T=function(L){var I=t(L,w);return I>0?I:1/0},M=u(g,T),P=r.mod(M+1,g.length);return[g[M],g[P]]}function m(w){return Math.abs(w)>1e-10?w:0}function b(w,g,T){g=g||0,T=T||0;for(var M=w.length,P=new Array(M),L=0;L<M;L++){var I=w[L];P[L]=[g+I[0],T-I[1]]}return P}function y(w,g,T,M,P,L){var I=s(w,g,T,M);return"M"+b(I,P,L).join("L")}function x(w,g,T,M,P,L,I){var C,k;w<g?(C=w,k=g):(C=g,k=w);var E=b(s(C,T,M,P),L,I),R=b(s(k,T,M,P),L,I);return"M"+R.reverse().join("L")+"M"+E.join("L")}d.exports={isPtInsidePolygon:n,findPolygonOffset:p,findEnclosingVertexAngles:v,findIntersectionXY:o,findXYatLength:l,clampTiny:m,pathPolygon:y,pathPolygonAnnulus:x}},{"../../lib":778,"../../lib/polygon":790}],894:[function(e,d,S){var r=e("../get_data").getSubplotCalcData,a=e("../../lib").counterRegex,u=e("./polar"),c=e("./constants"),t=c.attr,f=c.name,n=a(f),o={};o[t]={valType:"subplotid",dflt:f,editType:"calc"};function l(i){for(var s=i._fullLayout,p=i.calcdata,v=s._subplots[f],m=0;m<v.length;m++){var b=v[m],y=r(p,f,b),x=s[b]._subplot;x||(x=u(i,b),s[b]._subplot=x),x.plot(y,s,i._promises)}}function h(i,s,p,v){for(var m=v._subplots[f]||[],b=v._has&&v._has("gl"),y=s._has&&s._has("gl"),x=b&&!y,w=0;w<m.length;w++){var g=m[w],T=v[g]._subplot;if(!s[g]&&!!T){T.framework.remove(),T.layers["radial-axis-title"].remove();for(var M in T.clipPaths)T.clipPaths[M].remove()}x&&T._scene&&(T._scene.destroy(),T._scene=null)}}d.exports={attr:t,name:f,idRoot:f,idRegex:n,attrRegex:n,attributes:o,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:l,clean:h,toSVG:e("../cartesian").toSVG}},{"../../lib":778,"../cartesian":841,"../get_data":865,"./constants":892,"./layout_attributes":895,"./layout_defaults":896,"./polar":903}],895:[function(e,d,S){var r=e("../../components/color/attributes"),a=e("../cartesian/layout_attributes"),u=e("../domain").attributes,c=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,f=t({color:a.color,showline:c({},a.showline,{dflt:!0}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:c({},a.showgrid,{dflt:!0}),gridcolor:a.gridcolor,gridwidth:a.gridwidth},"plot","from-root"),n=t({tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,minexponent:a.minexponent,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,layer:a.layer},"plot","from-root"),o={visible:c({},a.visible,{dflt:!0}),type:c({},a.type,{values:["-","linear","log","date","category"]}),autotypenumbers:a.autotypenumbers,autorange:c({},a.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:c({},a.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:a.categoryorder,categoryarray:a.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:c({},a.title.text,{editType:"plot",dflt:""}),font:c({},a.title.font,{editType:"plot"}),editType:"plot"},hoverformat:a.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:a._deprecated.title,titlefont:a._deprecated.titlefont}};c(o,f,n);var l={visible:c({},a.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:a.autotypenumbers,categoryorder:a.categoryorder,categoryarray:a.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:a.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};c(l,f,n),d.exports={domain:u({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:r.background},radialaxis:o,angularaxis:l,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":642,"../../lib":778,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],896:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../plot_api/plot_template"),c=e("../subplot_defaults"),t=e("../get_data").getSubplotData,f=e("../cartesian/tick_value_defaults"),n=e("../cartesian/tick_mark_defaults"),o=e("../cartesian/tick_label_defaults"),l=e("../cartesian/category_order_defaults"),h=e("../cartesian/line_grid_defaults"),i=e("../cartesian/axis_autotype"),s=e("./layout_attributes"),p=e("./set_convert"),v=e("./constants"),m=v.axisNames;function b(x,w,g,T){var M=g("bgcolor");T.bgColor=a.combine(M,T.paper_bgcolor);var P=g("sector");g("hole");var L=t(T.fullData,v.name,T.id),I=T.layoutOut,C;function k(q,J){return g(C+"."+q,J)}for(var E=0;E<m.length;E++){C=m[E],r.isPlainObject(x[C])||(x[C]={});var R=x[C],O=u.newContainer(w,C);O._id=O._name=C,O._attr=T.id+"."+C,O._traceIndices=L.map(function(q){return q._expandedIndex});var N=v.axisName2dataArray[C],G=y(R,O,k,L,N,T);l(R,O,k,{axData:L,dataAttr:N});var U=k("visible");p(O,w,I),k("uirevision",w.uirevision);var Y,z;switch(U&&(Y=k("color"),z=Y===R.color?Y:T.font.color),O._m=1,C){case"radialaxis":var B=k("autorange",!O.isValidRange(R.range));R.autorange=B,B&&(G==="linear"||G==="-")&&k("rangemode"),B==="reversed"&&(O._m=-1),k("range"),O.cleanRange("range",{dfltRange:[0,1]}),U&&(k("side"),k("angle",P[0]),k("title.text"),r.coerceFont(k,"title.font",{family:T.font.family,size:Math.round(T.font.size*1.2),color:z}));break;case"angularaxis":if(G==="date"){r.log("Polar plots do not support date angular axes yet.");for(var H=0;H<L.length;H++)L[H].visible=!1;G=R.type=O.type="linear"}k(G==="linear"?"thetaunit":"period");var V=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[V]);break}if(U){f(R,O,k,O.type),o(R,O,k,O.type,{tickSuffixDflt:O.thetaunit==="degrees"?"\xB0":void 0}),n(R,O,k,{outerTicks:!0});var Z=k("showticklabels");Z&&(r.coerceFont(k,"tickfont",{family:T.font.family,size:T.font.size,color:z}),k("tickangle"),k("tickformat")),h(R,O,k,{dfltColor:Y,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[C]}),k("layer")}G!=="category"&&k("hoverformat"),O._input=R}w.angularaxis.type==="category"&&g("gridshape")}function y(x,w,g,T,M,P){var L=g("autotypenumbers",P.autotypenumbersDflt),I=g("type");if(I==="-"){for(var C,k=0;k<T.length;k++)if(T[k].visible){C=T[k];break}C&&C[M]&&(w.type=i(C[M],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),w.type==="-"?w.type="linear":x.type=w.type}return w.type}d.exports=function(w,g,T){c(w,g,T,{type:v.name,attributes:s,handleDefaults:b,font:g.font,autotypenumbersDflt:g.autotypenumbers,paper_bgcolor:g.paper_bgcolor,fullData:T,layoutOut:g})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/axis_autotype":829,"../cartesian/category_order_defaults":832,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../get_data":865,"../subplot_defaults":905,"./constants":892,"./layout_attributes":895,"./set_convert":904}],897:[function(e,d,S){var r=e("../../../traces/scatter/attributes"),a=r.marker,u=e("../../../lib/extend").extendFlat;d.exports={r:u({},r.r,{}),t:u({},r.t,{}),marker:{color:u({},a.color,{}),size:u({},a.size,{}),symbol:u({},a.symbol,{}),opacity:u({},a.opacity,{}),editType:"calc"}}},{"../../../lib/extend":768,"../../../traces/scatter/attributes":1187}],898:[function(e,d,S){var r=e("../../cartesian/layout_attributes"),a=e("../../../lib/extend").extendFlat,u=e("../../../plot_api/edit_types").overrideAll,c=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),t=a({},r.domain,{});function f(n,o){var l={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:c},visible:{valType:"boolean"}};return a({},o,l)}d.exports=u({radialaxis:f("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:t,orientation:{valType:"number"}}),angularaxis:f("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:t}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],899:[function(e,d,S){var r=d.exports=e("./micropolar");r.manager=e("./micropolar_manager")},{"./micropolar":900,"./micropolar_manager":901}],900:[function(e,d,S){var r=e("d3"),a=e("../../../lib"),u=a.extendDeepAll,c=e("../../../constants/alignment").MID_SHIFT,t=d.exports={version:"0.2.2"};t.Axis=function(){var n={data:[],layout:{}},o={},l={},h,i,s=r.dispatch("hover"),p,v,m={};function b(y){i=y||i;var x=n.data,w=n.layout;return(typeof i=="string"||i.nodeName)&&(i=r.select(i)),i.datum(x).each(function(g,T){var M=g.slice();l={data:t.util.cloneJson(M),layout:t.util.cloneJson(w)};var P=0;M.forEach(function(Te,Le){Te.color||(Te.color=w.defaultColorRange[P],P=(P+1)%w.defaultColorRange.length),Te.strokeColor||(Te.strokeColor=Te.geometry==="LinePlot"?Te.color:r.rgb(Te.color).darker().toString()),l.data[Le].color=Te.color,l.data[Le].strokeColor=Te.strokeColor,l.data[Le].strokeDash=Te.strokeDash,l.data[Le].strokeSize=Te.strokeSize});var L=M.filter(function(Te,Le){var Ve=Te.visible;return typeof Ve>"u"||Ve===!0}),I=!1,C=L.map(function(Te,Le){return I=I||typeof Te.groupId<"u",Te});if(I){var k=r.nest().key(function(Te,Le){return typeof Te.groupId<"u"?Te.groupId:"unstacked"}).entries(C),E=[],R=k.map(function(Te,Le){if(Te.key==="unstacked")return Te.values;var Ve=Te.values[0].r.map(function(Qe,Me){return 0});return Te.values.forEach(function(Qe,Me,Ie){Qe.yStack=[Ve],E.push(Ve),Ve=t.util.sumArrays(Qe.r,Ve)}),Te.values});L=r.merge(R)}L.forEach(function(Te,Le){Te.t=Array.isArray(Te.t[0])?Te.t:[Te.t],Te.r=Array.isArray(Te.r[0])?Te.r:[Te.r]});var O=Math.min(w.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;O=Math.max(10,O);var N=[w.margin.left+O,w.margin.top+O],G;if(I){var U=r.max(t.util.sumArrays(t.util.arrayLast(L).r[0],t.util.arrayLast(E)));G=[0,U]}else G=r.extent(t.util.flattenArray(L.map(function(Te,Le){return Te.r})));w.radialAxis.domain!=t.DATAEXTENT&&(G[0]=0),p=r.scale.linear().domain(w.radialAxis.domain!=t.DATAEXTENT&&w.radialAxis.domain?w.radialAxis.domain:G).range([0,O]),l.layout.radialAxis.domain=p.domain();var Y=t.util.flattenArray(L.map(function(Te,Le){return Te.t})),z=typeof Y[0]=="string",B;z&&(Y=t.util.deduplicate(Y),B=Y.slice(),Y=r.range(Y.length),L=L.map(function(Te,Le){var Ve=Te;return Te.t=[Y],I&&(Ve.yStack=Te.yStack),Ve}));var H=L.filter(function(Te,Le){return Te.geometry==="LinePlot"||Te.geometry==="DotPlot"}).length===L.length,V=w.needsEndSpacing===null?z||!H:w.needsEndSpacing,Z=w.angularAxis.domain&&w.angularAxis.domain!=t.DATAEXTENT&&!z&&w.angularAxis.domain[0]>=0,q=Z?w.angularAxis.domain:r.extent(Y),J=Math.abs(Y[1]-Y[0]);H&&!z&&(J=0);var ne=q.slice();V&&z&&(ne[1]+=J);var ve=w.angularAxis.ticksCount||4;ve>8&&(ve=ve/(ve/8)+ve%8),w.angularAxis.ticksStep&&(ve=(ne[1]-ne[0])/ve);var $=w.angularAxis.ticksStep||(ne[1]-ne[0])/(ve*(w.minorTicks+1));B&&($=Math.max(Math.round($),1)),ne[2]||(ne[2]=$);var j=r.range.apply(this,ne);if(j=j.map(function(Te,Le){return parseFloat(Te.toPrecision(12))}),v=r.scale.linear().domain(ne.slice(0,2)).range(w.direction==="clockwise"?[0,360]:[360,0]),l.layout.angularAxis.domain=v.domain(),l.layout.angularAxis.endPadding=V?J:0,h=r.select(this).select("svg.chart-root"),typeof h>"u"||h.empty()){var ae="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",ie=new DOMParser().parseFromString(ae,"application/xml"),te=this.appendChild(this.ownerDocument.importNode(ie.documentElement,!0));h=r.select(te)}h.select(".guides-group").style({"pointer-events":"none"}),h.select(".angular.axis-group").style({"pointer-events":"none"}),h.select(".radial.axis-group").style({"pointer-events":"none"});var re=h.select(".chart-group"),ce={fill:"none",stroke:w.tickColor},pe={"font-size":w.font.size,"font-family":w.font.family,fill:w.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(Te,Le){return" "+Te+" 0 "+w.font.outlineColor}).join(",")},fe;if(w.showLegend){fe=h.select(".legend-group").attr({transform:"translate("+[O,w.margin.top]+")"}).style({display:"block"});var se=L.map(function(Te,Le){var Ve=t.util.cloneJson(Te);return Ve.symbol=Te.geometry==="DotPlot"?Te.dotType||"circle":Te.geometry!="LinePlot"?"square":"line",Ve.visibleInLegend=typeof Te.visibleInLegend>"u"||Te.visibleInLegend,Ve.color=Te.geometry==="LinePlot"?Te.strokeColor:Te.color,Ve});t.Legend().config({data:L.map(function(Te,Le){return Te.name||"Element"+Le}),legendConfig:u({},t.Legend.defaultConfig().legendConfig,{container:fe,elements:se,reverseOrder:w.legend.reverseOrder})})();var de=fe.node().getBBox();O=Math.min(w.width-de.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2,O=Math.max(10,O),N=[w.margin.left+O,w.margin.top+O],p.range([0,O]),l.layout.radialAxis.domain=p.domain(),fe.attr("transform","translate("+[N[0]+O,N[1]-O]+")")}else fe=h.select(".legend-group").style({display:"none"});h.attr({width:w.width,height:w.height}).style({opacity:w.opacity}),re.attr("transform","translate("+N+")").style({cursor:"crosshair"});var be=[(w.width-(w.margin.left+w.margin.right+O*2+(de?de.width:0)))/2,(w.height-(w.margin.top+w.margin.bottom+O*2))/2];if(be[0]=Math.max(0,be[0]),be[1]=Math.max(0,be[1]),h.select(".outer-group").attr("transform","translate("+be+")"),w.title&&w.title.text){var xe=h.select("g.title-group text").style(pe).text(w.title.text),ke=xe.node().getBBox();xe.attr({x:N[0]-ke.width/2,y:N[1]-O-20})}var Re=h.select(".radial.axis-group");if(w.radialAxis.gridLinesVisible){var Ke=Re.selectAll("circle.grid-circle").data(p.ticks(5));Ke.enter().append("circle").attr({class:"grid-circle"}).style(ce),Ke.attr("r",p),Ke.exit().remove()}Re.select("circle.outside-circle").attr({r:O}).style(ce);var ze=h.select("circle.background-circle").attr({r:O}).style({fill:w.backgroundColor,stroke:w.stroke});function Je(Te,Le){return v(Te)%360+w.orientation}if(w.radialAxis.visible){var qe=r.svg.axis().scale(p).ticks(5).tickSize(5);Re.call(qe).attr({transform:"rotate("+w.radialAxis.orientation+")"}),Re.selectAll(".domain").style(ce),Re.selectAll("g>text").text(function(Te,Le){return this.textContent+w.radialAxis.ticksSuffix}).style(pe).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(Te,Le){return w.radialAxis.tickOrientation==="horizontal"?"rotate("+-w.radialAxis.orientation+") translate("+[0,pe["font-size"]]+")":"translate("+[0,pe["font-size"]]+")"}}),Re.selectAll("g>line").style({stroke:"black"})}var Ee=h.select(".angular.axis-group").selectAll("g.angular-tick").data(j),Ae=Ee.enter().append("g").classed("angular-tick",!0);Ee.attr({transform:function(Te,Le){return"rotate("+Je(Te)+")"}}).style({display:w.angularAxis.visible?"block":"none"}),Ee.exit().remove(),Ae.append("line").classed("grid-line",!0).classed("major",function(Te,Le){return Le%(w.minorTicks+1)==0}).classed("minor",function(Te,Le){return Le%(w.minorTicks+1)!=0}).style(ce),Ae.selectAll(".minor").style({stroke:w.minorTickColor}),Ee.select("line.grid-line").attr({x1:w.tickLength?O-w.tickLength:0,x2:O}).style({display:w.angularAxis.gridLinesVisible?"block":"none"}),Ae.append("text").classed("axis-text",!0).style(pe);var Be=Ee.select("text.axis-text").attr({x:O+w.labelOffset,dy:c+"em",transform:function(Te,Le){var Ve=Je(Te),Qe=O+w.labelOffset,Me=w.angularAxis.tickOrientation;return Me=="horizontal"?"rotate("+-Ve+" "+Qe+" 0)":Me=="radial"?Ve<270&&Ve>90?"rotate(180 "+Qe+" 0)":null:"rotate("+(Ve<=180&&Ve>0?-90:90)+" "+Qe+" 0)"}}).style({"text-anchor":"middle",display:w.angularAxis.labelsVisible?"block":"none"}).text(function(Te,Le){return Le%(w.minorTicks+1)!=0?"":B?B[Te]+w.angularAxis.ticksSuffix:Te+w.angularAxis.ticksSuffix}).style(pe);w.angularAxis.rewriteTicks&&Be.text(function(Te,Le){return Le%(w.minorTicks+1)!=0?"":w.angularAxis.rewriteTicks(this.textContent,Le)});var $e=r.max(re.selectAll(".angular-tick text")[0].map(function(Te,Le){return Te.getCTM().e+Te.getBBox().width}));fe.attr({transform:"translate("+[O+$e,w.margin.top]+")"});var xt=h.select("g.geometry-group").selectAll("g").size()>0,bt=h.select("g.geometry-group").selectAll("g.geometry").data(L);if(bt.enter().append("g").attr({class:function(Te,Le){return"geometry geometry"+Le}}),bt.exit().remove(),L[0]||xt){var Ne=[];L.forEach(function(Te,Le){var Ve={};Ve.radialScale=p,Ve.angularScale=v,Ve.container=bt.filter(function(Qe,Me){return Me==Le}),Ve.geometry=Te.geometry,Ve.orientation=w.orientation,Ve.direction=w.direction,Ve.index=Le,Ne.push({data:Te,geometryConfig:Ve})});var st=r.nest().key(function(Te,Le){return typeof Te.data.groupId<"u"||"unstacked"}).entries(Ne),_t=[];st.forEach(function(Te,Le){Te.key==="unstacked"?_t=_t.concat(Te.values.map(function(Ve,Qe){return[Ve]})):_t.push(Te.values)}),_t.forEach(function(Te,Le){var Ve;Array.isArray(Te)?Ve=Te[0].geometryConfig.geometry:Ve=Te.geometryConfig.geometry;var Qe=Te.map(function(Me,Ie){return u(t[Ve].defaultConfig(),Me)});t[Ve]().config(Qe)()})}var Ot=h.select(".guides-group"),Wt=h.select(".tooltips-group"),Et=t.tooltipPanel().config({container:Wt,fontSize:8})(),jt=t.tooltipPanel().config({container:Wt,fontSize:8})(),Zt=t.tooltipPanel().config({container:Wt,hasTick:!0})(),Mt,At;if(!z){var ft=Ot.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});re.on("mousemove.angular-guide",function(Te,Le){var Ve=t.util.getMousePos(ze).angle;ft.attr({x2:-O,transform:"rotate("+Ve+")"}).style({opacity:.5});var Qe=(Ve+180+360-w.orientation)%360;Mt=v.invert(Qe);var Me=t.util.convertToCartesian(O+12,Ve+180);Et.text(t.util.round(Mt)).move([Me[0]+N[0],Me[1]+N[1]])}).on("mouseout.angular-guide",function(Te,Le){Ot.select("line").style({opacity:0})})}var ot=Ot.select("circle").style({stroke:"grey",fill:"none"});re.on("mousemove.radial-guide",function(Te,Le){var Ve=t.util.getMousePos(ze).radius;ot.attr({r:Ve}).style({opacity:.5}),At=p.invert(t.util.getMousePos(ze).radius);var Qe=t.util.convertToCartesian(Ve,w.radialAxis.orientation);jt.text(t.util.round(At)).move([Qe[0]+N[0],Qe[1]+N[1]])}).on("mouseout.radial-guide",function(Te,Le){ot.style({opacity:0}),Zt.hide(),Et.hide(),jt.hide()}),h.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(Te,Le){var Ve=r.select(this),Qe=this.style.fill,Me="black",Ie=this.style.opacity||1;if(Ve.attr({"data-opacity":Ie}),Qe&&Qe!=="none"){Ve.attr({"data-fill":Qe}),Me=r.hsl(Qe).darker().toString(),Ve.style({fill:Me,opacity:1});var He={t:t.util.round(Te[0]),r:t.util.round(Te[1])};z&&(He.t=B[Te[0]]);var Ye="t: "+He.t+", r: "+He.r,ut=this.getBoundingClientRect(),nt=h.node().getBoundingClientRect(),Ge=[ut.left+ut.width/2-be[0]-nt.left,ut.top+ut.height/2-be[1]-nt.top];Zt.config({color:Me}).text(Ye),Zt.move(Ge)}else Qe=this.style.stroke||"black",Ve.attr({"data-stroke":Qe}),Me=r.hsl(Qe).darker().toString(),Ve.style({stroke:Me,opacity:1})}).on("mousemove.tooltip",function(Te,Le){if(r.event.which!=0)return!1;r.select(this).attr("data-fill")&&Zt.show()}).on("mouseout.tooltip",function(Te,Le){Zt.hide();var Ve=r.select(this),Qe=Ve.attr("data-fill");Qe?Ve.style({fill:Qe,opacity:Ve.attr("data-opacity")}):Ve.style({stroke:Ve.attr("data-stroke"),opacity:Ve.attr("data-opacity")})})}),m}return m.render=function(y){return b(y),this},m.config=function(y){if(!arguments.length)return n;var x=t.util.cloneJson(y);return x.data.forEach(function(w,g){n.data[g]||(n.data[g]={}),u(n.data[g],t.Axis.defaultConfig().data[0]),u(n.data[g],w)}),u(n.layout,t.Axis.defaultConfig().layout),u(n.layout,x.layout),this},m.getLiveConfig=function(){return l},m.getinputConfig=function(){return o},m.radialScale=function(y){return p},m.angularScale=function(y){return v},m.svg=function(){return h},r.rebind(m,s,"on"),m},t.Axis.defaultConfig=function(f,n){var o={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return o},t.util={},t.DATAEXTENT="dataExtent",t.AREA="AreaChart",t.LINE="LinePlot",t.DOT="DotPlot",t.BAR="BarChart",t.util._override=function(f,n){for(var o in f)o in n&&(n[o]=f[o])},t.util._extend=function(f,n){for(var o in f)n[o]=f[o]},t.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)},t.util.dataFromEquation2=function(f,n){var o=n||6,l=r.range(0,360+o,o).map(function(h,i){var s=h*Math.PI/180,p=f(s);return[h,p]});return l},t.util.dataFromEquation=function(f,n,o){var l=n||6,h=[],i=[];r.range(0,360+l,l).forEach(function(p,v){var m=p*Math.PI/180,b=f(m);h.push(p),i.push(b)});var s={t:h,r:i};return o&&(s.name=o),s},t.util.ensureArray=function(f,n){if(typeof f>"u")return null;var o=[].concat(f);return r.range(n).map(function(l,h){return o[h]||o[0]})},t.util.fillArrays=function(f,n,o){return n.forEach(function(l,h){f[l]=t.util.ensureArray(f[l],o)}),f},t.util.cloneJson=function(f){return JSON.parse(JSON.stringify(f))},t.util.validateKeys=function(f,n){typeof n=="string"&&(n=n.split("."));var o=n.shift();return f[o]&&(!n.length||objHasKeys(f[o],n))},t.util.sumArrays=function(f,n){return r.zip(f,n).map(function(o,l){return r.sum(o)})},t.util.arrayLast=function(f){return f[f.length-1]},t.util.arrayEqual=function(f,n){for(var o=Math.max(f.length,n.length,1);o-->=0&&f[o]===n[o];);return o===-2},t.util.flattenArray=function(f){for(var n=[];!t.util.arrayEqual(n,f);)n=f,f=[].concat.apply([],f);return f},t.util.deduplicate=function(f){return f.filter(function(n,o,l){return l.indexOf(n)==o})},t.util.convertToCartesian=function(f,n){var o=n*Math.PI/180,l=f*Math.cos(o),h=f*Math.sin(o);return[l,h]},t.util.round=function(f,n){var o=n||2,l=Math.pow(10,o);return Math.round(f*l)/l},t.util.getMousePos=function(f){var n=r.mouse(f.node()),o=n[0],l=n[1],h={};return h.x=o,h.y=l,h.pos=n,h.angle=(Math.atan2(l,o)+Math.PI)*180/Math.PI,h.radius=Math.sqrt(o*o+l*l),h},t.util.duplicatesCount=function(f){for(var n={},o,l={},h=0,i=f.length;h<i;h++)o=f[h],o in n?(n[o]++,l[o]=n[o]):n[o]=1;return l},t.util.duplicates=function(f){return Object.keys(t.util.duplicatesCount(f))},t.util.translator=function(f,n,o,l){if(l){var h=o.slice();o=n,n=h}var i=n.reduce(function(s,p){if(typeof s<"u")return s[p]},f);typeof i>"u"||(n.reduce(function(s,p,v){if(!(typeof s>"u"))return v===n.length-1&&delete s[p],s[p]},f),o.reduce(function(s,p,v){return typeof s[p]>"u"&&(s[p]={}),v===o.length-1&&(s[p]=i),s[p]},f))},t.PolyChart=function(){var n=[t.PolyChart.defaultConfig()],o=r.dispatch("hover"),l={solid:"none",dash:[5,2],dot:[2,5]},h;function i(){var s=n[0].geometryConfig,p=s.container;typeof p=="string"&&(p=r.select(p)),p.datum(n).each(function(v,m){var b=!!v[0].data.yStack,y=v.map(function(O,N){return b?r.zip(O.data.t[0],O.data.r[0],O.data.yStack[0]):r.zip(O.data.t[0],O.data.r[0])}),x=s.angularScale,w=s.radialScale.domain()[0],g={};g.bar=function(O,N,G){var U=v[G].data,Y=s.radialScale(O[1])-s.radialScale(0),z=s.radialScale(O[2]||0),B=U.barWidth;r.select(this).attr({class:"mark bar",d:"M"+[[Y+z,-B/2],[Y+z,B/2],[z,B/2],[z,-B/2]].join("L")+"Z",transform:function(H,V){return"rotate("+(s.orientation+x(H[0]))+")"}})},g.dot=function(O,N,G){var U=O[2]?[O[0],O[1]+O[2]]:O,Y=r.svg.symbol().size(v[G].data.dotSize).type(v[G].data.dotType)(O,N);r.select(this).attr({class:"mark dot",d:Y,transform:function(z,B){var H=R(E(U));return"translate("+[H.x,H.y]+")"}})};var T=r.svg.line.radial().interpolate(v[0].data.lineInterpolation).radius(function(O){return s.radialScale(O[1])}).angle(function(O){return s.angularScale(O[0])*Math.PI/180});g.line=function(O,N,G){var U=O[2]?y[G].map(function(z,B){return[z[0],z[1]+z[2]]}):y[G];if(r.select(this).each(g.dot).style({opacity:function(z,B){return+v[G].data.dotVisible},fill:I.stroke(O,N,G)}).attr({class:"mark dot"}),!(N>0)){var Y=r.select(this.parentNode).selectAll("path.line").data([0]);Y.enter().insert("path"),Y.attr({class:"line",d:T(U),transform:function(z,B){return"rotate("+(s.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(z,B){return I.fill(O,N,G)},"fill-opacity":0,stroke:function(z,B){return I.stroke(O,N,G)},"stroke-width":function(z,B){return I["stroke-width"](O,N,G)},"stroke-dasharray":function(z,B){return I["stroke-dasharray"](O,N,G)},opacity:function(z,B){return I.opacity(O,N,G)},display:function(z,B){return I.display(O,N,G)}})}};var M=s.angularScale.range(),P=Math.abs(M[1]-M[0])/y[0].length*Math.PI/180,L=r.svg.arc().startAngle(function(O){return-P/2}).endAngle(function(O){return P/2}).innerRadius(function(O){return s.radialScale(w+(O[2]||0))}).outerRadius(function(O){return s.radialScale(w+(O[2]||0))+s.radialScale(O[1])});g.arc=function(O,N,G){r.select(this).attr({class:"mark arc",d:L,transform:function(U,Y){return"rotate("+(s.orientation+x(U[0])+90)+")"}})};var I={fill:function(O,N,G){return v[G].data.color},stroke:function(O,N,G){return v[G].data.strokeColor},"stroke-width":function(O,N,G){return v[G].data.strokeSize+"px"},"stroke-dasharray":function(O,N,G){return l[v[G].data.strokeDash]},opacity:function(O,N,G){return v[G].data.opacity},display:function(O,N,G){return typeof v[G].data.visible>"u"||v[G].data.visible?"block":"none"}},C=r.select(this).selectAll("g.layer").data(y);C.enter().append("g").attr({class:"layer"});var k=C.selectAll("path.mark").data(function(O,N){return O});k.enter().append("path").attr({class:"mark"}),k.style(I).each(g[s.geometryType]),k.exit().remove(),C.exit().remove();function E(O,N){var G=s.radialScale(O[1]),U=(s.angularScale(O[0])+s.orientation)*Math.PI/180;return{r:G,t:U}}function R(O){var N=O.r*Math.cos(O.t),G=O.r*Math.sin(O.t);return{x:N,y:G}}})}return i.config=function(s){return arguments.length?(s.forEach(function(p,v){n[v]||(n[v]={}),u(n[v],t.PolyChart.defaultConfig()),u(n[v],p)}),this):n},i.getColorScale=function(){return h},r.rebind(i,o,"on"),i},t.PolyChart.defaultConfig=function(){var f={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}};return f},t.BarChart=function(){return t.PolyChart()},t.BarChart.defaultConfig=function(){var f={geometryConfig:{geometryType:"bar"}};return f},t.AreaChart=function(){return t.PolyChart()},t.AreaChart.defaultConfig=function(){var f={geometryConfig:{geometryType:"arc"}};return f},t.DotPlot=function(){return t.PolyChart()},t.DotPlot.defaultConfig=function(){var f={geometryConfig:{geometryType:"dot",dotType:"circle"}};return f},t.LinePlot=function(){return t.PolyChart()},t.LinePlot.defaultConfig=function(){var f={geometryConfig:{geometryType:"line"}};return f},t.Legend=function(){var n=t.Legend.defaultConfig(),o=r.dispatch("hover");function l(){var h=n.legendConfig,i=n.data.map(function(R,O){return[].concat(R).map(function(N,G){var U=u({},h.elements[O]);return U.name=N,U.color=[].concat(h.elements[O].color)[G],U})}),s=r.merge(i);s=s.filter(function(R,O){return h.elements[O]&&(h.elements[O].visibleInLegend||typeof h.elements[O].visibleInLegend>"u")}),h.reverseOrder&&(s=s.reverse());var p=h.container;(typeof p=="string"||p.nodeName)&&(p=r.select(p));var v=s.map(function(R,O){return R.color}),m=h.fontSize,b=h.isContinuous==null?typeof s[0]=="number":h.isContinuous,y=b?h.height:m*s.length,x=p.classed("legend-group",!0),w=x.selectAll("svg").data([0]),g=w.enter().append("svg").attr({width:300,height:y+m,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});g.append("g").classed("legend-axis",!0),g.append("g").classed("legend-marks",!0);var T=r.range(s.length),M=r.scale[b?"linear":"ordinal"]().domain(T).range(v),P=r.scale[b?"linear":"ordinal"]().domain(T)[b?"range":"rangePoints"]([0,y]),L=function(R,O){var N=O*3;return R==="line"?"M"+[[-O/2,-O/12],[O/2,-O/12],[O/2,O/12],[-O/2,O/12]]+"Z":r.svg.symbolTypes.indexOf(R)!=-1?r.svg.symbol().type(R).size(N)():r.svg.symbol().type("square").size(N)()};if(b){var I=w.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(v);I.enter().append("stop"),I.attr({offset:function(R,O){return O/(v.length-1)*100+"%"}}).style({"stop-color":function(R,O){return R}}),w.append("rect").classed("legend-mark",!0).attr({height:h.height,width:h.colorBandWidth,fill:"url(#grad1)"})}else{var C=w.select(".legend-marks").selectAll("path.legend-mark").data(s);C.enter().append("path").classed("legend-mark",!0),C.attr({transform:function(R,O){return"translate("+[m/2,P(O)+m/2]+")"},d:function(R,O){var N=R.symbol;return L(N,m)},fill:function(R,O){return M(O)}}),C.exit().remove()}var k=r.svg.axis().scale(P).orient("right"),E=w.select("g.legend-axis").attr({transform:"translate("+[b?h.colorBandWidth:m,m/2]+")"}).call(k);return E.selectAll(".domain").style({fill:"none",stroke:"none"}),E.selectAll("line").style({fill:"none",stroke:b?h.textColor:"none"}),E.selectAll("text").style({fill:h.textColor,"font-size":h.fontSize}).text(function(R,O){return s[O].name}),l}return l.config=function(h){return arguments.length?(u(n,h),this):n},r.rebind(l,o,"on"),l},t.Legend.defaultConfig=function(f,n){var o={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return o},t.tooltipPanel=function(){var f,n,o,l={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},h="tooltip-"+t.tooltipPanel.uid++,i=10,s=function(){f=l.container.selectAll("g."+h).data([0]);var p=f.enter().append("g").classed(h,!0).style({"pointer-events":"none",display:"none"});return o=p.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),n=p.append("text").attr({dx:l.padding+i,dy:+l.fontSize*.3}),s};return s.text=function(p){var v=r.hsl(l.color).l,m=v>=.5?"#aaa":"white",b=v>=.5?"black":"white",y=p||"";n.style({fill:b,"font-size":l.fontSize+"px"}).text(y);var x=l.padding,w=n.node().getBBox(),g={fill:l.color,stroke:m,"stroke-width":"2px"},T=w.width+x*2+i,M=w.height+x*2;return o.attr({d:"M"+[[i,-M/2],[i,-M/4],[l.hasTick?0:i,0],[i,M/4],[i,M/2],[T,M/2],[T,-M/2]].join("L")+"Z"}).style(g),f.attr({transform:"translate("+[i,-M/2+x*2]+")"}),f.style({display:"block"}),s},s.move=function(p){if(!!f)return f.attr({transform:"translate("+[p[0],p[1]]+")"}).style({display:"block"}),s},s.hide=function(){if(!!f)return f.style({display:"none"}),s},s.show=function(){if(!!f)return f.style({display:"block"}),s},s.config=function(p){return u(l,p),s},s},t.tooltipPanel.uid=1,t.adapter={},t.adapter.plotly=function(){var n={};return n.convert=function(o,l){var h={};if(o.data&&(h.data=o.data.map(function(y,x){var w=u({},y),g=[[w,["marker","color"],["color"]],[w,["marker","opacity"],["opacity"]],[w,["marker","line","color"],["strokeColor"]],[w,["marker","line","dash"],["strokeDash"]],[w,["marker","line","width"],["strokeSize"]],[w,["marker","symbol"],["dotType"]],[w,["marker","size"],["dotSize"]],[w,["marker","barWidth"],["barWidth"]],[w,["line","interpolation"],["lineInterpolation"]],[w,["showlegend"],["visibleInLegend"]]];return g.forEach(function(T,M){t.util.translator.apply(null,T.concat(l))}),l||delete w.marker,l&&delete w.groupId,l?(w.geometry==="LinePlot"?(w.type="scatter",w.dotVisible===!0?(delete w.dotVisible,w.mode="lines+markers"):w.mode="lines"):w.geometry==="DotPlot"?(w.type="scatter",w.mode="markers"):w.geometry==="AreaChart"?w.type="area":w.geometry==="BarChart"&&(w.type="bar"),delete w.geometry):(w.type==="scatter"?w.mode==="lines"?w.geometry="LinePlot":w.mode==="markers"?w.geometry="DotPlot":w.mode==="lines+markers"&&(w.geometry="LinePlot",w.dotVisible=!0):w.type==="area"?w.geometry="AreaChart":w.type==="bar"&&(w.geometry="BarChart"),delete w.mode,delete w.type),w}),!l&&o.layout&&o.layout.barmode==="stack")){var i=t.util.duplicates(h.data.map(function(y,x){return y.geometry}));h.data.forEach(function(y,x){var w=i.indexOf(y.geometry);w!=-1&&(h.data[x].groupId=w)})}if(o.layout){var s=u({},o.layout),p=[[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]];if(p.forEach(function(y,x){t.util.translator.apply(null,y.concat(l))}),l?(typeof s.tickLength<"u"&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&typeof s.angularAxis.ticklen<"u"&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&typeof s.angularAxis.tickcolor<"u"&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&typeof s.legend.reverseOrder!="boolean"&&(s.legend.reverseOrder=s.legend.reverseOrder!="normal"),s.legend&&typeof s.legend.traceorder=="boolean"&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&typeof s.margin.t<"u"){var v=["t","r","b","l","pad"],m=["top","right","bottom","left","pad"],b={};r.entries(s.margin).forEach(function(y,x){b[m[v.indexOf(y.key)]]=y.value}),s.margin=b}l&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),h.layout=s}return h},n}},{"../../../constants/alignment":745,"../../../lib":778,d3:169}],901:[function(e,d,S){var r=e("d3"),a=e("../../../lib"),u=e("../../../components/color"),c=e("./micropolar"),t=e("./undo_manager"),f=a.extendDeepAll,n=d.exports={};n.framework=function(o){var l,h,i,s,p,v=new t;function m(b,y){return y&&(p=y),r.select(r.select(p).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),l=l?f(l,b):b,i||(i=c.Axis()),s=c.adapter.plotly().convert(l),i.config(s).render(p),o.data=l.data,o.layout=l.layout,n.fillLayout(o),l}return m.isPolar=!0,m.svg=function(){return i.svg()},m.getConfig=function(){return l},m.getLiveConfig=function(){return c.adapter.plotly().convert(i.getLiveConfig(),!0)},m.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},m.setUndoPoint=function(){var b=this,y=c.util.cloneJson(l);(function(x,w){v.add({undo:function(){w&&b(w)},redo:function(){b(x)}})})(y,h),h=c.util.cloneJson(y)},m.undo=function(){v.undo()},m.redo=function(){v.redo()},m},n.fillLayout=function(o){var l=r.select(o).selectAll(".plot-container"),h=l.selectAll(".svg-container"),i=o.framework&&o.framework.svg&&o.framework.svg(),s={width:800,height:600,paper_bgcolor:u.background,_container:l,_paperdiv:h,_paper:i};o._fullLayout=f(s,o.layout)}},{"../../../components/color":643,"../../../lib":778,"./micropolar":900,"./undo_manager":902,d3:169}],902:[function(e,d,S){d.exports=function(){var a=[],u=-1,c=!1,t;function f(n,o){return n?(c=!0,n[o](),c=!1,this):this}return{add:function(n){return c?this:(a.splice(u+1,a.length-u),a.push(n),u=a.length-1,this)},setCallback:function(n){t=n},undo:function(){var n=a[u];return n?(f(n,"undo"),u-=1,t&&t(n.undo),this):this},redo:function(){var n=a[u+1];return n?(f(n,"redo"),u+=1,t&&t(n.redo),this):this},clear:function(){a=[],u=-1},hasUndo:function(){return u!==-1},hasRedo:function(){return u<a.length-1},getCommands:function(){return a},getPreviousCommand:function(){return a[u-1]},getIndex:function(){return u}}}},{}],903:[function(e,d,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../registry"),c=e("../../lib"),t=c.strRotate,f=c.strTranslate,n=e("../../components/color"),o=e("../../components/drawing"),l=e("../plots"),h=e("../../plots/cartesian/axes"),i=e("../cartesian/set_convert"),s=e("./set_convert"),p=e("../cartesian/autorange").doAutoRange,v=e("../cartesian/dragbox"),m=e("../../components/dragelement"),b=e("../../components/fx"),y=e("../../components/titles"),x=e("../cartesian/select").prepSelect,w=e("../cartesian/select").selectOnClick,g=e("../cartesian/select").clearSelect,T=e("../../lib/setcursor"),M=e("../../lib/clear_gl_canvases"),P=e("../../plot_api/subroutines").redrawReglTraces,L=e("../../constants/alignment").MID_SHIFT,I=e("./constants"),C=e("./helpers"),k=c._,E=c.mod,R=c.deg2rad,O=c.rad2deg;function N(H,V){this.id=V,this.gd=H,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Z=H._fullLayout,q="clip"+Z._uid+V;this.clipIds.forTraces=q+"-for-traces",this.clipPaths.forTraces=Z._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Z._polarlayer.append("g").attr("class",V),this.radialTickLayout=null,this.angularTickLayout=null}var G=N.prototype;d.exports=function(V,Z){return new N(V,Z)},G.plot=function(H,V){var Z=this,q=V[Z.id];Z._hasClipOnAxisFalse=!1;for(var J=0;J<H.length;J++){var ne=H[J][0].trace;if(ne.cliponaxis===!1){Z._hasClipOnAxisFalse=!0;break}}Z.updateLayers(V,q),Z.updateLayout(V,q),l.generalUpdatePerTraceModule(Z.gd,Z,H,q),Z.updateFx(V,q)},G.updateLayers=function(H,V){var Z=this,q=Z.layers,J=V.radialaxis,ne=V.angularaxis,ve=I.layerNames,$=ve.indexOf("frontplot"),j=ve.slice(0,$),ae=ne.layer==="below traces",ie=J.layer==="below traces";ae&&j.push("angular-line"),ie&&j.push("radial-line"),ae&&j.push("angular-axis"),ie&&j.push("radial-axis"),j.push("frontplot"),ae||j.push("angular-line"),ie||j.push("radial-line"),ae||j.push("angular-axis"),ie||j.push("radial-axis");var te=Z.framework.selectAll(".polarsublayer").data(j,String);te.enter().append("g").attr("class",function(re){return"polarsublayer "+re}).each(function(re){var ce=q[re]=r.select(this);switch(re){case"frontplot":ce.append("g").classed("barlayer",!0),ce.append("g").classed("scatterlayer",!0);break;case"backplot":ce.append("g").classed("maplayer",!0);break;case"plotbg":q.bg=ce.append("path");break;case"radial-grid":ce.style("fill","none");break;case"angular-grid":ce.style("fill","none");break;case"radial-line":ce.append("line").style("fill","none");break;case"angular-line":ce.append("path").style("fill","none");break}}),te.order()},G.updateLayout=function(H,V){var Z=this,q=Z.layers,J=H._size,ne=V.radialaxis,ve=V.angularaxis,$=V.domain.x,j=V.domain.y;Z.xOffset=J.l+J.w*$[0],Z.yOffset=J.t+J.h*(1-j[1]);var ae=Z.xLength=J.w*($[1]-$[0]),ie=Z.yLength=J.h*(j[1]-j[0]),te=V.sector;Z.sectorInRad=te.map(R);var re=Z.sectorBBox=Y(te),ce=re[2]-re[0],pe=re[3]-re[1],fe=ie/ae,se=Math.abs(pe/ce),de,be,xe,ke,Re;fe>se?(de=ae,be=ae*se,Re=(ie-be)/J.h/2,xe=[$[0],$[1]],ke=[j[0]+Re,j[1]-Re]):(de=ie/se,be=ie,Re=(ae-de)/J.w/2,xe=[$[0]+Re,$[1]-Re],ke=[j[0],j[1]]),Z.xLength2=de,Z.yLength2=be,Z.xDomain2=xe,Z.yDomain2=ke;var Ke=Z.xOffset2=J.l+J.w*xe[0],ze=Z.yOffset2=J.t+J.h*(1-ke[1]),Je=Z.radius=de/ce,qe=Z.innerRadius=V.hole*Je,Ee=Z.cx=Ke-Je*re[0],Ae=Z.cy=ze+Je*re[3],Be=Z.cxx=Ee-Ke,$e=Z.cyy=Ae-ze;Z.radialAxis=Z.mockAxis(H,V,ne,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[ne.side],_realSide:ne.side,domain:[qe/J.w,Je/J.w]}),Z.angularAxis=Z.mockAxis(H,V,ve,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(H,V),Z.updateAngularAxis(H,V),Z.updateRadialAxis(H,V),Z.updateRadialAxisTitle(H,V),Z.xaxis=Z.mockCartesianAxis(H,V,{_id:"x",domain:xe}),Z.yaxis=Z.mockCartesianAxis(H,V,{_id:"y",domain:ke});var xt=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",xt).attr("transform",f(Be,$e)),q.frontplot.attr("transform",f(Ke,ze)).call(o.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),q.bg.attr("d",xt).attr("transform",f(Ee,Ae)).call(n.fill,V.bgcolor)},G.mockAxis=function(H,V,Z,q){var J=c.extendFlat({},Z,q);return s(J,V,H),J},G.mockCartesianAxis=function(H,V,Z){var q=this,J=Z._id,ne=c.extendFlat({type:"linear"},Z);i(ne,H);var ve={x:[0,2],y:[1,3]};return ne.setRange=function(){var $=q.sectorBBox,j=ve[J],ae=q.radialAxis._rl,ie=(ae[1]-ae[0])/(1-V.hole);ne.range=[$[j[0]]*ie,$[j[1]]*ie]},ne.isPtWithinRange=J==="x"?function($){return q.isPtInside($)}:function(){return!0},ne.setRange(),ne.setScale(),ne},G.doAutoRange=function(H,V){var Z=this.gd,q=this.radialAxis,J=V.radialaxis;q.setScale(),p(Z,q);var ne=q.range;J.range=ne.slice(),J._input.range=ne.slice(),q._rl=[q.r2l(ne[0],null,"gregorian"),q.r2l(ne[1],null,"gregorian")]},G.updateRadialAxis=function(H,V){var Z=this,q=Z.gd,J=Z.layers,ne=Z.radius,ve=Z.innerRadius,$=Z.cx,j=Z.cy,ae=V.radialaxis,ie=E(V.sector[0],360),te=Z.radialAxis,re=ve<ne;Z.fillViewInitialKey("radialaxis.angle",ae.angle),Z.fillViewInitialKey("radialaxis.range",te.range.slice()),te.setGeometry(),te.tickangle==="auto"&&ie>90&&ie<=270&&(te.tickangle=180);var ce=function(Ke){return f(te.l2p(Ke.x)+ve,0)},pe=function(Ke){return Z.pathArc(te.r2p(Ke.x)+ve)},fe=U(ae);if(Z.radialTickLayout!==fe&&(J["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=fe),re){te.setScale();var se=h.calcTicks(te),de=h.clipEnds(te,se),be=h.getTickSigns(te)[2];h.drawTicks(q,te,{vals:se,layer:J["radial-axis"],path:h.makeTickPath(te,0,be),transFn:ce,crisp:!1}),h.drawGrid(q,te,{vals:de,layer:J["radial-grid"],path:pe,transFn:c.noop,crisp:!1}),h.drawLabels(q,te,{vals:se,layer:J["radial-axis"],transFn:ce,labelFns:h.makeLabelFns(te,0)})}var xe=Z.radialAxisAngle=Z.vangles?O(z(R(ae.angle),Z.vangles)):ae.angle,ke=f($,j),Re=ke+t(-xe);B(J["radial-axis"],re&&(ae.showticklabels||ae.ticks),{transform:Re}),B(J["radial-grid"],re&&ae.showgrid,{transform:ke}),B(J["radial-line"].select("line"),re&&ae.showline,{x1:ve,y1:0,x2:ne,y2:0,transform:Re}).attr("stroke-width",ae.linewidth).call(n.stroke,ae.linecolor)},G.updateRadialAxisTitle=function(H,V,Z){var q=this,J=q.gd,ne=q.radius,ve=q.cx,$=q.cy,j=V.radialaxis,ae=q.id+"title",ie=Z!==void 0?Z:q.radialAxisAngle,te=R(ie),re=Math.cos(te),ce=Math.sin(te),pe=0;if(j.title){var fe=o.bBox(q.layers["radial-axis"].node()).height,se=j.title.font.size;pe=j.side==="counterclockwise"?-fe-se*.4:fe+se*.8}q.layers["radial-axis-title"]=y.draw(J,ae,{propContainer:j,propName:q.id+".radialaxis.title",placeholder:k(J,"Click to enter radial axis title"),attributes:{x:ve+ne/2*re+pe*ce,y:$-ne/2*ce+pe*re,"text-anchor":"middle"},transform:{rotate:-ie}})},G.updateAngularAxis=function(H,V){var Z=this,q=Z.gd,J=Z.layers,ne=Z.radius,ve=Z.innerRadius,$=Z.cx,j=Z.cy,ae=V.angularaxis,ie=Z.angularAxis;Z.fillViewInitialKey("angularaxis.rotation",ae.rotation),ie.setGeometry(),ie.setScale();var te=function(Je){return ie.t2g(Je.x)};ie.type==="linear"&&ie.thetaunit==="radians"&&(ie.tick0=O(ie.tick0),ie.dtick=O(ie.dtick));var re=function(Je){return f($+ne*Math.cos(Je),j-ne*Math.sin(Je))},ce=function(Je){return re(te(Je))},pe=function(Je){var qe=te(Je);return re(qe)+t(-O(qe))},fe=function(Je){var qe=te(Je),Ee=Math.cos(qe),Ae=Math.sin(qe);return"M"+[$+ve*Ee,j-ve*Ae]+"L"+[$+ne*Ee,j-ne*Ae]},se=h.makeLabelFns(ie,0),de=se.labelStandoff,be={};be.xFn=function(Je){var qe=te(Je);return Math.cos(qe)*de},be.yFn=function(Je){var qe=te(Je),Ee=Math.sin(qe)>0?.2:1;return-Math.sin(qe)*(de+Je.fontSize*Ee)+Math.abs(Math.cos(qe))*(Je.fontSize*L)},be.anchorFn=function(Je){var qe=te(Je),Ee=Math.cos(qe);return Math.abs(Ee)<.1?"middle":Ee>0?"start":"end"},be.heightFn=function(Je,qe,Ee){var Ae=te(Je);return-.5*(1+Math.sin(Ae))*Ee};var xe=U(ae);Z.angularTickLayout!==xe&&(J["angular-axis"].selectAll("."+ie._id+"tick").remove(),Z.angularTickLayout=xe);var ke=h.calcTicks(ie),Re;if(V.gridshape==="linear"?(Re=ke.map(te),c.angleDelta(Re[0],Re[1])<0&&(Re=Re.slice().reverse())):Re=null,Z.vangles=Re,ie.type==="category"&&(ke=ke.filter(function(Je){return c.isAngleInsideSector(te(Je),Z.sectorInRad)})),ie.visible){var Ke=ie.ticks==="inside"?-1:1,ze=(ie.linewidth||1)/2;h.drawTicks(q,ie,{vals:ke,layer:J["angular-axis"],path:"M"+Ke*ze+",0h"+Ke*ie.ticklen,transFn:pe,crisp:!1}),h.drawGrid(q,ie,{vals:ke,layer:J["angular-grid"],path:fe,transFn:c.noop,crisp:!1}),h.drawLabels(q,ie,{vals:ke,layer:J["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:be})}B(J["angular-line"].select("path"),ae.showline,{d:Z.pathSubplot(),transform:f($,j)}).attr("stroke-width",ae.linewidth).call(n.stroke,ae.linecolor)},G.updateFx=function(H,V){this.gd._context.staticPlot||(this.updateAngularDrag(H),this.updateRadialDrag(H,V,0),this.updateRadialDrag(H,V,1),this.updateMainDrag(H))},G.updateMainDrag=function(H){var V=this,Z=V.gd,q=V.layers,J=H._zoomlayer,ne=I.MINZOOM,ve=I.OFFEDGE,$=V.radius,j=V.innerRadius,ae=V.cx,ie=V.cy,te=V.cxx,re=V.cyy,ce=V.sectorInRad,pe=V.vangles,fe=V.radialAxis,se=C.clampTiny,de=C.findXYatLength,be=C.findEnclosingVertexAngles,xe=I.cornerHalfWidth,ke=I.cornerLen/2,Re,Ke,ze=v.makeDragger(q,"path","maindrag","crosshair");r.select(ze).attr("d",V.pathSubplot()).attr("transform",f(ae,ie));var Je={element:ze,gd:Z,subplot:V.id,plotinfo:{id:V.id,xaxis:V.xaxis,yaxis:V.yaxis},xaxes:[V.xaxis],yaxes:[V.yaxis]},qe,Ee,Ae,Be,$e,xt,bt,Ne,st;function _t(Ie,He){return Math.sqrt(Ie*Ie+He*He)}function Ot(Ie,He){return _t(Ie-te,He-re)}function Wt(Ie,He){return Math.atan2(re-He,Ie-te)}function Et(Ie,He){return[Ie*Math.cos(He),Ie*Math.sin(-He)]}function jt(Ie,He){if(Ie===0)return V.pathSector(2*xe);var Ye=ke/Ie,ut=He-Ye,nt=He+Ye,Ge=Math.max(0,Math.min(Ie,$)),at=Ge-xe,et=Ge+xe;return"M"+Et(at,ut)+"A"+[at,at]+" 0,0,0 "+Et(at,nt)+"L"+Et(et,nt)+"A"+[et,et]+" 0,0,1 "+Et(et,ut)+"Z"}function Zt(Ie,He,Ye){if(Ie===0)return V.pathSector(2*xe);var ut=Et(Ie,He),nt=Et(Ie,Ye),Ge=se((ut[0]+nt[0])/2),at=se((ut[1]+nt[1])/2),et,lt;if(Ge&&at){var Ct=at/Ge,Pt=-1/Ct,$t=de(xe,Ct,Ge,at);et=de(ke,Pt,$t[0][0],$t[0][1]),lt=de(ke,Pt,$t[1][0],$t[1][1])}else{var je,Oe;at?(je=ke,Oe=xe):(je=xe,Oe=ke),et=[[Ge-je,at-Oe],[Ge+je,at-Oe]],lt=[[Ge-je,at+Oe],[Ge+je,at+Oe]]}return"M"+et.join("L")+"L"+lt.reverse().join("L")+"Z"}function Mt(){Ae=null,Be=null,$e=V.pathSubplot(),xt=!1;var Ie=Z._fullLayout[V.id];bt=a(Ie.bgcolor).getLuminance(),Ne=v.makeZoombox(J,bt,ae,ie,$e),Ne.attr("fill-rule","evenodd"),st=v.makeCorners(J,ae,ie),g(Z)}function At(Ie,He){return He=Math.max(Math.min(He,$),j),Ie<ve?Ie=0:$-Ie<ve?Ie=$:He<ve?He=0:$-He<ve&&(He=$),Math.abs(He-Ie)>ne?(Ie<He?(Ae=Ie,Be=He):(Ae=He,Be=Ie),!0):(Ae=null,Be=null,!1)}function ft(Ie,He){Ie=Ie||$e,He=He||"M0,0Z",Ne.attr("d",Ie),st.attr("d",He),v.transitionZoombox(Ne,st,xt,bt),xt=!0;var Ye={};Qe(Ye),Z.emit("plotly_relayouting",Ye)}function ot(Ie,He){Ie=Ie*Re,He=He*Ke;var Ye=qe+Ie,ut=Ee+He,nt=Ot(qe,Ee),Ge=Math.min(Ot(Ye,ut),$),at=Wt(qe,Ee),et,lt;At(nt,Ge)&&(et=$e+V.pathSector(Be),Ae&&(et+=V.pathSector(Ae)),lt=jt(Ae,at)+jt(Be,at)),ft(et,lt)}function Te(Ie,He,Ye,ut){var nt=C.findIntersectionXY(Ye,ut,Ye,[Ie-te,re-He]);return _t(nt[0],nt[1])}function Le(Ie,He){var Ye=qe+Ie,ut=Ee+He,nt=Wt(qe,Ee),Ge=Wt(Ye,ut),at=be(nt,pe),et=be(Ge,pe),lt=Te(qe,Ee,at[0],at[1]),Ct=Math.min(Te(Ye,ut,et[0],et[1]),$),Pt,$t;At(lt,Ct)&&(Pt=$e+V.pathSector(Be),Ae&&(Pt+=V.pathSector(Ae)),$t=[Zt(Ae,at[0],at[1]),Zt(Be,at[0],at[1])].join(" ")),ft(Pt,$t)}function Ve(){if(v.removeZoombox(Z),!(Ae===null||Be===null)){var Ie={};Qe(Ie),v.showDoubleClickNotifier(Z),u.call("_guiRelayout",Z,Ie)}}function Qe(Ie){var He=fe._rl,Ye=(He[1]-He[0])/(1-j/$)/$,ut=[He[0]+(Ae-j)*Ye,He[0]+(Be-j)*Ye];Ie[V.id+".radialaxis.range"]=ut}function Me(Ie,He){var Ye=Z._fullLayout.clickmode;if(v.removeZoombox(Z),Ie===2){var ut={};for(var nt in V.viewInitial)ut[V.id+"."+nt]=V.viewInitial[nt];Z.emit("plotly_doubleclick",null),u.call("_guiRelayout",Z,ut)}Ye.indexOf("select")>-1&&Ie===1&&w(He,Z,[V.xaxis],[V.yaxis],V.id,Je),Ye.indexOf("event")>-1&&b.click(Z,He,V.id)}Je.prepFn=function(Ie,He,Ye){var ut=Z._fullLayout.dragmode,nt=ze.getBoundingClientRect();Z._fullLayout._calcInverseTransform(Z);var Ge=Z._fullLayout._invTransform;Re=Z._fullLayout._invScaleX,Ke=Z._fullLayout._invScaleY;var at=c.apply3DTransform(Ge)(He-nt.left,Ye-nt.top);if(qe=at[0],Ee=at[1],pe){var et=C.findPolygonOffset($,ce[0],ce[1],pe);qe+=te+et[0],Ee+=re+et[1]}switch(ut){case"zoom":pe?Je.moveFn=Le:Je.moveFn=ot,Je.clickFn=Me,Je.doneFn=Ve,Mt();break;case"select":case"lasso":x(Ie,He,Ye,Je,ut);break}},ze.onmousemove=function(Ie){b.hover(Z,Ie,V.id),Z._fullLayout._lasthover=ze,Z._fullLayout._hoversubplot=V.id},ze.onmouseout=function(Ie){Z._dragging||m.unhover(Z,Ie)},m.init(Je)},G.updateRadialDrag=function(H,V,Z){var q=this,J=q.gd,ne=q.layers,ve=q.radius,$=q.innerRadius,j=q.cx,ae=q.cy,ie=q.radialAxis,te=I.radialDragBoxSize,re=te/2;if(!ie.visible)return;var ce=R(q.radialAxisAngle),pe=ie._rl,fe=pe[0],se=pe[1],de=pe[Z],be=.75*(pe[1]-pe[0])/(1-V.hole)/ve,xe,ke,Re;Z?(xe=j+(ve+re)*Math.cos(ce),ke=ae-(ve+re)*Math.sin(ce),Re="radialdrag"):(xe=j+($-re)*Math.cos(ce),ke=ae-($-re)*Math.sin(ce),Re="radialdrag-inner");var Ke=v.makeRectDragger(ne,Re,"crosshair",-re,-re,te,te),ze={element:Ke,gd:J};B(r.select(Ke),ie.visible&&$<ve,{transform:f(xe,ke)});var Je,qe,Ee;function Ae(Ne,st){if(Je)Je(Ne,st);else{var _t=[Ne,-st],Ot=[Math.cos(ce),Math.sin(ce)],Wt=Math.abs(c.dot(_t,Ot)/Math.sqrt(c.dot(_t,_t)));isNaN(Wt)||(Je=Wt<.5?xt:bt)}var Et={};Be(Et),J.emit("plotly_relayouting",Et)}function Be(Ne){qe!==null?Ne[q.id+".radialaxis.angle"]=qe:Ee!==null&&(Ne[q.id+".radialaxis.range["+Z+"]"]=Ee)}function $e(){qe!==null?u.call("_guiRelayout",J,q.id+".radialaxis.angle",qe):Ee!==null&&u.call("_guiRelayout",J,q.id+".radialaxis.range["+Z+"]",Ee)}function xt(Ne,st){if(Z!==0){var _t=xe+Ne,Ot=ke+st;qe=Math.atan2(ae-Ot,_t-j),q.vangles&&(qe=z(qe,q.vangles)),qe=O(qe);var Wt=f(j,ae)+t(-qe);ne["radial-axis"].attr("transform",Wt),ne["radial-line"].select("line").attr("transform",Wt);var Et=q.gd._fullLayout,jt=Et[q.id];q.updateRadialAxisTitle(Et,jt,qe)}}function bt(Ne,st){var _t=c.dot([Ne,-st],[Math.cos(ce),Math.sin(ce)]);if(Ee=de-be*_t,be>0!=(Z?Ee>fe:Ee<se)){Ee=null;return}var Ot=J._fullLayout,Wt=Ot[q.id];ie.range[Z]=Ee,ie._rl[Z]=Ee,q.updateRadialAxis(Ot,Wt),q.xaxis.setRange(),q.xaxis.setScale(),q.yaxis.setRange(),q.yaxis.setScale();var Et=!1;for(var jt in q.traceHash){var Zt=q.traceHash[jt],Mt=c.filterVisible(Zt),At=Zt[0][0].trace._module;At.plot(J,q,Mt,Wt),u.traceIs(jt,"gl")&&Mt.length&&(Et=!0)}Et&&(M(J),P(J))}ze.prepFn=function(){Je=null,qe=null,Ee=null,ze.moveFn=Ae,ze.doneFn=$e,g(J)},ze.clampFn=function(Ne,st){return Math.sqrt(Ne*Ne+st*st)<I.MINDRAG&&(Ne=0,st=0),[Ne,st]},m.init(ze)},G.updateAngularDrag=function(H){var V=this,Z=V.gd,q=V.layers,J=V.radius,ne=V.angularAxis,ve=V.cx,$=V.cy,j=V.cxx,ae=V.cyy,ie=I.angularDragBoxSize,te=v.makeDragger(q,"path","angulardrag","move"),re={element:te,gd:Z};r.select(te).attr("d",V.pathAnnulus(J,J+ie)).attr("transform",f(ve,$)).call(T,"move");function ce(Ee,Ae){return Math.atan2(ae+ie-Ae,Ee-j-ie)}var pe=q.frontplot.select(".scatterlayer").selectAll(".trace"),fe=pe.selectAll(".point"),se=pe.selectAll(".textpoint"),de,be,xe,ke,Re,Ke;function ze(Ee,Ae){var Be=V.gd._fullLayout,$e=Be[V.id],xt=de+Ee*H._invScaleX,bt=be+Ae*H._invScaleY,Ne=ce(xt,bt),st=O(Ne-Ke);if(ke=xe+st,q.frontplot.attr("transform",f(V.xOffset2,V.yOffset2)+t([-st,j,ae])),V.vangles){Re=V.radialAxisAngle+st;var _t=f(ve,$)+t(-st),Ot=f(ve,$)+t(-Re);q.bg.attr("transform",_t),q["radial-grid"].attr("transform",_t),q["radial-axis"].attr("transform",Ot),q["radial-line"].select("line").attr("transform",Ot),V.updateRadialAxisTitle(Be,$e,Re)}else V.clipPaths.forTraces.select("path").attr("transform",f(j,ae)+t(st));fe.each(function(){var ft=r.select(this),ot=o.getTranslate(ft);ft.attr("transform",f(ot.x,ot.y)+t([st]))}),se.each(function(){var ft=r.select(this),ot=ft.select("text"),Te=o.getTranslate(ft);ft.attr("transform",t([st,ot.attr("x"),ot.attr("y")])+f(Te.x,Te.y))}),ne.rotation=c.modHalf(ke,360),V.updateAngularAxis(Be,$e),V._hasClipOnAxisFalse&&!c.isFullCircle(V.sectorInRad)&&pe.call(o.hideOutsideRangePoints,V);var Wt=!1;for(var Et in V.traceHash)if(u.traceIs(Et,"gl")){var jt=V.traceHash[Et],Zt=c.filterVisible(jt),Mt=jt[0][0].trace._module;Mt.plot(Z,V,Zt,$e),Zt.length&&(Wt=!0)}Wt&&(M(Z),P(Z));var At={};Je(At),Z.emit("plotly_relayouting",At)}function Je(Ee){Ee[V.id+".angularaxis.rotation"]=ke,V.vangles&&(Ee[V.id+".radialaxis.angle"]=Re)}function qe(){se.select("text").attr("transform",null);var Ee={};Je(Ee),u.call("_guiRelayout",Z,Ee)}re.prepFn=function(Ee,Ae,Be){var $e=H[V.id];xe=$e.angularaxis.rotation;var xt=te.getBoundingClientRect();de=Ae-xt.left,be=Be-xt.top,Z._fullLayout._calcInverseTransform(Z);var bt=c.apply3DTransform(H._invTransform)(de,be);de=bt[0],be=bt[1],Ke=ce(de,be),re.moveFn=ze,re.doneFn=qe,g(Z)},V.vangles&&!c.isFullCircle(V.sectorInRad)&&(re.prepFn=c.noop,T(r.select(te),null)),m.init(re)},G.isPtInside=function(H){var V=this.sectorInRad,Z=this.vangles,q=this.angularAxis.c2g(H.theta),J=this.radialAxis,ne=J.c2l(H.r),ve=J._rl,$=Z?C.isPtInsidePolygon:c.isPtInsideSector;return $(ne,q,ve,V,Z)},G.pathArc=function(H){var V=this.sectorInRad,Z=this.vangles,q=Z?C.pathPolygon:c.pathArc;return q(H,V[0],V[1],Z)},G.pathSector=function(H){var V=this.sectorInRad,Z=this.vangles,q=Z?C.pathPolygon:c.pathSector;return q(H,V[0],V[1],Z)},G.pathAnnulus=function(H,V){var Z=this.sectorInRad,q=this.vangles,J=q?C.pathPolygonAnnulus:c.pathAnnulus;return J(H,V,Z[0],Z[1],q)},G.pathSubplot=function(){var H=this.innerRadius,V=this.radius;return H?this.pathAnnulus(H,V):this.pathSector(V)},G.fillViewInitialKey=function(H,V){H in this.viewInitial||(this.viewInitial[H]=V)};function U(H){var V=H.ticks+String(H.ticklen)+String(H.showticklabels);return"side"in H&&(V+=H.side),V}function Y(H){var V=H[0],Z=H[1],q=Z-V,J=E(V,360),ne=J+q,ve=Math.cos(R(J)),$=Math.sin(R(J)),j=Math.cos(R(ne)),ae=Math.sin(R(ne)),ie,te,re,ce;return J<=90&&ne>=90||J>90&&ne>=450?ce=1:$<=0&&ae<=0?ce=0:ce=Math.max($,ae),J<=180&&ne>=180||J>180&&ne>=540?ie=-1:ve>=0&&j>=0?ie=0:ie=Math.min(ve,j),J<=270&&ne>=270||J>270&&ne>=630?te=-1:$>=0&&ae>=0?te=0:te=Math.min($,ae),ne>=360?re=1:ve<=0&&j<=0?re=0:re=Math.max(ve,j),[ie,te,re,ce]}function z(H,V){var Z=function(J){return c.angleDist(H,J)},q=c.findIndexOfMin(V,Z);return V[q]}function B(H,V,Z){return V?(H.attr("display",null),H.attr(Z)):H&&H.attr("display","none"),H}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../plot_api/subroutines":818,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/dragbox":836,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,"./constants":892,"./helpers":893,"./set_convert":904,d3:169,tinycolor2:576}],904:[function(e,d,S){var r=e("../../lib"),a=e("../cartesian/set_convert"),u=r.deg2rad,c=r.rad2deg;d.exports=function(h,i,s){switch(a(h,s),h._id){case"x":case"radialaxis":t(h,i);break;case"angularaxis":o(h,i);break}};function t(l,h){var i=h._subplot;l.setGeometry=function(){var s=l._rl[0],p=l._rl[1],v=i.innerRadius,m=(i.radius-v)/(p-s),b=v/m,y=s>p?function(x){return x<=0}:function(x){return x>=0};l.c2g=function(x){var w=l.c2l(x)-s;return(y(w)?w:0)+b},l.g2c=function(x){return l.l2c(x+s-b)},l.g2p=function(x){return x*m},l.c2p=function(x){return l.g2p(l.c2g(x))}}}function f(l,h){return h==="degrees"?u(l):l}function n(l,h){return h==="degrees"?c(l):l}function o(l,h){var i=l.type;if(i==="linear"){var s=l.d2c,p=l.c2d;l.d2c=function(v,m){return f(s(v),m)},l.c2d=function(v,m){return p(n(v,m))}}l.makeCalcdata=function(v,m){var b=v[m],y=v._length,x,w,g=function(I){return l.d2c(I,v.thetaunit)};if(b){if(r.isTypedArray(b)&&i==="linear"){if(y===b.length)return b;if(b.subarray)return b.subarray(0,y)}for(x=new Array(y),w=0;w<y;w++)x[w]=g(b[w])}else{var T=m+"0",M="d"+m,P=T in v?g(v[T]):0,L=v[M]?g(v[M]):(l.period||2*Math.PI)/y;for(x=new Array(y),w=0;w<y;w++)x[w]=P+w*L}return x},l.setGeometry=function(){var v=h.sector,m=v.map(u),b={clockwise:-1,counterclockwise:1}[l.direction],y=u(l.rotation),x=function(C){return b*C+y},w=function(C){return(C-y)/b},g,T,M,P;switch(i){case"linear":T=g=r.identity,P=u,M=c,l.range=r.isFullCircle(m)?[v[0],v[0]+360]:m.map(w).map(c);break;case"category":var L=l._categories.length,I=l.period?Math.max(l.period,L):L;I===0&&(I=1),T=P=function(C){return C*2*Math.PI/I},g=M=function(C){return C*I/Math.PI/2},l.range=[0,I];break}l.c2g=function(C){return x(T(C))},l.g2c=function(C){return g(w(C))},l.t2g=function(C){return x(P(C))},l.g2t=function(C){return M(w(C))}}}},{"../../lib":778,"../cartesian/set_convert":848}],905:[function(e,d,S){var r=e("../lib"),a=e("../plot_api/plot_template"),u=e("./domain").defaults;d.exports=function(t,f,n,o){var l=o.type,h=o.attributes,i=o.handleDefaults,s=o.partition||"x",p=f._subplots[l],v=p.length,m=v&&p[0].replace(/\d+$/,""),b,y;function x(M,P){return r.coerce(b,y,h,M,P)}for(var w=0;w<v;w++){var g=p[w];t[g]?b=t[g]:b=t[g]={},y=a.newContainer(f,g,m),x("uirevision",f.uirevision);var T={};T[s]=[w/v,(w+1)/v],u(y,f,x,T),o.id=g,i(b,y,x,o)}}},{"../lib":778,"../plot_api/plot_template":817,"./domain":855}],906:[function(e,d,S){e("../constants/docs").FORMAT_LINK,e("../constants/docs").DATE_FORMAT_LINK;function r(a){var u=a.description?" "+a.description:"",c=a.keys||[];if(c.length>0){for(var t=[],f=0;f<c.length;f++)t[f]="`"+c[f]+"`";u=u+"Finally, the template string has access to ",c.length===1?u="variable "+t[0]:u="variables "+t.slice(0,-1).join(", ")+" and "+t.slice(-1)+"."}return u}S.hovertemplateAttrs=function(a,u){a=a||{},u=u||{},r(u);var c={valType:"string",dflt:"",editType:a.editType||"none"};return a.arrayOk!==!1&&(c.arrayOk=!0),c},S.texttemplateAttrs=function(a,u){a=a||{},u=u||{},r(u);var c={valType:"string",dflt:"",editType:a.editType||"calc"};return a.arrayOk!==!1&&(c.arrayOk=!0),c}},{"../constants/docs":748}],907:[function(e,d,S){var r=e("./ternary"),a=e("../../plots/get_data").getSubplotCalcData,u=e("../../lib").counterRegex,c="ternary";S.name=c;var t=S.attr="subplot";S.idRoot=c,S.idRegex=S.attrRegex=u(c);var f=S.attributes={};f[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},S.layoutAttributes=e("./layout_attributes"),S.supplyLayoutDefaults=e("./layout_defaults"),S.plot=function(o){for(var l=o._fullLayout,h=o.calcdata,i=l._subplots[c],s=0;s<i.length;s++){var p=i[s],v=a(h,c,p),m=l[p]._subplot;m||(m=new r({id:p,graphDiv:o,container:l._ternarylayer.node()},l),l[p]._subplot=m),m.plot(v,l,o._promises)}},S.clean=function(n,o,l,h){for(var i=h._subplots[c]||[],s=0;s<i.length;s++){var p=i[s],v=h[p]._subplot;!o[p]&&!!v&&(v.plotContainer.remove(),v.clipDef.remove(),v.clipDefRelative.remove(),v.layers["a-title"].remove(),v.layers["b-title"].remove(),v.layers["c-title"].remove())}}},{"../../lib":778,"../../plots/get_data":865,"./layout_attributes":908,"./layout_defaults":909,"./ternary":910}],908:[function(e,d,S){var r=e("../../components/color/attributes"),a=e("../domain").attributes,u=e("../cartesian/layout_attributes"),c=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,f={title:{text:u.title.text,font:u.title.font},color:u.color,tickmode:u.tickmode,nticks:t({},u.nticks,{dflt:6,min:1}),tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:u.ticks,ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,showticklabels:u.showticklabels,showtickprefix:u.showtickprefix,tickprefix:u.tickprefix,showticksuffix:u.showticksuffix,ticksuffix:u.ticksuffix,showexponent:u.showexponent,exponentformat:u.exponentformat,minexponent:u.minexponent,separatethousands:u.separatethousands,tickfont:u.tickfont,tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,hoverformat:u.hoverformat,showline:t({},u.showline,{dflt:!0}),linecolor:u.linecolor,linewidth:u.linewidth,showgrid:t({},u.showgrid,{dflt:!0}),gridcolor:u.gridcolor,gridwidth:u.gridwidth,layer:u.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:u._deprecated.title,titlefont:u._deprecated.titlefont}},n=d.exports=c({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],909:[function(e,d,S){var r=e("../../components/color"),a=e("../../plot_api/plot_template"),u=e("../../lib"),c=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),f=e("../cartesian/tick_mark_defaults"),n=e("../cartesian/tick_value_defaults"),o=e("../cartesian/line_grid_defaults"),l=e("./layout_attributes"),h=["aaxis","baxis","caxis"];d.exports=function(v,m,b){c(v,m,b,{type:"ternary",attributes:l,handleDefaults:i,font:m.font,paper_bgcolor:m.paper_bgcolor})};function i(p,v,m,b){var y=m("bgcolor"),x=m("sum");b.bgColor=r.combine(y,b.paper_bgcolor);for(var w,g,T,M=0;M<h.length;M++)w=h[M],g=p[w]||{},T=a.newContainer(v,w),T._name=w,s(g,T,b,v);var P=v.aaxis,L=v.baxis,I=v.caxis;P.min+L.min+I.min>=x&&(P.min=0,L.min=0,I.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function s(p,v,m,b){var y=l[v._name];function x(C,k){return u.coerce(p,v,y,C,k)}x("uirevision",b.uirevision),v.type="linear";var w=x("color"),g=w!==y.color.dflt?w:m.font.color,T=v._name,M=T.charAt(0).toUpperCase(),P="Component "+M,L=x("title.text",P);v._hovertitle=L===P?L:M,u.coerceFont(x,"title.font",{family:m.font.family,size:Math.round(m.font.size*1.2),color:g}),x("min"),n(p,v,x,"linear"),t(p,v,x,"linear",{}),f(p,v,x,{outerTicks:!0});var I=x("showticklabels");I&&(u.coerceFont(x,"tickfont",{family:m.font.family,size:m.font.size,color:g}),x("tickangle"),x("tickformat")),o(p,v,x,{dfltColor:w,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y}),x("hoverformat"),x("layer")}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,"../subplot_defaults":905,"./layout_attributes":908}],910:[function(e,d,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../registry"),c=e("../../lib"),t=c.strTranslate,f=c._,n=e("../../components/color"),o=e("../../components/drawing"),l=e("../cartesian/set_convert"),h=e("../../lib/extend").extendFlat,i=e("../plots"),s=e("../cartesian/axes"),p=e("../../components/dragelement"),v=e("../../components/fx"),m=e("../../components/dragelement/helpers"),b=m.freeMode,y=m.rectMode,x=e("../../components/titles"),w=e("../cartesian/select").prepSelect,g=e("../cartesian/select").selectOnClick,T=e("../cartesian/select").clearSelect,M=e("../cartesian/select").clearSelectionsCache,P=e("../cartesian/constants");function L(z,B){this.id=z.id,this.graphDiv=z.graphDiv,this.init(B),this.makeFramework(B),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}d.exports=L;var I=L.prototype;I.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},I.plot=function(z,B){var H=this,V=B[H.id],Z=B._size;H._hasClipOnAxisFalse=!1;for(var q=0;q<z.length;q++){var J=z[q][0].trace;if(J.cliponaxis===!1){H._hasClipOnAxisFalse=!0;break}}H.updateLayers(V),H.adjustLayout(V,Z),i.generalUpdatePerTraceModule(H.graphDiv,H,z,V),H.layers.plotbg.select("path").call(n.fill,V.bgcolor)},I.makeFramework=function(z){var B=this,H=B.graphDiv,V=z[B.id],Z=B.clipId="clip"+B.layoutId+B.id,q=B.clipIdRelative="clip-relative"+B.layoutId+B.id;B.clipDef=c.ensureSingleById(z._clips,"clipPath",Z,function(J){J.append("path").attr("d","M0,0Z")}),B.clipDefRelative=c.ensureSingleById(z._clips,"clipPath",q,function(J){J.append("path").attr("d","M0,0Z")}),B.plotContainer=c.ensureSingle(B.container,"g",B.id),B.updateLayers(V),o.setClipUrl(B.layers.backplot,Z,H),o.setClipUrl(B.layers.grids,Z,H)},I.updateLayers=function(z){var B=this,H=B.layers,V=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&V.push("aaxis","aline"),z.baxis.layer==="below traces"&&V.push("baxis","bline"),z.caxis.layer==="below traces"&&V.push("caxis","cline"),V.push("frontplot"),z.aaxis.layer==="above traces"&&V.push("aaxis","aline"),z.baxis.layer==="above traces"&&V.push("baxis","bline"),z.caxis.layer==="above traces"&&V.push("caxis","cline");var Z=B.plotContainer.selectAll("g.toplevel").data(V,String),q=["agrid","bgrid","cgrid"];Z.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var ne=r.select(this);H[J]=ne,J==="frontplot"?ne.append("g").classed("scatterlayer",!0):J==="backplot"?ne.append("g").classed("maplayer",!0):J==="plotbg"?ne.append("path").attr("d","M0,0Z"):J==="aline"||J==="bline"||J==="cline"?ne.append("path"):J==="grids"&&q.forEach(function(ve){H[ve]=ne.append("g").classed("grid "+ve,!0)})}),Z.order()};var C=Math.sqrt(4/3);I.adjustLayout=function(z,B){var H=this,V=z.domain,Z=(V.x[0]+V.x[1])/2,q=(V.y[0]+V.y[1])/2,J=V.x[1]-V.x[0],ne=V.y[1]-V.y[0],ve=J*B.w,$=ne*B.h,j=z.sum,ae=z.aaxis.min,ie=z.baxis.min,te=z.caxis.min,re,ce,pe,fe,se,de;ve>C*$?(fe=$,pe=fe*C):(pe=ve,fe=pe/C),se=J*pe/ve,de=ne*fe/$,re=B.l+B.w*Z-pe/2,ce=B.t+B.h*(1-q)-fe/2,H.x0=re,H.y0=ce,H.w=pe,H.h=fe,H.sum=j,H.xaxis={type:"linear",range:[ae+2*te-j,j-ae-2*ie],domain:[Z-se/2,Z+se/2],_id:"x"},l(H.xaxis,H.graphDiv._fullLayout),H.xaxis.setScale(),H.xaxis.isPtWithinRange=function(Be){return Be.a>=H.aaxis.range[0]&&Be.a<=H.aaxis.range[1]&&Be.b>=H.baxis.range[1]&&Be.b<=H.baxis.range[0]&&Be.c>=H.caxis.range[1]&&Be.c<=H.caxis.range[0]},H.yaxis={type:"linear",range:[ae,j-ie-te],domain:[q-de/2,q+de/2],_id:"y"},l(H.yaxis,H.graphDiv._fullLayout),H.yaxis.setScale(),H.yaxis.isPtWithinRange=function(){return!0};var be=H.yaxis.domain[0],xe=H.aaxis=h({},z.aaxis,{range:[ae,j-ie-te],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[be,be+de*C],anchor:"free",position:0,_id:"y",_length:pe});l(xe,H.graphDiv._fullLayout),xe.setScale();var ke=H.baxis=h({},z.baxis,{range:[j-ae-te,ie],side:"bottom",domain:H.xaxis.domain,anchor:"free",position:0,_id:"x",_length:pe});l(ke,H.graphDiv._fullLayout),ke.setScale();var Re=H.caxis=h({},z.caxis,{range:[j-ae-ie,te],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[be,be+de*C],anchor:"free",position:0,_id:"y",_length:pe});l(Re,H.graphDiv._fullLayout),Re.setScale();var Ke="M"+re+","+(ce+fe)+"h"+pe+"l-"+pe/2+",-"+fe+"Z";H.clipDef.select("path").attr("d",Ke),H.layers.plotbg.select("path").attr("d",Ke);var ze="M0,"+fe+"h"+pe+"l-"+pe/2+",-"+fe+"Z";H.clipDefRelative.select("path").attr("d",ze);var Je=t(re,ce);H.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Je),H.clipDefRelative.select("path").attr("transform",null);var qe=t(re-ke._offset,ce+fe);H.layers.baxis.attr("transform",qe),H.layers.bgrid.attr("transform",qe);var Ee=t(re+pe/2,ce)+"rotate(30)"+t(0,-xe._offset);H.layers.aaxis.attr("transform",Ee),H.layers.agrid.attr("transform",Ee);var Ae=t(re+pe/2,ce)+"rotate(-30)"+t(0,-Re._offset);H.layers.caxis.attr("transform",Ae),H.layers.cgrid.attr("transform",Ae),H.drawAxes(!0),H.layers.aline.select("path").attr("d",xe.showline?"M"+re+","+(ce+fe)+"l"+pe/2+",-"+fe:"M0,0").call(n.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),H.layers.bline.select("path").attr("d",ke.showline?"M"+re+","+(ce+fe)+"h"+pe:"M0,0").call(n.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),H.layers.cline.select("path").attr("d",Re.showline?"M"+(re+pe/2)+","+ce+"l"+pe/2+","+fe:"M0,0").call(n.stroke,Re.linecolor||"#000").style("stroke-width",(Re.linewidth||0)+"px"),H.graphDiv._context.staticPlot||H.initInteractions(),o.setClipUrl(H.layers.frontplot,H._hasClipOnAxisFalse?null:H.clipId,H.graphDiv)},I.drawAxes=function(z){var B=this,H=B.graphDiv,V=B.id.substr(7)+"title",Z=B.layers,q=B.aaxis,J=B.baxis,ne=B.caxis;if(B.drawAx(q),B.drawAx(J),B.drawAx(ne),z){var ve=Math.max(q.showticklabels?q.tickfont.size/2:0,(ne.showticklabels?ne.tickfont.size*.75:0)+(ne.ticks==="outside"?ne.ticklen*.87:0)),$=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;Z["a-title"]=x.draw(H,"a"+V,{propContainer:q,propName:B.id+".aaxis.title",placeholder:f(H,"Click to enter Component A title"),attributes:{x:B.x0+B.w/2,y:B.y0-q.title.font.size/3-ve,"text-anchor":"middle"}}),Z["b-title"]=x.draw(H,"b"+V,{propContainer:J,propName:B.id+".baxis.title",placeholder:f(H,"Click to enter Component B title"),attributes:{x:B.x0-$,y:B.y0+B.h+J.title.font.size*.83+$,"text-anchor":"middle"}}),Z["c-title"]=x.draw(H,"c"+V,{propContainer:ne,propName:B.id+".caxis.title",placeholder:f(H,"Click to enter Component C title"),attributes:{x:B.x0+B.w+$,y:B.y0+B.h+ne.title.font.size*.83+$,"text-anchor":"middle"}})}},I.drawAx=function(z){var B=this,H=B.graphDiv,V=z._name,Z=V.charAt(0),q=z._id,J=B.layers[V],ne=30,ve=Z+"tickLayout",$=k(z);B[ve]!==$&&(J.selectAll("."+q+"tick").remove(),B[ve]=$),z.setScale();var j=s.calcTicks(z),ae=s.clipEnds(z,j),ie=s.makeTransTickFn(z),te=s.getTickSigns(z)[2],re=c.deg2rad(ne),ce=te*(z.linewidth||1)/2,pe=te*z.ticklen,fe=B.w,se=B.h,de=Z==="b"?"M0,"+ce+"l"+Math.sin(re)*pe+","+Math.cos(re)*pe:"M"+ce+",0l"+Math.cos(re)*pe+","+-Math.sin(re)*pe,be={a:"M0,0l"+se+",-"+fe/2,b:"M0,0l-"+fe/2+",-"+se,c:"M0,0l-"+se+","+fe/2}[Z];s.drawTicks(H,z,{vals:z.ticks==="inside"?ae:j,layer:J,path:de,transFn:ie,crisp:!1}),s.drawGrid(H,z,{vals:ae,layer:B.layers[Z+"grid"],path:be,transFn:ie,crisp:!1}),s.drawLabels(H,z,{vals:j,layer:J,transFn:ie,labelFns:s.makeLabelFns(z,0,ne)})};function k(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var E=P.MINZOOM/2+.87,R="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",O="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",N="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",G="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",U=!0;I.clearSelect=function(){M(this.dragOptions),T(this.dragOptions.gd)},I.initInteractions=function(){var z=this,B=z.layers.plotbg.select("path").node(),H=z.graphDiv,V=H._fullLayout._zoomlayer,Z,q;this.dragOptions={element:B,gd:H,plotinfo:{id:z.id,domain:H._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(qe,Ee,Ae){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],Z=H._fullLayout._invScaleX,q=H._fullLayout._invScaleY;var Be=z.dragOptions.dragmode=H._fullLayout.dragmode;b(Be)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Be==="zoom"?(z.dragOptions.moveFn=ke,z.dragOptions.clickFn=fe,z.dragOptions.doneFn=Re,se(qe,Ee,Ae)):Be==="pan"?(z.dragOptions.moveFn=ze,z.dragOptions.clickFn=fe,z.dragOptions.doneFn=Je,Ke(),z.clearSelect(H)):(y(Be)||b(Be))&&w(qe,Ee,Ae,z.dragOptions,Be)}};var J,ne,ve,$,j,ae,ie,te,re,ce;function pe(qe){var Ee={};return Ee[z.id+".aaxis.min"]=qe.a,Ee[z.id+".baxis.min"]=qe.b,Ee[z.id+".caxis.min"]=qe.c,Ee}function fe(qe,Ee){var Ae=H._fullLayout.clickmode;Y(H),qe===2&&(H.emit("plotly_doubleclick",null),u.call("_guiRelayout",H,pe({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&qe===1&&g(Ee,H,[z.xaxis],[z.yaxis],z.id,z.dragOptions),Ae.indexOf("event")>-1&&v.click(H,Ee,z.id)}function se(qe,Ee,Ae){var Be=B.getBoundingClientRect();J=Ee-Be.left,ne=Ae-Be.top,H._fullLayout._calcInverseTransform(H);var $e=H._fullLayout._invTransform,xt=c.apply3DTransform($e)(J,ne);J=xt[0],ne=xt[1],ve={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},j=ve,$=z.aaxis.range[1]-ve.a,ae=a(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),ie="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",te=!1,re=V.append("path").attr("class","zoombox").attr("transform",t(z.x0,z.y0)).style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ie),ce=V.append("path").attr("class","zoombox-corners").attr("transform",t(z.x0,z.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearSelect(H)}function de(qe,Ee){return 1-Ee/z.h}function be(qe,Ee){return 1-(qe+(z.h-Ee)/Math.sqrt(3))/z.w}function xe(qe,Ee){return(qe-(z.h-Ee)/Math.sqrt(3))/z.w}function ke(qe,Ee){var Ae=J+qe*Z,Be=ne+Ee*q,$e=Math.max(0,Math.min(1,de(J,ne),de(Ae,Be))),xt=Math.max(0,Math.min(1,be(J,ne),be(Ae,Be))),bt=Math.max(0,Math.min(1,xe(J,ne),xe(Ae,Be))),Ne=($e/2+bt)*z.w,st=(1-$e/2-xt)*z.w,_t=(Ne+st)/2,Ot=st-Ne,Wt=(1-$e)*z.h,Et=Wt-Ot/C;Ot<P.MINZOOM?(j=ve,re.attr("d",ie),ce.attr("d","M0,0Z")):(j={a:ve.a+$e*$,b:ve.b+xt*$,c:ve.c+bt*$},re.attr("d",ie+"M"+Ne+","+Wt+"H"+st+"L"+_t+","+Et+"L"+Ne+","+Wt+"Z"),ce.attr("d","M"+J+","+ne+G+"M"+Ne+","+Wt+R+"M"+st+","+Wt+O+"M"+_t+","+Et+N)),te||(re.transition().style("fill",ae>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200),te=!0),H.emit("plotly_relayouting",pe(j))}function Re(){Y(H),j!==ve&&(u.call("_guiRelayout",H,pe(j)),U&&H.data&&H._context.showTips&&(c.notifier(f(H,"Double-click to zoom back out"),"long"),U=!1))}function Ke(){ve={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},j=ve}function ze(qe,Ee){var Ae=qe/z.xaxis._m,Be=Ee/z.yaxis._m;j={a:ve.a-Be,b:ve.b+(Ae+Be)/2,c:ve.c-(Ae-Be)/2};var $e=[j.a,j.b,j.c].sort(c.sorterAsc),xt={a:$e.indexOf(j.a),b:$e.indexOf(j.b),c:$e.indexOf(j.c)};$e[0]<0&&($e[1]+$e[0]/2<0?($e[2]+=$e[0]+$e[1],$e[0]=$e[1]=0):($e[2]+=$e[0]/2,$e[1]+=$e[0]/2,$e[0]=0),j={a:$e[xt.a],b:$e[xt.b],c:$e[xt.c]},Ee=(ve.a-j.a)*z.yaxis._m,qe=(ve.c-j.c-ve.b+j.b)*z.xaxis._m);var bt=t(z.x0+qe,z.y0+Ee);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",bt);var Ne=t(-qe,-Ee);z.clipDefRelative.select("path").attr("transform",Ne),z.aaxis.range=[j.a,z.sum-j.b-j.c],z.baxis.range=[z.sum-j.a-j.c,j.b],z.caxis.range=[z.sum-j.a-j.b,j.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(o.hideOutsideRangePoints,z),H.emit("plotly_relayouting",pe(j))}function Je(){u.call("_guiRelayout",H,pe(j))}B.onmousemove=function(qe){v.hover(H,qe,z.id),H._fullLayout._lasthover=B,H._fullLayout._hoversubplot=z.id},B.onmouseout=function(qe){H._dragging||p.unhover(H,qe)},p.init(this.dragOptions)};function Y(z){r.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../lib":778,"../../lib/extend":768,"../../registry":911,"../cartesian/axes":828,"../cartesian/constants":834,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,d3:169,tinycolor2:576}],911:[function(e,d,S){var r=e("./lib/loggers"),a=e("./lib/noop"),u=e("./lib/push_unique"),c=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,f=e("./lib/extend"),n=e("./plots/attributes"),o=e("./plots/layout_attributes"),l=f.extendFlat,h=f.extendDeepAll;S.modules={},S.allCategories={},S.allTypes=[],S.subplotsRegistry={},S.transformsRegistry={},S.componentsRegistry={},S.layoutArrayContainers=[],S.layoutArrayRegexes=[],S.traceLayoutAttributes={},S.localeRegistry={},S.apiMethodRegistry={},S.collectableSubplotTypes=null,S.register=function(M){if(S.collectableSubplotTypes=null,M)M&&!Array.isArray(M)&&(M=[M]);else throw new Error("No argument passed to Plotly.register.");for(var P=0;P<M.length;P++){var L=M[P];if(!L)throw new Error("Invalid module was attempted to be registered!");switch(L.moduleType){case"trace":i(L);break;case"transform":v(L);break;case"component":p(L);break;case"locale":m(L);break;case"apiMethod":var I=L.name;S.apiMethodRegistry[I]=L.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},S.getModule=function(T){var M=S.modules[g(T)];return M?M._module:!1},S.traceIs=function(T,M){if(T=g(T),T==="various")return!1;var P=S.modules[T];return P||(T&&T!=="area"&&r.log("Unrecognized trace type "+T+"."),P=S.modules[n.type.dflt]),!!P.categories[M]},S.getTransformIndices=function(T,M){for(var P=[],L=T.transforms||[],I=0;I<L.length;I++)L[I].type===M&&P.push(I);return P},S.hasTransform=function(T,M){for(var P=T.transforms||[],L=0;L<P.length;L++)if(P[L].type===M)return!0;return!1},S.getComponentMethod=function(T,M){var P=S.componentsRegistry[T];return P&&P[M]||a},S.call=function(){var T=arguments[0],M=[].slice.call(arguments,1);return S.apiMethodRegistry[T].apply(null,M)};function i(T){var M=T.name,P=T.categories,L=T.meta;if(S.modules[M]){r.log("Type "+M+" already registered");return}S.subplotsRegistry[T.basePlotModule.name]||s(T.basePlotModule);for(var I={},C=0;C<P.length;C++)I[P[C]]=!0,S.allCategories[P[C]]=!0;S.modules[M]={_module:T,categories:I},L&&Object.keys(L).length&&(S.modules[M].meta=L),S.allTypes.push(M);for(var k in S.componentsRegistry)y(k,M);T.layoutAttributes&&l(S.traceLayoutAttributes,T.layoutAttributes);var E=T.basePlotModule,R=E.name;if(R==="mapbox"){var O=E.constants.styleRules;for(var N in O)t(".js-plotly-plot .plotly .mapboxgl-"+N,O[N])}(R==="geo"||R==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function s(T){var M=T.name;if(S.subplotsRegistry[M]){r.log("Plot type "+M+" already registered.");return}b(T),S.subplotsRegistry[M]=T;for(var P in S.componentsRegistry)w(P,T.name)}function p(T){if(typeof T.name!="string")throw new Error("Component module *name* must be a string.");var M=T.name;S.componentsRegistry[M]=T,T.layoutAttributes&&(T.layoutAttributes._isLinkedToArray&&u(S.layoutArrayContainers,M),b(T));for(var P in S.modules)y(M,P);for(var L in S.subplotsRegistry)w(M,L);for(var I in S.transformsRegistry)x(M,I);T.schema&&T.schema.layout&&h(o,T.schema.layout)}function v(T){if(typeof T.name!="string")throw new Error("Transform module *name* must be a string.");var M="Transform module "+T.name,P=typeof T.transform=="function",L=typeof T.calcTransform=="function";if(!P&&!L)throw new Error(M+" is missing a *transform* or *calcTransform* method.");P&&L&&r.log([M+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),c(T.attributes)||r.log(M+" registered without an *attributes* object."),typeof T.supplyDefaults!="function"&&r.log(M+" registered without a *supplyDefaults* method."),S.transformsRegistry[T.name]=T;for(var I in S.componentsRegistry)x(I,T.name)}function m(T){var M=T.name,P=M.split("-")[0],L=T.dictionary,I=T.format,C=L&&Object.keys(L).length,k=I&&Object.keys(I).length,E=S.localeRegistry,R=E[M];if(R||(E[M]=R={}),P!==M){var O=E[P];O||(E[P]=O={}),C&&O.dictionary===R.dictionary&&(O.dictionary=L),k&&O.format===R.format&&(O.format=I)}C&&(R.dictionary=L),k&&(R.format=I)}function b(T){if(T.layoutAttributes){var M=T.layoutAttributes._arrayAttrRegexps;if(M)for(var P=0;P<M.length;P++)u(S.layoutArrayRegexes,M[P])}}function y(T,M){var P=S.componentsRegistry[T].schema;if(!(!P||!P.traces)){var L=P.traces[M];L&&h(S.modules[M]._module.attributes,L)}}function x(T,M){var P=S.componentsRegistry[T].schema;if(!(!P||!P.transforms)){var L=P.transforms[M];L&&h(S.transformsRegistry[M].attributes,L)}}function w(T,M){var P=S.componentsRegistry[T].schema;if(!(!P||!P.subplots)){var L=S.subplotsRegistry[M],I=L.layoutAttributes,C=L.attr==="subplot"?L.name:L.attr;Array.isArray(C)&&(C=C[0]);var k=P.subplots[C];I&&k&&h(I,k)}}function g(T){return typeof T=="object"&&(T=T.type),T}},{"./lib/dom":766,"./lib/extend":768,"./lib/is_plain_object":779,"./lib/loggers":782,"./lib/noop":787,"./lib/push_unique":793,"./plots/attributes":824,"./plots/layout_attributes":882}],912:[function(e,d,S){var r=e("../registry"),a=e("../lib"),u=a.extendFlat,c=a.extendDeep;function t(n){var o;switch(n){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}function f(n){var o=["xaxis","yaxis","zaxis"];return o.indexOf(n.slice(0,5))>-1}d.exports=function(o,l){o.framework&&o.framework.isPolar&&(o=o.framework.getConfig());var h,i=o.data,s=o.layout,p=c([],i),v=c({},s,t(l.tileClass)),m=o._context||{};if(l.width&&(v.width=l.width),l.height&&(v.height=l.height),l.tileClass==="thumbnail"||l.tileClass==="themes__thumb"){v.annotations=[];var b=Object.keys(v);for(h=0;h<b.length;h++)f(b[h])&&(v[b[h]].title={text:""});for(h=0;h<p.length;h++){var y=p[h];y.showscale=!1,y.marker&&(y.marker.showscale=!1),r.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(l.annotations))for(h=0;h<l.annotations.length;h++)v.annotations.push(l.annotations[h]);var x=Object.keys(v).filter(function(P){return P.match(/^scene\d*$/)});if(x.length){var w={};for(l.tileClass==="thumbnail"&&(w={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),h=0;h<x.length;h++){var g=v[x[h]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),u(g.xaxis,w),u(g.yaxis,w),u(g.zaxis,w),g._scene=null}}var T=document.createElement("div");l.tileClass&&(T.className=l.tileClass);var M={gd:T,td:T,layout:v,data:p,config:{staticPlot:l.staticPlot===void 0?!0:l.staticPlot,plotGlPixelRatio:l.plotGlPixelRatio===void 0?2:l.plotGlPixelRatio,displaylogo:l.displaylogo||!1,showLink:l.showLink||!1,showTips:l.showTips||!1,mapboxAccessToken:m.mapboxAccessToken}};return l.setBackground!=="transparent"&&(M.config.setBackground=l.setBackground||"opaque"),M.gd.defaultLayout=t(l.tileClass),M}},{"../lib":778,"../registry":911}],913:[function(e,d,S){var r=e("../lib"),a=e("../plot_api/to_image"),u=e("./filesaver"),c=e("./helpers");function t(f,n){var o;return r.isPlainObject(f)||(o=r.getGraphDiv(f)),n=n||{},n.format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(l,h){o&&o._snapshotInProgress&&h(new Error("Snapshotting already in progress.")),r.isIE()&&n.format!=="svg"&&h(new Error(c.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var i=a(f,n),s=n.filename||f.fn||"newplot";s+="."+n.format.replace("-","."),i.then(function(p){return o&&(o._snapshotInProgress=!1),u(p,s,n.format)}).then(function(p){l(p)}).catch(function(p){o&&(o._snapshotInProgress=!1),h(p)})})}d.exports=t},{"../lib":778,"../plot_api/to_image":820,"./filesaver":914,"./helpers":915}],914:[function(e,d,S){var r=e("../lib"),a=e("./helpers");function u(c,t,f){var n=document.createElement("a"),o="download"in n,l=new Promise(function(h,i){var s,p;if(r.isIE9orBelow()&&i(new Error("IE < 10 unsupported")),r.isSafari()){var v=f==="svg"?",":";base64,";return a.octetStream(v+encodeURIComponent(c)),h(t)}if(r.isIE())return s=a.createBlob(c,"svg"),window.navigator.msSaveBlob(s,t),s=null,h(t);if(o)return s=a.createBlob(c,f),p=a.createObjectURL(s),n.href=p,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),a.revokeObjectURL(p),s=null,h(t);i(new Error("download error"))});return l}d.exports=u},{"../lib":778,"./helpers":915}],915:[function(e,d,S){var r=e("../registry");S.getDelay=function(c){return c._has&&(c._has("gl3d")||c._has("gl2d")||c._has("mapbox"))?500:0},S.getRedrawFunc=function(c){return function(){var t=c._fullLayout||{},f=t._has&&t._has("polar"),n=!f&&c.data&&c.data[0]&&c.data[0].r;n||r.getComponentMethod("colorbar","draw")(c)}},S.encodeSVG=function(c){return"data:image/svg+xml,"+encodeURIComponent(c)},S.encodeJSON=function(c){return"data:application/json,"+encodeURIComponent(c)};var a=window.URL||window.webkitURL;S.createObjectURL=function(c){return a.createObjectURL(c)},S.revokeObjectURL=function(c){return a.revokeObjectURL(c)},S.createBlob=function(c,t){if(t==="svg")return new window.Blob([c],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([c],{type:"application/json;charset=utf-8"});var f=u(window.atob(c));return new window.Blob([f],{type:"image/"+t})},S.octetStream=function(c){document.location.href="data:application/octet-stream"+c};function u(c){for(var t=c.length,f=new ArrayBuffer(t),n=new Uint8Array(f),o=0;o<t;o++)n[o]=c.charCodeAt(o);return f}S.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,S.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":911}],916:[function(e,d,S){var r=e("./helpers"),a={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};d.exports=a},{"./cloneplot":912,"./download":913,"./helpers":915,"./svgtoimg":917,"./toimage":918,"./tosvg":919}],917:[function(e,d,S){var r=e("../lib"),a=e("events").EventEmitter,u=e("./helpers");function c(t){var f=t.emitter||new a,n=new Promise(function(o,l){var h=window.Image,i=t.svg,s=t.format||"png";if(r.isIE()&&s!=="svg"){var p=new Error(u.MSG_IE_BAD_FORMAT);return l(p),t.promise?n:f.emit("error",p)}var v=t.canvas,m=t.scale||1,b=t.width||300,y=t.height||150,x=m*b,w=m*y,g=v.getContext("2d"),T=new h,M,P;s==="svg"||r.isIE9orBelow()||r.isSafari()?P=u.encodeSVG(i):(M=u.createBlob(i,"svg"),P=u.createObjectURL(M)),v.width=x,v.height=w,T.onload=function(){var L;switch(M=null,u.revokeObjectURL(P),s!=="svg"&&g.drawImage(T,0,0,x,w),s){case"jpeg":L=v.toDataURL("image/jpeg");break;case"png":L=v.toDataURL("image/png");break;case"webp":L=v.toDataURL("image/webp");break;case"svg":L=P;break;default:var I="Image format is not jpeg, png, svg or webp.";if(l(new Error(I)),!t.promise)return f.emit("error",I)}o(L),t.promise||f.emit("success",L)},T.onerror=function(L){if(M=null,u.revokeObjectURL(P),l(L),!t.promise)return f.emit("error",L)},T.src=P});return t.promise?n:f}d.exports=c},{"../lib":778,"./helpers":915,events:110}],918:[function(e,d,S){var r=e("events").EventEmitter,a=e("../registry"),u=e("../lib"),c=e("./helpers"),t=e("./cloneplot"),f=e("./tosvg"),n=e("./svgtoimg");function o(l,h){var i=new r,s=t(l,{format:"png"}),p=s.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);function v(){var b=c.getDelay(p._fullLayout);setTimeout(function(){var y=f(p),x=document.createElement("canvas");x.id=u.randstr(),i=n({format:h.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:x,emitter:i,svg:y}),i.clean=function(){p&&document.body.removeChild(p)}},b)}var m=c.getRedrawFunc(p);return a.call("plot",p,s.data,s.layout,s.config).then(m).then(v).catch(function(b){i.emit("error",b)}),i}d.exports=o},{"../lib":778,"../registry":911,"./cloneplot":912,"./helpers":915,"./svgtoimg":917,"./tosvg":919,events:110}],919:[function(e,d,S){var r=e("d3"),a=e("../lib"),u=e("../components/drawing"),c=e("../components/color"),t=e("../constants/xmlns_namespaces"),f=/"/g,n="TOBESTRIPPED",o=new RegExp('("'+n+")|("+n+'")',"g");function l(i){var s=r.select("body").append("div").style({display:"none"}).html(""),p=i.replace(/(&[^;]*;)/gi,function(v){return v==="&lt;"?"&#60;":v==="&rt;"?"&#62;":v.indexOf("<")!==-1||v.indexOf(">")!==-1?"":s.html(v).text()});return s.remove(),p}function h(i){return i.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}d.exports=function(s,p,v){var m=s._fullLayout,b=m._paper,y=m._toppaper,x=m.width,w=m.height,g;b.insert("rect",":first-child").call(u.setRect,0,0,x,w).call(c.fill,m.paper_bgcolor);var T=m._basePlotModules||[];for(g=0;g<T.length;g++){var M=T[g];M.toSVG&&M.toSVG(s)}if(y){var P=y.node().childNodes,L=Array.prototype.slice.call(P);for(g=0;g<L.length;g++){var I=L[g];I.childNodes.length&&b.node().appendChild(I)}}if(m._draggers&&m._draggers.remove(),b.node().style.background="",b.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var R=r.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){R.remove();return}else R.style({visibility:null,display:null});var O=this.style.fontFamily;O&&O.indexOf('"')!==-1&&R.style("font-family",O.replace(f,n))}),m._gradientUrlQueryParts){var C=[];for(var k in m._gradientUrlQueryParts)C.push(k);C.length&&b.selectAll(C.join(",")).each(function(){var R=r.select(this),O=this.style.fill;O&&O.indexOf("url(")!==-1&&R.style("fill",O.replace(f,n));var N=this.style.stroke;N&&N.indexOf("url(")!==-1&&R.style("stroke",N.replace(f,n))})}(p==="pdf"||p==="eps")&&b.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),b.node().setAttributeNS(t.xmlns,"xmlns",t.svg),b.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),p==="svg"&&v&&(b.attr("width",v*x),b.attr("height",v*w),b.attr("viewBox","0 0 "+x+" "+w));var E=new window.XMLSerializer().serializeToString(b.node());return E=l(E),E=h(E),E=E.replace(o,"'"),a.isIE()&&(E=E.replace(/"/gi,"'"),E=E.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),E=E.replace(/(\\')/gi,'"')),E}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],920:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){for(var t=0;t<u.length;t++)u[t].i=t;r.mergeArray(c.text,u,"tx"),r.mergeArray(c.hovertext,u,"htx");var f=c.marker;if(f){r.mergeArray(f.opacity,u,"mo",!0),r.mergeArray(f.color,u,"mc");var n=f.line;n&&(r.mergeArray(n.color,u,"mlc"),r.mergeArrayCastPositive(n.width,u,"mlw"))}}},{"../../lib":778}],921:[function(e,d,S){var r=e("../scatter/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),f=e("./constants"),n=e("../../lib/extend").extendFlat,o=t({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=r.marker,h=l.line,i=n({},h.width,{dflt:0}),s=n({width:i,editType:"calc"},c("marker.line")),p=n({line:s,editType:"calc"},c("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});d.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,texttemplate:u({editType:"plot"},{keys:f.eventDataKeys}),hovertext:r.hovertext,hovertemplate:a({},{keys:f.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},o,{}),insidetextfont:n({},o,{}),outsidetextfont:n({},o,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},r:r.r,t:r.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"../scatter/attributes":1187,"./constants":923}],922:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/align_period"),u=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),f=e("../scatter/calc_selection");d.exports=function(o,l){var h=r.getFromId(o,l.xaxis||"x"),i=r.getFromId(o,l.yaxis||"y"),s,p,v,m={msUTC:!!(l.base||l.base===0)},b;l.orientation==="h"?(s=h.makeCalcdata(l,"x",m),v=i.makeCalcdata(l,"y"),p=a(l,i,"y",v),b=!!l.yperiodalignment):(s=i.makeCalcdata(l,"y",m),v=h.makeCalcdata(l,"x"),p=a(l,h,"x",v),b=!!l.xperiodalignment);for(var y=Math.min(p.length,s.length),x=new Array(y),w=0;w<y;w++)x[w]={p:p[w],s:s[w]},b&&(x[w].orig_p=v[w]),l.ids&&(x[w].id=String(l.ids[w]));return u(l,"marker")&&c(o,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),u(l,"marker.line")&&c(o,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(x,l),f(x,l),x}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":920}],923:[function(e,d,S){d.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],924:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib").isArrayOrTypedArray,u=e("../../constants/numerical").BADNUM,c=e("../../registry"),t=e("../../plots/cartesian/axes"),f=e("../../plots/cartesian/constraints").getAxisGroup,n=e("./sieve.js");function o(C,k){for(var E=k.xaxis,R=k.yaxis,O=C._fullLayout,N=C._fullData,G=C.calcdata,U=[],Y=[],z=0;z<N.length;z++){var B=N[z];if(B.visible===!0&&c.traceIs(B,"bar")&&B.xaxis===E._id&&B.yaxis===R._id&&(B.orientation==="h"?U.push(G[z]):Y.push(G[z]),B._computePh))for(var H=C.calcdata[z],V=0;V<H.length;V++)typeof H[V].ph0=="function"&&(H[V].ph0=H[V].ph0()),typeof H[V].ph1=="function"&&(H[V].ph1=H[V].ph1())}var Z={xCat:E.type==="category"||E.type==="multicategory",yCat:R.type==="category"||R.type==="multicategory",mode:O.barmode,norm:O.barnorm,gap:O.bargap,groupgap:O.bargroupgap};l(C,E,R,Y,Z),l(C,R,E,U,Z)}function l(C,k,E,R,O){if(!!R.length){var N,G,U,Y,z;switch(h(E,R),O.mode){case"overlay":i(k,E,R,O);break;case"group":for(N=[],G=[],U=0;U<R.length;U++)Y=R[U],z=Y[0].trace,z.offset===void 0?G.push(Y):N.push(Y);G.length&&s(C,k,E,G,O),N.length&&i(k,E,N,O);break;case"stack":case"relative":for(N=[],G=[],U=0;U<R.length;U++)Y=R[U],z=Y[0].trace,z.base===void 0?G.push(Y):N.push(Y);G.length&&p(C,k,E,G,O),N.length&&i(k,E,N,O);break}L(R,k)}}function h(C,k){var E,R;for(E=0;E<k.length;E++){var O=k[E],N=O[0].trace,G=N.type==="funnel"?N._base:N.base,U,Y=N.orientation==="h"?N.xcalendar:N.ycalendar,z=C.type==="category"||C.type==="multicategory"?function(){return null}:C.d2c;if(a(G)){for(R=0;R<Math.min(G.length,O.length);R++)U=z(G[R],0,Y),r(U)?(O[R].b=+U,O[R].hasB=1):O[R].b=0;for(;R<O.length;R++)O[R].b=0}else{U=z(G,0,Y);var B=r(U);for(U=B?U:0,R=0;R<O.length;R++)O[R].b=U,B&&(O[R].hasB=1)}}}function i(C,k,E,R){for(var O=0;O<E.length;O++){var N=E[O],G=new n([N],{unitMinDiff:R.xCat||R.yCat,sepNegVal:!1,overlapNoMerge:!R.norm});v(C,G,R),R.norm?(T(G),P(k,G,R)):w(k,G)}}function s(C,k,E,R,O){var N=new n(R,{sepNegVal:!1,overlapNoMerge:!O.norm});m(C,k,N,O),M(N),O.norm?(T(N),P(E,N,O)):w(E,N)}function p(C,k,E,R,O){var N=new n(R,{sepNegVal:O.mode==="relative",overlapNoMerge:!(O.norm||O.mode==="stack"||O.mode==="relative")});v(k,N,O),g(E,N,O);for(var G=0;G<R.length;G++)for(var U=R[G],Y=0;Y<U.length;Y++){var z=U[Y];if(z.s!==u){var B=z.b+z.s===N.get(z.p,z.s);B&&(z._outmost=!0)}}O.norm&&P(E,N,O)}function v(C,k,E){for(var R=k.minDiff,O=k.traces,N=R*(1-E.gap),G=N,U=G*(1-(E.groupgap||0)),Y=-U/2,z=0;z<O.length;z++){var B=O[z],H=B[0].t;H.barwidth=U,H.poffset=Y,H.bargroupwidth=N,H.bardelta=R}k.binWidth=O[0][0].t.barwidth/100,b(k),y(C,k),x(C,k)}function m(C,k,E,R){for(var O=C._fullLayout,N=E.positions,G=E.distinctPositions,U=E.minDiff,Y=E.traces,z=Y.length,B=N.length!==G.length,H=U*(1-R.gap),V=f(O,k._id)+Y[0][0].trace.orientation,Z=O._alignmentOpts[V]||{},q=0;q<z;q++){var J=Y[q],ne=J[0].trace,ve=Z[ne.alignmentgroup]||{},$=Object.keys(ve.offsetGroups||{}).length,j;$?j=H/$:j=B?H/z:H;var ae=j*(1-(R.groupgap||0)),ie;$?ie=((2*ne._offsetIndex+1-$)*j-ae)/2:ie=B?((2*q+1-z)*j-ae)/2:-ae/2;var te=J[0].t;te.barwidth=ae,te.poffset=ie,te.bargroupwidth=H,te.bardelta=U}E.binWidth=Y[0][0].t.barwidth/100,b(E),y(k,E),x(k,E,B)}function b(C){var k=C.traces,E,R;for(E=0;E<k.length;E++){var O=k[E],N=O[0],G=N.trace,U=N.t,Y=G._offset||G.offset,z=U.poffset,B;if(a(Y)){for(B=Array.prototype.slice.call(Y,0,O.length),R=0;R<B.length;R++)r(B[R])||(B[R]=z);for(R=B.length;R<O.length;R++)B.push(z);U.poffset=B}else Y!==void 0&&(U.poffset=Y);var H=G._width||G.width,V=U.barwidth;if(a(H)){var Z=Array.prototype.slice.call(H,0,O.length);for(R=0;R<Z.length;R++)r(Z[R])||(Z[R]=V);for(R=Z.length;R<O.length;R++)Z.push(V);if(U.barwidth=Z,Y===void 0){for(B=[],R=0;R<O.length;R++)B.push(z+(V-Z[R])/2);U.poffset=B}}else H!==void 0&&(U.barwidth=H,Y===void 0&&(U.poffset=z+(V-H)/2))}}function y(C,k){for(var E=k.traces,R=I(C),O=0;O<E.length;O++)for(var N=E[O],G=N[0].t,U=G.poffset,Y=Array.isArray(U),z=G.barwidth,B=Array.isArray(z),H=0;H<N.length;H++){var V=N[H],Z=V.w=B?z[H]:z;V[R]=V.p+(Y?U[H]:U)+Z/2}}function x(C,k,E){var R=k.traces,O=k.minDiff,N=O/2;t.minDtick(C,k.minDiff,k.distinctPositions[0],E);for(var G=0;G<R.length;G++){var U=R[G],Y=U[0],z=Y.trace,B=[],H,V,Z,q;for(q=0;q<U.length;q++)H=U[q],V=H.p-N,Z=H.p+N,B.push(V,Z);if(z.width||z.offset){var J=Y.t,ne=J.poffset,ve=J.barwidth,$=Array.isArray(ne),j=Array.isArray(ve);for(q=0;q<U.length;q++){H=U[q];var ae=$?ne[q]:ne,ie=j?ve[q]:ve;V=H.p+ae,Z=V+ie,B.push(V,Z)}}z._extremes[C._id]=t.findExtremes(C,B,{padded:!1})}}function w(C,k){for(var E=k.traces,R=I(C),O=0;O<E.length;O++){for(var N=E[O],G=N[0].trace,U=[],Y=!1,z=0;z<N.length;z++){var B=N[z],H=B.b,V=H+B.s;B[R]=V,U.push(V),B.hasB&&U.push(H),(!B.hasB||!B.b)&&(Y=!0)}G._extremes[C._id]=t.findExtremes(C,U,{tozero:Y,padded:!0})}}function g(C,k,E){var R=I(C),O=k.traces,N,G,U,Y,z,B;for(Y=0;Y<O.length;Y++)if(N=O[Y],G=N[0].trace,G.type==="funnel")for(z=0;z<N.length;z++)B=N[z],B.s!==u&&k.put(B.p,-.5*B.s);for(Y=0;Y<O.length;Y++){N=O[Y],G=N[0].trace,U=G.type==="funnel";var H=[];for(z=0;z<N.length;z++)if(B=N[z],B.s!==u){var V;U?V=B.s:V=B.s+B.b;var Z=k.put(B.p,V),q=Z+V;B.b=Z,B[R]=q,E.norm||(H.push(q),B.hasB&&H.push(Z))}E.norm||(G._extremes[C._id]=t.findExtremes(C,H,{tozero:!0,padded:!0}))}}function T(C){for(var k=C.traces,E=0;E<k.length;E++)for(var R=k[E],O=0;O<R.length;O++){var N=R[O];N.s!==u&&C.put(N.p,N.b+N.s)}}function M(C){for(var k=C.traces,E=0;E<k.length;E++){var R=k[E],O=R[0].trace;if(O.base===void 0)for(var N=new n([R],{sepNegVal:!0,overlapNoMerge:!0}),G=0;G<R.length;G++){var U=R[G];if(U.p!==u){var Y=N.put(U.p,U.b+U.s);Y&&(U.b=Y)}}}}function P(C,k,E){var R=k.traces,O=I(C),N=E.norm==="fraction"?1:100,G=N/1e9,U=C.l2c(C.c2l(0)),Y=E.mode==="stack"?N:U;function z(ie){return r(C.c2l(ie))&&(ie<U-G||ie>Y+G||!r(U))}for(var B=0;B<R.length;B++){for(var H=R[B],V=H[0].trace,Z=[],q=!1,J=!1,ne=0;ne<H.length;ne++){var ve=H[ne];if(ve.s!==u){var $=Math.abs(N/k.get(ve.p,ve.s));ve.b*=$,ve.s*=$;var j=ve.b,ae=j+ve.s;ve[O]=ae,Z.push(ae),J=J||z(ae),ve.hasB&&(Z.push(j),J=J||z(j)),(!ve.hasB||!ve.b)&&(q=!0)}}V._extremes[C._id]=t.findExtremes(C,Z,{tozero:q,padded:J})}}function L(C,k){var E=I(k),R={},O,N,G,U=1/0,Y=-1/0;for(O=0;O<C.length;O++)for(G=C[O],N=0;N<G.length;N++){var z=G[N].p;r(z)&&(U=Math.min(U,z),Y=Math.max(Y,z))}var B=1e4/(Y-U),H=R.round=function($){return String(Math.round(B*($-U)))};for(O=0;O<C.length;O++){G=C[O],G[0].t.extents=R;var V=G[0].t.poffset,Z=Array.isArray(V);for(N=0;N<G.length;N++){var q=G[N],J=q[E]-q.w/2;if(r(J)){var ne=q[E]+q.w/2,ve=H(q.p);R[ve]?R[ve]=[Math.min(J,R[ve][0]),Math.max(ne,R[ve][1])]:R[ve]=[J,ne]}q.p0=q.p+(Z?V[N]:V),q.p1=q.p0+q.w,q.s0=q.b,q.s1=q.s0+q.s}}}function I(C){return C._id.charAt(0)}d.exports={crossTraceCalc:o,setGroupPositions:l}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835,"../../registry":911,"./sieve.js":934,"fast-isnumeric":241}],925:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../registry"),c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./style_defaults"),n=e("../../plots/cartesian/constraints").getAxisGroup,o=e("./attributes"),l=r.coerceFont;function h(v,m,b,y){function x(P,L){return r.coerce(v,m,o,P,L)}var w=c(v,m,y,x);if(!w){m.visible=!1;return}t(v,m,y,x),x("orientation",m.x&&!m.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var g=x("textposition");p(v,m,y,x,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f(v,m,x,b,y);var T=(m.marker.line||{}).color,M=u.getComponentMethod("errorbars","supplyDefaults");M(v,m,T||a.defaultLine,{axis:"y"}),M(v,m,T||a.defaultLine,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(m,x)}function i(v,m,b,y){var x=m.orientation,w=m[{v:"x",h:"y"}[x]+"axis"],g=n(b,w)+x,T=b._alignmentOpts||{},M=y("alignmentgroup"),P=T[g];P||(P=T[g]={});var L=P[M];L?L.traces.push(m):L=P[M]={traces:[m],alignmentIndex:Object.keys(P).length,offsetGroups:{}};var I=y("offsetgroup"),C=L.offsetGroups,k=C[I];I&&(k||(k=C[I]={offsetIndex:Object.keys(C).length}),m._offsetIndex=k.offsetIndex)}function s(v,m){var b,y;function x(g){return r.coerce(y._input,y,o,g)}if(m.barmode==="group")for(var w=0;w<v.length;w++)y=v[w],y.type==="bar"&&(b=y._input,i(b,y,m,x))}function p(v,m,b,y,x,w){w=w||{};var g=w.moduleHasSelected!==!1,T=w.moduleHasUnselected!==!1,M=w.moduleHasConstrain!==!1,P=w.moduleHasCliponaxis!==!1,L=w.moduleHasTextangle!==!1,I=w.moduleHasInsideanchor!==!1,C=!!w.hasPathbar,k=Array.isArray(x)||x==="auto",E=k||x==="inside",R=k||x==="outside";if(E||R){var O=l(y,"textfont",b.font),N=r.extendFlat({},O),G=v.textfont&&v.textfont.color,U=!G;if(U&&delete N.color,l(y,"insidetextfont",N),C){var Y=r.extendFlat({},O);U&&delete Y.color,l(y,"pathbar.textfont",Y)}R&&l(y,"outsidetextfont",O),g&&y("selected.textfont.color"),T&&y("unselected.textfont.color"),M&&y("constraintext"),P&&y("cliponaxis"),L&&y("textangle"),y("texttemplate")}E&&I&&y("insidetextanchor")}d.exports={supplyDefaults:h,crossTraceDefaults:s,handleGroupingDefaults:i,handleText:p}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/constraints":835,"../../registry":911,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":921,"./style_defaults":936}],926:[function(e,d,S){d.exports=function(a,u,c){return a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),c.orientation==="h"?(a.label=a.y,a.value=a.x):(a.label=a.x,a.value=a.y),a}},{}],927:[function(e,d,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("../../lib").isArrayOrTypedArray;S.coerceString=function(c,t,f){if(typeof t=="string"){if(t||!c.noBlank)return t}else if((typeof t=="number"||t===!0)&&!c.strict)return String(t);return f!==void 0?f:c.dflt},S.coerceNumber=function(c,t,f){if(r(t)){t=+t;var n=c.min,o=c.max,l=n!==void 0&&t<n||o!==void 0&&t>o;if(!l)return t}return f!==void 0?f:c.dflt},S.coerceColor=function(c,t,f){return a(t).isValid()?t:f!==void 0?f:c.dflt},S.coerceEnumerated=function(c,t,f){return c.coerceNumber&&(t=+t),c.values.indexOf(t)!==-1?t:f!==void 0?f:c.dflt},S.getValue=function(c,t){var f;return Array.isArray(c)?t<c.length&&(f=c[t]):f=c,f},S.getLineWidth=function(c,t){var f=0<t.mlw?t.mlw:u(c.marker.line.width)?0:c.marker.line.width;return f}},{"../../lib":778,"fast-isnumeric":241,tinycolor2:576}],928:[function(e,d,S){var r=e("../../components/fx"),a=e("../../registry"),u=e("../../components/color"),c=e("../../lib").fillText,t=e("./helpers").getLineWidth,f=e("../../plots/cartesian/axes").hoverLabelText,n=e("../../constants/numerical").BADNUM;function o(i,s,p,v){var m=l(i,s,p,v);if(m){var b=m.cd,y=b[0].trace,x=b[m.index];return m.color=h(y,x),a.getComponentMethod("errorbars","hoverInfo")(x,y,m),[m]}}function l(i,s,p,v){var m=i.cd,b=m[0].trace,y=m[0].t,x=v==="closest",w=b.type==="waterfall",g=i.maxHoverDistance,T,M,P,L,I,C,k;function E(j){return j[P]-j.w/2}function R(j){return j[P]+j.w/2}var O=x?E:function(j){return Math.min(E(j),j.p-y.bardelta/2)},N=x?R:function(j){return Math.max(R(j),j.p+y.bardelta/2)};function G(j,ae){return r.inbox(j-T,ae-T,g+Math.min(1,Math.abs(ae-j)/k)-1)}function U(j){return G(O(j),N(j))}function Y(j){return G(E(j),R(j))}function z(j){var ae=M,ie=j.b,te=j[L];if(w){var re=Math.abs(j.rawS)||0;ae>0?te+=re:ae<0&&(te-=re)}return r.inbox(ie-ae,te-ae,g+(te-ae)/(te-ie)-1)}b.orientation==="h"?(T=p,M=s,P="y",L="x",I=z,C=U):(T=s,M=p,P="x",L="y",C=z,I=U);var B=i[P+"a"],H=i[L+"a"];k=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));function V(j){return(I(j)+C(j))/2}var Z=r.getDistanceFunction(v,I,C,V);if(r.getClosest(m,Z,i),i.index!==!1&&m[i.index].p!==n){x||(O=function(j){return Math.min(E(j),j.p-y.bargroupwidth/2)},N=function(j){return Math.max(R(j),j.p+y.bargroupwidth/2)});var q=i.index,J=m[q],ne=b.base?J.b+J.s:J.s;i[L+"0"]=i[L+"1"]=H.c2p(J[L],!0),i[L+"LabelVal"]=ne;var ve=y.extents[y.extents.round(J.p)];i[P+"0"]=B.c2p(x?O(J):ve[0],!0),i[P+"1"]=B.c2p(x?N(J):ve[1],!0);var $=J.orig_p!==void 0;return i[P+"LabelVal"]=$?J.orig_p:J.p,i.labelLabel=f(B,i[P+"LabelVal"]),i.valueLabel=f(H,i[L+"LabelVal"]),i.baseLabel=f(H,J.b),i.spikeDistance=(z(J)+Y(J))/2-g,i[P+"Spike"]=B.c2p(J.p,!0),c(J,b,i),i.hovertemplate=b.hovertemplate,i}}function h(i,s){var p=s.mcc||i.marker.color,v=s.mlcc||i.marker.line.color,m=t(i,s);if(u.opacity(p))return p;if(u.opacity(v)&&m)return v}d.exports={hoverPoints:o,hoverOnBars:l,getTraceColor:h}},{"../../components/color":643,"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./helpers":927}],929:[function(e,d,S){d.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"./arrays_to_calcdata":920,"./attributes":921,"./calc":922,"./cross_trace_calc":924,"./defaults":925,"./event_data":926,"./hover":928,"./layout_attributes":930,"./layout_defaults":931,"./plot":932,"./select":933,"./style":935}],930:[function(e,d,S){d.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],931:[function(e,d,S){var r=e("../../registry"),a=e("../../plots/cartesian/axes"),u=e("../../lib"),c=e("./layout_attributes");d.exports=function(t,f,n){function o(x,w){return u.coerce(t,f,c,x,w)}for(var l=!1,h=!1,i=!1,s={},p=o("barmode"),v=0;v<n.length;v++){var m=n[v];if(r.traceIs(m,"bar")&&m.visible)l=!0;else continue;if(p==="group"){var b=m.xaxis+m.yaxis;s[b]&&(i=!0),s[b]=!0}if(m.visible&&m.type==="histogram"){var y=a.getFromId({_fullLayout:f},m[m.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(h=!0)}}if(!l){delete f.barmode;return}p!=="overlay"&&o("barnorm"),o("bargap",h&&!i?0:.2),o("bargroupgap")}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./layout_attributes":930}],932:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../lib/svg_text_utils"),t=e("../../components/color"),f=e("../../components/drawing"),n=e("../../registry"),o=e("../../plots/cartesian/axes").tickText,l=e("./uniform_text"),h=l.recordMinTextSize,i=l.clearMinTextSize,s=e("./style"),p=e("./helpers"),v=e("./constants"),m=e("./attributes"),b=m.text,y=m.textposition,x=e("../../components/fx/helpers").appendArrayPointValue,w=v.TEXTPAD;function g(B){return B.id}function T(B){if(B.ids)return g}function M(B,H){return B<H?1:-1}function P(B,H,V,Z){var q=[],J=[],ne=Z?H:V,ve=Z?V:H;return q[0]=ne.c2p(B.s0,!0),J[0]=ve.c2p(B.p0,!0),q[1]=ne.c2p(B.s1,!0),J[1]=ve.c2p(B.p1,!0),Z?[q,J]:[J,q]}function L(B,H,V,Z){if(!H.uniformtext.mode&&I(V)){var q;return Z&&(q=Z()),B.transition().duration(V.duration).ease(V.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()})}else return B}function I(B){return B&&B.duration>0}function C(B,H,V,Z,q,J){var ne=H.xaxis,ve=H.yaxis,$=B._fullLayout;q||(q={mode:$.barmode,norm:$.barmode,gap:$.bargap,groupgap:$.bargroupgap},i("bar",$));var j=u.makeTraceGroups(Z,V,"trace bars").each(function(ae){var ie=r.select(this),te=ae[0].trace,re=te.type==="waterfall",ce=te.type==="funnel",pe=te.type==="bar",fe=pe||ce,se=0;re&&te.connector.visible&&te.connector.mode==="between"&&(se=te.connector.line.width/2);var de=te.orientation==="h",be=I(q),xe=u.ensureSingle(ie,"g","points"),ke=T(te),Re=xe.selectAll("g.point").data(u.identity,ke);Re.enter().append("g").classed("point",!0),Re.exit().remove(),Re.each(function(ze,Je){var qe=r.select(this),Ee=P(ze,ne,ve,de),Ae=Ee[0][0],Be=Ee[0][1],$e=Ee[1][0],xt=Ee[1][1],bt=(de?Be-Ae:xt-$e)===0;bt&&fe&&p.getLineWidth(te,ze)&&(bt=!1),bt||(bt=!a(Ae)||!a(Be)||!a($e)||!a(xt)),ze.isBlank=bt,bt&&(de?Be=Ae:xt=$e),se&&!bt&&(de?(Ae-=M(Ae,Be)*se,Be+=M(Ae,Be)*se):($e-=M($e,xt)*se,xt+=M($e,xt)*se));var Ne,st;if(te.type==="waterfall"){if(!bt){var _t=te[ze.dir].marker;Ne=_t.line.width,st=_t.color}}else Ne=p.getLineWidth(te,ze),st=ze.mc||te.marker.color;function Ot(At){var ft=r.round(Ne/2%1,2);return q.gap===0&&q.groupgap===0?r.round(Math.round(At)-ft,2):At}function Wt(At,ft,ot){return ot&&At===ft?At:Math.abs(At-ft)>=2?Ot(At):At>ft?Math.ceil(At):Math.floor(At)}if(!B._context.staticPlot){var Et=t.opacity(st),jt=Et<1||Ne>.01?Ot:Wt;Ae=jt(Ae,Be,de),Be=jt(Be,Ae,de),$e=jt($e,xt,!de),xt=jt(xt,$e,!de)}var Zt=L(u.ensureSingle(qe,"path"),$,q,J);if(Zt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Be-Ae)*(xt-$e))||bt&&B._context.staticPlot?"M0,0Z":"M"+Ae+","+$e+"V"+xt+"H"+Be+"V"+$e+"Z").call(f.setClipUrl,H.layerClipId,B),!$.uniformtext.mode&&be){var Mt=f.makePointStyleFns(te);f.singlePointStyle(ze,Zt,te,Mt,B)}k(B,H,qe,ae,Je,Ae,Be,$e,xt,q,J),H.layerClipId&&f.hideOutsideRangePoint(ze,qe.select("text"),ne,ve,te.xcalendar,te.ycalendar)});var Ke=te.cliponaxis===!1;f.setClipUrl(ie,Ke?null:H.layerClipId,B)});n.getComponentMethod("errorbars","plot")(B,j,H,q)}function k(B,H,V,Z,q,J,ne,ve,$,j,ae){var ie=H.xaxis,te=H.yaxis,re=B._fullLayout,ce;function pe(At,ft,ot){var Te=u.ensureSingle(At,"text").text(ft).attr({class:"bartext bartext-"+ce,"text-anchor":"middle","data-notex":1}).call(f.font,ot).call(c.convertToTspans,B);return Te}var fe=Z[0].trace,se=fe.orientation==="h",de=G(re,Z,q,ie,te);ce=U(fe,q);var be=j.mode==="stack"||j.mode==="relative",xe=Z[q],ke=!be||xe._outmost;if(!de||ce==="none"||(xe.isBlank||J===ne||ve===$)&&(ce==="auto"||ce==="inside")){V.select("text").remove();return}var Re=re.font,Ke=s.getBarColor(Z[q],fe),ze=s.getInsideTextFont(fe,q,Re,Ke),Je=s.getOutsideTextFont(fe,q,Re),qe=V.datum();se?ie.type==="log"&&qe.s0<=0&&(ie.range[0]<ie.range[1]?J=0:J=ie._length):te.type==="log"&&qe.s0<=0&&(te.range[0]<te.range[1]?ve=te._length:ve=0);var Ee=Math.abs(ne-J)-2*w,Ae=Math.abs($-ve)-2*w,Be,$e,xt,bt,Ne;if(ce==="outside"&&!ke&&!xe.hasB&&(ce="inside"),ce==="auto")if(ke){ce="inside",Ne=u.ensureUniformFontSize(B,ze),Be=pe(V,de,Ne),$e=f.bBox(Be.node()),xt=$e.width,bt=$e.height;var st=xt>0&&bt>0,_t=xt<=Ee&&bt<=Ae,Ot=xt<=Ae&&bt<=Ee,Wt=se?Ee>=xt*(Ae/bt):Ae>=bt*(Ee/xt);st&&(_t||Ot||Wt)?ce="inside":(ce="outside",Be.remove(),Be=null)}else ce="inside";if(!Be){Ne=u.ensureUniformFontSize(B,ce==="outside"?Je:ze),Be=pe(V,de,Ne);var Et=Be.attr("transform");if(Be.attr("transform",""),$e=f.bBox(Be.node()),xt=$e.width,bt=$e.height,Be.attr("transform",Et),xt<=0||bt<=0){Be.remove();return}}var jt=fe.textangle,Zt,Mt;ce==="outside"?(Mt=fe.constraintext==="both"||fe.constraintext==="outside",Zt=N(J,ne,ve,$,$e,{isHorizontal:se,constrained:Mt,angle:jt})):(Mt=fe.constraintext==="both"||fe.constraintext==="inside",Zt=O(J,ne,ve,$,$e,{isHorizontal:se,constrained:Mt,angle:jt,anchor:fe.insidetextanchor})),Zt.fontSize=Ne.size,h(fe.type,Zt,re),xe.transform=Zt,L(Be,re,j,ae).attr("transform",u.getTextTransform(Zt))}function E(B){return B==="auto"?0:B}function R(B,H){var V=Math.PI/180*H,Z=Math.abs(Math.sin(V)),q=Math.abs(Math.cos(V));return{x:B.width*q+B.height*Z,y:B.width*Z+B.height*q}}function O(B,H,V,Z,q,J){var ne=!!J.isHorizontal,ve=!!J.constrained,$=J.angle||0,j=J.anchor||"end",ae=j==="end",ie=j==="start",te=J.leftToRight||0,re=(te+1)/2,ce=1-re,pe=q.width,fe=q.height,se=Math.abs(H-B),de=Math.abs(Z-V),be=se>2*w&&de>2*w?w:0;se-=2*be,de-=2*be;var xe=E($);$==="auto"&&!(pe<=se&&fe<=de)&&(pe>se||fe>de)&&(!(pe>de||fe>se)||pe<fe!=se<de)&&(xe+=90);var ke=R(q,xe),Re=1;ve&&(Re=Math.min(1,se/ke.x,de/ke.y));var Ke=q.left*ce+q.right*re,ze=(q.top+q.bottom)/2,Je=(B+w)*ce+(H-w)*re,qe=(V+Z)/2,Ee=0,Ae=0;if(ie||ae){var Be=(ne?ke.x:ke.y)/2,$e=ne?M(B,H):M(V,Z);ne?ie?(Je=B+$e*be,Ee=-$e*Be):(Je=H-$e*be,Ee=$e*Be):ie?(qe=V+$e*be,Ae=-$e*Be):(qe=Z-$e*be,Ae=$e*Be)}return{textX:Ke,textY:ze,targetX:Je,targetY:qe,anchorX:Ee,anchorY:Ae,scale:Re,rotate:xe}}function N(B,H,V,Z,q,J){var ne=!!J.isHorizontal,ve=!!J.constrained,$=J.angle||0,j=q.width,ae=q.height,ie=Math.abs(H-B),te=Math.abs(Z-V),re;ne?re=te>2*w?w:0:re=ie>2*w?w:0;var ce=1;ve&&(ce=ne?Math.min(1,te/ae):Math.min(1,ie/j));var pe=E($),fe=R(q,pe),se=(ne?fe.x:fe.y)/2,de=(q.left+q.right)/2,be=(q.top+q.bottom)/2,xe=(B+H)/2,ke=(V+Z)/2,Re=0,Ke=0,ze=ne?M(H,B):M(V,Z);return ne?(xe=H-ze*re,Re=ze*se):(ke=Z+ze*re,Ke=-ze*se),{textX:de,textY:be,targetX:xe,targetY:ke,anchorX:Re,anchorY:Ke,scale:ce,rotate:pe}}function G(B,H,V,Z,q){var J=H[0].trace,ne=J.texttemplate,ve;return ne?ve=Y(B,H,V,Z,q):J.textinfo?ve=z(H,V,Z,q):ve=p.getValue(J.text,V),p.coerceString(b,ve)}function U(B,H){var V=p.getValue(B.textposition,H);return p.coerceEnumerated(y,V)}function Y(B,H,V,Z,q){var J=H[0].trace,ne=u.castOption(J,V,"texttemplate");if(!ne)return"";var ve=J.type==="waterfall",$=J.type==="funnel",j,ae,ie,te;J.orientation==="h"?(j="y",ae=q,ie="x",te=Z):(j="x",ae=Z,ie="y",te=q);function re(xe){return o(ae,xe,!0).text}function ce(xe){return o(te,+xe,!0).text}var pe=H[V],fe={};fe.label=pe.p,fe.labelLabel=fe[j+"Label"]=re(pe.p);var se=u.castOption(J,pe.i,"text");(se===0||se)&&(fe.text=se),fe.value=pe.s,fe.valueLabel=fe[ie+"Label"]=ce(pe.s);var de={};x(de,J,pe.i),ve&&(fe.delta=+pe.rawS||pe.s,fe.deltaLabel=ce(fe.delta),fe.final=pe.v,fe.finalLabel=ce(fe.final),fe.initial=fe.final-fe.delta,fe.initialLabel=ce(fe.initial)),$&&(fe.value=pe.s,fe.valueLabel=ce(fe.value),fe.percentInitial=pe.begR,fe.percentInitialLabel=u.formatPercent(pe.begR),fe.percentPrevious=pe.difR,fe.percentPreviousLabel=u.formatPercent(pe.difR),fe.percentTotal=pe.sumR,fe.percenTotalLabel=u.formatPercent(pe.sumR));var be=u.castOption(J,pe.i,"customdata");return be&&(fe.customdata=be),u.texttemplateString(ne,fe,B._d3locale,de,fe,J._meta||{})}function z(B,H,V,Z){var q=B[0].trace,J=q.orientation==="h",ne=q.type==="waterfall",ve=q.type==="funnel";function $(ke){var Re=J?Z:V;return o(Re,ke,!0).text}function j(ke){var Re=J?V:Z;return o(Re,+ke,!0).text}var ae=q.textinfo,ie=B[H],te=ae.split("+"),re=[],ce,pe=function(ke){return te.indexOf(ke)!==-1};if(pe("label")&&re.push($(B[H].p)),pe("text")&&(ce=u.castOption(q,ie.i,"text"),(ce===0||ce)&&re.push(ce)),ne){var fe=+ie.rawS||ie.s,se=ie.v,de=se-fe;pe("initial")&&re.push(j(de)),pe("delta")&&re.push(j(fe)),pe("final")&&re.push(j(se))}if(ve){pe("value")&&re.push(j(ie.s));var be=0;pe("percent initial")&&be++,pe("percent previous")&&be++,pe("percent total")&&be++;var xe=be>1;pe("percent initial")&&(ce=u.formatPercent(ie.begR),xe&&(ce+=" of initial"),re.push(ce)),pe("percent previous")&&(ce=u.formatPercent(ie.difR),xe&&(ce+=" of previous"),re.push(ce)),pe("percent total")&&(ce=u.formatPercent(ie.sumR),xe&&(ce+=" of total"),re.push(ce))}return re.join("<br>")}d.exports={plot:C,toMoveInsideBar:O}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx/helpers":679,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"./attributes":921,"./constants":923,"./helpers":927,"./style":935,"./uniform_text":937,d3:169,"fast-isnumeric":241}],933:[function(e,d,S){d.exports=function(u,c){var t=u.cd,f=u.xaxis,n=u.yaxis,o=t[0].trace,l=o.type==="funnel",h=o.orientation==="h",i=[],s;if(c===!1)for(s=0;s<t.length;s++)t[s].selected=0;else for(s=0;s<t.length;s++){var p=t[s],v="ct"in p?p.ct:r(p,f,n,h,l);c.contains(v,!1,s,u)?(i.push({pointNumber:s,x:f.c2d(p.x),y:n.c2d(p.y)}),p.selected=1):p.selected=0}return i};function r(a,u,c,t,f){var n=u.c2p(t?a.s0:a.p0,!0),o=u.c2p(t?a.s1:a.p1,!0),l=c.c2p(t?a.p0:a.s0,!0),h=c.c2p(t?a.p1:a.s1,!0);return f?[(n+o)/2,(l+h)/2]:t?[o,(l+h)/2]:[(n+o)/2,h]}},{}],934:[function(e,d,S){d.exports=u;var r=e("../../lib").distinctVals,a=e("../../constants/numerical").BADNUM;function u(c,t){this.traces=c,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var f=1/0,n=[],o=0;o<c.length;o++){for(var l=c[o],h=0;h<l.length;h++){var i=l[h];i.p!==a&&n.push(i.p)}l[0]&&l[0].width1&&(f=Math.min(l[0].width1,f))}this.positions=n;var s=r(n,{unitMinDiff:t.unitMinDiff});this.distinctPositions=s.vals,s.vals.length===1&&f!==1/0?this.minDiff=f:this.minDiff=Math.min(s.minDiff,f),this.binWidth=this.minDiff,this.bins={}}u.prototype.put=function(t,f){var n=this.getLabel(t,f),o=this.bins[n]||0;return this.bins[n]=o+f,o},u.prototype.get=function(t,f){var n=this.getLabel(t,f);return this.bins[n]||0},u.prototype.getLabel=function(t,f){var n=f<0&&this.sepNegVal?"v":"^",o=this.overlapNoMerge?t:Math.round(t/this.binWidth);return n+o}},{"../../constants/numerical":753,"../../lib":778}],935:[function(e,d,S){var r=e("d3"),a=e("../../components/color"),u=e("../../components/drawing"),c=e("../../lib"),t=e("../../registry"),f=e("./uniform_text").resizeText,n=e("./attributes"),o=n.textfont,l=n.insidetextfont,h=n.outsidetextfont,i=e("./helpers");function s(L){var I=r.select(L).selectAll("g.barlayer").selectAll("g.trace");f(L,I,"bar");var C=I.size(),k=L._fullLayout;I.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){(k.barmode==="stack"&&C>1||k.bargap===0&&k.bargroupgap===0&&!E[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")}),I.selectAll("g.points").each(function(E){var R=r.select(this),O=E[0].trace;p(R,O,L)}),t.getComponentMethod("errorbars","style")(I)}function p(L,I,C){u.pointStyle(L.selectAll("path"),I,C),v(L,I,C)}function v(L,I,C){L.selectAll("text").each(function(k){var E=r.select(this),R=c.ensureUniformFontSize(C,x(E,k,I,C));u.font(E,R)})}function m(L,I,C){var k=I[0].trace;k.selectedpoints?b(C,k,L):(p(C,k,L),t.getComponentMethod("errorbars","style")(C))}function b(L,I,C){u.selectedPointStyle(L.selectAll("path"),I),y(L.selectAll("text"),I,C)}function y(L,I,C){L.each(function(k){var E=r.select(this),R;if(k.selected){R=c.ensureUniformFontSize(C,x(E,k,I,C));var O=I.selected.textfont&&I.selected.textfont.color;O&&(R.color=O),u.font(E,R)}else u.selectedTextStyle(E,I)})}function x(L,I,C,k){var E=k._fullLayout.font,R=C.textfont;if(L.classed("bartext-inside")){var O=P(I,C);R=g(C,I.i,E,O)}else L.classed("bartext-outside")&&(R=T(C,I.i,E));return R}function w(L,I,C){return M(o,L.textfont,I,C)}function g(L,I,C,k){var E=w(L,I,C),R=L._input.textfont===void 0||L._input.textfont.color===void 0||Array.isArray(L.textfont.color)&&L.textfont.color[I]===void 0;return R&&(E={color:a.contrast(k),family:E.family,size:E.size}),M(l,L.insidetextfont,I,E)}function T(L,I,C){var k=w(L,I,C);return M(h,L.outsidetextfont,I,k)}function M(L,I,C,k){I=I||{};var E=i.getValue(I.family,C),R=i.getValue(I.size,C),O=i.getValue(I.color,C);return{family:i.coerceString(L.family,E,k.family),size:i.coerceNumber(L.size,R,k.size),color:i.coerceColor(L.color,O,k.color)}}function P(L,I){return I.type==="waterfall"?I[L.dir].marker.color:L.mc||I.marker.color}d.exports={style:s,styleTextPoints:v,styleOnSelect:m,getInsideTextFont:g,getOutsideTextFont:T,getBarColor:P,resizeText:f}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../registry":911,"./attributes":921,"./helpers":927,"./uniform_text":937,d3:169}],936:[function(e,d,S){var r=e("../../components/color"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults");d.exports=function(t,f,n,o,l){n("marker.color",o),a(t,"marker")&&u(t,f,l,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",r.defaultLine),a(t,"marker.line")&&u(t,f,l,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654}],937:[function(e,d,S){var r=e("d3"),a=e("../../lib");function u(n,o,l){var h=n._fullLayout,i=h["_"+l+"Text_minsize"];if(i){var s=h.uniformtext.mode==="hide",p;switch(l){case"funnelarea":case"pie":case"sunburst":p="g.slice";break;case"treemap":p="g.slice, g.pathbar";break;default:p="g.points > g.point"}o.selectAll(p).each(function(v){var m=v.transform;if(m){m.scale=s&&m.hide?0:i/m.fontSize;var b=r.select(this).select("text");b.attr("transform",a.getTextTransform(m))}})}}function c(n,o,l){if(l.uniformtext.mode){var h=f(n),i=l.uniformtext.minsize,s=o.scale*o.fontSize;o.hide=s<i,l[h]=l[h]||1/0,o.hide||(l[h]=Math.min(l[h],Math.max(s,i)))}}function t(n,o){var l=f(n);o[l]=void 0}function f(n){return"_"+n+"Text_minsize"}d.exports={recordMinTextSize:c,clearMinTextSize:t,resizeText:u}},{"../../lib":778,d3:169}],938:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../lib/extend").extendFlat,u=e("../scatterpolar/attributes"),c=e("../bar/attributes");d.exports={r:u.r,theta:u.theta,r0:u.r0,dr:u.dr,theta0:u.theta0,dtheta:u.dtheta,thetaunit:u.thetaunit,base:a({},c.base,{}),offset:a({},c.offset,{}),width:a({},c.width,{}),text:a({},c.text,{}),hovertext:a({},c.hovertext,{}),marker:c.marker,hoverinfo:u.hoverinfo,hovertemplate:r(),selected:c.selected,unselected:c.unselected}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatterpolar/attributes":1261}],939:[function(e,d,S){var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),u=e("../bar/arrays_to_calcdata"),c=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),f=e("../../registry").traceIs,n=e("../../lib").extendFlat;function o(h,i){for(var s=h._fullLayout,p=i.subplot,v=s[p].radialaxis,m=s[p].angularaxis,b=v.makeCalcdata(i,"r"),y=m.makeCalcdata(i,"theta"),x=i._length,w=new Array(x),g=b,T=y,M=0;M<x;M++)w[M]={p:T[M],s:g[M]};function P(L){var I=i[L];I!==void 0&&(i["_"+L]=Array.isArray(I)?m.makeCalcdata(i,L):m.d2c(I,i.thetaunit))}return m.type==="linear"&&(P("width"),P("offset")),r(i,"marker")&&a(h,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),r(i,"marker.line")&&a(h,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),u(w,i),t(w,i),w}function l(h,i,s){for(var p=h.calcdata,v=[],m=0;m<p.length;m++){var b=p[m],y=b[0].trace;y.visible===!0&&f(y,"bar")&&y.subplot===s&&v.push(b)}var x=n({},i.radialaxis,{_id:"x"}),w=i.angularaxis;c(h,w,x,v,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}d.exports={calc:o,crossTraceCalc:l}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../lib":778,"../../registry":911,"../bar/arrays_to_calcdata":920,"../bar/cross_trace_calc":924,"../scatter/calc_selection":1189}],940:[function(e,d,S){var r=e("../../lib"),a=e("../scatterpolar/defaults").handleRThetaDefaults,u=e("../bar/style_defaults"),c=e("./attributes");d.exports=function(f,n,o,l){function h(s,p){return r.coerce(f,n,c,s,p)}var i=a(f,n,l,h);if(!i){n.visible=!1;return}h("thetaunit"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate"),u(f,n,h,o,l),r.coerceSelectionMarkerOpacity(n,h)}},{"../../lib":778,"../bar/style_defaults":936,"../scatterpolar/defaults":1263,"./attributes":938}],941:[function(e,d,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("../bar/hover").getTraceColor,c=a.fillText,t=e("../scatterpolar/hover").makeHoverPointText,f=e("../../plots/polar/helpers").isPtInsidePolygon;d.exports=function(o,l,h){var i=o.cd,s=i[0].trace,p=o.subplot,v=p.radialAxis,m=p.angularAxis,b=p.vangles,y=b?f:a.isPtInsideSector,x=o.maxHoverDistance,w=m._period||2*Math.PI,g=Math.abs(v.g2p(Math.sqrt(l*l+h*h))),T=Math.atan2(h,l);v.range[0]>v.range[1]&&(T+=Math.PI);var M=function(C){return y(g,T,[C.rp0,C.rp1],[C.thetag0,C.thetag1],b)?x+Math.min(1,Math.abs(C.thetag1-C.thetag0)/w)-1+(C.rp1-g)/(C.rp1-C.rp0)-1:1/0};if(r.getClosest(i,M,o),o.index!==!1){var P=o.index,L=i[P];o.x0=o.x1=L.ct[0],o.y0=o.y1=L.ct[1];var I=a.extendFlat({},L,{r:L.s,theta:L.p});return c(L,s,o),t(I,s,p,o),o.hovertemplate=s.hovertemplate,o.color=u(s,L),o.xLabelVal=o.yLabelVal=void 0,L.s<0&&(o.idealAlign="left"),[o]}}},{"../../components/fx":683,"../../lib":778,"../../plots/polar/helpers":893,"../bar/hover":928,"../scatterpolar/hover":1265}],942:[function(e,d,S){d.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":894,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"../scatterpolar/format_labels":1264,"./attributes":938,"./calc":939,"./defaults":940,"./hover":941,"./layout_attributes":943,"./layout_defaults":944,"./plot":945}],943:[function(e,d,S){d.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],944:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(u,c,t){var f={},n;function o(i,s){return r.coerce(u[n]||{},c[n],a,i,s)}for(var l=0;l<t.length;l++){var h=t[l];h.type==="barpolar"&&h.visible===!0&&(n=h.subplot,f[n]||(o("barmode"),o("bargap"),f[n]=1))}}},{"../../lib":778,"./layout_attributes":943}],945:[function(e,d,S){var r=e("d3"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../components/drawing"),t=e("../../plots/polar/helpers");d.exports=function(o,l,h){var i=l.xaxis,s=l.yaxis,p=l.radialAxis,v=l.angularAxis,m=f(l),b=l.layers.frontplot.select("g.barlayer");u.makeTraceGroups(b,h,"trace bars").each(function(){var y=r.select(this),x=u.ensureSingle(y,"g","points"),w=x.selectAll("g.point").data(u.identity);w.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),w.exit().remove(),w.each(function(g){var T=r.select(this),M=g.rp0=p.c2p(g.s0),P=g.rp1=p.c2p(g.s1),L=g.thetag0=v.c2g(g.p0),I=g.thetag1=v.c2g(g.p1),C;if(!a(M)||!a(P)||!a(L)||!a(I)||M===P||L===I)C="M0,0Z";else{var k=p.c2g(g.s1),E=(L+I)/2;g.ct=[i.c2p(k*Math.cos(E)),s.c2p(k*Math.sin(E))],C=m(M,P,L,I)}u.ensureSingle(T,"path").attr("d",C)}),c.setClipUrl(y,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,o)})};function f(n){var o=n.cxx,l=n.cyy;return n.vangles?function(h,i,s,p){var v,m;u.angleDelta(s,p)>0?(v=s,m=p):(v=p,m=s);var b=t.findEnclosingVertexAngles(v,n.vangles)[0],y=t.findEnclosingVertexAngles(m,n.vangles)[1],x=[b,(v+m)/2,y];return t.pathPolygonAnnulus(h,i,v,m,x,o,l)}:function(h,i,s,p){return u.pathAnnulus(h,i,s,p,o,l)}}},{"../../components/drawing":665,"../../lib":778,"../../plots/polar/helpers":893,d3:169,"fast-isnumeric":241}],946:[function(e,d,S){var r=e("../scatter/attributes"),a=e("../bar/attributes"),u=e("../../components/color/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../lib/extend").extendFlat,f=r.marker,n=f.line;d.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:t({},f.symbol,{arrayOk:!1,editType:"plot"}),opacity:t({},f.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:t({},f.size,{arrayOk:!1,editType:"calc"}),color:t({},f.color,{arrayOk:!1,editType:"style"}),line:{color:t({},n.color,{arrayOk:!1,dflt:u.defaultLine,editType:"style"}),width:t({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),hovertemplate:c({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187}],947:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../plots/cartesian/axes"),u=e("../../plots/cartesian/align_period"),c=e("../../lib"),t=e("../../constants/numerical").BADNUM,f=c._;d.exports=function(T,M){var P=T._fullLayout,L=a.getFromId(T,M.xaxis||"x"),I=a.getFromId(T,M.yaxis||"y"),C=[],k=M.type==="violin"?"_numViolins":"_numBoxes",E,R,O,N,G,U,Y;M.orientation==="h"?(O=L,N="x",G=I,U="y",Y=!!M.yperiodalignment):(O=I,N="y",G=L,U="x",Y=!!M.xperiodalignment);var z=n(M,U,G,P[k]),B=z[0],H=z[1],V=c.distinctVals(B),Z=V.vals,q=V.minDiff/2,J,ne,ve,$,j,ae,ie=(M.boxpoints||M.points)==="all"?c.identity:function(Et){return Et.v<J.lf||Et.v>J.uf};if(M._hasPreCompStats){var te=M[N],re=function(Et){return O.d2c((M[Et]||[])[E])},ce=1/0,pe=-1/0;for(E=0;E<M._length;E++){var fe=B[E];if(!!r(fe)){if(J={},J.pos=J[U]=fe,Y&&H&&(J.orig_p=H[E]),J.q1=re("q1"),J.med=re("median"),J.q3=re("q3"),ne=[],te&&c.isArrayOrTypedArray(te[E]))for(R=0;R<te[E].length;R++)ae=O.d2c(te[E][R]),ae!==t&&(j={v:ae,i:[E,R]},i(j,M,[E,R]),ne.push(j));if(J.pts=ne.sort(p),ve=J[N]=ne.map(v),$=ve.length,J.med!==t&&J.q1!==t&&J.q3!==t&&J.med>=J.q1&&J.q3>=J.med){var se=re("lowerfence");J.lf=se!==t&&se<=J.q1?se:m(J,ve,$);var de=re("upperfence");J.uf=de!==t&&de>=J.q3?de:b(J,ve,$);var be=re("mean");J.mean=be!==t?be:$?c.mean(ve,$):(J.q1+J.q3)/2;var xe=re("sd");J.sd=be!==t&&xe>=0?xe:$?c.stdev(ve,$,J.mean):J.q3-J.q1,J.lo=y(J),J.uo=x(J);var ke=re("notchspan");ke=ke!==t&&ke>0?ke:w(J,$),J.ln=J.med-ke,J.un=J.med+ke;var Re=J.lf,Ke=J.uf;M.boxpoints&&ve.length&&(Re=Math.min(Re,ve[0]),Ke=Math.max(Ke,ve[$-1])),M.notched&&(Re=Math.min(Re,J.ln),Ke=Math.max(Ke,J.un)),J.min=Re,J.max=Ke}else{c.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var ze;J.med!==t?ze=J.med:J.q1!==t?J.q3!==t?ze=(J.q1+J.q3)/2:ze=J.q1:J.q3!==t?ze=J.q3:ze=0,J.med=ze,J.q1=J.q3=ze,J.lf=J.uf=ze,J.mean=J.sd=ze,J.ln=J.un=ze,J.min=J.max=ze}ce=Math.min(ce,J.min),pe=Math.max(pe,J.max),J.pts2=ne.filter(ie),C.push(J)}}M._extremes[O._id]=a.findExtremes(O,[ce,pe],{padded:!0})}else{var Je=O.makeCalcdata(M,N),qe=o(Z,q),Ee=Z.length,Ae=l(Ee);for(E=0;E<M._length;E++)if(ae=Je[E],!!r(ae)){var Be=c.findBin(B[E],qe);Be>=0&&Be<Ee&&(j={v:ae,i:E},i(j,M,E),Ae[Be].push(j))}var $e=1/0,xt=-1/0,bt=M.quartilemethod,Ne=bt==="exclusive",st=bt==="inclusive";for(E=0;E<Ee;E++)if(Ae[E].length>0){if(J={},J.pos=J[U]=Z[E],ne=J.pts=Ae[E].sort(p),ve=J[N]=ne.map(v),$=ve.length,J.min=ve[0],J.max=ve[$-1],J.mean=c.mean(ve,$),J.sd=c.stdev(ve,$,J.mean),J.med=c.interp(ve,.5),$%2&&(Ne||st)){var _t,Ot;Ne?(_t=ve.slice(0,$/2),Ot=ve.slice($/2+1)):st&&(_t=ve.slice(0,$/2+1),Ot=ve.slice($/2)),J.q1=c.interp(_t,.5),J.q3=c.interp(Ot,.5)}else J.q1=c.interp(ve,.25),J.q3=c.interp(ve,.75);J.lf=m(J,ve,$),J.uf=b(J,ve,$),J.lo=y(J),J.uo=x(J);var Wt=w(J,$);J.ln=J.med-Wt,J.un=J.med+Wt,$e=Math.min($e,J.ln),xt=Math.max(xt,J.un),J.pts2=ne.filter(ie),C.push(J)}M._extremes[O._id]=a.findExtremes(O,M.notched?Je.concat([$e,xt]):Je,{padded:!0})}return s(C,M),C.length>0?(C[0].t={num:P[k],dPos:q,posLetter:U,valLetter:N,labels:{med:f(T,"median:"),min:f(T,"min:"),q1:f(T,"q1:"),q3:f(T,"q3:"),max:f(T,"max:"),mean:M.boxmean==="sd"?f(T,"mean \xB1 \u03C3:"):f(T,"mean:"),lf:f(T,"lower fence:"),uf:f(T,"upper fence:")}},P[k]++,C):[{t:{empty:!0}}]};function n(g,T,M,P){var L=T in g,I=T+"0"in g,C="d"+T in g;if(L||I&&C){var k=M.makeCalcdata(g,T),E=u(g,M,T,k);return[E,k]}var R;I?R=g[T+"0"]:"name"in g&&(M.type==="category"||r(g.name)&&["linear","log"].indexOf(M.type)!==-1||c.isDateTime(g.name)&&M.type==="date")?R=g.name:R=P;for(var O=M.type==="multicategory"?M.r2c_just_indices(R):M.d2c(R,0,g[T+"calendar"]),N=g._length,G=new Array(N),U=0;U<N;U++)G[U]=O;return[G]}function o(g,T){for(var M=g.length,P=new Array(M+1),L=0;L<M;L++)P[L]=g[L]-T;return P[M]=g[M-1]+T,P}function l(g){for(var T=new Array(g),M=0;M<g;M++)T[M]=[];return T}var h={text:"tx",hovertext:"htx"};function i(g,T,M){for(var P in h)c.isArrayOrTypedArray(T[P])&&(Array.isArray(M)?c.isArrayOrTypedArray(T[P][M[0]])&&(g[h[P]]=T[P][M[0]][M[1]]):g[h[P]]=T[P][M])}function s(g,T){if(c.isArrayOrTypedArray(T.selectedpoints))for(var M=0;M<g.length;M++){for(var P=g[M].pts||[],L={},I=0;I<P.length;I++)L[P[I].i]=I;c.tagSelected(P,T,L)}}function p(g,T){return g.v-T.v}function v(g){return g.v}function m(g,T,M){return M===0?g.q1:Math.min(g.q1,T[Math.min(c.findBin(2.5*g.q1-1.5*g.q3,T,!0)+1,M-1)])}function b(g,T,M){return M===0?g.q3:Math.max(g.q3,T[Math.max(c.findBin(2.5*g.q3-1.5*g.q1,T),0)])}function y(g){return 4*g.q1-3*g.q3}function x(g){return 4*g.q3-3*g.q1}function w(g,T){return T===0?0:1.57*(g.q3-g.q1)/Math.sqrt(T)}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"fast-isnumeric":241}],948:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib"),u=e("../../plots/cartesian/constraints").getAxisGroup,c=["v","h"];function t(n,o){for(var l=n.calcdata,h=o.xaxis,i=o.yaxis,s=0;s<c.length;s++){for(var p=c[s],v=p==="h"?i:h,m=[],b=0;b<l.length;b++){var y=l[b],x=y[0].t,w=y[0].trace;w.visible===!0&&(w.type==="box"||w.type==="candlestick")&&!x.empty&&(w.orientation||"v")===p&&w.xaxis===h._id&&w.yaxis===i._id&&m.push(b)}f("box",n,m,v)}}function f(n,o,l,h){var i=o.calcdata,s=o._fullLayout,p=h._id,v=p.charAt(0),m,b,y,x=[],w=0;for(m=0;m<l.length;m++)for(y=i[l[m]],b=0;b<y.length;b++)x.push(h.c2l(y[b].pos,!0)),w+=(y[b].pts2||[]).length;if(!!x.length){var g=a.distinctVals(x,{unitMinDiff:h.type==="category"||h.type==="multicategory"}),T=g.minDiff/2;r.minDtick(h,g.minDiff,g.vals[0],!0);var M=n==="violin"?"_numViolins":"_numBoxes",P=s[M],L=s[n+"mode"]==="group"&&P>1,I=1-s[n+"gap"],C=1-s[n+"groupgap"];for(m=0;m<l.length;m++){y=i[l[m]];var k=y[0].trace,E=y[0].t,R=k.width,O=k.side,N,G,U,Y;if(R)N=G=Y=R/2,U=0;else if(N=T,L){var z=u(s,h._id)+k.orientation,B=s._alignmentOpts[z]||{},H=B[k.alignmentgroup]||{},V=Object.keys(H.offsetGroups||{}).length,Z=V||P,q=V?k._offsetIndex:E.num;G=N*I*C/Z,U=2*N*(-.5+(q+.5)/Z)*I,Y=N*I/Z}else G=N*I*C,U=0,Y=N;E.dPos=N,E.bPos=U,E.bdPos=G,E.wHover=Y;var J,ne,ve=U+G,$,j,ae,ie,te,re,ce=Boolean(R),pe=(k.boxpoints||k.points)&&w>0;if(O==="positive"?(J=N*(R?1:.5),$=ve,ne=$=U):O==="negative"?(J=$=U,ne=N*(R?1:.5),j=ve):(J=ne=N,$=j=ve),pe){var fe=k.pointpos,se=k.jitter,de=k.marker.size/2,be=0;fe+se>=0&&(be=ve*(fe+se),be>J?(ce=!0,te=de,ae=be):be>$&&(te=de,ae=J)),be<=J&&(ae=J);var xe=0;fe-se<=0&&(xe=-ve*(fe-se),xe>ne?(ce=!0,re=de,ie=xe):xe>j&&(re=de,ie=ne)),xe<=ne&&(ie=ne)}else ae=J,ie=ne;var ke=new Array(y.length);for(b=0;b<y.length;b++)ke[b]=y[b].pos;k._extremes[p]=r.findExtremes(h,ke,{padded:ce,vpadminus:ie,vpadplus:ae,vpadLinearized:!0,ppadminus:{x:re,y:te}[v],ppadplus:{x:te,y:re}[v]})}}}d.exports={crossTraceCalc:t,setPositionOffset:f}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835}],949:[function(e,d,S){var r=e("../../lib"),a=e("../../registry"),u=e("../../components/color"),c=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,f=e("../../plots/cartesian/axis_autotype"),n=e("./attributes");function o(s,p,v,m){function b(L,I){return r.coerce(s,p,n,L,I)}if(l(s,p,b,m),p.visible!==!1){c(s,p,m,b);var y=p._hasPreCompStats;y&&(b("lowerfence"),b("upperfence")),b("line.color",(s.marker||{}).color||v),b("line.width"),b("fillcolor",u.addOpacity(p.line.color,.5));var x=!1;if(y){var w=b("mean"),g=b("sd");w&&w.length&&(x=!0,g&&g.length&&(x="sd"))}b("boxmean",x),b("whiskerwidth"),b("width"),b("quartilemethod");var T=!1;if(y){var M=b("notchspan");M&&M.length&&(T=!0)}else r.validate(s.notchwidth,n.notchwidth)&&(T=!0);var P=b("notched",T);P&&b("notchwidth"),h(s,p,b,{prefix:"box"})}}function l(s,p,v,m){function b(V){var Z=0;return V&&V.length&&(Z+=1,r.isArrayOrTypedArray(V[0])&&V[0].length&&(Z+=1)),Z}function y(V){return r.validate(s[V],n[V])}var x=v("y"),w=v("x"),g;if(p.type==="box"){var T=v("q1"),M=v("median"),P=v("q3");p._hasPreCompStats=T&&T.length&&M&&M.length&&P&&P.length,g=Math.min(r.minRowLength(T),r.minRowLength(M),r.minRowLength(P))}var L=b(x),I=b(w),C=L&&r.minRowLength(x),k=I&&r.minRowLength(w),E=m.calendar,R={autotypenumbers:m.autotypenumbers},O,N;if(p._hasPreCompStats)switch(String(I)+String(L)){case"00":var G=y("x0")||y("dx"),U=y("y0")||y("dy");U&&!G?O="h":O="v",N=g;break;case"10":O="v",N=Math.min(g,k);break;case"20":O="h",N=Math.min(g,w.length);break;case"01":O="h",N=Math.min(g,C);break;case"02":O="v",N=Math.min(g,x.length);break;case"12":O="v",N=Math.min(g,k,x.length);break;case"21":O="h",N=Math.min(g,w.length,C);break;case"11":N=0;break;case"22":var Y=!1,z;for(z=0;z<w.length;z++)if(f(w[z],E,R)==="category"){Y=!0;break}if(Y)O="v",N=Math.min(g,k,x.length);else{for(z=0;z<x.length;z++)if(f(x[z],E,R)==="category"){Y=!0;break}Y?(O="h",N=Math.min(g,w.length,C)):(O="v",N=Math.min(g,k,x.length))}break}else L>0?(O="v",I>0?N=Math.min(k,C):N=Math.min(C)):I>0?(O="h",N=Math.min(k)):N=0;if(!N){p.visible=!1;return}p._length=N;var B=v("orientation",O);p._hasPreCompStats?B==="v"&&I===0?(v("x0",0),v("dx",1)):B==="h"&&L===0&&(v("y0",0),v("dy",1)):B==="v"&&I===0?v("x0"):B==="h"&&L===0&&v("y0");var H=a.getComponentMethod("calendars","handleTraceDefaults");H(s,p,["x","y"],m)}function h(s,p,v,m){var b=m.prefix,y=r.coerce2(s,p,n,"marker.outliercolor"),x=v("marker.line.outliercolor"),w="outliers";p._hasPreCompStats?w="all":(y||x)&&(w="suspectedoutliers");var g=v(b+"points",w);g?(v("jitter",g==="all"?.3:0),v("pointpos",g==="all"?-1.5:0),v("marker.symbol"),v("marker.opacity"),v("marker.size"),v("marker.color",p.line.color),v("marker.line.color"),v("marker.line.width"),g==="suspectedoutliers"&&(v("marker.line.outliercolor",p.marker.color),v("marker.line.outlierwidth")),v("selected.marker.color"),v("unselected.marker.color"),v("selected.marker.size"),v("unselected.marker.size"),v("text"),v("hovertext")):delete p.marker;var T=v("hoveron");(T==="all"||T.indexOf("points")!==-1)&&v("hovertemplate"),r.coerceSelectionMarkerOpacity(p,v)}function i(s,p){var v,m;function b(w){return r.coerce(m._input,m,n,w)}for(var y=0;y<s.length;y++){m=s[y];var x=m.type;(x==="box"||x==="violin")&&(v=m._input,p[x+"mode"]==="group"&&t(v,m,p,b))}}d.exports={supplyDefaults:o,crossTraceDefaults:i,handleSampleDefaults:l,handlePointsDefaults:h}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../registry":911,"../bar/defaults":925,"../scatter/period_defaults":1207,"./attributes":946}],950:[function(e,d,S){d.exports=function(a,u){return u.hoverOnBox&&(a.hoverOnBox=u.hoverOnBox),"xVal"in u&&(a.x=u.xVal),"yVal"in u&&(a.y=u.yVal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a}},{}],951:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib"),u=e("../../components/fx"),c=e("../../components/color"),t=a.fillText;function f(l,h,i,s){var p=l.cd,v=p[0].trace,m=v.hoveron,b=[],y;return m.indexOf("boxes")!==-1&&(b=b.concat(n(l,h,i,s))),m.indexOf("points")!==-1&&(y=o(l,h,i)),s==="closest"?y?[y]:b:(y&&b.push(y),b)}function n(l,h,i,s){var p=l.cd,v=l.xa,m=l.ya,b=p[0].trace,y=p[0].t,x=b.type==="violin",w=[],g,T,M,P,L,I,C,k,E,R,O,N=y.bdPos,G,U,Y=y.wHover,z=function(pe){return M.c2l(pe.pos)+y.bPos-M.c2l(I)};x&&b.side!=="both"?(b.side==="positive"&&(E=function(pe){var fe=z(pe);return u.inbox(fe,fe+Y,R)},G=N,U=0),b.side==="negative"&&(E=function(pe){var fe=z(pe);return u.inbox(fe-Y,fe,R)},G=0,U=N)):(E=function(pe){var fe=z(pe);return u.inbox(fe-Y,fe+Y,R)},G=U=N);var B;x?B=function(pe){return u.inbox(pe.span[0]-L,pe.span[1]-L,R)}:B=function(pe){return u.inbox(pe.min-L,pe.max-L,R)},b.orientation==="h"?(L=h,I=i,C=B,k=E,g="y",M=m,T="x",P=v):(L=i,I=h,C=E,k=B,g="x",M=v,T="y",P=m);var H=Math.min(1,N/Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0])));R=l.maxHoverDistance-H,O=l.maxSpikeDistance-H;function V(pe){return(C(pe)+k(pe))/2}var Z=u.getDistanceFunction(s,C,k,V);if(u.getClosest(p,Z,l),l.index===!1)return[];var q=p[l.index],J=b.line.color,ne=(b.marker||{}).color;c.opacity(J)&&b.line.width?l.color=J:c.opacity(ne)&&b.boxpoints?l.color=ne:l.color=b.fillcolor,l[g+"0"]=M.c2p(q.pos+y.bPos-U,!0),l[g+"1"]=M.c2p(q.pos+y.bPos+G,!0),l[g+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var ve=g+"Spike";l.spikeDistance=V(q)*O/R,l[ve]=M.c2p(q.pos,!0);var $={},j=["med","q1","q3","min","max"];(b.boxmean||(b.meanline||{}).visible)&&j.push("mean"),(b.boxpoints||b.points)&&j.push("lf","uf");for(var ae=0;ae<j.length;ae++){var ie=j[ae];if(!(!(ie in q)||q[ie]in $)){$[q[ie]]=!0;var te=q[ie],re=P.c2p(te,!0),ce=a.extendFlat({},l);ce.attr=ie,ce[T+"0"]=ce[T+"1"]=re,ce[T+"LabelVal"]=te,ce[T+"Label"]=(y.labels?y.labels[ie]+" ":"")+r.hoverLabelText(P,te),ce.hoverOnBox=!0,ie==="mean"&&"sd"in q&&b.boxmean==="sd"&&(ce[T+"err"]=q.sd),l.name="",l.spikeDistance=void 0,l[ve]=void 0,ce.hovertemplate=!1,w.push(ce)}}return w}function o(l,h,i){for(var s=l.cd,p=l.xa,v=l.ya,m=s[0].trace,b=p.c2p(h),y=v.c2p(i),x,w=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(p.c2p(z.x)-b)-B,1-3/B)},g=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(v.c2p(z.y)-y)-B,1-3/B)},T=u.quadrature(w,g),M=!1,P,L,I=0;I<s.length;I++){P=s[I];for(var C=0;C<(P.pts||[]).length;C++){L=P.pts[C];var k=T(L);k<=l.distance&&(l.distance=k,M=[I,C])}}if(!M)return!1;P=s[M[0]],L=P.pts[M[1]];var E=p.c2p(L.x,!0),R=v.c2p(L.y,!0),O=L.mrc||1;x=a.extendFlat({},l,{index:L.i,color:(m.marker||{}).color,name:m.name,x0:E-O,x1:E+O,y0:R-O,y1:R+O,spikeDistance:l.distance,hovertemplate:m.hovertemplate});var N=P.orig_p,G=N!==void 0?N:P.pos,U;m.orientation==="h"?(U=v,x.xLabelVal=L.x,x.yLabelVal=G):(U=p,x.xLabelVal=G,x.yLabelVal=L.y);var Y=U._id.charAt(0);return x[Y+"Spike"]=U.c2p(P.pos,!0),t(L,m,x),x}d.exports={hoverPoints:f,hoverOnBoxes:n,hoverOnPoints:o}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],952:[function(e,d,S){d.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"./attributes":946,"./calc":947,"./cross_trace_calc":948,"./defaults":949,"./event_data":950,"./hover":951,"./layout_attributes":953,"./layout_defaults":954,"./plot":955,"./select":956,"./style":957}],953:[function(e,d,S){d.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],954:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("./layout_attributes");function c(f,n,o,l,h){for(var i=h+"Layout",s=!1,p=0;p<o.length;p++){var v=o[p];if(r.traceIs(v,i)){s=!0;break}}!s||(l(h+"mode"),l(h+"gap"),l(h+"groupgap"))}function t(f,n,o){function l(h,i){return a.coerce(f,n,u,h,i)}c(f,n,o,l,"box")}d.exports={supplyLayoutDefaults:t,_supply:c}},{"../../lib":778,"../../registry":911,"./layout_attributes":953}],955:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=5,t=.01;function f(h,i,s,p){var v=i.xaxis,m=i.yaxis;a.makeTraceGroups(p,s,"trace boxes").each(function(b){var y=r.select(this),x=b[0],w=x.t,g=x.trace;if(w.wdPos=w.bdPos*g.whiskerwidth,g.visible!==!0||w.empty){y.remove();return}var T,M;g.orientation==="h"?(T=m,M=v):(T=v,M=m),n(y,{pos:T,val:M},g,w),o(y,{x:v,y:m},g,w),l(y,{pos:T,val:M},g,w)})}function n(h,i,s,p){var v=s.orientation==="h",m=i.val,b=i.pos,y=!!b.rangebreaks,x=p.bPos,w=p.wdPos||0,g=p.bPosPxOffset||0,T=s.whiskerwidth||0,M=s.notched||!1,P=M?1-2*s.notchwidth:1,L,I;Array.isArray(p.bdPos)?(L=p.bdPos[0],I=p.bdPos[1]):(L=p.bdPos,I=p.bdPos);var C=h.selectAll("path.box").data(s.type!=="violin"||s.box.visible?a.identity:[]);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),C.exit().remove(),C.each(function(k){if(k.empty)return"M0,0Z";var E=b.c2l(k.pos+x,!0),R=b.l2p(E-L)+g,O=b.l2p(E+I)+g,N=y?(R+O)/2:b.l2p(E)+g,G=s.whiskerwidth,U=y?R*G+(1-G)*N:b.l2p(E-w)+g,Y=y?O*G+(1-G)*N:b.l2p(E+w)+g,z=b.l2p(E-L*P)+g,B=b.l2p(E+I*P)+g,H=m.c2p(k.q1,!0),V=m.c2p(k.q3,!0),Z=a.constrain(m.c2p(k.med,!0),Math.min(H,V)+1,Math.max(H,V)-1),q=k.lf===void 0||s.boxpoints===!1,J=m.c2p(q?k.min:k.lf,!0),ne=m.c2p(q?k.max:k.uf,!0),ve=m.c2p(k.ln,!0),$=m.c2p(k.un,!0);v?r.select(this).attr("d","M"+Z+","+z+"V"+B+"M"+H+","+R+"V"+O+(M?"H"+ve+"L"+Z+","+B+"L"+$+","+O:"")+"H"+V+"V"+R+(M?"H"+$+"L"+Z+","+z+"L"+ve+","+R:"")+"ZM"+H+","+N+"H"+J+"M"+V+","+N+"H"+ne+(T===0?"":"M"+J+","+U+"V"+Y+"M"+ne+","+U+"V"+Y)):r.select(this).attr("d","M"+z+","+Z+"H"+B+"M"+R+","+H+"H"+O+(M?"V"+ve+"L"+B+","+Z+"L"+O+","+$:"")+"V"+V+"H"+R+(M?"V"+$+"L"+z+","+Z+"L"+R+","+ve:"")+"ZM"+N+","+H+"V"+J+"M"+N+","+V+"V"+ne+(T===0?"":"M"+U+","+J+"H"+Y+"M"+U+","+ne+"H"+Y))})}function o(h,i,s,p){var v=i.x,m=i.y,b=p.bdPos,y=p.bPos,x=s.boxpoints||s.points;a.seedPseudoRandom();var w=function(M){return M.forEach(function(P){P.t=p,P.trace=s}),M},g=h.selectAll("g.points").data(x?w:[]);g.enter().append("g").attr("class","points"),g.exit().remove();var T=g.selectAll("path").data(function(M){var P,L=M.pts2,I=Math.max((M.max-M.min)/10,M.q3-M.q1),C=I*1e-9,k=I*t,E=[],R=0,O;if(s.jitter){if(I===0)for(R=1,E=new Array(L.length),P=0;P<L.length;P++)E[P]=1;else for(P=0;P<L.length;P++){var N=Math.max(0,P-c),G=L[N].v,U=Math.min(L.length-1,P+c),Y=L[U].v;x!=="all"&&(L[P].v<M.lf?Y=Math.min(Y,M.lf):G=Math.max(G,M.uf));var z=Math.sqrt(k*(U-N)/(Y-G+C))||0;z=a.constrain(Math.abs(z),0,1),E.push(z),R=Math.max(z,R)}O=s.jitter*2/(R||1)}for(P=0;P<L.length;P++){var B=L[P],H=B.v,V=s.jitter?O*E[P]*(a.pseudoRandom()-.5):0,Z=M.pos+y+b*(s.pointpos+V);s.orientation==="h"?(B.y=Z,B.x=H):(B.x=Z,B.y=H),x==="suspectedoutliers"&&H<M.uo&&H>M.lo&&(B.so=!0)}return L});T.enter().append("path").classed("point",!0),T.exit().remove(),T.call(u.translatePoints,v,m)}function l(h,i,s,p){var v=i.val,m=i.pos,b=!!m.rangebreaks,y=p.bPos,x=p.bPosPxOffset||0,w=s.boxmean||(s.meanline||{}).visible,g,T;Array.isArray(p.bdPos)?(g=p.bdPos[0],T=p.bdPos[1]):(g=p.bdPos,T=p.bdPos);var M=h.selectAll("path.mean").data(s.type==="box"&&s.boxmean||s.type==="violin"&&s.box.visible&&s.meanline.visible?a.identity:[]);M.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),M.exit().remove(),M.each(function(P){var L=m.c2l(P.pos+y,!0),I=m.l2p(L-g)+x,C=m.l2p(L+T)+x,k=b?(I+C)/2:m.l2p(L)+x,E=v.c2p(P.mean,!0),R=v.c2p(P.mean-P.sd,!0),O=v.c2p(P.mean+P.sd,!0);s.orientation==="h"?r.select(this).attr("d","M"+E+","+I+"V"+C+(w==="sd"?"m0,0L"+R+","+k+"L"+E+","+I+"L"+O+","+k+"Z":"")):r.select(this).attr("d","M"+I+","+E+"H"+C+(w==="sd"?"m0,0L"+k+","+R+"L"+I+","+E+"L"+k+","+O+"Z":""))})}d.exports={plot:f,plotBoxAndWhiskers:n,plotPoints:o,plotBoxMean:l}},{"../../components/drawing":665,"../../lib":778,d3:169}],956:[function(e,d,S){d.exports=function(a,u){var c=a.cd,t=a.xaxis,f=a.yaxis,n=[],o,l;if(u===!1)for(o=0;o<c.length;o++)for(l=0;l<(c[o].pts||[]).length;l++)c[o].pts[l].selected=0;else for(o=0;o<c.length;o++)for(l=0;l<(c[o].pts||[]).length;l++){var h=c[o].pts[l],i=t.c2p(h.x),s=f.c2p(h.y);u.contains([i,s],null,h.i,a)?(n.push({pointNumber:h.i,x:t.c2d(h.x),y:f.c2d(h.y)}),h.selected=1):h.selected=0}return n}},{}],957:[function(e,d,S){var r=e("d3"),a=e("../../components/color"),u=e("../../components/drawing");function c(f,n,o){var l=o||r.select(f).selectAll("g.trace.boxes");l.style("opacity",function(h){return h[0].trace.opacity}),l.each(function(h){var i=r.select(this),s=h[0].trace,p=s.line.width;function v(y,x,w,g){y.style("stroke-width",x+"px").call(a.stroke,w).call(a.fill,g)}var m=i.selectAll("path.box");if(s.type==="candlestick")m.each(function(y){if(!y.empty){var x=r.select(this),w=s[y.dir];v(x,w.line.width,w.line.color,w.fillcolor),x.style("opacity",s.selectedpoints&&!y.selected?.3:1)}});else{v(m,p,s.line.color,s.fillcolor),i.selectAll("path.mean").style({"stroke-width":p,"stroke-dasharray":2*p+"px,"+p+"px"}).call(a.stroke,s.line.color);var b=i.selectAll("path.point");u.pointStyle(b,s,f)}})}function t(f,n,o){var l=n[0].trace,h=o.selectAll("path.point");l.selectedpoints?u.selectedPointStyle(h,l):u.pointStyle(h,l,f)}d.exports={style:c,styleOnSelect:t}},{"../../components/color":643,"../../components/drawing":665,d3:169}],958:[function(e,d,S){var r=e("../../lib").extendFlat,a=e("../ohlc/attributes"),u=e("../box/attributes");function c(t){return{line:{color:r({},u.line.color,{dflt:t}),width:u.line.width,editType:"style"},fillcolor:u.fillcolor,editType:"style"}}d.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,x:a.x,open:a.open,high:a.high,low:a.low,close:a.close,line:{width:r({},u.line.width,{}),editType:"style"},increasing:c(a.increasing.line.color.dflt),decreasing:c(a.decreasing.line.color.dflt),text:a.text,hovertext:a.hovertext,whiskerwidth:r({},u.whiskerwidth,{dflt:0}),hoverlabel:a.hoverlabel}},{"../../lib":778,"../box/attributes":946,"../ohlc/attributes":1133}],959:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../../plots/cartesian/align_period"),c=e("../ohlc/calc").calcCommon;d.exports=function(f,n){var o=f._fullLayout,l=a.getFromId(f,n.xaxis),h=a.getFromId(f,n.yaxis),i=l.makeCalcdata(n,"x"),s=u(n,l,"x",i),p=c(f,n,i,s,h,t);return p.length?(r.extendFlat(p[0].t,{num:o._numBoxes,dPos:r.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),o._numBoxes++,p):[{t:{empty:!0}}]};function t(f,n,o,l){return{min:o,q1:Math.min(f,l),med:l,q3:Math.max(f,l),max:n}}},{"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../ohlc/calc":1134}],960:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../ohlc/ohlc_defaults"),c=e("../scatter/period_defaults"),t=e("./attributes");d.exports=function(o,l,h,i){function s(v,m){return r.coerce(o,l,t,v,m)}var p=u(o,l,s,i);if(!p){l.visible=!1;return}c(o,l,i,s,{x:!0}),s("line.width"),f(o,l,s,"increasing"),f(o,l,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),i._requestRangeslider[l.xaxis]=!0};function f(n,o,l,h){var i=l(h+".line.color");l(h+".line.width",o.line.width),l(h+".fillcolor",a.addOpacity(i,.5))}},{"../../components/color":643,"../../lib":778,"../ohlc/ohlc_defaults":1138,"../scatter/period_defaults":1207,"./attributes":958}],961:[function(e,d,S){d.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":841,"../box/cross_trace_calc":948,"../box/layout_attributes":953,"../box/layout_defaults":954,"../box/plot":955,"../box/style":957,"../ohlc/hover":1136,"../ohlc/select":1140,"./attributes":958,"./calc":959,"./defaults":960}],962:[function(e,d,S){var r=e("./axis_defaults"),a=e("../../plot_api/plot_template");d.exports=function(t,f,n,o,l){var h=o("a");h||(o("da"),o("a0"));var i=o("b");i||(o("db"),o("b0")),u(t,f,n,l)};function u(c,t,f,n){var o=["aaxis","baxis"];o.forEach(function(l){var h=l.charAt(0),i=c[l]||{},s=a.newContainer(t,l),p={tickfont:"x",id:h+"axis",letter:h,font:t.font,name:l,data:c[h],calendar:t.calendar,dfltColor:n,bgColor:f.paper_bgcolor,autotypenumbersDflt:f.autotypenumbers,fullLayout:f};r(i,s,p),s._categories=s._categories||[],!c[l]&&i.type!=="-"&&(c[l]={type:i.type})})}},{"../../plot_api/plot_template":817,"./axis_defaults":967}],963:[function(e,d,S){var r=e("../../lib").isArrayOrTypedArray;d.exports=function(u){return a(u,0)};function a(u,c){if(!r(u)||c>=10)return null;for(var t=1/0,f=-1/0,n=u.length,o=0;o<n;o++){var l=u[o];if(r(l)){var h=a(l,c+1);h&&(t=Math.min(h[0],t),f=Math.max(h[1],f))}else t=Math.min(l,t),f=Math.max(l,f)}return[t,f]}},{"../../lib":778}],964:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("./axis_attributes"),u=e("../../components/color/attributes"),c=r({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif',c.size.dflt=12,c.color.dflt=u.defaultLine,d.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:a,baxis:a,font:c,color:{valType:"color",dflt:u.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":642,"../../plots/font_attributes":856,"./axis_attributes":966}],965:[function(e,d,S){var r=e("../../lib").isArrayOrTypedArray;d.exports=function(a,u,c,t){var f,n,o,l,h,i,s,p,v,m,b,y,x,w=r(c)?"a":"b",g=w==="a"?a.aaxis:a.baxis,T=g.smoothing,M=w==="a"?a.a2i:a.b2j,P=w==="a"?c:t,L=w==="a"?t:c,I=w==="a"?u.a.length:u.b.length,C=w==="a"?u.b.length:u.a.length,k=Math.floor(w==="a"?a.b2j(L):a.a2i(L)),E=w==="a"?function(q){return a.evalxy([],q,k)}:function(q){return a.evalxy([],k,q)};T&&(o=Math.max(0,Math.min(C-2,k)),l=k-o,n=w==="a"?function(q,J){return a.dxydi([],q,o,J,l)}:function(q,J){return a.dxydj([],o,q,l,J)});var R=M(P[0]),O=M(P[1]),N=R<O?1:-1,G=(O-R)*1e-8,U=N>0?Math.floor:Math.ceil,Y=N>0?Math.ceil:Math.floor,z=N>0?Math.min:Math.max,B=N>0?Math.max:Math.min,H=U(R+G),V=Y(O-G);s=E(R);var Z=[[s]];for(f=H;f*N<V*N;f+=N)h=[],b=B(R,f),y=z(O,f+N),x=y-b,i=Math.max(0,Math.min(I-2,Math.floor(.5*(b+y)))),p=E(y),T&&(v=n(i,b-i),m=n(i,y-i),h.push([s[0]+v[0]/3*x,s[1]+v[1]/3*x]),h.push([p[0]-m[0]/3*x,p[1]-m[1]/3*x])),h.push(p),Z.push(h),s=p;return Z}},{"../../lib":778}],966:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("../../components/color/attributes"),u=e("../../plots/cartesian/layout_attributes"),c=e("../../plot_api/edit_types").overrideAll;e("../../constants/docs").FORMAT_LINK,e("../../constants/docs").TIME_FORMAT_LINK,d.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:r({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:u.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:r({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:c(u.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:a.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:r({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":642,"../../constants/docs":748,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],967:[function(e,d,S){var r=e("./attributes"),a=e("../../components/color").addOpacity,u=e("../../registry"),c=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),f=e("../../plots/cartesian/tick_label_defaults"),n=e("../../plots/cartesian/category_order_defaults"),o=e("../../plots/cartesian/set_convert"),l=e("../../plots/cartesian/axis_autotype");d.exports=function(s,p,v){var m=v.letter,b=v.font||{},y=r[m+"axis"];function x(z,B){return c.coerce(s,p,y,z,B)}function w(z,B){return c.coerce2(s,p,y,z,B)}v.name&&(p._name=v.name,p._id=v.name),x("autotypenumbers",v.autotypenumbersDflt);var g=x("type");if(g==="-"&&(v.data&&h(p,v.data),p.type==="-"?p.type="linear":g=s.type=p.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",m+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),p.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),p._hovertitle=m,g==="date"){var T=u.getComponentMethod("calendars","handleDefaults");T(s,p,"calendar",v.calendar)}o(p,v.fullLayout),p.c2p=c.identity;var M=x("color",v.dfltColor),P=M===s.color?M:b.color,L=x("title.text");L&&(c.coerceFont(x,"title.font",{family:b.family,size:Math.round(b.size*1.2),color:P}),x("title.offset")),x("tickangle");var I=x("autorange",!p.isValidRange(s.range));I&&x("rangemode"),x("range"),p.cleanRange(),x("fixedrange"),t(s,p,x,g),f(s,p,x,g,v),n(s,p,x,{data:v.data,dataAttr:m});var C=w("gridcolor",a(M,.3)),k=w("gridwidth"),E=x("showgrid");E||(delete p.gridcolor,delete p.gridwidth);var R=w("startlinecolor",M),O=w("startlinewidth",k),N=x("startline",p.showgrid||!!R||!!O);N||(delete p.startlinecolor,delete p.startlinewidth);var G=w("endlinecolor",M),U=w("endlinewidth",k),Y=x("endline",p.showgrid||!!G||!!U);return Y||(delete p.endlinecolor,delete p.endlinewidth),E?(x("minorgridcount"),x("minorgridwidth",k),x("minorgridcolor",a(C,.06)),p.minorgridcount||(delete p.minorgridwidth,delete p.minorgridcolor)):(delete p.gridcolor,delete p.gridWidth),p.showticklabels==="none"&&(delete p.tickfont,delete p.tickangle,delete p.showexponent,delete p.exponentformat,delete p.minexponent,delete p.tickformat,delete p.showticksuffix,delete p.showtickprefix),p.showticksuffix||delete p.ticksuffix,p.showtickprefix||delete p.tickprefix,x("tickmode"),p};function h(i,s){if(i.type==="-"){var p=i._id,v=p.charAt(0),m=v+"calendar",b=i[m];i.type=l(s,b,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../plots/cartesian/category_order_defaults":832,"../../plots/cartesian/set_convert":848,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_value_defaults":851,"../../registry":911,"./attributes":964}],968:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib").isArray1D,u=e("./cheater_basis"),c=e("./array_minmax"),t=e("./calc_gridlines"),f=e("./calc_labels"),n=e("./calc_clippath"),o=e("../heatmap/clean_2d_array"),l=e("./smooth_fill_2d_array"),h=e("../heatmap/convert_column_xyz"),i=e("./set_convert");d.exports=function(p,v){var m=r.getFromId(p,v.xaxis),b=r.getFromId(p,v.yaxis),y=v.aaxis,x=v.baxis,w=v.x,g=v.y,T=[];w&&a(w)&&T.push("x"),g&&a(g)&&T.push("y"),T.length&&h(v,y,x,"a","b",T);var M=v._a=v._a||v.a,P=v._b=v._b||v.b;w=v._x||v.x,g=v._y||v.y;var L={};if(v._cheater){var I=y.cheatertype==="index"?M.length:M,C=x.cheatertype==="index"?P.length:P;w=u(I,C,v.cheaterslope)}v._x=w=o(w),v._y=g=o(g),l(w,M,P),l(g,M,P),i(v),v.setScale();var k=c(w),E=c(g),R=.5*(k[1]-k[0]),O=.5*(k[1]+k[0]),N=.5*(E[1]-E[0]),G=.5*(E[1]+E[0]),U=1.3;return k=[O-R*U,O+R*U],E=[G-N*U,G+N*U],v._extremes[m._id]=r.findExtremes(m,k,{padded:!0}),v._extremes[b._id]=r.findExtremes(b,E,{padded:!0}),t(v,"a","b"),t(v,"b","a"),f(v,y),f(v,x),L.clipsegments=n(v._xctrl,v._yctrl,y,x),L.x=w,L.y=g,L.a=M,L.b=P,[L]}},{"../../lib":778,"../../plots/cartesian/axes":828,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"./array_minmax":963,"./calc_clippath":969,"./calc_gridlines":970,"./calc_labels":971,"./cheater_basis":973,"./set_convert":986,"./smooth_fill_2d_array":987}],969:[function(e,d,S){d.exports=function(a,u,c,t){var f,n,o,l=[],h=!!c.smoothing,i=!!t.smoothing,s=a[0].length-1,p=a.length-1;for(f=0,n=[],o=[];f<=s;f++)n[f]=a[0][f],o[f]=u[0][f];for(l.push({x:n,y:o,bicubic:h}),f=0,n=[],o=[];f<=p;f++)n[f]=a[f][s],o[f]=u[f][s];for(l.push({x:n,y:o,bicubic:i}),f=s,n=[],o=[];f>=0;f--)n[s-f]=a[p][f],o[s-f]=u[p][f];for(l.push({x:n,y:o,bicubic:h}),f=p,n=[],o=[];f>=0;f--)n[p-f]=a[f][0],o[p-f]=u[f][0];return l.push({x:n,y:o,bicubic:i}),l}},{}],970:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib/extend").extendFlat;d.exports=function(c,t,f){var n,o,l,h,i,s,p,v,m,b,y,x,w,g,T=c["_"+t],M=c[t+"axis"],P=M._gridlines=[],L=M._minorgridlines=[],I=M._boundarylines=[],C=c["_"+f],k=c[f+"axis"];M.tickmode==="array"&&(M.tickvals=T.slice());var E=c._xctrl,R=c._yctrl,O=E[0].length,N=E.length,G=c._a.length,U=c._b.length;r.prepTicks(M),M.tickmode==="array"&&delete M.tickvals;var Y=M.smoothing?3:1;function z(H){var V,Z,q,J,ne,ve,$,j,ae,ie,te,re,ce=[],pe=[],fe={};if(t==="b")for(Z=c.b2j(H),q=Math.floor(Math.max(0,Math.min(U-2,Z))),J=Z-q,fe.length=U,fe.crossLength=G,fe.xy=function(se){return c.evalxy([],se,Z)},fe.dxy=function(se,de){return c.dxydi([],se,q,de,J)},V=0;V<G;V++)ve=Math.min(G-2,V),$=V-ve,j=c.evalxy([],V,Z),k.smoothing&&V>0&&(ae=c.dxydi([],V-1,q,0,J),ce.push(ne[0]+ae[0]/3),pe.push(ne[1]+ae[1]/3),ie=c.dxydi([],V-1,q,1,J),ce.push(j[0]-ie[0]/3),pe.push(j[1]-ie[1]/3)),ce.push(j[0]),pe.push(j[1]),ne=j;else for(V=c.a2i(H),ve=Math.floor(Math.max(0,Math.min(G-2,V))),$=V-ve,fe.length=G,fe.crossLength=U,fe.xy=function(se){return c.evalxy([],V,se)},fe.dxy=function(se,de){return c.dxydj([],ve,se,$,de)},Z=0;Z<U;Z++)q=Math.min(U-2,Z),J=Z-q,j=c.evalxy([],V,Z),k.smoothing&&Z>0&&(te=c.dxydj([],ve,Z-1,$,0),ce.push(ne[0]+te[0]/3),pe.push(ne[1]+te[1]/3),re=c.dxydj([],ve,Z-1,$,1),ce.push(j[0]-re[0]/3),pe.push(j[1]-re[1]/3)),ce.push(j[0]),pe.push(j[1]),ne=j;return fe.axisLetter=t,fe.axis=M,fe.crossAxis=k,fe.value=H,fe.constvar=f,fe.index=v,fe.x=ce,fe.y=pe,fe.smoothing=k.smoothing,fe}function B(H){var V,Z,q,J,ne,ve=[],$=[],j={};if(j.length=T.length,j.crossLength=C.length,t==="b")for(q=Math.max(0,Math.min(U-2,H)),ne=Math.min(1,Math.max(0,H-q)),j.xy=function(ae){return c.evalxy([],ae,H)},j.dxy=function(ae,ie){return c.dxydi([],ae,q,ie,ne)},V=0;V<O;V++)ve[V]=E[H*Y][V],$[V]=R[H*Y][V];else for(Z=Math.max(0,Math.min(G-2,H)),J=Math.min(1,Math.max(0,H-Z)),j.xy=function(ae){return c.evalxy([],H,ae)},j.dxy=function(ae,ie){return c.dxydj([],Z,ae,J,ie)},V=0;V<N;V++)ve[V]=E[V][H*Y],$[V]=R[V][H*Y];return j.axisLetter=t,j.axis=M,j.crossAxis=k,j.value=T[H],j.constvar=f,j.index=H,j.x=ve,j.y=$,j.smoothing=k.smoothing,j}if(M.tickmode==="array"){for(h=5e-15,i=[Math.floor((T.length-1-M.arraytick0)/M.arraydtick*(1+h)),Math.ceil(-M.arraytick0/M.arraydtick/(1+h))].sort(function(H,V){return H-V}),s=i[0]-1,p=i[1]+1,v=s;v<p;v++)o=M.arraytick0+M.arraydtick*v,!(o<0||o>T.length-1)&&P.push(a(B(o),{color:M.gridcolor,width:M.gridwidth}));for(v=s;v<p;v++)if(l=M.arraytick0+M.arraydtick*v,y=Math.min(l+M.arraydtick,T.length-1),!(l<0||l>T.length-1)&&!(y<0||y>T.length-1))for(x=T[l],w=T[y],n=0;n<M.minorgridcount;n++)g=y-l,!(g<=0)&&(b=x+(w-x)*(n+1)/(M.minorgridcount+1)*(M.arraydtick/g),!(b<T[0]||b>T[T.length-1])&&L.push(a(z(b),{color:M.minorgridcolor,width:M.minorgridwidth})));M.startline&&I.push(a(B(0),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&I.push(a(B(T.length-1),{color:M.endlinecolor,width:M.endlinewidth}))}else{for(h=5e-15,i=[Math.floor((T[T.length-1]-M.tick0)/M.dtick*(1+h)),Math.ceil((T[0]-M.tick0)/M.dtick/(1+h))].sort(function(H,V){return H-V}),s=i[0],p=i[1],v=s;v<=p;v++)m=M.tick0+M.dtick*v,P.push(a(z(m),{color:M.gridcolor,width:M.gridwidth}));for(v=s-1;v<p+1;v++)for(m=M.tick0+M.dtick*v,n=0;n<M.minorgridcount;n++)b=m+M.dtick*(n+1)/(M.minorgridcount+1),!(b<T[0]||b>T[T.length-1])&&L.push(a(z(b),{color:M.minorgridcolor,width:M.minorgridwidth}));M.startline&&I.push(a(z(T[0]),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&I.push(a(z(T[T.length-1]),{color:M.endlinecolor,width:M.endlinewidth}))}}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],971:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib/extend").extendFlat;d.exports=function(c,t){var f,n,o,l,h,i=t._labels=[],s=t._gridlines;for(f=0;f<s.length;f++)h=s[f],["start","both"].indexOf(t.showticklabels)!==-1&&(n=r.tickText(t,h.value),a(n,{prefix:o,suffix:l,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:f===0,isLast:f===s.length-1}),i.push(n)),["end","both"].indexOf(t.showticklabels)!==-1&&(n=r.tickText(t,h.value),a(n,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:f===0,isLast:f===s.length-1}),i.push(n))}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],972:[function(e,d,S){var r=.5;d.exports=function(u,c,t,f){var n=u[0]-c[0],o=u[1]-c[1],l=t[0]-c[0],h=t[1]-c[1],i=Math.pow(n*n+o*o,r/2),s=Math.pow(l*l+h*h,r/2),p=(s*s*n-i*i*l)*f,v=(s*s*o-i*i*h)*f,m=s*(i+s)*3,b=i*(i+s)*3;return[[c[0]+(m&&p/m),c[1]+(m&&v/m)],[c[0]-(b&&p/b),c[1]-(b&&v/b)]]}},{}],973:[function(e,d,S){var r=e("../../lib").isArrayOrTypedArray;d.exports=function(a,u,c){var t,f,n,o,l,h,i=[],s=r(a)?a.length:a,p=r(u)?u.length:u,v=r(a)?a:null,m=r(u)?u:null;v&&(n=(v.length-1)/(v[v.length-1]-v[0])/(s-1)),m&&(o=(m.length-1)/(m[m.length-1]-m[0])/(p-1));var b,y=1/0,x=-1/0;for(f=0;f<p;f++)for(i[f]=[],h=m?(m[f]-m[0])*o:f/(p-1),t=0;t<s;t++)l=v?(v[t]-v[0])*n:t/(s-1),b=l-h*c,y=Math.min(b,y),x=Math.max(b,x),i[f][t]=b;var w=1/(x-y),g=-y*w;for(f=0;f<p;f++)for(t=0;t<s;t++)i[f][t]=w*i[f][t]+g;return i}},{"../../lib":778}],974:[function(e,d,S){var r=e("./catmull_rom"),a=e("../../lib").ensureArray;function u(c,t,f){var n=-.5*f[0]+1.5*t[0],o=-.5*f[1]+1.5*t[1];return[(2*n+c[0])/3,(2*o+c[1])/3]}d.exports=function(t,f,n,o,l,h){var i,s,p,v,m,b,y,x,w,g,T=n[0].length,M=n.length,P=l?3*T-2:T,L=h?3*M-2:M;for(t=a(t,L),f=a(f,L),p=0;p<L;p++)t[p]=a(t[p],P),f[p]=a(f[p],P);for(s=0,v=0;s<M;s++,v+=h?3:1)for(m=t[v],b=f[v],y=n[s],x=o[s],i=0,p=0;i<T;i++,p+=l?3:1)m[p]=y[i],b[p]=x[i];if(l)for(s=0,v=0;s<M;s++,v+=h?3:1){for(i=1,p=3;i<T-1;i++,p+=3)w=r([n[s][i-1],o[s][i-1]],[n[s][i],o[s][i]],[n[s][i+1],o[s][i+1]],l),t[v][p-1]=w[0][0],f[v][p-1]=w[0][1],t[v][p+1]=w[1][0],f[v][p+1]=w[1][1];g=u([t[v][0],f[v][0]],[t[v][2],f[v][2]],[t[v][3],f[v][3]]),t[v][1]=g[0],f[v][1]=g[1],g=u([t[v][P-1],f[v][P-1]],[t[v][P-3],f[v][P-3]],[t[v][P-4],f[v][P-4]]),t[v][P-2]=g[0],f[v][P-2]=g[1]}if(h)for(p=0;p<P;p++){for(v=3;v<L-3;v+=3)w=r([t[v-3][p],f[v-3][p]],[t[v][p],f[v][p]],[t[v+3][p],f[v+3][p]],h),t[v-1][p]=w[0][0],f[v-1][p]=w[0][1],t[v+1][p]=w[1][0],f[v+1][p]=w[1][1];g=u([t[0][p],f[0][p]],[t[2][p],f[2][p]],[t[3][p],f[3][p]]),t[1][p]=g[0],f[1][p]=g[1],g=u([t[L-1][p],f[L-1][p]],[t[L-3][p],f[L-3][p]],[t[L-4][p],f[L-4][p]]),t[L-2][p]=g[0],f[L-2][p]=g[1]}if(l&&h)for(v=1;v<L;v+=(v+1)%3===0?2:1){for(p=3;p<P-3;p+=3)w=r([t[v][p-3],f[v][p-3]],[t[v][p],f[v][p]],[t[v][p+3],f[v][p+3]],l),t[v][p-1]=.5*(t[v][p-1]+w[0][0]),f[v][p-1]=.5*(f[v][p-1]+w[0][1]),t[v][p+1]=.5*(t[v][p+1]+w[1][0]),f[v][p+1]=.5*(f[v][p+1]+w[1][1]);g=u([t[v][0],f[v][0]],[t[v][2],f[v][2]],[t[v][3],f[v][3]]),t[v][1]=.5*(t[v][1]+g[0]),f[v][1]=.5*(f[v][1]+g[1]),g=u([t[v][P-1],f[v][P-1]],[t[v][P-3],f[v][P-3]],[t[v][P-4],f[v][P-4]]),t[v][P-2]=.5*(t[v][P-2]+g[0]),f[v][P-2]=.5*(f[v][P-2]+g[1])}return[t,f]}},{"../../lib":778,"./catmull_rom":972}],975:[function(e,d,S){d.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],976:[function(e,d,S){d.exports=function(r,a,u){return a&&u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,v;t*=3,f*=3;var m=n*n,b=1-n,y=b*b,x=b*n*2,w=-3*y,g=3*(y-x),T=3*(x-m),M=3*m,P=o*o,L=P*o,I=1-o,C=I*I,k=C*I;for(v=0;v<r.length;v++)p=r[v],l=w*p[f][t]+g*p[f][t+1]+T*p[f][t+2]+M*p[f][t+3],h=w*p[f+1][t]+g*p[f+1][t+1]+T*p[f+1][t+2]+M*p[f+1][t+3],i=w*p[f+2][t]+g*p[f+2][t+1]+T*p[f+2][t+2]+M*p[f+2][t+3],s=w*p[f+3][t]+g*p[f+3][t+1]+T*p[f+3][t+2]+M*p[f+3][t+3],c[v]=k*l+3*(C*o*h+I*P*i)+L*s;return c}:a?function(c,t,f,n,o){c||(c=[]);var l,h,i,s;t*=3;var p=n*n,v=1-n,m=v*v,b=v*n*2,y=-3*m,x=3*(m-b),w=3*(b-p),g=3*p,T=1-o;for(i=0;i<r.length;i++)s=r[i],l=y*s[f][t]+x*s[f][t+1]+w*s[f][t+2]+g*s[f][t+3],h=y*s[f+1][t]+x*s[f+1][t+1]+w*s[f+1][t+2]+g*s[f+1][t+3],c[i]=T*l+o*h;return c}:u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,v;f*=3;var m=o*o,b=m*o,y=1-o,x=y*y,w=x*y;for(p=0;p<r.length;p++)v=r[p],l=v[f][t+1]-v[f][t],h=v[f+1][t+1]-v[f+1][t],i=v[f+2][t+1]-v[f+2][t],s=v[f+3][t+1]-v[f+3][t],c[p]=w*l+3*(x*o*h+y*m*i)+b*s;return c}:function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p=1-o;for(i=0;i<r.length;i++)s=r[i],l=s[f][t+1]-s[f][t],h=s[f+1][t+1]-s[f+1][t],c[i]=p*l+o*h;return c}}},{}],977:[function(e,d,S){d.exports=function(r,a,u){return a&&u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,v;t*=3,f*=3;var m=n*n,b=m*n,y=1-n,x=y*y,w=x*y,g=o*o,T=1-o,M=T*T,P=T*o*2,L=-3*M,I=3*(M-P),C=3*(P-g),k=3*g;for(v=0;v<r.length;v++)p=r[v],l=L*p[f][t]+I*p[f+1][t]+C*p[f+2][t]+k*p[f+3][t],h=L*p[f][t+1]+I*p[f+1][t+1]+C*p[f+2][t+1]+k*p[f+3][t+1],i=L*p[f][t+2]+I*p[f+1][t+2]+C*p[f+2][t+2]+k*p[f+3][t+2],s=L*p[f][t+3]+I*p[f+1][t+3]+C*p[f+2][t+3]+k*p[f+3][t+3],c[v]=w*l+3*(x*n*h+y*m*i)+b*s;return c}:a?function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p,v;t*=3;var m=o*o,b=m*o,y=1-o,x=y*y,w=x*y;for(p=0;p<r.length;p++)v=r[p],l=v[f+1][t]-v[f][t],h=v[f+1][t+1]-v[f][t+1],i=v[f+1][t+2]-v[f][t+2],s=v[f+1][t+3]-v[f][t+3],c[p]=w*l+3*(x*o*h+y*m*i)+b*s;return c}:u?function(c,t,f,n,o){c||(c=[]);var l,h,i,s;f*=3;var p=1-n,v=o*o,m=1-o,b=m*m,y=m*o*2,x=-3*b,w=3*(b-y),g=3*(y-v),T=3*v;for(i=0;i<r.length;i++)s=r[i],l=x*s[f][t]+w*s[f+1][t]+g*s[f+2][t]+T*s[f+3][t],h=x*s[f][t+1]+w*s[f+1][t+1]+g*s[f+2][t+1]+T*s[f+3][t+1],c[i]=p*l+n*h;return c}:function(c,t,f,n,o){c||(c=[]);var l,h,i,s,p=1-n;for(i=0;i<r.length;i++)s=r[i],l=s[f+1][t]-s[f][t],h=s[f+1][t+1]-s[f][t+1],c[i]=p*l+n*h;return c}}},{}],978:[function(e,d,S){d.exports=function(r,a,u,c,t){var f=a-2,n=u-2;return c&&t?function(o,l,h){o||(o=[]);var i,s,p,v,m,b,y=Math.max(0,Math.min(Math.floor(l),f)),x=Math.max(0,Math.min(Math.floor(h),n)),w=Math.max(0,Math.min(1,l-y)),g=Math.max(0,Math.min(1,h-x));y*=3,x*=3;var T=w*w,M=T*w,P=1-w,L=P*P,I=L*P,C=g*g,k=C*g,E=1-g,R=E*E,O=R*E;for(b=0;b<r.length;b++)m=r[b],i=I*m[x][y]+3*(L*w*m[x][y+1]+P*T*m[x][y+2])+M*m[x][y+3],s=I*m[x+1][y]+3*(L*w*m[x+1][y+1]+P*T*m[x+1][y+2])+M*m[x+1][y+3],p=I*m[x+2][y]+3*(L*w*m[x+2][y+1]+P*T*m[x+2][y+2])+M*m[x+2][y+3],v=I*m[x+3][y]+3*(L*w*m[x+3][y+1]+P*T*m[x+3][y+2])+M*m[x+3][y+3],o[b]=O*i+3*(R*g*s+E*C*p)+k*v;return o}:c?function(o,l,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(l),f)),s=Math.max(0,Math.min(Math.floor(h),n)),p=Math.max(0,Math.min(1,l-i)),v=Math.max(0,Math.min(1,h-s)),m,b,y,x,w,g;i*=3;var T=p*p,M=T*p,P=1-p,L=P*P,I=L*P,C=1-v;for(w=0;w<r.length;w++)g=r[w],m=C*g[s][i]+v*g[s+1][i],b=C*g[s][i+1]+v*g[s+1][i+1],y=C*g[s][i+2]+v*g[s+1][i+1],x=C*g[s][i+3]+v*g[s+1][i+1],o[w]=I*m+3*(L*p*b+P*T*y)+M*x;return o}:t?function(o,l,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(l),f)),s=Math.max(0,Math.min(Math.floor(h),n)),p=Math.max(0,Math.min(1,l-i)),v=Math.max(0,Math.min(1,h-s)),m,b,y,x,w,g;s*=3;var T=v*v,M=T*v,P=1-v,L=P*P,I=L*P,C=1-p;for(w=0;w<r.length;w++)g=r[w],m=C*g[s][i]+p*g[s][i+1],b=C*g[s+1][i]+p*g[s+1][i+1],y=C*g[s+2][i]+p*g[s+2][i+1],x=C*g[s+3][i]+p*g[s+3][i+1],o[w]=I*m+3*(L*v*b+P*T*y)+M*x;return o}:function(o,l,h){o||(o=[]);var i=Math.max(0,Math.min(Math.floor(l),f)),s=Math.max(0,Math.min(Math.floor(h),n)),p=Math.max(0,Math.min(1,l-i)),v=Math.max(0,Math.min(1,h-s)),m,b,y,x,w=1-v,g=1-p;for(y=0;y<r.length;y++)x=r[y],m=g*x[s][i]+p*x[s][i+1],b=g*x[s+1][i]+p*x[s+1][i+1],o[y]=w*m+v*b;return o}}},{}],979:[function(e,d,S){var r=e("../../lib"),a=e("./xy_defaults"),u=e("./ab_defaults"),c=e("./attributes"),t=e("../../components/color/attributes");d.exports=function(n,o,l,h){function i(v,m){return r.coerce(n,o,c,v,m)}o._clipPathId="clip"+o.uid+"carpet";var s=i("color",t.defaultLine);if(r.coerceFont(i,"font"),i("carpet"),u(n,o,h,i,s),!o.a||!o.b){o.visible=!1;return}o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0);var p=a(n,o,i);p||(o.visible=!1),o._cheater&&i("cheaterslope")}},{"../../components/color/attributes":642,"../../lib":778,"./ab_defaults":962,"./attributes":964,"./xy_defaults":988}],980:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":841,"./attributes":964,"./calc":968,"./defaults":979,"./plot":985}],981:[function(e,d,S){d.exports=function(r,a){for(var u=r._fullData.length,c,t=0;t<u;t++){var f=r._fullData[t];if(f.index!==a.index&&f.type==="carpet"&&(c||(c=f),f.carpet===a.carpet))return f}return c}},{}],982:[function(e,d,S){d.exports=function(a,u,c){if(a.length===0)return"";var t,f=[],n=c?3:1;for(t=0;t<a.length;t+=n)f.push(a[t]+","+u[t]),c&&t<a.length-n&&(f.push("C"),f.push([a[t+1]+","+u[t+1],a[t+2]+","+u[t+2]+" "].join(" ")));return f.join(c?"":"L")}},{}],983:[function(e,d,S){var r=e("../../lib").isArrayOrTypedArray;d.exports=function(u,c,t){var f;for(r(u)?u.length>c.length&&(u=u.slice(0,c.length)):u=[],f=0;f<c.length;f++)u[f]=t(c[f]);return u}},{"../../lib":778}],984:[function(e,d,S){d.exports=function(a,u,c,t,f,n){var o=f[0]*a.dpdx(u),l=f[1]*a.dpdy(c),h=1,i=1;if(n){var s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),p=Math.sqrt(n[0]*n[0]+n[1]*n[1]),v=(f[0]*n[0]+f[1]*n[1])/s/p;i=Math.max(0,v)}var m=Math.atan2(l,o)*180/Math.PI;return m<-90?(m+=180,h=-h):m>90&&(m-=180,h=-h),{angle:m,flip:h,p:a.c2p(t,u,c),offsetMultplier:i}}},{}],985:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("./map_1d_array"),c=e("./makepath"),t=e("./orient_text"),f=e("../../lib/svg_text_utils"),n=e("../../lib"),o=n.strRotate,l=n.strTranslate,h=e("../../constants/alignment");d.exports=function(w,g,T,M){var P=g.xaxis,L=g.yaxis,I=w._fullLayout,C=I._clips;n.makeTraceGroups(M,T,"trace").each(function(k){var E=r.select(this),R=k[0],O=R.trace,N=O.aaxis,G=O.baxis,U=n.ensureSingle(E,"g","minorlayer"),Y=n.ensureSingle(E,"g","majorlayer"),z=n.ensureSingle(E,"g","boundarylayer"),B=n.ensureSingle(E,"g","labellayer");E.style("opacity",O.opacity),s(P,L,Y,N,"a",N._gridlines),s(P,L,Y,G,"b",G._gridlines),s(P,L,U,N,"a",N._minorgridlines),s(P,L,U,G,"b",G._minorgridlines),s(P,L,z,N,"a-boundary",N._boundarylines),s(P,L,z,G,"b-boundary",G._boundarylines);var H=p(w,P,L,O,R,B,N._labels,"a-label"),V=p(w,P,L,O,R,B,G._labels,"b-label");v(w,B,O,R,P,L,H,V),i(O,R,C,P,L)})};function i(x,w,g,T,M){var P,L,I,C,k=g.select("#"+x._clipPathId);k.size()||(k=g.append("clipPath").classed("carpetclip",!0));var E=n.ensureSingle(k,"path","carpetboundary"),R=w.clipsegments,O=[];for(C=0;C<R.length;C++)P=R[C],L=u([],P.x,T.c2p),I=u([],P.y,M.c2p),O.push(c(L,I,P.bicubic));var N="M"+O.join("L")+"Z";k.attr("id",x._clipPathId),E.attr("d",N)}function s(x,w,g,T,M,P){var L="const-"+M+"-lines",I=g.selectAll("."+L).data(P);I.enter().append("path").classed(L,!0).style("vector-effect","non-scaling-stroke"),I.each(function(C){var k=C,E=k.x,R=k.y,O=u([],E,x.c2p),N=u([],R,w.c2p),G="M"+c(O,N,k.smoothing),U=r.select(this);U.attr("d",G).style("stroke-width",k.width).style("stroke",k.color).style("fill","none")}),I.exit().remove()}function p(x,w,g,T,M,P,L,I){var C=P.selectAll("text."+I).data(L);C.enter().append("text").classed(I,!0);var k=0,E={};return C.each(function(R,O){var N;if(R.axis.tickangle==="auto")N=t(T,w,g,R.xy,R.dxy);else{var G=(R.axis.tickangle+180)*Math.PI/180;N=t(T,w,g,R.xy,[Math.cos(G),Math.sin(G)])}O||(E={angle:N.angle,flip:N.flip});var U=(R.endAnchor?-1:1)*N.flip,Y=r.select(this).attr({"text-anchor":U>0?"start":"end","data-notex":1}).call(a.font,R.font).text(R.text).call(f.convertToTspans,x),z=a.bBox(this);Y.attr("transform",l(N.p[0],N.p[1])+o(N.angle)+l(R.axis.labelpadding*U,z.height*.3)),k=Math.max(k,z.width+R.axis.labelpadding)}),C.exit().remove(),E.maxExtent=k,E}function v(x,w,g,T,M,P,L,I){var C,k,E,R,O=n.aggNums(Math.min,null,g.a),N=n.aggNums(Math.max,null,g.a),G=n.aggNums(Math.min,null,g.b),U=n.aggNums(Math.max,null,g.b);C=.5*(O+N),k=G,E=g.ab2xy(C,k,!0),R=g.dxyda_rough(C,k),L.angle===void 0&&n.extendFlat(L,t(g,M,P,E,g.dxydb_rough(C,k))),y(x,w,g,T,E,R,g.aaxis,M,P,L,"a-title"),C=O,k=.5*(G+U),E=g.ab2xy(C,k,!0),R=g.dxydb_rough(C,k),I.angle===void 0&&n.extendFlat(I,t(g,M,P,E,g.dxyda_rough(C,k))),y(x,w,g,T,E,R,g.baxis,M,P,I,"b-title")}var m=h.LINE_SPACING,b=(1-h.MID_SHIFT)/m+1;function y(x,w,g,T,M,P,L,I,C,k,E){var R=[];L.title.text&&R.push(L.title.text);var O=w.selectAll("text."+E).data(R),N=k.maxExtent;O.enter().append("text").classed(E,!0),O.each(function(){var G=t(g,I,C,M,P);["start","both"].indexOf(L.showticklabels)===-1&&(N=0);var U=L.title.font.size;N+=U+L.title.offset;var Y=k.angle+(k.flip<0?180:0),z=(Y-G.angle+450)%360,B=z>90&&z<270,H=r.select(this);H.text(L.title.text).call(f.convertToTspans,x),B&&(N=(-f.lineCount(H)+b)*m*U-N),H.attr("transform",l(G.p[0],G.p[1])+o(G.angle)+l(0,N)).attr("text-anchor","middle").call(a.font,L.title.font)}),O.exit().remove()}},{"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"./makepath":982,"./map_1d_array":983,"./orient_text":984,d3:169}],986:[function(e,d,S){var r=e("./constants"),a=e("../../lib/search").findBin,u=e("./compute_control_points"),c=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),f=e("./create_j_derivative_evaluator");d.exports=function(o){var l=o._a,h=o._b,i=l.length,s=h.length,p=o.aaxis,v=o.baxis,m=l[0],b=l[i-1],y=h[0],x=h[s-1],w=l[l.length-1]-l[0],g=h[h.length-1]-h[0],T=w*r.RELATIVE_CULL_TOLERANCE,M=g*r.RELATIVE_CULL_TOLERANCE;m-=T,b+=T,y-=M,x+=M,o.isVisible=function(P,L){return P>m&&P<b&&L>y&&L<x},o.isOccluded=function(P,L){return P<m||P>b||L<y||L>x},o.setScale=function(){var P=o._x,L=o._y,I=u(o._xctrl,o._yctrl,P,L,p.smoothing,v.smoothing);o._xctrl=I[0],o._yctrl=I[1],o.evalxy=c([o._xctrl,o._yctrl],i,s,p.smoothing,v.smoothing),o.dxydi=t([o._xctrl,o._yctrl],p.smoothing,v.smoothing),o.dxydj=f([o._xctrl,o._yctrl],p.smoothing,v.smoothing)},o.i2a=function(P){var L=Math.max(0,Math.floor(P[0]),i-2),I=P[0]-L;return(1-I)*l[L]+I*l[L+1]},o.j2b=function(P){var L=Math.max(0,Math.floor(P[1]),i-2),I=P[1]-L;return(1-I)*h[L]+I*h[L+1]},o.ij2ab=function(P){return[o.i2a(P[0]),o.j2b(P[1])]},o.a2i=function(P){var L=Math.max(0,Math.min(a(P,l),i-2)),I=l[L],C=l[L+1];return Math.max(0,Math.min(i-1,L+(P-I)/(C-I)))},o.b2j=function(P){var L=Math.max(0,Math.min(a(P,h),s-2)),I=h[L],C=h[L+1];return Math.max(0,Math.min(s-1,L+(P-I)/(C-I)))},o.ab2ij=function(P){return[o.a2i(P[0]),o.b2j(P[1])]},o.i2c=function(P,L){return o.evalxy([],P,L)},o.ab2xy=function(P,L,I){if(!I&&(P<l[0]||P>l[i-1]|L<h[0]||L>h[s-1]))return[!1,!1];var C=o.a2i(P),k=o.b2j(L),E=o.evalxy([],C,k);if(I){var R=0,O=0,N=[],G,U,Y,z;P<l[0]?(G=0,U=0,R=(P-l[0])/(l[1]-l[0])):P>l[i-1]?(G=i-2,U=1,R=(P-l[i-1])/(l[i-1]-l[i-2])):(G=Math.max(0,Math.min(i-2,Math.floor(C))),U=C-G),L<h[0]?(Y=0,z=0,O=(L-h[0])/(h[1]-h[0])):L>h[s-1]?(Y=s-2,z=1,O=(L-h[s-1])/(h[s-1]-h[s-2])):(Y=Math.max(0,Math.min(s-2,Math.floor(k))),z=k-Y),R&&(o.dxydi(N,G,Y,U,z),E[0]+=N[0]*R,E[1]+=N[1]*R),O&&(o.dxydj(N,G,Y,U,z),E[0]+=N[0]*O,E[1]+=N[1]*O)}return E},o.c2p=function(P,L,I){return[L.c2p(P[0]),I.c2p(P[1])]},o.p2x=function(P,L,I){return[L.p2c(P[0]),I.p2c(P[1])]},o.dadi=function(P){var L=Math.max(0,Math.min(l.length-2,P));return l[L+1]-l[L]},o.dbdj=function(P){var L=Math.max(0,Math.min(h.length-2,P));return h[L+1]-h[L]},o.dxyda=function(P,L,I,C){var k=o.dxydi(null,P,L,I,C),E=o.dadi(P,I);return[k[0]/E,k[1]/E]},o.dxydb=function(P,L,I,C){var k=o.dxydj(null,P,L,I,C),E=o.dbdj(L,C);return[k[0]/E,k[1]/E]},o.dxyda_rough=function(P,L,I){var C=w*(I||.1),k=o.ab2xy(P+C,L,!0),E=o.ab2xy(P-C,L,!0);return[(k[0]-E[0])*.5/C,(k[1]-E[1])*.5/C]},o.dxydb_rough=function(P,L,I){var C=g*(I||.1),k=o.ab2xy(P,L+C,!0),E=o.ab2xy(P,L-C,!0);return[(k[0]-E[0])*.5/C,(k[1]-E[1])*.5/C]},o.dpdx=function(P){return P._m},o.dpdy=function(P){return P._m}}},{"../../lib/search":798,"./compute_control_points":974,"./constants":975,"./create_i_derivative_evaluator":976,"./create_j_derivative_evaluator":977,"./create_spline_evaluator":978}],987:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c,t){var f,n,o,l=[],h=[],i=u[0].length,s=u.length;function p(Z,q){var J=0,ne,ve=0;return Z>0&&(ne=u[q][Z-1])!==void 0&&(ve++,J+=ne),Z<i-1&&(ne=u[q][Z+1])!==void 0&&(ve++,J+=ne),q>0&&(ne=u[q-1][Z])!==void 0&&(ve++,J+=ne),q<s-1&&(ne=u[q+1][Z])!==void 0&&(ve++,J+=ne),J/Math.max(1,ve)}var v=0;for(f=0;f<i;f++)for(n=0;n<s;n++)u[n][f]===void 0&&(l.push(f),h.push(n),u[n][f]=p(f,n)),v=Math.max(v,Math.abs(u[n][f]));if(!l.length)return u;var m,b,y,x,w,g,T,M,P,L,I,C=1e-5,k=0,E=100,R=0,O=l.length;do{for(k=0,o=0;o<O;o++){f=l[o],n=h[o];var N=0,G=0,U,Y,z,B,H,V;f===0?(H=Math.min(i-1,2),z=c[H],B=c[1],U=u[n][H],Y=u[n][1],G+=Y+(Y-U)*(c[0]-B)/(B-z),N++):f===i-1&&(H=Math.max(0,i-3),z=c[H],B=c[i-2],U=u[n][H],Y=u[n][i-2],G+=Y+(Y-U)*(c[i-1]-B)/(B-z),N++),(f===0||f===i-1)&&n>0&&n<s-1&&(m=t[n+1]-t[n],b=t[n]-t[n-1],G+=(b*u[n+1][f]+m*u[n-1][f])/(b+m),N++),n===0?(V=Math.min(s-1,2),z=t[V],B=t[1],U=u[V][f],Y=u[1][f],G+=Y+(Y-U)*(t[0]-B)/(B-z),N++):n===s-1&&(V=Math.max(0,s-3),z=t[V],B=t[s-2],U=u[V][f],Y=u[s-2][f],G+=Y+(Y-U)*(t[s-1]-B)/(B-z),N++),(n===0||n===s-1)&&f>0&&f<i-1&&(m=c[f+1]-c[f],b=c[f]-c[f-1],G+=(b*u[n][f+1]+m*u[n][f-1])/(b+m),N++),N?G/=N:(y=c[f+1]-c[f],x=c[f]-c[f-1],w=t[n+1]-t[n],g=t[n]-t[n-1],T=y*x*(y+x),M=w*g*(w+g),G=(T*(g*u[n+1][f]+w*u[n-1][f])+M*(x*u[n][f+1]+y*u[n][f-1]))/(M*(x+y)+T*(g+w))),P=G-u[n][f],L=P/v,k+=L*L,I=N?0:.85,u[n][f]+=P*(1+I)}k=Math.sqrt(k)}while(R++<E&&k>C);return r.log("Smoother converged to",k,"after",R,"iterations"),u}},{"../../lib":778}],988:[function(e,d,S){var r=e("../../lib").isArray1D;d.exports=function(u,c,t){var f=t("x"),n=f&&f.length,o=t("y"),l=o&&o.length;if(!n&&!l)return!1;if(c._cheater=!f,(!n||r(f))&&(!l||r(o))){var h=n?f.length:1/0;l&&(h=Math.min(h,o.length)),c.a&&c.a.length&&(h=Math.min(h,c.a.length)),c.b&&c.b.length&&(h=Math.min(h,c.b.length)),c._length=h}else c._length=null;return!0}},{"../../lib":778}],989:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../scattergeo/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,f=e("../../lib/extend").extendFlat,n=a.marker.line;d.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:a.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},a.geojson,{}),featureidkey:a.featureidkey,text:f({},a.text,{}),hovertext:f({},a.hovertext,{}),marker:{line:{color:f({},n.color,{dflt:t}),width:f({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:a.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:a.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},c.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:r(),showlegend:f({},c.showlegend,{dflt:!1})},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattergeo/attributes":1229}],990:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,u=e("../../components/colorscale/calc"),c=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function f(n){return n&&typeof n=="string"}d.exports=function(o,l){var h=l._length,i=new Array(h),s;l.geojson?s=function(y){return f(y)||r(y)}:s=f;for(var p=0;p<h;p++){var v=i[p]={},m=l.locations[p],b=l.z[p];s(m)&&r(b)?(v.loc=m,v.z=b):(v.loc=null,v.z=a),v.index=p}return c(i,l),u(o,l,{vals:l.z,containerStr:"",cLetter:"z"}),t(i,l),i}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"fast-isnumeric":241}],991:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");d.exports=function(t,f,n,o){function l(b,y){return r.coerce(t,f,u,b,y)}var h=l("locations"),i=l("z");if(!(h&&h.length&&r.isArrayOrTypedArray(i)&&i.length)){f.visible=!1;return}f._length=Math.min(h.length,i.length);var s=l("geojson"),p;(typeof s=="string"&&s!==""||r.isPlainObject(s))&&(p="geojson-id");var v=l("locationmode",p);v==="geojson-id"&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate");var m=l("marker.line.width");m&&l("marker.line.color"),l("marker.opacity"),a(t,f,o,l,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(f,l)}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":989}],992:[function(e,d,S){d.exports=function(a,u,c,t,f){a.location=u.location,a.z=u.z;var n=t[f];return n.fIn&&n.fIn.properties&&(a.properties=n.fIn.properties),a.ct=n.ct,a}},{}],993:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("./attributes"),u=e("../../lib").fillText;d.exports=function(f,n,o){var l=f.cd,h=l[0].trace,i=f.subplot,s,p,v,m,b=[n,o],y=[n+360,o];for(p=0;p<l.length;p++)if(s=l[p],m=!1,s._polygons){for(v=0;v<s._polygons.length;v++)s._polygons[v].contains(b)&&(m=!m),s._polygons[v].contains(y)&&(m=!m);if(m)break}if(!(!m||!s))return f.x0=f.x1=f.xa.c2p(s.ct),f.y0=f.y1=f.ya.c2p(s.ct),f.index=s.index,f.location=s.loc,f.z=s.z,f.zLabel=r.tickText(i.mockAxis,i.mockAxis.c2l(s.z),"hover").text,f.hovertemplate=s.hovertemplate,c(f,h,s),[f]};function c(t,f,n){if(!f.hovertemplate){var o=n.hi||f.hoverinfo,l=String(n.loc),h=o==="all"?a.hoverinfo.flags:o.split("+"),i=h.indexOf("name")!==-1,s=h.indexOf("location")!==-1,p=h.indexOf("z")!==-1,v=h.indexOf("text")!==-1,m=!i&&s,b=[];m?t.nameOverride=l:(i&&(t.nameOverride=f.name),s&&b.push(l)),p&&b.push(t.zLabel),v&&u(n,f,b),t.extraText=b.join("<br>")}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./attributes":989}],994:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":860,"../heatmap/colorbar":1068,"./attributes":989,"./calc":990,"./defaults":991,"./event_data":992,"./hover":993,"./plot":995,"./select":996,"./style":997}],995:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../lib/geo_location_utils"),c=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,f=e("./style").style;function n(l,h,i){var s=h.layers.backplot.select(".choroplethlayer");a.makeTraceGroups(s,i,"trace choropleth").each(function(p){var v=r.select(this),m=v.selectAll("path.choroplethlocation").data(a.identity);m.enter().append("path").classed("choroplethlocation",!0),m.exit().remove(),f(l,p)})}function o(l,h){for(var i=l[0].trace,s=h[i.geo],p=s._subplot,v=i.locationmode,m=i._length,b=v==="geojson-id"?u.extractTraceFeature(l):c(i,p.topojson),y=[],x=[],w=0;w<m;w++){var g=l[w],T=v==="geojson-id"?g.fOut:u.locationToFeature(v,g.loc,b);if(T){g.geojson=T,g.ct=T.properties.ct,g._polygons=u.feature2polygons(T);var M=u.computeBbox(T);y.push(M[0],M[2]),x.push(M[1],M[3])}else g.geojson=null}if(s.fitbounds==="geojson"&&v==="geojson-id"){var P=u.computeBbox(u.getTraceGeojson(i));y=[P[0],P[2]],x=[P[1],P[3]]}var L={padded:!0};i._extremes.lon=t(s.lonaxis._ax,y,L),i._extremes.lat=t(s.lataxis._ax,x,L)}d.exports={calcGeoJSON:o,plot:n}},{"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"./style":997,d3:169}],996:[function(e,d,S){d.exports=function(a,u){var c=a.cd,t=a.xaxis,f=a.yaxis,n=[],o,l,h,i,s;if(u===!1)for(o=0;o<c.length;o++)c[o].selected=0;else for(o=0;o<c.length;o++)l=c[o],h=l.ct,h&&(i=t.c2p(h),s=f.c2p(h),u.contains([i,s],null,o,a)?(n.push({pointNumber:o,lon:h[0],lat:h[1]}),l.selected=1):l.selected=0);return n}},{}],997:[function(e,d,S){var r=e("d3"),a=e("../../components/color"),u=e("../../components/drawing"),c=e("../../components/colorscale");function t(o,l){l&&f(o,l)}function f(o,l){var h=l[0].trace,i=l[0].node3,s=i.selectAll(".choroplethlocation"),p=h.marker||{},v=p.line||{},m=c.makeColorScaleFuncFromTrace(h);s.each(function(b){r.select(this).attr("fill",m(b.z)).call(a.stroke,b.mlc||v.color).call(u.dashLine,"",b.mlw||v.width||0).style("opacity",p.opacity)}),u.selectedPointStyle(s,h,o)}function n(o,l){var h=l[0].node3,i=l[0].trace;i.selectedpoints?u.selectedPointStyle(h.selectAll(".choroplethlocation"),i,o):f(o,l)}d.exports={style:t,styleOnSelect:n}},{"../../components/color":643,"../../components/colorscale":655,"../../components/drawing":665,d3:169}],998:[function(e,d,S){var r=e("../choropleth/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;d.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},r.featureidkey,{}),below:{valType:"string",editType:"plot"},text:r.text,hovertext:r.hovertext,marker:{line:{color:t({},r.marker.line.color,{editType:"plot"}),width:t({},r.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},r.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},r.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},r.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:r.hoverinfo,hovertemplate:u({},{keys:["properties"]}),showlegend:t({},c.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../choropleth/attributes":989}],999:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../components/colorscale"),c=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,f=e("../../lib/geo_location_utils");function n(l){var h=l[0].trace,i=h.visible===!0&&h._length!==0,s={layout:{visibility:"none"},paint:{}},p={layout:{visibility:"none"},paint:{}},v=h._opts={fill:s,line:p,geojson:t()};if(!i)return v;var m=f.extractTraceFeature(l);if(!m)return v;var b=u.makeColorScaleFuncFromTrace(h),y=h.marker,x=y.line||{},w;a.isArrayOrTypedArray(y.opacity)&&(w=function(k){var E=k.mo;return r(E)?+a.constrain(E,0,1):0});var g;a.isArrayOrTypedArray(x.color)&&(g=function(k){return k.mlc});var T;a.isArrayOrTypedArray(x.width)&&(T=function(k){return k.mlw});for(var M=0;M<l.length;M++){var P=l[M],L=P.fOut;if(L){var I=L.properties;I.fc=b(P.z),w&&(I.mo=w(P)),g&&(I.mlc=g(P)),T&&(I.mlw=T(P)),P.ct=I.ct,P._polygons=f.feature2polygons(L)}}var C=w?{type:"identity",property:"mo"}:y.opacity;return a.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":C}),a.extendFlat(p.paint,{"line-color":g?{type:"identity",property:"mlc"}:x.color,"line-width":T?{type:"identity",property:"mlw"}:x.width,"line-opacity":C}),s.layout.visibility="visible",p.layout.visibility="visible",v.geojson={type:"FeatureCollection",features:m},o(l),v}function o(l){var h=l[0].trace,i=h._opts,s;if(h.selectedpoints){for(var p=c.makeSelectedPointStyleFns(h),v=0;v<l.length;v++){var m=l[v];m.fOut&&(m.fOut.properties.mo2=p.selectedOpacityFn(m))}s={type:"identity",property:"mo2"}}else s=a.isArrayOrTypedArray(h.marker.opacity)?{type:"identity",property:"mo"}:h.marker.opacity;return a.extendFlat(i.fill.paint,{"fill-opacity":s}),a.extendFlat(i.line.paint,{"line-opacity":s}),i}d.exports={convert:n,convertOnSelect:o}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1e3:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");d.exports=function(t,f,n,o){function l(v,m){return r.coerce(t,f,u,v,m)}var h=l("locations"),i=l("z"),s=l("geojson");if(!r.isArrayOrTypedArray(h)||!h.length||!r.isArrayOrTypedArray(i)||!i.length||!(typeof s=="string"&&s!==""||r.isPlainObject(s))){f.visible=!1;return}l("featureidkey"),f._length=Math.min(h.length,i.length),l("below"),l("text"),l("hovertext"),l("hovertemplate");var p=l("marker.line.width");p&&l("marker.line.color"),l("marker.opacity"),a(t,f,o,l,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(f,l)}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":998}],1001:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(r,a){if(a){var u=a[0].trace;u._glTrace.updateOnSelect(a)}},getBelow:function(r,a){for(var u=a.getMapLayers(),c=u.length-2;c>=0;c--){var t=u[c].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var f=c+1;f<u.length;f++)if(t=u[f].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":885,"../choropleth/calc":990,"../choropleth/event_data":992,"../choropleth/hover":993,"../choropleth/select":996,"../heatmap/colorbar":1068,"./attributes":998,"./defaults":1e3,"./plot":1002}],1002:[function(e,d,S){var r=e("./convert").convert,a=e("./convert").convertOnSelect,u=e("../../plots/mapbox/constants").traceLayerPrefix;function c(f,n){this.type="choroplethmapbox",this.subplot=f,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",u+n+"-fill"],["line",u+n+"-line"]],this.below=null}var t=c.prototype;t.update=function(f){this._update(r(f))},t.updateOnSelect=function(f){this._update(a(f))},t._update=function(f){var n=this.subplot,o=this.layerList,l=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(f.geojson),l!==this.below&&(this._removeLayers(),this._addLayers(f,l),this.below=l);for(var h=0;h<o.length;h++){var i=o[h],s=i[0],p=i[1],v=f[s];n.setOptions(p,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&n.setOptions(p,"setPaintProperty",v.paint)}},t._addLayers=function(f,n){for(var o=this.subplot,l=this.layerList,h=this.sourceId,i=0;i<l.length;i++){var s=l[i],p=s[0],v=f[p];o.addLayer({type:p,id:s[1],source:h,layout:v.layout,paint:v.paint},n)}},t._removeLayers=function(){for(var f=this.subplot.map,n=this.layerList,o=n.length-1;o>=0;o--)f.removeLayer(n[o][1])},t.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},d.exports=function(n,o){var l=o[0].trace,h=new c(n,l.uid),i=h.sourceId,s=r(o),p=h.below=n.belowLookup["trace-"+l.uid];return n.map.addSource(i,{type:"geojson",data:s.geojson}),h._addLayers(s,p),o[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":883,"./convert":999}],1003:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["norm"]}),showlegend:t({},c.showlegend,{dflt:!1})};t(f,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(o){f[o]=u[o]}),f.hoverinfo=t({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,d.exports=f},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1004:[function(e,d,S){var r=e("../../components/colorscale/calc");d.exports=function(u,c){for(var t=c.u,f=c.v,n=c.w,o=Math.min(c.x.length,c.y.length,c.z.length,t.length,f.length,n.length),l=-1/0,h=1/0,i=0;i<o;i++){var s=t[i],p=f[i],v=n[i],m=Math.sqrt(s*s+p*p+v*v);l=Math.max(l,m),h=Math.min(h,m)}c._len=o,c._normMax=l,r(u,c,{vals:[h,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1005:[function(e,d,S){var r=e("gl-cone3d"),a=e("gl-cone3d").createConeMesh,u=e("../../lib").simpleMap,c=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,f=e("../../plots/gl3d/zip3");function n(v,m){this.scene=v,this.uid=m,this.mesh=null,this.data=null}var o=n.prototype;o.handlePick=function(v){if(v.object===this.mesh){var m=v.index=v.data.index,b=this.data.x[m],y=this.data.y[m],x=this.data.z[m],w=this.data.u[m],g=this.data.v[m],T=this.data.w[m];v.traceCoordinate=[b,y,x,w,g,T,Math.sqrt(w*w+g*g+T*T)];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&M[m]!==void 0?v.textLabel=M[m]:M&&(v.textLabel=M),!0}};var l={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},i={tip:1,tail:1,cm:.75,center:.5};function s(v,m){var b=v.fullSceneLayout,y=v.dataScale,x={};function w(P,L){var I=b[L],C=y[l[L]];return u(P,function(k){return I.d2l(k)*C})}x.vectors=f(w(m.u,"xaxis"),w(m.v,"yaxis"),w(m.w,"zaxis"),m._len),x.positions=f(w(m.x,"xaxis"),w(m.y,"yaxis"),w(m.z,"zaxis"),m._len);var g=t(m);x.colormap=c(m),x.vertexIntensityBounds=[g.min/m._normMax,g.max/m._normMax],x.coneOffset=h[m.anchor],m.sizemode==="scaled"?x.coneSize=m.sizeref||.5:x.coneSize=m.sizeref&&m._normMax?m.sizeref/m._normMax:.5;var T=r(x),M=m.lightposition;return T.lightPosition=[M.x,M.y,M.z],T.ambient=m.lighting.ambient,T.diffuse=m.lighting.diffuse,T.specular=m.lighting.specular,T.roughness=m.lighting.roughness,T.fresnel=m.lighting.fresnel,T.opacity=m.opacity,m._pad=i[m.anchor]*T.vectorScale*T.coneScale*m._normMax,T}o.update=function(v){this.data=v;var m=s(this.scene,v);this.mesh.update(m)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(v,m){var b=v.glplot.gl,y=s(v,m),x=a(b,y),w=new n(v,m.uid);return w.mesh=x,w.data=m,x._trace=w,v.glplot.add(x),w}d.exports=p},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-cone3d":260}],1006:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");d.exports=function(t,f,n,o){function l(b,y){return r.coerce(t,f,u,b,y)}var h=l("u"),i=l("v"),s=l("w"),p=l("x"),v=l("y"),m=l("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!p||!p.length||!v||!v.length||!m||!m.length){f.visible=!1;return}l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),a(t,f,o,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),f._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1003}],1007:[function(e,d,S){d.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(r,a){return r.norm=a.traceCoordinate[6],r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1003,"./calc":1004,"./convert":1005,"./defaults":1006}],1008:[function(e,d,S){var r=e("../heatmap/attributes"),a=e("../scatter/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../components/drawing/attributes").dash,t=e("../../plots/font_attributes"),f=e("../../lib/extend").extendFlat,n=e("../../constants/filter_ops"),o=n.COMPARISON_OPS2,l=n.INTERVAL_OPS;e("../../constants/docs").FORMAT_LINK;var h=a.line;d.exports=f({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate,hoverongaps:r.hoverongaps,connectgaps:f({},r.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(o).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:f({},h.smoothing,{}),editType:"plot"}},u("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/filter_ops":749,"../../lib/extend":768,"../../plots/font_attributes":856,"../heatmap/attributes":1065,"../scatter/attributes":1187}],1009:[function(e,d,S){var r=e("../../components/colorscale"),a=e("../heatmap/calc"),u=e("./set_contours"),c=e("./end_plus");d.exports=function(f,n){var o=a(f,n),l=o[0].z;u(n,l);var h=n.contours,i=r.extractOpts(n),s;if(h.coloring==="heatmap"&&i.auto&&n.autocontour===!1){var p=h.start,v=c(h),m=h.size||1,b=Math.floor((v-p)/m)+1;isFinite(m)||(m=1,b=1);var y=p-m/2,x=y+b*m;s=[y,x]}else s=l;return r.calc(f,n,{vals:s,cLetter:"z"}),o}},{"../../components/colorscale":655,"../heatmap/calc":1066,"./end_plus":1019,"./set_contours":1027}],1010:[function(e,d,S){d.exports=function(r,a){var u=r[0],c=u.z,t;switch(a.type){case"levels":var f=Math.min(c[0][0],c[0][1]);for(t=0;t<r.length;t++){var n=r[t];n.prefixBoundary=!n.edgepaths.length&&(f>n.level||n.starts.length&&f===n.level)}break;case"constraint":if(u.prefixBoundary=!1,u.edgepaths.length)return;var o=u.x.length,l=u.y.length,h=-1/0,i=1/0;for(t=0;t<l;t++)i=Math.min(i,c[t][0]),i=Math.min(i,c[t][o-1]),h=Math.max(h,c[t][0]),h=Math.max(h,c[t][o-1]);for(t=1;t<o-1;t++)i=Math.min(i,c[0][t]),i=Math.min(i,c[l-1][t]),h=Math.max(h,c[0][t]),h=Math.max(h,c[l-1][t]);var s=a.value,p,v;switch(a._operation){case">":s>h&&(u.prefixBoundary=!0);break;case"<":(s<i||u.starts.length&&s===i)&&(u.prefixBoundary=!0);break;case"[]":p=Math.min(s[0],s[1]),v=Math.max(s[0],s[1]),(v<i||p>h||u.starts.length&&v===i)&&(u.prefixBoundary=!0);break;case"][":p=Math.min(s[0],s[1]),v=Math.max(s[0],s[1]),p<i&&v>h&&(u.prefixBoundary=!0);break}break}}},{}],1011:[function(e,d,S){var r=e("../../components/colorscale"),a=e("./make_color_map"),u=e("./end_plus");function c(t,f,n){var o=f.contours,l=f.line,h=o.size||1,i=o.coloring,s=a(f,{isColorbar:!0});if(i==="heatmap"){var p=r.extractOpts(f);n._fillgradient=p.reversescale?r.flipScale(p.colorscale):p.colorscale,n._zrange=[p.min,p.max]}else i==="fill"&&(n._fillcolor=s);n._line={color:i==="lines"?s:l.color,width:o.showlines!==!1?l.width:0,dash:l.dash},n._levels={start:o.start,end:u(o),size:h}}d.exports={min:"zmin",max:"zmax",calc:c}},{"../../components/colorscale":655,"./end_plus":1019,"./make_color_map":1024}],1012:[function(e,d,S){d.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1013:[function(e,d,S){var r=e("fast-isnumeric"),a=e("./label_defaults"),u=e("../../components/color"),c=u.addOpacity,t=u.opacity,f=e("../../constants/filter_ops"),n=f.CONSTRAINT_REDUCTION,o=f.COMPARISON_OPS2;d.exports=function(i,s,p,v,m,b){var y=s.contours,x,w,g,T=p("contours.operation");if(y._operation=n[T],l(p,y),T==="="?x=y.showlines=!0:(x=p("contours.showlines"),g=p("fillcolor",c((i.line||{}).color||m,.5))),x){var M=g&&t(g)?c(s.fillcolor,1):m;w=p("line.color",M),p("line.width",2),p("line.dash")}p("line.smoothing"),a(p,v,w,b)};function l(h,i){var s;o.indexOf(i.operation)===-1?(h("contours.value",[0,1]),Array.isArray(i.value)?i.value.length>2?i.value=i.value.slice(2):i.length===0?i.value=[0,1]:i.length<2?(s=parseFloat(i.value[0]),i.value=[s,s+1]):i.value=[parseFloat(i.value[0]),parseFloat(i.value[1])]:r(i.value)&&(s=parseFloat(i.value),i.value=[s,s+1])):(h("contours.value",0),r(i.value)||(Array.isArray(i.value)?i.value=parseFloat(i.value[0]):i.value=0))}},{"../../components/color":643,"../../constants/filter_ops":749,"./label_defaults":1023,"fast-isnumeric":241}],1014:[function(e,d,S){var r=e("../../constants/filter_ops"),a=e("fast-isnumeric");d.exports={"[]":c("[]"),"][":c("]["),">":t(">"),"<":t("<"),"=":t("=")};function u(f,n){var o=Array.isArray(n),l;function h(i){return a(i)?+i:null}return r.COMPARISON_OPS2.indexOf(f)!==-1?l=h(o?n[0]:n):r.INTERVAL_OPS.indexOf(f)!==-1?l=o?[h(n[0]),h(n[1])]:[h(n),h(n)]:r.SET_OPS.indexOf(f)!==-1&&(l=o?n.map(h):[h(n)]),l}function c(f){return function(n){n=u(f,n);var o=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return{start:o,end:l,size:l-o}}}function t(f){return function(n){return n=u(f,n),{start:n,end:1/0,size:1/0}}}},{"../../constants/filter_ops":749,"fast-isnumeric":241}],1015:[function(e,d,S){d.exports=function(a,u,c,t){var f=t("contours.start"),n=t("contours.end"),o=f===!1||n===!1,l=c("contours.size"),h;o?h=u.autocontour=!0:h=c("autocontour",!1),(h||!l)&&c("ncontours")}},{}],1016:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){var t,f,n,o=function(i){return i.reverse()},l=function(i){return i};switch(c){case"=":case"<":return u;case">":for(u.length!==1&&r.warn("Contour data invalid for the specified inequality operation."),f=u[0],t=0;t<f.edgepaths.length;t++)f.edgepaths[t]=o(f.edgepaths[t]);for(t=0;t<f.paths.length;t++)f.paths[t]=o(f.paths[t]);for(t=0;t<f.starts.length;t++)f.starts[t]=o(f.starts[t]);return u;case"][":var h=o;o=l,l=h;case"[]":for(u.length!==2&&r.warn("Contour data invalid for the specified inequality range operation."),f=a(u[0]),n=a(u[1]),t=0;t<f.edgepaths.length;t++)f.edgepaths[t]=o(f.edgepaths[t]);for(t=0;t<f.paths.length;t++)f.paths[t]=o(f.paths[t]);for(t=0;t<f.starts.length;t++)f.starts[t]=o(f.starts[t]);for(;n.edgepaths.length;)f.edgepaths.push(l(n.edgepaths.shift()));for(;n.paths.length;)f.paths.push(l(n.paths.shift()));for(;n.starts.length;)f.starts.push(l(n.starts.shift()));return[f]}};function a(u){return r.extendFlat({},u,{edgepaths:r.extendDeep([],u.edgepaths),paths:r.extendDeep([],u.paths),starts:r.extendDeep([],u.starts)})}},{"../../lib":778}],1017:[function(e,d,S){var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),u=e("../scatter/period_defaults"),c=e("./constraint_defaults"),t=e("./contours_defaults"),f=e("./style_defaults"),n=e("./attributes");d.exports=function(l,h,i,s){function p(y,x){return r.coerce(l,h,n,y,x)}function v(y){return r.coerce2(l,h,n,y)}var m=a(l,h,p,s);if(!m){h.visible=!1;return}u(l,h,s,p),p("text"),p("hovertext"),p("hovertemplate"),p("hoverongaps");var b=p("contours.type")==="constraint";p("connectgaps",r.isArray1D(h.z)),b?c(l,h,p,s,i):(t(l,h,p,v),f(l,h,p,s))}},{"../../lib":778,"../heatmap/xyz_defaults":1079,"../scatter/period_defaults":1207,"./attributes":1008,"./constraint_defaults":1013,"./contours_defaults":1015,"./style_defaults":1029}],1018:[function(e,d,S){var r=e("../../lib"),a=e("./constraint_mapping"),u=e("./end_plus");d.exports=function(t,f,n){for(var o=t.type==="constraint"?a[t._operation](t.value):t,l=o.size,h=[],i=u(o),s=n.trace._carpetTrace,p=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:f.xaxis,yaxis:f.yaxis,x:n.x,y:n.y},v=o.start;v<i;v+=l)if(h.push(r.extendFlat({level:v,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},p)),h.length>1e3){r.warn("Too many contours, clipping at 1000",t);break}return h}},{"../../lib":778,"./constraint_mapping":1014,"./end_plus":1019}],1019:[function(e,d,S){d.exports=function(a){return a.end+a.size/1e6}},{}],1020:[function(e,d,S){var r=e("../../lib"),a=e("./constants");d.exports=function(l,h,i){var s,p,v,m,b;for(h=h||.01,i=i||.01,v=0;v<l.length;v++){for(m=l[v],b=0;b<m.starts.length;b++)p=m.starts[b],t(m,p,"edge",h,i);for(s=0;Object.keys(m.crossings).length&&s<1e4;)s++,p=Object.keys(m.crossings)[0].split(",").map(Number),t(m,p,void 0,h,i);s===1e4&&r.log("Infinite loop in contour?")}};function u(o,l,h,i){return Math.abs(o[0]-l[0])<h&&Math.abs(o[1]-l[1])<i}function c(o,l){var h=o[2]-l[2],i=o[3]-l[3];return Math.sqrt(h*h+i*i)}function t(o,l,h,i,s){var p=l.join(","),v=o.crossings[p],m=f(v,h,l),b=[n(o,l,[-m[0],-m[1]])],y=o.z.length,x=o.z[0].length,w=l.slice(),g=m.slice(),T;for(T=0;T<1e4;T++){if(v>20?(v=a.CHOOSESADDLE[v][(m[0]||m[1])<0?0:1],o.crossings[p]=a.SADDLEREMAINDER[v]):delete o.crossings[p],m=a.NEWDELTA[v],!m){r.log("Found bad marching index:",v,l,o.level);break}b.push(n(o,l,m)),l[0]+=m[0],l[1]+=m[1],p=l.join(","),u(b[b.length-1],b[b.length-2],i,s)&&b.pop();var M=m[0]&&(l[0]<0||l[0]>x-2)||m[1]&&(l[1]<0||l[1]>y-2),P=l[0]===w[0]&&l[1]===w[1]&&m[0]===g[0]&&m[1]===g[1];if(P||h&&M)break;v=o.crossings[p]}T===1e4&&r.log("Infinite loop in contour?");var L=u(b[0],b[b.length-1],i,s),I=0,C=.2*o.smoothing,k=[],E=0,R,O,N,G,U,Y,z,B,H,V,Z;for(T=1;T<b.length;T++)z=c(b[T],b[T-1]),I+=z,k.push(z);var q=I/k.length*C;function J($){return b[$%b.length]}for(T=b.length-2;T>=E;T--)if(R=k[T],R<q){for(N=0,O=T-1;O>=E&&R+k[O]<q;O--)R+=k[O];if(L&&T===b.length-2)for(N=0;N<O&&R+k[N]<q;N++)R+=k[N];U=T-O+N+1,Y=Math.floor((T+O+N+2)/2),!L&&T===b.length-2?G=b[b.length-1]:!L&&O===-1?G=b[0]:U%2?G=J(Y):G=[(J(Y)[0]+J(Y+1)[0])/2,(J(Y)[1]+J(Y+1)[1])/2],b.splice(O+1,T-O+1,G),T=O+1,N&&(E=N),L&&(T===b.length-2?b[N]=b[b.length-1]:T===0&&(b[b.length-1]=b[0]))}for(b.splice(0,E),T=0;T<b.length;T++)b[T].length=2;if(!(b.length<2))if(L)b.pop(),o.paths.push(b);else{h||r.log("Unclosed interior contour?",o.level,w.join(","),b.join("L"));var ne=!1;for(B=0;B<o.edgepaths.length;B++)if(V=o.edgepaths[B],!ne&&u(V[0],b[b.length-1],i,s)){b.pop(),ne=!0;var ve=!1;for(H=0;H<o.edgepaths.length;H++)if(Z=o.edgepaths[H],u(Z[Z.length-1],b[0],i,s)){ve=!0,b.shift(),o.edgepaths.splice(B,1),H===B?o.paths.push(b.concat(Z)):(H>B&&H--,o.edgepaths[H]=Z.concat(b,V));break}ve||(o.edgepaths[B]=b.concat(V))}for(B=0;B<o.edgepaths.length&&!ne;B++)V=o.edgepaths[B],u(V[V.length-1],b[0],i,s)&&(b.shift(),o.edgepaths[B]=V.concat(b),ne=!0);ne||o.edgepaths.push(b)}}function f(o,l,h){var i=0,s=0;return o>20&&l?o===208||o===1114?i=h[0]===0?1:-1:s=h[1]===0?1:-1:a.BOTTOMSTART.indexOf(o)!==-1?s=1:a.LEFTSTART.indexOf(o)!==-1?i=1:a.TOPSTART.indexOf(o)!==-1?s=-1:i=-1,[i,s]}function n(o,l,h){var i=l[0]+Math.max(h[0],0),s=l[1]+Math.max(h[1],0),p=o.z[s][i],v=o.xaxis,m=o.yaxis;if(h[1]){var b=(o.level-p)/(o.z[s][i+1]-p);return[v.c2p((1-b)*o.x[i]+b*o.x[i+1],!0),m.c2p(o.y[s],!0),i+b,s]}else{var y=(o.level-p)/(o.z[s+1][i]-p);return[v.c2p(o.x[i],!0),m.c2p((1-y)*o.y[s]+y*o.y[s+1],!0),i,s+y]}}},{"../../lib":778,"./constants":1012}],1021:[function(e,d,S){var r=e("../../components/color"),a=e("../heatmap/hover");d.exports=function(c,t,f,n,o){var l=a(c,t,f,n,o,!0);return l&&l.forEach(function(h){var i=h.trace;i.contours.type==="constraint"&&(i.fillcolor&&r.opacity(i.fillcolor)?h.color=r.addOpacity(i.fillcolor,1):i.contours.showlines&&r.opacity(i.line.color)&&(h.color=r.addOpacity(i.line.color,1)))}),l}},{"../../components/color":643,"../heatmap/hover":1072}],1022:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1008,"./calc":1009,"./colorbar":1011,"./defaults":1017,"./hover":1021,"./plot":1026,"./style":1028}],1023:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c,t,f){f||(f={});var n=u("contours.showlabels");if(n){var o=c.font;r.coerceFont(u,"contours.labelfont",{family:o.family,size:o.size,color:t}),u("contours.labelformat")}f.hasHover!==!1&&u("zhoverformat")}},{"../../lib":778}],1024:[function(e,d,S){var r=e("d3"),a=e("../../components/colorscale"),u=e("./end_plus");d.exports=function(t){var f=t.contours,n=f.start,o=u(f),l=f.size||1,h=Math.floor((o-n)/l)+1,i=f.coloring==="lines"?0:1,s=a.extractOpts(t);isFinite(l)||(l=1,h=1);var p=s.reversescale?a.flipScale(s.colorscale):s.colorscale,v=p.length,m=new Array(v),b=new Array(v),y,x;if(f.coloring==="heatmap"){var w=s.min,g=s.max;for(x=0;x<v;x++)y=p[x],m[x]=y[0]*(g-w)+w,b[x]=y[1];var T=r.extent([w,g,f.start,f.start+l*(h-1)]),M=T[w<g?0:1],P=T[w<g?1:0];M!==w&&(m.splice(0,0,M),b.splice(0,0,b[0])),P!==g&&(m.push(P),b.push(b[b.length-1]))}else for(x=0;x<v;x++)y=p[x],m[x]=(y[0]*(h+i-1)-i/2)*l+n,b[x]=y[1];return a.makeColorScaleFunc({domain:m,range:b},{noNumericCheck:!0})}},{"../../components/colorscale":655,"./end_plus":1019,d3:169}],1025:[function(e,d,S){var r=e("./constants");d.exports=function(c){var t=c[0].z,f=t.length,n=t[0].length,o=f===2||n===2,l,h,i,s,p,v,m,b,y;for(h=0;h<f-1;h++)for(s=[],h===0&&(s=s.concat(r.BOTTOMSTART)),h===f-2&&(s=s.concat(r.TOPSTART)),l=0;l<n-1;l++)for(i=s.slice(),l===0&&(i=i.concat(r.LEFTSTART)),l===n-2&&(i=i.concat(r.RIGHTSTART)),p=l+","+h,v=[[t[h][l],t[h][l+1]],[t[h+1][l],t[h+1][l+1]]],y=0;y<c.length;y++)b=c[y],m=a(b.level,v),m&&(b.crossings[p]=m,i.indexOf(m)!==-1&&(b.starts.push([l,h]),o&&i.indexOf(m,i.indexOf(m)+1)!==-1&&b.starts.push([l,h])))};function a(u,c){var t=(c[0][0]>u?0:1)+(c[0][1]>u?0:2)+(c[1][1]>u?0:4)+(c[1][0]>u?0:8);if(t===5||t===10){var f=(c[0][0]+c[0][1]+c[1][0]+c[1][1])/4;return u>f?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":1012}],1026:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),f=e("../../plots/cartesian/axes"),n=e("../../plots/cartesian/set_convert"),o=e("../heatmap/plot"),l=e("./make_crossings"),h=e("./find_all_paths"),i=e("./empty_pathinfo"),s=e("./convert_to_constraints"),p=e("./close_boundaries"),v=e("./constants"),m=v.LABELOPTIMIZER;S.plot=function(L,I,C,k){var E=I.xaxis,R=I.yaxis;a.makeTraceGroups(k,C,"contour").each(function(O){var N=r.select(this),G=O[0],U=G.trace,Y=G.x,z=G.y,B=U.contours,H=i(B,I,G),V=a.ensureSingle(N,"g","heatmapcoloring"),Z=[];B.coloring==="heatmap"&&(Z=[O]),o(L,I,Z,V),l(H),h(H);var q=E.c2p(Y[0],!0),J=E.c2p(Y[Y.length-1],!0),ne=R.c2p(z[0],!0),ve=R.c2p(z[z.length-1],!0),$=[[q,ve],[J,ve],[J,ne],[q,ne]],j=H;B.type==="constraint"&&(j=s(H,B._operation)),b(N,$,B),y(N,j,$,B),w(N,H,L,G,B),T(N,I,L,G,$)})};function b(P,L,I){var C=a.ensureSingle(P,"g","contourbg"),k=C.selectAll("path").data(I.coloring==="fill"?[0]:[]);k.enter().append("path"),k.exit().remove(),k.attr("d","M"+L.join("L")+"Z").style("stroke","none")}function y(P,L,I,C){var k=C.coloring==="fill"||C.type==="constraint"&&C._operation!=="=",E="M"+I.join("L")+"Z";k&&p(L,C);var R=a.ensureSingle(P,"g","contourfill"),O=R.selectAll("path").data(k?L:[]);O.enter().append("path"),O.exit().remove(),O.each(function(N){var G=(N.prefixBoundary?E:"")+x(N,I);G?r.select(this).attr("d",G).style("stroke","none"):r.select(this).remove()})}function x(P,L){var I="",C=0,k=P.edgepaths.map(function(q,J){return J}),E=!0,R,O,N,G,U,Y;function z(q){return Math.abs(q[1]-L[0][1])<.01}function B(q){return Math.abs(q[1]-L[2][1])<.01}function H(q){return Math.abs(q[0]-L[0][0])<.01}function V(q){return Math.abs(q[0]-L[2][0])<.01}for(;k.length;){for(Y=u.smoothopen(P.edgepaths[C],P.smoothing),I+=E?Y:Y.replace(/^M/,"L"),k.splice(k.indexOf(C),1),R=P.edgepaths[C][P.edgepaths[C].length-1],G=-1,N=0;N<4;N++){if(!R){a.log("Missing end?",C,P);break}for(z(R)&&!V(R)?O=L[1]:H(R)?O=L[0]:B(R)?O=L[3]:V(R)&&(O=L[2]),U=0;U<P.edgepaths.length;U++){var Z=P.edgepaths[U][0];Math.abs(R[0]-O[0])<.01?Math.abs(R[0]-Z[0])<.01&&(Z[1]-R[1])*(O[1]-Z[1])>=0&&(O=Z,G=U):Math.abs(R[1]-O[1])<.01?Math.abs(R[1]-Z[1])<.01&&(Z[0]-R[0])*(O[0]-Z[0])>=0&&(O=Z,G=U):a.log("endpt to newendpt is not vert. or horz.",R,O,Z)}if(R=O,G>=0)break;I+="L"+O}if(G===P.edgepaths.length){a.log("unclosed perimeter path");break}C=G,E=k.indexOf(C)===-1,E&&(C=k[0],I+="Z")}for(C=0;C<P.paths.length;C++)I+=u.smoothclosed(P.paths[C],P.smoothing);return I}function w(P,L,I,C,k){var E=a.ensureSingle(P,"g","contourlines"),R=k.showlines!==!1,O=k.showlabels,N=R&&O,G=S.createLines(E,R||O,L),U=S.createLineClip(E,N,I,C.trace.uid),Y=P.selectAll("g.contourlabels").data(O?[0]:[]);if(Y.exit().remove(),Y.enter().append("g").classed("contourlabels",!0),O){var z=[],B=[];a.clearLocationCache();var H=S.labelFormatter(I,C),V=u.tester.append("text").attr("data-notex",1).call(u.font,k.labelfont),Z=L[0].xaxis,q=L[0].yaxis,J=Z._length,ne=q._length,ve=Z.range,$=q.range,j=a.aggNums(Math.min,null,C.x),ae=a.aggNums(Math.max,null,C.x),ie=a.aggNums(Math.min,null,C.y),te=a.aggNums(Math.max,null,C.y),re=Math.max(Z.c2p(j,!0),0),ce=Math.min(Z.c2p(ae,!0),J),pe=Math.max(q.c2p(te,!0),0),fe=Math.min(q.c2p(ie,!0),ne),se={};ve[0]<ve[1]?(se.left=re,se.right=ce):(se.left=ce,se.right=re),$[0]<$[1]?(se.top=pe,se.bottom=fe):(se.top=fe,se.bottom=pe),se.middle=(se.top+se.bottom)/2,se.center=(se.left+se.right)/2,z.push([[se.left,se.top],[se.right,se.top],[se.right,se.bottom],[se.left,se.bottom]]);var de=Math.sqrt(J*J+ne*ne),be=v.LABELDISTANCE*de/Math.max(1,L.length/v.LABELINCREASE);G.each(function(xe){var ke=S.calcTextOpts(xe.level,H,V,I);r.select(this).selectAll("path").each(function(){var Re=this,Ke=a.getVisibleSegment(Re,se,ke.height/2);if(!!Ke&&!(Ke.len<(ke.width+ke.height)*v.LABELMIN))for(var ze=Math.min(Math.ceil(Ke.len/be),v.LABELMAX),Je=0;Je<ze;Je++){var qe=S.findBestTextLocation(Re,Ke,ke,B,se);if(!qe)break;S.addLabelData(qe,ke,B,z)}})}),V.remove(),S.drawLabels(Y,B,I,U,N?z:null)}O&&!R&&G.remove()}S.createLines=function(P,L,I){var C=I[0].smoothing,k=P.selectAll("g.contourlevel").data(L?I:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),L){var E=k.selectAll("path.openline").data(function(O){return O.pedgepaths||O.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(O){return u.smoothopen(O,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var R=k.selectAll("path.closedline").data(function(O){return O.ppaths||O.paths});R.exit().remove(),R.enter().append("path").classed("closedline",!0),R.attr("d",function(O){return u.smoothclosed(O,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},S.createLineClip=function(P,L,I,C){var k=I._fullLayout._clips,E=L?"clipline"+C:null,R=k.selectAll("#"+E).data(L?[0]:[]);return R.exit().remove(),R.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),u.setClipUrl(P,E,I),R},S.labelFormatter=function(P,L){var I=P._fullLayout,C=L.trace,k=C.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)E.tickformat=k.labelformat,n(E,I);else{var R=c.extractOpts(C);if(R&&R.colorbar&&R.colorbar._axis)E=R.colorbar._axis;else{if(k.type==="constraint"){var O=k.value;Array.isArray(O)?E.range=[O[0],O[O.length-1]]:E.range=[O,O]}else E.range=[k.start,k.end],E.nticks=(k.end-k.start)/k.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),n(E,I),f.prepTicks(E),E._tmin=null,E._tmax=null}}return function(N){return f.tickText(E,N).text}},S.calcTextOpts=function(P,L,I,C){var k=L(P);I.text(k).call(t.convertToTspans,C);var E=I.node(),R=u.bBox(E,!0);return{text:k,width:R.width,height:R.height,fontSize:+E.style["font-size"].replace("px",""),level:P,dy:(R.top+R.bottom)/2}},S.findBestTextLocation=function(P,L,I,C,k){var E=I.width,R,O,N,G,U;L.isClosed?(O=L.len/m.INITIALSEARCHPOINTS,R=L.min+O/2,N=L.max):(O=(L.len-E)/(m.INITIALSEARCHPOINTS+1),R=L.min+O+E/2,N=L.max-(O+E)/2);for(var Y=1/0,z=0;z<m.ITERATIONS;z++){for(var B=R;B<N;B+=O){var H=a.getTextLocation(P,L.total,B,E),V=g(H,I,C,k);V<Y&&(Y=V,U=H,G=B)}if(Y>m.MAXCOST*2)break;z&&(O/=2),R=G-O/2,N=R+O*1.5}if(Y<=m.MAXCOST)return U};function g(P,L,I,C){var k=L.width/2,E=L.height/2,R=P.x,O=P.y,N=P.theta,G=Math.cos(N)*k,U=Math.sin(N)*k,Y=(R>C.center?C.right-R:R-C.left)/(G+Math.abs(Math.sin(N)*E)),z=(O>C.middle?C.bottom-O:O-C.top)/(Math.abs(U)+Math.cos(N)*E);if(Y<1||z<1)return 1/0;var B=m.EDGECOST*(1/(Y-1)+1/(z-1));B+=m.ANGLECOST*N*N;for(var H=R-G,V=O-U,Z=R+G,q=O+U,J=0;J<I.length;J++){var ne=I[J],ve=Math.cos(ne.theta)*ne.width/2,$=Math.sin(ne.theta)*ne.width/2,j=a.segmentDistance(H,V,Z,q,ne.x-ve,ne.y-$,ne.x+ve,ne.y+$)*2/(L.height+ne.height),ae=ne.level===L.level,ie=ae?m.SAMELEVELDISTANCE:1;if(j<=ie)return 1/0;var te=m.NEIGHBORCOST*(ae?m.SAMELEVELFACTOR:1);B+=te/(j-ie)}return B}S.addLabelData=function(P,L,I,C){var k=L.fontSize,E=L.width+k/3,R=Math.max(0,L.height-k/3),O=P.x,N=P.y,G=P.theta,U=Math.sin(G),Y=Math.cos(G),z=function(H,V){return[O+H*Y-V*U,N+H*U+V*Y]},B=[z(-E/2,-R/2),z(-E/2,R/2),z(E/2,R/2),z(E/2,-R/2)];I.push({text:L.text,x:O,y:N,dy:L.dy,theta:G,level:L.level,width:E,height:R}),C.push(B)},S.drawLabels=function(P,L,I,C,k){var E=P.selectAll("text").data(L,function(G){return G.text+","+G.x+","+G.y+","+G.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(G){var U=G.x+Math.sin(G.theta)*G.dy,Y=G.y-Math.cos(G.theta)*G.dy;r.select(this).text(G.text).attr({x:U,y:Y,transform:"rotate("+180*G.theta/Math.PI+" "+U+" "+Y+")"}).call(t.convertToTspans,I)}),k){for(var R="",O=0;O<k.length;O++)R+="M"+k[O].join("L")+"Z";var N=a.ensureSingle(C,"path","");N.attr("d",R)}};function T(P,L,I,C,k){var E=C.trace,R=I._fullLayout._clips,O="clip"+E.uid,N=R.selectAll("#"+O).data(E.connectgaps?[]:[0]);if(N.enter().append("clipPath").classed("contourclip",!0).attr("id",O),N.exit().remove(),E.connectgaps===!1){var G={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:L.xaxis,yaxis:L.yaxis,x:C.x,y:C.y,z:M(C),smoothing:0};l([G]),h([G]),p([G],{type:"levels"});var U=a.ensureSingle(N,"path","");U.attr("d",(G.prefixBoundary?"M"+k.join("L")+"Z":"")+x(G,k))}else O=null;u.setClipUrl(P,O,I)}function M(P){var L=P.trace._emptypoints,I=[],C=P.z.length,k=P.z[0].length,E,R=[],O;for(E=0;E<k;E++)R.push(1);for(E=0;E<C;E++)I.push(R.slice());for(E=0;E<L.length;E++)O=L[E],I[O[0]][O[1]]=0;return P.zmask=I,I}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/set_convert":848,"../heatmap/plot":1076,"./close_boundaries":1010,"./constants":1012,"./convert_to_constraints":1016,"./empty_pathinfo":1018,"./find_all_paths":1020,"./make_crossings":1025,d3:169}],1027:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib");d.exports=function(t,f){var n=t.contours;if(t.autocontour){var o=t.zmin,l=t.zmax;(t.zauto||o===void 0)&&(o=a.aggNums(Math.min,null,f)),(t.zauto||l===void 0)&&(l=a.aggNums(Math.max,null,f));var h=u(o,l,t.ncontours);n.size=h.dtick,n.start=r.tickFirst(h),h.range.reverse(),n.end=r.tickFirst(h),n.start===o&&(n.start+=n.size),n.end===l&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),t._input.contours||(t._input.contours={}),a.extendFlat(t._input.contours,{start:n.start,end:n.end,size:n.size}),t._input.autocontour=!0}else if(n.type!=="constraint"){var i=n.start,s=n.end,p=t._input.contours;if(i>s&&(n.start=p.start=s,s=n.end=p.end=i,i=n.start),!(n.size>0)){var v;i===s?v=1:v=u(i,s,t.ncontours).dtick,p.size=n.size=v}}};function u(c,t,f){var n={type:"linear",range:[c,t]};return r.autoTicks(n,(t-c)/(f||15)),n}},{"../../lib":778,"../../plots/cartesian/axes":828}],1028:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../heatmap/style"),c=e("./make_color_map");d.exports=function(f){var n=r.select(f).selectAll("g.contour");n.style("opacity",function(o){return o[0].trace.opacity}),n.each(function(o){var l=r.select(this),h=o[0].trace,i=h.contours,s=h.line,p=i.size||1,v=i.start,m=i.type==="constraint",b=!m&&i.coloring==="lines",y=!m&&i.coloring==="fill",x=b||y?c(h):null;l.selectAll("g.contourlevel").each(function(T){r.select(this).selectAll("path").call(a.lineGroupStyle,s.width,b?x(T.level):s.color,s.dash)});var w=i.labelfont;if(l.selectAll("g.contourlabels text").each(function(T){a.font(r.select(this),{family:w.family,size:w.size,color:w.color||(b?x(T.level):s.color)})}),m)l.selectAll("g.contourfill path").style("fill",h.fillcolor);else if(y){var g;l.selectAll("g.contourfill path").style("fill",function(T){return g===void 0&&(g=T.level),x(T.level+.5*p)}),g===void 0&&(g=v),l.selectAll("g.contourbg path").style("fill",x(g-.5*p))}}),u(f)}},{"../../components/drawing":665,"../heatmap/style":1077,"./make_color_map":1024,d3:169}],1029:[function(e,d,S){var r=e("../../components/colorscale/defaults"),a=e("./label_defaults");d.exports=function(c,t,f,n,o){var l=f("contours.coloring"),h,i="";l==="fill"&&(h=f("contours.showlines")),h!==!1&&(l!=="lines"&&(i=f("line.color","#000")),f("line.width",.5),f("line.dash")),l!=="none"&&(c.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,r(c,t,n,f,{prefix:"",cLetter:"z"})),f("line.smoothing"),a(f,n,i,o)}},{"../../components/colorscale/defaults":653,"./label_defaults":1023}],1030:[function(e,d,S){var r=e("../heatmap/attributes"),a=e("../contour/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,t=a.contours;d.exports=c({carpet:{valType:"string",editType:"calc"},z:r.z,a:r.x,a0:r.x0,da:r.dx,b:r.y,b0:r.y0,db:r.dy,text:r.text,hovertext:r.hovertext,transpose:r.transpose,atype:r.xtype,btype:r.ytype,fillcolor:a.fillcolor,autocontour:a.autocontour,ncontours:a.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a.line.color,width:a.line.width,dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},transforms:void 0},u("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../heatmap/attributes":1065}],1031:[function(e,d,S){var r=e("../../components/colorscale/calc"),a=e("../../lib"),u=e("../heatmap/convert_column_xyz"),c=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),f=e("../heatmap/find_empties"),n=e("../heatmap/make_bound_array"),o=e("./defaults"),l=e("../carpet/lookup_carpetid"),h=e("../contour/set_contours");d.exports=function(p,v){var m=v._carpetTrace=l(p,v);if(!(!m||!m.visible||m.visible==="legendonly")){if(!v.a||!v.b){var b=p.data[m.index],y=p.data[v.index];y.a||(y.a=b.a),y.b||(y.b=b.b),o(y,v,v._defaultColor,p._fullLayout)}var x=i(p,v);return h(v,v._z),x}};function i(s,p){var v=p._carpetTrace,m=v.aaxis,b=v.baxis,y,x,w,g,T,M,P;m._minDtick=0,b._minDtick=0,a.isArray1D(p.z)&&u(p,m,b,"a","b",["z"]),y=p._a=p._a||p.a,g=p._b=p._b||p.b,y=y?m.makeCalcdata(p,"_a"):[],g=g?b.makeCalcdata(p,"_b"):[],x=p.a0||0,w=p.da||1,T=p.b0||0,M=p.db||1,P=p._z=c(p._z||p.z,p.transpose),p._emptypoints=f(P),t(P,p._emptypoints);var L=a.maxRowLength(P),I=p.xtype==="scaled"?"":y,C=n(p,I,x,w,L,m),k=p.ytype==="scaled"?"":g,E=n(p,k,T,M,P.length,b),R={a:C,b:E,z:P};return p.contours.type==="levels"&&p.contours.coloring!=="none"&&r(s,p,{vals:P,containerStr:"",cLetter:"z"}),[R]}},{"../../components/colorscale/calc":651,"../../lib":778,"../carpet/lookup_carpetid":981,"../contour/set_contours":1027,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"../heatmap/make_bound_array":1075,"./defaults":1032}],1032:[function(e,d,S){var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),u=e("./attributes"),c=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),f=e("../contour/style_defaults");d.exports=function(o,l,h,i){function s(b,y){return r.coerce(o,l,u,b,y)}function p(b){return r.coerce2(o,l,u,b)}if(s("carpet"),o.a&&o.b){var v=a(o,l,s,i,"a","b");if(!v){l.visible=!1;return}s("text");var m=s("contours.type")==="constraint";m?c(o,l,s,i,h,{hasHover:!1}):(t(o,l,s,p),f(o,l,s,i,{hasHover:!1}))}else l._defaultColor=h,l._length=null}},{"../../lib":778,"../contour/constraint_defaults":1013,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../heatmap/xyz_defaults":1079,"./attributes":1030}],1033:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":841,"../contour/colorbar":1011,"../contour/style":1028,"./attributes":1030,"./calc":1031,"./defaults":1032,"./plot":1034}],1034:[function(e,d,S){var r=e("d3"),a=e("../carpet/map_1d_array"),u=e("../carpet/makepath"),c=e("../../components/drawing"),t=e("../../lib"),f=e("../contour/make_crossings"),n=e("../contour/find_all_paths"),o=e("../contour/plot"),l=e("../contour/constants"),h=e("../contour/convert_to_constraints"),i=e("../contour/empty_pathinfo"),s=e("../contour/close_boundaries"),p=e("../carpet/lookup_carpetid"),v=e("../carpet/axis_aligned_line");d.exports=function(I,C,k,E){var R=C.xaxis,O=C.yaxis;t.makeTraceGroups(E,k,"contour").each(function(N){var G=r.select(this),U=N[0],Y=U.trace,z=Y._carpetTrace=p(I,Y),B=I.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var H=U.a,V=U.b,Z=Y.contours,q=i(Z,C,U),J=Z.type==="constraint",ne=Z._operation,ve=J?ne==="="?"lines":"fill":Z.coloring;function $(be){var xe=z.ab2xy(be[0],be[1],!0);return[R.c2p(xe[0]),O.c2p(xe[1])]}var j=[[H[0],V[V.length-1]],[H[H.length-1],V[V.length-1]],[H[H.length-1],V[0]],[H[0],V[0]]];f(q);var ae=(H[H.length-1]-H[0])*1e-8,ie=(V[V.length-1]-V[0])*1e-8;n(q,ae,ie);var te=q;Z.type==="constraint"&&(te=h(q,ne)),m(q,$);var re,ce,pe,fe,se=[];for(fe=B.clipsegments.length-1;fe>=0;fe--)re=B.clipsegments[fe],ce=a([],re.x,R.c2p),pe=a([],re.y,O.c2p),ce.reverse(),pe.reverse(),se.push(u(ce,pe,re.bicubic));var de="M"+se.join("L")+"Z";T(G,B.clipsegments,R,O,J,ve),M(Y,G,R,O,te,j,$,z,B,ve,de),b(G,q,I,U,Z,C,z),c.setClipUrl(G,z._clipPathId,I)})};function m(L,I){var C,k,E,R,O,N,G,U,Y;for(C=0;C<L.length;C++){for(R=L[C],O=R.pedgepaths=[],N=R.ppaths=[],k=0;k<R.edgepaths.length;k++){for(Y=R.edgepaths[k],G=[],E=0;E<Y.length;E++)G[E]=I(Y[E]);O.push(G)}for(k=0;k<R.paths.length;k++){for(Y=R.paths[k],U=[],E=0;E<Y.length;E++)U[E]=I(Y[E]);N.push(U)}}}function b(L,I,C,k,E,R,O){var N=t.ensureSingle(L,"g","contourlines"),G=E.showlines!==!1,U=E.showlabels,Y=G&&U,z=o.createLines(N,G||U,I),B=o.createLineClip(N,Y,C,k.trace.uid),H=L.selectAll("g.contourlabels").data(U?[0]:[]);if(H.exit().remove(),H.enter().append("g").classed("contourlabels",!0),U){var V=R.xaxis,Z=R.yaxis,q=V._length,J=Z._length,ne=[[[0,0],[q,0],[q,J],[0,J]]],ve=[];t.clearLocationCache();var $=o.labelFormatter(C,k),j=c.tester.append("text").attr("data-notex",1).call(c.font,E.labelfont),ae={left:0,right:q,center:q/2,top:0,bottom:J,middle:J/2},ie=Math.sqrt(q*q+J*J),te=l.LABELDISTANCE*ie/Math.max(1,I.length/l.LABELINCREASE);z.each(function(re){var ce=o.calcTextOpts(re.level,$,j,C);r.select(this).selectAll("path").each(function(pe){var fe=this,se=t.getVisibleSegment(fe,ae,ce.height/2);if(!!se&&(y(fe,pe,re,se,O,ce.height),!(se.len<(ce.width+ce.height)*l.LABELMIN)))for(var de=Math.min(Math.ceil(se.len/te),l.LABELMAX),be=0;be<de;be++){var xe=o.findBestTextLocation(fe,se,ce,ve,ae);if(!xe)break;o.addLabelData(xe,ce,ve,ne)}})}),j.remove(),o.drawLabels(H,ve,C,B,Y?ne:null)}U&&!G&&z.remove()}function y(L,I,C,k,E,R){for(var O,N=0;N<C.pedgepaths.length;N++)I===C.pedgepaths[N]&&(O=C.edgepaths[N]);if(!O)return;var G=E.a[0],U=E.a[E.a.length-1],Y=E.b[0],z=E.b[E.b.length-1];function B(J,ne){var ve=0,$,j=.1;return(Math.abs(J[0]-G)<j||Math.abs(J[0]-U)<j)&&($=w(E.dxydb_rough(J[0],J[1],j)),ve=Math.max(ve,R*g(ne,$)/2)),(Math.abs(J[1]-Y)<j||Math.abs(J[1]-z)<j)&&($=w(E.dxyda_rough(J[0],J[1],j)),ve=Math.max(ve,R*g(ne,$)/2)),ve}var H=x(L,0,1),V=x(L,k.total,k.total-1),Z=B(O[0],H),q=k.total-B(O[O.length-1],V);k.min<Z&&(k.min=Z),k.max>q&&(k.max=q),k.len=k.max-k.min}function x(L,I,C){var k=L.getPointAtLength(I),E=L.getPointAtLength(C),R=E.x-k.x,O=E.y-k.y,N=Math.sqrt(R*R+O*O);return[R/N,O/N]}function w(L){var I=Math.sqrt(L[0]*L[0]+L[1]*L[1]);return[L[0]/I,L[1]/I]}function g(L,I){var C=Math.abs(L[0]*I[0]+L[1]*I[1]),k=Math.sqrt(1-C*C);return k/C}function T(L,I,C,k,E,R){var O,N,G,U,Y=t.ensureSingle(L,"g","contourbg"),z=Y.selectAll("path").data(R==="fill"&&!E?[0]:[]);z.enter().append("path"),z.exit().remove();var B=[];for(U=0;U<I.length;U++)O=I[U],N=a([],O.x,C.c2p),G=a([],O.y,k.c2p),B.push(u(N,G,O.bicubic));z.attr("d","M"+B.join("L")+"Z").style("stroke","none")}function M(L,I,C,k,E,R,O,N,G,U,Y){var z=U==="fill";z&&s(E,L.contours);var B=t.ensureSingle(I,"g","contourfill"),H=B.selectAll("path").data(z?E:[]);H.enter().append("path"),H.exit().remove(),H.each(function(V){var Z=(V.prefixBoundary?Y:"")+P(L,V,R,O,N,G,C,k);Z?r.select(this).attr("d",Z).style("stroke","none"):r.select(this).remove()})}function P(L,I,C,k,E,R,O,N){var G,U="",Y=I.edgepaths.map(function(pe,fe){return fe}),z=!0,B,H,V,Z,q,J,ne=Math.abs(C[0][0]-C[2][0])*1e-4,ve=Math.abs(C[0][1]-C[2][1])*1e-4;function $(pe){return Math.abs(pe[1]-C[0][1])<ve}function j(pe){return Math.abs(pe[1]-C[2][1])<ve}function ae(pe){return Math.abs(pe[0]-C[0][0])<ne}function ie(pe){return Math.abs(pe[0]-C[2][0])<ne}function te(pe,fe){var se,de,be,xe,ke="";for($(pe)&&!ie(pe)||j(pe)&&!ae(pe)?(xe=E.aaxis,be=v(E,R,[pe[0],fe[0]],.5*(pe[1]+fe[1]))):(xe=E.baxis,be=v(E,R,.5*(pe[0]+fe[0]),[pe[1],fe[1]])),se=1;se<be.length;se++)for(ke+=xe.smoothing?"C":"L",de=0;de<be[se].length;de++){var Re=be[se][de];ke+=[O.c2p(Re[0]),N.c2p(Re[1])]+" "}return ke}for(G=0,B=null;Y.length;){var re=I.edgepaths[G][0];for(B&&(U+=te(B,re)),J=c.smoothopen(I.edgepaths[G].map(k),I.smoothing),U+=z?J:J.replace(/^M/,"L"),Y.splice(Y.indexOf(G),1),B=I.edgepaths[G][I.edgepaths[G].length-1],Z=-1,V=0;V<4;V++){if(!B){t.log("Missing end?",G,I);break}for($(B)&&!ie(B)?H=C[1]:ae(B)?H=C[0]:j(B)?H=C[3]:ie(B)&&(H=C[2]),q=0;q<I.edgepaths.length;q++){var ce=I.edgepaths[q][0];Math.abs(B[0]-H[0])<ne?Math.abs(B[0]-ce[0])<ne&&(ce[1]-B[1])*(H[1]-ce[1])>=0&&(H=ce,Z=q):Math.abs(B[1]-H[1])<ve?Math.abs(B[1]-ce[1])<ve&&(ce[0]-B[0])*(H[0]-ce[0])>=0&&(H=ce,Z=q):t.log("endpt to newendpt is not vert. or horz.",B,H,ce)}if(Z>=0)break;U+=te(B,H),B=H}if(Z===I.edgepaths.length){t.log("unclosed perimeter path");break}G=Z,z=Y.indexOf(G)===-1,z&&(G=Y[0],U+=te(B,H)+"Z",B=null)}for(G=0;G<I.paths.length;G++)U+=c.smoothclosed(I.paths[G].map(k),I.smoothing);return U}},{"../../components/drawing":665,"../../lib":778,"../carpet/axis_aligned_line":965,"../carpet/lookup_carpetid":981,"../carpet/makepath":982,"../carpet/map_1d_array":983,"../contour/close_boundaries":1010,"../contour/constants":1012,"../contour/convert_to_constraints":1016,"../contour/empty_pathinfo":1018,"../contour/find_all_paths":1020,"../contour/make_crossings":1025,"../contour/plot":1026,d3:169}],1035:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../plots/attributes"),c=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;d.exports=t({lon:c.lon,lat:c.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:c.text,hovertext:c.hovertext,hoverinfo:t({},u.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:a(),showlegend:t({},u.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattermapbox/attributes":1252}],1036:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib").isArrayOrTypedArray,u=e("../../constants/numerical").BADNUM,c=e("../../components/colorscale/calc"),t=e("../../lib")._;d.exports=function(n,o){for(var l=o._length,h=new Array(l),i=o.z,s=a(i)&&i.length,p=0;p<l;p++){var v=h[p]={},m=o.lon[p],b=o.lat[p];if(v.lonlat=r(m)&&r(b)?[+m,+b]:[u,u],s){var y=i[p];v.z=r(y)?y:u}}return c(n,o,{vals:s?i:[0,1],containerStr:"",cLetter:"z"}),l&&(h[0].t={labels:{lat:t(n,"lat:")+" ",lon:t(n,"lon:")+" "}}),h}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1037:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../components/color"),c=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,f=e("../../lib/geojson_utils").makeBlank;d.exports=function(o){var l=o[0].trace,h=l.visible===!0&&l._length!==0,i={layout:{visibility:"none"},paint:{}},s=l._opts={heatmap:i,geojson:f()};if(!h)return s;var p=[],v,m=l.z,b=l.radius,y=a.isArrayOrTypedArray(m)&&m.length,x=a.isArrayOrTypedArray(b);for(v=0;v<o.length;v++){var w=o[v],g=w.lonlat;if(g[0]!==t){var T={};if(y){var M=w.z;T.z=M!==t?M:0}x&&(T.r=r(b[v])&&b[v]>0?+b[v]:0),p.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:T})}}var P=c.extractOpts(l),L=P.reversescale?c.flipScale(P.colorscale):P.colorscale,I=L[0][1],C=u.opacity(I)<1?I:u.addOpacity(I,0),k=["interpolate",["linear"],["heatmap-density"],0,C];for(v=1;v<L.length;v++)k.push(L[v][0],L[v][1]);var E=["interpolate",["linear"],["get","z"],P.min,0,P.max,1];return a.extendFlat(s.heatmap.paint,{"heatmap-weight":y?E:1/(P.max-P.min),"heatmap-color":k,"heatmap-radius":x?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),s.geojson={type:"FeatureCollection",features:p},s.heatmap.layout.visibility="visible",s}},{"../../components/color":643,"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1038:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");d.exports=function(t,f,n,o){function l(p,v){return r.coerce(t,f,u,p,v)}var h=l("lon")||[],i=l("lat")||[],s=Math.min(h.length,i.length);if(!s){f.visible=!1;return}f._length=s,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),a(t,f,o,l,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1035}],1039:[function(e,d,S){d.exports=function(a,u){return a.lon=u.lon,a.lat=u.lat,a.z=u.z,a}},{}],1040:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../scattermapbox/hover");d.exports=function(f,n,o){var l=u(f,n,o);if(!!l){var h=l[0],i=h.cd,s=i[0].trace,p=i[h.index];if(delete h.color,"z"in p){var v=h.subplot.mockAxis;h.z=p.z,h.zLabel=a.tickText(v,v.c2l(p.z),"hover").text}return h.extraText=c(s,p,i[0].t.labels),[h]}};function c(t,f,n){if(t.hovertemplate)return;var o=f.hi||t.hoverinfo,l=o.split("+"),h=l.indexOf("all")!==-1,i=l.indexOf("lon")!==-1,s=l.indexOf("lat")!==-1,p=f.lonlat,v=[];function m(b){return b+"\xB0"}return h||i&&s?v.push("("+m(p[0])+", "+m(p[1])+")"):i?v.push(n.lon+m(p[0])):s&&v.push(n.lat+m(p[1])),(h||l.indexOf("text")!==-1)&&r.fillText(f,t,v),v.join("<br>")}},{"../../lib":778,"../../plots/cartesian/axes":828,"../scattermapbox/hover":1257}],1041:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(r,a){for(var u=a.getMapLayers(),c=0;c<u.length;c++){var t=u[c],f=t.id;if(t.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":885,"../heatmap/colorbar":1068,"../scattermapbox/format_labels":1256,"./attributes":1035,"./calc":1036,"./defaults":1038,"./event_data":1039,"./hover":1040,"./plot":1042}],1042:[function(e,d,S){var r=e("./convert"),a=e("../../plots/mapbox/constants").traceLayerPrefix;function u(t,f){this.type="densitymapbox",this.subplot=t,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",a+f+"-heatmap"]],this.below=null}var c=u.prototype;c.update=function(t){var f=this.subplot,n=this.layerList,o=r(t),l=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(o.geojson),l!==this.below&&(this._removeLayers(),this._addLayers(o,l),this.below=l);for(var h=0;h<n.length;h++){var i=n[h],s=i[0],p=i[1],v=o[s];f.setOptions(p,"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&f.setOptions(p,"setPaintProperty",v.paint)}},c._addLayers=function(t,f){for(var n=this.subplot,o=this.layerList,l=this.sourceId,h=0;h<o.length;h++){var i=o[h],s=i[0],p=t[s];n.addLayer({type:s,id:i[1],source:l,layout:p.layout,paint:p.paint},f)}},c._removeLayers=function(){for(var t=this.subplot.map,f=this.layerList,n=f.length-1;n>=0;n--)t.removeLayer(f[n][1])},c.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},d.exports=function(f,n){var o=n[0].trace,l=new u(f,o.uid),h=l.sourceId,i=r(n),s=l.below=f.belowLookup["trace-"+o.uid];return f.map.addSource(h,{type:"geojson",data:i.geojson}),l._addLayers(i,s),l}},{"../../plots/mapbox/constants":883,"./convert":1037}],1043:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){for(var t=0;t<u.length;t++)u[t].i=t;r.mergeArray(c.text,u,"tx"),r.mergeArray(c.hovertext,u,"htx");var f=c.marker;if(f){r.mergeArray(f.opacity,u,"mo"),r.mergeArray(f.color,u,"mc");var n=f.line;n&&(r.mergeArray(n.color,u,"mlc"),r.mergeArrayCastPositive(n.width,u,"mlw"))}}},{"../../lib":778}],1044:[function(e,d,S){var r=e("../bar/attributes"),a=e("../scatter/attributes").line,u=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("./constants"),n=e("../../lib/extend").extendFlat,o=e("../../components/color");d.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,hovertext:r.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:n({},u.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),text:r.text,textposition:n({},r.textposition,{dflt:"auto"}),insidetextanchor:n({},r.insidetextanchor,{dflt:"middle"}),textangle:n({},r.textangle,{dflt:0}),textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:n({},r.orientation,{}),offset:n({},r.offset,{arrayOk:!1}),width:n({},r.width,{arrayOk:!1}),marker:r.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},a.color,{dflt:o.defaultLine}),width:n({},a.width,{dflt:0,editType:"plot"}),dash:a.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1046}],1045:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/align_period"),u=e("./arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;d.exports=function(o,l){var h=r.getFromId(o,l.xaxis||"x"),i=r.getFromId(o,l.yaxis||"y"),s,p,v,m,b,y;l.orientation==="h"?(s=h.makeCalcdata(l,"x"),v=i.makeCalcdata(l,"y"),p=a(l,i,"y",v),y=!!l.yperiodalignment):(s=i.makeCalcdata(l,"y"),v=h.makeCalcdata(l,"x"),p=a(l,h,"x",v),y=!!l.xperiodalignment);var x=Math.min(p.length,s.length),w=new Array(x);for(l._base=[],m=0;m<x;m++){s[m]<0&&(s[m]=t);var g=!1;s[m]!==t&&m+1<x&&s[m+1]!==t&&(g=!0),b=w[m]={p:p[m],s:s[m],cNext:g},l._base[m]=-.5*b.s,y&&(w[m].orig_p=v[m]),l.ids&&(b.id=String(l.ids[m])),m===0&&(w[0].vTotal=0),w[0].vTotal+=f(b.s),b.begR=f(b.s)/f(w[0].s)}var T;for(m=0;m<x;m++)b=w[m],b.s!==t&&(b.sumR=b.s/w[0].vTotal,b.difR=T!==void 0?b.s/T:1,T=b.s);return u(w,l),c(w,l),w};function f(n){return n===t?0:n}},{"../../constants/numerical":753,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":1043}],1046:[function(e,d,S){d.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1047:[function(e,d,S){var r=e("../bar/cross_trace_calc").setGroupPositions;d.exports=function(u,c){var t=u._fullLayout,f=u._fullData,n=u.calcdata,o=c.xaxis,l=c.yaxis,h=[],i=[],s=[],p,v;for(v=0;v<f.length;v++){var m=f[v],b=m.orientation==="h";m.visible===!0&&m.xaxis===o._id&&m.yaxis===l._id&&m.type==="funnel"&&(p=n[v],b?s.push(p):i.push(p),h.push(p))}var y={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(r(u,o,l,i,y),r(u,l,o,s,y),v=0;v<h.length;v++){p=h[v];for(var x=0;x<p.length;x++)x+1<p.length&&(p[x].nextP0=p[x+1].p0,p[x].nextS0=p[x+1].s0,p[x].nextP1=p[x+1].p1,p[x].nextS1=p[x+1].s1)}}},{"../bar/cross_trace_calc":924}],1048:[function(e,d,S){var r=e("../../lib"),a=e("../bar/defaults").handleGroupingDefaults,u=e("../bar/defaults").handleText,c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./attributes"),n=e("../../components/color");function o(i,s,p,v){function m(M,P){return r.coerce(i,s,f,M,P)}var b=c(i,s,v,m);if(!b){s.visible=!1;return}t(i,s,v,m),m("orientation",s.y&&!s.x?"v":"h"),m("offset"),m("width");var y=m("text");m("hovertext"),m("hovertemplate");var x=m("textposition");u(i,s,v,m,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s.textposition!=="none"&&!s.texttemplate&&m("textinfo",Array.isArray(y)?"text+value":"value");var w=m("marker.color",p);m("marker.line.color",n.defaultLine),m("marker.line.width");var g=m("connector.visible");if(g){m("connector.fillcolor",l(w));var T=m("connector.line.width");T&&(m("connector.line.color"),m("connector.line.dash"))}}function l(i){var s=r.isArrayOrTypedArray(i)?"#000":i;return n.addOpacity(s,.5*n.opacity(s))}function h(i,s){var p,v;function m(y){return r.coerce(v._input,v,f,y)}if(s.funnelmode==="group")for(var b=0;b<i.length;b++)v=i[b],p=v._input,a(p,v,s,m)}d.exports={supplyDefaults:o,crossTraceDefaults:h}},{"../../components/color":643,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1044}],1049:[function(e,d,S){d.exports=function(a,u){return a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,"percentInitial"in u&&(a.percentInitial=u.percentInitial),"percentPrevious"in u&&(a.percentPrevious=u.percentPrevious),"percentTotal"in u&&(a.percentTotal=u.percentTotal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a}},{}],1050:[function(e,d,S){var r=e("../../components/color").opacity,a=e("../bar/hover").hoverOnBars,u=e("../../lib").formatPercent;d.exports=function(f,n,o,l){var h=a(f,n,o,l);if(!!h){var i=h.cd,s=i[0].trace,p=s.orientation==="h",v=h.index,m=i[v],b=p?"x":"y";h[b+"LabelVal"]=m.s,h.percentInitial=m.begR,h.percentInitialLabel=u(m.begR,1),h.percentPrevious=m.difR,h.percentPreviousLabel=u(m.difR,1),h.percentTotal=m.sumR,h.percentTotalLabel=u(m.sumR,1);var y=m.hi||s.hoverinfo,x=[];if(y&&y!=="none"&&y!=="skip"){var w=y==="all",g=y.split("+"),T=function(M){return w||g.indexOf(M)!==-1};T("percent initial")&&x.push(h.percentInitialLabel+" of initial"),T("percent previous")&&x.push(h.percentPreviousLabel+" of previous"),T("percent total")&&x.push(h.percentTotalLabel+" of total")}return h.extraText=x.join("<br>"),h.color=c(s,m),[h]}};function c(t,f){var n=t.marker,o=f.mc||n.color,l=f.mlc||n.line.color,h=f.mlw||n.line.width;if(r(o))return o;if(r(l)&&h)return l}},{"../../components/color":643,"../../lib":778,"../bar/hover":928}],1051:[function(e,d,S){d.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1044,"./calc":1045,"./cross_trace_calc":1047,"./defaults":1048,"./event_data":1049,"./hover":1050,"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(e,d,S){d.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1053:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(u,c,t){var f=!1;function n(h,i){return r.coerce(u,c,a,h,i)}for(var o=0;o<t.length;o++){var l=t[o];if(l.visible&&l.type==="funnel"){f=!0;break}}f&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":778,"./layout_attributes":1052}],1054:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),f=e("../bar/uniform_text").clearMinTextSize;d.exports=function(i,s,p,v){var m=i._fullLayout;f("funnel",m),n(i,s,p,v),o(i,s,p,v),t.plot(i,s,p,v,{mode:m.funnelmode,norm:m.funnelmode,gap:m.funnelgap,groupgap:m.funnelgroupgap})};function n(h,i,s,p){var v=i.xaxis,m=i.yaxis;a.makeTraceGroups(p,s,"trace bars").each(function(b){var y=r.select(this),x=b[0].trace,w=a.ensureSingle(y,"g","regions");if(!x.connector||!x.connector.visible){w.remove();return}var g=x.orientation==="h",T=w.selectAll("g.region").data(a.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var M=T.size();T.each(function(P,L){if(!(L!==M-1&&!P.cNext)){var I=l(P,v,m,g),C=I[0],k=I[1],E="";C[0]!==c&&k[0]!==c&&C[1]!==c&&k[1]!==c&&C[2]!==c&&k[2]!==c&&C[3]!==c&&k[3]!==c&&(g?E+="M"+C[0]+","+k[1]+"L"+C[2]+","+k[2]+"H"+C[3]+"L"+C[1]+","+k[1]+"Z":E+="M"+C[1]+","+k[1]+"L"+C[2]+","+k[3]+"V"+k[2]+"L"+C[1]+","+k[0]+"Z"),E===""&&(E="M0,0Z"),a.ensureSingle(r.select(this),"path").attr("d",E).call(u.setClipUrl,i.layerClipId,h)}})})}function o(h,i,s,p){var v=i.xaxis,m=i.yaxis;a.makeTraceGroups(p,s,"trace bars").each(function(b){var y=r.select(this),x=b[0].trace,w=a.ensureSingle(y,"g","lines");if(!x.connector||!x.connector.visible||!x.connector.line.width){w.remove();return}var g=x.orientation==="h",T=w.selectAll("g.line").data(a.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var M=T.size();T.each(function(P,L){if(!(L!==M-1&&!P.cNext)){var I=l(P,v,m,g),C=I[0],k=I[1],E="";C[3]!==void 0&&k[3]!==void 0&&(g?(E+="M"+C[0]+","+k[1]+"L"+C[2]+","+k[2],E+="M"+C[1]+","+k[1]+"L"+C[3]+","+k[2]):(E+="M"+C[1]+","+k[1]+"L"+C[2]+","+k[3],E+="M"+C[1]+","+k[0]+"L"+C[2]+","+k[2])),E===""&&(E="M0,0Z"),a.ensureSingle(r.select(this),"path").attr("d",E).call(u.setClipUrl,i.layerClipId,h)}})})}function l(h,i,s,p){var v=[],m=[],b=p?i:s,y=p?s:i;return v[0]=b.c2p(h.s0,!0),m[0]=y.c2p(h.p0,!0),v[1]=b.c2p(h.s1,!0),m[1]=y.c2p(h.p1,!0),v[2]=b.c2p(h.nextS0,!0),m[2]=y.c2p(h.nextP0,!0),v[3]=b.c2p(h.nextS1,!0),m[3]=y.c2p(h.nextP1,!0),p?[v,m]:[m,v]}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1055:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),f=e("../bar/uniform_text").resizeText,n=t.styleTextPoints;function o(l,h,i){var s=i||r.select(l).selectAll("g.funnellayer").selectAll("g.trace");f(l,s,"funnel"),s.style("opacity",function(p){return p[0].trace.opacity}),s.each(function(p){var v=r.select(this),m=p[0].trace;v.selectAll(".point > path").each(function(b){if(!b.isBlank){var y=m.marker;r.select(this).call(u.fill,b.mc||y.color).call(u.stroke,b.mlc||y.line.color).call(a.dashLine,y.line.dash,b.mlw||y.line.width).style("opacity",m.selectedpoints&&!b.selected?c:1)}}),n(v,m,l),v.selectAll(".regions").each(function(){r.select(this).selectAll("path").style("stroke-width",0).call(u.fill,m.connector.fillcolor)}),v.selectAll(".lines").each(function(){var b=m.connector.line;a.lineGroupStyle(r.select(this).selectAll("path"),b.width,b.color,b.dash)})})}d.exports={style:o}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1056:[function(e,d,S){var r=e("../pie/attributes"),a=e("../../plots/attributes"),u=e("../../plots/domain").attributes,c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("../../lib/extend").extendFlat;d.exports={labels:r.labels,label0:r.label0,dlabel:r.dlabel,values:r.values,marker:{colors:r.marker.colors,line:{color:f({},r.marker.line.color,{dflt:null}),width:f({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:r.text,hovertext:r.hovertext,scalegroup:f({},r.scalegroup,{}),textinfo:f({},r.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:c({},{keys:["label","color","value","text","percent"]}),textposition:f({},r.textposition,{values:["inside","none"],dflt:"inside"}),textfont:r.textfont,insidetextfont:r.insidetextfont,title:{text:r.title.text,font:r.title.font,position:f({},r.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:u({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161}],1057:[function(e,d,S){var r=e("../../plots/plots");S.name="funnelarea",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1058:[function(e,d,S){var r=e("../pie/calc");function a(c,t){return r.calc(c,t)}function u(c){r.crossTraceCalc(c,{type:"funnelarea"})}d.exports={calc:a,crossTraceCalc:u}},{"../pie/calc":1163}],1059:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults,c=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;d.exports=function(n,o,l,h){function i(M,P){return r.coerce(n,o,a,M,P)}var s=i("labels"),p=i("values"),v=t(s,p),m=v.len;if(o._hasLabels=v.hasLabels,o._hasValues=v.hasValues,!o._hasLabels&&o._hasValues&&(i("label0"),i("dlabel")),!m){o.visible=!1;return}o._length=m;var b=i("marker.line.width");b&&i("marker.line.color",h.paper_bgcolor),i("marker.colors"),i("scalegroup");var y=i("text"),x=i("texttemplate"),w;if(x||(w=i("textinfo",Array.isArray(y)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),x||w&&w!=="none"){var g=i("textposition");c(n,o,h,i,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}u(o,h,i);var T=i("title.text");T&&(i("title.position"),r.coerceFont(i,"title.font",h.font)),i("aspectratio"),i("baseratio")}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"../pie/defaults":1164,"./attributes":1056}],1060:[function(e,d,S){d.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":1172,"./attributes":1056,"./base_plot":1057,"./calc":1058,"./defaults":1059,"./layout_attributes":1061,"./layout_defaults":1062,"./plot":1063,"./style":1064}],1061:[function(e,d,S){var r=e("../pie/layout_attributes").hiddenlabels;d.exports={hiddenlabels:r,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1168}],1062:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("hiddenlabels"),f("funnelareacolorway",t.colorway),f("extendfunnelareacolors")}},{"../../lib":778,"./layout_attributes":1061}],1063:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../lib"),c=u.strScale,t=u.strTranslate,f=e("../../lib/svg_text_utils"),n=e("../bar/plot"),o=n.toMoveInsideBar,l=e("../bar/uniform_text"),h=l.recordMinTextSize,i=l.clearMinTextSize,s=e("../pie/helpers"),p=e("../pie/plot"),v=p.attachFxHandlers,m=p.determineInsideTextFont,b=p.layoutAreas,y=p.prerenderTitles,x=p.positionTitleOutside,w=p.formatSliceLabel;d.exports=function(L,I){var C=L._fullLayout;i("funnelarea",C),y(I,L),b(I,C._size),u.makeTraceGroups(C._funnelarealayer,I,"trace").each(function(k){var E=r.select(this),R=k[0],O=R.trace;M(k),E.each(function(){var N=r.select(this).selectAll("g.slice").data(k);N.enter().append("g").classed("slice",!0),N.exit().remove(),N.each(function(U,Y){if(U.hidden){r.select(this).selectAll("path,g").remove();return}U.pointNumber=U.i,U.curveNumber=O.index;var z=R.cx,B=R.cy,H=r.select(this),V=H.selectAll("path.surface").data([U]);V.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),H.call(v,L,k);var Z="M"+(z+U.TR[0])+","+(B+U.TR[1])+g(U.TR,U.BR)+g(U.BR,U.BL)+g(U.BL,U.TL)+"Z";V.attr("d",Z),w(L,U,R);var q=s.castOption(O.textposition,U.pts),J=H.selectAll("g.slicetext").data(U.text&&q!=="none"?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var ne=u.ensureSingle(r.select(this),"text","",function(ce){ce.attr("data-notex",1)}),ve=u.ensureUniformFontSize(L,m(O,U,C.font));ne.text(U.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(a.font,ve).call(f.convertToTspans,L);var $=a.bBox(ne.node()),j,ae,ie,te=Math.min(U.BL[1],U.BR[1])+B,re=Math.max(U.TL[1],U.TR[1])+B;ae=Math.max(U.TL[0],U.BL[0])+z,ie=Math.min(U.TR[0],U.BR[0])+z,j=o(ae,ie,te,re,$,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),j.fontSize=ve.size,h(O.type,j,C),k[Y].transform=j,ne.attr("transform",u.getTextTransform(j))})});var G=r.select(this).selectAll("g.titletext").data(O.title.text?[0]:[]);G.enter().append("g").classed("titletext",!0),G.exit().remove(),G.each(function(){var U=u.ensureSingle(r.select(this),"text","",function(B){B.attr("data-notex",1)}),Y=O.title.text;O._meta&&(Y=u.templateString(Y,O._meta)),U.text(Y).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(a.font,O.title.font).call(f.convertToTspans,L);var z=x(R,C._size);U.attr("transform",t(z.x,z.y)+c(Math.min(1,z.scale))+t(z.tx,z.ty))})})})};function g(P,L){var I=L[0]-P[0],C=L[1]-P[1];return"l"+I+","+C}function T(P,L){return[.5*(P[0]+L[0]),.5*(P[1]+L[1])]}function M(P){if(!P.length)return;var L=P[0],I=L.trace,C=I.aspectratio,k=I.baseratio;k>.999&&(k=.999);var E=Math.pow(k,2),R=L.vTotal,O=R*E/(1-E),N=R,G=O/R;function U(){var fe=Math.sqrt(G);return{x:fe,y:-fe}}function Y(){var fe=U();return[fe.x,fe.y]}var z,B=[];B.push(Y());var H,V;for(H=P.length-1;H>-1;H--)if(V=P[H],!V.hidden){var Z=V.v/N;G+=Z,B.push(Y())}var q=1/0,J=-1/0;for(H=0;H<B.length;H++)z=B[H],q=Math.min(q,z[1]),J=Math.max(J,z[1]);for(H=0;H<B.length;H++)B[H][1]-=(J+q)/2;var ne=B[B.length-1][0],ve=L.r,$=(J-q)/2,j=ve/ne,ae=ve/$*C;for(L.r=ae*$,H=0;H<B.length;H++)B[H][0]*=j,B[H][1]*=ae;z=B[0];var ie=[-z[0],z[1]],te=[z[0],z[1]],re=0;for(H=P.length-1;H>-1;H--)if(V=P[H],!V.hidden){re+=1;var ce=B[re][0],pe=B[re][1];V.TL=[-ce,pe],V.TR=[ce,pe],V.BL=ie,V.BR=te,V.pxmid=T(V.TR,V.BR),ie=V.TL,te=V.TR}}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/plot":932,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,d3:169}],1064:[function(e,d,S){var r=e("d3"),a=e("../pie/style_one"),u=e("../bar/uniform_text").resizeText;d.exports=function(t){var f=t._fullLayout._funnelarealayer.selectAll(".trace");u(t,f,"funnelarea"),f.each(function(n){var o=n[0],l=o.trace,h=r.select(this);h.style({opacity:l.opacity}),h.selectAll("path.surface").each(function(i){r.select(this).call(a,i,l)})})}},{"../bar/uniform_text":937,"../pie/style_one":1172,d3:169}],1065:[function(e,d,S){var r=e("../scatter/attributes"),a=e("../../plots/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../components/colorscale/attributes");e("../../constants/docs").FORMAT_LINK;var t=e("../../lib/extend").extendFlat;d.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},r.x,{impliedEdits:{xtype:"array"}}),x0:t({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},r.y,{impliedEdits:{ytype:"array"}}),y0:t({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:u(),showlegend:t({},a.showlegend,{dflt:!1})},{transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../constants/docs":748,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1066:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),f=e("../../components/colorscale/calc"),n=e("./convert_column_xyz"),o=e("./clean_2d_array"),l=e("./interp2d"),h=e("./find_empties"),i=e("./make_bound_array"),s=e("../../constants/numerical").BADNUM;d.exports=function(b,y){var x=u.getFromId(b,y.xaxis||"x"),w=u.getFromId(b,y.yaxis||"y"),g=r.traceIs(y,"contour"),T=r.traceIs(y,"histogram"),M=r.traceIs(y,"gl2d"),P=g?"best":y.zsmooth,L,I,C,k,E,R,O,N,G,U,Y;if(x._minDtick=0,w._minDtick=0,T)Y=t(b,y),k=Y.orig_x,L=Y.x,I=Y.x0,C=Y.dx,N=Y.orig_y,E=Y.y,R=Y.y0,O=Y.dy,G=Y.z;else{var z=y.z;a.isArray1D(z)?(n(y,x,w,"x","y",["z"]),L=y._x,E=y._y,z=y._z):(k=y.x?x.makeCalcdata(y,"x"):[],N=y.y?w.makeCalcdata(y,"y"):[],L=c(y,x,"x",k),E=c(y,w,"y",N),y._x=L,y._y=E),I=y.x0,C=y.dx,R=y.y0,O=y.dy,G=o(z,y,x,w)}(x.rangebreaks||w.rangebreaks)&&(G=v(L,E,G),T||(L=p(L),E=p(E),y._x=L,y._y=E)),!T&&(g||y.connectgaps)&&(y._emptypoints=h(G),l(G,y._emptypoints));function B(te){P=y._input.zsmooth=y.zsmooth=!1,a.warn('cannot use zsmooth: "fast": '+te)}if(P==="fast"){if(x.type==="log"||w.type==="log")B("log axis found");else if(!T){if(L.length){var H=(L[L.length-1]-L[0])/(L.length-1),V=Math.abs(H/100);for(U=0;U<L.length-1;U++)if(Math.abs(L[U+1]-L[U]-H)>V){B("x scale is not linear");break}}if(E.length&&P==="fast"){var Z=(E[E.length-1]-E[0])/(E.length-1),q=Math.abs(Z/100);for(U=0;U<E.length-1;U++)if(Math.abs(E[U+1]-E[U]-Z)>q){B("y scale is not linear");break}}}}var J=a.maxRowLength(G),ne=y.xtype==="scaled"?"":L,ve=i(y,ne,I,C,J,x),$=y.ytype==="scaled"?"":E,j=i(y,$,R,O,G.length,w);M||(y._extremes[x._id]=u.findExtremes(x,ve),y._extremes[w._id]=u.findExtremes(w,j));var ae={x:ve,y:j,z:G,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&k&&(ae.orig_x=k),y.yperiodalignment&&N&&(ae.orig_y=N),ne&&ne.length===ve.length-1&&(ae.xCenter=ne),$&&$.length===j.length-1&&(ae.yCenter=$),T&&(ae.xRanges=Y.xRanges,ae.yRanges=Y.yRanges,ae.pts=Y.pts),g||f(b,y,{vals:G,cLetter:"z"}),g&&y.contours&&y.contours.coloring==="heatmap"){var ie={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};ae.xfill=i(ie,ne,I,C,J,x),ae.yfill=i(ie,$,R,O,G.length,w)}return[ae]};function p(m){for(var b=[],y=m.length,x=0;x<y;x++){var w=m[x];w!==s&&b.push(w)}return b}function v(m,b,y){for(var x=[],w=-1,g=0;g<y.length;g++)if(b[g]!==s){w++,x[w]=[];for(var T=0;T<y[g].length;T++)m[T]!==s&&x[w].push(y[g][T])}return x}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../../registry":911,"../histogram2d/calc":1098,"./clean_2d_array":1067,"./convert_column_xyz":1069,"./find_empties":1071,"./interp2d":1074,"./make_bound_array":1075}],1067:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").BADNUM;d.exports=function(t,f,n,o){var l,h,i,s,p,v;function m(T){if(!!r(T))return+T}if(f&&f.transpose){for(l=0,p=0;p<t.length;p++)l=Math.max(l,t[p].length);if(l===0)return!1;i=function(T){return T.length},s=function(T,M,P){return(T[P]||[])[M]}}else l=t.length,i=function(T,M){return T[M].length},s=function(T,M,P){return(T[M]||[])[P]};var b=function(T,M,P){return M===u||P===u?u:s(T,M,P)};function y(T){if(f&&f.type!=="carpet"&&f.type!=="contourcarpet"&&T&&T.type==="category"&&f["_"+T._id.charAt(0)].length){var M=T._id.charAt(0),P={},L=f["_"+M+"CategoryMap"]||f[M];for(p=0;p<L.length;p++)P[L[p]]=p;return function(I){var C=P[T._categories[I]];return C+1?C:u}}else return a.identity}var x=y(n),w=y(o);o&&o.type==="category"&&(l=o._categories.length);var g=new Array(l);for(p=0;p<l;p++)for(n&&n.type==="category"?h=n._categories.length:h=i(t,p),g[p]=new Array(h),v=0;v<h;v++)g[p][v]=m(b(t,w(p),x(v)));return g}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1068:[function(e,d,S){d.exports={min:"zmin",max:"zmax"}},{}],1069:[function(e,d,S){var r=e("../../lib"),a=e("../../constants/numerical").BADNUM,u=e("../../plots/cartesian/align_period");d.exports=function(t,f,n,o,l,h){var i=t._length,s=f.makeCalcdata(t,o),p=n.makeCalcdata(t,l);s=u(t,f,o,s),p=u(t,n,l,p);var v=t.text,m=v!==void 0&&r.isArray1D(v),b=t.hovertext,y=b!==void 0&&r.isArray1D(b),x,w,g=r.distinctVals(s),T=g.vals,M=r.distinctVals(p),P=M.vals,L=[],I,C,k=P.length,E=T.length;for(x=0;x<h.length;x++)L[x]=r.init2dArray(k,E);m&&(I=r.init2dArray(k,E)),y&&(C=r.init2dArray(k,E));var R=r.init2dArray(k,E);for(x=0;x<i;x++)if(s[x]!==a&&p[x]!==a){var O=r.findBin(s[x]+g.minDiff/2,T),N=r.findBin(p[x]+M.minDiff/2,P);for(w=0;w<h.length;w++){var G=h[w],U=t[G],Y=L[w];Y[N][O]=U[x],R[N][O]=x}m&&(I[N][O]=v[x]),y&&(C[N][O]=b[x])}for(t["_"+o]=T,t["_"+l]=P,w=0;w<h.length;w++)t["_"+h[w]]=L[w];m&&(t._text=I),y&&(t._hovertext=C),f&&f.type==="category"&&(t["_"+o+"CategoryMap"]=T.map(function(z){return f._categories[z]})),n&&n.type==="category"&&(t["_"+l+"CategoryMap"]=P.map(function(z){return n._categories[z]})),t._after2before=R}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825}],1070:[function(e,d,S){var r=e("../../lib"),a=e("./xyz_defaults"),u=e("../scatter/period_defaults"),c=e("./style_defaults"),t=e("../../components/colorscale/defaults"),f=e("./attributes");d.exports=function(o,l,h,i){function s(v,m){return r.coerce(o,l,f,v,m)}var p=a(o,l,s,i);if(!p){l.visible=!1;return}u(o,l,i,s),s("text"),s("hovertext"),s("hovertemplate"),c(o,l,s,i),s("hoverongaps"),s("connectgaps",r.isArray1D(l.z)&&l.zsmooth!==!1),t(o,l,i,s,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1065,"./style_defaults":1078,"./xyz_defaults":1079}],1071:[function(e,d,S){var r=e("../../lib").maxRowLength;d.exports=function(u){var c=[],t={},f=[],n=u[0],o=[],l=[0,0,0],h=r(u),i,s,p,v,m,b,y,x;for(s=0;s<u.length;s++)for(i=o,o=n,n=u[s+1]||[],p=0;p<h;p++)o[p]===void 0&&(b=(o[p-1]!==void 0?1:0)+(o[p+1]!==void 0?1:0)+(i[p]!==void 0?1:0)+(n[p]!==void 0?1:0),b?(s===0&&b++,p===0&&b++,s===u.length-1&&b++,p===o.length-1&&b++,b<4&&(t[[s,p]]=[s,p,b]),c.push([s,p,b])):f.push([s,p]));for(;f.length;){for(y={},x=!1,m=f.length-1;m>=0;m--)v=f[m],s=v[0],p=v[1],b=((t[[s-1,p]]||l)[2]+(t[[s+1,p]]||l)[2]+(t[[s,p-1]]||l)[2]+(t[[s,p+1]]||l)[2])/20,b&&(y[v]=[s,p,b],f.splice(m,1),x=!0);if(!x)throw"findEmpties iterated with no new neighbors";for(v in y)t[v]=y[v],c.push(y[v])}return c.sort(function(w,g){return g[2]-w[2]})}},{"../../lib":778}],1072:[function(e,d,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("../../components/colorscale").extractOpts;d.exports=function(f,n,o,l,h,i){var s=f.cd[0],p=s.trace,v=f.xa,m=f.ya,b=s.x,y=s.y,x=s.z,w=s.xCenter,g=s.yCenter,T=s.zmask,M=p.zhoverformat,P=b,L=y,I,C,k,E;if(f.index!==!1){try{k=Math.round(f.index[1]),E=Math.round(f.index[0])}catch{a.error("Error hovering on heatmap, pointNumber must be [row,col], found:",f.index);return}if(k<0||k>=x[0].length||E<0||E>x.length)return}else{if(r.inbox(n-b[0],n-b[b.length-1],0)>0||r.inbox(o-y[0],o-y[y.length-1],0)>0)return;if(i){var R;for(P=[2*b[0]-b[1]],R=1;R<b.length;R++)P.push((b[R]+b[R-1])/2);for(P.push([2*b[b.length-1]-b[b.length-2]]),L=[2*y[0]-y[1]],R=1;R<y.length;R++)L.push((y[R]+y[R-1])/2);L.push([2*y[y.length-1]-y[y.length-2]])}k=Math.max(0,Math.min(P.length-2,a.findBin(n,P))),E=Math.max(0,Math.min(L.length-2,a.findBin(o,L)))}var O=v.c2p(b[k]),N=v.c2p(b[k+1]),G=m.c2p(y[E]),U=m.c2p(y[E+1]),Y,z;i?(Y=s.orig_x||b,z=s.orig_y||y,N=O,I=Y[k],U=G,C=z[E]):(Y=s.orig_x||w||b,z=s.orig_y||g||y,I=w?Y[k]:(Y[k]+Y[k+1])/2,C=g?z[E]:(z[E]+z[E+1])/2,v&&v.type==="category"&&(I=b[k]),m&&m.type==="category"&&(C=y[E]),p.zsmooth&&(O=N=v.c2p(I),G=U=m.c2p(C)));var B=x[E][k];if(T&&!T[E][k]&&(B=void 0),!(B===void 0&&!p.hoverongaps)){var H;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[E])?H=s.hovertext[E][k]:Array.isArray(s.text)&&Array.isArray(s.text[E])&&(H=s.text[E][k]);var V=c(p),Z={type:"linear",range:[V.min,V.max],hoverformat:M,_separators:v._separators,_numFormat:v._numFormat},q=u.tickText(Z,B,"hover").text;return[a.extendFlat(f,{index:p._after2before?p._after2before[E][k]:[E,k],distance:f.maxHoverDistance,spikeDistance:f.maxSpikeDistance,x0:O,x1:N,y0:G,y1:U,xLabelVal:I,yLabelVal:C,zLabelVal:B,zLabel:q,text:H})]}}},{"../../components/colorscale":655,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],1073:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1065,"./calc":1066,"./colorbar":1068,"./defaults":1070,"./hover":1072,"./plot":1076,"./style":1077}],1074:[function(e,d,S){var r=e("../../lib"),a=.01,u=[[-1,0],[1,0],[0,-1],[0,1]];function c(f){return .5-.25*Math.min(1,f*.5)}d.exports=function(n,o){var l=1,h;for(t(n,o),h=0;h<o.length&&!(o[h][2]<4);h++);for(o=o.slice(h),h=0;h<100&&l>a;h++)l=t(n,o,c(l));return l>a&&r.log("interp2d didn't converge quickly",l),n};function t(f,n,o){var l=0,h,i,s,p,v,m,b,y,x,w,g,T,M;for(p=0;p<n.length;p++){for(h=n[p],i=h[0],s=h[1],g=f[i][s],w=0,x=0,v=0;v<4;v++)m=u[v],b=f[i+m[0]],b&&(y=b[s+m[1]],y!==void 0&&(w===0?T=M=y:(T=Math.min(T,y),M=Math.max(M,y)),x++,w+=y));if(x===0)throw"iterateInterp2d order is wrong: no defined neighbors";f[i][s]=w/x,g===void 0?x<4&&(l=1):(f[i][s]=(1+o)*f[i][s]-o*g,M>T&&(l=Math.max(l,Math.abs(f[i][s]-g)/(M-T))))}return l}},{"../../lib":778}],1075:[function(e,d,S){var r=e("../../registry"),a=e("../../lib").isArrayOrTypedArray;d.exports=function(c,t,f,n,o,l){var h=[],i=r.traceIs(c,"contour"),s=r.traceIs(c,"histogram"),p=r.traceIs(c,"gl2d"),v,m,b,y=a(t)&&t.length>1;if(y&&!s&&l.type!=="category"){var x=t.length;if(x<=o){if(i||p)h=t.slice(0,o);else if(o===1)h=[t[0]-.5,t[0]+.5];else{for(h=[1.5*t[0]-.5*t[1]],b=1;b<x;b++)h.push((t[b-1]+t[b])*.5);h.push(1.5*t[x-1]-.5*t[x-2])}if(x<o){var w=h[h.length-1],g=w-h[h.length-2];for(b=x;b<o;b++)w+=g,h.push(w)}}else return i?t.slice(0,o):t.slice(0,o+1)}else{var T=c[l._id.charAt(0)+"calendar"];if(s)v=l.r2c(f,0,T);else if(a(t)&&t.length===1)v=t[0];else if(f===void 0)v=0;else{var M=l.type==="log"?l.d2c:l.r2c;v=M(f,0,T)}for(m=n||1,b=i||p?0:-.5;b<o;b++)h.push(v+m*b)}return h}},{"../../lib":778,"../../registry":911}],1076:[function(e,d,S){var r=e("d3"),a=e("tinycolor2"),u=e("../../registry"),c=e("../../lib"),t=e("../../components/colorscale").makeColorScaleFuncFromTrace,f=e("../../constants/xmlns_namespaces");d.exports=function(h,i,s,p){var v=i.xaxis,m=i.yaxis;c.makeTraceGroups(p,s,"hm").each(function(b){var y=r.select(this),x=b[0],w=x.trace,g=x.z,T=x.x,M=x.y,P=x.xCenter,L=x.yCenter,I=u.traceIs(w,"contour"),C=I?"best":w.zsmooth,k=g.length,E=c.maxRowLength(g),R=!1,O=!1,N,G,U,Y,z,B;for(B=0;N===void 0&&B<T.length-1;)N=v.c2p(T[B]),B++;for(B=T.length-1;G===void 0&&B>0;)G=v.c2p(T[B]),B--;for(G<N&&(U=G,G=N,N=U,R=!0),B=0;Y===void 0&&B<M.length-1;)Y=m.c2p(M[B]),B++;for(B=M.length-1;z===void 0&&B>0;)z=m.c2p(M[B]),B--;if(z<Y&&(U=Y,Y=z,z=U,O=!0),I&&(P=T,L=M,T=x.xfill,M=x.yfill),C!=="fast"){var H=C==="best"?0:.5;N=Math.max(-H*v._length,N),G=Math.min((1+H)*v._length,G),Y=Math.max(-H*m._length,Y),z=Math.min((1+H)*m._length,z)}var V=Math.round(G-N),Z=Math.round(z-Y),q=V<=0||Z<=0;if(q){var J=y.selectAll("image").data([]);J.exit().remove();return}var ne,ve;C==="fast"?(ne=E,ve=k):(ne=V,ve=Z);var $=document.createElement("canvas");$.width=ne,$.height=ve;var j=$.getContext("2d"),ae=t(w,{noNumericCheck:!0,returnArray:!0}),ie,te;C==="fast"?(ie=R?function(Ie){return E-1-Ie}:c.identity,te=O?function(Ie){return k-1-Ie}:c.identity):(ie=function(Ie){return c.constrain(Math.round(v.c2p(T[Ie])-N),0,V)},te=function(Ie){return c.constrain(Math.round(m.c2p(M[Ie])-Y),0,Z)});var re=te(0),ce=[re,re],pe=R?0:1,fe=O?0:1,se=0,de=0,be=0,xe=0,ke,Re,Ke,ze,Je,qe;function Ee(Ie,He){if(Ie!==void 0){var Ye=ae(Ie);return Ye[0]=Math.round(Ye[0]),Ye[1]=Math.round(Ye[1]),Ye[2]=Math.round(Ye[2]),se+=He,de+=Ye[0]*He,be+=Ye[1]*He,xe+=Ye[2]*He,Ye}return[0,0,0,0]}function Ae(Ie,He,Ye,ut){var nt=Ie[Ye.bin0];if(nt===void 0)return Ee(void 0,1);var Ge=Ie[Ye.bin1],at=He[Ye.bin0],et=He[Ye.bin1],lt=Ge-nt||0,Ct=at-nt||0,Pt;return Ge===void 0?et===void 0?Pt=0:at===void 0?Pt=2*(et-nt):Pt=(2*et-at-nt)*2/3:et===void 0?at===void 0?Pt=0:Pt=(2*nt-Ge-at)*2/3:at===void 0?Pt=(2*et-Ge-nt)*2/3:Pt=et+nt-Ge-at,Ee(nt+Ye.frac*lt+ut.frac*(Ct+Ye.frac*Pt))}if(C){var Be=0,$e;try{$e=new Uint8Array(V*Z*4)}catch{$e=new Array(V*Z*4)}if(C==="best"){var xt=P||T,bt=L||M,Ne=new Array(xt.length),st=new Array(bt.length),_t=new Array(V),Ot=P?o:n,Wt=L?o:n,Et,jt,Zt;for(B=0;B<xt.length;B++)Ne[B]=Math.round(v.c2p(xt[B])-N);for(B=0;B<bt.length;B++)st[B]=Math.round(m.c2p(bt[B])-Y);for(B=0;B<V;B++)_t[B]=Ot(B,Ne);for(Re=0;Re<Z;Re++)for(Et=Wt(Re,st),jt=g[Et.bin0],Zt=g[Et.bin1],B=0;B<V;B++,Be+=4)qe=Ae(jt,Zt,_t[B],Et),l($e,Be,qe)}else for(Re=0;Re<k;Re++)for(Je=g[Re],ce=te(Re),B=0;B<V;B++)qe=Ee(Je[B],1),Be=(ce*V+ie(B))*4,l($e,Be,qe);var Mt=j.createImageData(V,Z);try{Mt.data.set($e)}catch{var At=Mt.data,ft=At.length;for(Re=0;Re<ft;Re++)At[Re]=$e[Re]}j.putImageData(Mt,0,0)}else{var ot=w.xgap,Te=w.ygap,Le=Math.floor(ot/2),Ve=Math.floor(Te/2);for(Re=0;Re<k;Re++)if(Je=g[Re],ce.reverse(),ce[fe]=te(Re+1),!(ce[0]===ce[1]||ce[0]===void 0||ce[1]===void 0))for(Ke=ie(0),ke=[Ke,Ke],B=0;B<E;B++)ke.reverse(),ke[pe]=ie(B+1),!(ke[0]===ke[1]||ke[0]===void 0||ke[1]===void 0)&&(ze=Je[B],qe=Ee(ze,(ke[1]-ke[0])*(ce[1]-ce[0])),j.fillStyle="rgba("+qe.join(",")+")",j.fillRect(ke[0]+Le,ce[0]+Ve,ke[1]-ke[0]-ot,ce[1]-ce[0]-Te))}de=Math.round(de/se),be=Math.round(be/se),xe=Math.round(xe/se);var Qe=a("rgb("+de+","+be+","+xe+")");h._hmpixcount=(h._hmpixcount||0)+se,h._hmlumcount=(h._hmlumcount||0)+se*Qe.getLuminance();var Me=y.selectAll("image").data(b);Me.enter().append("svg:image").attr({xmlns:f.svg,preserveAspectRatio:"none"}),Me.attr({height:Z,width:V,x:N,y:Y,"xlink:href":$.toDataURL("image/png")})})};function n(h,i){var s=i.length-2,p=c.constrain(c.findBin(h,i),0,s),v=i[p],m=i[p+1],b=c.constrain(p+(h-v)/(m-v)-.5,0,s),y=Math.round(b),x=Math.abs(b-y);return!b||b===s||!x?{bin0:y,bin1:y,frac:0}:{bin0:y,frac:x,bin1:Math.round(y+x/(b-y))}}function o(h,i){var s=i.length-1,p=c.constrain(c.findBin(h,i),0,s),v=i[p],m=i[p+1],b=(h-v)/(m-v)||0;return b<=0?{bin0:p,bin1:p,frac:0}:b<.5?{bin0:p,bin1:p+1,frac:b}:{bin0:p+1,bin1:p,frac:1-b}}function l(h,i,s){h[i]=s[0],h[i+1]=s[1],h[i+2]=s[2],h[i+3]=Math.round(s[3]*255)}},{"../../components/colorscale":655,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,d3:169,tinycolor2:576}],1077:[function(e,d,S){var r=e("d3");d.exports=function(u){r.select(u).selectAll(".hm image").style("opacity",function(c){return c.trace.opacity})}},{d3:169}],1078:[function(e,d,S){d.exports=function(a,u,c){var t=c("zsmooth");t===!1&&(c("xgap"),c("ygap")),c("zhoverformat")}},{}],1079:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../registry");d.exports=function(n,o,l,h,i,s){var p=l("z");i=i||"x",s=s||"y";var v,m;if(p===void 0||!p.length)return 0;if(a.isArray1D(n.z)){v=l(i),m=l(s);var b=a.minRowLength(v),y=a.minRowLength(m);if(b===0||y===0)return 0;o._length=Math.min(b,y,p.length)}else{if(v=c(i,l),m=c(s,l),!t(p))return 0;l("transpose"),o._length=null}if(n.type==="heatmapgl"||n.type==="contourgl")return!0;var x=u.getComponentMethod("calendars","handleTraceDefaults");return x(n,o,[i,s],h),!0};function c(f,n){var o=n(f),l=o?n(f+"type","array"):"scaled";return l==="scaled"&&(n(f+"0"),n("d"+f)),o}function t(f){for(var n=!0,o=!1,l=!1,h,i=0;i<f.length;i++){if(h=f[i],!a.isArrayOrTypedArray(h)){n=!1;break}h.length>0&&(o=!0);for(var s=0;s<h.length;s++)if(r(h[s])){l=!0;break}}return n&&o&&l}},{"../../lib":778,"../../registry":911,"fast-isnumeric":241}],1080:[function(e,d,S){for(var r=e("../heatmap/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},n=0;n<t.length;n++){var o=t[n];f[o]=r[o]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},u(f,a("",{cLetter:"z",autoColorDflt:!1})),d.exports=c(f,"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../heatmap/attributes":1065}],1081:[function(e,d,S){var r=e("gl-heatmap2d"),a=e("../../plots/cartesian/axes"),u=e("../../lib/str2rgbarray");function c(o,l){this.scene=o,this.uid=l,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=r(o.glplot,this.options),this.heatmap._trace=this}var t=c.prototype;t.handlePick=function(o){var l=this.options,h=l.shape,i=o.pointId,s=i%h[0],p=Math.floor(i/h[0]),v=i;return{trace:this,dataCoord:o.dataCoord,traceCoord:[l.x[s],l.y[p],l.z[v]],textLabel:this.textLabels[i],name:this.name,pointIndex:[p,s],hoverinfo:this.hoverinfo}},t.update=function(o,l){var h=l[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var i=h.z;this.options.z=[].concat.apply([],i);var s=i[0].length,p=i.length;this.options.shape=[s,p],this.options.x=h.x,this.options.y=h.y,this.options.zsmooth=o.zsmooth;var v=f(o);this.options.colorLevels=v.colorLevels,this.options.colorValues=v.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var m=this.scene.xaxis,b=this.scene.yaxis,y,x;o.zsmooth===!1&&(y={ppad:h.x[1]-h.x[0]},x={ppad:h.y[1]-h.y[0]}),o._extremes[m._id]=a.findExtremes(m,h.x,y),o._extremes[b._id]=a.findExtremes(b,h.y,x)},t.dispose=function(){this.heatmap.dispose()};function f(o){for(var l=o.colorscale,h=o.zmin,i=o.zmax,s=l.length,p=new Array(s),v=new Array(4*s),m=0;m<s;m++){var b=l[m],y=u(b[1]);p[m]=h+b[0]*(i-h);for(var x=0;x<4;x++)v[4*m+x]=y[x]}return{colorLevels:p,colorValues:v}}function n(o,l,h){var i=new c(o,l.uid);return i.update(l,h),i}d.exports=n},{"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"gl-heatmap2d":271}],1082:[function(e,d,S){var r=e("../../lib"),a=e("../heatmap/xyz_defaults"),u=e("../../components/colorscale/defaults"),c=e("./attributes");d.exports=function(f,n,o,l){function h(s,p){return r.coerce(f,n,c,s,p)}var i=a(f,n,h,l);if(!i){n.visible=!1;return}h("text"),h("zsmooth"),u(f,n,l,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/xyz_defaults":1079,"./attributes":1080}],1083:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":868,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"./attributes":1080,"./convert":1081,"./defaults":1082}],1084:[function(e,d,S){var r=e("../bar/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("./bin_attributes"),c=e("./constants"),t=e("../../lib/extend").extendFlat;d.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:t({},r.text,{}),hovertext:t({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:u("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:u("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({},{keys:c.eventDataKeys}),marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"./bin_attributes":1086,"./constants":1090}],1085:[function(e,d,S){d.exports=function(a,u){for(var c=a.length,t=0,f=0;f<c;f++)u[f]?(a[f]/=u[f],t+=a[f]):a[f]=null;return t}},{}],1086:[function(e,d,S){d.exports=function(a,u){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1087:[function(e,d,S){var r=e("fast-isnumeric");d.exports={count:function(a,u,c){return c[a]++,1},sum:function(a,u,c,t){var f=t[u];return r(f)?(f=Number(f),c[a]+=f,f):0},avg:function(a,u,c,t,f){var n=t[u];return r(n)&&(n=Number(n),c[a]+=n,f[a]++),0},min:function(a,u,c,t){var f=t[u];if(r(f))if(f=Number(f),r(c[a])){if(c[a]>f){var n=f-c[a];return c[a]=f,n}}else return c[a]=f,f;return 0},max:function(a,u,c,t){var f=t[u];if(r(f))if(f=Number(f),r(c[a])){if(c[a]<f){var n=f-c[a];return c[a]=f,n}}else return c[a]=f,f;return 0}}},{"fast-isnumeric":241}],1088:[function(e,d,S){var r=e("../../constants/numerical"),a=r.ONEAVGYEAR,u=r.ONEAVGMONTH,c=r.ONEDAY,t=r.ONEHOUR,f=r.ONEMIN,n=r.ONESEC,o=e("../../plots/cartesian/axes").tickIncrement;d.exports=function(v,m,b,y,x){var w=-1.1*m,g=-.1*m,T=v-g,M=b[0],P=b[1],L=Math.min(l(M+g,M+T,y,x),l(P+g,P+T,y,x)),I=Math.min(l(M+w,M+g,y,x),l(P+w,P+g,y,x)),C,k;if(L>I&&I<Math.abs(P-M)/4e3?(C=L,k=!1):(C=Math.min(L,I),k=!0),y.type==="date"&&C>c){var E=C===a?1:6,R=C===a?"M12":"M1";return function(O,N){var G=y.c2d(O,a,x),U=G.indexOf("-",E);U>0&&(G=G.substr(0,U));var Y=y.d2c(G,0,x);if(Y<O){var z=o(Y,R,!1,x);(Y+z)/2<O+v&&(Y=z)}return N&&k?o(Y,R,!0,x):Y}}return function(O,N){var G=C*Math.round(O/C);return G+C/10<O&&G+C*.9<O+v&&(G+=C),N&&k&&(G-=C),G}};function l(p,v,m,b){if(p*v<=0)return 1/0;for(var y=Math.abs(v-p),x=m.type==="date",w=h(y,x),g=0;g<10;g++){var T=h(w*80,x);if(w===T)break;if(i(T,p,v,x,m,b))w=T;else break}return w}function h(p,v){return v&&p>n?p>c?p>a*1.1?a:p>u*1.1?u:c:p>t?t:p>f?f:n:Math.pow(10,Math.floor(Math.log(p)/Math.LN10))}function i(p,v,m,b,y,x){if(b&&p>c){var w=s(v,y,x),g=s(m,y,x),T=p===a?0:1;return w[T]!==g[T]}return Math.floor(m/p)-Math.floor(v/p)>.1}function s(p,v,m){var b=v.c2d(p,a,m).split("-");return b[0]===""&&(b.unshift(),b[0]="-"+b[0]),b}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828}],1089:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../registry"),c=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),f=e("./bin_functions"),n=e("./norm_functions"),o=e("./average"),l=e("./bin_label_vals");function h(m,b){var y=[],x=[],w=c.getFromId(m,b.orientation==="h"?b.yaxis:b.xaxis),g=b.orientation==="h"?"y":"x",T={x:"y",y:"x"}[g],M=b[g+"calendar"],P=b.cumulative,L,I=i(m,b,w,g),C=I[0],k=I[1],E=typeof C.size=="string",R=[],O=E?R:C,N=[],G=[],U=[],Y=0,z=b.histnorm,B=b.histfunc,H=z.indexOf("density")!==-1,V,Z,q;P.enabled&&H&&(z=z.replace(/ ?density$/,""),H=!1);var J=B==="max"||B==="min",ne=J?null:0,ve=f.count,$=n[z],j=!1,ae=function(qe){return w.r2c(qe,0,M)},ie;for(a.isArrayOrTypedArray(b[T])&&B!=="count"&&(ie=b[T],j=B==="avg",ve=f[B]),L=ae(C.start),Z=ae(C.end)+(L-c.tickIncrement(L,C.size,!1,M))/1e6;L<Z&&y.length<1e6&&(V=c.tickIncrement(L,C.size,!1,M),y.push((L+V)/2),x.push(ne),U.push([]),R.push(L),H&&N.push(1/(V-L)),j&&G.push(0),!(V<=L));)L=V;R.push(L),!E&&w.type==="date"&&(O={start:ae(O.start),end:ae(O.end),size:O.size}),m._fullLayout._roundFnOpts||(m._fullLayout._roundFnOpts={});var te=b["_"+g+"bingroup"],re={leftGap:1/0,rightGap:1/0};te&&(m._fullLayout._roundFnOpts[te]||(m._fullLayout._roundFnOpts[te]=re),re=m._fullLayout._roundFnOpts[te]);var ce=x.length,pe=!0,fe=re.leftGap,se=re.rightGap,de={};for(L=0;L<k.length;L++){var be=k[L];q=a.findBin(be,O),q>=0&&q<ce&&(Y+=ve(q,L,x,ie,G),pe&&U[q].length&&be!==k[U[q][0]]&&(pe=!1),U[q].push(L),de[L]=q,fe=Math.min(fe,be-R[q]),se=Math.min(se,R[q+1]-be))}re.leftGap=fe,re.rightGap=se;var xe;pe||(xe=function(qe,Ee){return function(){var Ae=m._fullLayout._roundFnOpts[te];return l(Ae.leftGap,Ae.rightGap,R,w,M)(qe,Ee)}}),j&&(Y=o(x,G)),$&&$(x,Y,N),P.enabled&&v(x,P.direction,P.currentbin);var ke=Math.min(y.length,x.length),Re=[],Ke=0,ze=ke-1;for(L=0;L<ke;L++)if(x[L]){Ke=L;break}for(L=ke-1;L>=Ke;L--)if(x[L]){ze=L;break}for(L=Ke;L<=ze;L++)if(r(y[L])&&r(x[L])){var Je={p:y[L],s:x[L],b:0};P.enabled||(Je.pts=U[L],pe?Je.ph0=Je.ph1=U[L].length?k[U[L][0]]:y[L]:(b._computePh=!0,Je.ph0=xe(R[L]),Je.ph1=xe(R[L+1],!0))),Re.push(Je)}return Re.length===1&&(Re[0].width1=c.tickIncrement(Re[0].p,C.size,!1,M)-Re[0].p),t(Re,b),a.isArrayOrTypedArray(b.selectedpoints)&&a.tagSelected(Re,b,de),Re}function i(m,b,y,x,w){var g=x+"bins",T=m._fullLayout,M=b["_"+x+"bingroup"],P=T._histogramBinOpts[M],L=T.barmode==="overlay",I,C,k,E,R,O,N,G=function(xe){return y.r2c(xe,0,E)},U=function(xe){return y.c2r(xe,0,E)},Y=y.type==="date"?function(xe){return xe||xe===0?a.cleanDate(xe,null,E):null}:function(xe){return r(xe)?Number(xe):null};function z(xe,ke,Re){ke[xe+"Found"]?(ke[xe]=Y(ke[xe]),ke[xe]===null&&(ke[xe]=Re[xe])):(O[xe]=ke[xe]=Re[xe],a.nestedProperty(C[0],g+"."+xe).set(Re[xe]))}if(b["_"+x+"autoBinFinished"])delete b["_"+x+"autoBinFinished"];else{C=P.traces;var B=[],H=!0,V=!1,Z=!1;for(I=0;I<C.length;I++)if(k=C[I],k.visible){var q=P.dirs[I];R=k["_"+q+"pos0"]=y.makeCalcdata(k,q),B=a.concat(B,R),delete k["_"+x+"autoBinFinished"],b.visible===!0&&(H?H=!1:(delete k._autoBin,k["_"+x+"autoBinFinished"]=1),u.traceIs(k,"2dMap")&&(V=!0),k.type==="histogram2dcontour"&&(Z=!0))}E=C[0][x+"calendar"];var J=c.autoBin(B,y,P.nbins,V,E,P.sizeFound&&P.size),ne=C[0]._autoBin={};if(O=ne[P.dirs[0]]={},Z&&(P.size||(J.start=U(c.tickIncrement(G(J.start),J.size,!0,E))),P.end===void 0&&(J.end=U(c.tickIncrement(G(J.end),J.size,!1,E)))),L&&!u.traceIs(b,"2dMap")&&J._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(w)return[J,R,!0];J=s(m,b,y,x,g)}N=k.cumulative||{},N.enabled&&N.currentbin!=="include"&&(N.direction==="decreasing"?J.start=U(c.tickIncrement(G(J.start),J.size,!0,E)):J.end=U(c.tickIncrement(G(J.end),J.size,!1,E))),P.size=J.size,P.sizeFound||(O.size=J.size,a.nestedProperty(C[0],g+".size").set(J.size)),z("start",P,J),z("end",P,J)}R=b["_"+x+"pos0"],delete b["_"+x+"pos0"];var ve=b._input[g]||{},$=a.extendFlat({},P),j=P.start,ae=y.r2l(ve.start),ie=ae!==void 0;if((P.startFound||ie)&&ae!==y.r2l(j)){var te=ie?ae:a.aggNums(Math.min,null,R),re={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:P.size,tick0:j,calendar:E,range:[te,c.tickIncrement(te,P.size,!1,E)].map(y.l2r)},ce=c.tickFirst(re);ce>y.r2l(te)&&(ce=c.tickIncrement(ce,P.size,!0,E)),$.start=y.l2r(ce),ie||a.nestedProperty(b,g+".start").set($.start)}var pe=P.end,fe=y.r2l(ve.end),se=fe!==void 0;if((P.endFound||se)&&fe!==y.r2l(pe)){var de=se?fe:a.aggNums(Math.max,null,R);$.end=y.l2r(de),se||a.nestedProperty(b,g+".start").set($.end)}var be="autobin"+x;return b._input[be]===!1&&(b._input[g]=a.extendFlat({},b[g]||{}),delete b._input[be],delete b[be]),[$,R]}function s(m,b,y,x,w){var g=m._fullLayout,T=p(m,b),M=!1,P=1/0,L=[b],I,C,k;for(I=0;I<T.length;I++)if(C=T[I],C===b)M=!0;else if(!M)k=g._histogramBinOpts[C["_"+x+"bingroup"]],P=Math.min(P,k.size||C[w].size);else{var E=i(m,C,y,x,!0),R=E[0],O=E[2];C["_"+x+"autoBinFinished"]=1,C["_"+x+"pos0"]=E[1],O?L.push(C):P=Math.min(P,R.size)}var N=new Array(L.length);for(I=0;I<L.length;I++)for(var G=L[I]["_"+x+"pos0"],U=0;U<G.length;U++)if(G[U]!==void 0){N[I]=G[U];break}for(isFinite(P)||(P=a.distinctVals(N).minDiff),I=0;I<L.length;I++){C=L[I];var Y=C[x+"calendar"],z={start:y.c2r(N[I]-P/2,0,Y),end:y.c2r(N[I]+P/2,0,Y),size:P};C._input[w]=C[w]=z,k=g._histogramBinOpts[C["_"+x+"bingroup"]],k&&a.extendFlat(k,z)}return b[w]}function p(m,b){for(var y=b.xaxis,x=b.yaxis,w=b.orientation,g=[],T=m._fullData,M=0;M<T.length;M++){var P=T[M];P.type==="histogram"&&P.visible===!0&&P.orientation===w&&P.xaxis===y&&P.yaxis===x&&g.push(P)}return g}function v(m,b,y){var x,w,g;function T(P){g=m[P],m[P]/=2}function M(P){w=m[P],m[P]=g+w/2,g+=w}if(y==="half")if(b==="increasing")for(T(0),x=1;x<m.length;x++)M(x);else for(T(m.length-1),x=m.length-2;x>=0;x--)M(x);else if(b==="increasing"){for(x=1;x<m.length;x++)m[x]+=m[x-1];y==="exclude"&&(m.unshift(0),m.pop())}else{for(x=m.length-2;x>=0;x--)m[x]+=m[x+1];y==="exclude"&&(m.push(0),m.shift())}}d.exports={calc:h,calcAllAutoBins:i}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"../bar/arrays_to_calcdata":920,"./average":1085,"./bin_functions":1087,"./bin_label_vals":1088,"./norm_functions":1096,"fast-isnumeric":241}],1090:[function(e,d,S){d.exports={eventDataKeys:["binNumber"]}},{}],1091:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axis_ids"),u=e("../../registry").traceIs,c=e("../bar/defaults").handleGroupingDefaults,t=r.nestedProperty,f=e("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];d.exports=function(h,i){var s=i._histogramBinOpts={},p=[],v={},m=[],b,y,x,w,g,T,M;function P(Z,q){return r.coerce(b._input,b,b._module.attributes,Z,q)}function L(Z){return Z.orientation==="v"?"x":"y"}function I(Z,q){var J=a.getFromTrace({_fullLayout:i},Z,q);return J.type}function C(Z,q,J){var ne=Z.uid+"__"+J;q||(q=ne);var ve=I(Z,J),$=Z[J+"calendar"]||"",j=s[q],ae=!0;j&&(ve===j.axType&&$===j.calendar?(ae=!1,j.traces.push(Z),j.dirs.push(J)):(q=ne,ve!==j.axType&&r.warn(["Attempted to group the bins of trace",Z.index,"set on a","type:"+ve,"axis","with bins on","type:"+j.axType,"axis."].join(" ")),$!==j.calendar&&r.warn(["Attempted to group the bins of trace",Z.index,"set with a",$,"calendar","with bins",j.calendar?"on a "+j.calendar+" calendar":"w/o a set calendar"].join(" ")))),ae&&(s[q]={traces:[Z],dirs:[J],axType:ve,calendar:Z[J+"calendar"]||""}),Z["_"+J+"bingroup"]=q}for(g=0;g<h.length;g++)b=h[g],u(b,"histogram")&&(p.push(b),delete b._xautoBinFinished,delete b._yautoBinFinished,u(b,"2dMap")||c(b._input,b,i,P));var k=i._alignmentOpts||{};for(g=0;g<p.length;g++){if(b=p[g],x="",!u(b,"2dMap")){if(w=L(b),i.barmode==="group"&&b.alignmentgroup){var E=b[w+"axis"],R=f(i,E)+b.orientation;(k[R]||{})[b.alignmentgroup]&&(x=R)}!x&&i.barmode!=="overlay"&&(x=f(i,b.xaxis)+f(i,b.yaxis)+L(b))}x?(v[x]||(v[x]=[]),v[x].push(b)):m.push(b)}for(x in v){if(y=v[x],y.length===1){m.push(y[0]);continue}var O=!1;for(y.length&&(b=y[0],O=P("bingroup")),x=O||x,g=0;g<y.length;g++){b=y[g];var N=b._input.bingroup;N&&N!==x&&r.warn(["Trace",b.index,"must match","within bingroup",x+".","Ignoring its bingroup:",N,"setting."].join(" ")),b.bingroup=x,C(b,x,L(b))}}for(g=0;g<m.length;g++){b=m[g];var G=P("bingroup");if(u(b,"2dMap"))for(M=0;M<2;M++){w=o[M];var U=P(w+"bingroup",G?G+"__"+w:null);C(b,U,w)}else C(b,G,L(b))}for(x in s){var Y=s[x];for(y=Y.traces,T=0;T<n.length;T++){var z=n[T],B=z.name,H,V;if(!(B==="nbins"&&Y.sizeFound)){for(g=0;g<y.length;g++){if(b=y[g],w=Y.dirs[g],H=z.aStr[w],t(b._input,H).get()!==void 0){Y[B]=P(H),Y[B+"Found"]=!0;break}V=(b._autoBin||{})[w]||{},V[B]&&t(b,H).set(V[B])}if(B==="start"||B==="end")for(;g<y.length;g++)b=y[g],b["_"+w+"bingroup"]&&(V=(b._autoBin||{})[w]||{},P(H,V[B]));B==="nbins"&&!Y.sizeFound&&!Y.nbinsFound&&(b=y[0],Y[B]=P(H))}}}}},{"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/cartesian/constraints":835,"../../registry":911,"../bar/defaults":925}],1092:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../components/color"),c=e("../bar/style_defaults"),t=e("./attributes");d.exports=function(n,o,l,h){function i(P,L){return a.coerce(n,o,t,P,L)}var s=i("x"),p=i("y"),v=i("cumulative.enabled");v&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text"),i("hovertext"),i("hovertemplate");var m=i("orientation",p&&!s?"h":"v"),b=m==="v"?"x":"y",y=m==="v"?"y":"x",x=s&&p?Math.min(a.minRowLength(s)&&a.minRowLength(p)):a.minRowLength(o[b]||[]);if(!x){o.visible=!1;return}o._length=x;var w=r.getComponentMethod("calendars","handleTraceDefaults");w(n,o,["x","y"],h);var g=o[y];g&&i("histfunc"),i("histnorm"),i("autobin"+b),c(n,o,i,l,h),a.coerceSelectionMarkerOpacity(o,i);var T=(o.marker.line||{}).color,M=r.getComponentMethod("errorbars","supplyDefaults");M(n,o,T||u.defaultLine,{axis:"y"}),M(n,o,T||u.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":643,"../../lib":778,"../../registry":911,"../bar/style_defaults":936,"./attributes":1084}],1093:[function(e,d,S){d.exports=function(a,u,c,t,f){if(a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,"zLabelVal"in u&&(a.z=u.zLabelVal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),!(c.cumulative||{}).enabled){var n=Array.isArray(f)?t[0].pts[f[0]][f[1]]:t[f].pts;a.pointNumbers=n,a.binNumber=a.pointNumber,delete a.pointNumber,delete a.pointIndex;var o;if(c._indexToPoints){o=[];for(var l=0;l<n.length;l++)o=o.concat(c._indexToPoints[n[l]])}else o=n;a.pointIndices=o}return a}},{}],1094:[function(e,d,S){var r=e("../bar/hover").hoverPoints,a=e("../../plots/cartesian/axes").hoverLabelText;d.exports=function(c,t,f,n){var o=r(c,t,f,n);if(!!o){c=o[0];var l=c.cd[c.index],h=c.cd[0].trace;if(!h.cumulative.enabled){var i=h.orientation==="h"?"y":"x";c[i+"Label"]=a(c[i+"a"],l.ph0,l.ph1)}return o}}},{"../../plots/cartesian/axes":828,"../bar/hover":928}],1095:[function(e,d,S){d.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../bar/cross_trace_calc":924,"../bar/layout_attributes":930,"../bar/layout_defaults":931,"../bar/plot":932,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"./attributes":1084,"./calc":1089,"./cross_trace_defaults":1091,"./defaults":1092,"./event_data":1093,"./hover":1094}],1096:[function(e,d,S){d.exports={percent:function(r,a){for(var u=r.length,c=100/a,t=0;t<u;t++)r[t]*=c},probability:function(r,a){for(var u=r.length,c=0;c<u;c++)r[c]/=a},density:function(r,a,u,c){var t=r.length;c=c||1;for(var f=0;f<t;f++)r[f]*=u[f]*c},"probability density":function(r,a,u,c){var t=r.length;c&&(a/=c);for(var f=0;f<t;f++)r[f]*=u[f]/a}}},{}],1097:[function(e,d,S){var r=e("../histogram/attributes"),a=e("../histogram/bin_attributes"),u=e("../heatmap/attributes"),c=e("../../plots/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat;d.exports=n({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:a("x"),nbinsy:r.nbinsy,ybins:a("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:n({},r.bingroup,{}),xbingroup:n({},r.bingroup,{}),ybingroup:n({},r.bingroup,{}),xgap:u.xgap,ygap:u.ygap,zsmooth:u.zsmooth,zhoverformat:u.zhoverformat,hovertemplate:t({},{keys:"z"}),showlegend:n({},c.showlegend,{dflt:!1})},f("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../heatmap/attributes":1065,"../histogram/attributes":1084,"../histogram/bin_attributes":1086}],1098:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../histogram/bin_functions"),c=e("../histogram/norm_functions"),t=e("../histogram/average"),f=e("../histogram/bin_label_vals"),n=e("../histogram/calc").calcAllAutoBins;d.exports=function(s,p){var v=a.getFromId(s,p.xaxis),m=a.getFromId(s,p.yaxis),b=p.xcalendar,y=p.ycalendar,x=function(ft){return v.r2c(ft,0,b)},w=function(ft){return m.r2c(ft,0,y)},g=function(ft){return v.c2r(ft,0,b)},T=function(ft){return m.c2r(ft,0,y)},M,P,L,I,C=n(s,p,v,"x"),k=C[0],E=C[1],R=n(s,p,m,"y"),O=R[0],N=R[1],G=p._length;E.length>G&&E.splice(G,E.length-G),N.length>G&&N.splice(G,N.length-G);var U=[],Y=[],z=[],B=typeof k.size=="string",H=typeof O.size=="string",V=[],Z=[],q=B?V:k,J=H?Z:O,ne=0,ve=[],$=[],j=p.histnorm,ae=p.histfunc,ie=j.indexOf("density")!==-1,te=ae==="max"||ae==="min",re=te?null:0,ce=u.count,pe=c[j],fe=!1,se=[],de=[],be="z"in p?p.z:"marker"in p&&Array.isArray(p.marker.color)?p.marker.color:"";be&&ae!=="count"&&(fe=ae==="avg",ce=u[ae]);var xe=k.size,ke=x(k.start),Re=x(k.end)+(ke-a.tickIncrement(ke,xe,!1,b))/1e6;for(M=ke;M<Re;M=a.tickIncrement(M,xe,!1,b))Y.push(re),V.push(M),fe&&z.push(0);V.push(M);var Ke=Y.length,ze=(M-ke)/Ke,Je=g(ke+ze/2),qe=O.size,Ee=w(O.start),Ae=w(O.end)+(Ee-a.tickIncrement(Ee,qe,!1,y))/1e6;for(M=Ee;M<Ae;M=a.tickIncrement(M,qe,!1,y)){U.push(Y.slice()),Z.push(M);var Be=new Array(Ke);for(P=0;P<Ke;P++)Be[P]=[];$.push(Be),fe&&ve.push(z.slice())}Z.push(M);var $e=U.length,xt=(M-Ee)/$e,bt=T(Ee+xt/2);ie&&(se=o(Y.length,q,ze,B),de=o(U.length,J,xt,H)),!B&&v.type==="date"&&(q=l(x,q)),!H&&m.type==="date"&&(J=l(w,J));var Ne=!0,st=!0,_t=new Array(Ke),Ot=new Array($e),Wt=1/0,Et=1/0,jt=1/0,Zt=1/0;for(M=0;M<G;M++){var Mt=E[M],At=N[M];L=r.findBin(Mt,q),I=r.findBin(At,J),L>=0&&L<Ke&&I>=0&&I<$e&&(ne+=ce(L,M,U[I],be,ve[I]),$[I][L].push(M),Ne&&(_t[L]===void 0?_t[L]=Mt:_t[L]!==Mt&&(Ne=!1)),st&&(Ot[I]===void 0?Ot[I]=At:Ot[I]!==At&&(st=!1)),Wt=Math.min(Wt,Mt-V[L]),Et=Math.min(Et,V[L+1]-Mt),jt=Math.min(jt,At-Z[I]),Zt=Math.min(Zt,Z[I+1]-At))}if(fe)for(I=0;I<$e;I++)ne+=t(U[I],ve[I]);if(pe)for(I=0;I<$e;I++)pe(U[I],ne,se,de[I]);return{x:E,xRanges:h(V,Ne&&_t,Wt,Et,v,b),x0:Je,dx:ze,y:N,yRanges:h(Z,st&&Ot,jt,Zt,m,y),y0:bt,dy:xt,z:U,pts:$}};function o(i,s,p,v){var m=new Array(i),b;if(v)for(b=0;b<i;b++)m[b]=1/(s[b+1]-s[b]);else{var y=1/p;for(b=0;b<i;b++)m[b]=y}return m}function l(i,s){return{start:i(s.start),end:i(s.end),size:s.size}}function h(i,s,p,v,m,b){var y,x=i.length-1,w=new Array(x),g=f(p,v,i,m,b);for(y=0;y<x;y++){var T=(s||[])[y];w[y]=T===void 0?[g(i[y]),g(i[y+1],!0)]:[T,T]}return w}},{"../../lib":778,"../../plots/cartesian/axes":828,"../histogram/average":1085,"../histogram/bin_functions":1087,"../histogram/bin_label_vals":1088,"../histogram/calc":1089,"../histogram/norm_functions":1096}],1099:[function(e,d,S){var r=e("../../lib"),a=e("./sample_defaults"),u=e("../heatmap/style_defaults"),c=e("../../components/colorscale/defaults"),t=e("./attributes");d.exports=function(n,o,l,h){function i(s,p){return r.coerce(n,o,t,s,p)}a(n,o,i,h),o.visible!==!1&&(u(n,o,i,h),c(n,o,h,i,{prefix:"",cLetter:"z"}),i("hovertemplate"))}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/style_defaults":1078,"./attributes":1097,"./sample_defaults":1102}],1100:[function(e,d,S){var r=e("../heatmap/hover"),a=e("../../plots/cartesian/axes").hoverLabelText;d.exports=function(c,t,f,n,o,l){var h=r(c,t,f,n,o,l);if(!!h){c=h[0];var i=c.index,s=i[0],p=i[1],v=c.cd[0],m=v.xRanges[p],b=v.yRanges[s];return c.xLabel=a(c.xa,m[0],m[1]),c.yLabel=a(c.ya,b[0],b[1]),h}}},{"../../plots/cartesian/axes":828,"../heatmap/hover":1072}],1101:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"../heatmap/plot":1076,"../heatmap/style":1077,"../histogram/cross_trace_defaults":1091,"../histogram/event_data":1093,"./attributes":1097,"./defaults":1099,"./hover":1100}],1102:[function(e,d,S){var r=e("../../registry"),a=e("../../lib");d.exports=function(c,t,f,n){var o=f("x"),l=f("y"),h=a.minRowLength(o),i=a.minRowLength(l);if(!h||!i){t.visible=!1;return}t._length=Math.min(h,i);var s=r.getComponentMethod("calendars","handleTraceDefaults");s(c,t,["x","y"],n);var p=f("z")||f("marker.color");p&&f("histfunc"),f("histnorm"),f("autobinx"),f("autobiny")}},{"../../lib":778,"../../registry":911}],1103:[function(e,d,S){var r=e("../histogram2d/attributes"),a=e("../contour/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat;d.exports=c({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:c({},a.line.width,{dflt:.5}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},zhoverformat:r.zhoverformat,hovertemplate:r.hovertemplate},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../histogram2d/attributes":1097}],1104:[function(e,d,S){var r=e("../../lib"),a=e("../histogram2d/sample_defaults"),u=e("../contour/contours_defaults"),c=e("../contour/style_defaults"),t=e("./attributes");d.exports=function(n,o,l,h){function i(p,v){return r.coerce(n,o,t,p,v)}function s(p){return r.coerce2(n,o,t,p)}a(n,o,i,h),o.visible!==!1&&(u(n,o,i,s),c(n,o,i,h),i("hovertemplate"))}},{"../../lib":778,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../histogram2d/sample_defaults":1102,"./attributes":1103}],1105:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../contour/calc":1009,"../contour/colorbar":1011,"../contour/hover":1021,"../contour/plot":1026,"../contour/style":1028,"../histogram/cross_trace_defaults":1091,"./attributes":1103,"./defaults":1104}],1106:[function(e,d,S){for(var r=e("../../plots/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../lib/extend").extendFlat,c=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],f=[],n=[],o=0;o<t.length;o++){var l=c[t[o]];f.push("For the `"+t[o]+"` colormodel, it is ["+(l.zminDflt||l.min).join(", ")+"]."),n.push("For the `"+t[o]+"` colormodel, it is ["+(l.zmaxDflt||l.max).join(", ")+"].")}d.exports=u({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:u({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"./constants":1108}],1107:[function(e,d,S){var r=e("../../lib"),a=e("./constants"),u=e("fast-isnumeric"),c=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,f=e("./helpers").getImageSize;d.exports=function(i,s){var p,v;if(s._hasZ)p=s.z.length,v=t(s.z);else if(s._hasSource){var m=f(s.source);p=m.height,v=m.width}var b=c.getFromId(i,s.xaxis||"x"),y=c.getFromId(i,s.yaxis||"y"),x=b.d2c(s.x0)-s.dx/2,w=y.d2c(s.y0)-s.dy/2,g,T=[x,x+v*s.dx],M=[w,w+p*s.dy];if(b&&b.type==="log")for(g=0;g<v;g++)T.push(x+g*s.dx);if(y&&y.type==="log")for(g=0;g<p;g++)M.push(w+g*s.dy);s._extremes[b._id]=c.findExtremes(b,T),s._extremes[y._id]=c.findExtremes(y,M),s._scaler=l(s);var P={x0:x,y0:w,z:s.z,w:v,h:p};return[P]};function n(h,i,s,p){return function(v){return r.constrain((v-h)*i,s,p)}}function o(h,i){return function(s){return r.constrain(s,h,i)}}function l(h){var i=a.colormodel[h.colormodel],s=i.colormodel||h.colormodel,p=s.length;h._sArray=[];for(var v=0;v<p;v++)i.min[v]!==h.zmin[v]||i.max[v]!==h.zmax[v]?h._sArray.push(n(h.zmin[v],(i.max[v]-i.min[v])/(h.zmax[v]-h.zmin[v]),i.min[v],i.max[v])):h._sArray.push(o(i.min[v],i.max[v]));return function(m){for(var b=m.slice(0,p),y=0;y<p;y++){var x=b[y];if(!u(x))return!1;b[y]=h._sArray[y](x)}return b}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":1108,"./helpers":1111,"fast-isnumeric":241}],1108:[function(e,d,S){d.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(r){var a=r.slice(0,3);return a[1]=a[1]+"%",a[2]=a[2]+"%",a},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(r){var a=r.slice(0,4);return a[1]=a[1]+"%",a[2]=a[2]+"%",a},suffix:["\xB0","%","%",""]}}}},{}],1109:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("./constants"),c=e("../../snapshot/helpers").IMAGE_URL_PREFIX;d.exports=function(f,n){function o(i,s){return r.coerce(f,n,a,i,s)}o("source"),n.source&&!n.source.match(c)&&delete n.source,n._hasSource=!!n.source;var l=o("z");if(n._hasZ=!(l===void 0||!l.length||!l[0]||!l[0].length),!n._hasZ&&!n._hasSource){n.visible=!1;return}o("x0"),o("y0"),o("dx"),o("dy");var h;n._hasZ?(o("colormodel","rgb"),h=u.colormodel[n.colormodel],o("zmin",h.zminDflt||h.min),o("zmax",h.zmaxDflt||h.max)):n._hasSource&&(n.colormodel="rgba256",h=u.colormodel[n.colormodel],n.zmin=h.zminDflt,n.zmax=h.zmaxDflt),o("text"),o("hovertext"),o("hovertemplate"),n._length=null}},{"../../lib":778,"../../snapshot/helpers":915,"./attributes":1106,"./constants":1108}],1110:[function(e,d,S){d.exports=function(a,u){return"xVal"in u&&(a.x=u.xVal),"yVal"in u&&(a.y=u.yVal),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a.color=u.color,a.colormodel=u.trace.colormodel,a.z||(a.z=u.color),a}},{}],1111:[function(e,d,S){var r=e("image-size"),a=e("../../snapshot/helpers").IMAGE_URL_PREFIX,u=e("buffer/").Buffer;S.getImageSize=function(c){var t=c.replace(a,""),f=new u(t,"base64");return r(f)}},{"../../snapshot/helpers":915,"buffer/":111,"image-size":444}],1112:[function(e,d,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("./constants");d.exports=function(t,f,n){var o=t.cd[0],l=o.trace,h=t.xa,i=t.ya;if(!(r.inbox(f-o.x0,f-(o.x0+o.w*l.dx),0)>0||r.inbox(n-o.y0,n-(o.y0+o.h*l.dy),0)>0)){var s=Math.floor((f-o.x0)/l.dx),p=Math.floor(Math.abs(n-o.y0)/l.dy),v;if(l._hasZ?v=o.z[p][s]:l._hasSource&&(v=l._canvas.el.getContext("2d").getImageData(s,p,1,1).data),!!v){var m=o.hi||l.hoverinfo,b;if(m){var y=m.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(b=!0)}var x=u.colormodel[l.colormodel],w=x.colormodel||l.colormodel,g=w.length,T=l._scaler(v),M=x.suffix,P=[];(l.hovertemplate||b)&&(P.push("["+[T[0]+M[0],T[1]+M[1],T[2]+M[2]].join(", ")),g===4&&P.push(", "+T[3]+M[3]),P.push("]"),P=P.join(""),t.extraText=w.toUpperCase()+": "+P);var L;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[p])?L=l.hovertext[p][s]:Array.isArray(l.text)&&Array.isArray(l.text[p])&&(L=l.text[p][s]);var I=i.c2p(o.y0+(p+.5)*l.dy),C=o.x0+(s+.5)*l.dx,k=o.y0+(p+.5)*l.dy,E="["+v.slice(0,l.colormodel.length).join(", ")+"]";return[a.extendFlat(t,{index:[p,s],x0:h.c2p(o.x0+s*l.dx),x1:h.c2p(o.x0+(s+1)*l.dx),y0:I,y1:I,color:T,xVal:C,xLabelVal:C,yVal:k,yLabelVal:k,zLabelVal:E,text:L,hovertemplateLabels:{zLabel:E,colorLabel:P,"color[0]Label":T[0]+M[0],"color[1]Label":T[1]+M[1],"color[2]Label":T[2]+M[2],"color[3]Label":T[3]+M[3]}})]}}}},{"../../components/fx":683,"../../lib":778,"./constants":1108}],1113:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":841,"./attributes":1106,"./calc":1107,"./defaults":1109,"./event_data":1110,"./hover":1112,"./plot":1114,"./style":1115}],1114:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=a.strTranslate,c=e("../../constants/xmlns_namespaces"),t=e("./constants"),f=a.isIOS()||a.isSafari()||a.isIE();d.exports=function(o,l,h,i){var s=l.xaxis,p=l.yaxis,v=!(f||o._context._exportedPlot);a.makeTraceGroups(i,h,"im").each(function(m){var b=r.select(this),y=m[0],x=y.trace,w=v&&!x._hasZ&&x._hasSource&&s.type==="linear"&&p.type==="linear";x._fastImage=w;var g=y.z,T=y.x0,M=y.y0,P=y.w,L=y.h,I=x.dx,C=x.dy,k,E,R,O,N,G;for(G=0;k===void 0&&G<P;)k=s.c2p(T+G*I),G++;for(G=P;E===void 0&&G>0;)E=s.c2p(T+G*I),G--;for(G=0;O===void 0&&G<L;)O=p.c2p(M+G*C),G++;for(G=L;N===void 0&&G>0;)N=p.c2p(M+G*C),G--;if(E<k&&(R=E,E=k,k=R),N<O&&(R=O,O=N,N=R),!w){var U=.5;k=Math.max(-U*s._length,k),E=Math.min((1+U)*s._length,E),O=Math.max(-U*p._length,O),N=Math.min((1+U)*p._length,N)}var Y=Math.round(E-k),z=Math.round(N-O),B=Y<=0||z<=0;if(B){var H=b.selectAll("image").data([]);H.exit().remove();return}function V(te){var re=document.createElement("canvas");re.width=Y,re.height=z;var ce=re.getContext("2d"),pe=function(qe){return a.constrain(Math.round(s.c2p(T+qe*I)-k),0,Y)},fe=function(qe){return a.constrain(Math.round(p.c2p(M+qe*C)-O),0,z)},se=t.colormodel[x.colormodel],de=se.colormodel||x.colormodel,be=se.fmt,xe;for(G=0;G<y.w;G++){var ke=pe(G),Re=pe(G+1);if(!(Re===ke||isNaN(Re)||isNaN(ke)))for(var Ke=0;Ke<y.h;Ke++){var ze=fe(Ke),Je=fe(Ke+1);Je===ze||isNaN(Je)||isNaN(ze)||!te(G,Ke)||(xe=x._scaler(te(G,Ke)),xe?ce.fillStyle=de+"("+be(xe).join(",")+")":ce.fillStyle="rgba(0,0,0,0)",ce.fillRect(ke,ze,Re-ke,Je-ze))}}return re}var Z=b.selectAll("image").data([m]);Z.enter().append("svg:image").attr({xmlns:c.svg,preserveAspectRatio:"none"}),Z.exit().remove();var q="image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;";if(w){var J=a.simpleMap(s.range,s.r2l),ne=a.simpleMap(p.range,p.r2l),ve=J[1]<J[0],$=ne[1]>ne[0];if(ve||$){var j=k+Y/2,ae=O+z/2;q+="transform:"+u(j+"px",ae+"px")+"scale("+(ve?-1:1)+","+($?-1:1)+")"+u(-j+"px",-ae+"px")+";"}}Z.attr("style",q);var ie=new Promise(function(te){if(x._hasZ)te();else if(x._hasSource)if(x._canvas&&x._canvas.el.width===P&&x._canvas.el.height===L&&x._canvas.source===x.source)te();else{var re=document.createElement("canvas");re.width=P,re.height=L;var ce=re.getContext("2d");x._image=x._image||new Image;var pe=x._image;pe.onload=function(){ce.drawImage(pe,0,0),x._canvas={el:re,source:x.source},te()},pe.setAttribute("src",x.source)}}).then(function(){var te,re;if(x._hasZ)re=V(function(fe,se){return g[se][fe]}),te=re.toDataURL("image/png");else if(x._hasSource)if(w)te=x.source;else{var ce=x._canvas.el.getContext("2d"),pe=ce.getImageData(0,0,P,L).data;re=V(function(fe,se){var de=4*(se*P+fe);return[pe[de],pe[de+1],pe[de+2],pe[de+3]]}),te=re.toDataURL("image/png")}Z.attr({"xlink:href":te,height:z,width:Y,x:k,y:O})});o._promises.push(ie)})}},{"../../constants/xmlns_namespaces":754,"../../lib":778,"./constants":1108,d3:169}],1115:[function(e,d,S){var r=e("d3");d.exports=function(u){r.select(u).selectAll(".im image").style("opacity",function(c){return c[0].trace.opacity})}},{d3:169}],1116:[function(e,d,S){var r=e("../../lib/extend").extendFlat,a=e("../../lib/extend").extendDeep,u=e("../../plot_api/edit_types").overrideAll,c=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),f=e("../../plots/domain").attributes,n=e("../../plots/cartesian/layout_attributes"),o=e("../../plot_api/plot_template").templatedArray,l=e("../../constants/delta.js");e("../../constants/docs").FORMAT_LINK;var h=c({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},s={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=o("step",a({},i,{range:s}));d.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:r({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:r({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:l.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:l.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:r({},h,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:a({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:u({range:s,visible:r({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:r({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:c({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:r({},i.line.color,{}),width:r({},i.line.width,{dflt:1}),editType:"plot"},thickness:r({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":642,"../../constants/delta.js":747,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1117:[function(e,d,S){var r=e("../../plots/plots");S.name="indicator",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1118:[function(e,d,S){function r(a,u){var c=[],t=u.value;typeof u._lastValue!="number"&&(u._lastValue=u.value);var f=u._lastValue,n=f;return u._hasDelta&&typeof u.delta.reference=="number"&&(n=u.delta.reference),c[0]={y:t,lastY:f,delta:t-n,relativeDelta:(t-n)/n},c}d.exports={calc:r}},{}],1119:[function(e,d,S){d.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1120:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults,c=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),f=e("./constants.js"),n=e("../../plots/cartesian/tick_value_defaults"),o=e("../../plots/cartesian/tick_mark_defaults"),l=e("../../plots/cartesian/tick_label_defaults");function h(s,p,v,m){function b(N,G){return r.coerce(s,p,a,N,G)}u(p,m,b),b("mode"),p._hasNumber=p.mode.indexOf("number")!==-1,p._hasDelta=p.mode.indexOf("delta")!==-1,p._hasGauge=p.mode.indexOf("gauge")!==-1;var y=b("value");p._range=[0,typeof y=="number"?1.5*y:1];var x=new Array(2),w;p._hasNumber&&(b("number.valueformat"),b("number.font.color",m.font.color),b("number.font.family",m.font.family),b("number.font.size"),p.number.font.size===void 0&&(p.number.font.size=f.defaultNumberFontSize,x[0]=!0),b("number.prefix"),b("number.suffix"),w=p.number.font.size);var g;p._hasDelta&&(b("delta.font.color",m.font.color),b("delta.font.family",m.font.family),b("delta.font.size"),p.delta.font.size===void 0&&(p.delta.font.size=(p._hasNumber?.5:1)*(w||f.defaultNumberFontSize),x[1]=!0),b("delta.reference",p.value),b("delta.relative"),b("delta.valueformat",p.delta.relative?"2%":""),b("delta.increasing.symbol"),b("delta.increasing.color"),b("delta.decreasing.symbol"),b("delta.decreasing.color"),b("delta.position"),g=p.delta.font.size),p._scaleNumbers=(!p._hasNumber||x[0])&&(!p._hasDelta||x[1])||!1,b("title.font.color",m.font.color),b("title.font.family",m.font.family),b("title.font.size",.25*(w||g||f.defaultNumberFontSize)),b("title.text");var T,M,P,L;function I(N,G){return r.coerce(T,M,a.gauge,N,G)}function C(N,G){return r.coerce(P,L,a.gauge.axis,N,G)}if(p._hasGauge){T=s.gauge,T||(T={}),M=c.newContainer(p,"gauge"),I("shape");var k=p._isBullet=p.gauge.shape==="bullet";k||b("title.align","center");var E=p._isAngular=p.gauge.shape==="angular";E||b("align","center"),I("bgcolor",m.paper_bgcolor),I("borderwidth"),I("bordercolor"),I("bar.color"),I("bar.line.color"),I("bar.line.width");var R=f.valueThickness*(p.gauge.shape==="bullet"?.5:1);I("bar.thickness",R),t(T,M,{name:"steps",handleItemDefaults:i}),I("threshold.value"),I("threshold.thickness"),I("threshold.line.width"),I("threshold.line.color"),P={},T&&(P=T.axis||{}),L=c.newContainer(M,"axis"),C("visible"),p._range=C("range",p._range);var O={outerTicks:!0};n(P,L,C,"linear"),l(P,L,C,"linear",O),o(P,L,C,O)}else b("title.align","center"),b("align","center"),p._isAngular=p._isBullet=!1;p._length=null}function i(s,p){function v(m,b){return r.coerce(s,p,a.gauge.steps,m,b)}v("color"),v("line.color"),v("line.width"),v("range"),v("thickness")}d.exports={supplyDefaults:h}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"../../plots/domain":855,"./attributes":1116,"./constants.js":1119}],1121:[function(e,d,S){d.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":1116,"./base_plot":1117,"./calc":1118,"./defaults":1120,"./plot":1122}],1122:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=a.strScale,c=a.strTranslate,t=a.rad2deg,f=e("../../constants/alignment").MID_SHIFT,n=e("../../components/drawing"),o=e("./constants"),l=e("../../lib/svg_text_utils"),h=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/axis_defaults"),s=e("../../plots/cartesian/position_defaults"),p=e("../../plots/cartesian/layout_attributes"),v=e("../../components/color"),m={left:"start",center:"middle",right:"end"},b={left:0,center:.5,right:1},y=/[yzafpnmkMGTPEZY]/;function x(R){return R&&R.duration>0}d.exports=function(O,N,G,U){var Y=O._fullLayout,z;x(G)&&U&&(z=U()),a.makeTraceGroups(Y._indicatorlayer,N,"trace").each(function(B){var H=B[0],V=H.trace,Z=r.select(this),q=V._hasGauge,J=V._isAngular,ne=V._isBullet,ve=V.domain,$={w:Y._size.w*(ve.x[1]-ve.x[0]),h:Y._size.h*(ve.y[1]-ve.y[0]),l:Y._size.l+Y._size.w*ve.x[0],r:Y._size.r+Y._size.w*(1-ve.x[1]),t:Y._size.t+Y._size.h*(1-ve.y[1]),b:Y._size.b+Y._size.h*ve.y[0]},j=$.l+$.w/2,ae=$.t+$.h/2,ie=Math.min($.w/2,$.h),te=o.innerRadius*ie,re,ce,pe,fe=V.align||"center";if(ce=ae,!q)re=$.l+b[fe]*$.w,pe=function(qe){return I(qe,$.w,$.h)};else if(J&&(re=j,ce=ae+ie/2,pe=function(qe){return C(qe,.9*te)}),ne){var se=o.bulletPadding,de=1-o.bulletNumberDomainSize+se;re=$.l+(de+(1-de)*b[fe])*$.w,pe=function(qe){return I(qe,(o.bulletNumberDomainSize-se)*$.w,$.h)}}T(O,Z,B,{numbersX:re,numbersY:ce,numbersScaler:pe,transitionOpts:G,onComplete:z});var be,xe;q&&(be={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1},xe={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1});var ke=Z.selectAll("g.angular").data(J?B:[]);ke.exit().remove();var Re=Z.selectAll("g.angularaxis").data(J?B:[]);Re.exit().remove(),J&&g(O,Z,B,{radius:ie,innerRadius:te,gauge:ke,layer:Re,size:$,gaugeBg:be,gaugeOutline:xe,transitionOpts:G,onComplete:z});var Ke=Z.selectAll("g.bullet").data(ne?B:[]);Ke.exit().remove();var ze=Z.selectAll("g.bulletaxis").data(ne?B:[]);ze.exit().remove(),ne&&w(O,Z,B,{gauge:Ke,layer:ze,size:$,gaugeBg:be,gaugeOutline:xe,transitionOpts:G,onComplete:z});var Je=Z.selectAll("text.title").data(B);Je.exit().remove(),Je.enter().append("text").classed("title",!0),Je.attr("text-anchor",function(){return ne?m.right:m[V.title.align]}).text(V.title.text).call(n.font,V.title.font).call(l.convertToTspans,O),Je.attr("transform",function(){var qe=$.l+$.w*b[V.title.align],Ee,Ae=o.titlePadding,Be=n.bBox(Je.node());if(q){if(J)if(V.gauge.axis.visible){var $e=n.bBox(Re.node());Ee=$e.top-Ae-Be.bottom}else Ee=$.t+$.h/2-ie/2-Be.bottom-Ae;ne&&(Ee=ce-(Be.top+Be.bottom)/2,qe=$.l-o.bulletPadding*$.w)}else Ee=V._numbersTop-Ae-Be.bottom;return c(qe,Ee)})})};function w(R,O,N,G){var U=N[0].trace,Y=G.gauge,z=G.layer,B=G.gaugeBg,H=G.gaugeOutline,V=G.size,Z=U.domain,q=G.transitionOpts,J=G.onComplete,ne,ve,$,j,ae;Y.enter().append("g").classed("bullet",!0),Y.attr("transform",c(V.l,V.t)),z.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),z.selectAll("g.xbulletaxistick,path,text").remove();var ie=V.h,te=U.gauge.bar.thickness*ie,re=Z.x[0],ce=Z.x[0]+(Z.x[1]-Z.x[0])*(U._hasNumber||U._hasDelta?1-o.bulletNumberDomainSize:1);ne=L(R,U.gauge.axis),ne._id="xbulletaxis",ne.domain=[re,ce],ne.setScale(),ve=h.calcTicks(ne),$=h.makeTransTickFn(ne),j=h.getTickSigns(ne)[2],ae=V.t+V.h,ne.visible&&(h.drawTicks(R,ne,{vals:ne.ticks==="inside"?h.clipEnds(ne,ve):ve,layer:z,path:h.makeTickPath(ne,ae,j),transFn:$}),h.drawLabels(R,ne,{vals:ve,layer:z,transFn:$,labelFns:h.makeLabelFns(ne,ae)}));function pe(Re){Re.attr("width",function(Ke){return Math.max(0,ne.c2p(Ke.range[1])-ne.c2p(Ke.range[0]))}).attr("x",function(Ke){return ne.c2p(Ke.range[0])}).attr("y",function(Ke){return .5*(1-Ke.thickness)*ie}).attr("height",function(Ke){return Ke.thickness*ie})}var fe=[B].concat(U.gauge.steps),se=Y.selectAll("g.bg-bullet").data(fe);se.enter().append("g").classed("bg-bullet",!0).append("rect"),se.select("rect").call(pe).call(M),se.exit().remove();var de=Y.selectAll("g.value-bullet").data([U.gauge.bar]);de.enter().append("g").classed("value-bullet",!0).append("rect"),de.select("rect").attr("height",te).attr("y",(ie-te)/2).call(M),x(q)?de.select("rect").transition().duration(q.duration).ease(q.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()}).attr("width",Math.max(0,ne.c2p(Math.min(U.gauge.axis.range[1],N[0].y)))):de.select("rect").attr("width",typeof N[0].y=="number"?Math.max(0,ne.c2p(Math.min(U.gauge.axis.range[1],N[0].y))):0),de.exit().remove();var be=N.filter(function(){return U.gauge.threshold.value}),xe=Y.selectAll("g.threshold-bullet").data(be);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",ne.c2p(U.gauge.threshold.value)).attr("x2",ne.c2p(U.gauge.threshold.value)).attr("y1",(1-U.gauge.threshold.thickness)/2*ie).attr("y2",(1-(1-U.gauge.threshold.thickness)/2)*ie).call(v.stroke,U.gauge.threshold.line.color).style("stroke-width",U.gauge.threshold.line.width),xe.exit().remove();var ke=Y.selectAll("g.gauge-outline").data([H]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(pe).call(M),ke.exit().remove()}function g(R,O,N,G){var U=N[0].trace,Y=G.size,z=G.radius,B=G.innerRadius,H=G.gaugeBg,V=G.gaugeOutline,Z=[Y.l+Y.w/2,Y.t+Y.h/2+z/2],q=G.gauge,J=G.layer,ne=G.transitionOpts,ve=G.onComplete,$=Math.PI/2;function j(xt){var bt=U.gauge.axis.range[0],Ne=U.gauge.axis.range[1],st=(xt-bt)/(Ne-bt)*Math.PI-$;return st<-$?-$:st>$?$:st}function ae(xt){return r.svg.arc().innerRadius((B+z)/2-xt/2*(z-B)).outerRadius((B+z)/2+xt/2*(z-B)).startAngle(-$)}function ie(xt){xt.attr("d",function(bt){return ae(bt.thickness).startAngle(j(bt.range[0])).endAngle(j(bt.range[1]))()})}var te,re,ce,pe;q.enter().append("g").classed("angular",!0),q.attr("transform",c(Z[0],Z[1])),J.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),J.selectAll("g.xangularaxistick,path,text").remove(),te=L(R,U.gauge.axis),te.type="linear",te.range=U.gauge.axis.range,te._id="xangularaxis",te.setScale();var fe=function(xt){return(te.range[0]-xt.x)/(te.range[1]-te.range[0])*Math.PI+Math.PI},se={},de=h.makeLabelFns(te,0),be=de.labelStandoff;se.xFn=function(xt){var bt=fe(xt);return Math.cos(bt)*be},se.yFn=function(xt){var bt=fe(xt),Ne=Math.sin(bt)>0?.2:1;return-Math.sin(bt)*(be+xt.fontSize*Ne)+Math.abs(Math.cos(bt))*(xt.fontSize*f)},se.anchorFn=function(xt){var bt=fe(xt),Ne=Math.cos(bt);return Math.abs(Ne)<.1?"middle":Ne>0?"start":"end"},se.heightFn=function(xt,bt,Ne){var st=fe(xt);return-.5*(1+Math.sin(st))*Ne};var xe=function(xt){return c(Z[0]+z*Math.cos(xt),Z[1]-z*Math.sin(xt))};ce=function(xt){return xe(fe(xt))};var ke=function(xt){var bt=fe(xt);return xe(bt)+"rotate("+-t(bt)+")"};if(re=h.calcTicks(te),pe=h.getTickSigns(te)[2],te.visible){pe=te.ticks==="inside"?-1:1;var Re=(te.linewidth||1)/2;h.drawTicks(R,te,{vals:re,layer:J,path:"M"+pe*Re+",0h"+pe*te.ticklen,transFn:ke}),h.drawLabels(R,te,{vals:re,layer:J,transFn:ce,labelFns:se})}var Ke=[H].concat(U.gauge.steps),ze=q.selectAll("g.bg-arc").data(Ke);ze.enter().append("g").classed("bg-arc",!0).append("path"),ze.select("path").call(ie).call(M),ze.exit().remove();var Je=ae(U.gauge.bar.thickness),qe=q.selectAll("g.value-arc").data([U.gauge.bar]);qe.enter().append("g").classed("value-arc",!0).append("path");var Ee=qe.select("path");x(ne)?(Ee.transition().duration(ne.duration).ease(ne.easing).each("end",function(){ve&&ve()}).each("interrupt",function(){ve&&ve()}).attrTween("d",P(Je,j(N[0].lastY),j(N[0].y))),U._lastValue=N[0].y):Ee.attr("d",typeof N[0].y=="number"?Je.endAngle(j(N[0].y)):"M0,0Z"),Ee.call(M),qe.exit().remove(),Ke=[];var Ae=U.gauge.threshold.value;Ae&&Ke.push({range:[Ae,Ae],color:U.gauge.threshold.color,line:{color:U.gauge.threshold.line.color,width:U.gauge.threshold.line.width},thickness:U.gauge.threshold.thickness});var Be=q.selectAll("g.threshold-arc").data(Ke);Be.enter().append("g").classed("threshold-arc",!0).append("path"),Be.select("path").call(ie).call(M),Be.exit().remove();var $e=q.selectAll("g.gauge-outline").data([V]);$e.enter().append("g").classed("gauge-outline",!0).append("path"),$e.select("path").call(ie).call(M),$e.exit().remove()}function T(R,O,N,G){var U=N[0].trace,Y=G.numbersX,z=G.numbersY,B=U.align||"center",H=m[B],V=G.transitionOpts,Z=G.onComplete,q=a.ensureSingle(O,"g","numbers"),J,ne,ve,$=[];U._hasNumber&&$.push("number"),U._hasDelta&&($.push("delta"),U.delta.position==="left"&&$.reverse());var j=q.selectAll("text").data($);j.enter().append("text"),j.attr("text-anchor",function(){return H}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),j.exit().remove();function ae(xe,ke,Re,Ke){if(xe.match("s")&&Re>=0!=Ke>=0&&!ke(Re).slice(-1).match(y)&&!ke(Ke).slice(-1).match(y)){var ze=xe.slice().replace("s","f").replace(/\d+/,function(qe){return parseInt(qe)-1}),Je=L(R,{tickformat:ze});return function(qe){return Math.abs(qe)<1?h.tickText(Je,qe).text:ke(qe)}}else return ke}function ie(){var xe=L(R,{tickformat:U.number.valueformat},U._range);xe.setScale(),h.prepTicks(xe);var ke=function(qe){return h.tickText(xe,qe).text},Re=U.number.suffix,Ke=U.number.prefix,ze=q.select("text.number");function Je(){var qe=typeof N[0].y=="number"?Ke+ke(N[0].y)+Re:"-";ze.text(qe).call(n.font,U.number.font).call(l.convertToTspans,R)}return x(V)?ze.transition().duration(V.duration).ease(V.easing).each("end",function(){Je(),Z&&Z()}).each("interrupt",function(){Je(),Z&&Z()}).attrTween("text",function(){var qe=r.select(this),Ee=r.interpolateNumber(N[0].lastY,N[0].y);U._lastValue=N[0].y;var Ae=ae(U.number.valueformat,ke,N[0].lastY,N[0].y);return function(Be){qe.text(Ke+Ae(Ee(Be))+Re)}}):Je(),J=k(Ke+ke(N[0].y)+Re,U.number.font,H,R),ze}function te(){var xe=L(R,{tickformat:U.delta.valueformat},U._range);xe.setScale(),h.prepTicks(xe);var ke=function(Ee){return h.tickText(xe,Ee).text},Re=function(Ee){var Ae=U.delta.relative?Ee.relativeDelta:Ee.delta;return Ae},Ke=function(Ee,Ae){return Ee===0||typeof Ee!="number"||isNaN(Ee)?"-":(Ee>0?U.delta.increasing.symbol:U.delta.decreasing.symbol)+Ae(Ee)},ze=function(Ee){return Ee.delta>=0?U.delta.increasing.color:U.delta.decreasing.color};U._deltaLastValue===void 0&&(U._deltaLastValue=Re(N[0]));var Je=q.select("text.delta");Je.call(n.font,U.delta.font).call(v.fill,ze({delta:U._deltaLastValue}));function qe(){Je.text(Ke(Re(N[0]),ke)).call(v.fill,ze(N[0])).call(l.convertToTspans,R)}return x(V)?Je.transition().duration(V.duration).ease(V.easing).tween("text",function(){var Ee=r.select(this),Ae=Re(N[0]),Be=U._deltaLastValue,$e=ae(U.delta.valueformat,ke,Be,Ae),xt=r.interpolateNumber(Be,Ae);return U._deltaLastValue=Ae,function(bt){Ee.text(Ke(xt(bt),$e)),Ee.call(v.fill,ze({delta:xt(bt)}))}}).each("end",function(){qe(),Z&&Z()}).each("interrupt",function(){qe(),Z&&Z()}):qe(),ne=k(Ke(Re(N[0]),ke),U.delta.font,H,R),Je}var re=U.mode+U.align,ce;if(U._hasDelta&&(ce=te(),re+=U.delta.position+U.delta.font.size+U.delta.font.family+U.delta.valueformat,re+=U.delta.increasing.symbol+U.delta.decreasing.symbol,ve=ne),U._hasNumber&&(ie(),re+=U.number.font.size+U.number.font.family+U.number.valueformat+U.number.suffix+U.number.prefix,ve=J),U._hasDelta&&U._hasNumber){var pe=[(J.left+J.right)/2,(J.top+J.bottom)/2],fe=[(ne.left+ne.right)/2,(ne.top+ne.bottom)/2],se,de,be=.75*U.delta.font.size;U.delta.position==="left"&&(se=E(U,"deltaPos",0,-1*(J.width*b[U.align]+ne.width*(1-b[U.align])+be),re,Math.min),de=pe[1]-fe[1],ve={width:J.width+ne.width+be,height:Math.max(J.height,ne.height),left:ne.left+se,right:J.right,top:Math.min(J.top,ne.top+de),bottom:Math.max(J.bottom,ne.bottom+de)}),U.delta.position==="right"&&(se=E(U,"deltaPos",0,J.width*(1-b[U.align])+ne.width*b[U.align]+be,re,Math.max),de=pe[1]-fe[1],ve={width:J.width+ne.width+be,height:Math.max(J.height,ne.height),left:J.left,right:ne.right+se,top:Math.min(J.top,ne.top+de),bottom:Math.max(J.bottom,ne.bottom+de)}),U.delta.position==="bottom"&&(se=null,de=ne.height,ve={width:Math.max(J.width,ne.width),height:J.height+ne.height,left:Math.min(J.left,ne.left),right:Math.max(J.right,ne.right),top:J.bottom-J.height,bottom:J.bottom+ne.height}),U.delta.position==="top"&&(se=null,de=J.top,ve={width:Math.max(J.width,ne.width),height:J.height+ne.height,left:Math.min(J.left,ne.left),right:Math.max(J.right,ne.right),top:J.bottom-J.height-ne.height,bottom:J.bottom}),ce.attr({dx:se,dy:de})}(U._hasNumber||U._hasDelta)&&q.attr("transform",function(){var xe=G.numbersScaler(ve);re+=xe[2];var ke=E(U,"numbersScale",1,xe[0],re,Math.min),Re;U._scaleNumbers||(ke=1),U._isAngular?Re=z-ke*ve.bottom:Re=z-ke*(ve.top+ve.bottom)/2,U._numbersTop=ke*ve.top+Re;var Ke=ve[B];B==="center"&&(Ke=(ve.left+ve.right)/2);var ze=Y-ke*Ke;return ze=E(U,"numbersTranslate",0,ze,re,Math.max),c(ze,Re)+u(ke)})}function M(R){R.each(function(O){v.stroke(r.select(this),O.line.color)}).each(function(O){v.fill(r.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function P(R,O,N){return function(){var G=r.interpolate(O,N);return function(U){return R.endAngle(G(U))()}}}function L(R,O,N){var G=R._fullLayout,U=a.extendFlat({type:"linear",ticks:"outside",range:N,showline:!0},O),Y={type:"linear",_id:"x"+O._id},z={letter:"x",font:G.font,noHover:!0,noTickson:!0};function B(H,V){return a.coerce(U,Y,p,H,V)}return i(U,Y,B,z,G),s(U,Y,B,z),Y}function I(R,O,N){var G=Math.min(O/R.width,N/R.height);return[G,R,O+"x"+N]}function C(R,O){var N=Math.sqrt(R.width/2*(R.width/2)+R.height*R.height),G=O/N;return[G,R,O]}function k(R,O,N,G){var U=document.createElementNS("http://www.w3.org/2000/svg","text"),Y=r.select(U);return Y.text(R).attr("x",0).attr("y",0).attr("text-anchor",N).attr("data-unformatted",R).call(l.convertToTspans,G).call(n.font,O),n.bBox(Y.node())}function E(R,O,N,G,U,Y){var z="_cache"+O;R[z]&&R[z].key===U||(R[z]={key:U,value:N});var B=a.aggNums(Y,null,[R[z].value,G],2);return R[z].value=B,B}},{"../../components/color":643,"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"./constants":1119,d3:169}],1123:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll;function n(h){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function o(h){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var l=d.exports=f(t({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:o(),y:o(),z:o()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),showlegend:t({},c.showlegend,{dflt:!1})},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:u.opacity,lightposition:u.lightposition,lighting:u.lighting,flatshading:u.flatshading,contour:u.contour,hoverinfo:t({},c.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1124:[function(e,d,S){var r=e("../../components/colorscale/calc"),a=e("../streamtube/calc").processGrid,u=e("../streamtube/calc").filter;d.exports=function(t,f){f._len=Math.min(f.x.length,f.y.length,f.z.length,f.value.length),f._x=u(f.x,f._len),f._y=u(f.y,f._len),f._z=u(f.z,f._len),f._value=u(f.value,f._len);var n=a(f);f._gridFill=n.fill,f._Xs=n.Xs,f._Ys=n.Ys,f._Zs=n.Zs,f._len=n.len;for(var o=1/0,l=-1/0,h=0;h<f._len;h++){var i=f._value[h];o=Math.min(o,i),l=Math.max(l,i)}f._minValues=o,f._maxValues=l,f._vMin=f.isomin===void 0||f.isomin===null?o:f.isomin,f._vMax=f.isomax===void 0||f.isomin===null?l:f.isomax,r(t,f,{vals:[f._vMin,f._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651,"../streamtube/calc":1295}],1125:[function(e,d,S){var r=e("gl-mesh3d"),a=e("../../lib/gl_format_color").parseColorScale,u=e("../../lib/str2rgbarray"),c=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),f=function(s,p){for(var v=p.length-1;v>0;v--){var m=Math.min(p[v],p[v-1]),b=Math.max(p[v],p[v-1]);if(b>m&&m<s&&s<=b)return{id:v,distRatio:(b-s)/(b-m)}}return{id:0,distRatio:0}};function n(s,p,v){this.scene=s,this.uid=v,this.mesh=p,this.name="",this.data=null,this.showContour=!1}var o=n.prototype;o.handlePick=function(s){if(s.object===this.mesh){var p=s.data.index,v=this.data._meshX[p],m=this.data._meshY[p],b=this.data._meshZ[p],y=this.data._Ys.length,x=this.data._Zs.length,w=f(v,this.data._Xs).id,g=f(m,this.data._Ys).id,T=f(b,this.data._Zs).id,M=s.index=T+x*g+x*y*w;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var P=this.data.hovertext||this.data.text;return Array.isArray(P)&&P[M]!==void 0?s.textLabel=P[M]:P&&(s.textLabel=P),!0}},o.update=function(s){var p=this.scene,v=p.fullSceneLayout;this.data=h(s);function m(g,T,M,P){return T.map(function(L){return g.d2l(L,0,P)*M})}var b=t(m(v.xaxis,s._meshX,p.dataScale[0],s.xcalendar),m(v.yaxis,s._meshY,p.dataScale[1],s.ycalendar),m(v.zaxis,s._meshZ,p.dataScale[2],s.zcalendar)),y=t(s._meshI,s._meshJ,s._meshK),x={positions:b,cells:y,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:u(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},w=c(s);x.vertexIntensity=s._meshIntensity,x.vertexIntensityBounds=[w.min,w.max],x.colormap=a(s),this.mesh.update(x)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var l=["xyz","xzy","yxz","yzx","zxy","zyx"];function h(s){s._meshI=[],s._meshJ=[],s._meshK=[];var p=s.surface.show,v=s.spaceframe.show,m=s.surface.fill,b=s.spaceframe.fill,y=!1,x=!1,w=0,g,T,M=s._Xs,P=s._Ys,L=s._Zs,I=M.length,C=P.length,k=L.length,E=l.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),R=function(Mt,At,ft){switch(E){case 5:return ft+k*At+k*C*Mt;case 4:return ft+k*Mt+k*I*At;case 3:return At+C*ft+C*k*Mt;case 2:return At+C*Mt+C*I*ft;case 1:return Mt+I*ft+I*k*At;default:return Mt+I*At+I*C*ft}},O=s._minValues,N=s._maxValues,G=s._vMin,U=s._vMax,Y,z,B,H;function V(Mt,At,ft){for(var ot=H.length,Te=T;Te<ot;Te++)if(Mt===Y[Te]&&At===z[Te]&&ft===B[Te])return Te;return-1}function Z(){T=g}function q(){Y=[],z=[],B=[],H=[],g=0,Z()}function J(Mt,At,ft,ot){return Y.push(Mt),z.push(At),B.push(ft),H.push(ot),g++,g-1}function ne(Mt,At,ft){return s._meshI.push(Mt),s._meshJ.push(At),s._meshK.push(ft),w++,w-1}function ve(Mt,At,ft){for(var ot=[],Te=0;Te<Mt.length;Te++)ot[Te]=(Mt[Te]+At[Te]+ft[Te])/3;return ot}function $(Mt,At,ft){for(var ot=[],Te=0;Te<Mt.length;Te++)ot[Te]=Mt[Te]*(1-ft)+ft*At[Te];return ot}var j;function ae(Mt){j=Mt}function ie(Mt,At){var ft=Mt[0],ot=Mt[1],Te=Mt[2],Le=ve(ft,ot,Te),Ve=Math.sqrt(1-j),Qe=$(Le,ft,Ve),Me=$(Le,ot,Ve),Ie=$(Le,Te,Ve),He=At[0],Ye=At[1],ut=At[2];return{xyzv:[[ft,ot,Me],[Me,Qe,ft],[ot,Te,Ie],[Ie,Me,ot],[Te,ft,Qe],[Qe,Ie,Te]],abc:[[He,Ye,-1],[-1,-1,He],[Ye,ut,-1],[-1,-1,Ye],[ut,He,-1],[-1,-1,ut]]}}function te(Mt,At){return Mt==="all"||Mt===null?!0:Mt.indexOf(At)>-1}function re(Mt,At){return Mt===null?At:Mt}function ce(Mt,At,ft){Z();var ot=[At],Te=[ft];if(j>=1)ot=[At],Te=[ft];else if(j>0){var Le=ie(At,ft);ot=Le.xyzv,Te=Le.abc}for(var Ve=0;Ve<ot.length;Ve++){At=ot[Ve],ft=Te[Ve];for(var Qe=[],Me=0;Me<3;Me++){var Ie=At[Me][0],He=At[Me][1],Ye=At[Me][2],ut=At[Me][3],nt=ft[Me]>-1?ft[Me]:V(Ie,He,Ye);nt>-1?Qe[Me]=nt:Qe[Me]=J(Ie,He,Ye,re(Mt,ut))}ne(Qe[0],Qe[1],Qe[2])}}function pe(Mt,At,ft){var ot=function(Te,Le,Ve){ce(Mt,[At[Te],At[Le],At[Ve]],[ft[Te],ft[Le],ft[Ve]])};ot(0,1,2),ot(2,3,0)}function fe(Mt,At,ft){var ot=function(Te,Le,Ve){ce(Mt,[At[Te],At[Le],At[Ve]],[ft[Te],ft[Le],ft[Ve]])};ot(0,1,2),ot(3,0,1),ot(2,3,0),ot(1,2,3)}function se(Mt,At,ft,ot){var Te=Mt[3];Te<ft&&(Te=ft),Te>ot&&(Te=ot);for(var Le=(Mt[3]-Te)/(Mt[3]-At[3]+1e-9),Ve=[],Qe=0;Qe<4;Qe++)Ve[Qe]=(1-Le)*Mt[Qe]+Le*At[Qe];return Ve}function de(Mt,At,ft){return Mt>=At&&Mt<=ft}function be(Mt){var At=.001*(U-G);return Mt>=G-At&&Mt<=U+At}function xe(Mt){for(var At=[],ft=0;ft<4;ft++){var ot=Mt[ft];At.push([s._x[ot],s._y[ot],s._z[ot],s._value[ot]])}return At}var ke=3;function Re(Mt,At,ft,ot,Te,Le){Le||(Le=1),ft=[-1,-1,-1];var Ve=!1,Qe=[de(At[0][3],ot,Te),de(At[1][3],ot,Te),de(At[2][3],ot,Te)];if(!Qe[0]&&!Qe[1]&&!Qe[2])return!1;var Me=function(He,Ye,ut){return be(Ye[0][3])&&be(Ye[1][3])&&be(Ye[2][3])?(ce(He,Ye,ut),!0):Le<ke?Re(He,Ye,ut,G,U,++Le):!1};if(Qe[0]&&Qe[1]&&Qe[2])return Me(Mt,At,ft)||Ve;var Ie=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(He){if(Qe[He[0]]&&Qe[He[1]]&&!Qe[He[2]]){var Ye=At[He[0]],ut=At[He[1]],nt=At[He[2]],Ge=se(nt,Ye,ot,Te),at=se(nt,ut,ot,Te);Ve=Me(Mt,[at,Ge,Ye],[-1,-1,ft[He[0]]])||Ve,Ve=Me(Mt,[Ye,ut,at],[ft[He[0]],ft[He[1]],-1])||Ve,Ie=!0}}),Ie||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(He){if(Qe[He[0]]&&!Qe[He[1]]&&!Qe[He[2]]){var Ye=At[He[0]],ut=At[He[1]],nt=At[He[2]],Ge=se(ut,Ye,ot,Te),at=se(nt,Ye,ot,Te);Ve=Me(Mt,[at,Ge,Ye],[-1,-1,ft[He[0]]])||Ve,Ie=!0}}),Ve}function Ke(Mt,At,ft,ot){var Te=!1,Le=xe(At),Ve=[de(Le[0][3],ft,ot),de(Le[1][3],ft,ot),de(Le[2][3],ft,ot),de(Le[3][3],ft,ot)];if(!Ve[0]&&!Ve[1]&&!Ve[2]&&!Ve[3])return Te;if(Ve[0]&&Ve[1]&&Ve[2]&&Ve[3])return x&&(Te=fe(Mt,Le,At)||Te),Te;var Qe=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Me){if(Ve[Me[0]]&&Ve[Me[1]]&&Ve[Me[2]]&&!Ve[Me[3]]){var Ie=Le[Me[0]],He=Le[Me[1]],Ye=Le[Me[2]],ut=Le[Me[3]];if(x)Te=ce(Mt,[Ie,He,Ye],[At[Me[0]],At[Me[1]],At[Me[2]]])||Te;else{var nt=se(ut,Ie,ft,ot),Ge=se(ut,He,ft,ot),at=se(ut,Ye,ft,ot);Te=ce(null,[nt,Ge,at],[-1,-1,-1])||Te}Qe=!0}}),Qe||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Me){if(Ve[Me[0]]&&Ve[Me[1]]&&!Ve[Me[2]]&&!Ve[Me[3]]){var Ie=Le[Me[0]],He=Le[Me[1]],Ye=Le[Me[2]],ut=Le[Me[3]],nt=se(Ye,Ie,ft,ot),Ge=se(Ye,He,ft,ot),at=se(ut,He,ft,ot),et=se(ut,Ie,ft,ot);x?(Te=ce(Mt,[Ie,et,nt],[At[Me[0]],-1,-1])||Te,Te=ce(Mt,[He,Ge,at],[At[Me[1]],-1,-1])||Te):Te=pe(null,[nt,Ge,at,et],[-1,-1,-1,-1])||Te,Qe=!0}}),Qe)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Me){if(Ve[Me[0]]&&!Ve[Me[1]]&&!Ve[Me[2]]&&!Ve[Me[3]]){var Ie=Le[Me[0]],He=Le[Me[1]],Ye=Le[Me[2]],ut=Le[Me[3]],nt=se(He,Ie,ft,ot),Ge=se(Ye,Ie,ft,ot),at=se(ut,Ie,ft,ot);x?(Te=ce(Mt,[Ie,nt,Ge],[At[Me[0]],-1,-1])||Te,Te=ce(Mt,[Ie,Ge,at],[At[Me[0]],-1,-1])||Te,Te=ce(Mt,[Ie,at,nt],[At[Me[0]],-1,-1])||Te):Te=ce(null,[nt,Ge,at],[-1,-1,-1])||Te,Qe=!0}}),Te}function ze(Mt,At,ft,ot,Te,Le,Ve,Qe,Me,Ie,He){var Ye=!1;return y&&(te(Mt,"A")&&(Ye=Ke(null,[At,ft,ot,Le],Ie,He)||Ye),te(Mt,"B")&&(Ye=Ke(null,[ft,ot,Te,Me],Ie,He)||Ye),te(Mt,"C")&&(Ye=Ke(null,[ft,Le,Ve,Me],Ie,He)||Ye),te(Mt,"D")&&(Ye=Ke(null,[ot,Le,Qe,Me],Ie,He)||Ye),te(Mt,"E")&&(Ye=Ke(null,[ft,ot,Le,Me],Ie,He)||Ye)),x&&(Ye=Ke(Mt,[ft,ot,Le,Me],Ie,He)||Ye),Ye}function Je(Mt,At,ft,ot,Te,Le,Ve,Qe){return[Qe[0]===!0?!0:Re(Mt,xe([At,ft,ot]),[At,ft,ot],Le,Ve),Qe[1]===!0?!0:Re(Mt,xe([ot,Te,At]),[ot,Te,At],Le,Ve)]}function qe(Mt,At,ft,ot,Te,Le,Ve,Qe,Me){return Qe?Je(Mt,At,ft,Te,ot,Le,Ve,Me):Je(Mt,ft,Te,ot,At,Le,Ve,Me)}function Ee(Mt,At,ft,ot,Te,Le,Ve){var Qe=!1,Me,Ie,He,Ye,ut=function(){Qe=Re(Mt,[Me,Ie,He],[-1,-1,-1],Te,Le)||Qe,Qe=Re(Mt,[He,Ye,Me],[-1,-1,-1],Te,Le)||Qe},nt=Ve[0],Ge=Ve[1],at=Ve[2];return nt&&(Me=$(xe([R(At,ft-0,ot-0)])[0],xe([R(At-1,ft-0,ot-0)])[0],nt),Ie=$(xe([R(At,ft-0,ot-1)])[0],xe([R(At-1,ft-0,ot-1)])[0],nt),He=$(xe([R(At,ft-1,ot-1)])[0],xe([R(At-1,ft-1,ot-1)])[0],nt),Ye=$(xe([R(At,ft-1,ot-0)])[0],xe([R(At-1,ft-1,ot-0)])[0],nt),ut()),Ge&&(Me=$(xe([R(At-0,ft,ot-0)])[0],xe([R(At-0,ft-1,ot-0)])[0],Ge),Ie=$(xe([R(At-0,ft,ot-1)])[0],xe([R(At-0,ft-1,ot-1)])[0],Ge),He=$(xe([R(At-1,ft,ot-1)])[0],xe([R(At-1,ft-1,ot-1)])[0],Ge),Ye=$(xe([R(At-1,ft,ot-0)])[0],xe([R(At-1,ft-1,ot-0)])[0],Ge),ut()),at&&(Me=$(xe([R(At-0,ft-0,ot)])[0],xe([R(At-0,ft-0,ot-1)])[0],at),Ie=$(xe([R(At-0,ft-1,ot)])[0],xe([R(At-0,ft-1,ot-1)])[0],at),He=$(xe([R(At-1,ft-1,ot)])[0],xe([R(At-1,ft-1,ot-1)])[0],at),Ye=$(xe([R(At-1,ft-0,ot)])[0],xe([R(At-1,ft-0,ot-1)])[0],at),ut()),Qe}function Ae(Mt,At,ft,ot,Te,Le,Ve,Qe,Me,Ie,He,Ye){var ut=Mt;return Ye?(y&&Mt==="even"&&(ut=null),ze(ut,At,ft,ot,Te,Le,Ve,Qe,Me,Ie,He)):(y&&Mt==="odd"&&(ut=null),ze(ut,Me,Qe,Ve,Le,Te,ot,ft,At,Ie,He))}function Be(Mt,At,ft,ot,Te){for(var Le=[],Ve=0,Qe=0;Qe<At.length;Qe++)for(var Me=At[Qe],Ie=1;Ie<k;Ie++)for(var He=1;He<C;He++)Le.push(qe(Mt,R(Me,He-1,Ie-1),R(Me,He-1,Ie),R(Me,He,Ie-1),R(Me,He,Ie),ft,ot,(Me+He+Ie)%2,Te&&Te[Ve]?Te[Ve]:[])),Ve++;return Le}function $e(Mt,At,ft,ot,Te){for(var Le=[],Ve=0,Qe=0;Qe<At.length;Qe++)for(var Me=At[Qe],Ie=1;Ie<I;Ie++)for(var He=1;He<k;He++)Le.push(qe(Mt,R(Ie-1,Me,He-1),R(Ie,Me,He-1),R(Ie-1,Me,He),R(Ie,Me,He),ft,ot,(Ie+Me+He)%2,Te&&Te[Ve]?Te[Ve]:[])),Ve++;return Le}function xt(Mt,At,ft,ot,Te){for(var Le=[],Ve=0,Qe=0;Qe<At.length;Qe++)for(var Me=At[Qe],Ie=1;Ie<C;Ie++)for(var He=1;He<I;He++)Le.push(qe(Mt,R(He-1,Ie-1,Me),R(He-1,Ie,Me),R(He,Ie-1,Me),R(He,Ie,Me),ft,ot,(He+Ie+Me)%2,Te&&Te[Ve]?Te[Ve]:[])),Ve++;return Le}function bt(Mt,At,ft){for(var ot=1;ot<k;ot++)for(var Te=1;Te<C;Te++)for(var Le=1;Le<I;Le++)Ae(Mt,R(Le-1,Te-1,ot-1),R(Le-1,Te-1,ot),R(Le-1,Te,ot-1),R(Le-1,Te,ot),R(Le,Te-1,ot-1),R(Le,Te-1,ot),R(Le,Te,ot-1),R(Le,Te,ot),At,ft,(Le+Te+ot)%2)}function Ne(Mt,At,ft){x=!0,bt(Mt,At,ft),x=!1}function st(Mt,At,ft){y=!0,bt(Mt,At,ft),y=!1}function _t(Mt,At,ft,ot,Te,Le){for(var Ve=[],Qe=0,Me=0;Me<At.length;Me++)for(var Ie=At[Me],He=1;He<k;He++)for(var Ye=1;Ye<C;Ye++)Ve.push(Ee(Mt,Ie,Ye,He,ft,ot,Te[Me],Le&&Le[Qe]?Le[Qe]:[])),Qe++;return Ve}function Ot(Mt,At,ft,ot,Te,Le){for(var Ve=[],Qe=0,Me=0;Me<At.length;Me++)for(var Ie=At[Me],He=1;He<I;He++)for(var Ye=1;Ye<k;Ye++)Ve.push(Ee(Mt,He,Ie,Ye,ft,ot,Te[Me],Le&&Le[Qe]?Le[Qe]:[])),Qe++;return Ve}function Wt(Mt,At,ft,ot,Te,Le){for(var Ve=[],Qe=0,Me=0;Me<At.length;Me++)for(var Ie=At[Me],He=1;He<C;He++)for(var Ye=1;Ye<I;Ye++)Ve.push(Ee(Mt,Ye,He,Ie,ft,ot,Te[Me],Le&&Le[Qe]?Le[Qe]:[])),Qe++;return Ve}function Et(Mt,At){for(var ft=[],ot=Mt;ot<At;ot++)ft.push(ot);return ft}function jt(){for(var Mt=0;Mt<I;Mt++)for(var At=0;At<C;At++)for(var ft=0;ft<k;ft++){var ot=R(Mt,At,ft);J(s._x[ot],s._y[ot],s._z[ot],s._value[ot])}}function Zt(){q(),jt();var Mt=null;if(v&&b&&(ae(b),Ne(Mt,G,U)),p&&m){ae(m);for(var At=s.surface.pattern,ft=s.surface.count,ot=0;ot<ft;ot++){var Te=ft===1?.5:ot/(ft-1),Le=(1-Te)*G+Te*U,Ve=Math.abs(Le-O),Qe=Math.abs(Le-N),Me=Ve>Qe?[O,Le]:[Le,N];st(At,Me[0],Me[1])}}var Ie=[[Math.min(G,N),Math.max(G,N)],[Math.min(O,U),Math.max(O,U)]];["x","y","z"].forEach(function(He){for(var Ye=[],ut=0;ut<Ie.length;ut++){var nt=0,Ge=Ie[ut][0],at=Ie[ut][1],et=s.slices[He];if(et.show&&et.fill){ae(et.fill);var lt=[],Ct=[],Pt=[];if(et.locations.length)for(var $t=0;$t<et.locations.length;$t++){var je=f(et.locations[$t],He==="x"?M:He==="y"?P:L);je.distRatio===0?lt.push(je.id):je.id>0&&(Ct.push(je.id),He==="x"?Pt.push([je.distRatio,0,0]):He==="y"?Pt.push([0,je.distRatio,0]):Pt.push([0,0,je.distRatio]))}else He==="x"?lt=Et(1,I-1):He==="y"?lt=Et(1,C-1):lt=Et(1,k-1);Ct.length>0&&(He==="x"?Ye[nt]=_t(Mt,Ct,Ge,at,Pt,Ye[nt]):He==="y"?Ye[nt]=Ot(Mt,Ct,Ge,at,Pt,Ye[nt]):Ye[nt]=Wt(Mt,Ct,Ge,at,Pt,Ye[nt]),nt++),lt.length>0&&(He==="x"?Ye[nt]=Be(Mt,lt,Ge,at,Ye[nt]):He==="y"?Ye[nt]=$e(Mt,lt,Ge,at,Ye[nt]):Ye[nt]=xt(Mt,lt,Ge,at,Ye[nt]),nt++)}var Oe=s.caps[He];Oe.show&&Oe.fill&&(ae(Oe.fill),He==="x"?Ye[nt]=Be(Mt,[0,I-1],Ge,at,Ye[nt]):He==="y"?Ye[nt]=$e(Mt,[0,C-1],Ge,at,Ye[nt]):Ye[nt]=xt(Mt,[0,k-1],Ge,at,Ye[nt]),nt++)}}),w===0&&q(),s._meshX=Y,s._meshY=z,s._meshZ=B,s._meshIntensity=H,s._Xs=M,s._Ys=P,s._Zs=L}return Zt(),s}function i(s,p){var v=s.glplot.gl,m=r({gl:v}),b=new n(s,m,p.uid);return m._trace=b,b.update(p),s.glplot.add(m),b}d.exports={findNearestOnAxis:f,generateIsoMeshes:h,createIsosurfaceTrace:i}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"gl-mesh3d":309}],1126:[function(e,d,S){var r=e("../../lib"),a=e("../../registry"),u=e("./attributes"),c=e("../../components/colorscale/defaults");function t(n,o,l,h){function i(s,p){return r.coerce(n,o,u,s,p)}f(n,o,l,h,i)}function f(n,o,l,h,i){var s=i("isomin"),p=i("isomax");p!=null&&s!==void 0&&s!==null&&s>p&&(o.isomin=null,o.isomax=null);var v=i("x"),m=i("y"),b=i("z"),y=i("value");if(!v||!v.length||!m||!m.length||!b||!b.length||!y||!y.length){o.visible=!1;return}var x=a.getComponentMethod("calendars","handleTraceDefaults");x(n,o,["x","y","z"],h),["x","y","z"].forEach(function(M){var P="caps."+M,L=i(P+".show");L&&i(P+".fill");var I="slices."+M,C=i(I+".show");C&&(i(I+".fill"),i(I+".locations"))});var w=i("spaceframe.show");w&&i("spaceframe.fill");var g=i("surface.show");g&&(i("surface.count"),i("surface.fill"),i("surface.pattern"));var T=i("contour.show");T&&(i("contour.color"),i("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(M){i(M)}),c(n,o,h,i,{prefix:"",cLetter:"c"}),o._length=null}d.exports={supplyDefaults:t,supplyIsoDefaults:f}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1123}],1127:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1123,"./calc":1124,"./convert":1125,"./defaults":1126}],1128:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../surface/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;d.exports=t({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:a({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:u.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:t({},u.contours.x.show,{}),color:u.contours.x.color,width:u.contours.x.width,editType:"calc"},lightposition:{x:t({},u.lightposition.x,{dflt:1e5}),y:t({},u.lightposition.y,{dflt:1e5}),z:t({},u.lightposition.z,{dflt:0}),editType:"calc"},lighting:t({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},u.lighting),hoverinfo:t({},c.hoverinfo,{editType:"calc"}),showlegend:t({},c.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../surface/attributes":1311}],1129:[function(e,d,S){var r=e("../../components/colorscale/calc");d.exports=function(u,c){c.intensity&&r(u,c,{vals:c.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1130:[function(e,d,S){var r=e("gl-mesh3d"),a=e("delaunay-triangulate"),u=e("alpha-shape"),c=e("convex-hull"),t=e("../../lib/gl_format_color").parseColorScale,f=e("../../lib/str2rgbarray"),n=e("../../components/colorscale").extractOpts,o=e("../../plots/gl3d/zip3");function l(y,x,w){this.scene=y,this.uid=w,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=l.prototype;h.handlePick=function(y){if(y.object===this.mesh){var x=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[x]!==void 0?y.textLabel=w[x]:w&&(y.textLabel=w),!0}};function i(y){for(var x=[],w=y.length,g=0;g<w;g++)x[g]=f(y[g]);return x}function s(y,x,w,g){for(var T=[],M=x.length,P=0;P<M;P++)T[P]=y.d2l(x[P],0,g)*w;return T}function p(y){for(var x=[],w=y.length,g=0;g<w;g++)x[g]=Math.round(y[g]);return x}function v(y,x){for(var w=["x","y","z"].indexOf(y),g=[],T=x.length,M=0;M<T;M++)g[M]=[x[M][(w+1)%3],x[M][(w+2)%3]];return a(g)}function m(y,x){for(var w=y.length,g=0;g<w;g++)if(y[g]<=-.5||y[g]>=x-.5)return!1;return!0}h.update=function(y){var x=this.scene,w=x.fullSceneLayout;this.data=y;var g=y.x.length,T=o(s(w.xaxis,y.x,x.dataScale[0],y.xcalendar),s(w.yaxis,y.y,x.dataScale[1],y.ycalendar),s(w.zaxis,y.z,x.dataScale[2],y.zcalendar)),M;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!m(y.i,g)||!m(y.j,g)||!m(y.k,g))return;M=o(p(y.i),p(y.j),p(y.k))}else y.alphahull===0?M=c(T):y.alphahull>0?M=u(y.alphahull,T):M=v(y.delaunayaxis,T);var P={positions:T,cells:M,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:f(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var L=n(y);this.color="#fff";var I=y.intensitymode;P[I+"Intensity"]=y.intensity,P[I+"IntensityBounds"]=[L.min,L.max],P.colormap=t(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],P.vertexColors=i(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],P.cellColors=i(y.facecolor)):(this.color=y.color,P.meshColor=f(y.color));this.mesh.update(P)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(y,x){var w=y.glplot.gl,g=r({gl:w}),T=new l(y,g,x.uid);return g._trace=T,T.update(x),y.glplot.add(g),T}d.exports=b},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":309}],1131:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../components/colorscale/defaults"),c=e("./attributes");d.exports=function(f,n,o,l){function h(m,b){return a.coerce(f,n,c,m,b)}function i(m){var b=m.map(function(y){var x=h(y);return x&&a.isArrayOrTypedArray(x)?x:null});return b.every(function(y){return y&&y.length===b[0].length})&&b}var s=i(["x","y","z"]);if(!s){n.visible=!1;return}if(i(["i","j","k"]),n.i&&(!n.j||!n.k)||n.j&&(!n.k||!n.i)||n.k&&(!n.i||!n.j)){n.visible=!1;return}var p=r.getComponentMethod("calendars","handleTraceDefaults");p(f,n,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(m){h(m)});var v=h("contour.show");v&&(h("contour.color"),h("contour.width")),"intensity"in f?(h("intensity"),h("intensitymode"),u(f,n,l,h,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in f?h("facecolor"):"vertexcolor"in f?h("vertexcolor"):h("color",o)),h("text"),h("hovertext"),h("hovertemplate"),n._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1128}],1132:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1128,"./calc":1129,"./convert":1130,"./defaults":1131}],1133:[function(e,d,S){var r=e("../../lib").extendFlat,a=e("../scatter/attributes"),u=e("../../components/drawing/attributes").dash,c=e("../../components/fx/attributes"),t=e("../../constants/delta.js"),f=t.INCREASING.COLOR,n=t.DECREASING.COLOR,o=a.line;function l(h){return{line:{color:r({},o.color,{dflt:h}),width:o.width,dash:u,editType:"style"},editType:"style"}}d.exports={xperiod:a.xperiod,xperiod0:a.xperiod0,xperiodalignment:a.xperiodalignment,x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:r({},o.width,{}),dash:r({},u,{}),editType:"style"},increasing:l(f),decreasing:l(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:r({},c.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":664,"../../components/fx/attributes":674,"../../constants/delta.js":747,"../../lib":778,"../scatter/attributes":1187}],1134:[function(e,d,S){var r=e("../../lib"),a=r._,u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function f(h,i){var s=u.getFromId(h,i.xaxis),p=u.getFromId(h,i.yaxis),v=l(h,s,i),m=i._minDiff;i._minDiff=null;var b=i._origX;i._origX=null;var y=i._xcalc;i._xcalc=null;var x=o(h,i,b,y,p,n);return i._extremes[s._id]=u.findExtremes(s,y,{vpad:m/2}),x.length?(r.extendFlat(x[0].t,{wHover:m/2,tickLen:v}),x):[{t:{empty:!0}}]}function n(h,i,s,p){return{o:h,h:i,l:s,c:p}}function o(h,i,s,p,v,m){for(var b=v.makeCalcdata(i,"open"),y=v.makeCalcdata(i,"high"),x=v.makeCalcdata(i,"low"),w=v.makeCalcdata(i,"close"),g=Array.isArray(i.text),T=Array.isArray(i.hovertext),M=!0,P=null,L=!!i.xperiodalignment,I=[],C=0;C<p.length;C++){var k=p[C],E=b[C],R=y[C],O=x[C],N=w[C];if(k!==t&&E!==t&&R!==t&&O!==t&&N!==t){N===E?P!==null&&N!==P&&(M=N>P):M=N>E,P=N;var G=m(E,R,O,N);G.pos=k,G.yc=(E+N)/2,G.i=C,G.dir=M?"increasing":"decreasing",G.x=G.pos,G.y=[O,R],L&&(G.orig_p=s[C]),g&&(G.tx=i.text[C]),T&&(G.htx=i.hovertext[C]),I.push(G)}else I.push({pos:k,empty:!0})}return i._extremes[v._id]=u.findExtremes(v,r.concat(x,y),{padded:!0}),I.length&&(I[0].t={labels:{open:a(h,"open:")+" ",high:a(h,"high:")+" ",low:a(h,"low:")+" ",close:a(h,"close:")+" "}}),I}function l(h,i,s){var p=s._minDiff;if(!p){var v=h._fullData,m=[];p=1/0;var b;for(b=0;b<v.length;b++){var y=v[b];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===i._id){m.push(y);var x=i.makeCalcdata(y,"x");y._origX=x;var w=c(s,i,"x",x);y._xcalc=w;var g=r.distinctVals(w).minDiff;g&&isFinite(g)&&(p=Math.min(p,g))}}for(p===1/0&&(p=1),b=0;b<m.length;b++)m[b]._minDiff=p}return p*s.tickwidth}d.exports={calc:f,calcCommon:o}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828}],1135:[function(e,d,S){var r=e("../../lib"),a=e("./ohlc_defaults"),u=e("../scatter/period_defaults"),c=e("./attributes");d.exports=function(n,o,l,h){function i(p,v){return r.coerce(n,o,c,p,v)}var s=a(n,o,i,h);if(!s){o.visible=!1;return}u(n,o,h,i,{x:!0}),i("line.width"),i("line.dash"),t(n,o,i,"increasing"),t(n,o,i,"decreasing"),i("text"),i("hovertext"),i("tickwidth"),h._requestRangeslider[o.xaxis]=!0};function t(f,n,o,l){o(l+".line.color"),o(l+".line.width",n.line.width),o(l+".line.dash",n.line.dash)}},{"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1133,"./ohlc_defaults":1138}],1136:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../lib"),u=e("../../components/fx"),c=e("../../components/color"),t=e("../../lib").fillText,f=e("../../constants/delta.js"),n={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function o(s,p,v,m){var b=s.cd,y=b[0].trace;return y.hoverlabel.split?h(s,p,v,m):i(s,p,v,m)}function l(s,p,v,m){var b=s.cd,y=s.xa,x=b[0].trace,w=b[0].t,g=x.type,T=g==="ohlc"?"l":"min",M=g==="ohlc"?"h":"max",P,L,I=w.bPos||0,C=function(V){return V.pos+I-p},k=w.bdPos||w.tickLen,E=w.wHover,R=Math.min(1,k/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));P=s.maxHoverDistance-R,L=s.maxSpikeDistance-R;function O(V){var Z=C(V);return u.inbox(Z-E,Z+E,P)}function N(V){var Z=V[T],q=V[M];return Z===q||u.inbox(Z-v,q-v,P)}function G(V){return(O(V)+N(V))/2}var U=u.getDistanceFunction(m,O,N,G);if(u.getClosest(b,U,s),s.index===!1)return null;var Y=b[s.index];if(Y.empty)return null;var z=Y.dir,B=x[z],H=B.line.color;return c.opacity(H)&&B.line.width?s.color=H:s.color=B.fillcolor,s.x0=y.c2p(Y.pos+I-k,!0),s.x1=y.c2p(Y.pos+I+k,!0),s.xLabelVal=Y.orig_p!==void 0?Y.orig_p:Y.pos,s.spikeDistance=G(Y)*L/P,s.xSpike=y.c2p(Y.pos,!0),s}function h(s,p,v,m){var b=s.cd,y=s.ya,x=b[0].trace,w=b[0].t,g=[],T=l(s,p,v,m);if(!T)return[];var M=T.index,P=b[M],L=P.hi||x.hoverinfo,I=L.split("+"),C=L==="all",k=C||I.indexOf("y")!==-1;if(!k)return[];for(var E=["high","open","close","low"],R={},O=0;O<E.length;O++){var N=E[O],G=x[N][T.index],U=y.c2p(G,!0),Y;G in R?(Y=R[G],Y.yLabel+="<br>"+w.labels[N]+r.hoverLabelText(y,G)):(Y=a.extendFlat({},T),Y.y0=Y.y1=U,Y.yLabelVal=G,Y.yLabel=w.labels[N]+r.hoverLabelText(y,G),Y.name="",g.push(Y),R[G]=Y)}return g}function i(s,p,v,m){var b=s.cd,y=s.ya,x=b[0].trace,w=b[0].t,g=l(s,p,v,m);if(!g)return[];var T=g.index,M=b[T],P=g.index=M.i,L=M.dir;function I(G){return w.labels[G]+r.hoverLabelText(y,x[G][P])}var C=M.hi||x.hoverinfo,k=C.split("+"),E=C==="all",R=E||k.indexOf("y")!==-1,O=E||k.indexOf("text")!==-1,N=R?[I("open"),I("high"),I("low"),I("close")+"  "+n[L]]:[];return O&&t(M,x,N),g.extraText=N.join("<br>"),g.y0=g.y1=y.c2p(M.yc,!0),[g]}d.exports={hoverPoints:o,hoverSplit:h,hoverOnPoints:i}},{"../../components/color":643,"../../components/fx":683,"../../constants/delta.js":747,"../../lib":778,"../../plots/cartesian/axes":828}],1137:[function(e,d,S){d.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":841,"./attributes":1133,"./calc":1134,"./defaults":1135,"./hover":1136,"./plot":1139,"./select":1140,"./style":1141}],1138:[function(e,d,S){var r=e("../../registry"),a=e("../../lib");d.exports=function(c,t,f,n){var o=f("x"),l=f("open"),h=f("high"),i=f("low"),s=f("close");f("hoverlabel.split");var p=r.getComponentMethod("calendars","handleTraceDefaults");if(p(c,t,["x"],n),!!(l&&h&&i&&s)){var v=Math.min(l.length,h.length,i.length,s.length);return o&&(v=Math.min(v,a.minRowLength(o))),t._length=v,v}}},{"../../lib":778,"../../registry":911}],1139:[function(e,d,S){var r=e("d3"),a=e("../../lib");d.exports=function(c,t,f,n){var o=t.yaxis,l=t.xaxis,h=!!l.rangebreaks;a.makeTraceGroups(n,f,"trace ohlc").each(function(i){var s=r.select(this),p=i[0],v=p.t,m=p.trace;if(m.visible!==!0||v.empty){s.remove();return}var b=v.tickLen,y=s.selectAll("path").data(a.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(x){if(x.empty)return"M0,0Z";var w=l.c2p(x.pos-b,!0),g=l.c2p(x.pos+b,!0),T=h?(w+g)/2:l.c2p(x.pos,!0),M=o.c2p(x.o,!0),P=o.c2p(x.h,!0),L=o.c2p(x.l,!0),I=o.c2p(x.c,!0);return"M"+w+","+M+"H"+T+"M"+T+","+P+"V"+L+"M"+g+","+I+"H"+T})})}},{"../../lib":778,d3:169}],1140:[function(e,d,S){d.exports=function(a,u){var c=a.cd,t=a.xaxis,f=a.yaxis,n=[],o,l=c[0].t.bPos||0;if(u===!1)for(o=0;o<c.length;o++)c[o].selected=0;else for(o=0;o<c.length;o++){var h=c[o];u.contains([t.c2p(h.pos+l),f.c2p(h.yc)],null,h.i,a)?(n.push({pointNumber:h.i,x:t.c2d(h.pos),y:f.c2d(h.yc)}),h.selected=1):h.selected=0}return n}},{}],1141:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color");d.exports=function(t,f,n){var o=n||r.select(t).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(l){return l[0].trace.opacity}),o.each(function(l){var h=l[0].trace;r.select(this).selectAll("path").each(function(i){if(!i.empty){var s=h[i.dir].line;r.select(this).style("fill","none").call(u.stroke,s.color).call(a.dashLine,s.dash,s.width).style("opacity",h.selectedpoints&&!i.selected?.3:1)}})})}},{"../../components/color":643,"../../components/drawing":665,d3:169}],1142:[function(e,d,S){var r=e("../../lib/extend").extendFlat,a=e("../../plots/attributes"),u=e("../../plots/font_attributes"),c=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../plots/domain").attributes,n=r({editType:"calc"},c("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});d.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:r({},a.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:u({editType:"calc"}),tickfont:u({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1143:[function(e,d,S){var r=e("../../plots/get_data").getModuleCalcData,a=e("./plot"),u="parcats";S.name=u,S.plot=function(c,t,f,n){var o=r(c.calcdata,u);if(o.length){var l=o[0];a(c,l,f,n)}},S.clean=function(c,t,f,n){var o=n._has&&n._has("parcats"),l=t._has&&t._has("parcats");o&&!l&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":865,"./plot":1148}],1144:[function(e,d,S){var r=e("../../lib/gup").wrap,a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/calc"),c=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),f=e("../../lib"),n=e("fast-isnumeric");d.exports=function(w,g){var T=f.filterVisible(g.dimensions);if(T.length===0)return[];var M=T.map(function(ve){var $;if(ve.categoryorder==="trace")$=null;else if(ve.categoryorder==="array")$=ve.categoryarray;else{$=c(ve.values);for(var j=!0,ae=0;ae<$.length;ae++)if(!n($[ae])){j=!1;break}$.sort(j?f.sorterAsc:void 0),ve.categoryorder==="category descending"&&($=$.reverse())}return v(ve.values,$)}),P,L,I;f.isArrayOrTypedArray(g.counts)?P=g.counts:P=[g.counts],m(T),T.forEach(function(ve,$){b(ve,M[$])});var C=g.line,k;C?(a(g,"line")&&u(w,g,{vals:g.line.color,containerStr:"line",cLetter:"c"}),k=t.tryColorscale(C)):k=f.identity;function E(ve){var $,j;return f.isArrayOrTypedArray(C.color)?($=C.color[ve%C.color.length],j=$):$=C.color,{color:k($),rawColor:j}}var R=T[0].values.length,O={},N=M.map(function(ve){return ve.inds});I=0;var G,U;for(G=0;G<R;G++){var Y=[];for(U=0;U<N.length;U++)Y.push(N[U][G]);L=P[G%P.length],I+=L;var z=E(G),B=Y+"-"+z.rawColor;O[B]===void 0&&(O[B]=s(Y,z.color,z.rawColor)),p(O[B],G,L)}var H=T.map(function(ve,$){return l($,ve._index,ve._displayindex,ve.label,I)});for(G=0;G<R;G++)for(L=P[G%P.length],U=0;U<H.length;U++){var V=H[U].containerInd,Z=M[U].inds[G],q=H[U].categories;if(q[Z]===void 0){var J=g.dimensions[V]._categoryarray[Z],ne=g.dimensions[V]._ticktext[Z];q[Z]=h(U,Z,J,ne)}i(q[Z],G,L)}return r(o(H,O,I))};function o(x,w,g){var T=x.map(function(M){return M.categories.length}).reduce(function(M,P){return Math.max(M,P)});return{dimensions:x,paths:w,trace:void 0,maxCats:T,count:g}}function l(x,w,g,T,M){return{dimensionInd:x,containerInd:w,displayInd:g,dimensionLabel:T,count:M,categories:[],dragX:null}}function h(x,w,g,T){return{dimensionInd:x,categoryInd:w,categoryValue:g,displayInd:w,categoryLabel:T,valueInds:[],count:0,dragY:null}}function i(x,w,g){x.valueInds.push(w),x.count+=g}function s(x,w,g){return{categoryInds:x,color:w,rawColor:g,valueInds:[],count:0}}function p(x,w,g){x.valueInds.push(w),x.count+=g}function v(x,w){w==null?w=[]:w=w.map(function(k){return k});var g={},T={},M=[];w.forEach(function(k,E){g[k]=0,T[k]=E});for(var P=0;P<x.length;P++){var L=x[P],I;g[L]===void 0?(g[L]=1,I=w.push(L)-1,T[L]=I):(g[L]++,I=T[L]),M.push(I)}var C=w.map(function(k){return g[k]});return{uniqueValues:w,uniqueCounts:C,inds:M}}function m(x){var w=x.map(function(T){return T.displayindex}),g;if(y(w))for(g=0;g<x.length;g++)x[g]._displayindex=x[g].displayindex;else for(g=0;g<x.length;g++)x[g]._displayindex=g}function b(x,w){x._categoryarray=w.uniqueValues,x.ticktext===null||x.ticktext===void 0?x._ticktext=[]:x._ticktext=x.ticktext.slice();for(var g=x._ticktext.length;g<w.uniqueValues.length;g++)x._ticktext.push(w.uniqueValues[g])}function y(x){for(var w=new Array(x.length),g=0;g<x.length;g++){if(x[g]<0||x[g]>=x.length||w[x[g]]!==void 0)return!1;w[x[g]]=!0}return!0}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../components/drawing":665,"../../lib":778,"../../lib/filter_unique.js":769,"../../lib/gup":775,"fast-isnumeric":241}],1145:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),c=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),f=e("./attributes"),n=e("../parcoords/merge_length");function o(h,i,s,p,v){v("line.shape"),v("line.hovertemplate");var m=v("line.color",p.colorway[0]);if(a(h,"line")&&r.isArrayOrTypedArray(m)){if(m.length)return v("line.colorscale"),u(h,i,p,v,{prefix:"line.",cLetter:"c"}),m.length;i.line.color=s}return 1/0}function l(h,i){function s(w,g){return r.coerce(h,i,f.dimensions,w,g)}var p=s("values"),v=s("visible");if(p&&p.length||(v=i.visible=!1),v){s("label"),s("displayindex",i._index);var m=h.categoryarray,b=Array.isArray(m)&&m.length>0,y;b&&(y="array");var x=s("categoryorder",y);x==="array"?(s("categoryarray"),s("ticktext")):(delete h.categoryarray,delete h.ticktext),!b&&x==="array"&&(i.categoryorder="trace")}}d.exports=function(i,s,p,v){function m(g,T){return r.coerce(i,s,f,g,T)}var b=t(i,s,{name:"dimensions",handleItemDefaults:l}),y=o(i,s,p,v,m);c(s,v,m),(!Array.isArray(b)||!b.length)&&(s.visible=!1),n(s,b,"values",y),m("hoveron"),m("hovertemplate"),m("arrangement"),m("bundlecolors"),m("sortpaths"),m("counts");var x={family:v.font.family,size:Math.round(v.font.size),color:v.font.color};r.coerceFont(m,"labelfont",x);var w={family:v.font.family,size:Math.round(v.font.size/1.2),color:v.font.color};r.coerceFont(m,"tickfont",w)}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/domain":855,"../parcoords/merge_length":1158,"./attributes":1142}],1146:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1142,"./base_plot":1143,"./calc":1144,"./defaults":1145,"./plot":1148}],1147:[function(e,d,S){var r=e("d3"),a=e("../../plot_api/plot_api"),u=e("../../components/fx"),c=e("../../lib"),t=c.strTranslate,f=e("../../components/drawing"),n=e("tinycolor2"),o=e("../../lib/svg_text_utils");function l(j,ae,ie,te){var re=j.map(q.bind(0,ae,ie)),ce=te.selectAll("g.parcatslayer").data([null]);ce.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var pe=ce.selectAll("g.trace.parcats").data(re,h),fe=pe.enter().append("g").attr("class","trace parcats");pe.attr("transform",function(Ee){return t(Ee.x,Ee.y)}),fe.append("g").attr("class","paths");var se=pe.select("g.paths"),de=se.selectAll("path.path").data(function(Ee){return Ee.paths},h);de.attr("fill",function(Ee){return Ee.model.color});var be=de.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ee){return Ee.model.color}).attr("fill-opacity",0);x(be),de.attr("d",function(Ee){return Ee.svgD}),be.empty()||de.sort(s),de.exit().remove(),de.on("mouseover",p).on("mouseout",v).on("click",y),fe.append("g").attr("class","dimensions");var xe=pe.select("g.dimensions"),ke=xe.selectAll("g.dimension").data(function(Ee){return Ee.dimensions},h);ke.enter().append("g").attr("class","dimension"),ke.attr("transform",function(Ee){return t(Ee.x,0)}),ke.exit().remove();var Re=ke.selectAll("g.category").data(function(Ee){return Ee.categories},h),Ke=Re.enter().append("g").attr("class","category");Re.attr("transform",function(Ee){return t(0,Ee.y)}),Ke.append("rect").attr("class","catrect").attr("pointer-events","none"),Re.select("rect.catrect").attr("fill","none").attr("width",function(Ee){return Ee.width}).attr("height",function(Ee){return Ee.height}),T(Ke);var ze=Re.selectAll("rect.bandrect").data(function(Ee){return Ee.bands},h);ze.each(function(){c.raiseToTop(this)}),ze.attr("fill",function(Ee){return Ee.color});var Je=ze.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ee){return Ee.color}).attr("fill-opacity",0);ze.attr("fill",function(Ee){return Ee.color}).attr("width",function(Ee){return Ee.width}).attr("height",function(Ee){return Ee.height}).attr("y",function(Ee){return Ee.y}).attr("cursor",function(Ee){return Ee.parcatsViewModel.arrangement==="fixed"?"default":Ee.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),P(Je),ze.exit().remove(),Ke.append("text").attr("class","catlabel").attr("pointer-events","none");var qe=ae._fullLayout.paper_bgcolor;Re.select("text.catlabel").attr("text-anchor",function(Ee){return i(Ee)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",qe+" -1px  1px 2px, "+qe+" 1px  1px 2px, "+qe+"  1px -1px 2px, "+qe+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(Ee){return i(Ee)?Ee.width+5:-5}).attr("y",function(Ee){return Ee.height/2}).text(function(Ee){return Ee.model.categoryLabel}).each(function(Ee){f.font(r.select(this),Ee.parcatsViewModel.categorylabelfont),o.convertToTspans(r.select(this),ae)}),Ke.append("text").attr("class","dimlabel"),Re.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ee){return Ee.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Ee){return Ee.width/2}).attr("y",-5).text(function(Ee,Ae){return Ae===0?Ee.parcatsViewModel.model.dimensions[Ee.model.dimensionInd].dimensionLabel:null}).each(function(Ee){f.font(r.select(this),Ee.parcatsViewModel.labelfont)}),Re.selectAll("rect.bandrect").on("mouseover",G).on("mouseout",U),Re.exit().remove(),ke.call(r.behavior.drag().origin(function(Ee){return{x:Ee.x,y:0}}).on("dragstart",Y).on("drag",z).on("dragend",B)),pe.each(function(Ee){Ee.traceSelection=r.select(this),Ee.pathSelection=r.select(this).selectAll("g.paths").selectAll("path.path"),Ee.dimensionSelection=r.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),pe.exit().remove()}d.exports=function(j,ae,ie,te){l(ie,j,te,ae)};function h(j){return j.key}function i(j){var ae=j.parcatsViewModel.dimensions.length,ie=j.parcatsViewModel.dimensions[ae-1].model.dimensionInd;return j.model.dimensionInd===ie}function s(j,ae){return j.model.rawColor>ae.model.rawColor?1:j.model.rawColor<ae.model.rawColor?-1:0}function p(j){if(!j.parcatsViewModel.dragDimension&&j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){c.raiseToTop(this),w(r.select(this));var ae=m(j),ie=b(j);if(j.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ae,event:r.event,constraints:ie}),j.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var te=r.mouse(this)[0],re=j.parcatsViewModel.graphDiv,ce=j.parcatsViewModel.trace,pe=re._fullLayout,fe=pe._paperdiv.node().getBoundingClientRect(),se=j.parcatsViewModel.graphDiv.getBoundingClientRect(),de,be,xe;for(xe=0;xe<j.leftXs.length-1;xe++)if(j.leftXs[xe]+j.dimWidths[xe]-2<=te&&te<=j.leftXs[xe+1]+2){var ke=j.parcatsViewModel.dimensions[xe],Re=j.parcatsViewModel.dimensions[xe+1];de=(ke.x+ke.width+Re.x)/2,be=(j.topYs[xe]+j.topYs[xe+1]+j.height)/2;break}var Ke=j.parcatsViewModel.x+de,ze=j.parcatsViewModel.y+be,Je=n.mostReadable(j.model.color,["black","white"]),qe=j.model.count,Ee=qe/j.parcatsViewModel.model.count,Ae={countLabel:qe,probabilityLabel:Ee.toFixed(3)},Be=[];j.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Be.push(["Count:",Ae.countLabel].join(" ")),j.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Be.push(["P:",Ae.probabilityLabel].join(" "));var $e=Be.join("<br>"),xt=r.mouse(re)[0];u.loneHover({trace:ce,x:Ke-fe.left+se.left,y:ze-fe.top+se.top,text:$e,color:j.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Je,idealAlign:xt<Ke?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:Ae,eventData:[{data:ce._input,fullData:ce,count:qe,probability:Ee}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:re})}}}function v(j){if(!j.parcatsViewModel.dragDimension&&(x(r.select(this)),u.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),j.parcatsViewModel.pathSelection.sort(s),j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ae=m(j),ie=b(j);j.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ae,event:r.event,constraints:ie})}}function m(j){for(var ae=[],ie=H(j.parcatsViewModel),te=0;te<j.model.valueInds.length;te++){var re=j.model.valueInds[te];ae.push({curveNumber:ie,pointNumber:re})}return ae}function b(j){for(var ae={},ie=j.parcatsViewModel.model.dimensions,te=0;te<ie.length;te++){var re=ie[te],ce=re.categories[j.model.categoryInds[te]];ae[re.containerInd]=ce.categoryValue}return j.model.rawColor!==void 0&&(ae.color=j.model.rawColor),ae}function y(j){if(j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ae=m(j),ie=b(j);j.parcatsViewModel.graphDiv.emit("plotly_click",{points:ae,event:r.event,constraints:ie})}}function x(j){j.attr("fill",function(ae){return ae.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function w(j){j.attr("fill-opacity",.8).attr("stroke",function(ae){return n.mostReadable(ae.model.color,["black","white"])}).attr("stroke-width",.3)}function g(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function T(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function M(j){j.attr("stroke","black").attr("stroke-width",1.5)}function P(j){j.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function L(j){var ae=j.parcatsViewModel.pathSelection,ie=j.categoryViewModel.model.dimensionInd,te=j.categoryViewModel.model.categoryInd;return ae.filter(function(re){return re.model.categoryInds[ie]===te&&re.model.color===j.color})}function I(j){var ae=r.select(j.parentNode).selectAll("rect.bandrect");ae.each(function(ie){var te=L(ie);w(te),te.each(function(){c.raiseToTop(this)})}),g(r.select(j.parentNode))}function C(j){var ae=r.select(j).datum(),ie=L(ae);w(ie),ie.each(function(){c.raiseToTop(this)}),r.select(j.parentNode).selectAll("rect.bandrect").filter(function(te){return te.color===ae.color}).each(function(){c.raiseToTop(this),M(r.select(this))})}function k(j,ae,ie){var te=r.select(j).datum(),re=te.categoryViewModel.model,ce=te.parcatsViewModel.graphDiv,pe=r.select(j.parentNode).selectAll("rect.bandrect"),fe=[];pe.each(function(de){var be=L(de);be.each(function(xe){Array.prototype.push.apply(fe,m(xe))})});var se={};se[re.dimensionInd]=re.categoryValue,ce.emit(ae,{points:fe,event:ie,constraints:se})}function E(j,ae,ie){var te=r.select(j).datum(),re=te.categoryViewModel.model,ce=te.parcatsViewModel.graphDiv,pe=L(te),fe=[];pe.each(function(de){Array.prototype.push.apply(fe,m(de))});var se={};se[re.dimensionInd]=re.categoryValue,te.rawColor!==void 0&&(se.color=te.rawColor),ce.emit(ae,{points:fe,event:ie,constraints:se})}function R(j,ae,ie){j._fullLayout._calcInverseTransform(j);var te=j._fullLayout._invScaleX,re=j._fullLayout._invScaleY,ce=r.select(ie.parentNode).select("rect.catrect"),pe=ce.node().getBoundingClientRect(),fe=ce.datum(),se=fe.parcatsViewModel,de=se.model.dimensions[fe.model.dimensionInd],be=se.trace,xe=pe.top+pe.height/2,ke,Re;se.dimensions.length>1&&de.displayInd===se.dimensions.length-1?(ke=pe.left,Re="left"):(ke=pe.left+pe.width,Re="right");var Ke=fe.model.count,ze=fe.model.categoryLabel,Je=Ke/fe.parcatsViewModel.model.count,qe={countLabel:Ke,categoryLabel:ze,probabilityLabel:Je.toFixed(3)},Ee=[];fe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ee.push(["Count:",qe.countLabel].join(" ")),fe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ee.push(["P("+qe.categoryLabel+"):",qe.probabilityLabel].join(" "));var Ae=Ee.join("<br>");return{trace:be,x:te*(ke-ae.left),y:re*(xe-ae.top),text:Ae,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Re,hovertemplate:be.hovertemplate,hovertemplateLabels:qe,eventData:[{data:be._input,fullData:be,count:Ke,category:ze,probability:Je}]}}function O(j,ae,ie){var te=[];return r.select(ie.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var re=this;te.push(R(j,ae,re))}),te}function N(j,ae,ie){j._fullLayout._calcInverseTransform(j);var te=j._fullLayout._invScaleX,re=j._fullLayout._invScaleY,ce=ie.getBoundingClientRect(),pe=r.select(ie).datum(),fe=pe.categoryViewModel,se=fe.parcatsViewModel,de=se.model.dimensions[fe.model.dimensionInd],be=se.trace,xe=ce.y+ce.height/2,ke,Re;se.dimensions.length>1&&de.displayInd===se.dimensions.length-1?(ke=ce.left,Re="left"):(ke=ce.left+ce.width,Re="right");var Ke=fe.model.categoryLabel,ze=pe.parcatsViewModel.model.count,Je=0;pe.categoryViewModel.bands.forEach(function(_t){_t.color===pe.color&&(Je+=_t.count)});var qe=fe.model.count,Ee=0;se.pathSelection.each(function(_t){_t.model.color===pe.color&&(Ee+=_t.model.count)});var Ae=Je/ze,Be=Je/Ee,$e=Je/qe,xt={countLabel:ze,categoryLabel:Ke,probabilityLabel:Ae.toFixed(3)},bt=[];fe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&bt.push(["Count:",xt.countLabel].join(" ")),fe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(bt.push("P(color \u2229 "+Ke+"): "+xt.probabilityLabel),bt.push("P("+Ke+" | color): "+Be.toFixed(3)),bt.push("P(color | "+Ke+"): "+$e.toFixed(3)));var Ne=bt.join("<br>"),st=n.mostReadable(pe.color,["black","white"]);return{trace:be,x:te*(ke-ae.left),y:re*(xe-ae.top),text:Ne,color:pe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:st,fontSize:10,idealAlign:Re,hovertemplate:be.hovertemplate,hovertemplateLabels:xt,eventData:[{data:be._input,fullData:be,category:Ke,count:ze,probability:Ae,categorycount:qe,colorcount:Ee,bandcolorcount:Je}]}}function G(j){if(!j.parcatsViewModel.dragDimension&&j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ae=r.mouse(this)[1];if(ae<-1)return;var ie=j.parcatsViewModel.graphDiv,te=ie._fullLayout,re=te._paperdiv.node().getBoundingClientRect(),ce=j.parcatsViewModel.hoveron,pe=this;if(ce==="color"?(C(pe),E(pe,"plotly_hover",r.event)):(I(pe),k(pe,"plotly_hover",r.event)),j.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var fe;ce==="category"?fe=R(ie,re,pe):ce==="color"?fe=N(ie,re,pe):ce==="dimension"&&(fe=O(ie,re,pe)),fe&&u.loneHover(fe,{container:te._hoverlayer.node(),outerContainer:te._paper.node(),gd:ie})}}}function U(j){var ae=j.parcatsViewModel;if(!ae.dragDimension&&(x(ae.pathSelection),T(ae.dimensionSelection.selectAll("g.category")),P(ae.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),u.loneUnhover(ae.graphDiv._fullLayout._hoverlayer.node()),ae.pathSelection.sort(s),ae.hoverinfoItems.indexOf("skip")===-1)){var ie=j.parcatsViewModel.hoveron,te=this;ie==="color"?E(te,"plotly_unhover",r.event):k(te,"plotly_unhover",r.event)}}function Y(j){j.parcatsViewModel.arrangement!=="fixed"&&(j.dragDimensionDisplayInd=j.model.displayInd,j.initialDragDimensionDisplayInds=j.parcatsViewModel.model.dimensions.map(function(ae){return ae.displayInd}),j.dragHasMoved=!1,j.dragCategoryDisplayInd=null,r.select(this).selectAll("g.category").select("rect.catrect").each(function(ae){var ie=r.mouse(this)[0],te=r.mouse(this)[1];-2<=ie&&ie<=ae.width+2&&-2<=te&&te<=ae.height+2&&(j.dragCategoryDisplayInd=ae.model.displayInd,j.initialDragCategoryDisplayInds=j.model.categories.map(function(re){return re.displayInd}),ae.model.dragY=ae.y,c.raiseToTop(this.parentNode),r.select(this.parentNode).selectAll("rect.bandrect").each(function(re){re.y<te&&te<=re.y+re.height&&(j.potentialClickBand=this)}))}),j.parcatsViewModel.dragDimension=j,u.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function z(j){if(j.parcatsViewModel.arrangement!=="fixed"&&(j.dragHasMoved=!0,j.dragDimensionDisplayInd!==null)){var ae=j.dragDimensionDisplayInd,ie=ae-1,te=ae+1,re=j.parcatsViewModel.dimensions[ae];if(j.dragCategoryDisplayInd!==null){var ce=re.categories[j.dragCategoryDisplayInd];ce.model.dragY+=r.event.dy;var pe=ce.model.dragY,fe=ce.model.displayInd,se=re.categories,de=se[fe-1],be=se[fe+1];de!==void 0&&pe<de.y+de.height/2&&(ce.model.displayInd=de.model.displayInd,de.model.displayInd=fe),be!==void 0&&pe+ce.height>be.y+be.height/2&&(ce.model.displayInd=be.model.displayInd,be.model.displayInd=fe),j.dragCategoryDisplayInd=ce.model.displayInd}if(j.dragCategoryDisplayInd===null||j.parcatsViewModel.arrangement==="freeform"){re.model.dragX=r.event.x;var xe=j.parcatsViewModel.dimensions[ie],ke=j.parcatsViewModel.dimensions[te];xe!==void 0&&re.model.dragX<xe.x+xe.width&&(re.model.displayInd=xe.model.displayInd,xe.model.displayInd=ae),ke!==void 0&&re.model.dragX+re.width>ke.x&&(re.model.displayInd=ke.model.displayInd,ke.model.displayInd=j.dragDimensionDisplayInd),j.dragDimensionDisplayInd=re.model.displayInd}ve(j.parcatsViewModel),ne(j.parcatsViewModel),Z(j.parcatsViewModel),V(j.parcatsViewModel)}}function B(j){if(j.parcatsViewModel.arrangement!=="fixed"&&j.dragDimensionDisplayInd!==null){r.select(this).selectAll("text").attr("font-weight","normal");var ae={},ie=H(j.parcatsViewModel),te=j.parcatsViewModel.model.dimensions.map(function(ke){return ke.displayInd}),re=j.initialDragDimensionDisplayInds.some(function(ke,Re){return ke!==te[Re]});re&&te.forEach(function(ke,Re){var Ke=j.parcatsViewModel.model.dimensions[Re].containerInd;ae["dimensions["+Ke+"].displayindex"]=ke});var ce=!1;if(j.dragCategoryDisplayInd!==null){var pe=j.model.categories.map(function(ke){return ke.displayInd});if(ce=j.initialDragCategoryDisplayInds.some(function(ke,Re){return ke!==pe[Re]}),ce){var fe=j.model.categories.slice().sort(function(ke,Re){return ke.displayInd-Re.displayInd}),se=fe.map(function(ke){return ke.categoryValue}),de=fe.map(function(ke){return ke.categoryLabel});ae["dimensions["+j.model.containerInd+"].categoryarray"]=[se],ae["dimensions["+j.model.containerInd+"].ticktext"]=[de],ae["dimensions["+j.model.containerInd+"].categoryorder"]="array"}}if(j.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!j.dragHasMoved&&j.potentialClickBand&&(j.parcatsViewModel.hoveron==="color"?E(j.potentialClickBand,"plotly_click",r.event.sourceEvent):k(j.potentialClickBand,"plotly_click",r.event.sourceEvent)),j.model.dragX=null,j.dragCategoryDisplayInd!==null){var be=j.parcatsViewModel.dimensions[j.dragDimensionDisplayInd].categories[j.dragCategoryDisplayInd];be.model.dragY=null,j.dragCategoryDisplayInd=null}j.dragDimensionDisplayInd=null,j.parcatsViewModel.dragDimension=null,j.dragHasMoved=null,j.potentialClickBand=null,ve(j.parcatsViewModel),ne(j.parcatsViewModel);var xe=r.transition().duration(300).ease("cubic-in-out");xe.each(function(){Z(j.parcatsViewModel,!0),V(j.parcatsViewModel,!0)}).each("end",function(){(re||ce)&&a.restyle(j.parcatsViewModel.graphDiv,ae,[ie])})}}function H(j){for(var ae,ie=j.graphDiv._fullData,te=0;te<ie.length;te++)if(j.key===ie[te].uid){ae=te;break}return ae}function V(j,ae){ae===void 0&&(ae=!1);function ie(te){return ae?te.transition():te}j.pathSelection.data(function(te){return te.paths},h),ie(j.pathSelection).attr("d",function(te){return te.svgD})}function Z(j,ae){ae===void 0&&(ae=!1);function ie(se){return ae?se.transition():se}j.dimensionSelection.data(function(se){return se.dimensions},h);var te=j.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},h);ie(j.dimensionSelection).attr("transform",function(se){return t(se.x,0)}),ie(te).attr("transform",function(se){return t(0,se.y)});var re=te.select(".dimlabel");re.text(function(se,de){return de===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null});var ce=te.select(".catlabel");ce.attr("text-anchor",function(se){return i(se)?"start":"end"}).attr("x",function(se){return i(se)?se.width+5:-5}).each(function(se){var de,be;i(se)?(de=se.width+5,be="start"):(de=-5,be="end"),r.select(this).selectAll("tspan").attr("x",de).attr("text-anchor",be)});var pe=te.selectAll("rect.bandrect").data(function(se){return se.bands},h),fe=pe.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);pe.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),P(fe),pe.each(function(){c.raiseToTop(this)}),pe.exit().remove()}function q(j,ae,ie){var te=ie[0],re=ae.margin||{l:80,r:80,t:100,b:80},ce=te.trace,pe=ce.domain,fe=ae.width,se=ae.height,de=Math.floor(fe*(pe.x[1]-pe.x[0])),be=Math.floor(se*(pe.y[1]-pe.y[0])),xe=pe.x[0]*fe+re.l,ke=ae.height-pe.y[1]*ae.height+re.t,Re=ce.line.shape,Ke;ce.hoverinfo==="all"?Ke=["count","probability"]:Ke=(ce.hoverinfo||"").split("+");var ze={trace:ce,key:ce.uid,model:te,x:xe,y:ke,width:de,height:be,hoveron:ce.hoveron,hoverinfoItems:Ke,arrangement:ce.arrangement,bundlecolors:ce.bundlecolors,sortpaths:ce.sortpaths,labelfont:ce.labelfont,categorylabelfont:ce.tickfont,pathShape:Re,dragDimension:null,margin:re,paths:[],dimensions:[],graphDiv:j,traceSelection:null,pathSelection:null,dimensionSelection:null};return te.dimensions&&(ve(ze),ne(ze)),ze}function J(j,ae,ie,te,re){var ce=[],pe=[],fe,se;for(se=0;se<ie.length-1;se++)fe=r.interpolateNumber(ie[se]+j[se],j[se+1]),ce.push(fe(re)),pe.push(fe(1-re));var de="M "+j[0]+","+ae[0];for(de+="l"+ie[0]+",0 ",se=1;se<ie.length;se++)de+="C"+ce[se-1]+","+ae[se-1]+" "+pe[se-1]+","+ae[se]+" "+j[se]+","+ae[se],de+="l"+ie[se]+",0 ";for(de+="l0,"+te+" ",de+="l -"+ie[ie.length-1]+",0 ",se=ie.length-2;se>=0;se--)de+="C"+pe[se]+","+(ae[se+1]+te)+" "+ce[se]+","+(ae[se]+te)+" "+(j[se]+ie[se])+","+(ae[se]+te),de+="l-"+ie[se]+",0 ";return de+="Z",de}function ne(j){var ae=j.dimensions,ie=j.model,te=ae.map(function(Et){return Et.categories.map(function(jt){return jt.y})}),re=j.model.dimensions.map(function(Et){return Et.categories.map(function(jt){return jt.displayInd})}),ce=j.model.dimensions.map(function(Et){return Et.displayInd}),pe=j.dimensions.map(function(Et){return Et.model.dimensionInd}),fe=ae.map(function(Et){return Et.x}),se=ae.map(function(Et){return Et.width}),de=[];for(var be in ie.paths)ie.paths.hasOwnProperty(be)&&de.push(ie.paths[be]);function xe(Et){var jt=Et.categoryInds.map(function(Mt,At){return re[At][Mt]}),Zt=pe.map(function(Mt){return jt[Mt]});return Zt}de.sort(function(Et,jt){var Zt=xe(Et),Mt=xe(jt);return j.sortpaths==="backward"&&(Zt.reverse(),Mt.reverse()),Zt.push(Et.valueInds[0]),Mt.push(jt.valueInds[0]),j.bundlecolors&&(Zt.unshift(Et.rawColor),Mt.unshift(jt.rawColor)),Zt<Mt?-1:Zt>Mt?1:0});for(var ke=new Array(de.length),Re=ae[0].model.count,Ke=ae[0].categories.map(function(Et){return Et.height}).reduce(function(Et,jt){return Et+jt}),ze=0;ze<de.length;ze++){var Je=de[ze],qe;Re>0?qe=Ke*(Je.count/Re):qe=0;for(var Ee=new Array(te.length),Ae=0;Ae<Je.categoryInds.length;Ae++){var Be=Je.categoryInds[Ae],$e=re[Ae][Be],xt=ce[Ae];Ee[xt]=te[xt][$e],te[xt][$e]+=qe;var bt=j.dimensions[xt].categories[$e],Ne=bt.bands.length,st=bt.bands[Ne-1];if(st===void 0||Je.rawColor!==st.rawColor){var _t=st===void 0?0:st.y+st.height;bt.bands.push({key:_t,color:Je.color,rawColor:Je.rawColor,height:qe,width:bt.width,count:Je.count,y:_t,categoryViewModel:bt,parcatsViewModel:j})}else{var Ot=bt.bands[Ne-1];Ot.height+=qe,Ot.count+=Je.count}}var Wt;j.pathShape==="hspline"?Wt=J(fe,Ee,se,qe,.5):Wt=J(fe,Ee,se,qe,0),ke[ze]={key:Je.valueInds[0],model:Je,height:qe,leftXs:fe,topYs:Ee,dimWidths:se,svgD:Wt,parcatsViewModel:j}}j.paths=ke}function ve(j){var ae=j.model.dimensions.map(function(pe){return{displayInd:pe.displayInd,dimensionInd:pe.dimensionInd}});ae.sort(function(pe,fe){return pe.displayInd-fe.displayInd});var ie=[];for(var te in ae){var re=ae[te].dimensionInd,ce=j.model.dimensions[re];ie.push($(j,ce))}j.dimensions=ie}function $(j,ae){var ie=40,te=16,re=j.model.dimensions.length,ce=ae.displayInd,pe,fe,se;re>1?pe=(j.width-2*ie-te)/(re-1):pe=0,fe=ie,se=fe+pe*ce;var de=[],be=j.model.maxCats,xe=ae.categories.length,ke=8,Re=ae.count,Ke=j.height-ke*(be-1),ze,Je,qe,Ee,Ae,Be=(be-xe)*ke/2,$e=ae.categories.map(function(xt){return{displayInd:xt.displayInd,categoryInd:xt.categoryInd}});for($e.sort(function(xt,bt){return xt.displayInd-bt.displayInd}),Ae=0;Ae<xe;Ae++)Ee=$e[Ae].categoryInd,Je=ae.categories[Ee],Re>0?ze=Je.count/Re*Ke:ze=0,qe={key:Je.valueInds[0],model:Je,width:te,height:ze,y:Je.dragY!==null?Je.dragY:Be,bands:[],parcatsViewModel:j},Be=Be+ze+ke,de.push(qe);return{key:ae.dimensionInd,x:ae.dragX!==null?ae.dragX:se,y:0,width:te,model:ae,categories:de,parcatsViewModel:j,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_api":814,d3:169,tinycolor2:576}],1148:[function(e,d,S){var r=e("./parcats");d.exports=function(u,c,t,f){var n=u._fullLayout,o=n._paper,l=n._size;r(u,o,c,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},t,f)}},{"./parcats":1147}],1149:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/cartesian/layout_attributes"),u=e("../../plots/font_attributes"),c=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,f=e("../../plot_api/plot_template").templatedArray;d.exports={domain:c({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:u({editType:"plot"}),tickfont:u({editType:"plot"}),rangefont:u({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},a.tickvals,{editType:"plot"}),ticktext:t({},a.ticktext,{editType:"plot"}),tickformat:t({},a.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},r("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1150:[function(e,d,S){var r=e("./constants"),a=e("d3"),u=e("../../lib/gup").keyFun,c=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,f=e("../../lib").strTranslate,n=r.bar.snapRatio;function o(H,V){return H*(1-n)+V*n}var l=r.bar.snapClose;function h(H,V){return H*(1-l)+V*l}function i(H,V,Z,q){if(s(Z,q))return Z;var J=H?-1:1,ne=0,ve=V.length-1;if(J<0){var $=ne;ne=ve,ve=$}for(var j=V[ne],ae=j,ie=ne;J*ie<J*ve;ie+=J){var te=ie+J,re=V[te];if(J*Z<J*h(j,re))return o(j,ae);if(J*Z<J*re||te===ve)return o(re,j);ae=j,j=re}}function s(H,V){for(var Z=0;Z<V.length;Z++)if(H>=V[Z][0]&&H<=V[Z][1])return!0;return!1}function p(H){H.attr("x",-r.bar.captureWidth/2).attr("width",r.bar.captureWidth)}function v(H){H.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function m(H){if(!H.brush.filterSpecified)return"0,"+H.height;for(var V=b(H.brush.filter.getConsolidated(),H.height),Z=[0],q,J,ne,ve=V.length?V[0][0]:null,$=0;$<V.length;$++)q=V[$],J=q[1]-q[0],Z.push(ve),Z.push(J),ne=$+1,ne<V.length&&(ve=V[ne][0]-q[1]);return Z.push(H.height),Z}function b(H,V){return H.map(function(Z){return Z.map(function(q){return Math.max(0,q*V)}).sort(t)})}function y(H,V){var Z=r.bar.handleHeight;if(!(V>H[1]+Z||V<H[0]-Z))return V>=.9*H[1]+.1*H[0]?"n":V<=.9*H[0]+.1*H[1]?"s":"ns"}function x(){a.select(document.body).style("cursor",null)}function w(H){H.attr("stroke-dasharray",m)}function g(H,V){var Z=a.select(H).selectAll(".highlight, .highlight-shadow"),q=V?Z.transition().duration(r.bar.snapDuration).each("end",V):Z;w(q)}function T(H,V){var Z=H.brush,q=Z.filterSpecified,J=NaN,ne={},ve;if(q){var $=H.height,j=Z.filter.getConsolidated(),ae=b(j,$),ie=NaN,te=NaN,re=NaN;for(ve=0;ve<=ae.length;ve++){var ce=ae[ve];if(ce&&ce[0]<=V&&V<=ce[1]){ie=ve;break}else if(te=ve?ve-1:NaN,ce&&ce[0]>V){re=ve;break}}if(J=ie,isNaN(J)&&(isNaN(te)||isNaN(re)?J=isNaN(te)?re:te:J=V-ae[te][1]<ae[re][0]-V?te:re),!isNaN(J)){var pe=ae[J],fe=y(pe,V);fe&&(ne.interval=j[J],ne.intervalPix=pe,ne.region=fe)}}if(H.ordinal&&!ne.region){var se=H.unitTickvals,de=H.unitToPaddedPx.invert(V);for(ve=0;ve<se.length;ve++){var be=[se[Math.max(ve-1,0)]*.25+se[ve]*.75,se[Math.min(ve+1,se.length-1)]*.25+se[ve]*.75];if(de>=be[0]&&de<=be[1]){ne.clickableOrdinalRange=be;break}}}return ne}function M(H,V){a.event.sourceEvent.stopPropagation();var Z=V.height-a.mouse(H)[1]-2*r.verticalPadding,q=V.unitToPaddedPx.invert(Z),J=V.brush,ne=T(V,Z),ve=ne.interval,$=J.svgBrush;if($.wasDragged=!1,$.grabbingBar=ne.region==="ns",$.grabbingBar){var j=ve.map(V.unitToPaddedPx);$.grabPoint=Z-j[0]-r.verticalPadding,$.barLength=j[1]-j[0]}$.clickableOrdinalRange=ne.clickableOrdinalRange,$.stayingIntervals=V.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],ve&&($.stayingIntervals=$.stayingIntervals.filter(function(ae){return ae[0]!==ve[0]&&ae[1]!==ve[1]})),$.startExtent=ne.region?ve[ne.region==="s"?1:0]:q,V.parent.inBrushDrag=!0,$.brushStartCallback()}function P(H,V){a.event.sourceEvent.stopPropagation();var Z=V.height-a.mouse(H)[1]-2*r.verticalPadding,q=V.brush.svgBrush;q.wasDragged=!0,q._dragging=!0,q.grabbingBar?q.newExtent=[Z-q.grabPoint,Z+q.barLength-q.grabPoint].map(V.unitToPaddedPx.invert):q.newExtent=[q.startExtent,V.unitToPaddedPx.invert(Z)].sort(t),V.brush.filterSpecified=!0,q.extent=q.stayingIntervals.concat([q.newExtent]),q.brushCallback(V),g(H.parentNode)}function L(H,V){var Z=V.brush,q=Z.filter,J=Z.svgBrush;J._dragging||(I(H,V),P(H,V),V.brush.svgBrush.wasDragged=!1),J._dragging=!1;var ne=a.event;ne.sourceEvent.stopPropagation();var ve=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,V.parent.inBrushDrag=!1,x(),!J.wasDragged){J.wasDragged=void 0,J.clickableOrdinalRange?Z.filterSpecified&&V.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],Z.filterSpecified=!0):ve?(J.extent=J.stayingIntervals,J.extent.length===0&&N(Z)):N(Z),J.brushCallback(V),g(H.parentNode),J.brushEndCallback(Z.filterSpecified?q.getConsolidated():[]);return}var $=function(){q.set(q.getConsolidated())};if(V.ordinal){var j=V.unitTickvals;j[j.length-1]<j[0]&&j.reverse(),J.newExtent=[i(0,j,J.newExtent[0],J.stayingIntervals),i(1,j,J.newExtent[1],J.stayingIntervals)];var ae=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(ae?[J.newExtent]:[]),J.extent.length||N(Z),J.brushCallback(V),ae?g(H.parentNode,$):($(),g(H.parentNode))}else $();J.brushEndCallback(Z.filterSpecified?q.getConsolidated():[])}function I(H,V){var Z=V.height-a.mouse(H)[1]-2*r.verticalPadding,q=T(V,Z),J="crosshair";q.clickableOrdinalRange?J="pointer":q.region&&(J=q.region+"-resize"),a.select(document.body).style("cursor",J)}function C(H){H.on("mousemove",function(V){a.event.preventDefault(),V.parent.inBrushDrag||I(this,V)}).on("mouseleave",function(V){V.parent.inBrushDrag||x()}).call(a.behavior.drag().on("dragstart",function(V){M(this,V)}).on("drag",function(V){P(this,V)}).on("dragend",function(V){L(this,V)}))}function k(H,V){return H[0]-V[0]}function E(H){var V=H.selectAll(".background").data(c);V.enter().append("rect").classed("background",!0).call(p).call(v).style("pointer-events","auto").attr("transform",f(0,r.verticalPadding)),V.call(C).attr("height",function(J){return J.height-r.verticalPadding});var Z=H.selectAll(".highlight-shadow").data(c);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width+r.bar.strokeWidth).attr("stroke",r.bar.strokeColor).attr("opacity",r.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(J){return J.height}).call(w);var q=H.selectAll(".highlight").data(c);q.enter().append("line").classed("highlight",!0).attr("x",-r.bar.width/2).attr("stroke-width",r.bar.width-r.bar.strokeWidth).attr("stroke",r.bar.fillColor).attr("opacity",r.bar.fillOpacity).attr("stroke-linecap","butt"),q.attr("y1",function(J){return J.height}).call(w)}function R(H){var V=H.selectAll("."+r.cn.axisBrush).data(c,u);V.enter().append("g").classed(r.cn.axisBrush,!0),E(V)}function O(H){return H.svgBrush.extent.map(function(V){return V.slice()})}function N(H){H.filterSpecified=!1,H.svgBrush.extent=[[-1/0,1/0]]}function G(H){return function(Z){var q=Z.brush,J=O(q),ne=J.slice();q.filter.set(ne),H()}}function U(H){for(var V=H.slice(),Z=[],q,J=V.shift();J;){for(q=J.slice();(J=V.shift())&&J[0]<=q[1];)q[1]=Math.max(q[1],J[1]);Z.push(q)}return Z.length===1&&Z[0][0]>Z[0][1]&&(Z=[]),Z}function Y(){var H=[],V,Z;return{set:function(q){H=q.map(function(J){return J.slice().sort(t)}).sort(k),H.length===1&&H[0][0]===-1/0&&H[0][1]===1/0&&(H=[[0,-1]]),V=U(H),Z=H.reduce(function(J,ne){return[Math.min(J[0],ne[0]),Math.max(J[1],ne[1])]},[1/0,-1/0])},get:function(){return H.slice()},getConsolidated:function(){return V},getBounds:function(){return Z}}}function z(H,V,Z,q,J,ne){var ve=Y();return ve.set(Z),{filter:ve,filterSpecified:V,svgBrush:{extent:[],brushStartCallback:q,brushCallback:G(J),brushEndCallback:ne}}}function B(H,V){if(Array.isArray(H[0])?(H=H.map(function(q){return q.sort(t)}),V.multiselect?H=U(H.sort(k)):H=[H[0]]):H=[H.sort(t)],V.tickvals){var Z=V.tickvals.slice().sort(t);if(H=H.map(function(q){var J=[i(0,Z,q[0],[]),i(1,Z,q[1],[])];if(J[1]>J[0])return J}).filter(function(q){return q}),!H.length)return}return H.length>1?H:H[0]}d.exports={makeBrush:z,ensureAxisBrush:R,cleanRanges:B}},{"../../lib":778,"../../lib/gup":775,"./constants":1153,d3:169}],1151:[function(e,d,S){var r=e("d3"),a=e("../../plots/get_data").getModuleCalcData,u=e("./plot"),c=e("../../constants/xmlns_namespaces");S.name="parcoords",S.plot=function(t){var f=a(t.calcdata,"parcoords")[0];f.length&&u(t,f)},S.clean=function(t,f,n,o){var l=o._has&&o._has("parcoords"),h=f._has&&f._has("parcoords");l&&!h&&(o._paperdiv.selectAll(".parcoords").remove(),o._glimages.selectAll("*").remove())},S.toSVG=function(t){var f=t._fullLayout._glimages,n=r.select(t).selectAll(".svg-container"),o=n.filter(function(h,i){return i===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function l(){var h=this,i=h.toDataURL("image/png"),s=f.append("svg:image");s.attr({xmlns:c.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:h.width,height:h.height})}o.each(l),window.setTimeout(function(){r.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":754,"../../plots/get_data":865,"./plot":1160,d3:169}],1152:[function(e,d,S){var r=e("../../lib").isArrayOrTypedArray,a=e("../../components/colorscale"),u=e("../../lib/gup").wrap;d.exports=function(f,n){var o,l;return a.hasColorscale(n,"line")&&r(n.line.color)?(o=n.line.color,l=a.extractOpts(n.line).colorscale,a.calc(f,n,{vals:o,containerStr:"line",cLetter:"c"})):(o=c(n._length),l=[[0,n.line.color],[1,n.line.color]]),u({lineColor:o,cscale:l})};function c(t){for(var f=new Array(t),n=0;n<t;n++)f[n]=.5;return f}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775}],1153:[function(e,d,S){d.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1154:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),c=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),f=e("../../plots/cartesian/axes"),n=e("./attributes"),o=e("./axisbrush"),l=e("./constants").maxDimensionCount,h=e("./merge_length");function i(p,v,m,b,y){var x=y("line.color",m);if(a(p,"line")&&r.isArrayOrTypedArray(x)){if(x.length)return y("line.colorscale"),u(p,v,b,y,{prefix:"line.",cLetter:"c"}),x.length;v.line.color=m}return 1/0}function s(p,v,m,b){function y(M,P){return r.coerce(p,v,n.dimensions,M,P)}var x=y("values"),w=y("visible");if(x&&x.length||(w=v.visible=!1),w){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var g=y("range");v._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},f.setConvert(v._ax,b.layout),y("multiselect");var T=y("constraintrange");T&&(v.constraintrange=o.cleanRanges(T,v))}}d.exports=function(v,m,b,y){function x(P,L){return r.coerce(v,m,n,P,L)}var w=v.dimensions;Array.isArray(w)&&w.length>l&&(r.log("parcoords traces support up to "+l+" dimensions at the moment"),w.splice(l));var g=t(v,m,{name:"dimensions",layout:y,handleItemDefaults:s}),T=i(v,m,b,y,x);c(m,y,x),(!Array.isArray(g)||!g.length)&&(m.visible=!1),h(m,g,"values",T);var M={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};r.coerceFont(x,"labelfont",M),r.coerceFont(x,"tickfont",M),r.coerceFont(x,"rangefont",M),x("labelangle"),x("labelside")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../../plots/domain":855,"./attributes":1149,"./axisbrush":1150,"./constants":1153,"./merge_length":1158}],1155:[function(e,d,S){var r=e("../../lib").isTypedArray;S.convertTypedArray=function(a){return r(a)?Array.prototype.slice.call(a):a},S.isOrdinal=function(a){return!!a.tickvals},S.isVisible=function(a){return a.visible||!("visible"in a)}},{"../../lib":778}],1156:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1149,"./base_plot":1151,"./calc":1152,"./defaults":1154,"./plot":1160}],1157:[function(e,d,S){var r=e("glslify"),a=r([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform sampler2D mask, palette;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(mask,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),c=e("./constants").maxDimensionCount,t=e("../../lib"),f=1e-6,n=2048,o=new Uint8Array(4),l=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(I){I.read({x:0,y:0,width:1,height:1,data:o})}function s(I,C,k,E,R){var O=I._gl;O.enable(O.SCISSOR_TEST),O.scissor(C,k,E,R),I.clear({color:[0,0,0,0],depth:1})}function p(I,C,k,E,R,O){var N=O.key;function G(U){var Y=Math.min(E,R-U*E);U===0&&(window.cancelAnimationFrame(k.currentRafs[N]),delete k.currentRafs[N],s(I,O.scissorX,O.scissorY,O.scissorWidth,O.viewBoxSize[1])),!k.clearOnly&&(O.count=2*Y,O.offset=2*U*E,C(O),U*E+Y<R&&(k.currentRafs[N]=window.requestAnimationFrame(function(){G(U+1)})),k.drawCompleted=!1)}k.drawCompleted||(i(I),k.drawCompleted=!0),G(0)}function v(I){return Math.max(f,Math.min(1-f,I))}function m(I,C){for(var k=new Array(256),E=0;E<256;E++)k[E]=I(E/255).concat(C);return k}function b(I,C){return(I>>>8*C)%256/255}function y(I,C,k){for(var E=new Array(I*(c+4)),R=0,O=0;O<I;O++){for(var N=0;N<c;N++)E[R++]=N<C.length?C[N].paddedUnitValues[O]:.5;E[R++]=b(O,2),E[R++]=b(O,1),E[R++]=b(O,0),E[R++]=v(k[O])}return E}function x(I,C,k){for(var E=new Array(C*8),R=0,O=0;O<C;O++)for(var N=0;N<2;N++)for(var G=0;G<4;G++){var U=I*4+G,Y=k[O*64+U];U===63&&N===0&&(Y*=-1),E[R++]=Y}return E}function w(I){var C="0"+I;return C.substr(C.length-2)}function g(I){return I<c?"p"+w(I+1)+"_"+w(I+4):"colors"}function T(I,C,k){for(var E=0;E<=c;E+=4)I[g(E)](x(E/4,C,k))}function M(I){for(var C={},k=0;k<=c;k+=4)C[g(k)]=I.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return C}function P(I,C,k,E,R,O,N,G,U,Y,z,B,H){for(var V=[[],[]],Z=0;Z<64;Z++)V[0][Z]=Z===R?1:0,V[1][Z]=Z===O?1:0;var q=I.lines.canvasOverdrag,J=I.domain,ne=I.canvasWidth,ve=I.canvasHeight,$=I.deselectedLines.color,j=t.extendFlat({key:z,resolution:[ne,ve],viewBoxPos:[N+q,G],viewBoxSize:[U,Y],i0:R,i1:O,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:B,contextColor:[$[0]/255,$[1]/255,$[2]/255,$[3]<1?$[3]:Math.max(1/255,Math.pow(1/I.lines.color.length,1/3))],scissorX:(E===C?0:N+q)+(I.pad.l-q)+I.layoutWidth*J.x[0],scissorWidth:(E===k?ne-N+q:U+.5)+(E===C?N+q:0),scissorY:G+I.pad.b+I.layoutHeight*J.y[0],scissorHeight:Y,viewportX:I.pad.l-q+I.layoutWidth*J.x[0],viewportY:I.pad.b+I.layoutHeight*J.y[0],viewportWidth:ne,viewportHeight:ve},H);return j}function L(I){var C=n-1,k=Math.max(0,Math.floor(I[0]*C),0),E=Math.min(C,Math.ceil(I[1]*C),C);return[Math.min(k,E),Math.max(k,E)]}d.exports=function(I,C){var k=C.context,E=C.pick,R=C.regl,O={currentRafs:{},drawCompleted:!0,clearOnly:!1},N,G,U,Y,z=M(R),B,H=R.texture(h),V=[];q(C);var Z=R({profile:!1,blend:{enable:k,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!k,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:R.prop("scissorX"),y:R.prop("scissorY"),width:R.prop("scissorWidth"),height:R.prop("scissorHeight")}},viewport:{x:R.prop("viewportX"),y:R.prop("viewportY"),width:R.prop("viewportWidth"),height:R.prop("viewportHeight")},dither:!1,vert:a,frag:u,primitive:"lines",lineWidth:1,attributes:z,uniforms:{resolution:R.prop("resolution"),viewBoxPos:R.prop("viewBoxPos"),viewBoxSize:R.prop("viewBoxSize"),dim0A:R.prop("dim0A"),dim1A:R.prop("dim1A"),dim0B:R.prop("dim0B"),dim1B:R.prop("dim1B"),dim0C:R.prop("dim0C"),dim1C:R.prop("dim1C"),dim0D:R.prop("dim0D"),dim1D:R.prop("dim1D"),loA:R.prop("loA"),hiA:R.prop("hiA"),loB:R.prop("loB"),hiB:R.prop("hiB"),loC:R.prop("loC"),hiC:R.prop("hiC"),loD:R.prop("loD"),hiD:R.prop("hiD"),palette:H,contextColor:R.prop("contextColor"),mask:R.prop("maskTexture"),drwLayer:R.prop("drwLayer"),maskHeight:R.prop("maskHeight")},offset:R.prop("offset"),count:R.prop("count")});function q(ae){N=ae.model,G=ae.viewModel,U=G.dimensions.slice(),Y=U[0]?U[0].values.length:0;var ie=N.lines,te=E?ie.color.map(function(ce,pe){return pe/ie.color.length}):ie.color,re=y(Y,U,te);T(z,Y,re),!k&&!E&&(H=R.texture(t.extendFlat({data:m(N.unitToColor,255)},h)))}function J(ae){var ie,te,re,ce=[[],[]];for(re=0;re<64;re++){var pe=!ae&&re<U.length?U[re].brush.filter.getBounds():[-1/0,1/0];ce[0][re]=pe[0],ce[1][re]=pe[1]}var fe=n*8,se=new Array(fe);for(ie=0;ie<fe;ie++)se[ie]=255;if(!ae)for(ie=0;ie<U.length;ie++){var de=ie%8,be=(ie-de)/8,xe=Math.pow(2,de),ke=U[ie],Re=ke.brush.filter.get();if(!(Re.length<2)){var Ke=L(Re[0])[1];for(te=1;te<Re.length;te++){var ze=L(Re[te]);for(re=Ke+1;re<ze[0];re++)se[re*8+be]&=~xe;Ke=Math.max(Ke,ze[1])}}}var Je={shape:[8,n],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:se};return B?B(Je):B=R.texture(Je),{maskTexture:B,maskHeight:n,loA:ce[0].slice(0,16),loB:ce[0].slice(16,32),loC:ce[0].slice(32,48),loD:ce[0].slice(48,64),hiA:ce[1].slice(0,16),hiB:ce[1].slice(16,32),hiC:ce[1].slice(32,48),hiD:ce[1].slice(48,64)}}function ne(ae,ie,te){var re=ae.length,ce,pe,fe,se=1/0,de=-1/0;for(ce=0;ce<re;ce++)ae[ce].dim0.canvasX<se&&(se=ae[ce].dim0.canvasX,pe=ce),ae[ce].dim1.canvasX>de&&(de=ae[ce].dim1.canvasX,fe=ce);re===0&&s(R,0,0,N.canvasWidth,N.canvasHeight);var be=J(k);for(ce=0;ce<re;ce++){var xe=ae[ce],ke=xe.dim0.crossfilterDimensionIndex,Re=xe.dim1.crossfilterDimensionIndex,Ke=xe.canvasX,ze=xe.canvasY,Je=Ke+xe.panelSizeX;if(ie||!V[ke]||V[ke][0]!==Ke||V[ke][1]!==Je){V[ke]=[Ke,Je];var qe=P(N,pe,fe,ce,ke,Re,Ke,ze,xe.panelSizeX,xe.panelSizeY,xe.dim0.crossfilterDimensionIndex,k?0:E?2:1,be);O.clearOnly=te;var Ee=ie?N.lines.blockLineCount:Y;p(R,Z,O,Ee,Y,qe)}}}function ve(ae,ie){return R.read({x:ae,y:ie,width:1,height:1,data:l}),l}function $(ae,ie,te,re){var ce=new Uint8Array(4*te*re);return R.read({x:ae,y:ie,width:te,height:re,data:ce}),ce}function j(){I.style["pointer-events"]="none",H.destroy(),B&&B.destroy();for(var ae in z)z[ae].destroy()}return{render:ne,readPixel:ve,readPixels:$,destroy:j,update:q}}},{"../../lib":778,"./constants":1153,glslify:439}],1158:[function(e,d,S){d.exports=function(r,a,u,c){c||(c=1/0);var t,f;for(t=0;t<a.length;t++)f=a[t],f.visible&&(c=Math.min(c,f[u].length));for(c===1/0&&(c=0),r._length=c,t=0;t<a.length;t++)f=a[t],f.visible&&(f._length=c);return c}},{}],1159:[function(e,d,S){var r=e("d3"),a=e("color-rgba"),u=e("../../plots/cartesian/axes"),c=e("../../lib"),t=c.strRotate,f=c.strTranslate,n=e("../../lib/svg_text_utils"),o=e("../../components/drawing"),l=e("../../components/colorscale"),h=e("../../lib/gup"),i=h.keyFun,s=h.repeat,p=h.unwrap,v=e("./helpers"),m=e("./constants"),b=e("./axisbrush"),y=e("./lines");function x(V,Z,q){return c.aggNums(V,null,Z,q)}function w(V,Z){return T(x(Math.min,V,Z),x(Math.max,V,Z))}function g(V){var Z=V.range;return Z?T(Z[0],Z[1]):w(V.values,V._length)}function T(V,Z){return(isNaN(V)||!isFinite(V))&&(V=0),(isNaN(Z)||!isFinite(Z))&&(Z=0),V===Z&&(V===0?(V-=1,Z+=1):(V*=.9,Z*=1.1)),[V,Z]}function M(V,Z){return Z?function(q,J){var ne=Z[J];return ne==null?V(q):ne}:V}function P(V,Z,q,J,ne){var ve=g(q);return J?r.scale.ordinal().domain(J.map(M(r.format(q.tickformat),ne))).range(J.map(function($){var j=($-ve[0])/(ve[1]-ve[0]);return V-Z+j*(2*Z-V)})):r.scale.linear().domain(ve).range([V-Z,Z])}function L(V,Z){return r.scale.linear().range([Z,V-Z])}function I(V,Z){return r.scale.linear().domain(g(V)).range([Z,1-Z])}function C(V){if(!!V.tickvals){var Z=g(V);return r.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(q){return(q-Z[0])/(Z[1]-Z[0])}))}}function k(V){var Z=V.map(function(ve){return ve[0]}),q=V.map(function(ve){var $=a(ve[1]);return r.rgb("rgb("+$[0]+","+$[1]+","+$[2]+")")}),J=function(ve){return function($){return $[ve]}},ne="rgb".split("").map(function(ve){return r.scale.linear().clamp(!0).domain(Z).range(q.map(J(ve)))});return function(ve){return ne.map(function($){return $(ve)})}}function E(V){return V.dimensions.some(function(Z){return Z.brush.filterSpecified})}function R(V,Z,q){var J=p(Z),ne=J.trace,ve=v.convertTypedArray(J.lineColor),$=ne.line,j={color:a(m.deselectedLineColor)},ae=l.extractOpts($),ie=ae.reversescale?l.flipScale(J.cscale):J.cscale,te=ne.domain,re=ne.dimensions,ce=V.width,pe=ne.labelangle,fe=ne.labelside,se=ne.labelfont,de=ne.tickfont,be=ne.rangefont,xe=c.extendDeepNoArrays({},$,{color:ve.map(r.scale.linear().domain(g({values:ve,range:[ae.min,ae.max],_length:ne._length}))),blockLineCount:m.blockLineCount,canvasOverdrag:m.overdrag*m.canvasPixelRatio}),ke=Math.floor(ce*(te.x[1]-te.x[0])),Re=Math.floor(V.height*(te.y[1]-te.y[0])),Ke=V.margin||{l:80,r:80,t:100,b:80},ze=ke,Je=Re;return{key:q,colCount:re.filter(v.isVisible).length,dimensions:re,tickDistance:m.tickDistance,unitToColor:k(ie),lines:xe,deselectedLines:j,labelAngle:pe,labelSide:fe,labelFont:se,tickFont:de,rangeFont:be,layoutWidth:ce,layoutHeight:V.height,domain:te,translateX:te.x[0]*ce,translateY:V.height-te.y[1]*V.height,pad:Ke,canvasWidth:ze*m.canvasPixelRatio+2*xe.canvasOverdrag,canvasHeight:Je*m.canvasPixelRatio,width:ze,height:Je,canvasPixelRatio:m.canvasPixelRatio}}function O(V,Z,q){var J=q.width,ne=q.height,ve=q.dimensions,$=q.canvasPixelRatio,j=function(ce){return J*ce/Math.max(1,q.colCount-1)},ae=m.verticalPadding/ne,ie=L(ne,m.verticalPadding),te={key:q.key,xScale:j,model:q,inBrushDrag:!1},re={};return te.dimensions=ve.filter(v.isVisible).map(function(ce,pe){var fe=I(ce,ae),se=re[ce.label];re[ce.label]=(se||0)+1;var de=ce.label+(se?"__"+se:""),be=ce.constraintrange,xe=be&&be.length;xe&&!Array.isArray(be[0])&&(be=[be]);var ke=xe?be.map(function(xt){return xt.map(fe)}):[[-1/0,1/0]],Re=function(){var xt=te;xt.focusLayer&&xt.focusLayer.render(xt.panels,!0);var bt=E(xt);!V.contextShown()&&bt?(xt.contextLayer&&xt.contextLayer.render(xt.panels,!0),V.contextShown(!0)):V.contextShown()&&!bt&&(xt.contextLayer&&xt.contextLayer.render(xt.panels,!0,!0),V.contextShown(!1))},Ke=ce.values;Ke.length>ce._length&&(Ke=Ke.slice(0,ce._length));var ze=ce.tickvals,Je;function qe(xt,bt){return{val:xt,text:Je[bt]}}function Ee(xt,bt){return xt.val-bt.val}if(Array.isArray(ze)&&ze.length){Je=ce.ticktext,!Array.isArray(Je)||!Je.length?Je=ze.map(r.format(ce.tickformat)):Je.length>ze.length?Je=Je.slice(0,ze.length):ze.length>Je.length&&(ze=ze.slice(0,Je.length));for(var Ae=1;Ae<ze.length;Ae++)if(ze[Ae]<ze[Ae-1]){for(var Be=ze.map(qe).sort(Ee),$e=0;$e<ze.length;$e++)ze[$e]=Be[$e].val,Je[$e]=Be[$e].text;break}}else ze=void 0;return Ke=v.convertTypedArray(Ke),{key:de,label:ce.label,tickFormat:ce.tickformat,tickvals:ze,ticktext:Je,ordinal:v.isOrdinal(ce),multiselect:ce.multiselect,xIndex:pe,crossfilterDimensionIndex:pe,visibleIndex:ce._index,height:ne,values:Ke,paddedUnitValues:Ke.map(fe),unitTickvals:ze&&ze.map(fe),xScale:j,x:j(pe),canvasX:j(pe)*$,unitToPaddedPx:ie,domainScale:P(ne,m.verticalPadding,ce,ze,Je),ordinalScale:C(ce),parent:te,model:q,brush:b.makeBrush(V,xe,ke,function(){V.linePickActive(!1)},Re,function(xt){if(te.focusLayer.render(te.panels,!0),te.pickLayer&&te.pickLayer.render(te.panels,!0),V.linePickActive(!0),Z&&Z.filterChanged){var bt=fe.invert,Ne=xt.map(function(st){return st.map(bt).sort(c.sorterAsc)}).sort(function(st,_t){return st[0]-_t[0]});Z.filterChanged(te.key,ce._index,Ne)}})}}),te}function N(V){V.classed(m.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function G(){var V=!0,Z=!1;return{linePickActive:function(q){return arguments.length?V=!!q:V},contextShown:function(q){return arguments.length?Z=!!q:Z}}}function U(V,Z){var q=Z==="top"?1:-1,J=V*Math.PI/180,ne=Math.sin(J),ve=Math.cos(J);return{dir:q,dx:ne,dy:ve,degrees:V}}function Y(V,Z){for(var q=Z.panels||(Z.panels=[]),J=V.data(),ne=0;ne<J.length-1;ne++){var ve=q[ne]||(q[ne]={}),$=J[ne],j=J[ne+1];ve.dim0=$,ve.dim1=j,ve.canvasX=$.canvasX,ve.panelSizeX=j.canvasX-$.canvasX,ve.panelSizeY=Z.model.canvasHeight,ve.y=0,ve.canvasY=0}}function z(V){for(var Z=0;Z<V.length;Z++)for(var q=0;q<V[Z].length;q++)for(var J=V[Z][q].trace,ne=J.dimensions,ve=0;ve<ne.length;ve++){var $=ne[ve].values,j=ne[ve]._ax;j&&(j.range?j.range=T(j.range[0],j.range[1]):j.range=w($,J._length),j.dtick||(j.dtick=.01*(Math.abs(j.range[1]-j.range[0])||1)),j.tickformat=ne[ve].tickformat,u.calcTicks(j),j.cleanRange())}}function B(V,Z){return u.tickText(V._ax,Z,!1).text}function H(V,Z){if(V.ordinal)return"";var q=V.domainScale.domain(),J=q[Z?q.length-1:0];return B(V.model.dimensions[V.visibleIndex],J)}d.exports=function(Z,q,J,ne){var ve=Z._fullLayout,$=ve._toppaper,j=ve._glcontainer;z(q);var ae=G(),ie=q.filter(function(Ee){return p(Ee).trace.visible}).map(R.bind(0,J)).map(O.bind(0,ae,ne));j.each(function(Ee,Ae){return c.extendFlat(Ee,ie[Ae])});var te=j.selectAll(".gl-canvas").each(function(Ee){Ee.viewModel=ie[0],Ee.model=Ee.viewModel?Ee.viewModel.model:null}),re=null,ce=te.filter(function(Ee){return Ee.pick});ce.style("pointer-events","auto").on("mousemove",function(Ee){if(ae.linePickActive()&&Ee.lineLayer&&ne&&ne.hover){var Ae=r.event,Be=this.width,$e=this.height,xt=r.mouse(this),bt=xt[0],Ne=xt[1];if(bt<0||Ne<0||bt>=Be||Ne>=$e)return;var st=Ee.lineLayer.readPixel(bt,$e-1-Ne),_t=st[3]!==0,Ot=_t?st[2]+256*(st[1]+256*st[0]):null,Wt={x:bt,y:Ne,clientX:Ae.clientX,clientY:Ae.clientY,dataIndex:Ee.model.key,curveNumber:Ot};Ot!==re&&(_t?ne.hover(Wt):ne.unhover&&ne.unhover(Wt),re=Ot)}}),te.style("opacity",function(Ee){return Ee.pick?0:1}),$.style("background","rgba(255, 255, 255, 0)");var pe=$.selectAll("."+m.cn.parcoords).data(ie,i);pe.exit().remove(),pe.enter().append("g").classed(m.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),pe.attr("transform",function(Ee){return f(Ee.model.translateX,Ee.model.translateY)});var fe=pe.selectAll("."+m.cn.parcoordsControlView).data(s,i);fe.enter().append("g").classed(m.cn.parcoordsControlView,!0),fe.attr("transform",function(Ee){return f(Ee.model.pad.l,Ee.model.pad.t)});var se=fe.selectAll("."+m.cn.yAxis).data(function(Ee){return Ee.dimensions},i);se.enter().append("g").classed(m.cn.yAxis,!0),fe.each(function(Ee){Y(se,Ee)}),te.each(function(Ee){if(Ee.viewModel){!Ee.lineLayer||ne?Ee.lineLayer=y(this,Ee):Ee.lineLayer.update(Ee),(Ee.key||Ee.key===0)&&(Ee.viewModel[Ee.key]=Ee.lineLayer);var Ae=!Ee.context||ne;Ee.lineLayer.render(Ee.viewModel.panels,Ae)}}),se.attr("transform",function(Ee){return f(Ee.xScale(Ee.xIndex),0)}),se.call(r.behavior.drag().origin(function(Ee){return Ee}).on("drag",function(Ee){var Ae=Ee.parent;ae.linePickActive(!1),Ee.x=Math.max(-m.overdrag,Math.min(Ee.model.width+m.overdrag,r.event.x)),Ee.canvasX=Ee.x*Ee.model.canvasPixelRatio,se.sort(function(Be,$e){return Be.x-$e.x}).each(function(Be,$e){Be.xIndex=$e,Be.x=Ee===Be?Be.x:Be.xScale(Be.xIndex),Be.canvasX=Be.x*Be.model.canvasPixelRatio}),Y(se,Ae),se.filter(function(Be){return Math.abs(Ee.xIndex-Be.xIndex)!==0}).attr("transform",function(Be){return f(Be.xScale(Be.xIndex),0)}),r.select(this).attr("transform",f(Ee.x,0)),se.each(function(Be,$e,xt){xt===Ee.parent.key&&(Ae.dimensions[$e]=Be)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!E(Ae)),Ae.focusLayer.render&&Ae.focusLayer.render(Ae.panels)}).on("dragend",function(Ee){var Ae=Ee.parent;Ee.x=Ee.xScale(Ee.xIndex),Ee.canvasX=Ee.x*Ee.model.canvasPixelRatio,Y(se,Ae),r.select(this).attr("transform",function(Be){return f(Be.x,0)}),Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!1,!E(Ae)),Ae.focusLayer&&Ae.focusLayer.render(Ae.panels),Ae.pickLayer&&Ae.pickLayer.render(Ae.panels,!0),ae.linePickActive(!0),ne&&ne.axesMoved&&ne.axesMoved(Ae.key,Ae.dimensions.map(function(Be){return Be.crossfilterDimensionIndex}))})),se.exit().remove();var de=se.selectAll("."+m.cn.axisOverlays).data(s,i);de.enter().append("g").classed(m.cn.axisOverlays,!0),de.selectAll("."+m.cn.axis).remove();var be=de.selectAll("."+m.cn.axis).data(s,i);be.enter().append("g").classed(m.cn.axis,!0),be.each(function(Ee){var Ae=Ee.model.height/Ee.model.tickDistance,Be=Ee.domainScale,$e=Be.domain();r.select(this).call(r.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ae,Ee.tickFormat).tickValues(Ee.ordinal?$e:null).tickFormat(function(xt){return v.isOrdinal(Ee)?xt:B(Ee.model.dimensions[Ee.visibleIndex],xt)}).scale(Be)),o.font(be.selectAll("text"),Ee.model.tickFont)}),be.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),be.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default");var xe=de.selectAll("."+m.cn.axisHeading).data(s,i);xe.enter().append("g").classed(m.cn.axisHeading,!0);var ke=xe.selectAll("."+m.cn.axisTitle).data(s,i);ke.enter().append("text").classed(m.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),ke.text(function(Ee){return Ee.label}).each(function(Ee){var Ae=r.select(this);o.font(Ae,Ee.model.labelFont),n.convertToTspans(Ae,Z)}).attr("transform",function(Ee){var Ae=U(Ee.model.labelAngle,Ee.model.labelSide),Be=m.axisTitleOffset;return(Ae.dir>0?"":f(0,2*Be+Ee.model.height))+t(Ae.degrees)+f(-Be*Ae.dx,-Be*Ae.dy)}).attr("text-anchor",function(Ee){var Ae=U(Ee.model.labelAngle,Ee.model.labelSide),Be=Math.abs(Ae.dx),$e=Math.abs(Ae.dy);return 2*Be>$e?Ae.dir*Ae.dx<0?"start":"end":"middle"});var Re=de.selectAll("."+m.cn.axisExtent).data(s,i);Re.enter().append("g").classed(m.cn.axisExtent,!0);var Ke=Re.selectAll("."+m.cn.axisExtentTop).data(s,i);Ke.enter().append("g").classed(m.cn.axisExtentTop,!0),Ke.attr("transform",f(0,-m.axisExtentOffset));var ze=Ke.selectAll("."+m.cn.axisExtentTopText).data(s,i);ze.enter().append("text").classed(m.cn.axisExtentTopText,!0).call(N),ze.text(function(Ee){return H(Ee,!0)}).each(function(Ee){o.font(r.select(this),Ee.model.rangeFont)});var Je=Re.selectAll("."+m.cn.axisExtentBottom).data(s,i);Je.enter().append("g").classed(m.cn.axisExtentBottom,!0),Je.attr("transform",function(Ee){return f(0,Ee.model.height+m.axisExtentOffset)});var qe=Je.selectAll("."+m.cn.axisExtentBottomText).data(s,i);qe.enter().append("text").classed(m.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(N),qe.text(function(Ee){return H(Ee,!1)}).each(function(Ee){o.font(r.select(this),Ee.model.rangeFont)}),b.ensureAxisBrush(de)}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"./axisbrush":1150,"./constants":1153,"./helpers":1155,"./lines":1157,"color-rgba":127,d3:169}],1160:[function(e,d,S){var r=e("./parcoords"),a=e("../../lib/prepare_regl"),u=e("./helpers").isVisible;function c(f,n,o){var l=n.indexOf(o),h=f.indexOf(l);return h===-1&&(h+=n.length),h}function t(f,n){return function(l,h){return c(f,n,l)-c(f,n,h)}}d.exports=function(n,o){var l=n._fullLayout,h=a(n);if(!!h){var i={},s={},p={},v={},m=l._size;o.forEach(function(g,T){var M=g[0].trace;p[T]=M.index;var P=v[T]=M._fullInput.index;i[T]=n.data[P].dimensions,s[T]=n.data[P].dimensions.slice()});var b=function(g,T,M){var P=s[g][T],L=M.map(function(O){return O.slice()}),I="dimensions["+T+"].constraintrange",C=l._tracePreGUI[n._fullData[p[g]]._fullInput.uid];if(C[I]===void 0){var k=P.constraintrange;C[I]=k||null}var E=n._fullData[p[g]].dimensions[T];L.length?(L.length===1&&(L=L[0]),P.constraintrange=L,E.constraintrange=L.slice(),L=[L]):(delete P.constraintrange,delete E.constraintrange,L=null);var R={};R[I]=L,n.emit("plotly_restyle",[R,[v[g]]])},y=function(g){n.emit("plotly_hover",g)},x=function(g){n.emit("plotly_unhover",g)},w=function(g,T){var M=t(T,s[g].filter(u));i[g].sort(M),s[g].filter(function(P){return!u(P)}).sort(function(P){return s[g].indexOf(P)}).forEach(function(P){i[g].splice(i[g].indexOf(P),1),i[g].splice(s[g].indexOf(P),0,P)}),n.emit("plotly_restyle",[{dimensions:[i[g]]},[v[g]]])};r(n,o,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{filterChanged:b,hover:y,unhover:x,axesMoved:w})}}},{"../../lib/prepare_regl":791,"./helpers":1155,"./parcoords":1159}],1161:[function(e,d,S){var r=e("../../plots/attributes"),a=e("../../plots/domain").attributes,u=e("../../plots/font_attributes"),c=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,f=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../lib/extend").extendFlat,o=u({editType:"plot",arrayOk:!0,colorEditType:"plot"});d.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:c.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},o,{}),outsidetextfont:n({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1162:[function(e,d,S){var r=e("../../plots/plots");S.name="pie",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1163:[function(e,d,S){var r=e("fast-isnumeric"),a=e("tinycolor2"),u=e("../../components/color"),c={};function t(l,h){var i=[],s=l._fullLayout,p=s.hiddenlabels||[],v=h.labels,m=h.marker.colors||[],b=h.values,y=h._length,x=h._hasValues&&y,w,g;if(h.dlabel)for(v=new Array(y),w=0;w<y;w++)v[w]=String(h.label0+w*h.dlabel);var T={},M=f(s["_"+h.type+"colormap"]),P=0,L=!1;for(w=0;w<y;w++){var I,C,k;if(x){if(I=b[w],!r(I)||(I=+I,I<0))continue}else I=1;C=v[w],(C===void 0||C==="")&&(C=w),C=String(C);var E=T[C];E===void 0?(T[C]=i.length,k=p.indexOf(C)!==-1,k||(P+=I),i.push({v:I,label:C,color:M(m[w],C),i:w,pts:[w],hidden:k})):(L=!0,g=i[E],g.v+=I,g.pts.push(w),g.hidden||(P+=I),g.color===!1&&m[w]&&(g.color=M(m[w],C)))}var R=h.type==="funnelarea"?L:h.sort;return R&&i.sort(function(O,N){return N.v-O.v}),i[0]&&(i[0].vTotal=P),i}function f(l){return function(i,s){return!i||(i=a(i),!i.isValid())?!1:(i=u.addOpacity(i,i.getAlpha()),l[s]||(l[s]=i),i)}}function n(l,h){var i=(h||{}).type;i||(i="pie");var s=l._fullLayout,p=l.calcdata,v=s[i+"colorway"],m=s["_"+i+"colormap"];s["extend"+i+"colors"]&&(v=o(v,c));for(var b=0,y=0;y<p.length;y++){var x=p[y],w=x[0].trace.type;if(w===i)for(var g=0;g<x.length;g++){var T=x[g];T.color===!1&&(m[T.label]?T.color=m[T.label]:(m[T.label]=T.color=v[b%v.length],b++))}}}function o(l,h){var i,s=JSON.stringify(l),p=h[s];if(!p){for(p=l.slice(),i=0;i<l.length;i++)p.push(a(l[i]).lighten(20).toHexString());for(i=0;i<l.length;i++)p.push(a(l[i]).darken(20).toHexString());h[s]=p}return p}d.exports={calc:t,crossTraceCalc:n,makePullColorFn:f,generateExtendedColors:o}},{"../../components/color":643,"fast-isnumeric":241,tinycolor2:576}],1164:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("./attributes"),c=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function f(o,l){var h=Array.isArray(o),i=a.isArrayOrTypedArray(l),s=Math.min(h?o.length:1/0,i?l.length:1/0);if(isFinite(s)||(s=0),s&&i){for(var p,v=0;v<s;v++){var m=l[v];if(r(m)&&m>0){p=!0;break}}p||(s=0)}return{hasLabels:h,hasValues:i,len:s}}function n(o,l,h,i){function s(k,E){return a.coerce(o,l,u,k,E)}var p=s("labels"),v=s("values"),m=f(p,v),b=m.len;if(l._hasLabels=m.hasLabels,l._hasValues=m.hasValues,!l._hasLabels&&l._hasValues&&(s("label0"),s("dlabel")),!b){l.visible=!1;return}l._length=b;var y=s("marker.line.width");y&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var x=s("text"),w=s("texttemplate"),g;if(w||(g=s("textinfo",Array.isArray(x)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),w||g&&g!=="none"){var T=s("textposition");t(o,l,i,s,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var M=Array.isArray(T)||T==="auto",P=M||T==="outside";P&&s("automargin"),(T==="inside"||T==="auto"||Array.isArray(T))&&s("insidetextorientation")}c(l,i,s);var L=s("hole"),I=s("title.text");if(I){var C=s("title.position",L?"middle center":"top center");!L&&C==="middle center"&&(l.title.position="top center"),a.coerceFont(s,"title.font",i.font)}s("sort"),s("direction"),s("rotation"),s("pull")}d.exports={handleLabelsAndValues:f,supplyDefaults:n}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1161,"fast-isnumeric":241}],1165:[function(e,d,S){var r=e("../../components/fx/helpers").appendArrayMultiPointValues;d.exports=function(u,c){var t={curveNumber:c.index,pointNumbers:u.pts,data:c._input,fullData:c,label:u.label,color:u.color,value:u.v,percent:u.percent,text:u.text,v:u.v};return u.pts.length===1&&(t.pointNumber=t.i=u.pts[0]),r(t,c,u.pts),c.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":679}],1166:[function(e,d,S){var r=e("../../lib");function a(u){return u.indexOf("e")!==-1?u.replace(/[.]?0+e/,"e"):u.indexOf(".")!==-1?u.replace(/[.]?0+$/,""):u}S.formatPiePercent=function(c,t){var f=a((c*100).toPrecision(3));return r.numSeparate(f,t)+"%"},S.formatPieValue=function(c,t){var f=a(c.toPrecision(10));return r.numSeparate(f,t)},S.getFirstFilled=function(c,t){if(!!Array.isArray(c))for(var f=0;f<t.length;f++){var n=c[t[f]];if(n||n===0||n==="")return n}},S.castOption=function(c,t){if(Array.isArray(c))return S.getFirstFilled(c,t);if(c)return c},S.getRotationAngle=function(u){return(u==="auto"?0:u)*Math.PI/180}},{"../../lib":778}],1167:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1161,"./base_plot":1162,"./calc":1163,"./defaults":1164,"./layout_attributes":1168,"./layout_defaults":1169,"./plot":1170,"./style":1171,"./style_one":1172}],1168:[function(e,d,S){d.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1169:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("hiddenlabels"),f("piecolorway",t.colorway),f("extendpiecolors")}},{"../../lib":778,"./layout_attributes":1168}],1170:[function(e,d,S){var r=e("d3"),a=e("../../plots/plots"),u=e("../../components/fx"),c=e("../../components/color"),t=e("../../components/drawing"),f=e("../../lib"),n=f.strScale,o=f.strTranslate,l=e("../../lib/svg_text_utils"),h=e("../bar/uniform_text"),i=h.recordMinTextSize,s=h.clearMinTextSize,p=e("../bar/constants").TEXTPAD,v=e("./helpers"),m=e("./event_data"),b=e("../../lib").isValidTextValue;function y($,j){var ae=$._fullLayout,ie=ae._size;s("pie",ae),M(j,$),V(j,ie);var te=f.makeTraceGroups(ae._pielayer,j,"trace").each(function(re){var ce=r.select(this),pe=re[0],fe=pe.trace;q(re),ce.attr("stroke-linejoin","round"),ce.each(function(){var se=r.select(this).selectAll("g.slice").data(re);se.enter().append("g").classed("slice",!0),se.exit().remove();var de=[[[],[]],[[],[]]],be=!1;se.each(function(Ee,Ae){if(Ee.hidden){r.select(this).selectAll("path,g").remove();return}Ee.pointNumber=Ee.i,Ee.curveNumber=fe.index,de[Ee.pxmid[1]<0?0:1][Ee.pxmid[0]<0?0:1].push(Ee);var Be=pe.cx,$e=pe.cy,xt=r.select(this),bt=xt.selectAll("path.surface").data([Ee]);if(bt.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),xt.call(w,$,re),fe.pull){var Ne=+v.castOption(fe.pull,Ee.pts)||0;Ne>0&&(Be+=Ne*Ee.pxmid[0],$e+=Ne*Ee.pxmid[1])}Ee.cxFinal=Be,Ee.cyFinal=$e;function st(Mt,At,ft,ot){var Te=ot*(At[0]-Mt[0]),Le=ot*(At[1]-Mt[1]);return"a"+ot*pe.r+","+ot*pe.r+" 0 "+Ee.largeArc+(ft?" 1 ":" 0 ")+Te+","+Le}var _t=fe.hole;if(Ee.v===pe.vTotal){var Ot="M"+(Be+Ee.px0[0])+","+($e+Ee.px0[1])+st(Ee.px0,Ee.pxmid,!0,1)+st(Ee.pxmid,Ee.px0,!0,1)+"Z";_t?bt.attr("d","M"+(Be+_t*Ee.px0[0])+","+($e+_t*Ee.px0[1])+st(Ee.px0,Ee.pxmid,!1,_t)+st(Ee.pxmid,Ee.px0,!1,_t)+"Z"+Ot):bt.attr("d",Ot)}else{var Wt=st(Ee.px0,Ee.px1,!0,1);if(_t){var Et=1-_t;bt.attr("d","M"+(Be+_t*Ee.px1[0])+","+($e+_t*Ee.px1[1])+st(Ee.px1,Ee.px0,!1,_t)+"l"+Et*Ee.px0[0]+","+Et*Ee.px0[1]+Wt+"Z")}else bt.attr("d","M"+Be+","+$e+"l"+Ee.px0[0]+","+Ee.px0[1]+Wt+"Z")}ne($,Ee,pe);var jt=v.castOption(fe.textposition,Ee.pts),Zt=xt.selectAll("g.slicetext").data(Ee.text&&jt!=="none"?[0]:[]);Zt.enter().append("g").classed("slicetext",!0),Zt.exit().remove(),Zt.each(function(){var Mt=f.ensureSingle(r.select(this),"text","",function(Me){Me.attr("data-notex",1)}),At=f.ensureUniformFontSize($,jt==="outside"?g(fe,Ee,ae.font):T(fe,Ee,ae.font));Mt.text(Ee.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,At).call(l.convertToTspans,$);var ft=t.bBox(Mt.node()),ot;if(jt==="outside")ot=N(ft,Ee);else if(ot=P(ft,Ee,pe),jt==="auto"&&ot.scale<1){var Te=f.ensureUniformFontSize($,fe.outsidetextfont);Mt.call(t.font,Te),ft=t.bBox(Mt.node()),ot=N(ft,Ee)}var Le=ot.textPosAngle,Ve=Le===void 0?Ee.pxmid:J(pe.r,Le);if(ot.targetX=Be+Ve[0]*ot.rCenter+(ot.x||0),ot.targetY=$e+Ve[1]*ot.rCenter+(ot.y||0),ve(ot,ft),ot.outside){var Qe=ot.targetY;Ee.yLabelMin=Qe-ft.height/2,Ee.yLabelMid=Qe,Ee.yLabelMax=Qe+ft.height/2,Ee.labelExtraX=0,Ee.labelExtraY=0,be=!0}ot.fontSize=At.size,i(fe.type,ot,ae),re[Ae].transform=ot,Mt.attr("transform",f.getTextTransform(ot))})});var xe=r.select(this).selectAll("g.titletext").data(fe.title.text?[0]:[]);if(xe.enter().append("g").classed("titletext",!0),xe.exit().remove(),xe.each(function(){var Ee=f.ensureSingle(r.select(this),"text","",function($e){$e.attr("data-notex",1)}),Ae=fe.title.text;fe._meta&&(Ae=f.templateString(Ae,fe._meta)),Ee.text(Ae).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,fe.title.font).call(l.convertToTspans,$);var Be;fe.title.position==="middle center"?Be=G(pe):Be=U(pe,ie),Ee.attr("transform",o(Be.x,Be.y)+n(Math.min(1,Be.scale))+o(Be.tx,Be.ty))}),be&&H(de,fe),x(se,fe),be&&fe.automargin){var ke=t.bBox(ce.node()),Re=fe.domain,Ke=ie.w*(Re.x[1]-Re.x[0]),ze=ie.h*(Re.y[1]-Re.y[0]),Je=(.5*Ke-pe.r)/ie.w,qe=(.5*ze-pe.r)/ie.h;a.autoMargin($,"pie."+fe.uid+".automargin",{xl:Re.x[0]-Je,xr:Re.x[1]+Je,yb:Re.y[0]-qe,yt:Re.y[1]+qe,l:Math.max(pe.cx-pe.r-ke.left,0),r:Math.max(ke.right-(pe.cx+pe.r),0),b:Math.max(ke.bottom-(pe.cy+pe.r),0),t:Math.max(pe.cy-pe.r-ke.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var re=r.select(this);re.attr("dy")&&re.attr("dy",re.attr("dy"))})},0)}function x($,j){$.each(function(ae){var ie=r.select(this);if(!ae.labelExtraX&&!ae.labelExtraY){ie.select("path.textline").remove();return}var te=ie.select("g.slicetext text");ae.transform.targetX+=ae.labelExtraX,ae.transform.targetY+=ae.labelExtraY,te.attr("transform",f.getTextTransform(ae.transform));var re=ae.cxFinal+ae.pxmid[0],ce=ae.cyFinal+ae.pxmid[1],pe="M"+re+","+ce,fe=(ae.yLabelMax-ae.yLabelMin)*(ae.pxmid[0]<0?-1:1)/4;if(ae.labelExtraX){var se=ae.labelExtraX*ae.pxmid[1]/ae.pxmid[0],de=ae.yLabelMid+ae.labelExtraY-(ae.cyFinal+ae.pxmid[1]);Math.abs(se)>Math.abs(de)?pe+="l"+de*ae.pxmid[0]/ae.pxmid[1]+","+de+"H"+(re+ae.labelExtraX+fe):pe+="l"+ae.labelExtraX+","+se+"v"+(de-se)+"h"+fe}else pe+="V"+(ae.yLabelMid+ae.labelExtraY)+"h"+fe;f.ensureSingle(ie,"path","textline").call(c.stroke,j.outsidetextfont.color).attr({"stroke-width":Math.min(2,j.outsidetextfont.size/8),d:pe,fill:"none"})})}function w($,j,ae){var ie=ae[0],te=ie.trace,re=ie.cx,ce=ie.cy;"_hasHoverLabel"in te||(te._hasHoverLabel=!1),"_hasHoverEvent"in te||(te._hasHoverEvent=!1),$.on("mouseover",function(pe){var fe=j._fullLayout,se=j._fullData[te.index];if(!(j._dragging||fe.hovermode===!1)){var de=se.hoverinfo;if(Array.isArray(de)&&(de=u.castHoverinfo({hoverinfo:[v.castOption(de,pe.pts)],_module:te._module},fe,0)),de==="all"&&(de="label+text+value+percent+name"),se.hovertemplate||de!=="none"&&de!=="skip"&&de){var be=pe.rInscribed||0,xe=re+pe.pxmid[0]*(1-be),ke=ce+pe.pxmid[1]*(1-be),Re=fe.separators,Ke=[];if(de&&de.indexOf("label")!==-1&&Ke.push(pe.label),pe.text=v.castOption(se.hovertext||se.text,pe.pts),de&&de.indexOf("text")!==-1){var ze=pe.text;f.isValidTextValue(ze)&&Ke.push(ze)}pe.value=pe.v,pe.valueLabel=v.formatPieValue(pe.v,Re),de&&de.indexOf("value")!==-1&&Ke.push(pe.valueLabel),pe.percent=pe.v/ie.vTotal,pe.percentLabel=v.formatPiePercent(pe.percent,Re),de&&de.indexOf("percent")!==-1&&Ke.push(pe.percentLabel);var Je=se.hoverlabel,qe=Je.font;u.loneHover({trace:te,x0:xe-be*ie.r,x1:xe+be*ie.r,y:ke,text:Ke.join("<br>"),name:se.hovertemplate||de.indexOf("name")!==-1?se.name:void 0,idealAlign:pe.pxmid[0]<0?"left":"right",color:v.castOption(Je.bgcolor,pe.pts)||pe.color,borderColor:v.castOption(Je.bordercolor,pe.pts),fontFamily:v.castOption(qe.family,pe.pts),fontSize:v.castOption(qe.size,pe.pts),fontColor:v.castOption(qe.color,pe.pts),nameLength:v.castOption(Je.namelength,pe.pts),textAlign:v.castOption(Je.align,pe.pts),hovertemplate:v.castOption(se.hovertemplate,pe.pts),hovertemplateLabels:pe,eventData:[m(pe,se)]},{container:fe._hoverlayer.node(),outerContainer:fe._paper.node(),gd:j}),te._hasHoverLabel=!0}te._hasHoverEvent=!0,j.emit("plotly_hover",{points:[m(pe,se)],event:r.event})}}),$.on("mouseout",function(pe){var fe=j._fullLayout,se=j._fullData[te.index],de=r.select(this).datum();te._hasHoverEvent&&(pe.originalEvent=r.event,j.emit("plotly_unhover",{points:[m(de,se)],event:r.event}),te._hasHoverEvent=!1),te._hasHoverLabel&&(u.loneUnhover(fe._hoverlayer.node()),te._hasHoverLabel=!1)}),$.on("click",function(pe){var fe=j._fullLayout,se=j._fullData[te.index];j._dragging||fe.hovermode===!1||(j._hoverdata=[m(pe,se)],u.click(j,r.event))})}function g($,j,ae){var ie=v.castOption($.outsidetextfont.color,j.pts)||v.castOption($.textfont.color,j.pts)||ae.color,te=v.castOption($.outsidetextfont.family,j.pts)||v.castOption($.textfont.family,j.pts)||ae.family,re=v.castOption($.outsidetextfont.size,j.pts)||v.castOption($.textfont.size,j.pts)||ae.size;return{color:ie,family:te,size:re}}function T($,j,ae){var ie=v.castOption($.insidetextfont.color,j.pts);!ie&&$._input.textfont&&(ie=v.castOption($._input.textfont.color,j.pts));var te=v.castOption($.insidetextfont.family,j.pts)||v.castOption($.textfont.family,j.pts)||ae.family,re=v.castOption($.insidetextfont.size,j.pts)||v.castOption($.textfont.size,j.pts)||ae.size;return{color:ie||c.contrast(j.color),family:te,size:re}}function M($,j){for(var ae,ie,te=0;te<$.length;te++)if(ae=$[te][0],ie=ae.trace,ie.title.text){var re=ie.title.text;ie._meta&&(re=f.templateString(re,ie._meta));var ce=t.tester.append("text").attr("data-notex",1).text(re).call(t.font,ie.title.font).call(l.convertToTspans,j),pe=t.bBox(ce.node(),!0);ae.titleBox={width:pe.width,height:pe.height},ce.remove()}}function P($,j,ae){var ie=ae.r||j.rpx1,te=j.rInscribed,re=j.startangle===j.stopangle;if(re)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var ce=j.ring,pe=ce===1&&Math.abs(j.startangle-j.stopangle)===Math.PI*2,fe=j.halfangle,se=j.midangle,de=ae.trace.insidetextorientation,be=de==="horizontal",xe=de==="tangential",ke=de==="radial",Re=de==="auto",Ke=[],ze;if(!Re){var Je=function(bt,Ne){if(L(j,bt)){var st=Math.abs(bt-j.startangle),_t=Math.abs(bt-j.stopangle),Ot=st<_t?st:_t;Ne==="tan"?ze=C($,ie,ce,Ot,0):ze=I($,ie,ce,Ot,Math.PI/2),ze.textPosAngle=bt,Ke.push(ze)}},qe;if(be||xe){for(qe=4;qe>=-4;qe-=2)Je(Math.PI*qe,"tan");for(qe=4;qe>=-4;qe-=2)Je(Math.PI*(qe+1),"tan")}if(be||ke){for(qe=4;qe>=-4;qe-=2)Je(Math.PI*(qe+1.5),"rad");for(qe=4;qe>=-4;qe-=2)Je(Math.PI*(qe+.5),"rad")}}if(pe||Re||be){var Ee=Math.sqrt($.width*$.width+$.height*$.height);if(ze={scale:te*ie*2/Ee,rCenter:1-te,rotate:0},ze.textPosAngle=(j.startangle+j.stopangle)/2,ze.scale>=1)return ze;Ke.push(ze)}(Re||ke)&&(ze=I($,ie,ce,fe,se),ze.textPosAngle=(j.startangle+j.stopangle)/2,Ke.push(ze)),(Re||xe)&&(ze=C($,ie,ce,fe,se),ze.textPosAngle=(j.startangle+j.stopangle)/2,Ke.push(ze));for(var Ae=0,Be=0,$e=0;$e<Ke.length;$e++){var xt=Ke[$e].scale;if(Be<xt&&(Be=xt,Ae=$e),!Re&&Be>=1)break}return Ke[Ae]}function L($,j){var ae=$.startangle,ie=$.stopangle;return ae>j&&j>ie||ae<j&&j<ie}function I($,j,ae,ie,te){j=Math.max(0,j-2*p);var re=$.width/$.height,ce=R(re,ie,j,ae);return{scale:ce*2/$.height,rCenter:k(re,ce/j),rotate:E(te)}}function C($,j,ae,ie,te){j=Math.max(0,j-2*p);var re=$.height/$.width,ce=R(re,ie,j,ae);return{scale:ce*2/$.width,rCenter:k(re,ce/j),rotate:E(te+Math.PI/2)}}function k($,j){return Math.cos(j)-$*j}function E($){return(180/Math.PI*$+720)%180-90}function R($,j,ae,ie){var te=$+1/(2*Math.tan(j));return ae*Math.min(1/(Math.sqrt(te*te+.5)+te),ie/(Math.sqrt($*$+ie/2)+$))}function O($,j){return $.v===j.vTotal&&!j.trace.hole?1:Math.min(1/(1+1/Math.sin($.halfangle)),$.ring/2)}function N($,j){var ae=j.pxmid[0],ie=j.pxmid[1],te=$.width/2,re=$.height/2;return ae<0&&(te*=-1),ie<0&&(re*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(re)*(te>0?1:-1)/2,y:re/(1+ae*ae/(ie*ie)),outside:!0}}function G($){var j=Math.sqrt($.titleBox.width*$.titleBox.width+$.titleBox.height*$.titleBox.height);return{x:$.cx,y:$.cy,scale:$.trace.hole*$.r*2/j,tx:0,ty:-$.titleBox.height/2+$.trace.title.font.size}}function U($,j){var ae=1,ie=1,te,re=$.trace,ce={x:$.cx,y:$.cy},pe={tx:0,ty:0};pe.ty+=re.title.font.size,te=B(re),re.title.position.indexOf("top")!==-1?(ce.y-=(1+te)*$.r,pe.ty-=$.titleBox.height):re.title.position.indexOf("bottom")!==-1&&(ce.y+=(1+te)*$.r);var fe=Y($.r,$.trace.aspectratio),se=j.w*(re.domain.x[1]-re.domain.x[0])/2;return re.title.position.indexOf("left")!==-1?(se=se+fe,ce.x-=(1+te)*fe,pe.tx+=$.titleBox.width/2):re.title.position.indexOf("center")!==-1?se*=2:re.title.position.indexOf("right")!==-1&&(se=se+fe,ce.x+=(1+te)*fe,pe.tx-=$.titleBox.width/2),ae=se/$.titleBox.width,ie=z($,j)/$.titleBox.height,{x:ce.x,y:ce.y,scale:Math.min(ae,ie),tx:pe.tx,ty:pe.ty}}function Y($,j){return $/(j===void 0?1:j)}function z($,j){var ae=$.trace,ie=j.h*(ae.domain.y[1]-ae.domain.y[0]);return Math.min($.titleBox.height,ie/2)}function B($){var j=$.pull;if(!j)return 0;var ae;if(Array.isArray(j))for(j=0,ae=0;ae<$.pull.length;ae++)$.pull[ae]>j&&(j=$.pull[ae]);return j}function H($,j){var ae,ie,te,re,ce,pe,fe,se,de,be,xe,ke,Re;function Ke(Ee,Ae){return Ee.pxmid[1]-Ae.pxmid[1]}function ze(Ee,Ae){return Ae.pxmid[1]-Ee.pxmid[1]}function Je(Ee,Ae){Ae||(Ae={});var Be=Ae.labelExtraY+(ie?Ae.yLabelMax:Ae.yLabelMin),$e=ie?Ee.yLabelMin:Ee.yLabelMax,xt=ie?Ee.yLabelMax:Ee.yLabelMin,bt=Ee.cyFinal+ce(Ee.px0[1],Ee.px1[1]),Ne=Be-$e,st,_t,Ot,Wt,Et,jt;if(Ne*fe>0&&(Ee.labelExtraY=Ne),!!Array.isArray(j.pull))for(_t=0;_t<be.length;_t++)Ot=be[_t],!(Ot===Ee||(v.castOption(j.pull,Ee.pts)||0)>=(v.castOption(j.pull,Ot.pts)||0))&&((Ee.pxmid[1]-Ot.pxmid[1])*fe>0?(Wt=Ot.cyFinal+ce(Ot.px0[1],Ot.px1[1]),Ne=Wt-$e-Ee.labelExtraY,Ne*fe>0&&(Ee.labelExtraY+=Ne)):(xt+Ee.labelExtraY-bt)*fe>0&&(st=3*pe*Math.abs(_t-be.indexOf(Ee)),Et=Ot.cxFinal+re(Ot.px0[0],Ot.px1[0]),jt=Et+st-(Ee.cxFinal+Ee.pxmid[0])-Ee.labelExtraX,jt*pe>0&&(Ee.labelExtraX+=jt)))}for(ie=0;ie<2;ie++)for(te=ie?Ke:ze,ce=ie?Math.max:Math.min,fe=ie?1:-1,ae=0;ae<2;ae++){for(re=ae?Math.max:Math.min,pe=ae?1:-1,se=$[ie][ae],se.sort(te),de=$[1-ie][ae],be=de.concat(se),ke=[],xe=0;xe<se.length;xe++)se[xe].yLabelMid!==void 0&&ke.push(se[xe]);for(Re=!1,xe=0;ie&&xe<de.length;xe++)if(de[xe].yLabelMid!==void 0){Re=de[xe];break}for(xe=0;xe<ke.length;xe++){var qe=xe&&ke[xe-1];Re&&!xe&&(qe=Re),Je(ke[xe],qe)}}}function V($,j){for(var ae=[],ie=0;ie<$.length;ie++){var te=$[ie][0],re=te.trace,ce=re.domain,pe=j.w*(ce.x[1]-ce.x[0]),fe=j.h*(ce.y[1]-ce.y[0]);re.title.text&&re.title.position!=="middle center"&&(fe-=z(te,j));var se=pe/2,de=fe/2;re.type==="funnelarea"&&!re.scalegroup&&(de/=re.aspectratio),te.r=Math.min(se,de)/(1+B(re)),te.cx=j.l+j.w*(re.domain.x[1]+re.domain.x[0])/2,te.cy=j.t+j.h*(1-re.domain.y[0])-fe/2,re.title.text&&re.title.position.indexOf("bottom")!==-1&&(te.cy-=z(te,j)),re.scalegroup&&ae.indexOf(re.scalegroup)===-1&&ae.push(re.scalegroup)}Z($,ae)}function Z($,j){for(var ae,ie,te,re=0;re<j.length;re++){var ce=1/0,pe=j[re];for(ie=0;ie<$.length;ie++)if(ae=$[ie][0],te=ae.trace,te.scalegroup===pe){var fe;if(te.type==="pie")fe=ae.r*ae.r;else if(te.type==="funnelarea"){var se,de;te.aspectratio>1?(se=ae.r,de=se/te.aspectratio):(de=ae.r,se=de*te.aspectratio),se*=(1+te.baseratio)/2,fe=se*de}ce=Math.min(ce,fe/ae.vTotal)}for(ie=0;ie<$.length;ie++)if(ae=$[ie][0],te=ae.trace,te.scalegroup===pe){var be=ce*ae.vTotal;te.type==="funnelarea"&&(be/=(1+te.baseratio)/2,be/=te.aspectratio),ae.r=Math.sqrt(be)}}}function q($){var j=$[0],ae=j.r,ie=j.trace,te=v.getRotationAngle(ie.rotation),re=2*Math.PI/j.vTotal,ce="px0",pe="px1",fe,se,de;if(ie.direction==="counterclockwise"){for(fe=0;fe<$.length&&$[fe].hidden;fe++);if(fe===$.length)return;te+=re*$[fe].v,re*=-1,ce="px1",pe="px0"}for(de=J(ae,te),fe=0;fe<$.length;fe++)se=$[fe],!se.hidden&&(se[ce]=de,se.startangle=te,te+=re*se.v/2,se.pxmid=J(ae,te),se.midangle=te,te+=re*se.v/2,de=J(ae,te),se.stopangle=te,se[pe]=de,se.largeArc=se.v>j.vTotal/2?1:0,se.halfangle=Math.PI*Math.min(se.v/j.vTotal,.5),se.ring=1-ie.hole,se.rInscribed=O(se,j))}function J($,j){return[$*Math.sin(j),-$*Math.cos(j)]}function ne($,j,ae){var ie=$._fullLayout,te=ae.trace,re=te.texttemplate,ce=te.textinfo;if(!re&&ce&&ce!=="none"){var pe=ce.split("+"),fe=function(Ae){return pe.indexOf(Ae)!==-1},se=fe("label"),de=fe("text"),be=fe("value"),xe=fe("percent"),ke=ie.separators,Re;if(Re=se?[j.label]:[],de){var Ke=v.getFirstFilled(te.text,j.pts);b(Ke)&&Re.push(Ke)}be&&Re.push(v.formatPieValue(j.v,ke)),xe&&Re.push(v.formatPiePercent(j.v/ae.vTotal,ke)),j.text=Re.join("<br>")}function ze(Ae){return{label:Ae.label,value:Ae.v,valueLabel:v.formatPieValue(Ae.v,ie.separators),percent:Ae.v/ae.vTotal,percentLabel:v.formatPiePercent(Ae.v/ae.vTotal,ie.separators),color:Ae.color,text:Ae.text,customdata:f.castOption(te,Ae.i,"customdata")}}if(re){var Je=f.castOption(te,j.i,"texttemplate");if(!Je)j.text="";else{var qe=ze(j),Ee=v.getFirstFilled(te.text,j.pts);(b(Ee)||Ee==="")&&(qe.text=Ee),j.text=f.texttemplateString(Je,qe,$._fullLayout._d3locale,qe,te._meta||{})}}}function ve($,j){var ae=$.rotate*Math.PI/180,ie=Math.cos(ae),te=Math.sin(ae),re=(j.left+j.right)/2,ce=(j.top+j.bottom)/2;$.textX=re*ie-ce*te,$.textY=re*te+ce*ie,$.noCenter=!0}d.exports={plot:y,formatSliceLabel:ne,transformInsideText:P,determineInsideTextFont:T,positionTitleOutside:U,prerenderTitles:M,layoutAreas:V,attachFxHandlers:w,computeTransform:ve}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../bar/constants":923,"../bar/uniform_text":937,"./event_data":1165,"./helpers":1166,d3:169}],1171:[function(e,d,S){var r=e("d3"),a=e("./style_one"),u=e("../bar/uniform_text").resizeText;d.exports=function(t){var f=t._fullLayout._pielayer.selectAll(".trace");u(t,f,"pie"),f.each(function(n){var o=n[0],l=o.trace,h=r.select(this);h.style({opacity:l.opacity}),h.selectAll("path.surface").each(function(i){r.select(this).call(a,i,l)})})}},{"../bar/uniform_text":937,"./style_one":1172,d3:169}],1172:[function(e,d,S){var r=e("../../components/color"),a=e("./helpers").castOption;d.exports=function(c,t,f){var n=f.marker.line,o=a(n.color,t.pts)||r.defaultLine,l=a(n.width,t.pts)||0;c.style("stroke-width",l).call(r.fill,t.color).call(r.stroke,o)}},{"../../components/color":643,"./helpers":1166}],1173:[function(e,d,S){var r=e("../scatter/attributes");d.exports={x:r.x,y:r.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:r.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1187}],1174:[function(e,d,S){var r=e("gl-pointcloud2d"),a=e("../../lib/str2rgbarray"),u=e("../../plots/cartesian/autorange").findExtremes,c=e("../scatter/get_trace_color");function t(o,l){this.scene=o,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=r(o.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var f=t.prototype;f.handlePick=function(o){var l=this.idToIndex[o.pointId];return{trace:this,dataCoord:o.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[l*2],this.pickXYData[l*2+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},f.update=function(o){this.index=o.index,this.textLabels=o.text,this.name=o.name,this.hoverinfo=o.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(o),this.color=c(o,{})},f.updateFast=function(o){var l=this.xData=this.pickXData=o.x,h=this.yData=this.pickYData=o.y,i=this.pickXYData=o.xy,s=o.xbounds&&o.ybounds,p=o.indices,v,m,b,y=this.bounds,x,w,g;if(i){if(b=i,v=i.length>>>1,s)y[0]=o.xbounds[0],y[2]=o.xbounds[1],y[1]=o.ybounds[0],y[3]=o.ybounds[1];else for(g=0;g<v;g++)x=b[g*2],w=b[g*2+1],x<y[0]&&(y[0]=x),x>y[2]&&(y[2]=x),w<y[1]&&(y[1]=w),w>y[3]&&(y[3]=w);if(p)m=p;else for(m=new Int32Array(v),g=0;g<v;g++)m[g]=g}else for(v=l.length,b=new Float32Array(2*v),m=new Int32Array(v),g=0;g<v;g++)x=l[g],w=h[g],m[g]=g,b[g*2]=x,b[g*2+1]=w,x<y[0]&&(y[0]=x),x>y[2]&&(y[2]=x),w<y[1]&&(y[1]=w),w>y[3]&&(y[3]=w);this.idToIndex=m,this.pointcloudOptions.idToIndex=m,this.pointcloudOptions.positions=b;var T=a(o.marker.color),M=a(o.marker.border.color),P=o.opacity*o.marker.opacity;T[3]*=P,this.pointcloudOptions.color=T;var L=o.marker.blend;if(L===null){var I=100;L=l.length<I||h.length<I}this.pointcloudOptions.blend=L,M[3]*=P,this.pointcloudOptions.borderColor=M;var C=o.marker.sizemin,k=Math.max(o.marker.sizemax,o.marker.sizemin);this.pointcloudOptions.sizeMin=C,this.pointcloudOptions.sizeMax=k,this.pointcloudOptions.areaRatio=o.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,R=this.scene.yaxis,O=k/2||.5;o._extremes[E._id]=u(E,[y[0],y[2]],{ppad:O}),o._extremes[R._id]=u(R,[y[1],y[3]],{ppad:O})},f.dispose=function(){this.pointcloud.dispose()};function n(o,l){var h=new t(o,l.uid);return h.update(l),h}d.exports=n},{"../../lib/str2rgbarray":802,"../../plots/cartesian/autorange":827,"../scatter/get_trace_color":1197,"gl-pointcloud2d":324}],1175:[function(e,d,S){var r=e("../../lib"),a=e("./attributes");d.exports=function(c,t,f){function n(o,l){return r.coerce(c,t,a,o,l)}n("x"),n("y"),n("xbounds"),n("ybounds"),c.xy&&c.xy instanceof Float32Array&&(t.xy=c.xy),c.indices&&c.indices instanceof Int32Array&&(t.indices=c.indices),n("text"),n("marker.color",f),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",f),n("marker.border.arearatio"),t._length=null}},{"../../lib":778,"./attributes":1173}],1176:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":868,"../scatter3d/calc":1216,"./attributes":1173,"./convert":1174,"./defaults":1175}],1177:[function(e,d,S){var r=e("../../plots/font_attributes"),a=e("../../plots/attributes"),u=e("../../components/color/attributes"),c=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,f=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../components/colorscale/attributes"),o=e("../../plot_api/plot_template").templatedArray,l=e("../../lib/extend").extendFlat,h=e("../../plot_api/edit_types").overrideAll;e("../../constants/docs").FORMAT_LINK;var i=d.exports=h({hoverinfo:l({},a.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:c.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:r({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:u.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:c.hoverlabel,hovertemplate:f({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:u.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:c.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:o("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../components/fx/attributes":674,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1178:[function(e,d,S){var r=e("../../plot_api/edit_types").overrideAll,a=e("../../plots/get_data").getModuleCalcData,u=e("./plot"),c=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),f=e("../../components/dragelement"),n=e("../../plots/cartesian/select").prepSelect,o=e("../../lib"),l=e("../../registry"),h="sankey";S.name=h,S.baseLayoutAttrOverrides=r({hoverlabel:c.hoverlabel},"plot","nested"),S.plot=function(s){var p=a(s.calcdata,h)[0];u(s,p),S.updateFx(s)},S.clean=function(s,p,v,m){var b=m._has&&m._has(h),y=p._has&&p._has(h);b&&!y&&(m._paperdiv.selectAll(".sankey").remove(),m._paperdiv.selectAll(".bgsankey").remove())},S.updateFx=function(s){for(var p=0;p<s._fullData.length;p++)i(s,p)};function i(s,p){var v=s._fullData[p],m=s._fullLayout,b=m.dragmode,y=m.dragmode==="pan"?"move":"crosshair",x=v._bgRect;if(!(b==="pan"||b==="zoom")){t(x,y);var w={_id:"x",c2p:o.identity,_offset:v._sankey.translateX,_length:v._sankey.width},g={_id:"y",c2p:o.identity,_offset:v._sankey.translateY,_length:v._sankey.height},T={gd:s,element:x.node(),plotinfo:{id:p,xaxis:w,yaxis:g,fillRangeItems:o.noop},subplot:p,xaxes:[w],yaxes:[g],doneFnCompleted:function(M){var P=s._fullData[p],L,I=P.node.groups.slice(),C=[];function k(N){for(var G=P._sankey.graph.nodes,U=0;U<G.length;U++)if(G[U].pointNumber===N)return G[U]}for(var E=0;E<M.length;E++){var R=k(M[E].pointNumber);if(!!R)if(R.group){for(var O=0;O<R.childrenNodes.length;O++)C.push(R.childrenNodes[O].pointNumber);I[R.pointNumber-P.node._count]=!1}else C.push(R.pointNumber)}L=I.filter(Boolean).concat([C]),l.call("_guiRestyle",s,{"node.groups":[L]},p)}};T.prepFn=function(M,P,L){n(M,P,L,T,b)},f.init(T)}}},{"../../components/dragelement":662,"../../components/fx/layout_attributes":684,"../../lib":778,"../../lib/setcursor":799,"../../plot_api/edit_types":810,"../../plots/cartesian/select":847,"../../plots/get_data":865,"../../registry":911,"./plot":1183}],1179:[function(e,d,S){var r=e("strongly-connected-components"),a=e("../../lib"),u=e("../../lib/gup").wrap,c=a.isArrayOrTypedArray,t=a.isIndex,f=e("../../components/colorscale");function n(l){var h=l.node,i=l.link,s=[],p=c(i.color),v=c(i.customdata),m={},b={},y=i.colorscales.length,x;for(x=0;x<y;x++){var w=i.colorscales[x],g=f.extractScale(w,{cLetter:"c"}),T=f.makeColorScaleFunc(g);b[w.label]=T}var M=0;for(x=0;x<i.value.length;x++)i.source[x]>M&&(M=i.source[x]),i.target[x]>M&&(M=i.target[x]);var P=M+1;l.node._count=P;var L,I=l.node.groups,C={};for(x=0;x<I.length;x++){var k=I[x];for(L=0;L<k.length;L++){var E=k[L],R=P+x;C.hasOwnProperty(E)?a.warn("Node "+E+" is already part of a group."):C[E]=R}}var O={source:[],target:[]};for(x=0;x<i.value.length;x++){var N=i.value[x],G=i.source[x],U=i.target[x];if(!!(N>0&&t(G,P)&&t(U,P))&&!(C.hasOwnProperty(G)&&C.hasOwnProperty(U)&&C[G]===C[U])){C.hasOwnProperty(U)&&(U=C[U]),C.hasOwnProperty(G)&&(G=C[G]),G=+G,U=+U,m[G]=m[U]=!0;var Y="";i.label&&i.label[x]&&(Y=i.label[x]);var z=null;Y&&b.hasOwnProperty(Y)&&(z=b[Y]),s.push({pointNumber:x,label:Y,color:p?i.color[x]:i.color,customdata:v?i.customdata[x]:i.customdata,concentrationscale:z,source:G,target:U,value:+N}),O.source.push(G),O.target.push(U)}}var B=P+I.length,H=c(h.color),V=c(h.customdata),Z=[];for(x=0;x<B;x++)if(!!m[x]){var q=h.label[x];Z.push({group:x>P-1,childrenNodes:[],pointNumber:x,label:q,color:H?h.color[x]:h.color,customdata:V?h.customdata[x]:h.customdata})}var J=!1;return o(B,O.source,O.target)&&(J=!0),{circular:J,links:s,nodes:Z,groups:I,groupLookup:C}}function o(l,h,i){for(var s=a.init2dArray(l,0),p=0;p<Math.min(h.length,i.length);p++)if(a.isIndex(h[p],l)&&a.isIndex(i[p],l)){if(h[p]===i[p])return!0;s[h[p]].push(i[p])}var v=r(s);return v.components.some(function(m){return m.length>1})}d.exports=function(h,i){var s=n(i);return u({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775,"strongly-connected-components":569}],1180:[function(e,d,S){d.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1181:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../components/color"),c=e("tinycolor2"),t=e("../../plots/domain").defaults,f=e("../../components/fx/hoverlabel_defaults"),n=e("../../plot_api/plot_template"),o=e("../../plots/array_container_defaults");d.exports=function(i,s,p,v){function m(k,E){return r.coerce(i,s,a,k,E)}var b=r.extendDeep(v.hoverlabel,i.hoverlabel),y=i.node,x=n.newContainer(s,"node");function w(k,E){return r.coerce(y,x,a.node,k,E)}w("label"),w("groups"),w("x"),w("y"),w("pad"),w("thickness"),w("line.color"),w("line.width"),w("hoverinfo",i.hoverinfo),f(y,x,w,b),w("hovertemplate");var g=v.colorway,T=function(k){return g[k%g.length]};w("color",x.label.map(function(k,E){return u.addOpacity(T(E),.8)})),w("customdata");var M=i.link||{},P=n.newContainer(s,"link");function L(k,E){return r.coerce(M,P,a.link,k,E)}L("label"),L("source"),L("target"),L("value"),L("line.color"),L("line.width"),L("hoverinfo",i.hoverinfo),f(M,P,L,b),L("hovertemplate");var I=c(v.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";L("color",r.repeat(I,P.value.length)),L("customdata"),o(M,P,{name:"colorscales",handleItemDefaults:l}),t(s,v,m),m("orientation"),m("valueformat"),m("valuesuffix");var C;x.x.length&&x.y.length&&(C="freeform"),m("arrangement",C),r.coerceFont(m,"textfont",r.extendFlat({},v.font)),s._length=null};function l(h,i){function s(p,v){return r.coerce(h,i,a.link.colorscales,p,v)}s("label"),s("cmin"),s("cmax"),s("colorscale")}},{"../../components/color":643,"../../components/fx/hoverlabel_defaults":681,"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/domain":855,"./attributes":1177,tinycolor2:576}],1182:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1177,"./base_plot":1178,"./calc":1179,"./defaults":1181,"./plot":1183,"./select.js":1185}],1183:[function(e,d,S){var r=e("d3"),a=e("./render"),u=e("../../components/fx"),c=e("../../components/color"),t=e("../../lib"),f=e("./constants").cn,n=t._;function o(w){return w!==""}function l(w,g){return w.filter(function(T){return T.key===g.traceId})}function h(w,g){r.select(w).select("path").style("fill-opacity",g),r.select(w).select("rect").style("fill-opacity",g)}function i(w){r.select(w).select("text.name").style("fill","black")}function s(w){return function(g){return w.node.sourceLinks.indexOf(g.link)!==-1||w.node.targetLinks.indexOf(g.link)!==-1}}function p(w){return function(g){return g.node.sourceLinks.indexOf(w.link)!==-1||g.node.targetLinks.indexOf(w.link)!==-1}}function v(w,g,T){g&&T&&l(T,g).selectAll("."+f.sankeyLink).filter(s(g)).call(b.bind(0,g,T,!1))}function m(w,g,T){g&&T&&l(T,g).selectAll("."+f.sankeyLink).filter(s(g)).call(y.bind(0,g,T,!1))}function b(w,g,T,M){var P=M.datum().link.label;M.style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),P&&l(g,w).selectAll("."+f.sankeyLink).filter(function(L){return L.link.label===P}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return .4}),T&&l(g,w).selectAll("."+f.sankeyNode).filter(p(w)).call(v)}function y(w,g,T,M){var P=M.datum().link.label;M.style("fill-opacity",function(L){return L.tinyColorAlpha}),P&&l(g,w).selectAll("."+f.sankeyLink).filter(function(L){return L.link.label===P}).style("fill-opacity",function(L){return L.tinyColorAlpha}),T&&l(g,w).selectAll(f.sankeyNode).filter(p(w)).call(m)}function x(w,g){var T=w.hoverlabel||{},M=t.nestedProperty(T,g).get();return Array.isArray(M)?!1:M}d.exports=function(g,T){for(var M=g._fullLayout,P=M._paper,L=M._size,I=0;I<g._fullData.length;I++)if(!!g._fullData[I].visible&&g._fullData[I].type===f.sankey&&!g._fullData[I]._viewInitial){var C=g._fullData[I].node;g._fullData[I]._viewInitial={node:{groups:C.groups.slice(),x:C.x.slice(),y:C.y.slice()}}}var k=function(q,J){var ne=J.link;ne.originalEvent=r.event,g._hoverdata=[ne],u.click(g,{target:!0})},E=function(q,J,ne){g._fullLayout.hovermode!==!1&&(r.select(q).call(b.bind(0,J,ne,!0)),J.link.trace.link.hoverinfo!=="skip"&&(J.link.fullData=J.link.trace,g.emit("plotly_hover",{event:r.event,points:[J.link]})))},R=n(g,"source:")+" ",O=n(g,"target:")+" ",N=n(g,"concentration:")+" ",G=n(g,"incoming flow count:")+" ",U=n(g,"outgoing flow count:")+" ",Y=function(q,J){if(g._fullLayout.hovermode===!1)return;var ne=J.link.trace.link;if(ne.hoverinfo==="none"||ne.hoverinfo==="skip")return;var ve=[];function $(pe){var fe,se;pe.circular?(fe=(pe.circularPathData.leftInnerExtent+pe.circularPathData.rightInnerExtent)/2,se=pe.circularPathData.verticalFullExtent):(fe=(pe.source.x1+pe.target.x0)/2,se=(pe.y0+pe.y1)/2);var de=[fe,se];return pe.trace.orientation==="v"&&de.reverse(),de[0]+=J.parent.translateX,de[1]+=J.parent.translateY,de}for(var j=0,ae=0;ae<J.flow.links.length;ae++){var ie=J.flow.links[ae];if(!(g._fullLayout.hovermode==="closest"&&J.link.pointNumber!==ie.pointNumber)){J.link.pointNumber===ie.pointNumber&&(j=ae),ie.fullData=ie.trace,ne=J.link.trace.link;var te=$(ie),re={valueLabel:r.format(J.valueFormat)(ie.value)+J.valueSuffix};ve.push({x:te[0],y:te[1],name:re.valueLabel,text:[ie.label||"",R+ie.source.label,O+ie.target.label,ie.concentrationscale?N+r.format("%0.2f")(ie.flow.labelConcentration):""].filter(o).join("<br>"),color:x(ne,"bgcolor")||c.addOpacity(ie.color,1),borderColor:x(ne,"bordercolor"),fontFamily:x(ne,"font.family"),fontSize:x(ne,"font.size"),fontColor:x(ne,"font.color"),nameLength:x(ne,"namelength"),textAlign:x(ne,"align"),idealAlign:r.event.x<te[0]?"right":"left",hovertemplate:ne.hovertemplate,hovertemplateLabels:re,eventData:[ie]})}}var ce=u.loneHover(ve,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:g,anchorIndex:j});ce.each(function(){var pe=this;J.link.concentrationscale||h(pe,.65),i(pe)})},z=function(q,J,ne){g._fullLayout.hovermode!==!1&&(r.select(q).call(y.bind(0,J,ne,!0)),J.link.trace.link.hoverinfo!=="skip"&&(J.link.fullData=J.link.trace,g.emit("plotly_unhover",{event:r.event,points:[J.link]})),u.loneUnhover(M._hoverlayer.node()))},B=function(q,J,ne){var ve=J.node;ve.originalEvent=r.event,g._hoverdata=[ve],r.select(q).call(m,J,ne),u.click(g,{target:!0})},H=function(q,J,ne){g._fullLayout.hovermode!==!1&&(r.select(q).call(v,J,ne),J.node.trace.node.hoverinfo!=="skip"&&(J.node.fullData=J.node.trace,g.emit("plotly_hover",{event:r.event,points:[J.node]})))},V=function(q,J){if(g._fullLayout.hovermode!==!1){var ne=J.node.trace.node;if(!(ne.hoverinfo==="none"||ne.hoverinfo==="skip")){var ve=r.select(q).select("."+f.nodeRect),$=g._fullLayout._paperdiv.node().getBoundingClientRect(),j=ve.node().getBoundingClientRect(),ae=j.left-2-$.left,ie=j.right+2-$.left,te=j.top+j.height/4-$.top,re={valueLabel:r.format(J.valueFormat)(J.node.value)+J.valueSuffix};J.node.fullData=J.node.trace,g._fullLayout._calcInverseTransform(g);var ce=g._fullLayout._invScaleX,pe=g._fullLayout._invScaleY,fe=u.loneHover({x0:ce*ae,x1:ce*ie,y:pe*te,name:r.format(J.valueFormat)(J.node.value)+J.valueSuffix,text:[J.node.label,G+J.node.targetLinks.length,U+J.node.sourceLinks.length].filter(o).join("<br>"),color:x(ne,"bgcolor")||J.tinyColorHue,borderColor:x(ne,"bordercolor"),fontFamily:x(ne,"font.family"),fontSize:x(ne,"font.size"),fontColor:x(ne,"font.color"),nameLength:x(ne,"namelength"),textAlign:x(ne,"align"),idealAlign:"left",hovertemplate:ne.hovertemplate,hovertemplateLabels:re,eventData:[J.node]},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:g});h(fe,.85),i(fe)}}},Z=function(q,J,ne){g._fullLayout.hovermode!==!1&&(r.select(q).call(m,J,ne),J.node.trace.node.hoverinfo!=="skip"&&(J.node.fullData=J.node.trace,g.emit("plotly_unhover",{event:r.event,points:[J.node]})),u.loneUnhover(M._hoverlayer.node()))};a(g,P,T,{width:L.w,height:L.h,margin:{t:L.t,r:L.r,b:L.b,l:L.l}},{linkEvents:{hover:E,follow:Y,unhover:z,select:k},nodeEvents:{hover:H,follow:V,unhover:Z,select:B}})}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"./constants":1180,"./render":1184,d3:169}],1184:[function(e,d,S){var r=e("./constants"),a=e("d3"),u=e("tinycolor2"),c=e("../../components/color"),t=e("../../components/drawing"),f=e("@plotly/d3-sankey"),n=e("@plotly/d3-sankey-circular"),o=e("d3-force"),l=e("../../lib"),h=l.strTranslate,i=e("../../lib/gup"),s=i.keyFun,p=i.repeat,v=i.unwrap,m=e("d3-interpolate").interpolateNumber,b=e("../../registry");function y(j,ae,ie){var te=v(ae),re=te.trace,ce=re.domain,pe=re.orientation==="h",fe=re.node.pad,se=re.node.thickness,de=j.width*(ce.x[1]-ce.x[0]),be=j.height*(ce.y[1]-ce.y[0]),xe=te._nodes,ke=te._links,Re=te.circular,Ke;Re?Ke=n.sankeyCircular().circularLinkGap(0):Ke=f.sankey(),Ke.iterations(r.sankeyIterations).size(pe?[de,be]:[be,de]).nodeWidth(se).nodePadding(fe).nodeId(function(Et){return Et.pointNumber}).nodes(xe).links(ke);var ze=Ke();Ke.nodePadding()<fe&&l.warn("node.pad was reduced to ",Ke.nodePadding()," to fit within the figure.");var Je,qe,Ee;for(var Ae in te._groupLookup){var Be=parseInt(te._groupLookup[Ae]),$e;for(Je=0;Je<ze.nodes.length;Je++)if(ze.nodes[Je].pointNumber===Be){$e=ze.nodes[Je];break}if(!!$e){var xt={pointNumber:parseInt(Ae),x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ze.nodes.unshift(xt),$e.childrenNodes.unshift(xt)}}function bt(){for(Je=0;Je<ze.nodes.length;Je++){var Et=ze.nodes[Je],jt={},Zt,Mt;for(qe=0;qe<Et.targetLinks.length;qe++)Mt=Et.targetLinks[qe],Zt=Mt.source.pointNumber+":"+Mt.target.pointNumber,jt.hasOwnProperty(Zt)||(jt[Zt]=[]),jt[Zt].push(Mt);var At=Object.keys(jt);for(qe=0;qe<At.length;qe++){Zt=At[qe];var ft=jt[Zt],ot=0,Te={};for(Ee=0;Ee<ft.length;Ee++)Mt=ft[Ee],Te[Mt.label]||(Te[Mt.label]=0),Te[Mt.label]+=Mt.value,ot+=Mt.value;for(Ee=0;Ee<ft.length;Ee++)Mt=ft[Ee],Mt.flow={value:ot,labelConcentration:Te[Mt.label]/ot,concentration:Mt.value/ot,links:ft},Mt.concentrationscale&&(Mt.color=u(Mt.concentrationscale(Mt.flow.labelConcentration)))}var Le=0;for(qe=0;qe<Et.sourceLinks.length;qe++)Le+=Et.sourceLinks[qe].value;for(qe=0;qe<Et.sourceLinks.length;qe++)Mt=Et.sourceLinks[qe],Mt.concentrationOut=Mt.value/Le;var Ve=0;for(qe=0;qe<Et.targetLinks.length;qe++)Ve+=Et.targetLinks[qe].value;for(qe=0;qe<Et.targetLinks.length;qe++)Mt=Et.targetLinks[qe],Mt.concenrationIn=Mt.value/Ve}}bt();function Ne(Et){Et.forEach(function(jt){var Zt,Mt,At=0,ft=jt.length,ot;for(jt.sort(function(Te,Le){return Te.y0-Le.y0}),ot=0;ot<ft;++ot)Zt=jt[ot],Zt.y0>=At||(Mt=At-Zt.y0,Mt>1e-6&&(Zt.y0+=Mt,Zt.y1+=Mt)),At=Zt.y1+fe})}function st(Et){var jt=Et.map(function(Le,Ve){return{x0:Le.x0,index:Ve}}).sort(function(Le,Ve){return Le.x0-Ve.x0}),Zt=[],Mt=-1,At,ft=-1/0,ot;for(Je=0;Je<jt.length;Je++){var Te=Et[jt[Je].index];Te.x0>ft+se&&(Mt+=1,At=Te.x0),ft=Te.x0,Zt[Mt]||(Zt[Mt]=[]),Zt[Mt].push(Te),ot=At-Te.x0,Te.x0+=ot,Te.x1+=ot}return Zt}if(re.node.x.length&&re.node.y.length){for(Je=0;Je<Math.min(re.node.x.length,re.node.y.length,ze.nodes.length);Je++)if(re.node.x[Je]&&re.node.y[Je]){var _t=[re.node.x[Je]*de,re.node.y[Je]*be];ze.nodes[Je].x0=_t[0]-se/2,ze.nodes[Je].x1=_t[0]+se/2;var Ot=ze.nodes[Je].y1-ze.nodes[Je].y0;ze.nodes[Je].y0=_t[1]-Ot/2,ze.nodes[Je].y1=_t[1]+Ot/2}if(re.arrangement==="snap"){xe=ze.nodes;var Wt=st(xe);Ne(Wt)}Ke.update(ze)}return{circular:Re,key:ie,trace:re,guid:l.randstr(),horizontal:pe,width:de,height:be,nodePad:re.node.pad,nodeLineColor:re.node.line.color,nodeLineWidth:re.node.line.width,linkLineColor:re.link.line.color,linkLineWidth:re.link.line.width,valueFormat:re.valueformat,valueSuffix:re.valuesuffix,textFont:re.textfont,translateX:ce.x[0]*j.width+j.margin.l,translateY:j.height-ce.y[1]*j.height+j.margin.t,dragParallel:pe?be:de,dragPerpendicular:pe?de:be,arrangement:re.arrangement,sankey:Ke,graph:ze,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function x(j,ae,ie){var te=u(ae.color),re=ae.source.label+"|"+ae.target.label,ce=re+"__"+ie;return ae.trace=j.trace,ae.curveNumber=j.trace.index,{circular:j.circular,key:ce,traceId:j.key,pointNumber:ae.pointNumber,link:ae,tinyColorHue:c.tinyRGB(te),tinyColorAlpha:te.getAlpha(),linkPath:g,linkLineColor:j.linkLineColor,linkLineWidth:j.linkLineWidth,valueFormat:j.valueFormat,valueSuffix:j.valueSuffix,sankey:j.sankey,parent:j,interactionState:j.interactionState,flow:ae.flow}}function w(j){var ae="",ie=j.width/2,te=j.circularPathData;return j.circularLinkType==="top"?ae="M "+te.targetX+" "+(te.targetY+ie)+" L"+te.rightInnerExtent+" "+(te.targetY+ie)+"A"+(te.rightLargeArcRadius+ie)+" "+(te.rightSmallArcRadius+ie)+" 0 0 1 "+(te.rightFullExtent-ie)+" "+(te.targetY-te.rightSmallArcRadius)+"L"+(te.rightFullExtent-ie)+" "+te.verticalRightInnerExtent+"A"+(te.rightLargeArcRadius+ie)+" "+(te.rightLargeArcRadius+ie)+" 0 0 1 "+te.rightInnerExtent+" "+(te.verticalFullExtent-ie)+"L"+te.leftInnerExtent+" "+(te.verticalFullExtent-ie)+"A"+(te.leftLargeArcRadius+ie)+" "+(te.leftLargeArcRadius+ie)+" 0 0 1 "+(te.leftFullExtent+ie)+" "+te.verticalLeftInnerExtent+"L"+(te.leftFullExtent+ie)+" "+(te.sourceY-te.leftSmallArcRadius)+"A"+(te.leftLargeArcRadius+ie)+" "+(te.leftSmallArcRadius+ie)+" 0 0 1 "+te.leftInnerExtent+" "+(te.sourceY+ie)+"L"+te.sourceX+" "+(te.sourceY+ie)+"L"+te.sourceX+" "+(te.sourceY-ie)+"L"+te.leftInnerExtent+" "+(te.sourceY-ie)+"A"+(te.leftLargeArcRadius-ie)+" "+(te.leftSmallArcRadius-ie)+" 0 0 0 "+(te.leftFullExtent-ie)+" "+(te.sourceY-te.leftSmallArcRadius)+"L"+(te.leftFullExtent-ie)+" "+te.verticalLeftInnerExtent+"A"+(te.leftLargeArcRadius-ie)+" "+(te.leftLargeArcRadius-ie)+" 0 0 0 "+te.leftInnerExtent+" "+(te.verticalFullExtent+ie)+"L"+te.rightInnerExtent+" "+(te.verticalFullExtent+ie)+"A"+(te.rightLargeArcRadius-ie)+" "+(te.rightLargeArcRadius-ie)+" 0 0 0 "+(te.rightFullExtent+ie)+" "+te.verticalRightInnerExtent+"L"+(te.rightFullExtent+ie)+" "+(te.targetY-te.rightSmallArcRadius)+"A"+(te.rightLargeArcRadius-ie)+" "+(te.rightSmallArcRadius-ie)+" 0 0 0 "+te.rightInnerExtent+" "+(te.targetY-ie)+"L"+te.targetX+" "+(te.targetY-ie)+"Z":ae="M "+te.targetX+" "+(te.targetY-ie)+" L"+te.rightInnerExtent+" "+(te.targetY-ie)+"A"+(te.rightLargeArcRadius+ie)+" "+(te.rightSmallArcRadius+ie)+" 0 0 0 "+(te.rightFullExtent-ie)+" "+(te.targetY+te.rightSmallArcRadius)+"L"+(te.rightFullExtent-ie)+" "+te.verticalRightInnerExtent+"A"+(te.rightLargeArcRadius+ie)+" "+(te.rightLargeArcRadius+ie)+" 0 0 0 "+te.rightInnerExtent+" "+(te.verticalFullExtent+ie)+"L"+te.leftInnerExtent+" "+(te.verticalFullExtent+ie)+"A"+(te.leftLargeArcRadius+ie)+" "+(te.leftLargeArcRadius+ie)+" 0 0 0 "+(te.leftFullExtent+ie)+" "+te.verticalLeftInnerExtent+"L"+(te.leftFullExtent+ie)+" "+(te.sourceY+te.leftSmallArcRadius)+"A"+(te.leftLargeArcRadius+ie)+" "+(te.leftSmallArcRadius+ie)+" 0 0 0 "+te.leftInnerExtent+" "+(te.sourceY-ie)+"L"+te.sourceX+" "+(te.sourceY-ie)+"L"+te.sourceX+" "+(te.sourceY+ie)+"L"+te.leftInnerExtent+" "+(te.sourceY+ie)+"A"+(te.leftLargeArcRadius-ie)+" "+(te.leftSmallArcRadius-ie)+" 0 0 1 "+(te.leftFullExtent-ie)+" "+(te.sourceY+te.leftSmallArcRadius)+"L"+(te.leftFullExtent-ie)+" "+te.verticalLeftInnerExtent+"A"+(te.leftLargeArcRadius-ie)+" "+(te.leftLargeArcRadius-ie)+" 0 0 1 "+te.leftInnerExtent+" "+(te.verticalFullExtent-ie)+"L"+te.rightInnerExtent+" "+(te.verticalFullExtent-ie)+"A"+(te.rightLargeArcRadius-ie)+" "+(te.rightLargeArcRadius-ie)+" 0 0 1 "+(te.rightFullExtent+ie)+" "+te.verticalRightInnerExtent+"L"+(te.rightFullExtent+ie)+" "+(te.targetY+te.rightSmallArcRadius)+"A"+(te.rightLargeArcRadius-ie)+" "+(te.rightSmallArcRadius-ie)+" 0 0 1 "+te.rightInnerExtent+" "+(te.targetY+ie)+"L"+te.targetX+" "+(te.targetY+ie)+"Z",ae}function g(){var j=.5;function ae(ie){if(ie.link.circular)return w(ie.link);var te=ie.link.source.x1,re=ie.link.target.x0,ce=m(te,re),pe=ce(j),fe=ce(1-j),se=ie.link.y0-ie.link.width/2,de=ie.link.y0+ie.link.width/2,be=ie.link.y1-ie.link.width/2,xe=ie.link.y1+ie.link.width/2;return"M"+te+","+se+"C"+pe+","+se+" "+fe+","+be+" "+re+","+be+"L"+re+","+xe+"C"+fe+","+xe+" "+pe+","+de+" "+te+","+de+"Z"}return ae}function T(j,ae){var ie=u(ae.color),te=r.nodePadAcross,re=j.nodePad/2;ae.dx=ae.x1-ae.x0,ae.dy=ae.y1-ae.y0;var ce=ae.dx,pe=Math.max(.5,ae.dy),fe="node_"+ae.pointNumber;return ae.group&&(fe=l.randstr()),ae.trace=j.trace,ae.curveNumber=j.trace.index,{index:ae.pointNumber,key:fe,partOfGroup:ae.partOfGroup||!1,group:ae.group,traceId:j.key,trace:j.trace,node:ae,nodePad:j.nodePad,nodeLineColor:j.nodeLineColor,nodeLineWidth:j.nodeLineWidth,textFont:j.textFont,size:j.horizontal?j.height:j.width,visibleWidth:Math.ceil(ce),visibleHeight:pe,zoneX:-te,zoneY:-re,zoneWidth:ce+2*te,zoneHeight:pe+2*re,labelY:j.horizontal?ae.dy/2+1:ae.dx/2+1,left:ae.originalLayer===1,sizeAcross:j.width,forceLayouts:j.forceLayouts,horizontal:j.horizontal,darkBackground:ie.getBrightness()<=128,tinyColorHue:c.tinyRGB(ie),tinyColorAlpha:ie.getAlpha(),valueFormat:j.valueFormat,valueSuffix:j.valueSuffix,sankey:j.sankey,graph:j.graph,arrangement:j.arrangement,uniqueNodeLabelPathId:[j.guid,j.key,fe].join("_"),interactionState:j.interactionState,figure:j}}function M(j){j.attr("transform",function(ae){return h(ae.node.x0.toFixed(3),ae.node.y0.toFixed(3))})}function P(j){j.call(M)}function L(j,ae){j.call(P),ae.attr("d",g())}function I(j){j.attr("width",function(ae){return ae.node.x1-ae.node.x0}).attr("height",function(ae){return ae.visibleHeight})}function C(j){return j.link.width>1||j.linkLineWidth>0}function k(j){var ae=h(j.translateX,j.translateY);return ae+(j.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function E(j){return h(j.horizontal?0:j.labelY,j.horizontal?j.labelY:0)}function R(j){return a.svg.line()([[j.horizontal?j.left?-j.sizeAcross:j.visibleWidth+r.nodeTextOffsetHorizontal:r.nodeTextOffsetHorizontal,0],[j.horizontal?j.left?-r.nodeTextOffsetHorizontal:j.sizeAcross:j.visibleHeight-r.nodeTextOffsetHorizontal,0]])}function O(j){return j.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function N(j){return j.horizontal?"scale(1 1)":"scale(-1 1)"}function G(j){return j.darkBackground&&!j.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function U(j){return j.horizontal&&j.left?"100%":"0%"}function Y(j,ae,ie){j.on(".basic",null).on("mouseover.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ie.hover(this,te,ae),te.interactionState.hovered=[this,te])}).on("mousemove.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ie.follow(this,te),te.interactionState.hovered=[this,te])}).on("mouseout.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ie.unhover(this,te,ae),te.interactionState.hovered=!1)}).on("click.basic",function(te){te.interactionState.hovered&&(ie.unhover(this,te,ae),te.interactionState.hovered=!1),!te.interactionState.dragInProgress&&!te.partOfGroup&&ie.select(this,te,ae)})}function z(j,ae,ie,te){var re=a.behavior.drag().origin(function(ce){return{x:ce.node.x0+ce.visibleWidth/2,y:ce.node.y0+ce.visibleHeight/2}}).on("dragstart",function(ce){if(ce.arrangement!=="fixed"&&(l.ensureSingle(te._fullLayout._infolayer,"g","dragcover",function(fe){te._fullLayout._dragCover=fe}),l.raiseToTop(this),ce.interactionState.dragInProgress=ce.node,J(ce.node),ce.interactionState.hovered&&(ie.nodeEvents.unhover.apply(0,ce.interactionState.hovered),ce.interactionState.hovered=!1),ce.arrangement==="snap")){var pe=ce.traceId+"|"+ce.key;ce.forceLayouts[pe]?ce.forceLayouts[pe].alpha(1):B(j,pe,ce),H(j,ae,ce,pe,te)}}).on("drag",function(ce){if(ce.arrangement!=="fixed"){var pe=a.event.x,fe=a.event.y;ce.arrangement==="snap"?(ce.node.x0=pe-ce.visibleWidth/2,ce.node.x1=pe+ce.visibleWidth/2,ce.node.y0=fe-ce.visibleHeight/2,ce.node.y1=fe+ce.visibleHeight/2):(ce.arrangement==="freeform"&&(ce.node.x0=pe-ce.visibleWidth/2,ce.node.x1=pe+ce.visibleWidth/2),fe=Math.max(0,Math.min(ce.size-ce.visibleHeight/2,fe)),ce.node.y0=fe-ce.visibleHeight/2,ce.node.y1=fe+ce.visibleHeight/2),J(ce.node),ce.arrangement!=="snap"&&(ce.sankey.update(ce.graph),L(j.filter(ne(ce)),ae))}}).on("dragend",function(ce){if(ce.arrangement!=="fixed"){ce.interactionState.dragInProgress=!1;for(var pe=0;pe<ce.node.childrenNodes.length;pe++)ce.node.childrenNodes[pe].x=ce.node.x,ce.node.childrenNodes[pe].y=ce.node.y;ce.arrangement!=="snap"&&Z(ce,te)}});j.on(".drag",null).call(re)}function B(j,ae,ie,te){ve(ie.graph.nodes);var re=ie.graph.nodes.filter(function(ce){return ce.originalX===ie.node.originalX}).filter(function(ce){return!ce.partOfGroup});ie.forceLayouts[ae]=o.forceSimulation(re).alphaDecay(0).force("collide",o.forceCollide().radius(function(ce){return ce.dy/2+ie.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",V(j,ae,re,ie)).stop()}function H(j,ae,ie,te,re){window.requestAnimationFrame(function ce(){var pe;for(pe=0;pe<r.forceTicksPerFrame;pe++)ie.forceLayouts[te].tick();var fe=ie.graph.nodes;if($(fe),ie.sankey.update(ie.graph),L(j.filter(ne(ie)),ae),ie.forceLayouts[te].alpha()>0)window.requestAnimationFrame(ce);else{var se=ie.node.originalX;ie.node.x0=se-ie.visibleWidth/2,ie.node.x1=se+ie.visibleWidth/2,Z(ie,re)}})}function V(j,ae,ie,te){return function(){for(var ce=0,pe=0;pe<ie.length;pe++){var fe=ie[pe];fe===te.interactionState.dragInProgress?(fe.x=fe.lastDraggedX,fe.y=fe.lastDraggedY):(fe.vx=(fe.originalX-fe.x)/r.forceTicksPerFrame,fe.y=Math.min(te.size-fe.dy/2,Math.max(fe.dy/2,fe.y))),ce=Math.max(ce,Math.abs(fe.vx),Math.abs(fe.vy))}!te.interactionState.dragInProgress&&ce<.1&&te.forceLayouts[ae].alpha()>0&&te.forceLayouts[ae].alpha(0)}}function Z(j,ae){for(var ie=[],te=[],re=0;re<j.graph.nodes.length;re++){var ce=(j.graph.nodes[re].x0+j.graph.nodes[re].x1)/2,pe=(j.graph.nodes[re].y0+j.graph.nodes[re].y1)/2;ie.push(ce/j.figure.width),te.push(pe/j.figure.height)}b.call("_guiRestyle",ae,{"node.x":[ie],"node.y":[te]},j.trace.index).then(function(){ae._fullLayout._dragCover&&ae._fullLayout._dragCover.remove()})}function q(j){var ae=[],ie;for(ie=0;ie<j.length;ie++)j[ie].originalX=(j[ie].x0+j[ie].x1)/2,j[ie].originalY=(j[ie].y0+j[ie].y1)/2,ae.indexOf(j[ie].originalX)===-1&&ae.push(j[ie].originalX);for(ae.sort(function(te,re){return te-re}),ie=0;ie<j.length;ie++)j[ie].originalLayerIndex=ae.indexOf(j[ie].originalX),j[ie].originalLayer=j[ie].originalLayerIndex/(ae.length-1)}function J(j){j.lastDraggedX=j.x0+j.dx/2,j.lastDraggedY=j.y0+j.dy/2}function ne(j){return function(ae){return ae.node.originalX===j.node.originalX}}function ve(j){for(var ae=0;ae<j.length;ae++)j[ae].y=(j[ae].y0+j[ae].y1)/2,j[ae].x=(j[ae].x0+j[ae].x1)/2}function $(j){for(var ae=0;ae<j.length;ae++)j[ae].y0=j[ae].y-j[ae].dy/2,j[ae].y1=j[ae].y0+j[ae].dy,j[ae].x0=j[ae].x-j[ae].dx/2,j[ae].x1=j[ae].x0+j[ae].dx}d.exports=function(j,ae,ie,te,re){var ce=!1;l.ensureSingle(j._fullLayout._infolayer,"g","first-render",function(){ce=!0});var pe=j._fullLayout._dragCover,fe=ie.filter(function(Ae){return v(Ae).trace.visible}).map(y.bind(null,te)),se=ae.selectAll("."+r.cn.sankey).data(fe,s);se.exit().remove(),se.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",k),se.each(function(Ae,Be){j._fullData[Be]._sankey=Ae;var $e="bgsankey-"+Ae.trace.uid+"-"+Be;l.ensureSingle(j._fullLayout._draggers,"rect",$e),j._fullData[Be]._bgRect=a.select("."+$e),j._fullData[Be]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(r.ease).duration(r.duration).attr("transform",k);var de=se.selectAll("."+r.cn.sankeyLinks).data(p,s);de.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var be=de.selectAll("."+r.cn.sankeyLink).data(function(Ae){var Be=Ae.graph.links;return Be.filter(function($e){return $e.value}).map(x.bind(null,Ae))},s);be.enter().append("path").classed(r.cn.sankeyLink,!0).call(Y,se,re.linkEvents),be.style("stroke",function(Ae){return C(Ae)?c.tinyRGB(u(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return C(Ae)?c.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return C(Ae)?Ae.linkLineWidth:1}).attr("d",g()),be.style("opacity",function(){return j._context.staticPlot||ce||pe?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),be.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var xe=se.selectAll("."+r.cn.sankeyNodeSet).data(p,s);xe.enter().append("g").classed(r.cn.sankeyNodeSet,!0),xe.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ke=xe.selectAll("."+r.cn.sankeyNode).data(function(Ae){var Be=Ae.graph.nodes;return q(Be),Be.map(T.bind(null,Ae))},s);ke.enter().append("g").classed(r.cn.sankeyNode,!0).call(M).style("opacity",function(Ae){return(j._context.staticPlot||ce)&&!Ae.partOfGroup?1:0}),ke.call(Y,se,re.nodeEvents).call(z,be,re,j),ke.transition().ease(r.ease).duration(r.duration).call(M).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),ke.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var Re=ke.selectAll("."+r.cn.nodeRect).data(p);Re.enter().append("rect").classed(r.cn.nodeRect,!0).call(I),Re.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return c.tinyRGB(u(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return c.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),Re.transition().ease(r.ease).duration(r.duration).call(I);var Ke=ke.selectAll("."+r.cn.nodeCapture).data(p);Ke.enter().append("rect").classed(r.cn.nodeCapture,!0).style("fill-opacity",0),Ke.attr("x",function(Ae){return Ae.zoneX}).attr("y",function(Ae){return Ae.zoneY}).attr("width",function(Ae){return Ae.zoneWidth}).attr("height",function(Ae){return Ae.zoneHeight});var ze=ke.selectAll("."+r.cn.nodeCentered).data(p);ze.enter().append("g").classed(r.cn.nodeCentered,!0).attr("transform",E),ze.transition().ease(r.ease).duration(r.duration).attr("transform",E);var Je=ze.selectAll("."+r.cn.nodeLabelGuide).data(p);Je.enter().append("path").classed(r.cn.nodeLabelGuide,!0).attr("id",function(Ae){return Ae.uniqueNodeLabelPathId}).attr("d",R).attr("transform",O),Je.transition().ease(r.ease).duration(r.duration).attr("d",R).attr("transform",O);var qe=ze.selectAll("."+r.cn.nodeLabel).data(p);qe.enter().append("text").classed(r.cn.nodeLabel,!0).attr("transform",N).style("cursor","default").style("fill","black"),qe.style("text-shadow",function(Ae){return Ae.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(Ae){t.font(qe,Ae.textFont)}),qe.transition().ease(r.ease).duration(r.duration).attr("transform",N);var Ee=qe.selectAll("."+r.cn.nodeLabelTextPath).data(p);Ee.enter().append("textPath").classed(r.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(Ae){return"#"+Ae.uniqueNodeLabelPathId}).attr("startOffset",U).style("fill",G),Ee.text(function(Ae){return Ae.horizontal||Ae.node.dy>5?Ae.node.label:""}).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}),Ee.transition().ease(r.ease).duration(r.duration).attr("startOffset",U).style("fill",G)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../registry":911,"./constants":1180,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:576}],1185:[function(e,d,S){d.exports=function(a,u){for(var c=a.cd,t=[],f=c[0].trace,n=f._sankey.graph.nodes,o=0;o<n.length;o++){var l=n[o];if(!l.partOfGroup){var h=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];f.orientation==="v"&&h.reverse(),u&&u.contains(h,!1,o,a)&&t.push({pointNumber:l.pointNumber})}}return t}},{}],1186:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){for(var t=0;t<u.length;t++)u[t].i=t;r.mergeArray(c.text,u,"tx"),r.mergeArray(c.texttemplate,u,"txt"),r.mergeArray(c.hovertext,u,"htx"),r.mergeArray(c.customdata,u,"data"),r.mergeArray(c.textposition,u,"tp"),c.textfont&&(r.mergeArrayCastPositive(c.textfont.size,u,"ts"),r.mergeArray(c.textfont.color,u,"tc"),r.mergeArray(c.textfont.family,u,"tf"));var f=c.marker;if(f){r.mergeArrayCastPositive(f.size,u,"ms"),r.mergeArrayCastPositive(f.opacity,u,"mo"),r.mergeArray(f.symbol,u,"mx"),r.mergeArray(f.color,u,"mc");var n=f.line;f.line&&(r.mergeArray(n.color,u,"mlc"),r.mergeArrayCastPositive(n.width,u,"mlw"));var o=f.gradient;o&&o.type!=="none"&&(r.mergeArray(o.type,u,"mgt"),r.mergeArray(o.color,u,"mgc"))}}},{"../../lib":778}],1187:[function(e,d,S){var r=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../components/colorscale/attributes"),c=e("../../plots/font_attributes"),t=e("../../components/drawing/attributes").dash,f=e("../../components/drawing"),n=e("./constants"),o=e("../../lib/extend").extendFlat;function l(s){return{valType:"any",dflt:0,editType:"calc"}}function h(s){return{valType:"any",editType:"calc"}}function i(s){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}d.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:l(),yperiod:l(),xperiod0:h(),yperiod0:h(),xperiodalignment:i(),yperiodalignment:i(),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:r({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:o({},t,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:o({symbol:{valType:"enumerated",values:f.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:o({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},u("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},u("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:c({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":650,"../../components/drawing":665,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"./constants":1191}],1188:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,f=e("./subtypes"),n=e("./colorscale_calc"),o=e("./arrays_to_calcdata"),l=e("./calc_selection");function h(b,y){var x=b._fullLayout,w=u.getFromId(b,y.xaxis||"x"),g=u.getFromId(b,y.yaxis||"y"),T=w.makeCalcdata(y,"x"),M=g.makeCalcdata(y,"y"),P=c(y,w,"x",T),L=c(y,g,"y",M),I=y._length,C=new Array(I),k=y.ids,E=m(y,x,w,g),R=!1,O,N,G,U,Y,z;p(x,y);var B="x",H="y",V;if(E)a.pushUnique(E.traceIndices,y._expandedIndex),O=E.orientation==="v",O?(H="s",V="x"):(B="s",V="y"),Y=E.stackgaps==="interpolate";else{var Z=s(y,I);i(b,y,w,g,P,L,Z)}var q=!!y.xperiodalignment,J=!!y.yperiodalignment;for(N=0;N<I;N++){var ne=C[N]={},ve=r(P[N]),$=r(L[N]);ve&&$?(ne[B]=P[N],ne[H]=L[N],q&&(ne.orig_x=T[N]),J&&(ne.orig_y=M[N])):E&&(O?ve:$)?(ne[V]=O?P[N]:L[N],ne.gap=!0,Y?(ne.s=t,R=!0):ne.s=0):ne[B]=ne[H]=t,k&&(ne.id=String(k[N]))}if(o(C,y),n(b,y),l(C,y),E){for(N=0;N<C.length;)C[N][V]===t?C.splice(N,1):N++;if(a.sort(C,function(te,re){return te[V]-re[V]||te.i-re.i}),R){for(N=0;N<C.length-1&&C[N].gap;)N++;for(z=C[N].s,z||(z=C[N].s=0),G=0;G<N;G++)C[G].s=z;for(U=C.length-1;U>N&&C[U].gap;)U--;for(z=C[U].s,G=C.length-1;G>U;G--)C[G].s=z;for(;N<U;)if(N++,C[N].gap){for(G=N+1;C[G].gap;)G++;for(var j=C[N-1][V],ae=C[N-1].s,ie=(C[G].s-ae)/(C[G][V]-j);N<G;)C[N].s=ae+(C[N][V]-j)*ie,N++}}}return C}function i(b,y,x,w,g,T,M){var P=y._length,L=b._fullLayout,I=x._id,C=w._id,k=L._firstScatter[v(y)]===y.uid,E=(m(y,L,x,w)||{}).orientation,R=y.fill;x._minDtick=0,w._minDtick=0;var O={padded:!0},N={padded:!0};M&&(O.ppad=N.ppad=M);var G=P<2||g[0]!==g[P-1]||T[0]!==T[P-1];G&&(R==="tozerox"||R==="tonextx"&&(k||E==="h"))?O.tozero=!0:!(y.error_y||{}).visible&&(R==="tonexty"||R==="tozeroy"||!f.hasMarkers(y)&&!f.hasText(y))&&(O.padded=!1,O.ppad=0),G&&(R==="tozeroy"||R==="tonexty"&&(k||E==="v"))?N.tozero=!0:(R==="tonextx"||R==="tozerox")&&(N.padded=!1),I&&(y._extremes[I]=u.findExtremes(x,g,O)),C&&(y._extremes[C]=u.findExtremes(w,T,N))}function s(b,y){if(!!f.hasMarkers(b)){var x=b.marker,w=1.6*(b.marker.sizeref||1),g;if(b.marker.sizemode==="area"?g=function(I){return Math.max(Math.sqrt((I||0)/w),3)}:g=function(I){return Math.max((I||0)/w,3)},a.isArrayOrTypedArray(x.size)){var T={type:"linear"};u.setConvert(T);for(var M=T.makeCalcdata(b.marker,"size"),P=new Array(y),L=0;L<y;L++)P[L]=g(M[L]);return P}else return g(x.size)}}function p(b,y){var x=v(y),w=b._firstScatter;w[x]||(w[x]=y.uid)}function v(b){var y=b.stackgroup;return b.xaxis+b.yaxis+b.type+(y?"-"+y:"")}function m(b,y,x,w){var g=b.stackgroup;if(!!g){var T=y._scatterStackOpts[x._id+w._id][g],M=T.orientation==="v"?w:x;if(M.type==="linear"||M.type==="log")return T}}d.exports={calc:h,calcMarkerSize:s,calcAxisExpansion:i,setFirstScatter:p,getStackOpts:m}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"./arrays_to_calcdata":1186,"./calc_selection":1189,"./colorscale_calc":1190,"./subtypes":1212,"fast-isnumeric":241}],1189:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){r.isArrayOrTypedArray(c.selectedpoints)&&r.tagSelected(u,c)}},{"../../lib":778}],1190:[function(e,d,S){var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),u=e("./subtypes");d.exports=function(t,f){u.hasLines(f)&&r(f,"line")&&a(t,f,{vals:f.line.color,containerStr:"line",cLetter:"c"}),u.hasMarkers(f)&&(r(f,"marker")&&a(t,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"}),r(f,"marker.line")&&a(t,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"./subtypes":1212}],1191:[function(e,d,S){d.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1192:[function(e,d,S){var r=e("./calc");d.exports=function(t,f){var n=f.xaxis,o=f.yaxis,l=n._id+o._id,h=t._fullLayout._scatterStackOpts[l];if(!!h){var i=t.calcdata,s,p,v,m,b,y,x,w,g,T,M,P,L,I,C;for(var k in h){T=h[k];var E=T.traceIndices;if(!!E.length){for(M=T.stackgaps==="interpolate",P=T.groupnorm,T.orientation==="v"?(L="x",I="y"):(L="y",I="x"),C=new Array(E.length),s=0;s<C.length;s++)C[s]=!1;y=i[E[0]];var R=new Array(y.length);for(s=0;s<y.length;s++)R[s]=y[s][L];for(s=1;s<E.length;s++){for(b=i[E[s]],p=v=0;p<b.length;p++){for(x=b[p][L];x>R[v]&&v<R.length;v++)a(b,p,R[v],s,C,M,L),p++;if(x!==R[v]){for(m=0;m<s;m++)a(i[E[m]],v,x,m,C,M,L);R.splice(v,0,x)}v++}for(;v<R.length;v++)a(b,p,R[v],s,C,M,L),p++}var O=R.length;for(p=0;p<y.length;p++){for(w=y[p][I]=y[p].s,s=1;s<E.length;s++)b=i[E[s]],b[0].trace._rawLength=b[0].trace._length,b[0].trace._length=O,w+=b[p].s,b[p][I]=w;if(P)for(g=(P==="fraction"?w:w/100)||1,s=0;s<E.length;s++){var N=i[E[s]][p];N[I]/=g,N.sNorm=N.s/g}}for(s=0;s<E.length;s++){b=i[E[s]];var G=b[0].trace,U=r.calcMarkerSize(G,G._rawLength),Y=Array.isArray(U);if(U&&C[s]||Y){var z=U;for(U=new Array(O),p=0;p<O;p++)U[p]=b[p].gap?0:Y?z[b[p].i]:z}var B=new Array(O),H=new Array(O);for(p=0;p<O;p++)B[p]=b[p].x,H[p]=b[p].y;r.calcAxisExpansion(t,G,n,o,B,H,U),b[0].t.orientation=T.orientation}}}}};function a(c,t,f,n,o,l,h){o[n]=!0;var i={i:null,gap:!0,s:0};if(i[h]=f,c.splice(t,0,i),t&&f===c[t-1][h]){var s=c[t-1];i.s=s.s,i.i=s.i,i.gap=s.gap}else l&&(i.s=u(c,t,f,h));t||(c[0].t=c[1].t,c[0].trace=c[1].trace,delete c[1].t,delete c[1].trace)}function u(c,t,f,n){var o=c[t-1],l=c[t+1];return l?o?o.s+(l.s-o.s)*(f-o[n])/(l[n]-o[n]):l.s:o.s}},{"./calc":1188}],1193:[function(e,d,S){d.exports=function(a){for(var u=0;u<a.length;u++){var c=a[u];if(c.type==="scatter"){var t=c.fill;if(!(t==="none"||t==="toself")&&(c.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var f=u-1;f>=0;f--){var n=a[f];if(n.type==="scatter"&&n.xaxis===c.xaxis&&n.yaxis===c.yaxis){n.opacity=void 0;break}}}}}},{}],1194:[function(e,d,S){var r=e("../../lib"),a=e("../../registry"),u=e("./attributes"),c=e("./constants"),t=e("./subtypes"),f=e("./xy_defaults"),n=e("./period_defaults"),o=e("./stack_defaults"),l=e("./marker_defaults"),h=e("./line_defaults"),i=e("./line_shape_defaults"),s=e("./text_defaults"),p=e("./fillcolor_defaults");d.exports=function(m,b,y,x){function w(k,E){return r.coerce(m,b,u,k,E)}var g=f(m,b,x,w);if(g||(b.visible=!1),!!b.visible){n(m,b,x,w);var T=o(m,b,x,w),M=!T&&g<c.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("mode",M),t.hasLines(b)&&(h(m,b,y,x,w),i(m,b,w),w("connectgaps"),w("line.simplify")),t.hasMarkers(b)&&l(m,b,y,x,w,{gradient:!0}),t.hasText(b)&&(w("texttemplate"),s(m,b,x,w));var P=[];(t.hasMarkers(b)||t.hasText(b))&&(w("cliponaxis"),w("marker.maxdisplayed"),P.push("points")),w("fill",T?T.fillDflt:"none"),b.fill!=="none"&&(p(m,b,y,w),t.hasLines(b)||i(m,b,w));var L=(b.line||{}).color,I=(b.marker||{}).color;(b.fill==="tonext"||b.fill==="toself")&&P.push("fills"),w("hoveron",P.join("+")||"points"),b.hoveron!=="fills"&&w("hovertemplate");var C=a.getComponentMethod("errorbars","supplyDefaults");C(m,b,L||I||y,{axis:"y"}),C(m,b,L||I||y,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(b,w)}}},{"../../lib":778,"../../registry":911,"./attributes":1187,"./constants":1191,"./fillcolor_defaults":1195,"./line_defaults":1200,"./line_shape_defaults":1202,"./marker_defaults":1206,"./period_defaults":1207,"./stack_defaults":1210,"./subtypes":1212,"./text_defaults":1213,"./xy_defaults":1214}],1195:[function(e,d,S){var r=e("../../components/color"),a=e("../../lib").isArrayOrTypedArray;d.exports=function(c,t,f,n){var o=!1;if(t.marker){var l=t.marker.color,h=(t.marker.line||{}).color;l&&!a(l)?o=l:h&&!a(h)&&(o=h)}n("fillcolor",r.addOpacity((t.line||{}).color||o||f,.5))}},{"../../components/color":643,"../../lib":778}],1196:[function(e,d,S){var r=e("../../plots/cartesian/axes");d.exports=function(u,c,t){var f={},n={_fullLayout:t},o=r.getFromTrace(n,c,"x"),l=r.getFromTrace(n,c,"y");return f.xLabel=r.tickText(o,u.x,!0).text,f.yLabel=r.tickText(l,u.y,!0).text,f}},{"../../plots/cartesian/axes":828}],1197:[function(e,d,S){var r=e("../../components/color"),a=e("./subtypes");d.exports=function(c,t){var f,n;if(c.mode==="lines")return f=c.line.color,f&&r.opacity(f)?f:c.fillcolor;if(c.mode==="none")return c.fill?c.fillcolor:"";var o=t.mcc||(c.marker||{}).color,l=t.mlcc||((c.marker||{}).line||{}).color;return n=o&&r.opacity(o)?o:l&&r.opacity(l)&&(t.mlw||((c.marker||{}).line||{}).width)?l:"",n?r.opacity(n)<.3?r.addOpacity(n,.3):n:(f=(c.line||{}).color,f&&r.opacity(f)&&a.hasLines(c)&&c.line.width?f:c.fillcolor)}},{"../../components/color":643,"./subtypes":1212}],1198:[function(e,d,S){var r=e("../../lib"),a=e("../../components/fx"),u=e("../../registry"),c=e("./get_trace_color"),t=e("../../components/color"),f=r.fillText;d.exports=function(o,l,h,i){var s=o.cd,p=s[0].trace,v=o.xa,m=o.ya,b=v.c2p(l),y=m.c2p(h),x=[b,y],w=p.hoveron||"",g=p.mode.indexOf("markers")!==-1?3:.5;if(w.indexOf("points")!==-1){var T=function(pe){var fe=Math.max(3,pe.mrc||0),se=1-1/fe,de=Math.abs(v.c2p(pe.x)-b),be=de<fe?se*de/fe:de-fe+se;return be},M=function(pe){var fe=Math.max(3,pe.mrc||0),se=1-1/fe,de=Math.abs(m.c2p(pe.y)-y);return de<fe?se*de/fe:de-fe+se},P=function(pe){var fe=Math.max(g,pe.mrc||0),se=v.c2p(pe.x)-b,de=m.c2p(pe.y)-y;return Math.max(Math.sqrt(se*se+de*de)-fe,1-g/fe)},L=a.getDistanceFunction(i,T,M,P);if(a.getClosest(s,L,o),o.index!==!1){var I=s[o.index],C=v.c2p(I.x,!0),k=m.c2p(I.y,!0),E=I.mrc||1;o.index=I.i;var R=s[0].t.orientation,O=R&&(I.sNorm||I.s),N=R==="h"?O:I.orig_x!==void 0?I.orig_x:I.x,G=R==="v"?O:I.orig_y!==void 0?I.orig_y:I.y;return r.extendFlat(o,{color:c(p,I),x0:C-E,x1:C+E,xLabelVal:N,y0:k-E,y1:k+E,yLabelVal:G,spikeDistance:P(I),hovertemplate:p.hovertemplate}),f(I,p,o),u.getComponentMethod("errorbars","hoverInfo")(I,p,o),[o]}}if(w.indexOf("fills")!==-1&&p._polygons){var U=p._polygons,Y=[],z=!1,B=1/0,H=-1/0,V=1/0,Z=-1/0,q,J,ne,ve,$,j,ae,ie,te;for(q=0;q<U.length;q++)ne=U[q],ne.contains(x)&&(z=!z,Y.push(ne),V=Math.min(V,ne.ymin),Z=Math.max(Z,ne.ymax));if(z){V=Math.max(V,0),Z=Math.min(Z,m._length);var re=(V+Z)/2;for(q=0;q<Y.length;q++)for(ve=Y[q].pts,J=1;J<ve.length;J++)ie=ve[J-1][1],te=ve[J][1],ie>re!=te>=re&&(j=ve[J-1][0],ae=ve[J][0],te-ie&&($=j+(ae-j)*(re-ie)/(te-ie),B=Math.min(B,$),H=Math.max(H,$)));B=Math.max(B,0),H=Math.min(H,v._length);var ce=t.defaultLine;return t.opacity(p.fillcolor)?ce=p.fillcolor:t.opacity((p.line||{}).color)&&(ce=p.line.color),r.extendFlat(o,{distance:o.maxHoverDistance,x0:B,x1:H,y0:re,y1:re,color:ce,hovertemplate:!1}),delete o.index,p.text&&!Array.isArray(p.text)?o.text=String(p.text):o.text=p.name,[o]}}}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../registry":911,"./get_trace_color":1197}],1199:[function(e,d,S){var r=e("./subtypes");d.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"./arrays_to_calcdata":1186,"./attributes":1187,"./calc":1188,"./cross_trace_calc":1192,"./cross_trace_defaults":1193,"./defaults":1194,"./format_labels":1196,"./hover":1198,"./marker_colorbar":1205,"./plot":1208,"./select":1209,"./style":1211,"./subtypes":1212}],1200:[function(e,d,S){var r=e("../../lib").isArrayOrTypedArray,a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults");d.exports=function(t,f,n,o,l,h){var i=(t.marker||{}).color;if(l("line.color",n),a(t,"line"))u(t,f,o,l,{prefix:"line.",cLetter:"c"});else{var s=(r(i)?!1:i)||n;l("line.color",s)}l("line.width"),(h||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778}],1201:[function(e,d,S){var r=e("../../constants/numerical"),a=r.BADNUM,u=r.LOG_CLIP,c=u+.5,t=u-.5,f=e("../../lib"),n=f.segmentsIntersect,o=f.constrain,l=e("./constants");d.exports=function(i,s){var p=s.xaxis,v=s.yaxis,m=p.type==="log",b=v.type==="log",y=p._length,x=v._length,w=s.connectGaps,g=s.baseTolerance,T=s.shape,M=T==="linear",P=s.fill&&s.fill!=="none",L=[],I=l.minTolerance,C=i.length,k=new Array(C),E=0,R,O,N,G,U,Y,z,B,H,V,Z,q,J,ne,ve,$;function j(Et){var jt=i[Et];if(!jt)return!1;var Zt=s.linearized?p.l2p(jt.x):p.c2p(jt.x),Mt=s.linearized?v.l2p(jt.y):v.c2p(jt.y);if(Zt===a){if(m&&(Zt=p.c2p(jt.x,!0)),Zt===a)return!1;b&&Mt===a&&(Zt*=Math.abs(p._m*x*(p._m>0?c:t)/(v._m*y*(v._m>0?c:t)))),Zt*=1e3}if(Mt===a){if(b&&(Mt=v.c2p(jt.y,!0)),Mt===a)return!1;Mt*=1e3}return[Zt,Mt]}function ae(Et,jt,Zt,Mt){var At=Zt-Et,ft=Mt-jt,ot=.5-Et,Te=.5-jt,Le=At*At+ft*ft,Ve=At*ot+ft*Te;if(Ve>0&&Ve<Le){var Qe=ot*ft-Te*At;if(Qe*Qe<Le)return!0}}var ie,te;function re(Et,jt){var Zt=Et[0]/y,Mt=Et[1]/x,At=Math.max(0,-Zt,Zt-1,-Mt,Mt-1);return At&&ie!==void 0&&ae(Zt,Mt,ie,te)&&(At=0),At&&jt&&ae(Zt,Mt,jt[0]/y,jt[1]/x)&&(At=0),(1+l.toleranceGrowth*At)*g}function ce(Et,jt){var Zt=Et[0]-jt[0],Mt=Et[1]-jt[1];return Math.sqrt(Zt*Zt+Mt*Mt)}var pe=l.maxScreensAway,fe=-y*pe,se=y*(1+pe),de=-x*pe,be=x*(1+pe),xe=[[fe,de,se,de],[se,de,se,be],[se,be,fe,be],[fe,be,fe,de]],ke,Re,Ke,ze,Je,qe;function Ee(Et,jt){for(var Zt=[],Mt=0,At=0;At<4;At++){var ft=xe[At],ot=n(Et[0],Et[1],jt[0],jt[1],ft[0],ft[1],ft[2],ft[3]);ot&&(!Mt||Math.abs(ot.x-Zt[0][0])>1||Math.abs(ot.y-Zt[0][1])>1)&&(ot=[ot.x,ot.y],Mt&&ce(ot,Et)<ce(Zt[0],Et)?Zt.unshift(ot):Zt.push(ot),Mt++)}return Zt}function Ae(Et){if(Et[0]<fe||Et[0]>se||Et[1]<de||Et[1]>be)return[o(Et[0],fe,se),o(Et[1],de,be)]}function Be(Et,jt){if(Et[0]===jt[0]&&(Et[0]===fe||Et[0]===se)||Et[1]===jt[1]&&(Et[1]===de||Et[1]===be))return!0}function $e(Et,jt){var Zt=[],Mt=Ae(Et),At=Ae(jt);return Mt&&At&&Be(Mt,At)||(Mt&&Zt.push(Mt),At&&Zt.push(At)),Zt}function xt(Et,jt,Zt){return function(Mt,At){var ft=Ae(Mt),ot=Ae(At),Te=[];if(ft&&ot&&Be(ft,ot))return Te;ft&&Te.push(ft),ot&&Te.push(ot);var Le=2*f.constrain((Mt[Et]+At[Et])/2,jt,Zt)-((ft||Mt)[Et]+(ot||At)[Et]);if(Le){var Ve;ft&&ot?Ve=Le>0==ft[Et]>ot[Et]?ft:ot:Ve=ft||ot,Ve[Et]+=Le}return Te}}var bt;T==="linear"||T==="spline"?bt=Ee:T==="hv"||T==="vh"?bt=$e:T==="hvh"?bt=xt(0,fe,se):T==="vhv"&&(bt=xt(1,de,be));function Ne(Et,jt){var Zt=jt[0]-Et[0],Mt=(jt[1]-Et[1])/Zt,At=(Et[1]*jt[0]-jt[1]*Et[0])/Zt;return At>0?[Mt>0?fe:se,be]:[Mt>0?se:fe,de]}function st(Et){var jt=Et[0],Zt=Et[1],Mt=jt===k[E-1][0],At=Zt===k[E-1][1];if(!(Mt&&At))if(E>1){var ft=jt===k[E-2][0],ot=Zt===k[E-2][1];Mt&&(jt===fe||jt===se)&&ft?ot?E--:k[E-1]=Et:At&&(Zt===de||Zt===be)&&ot?ft?E--:k[E-1]=Et:k[E++]=Et}else k[E++]=Et}function _t(Et){k[E-1][0]!==Et[0]&&k[E-1][1]!==Et[1]&&st([Ke,ze]),st(Et),Je=null,Ke=ze=0}function Ot(Et){if(ie=Et[0]/y,te=Et[1]/x,ke=Et[0]<fe?fe:Et[0]>se?se:0,Re=Et[1]<de?de:Et[1]>be?be:0,ke||Re){if(!E)k[E++]=[ke||Et[0],Re||Et[1]];else if(Je){var jt=bt(Je,Et);jt.length>1&&(_t(jt[0]),k[E++]=jt[1])}else qe=bt(k[E-1],Et)[0],k[E++]=qe;var Zt=k[E-1];ke&&Re&&(Zt[0]!==ke||Zt[1]!==Re)?(Je&&(Ke!==ke&&ze!==Re?st(Ke&&ze?Ne(Je,Et):[Ke||ke,ze||Re]):Ke&&ze&&st([Ke,ze])),st([ke,Re])):Ke-ke&&ze-Re&&st([ke||Ke,Re||ze]),Je=Et,Ke=ke,ze=Re}else Je&&_t(bt(Je,Et)[0]),k[E++]=Et}for(R=0;R<C;R++)if(O=j(R),!!O){for(E=0,Je=null,Ot(O),R++;R<C;R++){if(G=j(R),!G){if(w)continue;break}if(!M||!s.simplify){Ot(G);continue}var Wt=j(R+1);if(V=ce(G,O),!(!(P&&(E===0||E===C-1))&&V<re(G,Wt)*I)){for(B=[(G[0]-O[0])/V,(G[1]-O[1])/V],U=O,Z=V,q=ne=ve=0,z=!1,N=G,R++;R<i.length;R++){if(Y=Wt,Wt=j(R+1),!Y){if(w)continue;break}if(H=[Y[0]-O[0],Y[1]-O[1]],$=H[0]*B[1]-H[1]*B[0],ne=Math.min(ne,$),ve=Math.max(ve,$),ve-ne>re(Y,Wt))break;N=Y,J=H[0]*B[0]+H[1]*B[1],J>Z?(Z=J,G=Y,z=!1):J<q&&(q=J,U=Y,z=!0)}if(z?(Ot(G),N!==U&&Ot(U)):(U!==O&&Ot(U),N!==G&&Ot(G)),Ot(N),R>=i.length||!Y)break;Ot(Y),O=Y}}Je&&st([Ke||Je[0],ze||Je[1]]),L.push(k.slice(0,E))}return L}},{"../../constants/numerical":753,"../../lib":778,"./constants":1191}],1202:[function(e,d,S){d.exports=function(a,u,c){var t=c("line.shape");t==="spline"&&c("line.smoothing")}},{}],1203:[function(e,d,S){var r={tonextx:1,tonexty:1,tonext:1};d.exports=function(u,c,t){var f,n,o,l,h,i={},s=!1,p=-1,v=0,m=-1;for(n=0;n<t.length;n++)f=t[n][0].trace,o=f.stackgroup||"",o?o in i?h=i[o]:(h=i[o]=v,v++):f.fill in r&&m>=0?h=m:(h=m=v,v++),h<p&&(s=!0),f._groupIndex=p=h;var b=t.slice();s&&b.sort(function(x,w){var g=x[0].trace,T=w[0].trace;return g._groupIndex-T._groupIndex||g.index-T.index});var y={};for(n=0;n<b.length;n++)f=b[n][0].trace,o=f.stackgroup||"",f.visible===!0?(f._nexttrace=null,f.fill in r&&(l=y[o],f._prevtrace=l||null,l&&(l._nexttrace=f)),f._ownfill=f.fill&&(f.fill.substr(0,6)==="tozero"||f.fill==="toself"||f.fill.substr(0,2)==="to"&&!f._prevtrace),y[o]=f):f._prevtrace=f._nexttrace=f._ownfill=null;return b}},{}],1204:[function(e,d,S){var r=e("fast-isnumeric");d.exports=function(u){var c=u.marker,t=c.sizeref||1,f=c.sizemin||0,n=c.sizemode==="area"?function(o){return Math.sqrt(o/t)}:function(o){return o/t};return function(o){var l=n(o/2);return r(l)&&l>0?Math.max(l,f):0}}},{"fast-isnumeric":241}],1205:[function(e,d,S){d.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1206:[function(e,d,S){var r=e("../../components/color"),a=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),c=e("./subtypes");d.exports=function(f,n,o,l,h,i){var s=c.isBubble(f),p=(f.line||{}).color,v;if(i=i||{},p&&(o=p),h("marker.symbol"),h("marker.opacity",s?.7:1),h("marker.size"),h("marker.color",o),a(f,"marker")&&u(f,n,l,h,{prefix:"marker.",cLetter:"c"}),i.noSelect||(h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size")),i.noLine||(p&&!Array.isArray(p)&&n.marker.color!==p?v=p:s?v=r.background:v=r.defaultLine,h("marker.line.color",v),a(f,"marker.line")&&u(f,n,l,h,{prefix:"marker.line.",cLetter:"c"}),h("marker.line.width",s?1:0)),s&&(h("marker.sizeref"),h("marker.sizemin"),h("marker.sizemode")),i.gradient){var m=h("marker.gradient.type");m!=="none"&&h("marker.gradient.color")}}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"./subtypes":1212}],1207:[function(e,d,S){var r=e("../../lib").dateTick0,a=e("../../constants/numerical"),u=a.ONEWEEK;function c(t,f){return t%u===0?r(f,1):r(f,0)}d.exports=function(f,n,o,l,h){if(h||(h={x:!0,y:!0}),h.x){var i=l("xperiod");i&&(l("xperiod0",c(i,n.xcalendar)),l("xperiodalignment"))}if(h.y){var s=l("yperiod");s&&(l("yperiod0",c(s,n.ycalendar)),l("yperiodalignment"))}}},{"../../constants/numerical":753,"../../lib":778}],1208:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../lib"),c=u.ensureSingle,t=u.identity,f=e("../../components/drawing"),n=e("./subtypes"),o=e("./line_points"),l=e("./link_traces"),h=e("../../lib/polygon").tester;d.exports=function(m,b,y,x,w,g){var T,M,P=!w,L=!!w&&w.duration>0,I=l(m,b,y);if(T=x.selectAll("g.trace").data(I,function(k){return k[0].trace.uid}),T.enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),T.order(),i(m,T,b),L){g&&(M=g());var C=r.transition().duration(w.duration).ease(w.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()});C.each(function(){x.selectAll("g.trace").each(function(k,E){s(m,E,b,k,I,this,w)})})}else T.each(function(k,E){s(m,E,b,k,I,this,w)});P&&T.exit().remove(),x.selectAll("path:not([d])").remove()};function i(v,m,b){m.each(function(y){var x=c(r.select(this),"g","fills");f.setClipUrl(x,b.layerClipId,v);var w=y[0].trace,g=[];w._ownfill&&g.push("_ownFill"),w._nexttrace&&g.push("_nextFill");var T=x.selectAll("g").data(g,t);T.enter().append("g"),T.exit().each(function(M){w[M]=null}).remove(),T.order().each(function(M){w[M]=c(r.select(this),"path","js-fill")})})}function s(v,m,b,y,x,w,g){var T;p(v,m,b,y,x);var M=!!g&&g.duration>0;function P(Ee){return M?Ee.transition():Ee}var L=b.xaxis,I=b.yaxis,C=y[0].trace,k=C.line,E=r.select(w),R=c(E,"g","errorbars"),O=c(E,"g","lines"),N=c(E,"g","points"),G=c(E,"g","text");if(a.getComponentMethod("errorbars","plot")(v,R,b,g),C.visible!==!0)return;P(E).style("opacity",C.opacity);var U,Y,z=C.fill.charAt(C.fill.length-1);z!=="x"&&z!=="y"&&(z=""),y[0][b.isRangePlot?"nodeRangePlot3":"node3"]=E;var B="",H=[],V=C._prevtrace;V&&(B=V._prevRevpath||"",Y=V._nextFill,H=V._polygons);var Z,q,J="",ne="",ve,$,j,ae,ie,te,re,ce=[],pe=u.noop;if(U=C._ownFill,n.hasLines(C)||C.fill!=="none"){for(Y&&Y.datum(y),["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1?(ve=f.steps(k.shape),$=f.steps(k.shape.split("").reverse().join(""))):k.shape==="spline"?ve=$=function(Ee){var Ae=Ee[Ee.length-1];return Ee.length>1&&Ee[0][0]===Ae[0]&&Ee[0][1]===Ae[1]?f.smoothclosed(Ee.slice(1),k.smoothing):f.smoothopen(Ee,k.smoothing)}:ve=$=function(Ee){return"M"+Ee.join("L")},j=function(Ee){return $(Ee.reverse())},ce=o(y,{xaxis:L,yaxis:I,connectGaps:C.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,simplify:k.simplify,fill:C.fill}),re=C._polygons=new Array(ce.length),T=0;T<ce.length;T++)C._polygons[T]=h(ce[T]);ce.length&&(ae=ce[0][0],ie=ce[ce.length-1],te=ie[ie.length-1]),pe=function(Ee){return function(Ae){if(Z=ve(Ae),q=j(Ae),J?z?(J+="L"+Z.substr(1),ne=q+("L"+ne.substr(1))):(J+="Z"+Z,ne=q+"Z"+ne):(J=Z,ne=q),n.hasLines(C)&&Ae.length>1){var Be=r.select(this);if(Be.datum(y),Ee)P(Be.style("opacity",0).attr("d",Z).call(f.lineGroupStyle)).style("opacity",1);else{var $e=P(Be);$e.attr("d",Z),f.singleLineStyle(y,$e)}}}}}var fe=O.selectAll(".js-line").data(ce);P(fe.exit()).style("opacity",0).remove(),fe.each(pe(!1)),fe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(f.lineGroupStyle).each(pe(!0)),f.setClipUrl(fe,b.layerClipId,v);function se(Ee){P(Ee).attr("d","M0,0Z")}ce.length?(U?(U.datum(y),ae&&te&&(z?(z==="y"?ae[1]=te[1]=I.c2p(0,!0):z==="x"&&(ae[0]=te[0]=L.c2p(0,!0)),P(U).attr("d","M"+te+"L"+ae+"L"+J.substr(1)).call(f.singleFillStyle)):P(U).attr("d",J+"Z").call(f.singleFillStyle))):Y&&(C.fill.substr(0,6)==="tonext"&&J&&B?(C.fill==="tonext"?P(Y).attr("d",J+"Z"+B+"Z").call(f.singleFillStyle):P(Y).attr("d",J+"L"+B.substr(1)+"Z").call(f.singleFillStyle),C._polygons=C._polygons.concat(H)):(se(Y),C._polygons=null)),C._prevRevpath=ne,C._prevPolygons=re):(U?se(U):Y&&se(Y),C._polygons=C._prevRevpath=C._prevPolygons=null);function de(Ee){return Ee.filter(function(Ae){return!Ae.gap&&Ae.vis})}function be(Ee){return Ee.filter(function(Ae){return Ae.vis})}function xe(Ee){return Ee.filter(function(Ae){return!Ae.gap})}function ke(Ee){return Ee.id}function Re(Ee){if(Ee.ids)return ke}function Ke(){return!1}function ze(Ee,Ae,Be){var $e,xt,bt,Ne=Be[0].trace,st=n.hasMarkers(Ne),_t=n.hasText(Ne),Ot=Re(Ne),Wt=Ke,Et=Ke;if(st||_t){var jt=t,Zt=Ne.stackgroup,Mt=Zt&&v._fullLayout._scatterStackOpts[L._id+I._id][Zt].stackgaps==="infer zero";Ne.marker.maxdisplayed||Ne._needsCull?jt=Mt?be:de:Zt&&!Mt&&(jt=xe),st&&(Wt=jt),_t&&(Et=jt)}xt=Ee.selectAll("path.point"),$e=xt.data(Wt,Ot);var At=$e.enter().append("path").classed("point",!0);M&&At.call(f.pointStyle,Ne,v).call(f.translatePoints,L,I).style("opacity",0).transition().style("opacity",1),$e.order();var ft;st&&(ft=f.makePointStyleFns(Ne)),$e.each(function(ot){var Te=r.select(this),Le=P(Te);bt=f.translatePoint(ot,Le,L,I),bt?(f.singlePointStyle(ot,Le,Ne,ft,v),b.layerClipId&&f.hideOutsideRangePoint(ot,Le,L,I,Ne.xcalendar,Ne.ycalendar),Ne.customdata&&Te.classed("plotly-customdata",ot.data!==null&&ot.data!==void 0)):Le.remove()}),M?$e.exit().transition().style("opacity",0).remove():$e.exit().remove(),xt=Ae.selectAll("g"),$e=xt.data(Et,Ot),$e.enter().append("g").classed("textpoint",!0).append("text"),$e.order(),$e.each(function(ot){var Te=r.select(this),Le=P(Te.select("text"));bt=f.translatePoint(ot,Le,L,I),bt?b.layerClipId&&f.hideOutsideRangePoint(ot,Te,L,I,Ne.xcalendar,Ne.ycalendar):Te.remove()}),$e.selectAll("text").call(f.textPointStyle,Ne,v).each(function(ot){var Te=L.c2p(ot.x),Le=I.c2p(ot.y);r.select(this).selectAll("tspan.line").each(function(){P(r.select(this)).attr({x:Te,y:Le})})}),$e.exit().remove()}N.datum(y),G.datum(y),ze(N,G,y);var Je=C.cliponaxis===!1,qe=Je?null:b.layerClipId;f.setClipUrl(N,qe,v),f.setClipUrl(G,qe,v)}function p(v,m,b,y,x){var w=b.xaxis,g=b.yaxis,T=r.extent(u.simpleMap(w.range,w.r2c)),M=r.extent(u.simpleMap(g.range,g.r2c)),P=y[0].trace;if(!!n.hasMarkers(P)){var L=P.marker.maxdisplayed;if(L!==0){var I=y.filter(function(R){return R.x>=T[0]&&R.x<=T[1]&&R.y>=M[0]&&R.y<=M[1]}),C=Math.ceil(I.length/L),k=0;x.forEach(function(R,O){var N=R[0].trace;n.hasMarkers(N)&&N.marker.maxdisplayed>0&&O<m&&k++});var E=Math.round(k*C/3+Math.floor(k/3)*C/7.1);y.forEach(function(R){delete R.vis}),I.forEach(function(R,O){Math.round((O+E)%C)===0&&(R.vis=!0)})}}}},{"../../components/drawing":665,"../../lib":778,"../../lib/polygon":790,"../../registry":911,"./line_points":1201,"./link_traces":1203,"./subtypes":1212,d3:169}],1209:[function(e,d,S){var r=e("./subtypes");d.exports=function(u,c){var t=u.cd,f=u.xaxis,n=u.yaxis,o=[],l=t[0].trace,h,i,s,p,v=!r.hasMarkers(l)&&!r.hasText(l);if(v)return[];if(c===!1)for(h=0;h<t.length;h++)t[h].selected=0;else for(h=0;h<t.length;h++)i=t[h],s=f.c2p(i.x),p=n.c2p(i.y),i.i!==null&&c.contains([s,p],!1,h,u)?(o.push({pointNumber:i.i,x:f.c2d(i.x),y:n.c2d(i.y)}),i.selected=1):i.selected=0;return o}},{"./subtypes":1212}],1210:[function(e,d,S){var r=["orientation","groupnorm","stackgaps"];d.exports=function(u,c,t,f){var n=t._scatterStackOpts,o=f("stackgroup");if(o){var l=c.xaxis+c.yaxis,h=n[l];h||(h=n[l]={});var i=h[o],s=!1;i?i.traces.push(c):(i=h[o]={traceIndices:[],traces:[c]},s=!0);for(var p={orientation:c.x&&!c.y?"h":"v"},v=0;v<r.length;v++){var m=r[v],b=m+"Found";if(!i[b]){var y=u[m]!==void 0,x=m==="orientation";if((y||s)&&(i[m]=f(m,p[m]),x&&(i.fillDflt=i[m]==="h"?"tonextx":"tonexty"),y&&(i[b]=!0,!s&&(delete i.traces[0][m],x))))for(var w=0;w<i.traces.length-1;w++){var g=i.traces[w];g._input.fill!==g.fill&&(g.fill=i.fillDflt)}}}return i}}},{}],1211:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../registry");function c(o){var l=r.select(o).selectAll("g.trace.scatter");l.style("opacity",function(h){return h[0].trace.opacity}),l.selectAll("g.points").each(function(h){var i=r.select(this),s=h.trace||h[0].trace;t(i,s,o)}),l.selectAll("g.text").each(function(h){var i=r.select(this),s=h.trace||h[0].trace;f(i,s,o)}),l.selectAll("g.trace path.js-line").call(a.lineGroupStyle),l.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),u.getComponentMethod("errorbars","style")(l)}function t(o,l,h){a.pointStyle(o.selectAll("path.point"),l,h)}function f(o,l,h){a.textPointStyle(o.selectAll("text"),l,h)}function n(o,l,h){var i=l[0].trace;i.selectedpoints?(a.selectedPointStyle(h.selectAll("path.point"),i),a.selectedTextStyle(h.selectAll("text"),i)):(t(h,i,o),f(h,i,o))}d.exports={style:c,stylePoints:t,styleText:f,styleOnSelect:n}},{"../../components/drawing":665,"../../registry":911,d3:169}],1212:[function(e,d,S){var r=e("../../lib");d.exports={hasLines:function(a){return a.visible&&a.mode&&a.mode.indexOf("lines")!==-1},hasMarkers:function(a){return a.visible&&(a.mode&&a.mode.indexOf("markers")!==-1||a.type==="splom")},hasText:function(a){return a.visible&&a.mode&&a.mode.indexOf("text")!==-1},isBubble:function(a){return r.isPlainObject(a.marker)&&r.isArrayOrTypedArray(a.marker.size)}}},{"../../lib":778}],1213:[function(e,d,S){var r=e("../../lib");d.exports=function(a,u,c,t,f){f=f||{},t("textposition"),r.coerceFont(t,"textfont",c.font),f.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":778}],1214:[function(e,d,S){var r=e("../../lib"),a=e("../../registry");d.exports=function(c,t,f,n){var o=n("x"),l=n("y"),h,i=a.getComponentMethod("calendars","handleTraceDefaults");if(i(c,t,["x","y"],f),o){var s=r.minRowLength(o);l?h=Math.min(s,r.minRowLength(l)):(h=s,n("y0"),n("dy"))}else{if(!l)return 0;h=r.minRowLength(l),n("x0"),n("dx")}return t._length=h,h}},{"../../lib":778,"../../registry":911}],1215:[function(e,d,S){var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/attributes"),f=e("../../constants/gl3d_dashes"),n=e("../../constants/gl3d_markers"),o=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,h=r.line,i=r.marker,s=i.line,p=o({width:h.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},a("line"));function v(b){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var m=d.exports=l({x:r.x,y:r.y,z:{valType:"data_array"},text:o({},r.text,{}),texttemplate:c({},{}),hovertext:o({},r.hovertext,{}),hovertemplate:u(),mode:o({},r.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:v(),y:v(),z:v()},connectgaps:r.connectgaps,line:p,marker:o({symbol:{valType:"enumerated",values:Object.keys(n),dflt:"circle",arrayOk:!0},size:o({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:o({},i.opacity,{arrayOk:!1}),colorbar:i.colorbar,line:o({width:o({},s.width,{arrayOk:!1})},a("marker.line"))},a("marker")),textposition:o({},r.textposition,{dflt:"top center"}),textfont:{color:r.textfont.color,size:r.textfont.size,family:o({},r.textfont.family,{arrayOk:!1})},hoverinfo:o({},t.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":650,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1216:[function(e,d,S){var r=e("../scatter/arrays_to_calcdata"),a=e("../scatter/colorscale_calc");d.exports=function(c,t){var f=[{x:!1,y:!1,trace:t,t:{}}];return r(f,t),a(c,t),f}},{"../scatter/arrays_to_calcdata":1186,"../scatter/colorscale_calc":1190}],1217:[function(e,d,S){var r=e("../../registry");function a(t,f,n,o){if(!f||!f.visible)return null;for(var l=r.getComponentMethod("errorbars","makeComputeError")(f),h=new Array(t.length),i=0;i<t.length;i++){var s=l(+t[i],i);if(o.type==="log"){var p=o.c2l(t[i]),v=t[i]-s[0],m=t[i]+s[1];if(h[i]=[(o.c2l(v,!0)-p)*n,(o.c2l(m,!0)-p)*n],v>0){var b=o.c2l(v);o._lowerLogErrorBound||(o._lowerLogErrorBound=b),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,b)}}else h[i]=[-s[0]*n,s[1]*n]}return h}function u(t){for(var f=0;f<t.length;f++)if(t[f])return t[f].length;return 0}function c(t,f,n){var o=[a(t.x,t.error_x,f[0],n.xaxis),a(t.y,t.error_y,f[1],n.yaxis),a(t.z,t.error_z,f[2],n.zaxis)],l=u(o);if(l===0)return null;for(var h=new Array(l),i=0;i<l;i++){for(var s=[[0,0,0],[0,0,0]],p=0;p<3;p++)if(o[p])for(var v=0;v<2;v++)s[v][p]=o[p][i][v];h[i]=s}return h}d.exports=c},{"../../registry":911}],1218:[function(e,d,S){var r=e("gl-line3d"),a=e("gl-scatter3d"),u=e("gl-error3d"),c=e("gl-mesh3d"),t=e("delaunay-triangulate"),f=e("../../lib"),n=e("../../lib/str2rgbarray"),o=e("../../lib/gl_format_color").formatColor,l=e("../scatter/make_bubble_size_func"),h=e("../../constants/gl3d_dashes"),i=e("../../constants/gl3d_markers"),s=e("../../plots/cartesian/axes"),p=e("../../components/fx/helpers").appendArrayPointValue,v=e("./calc_errors");function m(R,O){this.scene=R,this.uid=O,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var b=m.prototype;b.handlePick=function(R){if(R.object&&(R.object===this.linePlot||R.object===this.delaunayMesh||R.object===this.textMarkers||R.object===this.scatterPlot)){var O=R.index=R.data.index;return R.object.highlight&&R.object.highlight(null),this.scatterPlot&&(R.object=this.scatterPlot,this.scatterPlot.highlight(R.data)),R.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[O]||this.textLabels[O]===0)&&(R.textLabel=this.textLabels[O]):R.textLabel=this.textLabels),R.traceCoordinate=[this.data.x[O],this.data.y[O],this.data.z[O]],!0}};function y(R,O,N){var G=(N+1)%3,U=(N+2)%3,Y=[],z=[],B;for(B=0;B<R.length;++B){var H=R[B];isNaN(H[G])||!isFinite(H[G])||isNaN(H[U])||!isFinite(H[U])||(Y.push([H[G],H[U]]),z.push(B))}var V=t(Y);for(B=0;B<V.length;++B)for(var Z=V[B],q=0;q<Z.length;++q)Z[q]=z[Z[q]];return{positions:R,cells:V,meshColor:O}}function x(R){for(var O=[0,0,0],N=[[0,0,0],[0,0,0],[0,0,0]],G=[1,1,1],U=0;U<3;U++){var Y=R[U];Y&&Y.copy_zstyle!==!1&&R[2].visible!==!1&&(Y=R[2]),!(!Y||!Y.visible)&&(O[U]=Y.width/2,N[U]=n(Y.color),G[U]=Y.thickness)}return{capSize:O,color:N,lineWidth:G}}function w(R){return R==null?0:R.indexOf("left")>-1?-1:R.indexOf("right")>-1?1:0}function g(R){return R==null?0:R.indexOf("top")>-1?-1:R.indexOf("bottom")>-1?1:0}function T(R){var O=0,N=0,G=[O,N];if(Array.isArray(R))for(var U=0;U<R.length;U++)G[U]=[O,N],R[U]&&(G[U][0]=w(R[U]),G[U][1]=g(R[U]));else G[0]=w(R),G[1]=g(R);return G}function M(R,O){return O(R*4)}function P(R){return i[R]}function L(R,O,N,G,U){var Y=null;if(f.isArrayOrTypedArray(R)){Y=[];for(var z=0;z<O;z++)R[z]===void 0?Y[z]=G:Y[z]=N(R[z],U)}else Y=N(R,f.identity);return Y}function I(R,O){var N=[],G=R.fullSceneLayout,U=R.dataScale,Y=G.xaxis,z=G.yaxis,B=G.zaxis,H=O.marker,V=O.line,Z=O.x||[],q=O.y||[],J=O.z||[],ne=Z.length,ve=O.xcalendar,$=O.ycalendar,j=O.zcalendar,ae,ie,te,re,ce,pe;for(ce=0;ce<ne;ce++)ae=Y.d2l(Z[ce],0,ve)*U[0],ie=z.d2l(q[ce],0,$)*U[1],te=B.d2l(J[ce],0,j)*U[2],N[ce]=[ae,ie,te];if(Array.isArray(O.text))pe=O.text;else if(O.text!==void 0)for(pe=new Array(ne),ce=0;ce<ne;ce++)pe[ce]=O.text;function fe(xt,bt){var Ne=G[xt];return s.tickText(Ne,Ne.d2l(bt),!0).text}var se=O.texttemplate;if(se){var de=R.fullLayout,be=de._d3locale,xe=Array.isArray(se),ke=xe?Math.min(se.length,ne):ne,Re=xe?function(xt){return se[xt]}:function(){return se};for(pe=new Array(ke),ce=0;ce<ke;ce++){var Ke={x:Z[ce],y:q[ce],z:J[ce]},ze={xLabel:fe("xaxis",Z[ce]),yLabel:fe("yaxis",q[ce]),zLabel:fe("zaxis",J[ce])},Je={};p(Je,O,ce);var qe=O._meta||{};pe[ce]=f.texttemplateString(Re(ce),ze,be,Je,Ke,qe)}}if(re={position:N,mode:O.mode,text:pe},"line"in O&&(re.lineColor=o(V,1,ne),re.lineWidth=V.width,re.lineDashes=V.dash),"marker"in O){var Ee=l(O);re.scatterColor=o(H,1,ne),re.scatterSize=L(H.size,ne,M,20,Ee),re.scatterMarker=L(H.symbol,ne,P,"\u25CF"),re.scatterLineWidth=H.line.width,re.scatterLineColor=o(H.line,1,ne),re.scatterAngle=0}"textposition"in O&&(re.textOffset=T(O.textposition),re.textColor=o(O.textfont,1,ne),re.textSize=L(O.textfont.size,ne,f.identity,12),re.textFont=O.textfont.family,re.textAngle=0);var Ae=["x","y","z"];for(re.project=[!1,!1,!1],re.projectScale=[1,1,1],re.projectOpacity=[1,1,1],ce=0;ce<3;++ce){var Be=O.projection[Ae[ce]];(re.project[ce]=Be.show)&&(re.projectOpacity[ce]=Be.opacity,re.projectScale[ce]=Be.scale)}re.errorBounds=v(O,U,G);var $e=x([O.error_x,O.error_y,O.error_z]);return re.errorColor=$e.color,re.errorLineWidth=$e.lineWidth,re.errorCapSize=$e.capSize,re.delaunayAxis=O.surfaceaxis,re.delaunayColor=n(O.surfacecolor),re}function C(R){if(f.isArrayOrTypedArray(R)){var O=R[0];return f.isArrayOrTypedArray(O)&&(R=O),"rgb("+R.slice(0,3).map(function(N){return Math.round(N*255)})+")"}return null}function k(R){return f.isArrayOrTypedArray(R)?R.length===4&&typeof R[0]=="number"?C(R):R.map(C):null}b.update=function(R){var O=this.scene.glplot.gl,N,G,U,Y,z=h.solid;this.data=R;var B=I(this.scene,R);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in h&&(z=h[B.lineDashes]),this.color=k(B.scatterColor)||k(B.lineColor),this.dataPoints=B.position,N={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:R.opacity,connectGaps:R.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(N):(this.linePlot=r(N),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=R.opacity;if(R.marker&&R.marker.opacity&&(H*=R.marker.opacity),G={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:H,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(G):(this.scatterPlot=a(G),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),Y={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:R.opacity},this.textLabels=R.hovertext||R.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(Y):(this.textMarkers=a(Y),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),U={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:R.opacity},this.errorBars?B.errorBounds?this.errorBars.update(U):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=u(U),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var V=y(B.position,B.delaunayColor,B.delaunayAxis);V.opacity=R.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=O,this.delaunayMesh=c(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function E(R,O){var N=new m(R,O.uid);return N.update(O),N}d.exports=E},{"../../components/fx/helpers":679,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../scatter/make_bubble_size_func":1204,"./calc_errors":1217,"delaunay-triangulate":171,"gl-error3d":266,"gl-line3d":275,"gl-mesh3d":309,"gl-scatter3d":330}],1219:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),n=e("./attributes");d.exports=function(h,i,s,p){function v(M,P){return a.coerce(h,i,n,M,P)}var m=o(h,i,v,p);if(!m){i.visible=!1;return}v("text"),v("hovertext"),v("hovertemplate"),v("mode"),u.hasLines(i)&&(v("connectgaps"),t(h,i,s,p,v)),u.hasMarkers(i)&&c(h,i,s,p,v,{noSelect:!0}),u.hasText(i)&&(v("texttemplate"),f(h,i,p,v,{noSelect:!0}));var b=(i.line||{}).color,y=(i.marker||{}).color;v("surfaceaxis")>=0&&v("surfacecolor",b||y);for(var x=["x","y","z"],w=0;w<3;++w){var g="projection."+x[w];v(g+".show")&&(v(g+".opacity"),v(g+".scale"))}var T=r.getComponentMethod("errorbars","supplyDefaults");T(h,i,b||y||s,{axis:"z"}),T(h,i,b||y||s,{axis:"y",inherit:"z"}),T(h,i,b||y||s,{axis:"x",inherit:"z"})};function o(l,h,i,s){var p=0,v=i("x"),m=i("y"),b=i("z"),y=r.getComponentMethod("calendars","handleTraceDefaults");return y(l,h,["x","y","z"],s),v&&m&&b&&(p=Math.min(v.length,m.length,b.length),h._length=h._xlength=h._ylength=h._zlength=p),p}},{"../../lib":778,"../../registry":911,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1215}],1220:[function(e,d,S){d.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":751,"../../plots/gl3d":870,"./attributes":1215,"./calc":1216,"./convert":1218,"./defaults":1219}],1221:[function(e,d,S){var r=e("../scatter/attributes"),a=e("../../plots/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),f=e("../../lib/extend").extendFlat,n=r.marker,o=r.line,l=n.line;d.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:f({},r.mode,{dflt:"markers"}),text:f({},r.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","text"]}),hovertext:f({},r.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,shape:f({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:r.connectgaps,fill:f({},r.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r.fillcolor,marker:f({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:f({width:l.width,editType:"calc"},t("marker.line")),gradient:n.gradient,editType:"calc"},t("marker")),textfont:r.textfont,textposition:r.textposition,selected:r.selected,unselected:r.unselected,hoverinfo:f({},a.hoverinfo,{flags:["a","b","text","name"]}),hoveron:r.hoveron,hovertemplate:u()}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1222:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../scatter/colorscale_calc"),u=e("../scatter/arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,f=e("../carpet/lookup_carpetid");d.exports=function(o,l){var h=l._carpetTrace=f(o,l);if(!(!h||!h.visible||h.visible==="legendonly")){var i;l.xaxis=h.xaxis,l.yaxis=h.yaxis;var s=l._length,p=new Array(s),v,m,b=!1;for(i=0;i<s;i++)if(v=l.a[i],m=l.b[i],r(v)&&r(m)){var y=h.ab2xy(+v,+m,!0),x=h.isVisible(+v,+m);x||(b=!0),p[i]={x:y[0],y:y[1],a:v,b:m,vis:x}}else p[i]={x:!1,y:!1};return l._needsCull=b,p[0].carpet=h,p[0].trace=l,t(l,s),a(o,l),u(p,l),c(p,l),p}}},{"../carpet/lookup_carpetid":981,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1223:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/constants"),u=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/line_shape_defaults"),n=e("../scatter/text_defaults"),o=e("../scatter/fillcolor_defaults"),l=e("./attributes");d.exports=function(i,s,p,v){function m(M,P){return r.coerce(i,s,l,M,P)}m("carpet"),s.xaxis="x",s.yaxis="y";var b=m("a"),y=m("b"),x=Math.min(b.length,y.length);if(!x){s.visible=!1;return}s._length=x,m("text"),m("texttemplate"),m("hovertext");var w=x<a.PTS_LINESONLY?"lines+markers":"lines";m("mode",w),u.hasLines(s)&&(t(i,s,p,v,m),f(i,s,m),m("connectgaps")),u.hasMarkers(s)&&c(i,s,p,v,m,{gradient:!0}),u.hasText(s)&&n(i,s,v,m);var g=[];(u.hasMarkers(s)||u.hasText(s))&&(m("marker.maxdisplayed"),g.push("points")),m("fill"),s.fill!=="none"&&(o(i,s,p,m),u.hasLines(s)||f(i,s,m)),(s.fill==="tonext"||s.fill==="toself")&&g.push("fills");var T=m("hoveron",g.join("+")||"points");T!=="fills"&&m("hovertemplate"),r.coerceSelectionMarkerOpacity(s,m)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1221}],1224:[function(e,d,S){d.exports=function(a,u,c,t,f){var n=t[f];return a.a=n.a,a.b=n.b,a.y=n.y,a}},{}],1225:[function(e,d,S){d.exports=function(a,u){var c={},t=u._carpet,f=t.ab2ij([a.a,a.b]),n=Math.floor(f[0]),o=f[0]-n,l=Math.floor(f[1]),h=f[1]-l,i=t.evalxy([],n,l,o,h);return c.yLabel=i[1].toFixed(3),c}},{}],1226:[function(e,d,S){var r=e("../scatter/hover"),a=e("../../lib").fillText;d.exports=function(c,t,f,n){var o=r(c,t,f,n);if(!o||o[0].index===!1)return;var l=o[0];if(l.index===void 0){var h=1-l.y0/c.ya._length,i=c.xa._length,s=i*h/2,p=i-s;return l.x0=Math.max(Math.min(l.x0,p),s),l.x1=Math.max(Math.min(l.x1,p),s),o}var v=l.cd[l.index];l.a=v.a,l.b=v.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var m=l.trace,b=m._carpet,y=m._module.formatLabels(v,m);l.yLabel=y.yLabel,delete l.text;var x=[];function w(M,P){var L;M.labelprefix&&M.labelprefix.length>0?L=M.labelprefix.replace(/ = $/,""):L=M._hovertitle,x.push(L+": "+P.toFixed(3)+M.labelsuffix)}if(!m.hovertemplate){var g=v.hi||m.hoverinfo,T=g.split("+");T.indexOf("all")!==-1&&(T=["a","b","text"]),T.indexOf("a")!==-1&&w(b.aaxis,v.a),T.indexOf("b")!==-1&&w(b.baxis,v.b),x.push("y: "+l.yLabel),T.indexOf("text")!==-1&&a(v,m,x),l.extraText=x.join("<br>")}return o}},{"../../lib":778,"../scatter/hover":1198}],1227:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1221,"./calc":1222,"./defaults":1223,"./event_data":1224,"./format_labels":1225,"./hover":1226,"./plot":1228}],1228:[function(e,d,S){var r=e("../scatter/plot"),a=e("../../plots/cartesian/axes"),u=e("../../components/drawing");d.exports=function(t,f,n,o){var l,h,i,s=n[0][0].carpet,p={xaxis:a.getFromId(t,s.xaxis||"x"),yaxis:a.getFromId(t,s.yaxis||"y"),plot:f.plot};for(r(t,p,n,o),l=0;l<n.length;l++)h=n[l][0].trace,i=o.selectAll("g.trace"+h.uid+" .js-line"),u.setClipUrl(i,n[l][0].carpet._clipPathId,t)}},{"../../components/drawing":665,"../../plots/cartesian/axes":828,"../scatter/plot":1208}],1229:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../scatter/attributes"),c=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),f=e("../../components/drawing/attributes").dash,n=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,l=u.marker,h=u.line,i=l.line;d.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},u.mode,{dflt:"markers"}),text:n({},u.text,{}),texttemplate:a({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},u.hovertext,{}),textfont:u.textfont,textposition:u.textposition,line:{color:h.color,width:h.width,dash:f},connectgaps:u.connectgaps,marker:n({symbol:l.symbol,opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,colorbar:l.colorbar,line:n({width:i.width},t("marker.line")),gradient:l.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:u.fillcolor,selected:u.selected,unselected:u.unselected,hoverinfo:n({},c.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:r()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1230:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,u=e("../scatter/colorscale_calc"),c=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),f=e("../../lib")._;function n(o){return o&&typeof o=="string"}d.exports=function(l,h){var i=Array.isArray(h.locations),s=i?h.locations.length:h._length,p=new Array(s),v;h.geojson?v=function(g){return n(g)||r(g)}:v=n;for(var m=0;m<s;m++){var b=p[m]={};if(i){var y=h.locations[m];b.loc=v(y)?y:null}else{var x=h.lon[m],w=h.lat[m];r(x)&&r(w)?b.lonlat=[+x,+w]:b.lonlat=[a,a]}}return c(p,h),u(l,h),t(p,h),s&&(p[0].t={labels:{lat:f(l,"lat:")+" ",lon:f(l,"lon:")+" "}}),p}},{"../../constants/numerical":753,"../../lib":778,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1231:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),n=e("./attributes");d.exports=function(l,h,i,s){function p(T,M){return r.coerce(l,h,n,T,M)}var v=p("locations"),m;if(v&&v.length){var b=p("geojson"),y;(typeof b=="string"&&b!==""||r.isPlainObject(b))&&(y="geojson-id");var x=p("locationmode",y);x==="geojson-id"&&p("featureidkey"),m=v.length}else{var w=p("lon")||[],g=p("lat")||[];m=Math.min(w.length,g.length)}if(!m){h.visible=!1;return}h._length=m,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),a.hasLines(h)&&(c(l,h,i,s,p),p("connectgaps")),a.hasMarkers(h)&&u(l,h,i,s,p,{gradient:!0}),a.hasText(h)&&(p("texttemplate"),t(l,h,s,p)),p("fill"),h.fill!=="none"&&f(l,h,i,p),r.coerceSelectionMarkerOpacity(h,p)}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1229}],1232:[function(e,d,S){d.exports=function(a,u,c,t,f){a.lon=u.lon,a.lat=u.lat,a.location=u.loc?u.loc:null;var n=t[f];return n.fIn&&n.fIn.properties&&(a.properties=n.fIn.properties),a}},{}],1233:[function(e,d,S){var r=e("../../plots/cartesian/axes");d.exports=function(u,c,t){var f={},n=t[c.geo]._subplot,o=n.mockAxis,l=u.lonlat;return f.lonLabel=r.tickText(o,o.c2l(l[0]),!0).text,f.latLabel=r.tickText(o,o.c2l(l[1]),!0).text,f}},{"../../plots/cartesian/axes":828}],1234:[function(e,d,S){var r=e("../../components/fx"),a=e("../../constants/numerical").BADNUM,u=e("../scatter/get_trace_color"),c=e("../../lib").fillText,t=e("./attributes");d.exports=function(o,l,h){var i=o.cd,s=i[0].trace,p=o.xa,v=o.ya,m=o.subplot,b=m.projection.isLonLatOverEdges,y=m.project;function x(I){var C=I.lonlat;if(C[0]===a||b(C))return 1/0;var k=y(C),E=y([l,h]),R=Math.abs(k[0]-E[0]),O=Math.abs(k[1]-E[1]),N=Math.max(3,I.mrc||0);return Math.max(Math.sqrt(R*R+O*O)-N,1-3/N)}if(r.getClosest(i,x,o),o.index!==!1){var w=i[o.index],g=w.lonlat,T=[p.c2p(g),v.c2p(g)],M=w.mrc||1;o.x0=T[0]-M,o.x1=T[0]+M,o.y0=T[1]-M,o.y1=T[1]+M,o.loc=w.loc,o.lon=g[0],o.lat=g[1];var P={};P[s.geo]={_subplot:m};var L=s._module.formatLabels(w,s,P);return o.lonLabel=L.lonLabel,o.latLabel=L.latLabel,o.color=u(s,w),o.extraText=f(s,w,o,i[0].t.labels),o.hovertemplate=s.hovertemplate,[o]}};function f(n,o,l,h){if(n.hovertemplate)return;var i=o.hi||n.hoverinfo,s=i==="all"?t.hoverinfo.flags:i.split("+"),p=s.indexOf("location")!==-1&&Array.isArray(n.locations),v=s.indexOf("lon")!==-1,m=s.indexOf("lat")!==-1,b=s.indexOf("text")!==-1,y=[];function x(w){return w+"\xB0"}return p?y.push(o.loc):v&&m?y.push("("+x(l.lonLabel)+", "+x(l.latLabel)+")"):v?y.push(h.lon+x(l.lonLabel)):m&&y.push(h.lat+x(l.latLabel)),b&&c(o,n,y),y.join("<br>")}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197,"./attributes":1229}],1235:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":860,"../scatter/marker_colorbar":1205,"../scatter/style":1211,"./attributes":1229,"./calc":1230,"./defaults":1231,"./event_data":1232,"./format_labels":1233,"./hover":1234,"./plot":1236,"./select":1237,"./style":1238}],1236:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../lib/topojson_utils").getTopojsonFeatures,c=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),f=e("../../plots/cartesian/autorange").findExtremes,n=e("../../constants/numerical").BADNUM,o=e("../scatter/calc").calcMarkerSize,l=e("../scatter/subtypes"),h=e("./style");function i(p,v,m){var b=v.layers.frontplot.select(".scatterlayer"),y=a.makeTraceGroups(b,m,"trace scattergeo");function x(w,g){w.lonlat[0]===n&&r.select(g).remove()}y.selectAll("*").remove(),y.each(function(w){var g=r.select(this),T=w[0].trace;if(l.hasLines(T)||T.fill!=="none"){var M=c.calcTraceToLineCoords(w),P=T.fill!=="none"?c.makePolygon(M):c.makeLine(M);g.selectAll("path.js-line").data([{geojson:P,trace:T}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}l.hasMarkers(T)&&g.selectAll("path.point").data(a.identity).enter().append("path").classed("point",!0).each(function(L){x(L,this)}),l.hasText(T)&&g.selectAll("g").data(a.identity).enter().append("g").append("text").each(function(L){x(L,this)}),h(p,w)})}function s(p,v){var m=p[0].trace,b=v[m.geo],y=b._subplot,x=m._length,w,g;if(Array.isArray(m.locations)){var T=m.locationmode,M=T==="geojson-id"?t.extractTraceFeature(p):u(m,y.topojson);for(w=0;w<x;w++){g=p[w];var P=T==="geojson-id"?g.fOut:t.locationToFeature(T,g.loc,M);g.lonlat=P?P.properties.ct:[n,n]}}var L={padded:!0},I,C;if(b.fitbounds==="geojson"&&m.locationmode==="geojson-id"){var k=t.computeBbox(t.getTraceGeojson(m));I=[k[0],k[2]],C=[k[1],k[3]]}else{for(I=new Array(x),C=new Array(x),w=0;w<x;w++)g=p[w],I[w]=g.lonlat[0],C[w]=g.lonlat[1];L.ppad=o(m,x)}m._extremes.lon=f(b.lonaxis._ax,I,L),m._extremes.lat=f(b.lataxis._ax,C,L)}d.exports={calcGeoJSON:s,plot:i}},{"../../constants/numerical":753,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"../scatter/calc":1188,"../scatter/subtypes":1212,"./style":1238,d3:169}],1237:[function(e,d,S){var r=e("../scatter/subtypes"),a=e("../../constants/numerical").BADNUM;d.exports=function(c,t){var f=c.cd,n=c.xaxis,o=c.yaxis,l=[],h=f[0].trace,i,s,p,v,m,b=!r.hasMarkers(h)&&!r.hasText(h);if(b)return[];if(t===!1)for(m=0;m<f.length;m++)f[m].selected=0;else for(m=0;m<f.length;m++)i=f[m],s=i.lonlat,s[0]!==a&&(p=n.c2p(s),v=o.c2p(s),t.contains([p,v],null,m,c)?(l.push({pointNumber:m,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return l}},{"../../constants/numerical":753,"../scatter/subtypes":1212}],1238:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color"),c=e("../scatter/style"),t=c.stylePoints,f=c.styleText;d.exports=function(l,h){h&&n(l,h)};function n(o,l){var h=l[0].trace,i=l[0].node3;i.style("opacity",l[0].trace.opacity),t(i,h,o),f(i,h,o),i.selectAll("path.js-line").style("fill","none").each(function(s){var p=r.select(this),v=s.trace,m=v.line||{};p.call(u.stroke,m.color).call(a.dashLine,m.dash||"",m.width||0),v.fill!=="none"&&p.call(u.fill,v.fillcolor)})}},{"../../components/color":643,"../../components/drawing":665,"../scatter/style":1211,d3:169}],1239:[function(e,d,S){var r=e("../../plots/attributes"),a=e("../scatter/attributes"),u=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,t=e("../../plot_api/edit_types").overrideAll,f=e("./constants").DASHES,n=a.line,o=a.marker,l=o.line,h=d.exports=t({x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,text:a.text,hovertext:a.hovertext,textposition:a.textposition,textfont:a.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},marker:c({},u("marker"),{symbol:o.symbol,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:c({},u("marker.line"),{width:l.width})}),connectgaps:a.connectgaps,fill:c({},a.fill,{dflt:"none"}),fillcolor:a.fillcolor,selected:{marker:a.selected.marker,textfont:a.selected.textfont},unselected:{marker:a.unselected.marker,textfont:a.unselected.textfont},opacity:r.opacity},"calc","nested");h.x.editType=h.y.editType=h.x0.editType=h.y0.editType="calc+clearAxisTypes",h.hovertemplate=a.hovertemplate,h.texttemplate=a.texttemplate},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../scatter/attributes":1187,"./constants":1241}],1240:[function(e,d,S){var r=e("@plotly/point-cluster"),a=e("../../lib"),u=e("../../plots/cartesian/axis_ids"),c=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),f=e("../scatter/calc"),n=f.calcMarkerSize,o=f.calcAxisExpansion,l=f.setFirstScatter,h=e("../scatter/colorscale_calc"),i=e("./convert"),s=e("./scene_update"),p=e("../../constants/numerical").BADNUM,v=e("./constants").TOO_MANY_POINTS;d.exports=function(x,w){var g=x._fullLayout,T=u.getFromId(x,w.xaxis),M=u.getFromId(x,w.yaxis),P=g._plots[w.xaxis+w.yaxis],L=w._length,I=L>=v,C=L*2,k={},E,R,O,N=T.makeCalcdata(w,"x"),G=M.makeCalcdata(w,"y"),U=t(w,T,"x",N),Y=t(w,M,"y",G);w._x=U,w._y=Y,w.xperiodalignment&&(w._origX=N),w.yperiodalignment&&(w._origY=G);var z=new Array(C);for(E=0;E<L;E++)R=U[E],O=Y[E],z[E*2]=R===p?NaN:R,z[E*2+1]=O===p?NaN:O;if(T.type==="log")for(E=0;E<C;E+=2)z[E]=T.c2l(z[E]);if(M.type==="log")for(E=1;E<C;E+=2)z[E]=M.c2l(z[E]);if(I&&T.type!=="log"&&M.type!=="log")k.tree=r(z);else{var B=k.ids=new Array(L);for(E=0;E<L;E++)B[E]=E}h(x,w);var H=b(x,P,w,z,U,Y),V=s(x,P);l(g,w);var Z;return I?H.marker&&(Z=2*(H.marker.sizeAvg||Math.max(H.marker.size,3))):Z=n(w,L),o(x,w,T,M,U,Y,Z),H.errorX&&m(w,T,H.errorX),H.errorY&&m(w,M,H.errorY),H.fill&&!V.fill2d&&(V.fill2d=!0),H.marker&&!V.scatter2d&&(V.scatter2d=!0),H.line&&!V.line2d&&(V.line2d=!0),(H.errorX||H.errorY)&&!V.error2d&&(V.error2d=!0),H.text&&!V.glText&&(V.glText=!0),H.marker&&(H.marker.snap=L),V.lineOptions.push(H.line),V.errorXOptions.push(H.errorX),V.errorYOptions.push(H.errorY),V.fillOptions.push(H.fill),V.markerOptions.push(H.marker),V.markerSelectedOptions.push(H.markerSel),V.markerUnselectedOptions.push(H.markerUnsel),V.textOptions.push(H.text),V.textSelectedOptions.push(H.textSel),V.textUnselectedOptions.push(H.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),k._scene=V,k.index=V.count,k.x=U,k.y=Y,k.positions=z,V.count++,[{x:!1,y:!1,t:k,trace:w}]};function m(y,x,w){var g=y._extremes[x._id],T=c(x,w._bnds,{padded:!0});g.min=g.min.concat(T.min),g.max=g.max.concat(T.max)}function b(y,x,w,g,T,M){var P=i.style(y,w);if(P.marker&&(P.marker.positions=g),P.line&&g.length>1&&a.extendFlat(P.line,i.linePositions(y,w,g)),P.errorX||P.errorY){var L=i.errorBarPositions(y,w,g,T,M);P.errorX&&a.extendFlat(P.errorX,L.x),P.errorY&&a.extendFlat(P.errorY,L.y)}return P.text&&(a.extendFlat(P.text,{positions:g},i.textPosition(y,w,P.text,P.marker)),a.extendFlat(P.textSel,{positions:g},i.textPosition(y,w,P.text,P.markerSel)),a.extendFlat(P.textUnsel,{positions:g},i.textPosition(y,w,P.text,P.markerUnsel))),P}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"./constants":1241,"./convert":1242,"./scene_update":1250,"@plotly/point-cluster":57}],1241:[function(e,d,S){var r=20;d.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:r,SYMBOL_STROKE:r/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1242:[function(e,d,S){var r=e("fast-isnumeric"),a=e("svg-path-sdf"),u=e("color-normalize"),c=e("../../registry"),t=e("../../lib"),f=e("../../components/drawing"),n=e("../../plots/cartesian/axis_ids"),o=e("../../lib/gl_format_color").formatColor,l=e("../scatter/subtypes"),h=e("../scatter/make_bubble_size_func"),i=e("./helpers"),s=e("./constants"),p=e("../../constants/interactions").DESELECTDIM,v={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},m=e("../../components/fx/helpers").appendArrayPointValue;function b(N,G){var U,Y={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(G.visible!==!0)return Y;if(l.hasText(G)&&(Y.text=y(N,G),Y.textSel=g(N,G,G.selected),Y.textUnsel=g(N,G,G.unselected)),l.hasMarkers(G)&&(Y.marker=x(G),Y.markerSel=w(G,G.selected),Y.markerUnsel=w(G,G.unselected),!G.unselected&&t.isArrayOrTypedArray(G.marker.opacity))){var z=G.marker.opacity;for(Y.markerUnsel.opacity=new Array(z.length),U=0;U<z.length;U++)Y.markerUnsel.opacity[U]=p*z[U]}if(l.hasLines(G)){Y.line={overlay:!0,thickness:G.line.width,color:G.line.color,opacity:G.opacity};var B=(s.DASHES[G.line.dash]||[1]).slice();for(U=0;U<B.length;++U)B[U]*=G.line.width;Y.line.dashes=B}return G.error_x&&G.error_x.visible&&(Y.errorX=T(G,G.error_x)),G.error_y&&G.error_y.visible&&(Y.errorY=T(G,G.error_y)),!!G.fill&&G.fill!=="none"&&(Y.fill={closed:!0,fill:G.fillcolor,thickness:0}),Y}function y(N,G){var U=N._fullLayout,Y=G._length,z=G.textfont,B=G.textposition,H=Array.isArray(B)?B:[B],V=z.color,Z=z.size,q=z.family,J={},ne,ve=G.texttemplate;if(ve){J.text=[];var $=U._d3locale,j=Array.isArray(ve),ae=j?Math.min(ve.length,Y):Y,ie=j?function(de){return ve[de]}:function(){return ve};for(ne=0;ne<ae;ne++){var te={i:ne},re=G._module.formatLabels(te,G,U),ce={};m(ce,G,ne);var pe=G._meta||{};J.text.push(t.texttemplateString(ie(ne),re,$,ce,te,pe))}}else Array.isArray(G.text)&&G.text.length<Y?J.text=G.text.slice():J.text=G.text;if(Array.isArray(J.text))for(ne=J.text.length;ne<Y;ne++)J.text[ne]="";for(J.opacity=G.opacity,J.font={},J.align=[],J.baseline=[],ne=0;ne<H.length;ne++){var fe=H[ne].split(/\s+/);switch(fe[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(fe[1])}switch(fe[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(fe[0])}}if(Array.isArray(V))for(J.color=new Array(Y),ne=0;ne<Y;ne++)J.color[ne]=V[ne];else J.color=V;if(t.isArrayOrTypedArray(Z)||Array.isArray(q))for(J.font=new Array(Y),ne=0;ne<Y;ne++){var se=J.font[ne]={};se.size=t.isTypedArray(Z)?Z[ne]:Array.isArray(Z)?r(Z[ne])?Z[ne]:0:Z,se.family=Array.isArray(q)?q[ne]:q}else J.font={size:Z,family:q};return J}function x(N){var G=N._length,U=N.marker,Y={},z,B=t.isArrayOrTypedArray(U.symbol),H=t.isArrayOrTypedArray(U.color),V=t.isArrayOrTypedArray(U.line.color),Z=t.isArrayOrTypedArray(U.opacity),q=t.isArrayOrTypedArray(U.size),J=t.isArrayOrTypedArray(U.line.width),ne;if(B||(ne=i.isOpenSymbol(U.symbol)),B||H||V||Z){Y.colors=new Array(G),Y.borderColors=new Array(G);var ve=o(U,U.opacity,G),$=o(U.line,U.opacity,G);if(!Array.isArray($[0])){var j=$;for($=Array(G),z=0;z<G;z++)$[z]=j}if(!Array.isArray(ve[0])){var ae=ve;for(ve=Array(G),z=0;z<G;z++)ve[z]=ae}for(Y.colors=ve,Y.borderColors=$,z=0;z<G;z++){if(B){var ie=U.symbol[z];ne=i.isOpenSymbol(ie)}ne&&($[z]=ve[z].slice(),ve[z]=ve[z].slice(),ve[z][3]=0)}Y.opacity=N.opacity}else ne?(Y.color=u(U.color,"uint8"),Y.color[3]=0,Y.borderColor=u(U.color,"uint8")):(Y.color=u(U.color,"uint8"),Y.borderColor=u(U.line.color,"uint8")),Y.opacity=N.opacity*U.opacity;if(B)for(Y.markers=new Array(G),z=0;z<G;z++)Y.markers[z]=k(U.symbol[z]);else Y.marker=k(U.symbol);var te=h(N),re;if(q||J){var ce=Y.sizes=new Array(G),pe=Y.borderSizes=new Array(G),fe=0,se;if(q){for(z=0;z<G;z++)ce[z]=te(U.size[z]),fe+=ce[z];se=fe/G}else for(re=te(U.size),z=0;z<G;z++)ce[z]=re;if(J)for(z=0;z<G;z++)pe[z]=U.line.width[z]/2;else for(re=U.line.width/2,z=0;z<G;z++)pe[z]=re;Y.sizeAvg=se}else Y.size=te(U&&U.size||10),Y.borderSizes=te(U.line.width);return Y}function w(N,G){var U=N.marker,Y={};return G&&(G.marker&&G.marker.symbol?Y=x(t.extendFlat({},U,G.marker)):G.marker&&(G.marker.size&&(Y.size=G.marker.size/2),G.marker.color&&(Y.colors=G.marker.color),G.marker.opacity!==void 0&&(Y.opacity=G.marker.opacity))),Y}function g(N,G,U){var Y={};if(!U)return Y;if(U.textfont){var z={opacity:1,text:G.text,texttemplate:G.texttemplate,textposition:G.textposition,textfont:t.extendFlat({},G.textfont)};U.textfont&&t.extendFlat(z.textfont,U.textfont),Y=y(N,z)}return Y}function T(N,G){var U={capSize:G.width*2,lineWidth:G.thickness,color:G.color};return G.copy_ystyle&&(U=N.error_y),U}var M=s.SYMBOL_SDF_SIZE,P=s.SYMBOL_SIZE,L=s.SYMBOL_STROKE,I={},C=f.symbolFuncs[0](P*.05);function k(N){if(N==="circle")return null;var G,U,Y=f.symbolNumber(N),z=f.symbolFuncs[Y%100],B=!!f.symbolNoDot[Y%100],H=!!f.symbolNoFill[Y%100],V=i.isDotSymbol(N);return I[N]?I[N]:(V&&!B?G=z(P*1.1)+C:G=z(P),U=a(G,{w:M,h:M,viewBox:[-P,-P,P,P],stroke:H?L:-L}),I[N]=U,U||null)}function E(N,G,U){var Y=U.length,z=Y/2,B,H;if(l.hasLines(G)&&z)if(G.line.shape==="hv"){for(B=[],H=0;H<z-1;H++)isNaN(U[H*2])||isNaN(U[H*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(U[H*2],U[H*2+1]),!isNaN(U[H*2+2])&&!isNaN(U[H*2+3])?B.push(U[H*2+2],U[H*2+1]):B.push(NaN,NaN));B.push(U[Y-2],U[Y-1])}else if(G.line.shape==="hvh"){for(B=[],H=0;H<z-1;H++)if(isNaN(U[H*2])||isNaN(U[H*2+1])||isNaN(U[H*2+2])||isNaN(U[H*2+3]))!isNaN(U[H*2])&&!isNaN(U[H*2+1])?B.push(U[H*2],U[H*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var V=(U[H*2]+U[H*2+2])/2;B.push(U[H*2],U[H*2+1],V,U[H*2+1],V,U[H*2+3])}B.push(U[Y-2],U[Y-1])}else if(G.line.shape==="vhv"){for(B=[],H=0;H<z-1;H++)if(isNaN(U[H*2])||isNaN(U[H*2+1])||isNaN(U[H*2+2])||isNaN(U[H*2+3]))!isNaN(U[H*2])&&!isNaN(U[H*2+1])?B.push(U[H*2],U[H*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var Z=(U[H*2+1]+U[H*2+3])/2;B.push(U[H*2],U[H*2+1],U[H*2],Z,U[H*2+2],Z)}B.push(U[Y-2],U[Y-1])}else if(G.line.shape==="vh"){for(B=[],H=0;H<z-1;H++)isNaN(U[H*2])||isNaN(U[H*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(U[H*2],U[H*2+1]),!isNaN(U[H*2+2])&&!isNaN(U[H*2+3])?B.push(U[H*2],U[H*2+3]):B.push(NaN,NaN));B.push(U[Y-2],U[Y-1])}else B=U;var q=!1;for(H=0;H<B.length;H++)if(isNaN(B[H])){q=!0;break}var J=q||B.length>s.TOO_MANY_POINTS||l.hasMarkers(G)?"rect":"round";if(q&&G.connectgaps){var ne=B[0],ve=B[1];for(H=0;H<B.length;H+=2)isNaN(B[H])||isNaN(B[H+1])?(B[H]=ne,B[H+1]=ve):(ne=B[H],ve=B[H+1])}return{join:J,positions:B}}function R(N,G,U,Y,z){var B=c.getComponentMethod("errorbars","makeComputeError"),H=n.getFromId(N,G.xaxis),V=n.getFromId(N,G.yaxis),Z=U.length/2,q={};function J(ne,ve){var $=ve._id.charAt(0),j=G["error_"+$];if(j&&j.visible&&(ve.type==="linear"||ve.type==="log")){for(var ae=B(j),ie={x:0,y:1}[$],te={x:[0,1,2,3],y:[2,3,0,1]}[$],re=new Float64Array(4*Z),ce=1/0,pe=-1/0,fe=0,se=0;fe<Z;fe++,se+=4){var de=ne[fe];if(r(de)){var be=U[fe*2+ie],xe=ae(de,fe),ke=xe[0],Re=xe[1];if(r(ke)&&r(Re)){var Ke=de-ke,ze=de+Re;re[se+te[0]]=be-ve.c2l(Ke),re[se+te[1]]=ve.c2l(ze)-be,re[se+te[2]]=0,re[se+te[3]]=0,ce=Math.min(ce,de-ke),pe=Math.max(pe,de+Re)}}}q[$]={positions:U,errors:re,_bnds:[ce,pe]}}}return J(Y,H),J(z,V),q}function O(N,G,U,Y){var z=G._length,B={},H;if(l.hasMarkers(G)){var V=U.font,Z=U.align,q=U.baseline;for(B.offset=new Array(z),H=0;H<z;H++){var J=Y.sizes?Y.sizes[H]:Y.size,ne=Array.isArray(V)?V[H].size:V.size,ve=Array.isArray(Z)?Z.length>1?Z[H]:Z[0]:Z,$=Array.isArray(q)?q.length>1?q[H]:q[0]:q,j=v[ve],ae=v[$],ie=J?J/.8+1:0,te=-ae*ie-ae*.5;B.offset[H]=[j*ie/ne,te/ne]}}return B}d.exports={style:b,markerStyle:x,markerSelection:w,linePositions:E,errorBarPositions:R,textPosition:O}},{"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/interactions":752,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/cartesian/axis_ids":831,"../../registry":911,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"./constants":1241,"./helpers":1246,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":574}],1243:[function(e,d,S){var r=e("../../lib"),a=e("../../registry"),u=e("./helpers"),c=e("./attributes"),t=e("../scatter/constants"),f=e("../scatter/subtypes"),n=e("../scatter/xy_defaults"),o=e("../scatter/period_defaults"),l=e("../scatter/marker_defaults"),h=e("../scatter/line_defaults"),i=e("../scatter/fillcolor_defaults"),s=e("../scatter/text_defaults");d.exports=function(v,m,b,y){function x(C,k){return r.coerce(v,m,c,C,k)}var w=v.marker?u.isOpenSymbol(v.marker.symbol):!1,g=f.isBubble(v),T=n(v,m,y,x);if(!T){m.visible=!1;return}o(v,m,y,x);var M=T<t.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",M),f.hasLines(m)&&(x("connectgaps"),h(v,m,b,y,x),x("line.shape")),f.hasMarkers(m)&&(l(v,m,b,y,x),x("marker.line.width",w||g?1:0)),f.hasText(m)&&(x("texttemplate"),s(v,m,y,x));var P=(m.line||{}).color,L=(m.marker||{}).color;x("fill"),m.fill!=="none"&&i(v,m,b,x);var I=a.getComponentMethod("errorbars","supplyDefaults");I(v,m,P||L||b,{axis:"y"}),I(v,m,P||L||b,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(m,x)}},{"../../lib":778,"../../registry":911,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/period_defaults":1207,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatter/xy_defaults":1214,"./attributes":1239,"./helpers":1246}],1244:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../constants/interactions").DESELECTDIM;function c(t){var f=t[0],n=f.trace,o=f.t,l=o._scene,h=o.index,i=l.selectBatch[h],s=l.unselectBatch[h],p=l.textOptions[h],v=l.textSelectedOptions[h]||{},m=l.textUnselectedOptions[h]||{},b=r.extendFlat({},p),y,x;if(i.length||s.length){var w=v.color,g=m.color,T=p.color,M=Array.isArray(T);for(b.color=new Array(n._length),y=0;y<i.length;y++)x=i[y],b.color[x]=w||(M?T[x]:T);for(y=0;y<s.length;y++){x=s[y];var P=M?T[x]:T;b.color[x]=g||(w?P:a.addOpacity(P,u))}}l.glText[h].update(b)}d.exports={styleTextSelection:c}},{"../../components/color":643,"../../constants/interactions":752,"../../lib":778}],1245:[function(e,d,S){var r=e("../scatter/format_labels");d.exports=function(u,c,t){var f=u.i;return"x"in u||(u.x=c._x[f]),"y"in u||(u.y=c._y[f]),r(u,c,t)}},{"../scatter/format_labels":1196}],1246:[function(e,d,S){var r=e("./constants");S.isOpenSymbol=function(a){return typeof a=="string"?r.OPEN_RE.test(a):a%200>100},S.isDotSymbol=function(a){return typeof a=="string"?r.DOT_RE.test(a):a>200}},{"./constants":1241}],1247:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../scatter/get_trace_color");function c(f,n,o,l){var h=f.cd,i=h[0].t,s=h[0].trace,p=f.xa,v=f.ya,m=i.x,b=i.y,y=p.c2p(n),x=v.c2p(o),w=f.distance,g;if(i.tree){var T=p.p2c(y-w),M=p.p2c(y+w),P=v.p2c(x-w),L=v.p2c(x+w);l==="x"?g=i.tree.range(Math.min(T,M),Math.min(v._rl[0],v._rl[1]),Math.max(T,M),Math.max(v._rl[0],v._rl[1])):g=i.tree.range(Math.min(T,M),Math.min(P,L),Math.max(T,M),Math.max(P,L))}else g=i.ids;var I,C,k,E,R,O,N,G,U=w;if(l==="x")for(E=0;E<g.length;E++)C=m[g[E]],R=Math.abs(p.c2p(C)-y),R<U&&(U=R,O=v.c2p(b[g[E]])-x,G=Math.sqrt(R*R+O*O),I=g[E]);else for(E=g.length-1;E>-1;E--)C=m[g[E]],k=b[g[E]],R=p.c2p(C)-y,O=v.c2p(k)-x,N=Math.sqrt(R*R+O*O),N<U&&(U=G=N,I=g[E]);return f.index=I,f.distance=U,f.dxy=G,I===void 0?[f]:[t(f,m,b,s)]}function t(f,n,o,l){var h=f.xa,i=f.ya,s=f.distance,p=f.dxy,v=f.index,m={pointNumber:v,x:n[v],y:o[v]};m.tx=Array.isArray(l.text)?l.text[v]:l.text,m.htx=Array.isArray(l.hovertext)?l.hovertext[v]:l.hovertext,m.data=Array.isArray(l.customdata)?l.customdata[v]:l.customdata,m.tp=Array.isArray(l.textposition)?l.textposition[v]:l.textposition;var b=l.textfont;b&&(m.ts=a.isArrayOrTypedArray(b.size)?b.size[v]:b.size,m.tc=Array.isArray(b.color)?b.color[v]:b.color,m.tf=Array.isArray(b.family)?b.family[v]:b.family);var y=l.marker;y&&(m.ms=a.isArrayOrTypedArray(y.size)?y.size[v]:y.size,m.mo=a.isArrayOrTypedArray(y.opacity)?y.opacity[v]:y.opacity,m.mx=a.isArrayOrTypedArray(y.symbol)?y.symbol[v]:y.symbol,m.mc=a.isArrayOrTypedArray(y.color)?y.color[v]:y.color);var x=y&&y.line;x&&(m.mlc=Array.isArray(x.color)?x.color[v]:x.color,m.mlw=a.isArrayOrTypedArray(x.width)?x.width[v]:x.width);var w=y&&y.gradient;w&&w.type!=="none"&&(m.mgt=Array.isArray(w.type)?w.type[v]:w.type,m.mgc=Array.isArray(w.color)?w.color[v]:w.color);var g=h.c2p(m.x,!0),T=i.c2p(m.y,!0),M=m.mrc||1,P=l.hoverlabel;P&&(m.hbg=Array.isArray(P.bgcolor)?P.bgcolor[v]:P.bgcolor,m.hbc=Array.isArray(P.bordercolor)?P.bordercolor[v]:P.bordercolor,m.hts=a.isArrayOrTypedArray(P.font.size)?P.font.size[v]:P.font.size,m.htc=Array.isArray(P.font.color)?P.font.color[v]:P.font.color,m.htf=Array.isArray(P.font.family)?P.font.family[v]:P.font.family,m.hnl=a.isArrayOrTypedArray(P.namelength)?P.namelength[v]:P.namelength);var L=l.hoverinfo;L&&(m.hi=Array.isArray(L)?L[v]:L);var I=l.hovertemplate;I&&(m.ht=Array.isArray(I)?I[v]:I);var C={};C[f.index]=m;var k=l._origX,E=l._origY,R=a.extendFlat({},f,{color:u(l,m),x0:g-M,x1:g+M,xLabelVal:k?k[v]:m.x,y0:T-M,y1:T+M,yLabelVal:E?E[v]:m.y,cd:C,distance:s,spikeDistance:p,hovertemplate:m.ht});return m.htx?R.text=m.htx:m.tx?R.text=m.tx:l.text&&(R.text=l.text),a.fillText(m,l,R),r.getComponentMethod("errorbars","hoverInfo")(m,l,R),R}d.exports={hoverPoints:c,calcHover:t}},{"../../lib":778,"../../registry":911,"../scatter/get_trace_color":1197}],1248:[function(e,d,S){var r=e("./hover");d.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:r.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":841,"../scatter/cross_trace_defaults":1193,"../scatter/marker_colorbar":1205,"./attributes":1239,"./calc":1240,"./defaults":1243,"./format_labels":1245,"./hover":1247,"./plot":1249,"./select":1251}],1249:[function(e,d,S){var r=e("regl-scatter2d"),a=e("regl-line2d"),u=e("regl-error2d"),c=e("gl-text"),t=e("../../lib"),f=e("../../components/dragelement/helpers").selectMode,n=e("../../lib/prepare_regl"),o=e("../scatter/subtypes"),l=e("../scatter/link_traces"),h=e("./edit_style").styleTextSelection;function i(s,p,v){var m=s._size,b=s.width,y=s.height;return[m.l+p.domain[0]*m.w,m.b+v.domain[0]*m.h,b-m.r-(1-p.domain[1])*m.w,y-m.t-(1-v.domain[1])*m.h]}d.exports=function(p,v,m){if(!!m.length){var b=p._fullLayout,y=v._scene,x=v.xaxis,w=v.yaxis,g,T;if(!!y){var M=n(p,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!M){y.init();return}var P=y.count,L=b._glcanvas.data()[0].regl;if(l(p,v,m),y.dirty){if(y.error2d===!0&&(y.error2d=u(L)),y.line2d===!0&&(y.line2d=a(L)),y.scatter2d===!0&&(y.scatter2d=r(L,{constPointSize:!0})),y.fill2d===!0&&(y.fill2d=a(L)),y.glText===!0)for(y.glText=new Array(P),g=0;g<P;g++)y.glText[g]=new c(L);if(y.glText){if(P>y.glText.length){var I=P-y.glText.length;for(g=0;g<I;g++)y.glText.push(new c(L))}else if(P<y.glText.length){var C=y.glText.length-P,k=y.glText.splice(P,C);k.forEach(function(ie){ie.destroy()})}for(g=0;g<P;g++)y.glText[g].update(y.textOptions[g])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(ie){if(ie&&ie.positions){for(var te=ie.positions,re=0;re<te.length&&(isNaN(te[re])||isNaN(te[re+1]));)re+=2;for(var ce=te.length-2;ce>re&&(isNaN(te[ce])||isNaN(te[ce+1]));)ce-=2;ie.positions=te.slice(re,ce+2)}return ie}),y.line2d.update(y.lineOptions)),y.error2d){var E=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(E)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=t.repeat(null,P),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(ie,te){var re=m[te];if(!(!ie||!re||!re[0]||!re[0].trace)){var ce=re[0],pe=ce.trace,fe=ce.t,se=y.lineOptions[te],de,be,xe=[];pe._ownfill&&xe.push(te),pe._nexttrace&&xe.push(te+1),xe.length&&(y.fillOrder[te]=xe);var ke=[],Re=se&&se.positions||fe.positions,Ke,ze;if(pe.fill==="tozeroy"){for(Ke=0;Ke<Re.length&&isNaN(Re[Ke+1]);)Ke+=2;for(ze=Re.length-2;ze>Ke&&isNaN(Re[ze+1]);)ze-=2;Re[Ke+1]!==0&&(ke=[Re[Ke],0]),ke=ke.concat(Re.slice(Ke,ze+2)),Re[ze+1]!==0&&(ke=ke.concat([Re[ze],0]))}else if(pe.fill==="tozerox"){for(Ke=0;Ke<Re.length&&isNaN(Re[Ke]);)Ke+=2;for(ze=Re.length-2;ze>Ke&&isNaN(Re[ze]);)ze-=2;Re[Ke]!==0&&(ke=[0,Re[Ke+1]]),ke=ke.concat(Re.slice(Ke,ze+2)),Re[ze]!==0&&(ke=ke.concat([0,Re[ze+1]]))}else if(pe.fill==="toself"||pe.fill==="tonext"){for(ke=[],de=0,be=0;be<Re.length;be+=2)(isNaN(Re[be])||isNaN(Re[be+1]))&&(ke=ke.concat(Re.slice(de,be)),ke.push(Re[de],Re[de+1]),de=be+2);ke=ke.concat(Re.slice(de)),de&&ke.push(Re[de],Re[de+1])}else{var Je=pe._nexttrace;if(Je){var qe=y.lineOptions[te+1];if(qe){var Ee=qe.positions;if(pe.fill==="tonexty"){for(ke=Re.slice(),te=Math.floor(Ee.length/2);te--;){var Ae=Ee[te*2],Be=Ee[te*2+1];isNaN(Ae)||isNaN(Be)||ke.push(Ae,Be)}ie.fill=Je.fillcolor}}}}if(pe._prevtrace&&pe._prevtrace.fill==="tonext"){var $e=y.lineOptions[te-1].positions,xt=ke.length/2;de=xt;var bt=[de];for(be=0;be<$e.length;be+=2)(isNaN($e[be])||isNaN($e[be+1]))&&(bt.push(be/2+xt+1),de=be+2);ke=ke.concat($e),ie.hole=bt}return ie.fillmode=pe.fill,ie.opacity=pe.opacity,ie.positions=ke,ie}}),y.fill2d.update(y.fillOptions))}var R=b.dragmode,O=f(R),N=b.clickmode.indexOf("select")>-1;for(g=0;g<P;g++){var G=m[g][0],U=G.trace,Y=G.t,z=Y.index,B=U._length,H=Y.x,V=Y.y;if(U.selectedpoints||O||N){if(O||(O=!0),U.selectedpoints){var Z=y.selectBatch[z]=t.selIndices2selPoints(U),q={};for(T=0;T<Z.length;T++)q[Z[T]]=1;var J=[];for(T=0;T<B;T++)q[T]||J.push(T);y.unselectBatch[z]=J}var ne=Y.xpx=new Array(B),ve=Y.ypx=new Array(B);for(T=0;T<B;T++)ne[T]=x.c2p(H[T]),ve[T]=w.c2p(V[T])}else Y.xpx=Y.ypx=null}if(O){if(y.select2d||(y.select2d=r(b._glcanvas.data()[1].regl)),y.scatter2d){var $=new Array(P);for(g=0;g<P;g++)$[g]=y.selectBatch[g].length||y.unselectBatch[g].length?y.markerUnselectedOptions[g]:{};y.scatter2d.update($)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&m.forEach(function(ie){var te=((ie||[])[0]||{}).trace||{};o.hasText(te)&&h(ie)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var j={viewport:i(b,x,w),range:[(x._rl||x.range)[0],(w._rl||w.range)[0],(x._rl||x.range)[1],(w._rl||w.range)[1]]},ae=t.repeat(j,y.count);y.fill2d&&y.fill2d.update(ae),y.line2d&&y.line2d.update(ae),y.error2d&&y.error2d.update(ae.concat(ae)),y.scatter2d&&y.scatter2d.update(ae),y.select2d&&y.select2d.update(ae),y.glText&&y.glText.forEach(function(ie){ie.update(j)})}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../lib/prepare_regl":791,"../scatter/link_traces":1203,"../scatter/subtypes":1212,"./edit_style":1244,"gl-text":352,"regl-error2d":534,"regl-line2d":535,"regl-scatter2d":537}],1250:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){var t=c._scene,f={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return c._scene||(t=c._scene={},t.init=function(){r.extendFlat(t,n,f)},t.init(),t.update=function(l){var h=r.repeat(l,t.count);if(t.fill2d&&t.fill2d.update(h),t.scatter2d&&t.scatter2d.update(h),t.line2d&&t.line2d.update(h),t.error2d&&t.error2d.update(h.concat(h)),t.select2d&&t.select2d.update(h),t.glText)for(var i=0;i<t.count;i++)t.glText[i].update(l)},t.draw=function(){for(var l=t.count,h=t.fill2d,i=t.error2d,s=t.line2d,p=t.scatter2d,v=t.glText,m=t.select2d,b=t.selectBatch,y=t.unselectBatch,x=0;x<l;x++){if(h&&t.fillOrder[x]&&h.draw(t.fillOrder[x]),s&&t.lineOptions[x]&&s.draw(x),i&&(t.errorXOptions[x]&&i.draw(x),t.errorYOptions[x]&&i.draw(x+l)),p&&t.markerOptions[x])if(y[x].length){var w=r.repeat([],t.count);w[x]=y[x],p.draw(w)}else b[x].length||p.draw(x);v[x]&&t.textOptions[x]&&v[x].render()}m&&m.draw(b),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(l){l.destroy&&l.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,c._scene=null}),t.dirty||r.extendFlat(t,f),t}},{"../../lib":778}],1251:[function(e,d,S){var r=e("../scatter/subtypes"),a=e("./edit_style").styleTextSelection;d.exports=function(c,t){var f=c.cd,n=[],o=f[0].trace,l=f[0].t,h=o._length,i=l.x,s=l.y,p=l._scene,v=l.index;if(!p)return n;var m=r.hasText(o),b=r.hasMarkers(o),y=!b&&!m;if(o.visible!==!0||y)return n;var x=[],w=[];if(t!==!1&&!t.degenerate)for(var g=0;g<h;g++)t.contains([l.xpx[g],l.ypx[g]],!1,g,c)?(x.push(g),n.push({pointNumber:g,x:i[g],y:s[g]})):w.push(g);if(b){var T=p.scatter2d;if(!x.length&&!w.length){var M=new Array(p.count);M[v]=p.markerOptions[v],T.update.apply(T,M)}else if(!p.selectBatch[v].length&&!p.unselectBatch[v].length){var P=new Array(p.count);P[v]=p.markerUnselectedOptions[v],T.update.apply(T,P)}}return p.selectBatch[v]=x,p.unselectBatch[v]=w,m&&a(f),n}},{"../scatter/subtypes":1212,"./edit_style":1244}],1252:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../scattergeo/attributes"),c=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),f=e("../../plots/attributes"),n=e("../../components/colorscale/attributes"),o=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,h=u.line,i=u.marker;d.exports=l({lon:u.lon,lat:u.lat,mode:o({},c.mode,{dflt:"markers"}),text:o({},c.text,{}),texttemplate:a({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},c.hovertext,{}),line:{color:h.color,width:h.width},connectgaps:c.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:i.opacity,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode},n("marker")),fill:u.fill,fillcolor:c.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:c.selected.marker},unselected:{marker:c.unselected.marker},hoverinfo:o({},f.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:r()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/mapbox/layout_attributes":887,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergeo/attributes":1229}],1253:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../lib"),u=e("../../constants/numerical").BADNUM,c=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),f=e("../../components/drawing"),n=e("../scatter/make_bubble_size_func"),o=e("../scatter/subtypes"),l=e("../../plots/mapbox/convert_text_opts"),h=e("../../components/fx/helpers").appendArrayPointValue,i=e("../../lib/svg_text_utils").NEWLINES,s=e("../../lib/svg_text_utils").BR_TAG_ALL;d.exports=function(g,T){var M=T[0].trace,P=M.visible===!0&&M._length!==0,L=M.fill!=="none",I=o.hasLines(M),C=o.hasMarkers(M),k=o.hasText(M),E=C&&M.marker.symbol==="circle",R=C&&M.marker.symbol!=="circle",O=p(),N=p(),G=p(),U=p(),Y={fill:O,line:N,circle:G,symbol:U};if(!P)return Y;var z;if((L||I)&&(z=c.calcTraceToLineCoords(T)),L&&(O.geojson=c.makePolygon(z),O.layout.visibility="visible",a.extendFlat(O.paint,{"fill-color":M.fillcolor})),I&&(N.geojson=c.makeLine(z),N.layout.visibility="visible",a.extendFlat(N.paint,{"line-width":M.line.width,"line-color":M.line.color,"line-opacity":M.opacity})),E){var B=v(T);G.geojson=B.geojson,G.layout.visibility="visible",a.extendFlat(G.paint,{"circle-color":B.mcc,"circle-radius":B.mrc,"circle-opacity":B.mo})}if((R||k)&&(U.geojson=m(T,g),a.extendFlat(U.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),R&&(a.extendFlat(U.layout,{"icon-size":M.marker.size/10}),"angle"in M.marker&&M.marker.angle!=="auto"&&a.extendFlat(U.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),U.layout["icon-allow-overlap"]=M.marker.allowoverlap,a.extendFlat(U.paint,{"icon-opacity":M.opacity*M.marker.opacity,"icon-color":M.marker.color})),k)){var H=(M.marker||{}).size,V=l(M.textposition,H);a.extendFlat(U.layout,{"text-size":M.textfont.size,"text-anchor":V.anchor,"text-offset":V.offset}),a.extendFlat(U.paint,{"text-color":M.textfont.color,"text-opacity":M.opacity})}return Y};function p(){return{geojson:c.makeBlank(),layout:{visibility:"none"},paint:{}}}function v(w){var g=w[0].trace,T=g.marker,M=g.selectedpoints,P=a.isArrayOrTypedArray(T.color),L=a.isArrayOrTypedArray(T.size),I=a.isArrayOrTypedArray(T.opacity),C;function k(V){return g.opacity*V}function E(V){return V/2}var R;P&&(t.hasColorscale(g,"marker")?R=t.makeColorScaleFuncFromTrace(T):R=a.identity);var O;L&&(O=n(g));var N;I&&(N=function(V){var Z=r(V)?+a.constrain(V,0,1):0;return k(Z)});var G=[];for(C=0;C<w.length;C++){var U=w[C],Y=U.lonlat;if(!x(Y)){var z={};R&&(z.mcc=U.mcc=R(U.mc)),O&&(z.mrc=U.mrc=O(U.ms)),N&&(z.mo=N(U.mo)),M&&(z.selected=U.selected||0),G.push({type:"Feature",geometry:{type:"Point",coordinates:Y},properties:z})}}var B;if(M)for(B=f.makeSelectedPointStyleFns(g),C=0;C<G.length;C++){var H=G[C].properties;B.selectedOpacityFn&&(H.mo=k(B.selectedOpacityFn(H))),B.selectedColorFn&&(H.mcc=B.selectedColorFn(H)),B.selectedSizeFn&&(H.mrc=B.selectedSizeFn(H))}return{geojson:{type:"FeatureCollection",features:G},mcc:P||B&&B.selectedColorFn?{type:"identity",property:"mcc"}:T.color,mrc:L||B&&B.selectedSizeFn?{type:"identity",property:"mrc"}:E(T.size),mo:I||B&&B.selectedOpacityFn?{type:"identity",property:"mo"}:k(T.opacity)}}function m(w,g){for(var T=g._fullLayout,M=w[0].trace,P=M.marker||{},L=P.symbol,I=P.angle,C=L!=="circle"?b(L):y,k=I!=="auto"?b(I,!0):y,E=o.hasText(M)?b(M.text):y,R=[],O=0;O<w.length;O++){var N=w[O];if(!x(N.lonlat)){var G=M.texttemplate,U;if(G){var Y=Array.isArray(G)?G[O]||"":G,z=M._module.formatLabels(N,M,T),B={};h(B,M,N.i);var H=M._meta||{};U=a.texttemplateString(Y,z,T._d3locale,B,N,H)}else U=E(O);U&&(U=U.replace(i,"").replace(s,`
`)),R.push({type:"Feature",geometry:{type:"Point",coordinates:N.lonlat},properties:{symbol:C(O),angle:k(O),text:U}})}}return{type:"FeatureCollection",features:R}}function b(w,g){return a.isArrayOrTypedArray(w)?g?function(T){return r(w[T])?+w[T]:0}:function(T){return w[T]}:w?function(){return w}:y}function y(){return""}function x(w){return w[0]===u}},{"../../components/colorscale":655,"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"../../lib/svg_text_utils":803,"../../plots/mapbox/convert_text_opts":884,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"fast-isnumeric":241}],1254:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),f=e("../scatter/fillcolor_defaults"),n=e("./attributes");d.exports=function(h,i,s,p){function v(y,x){return r.coerce(h,i,n,y,x)}var m=o(h,i,v);if(!m){i.visible=!1;return}if(v("text"),v("texttemplate"),v("hovertext"),v("hovertemplate"),v("mode"),v("below"),a.hasLines(i)&&(c(h,i,s,p,v,{noDash:!0}),v("connectgaps")),a.hasMarkers(i)){u(h,i,s,p,v,{noLine:!0}),v("marker.allowoverlap"),v("marker.angle");var b=i.marker;b.symbol!=="circle"&&(r.isArrayOrTypedArray(b.size)&&(b.size=b.size[0]),r.isArrayOrTypedArray(b.color)&&(b.color=b.color[0]))}a.hasText(i)&&t(h,i,p,v,{noSelect:!0}),v("fill"),i.fill!=="none"&&f(h,i,s,v),r.coerceSelectionMarkerOpacity(i,v)};function o(l,h,i){var s=i("lon")||[],p=i("lat")||[],v=Math.min(s.length,p.length);return h._length=v,v}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1252}],1255:[function(e,d,S){d.exports=function(a,u){return a.lon=u.lon,a.lat=u.lat,a}},{}],1256:[function(e,d,S){var r=e("../../plots/cartesian/axes");d.exports=function(u,c,t){var f={},n=t[c.subplot]._subplot,o=n.mockAxis,l=u.lonlat;return f.lonLabel=r.tickText(o,o.c2l(l[0]),!0).text,f.latLabel=r.tickText(o,o.c2l(l[1]),!0).text,f}},{"../../plots/cartesian/axes":828}],1257:[function(e,d,S){var r=e("../../components/fx"),a=e("../../lib"),u=e("../scatter/get_trace_color"),c=a.fillText,t=e("../../constants/numerical").BADNUM;d.exports=function(o,l,h){var i=o.cd,s=i[0].trace,p=o.xa,v=o.ya,m=o.subplot,b=l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360),y=b*360,x=l-y;function w(E){var R=E.lonlat;if(R[0]===t)return 1/0;var O=a.modHalf(R[0],360),N=R[1],G=m.project([O,N]),U=G.x-p.c2p([x,N]),Y=G.y-v.c2p([O,h]),z=Math.max(3,E.mrc||0);return Math.max(Math.sqrt(U*U+Y*Y)-z,1-3/z)}if(r.getClosest(i,w,o),o.index!==!1){var g=i[o.index],T=g.lonlat,M=[a.modHalf(T[0],360)+y,T[1]],P=p.c2p(M),L=v.c2p(M),I=g.mrc||1;o.x0=P-I,o.x1=P+I,o.y0=L-I,o.y1=L+I;var C={};C[s.subplot]={_subplot:m};var k=s._module.formatLabels(g,s,C);return o.lonLabel=k.lonLabel,o.latLabel=k.latLabel,o.color=u(s,g),o.extraText=f(s,g,i[0].t.labels),o.hovertemplate=s.hovertemplate,[o]}};function f(n,o,l){if(n.hovertemplate)return;var h=o.hi||n.hoverinfo,i=h.split("+"),s=i.indexOf("all")!==-1,p=i.indexOf("lon")!==-1,v=i.indexOf("lat")!==-1,m=o.lonlat,b=[];function y(x){return x+"\xB0"}return s||p&&v?b.push("("+y(m[0])+", "+y(m[1])+")"):p?b.push(l.lon+y(m[0])):v&&b.push(l.lat+y(m[1])),(s||i.indexOf("text")!==-1)&&c(o,n,b),b.join("<br>")}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197}],1258:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(r,a){if(a){var u=a[0].trace;u._glTrace.update(a)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":885,"../scatter/marker_colorbar":1205,"../scattergeo/calc":1230,"./attributes":1252,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259,"./select":1260}],1259:[function(e,d,S){var r=e("./convert"),a=e("../../plots/mapbox/constants").traceLayerPrefix,u=["fill","line","circle","symbol"];function c(f,n){this.type="scattermapbox",this.subplot=f,this.uid=n,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol"},this.layerIds={fill:a+n+"-fill",line:a+n+"-line",circle:a+n+"-circle",symbol:a+n+"-symbol"},this.below=null}var t=c.prototype;t.addSource=function(f,n){this.subplot.map.addSource(this.sourceIds[f],{type:"geojson",data:n.geojson})},t.setSourceData=function(f,n){this.subplot.map.getSource(this.sourceIds[f]).setData(n.geojson)},t.addLayer=function(f,n,o){this.subplot.addLayer({type:f,id:this.layerIds[f],source:this.sourceIds[f],layout:n.layout,paint:n.paint},o)},t.update=function(n){var o=this.subplot,l=o.map,h=r(o.gd,n),i=o.belowLookup["trace-"+this.uid],s,p,v;if(i!==this.below){for(s=u.length-1;s>=0;s--)p=u[s],l.removeLayer(this.layerIds[p]);for(s=0;s<u.length;s++)p=u[s],v=h[p],this.addLayer(p,v,i);this.below=i}for(s=0;s<u.length;s++)p=u[s],v=h[p],o.setOptions(this.layerIds[p],"setLayoutProperty",v.layout),v.layout.visibility==="visible"&&(this.setSourceData(p,v),o.setOptions(this.layerIds[p],"setPaintProperty",v.paint));n[0].trace._glTrace=this},t.dispose=function(){for(var n=this.subplot.map,o=u.length-1;o>=0;o--){var l=u[o];n.removeLayer(this.layerIds[l]),n.removeSource(this.sourceIds[l])}},d.exports=function(n,o){for(var l=o[0].trace,h=new c(n,l.uid),i=r(n.gd,o),s=h.below=n.belowLookup["trace-"+l.uid],p=0;p<u.length;p++){var v=u[p],m=i[v];h.addSource(v,m),h.addLayer(v,m,s)}return o[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":883,"./convert":1253}],1260:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../../constants/numerical").BADNUM;d.exports=function(t,f){var n=t.cd,o=t.xaxis,l=t.yaxis,h=[],i=n[0].trace,s;if(!a.hasMarkers(i))return[];if(f===!1)for(s=0;s<n.length;s++)n[s].selected=0;else for(s=0;s<n.length;s++){var p=n[s],v=p.lonlat;if(v[0]!==u){var m=[r.modHalf(v[0],360),v[1]],b=[o.c2p(m),l.c2p(m)];f.contains(b,null,s,t)?(h.push({pointNumber:s,lon:v[0],lat:v[1]}),p.selected=1):p.selected=0}}return h}},{"../../constants/numerical":753,"../../lib":778,"../scatter/subtypes":1212}],1261:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../../lib/extend").extendFlat,c=e("../scatter/attributes"),t=e("../../plots/attributes"),f=c.line;d.exports={mode:c.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:c.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:c.hovertext,line:{color:f.color,width:f.width,dash:f.dash,shape:u({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:c.connectgaps,marker:c.marker,cliponaxis:u({},c.cliponaxis,{dflt:!1}),textposition:c.textposition,textfont:c.textfont,fill:u({},c.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:c.fillcolor,hoverinfo:u({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:c.hoveron,hovertemplate:r(),selected:c.selected,unselected:c.unselected}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1262:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../../constants/numerical").BADNUM,u=e("../../plots/cartesian/axes"),c=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),f=e("../scatter/calc_selection"),n=e("../scatter/calc").calcMarkerSize;d.exports=function(l,h){for(var i=l._fullLayout,s=h.subplot,p=i[s].radialaxis,v=i[s].angularaxis,m=p.makeCalcdata(h,"r"),b=v.makeCalcdata(h,"theta"),y=h._length,x=new Array(y),w=0;w<y;w++){var g=m[w],T=b[w],M=x[w]={};r(g)&&r(T)?(M.r=g,M.theta=T):M.r=a}var P=n(h,y);return h._extremes.x=u.findExtremes(p,m,{ppad:P}),c(l,h),t(x,h),f(x,h),x}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1263:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatter/marker_defaults"),c=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),f=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),o=e("../scatter/constants").PTS_LINESONLY,l=e("./attributes");function h(s,p,v,m){function b(w,g){return r.coerce(s,p,l,w,g)}var y=i(s,p,m,b);if(!y){p.visible=!1;return}b("thetaunit"),b("mode",y<o?"lines+markers":"lines"),b("text"),b("hovertext"),p.hoveron!=="fills"&&b("hovertemplate"),a.hasLines(p)&&(c(s,p,v,m,b),t(s,p,b),b("connectgaps")),a.hasMarkers(p)&&u(s,p,v,m,b,{gradient:!0}),a.hasText(p)&&(b("texttemplate"),f(s,p,m,b));var x=[];(a.hasMarkers(p)||a.hasText(p))&&(b("cliponaxis"),b("marker.maxdisplayed"),x.push("points")),b("fill"),p.fill!=="none"&&(n(s,p,v,b),a.hasLines(p)||t(s,p,b)),(p.fill==="tonext"||p.fill==="toself")&&x.push("fills"),b("hoveron",x.join("+")||"points"),r.coerceSelectionMarkerOpacity(p,b)}function i(s,p,v,m){var b=m("r"),y=m("theta"),x;if(b)y?x=Math.min(b.length,y.length):(x=b.length,m("theta0"),m("dtheta"));else{if(!y)return 0;x=p.theta.length,m("r0"),m("dr")}return p._length=x,x}d.exports={handleRThetaDefaults:i,supplyDefaults:h}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1261}],1264:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes");d.exports=function(c,t,f){var n={},o=f[t.subplot]._subplot,l,h;o?(l=o.radialAxis,h=o.angularAxis):(o=f[t.subplot],l=o.radialaxis,h=o.angularaxis);var i=l.c2l(c.r);n.rLabel=a.tickText(l,i,!0).text;var s=h.thetaunit==="degrees"?r.rad2deg(c.theta):c.theta;return n.thetaLabel=a.tickText(h,s,!0).text,n}},{"../../lib":778,"../../plots/cartesian/axes":828}],1265:[function(e,d,S){var r=e("../scatter/hover");function a(c,t,f,n){var o=r(c,t,f,n);if(!(!o||o[0].index===!1)){var l=o[0];if(l.index===void 0)return o;var h=c.subplot,i=l.cd[l.index],s=l.trace;if(!!h.isPtInside(i))return l.xLabelVal=void 0,l.yLabelVal=void 0,u(i,s,h,l),l.hovertemplate=s.hovertemplate,o}}function u(c,t,f,n){var o=f.radialAxis,l=f.angularAxis;o._hovertitle="r",l._hovertitle="\u03B8";var h={};h[t.subplot]={_subplot:f};var i=t._module.formatLabels(c,t,h);n.rLabel=i.rLabel,n.thetaLabel=i.thetaLabel;var s=c.hi||t.hoverinfo,p=[];function v(b,y){p.push(b._hovertitle+": "+y)}if(!t.hovertemplate){var m=s.split("+");m.indexOf("all")!==-1&&(m=["r","theta","text"]),m.indexOf("r")!==-1&&v(o,n.rLabel),m.indexOf("theta")!==-1&&v(l,n.thetaLabel),m.indexOf("text")!==-1&&n.text&&(p.push(n.text),delete n.text),n.extraText=p.join("<br>")}}d.exports={hoverPoints:a,makeHoverPointText:u}},{"../scatter/hover":1198}],1266:[function(e,d,S){d.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1261,"./calc":1262,"./defaults":1263,"./format_labels":1264,"./hover":1265,"./plot":1267}],1267:[function(e,d,S){var r=e("../scatter/plot"),a=e("../../constants/numerical").BADNUM;d.exports=function(c,t,f){for(var n=t.layers.frontplot.select("g.scatterlayer"),o={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},l=t.radialAxis,h=t.angularAxis,i=0;i<f.length;i++)for(var s=f[i],p=0;p<s.length;p++){var v=s[p],m=v.r;if(m===a)v.x=v.y=a;else{var b=l.c2g(m),y=h.c2g(v.theta);v.x=b*Math.cos(y),v.y=b*Math.sin(y)}}r(c,o,f,n)}},{"../../constants/numerical":753,"../scatter/plot":1208}],1268:[function(e,d,S){var r=e("../scatterpolar/attributes"),a=e("../scattergl/attributes"),u=e("../../plots/template_attributes").texttemplateAttrs;d.exports={mode:r.mode,r:r.r,theta:r.theta,r0:r.r0,dr:r.dr,theta0:r.theta0,dtheta:r.dtheta,thetaunit:r.thetaunit,text:r.text,texttemplate:u({editType:"plot"},{keys:["r","theta","text"]}),hovertext:r.hovertext,hovertemplate:r.hovertemplate,line:a.line,connectgaps:a.connectgaps,marker:a.marker,fill:a.fill,fillcolor:a.fillcolor,textposition:a.textposition,textfont:a.textfont,hoverinfo:r.hoverinfo,selected:r.selected,unselected:r.unselected}},{"../../plots/template_attributes":906,"../scattergl/attributes":1239,"../scatterpolar/attributes":1261}],1269:[function(e,d,S){var r=e("../scatter/colorscale_calc"),a=e("../scatter/calc").calcMarkerSize,u=e("../scattergl/convert"),c=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;d.exports=function(n,o){var l=n._fullLayout,h=o.subplot,i=l[h].radialaxis,s=l[h].angularaxis,p=o._r=i.makeCalcdata(o,"r"),v=o._theta=s.makeCalcdata(o,"theta"),m=o._length,b={};m<p.length&&(p=p.slice(0,m)),m<v.length&&(v=v.slice(0,m)),b.r=p,b.theta=v,r(n,o);var y=b.opts=u.style(n,o),x;return m<t?x=a(o,m):y.marker&&(x=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),o._extremes.x=c.findExtremes(i,p,{ppad:x}),[{x:!1,y:!1,t:b,trace:o}]}},{"../../plots/cartesian/axes":828,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242}],1270:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("../scatterpolar/defaults").handleRThetaDefaults,c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),o=e("../scatter/constants").PTS_LINESONLY,l=e("./attributes");d.exports=function(i,s,p,v){function m(y,x){return r.coerce(i,s,l,y,x)}var b=u(i,s,v,m);if(!b){s.visible=!1;return}m("thetaunit"),m("mode",b<o?"lines+markers":"lines"),m("text"),m("hovertext"),s.hoveron!=="fills"&&m("hovertemplate"),a.hasLines(s)&&(t(i,s,p,v,m),m("connectgaps")),a.hasMarkers(s)&&c(i,s,p,v,m),a.hasText(s)&&(m("texttemplate"),f(i,s,v,m)),m("fill"),s.fill!=="none"&&n(i,s,p,m),r.coerceSelectionMarkerOpacity(s,m)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatterpolar/defaults":1263,"./attributes":1268}],1271:[function(e,d,S){var r=e("../scatterpolar/format_labels");d.exports=function(u,c,t){var f=u.i;return"r"in u||(u.r=c._r[f]),"theta"in u||(u.theta=c._theta[f]),r(u,c,t)}},{"../scatterpolar/format_labels":1264}],1272:[function(e,d,S){var r=e("../scattergl/hover"),a=e("../scatterpolar/hover").makeHoverPointText;function u(c,t,f,n){var o=c.cd,l=o[0].t,h=l.r,i=l.theta,s=r.hoverPoints(c,t,f,n);if(!(!s||s[0].index===!1)){var p=s[0];if(p.index===void 0)return s;var v=c.subplot,m=p.cd[p.index],b=p.trace;if(m.r=h[p.index],m.theta=i[p.index],!!v.isPtInside(m))return p.xLabelVal=void 0,p.yLabelVal=void 0,a(m,b,v,p),s}}d.exports={hoverPoints:u}},{"../scattergl/hover":1247,"../scatterpolar/hover":1265}],1273:[function(e,d,S){d.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scattergl/select":1251,"./attributes":1268,"./calc":1269,"./defaults":1270,"./format_labels":1271,"./hover":1272,"./plot":1274}],1274:[function(e,d,S){var r=e("@plotly/point-cluster"),a=e("fast-isnumeric"),u=e("../scattergl/plot"),c=e("../scattergl/scene_update"),t=e("../scattergl/convert"),f=e("../../lib"),n=e("../scattergl/constants").TOO_MANY_POINTS;d.exports=function(l,h,i){if(!!i.length){var s=h.radialAxis,p=h.angularAxis,v=c(l,h);return i.forEach(function(m){if(!(!m||!m[0]||!m[0].trace)){var b=m[0],y=b.trace,x=b.t,w=y._length,g=x.r,T=x.theta,M=x.opts,P,L=g.slice(),I=T.slice();for(P=0;P<g.length;P++)h.isPtInside({r:g[P],theta:T[P]})||(L[P]=NaN,I[P]=NaN);var C=new Array(w*2),k=Array(w),E=Array(w);for(P=0;P<w;P++){var R=L[P],O,N;if(a(R)){var G=s.c2g(R),U=p.c2g(I[P],y.thetaunit);O=G*Math.cos(U),N=G*Math.sin(U)}else O=N=NaN;k[P]=C[P*2]=O,E[P]=C[P*2+1]=N}x.tree=r(C),M.marker&&w>=n&&(M.marker.cluster=x.tree),M.marker&&(M.markerSel.positions=M.markerUnsel.positions=M.marker.positions=C),M.line&&C.length>1&&f.extendFlat(M.line,t.linePositions(l,y,C)),M.text&&(f.extendFlat(M.text,{positions:C},t.textPosition(l,y,M.text,M.marker)),f.extendFlat(M.textSel,{positions:C},t.textPosition(l,y,M.text,M.markerSel)),f.extendFlat(M.textUnsel,{positions:C},t.textPosition(l,y,M.text,M.markerUnsel))),M.fill&&!v.fill2d&&(v.fill2d=!0),M.marker&&!v.scatter2d&&(v.scatter2d=!0),M.line&&!v.line2d&&(v.line2d=!0),M.text&&!v.glText&&(v.glText=!0),v.lineOptions.push(M.line),v.fillOptions.push(M.fill),v.markerOptions.push(M.marker),v.markerSelectedOptions.push(M.markerSel),v.markerUnselectedOptions.push(M.markerUnsel),v.textOptions.push(M.text),v.textSelectedOptions.push(M.textSel),v.textUnselectedOptions.push(M.textUnsel),v.selectBatch.push([]),v.unselectBatch.push([]),x.x=k,x.y=E,x.rawx=k,x.rawy=E,x.r=g,x.theta=T,x.positions=C,x._scene=v,x.index=v.count,v.count++}}),u(l,h,i)}}},{"../../lib":778,"../scattergl/constants":1241,"../scattergl/convert":1242,"../scattergl/plot":1249,"../scattergl/scene_update":1250,"@plotly/point-cluster":57,"fast-isnumeric":241}],1275:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../scatter/attributes"),c=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),f=e("../../components/drawing/attributes").dash,n=e("../../lib/extend").extendFlat,o=u.marker,l=u.line,h=o.line;d.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},u.mode,{dflt:"markers"}),text:n({},u.text,{}),texttemplate:a({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},u.hovertext,{}),line:{color:l.color,width:l.width,dash:f,shape:n({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:u.connectgaps,cliponaxis:u.cliponaxis,fill:n({},u.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:u.fillcolor,marker:n({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:n({width:h.width,editType:"calc"},t("marker.line")),gradient:o.gradient,editType:"calc"},t("marker")),textfont:u.textfont,textposition:u.textposition,selected:u.selected,unselected:u.unselected,hoverinfo:n({},c.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:u.hoveron,hovertemplate:r()}},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1276:[function(e,d,S){var r=e("fast-isnumeric"),a=e("../scatter/colorscale_calc"),u=e("../scatter/arrays_to_calcdata"),c=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,f=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};d.exports=function(l,h){var i=l._fullLayout[h.subplot],s=i.sum,p=h.sum||s,v={a:h.a,b:h.b,c:h.c},m,b,y,x,w,g;for(m=0;m<f.length;m++)if(y=f[m],!v[y]){for(w=v[n[y][0]],g=v[n[y][1]],x=new Array(w.length),b=0;b<w.length;b++)x[b]=p-w[b]-g[b];v[y]=x}var T=h._length,M=new Array(T),P,L,I,C,k,E;for(m=0;m<T;m++)P=v.a[m],L=v.b[m],I=v.c[m],r(P)&&r(L)&&r(I)?(P=+P,L=+L,I=+I,C=s/(P+L+I),C!==1&&(P*=C,L*=C,I*=C),E=P,k=I-L,M[m]={x:k,y:E,a:P,b:L,c:I}):M[m]={x:!1,y:!1};return t(h,T),a(l,h),u(M,h),c(M,h),M}},{"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1277:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/constants"),u=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),f=e("../scatter/line_shape_defaults"),n=e("../scatter/text_defaults"),o=e("../scatter/fillcolor_defaults"),l=e("./attributes");d.exports=function(i,s,p,v){function m(M,P){return r.coerce(i,s,l,M,P)}var b=m("a"),y=m("b"),x=m("c"),w;if(b?(w=b.length,y?(w=Math.min(w,y.length),x&&(w=Math.min(w,x.length))):x?w=Math.min(w,x.length):w=0):y&&x&&(w=Math.min(y.length,x.length)),!w){s.visible=!1;return}s._length=w,m("sum"),m("text"),m("hovertext"),s.hoveron!=="fills"&&m("hovertemplate");var g=w<a.PTS_LINESONLY?"lines+markers":"lines";m("mode",g),u.hasLines(s)&&(t(i,s,p,v,m),f(i,s,m),m("connectgaps")),u.hasMarkers(s)&&c(i,s,p,v,m,{gradient:!0}),u.hasText(s)&&(m("texttemplate"),n(i,s,v,m));var T=[];(u.hasMarkers(s)||u.hasText(s))&&(m("cliponaxis"),m("marker.maxdisplayed"),T.push("points")),m("fill"),s.fill!=="none"&&(o(i,s,p,m),u.hasLines(s)||f(i,s,m)),(s.fill==="tonext"||s.fill==="toself")&&T.push("fills"),m("hoveron",T.join("+")||"points"),r.coerceSelectionMarkerOpacity(s,m)}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1275}],1278:[function(e,d,S){d.exports=function(a,u,c,t,f){if(u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),t[f]){var n=t[f];a.a=n.a,a.b=n.b,a.c=n.c}else a.a=u.a,a.b=u.b,a.c=u.c;return a}},{}],1279:[function(e,d,S){var r=e("../../plots/cartesian/axes");d.exports=function(u,c,t){var f={},n=t[c.subplot]._subplot;return f.aLabel=r.tickText(n.aaxis,u.a,!0).text,f.bLabel=r.tickText(n.baxis,u.b,!0).text,f.cLabel=r.tickText(n.caxis,u.c,!0).text,f}},{"../../plots/cartesian/axes":828}],1280:[function(e,d,S){var r=e("../scatter/hover");d.exports=function(u,c,t,f){var n=r(u,c,t,f);if(!n||n[0].index===!1)return;var o=n[0];if(o.index===void 0){var l=1-o.y0/u.ya._length,h=u.xa._length,i=h*l/2,s=h-i;return o.x0=Math.max(Math.min(o.x0,s),i),o.x1=Math.max(Math.min(o.x1,s),i),n}var p=o.cd[o.index],v=o.trace,m=o.subplot;o.a=p.a,o.b=p.b,o.c=p.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var b={};b[v.subplot]={_subplot:m};var y=v._module.formatLabels(p,v,b);o.aLabel=y.aLabel,o.bLabel=y.bLabel,o.cLabel=y.cLabel;var x=p.hi||v.hoverinfo,w=[];function g(M,P){w.push(M._hovertitle+": "+P)}if(!v.hovertemplate){var T=x.split("+");T.indexOf("all")!==-1&&(T=["a","b","c"]),T.indexOf("a")!==-1&&g(m.aaxis,o.aLabel),T.indexOf("b")!==-1&&g(m.baxis,o.bLabel),T.indexOf("c")!==-1&&g(m.caxis,o.cLabel)}return o.extraText=w.join("<br>"),o.hovertemplate=v.hovertemplate,n}},{"../scatter/hover":1198}],1281:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":907,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1275,"./calc":1276,"./defaults":1277,"./event_data":1278,"./format_labels":1279,"./hover":1280,"./plot":1282}],1282:[function(e,d,S){var r=e("../scatter/plot");d.exports=function(u,c,t){var f=c.plotContainer;f.select(".scatterlayer").selectAll("*").remove();var n={xaxis:c.xaxis,yaxis:c.yaxis,plot:f,layerClipId:c._hasClipOnAxisFalse?c.clipIdRelative:null},o=c.layers.frontplot.select("g.scatterlayer");r(u,n,t,o)}},{"../scatter/plot":1208}],1283:[function(e,d,S){var r=e("../scatter/attributes"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../scattergl/attributes"),t=e("../../plots/cartesian/constants").idRegex,f=e("../../plot_api/plot_template").templatedArray,n=e("../../lib/extend").extendFlat,o=r.marker,l=o.line,h=n(a("marker.line",{editTypeOverride:"calc"}),{width:n({},l.width,{editType:"calc"}),editType:"calc"}),i=n(a("marker"),{symbol:o.symbol,size:n({},o.size,{editType:"markerSize"}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:o.opacity,colorbar:o.colorbar,line:h,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function s(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:t[p],editType:"plot"}}}d.exports={dimensions:f("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},c.text,{}),hovertext:n({},c.hovertext,{}),hovertemplate:u(),marker:i,xaxes:s("x"),yaxes:s("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:c.selected.marker,editType:"calc"},unselected:{marker:c.unselected.marker,editType:"calc"},opacity:c.opacity}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergl/attributes":1239}],1284:[function(e,d,S){var r=e("regl-line2d"),a=e("../../registry"),u=e("../../lib/prepare_regl"),c=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids").getFromId,n=e("../../plots/cartesian/axes").shouldShowZeroLine,o="splom";function l(m){var b=m._fullLayout,y=a.getModule(o),x=c(m.calcdata,y)[0],w=u(m,["ANGLE_instanced_arrays","OES_element_index_uint"]);!w||(b._hasOnlyLargeSploms&&s(m),y.plot(m,{},x))}function h(m){var b=m.calcdata,y=m._fullLayout;y._hasOnlyLargeSploms&&s(m);for(var x=0;x<b.length;x++){var w=b[x][0],g=w.trace,T=y._splomScenes[g.uid];g.type==="splom"&&T&&T.matrix&&i(m,g,T)}}function i(m,b,y){for(var x=y.matrixOptions.data.length,w=b._visibleDims,g=y.viewOpts.ranges=new Array(x),T=0;T<w.length;T++){var M=w[T],P=g[T]=new Array(4),L=f(m,b._diag[M][0]);L&&(P[0]=L.r2l(L.range[0]),P[2]=L.r2l(L.range[1]));var I=f(m,b._diag[M][1]);I&&(P[1]=I.r2l(I.range[0]),P[3]=I.r2l(I.range[1]))}y.selectBatch.length||y.unselectBatch.length?y.matrix.update({ranges:g},{ranges:g}):y.matrix.update({ranges:g})}function s(m){var b=m._fullLayout,y=b._glcanvas.data()[0].regl,x=b._splomGrid;x||(x=b._splomGrid=r(y)),x.update(p(m))}function p(m){var b=m._fullLayout,y=b._size,x=[0,0,b.width,b.height],w={},g;function T(U,Y,z,B,H,V){var Z=Y[U+"color"],q=Y[U+"width"],J=String(Z+q);J in w?w[J].data.push(NaN,NaN,z,B,H,V):w[J]={data:[z,B,H,V],join:"rect",thickness:q,color:Z,viewport:x,range:x,overlay:!1}}for(g in b._splomSubplots){var M=b._plots[g],P=M.xaxis,L=M.yaxis,I=P._gridVals,C=L._gridVals,k=y.b+L.domain[0]*y.h,E=-L._m,R=-E*L.r2l(L.range[0],L.calendar),O,N;if(P.showgrid)for(g=0;g<I.length;g++)O=P._offset+P.l2p(I[g].x),T("grid",P,O,k,O,k+L._length);if(L.showgrid)for(g=0;g<C.length;g++)N=k+R+E*C[g].x,T("grid",L,P._offset,N,P._offset+P._length,N);n(m,P,L)&&(O=P._offset+P.l2p(0),T("zeroline",P,O,k,O,k+L._length)),n(m,L,P)&&(N=k+R+0,T("zeroline",L,P._offset,N,P._offset+P._length,N))}var G=[];for(g in w)G.push(w[g]);return G}function v(m,b,y,x){var w={},g;if(x._splomScenes){for(g=0;g<m.length;g++){var T=m[g];T.type==="splom"&&(w[T.uid]=1)}for(g=0;g<y.length;g++){var M=y[g];if(!w[M.uid]){var P=x._splomScenes[M.uid];P&&P.destroy&&P.destroy(),x._splomScenes[M.uid]=null,delete x._splomScenes[M.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!b._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),t.clean(m,b,y,x)}d.exports={name:o,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:l,drag:h,updateGrid:s,clean:v,updateFx:t.updateFx,toSVG:t.toSVG}},{"../../lib/prepare_regl":791,"../../plots/cartesian":841,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../../plots/get_data":865,"../../registry":911,"regl-line2d":535}],1285:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axis_ids"),u=e("../scatter/calc").calcMarkerSize,c=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),f=e("../scattergl/convert").markerSelection,n=e("../scattergl/convert").markerStyle,o=e("./scene_update"),l=e("../../constants/numerical").BADNUM,h=e("../scattergl/constants").TOO_MANY_POINTS;d.exports=function(s,p){var v=p.dimensions,m=p._length,b={},y=b.cdata=[],x=b.data=[],w=p._visibleDims=[],g,T,M,P,L;function I(O,N){for(var G=O.makeCalcdata({v:N.values,vcalendar:p.calendar},"v"),U=0;U<G.length;U++)G[U]=G[U]===l?NaN:G[U];y.push(G),x.push(O.type==="log"?r.simpleMap(G,O.c2l):G)}for(g=0;g<v.length;g++)if(M=v[g],M.visible){if(P=a.getFromId(s,p._diag[g][0]),L=a.getFromId(s,p._diag[g][1]),P&&L&&P.type!==L.type){r.log("Skipping splom dimension "+g+" with conflicting axis types");continue}P?(I(P,M),L&&L.type==="category"&&(L._categories=P._categories.slice())):I(L,M),w.push(g)}t(s,p),r.extendFlat(b,n(p));var C=y.length,k=C*m>h,E;for(k?E=2*(b.sizeAvg||Math.max(b.size,3)):E=u(p,m),T=0;T<w.length;T++)g=w[T],M=v[g],P=a.getFromId(s,p._diag[g][0])||{},L=a.getFromId(s,p._diag[g][1])||{},c(s,p,P,L,y[T],y[T],E);var R=o(s,p);return R.matrix||(R.matrix=!0),R.matrixOptions=b,R.selectedOptions=f(p,p.selected),R.unselectedOptions=f(p,p.unselected),[{x:!1,y:!1,t:{},trace:p}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242,"./scene_update":1292}],1286:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/array_container_defaults"),u=e("./attributes"),c=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),f=e("../parcoords/merge_length"),n=e("../scattergl/helpers").isOpenSymbol;d.exports=function(i,s,p,v){function m(P,L){return r.coerce(i,s,u,P,L)}var b=a(i,s,{name:"dimensions",handleItemDefaults:o}),y=m("diagonal.visible"),x=m("showupperhalf"),w=m("showlowerhalf"),g=f(s,b,"values");if(!g||!y&&!x&&!w){s.visible=!1;return}m("text"),m("hovertext"),m("hovertemplate"),t(i,s,p,v,m);var T=n(s.marker.symbol),M=c.isBubble(s);m("marker.line.width",T||M?1:0),l(i,s,v,m),r.coerceSelectionMarkerOpacity(s,m)};function o(h,i){function s(v,m){return r.coerce(h,i,u.dimensions,v,m)}s("label");var p=s("values");p&&p.length?s("visible"):i.visible=!1,s("axis.type"),s("axis.matches")}function l(h,i,s,p){var v=i.dimensions,m=v.length,b=i.showupperhalf,y=i.showlowerhalf,x=i.diagonal.visible,w,g,T=new Array(m),M=new Array(m);for(w=0;w<m;w++){var P=w?w+1:"";T[w]="x"+P,M[w]="y"+P}var L=p("xaxes",T),I=p("yaxes",M),C=i._diag=new Array(m);i._xaxes={},i._yaxes={};var k=[],E=[];function R(V,Z,q,J){if(!!V){var ne=V.charAt(0),ve=s._splomAxes[ne];if(i["_"+ne+"axes"][V]=1,J.push(V),!(V in ve)){var $=ve[V]={};q&&($.label=q.label||"",q.visible&&q.axis&&(q.axis.type&&($.type=q.axis.type),q.axis.matches&&($.matches=Z)))}}}var O=!x&&!y,N=!x&&!b;for(i._axesDim={},w=0;w<m;w++){var G=v[w],U=w===0,Y=w===m-1,z=U&&O||Y&&N?void 0:L[w],B=U&&N||Y&&O?void 0:I[w];R(z,B,G,k),R(B,z,G,E),C[w]=[z,B],i._axesDim[z]=w,i._axesDim[B]=w}for(w=0;w<k.length;w++)for(g=0;g<E.length;g++){var H=k[w]+E[g];(w>g&&b||w<g&&y||w===g&&(x||!y||!b))&&(s._splomSubplots[H]=1)}(!y||!x&&b&&y)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}},{"../../lib":778,"../../plots/array_container_defaults":823,"../parcoords/merge_length":1158,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scattergl/helpers":1246,"./attributes":1283}],1287:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/colorscale_calc"),u=e("../scattergl/convert").markerStyle;d.exports=function(t,f){var n=f.trace,o=t._fullLayout._splomScenes[n.uid];if(o){a(t,n),r.extendFlat(o.matrixOptions,u(n));var l=r.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(l,null)}}},{"../../lib":778,"../scatter/colorscale_calc":1190,"../scattergl/convert":1242}],1288:[function(e,d,S){S.getDimIndex=function(a,u){for(var c=u._id,t=c.charAt(0),f={x:0,y:1}[t],n=a._visibleDims,o=0;o<n.length;o++){var l=n[o];if(a._diag[l][f]===c)return o}return!1}},{}],1289:[function(e,d,S){var r=e("./helpers"),a=e("../scattergl/hover").calcHover;function u(c,t,f){var n=c.cd,o=n[0].trace,l=c.scene,h=l.matrixOptions.cdata,i=c.xa,s=c.ya,p=i.c2p(t),v=s.c2p(f),m=c.distance,b=r.getDimIndex(o,i),y=r.getDimIndex(o,s);if(b===!1||y===!1)return[c];for(var x=h[b],w=h[y],g,T,M=m,P=0;P<x.length;P++){var L=x[P],I=w[P],C=i.c2p(L)-p,k=s.c2p(I)-v,E=Math.sqrt(C*C+k*k);E<M&&(M=T=E,g=P)}return c.index=g,c.distance=M,c.dxy=T,g===void 0?[c]:[a(c,x,w,o)]}d.exports={hoverPoints:u}},{"../scattergl/hover":1247,"./helpers":1288}],1290:[function(e,d,S){var r=e("../../registry"),a=e("../../components/grid");d.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},r.register(a)},{"../../components/grid":687,"../../registry":911,"../scatter/marker_colorbar":1205,"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1286,"./edit_style":1287,"./hover":1289,"./plot":1291,"./select":1293}],1291:[function(e,d,S){var r=e("regl-splom"),a=e("../../lib"),u=e("../../plots/cartesian/axis_ids"),c=e("../../components/dragelement/helpers").selectMode;d.exports=function(n,o,l){if(!!l.length)for(var h=0;h<l.length;h++)t(n,l[h][0])};function t(f,n){var o=f._fullLayout,l=o._size,h=n.trace,i=n.t,s=o._splomScenes[h.uid],p=s.matrixOptions,v=p.cdata,m=o._glcanvas.data()[0].regl,b=o.dragmode,y,x,w,g,T;if(v.length!==0){p.lower=h.showupperhalf,p.upper=h.showlowerhalf,p.diagonal=h.diagonal.visible;var M=h._visibleDims,P=v.length,L=s.viewOpts={};for(L.ranges=new Array(P),L.domains=new Array(P),T=0;T<M.length;T++){w=M[T];var I=L.ranges[T]=new Array(4),C=L.domains[T]=new Array(4);y=u.getFromId(f,h._diag[w][0]),y&&(I[0]=y._rl[0],I[2]=y._rl[1],C[0]=y.domain[0],C[2]=y.domain[1]),x=u.getFromId(f,h._diag[w][1]),x&&(I[1]=x._rl[0],I[3]=x._rl[1],C[1]=x.domain[0],C[3]=x.domain[1])}L.viewport=[l.l,l.b,l.w+l.l,l.h+l.b],s.matrix===!0&&(s.matrix=r(m));var k=o.clickmode.indexOf("select")>-1,E=c(b)||!!h.selectedpoints||k,R=!0;if(E){var O=h._length;if(h.selectedpoints){s.selectBatch=h.selectedpoints;var N=h.selectedpoints,G={};for(w=0;w<N.length;w++)G[N[w]]=!0;var U=[];for(w=0;w<O;w++)G[w]||U.push(w);s.unselectBatch=U}var Y=i.xpx=new Array(P),z=i.ypx=new Array(P);for(T=0;T<M.length;T++){if(w=M[T],y=u.getFromId(f,h._diag[w][0]),y)for(Y[T]=new Array(O),g=0;g<O;g++)Y[T][g]=y.c2p(v[T][g]);if(x=u.getFromId(f,h._diag[w][1]),x)for(z[T]=new Array(O),g=0;g<O;g++)z[T][g]=x.c2p(v[T][g])}if(s.selectBatch.length||s.unselectBatch.length){var B=a.extendFlat({},p,s.unselectedOptions,L),H=a.extendFlat({},p,s.selectedOptions,L);s.matrix.update(B,H),R=!1}}else i.xpx=i.ypx=null;if(R){var V=a.extendFlat({},p,L);s.matrix.update(V,null)}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../plots/cartesian/axis_ids":831,"regl-splom":539}],1292:[function(e,d,S){var r=e("../../lib");d.exports=function(u,c){var t=u._fullLayout,f=c.uid,n=t._splomScenes;n||(n=t._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},l={matrix:!1,selectBatch:[],unselectBatch:[]},h=n[c.uid];return h||(h=n[f]=r.extendFlat({},o,l),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw()),h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy(),h.matrixOptions=null,h.selectBatch=null,h.unselectBatch=null,h=null}),h.dirty||r.extendFlat(h,o),h}},{"../../lib":778}],1293:[function(e,d,S){var r=e("../../lib"),a=e("../scatter/subtypes"),u=e("./helpers");d.exports=function(t,f){var n=t.cd,o=n[0].trace,l=n[0].t,h=t.scene,i=h.matrixOptions.cdata,s=t.xaxis,p=t.yaxis,v=[];if(!h)return v;var m=!a.hasMarkers(o)&&!a.hasText(o);if(o.visible!==!0||m)return v;var b=u.getDimIndex(o,s),y=u.getDimIndex(o,p);if(b===!1||y===!1)return v;var x=l.xpx[b],w=l.ypx[y],g=i[b],T=i[y],M=[],P=[];if(f!==!1&&!f.degenerate)for(var L=0;L<g.length;L++)f.contains([x[L],w[L]],null,L,t)?(M.push(L),v.push({pointNumber:L,x:g[L],y:T[L]})):P.push(L);var I=h.matrixOptions;return!M.length&&!P.length?h.matrix.update(I,null):!h.selectBatch.length&&!h.unselectBatch.length&&h.matrix.update(h.unselectedOptions,r.extendFlat({},I,h.selectedOptions,h.viewOpts)),h.selectBatch=M,h.unselectBatch=P,v}},{"../../lib":778,"../scatter/subtypes":1212,"./helpers":1288}],1294:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../mesh3d/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:a({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),showlegend:t({},c.showlegend,{dflt:!1})};t(f,r("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(o){f[o]=u[o]}),f.hoverinfo=t({},c.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,d.exports=f},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1295:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/calc");function u(n,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=f(o.u,o._len),o._v=f(o.v,o._len),o._w=f(o.w,o._len),o._x=f(o.x,o._len),o._y=f(o.y,o._len),o._z=f(o.z,o._len);var l=c(o);o._gridFill=l.fill,o._Xs=l.Xs,o._Ys=l.Ys,o._Zs=l.Zs,o._len=l.len;var h=0,i,s,p;o.starts&&(i=f(o.starts.x||[]),s=f(o.starts.y||[]),p=f(o.starts.z||[]),h=Math.min(i.length,s.length,p.length)),o._startsX=i||[],o._startsY=s||[],o._startsZ=p||[];var v=0,m=1/0,b;for(b=0;b<o._len;b++){var y=o._u[b],x=o._v[b],w=o._w[b],g=Math.sqrt(y*y+x*x+w*w);v=Math.max(v,g),m=Math.min(m,g)}for(a(n,o,{vals:[m,v],containerStr:"",cLetter:"c"}),b=0;b<h;b++){var T=i[b];l.xMax=Math.max(l.xMax,T),l.xMin=Math.min(l.xMin,T);var M=s[b];l.yMax=Math.max(l.yMax,M),l.yMin=Math.min(l.yMin,M);var P=p[b];l.zMax=Math.max(l.zMax,P),l.zMin=Math.min(l.zMin,P)}o._slen=h,o._normMax=v,o._xbnds=[l.xMin,l.xMax],o._ybnds=[l.yMin,l.yMax],o._zbnds=[l.zMin,l.zMax]}function c(n){var o=n._x,l=n._y,h=n._z,i=n._len,s,p,v,m=-1/0,b=1/0,y=-1/0,x=1/0,w=-1/0,g=1/0,T="",M,P,L,I,C,k,E,R,O;for(i&&(I=o[0],k=l[0],R=h[0]),i>1&&(C=o[i-1],E=l[i-1],O=h[i-1]),s=0;s<i;s++)m=Math.max(m,o[s]),b=Math.min(b,o[s]),y=Math.max(y,l[s]),x=Math.min(x,l[s]),w=Math.max(w,h[s]),g=Math.min(g,h[s]),!M&&o[s]!==I&&(M=!0,T+="x"),!P&&l[s]!==k&&(P=!0,T+="y"),!L&&h[s]!==R&&(L=!0,T+="z");M||(T+="x"),P||(T+="y"),L||(T+="z");var N=t(n._x),G=t(n._y),U=t(n._z);T=T.replace("x",(I>C?"-":"+")+"x"),T=T.replace("y",(k>E?"-":"+")+"y"),T=T.replace("z",(R>O?"-":"+")+"z");var Y=function(){i=0,N=[],G=[],U=[]};(!i||i<N.length*G.length*U.length)&&Y();var z=function(se){return se==="x"?o:se==="y"?l:h},B=function(se){return se==="x"?N:se==="y"?G:U},H=function(se){return se[i-1]<se[0]?-1:1},V=z(T[1]),Z=z(T[3]),q=z(T[5]),J=B(T[1]).length,ne=B(T[3]).length,ve=B(T[5]).length,$=!1,j=function(se,de,be){return J*(ne*se+de)+be},ae=H(z(T[1])),ie=H(z(T[3])),te=H(z(T[5]));for(s=0;s<ve-1;s++){for(p=0;p<ne-1;p++){for(v=0;v<J-1;v++){var re=j(s,p,v),ce=j(s,p,v+1),pe=j(s,p+1,v),fe=j(s+1,p,v);if((!(V[re]*ae<V[ce]*ae)||!(Z[re]*ie<Z[pe]*ie)||!(q[re]*te<q[fe]*te))&&($=!0),$)break}if($)break}if($)break}return $&&(r.warn("Encountered arbitrary coordinates! Unable to input data grid."),Y()),{xMin:b,yMin:x,zMin:g,xMax:m,yMax:y,zMax:w,Xs:N,Ys:G,Zs:U,len:i,fill:T}}function t(n){return r.distinctVals(n).vals}function f(n,o){if(o===void 0&&(o=n.length),r.isTypedArray(n))return n.subarray(0,o);for(var l=[],h=0;h<o;h++)l[h]=+n[h];return l}d.exports={calc:u,filter:f,processGrid:c}},{"../../components/colorscale/calc":651,"../../lib":778}],1296:[function(e,d,S){var r=e("gl-streamtube3d"),a=r.createTubeMesh,u=e("../../lib"),c=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,f=e("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function o(v,m){this.scene=v,this.uid=m,this.mesh=null,this.data=null}var l=o.prototype;l.handlePick=function(v){var m=this.scene.fullSceneLayout,b=this.scene.dataScale;function y(g,T){var M=m[T],P=b[n[T]];return M.l2c(g)/P}if(v.object===this.mesh){var x=v.data.position,w=v.data.velocity;return v.traceCoordinate=[y(x[0],"xaxis"),y(x[1],"yaxis"),y(x[2],"zaxis"),y(w[0],"xaxis"),y(w[1],"yaxis"),y(w[2],"zaxis"),v.data.intensity*this.data._normMax,v.data.divergence],v.textLabel=this.data.hovertext||this.data.text,!0}};function h(v){var m=v.length,b;return m>2?b=v.slice(1,m-1):m===2?b=[(v[0]+v[1])/2]:b=v,b}function i(v){var m=v.length;return m===1?[.5,.5]:[v[1]-v[0],v[m-1]-v[m-2]]}function s(v,m){var b=v.fullSceneLayout,y=v.dataScale,x=m._len,w={};function g(ne,ve){var $=b[ve],j=y[n[ve]];return u.simpleMap(ne,function(ae){return $.d2l(ae)*j})}if(w.vectors=f(g(m._u,"xaxis"),g(m._v,"yaxis"),g(m._w,"zaxis"),x),!x)return{positions:[],cells:[]};var T=g(m._Xs,"xaxis"),M=g(m._Ys,"yaxis"),P=g(m._Zs,"zaxis");w.meshgrid=[T,M,P],w.gridFill=m._gridFill;var L=m._slen;if(L)w.startingPositions=f(g(m._startsX,"xaxis"),g(m._startsY,"yaxis"),g(m._startsZ,"zaxis"));else{for(var I=M[0],C=h(T),k=h(P),E=new Array(C.length*k.length),R=0,O=0;O<C.length;O++)for(var N=0;N<k.length;N++)E[R++]=[C[O],I,k[N]];w.startingPositions=E}w.colormap=c(m),w.tubeSize=m.sizeref,w.maxLength=m.maxdisplayed;var G=g(m._xbnds,"xaxis"),U=g(m._ybnds,"yaxis"),Y=g(m._zbnds,"zaxis"),z=i(T),B=i(M),H=i(P),V=[[G[0]-z[0],U[0]-B[0],Y[0]-H[0]],[G[1]+z[1],U[1]+B[1],Y[1]+H[1]]],Z=r(w,V),q=t(m);Z.vertexIntensityBounds=[q.min/m._normMax,q.max/m._normMax];var J=m.lightposition;return Z.lightPosition=[J.x,J.y,J.z],Z.ambient=m.lighting.ambient,Z.diffuse=m.lighting.diffuse,Z.specular=m.lighting.specular,Z.roughness=m.lighting.roughness,Z.fresnel=m.lighting.fresnel,Z.opacity=m.opacity,m._pad=Z.tubeScale*m.sizeref*2,Z}l.update=function(v){this.data=v;var m=s(this.scene,v);this.mesh.update(m)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(v,m){var b=v.glplot.gl,y=s(v,m),x=a(b,y),w=new o(v,m.uid);return w.mesh=x,w.data=m,x._trace=w,v.glplot.add(x),w}d.exports=p},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-streamtube3d":348}],1297:[function(e,d,S){var r=e("../../lib"),a=e("../../components/colorscale/defaults"),u=e("./attributes");d.exports=function(t,f,n,o){function l(b,y){return r.coerce(t,f,u,b,y)}var h=l("u"),i=l("v"),s=l("w"),p=l("x"),v=l("y"),m=l("z");if(!h||!h.length||!i||!i.length||!s||!s.length||!p||!p.length||!v||!v.length||!m||!m.length){f.visible=!1;return}l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),a(t,f,o,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),f._length=null}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1294}],1298:[function(e,d,S){d.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(r,a){return r.tubex=r.x,r.tubey=r.y,r.tubez=r.z,r.tubeu=a.traceCoordinate[3],r.tubev=a.traceCoordinate[4],r.tubew=a.traceCoordinate[5],r.norm=a.traceCoordinate[6],r.divergence=a.traceCoordinate[7],delete r.x,delete r.y,delete r.z,r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1294,"./calc":1295,"./convert":1296,"./defaults":1297}],1299:[function(e,d,S){var r=e("../../plots/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,u=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,f=e("../pie/attributes"),n=e("./constants"),o=e("../../lib/extend").extendFlat;d.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},f.marker.line.color,{dflt:null}),width:o({},f.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},c("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:u({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:o({},r.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:a({},{keys:n.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:o({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"./constants":1302}],1300:[function(e,d,S){var r=e("../../plots/plots");S.name="sunburst",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1301:[function(e,d,S){var r=e("d3-hierarchy"),a=e("fast-isnumeric"),u=e("../../lib"),c=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,f=e("../pie/calc").generateExtendedColors,n=e("../../components/colorscale").calc,o=e("../../constants/numerical").ALMOST_EQUAL,l={},h={};S.calc=function(s,p){var v=s._fullLayout,m=p.ids,b=u.isArrayOrTypedArray(m),y=p.labels,x=p.parents,w=p.values,g=u.isArrayOrTypedArray(w),T=[],M={},P={},L=function(j,ae){M[j]?M[j].push(ae):M[j]=[ae],P[ae]=1},I=function(j){return j||typeof j=="number"},C=function(j){return!g||a(w[j])&&w[j]>=0},k,E,R;b?(k=Math.min(m.length,x.length),E=function(j){return I(m[j])&&C(j)},R=function(j){return String(m[j])}):(k=Math.min(y.length,x.length),E=function(j){return I(y[j])&&C(j)},R=function(j){return String(y[j])}),g&&(k=Math.min(k,w.length));for(var O=0;O<k;O++)if(E(O)){var N=R(O),G=I(x[O])?String(x[O]):"",U={i:O,id:N,pid:G,label:I(y[O])?String(y[O]):""};g&&(U.v=+w[O]),T.push(U),L(G,N)}if(M[""]){if(M[""].length>1){for(var B=u.randstr(),H=0;H<T.length;H++)T[H].pid===""&&(T[H].pid=B);T.unshift({hasMultipleRoots:!0,id:B,pid:"",label:""})}}else{var Y=[],z;for(z in M)P[z]||Y.push(z);if(Y.length===1)z=Y[0],T.unshift({hasImpliedRoot:!0,id:z,pid:"",label:z});else return u.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",Y.join(", ")].join(" "))}var V;try{V=r.stratify().id(function(j){return j.id}).parentId(function(j){return j.pid})(T)}catch(j){return u.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",j.message].join(" "))}var Z=r.hierarchy(V),q=!1;if(g)switch(p.branchvalues){case"remainder":Z.sum(function(j){return j.data.v});break;case"total":Z.each(function(j){var ae=j.data.data,ie=ae.v;if(j.children){var te=j.children.reduce(function(re,ce){return re+ce.data.data.v},0);if((ae.hasImpliedRoot||ae.hasMultipleRoots)&&(ie=te),ie<te*o)return q=!0,u.warn(["Total value for node",j.data.data.id,"of",p.name,"is smaller than the sum of its children.",`
parent value =`,ie,`
children sum =`,te].join(" "))}j.value=ie});break}else i(Z,p,{branches:p.count.indexOf("branches")!==-1,leaves:p.count.indexOf("leaves")!==-1});if(!q){p.sort&&Z.sort(function(j,ae){return ae.value-j.value});var J,ne,ve=p.marker.colors||[],$=!!ve.length;return p._hasColorscale?($||(ve=g?p.values:p._values),n(s,p,{vals:ve,containerStr:"marker",cLetter:"c"}),ne=c(p.marker)):J=t(v["_"+p.type+"colormap"]),Z.each(function(j){var ae=j.data.data;ae.color=p._hasColorscale?ne(ve[ae.i]):J(ve[ae.i],ae.id)}),T[0].hierarchy=Z,T}},S._runCrossTraceCalc=function(s,p){var v=p._fullLayout,m=p.calcdata,b=v[s+"colorway"],y=v["_"+s+"colormap"];v["extend"+s+"colors"]&&(b=f(b,s==="treemap"?h:l));var x=0,w;function g(L){var I=L.data.data,C=I.id;I.color===!1&&(y[C]?I.color=y[C]:L.parent?L.parent.parent?I.color=L.parent.data.data.color:(y[C]=I.color=b[x%b.length],x++):I.color=w)}for(var T=0;T<m.length;T++){var M=m[T],P=M[0];P.trace.type===s&&P.hierarchy&&(w=P.trace.root.color,P.hierarchy.each(g))}},S.crossTraceCalc=function(s){return S._runCrossTraceCalc("sunburst",s)};function i(s,p,v){var m=0,b=s.children;if(b){for(var y=b.length,x=0;x<y;x++)m+=i(b[x],p,v);v.branches&&m++}else v.leaves&&m++;return s.value=s.data.data.value=m,p._values||(p._values=[]),p._values[s.data.data.i]=m,m}},{"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../pie/calc":1163,"d3-hierarchy":161,"fast-isnumeric":241}],1302:[function(e,d,S){d.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1303:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults,c=e("../bar/defaults").handleText,t=e("../../components/colorscale"),f=t.hasColorscale,n=t.handleDefaults;d.exports=function(l,h,i,s){function p(T,M){return r.coerce(l,h,a,T,M)}var v=p("labels"),m=p("parents");if(!v||!v.length||!m||!m.length){h.visible=!1;return}var b=p("values");b&&b.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var y=p("marker.line.width");y&&p("marker.line.color",s.paper_bgcolor),p("marker.colors");var x=h._hasColorscale=f(l,"marker","colors")||(l.marker||{}).coloraxis;x&&n(l,h,s,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",x?1:.7);var w=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(w)?"text+label":"label"),p("hovertext"),p("hovertemplate");var g="auto";c(l,h,s,p,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),p("sort"),p("rotation"),p("root.color"),u(h,s,p),h._length=null}},{"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1299}],1304:[function(e,d,S){var r=e("d3"),a=e("../../registry"),u=e("../../components/fx/helpers").appendArrayPointValue,c=e("../../components/fx"),t=e("../../lib"),f=e("../../lib/events"),n=e("./helpers"),o=e("../pie/helpers"),l=o.formatPieValue;d.exports=function(s,p,v,m,b){var y=m[0],x=y.trace,w=y.hierarchy,g=x.type==="sunburst",T=x.type==="treemap";"_hasHoverLabel"in x||(x._hasHoverLabel=!1),"_hasHoverEvent"in x||(x._hasHoverEvent=!1);var M=function(I){var C=v._fullLayout;if(!(v._dragging||C.hovermode===!1)){var k=v._fullData[x.index],E=I.data.data,R=E.i,O=n.isHierarchyRoot(I),N=n.getParent(w,I),G=n.getValue(I),U=function(te){return t.castOption(k,R,te)},Y=U("hovertemplate"),z=c.castHoverinfo(k,C,R),B=C.separators;if(Y||z&&z!=="none"&&z!=="skip"){var H,V;g&&(H=y.cx+I.pxmid[0]*(1-I.rInscribed),V=y.cy+I.pxmid[1]*(1-I.rInscribed)),T&&(H=I._hoverX,V=I._hoverY);var Z={},q=[],J=[],ne=function(te){return q.indexOf(te)!==-1};z&&(q=z==="all"?k._module.attributes.hoverinfo.flags:z.split("+")),Z.label=E.label,ne("label")&&Z.label&&J.push(Z.label),E.hasOwnProperty("v")&&(Z.value=E.v,Z.valueLabel=l(Z.value,B),ne("value")&&J.push(Z.valueLabel)),Z.currentPath=I.currentPath=n.getPath(I.data),ne("current path")&&!O&&J.push(Z.currentPath);var ve,$=[],j=function(){$.indexOf(ve)===-1&&(J.push(ve),$.push(ve))};Z.percentParent=I.percentParent=G/n.getValue(N),Z.parent=I.parentString=n.getPtLabel(N),ne("percent parent")&&(ve=n.formatPercent(Z.percentParent,B)+" of "+Z.parent,j()),Z.percentEntry=I.percentEntry=G/n.getValue(p),Z.entry=I.entry=n.getPtLabel(p),ne("percent entry")&&!O&&!I.onPathbar&&(ve=n.formatPercent(Z.percentEntry,B)+" of "+Z.entry,j()),Z.percentRoot=I.percentRoot=G/n.getValue(w),Z.root=I.root=n.getPtLabel(w),ne("percent root")&&!O&&(ve=n.formatPercent(Z.percentRoot,B)+" of "+Z.root,j()),Z.text=U("hovertext")||U("text"),ne("text")&&(ve=Z.text,t.isValidTextValue(ve)&&J.push(ve));var ae={trace:k,y:V,text:J.join("<br>"),name:Y||ne("name")?k.name:void 0,color:U("hoverlabel.bgcolor")||E.color,borderColor:U("hoverlabel.bordercolor"),fontFamily:U("hoverlabel.font.family"),fontSize:U("hoverlabel.font.size"),fontColor:U("hoverlabel.font.color"),nameLength:U("hoverlabel.namelength"),textAlign:U("hoverlabel.align"),hovertemplate:Y,hovertemplateLabels:Z,eventData:[h(I,k,b.eventDataKeys)]};g&&(ae.x0=H-I.rInscribed*I.rpx1,ae.x1=H+I.rInscribed*I.rpx1,ae.idealAlign=I.pxmid[0]<0?"left":"right"),T&&(ae.x=H,ae.idealAlign=H<0?"left":"right"),c.loneHover(ae,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:v}),x._hasHoverLabel=!0}if(T){var ie=s.select("path.surface");b.styleOne(ie,I,k,{hovered:!0})}x._hasHoverEvent=!0,v.emit("plotly_hover",{points:[h(I,k,b.eventDataKeys)],event:r.event})}},P=function(I){var C=v._fullLayout,k=v._fullData[x.index],E=r.select(this).datum();if(x._hasHoverEvent&&(I.originalEvent=r.event,v.emit("plotly_unhover",{points:[h(E,k,b.eventDataKeys)],event:r.event}),x._hasHoverEvent=!1),x._hasHoverLabel&&(c.loneUnhover(C._hoverlayer.node()),x._hasHoverLabel=!1),T){var R=s.select("path.surface");b.styleOne(R,E,k,{hovered:!1})}},L=function(I){var C=v._fullLayout,k=v._fullData[x.index],E=g&&(n.isHierarchyRoot(I)||n.isLeaf(I)),R=n.getPtId(I),O=n.isEntry(I)?n.findEntryWithChild(w,R):n.findEntryWithLevel(w,R),N=n.getPtId(O),G={points:[h(I,k,b.eventDataKeys)],event:r.event};E||(G.nextLevel=N);var U=f.triggerHandler(v,"plotly_"+x.type+"click",G);if(U!==!1&&C.hovermode&&(v._hoverdata=[h(I,k,b.eventDataKeys)],c.click(v,r.event)),!E&&U!==!1&&!v._dragging&&!v._transitioning){a.call("_storeDirectGUIEdit",k,C._tracePreGUI[k.uid],{level:k.level});var Y={data:[{level:N}],traces:[x.index]},z={frame:{redraw:!1,duration:b.transitionTime},transition:{duration:b.transitionTime,easing:b.transitionEasing},mode:"immediate",fromcurrent:!0};c.loneUnhover(C._hoverlayer.node()),a.call("animate",v,Y,z)}};s.on("mouseover",M),s.on("mouseout",P),s.on("click",L)};function h(i,s,p){for(var v=i.data.data,m={curveNumber:s.index,pointNumber:v.i,data:s._input,fullData:s},b=0;b<p.length;b++){var y=p[b];y in i&&(m[y]=i[y])}return"parentString"in i&&!n.isHierarchyRoot(i)&&(m.parent=i.parentString),u(m,s,v.i),m}},{"../../components/fx":683,"../../components/fx/helpers":679,"../../lib":778,"../../lib/events":767,"../../registry":911,"../pie/helpers":1166,"./helpers":1305,d3:169}],1305:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../../lib/setcursor"),c=e("../pie/helpers");S.findEntryWithLevel=function(o,l){var h;return l&&o.eachAfter(function(i){if(S.getPtId(i)===l)return h=i.copy()}),h||o},S.findEntryWithChild=function(o,l){var h;return o.eachAfter(function(i){for(var s=i.children||[],p=0;p<s.length;p++){var v=s[p];if(S.getPtId(v)===l)return h=i.copy()}}),h||o},S.isEntry=function(o){return!o.parent},S.isLeaf=function(o){return!o.children},S.getPtId=function(o){return o.data.data.id},S.getPtLabel=function(o){return o.data.data.label},S.getValue=function(o){return o.value},S.isHierarchyRoot=function(o){return n(o)===""},S.setSliceCursor=function(o,l,h){var i=h.isTransitioning;if(!i){var s=o.datum();i=h.hideOnRoot&&S.isHierarchyRoot(s)||h.hideOnLeaves&&S.isLeaf(s)}u(o,i?null:"pointer")};function t(o,l,h){return{color:S.getOutsideTextFontKey("color",o,l,h),family:S.getOutsideTextFontKey("family",o,l,h),size:S.getOutsideTextFontKey("size",o,l,h)}}function f(o,l,h,i){var s=(i||{}).onPathbar,p=l.data.data,v=p.i,m=r.castOption(o,v,(s?"pathbar.textfont":"insidetextfont")+".color");return!m&&o._input.textfont&&(m=r.castOption(o._input,v,"textfont.color")),{color:m||a.contrast(p.color),family:S.getInsideTextFontKey("family",o,l,h,i),size:S.getInsideTextFontKey("size",o,l,h,i)}}S.getInsideTextFontKey=function(o,l,h,i,s){var p=(s||{}).onPathbar,v=p?"pathbar.textfont":"insidetextfont",m=h.data.data.i;return r.castOption(l,m,v+"."+o)||r.castOption(l,m,"textfont."+o)||i.size},S.getOutsideTextFontKey=function(o,l,h,i){var s=h.data.data.i;return r.castOption(l,s,"outsidetextfont."+o)||r.castOption(l,s,"textfont."+o)||i.size},S.isOutsideText=function(o,l){return!o._hasColorscale&&S.isHierarchyRoot(l)},S.determineTextFont=function(o,l,h,i){return S.isOutsideText(o,l)?t(o,l,h):f(o,l,h,i)},S.hasTransition=function(o){return!!(o&&o.duration>0)},S.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},S.isHeader=function(o,l){return!(S.isLeaf(o)||o.depth===l._maxDepth-1)};function n(o){return o.data.data.pid}S.getParent=function(o,l){return S.findEntryWithLevel(o,n(l))},S.listPath=function(o,l){var h=o.parent;if(!h)return[];var i=l?[h.data[l]]:[h];return S.listPath(h,l).concat(i)},S.getPath=function(o){return S.listPath(o,"label").join("/")+"/"},S.formatValue=c.formatPieValue,S.formatPercent=function(o,l){var h=r.formatPercent(o,0);return h==="0%"&&(h=c.formatPiePercent(o,l)),h}},{"../../components/color":643,"../../lib":778,"../../lib/setcursor":799,"../pie/helpers":1166}],1306:[function(e,d,S){d.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1299,"./base_plot":1300,"./calc":1301,"./defaults":1303,"./layout_attributes":1307,"./layout_defaults":1308,"./plot":1309,"./style":1310}],1307:[function(e,d,S){d.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1308:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("sunburstcolorway",t.colorway),f("extendsunburstcolors")}},{"../../lib":778,"./layout_attributes":1307}],1309:[function(e,d,S){var r=e("d3"),a=e("d3-hierarchy"),u=e("../../components/drawing"),c=e("../../lib"),t=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),n=f.recordMinTextSize,o=f.clearMinTextSize,l=e("../pie/plot"),h=e("../pie/helpers").getRotationAngle,i=l.computeTransform,s=l.transformInsideText,p=e("./style").styleOne,v=e("../bar/style").resizeText,m=e("./fx"),b=e("./constants"),y=e("./helpers");S.plot=function(P,L,I,C){var k=P._fullLayout,E=k._sunburstlayer,R,O,N=!I,G=!k.uniformtext.mode&&y.hasTransition(I);if(o("sunburst",k),R=E.selectAll("g.trace.sunburst").data(L,function(Y){return Y[0].trace.uid}),R.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),R.order(),G){C&&(O=C());var U=r.transition().duration(I.duration).ease(I.easing).each("end",function(){O&&O()}).each("interrupt",function(){O&&O()});U.each(function(){E.selectAll("g.trace").each(function(Y){x(P,Y,this,I)})})}else R.each(function(Y){x(P,Y,this,I)}),k.uniformtext.mode&&v(P,k._sunburstlayer.selectAll(".trace"),"sunburst");N&&R.exit().remove()};function x(P,L,I,C){var k=P._fullLayout,E=!k.uniformtext.mode&&y.hasTransition(C),R=r.select(I),O=R.selectAll("g.slice"),N=L[0],G=N.trace,U=N.hierarchy,Y=y.findEntryWithLevel(U,G.level),z=y.getMaxDepth(G),B=k._size,H=G.domain,V=B.w*(H.x[1]-H.x[0]),Z=B.h*(H.y[1]-H.y[0]),q=.5*Math.min(V,Z),J=N.cx=B.l+B.w*(H.x[1]+H.x[0])/2,ne=N.cy=B.t+B.h*(1-H.y[0])-Z/2;if(!Y)return O.remove();var ve=null,$={};E&&O.each(function(Ee){$[y.getPtId(Ee)]={rpx0:Ee.rpx0,rpx1:Ee.rpx1,x0:Ee.x0,x1:Ee.x1,transform:Ee.transform},!ve&&y.isEntry(Ee)&&(ve=Ee)});var j=w(Y).descendants(),ae=Y.height+1,ie=0,te=z;N.hasMultipleRoots&&y.isHierarchyRoot(Y)&&(j=j.slice(1),ae-=1,ie=1,te+=1),j=j.filter(function(Ee){return Ee.y1<=te});var re=h(G.rotation);re&&j.forEach(function(Ee){Ee.x0+=re,Ee.x1+=re});var ce=Math.min(ae,z),pe=function(Ee){return(Ee-ie)/ce*q},fe=function(Ee,Ae){return[Ee*Math.cos(Ae),-Ee*Math.sin(Ae)]},se=function(Ee){return c.pathAnnulus(Ee.rpx0,Ee.rpx1,Ee.x0,Ee.x1,J,ne)},de=function(Ee){return J+T(Ee)[0]*(Ee.transform.rCenter||0)+(Ee.transform.x||0)},be=function(Ee){return ne+T(Ee)[1]*(Ee.transform.rCenter||0)+(Ee.transform.y||0)};O=O.data(j,y.getPtId),O.enter().append("g").classed("slice",!0),E?O.exit().transition().each(function(){var Ee=r.select(this),Ae=Ee.select("path.surface");Ae.transition().attrTween("d",function($e){var xt=Ke($e);return function(bt){return se(xt(bt))}});var Be=Ee.select("g.slicetext");Be.attr("opacity",0)}).remove():O.exit().remove(),O.order();var xe=null;if(E&&ve){var ke=y.getPtId(ve);O.each(function(Ee){xe===null&&y.getPtId(Ee)===ke&&(xe=Ee.x1)})}var Re=O;E&&(Re=Re.transition().each("end",function(){var Ee=r.select(this);y.setSliceCursor(Ee,P,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Re.each(function(Ee){var Ae=r.select(this),Be=c.ensureSingle(Ae,"path","surface",function(_t){_t.style("pointer-events","all")});Ee.rpx0=pe(Ee.y0),Ee.rpx1=pe(Ee.y1),Ee.xmid=(Ee.x0+Ee.x1)/2,Ee.pxmid=fe(Ee.rpx1,Ee.xmid),Ee.midangle=-(Ee.xmid-Math.PI/2),Ee.startangle=-(Ee.x0-Math.PI/2),Ee.stopangle=-(Ee.x1-Math.PI/2),Ee.halfangle=.5*Math.min(c.angleDelta(Ee.x0,Ee.x1)||Math.PI,Math.PI),Ee.ring=1-Ee.rpx0/Ee.rpx1,Ee.rInscribed=g(Ee),E?Be.transition().attrTween("d",function(_t){var Ot=ze(_t);return function(Wt){return se(Ot(Wt))}}):Be.attr("d",se),Ae.call(m,Y,P,L,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(y.setSliceCursor,P,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:P._transitioning}),Be.call(p,Ee,G);var $e=c.ensureSingle(Ae,"g","slicetext"),xt=c.ensureSingle($e,"text","",function(_t){_t.attr("data-notex",1)}),bt=c.ensureUniformFontSize(P,y.determineTextFont(G,Ee,k.font));xt.text(S.formatSliceLabel(Ee,Y,G,L,k)).classed("slicetext",!0).attr("text-anchor","middle").call(u.font,bt).call(t.convertToTspans,P);var Ne=u.bBox(xt.node());Ee.transform=s(Ne,Ee,N),Ee.transform.targetX=de(Ee),Ee.transform.targetY=be(Ee);var st=function(_t,Ot){var Wt=_t.transform;return i(Wt,Ot),Wt.fontSize=bt.size,n(G.type,Wt,k),c.getTextTransform(Wt)};E?xt.transition().attrTween("transform",function(_t){var Ot=Je(_t);return function(Wt){return st(Ot(Wt),Ne)}}):xt.attr("transform",st(Ee,Ne))});function Ke(Ee){var Ae=y.getPtId(Ee),Be=$[Ae],$e=$[y.getPtId(Y)],xt;if($e){var bt=(Ee.x1>$e.x1?2*Math.PI:0)+re;xt=Ee.rpx1<$e.rpx1?{rpx0:0,rpx1:0}:{x0:bt,x1:bt}}else{var Ne,st=y.getPtId(Ee.parent);O.each(function(jt){if(y.getPtId(jt)===st)return Ne=jt});var _t=Ne.children,Ot;_t.forEach(function(jt,Zt){if(y.getPtId(jt)===Ae)return Ot=Zt});var Wt=_t.length,Et=r.interpolate(Ne.x0,Ne.x1);xt={rpx0:q,rpx1:q,x0:Et(Ot/Wt),x1:Et((Ot+1)/Wt)}}return r.interpolate(Be,xt)}function ze(Ee){var Ae=$[y.getPtId(Ee)],Be,$e={x0:Ee.x0,x1:Ee.x1,rpx0:Ee.rpx0,rpx1:Ee.rpx1};if(Ae)Be=Ae;else if(ve)if(Ee.parent)if(xe){var xt=(Ee.x1>xe?2*Math.PI:0)+re;Be={x0:xt,x1:xt}}else Be={rpx0:q,rpx1:q},c.extendFlat(Be,qe(Ee));else Be={rpx0:0,rpx1:0};else Be={x0:re,x1:re};return r.interpolate(Be,$e)}function Je(Ee){var Ae=$[y.getPtId(Ee)],Be,$e=Ee.transform;if(Ae)Be=Ae;else if(Be={rpx1:Ee.rpx1,transform:{textPosAngle:$e.textPosAngle,scale:0,rotate:$e.rotate,rCenter:$e.rCenter,x:$e.x,y:$e.y}},ve)if(Ee.parent)if(xe){var xt=Ee.x1>xe?2*Math.PI:0;Be.x0=Be.x1=xt}else c.extendFlat(Be,qe(Ee));else Be.x0=Be.x1=re;else Be.x0=Be.x1=re;var bt=r.interpolate(Be.transform.textPosAngle,Ee.transform.textPosAngle),Ne=r.interpolate(Be.rpx1,Ee.rpx1),st=r.interpolate(Be.x0,Ee.x0),_t=r.interpolate(Be.x1,Ee.x1),Ot=r.interpolate(Be.transform.scale,$e.scale),Wt=r.interpolate(Be.transform.rotate,$e.rotate),Et=$e.rCenter===0?3:Be.transform.rCenter===0?1/3:1,jt=r.interpolate(Be.transform.rCenter,$e.rCenter),Zt=function(Mt){return jt(Math.pow(Mt,Et))};return function(Mt){var At=Ne(Mt),ft=st(Mt),ot=_t(Mt),Te=Zt(Mt),Le=fe(At,(ft+ot)/2),Ve=bt(Mt),Qe={pxmid:Le,rpx1:At,transform:{textPosAngle:Ve,rCenter:Te,x:$e.x,y:$e.y}};return n(G.type,$e,k),{transform:{targetX:de(Qe),targetY:be(Qe),scale:Ot(Mt),rotate:Wt(Mt),rCenter:Te}}}}function qe(Ee){var Ae=Ee.parent,Be=$[y.getPtId(Ae)],$e={};if(Be){var xt=Ae.children,bt=xt.indexOf(Ee),Ne=xt.length,st=r.interpolate(Be.x0,Be.x1);$e.x0=st(bt/Ne),$e.x1=st(bt/Ne)}else $e.x0=$e.x1=0;return $e}}function w(P){return a.partition().size([2*Math.PI,P.height+1])(P)}S.formatSliceLabel=function(P,L,I,C,k){var E=I.texttemplate,R=I.textinfo;if(!E&&(!R||R==="none"))return"";var O=k.separators,N=C[0],G=P.data.data,U=N.hierarchy,Y=y.isHierarchyRoot(P),z=y.getParent(U,P),B=y.getValue(P);if(!E){var H=R.split("+"),V=function(te){return H.indexOf(te)!==-1},Z=[],q;if(V("label")&&G.label&&Z.push(G.label),G.hasOwnProperty("v")&&V("value")&&Z.push(y.formatValue(G.v,O)),!Y){V("current path")&&Z.push(y.getPath(P.data));var J=0;V("percent parent")&&J++,V("percent entry")&&J++,V("percent root")&&J++;var ne=J>1;if(J){var ve,$=function(te){q=y.formatPercent(ve,O),ne&&(q+=" of "+te),Z.push(q)};V("percent parent")&&!Y&&(ve=B/y.getValue(z),$("parent")),V("percent entry")&&(ve=B/y.getValue(L),$("entry")),V("percent root")&&(ve=B/y.getValue(U),$("root"))}}return V("text")&&(q=c.castOption(I,G.i,"text"),c.isValidTextValue(q)&&Z.push(q)),Z.join("<br>")}var j=c.castOption(I,G.i,"texttemplate");if(!j)return"";var ae={};G.label&&(ae.label=G.label),G.hasOwnProperty("v")&&(ae.value=G.v,ae.valueLabel=y.formatValue(G.v,O)),ae.currentPath=y.getPath(P.data),Y||(ae.percentParent=B/y.getValue(z),ae.percentParentLabel=y.formatPercent(ae.percentParent,O),ae.parent=y.getPtLabel(z)),ae.percentEntry=B/y.getValue(L),ae.percentEntryLabel=y.formatPercent(ae.percentEntry,O),ae.entry=y.getPtLabel(L),ae.percentRoot=B/y.getValue(U),ae.percentRootLabel=y.formatPercent(ae.percentRoot,O),ae.root=y.getPtLabel(U),G.hasOwnProperty("color")&&(ae.color=G.color);var ie=c.castOption(I,G.i,"text");return(c.isValidTextValue(ie)||ie==="")&&(ae.text=ie),ae.customdata=c.castOption(I,G.i,"customdata"),c.texttemplateString(j,ae,k._d3locale,ae,I._meta||{})};function g(P){return P.rpx0===0&&c.isFullCircle([P.x0,P.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(P.halfangle)),P.ring/2))}function T(P){return M(P.rpx1,P.transform.textPosAngle)}function M(P,L){return[P*Math.sin(L),-P*Math.cos(L)]}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/style":935,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,"./constants":1302,"./fx":1304,"./helpers":1305,"./style":1310,d3:169,"d3-hierarchy":161}],1310:[function(e,d,S){var r=e("d3"),a=e("../../components/color"),u=e("../../lib"),c=e("../bar/uniform_text").resizeText;function t(n){var o=n._fullLayout._sunburstlayer.selectAll(".trace");c(n,o,"sunburst"),o.each(function(l){var h=r.select(this),i=l[0],s=i.trace;h.style("opacity",s.opacity),h.selectAll("path.surface").each(function(p){r.select(this).call(f,p,s)})})}function f(n,o,l){var h=o.data.data,i=!o.children,s=h.i,p=u.castOption(l,s,"marker.line.color")||a.defaultLine,v=u.castOption(l,s,"marker.line.width")||0;n.style("stroke-width",v).call(a.fill,h.color).call(a.stroke,p).style("opacity",i?l.leaf.opacity:null)}d.exports={style:t,styleOne:f}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,d3:169}],1311:[function(e,d,S){var r=e("../../components/color"),a=e("../../components/colorscale/attributes"),u=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll;function n(h){return{valType:"boolean",dflt:!1}}function o(h){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:r.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:r.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var l=d.exports=f(t({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:u(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},a("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o(),y:o(),z:o()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:t({},a.zauto,{}),zmin:t({},a.zmin,{}),zmax:t({},a.zmax,{})},hoverinfo:t({},c.hoverinfo),showlegend:t({},c.showlegend,{dflt:!1})}),"calc","nested");l.x.editType=l.y.editType=l.z.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/color":643,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906}],1312:[function(e,d,S){var r=e("../../components/colorscale/calc");d.exports=function(u,c){c.surfacecolor?r(u,c,{vals:c.surfacecolor,containerStr:"",cLetter:"c"}):r(u,c,{vals:c.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1313:[function(e,d,S){var r=e("gl-surface3d"),a=e("ndarray"),u=e("ndarray-linear-interpolate").d2,c=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),f=e("../../lib").isArrayOrTypedArray,n=e("../../lib/gl_format_color").parseColorScale,o=e("../../lib/str2rgbarray"),l=e("../../components/colorscale").extractOpts;function h(k,E,R){this.scene=k,this.uid=R,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var i=h.prototype;i.getXat=function(k,E,R,O){var N=f(this.data.x)?f(this.data.x[0])?this.data.x[E][k]:this.data.x[k]:k;return R===void 0?N:O.d2l(N,0,R)},i.getYat=function(k,E,R,O){var N=f(this.data.y)?f(this.data.y[0])?this.data.y[E][k]:this.data.y[E]:E;return R===void 0?N:O.d2l(N,0,R)},i.getZat=function(k,E,R,O){var N=this.data.z[E][k];return N===null&&this.data.connectgaps&&this.data._interpolatedZ&&(N=this.data._interpolatedZ[E][k]),R===void 0?N:O.d2l(N,0,R)},i.handlePick=function(k){if(k.object===this.surface){var E=(k.data.index[0]-1)/this.dataScaleX-1,R=(k.data.index[1]-1)/this.dataScaleY-1,O=Math.max(Math.min(Math.round(E),this.data.z[0].length-1),0),N=Math.max(Math.min(Math.round(R),this.data._ylength-1),0);k.index=[O,N],k.traceCoordinate=[this.getXat(O,N),this.getYat(O,N),this.getZat(O,N)],k.dataCoordinate=[this.getXat(O,N,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(O,N,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(O,N,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var G=0;G<3;G++){var U=k.dataCoordinate[G];U!=null&&(k.dataCoordinate[G]*=this.scene.dataScale[G])}var Y=this.data.hovertext||this.data.text;return Array.isArray(Y)&&Y[N]&&Y[N][O]!==void 0?k.textLabel=Y[N][O]:Y?k.textLabel=Y:k.textLabel="",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};function s(k){var E=k[0].rgb,R=k[k.length-1].rgb;return E[0]===R[0]&&E[1]===R[1]&&E[2]===R[2]&&E[3]===R[3]}var p=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function v(k,E){if(k<E)return 0;for(var R=0;Math.floor(k%E)===0;)k/=E,R++;return R}function m(k){for(var E=[],R=0;R<p.length;R++){var O=p[R];E.push(v(k,O))}return E}function b(k){for(var E=m(k),R=k,O=0;O<p.length;O++)if(E[O]>0){R=p[O];break}return R}function y(k,E){if(!(k<1||E<1)){for(var R=m(k),O=m(E),N=1,G=0;G<p.length;G++)N*=Math.pow(p[G],Math.max(R[G],O[G]));return N}}function x(k){if(k.length!==0){for(var E=1,R=0;R<k.length;R++)E=y(E,k[R]);return E}}i.calcXnums=function(k){var E,R=[];for(E=1;E<k;E++){var O=this.getXat(E-1,0),N=this.getXat(E,0);N!==O&&O!==void 0&&O!==null&&N!==void 0&&N!==null?R[E-1]=Math.abs(N-O):R[E-1]=0}var G=0;for(E=1;E<k;E++)G+=R[E-1];for(E=1;E<k;E++)R[E-1]===0?R[E-1]=1:R[E-1]=Math.round(G/R[E-1]);return R},i.calcYnums=function(k){var E,R=[];for(E=1;E<k;E++){var O=this.getYat(0,E-1),N=this.getYat(0,E);N!==O&&O!==void 0&&O!==null&&N!==void 0&&N!==null?R[E-1]=Math.abs(N-O):R[E-1]=0}var G=0;for(E=1;E<k;E++)G+=R[E-1];for(E=1;E<k;E++)R[E-1]===0?R[E-1]=1:R[E-1]=Math.round(G/R[E-1]);return R};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=w[9],T=w[13];i.estimateScale=function(k,E){for(var R=E===0?this.calcXnums(k):this.calcYnums(k),O=1+x(R);O<g;)O*=2;for(;O>T;)O--,O/=b(O),O++,O<g&&(O=T);var N=Math.round(O/k);return N>1?N:1};function M(k,E,R){var O=R[8]+R[2]*E[0]+R[5]*E[1];return k[0]=(R[6]+R[0]*E[0]+R[3]*E[1])/O,k[1]=(R[7]+R[1]*E[0]+R[4]*E[1])/O,k}function P(k,E,R){return L(k,E,M,R),k}function L(k,E,R,O){for(var N=[0,0],G=k.shape[0],U=k.shape[1],Y=0;Y<G;Y++)for(var z=0;z<U;z++)R(N,[Y,z],O),k.set(Y,z,u(E,N[0],N[1]));return k}i.refineCoords=function(k){for(var E=this.dataScaleX,R=this.dataScaleY,O=k[0].shape[0],N=k[0].shape[1],G=Math.floor(k[0].shape[0]*E+1)|0,U=Math.floor(k[0].shape[1]*R+1)|0,Y=1+O+1,z=1+N+1,B=a(new Float32Array(Y*z),[Y,z]),H=[1/E,0,0,0,1/R,0,0,0,1],V=0;V<k.length;++V){this.surface.padField(B,k[V]);var Z=a(new Float32Array(G*U),[G,U]);P(Z,B,H),k[V]=Z}};function I(k,E){for(var R=!1,O=0;O<k.length;O++)if(E===k[O]){R=!0;break}R===!1&&k.push(E)}i.setContourLevels=function(){var k=[[],[],[]],E=[!1,!1,!1],R=!1,O,N,G;for(O=0;O<3;++O)if(this.showContour[O]&&(R=!0,this.contourSize[O]>0&&this.contourStart[O]!==null&&this.contourEnd[O]!==null&&this.contourEnd[O]>this.contourStart[O]))for(E[O]=!0,N=this.contourStart[O];N<this.contourEnd[O];N+=this.contourSize[O])G=N*this.scene.dataScale[O],I(k[O],G);if(R){var U=[[],[],[]];for(O=0;O<3;++O)this.showContour[O]&&(U[O]=E[O]?k[O]:this.scene.contourLevels[O]);this.surface.update({levels:U})}},i.update=function(k){var E=this.scene,R=E.fullSceneLayout,O=this.surface,N=n(k),G=E.dataScale,U=k.z[0].length,Y=k._ylength,z=E.contourLevels;this.data=k;var B,H,V,Z,q=[];for(B=0;B<3;B++)for(q[B]=[],H=0;H<U;H++)q[B][H]=[];for(H=0;H<U;H++)for(V=0;V<Y;V++)q[0][H][V]=this.getXat(H,V,k.xcalendar,R.xaxis),q[1][H][V]=this.getYat(H,V,k.ycalendar,R.yaxis),q[2][H][V]=this.getZat(H,V,k.zcalendar,R.zaxis);if(k.connectgaps)for(k._emptypoints=t(q[2]),c(q[2],k._emptypoints),k._interpolatedZ=[],H=0;H<U;H++)for(k._interpolatedZ[H]=[],V=0;V<Y;V++)k._interpolatedZ[H][V]=q[2][H][V];for(B=0;B<3;B++)for(H=0;H<U;H++)for(V=0;V<Y;V++)Z=q[B][H][V],Z==null?q[B][H][V]=NaN:Z=q[B][H][V]*=G[B];for(B=0;B<3;B++)for(H=0;H<U;H++)for(V=0;V<Y;V++)Z=q[B][H][V],Z!=null&&(this.minValues[B]>Z&&(this.minValues[B]=Z),this.maxValues[B]<Z&&(this.maxValues[B]=Z));for(B=0;B<3;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;B<3;B++)for(H=0;H<U;H++)for(V=0;V<Y;V++)Z=q[B][H][V],Z!=null&&(q[B][H][V]-=this.objectOffset[B]);var J=[a(new Float32Array(U*Y),[U,Y]),a(new Float32Array(U*Y),[U,Y]),a(new Float32Array(U*Y),[U,Y])];for(B=0;B<3;B++)for(H=0;H<U;H++)for(V=0;V<Y;V++)J[B].set(H,V,q[B][H][V]);q=[];var ne={colormap:N,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},ve=l(k);if(ne.intensityBounds=[ve.min,ve.max],k.surfacecolor){var $=a(new Float32Array(U*Y),[U,Y]);for(H=0;H<U;H++)for(V=0;V<Y;V++)$.set(H,V,k.surfacecolor[V][H]);J.push($)}else ne.intensityBounds[0]*=G[2],ne.intensityBounds[1]*=G[2];(T<J[0].shape[0]||T<J[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(J)),k.surfacecolor&&(ne.intensity=J.pop());var j=[!0,!0,!0],ae=["x","y","z"];for(B=0;B<3;++B){var ie=k.contours[ae[B]];j[B]=ie.highlight,ne.showContour[B]=ie.show||ie.highlight,ne.showContour[B]&&(ne.contourProject[B]=[ie.project.x,ie.project.y,ie.project.z],ie.show?(this.showContour[B]=!0,ne.levels[B]=z[B],O.highlightColor[B]=ne.contourColor[B]=o(ie.color),ie.usecolormap?O.highlightTint[B]=ne.contourTint[B]=0:O.highlightTint[B]=ne.contourTint[B]=1,ne.contourWidth[B]=ie.width,this.contourStart[B]=ie.start,this.contourEnd[B]=ie.end,this.contourSize[B]=ie.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),ie.highlight&&(ne.dynamicColor[B]=o(ie.highlightcolor),ne.dynamicWidth[B]=ie.highlightwidth))}s(N)&&(ne.vertexColor=!0),ne.objectOffset=this.objectOffset,ne.coords=J,O.update(ne),O.visible=k.visible,O.enableDynamic=j,O.enableHighlight=j,O.snapToData=!0,"lighting"in k&&(O.ambientLight=k.lighting.ambient,O.diffuseLight=k.lighting.diffuse,O.specularLight=k.lighting.specular,O.roughness=k.lighting.roughness,O.fresnel=k.lighting.fresnel),"lightposition"in k&&(O.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},i.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function C(k,E){var R=k.glplot.gl,O=r({gl:R}),N=new h(k,O,E.uid);return O._trace=N,N.update(E),k.glplot.add(O),N}d.exports=C},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"gl-surface3d":351,ndarray:495,"ndarray-linear-interpolate":489}],1314:[function(e,d,S){var r=e("../../registry"),a=e("../../lib"),u=e("../../components/colorscale/defaults"),c=e("./attributes"),t=.1;function f(i,s){for(var p=[],v=32,m=0;m<v;m++){var b=m/(v-1),y=s+(1-s)*(1-Math.pow(Math.sin(i*b*Math.PI),2));p.push([b,Math.max(0,Math.min(1,y))])}return p}function n(i){var s=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var p=0;p<i.length;p++){var v=i[p];if(v.length!==2||+v[0]<s)return!1;s=+v[0]}return!0}function o(i,s,p,v){var m,b;function y(k,E){return a.coerce(i,s,c,k,E)}var x=y("x"),w=y("y"),g=y("z");if(!g||!g.length||(x?x.length<1:!1)||(w?w.length<1:!1)){s.visible=!1;return}s._xlength=Array.isArray(x)&&a.isArrayOrTypedArray(x[0])?g.length:g[0].length,s._ylength=g.length;var T=r.getComponentMethod("calendars","handleTraceDefaults");T(i,s,["x","y","z"],v),y("text"),y("hovertext"),y("hovertemplate"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(k){y(k)});var M=y("surfacecolor"),P=["x","y","z"];for(m=0;m<3;++m){var L="contours."+P[m],I=y(L+".show"),C=y(L+".highlight");if(I||C)for(b=0;b<3;++b)y(L+".project."+P[b]);I&&(y(L+".color"),y(L+".width"),y(L+".usecolormap")),C&&(y(L+".highlightcolor"),y(L+".highlightwidth")),y(L+".start"),y(L+".end"),y(L+".size")}M||(h(i,"zmin","cmin"),h(i,"zmax","cmax"),h(i,"zauto","cauto")),u(i,s,v,y,{prefix:"",cLetter:"c"}),l(i,s,v,y),s._length=null}function l(i,s,p,v){var m=v("opacityscale");m==="max"?s.opacityscale=[[0,t],[1,1]]:m==="min"?s.opacityscale=[[0,1],[1,t]]:m==="extremes"?s.opacityscale=f(1,t):n(m)||(s.opacityscale=void 0)}function h(i,s,p){s in i&&!(p in i)&&(i[p]=i[s])}d.exports={supplyDefaults:o,opacityscaleDefaults:l}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1311}],1315:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1311,"./calc":1312,"./convert":1313,"./defaults":1314}],1316:[function(e,d,S){var r=e("../../components/annotations/attributes"),a=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,c=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes;e("../../constants/docs").FORMAT_LINK;var f=d.exports=u({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:a({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:a({},c({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:a({},r.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:a({},c({arrayOk:!0}))}},"calc","from-root");f.transforms=void 0},{"../../components/annotations/attributes":626,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/domain":855,"../../plots/font_attributes":856}],1317:[function(e,d,S){var r=e("../../plots/get_data").getModuleCalcData,a=e("./plot"),u="table";S.name=u,S.plot=function(c){var t=r(c.calcdata,u)[0];t.length&&a(c,t)},S.clean=function(c,t,f,n){var o=n._has&&n._has(u),l=t._has&&t._has(u);o&&!l&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":865,"./plot":1324}],1318:[function(e,d,S){var r=e("../../lib/gup").wrap;d.exports=function(){return r({})}},{"../../lib/gup":775}],1319:[function(e,d,S){d.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1320:[function(e,d,S){var r=e("./constants"),a=e("../../lib/extend").extendFlat,u=e("fast-isnumeric");d.exports=function(p,v){var m=f(v.cells.values),b=function(H){return H.slice(v.header.values.length,H.length)},y=f(v.header.values);y.length&&!y[0].length&&(y[0]=[""],y=f(y));var x=y.concat(b(m).map(function(){return n((y[0]||[""]).length)})),w=v.domain,g=Math.floor(p._fullLayout._size.w*(w.x[1]-w.x[0])),T=Math.floor(p._fullLayout._size.h*(w.y[1]-w.y[0])),M=v.header.values.length?x[0].map(function(){return v.header.height}):[r.emptyHeaderHeight],P=m.length?m[0].map(function(){return v.cells.height}):[],L=M.reduce(t,0),I=T-L,C=I+r.uplift,k=h(P,C),E=h(M,L),R=l(E,[]),O=l(k,R),N={},G=v._fullInput.columnorder.concat(b(m.map(function(H,V){return V}))),U=x.map(function(H,V){var Z=Array.isArray(v.columnwidth)?v.columnwidth[Math.min(V,v.columnwidth.length-1)]:v.columnwidth;return u(Z)?Number(Z):1}),Y=U.reduce(t,0);U=U.map(function(H){return H/Y*g});var z=Math.max(c(v.header.line.width),c(v.cells.line.width)),B={key:v.uid+p._context.staticPlot,translateX:w.x[0]*p._fullLayout._size.w,translateY:p._fullLayout._size.h*(1-w.y[1]),size:p._fullLayout._size,width:g,maxLineWidth:z,height:T,columnOrder:G,groupHeight:T,rowBlocks:O,headerRowBlocks:R,scrollY:0,cells:a({},v.cells,{values:m}),headerCells:a({},v.header,{values:x}),gdColumns:x.map(function(H){return H[0]}),gdColumnsOriginalOrder:x.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(H,V){var Z=N[H];N[H]=(Z||0)+1;var q=H+"__"+N[H];return{key:q,label:H,specIndex:V,xIndex:G[V],xScale:o,x:void 0,calcdata:void 0,columnWidth:U[V]}})};return B.columns.forEach(function(H){H.calcdata=B,H.x=o(H)}),B};function c(s){if(Array.isArray(s)){for(var p=0,v=0;v<s.length;v++)p=Math.max(p,c(s[v]));return p}return s}function t(s,p){return s+p}function f(s){var p=s.slice(),v=1/0,m=0,b;for(b=0;b<p.length;b++)Array.isArray(p[b])||(p[b]=[p[b]]),v=Math.min(v,p[b].length),m=Math.max(m,p[b].length);if(v!==m)for(b=0;b<p.length;b++){var y=m-p[b].length;y&&(p[b]=p[b].concat(n(y)))}return p}function n(s){for(var p=new Array(s),v=0;v<s;v++)p[v]="";return p}function o(s){return s.calcdata.columns.reduce(function(p,v){return v.xIndex<s.xIndex?p+v.columnWidth:p},0)}function l(s,p){var v=Object.keys(s);return v.map(function(m){return a({},s[m],{auxiliaryBlocks:p})})}function h(s,p){for(var v={},m,b=0,y=0,x=i(),w=0,g=0,T=0;T<s.length;T++)m=s[T],x.rows.push({rowIndex:T,rowHeight:m}),y+=m,(y>=p||T===s.length-1)&&(v[b]=x,x.key=g++,x.firstRowIndex=w,x.lastRowIndex=T,x=i(),b+=y,w=T+1,y=0);return v}function i(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":768,"./constants":1319,"fast-isnumeric":241}],1321:[function(e,d,S){var r=e("../../lib/extend").extendFlat;S.splitToPanels=function(u){var c=[0,0],t=r({},u,{key:"header",type:"header",page:0,prevPages:c,currentRepaint:[null,null],dragHandle:!0,values:u.calcdata.headerCells.values[u.specIndex],rowBlocks:u.calcdata.headerRowBlocks,calcdata:r({},u.calcdata,{cells:u.calcdata.headerCells})}),f=r({},u,{key:"cells1",type:"cells",page:0,prevPages:c,currentRepaint:[null,null],dragHandle:!1,values:u.calcdata.cells.values[u.specIndex],rowBlocks:u.calcdata.rowBlocks}),n=r({},u,{key:"cells2",type:"cells",page:1,prevPages:c,currentRepaint:[null,null],dragHandle:!1,values:u.calcdata.cells.values[u.specIndex],rowBlocks:u.calcdata.rowBlocks});return[f,n,t]},S.splitToCells=function(u){var c=a(u);return(u.values||[]).slice(c[0],c[1]).map(function(t,f){var n=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:f+n,key:c[0]+f,column:u,calcdata:u.calcdata,page:u.page,rowBlocks:u.rowBlocks,value:t}})};function a(u){var c=u.rowBlocks[u.page],t=c?c.rows[0].rowIndex:0,f=c?t+c.rows.length:0;return[t,f]}},{"../../lib/extend":768}],1322:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../plots/domain").defaults;function c(t,f){for(var n=t.columnorder||[],o=t.header.values.length,l=n.slice(0,o),h=l.slice().sort(function(p,v){return p-v}),i=l.map(function(p){return h.indexOf(p)}),s=i.length;s<o;s++)i.push(s);f("columnorder",i)}d.exports=function(f,n,o,l){function h(i,s){return r.coerce(f,n,a,i,s)}u(n,l,h),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),r.coerceFont(h,"header.font",r.extendFlat({},l.font)),c(n,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),r.coerceFont(h,"cells.font",r.extendFlat({},l.font)),n._length=null}},{"../../lib":778,"../../plots/domain":855,"./attributes":1316}],1323:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1316,"./base_plot":1317,"./calc":1318,"./defaults":1322,"./plot":1324}],1324:[function(e,d,S){var r=e("./constants"),a=e("d3"),u=e("../../lib/gup"),c=e("../../components/drawing"),t=e("../../lib/svg_text_utils"),f=e("../../lib").raiseToTop,n=e("../../lib").strTranslate,o=e("../../lib").cancelTransition,l=e("./data_preparation_helper"),h=e("./data_split_helpers"),i=e("../../components/color");d.exports=function(re,ce){var pe=!re._context.staticPlot,fe=re._fullLayout._paper.selectAll("."+r.cn.table).data(ce.map(function($e){var xt=u.unwrap($e),bt=xt.trace;return l(re,bt)}),u.keyFun);fe.exit().remove(),fe.enter().append("g").classed(r.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),fe.attr("width",function($e){return $e.width+$e.size.l+$e.size.r}).attr("height",function($e){return $e.height+$e.size.t+$e.size.b}).attr("transform",function($e){return n($e.translateX,$e.translateY)});var se=fe.selectAll("."+r.cn.tableControlView).data(u.repeat,u.keyFun),de=se.enter().append("g").classed(r.cn.tableControlView,!0).style("box-sizing","content-box");if(pe){var be="onwheel"in document?"wheel":"mousewheel";de.on("mousemove",function($e){se.filter(function(xt){return $e===xt}).call(b,re)}).on(be,function($e){if(!$e.scrollbarState.wheeling){$e.scrollbarState.wheeling=!0;var xt=$e.scrollY+a.event.deltaY,bt=H(re,se,null,xt)($e);bt||(a.event.stopPropagation(),a.event.preventDefault()),$e.scrollbarState.wheeling=!1}}).call(b,re,!0)}se.attr("transform",function($e){return n($e.size.l,$e.size.t)});var xe=se.selectAll("."+r.cn.scrollBackground).data(u.repeat,u.keyFun);xe.enter().append("rect").classed(r.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function($e){return $e.width}).attr("height",function($e){return $e.height}),se.each(function($e){c.setClipUrl(a.select(this),p(re,$e),re)});var ke=se.selectAll("."+r.cn.yColumn).data(function($e){return $e.columns},u.keyFun);ke.enter().append("g").classed(r.cn.yColumn,!0),ke.exit().remove(),ke.attr("transform",function($e){return n($e.x,0)}),pe&&ke.call(a.behavior.drag().origin(function($e){var xt=a.select(this);return N(xt,$e,-r.uplift),f(this),$e.calcdata.columnDragInProgress=!0,b(se.filter(function(bt){return $e.calcdata.key===bt.key}),re),$e}).on("drag",function($e){var xt=a.select(this),bt=function(_t){return($e===_t?a.event.x:_t.x)+_t.columnWidth/2};$e.x=Math.max(-r.overdrag,Math.min($e.calcdata.width+r.overdrag-$e.columnWidth,a.event.x));var Ne=m(ke).filter(function(_t){return _t.calcdata.key===$e.calcdata.key}),st=Ne.sort(function(_t,Ot){return bt(_t)-bt(Ot)});st.forEach(function(_t,Ot){_t.xIndex=Ot,_t.x=$e===_t?_t.x:_t.xScale(_t)}),ke.filter(function(_t){return $e!==_t}).transition().ease(r.transitionEase).duration(r.transitionDuration).attr("transform",function(_t){return n(_t.x,0)}),xt.call(o).attr("transform",n($e.x,-r.uplift))}).on("dragend",function($e){var xt=a.select(this),bt=$e.calcdata;$e.x=$e.xScale($e),$e.calcdata.columnDragInProgress=!1,N(xt,$e,0),R(re,bt,bt.columns.map(function(Ne){return Ne.xIndex}))})),ke.each(function($e){c.setClipUrl(a.select(this),v(re,$e),re)});var Re=ke.selectAll("."+r.cn.columnBlock).data(h.splitToPanels,u.keyFun);Re.enter().append("g").classed(r.cn.columnBlock,!0).attr("id",function($e){return $e.key}),Re.style("cursor",function($e){return $e.dragHandle?"ew-resize":$e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Ke=Re.filter(U),ze=Re.filter(G);pe&&ze.call(a.behavior.drag().origin(function($e){return a.event.stopPropagation(),$e}).on("drag",H(re,se,-1)).on("dragend",function(){})),y(re,se,Ke,Re),y(re,se,ze,Re);var Je=se.selectAll("."+r.cn.scrollAreaClip).data(u.repeat,u.keyFun);Je.enter().append("clipPath").classed(r.cn.scrollAreaClip,!0).attr("id",function($e){return p(re,$e)});var qe=Je.selectAll("."+r.cn.scrollAreaClipRect).data(u.repeat,u.keyFun);qe.enter().append("rect").classed(r.cn.scrollAreaClipRect,!0).attr("x",-r.overdrag).attr("y",-r.uplift).attr("fill","none"),qe.attr("width",function($e){return $e.width+2*r.overdrag}).attr("height",function($e){return $e.height+r.uplift});var Ee=ke.selectAll("."+r.cn.columnBoundary).data(u.repeat,u.keyFun);Ee.enter().append("g").classed(r.cn.columnBoundary,!0);var Ae=ke.selectAll("."+r.cn.columnBoundaryClippath).data(u.repeat,u.keyFun);Ae.enter().append("clipPath").classed(r.cn.columnBoundaryClippath,!0),Ae.attr("id",function($e){return v(re,$e)});var Be=Ae.selectAll("."+r.cn.columnBoundaryRect).data(u.repeat,u.keyFun);Be.enter().append("rect").classed(r.cn.columnBoundaryRect,!0).attr("fill","none"),Be.attr("width",function($e){return $e.columnWidth+2*s($e)}).attr("height",function($e){return $e.calcdata.height+2*s($e)+r.uplift}).attr("x",function($e){return-s($e)}).attr("y",function($e){return-s($e)}),B(null,ze,se)};function s(te){return Math.ceil(te.calcdata.maxLineWidth/2)}function p(te,re){return"clip"+te._fullLayout._uid+"_scrollAreaBottomClip_"+re.key}function v(te,re){return"clip"+te._fullLayout._uid+"_columnBoundaryClippath_"+re.calcdata.key+"_"+re.specIndex}function m(te){return[].concat.apply([],te.map(function(re){return re})).map(function(re){return re.__data__})}function b(te,re,ce){function pe(ke){var Re=ke.rowBlocks;return ve(Re,Re.length-1)+(Re.length?$(Re[Re.length-1],1/0):1)}var fe=te.selectAll("."+r.cn.scrollbarKit).data(u.repeat,u.keyFun);fe.enter().append("g").classed(r.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),fe.each(function(ke){var Re=ke.scrollbarState;Re.totalHeight=pe(ke),Re.scrollableAreaHeight=ke.groupHeight-Y(ke),Re.currentlyVisibleHeight=Math.min(Re.totalHeight,Re.scrollableAreaHeight),Re.ratio=Re.currentlyVisibleHeight/Re.totalHeight,Re.barLength=Math.max(Re.ratio*Re.currentlyVisibleHeight,r.goldenRatio*r.scrollbarWidth),Re.barWiggleRoom=Re.currentlyVisibleHeight-Re.barLength,Re.wiggleRoom=Math.max(0,Re.totalHeight-Re.scrollableAreaHeight),Re.topY=Re.barWiggleRoom===0?0:ke.scrollY/Re.wiggleRoom*Re.barWiggleRoom,Re.bottomY=Re.topY+Re.barLength,Re.dragMultiplier=Re.wiggleRoom/Re.barWiggleRoom}).attr("transform",function(ke){var Re=ke.width+r.scrollbarWidth/2+r.scrollbarOffset;return n(Re,Y(ke))});var se=fe.selectAll("."+r.cn.scrollbar).data(u.repeat,u.keyFun);se.enter().append("g").classed(r.cn.scrollbar,!0);var de=se.selectAll("."+r.cn.scrollbarSlider).data(u.repeat,u.keyFun);de.enter().append("g").classed(r.cn.scrollbarSlider,!0),de.attr("transform",function(ke){return n(0,ke.scrollbarState.topY||0)});var be=de.selectAll("."+r.cn.scrollbarGlyph).data(u.repeat,u.keyFun);be.enter().append("line").classed(r.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",r.scrollbarWidth).attr("stroke-linecap","round").attr("y1",r.scrollbarWidth/2),be.attr("y2",function(ke){return ke.scrollbarState.barLength-r.scrollbarWidth/2}).attr("stroke-opacity",function(ke){return ke.columnDragInProgress||!ke.scrollbarState.barWiggleRoom||ce?0:.4}),be.transition().delay(0).duration(0),be.transition().delay(r.scrollbarHideDelay).duration(r.scrollbarHideDuration).attr("stroke-opacity",0);var xe=se.selectAll("."+r.cn.scrollbarCaptureZone).data(u.repeat,u.keyFun);xe.enter().append("line").classed(r.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",r.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ke){var Re=a.event.y,Ke=this.getBoundingClientRect(),ze=ke.scrollbarState,Je=Re-Ke.top,qe=a.scale.linear().domain([0,ze.scrollableAreaHeight]).range([0,ze.totalHeight]).clamp(!0);ze.topY<=Je&&Je<=ze.bottomY||H(re,te,null,qe(Je-ze.barLength/2))(ke)}).call(a.behavior.drag().origin(function(ke){return a.event.stopPropagation(),ke.scrollbarState.scrollbarScrollInProgress=!0,ke}).on("drag",H(re,te)).on("dragend",function(){})),xe.attr("y2",function(ke){return ke.scrollbarState.scrollableAreaHeight}),re._context.staticPlot&&(be.remove(),xe.remove())}function y(te,re,ce,pe){var fe=x(ce),se=w(fe);P(se);var de=g(se);I(de);var be=M(se),xe=T(be);L(xe),C(xe,re,pe,te),ne(se)}function x(te){var re=te.selectAll("."+r.cn.columnCells).data(u.repeat,u.keyFun);return re.enter().append("g").classed(r.cn.columnCells,!0),re.exit().remove(),re}function w(te){var re=te.selectAll("."+r.cn.columnCell).data(h.splitToCells,function(ce){return ce.keyWithinBlock});return re.enter().append("g").classed(r.cn.columnCell,!0),re.exit().remove(),re}function g(te){var re=te.selectAll("."+r.cn.cellRect).data(u.repeat,function(ce){return ce.keyWithinBlock});return re.enter().append("rect").classed(r.cn.cellRect,!0),re}function T(te){var re=te.selectAll("."+r.cn.cellText).data(u.repeat,function(ce){return ce.keyWithinBlock});return re.enter().append("text").classed(r.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){a.event.stopPropagation()}),re}function M(te){var re=te.selectAll("."+r.cn.cellTextHolder).data(u.repeat,function(ce){return ce.keyWithinBlock});return re.enter().append("g").classed(r.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),re}function P(te){te.each(function(re,ce){var pe=re.calcdata.cells.font,fe=re.column.specIndex,se={size:O(pe.size,fe,ce),color:O(pe.color,fe,ce),family:O(pe.family,fe,ce)};re.rowNumber=re.key,re.align=O(re.calcdata.cells.align,fe,ce),re.cellBorderWidth=O(re.calcdata.cells.line.width,fe,ce),re.font=se})}function L(te){te.each(function(re){c.font(a.select(this),re.font)})}function I(te){te.attr("width",function(re){return re.column.columnWidth}).attr("stroke-width",function(re){return re.cellBorderWidth}).each(function(re){var ce=a.select(this);i.stroke(ce,O(re.calcdata.cells.line.color,re.column.specIndex,re.rowNumber)),i.fill(ce,O(re.calcdata.cells.fill.color,re.column.specIndex,re.rowNumber))})}function C(te,re,ce,pe){te.text(function(fe){var se=fe.column.specIndex,de=fe.rowNumber,be=fe.value,xe=typeof be=="string",ke=xe&&be.match(/<br>/i),Re=!xe||ke;fe.mayHaveMarkup=xe&&be.match(/[<&>]/);var Ke=k(be);fe.latex=Ke;var ze=Ke?"":O(fe.calcdata.cells.prefix,se,de)||"",Je=Ke?"":O(fe.calcdata.cells.suffix,se,de)||"",qe=Ke?null:O(fe.calcdata.cells.format,se,de)||null,Ee=ze+(qe?a.format(qe)(fe.value):fe.value)+Je,Ae;fe.wrappingNeeded=!fe.wrapped&&!Re&&!Ke&&(Ae=E(Ee)),fe.cellHeightMayIncrease=ke||Ke||fe.mayHaveMarkup||(Ae===void 0?E(Ee):Ae),fe.needsConvertToTspans=fe.mayHaveMarkup||fe.wrappingNeeded||fe.latex;var Be;if(fe.wrappingNeeded){var $e=r.wrapSplitCharacter===" "?Ee.replace(/<a href=/ig,"<a_href="):Ee,xt=$e.split(r.wrapSplitCharacter),bt=r.wrapSplitCharacter===" "?xt.map(function(Ne){return Ne.replace(/<a_href=/ig,"<a href=")}):xt;fe.fragments=bt.map(function(Ne){return{text:Ne,width:null}}),fe.fragments.push({fragment:r.wrapSpacer,width:null}),Be=bt.join(r.lineBreaker)+r.lineBreaker+r.wrapSpacer}else delete fe.fragments,Be=Ee;return Be}).attr("dy",function(fe){return fe.needsConvertToTspans?0:"0.75em"}).each(function(fe){var se=this,de=a.select(se),be=fe.wrappingNeeded?Z:q;fe.needsConvertToTspans?t.convertToTspans(de,pe,be(ce,se,re,pe,fe)):a.select(se.parentNode).attr("transform",function(xe){return n(J(xe),r.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function k(te){return typeof te=="string"&&te.match(r.latexCheck)}function E(te){return te.indexOf(r.wrapSplitCharacter)!==-1}function R(te,re,ce){var pe=re.gdColumnsOriginalOrder;re.gdColumns.sort(function(fe,se){return ce[pe.indexOf(fe)]-ce[pe.indexOf(se)]}),re.columnorder=ce,te.emit("plotly_restyle")}function O(te,re,ce){if(Array.isArray(te)){var pe=te[Math.min(re,te.length-1)];return Array.isArray(pe)?pe[Math.min(ce,pe.length-1)]:pe}else return te}function N(te,re,ce){te.transition().ease(r.releaseTransitionEase).duration(r.releaseTransitionDuration).attr("transform",n(re.x,ce))}function G(te){return te.type==="cells"}function U(te){return te.type==="header"}function Y(te){var re=te.rowBlocks.length?te.rowBlocks[0].auxiliaryBlocks:[];return re.reduce(function(ce,pe){return ce+$(pe,1/0)},0)}function z(te,re,ce){for(var pe=[],fe=0,se=0;se<te.length;se++){for(var de=te[se],be=de.rows,xe=0,ke=0;ke<be.length;ke++)xe+=be[ke].rowHeight;de.allRowsHeight=xe;var Re=fe+xe,Ke=re,ze=Ke+ce;Ke<Re&&ze>fe&&pe.push(se),fe+=xe}return pe}function B(te,re,ce){var pe=m(re)[0];if(pe!==void 0){var fe=pe.rowBlocks,se=pe.calcdata,de=ve(fe,fe.length),be=pe.calcdata.groupHeight-Y(pe),xe=se.scrollY=Math.max(0,Math.min(de-be,se.scrollY)),ke=z(fe,xe,be);ke.length===1&&(ke[0]===fe.length-1?ke.unshift(ke[0]-1):ke.push(ke[0]+1)),ke[0]%2&&ke.reverse(),re.each(function(Re,Ke){Re.page=ke[Ke],Re.scrollY=xe}),re.attr("transform",function(Re){var Ke=ve(Re.rowBlocks,Re.page)-Re.scrollY;return n(0,Ke)}),te&&(V(te,ce,re,ke,pe.prevPages,pe,0),V(te,ce,re,ke,pe.prevPages,pe,1),b(ce,te))}}function H(te,re,ce,pe){return function(se){var de=se.calcdata?se.calcdata:se,be=re.filter(function(Ke){return de.key===Ke.key}),xe=ce||de.scrollbarState.dragMultiplier,ke=de.scrollY;de.scrollY=pe===void 0?de.scrollY+xe*a.event.dy:pe;var Re=be.selectAll("."+r.cn.yColumn).selectAll("."+r.cn.columnBlock).filter(G);return B(te,Re,be),de.scrollY===ke}}function V(te,re,ce,pe,fe,se,de){var be=pe[de]!==fe[de];be&&(clearTimeout(se.currentRepaint[de]),se.currentRepaint[de]=setTimeout(function(){var xe=ce.filter(function(ke,Re){return Re===de&&pe[Re]!==fe[Re]});y(te,re,xe,ce),fe[de]=pe[de]}))}function Z(te,re,ce,pe){return function(){var se=a.select(re.parentNode);se.each(function(de){var be=de.fragments;se.selectAll("tspan.line").each(function(Ee,Ae){be[Ae].width=this.getComputedTextLength()});var xe=be[be.length-1].width,ke=be.slice(0,-1),Re=[],Ke,ze,Je=0,qe=de.column.columnWidth-2*r.cellPad;for(de.value="";ke.length;)Ke=ke.shift(),ze=Ke.width+xe,Je+ze>qe&&(de.value+=Re.join(r.wrapSpacer)+r.lineBreaker,Re=[],Je=0),Re.push(Ke.text),Je+=ze;Je&&(de.value+=Re.join(r.wrapSpacer)),de.wrapped=!0}),se.selectAll("tspan.line").remove(),C(se.select("."+r.cn.cellText),ce,te,pe),a.select(re.parentNode.parentNode).call(ne)}}function q(te,re,ce,pe,fe){return function(){if(!fe.settledY){var de=a.select(re.parentNode),be=ae(fe),xe=fe.key-be.firstRowIndex,ke=be.rows[xe].rowHeight,Re=fe.cellHeightMayIncrease?re.parentNode.getBoundingClientRect().height+2*r.cellPad:ke,Ke=Math.max(Re,ke),ze=Ke-be.rows[xe].rowHeight;ze&&(be.rows[xe].rowHeight=Ke,te.selectAll("."+r.cn.columnCell).call(ne),B(null,te.filter(G),0),b(ce,pe,!0)),de.attr("transform",function(){var Je=this,qe=Je.parentNode,Ee=qe.getBoundingClientRect(),Ae=a.select(Je.parentNode).select("."+r.cn.cellRect).node().getBoundingClientRect(),Be=Je.transform.baseVal.consolidate(),$e=Ae.top-Ee.top+(Be?Be.matrix.f:r.cellPad);return n(J(fe,a.select(Je.parentNode).select("."+r.cn.cellTextHolder).node().getBoundingClientRect().width),$e)}),fe.settledY=!0}}}function J(te,re){switch(te.align){case"left":return r.cellPad;case"right":return te.column.columnWidth-(re||0)-r.cellPad;case"center":return(te.column.columnWidth-(re||0))/2;default:return r.cellPad}}function ne(te){te.attr("transform",function(re){var ce=re.rowBlocks[0].auxiliaryBlocks.reduce(function(de,be){return de+$(be,1/0)},0),pe=ae(re),fe=$(pe,re.key),se=fe+ce;return n(0,se)}).selectAll("."+r.cn.cellRect).attr("height",function(re){return ie(ae(re),re.key).rowHeight})}function ve(te,re){for(var ce=0,pe=re-1;pe>=0;pe--)ce+=j(te[pe]);return ce}function $(te,re){for(var ce=0,pe=0;pe<te.rows.length&&te.rows[pe].rowIndex<re;pe++)ce+=te.rows[pe].rowHeight;return ce}function j(te){var re=te.allRowsHeight;if(re!==void 0)return re;for(var ce=0,pe=0;pe<te.rows.length;pe++)ce+=te.rows[pe].rowHeight;return te.allRowsHeight=ce,ce}function ae(te){return te.rowBlocks[te.page]}function ie(te,re){return te.rows[re-te.firstRowIndex]}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"./constants":1319,"./data_preparation_helper":1320,"./data_split_helpers":1321,d3:169}],1325:[function(e,d,S){var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,u=e("../../components/colorscale/attributes"),c=e("../../plots/domain").attributes,t=e("../pie/attributes"),f=e("../sunburst/attributes"),n=e("./constants"),o=e("../../lib/extend").extendFlat;d.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:o({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,editType:"calc"},u("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:o({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:f.textinfo,texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:f.hoverinfo,hovertemplate:r({},{keys:n.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:o({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:f.root,domain:c({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"../sunburst/attributes":1299,"./constants":1328}],1326:[function(e,d,S){var r=e("../../plots/plots");S.name="treemap",S.plot=function(a,u,c,t){r.plotBasePlot(S.name,a,u,c,t)},S.clean=function(a,u,c,t){r.cleanBasePlot(S.name,a,u,c,t)}},{"../../plots/plots":891}],1327:[function(e,d,S){var r=e("../sunburst/calc");S.calc=function(a,u){return r.calc(a,u)},S.crossTraceCalc=function(a){return r._runCrossTraceCalc("treemap",a)}},{"../sunburst/calc":1301}],1328:[function(e,d,S){d.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1329:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../../components/color"),c=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,f=e("../bar/constants").TEXTPAD,n=e("../../components/colorscale"),o=n.hasColorscale,l=n.handleDefaults;d.exports=function(i,s,p,v){function m(E,R){return r.coerce(i,s,a,E,R)}var b=m("labels"),y=m("parents");if(!b||!b.length||!y||!y.length){s.visible=!1;return}var x=m("values");x&&x.length?m("branchvalues"):m("count"),m("level"),m("maxdepth");var w=m("tiling.packing");w==="squarify"&&m("tiling.squarifyratio"),m("tiling.flip"),m("tiling.pad");var g=m("text");m("texttemplate"),s.texttemplate||m("textinfo",Array.isArray(g)?"text+label":"label"),m("hovertext"),m("hovertemplate");var T=m("pathbar.visible"),M="auto";t(i,s,v,m,M,{hasPathbar:T,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),m("textposition");var P=s.textposition.indexOf("bottom")!==-1,L=m("marker.line.width");L&&m("marker.line.color",v.paper_bgcolor);var I=m("marker.colors"),C=s._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;C?l(i,s,v,m,{prefix:"marker.",cLetter:"c"}):m("marker.depthfade",!(I||[]).length);var k=s.textfont.size*2;m("marker.pad.t",P?k/4:k),m("marker.pad.l",k/4),m("marker.pad.r",k/4),m("marker.pad.b",P?k:k/4),C&&l(i,s,v,m,{prefix:"marker.",cLetter:"c"}),s._hovered={marker:{line:{width:2,color:u.contrast(v.paper_bgcolor)}}},T&&(m("pathbar.thickness",s.pathbar.textfont.size+2*f),m("pathbar.side"),m("pathbar.edgeshape")),m("sort"),m("root.color"),c(s,v,m),s._length=null}},{"../../components/color":643,"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/constants":923,"../bar/defaults":925,"./attributes":1325}],1330:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../lib/svg_text_utils"),t=e("./partition"),f=e("./style").styleOne,n=e("./constants"),o=e("../sunburst/helpers"),l=e("../sunburst/fx"),h=!0;d.exports=function(s,p,v,m,b){var y=b.barDifY,x=b.width,w=b.height,g=b.viewX,T=b.viewY,M=b.pathSlice,P=b.toMoveInsideSlice,L=b.strTransform,I=b.hasTransition,C=b.handleSlicesExit,k=b.makeUpdateSliceInterpolator,E=b.makeUpdateTextInterpolator,R={},O=s._fullLayout,N=p[0],G=N.trace,U=N.hierarchy,Y=x/G._entryDepth,z=o.listPath(v.data,"id"),B=t(U.copy(),[x,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();B=B.filter(function(V){var Z=z.indexOf(V.data.id);return Z===-1?!1:(V.x0=Y*Z,V.x1=Y*(Z+1),V.y0=y,V.y1=y+w,V.onPathbar=!0,!0)}),B.reverse(),m=m.data(B,o.getPtId),m.enter().append("g").classed("pathbar",!0),C(m,h,R,[x,w],M),m.order();var H=m;I&&(H=H.transition().each("end",function(){var V=r.select(this);o.setSliceCursor(V,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(V){V._hoverX=g(V.x1-Math.min(x,w)/2),V._hoverY=T(V.y1-w/2);var Z=r.select(this),q=a.ensureSingle(Z,"path","surface",function($){$.style("pointer-events","all")});I?q.transition().attrTween("d",function($){var j=k($,h,R,[x,w]);return function(ae){return M(j(ae))}}):q.attr("d",M),Z.call(l,v,s,p,{styleOne:f,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),q.call(f,V,G,{hovered:!1}),V._text=(o.getPtLabel(V)||"").split("<br>").join(" ")||"";var J=a.ensureSingle(Z,"g","slicetext"),ne=a.ensureSingle(J,"text","",function($){$.attr("data-notex",1)}),ve=a.ensureUniformFontSize(s,o.determineTextFont(G,V,O.font,{onPathbar:!0}));ne.text(V._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(u.font,ve).call(c.convertToTspans,s),V.textBB=u.bBox(ne.node()),V.transform=P(V,{fontSize:ve.size,onPathbar:!0}),V.transform.fontSize=ve.size,I?ne.transition().attrTween("transform",function($){var j=E($,h,R,[x,w]);return function(ae){return L(j(ae))}}):ne.attr("transform",L(V))})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1331:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../lib/svg_text_utils"),t=e("./partition"),f=e("./style").styleOne,n=e("./constants"),o=e("../sunburst/helpers"),l=e("../sunburst/fx"),h=e("../sunburst/plot").formatSliceLabel,i=!1;d.exports=function(p,v,m,b,y){var x=y.width,w=y.height,g=y.viewX,T=y.viewY,M=y.pathSlice,P=y.toMoveInsideSlice,L=y.strTransform,I=y.hasTransition,C=y.handleSlicesExit,k=y.makeUpdateSliceInterpolator,E=y.makeUpdateTextInterpolator,R=y.prevEntry,O={},N=p._fullLayout,G=v[0],U=G.trace,Y=U.textposition.indexOf("left")!==-1,z=U.textposition.indexOf("right")!==-1,B=U.textposition.indexOf("bottom")!==-1,H=!B&&!U.marker.pad.t||B&&!U.marker.pad.b,V=t(m,[x,w],{packing:U.tiling.packing,squarifyratio:U.tiling.squarifyratio,flipX:U.tiling.flip.indexOf("x")>-1,flipY:U.tiling.flip.indexOf("y")>-1,pad:{inner:U.tiling.pad,top:U.marker.pad.t,left:U.marker.pad.l,right:U.marker.pad.r,bottom:U.marker.pad.b}}),Z=V.descendants(),q=1/0,J=-1/0;Z.forEach(function(ae){var ie=ae.depth;ie>=U._maxDepth?(ae.x0=ae.x1=(ae.x0+ae.x1)/2,ae.y0=ae.y1=(ae.y0+ae.y1)/2):(q=Math.min(q,ie),J=Math.max(J,ie))}),b=b.data(Z,o.getPtId),U._maxVisibleLayers=isFinite(J)?J-q+1:0,b.enter().append("g").classed("slice",!0),C(b,i,O,[x,w],M),b.order();var ne=null;if(I&&R){var ve=o.getPtId(R);b.each(function(ae){ne===null&&o.getPtId(ae)===ve&&(ne={x0:ae.x0,x1:ae.x1,y0:ae.y0,y1:ae.y1})})}var $=function(){return ne||{x0:0,x1:x,y0:0,y1:w}},j=b;return I&&(j=j.transition().each("end",function(){var ae=r.select(this);o.setSliceCursor(ae,p,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(ae){var ie=o.isHeader(ae,U);ae._hoverX=g(ae.x1-U.marker.pad.r),ae._hoverY=T(B?ae.y1-U.marker.pad.b/2:ae.y0+U.marker.pad.t/2);var te=r.select(this),re=a.ensureSingle(te,"path","surface",function(se){se.style("pointer-events","all")});I?re.transition().attrTween("d",function(se){var de=k(se,i,$(),[x,w]);return function(be){return M(de(be))}}):re.attr("d",M),te.call(l,m,p,v,{styleOne:f,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,p,{isTransitioning:p._transitioning}),re.call(f,ae,U,{hovered:!1}),ae.x0===ae.x1||ae.y0===ae.y1?ae._text="":ie?ae._text=H?"":o.getPtLabel(ae)||"":ae._text=h(ae,m,U,v,N)||"";var ce=a.ensureSingle(te,"g","slicetext"),pe=a.ensureSingle(ce,"text","",function(se){se.attr("data-notex",1)}),fe=a.ensureUniformFontSize(p,o.determineTextFont(U,ae,N.font));pe.text(ae._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":Y||ie?"start":"middle").call(u.font,fe).call(c.convertToTspans,p),ae.textBB=u.bBox(pe.node()),ae.transform=P(ae,{fontSize:fe.size,isHeader:ie}),ae.transform.fontSize=fe.size,I?pe.transition().attrTween("transform",function(se){var de=E(se,i,$(),[x,w]);return function(be){return L(de(be))}}):pe.attr("transform",L(ae))}),ne}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"../sunburst/plot":1309,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1332:[function(e,d,S){d.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1325,"./base_plot":1326,"./calc":1327,"./defaults":1329,"./layout_attributes":1333,"./layout_defaults":1334,"./plot":1336,"./style":1337}],1333:[function(e,d,S){d.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1334:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(c,t){function f(n,o){return r.coerce(c,t,a,n,o)}f("treemapcolorway",t.colorway),f("extendtreemapcolors")}},{"../../lib":778,"./layout_attributes":1333}],1335:[function(e,d,S){var r=e("d3-hierarchy");d.exports=function(t,f,n){var o=n.flipX,l=n.flipY,h=n.packing==="dice-slice",i=n.pad[l?"bottom":"top"],s=n.pad[o?"right":"left"],p=n.pad[o?"left":"right"],v=n.pad[l?"top":"bottom"],m;h&&(m=s,s=i,i=m,m=p,p=v,v=m);var b=r.treemap().tile(a(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(s).paddingRight(p).paddingTop(i).paddingBottom(v).size(h?[f[1],f[0]]:f)(t);return(h||o||l)&&u(b,f,{swapXY:h,flipX:o,flipY:l}),b};function a(c,t){switch(c){case"squarify":return r.treemapSquarify.ratio(t);case"binary":return r.treemapBinary;case"dice":return r.treemapDice;case"slice":return r.treemapSlice;default:return r.treemapSliceDice}}function u(c,t,f){var n;f.swapXY&&(n=c.x0,c.x0=c.y0,c.y0=n,n=c.x1,c.x1=c.y1,c.y1=n),f.flipX&&(n=c.x0,c.x0=t[0]-c.x1,c.x1=t[0]-n),f.flipY&&(n=c.y0,c.y0=t[1]-c.y1,c.y1=t[1]-n);var o=c.children;if(o)for(var l=0;l<o.length;l++)u(o[l],t,f)}},{"d3-hierarchy":161}],1336:[function(e,d,S){var r=e("d3"),a=e("../sunburst/helpers"),u=e("../../lib"),c=e("../bar/constants").TEXTPAD,t=e("../bar/plot"),f=t.toMoveInsideBar,n=e("../bar/uniform_text"),o=n.recordMinTextSize,l=n.clearMinTextSize,h=e("../bar/style").resizeText,i=e("./constants"),s=e("./draw_descendants"),p=e("./draw_ancestors");d.exports=function(b,y,x,w){var g=b._fullLayout,T=g._treemaplayer,M,P,L=!x;if(l("treemap",g),M=T.selectAll("g.trace.treemap").data(y,function(C){return C[0].trace.uid}),M.enter().append("g").classed("trace",!0).classed("treemap",!0),M.order(),!g.uniformtext.mode&&a.hasTransition(x)){w&&(P=w());var I=r.transition().duration(x.duration).ease(x.easing).each("end",function(){P&&P()}).each("interrupt",function(){P&&P()});I.each(function(){T.selectAll("g.trace").each(function(C){m(b,C,this,x)})})}else M.each(function(C){m(b,C,this,x)}),g.uniformtext.mode&&h(b,g._treemaplayer.selectAll(".trace"),"treemap");L&&M.exit().remove()};function v(b){return a.isHierarchyRoot(b)?"":a.getPtId(b)}function m(b,y,x,w){var g=b._fullLayout,T=y[0],M=T.trace,P=T.hierarchy,L=a.findEntryWithLevel(P,M.level),I=r.select(x),C=I.selectAll("g.pathbar"),k=I.selectAll("g.slice");if(!L){C.remove(),k.remove();return}var E=a.isHierarchyRoot(L),R=!g.uniformtext.mode&&a.hasTransition(w),O=a.getMaxDepth(M),N=function(Ne){return Ne.data.depth-L.data.depth<O},G=g._size,U=M.domain,Y=G.w*(U.x[1]-U.x[0]),z=G.h*(U.y[1]-U.y[0]),B=Y,H=M.pathbar.thickness,V=M.marker.line.width+i.gapWithPathbar,Z=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?z+V:-(H+V):0,q={x0:B,x1:B,y0:Z,y1:Z+H},J=function(Ne,st,_t){var Ot=M.tiling.pad,Wt=function(Mt){return Mt-Ot<=st.x0},Et=function(Mt){return Mt+Ot>=st.x1},jt=function(Mt){return Mt-Ot<=st.y0},Zt=function(Mt){return Mt+Ot>=st.y1};return{x0:Wt(Ne.x0-Ot)?0:Et(Ne.x0-Ot)?_t[0]:Ne.x0,x1:Wt(Ne.x1+Ot)?0:Et(Ne.x1+Ot)?_t[0]:Ne.x1,y0:jt(Ne.y0-Ot)?0:Zt(Ne.y0-Ot)?_t[1]:Ne.y0,y1:jt(Ne.y1+Ot)?0:Zt(Ne.y1+Ot)?_t[1]:Ne.y1}},ne=null,ve={},$={},j=null,ae=function(Ne,st){return st?ve[v(Ne)]:$[v(Ne)]},ie=function(Ne,st,_t,Ot){if(st)return ve[v(P)]||q;var Wt=$[M.level]||_t;return N(Ne)?J(Ne,Wt,Ot):{}};T.hasMultipleRoots&&E&&O++,M._maxDepth=O,M._backgroundColor=g.paper_bgcolor,M._entryDepth=L.data.depth,M._atRootLevel=E;var te=-Y/2+G.l+G.w*(U.x[1]+U.x[0])/2,re=-z/2+G.t+G.h*(1-(U.y[1]+U.y[0])/2),ce=function(Ne){return te+Ne},pe=function(Ne){return re+Ne},fe=pe(0),se=ce(0),de=function(Ne){return se+Ne},be=function(Ne){return fe+Ne};function xe(Ne,st){return Ne+","+st}var ke=de(0),Re=function(Ne){Ne.x=Math.max(ke,Ne.x)},Ke=M.pathbar.edgeshape,ze=function(Ne){var st=de(Math.max(Math.min(Ne.x0,Ne.x0),0)),_t=de(Math.min(Math.max(Ne.x1,Ne.x1),B)),Ot=be(Ne.y0),Wt=be(Ne.y1),Et=H/2,jt={},Zt={};jt.x=st,Zt.x=_t,jt.y=Zt.y=(Ot+Wt)/2;var Mt={x:st,y:Ot},At={x:_t,y:Ot},ft={x:_t,y:Wt},ot={x:st,y:Wt};return Ke===">"?(Mt.x-=Et,At.x-=Et,ft.x-=Et,ot.x-=Et):Ke==="/"?(ft.x-=Et,ot.x-=Et,jt.x-=Et/2,Zt.x-=Et/2):Ke==="\\"?(Mt.x-=Et,At.x-=Et,jt.x-=Et/2,Zt.x-=Et/2):Ke==="<"&&(jt.x-=Et,Zt.x-=Et),Re(Mt),Re(ot),Re(jt),Re(At),Re(ft),Re(Zt),"M"+xe(Mt.x,Mt.y)+"L"+xe(At.x,At.y)+"L"+xe(Zt.x,Zt.y)+"L"+xe(ft.x,ft.y)+"L"+xe(ot.x,ot.y)+"L"+xe(jt.x,jt.y)+"Z"},Je=function(Ne){var st=ce(Ne.x0),_t=ce(Ne.x1),Ot=pe(Ne.y0),Wt=pe(Ne.y1),Et=_t-st,jt=Wt-Ot;if(!Et||!jt)return"";var Zt=0,Mt=Et>2*Zt&&jt>2*Zt?Zt:0,At=function(ft,ot){return Mt?"a"+xe(Mt,Mt)+" 0 0 1 "+xe(ft,ot):""};return"M"+xe(st,Ot+Mt)+At(Mt,-Mt)+"L"+xe(_t-Mt,Ot)+At(Mt,Mt)+"L"+xe(_t,Wt-Mt)+At(-Mt,Mt)+"L"+xe(st+Mt,Wt)+At(-Mt,-Mt)+"Z"},qe=function(Ne,st){var _t=Ne.x0,Ot=Ne.x1,Wt=Ne.y0,Et=Ne.y1,jt=Ne.textBB,Zt=function(He){return M.textposition.indexOf(He)!==-1},Mt=Zt("bottom"),At=Zt("top")||st.isHeader&&!Mt,ft=At?"start":Mt?"end":"middle",ot=Zt("right"),Te=Zt("left")||st.onPathbar,Le=Te?-1:ot?1:0,Ve=M.marker.pad;if(st.isHeader){if(_t+=Ve.l-c,Ot-=Ve.r-c,_t>=Ot){var Qe=(_t+Ot)/2;_t=Qe,Ot=Qe}var Me;Mt?(Me=Et-Ve.b,Wt<Me&&Me<Et&&(Wt=Me)):(Me=Wt+Ve.t,Wt<Me&&Me<Et&&(Et=Me))}var Ie=f(_t,Ot,Wt,Et,jt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:Le});return Ie.fontSize=st.fontSize,Ie.targetX=ce(Ie.targetX),Ie.targetY=pe(Ie.targetY),isNaN(Ie.targetX)||isNaN(Ie.targetY)?{}:(_t!==Ot&&Wt!==Et&&o(M.type,Ie,g),{scale:Ie.scale,rotate:Ie.rotate,textX:Ie.textX,textY:Ie.textY,anchorX:Ie.anchorX,anchorY:Ie.anchorY,targetX:Ie.targetX,targetY:Ie.targetY})},Ee=function(Ne,st){for(var _t,Ot=0,Wt=Ne;!_t&&Ot<O;)Ot++,Wt=Wt.parent,Wt?_t=ae(Wt,st):Ot=O;return _t||{}},Ae=function(Ne,st,_t,Ot){var Wt=ae(Ne,st),Et;if(st)Et=q;else{var jt=ae(L,st);jt?Et=J(Ne,jt,Ot):Et={}}return r.interpolate(Wt,Et)},Be=function(Ne,st,_t,Ot){var Wt=ae(Ne,st),Et;if(Wt)Et=Wt;else if(st)Et=q;else if(ne)if(Ne.parent){var jt=j||_t;jt&&!st?Et=J(Ne,jt,Ot):(Et={},u.extendFlat(Et,Ee(Ne,st)))}else Et=Ne;else Et={};return r.interpolate(Et,{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1})},$e=function(Ne,st,_t,Ot){var Wt=ae(Ne,st),Et={},jt=ie(Ne,st,_t,Ot);u.extendFlat(Et,{transform:qe({x0:jt.x0,x1:jt.x1,y0:jt.y0,y1:jt.y1,textBB:Ne.textBB,_text:Ne._text},{isHeader:a.isHeader(Ne,M)})}),Wt?Et=Wt:Ne.parent&&u.extendFlat(Et,Ee(Ne,st));var Zt=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&o(M.type,Zt,g),r.interpolate(Et,{transform:{scale:Zt.scale,rotate:Zt.rotate,textX:Zt.textX,textY:Zt.textY,anchorX:Zt.anchorX,anchorY:Zt.anchorY,targetX:Zt.targetX,targetY:Zt.targetY}})},xt=function(Ne,st,_t,Ot,Wt){var Et=Ot[0],jt=Ot[1];R?Ne.exit().transition().each(function(){var Zt=r.select(this),Mt=Zt.select("path.surface");Mt.transition().attrTween("d",function(ft){var ot=Ae(ft,st,_t,[Et,jt]);return function(Te){return Wt(ot(Te))}});var At=Zt.select("g.slicetext");At.attr("opacity",0)}).remove():Ne.exit().remove()},bt=function(Ne){var st=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&o(M.type,st,g),u.getTextTransform({textX:st.textX,textY:st.textY,anchorX:st.anchorX,anchorY:st.anchorY,targetX:st.targetX,targetY:st.targetY,scale:st.scale,rotate:st.rotate})};R&&(C.each(function(Ne){ve[v(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(ve[v(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate})}),k.each(function(Ne){$[v(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&($[v(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate}),!ne&&a.isEntry(Ne)&&(ne=Ne)})),j=s(b,y,L,k,{width:Y,height:z,viewX:ce,viewY:pe,pathSlice:Je,toMoveInsideSlice:qe,prevEntry:ne,makeUpdateSliceInterpolator:Be,makeUpdateTextInterpolator:$e,handleSlicesExit:xt,hasTransition:R,strTransform:bt}),M.pathbar.visible?p(b,y,L,C,{barDifY:Z,width:B,height:H,viewX:de,viewY:be,pathSlice:ze,toMoveInsideSlice:qe,makeUpdateSliceInterpolator:Be,makeUpdateTextInterpolator:$e,handleSlicesExit:xt,hasTransition:R,strTransform:bt}):C.remove()}},{"../../lib":778,"../bar/constants":923,"../bar/plot":932,"../bar/style":935,"../bar/uniform_text":937,"../sunburst/helpers":1305,"./constants":1328,"./draw_ancestors":1330,"./draw_descendants":1331,d3:169}],1337:[function(e,d,S){var r=e("d3"),a=e("../../components/color"),u=e("../../lib"),c=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function f(o){var l=o._fullLayout._treemaplayer.selectAll(".trace");t(o,l,"treemap"),l.each(function(h){var i=r.select(this),s=h[0],p=s.trace;i.style("opacity",p.opacity),i.selectAll("path.surface").each(function(v){r.select(this).call(n,v,p,{hovered:!1})})})}function n(o,l,h,i){var s=(i||{}).hovered,p=l.data.data,v=p.i,m,b,y=p.color,x=c.isHierarchyRoot(l),w=1;if(s)m=h._hovered.marker.line.color,b=h._hovered.marker.line.width;else if(x&&y===h.root.color)w=100,m="rgba(0,0,0,0)",b=0;else if(m=u.castOption(h,v,"marker.line.color")||a.defaultLine,b=u.castOption(h,v,"marker.line.width")||0,!h._hasColorscale&&!l.onPathbar){var g=h.marker.depthfade;if(g){var T=a.combine(a.addOpacity(h._backgroundColor,.75),y),M;if(g===!0){var P=c.getMaxDepth(h);isFinite(P)?c.isLeaf(l)?M=0:M=h._maxVisibleLayers-(l.data.depth-h._entryDepth):M=l.data.height+1}else M=l.data.depth-h._entryDepth,h._atRootLevel||M++;if(M>0)for(var L=0;L<M;L++){var I=.5*L/M;y=a.combine(a.addOpacity(T,I),y)}}}o.style("stroke-width",b).call(a.fill,y).call(a.stroke,m).style("opacity",w)}d.exports={style:f,styleOne:n}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,"../sunburst/helpers":1305,d3:169}],1338:[function(e,d,S){var r=e("../box/attributes"),a=e("../../lib/extend").extendFlat;d.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,name:a({},r.name,{}),orientation:a({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:a({},r.boxpoints,{}),jitter:a({},r.jitter,{}),pointpos:a({},r.pointpos,{}),width:a({},r.width,{}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":768,"../box/attributes":946}],1339:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../box/calc"),c=e("./helpers"),t=e("../../constants/numerical").BADNUM;d.exports=function(h,i){var s=u(h,i);if(s[0].t.empty)return s;for(var p=h._fullLayout,v=a.getFromId(h,i[i.orientation==="h"?"xaxis":"yaxis"]),m=1/0,b=-1/0,y=0,x=0,w=0;w<s.length;w++){var g=s[w],T=g.pts.map(c.extractVal),M=g.bandwidth=n(i,g,T),P=g.span=o(i,g,v,M);if(g.min===g.max&&M===0)P=g.span=[g.min,g.max],g.density=[{v:1,t:P[0]}],g.bandwidth=M,y=Math.max(y,1);else{var L=P[1]-P[0],I=Math.ceil(L/(M/3)),C=L/I;if(!isFinite(C)||!isFinite(I))return r.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var k=c.makeKDE(g,i,T);g.density=new Array(I);for(var E=0,R=P[0];R<P[1]+C/2;E++,R+=C){var O=k(R);g.density[E]={v:O,t:R},y=Math.max(y,O)}}x=Math.max(x,T.length),m=Math.min(m,P[0]),b=Math.max(b,P[1])}var N=a.findExtremes(v,[m,b],{padded:!0});if(i._extremes[v._id]=N,i.width)s[0].t.maxKDE=y;else{var G=p._violinScaleGroupStats,U=i.scalegroup,Y=G[U];Y?(Y.maxKDE=Math.max(Y.maxKDE,y),Y.maxCount=Math.max(Y.maxCount,x)):G[U]={maxKDE:y,maxCount:x}}return s[0].t.labels.kde=r._(h,"kde:"),s};function f(l,h,i){var s=Math.min(h,i/1.349);return 1.059*s*Math.pow(l,-.2)}function n(l,h,i){var s=h.max-h.min;if(!s)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,s/1e4);var p=i.length,v=r.stdev(i,p-1,h.mean);return Math.max(f(p,v,h.q3-h.q1),s/100)}function o(l,h,i,s){var p=l.spanmode,v=l.span||[],m=[h.min,h.max],b=[h.min-2*s,h.max+2*s],y;function x(g){var T=v[g],M=i.type==="multicategory"?i.r2c(T):i.d2c(T,0,l[h.valLetter+"calendar"]);return M===t?b[g]:M}p==="soft"?y=b:p==="hard"?y=m:y=[x(0),x(1)];var w={type:"linear",range:y};return a.setConvert(w),w.cleanRange(),y}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../box/calc":947,"./helpers":1342}],1340:[function(e,d,S){var r=e("../box/cross_trace_calc").setPositionOffset,a=["v","h"];d.exports=function(c,t){for(var f=c.calcdata,n=t.xaxis,o=t.yaxis,l=0;l<a.length;l++){for(var h=a[l],i=h==="h"?o:n,s=[],p=0;p<f.length;p++){var v=f[p],m=v[0].t,b=v[0].trace;b.visible===!0&&b.type==="violin"&&!m.empty&&b.orientation===h&&b.xaxis===n._id&&b.yaxis===o._id&&s.push(p)}r("violin",c,s,i)}}},{"../box/cross_trace_calc":948}],1341:[function(e,d,S){var r=e("../../lib"),a=e("../../components/color"),u=e("../box/defaults"),c=e("./attributes");d.exports=function(f,n,o,l){function h(C,k){return r.coerce(f,n,c,C,k)}function i(C,k){return r.coerce2(f,n,c,C,k)}if(u.handleSampleDefaults(f,n,h,l),n.visible!==!1){h("bandwidth"),h("side");var s=h("width");s||(h("scalegroup",n.name),h("scalemode"));var p=h("span"),v;Array.isArray(p)&&(v="manual"),h("spanmode",v);var m=h("line.color",(f.marker||{}).color||o),b=h("line.width"),y=h("fillcolor",a.addOpacity(n.line.color,.5));u.handlePointsDefaults(f,n,h,{prefix:""});var x=i("box.width"),w=i("box.fillcolor",y),g=i("box.line.color",m),T=i("box.line.width",b),M=h("box.visible",Boolean(x||w||g||T));M||(n.box={visible:!1});var P=i("meanline.color",m),L=i("meanline.width",b),I=h("meanline.visible",Boolean(P||L));I||(n.meanline={visible:!1})}}},{"../../components/color":643,"../../lib":778,"../box/defaults":949,"./attributes":1338}],1342:[function(e,d,S){var r=e("../../lib"),a={gaussian:function(u){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*u*u)}};S.makeKDE=function(u,c,t){var f=t.length,n=a.gaussian,o=u.bandwidth,l=1/(f*o);return function(h){for(var i=0,s=0;s<f;s++)i+=n((h-t[s])/o);return l*i}},S.getPositionOnKdePath=function(u,c,t){var f,n;c.orientation==="h"?(f="y",n="x"):(f="x",n="y");var o=r.findPointOnPath(u.path,t,n,{pathLength:u.pathLength}),l=u.posCenterPx,h=o[f],i=c.side==="both"?2*l-h:l;return[h,i]},S.getKdeValue=function(u,c,t){var f=u.pts.map(S.extractVal),n=S.makeKDE(u,c,f);return n(t)/u.posDensityScale},S.extractVal=function(u){return u.v}},{"../../lib":778}],1343:[function(e,d,S){var r=e("../../lib"),a=e("../../plots/cartesian/axes"),u=e("../box/hover"),c=e("./helpers");d.exports=function(f,n,o,l,h){var i=f.cd,s=i[0].trace,p=s.hoveron,v=p.indexOf("violins")!==-1,m=p.indexOf("kde")!==-1,b=[],y,x;if(v||m){var w=u.hoverOnBoxes(f,n,o,l);if(m&&w.length>0){var g=f.xa,T=f.ya,M,P,L,I,C;s.orientation==="h"?(C=n,M="y",L=T,P="x",I=g):(C=o,M="x",L=g,P="y",I=T);var k=i[f.index];if(C>=k.span[0]&&C<=k.span[1]){var E=r.extendFlat({},f),R=I.c2p(C,!0),O=c.getKdeValue(k,s,C),N=c.getPositionOnKdePath(k,s,R),G=L._offset,U=L._length;E[M+"0"]=N[0],E[M+"1"]=N[1],E[P+"0"]=E[P+"1"]=R,E[P+"Label"]=P+": "+a.hoverLabelText(I,C)+", "+i[0].t.labels.kde+" "+O.toFixed(3),E.spikeDistance=w[0].spikeDistance;var Y=M+"Spike";E[Y]=w[0][Y],w[0].spikeDistance=void 0,w[0][Y]=void 0,E.hovertemplate=!1,b.push(E),x={stroke:f.color},x[M+"1"]=r.constrain(G+N[0],G,G+U),x[M+"2"]=r.constrain(G+N[1],G,G+U),x[P+"1"]=x[P+"2"]=I._offset+R}}v&&(b=b.concat(w))}p.indexOf("points")!==-1&&(y=u.hoverOnPoints(f,n,o));var z=h.selectAll(".violinline-"+s.uid).data(x?[0]:[]);return z.enter().append("line").classed("violinline-"+s.uid,!0).attr("stroke-width",1.5),z.exit().remove(),z.attr(x),l==="closest"?y?[y]:b:(y&&b.push(y),b)}},{"../../lib":778,"../../plots/cartesian/axes":828,"../box/hover":951,"./helpers":1342}],1344:[function(e,d,S){d.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../box/defaults":949,"../box/select":956,"../scatter/style":1211,"./attributes":1338,"./calc":1339,"./cross_trace_calc":1340,"./defaults":1341,"./hover":1343,"./layout_attributes":1345,"./layout_defaults":1346,"./plot":1347,"./style":1348}],1345:[function(e,d,S){var r=e("../box/layout_attributes"),a=e("../../lib").extendFlat;d.exports={violinmode:a({},r.boxmode,{}),violingap:a({},r.boxgap,{}),violingroupgap:a({},r.boxgroupgap,{})}},{"../../lib":778,"../box/layout_attributes":953}],1346:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes"),u=e("../box/layout_defaults");d.exports=function(t,f,n){function o(l,h){return r.coerce(t,f,a,l,h)}u._supply(t,f,n,o,"violin")}},{"../../lib":778,"../box/layout_defaults":954,"./layout_attributes":1345}],1347:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../box/plot"),t=e("../scatter/line_points"),f=e("./helpers");d.exports=function(o,l,h,i){var s=o._fullLayout,p=l.xaxis,v=l.yaxis;function m(b){var y=t(b,{xaxis:p,yaxis:v,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return u.smoothopen(y[0],1)}a.makeTraceGroups(i,h,"trace violins").each(function(b){var y=r.select(this),x=b[0],w=x.t,g=x.trace;if(g.visible!==!0||w.empty){y.remove();return}var T=w.bPos,M=w.bdPos,P=l[w.valLetter+"axis"],L=l[w.posLetter+"axis"],I=g.side==="both",C=I||g.side==="positive",k=I||g.side==="negative",E=y.selectAll("path.violin").data(a.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(B){var H=r.select(this),V=B.density,Z=V.length,q=L.c2l(B.pos+T,!0),J=L.l2p(q),ne;if(g.width)ne=w.maxKDE/M;else{var ve=s._violinScaleGroupStats[g.scalegroup];ne=g.scalemode==="count"?ve.maxKDE/M*(ve.maxCount/B.pts.length):ve.maxKDE/M}var $,j,ae,ie,te,re,ce;if(C){for(re=new Array(Z),ie=0;ie<Z;ie++)ce=re[ie]={},ce[w.posLetter]=q+V[ie].v/ne,ce[w.valLetter]=P.c2l(V[ie].t,!0);$=m(re)}if(k){for(re=new Array(Z),te=0,ie=Z-1;te<Z;te++,ie--)ce=re[te]={},ce[w.posLetter]=q-V[ie].v/ne,ce[w.valLetter]=P.c2l(V[ie].t,!0);j=m(re)}if(I)ae=$+"L"+j.substr(1)+"Z";else{var pe=[J,P.c2p(V[0].t)],fe=[J,P.c2p(V[Z-1].t)];g.orientation==="h"&&(pe.reverse(),fe.reverse()),C?ae="M"+pe+"L"+$.substr(1)+"L"+fe:ae="M"+fe+"L"+j.substr(1)+"L"+pe}H.attr("d",ae),B.posCenterPx=J,B.posDensityScale=ne*M,B.path=H.node(),B.pathLength=B.path.getTotalLength()/(I?2:1)});var R=g.box,O=R.width,N=(R.line||{}).width,G,U;I?(G=M*O,U=0):C?(G=[0,M*O/2],U=N*{x:1,y:-1}[w.posLetter]):(G=[M*O/2,0],U=N*{x:-1,y:1}[w.posLetter]),c.plotBoxAndWhiskers(y,{pos:L,val:P},g,{bPos:T,bdPos:G,bPosPxOffset:U}),c.plotBoxMean(y,{pos:L,val:P},g,{bPos:T,bdPos:G,bPosPxOffset:U});var Y;!g.box.visible&&g.meanline.visible&&(Y=a.identity);var z=y.selectAll("path.meanline").data(Y||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(B){var H=P.c2p(B.mean,!0),V=f.getPositionOnKdePath(B,g,H);r.select(this).attr("d",g.orientation==="h"?"M"+H+","+V[0]+"V"+V[1]:"M"+V[0]+","+H+"H"+V[1])}),c.plotPoints(y,{x:p,y:v},g,w)})}},{"../../components/drawing":665,"../../lib":778,"../box/plot":955,"../scatter/line_points":1201,"./helpers":1342,d3:169}],1348:[function(e,d,S){var r=e("d3"),a=e("../../components/color"),u=e("../scatter/style").stylePoints;d.exports=function(t){var f=r.select(t).selectAll("g.trace.violins");f.style("opacity",function(n){return n[0].trace.opacity}),f.each(function(n){var o=n[0].trace,l=r.select(this),h=o.box||{},i=h.line||{},s=o.meanline||{},p=s.width;l.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(a.stroke,o.line.color).call(a.fill,o.fillcolor),l.selectAll("path.box").style("stroke-width",i.width+"px").call(a.stroke,i.color).call(a.fill,h.fillcolor);var v={"stroke-width":p+"px","stroke-dasharray":2*p+"px,"+p+"px"};l.selectAll("path.mean").style(v).call(a.stroke,s.color),l.selectAll("path.meanline").style(v).call(a.stroke,s.color),u(l,o,t)})}},{"../../components/color":643,"../scatter/style":1211,d3:169}],1349:[function(e,d,S){var r=e("../../components/colorscale/attributes"),a=e("../isosurface/attributes"),u=e("../surface/attributes"),c=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,n=d.exports=f(t({x:a.x,y:a.y,z:a.z,value:a.value,isomin:a.isomin,isomax:a.isomax,surface:a.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:a.slices,caps:a.caps,text:a.text,hovertext:a.hovertext,hovertemplate:a.hovertemplate},r("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:a.colorbar,opacity:a.opacity,opacityscale:u.opacityscale,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:t({},c.hoverinfo),showlegend:t({},c.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../isosurface/attributes":1123,"../surface/attributes":1311}],1350:[function(e,d,S){var r=e("gl-mesh3d"),a=e("../../lib/gl_format_color").parseColorScale,u=e("../../lib/str2rgbarray"),c=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),f=e("../isosurface/convert").findNearestOnAxis,n=e("../isosurface/convert").generateIsoMeshes;function o(i,s,p){this.scene=i,this.uid=p,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var l=o.prototype;l.handlePick=function(i){if(i.object===this.mesh){var s=i.data.index,p=this.data._meshX[s],v=this.data._meshY[s],m=this.data._meshZ[s],b=this.data._Ys.length,y=this.data._Zs.length,x=f(p,this.data._Xs).id,w=f(v,this.data._Ys).id,g=f(m,this.data._Zs).id,T=i.index=g+y*w+y*b*x;i.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&M[T]!==void 0?i.textLabel=M[T]:M&&(i.textLabel=M),!0}},l.update=function(i){var s=this.scene,p=s.fullSceneLayout;this.data=n(i);function v(w,g,T,M){return g.map(function(P){return w.d2l(P,0,M)*T})}var m=t(v(p.xaxis,i._meshX,s.dataScale[0],i.xcalendar),v(p.yaxis,i._meshY,s.dataScale[1],i.ycalendar),v(p.zaxis,i._meshZ,s.dataScale[2],i.zcalendar)),b=t(i._meshI,i._meshJ,i._meshK),y={positions:m,cells:b,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:u(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},x=c(i);y.vertexIntensity=i._meshIntensity,y.vertexIntensityBounds=[x.min,x.max],y.colormap=a(i),this.mesh.update(y)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(i,s){var p=i.glplot.gl,v=r({gl:p}),m=new o(i,v,s.uid);return v._trace=m,m.update(s),i.glplot.add(v),m}d.exports=h},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"../isosurface/convert":1125,"gl-mesh3d":309}],1351:[function(e,d,S){var r=e("../../lib"),a=e("./attributes"),u=e("../isosurface/defaults").supplyIsoDefaults,c=e("../surface/defaults").opacityscaleDefaults;d.exports=function(f,n,o,l){function h(i,s){return r.coerce(f,n,a,i,s)}u(f,n,o,l,h),c(f,n,l,h)}},{"../../lib":778,"../isosurface/defaults":1126,"../surface/defaults":1314,"./attributes":1349}],1352:[function(e,d,S){d.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"../isosurface/calc":1124,"./attributes":1349,"./convert":1350,"./defaults":1351}],1353:[function(e,d,S){var r=e("../bar/attributes"),a=e("../scatter/attributes").line,u=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,f=e("./constants"),n=e("../../lib/extend").extendFlat,o=e("../../components/color");function l(h){return{marker:{color:n({},r.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},r.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},r.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}d.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,hovertext:r.hovertext,hovertemplate:c({},{keys:f.eventDataKeys}),hoverinfo:n({},u.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:f.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:l(),decreasing:l(),totals:l(),connector:{line:{color:n({},a.color,{dflt:o.defaultLine}),width:n({},a.width,{editType:"plot"}),dash:a.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1355}],1354:[function(e,d,S){var r=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/align_period"),u=e("../../lib").mergeArray,c=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function f(o){return o==="a"||o==="absolute"}function n(o){return o==="t"||o==="total"}d.exports=function(l,h){var i=r.getFromId(l,h.xaxis||"x"),s=r.getFromId(l,h.yaxis||"y"),p,v,m,b;h.orientation==="h"?(p=i.makeCalcdata(h,"x"),m=s.makeCalcdata(h,"y"),v=a(h,s,"y",m),b=!!h.yperiodalignment):(p=s.makeCalcdata(h,"y"),m=i.makeCalcdata(h,"x"),v=a(h,i,"x",m),b=!!h.xperiodalignment);for(var y=Math.min(v.length,p.length),x=new Array(y),w=0,g,T=!1,M=0;M<y;M++){var P=p[M]||0,L=!1;(p[M]!==t||n(h.measure[M])||f(h.measure[M]))&&M+1<y&&(p[M+1]!==t||n(h.measure[M+1])||f(h.measure[M+1]))&&(L=!0);var I=x[M]={i:M,p:v[M],s:P,rawS:P,cNext:L};f(h.measure[M])?(w=I.s,I.isSum=!0,I.dir="totals",I.s=w):n(h.measure[M])?(I.isSum=!0,I.dir="totals",I.s=w):(I.isSum=!1,I.dir=I.rawS<0?"decreasing":"increasing",g=I.s,I.s=w+g,w+=g),I.dir==="totals"&&(T=!0),b&&(x[M].orig_p=m[M]),h.ids&&(I.id=String(h.ids[M])),I.v=(h.base||0)+w}return x.length&&(x[0].hasTotals=T),u(h.text,x,"tx"),u(h.hovertext,x,"htx"),c(x,h),x}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189}],1355:[function(e,d,S){d.exports={eventDataKeys:["initial","delta","final"]}},{}],1356:[function(e,d,S){var r=e("../bar/cross_trace_calc").setGroupPositions;d.exports=function(u,c){var t=u._fullLayout,f=u._fullData,n=u.calcdata,o=c.xaxis,l=c.yaxis,h=[],i=[],s=[],p,v;for(v=0;v<f.length;v++){var m=f[v];m.visible===!0&&m.xaxis===o._id&&m.yaxis===l._id&&m.type==="waterfall"&&(p=n[v],m.orientation==="h"?s.push(p):i.push(p),h.push(p))}var b={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(r(u,o,l,i,b),r(u,l,o,s,b),v=0;v<h.length;v++){p=h[v];for(var y=0;y<p.length;y++){var x=p[y];x.isSum===!1&&(x.s0+=y===0?0:p[y-1].s),y+1<p.length&&(p[y].nextP0=p[y+1].p0,p[y].nextS0=p[y+1].s0)}}}},{"../bar/cross_trace_calc":924}],1357:[function(e,d,S){var r=e("../../lib"),a=e("../bar/defaults").handleGroupingDefaults,u=e("../bar/defaults").handleText,c=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),f=e("./attributes"),n=e("../../components/color"),o=e("../../constants/delta.js"),l=o.INCREASING.COLOR,h=o.DECREASING.COLOR,i="#4499FF";function s(m,b,y){m(b+".marker.color",y),m(b+".marker.line.color",n.defaultLine),m(b+".marker.line.width")}function p(m,b,y,x){function w(L,I){return r.coerce(m,b,f,L,I)}var g=c(m,b,x,w);if(!g){b.visible=!1;return}t(m,b,x,w),w("measure"),w("orientation",b.x&&!b.y?"h":"v"),w("base"),w("offset"),w("width"),w("text"),w("hovertext"),w("hovertemplate");var T=w("textposition");u(m,b,x,w,T,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),b.textposition!=="none"&&(w("texttemplate"),b.texttemplate||w("textinfo")),s(w,"increasing",l),s(w,"decreasing",h),s(w,"totals",i);var M=w("connector.visible");if(M){w("connector.mode");var P=w("connector.line.width");P&&(w("connector.line.color"),w("connector.line.dash"))}}function v(m,b){var y,x;function w(T){return r.coerce(x._input,x,f,T)}if(b.waterfallmode==="group")for(var g=0;g<m.length;g++)x=m[g],y=x._input,a(y,x,b,w)}d.exports={supplyDefaults:p,crossTraceDefaults:v}},{"../../components/color":643,"../../constants/delta.js":747,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1353}],1358:[function(e,d,S){d.exports=function(a,u){return a.x="xVal"in u?u.xVal:u.x,a.y="yVal"in u?u.yVal:u.y,"initial"in u&&(a.initial=u.initial),"delta"in u&&(a.delta=u.delta),"final"in u&&(a.final=u.final),u.xa&&(a.xaxis=u.xa),u.ya&&(a.yaxis=u.ya),a}},{}],1359:[function(e,d,S){var r=e("../../plots/cartesian/axes").hoverLabelText,a=e("../../components/color").opacity,u=e("../bar/hover").hoverOnBars,c=e("../../constants/delta.js"),t={increasing:c.INCREASING.SYMBOL,decreasing:c.DECREASING.SYMBOL};d.exports=function(o,l,h,i){var s=u(o,l,h,i);if(!s)return;var p=s.cd,v=p[0].trace,m=v.orientation==="h",b=m?o.xa:o.ya;function y(k){return r(b,k)}var x=s.index,w=p[x],g=w.isSum?w.b+w.s:w.rawS;if(!w.isSum){s.initial=w.b+w.s-g,s.delta=g,s.final=s.initial+s.delta;var T=y(Math.abs(s.delta));s.deltaLabel=g<0?"("+T+")":T,s.finalLabel=y(s.final),s.initialLabel=y(s.initial)}var M=w.hi||v.hoverinfo,P=[];if(M&&M!=="none"&&M!=="skip"){var L=M==="all",I=M.split("+"),C=function(k){return L||I.indexOf(k)!==-1};w.isSum||(C("final")&&(m?!C("x"):!C("y"))&&P.push(s.finalLabel),C("delta")&&(g<0?P.push(s.deltaLabel+" "+t.decreasing):P.push(s.deltaLabel+" "+t.increasing)),C("initial")&&P.push("Initial: "+s.initialLabel))}return P.length&&(s.extraText=P.join("<br>")),s.color=f(v,w),[s]};function f(n,o){var l=n[o.dir].marker,h=l.color,i=l.line.color,s=l.line.width;if(a(h))return h;if(a(i)&&s)return i}},{"../../components/color":643,"../../constants/delta.js":747,"../../plots/cartesian/axes":828,"../bar/hover":928}],1360:[function(e,d,S){d.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1353,"./calc":1354,"./cross_trace_calc":1356,"./defaults":1357,"./event_data":1358,"./hover":1359,"./layout_attributes":1361,"./layout_defaults":1362,"./plot":1363,"./style":1364}],1361:[function(e,d,S){d.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1362:[function(e,d,S){var r=e("../../lib"),a=e("./layout_attributes");d.exports=function(u,c,t){var f=!1;function n(h,i){return r.coerce(u,c,a,h,i)}for(var o=0;o<t.length;o++){var l=t[o];if(l.visible&&l.type==="waterfall"){f=!0;break}}f&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":778,"./layout_attributes":1361}],1363:[function(e,d,S){var r=e("d3"),a=e("../../lib"),u=e("../../components/drawing"),c=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),f=e("../bar/uniform_text").clearMinTextSize;d.exports=function(h,i,s,p){var v=h._fullLayout;f("waterfall",v),t.plot(h,i,s,p,{mode:v.waterfallmode,norm:v.waterfallmode,gap:v.waterfallgap,groupgap:v.waterfallgroupgap}),n(h,i,s,p)};function n(l,h,i,s){var p=h.xaxis,v=h.yaxis;a.makeTraceGroups(s,i,"trace bars").each(function(m){var b=r.select(this),y=m[0].trace,x=a.ensureSingle(b,"g","lines");if(!y.connector||!y.connector.visible){x.remove();return}var w=y.orientation==="h",g=y.connector.mode,T=x.selectAll("g.line").data(a.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var M=T.size();T.each(function(P,L){if(!(L!==M-1&&!P.cNext)){var I=o(P,p,v,w),C=I[0],k=I[1],E="";C[0]!==c&&k[0]!==c&&C[1]!==c&&k[1]!==c&&(g==="spanning"&&!P.isSum&&L>0&&(w?E+="M"+C[0]+","+k[1]+"V"+k[0]:E+="M"+C[1]+","+k[0]+"H"+C[0]),g!=="between"&&(P.isSum||L<M-1)&&(w?E+="M"+C[1]+","+k[0]+"V"+k[1]:E+="M"+C[0]+","+k[1]+"H"+C[1]),C[2]!==c&&k[2]!==c&&(w?E+="M"+C[1]+","+k[1]+"V"+k[2]:E+="M"+C[1]+","+k[1]+"H"+C[2])),E===""&&(E="M0,0Z"),a.ensureSingle(r.select(this),"path").attr("d",E).call(u.setClipUrl,h.layerClipId,l)}})})}function o(l,h,i,s){var p=[],v=[],m=s?h:i,b=s?i:h;return p[0]=m.c2p(l.s0,!0),v[0]=b.c2p(l.p0,!0),p[1]=m.c2p(l.s1,!0),v[1]=b.c2p(l.p1,!0),p[2]=m.c2p(l.nextS0,!0),v[2]=b.c2p(l.nextP0,!0),s?[p,v]:[v,p]}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1364:[function(e,d,S){var r=e("d3"),a=e("../../components/drawing"),u=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),f=e("../bar/uniform_text").resizeText,n=t.styleTextPoints;function o(l,h,i){var s=i||r.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");f(l,s,"waterfall"),s.style("opacity",function(p){return p[0].trace.opacity}),s.each(function(p){var v=r.select(this),m=p[0].trace;v.selectAll(".point > path").each(function(b){if(!b.isBlank){var y=m[b.dir].marker;r.select(this).call(u.fill,y.color).call(u.stroke,y.line.color).call(a.dashLine,y.line.dash,y.line.width).style("opacity",m.selectedpoints&&!b.selected?c:1)}}),n(v,m,l),v.selectAll(".lines").each(function(){var b=m.connector.line;a.lineGroupStyle(r.select(this).selectAll("path"),b.width,b.color,b.dash)})})}d.exports={style:o}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1365:[function(e,d,S){var r=e("../plots/cartesian/axes"),a=e("../lib"),u=e("../plot_api/plot_schema"),c=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;S.moduleType="transform",S.name="aggregate";var f=S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=f.aggregations;S.supplyDefaults=function(p,v){var m={},b;function y(R,O){return a.coerce(p,m,f,R,O)}var x=y("enabled");if(!x)return m;var w=u.findArrayAttributes(v),g={};for(b=0;b<w.length;b++)g[w[b]]=1;var T=y("groups");if(!Array.isArray(T)){if(!g[T])return m.enabled=!1,m;g[T]=0}var M=p.aggregations||[],P=m.aggregations=new Array(M.length),L;function I(R,O){return a.coerce(M[b],L,n,R,O)}for(b=0;b<M.length;b++){L={_index:b};var C=I("target"),k=I("func"),E=I("enabled");E&&C&&(g[C]||k==="count"&&g[C]===void 0)?(k==="stddev"&&I("funcmode"),g[C]=0,P[b]=L):P[b]={enabled:!1,_index:b}}for(b=0;b<w.length;b++)g[w[b]]&&P.push({target:w[b],func:n.func.dflt,enabled:!0,_index:-1});return m},S.calcTransform=function(p,v,m){if(!!m.enabled){var b=m.groups,y=a.getTargetArray(v,{target:b});if(!!y){var x,w,g,T,M={},P={},L=[],I=c(v.transforms,m),C=y.length;for(v._length&&(C=Math.min(C,v._length)),x=0;x<C;x++)w=y[x],g=M[w],g===void 0?(M[w]=L.length,T=[x],L.push(T),P[M[w]]=I(x)):(L[g].push(x),P[M[w]]=(P[M[w]]||[]).concat(I(x)));m._indexToPoints=P;var k=m.aggregations;for(x=0;x<k.length;x++)o(p,v,L,k[x]);typeof b=="string"&&o(p,v,L,{target:b,func:"first",enabled:!0}),v._length=L.length}}};function o(p,v,m,b){if(!!b.enabled){for(var y=b.target,x=a.nestedProperty(v,y),w=x.get(),g=r.getDataConversions(p,v,y,w),T=l(b,g),M=new Array(m.length),P=0;P<m.length;P++)M[P]=T(w,m[P]);x.set(M),b.func==="count"&&a.pushUnique(v._arrayAttrs,y)}}function l(p,v){var m=p.func,b=v.d2c,y=v.c2d;switch(m){case"count":return h;case"first":return i;case"last":return s;case"sum":return function(x,w){for(var g=0,T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&(g+=M)}return y(g)};case"avg":return function(x,w){for(var g=0,T=0,M=0;M<w.length;M++){var P=b(x[w[M]]);P!==t&&(g+=P,T++)}return T?y(g/T):t};case"min":return function(x,w){for(var g=1/0,T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&(g=Math.min(g,M))}return g===1/0?t:y(g)};case"max":return function(x,w){for(var g=-1/0,T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&(g=Math.max(g,M))}return g===-1/0?t:y(g)};case"range":return function(x,w){for(var g=1/0,T=-1/0,M=0;M<w.length;M++){var P=b(x[w[M]]);P!==t&&(g=Math.min(g,P),T=Math.max(T,P))}return T===-1/0||g===1/0?t:y(T-g)};case"change":return function(x,w){var g=b(x[w[0]]),T=b(x[w[w.length-1]]);return g===t||T===t?t:y(T-g)};case"median":return function(x,w){for(var g=[],T=0;T<w.length;T++){var M=b(x[w[T]]);M!==t&&g.push(M)}if(!g.length)return t;g.sort(a.sorterAsc);var P=(g.length-1)/2;return y((g[Math.floor(P)]+g[Math.ceil(P)])/2)};case"mode":return function(x,w){for(var g={},T=0,M=t,P=0;P<w.length;P++){var L=b(x[w[P]]);if(L!==t){var I=g[L]=(g[L]||0)+1;I>T&&(T=I,M=L)}}return T?y(M):t};case"rms":return function(x,w){for(var g=0,T=0,M=0;M<w.length;M++){var P=b(x[w[M]]);P!==t&&(g+=P*P,T++)}return T?y(Math.sqrt(g/T)):t};case"stddev":return function(x,w){var g=0,T=0,M=1,P=t,L;for(L=0;L<w.length&&P===t;L++)P=b(x[w[L]]);if(P===t)return t;for(;L<w.length;L++){var I=b(x[w[L]]);if(I!==t){var C=I-P;g+=C,T+=C*C,M++}}var k=p.funcmode==="sample"?M-1:M;return k?Math.sqrt((T-g*g/M)/k):0}}}function h(p,v){return v.length}function i(p,v){return p[v[0]]}function s(p,v){return p[v[v.length-1]]}},{"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plots/cartesian/axes":828,"./helpers":1368}],1366:[function(e,d,S){var r=e("../lib"),a=e("../registry"),u=e("../plots/cartesian/axes"),c=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),f=t.COMPARISON_OPS,n=t.INTERVAL_OPS,o=t.SET_OPS;S.moduleType="transform",S.name="filter",S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(n).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},S.supplyDefaults=function(h){var i={};function s(b,y){return r.coerce(h,i,S.attributes,b,y)}var p=s("enabled");if(p){var v=s("target");if(r.isArrayOrTypedArray(v)&&v.length===0)return i.enabled=!1,i;s("preservegaps"),s("operation"),s("value");var m=a.getComponentMethod("calendars","handleDefaults");m(h,i,"valuecalendar",null),m(h,i,"targetcalendar",null)}return i},S.calcTransform=function(h,i,s){if(!s.enabled)return;var p=r.getTargetArray(i,s);if(!p)return;var v=s.target,m=p.length;i._length&&(m=Math.min(m,i._length));var b=s.targetcalendar,y=i._arrayAttrs,x=s.preservegaps;if(typeof v=="string"){var w=r.nestedProperty(i,v+"calendar").get();w&&(b=w)}var g=u.getDataToCoordFunc(h,i,v,p),T=l(s,g,b),M={},P={},L=0;function I(N,G){for(var U=0;U<y.length;U++){var Y=r.nestedProperty(i,y[U]);N(Y,G)}}var C,k;x?(C=function(N){M[N.astr]=r.extendDeep([],N.get()),N.set(new Array(m))},k=function(N,G){var U=M[N.astr][G];N.get()[G]=U}):(C=function(N){M[N.astr]=r.extendDeep([],N.get()),N.set([])},k=function(N,G){var U=M[N.astr][G];N.get().push(U)}),I(C);for(var E=c(i.transforms,s),R=0;R<m;R++){var O=T(p[R]);O?(I(k,R),P[L++]=E(R)):x&&L++}s._indexToPoints=P,i._length=L};function l(h,i,s){var p=h.operation,v=h.value,m=Array.isArray(v);function b(g){return g.indexOf(p)!==-1}var y=function(g){return i(g,0,h.valuecalendar)},x=function(g){return i(g,0,s)},w;switch(b(f)?w=y(m?v[0]:v):b(n)?w=m?[y(v[0]),y(v[1])]:[y(v),y(v)]:b(o)&&(w=m?v.map(y):[y(v)]),p){case"=":return function(g){return x(g)===w};case"!=":return function(g){return x(g)!==w};case"<":return function(g){return x(g)<w};case"<=":return function(g){return x(g)<=w};case">":return function(g){return x(g)>w};case">=":return function(g){return x(g)>=w};case"[]":return function(g){var T=x(g);return T>=w[0]&&T<=w[1]};case"()":return function(g){var T=x(g);return T>w[0]&&T<w[1]};case"[)":return function(g){var T=x(g);return T>=w[0]&&T<w[1]};case"(]":return function(g){var T=x(g);return T>w[0]&&T<=w[1]};case"][":return function(g){var T=x(g);return T<=w[0]||T>=w[1]};case")(":return function(g){var T=x(g);return T<w[0]||T>w[1]};case"](":return function(g){var T=x(g);return T<=w[0]||T>w[1]};case")[":return function(g){var T=x(g);return T<w[0]||T>=w[1]};case"{}":return function(g){return w.indexOf(x(g))!==-1};case"}{":return function(g){return w.indexOf(x(g))===-1}}}},{"../constants/filter_ops":749,"../lib":778,"../plots/cartesian/axes":828,"../registry":911,"./helpers":1368}],1367:[function(e,d,S){var r=e("../lib"),a=e("../plot_api/plot_schema"),u=e("../plots/plots"),c=e("./helpers").pointsAccessorFunction;S.moduleType="transform",S.name="groupby",S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},S.supplyDefaults=function(f,n,o){var l,h={};function i(y,x){return r.coerce(f,h,S.attributes,y,x)}var s=i("enabled");if(!s)return h;i("groups"),i("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var p=f.styles,v=h.styles=[];if(p)for(l=0;l<p.length;l++){var m=v[l]={};r.coerce(p[l],v[l],S.attributes.styles,"target");var b=r.coerce(p[l],v[l],S.attributes.styles,"value");r.isPlainObject(b)?m.value=r.extendDeep({},b):b&&delete m.value}return h},S.transform=function(f,n){var o,l,h,i=[];for(l=0;l<f.length;l++)for(o=t(f[l],n),h=0;h<o.length;h++)i.push(o[h]);return i};function t(f,n){var o,l,h,i,s,p,v,m,b,y,x=n.transform,w=n.transformIndex,g=f.transforms[w].groups,T=c(f.transforms,x);if(!r.isArrayOrTypedArray(g)||g.length===0)return[f];var M=r.filterUnique(g),P=new Array(M.length),L=g.length,I=a.findArrayAttributes(f),C=x.styles||[],k={};for(o=0;o<C.length;o++)k[C[o].target]=C[o].value;x.styles&&(y=r.keyedContainer(x,"styles","target","value.name"));var E={},R={};for(o=0;o<M.length;o++){p=M[o],E[p]=o,R[p]=0,v=P[o]=r.extendDeepNoArrays({},f),v._group=p,v.transforms[w]._indexToPoints={};var O=null;for(y&&(O=y.get(p)),O||O===""?v.name=O:v.name=r.templateString(x.nameformat,{trace:f.name,group:p}),m=v.transforms,v.transforms=[],l=0;l<m.length;l++)v.transforms[l]=r.extendDeepNoArrays({},m[l]);for(l=0;l<I.length;l++)r.nestedProperty(v,I[l]).set([])}for(h=0;h<I.length;h++){for(i=I[h],l=0,b=[];l<M.length;l++)b[l]=r.nestedProperty(P[l],i).get();for(s=r.nestedProperty(f,i).get(),l=0;l<L;l++)b[E[g[l]]].push(s[l])}for(l=0;l<L;l++){v=P[E[g[l]]];var N=v.transforms[w]._indexToPoints;N[R[g[l]]]=T(l),R[g[l]]++}for(o=0;o<M.length;o++)p=M[o],v=P[o],u.clearExpandedTraceDefaultColors(v),v=r.extendDeepNoArrays(v,k[p]||{});return P}},{"../lib":778,"../plot_api/plot_schema":816,"../plots/plots":891,"./helpers":1368}],1368:[function(e,d,S){S.pointsAccessorFunction=function(r,a){for(var u,c,t=0;t<r.length&&(u=r[t],u!==a);t++)!u._indexToPoints||u.enabled===!1||(c=u._indexToPoints);var f=c?function(n){return c[n]}:function(n){return[n]};return f}},{}],1369:[function(e,d,S){var r=e("../lib"),a=e("../plots/cartesian/axes"),u=e("./helpers").pointsAccessorFunction,c=e("../constants/numerical").BADNUM;S.moduleType="transform",S.name="sort",S.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},S.supplyDefaults=function(n){var o={};function l(i,s){return r.coerce(n,o,S.attributes,i,s)}var h=l("enabled");return h&&(l("target"),l("order")),o},S.calcTransform=function(n,o,l){if(!!l.enabled){var h=r.getTargetArray(o,l);if(!!h){var i=l.target,s=h.length;o._length&&(s=Math.min(s,o._length));var p=o._arrayAttrs,v=a.getDataToCoordFunc(n,o,i,h),m=t(l,h,v,s),b=u(o.transforms,l),y={},x,w;for(x=0;x<p.length;x++){var g=r.nestedProperty(o,p[x]),T=g.get(),M=new Array(s);for(w=0;w<s;w++)M[w]=T[m[w]];g.set(M)}for(w=0;w<s;w++)y[w]=b(m[w]);l._indexToPoints=y,o._length=s}}};function t(n,o,l,h){var i=new Array(h),s=new Array(h),p;for(p=0;p<h;p++)i[p]={v:o[p],i:p};for(i.sort(f(n,l)),p=0;p<h;p++)s[p]=i[p].i;return s}function f(n,o){switch(n.order){case"ascending":return function(l,h){var i=o(l.v),s=o(h.v);return i===c?1:s===c?-1:i-s};case"descending":return function(l,h){var i=o(l.v),s=o(h.v);return i===c?1:s===c?-1:s-i}}}},{"../constants/numerical":753,"../lib":778,"../plots/cartesian/axes":828,"./helpers":1368}],1370:[function(e,d,S){S.version="1.58.4"},{}]},{},[26])(26)})})(r5);(function(A){Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;var D=d(t5),e=d(r5.exports);function d(a){return a&&a.__esModule?a:{default:a}}var S=(0,D.default)(e.default),r=S;A.default=r})(e5);const z8=Xw(e5);var n5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(A){(function(){var D={}.hasOwnProperty;function e(){for(var d=[],S=0;S<arguments.length;S++){var r=arguments[S];if(!!r){var a=typeof r;if(a==="string"||a==="number")d.push(r);else if(Array.isArray(r)){if(r.length){var u=e.apply(null,r);u&&d.push(u)}}else if(a==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){d.push(r.toString());continue}for(var c in r)D.call(r,c)&&r[c]&&d.push(c)}}}return d.join(" ")}A.exports?(e.default=e,A.exports=e):window.classNames=e})()})(n5);const Nm=n5.exports;var F8=function(D,e,d,S){var r=d?d.call(S,D,e):void 0;if(r!==void 0)return!!r;if(D===e)return!0;if(typeof D!="object"||!D||typeof e!="object"||!e)return!1;var a=Object.keys(D),u=Object.keys(e);if(a.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(e),t=0;t<a.length;t++){var f=a[t];if(!c(f))return!1;var n=D[f],o=e[f];if(r=d?d.call(S,n,o,f):void 0,r===!1||r===void 0&&n!==o)return!1}return!0};function Nw(A){var D=Nn.exports.useRef();D.current=A;var e=Nn.exports.useCallback(function(){for(var d,S=arguments.length,r=new Array(S),a=0;a<S;a++)r[a]=arguments[a];return(d=D.current)===null||d===void 0?void 0:d.call.apply(d,[D].concat(r))},[]);return e}function O8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Bw=O8()?Nn.exports.useLayoutEffect:Nn.exports.useEffect,Uw=function(D,e){var d=Nn.exports.useRef(!0);Bw(function(){if(!d.current)return D()},e),Bw(function(){return d.current=!1,function(){d.current=!0}},[])};function Vw(A){var D=Nn.exports.useRef(!1),e=Nn.exports.useState(A),d=bc(e,2),S=d[0],r=d[1];Nn.exports.useEffect(function(){return D.current=!1,function(){D.current=!0}},[]);function a(u,c){c&&D.current||r(u)}return[S,a]}function lx(A){return A!==void 0}function N8(A,D){var e=D||{},d=e.defaultValue,S=e.value,r=e.onChange,a=e.postState,u=Vw(function(){return lx(S)?S:lx(d)?typeof d=="function"?d():d:typeof A=="function"?A():A}),c=bc(u,2),t=c[0],f=c[1],n=S!==void 0?S:t,o=a?a(n):n,l=Nw(r),h=Vw([n]),i=bc(h,2),s=i[0],p=i[1];Uw(function(){var m=s[0];t!==m&&l(t,m)},[s]),Uw(function(){lx(S)||f(S)},[S]);var v=Nw(function(m,b){f(m,b),p([n],b)});return[o,v]}function Hw(A,D){var e=Object.keys(A);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(A);D&&(d=d.filter(function(S){return Object.getOwnPropertyDescriptor(A,S).enumerable})),e.push.apply(e,d)}return e}function gh(A){for(var D=1;D<arguments.length;D++){var e=arguments[D]!=null?arguments[D]:{};D%2?Hw(Object(e),!0).forEach(function(d){af(A,d,e[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(e)):Hw(Object(e)).forEach(function(d){Object.defineProperty(A,d,Object.getOwnPropertyDescriptor(e,d))})}return A}var Ya={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(D){var e=D.keyCode;if(D.altKey&&!D.ctrlKey||D.metaKey||e>=Ya.F1&&e<=Ya.F12)return!1;switch(e){case Ya.ALT:case Ya.CAPS_LOCK:case Ya.CONTEXT_MENU:case Ya.CTRL:case Ya.DOWN:case Ya.END:case Ya.ESC:case Ya.HOME:case Ya.INSERT:case Ya.LEFT:case Ya.MAC_FF_META:case Ya.META:case Ya.NUMLOCK:case Ya.NUM_CENTER:case Ya.PAGE_DOWN:case Ya.PAGE_UP:case Ya.PAUSE:case Ya.PRINT_SCREEN:case Ya.RIGHT:case Ya.SHIFT:case Ya.UP:case Ya.WIN_KEY:case Ya.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(D){if(D>=Ya.ZERO&&D<=Ya.NINE||D>=Ya.NUM_ZERO&&D<=Ya.NUM_MULTIPLY||D>=Ya.A&&D<=Ya.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&D===0)return!0;switch(D){case Ya.SPACE:case Ya.QUESTION_MARK:case Ya.NUM_PLUS:case Ya.NUM_MINUS:case Ya.NUM_PERIOD:case Ya.NUM_DIVISION:case Ya.SEMICOLON:case Ya.DASH:case Ya.EQUALS:case Ya.COMMA:case Ya.PERIOD:case Ya.SLASH:case Ya.APOSTROPHE:case Ya.SINGLE_QUOTE:case Ya.OPEN_SQUARE_BRACKET:case Ya.BACKSLASH:case Ya.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},$v=Nn.exports.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function bb(A,D,e){return(A-D)/(e-D)}function O2(A,D,e,d){var S=bb(D,e,d),r={};switch(A){case"rtl":r.right="".concat(S*100,"%"),r.transform="translateX(50%)";break;case"btt":r.bottom="".concat(S*100,"%"),r.transform="translateY(50%)";break;case"ttb":r.top="".concat(S*100,"%"),r.transform="translateY(-50%)";break;default:r.left="".concat(S*100,"%"),r.transform="translateX(-50%)";break}return r}function $d(A,D){return Array.isArray(A)?A[D]:A}var B8=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],U8=Nn.exports.forwardRef(function(A,D){var e,d,S=A.prefixCls,r=A.value,a=A.valueIndex,u=A.onStartMove,c=A.style,t=A.render,f=A.dragging,n=A.onOffsetChange,o=ql(A,B8),l=Nn.exports.useContext($v),h=l.min,i=l.max,s=l.direction,p=l.disabled,v=l.keyboard,m=l.range,b=l.tabIndex,y=l.ariaLabelForHandle,x=l.ariaLabelledByForHandle,w=l.ariaValueTextFormatterForHandle,g="".concat(S,"-handle"),T=function(C){p||u(C,a)},M=function(C){if(!p&&v){var k=null;switch(C.which||C.keyCode){case Ya.LEFT:k=s==="ltr"||s==="btt"?-1:1;break;case Ya.RIGHT:k=s==="ltr"||s==="btt"?1:-1;break;case Ya.UP:k=s!=="ttb"?1:-1;break;case Ya.DOWN:k=s!=="ttb"?-1:1;break;case Ya.HOME:k="min";break;case Ya.END:k="max";break;case Ya.PAGE_UP:k=2;break;case Ya.PAGE_DOWN:k=-2;break}k!==null&&(C.preventDefault(),n(k,a))}},P=O2(s,r,h,i),L=wn("div",{ref:D,className:Nm(g,(e={},af(e,"".concat(g,"-").concat(a+1),m),af(e,"".concat(g,"-dragging"),f),e)),style:gh(gh({},P),c),onMouseDown:T,onTouchStart:T,onKeyDown:M,tabIndex:p?null:$d(b,a),role:"slider","aria-valuemin":h,"aria-valuemax":i,"aria-valuenow":r,"aria-disabled":p,"aria-label":$d(y,a),"aria-labelledby":$d(x,a),"aria-valuetext":(d=$d(w,a))===null||d===void 0?void 0:d(r),...o});return t&&(L=t(L,{index:a,prefixCls:S,value:r,dragging:f})),L}),V8=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],H8=Nn.exports.forwardRef(function(A,D){var e=A.prefixCls,d=A.style,S=A.onStartMove,r=A.onOffsetChange,a=A.values,u=A.handleRender,c=A.draggingIndex,t=ql(A,V8),f=Nn.exports.useRef({});return Nn.exports.useImperativeHandle(D,function(){return{focus:function(o){var l;(l=f.current[o])===null||l===void 0||l.focus()}}}),wn(s6,{children:a.map(function(n,o){return wn(U8,{ref:function(h){h?f.current[o]=h:delete f.current[o]},dragging:c===o,prefixCls:e,style:$d(d,o),value:n,valueIndex:o,onStartMove:S,onOffsetChange:r,render:u,...t},o)})})});function Gw(A){var D="touches"in A?A.touches[0]:A;return{pageX:D.pageX,pageY:D.pageY}}function G8(A,D,e,d,S,r,a,u,c){var t=Nn.exports.useState(null),f=bc(t,2),n=f[0],o=f[1],l=Nn.exports.useState(-1),h=bc(l,2),i=h[0],s=h[1],p=Nn.exports.useState(e),v=bc(p,2),m=v[0],b=v[1],y=Nn.exports.useState(e),x=bc(y,2),w=x[0],g=x[1],T=Nn.exports.useRef(null),M=Nn.exports.useRef(null);Nn.exports.useEffect(function(){i===-1&&b(e)},[e,i]),Nn.exports.useEffect(function(){return function(){document.removeEventListener("mousemove",T.current),document.removeEventListener("mouseup",M.current),document.removeEventListener("touchmove",T.current),document.removeEventListener("touchend",M.current)}},[]);var P=function(R,O){m.some(function(N,G){return N!==R[G]})&&(O!==void 0&&o(O),b(R),a(R))},L=function(R,O){if(R===-1){var N=w[0],G=w[w.length-1],U=d-N,Y=S-G,z=O*(S-d);z=Math.max(z,U),z=Math.min(z,Y);var B=r(N+z);z=B-N;var H=w.map(function(J){return J+z});P(H)}else{var V=(S-d)*O,Z=dh(m);Z[R]=w[R];var q=c(Z,V,R,"dist");P(q.values,q.value)}},I=Nn.exports.useRef(L);I.current=L;var C=function(R,O){R.stopPropagation();var N=e[O];s(O),o(N),g(e);var G=Gw(R),U=G.pageX,Y=G.pageY,z=function(V){V.preventDefault();var Z=Gw(V),q=Z.pageX,J=Z.pageY,ne=q-U,ve=J-Y,$=A.current.getBoundingClientRect(),j=$.width,ae=$.height,ie;switch(D){case"btt":ie=-ve/ae;break;case"ttb":ie=ve/ae;break;case"rtl":ie=-ne/j;break;default:ie=ne/j}I.current(O,ie)},B=function H(V){V.preventDefault(),document.removeEventListener("mouseup",H),document.removeEventListener("mousemove",z),document.removeEventListener("touchend",H),document.removeEventListener("touchmove",z),T.current=null,M.current=null,s(-1),u()};document.addEventListener("mouseup",B),document.addEventListener("mousemove",z),document.addEventListener("touchend",B),document.addEventListener("touchmove",z),T.current=z,M.current=B},k=Nn.exports.useMemo(function(){var E=dh(e).sort(function(O,N){return O-N}),R=dh(m).sort(function(O,N){return O-N});return E.every(function(O,N){return O===R[N]})?m:e},[e,m]);return[i,n,k,C]}function j8(A){var D=A.prefixCls,e=A.style,d=A.start,S=A.end,r=A.index,a=A.onStartMove,u=Nn.exports.useContext($v),c=u.direction,t=u.min,f=u.max,n=u.disabled,o=u.range,l="".concat(D,"-track"),h=bb(d,t,f),i=bb(S,t,f),s=function(m){!n&&a&&a(m,-1)},p={};switch(c){case"rtl":p.right="".concat(h*100,"%"),p.width="".concat(i*100-h*100,"%");break;case"btt":p.bottom="".concat(h*100,"%"),p.height="".concat(i*100-h*100,"%");break;case"ttb":p.top="".concat(h*100,"%"),p.height="".concat(i*100-h*100,"%");break;default:p.left="".concat(h*100,"%"),p.width="".concat(i*100-h*100,"%")}return wn("div",{className:Nm(l,o&&"".concat(l,"-").concat(r+1)),style:gh(gh({},p),e),onMouseDown:s,onTouchStart:s})}function W8(A){var D=A.prefixCls,e=A.style,d=A.values,S=A.startPoint,r=A.onStartMove,a=Nn.exports.useContext($v),u=a.included,c=a.range,t=a.min,f=Nn.exports.useMemo(function(){if(!c){if(d.length===0)return[];var n=S!=null?S:t,o=d[0];return[{start:Math.min(n,o),end:Math.max(n,o)}]}for(var l=[],h=0;h<d.length-1;h+=1)l.push({start:d[h],end:d[h+1]});return l},[d,c,S,t]);return u?f.map(function(n,o){var l=n.start,h=n.end;return wn(j8,{index:o,prefixCls:D,style:$d(e,o),start:l,end:h,onStartMove:r},o)}):null}function Y8(A){var D=A.prefixCls,e=A.style,d=A.children,S=A.value,r=A.onClick,a=Nn.exports.useContext($v),u=a.min,c=a.max,t=a.direction,f=a.includedStart,n=a.includedEnd,o=a.included,l="".concat(D,"-text"),h=O2(t,S,u,c);return wn("span",{className:Nm(l,af({},"".concat(l,"-active"),o&&f<=S&&S<=n)),style:gh(gh({},h),e),onMouseDown:function(s){s.stopPropagation()},onClick:function(){r(S)},children:d})}function X8(A){var D=A.prefixCls,e=A.marks,d=A.onClick,S="".concat(D,"-mark");return e.length?wn("div",{className:S,children:e.map(function(r){var a=r.value,u=r.style,c=r.label;return wn(Y8,{prefixCls:S,style:u,value:a,onClick:d,children:c},a)})}):null}function Z8(A){var D=A.prefixCls,e=A.value,d=A.style,S=A.activeStyle,r=Nn.exports.useContext($v),a=r.min,u=r.max,c=r.direction,t=r.included,f=r.includedStart,n=r.includedEnd,o="".concat(D,"-dot"),l=t&&f<=e&&e<=n,h=gh(gh({},O2(c,e,a,u)),typeof d=="function"?d(e):d);return l&&(h=gh(gh({},h),typeof S=="function"?S(e):S)),wn("span",{className:Nm(o,af({},"".concat(o,"-active"),l)),style:h})}function K8(A){var D=A.prefixCls,e=A.marks,d=A.dots,S=A.style,r=A.activeStyle,a=Nn.exports.useContext($v),u=a.min,c=a.max,t=a.step,f=Nn.exports.useMemo(function(){var n=new Set;if(e.forEach(function(l){n.add(l.value)}),d&&t!==null)for(var o=u;o<=c;)n.add(o),o+=t;return Array.from(n)},[u,c,t,d,e]);return wn("div",{className:"".concat(D,"-step"),children:f.map(function(n){return wn(Z8,{prefixCls:D,value:n,style:S,activeStyle:r},n)})})}function J8(A,D,e,d,S,r){var a=Nn.exports.useCallback(function(l){var h=isFinite(l)?l:A;return h=Math.min(D,l),h=Math.max(A,h),h},[A,D]),u=Nn.exports.useCallback(function(l){if(e!==null){var h=A+Math.round((a(l)-A)/e)*e,i=function(m){return(String(m).split(".")[1]||"").length},s=Math.max(i(e),i(D),i(A)),p=Number(h.toFixed(s));return A<=p&&p<=D?p:null}return null},[e,A,D,a]),c=Nn.exports.useCallback(function(l){var h=a(l),i=d.map(function(v){return v.value});e!==null&&i.push(u(l)),i.push(A,D);var s=i[0],p=D-A;return i.forEach(function(v){var m=Math.abs(h-v);m<=p&&(s=v,p=m)}),s},[A,D,d,e,a,u]),t=function l(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof i=="number"){var v,m=h[s],b=m+i,y=[];d.forEach(function(M){y.push(M.value)}),y.push(A,D),y.push(u(m));var x=i>0?1:-1;p==="unit"?y.push(u(m+x*e)):y.push(u(b)),y=y.filter(function(M){return M!==null}).filter(function(M){return i<0?M<=m:M>=m}),p==="unit"&&(y=y.filter(function(M){return M!==m}));var w=p==="unit"?m:b;v=y[0];var g=Math.abs(v-w);if(y.forEach(function(M){var P=Math.abs(M-w);P<g&&(v=M,g=P)}),v===void 0)return i<0?A:D;if(p==="dist")return v;if(Math.abs(i)>1){var T=dh(h);return T[s]=v,l(T,i-x,s,p)}return v}else{if(i==="min")return A;if(i==="max")return D}},f=function(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",v=h[s],m=t(h,i,s,p);return{value:m,changed:m!==v}},n=function(h){return r===null&&h===0||typeof r=="number"&&h<r},o=function(h,i,s){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",v=h.map(c),m=v[s],b=t(v,i,s,p);if(v[s]=b,S===!1){var y=r||0;s>0&&v[s-1]!==m&&(v[s]=Math.max(v[s],v[s-1]+y)),s<v.length-1&&v[s+1]!==m&&(v[s]=Math.min(v[s],v[s+1]-y))}else if(typeof r=="number"||r===null){for(var x=s+1;x<v.length;x+=1)for(var w=!0;n(v[x]-v[x-1])&&w;){var g=f(v,1,x);v[x]=g.value,w=g.changed}for(var T=s;T>0;T-=1)for(var M=!0;n(v[T]-v[T-1])&&M;){var P=f(v,-1,T-1);v[T-1]=P.value,M=P.changed}for(var L=v.length-1;L>0;L-=1)for(var I=!0;n(v[L]-v[L-1])&&I;){var C=f(v,-1,L-1);v[L-1]=C.value,I=C.changed}for(var k=0;k<v.length-1;k+=1)for(var E=!0;n(v[k+1]-v[k])&&E;){var R=f(v,1,k+1);v[k+1]=R.value,E=R.changed}}return{value:v[s],values:v}};return[c,o]}var $8=Nn.exports.forwardRef(function(A,D){var e,d=A.prefixCls,S=d===void 0?"rc-slider":d,r=A.className,a=A.style,u=A.disabled,c=u===void 0?!1:u,t=A.keyboard,f=t===void 0?!0:t,n=A.autoFocus,o=A.onFocus,l=A.onBlur,h=A.min,i=h===void 0?0:h,s=A.max,p=s===void 0?100:s,v=A.step,m=v===void 0?1:v,b=A.value,y=A.defaultValue,x=A.range,w=A.count,g=A.onChange,T=A.onBeforeChange,M=A.onAfterChange,P=A.allowCross,L=P===void 0?!0:P,I=A.pushable,C=I===void 0?!1:I,k=A.draggableTrack,E=A.reverse,R=A.vertical,O=A.included,N=O===void 0?!0:O,G=A.startPoint,U=A.trackStyle,Y=A.handleStyle,z=A.railStyle,B=A.dotStyle,H=A.activeDotStyle,V=A.marks,Z=A.dots,q=A.handleRender,J=A.tabIndex,ne=J===void 0?0:J,ve=A.ariaLabelForHandle,$=A.ariaLabelledByForHandle,j=A.ariaValueTextFormatterForHandle,ae=Nn.exports.useRef(),ie=Nn.exports.useRef(),te=Nn.exports.useMemo(function(){return R?E?"ttb":"btt":E?"rtl":"ltr"},[E,R]),re=Nn.exports.useMemo(function(){return isFinite(i)?i:0},[i]),ce=Nn.exports.useMemo(function(){return isFinite(p)?p:100},[p]),pe=Nn.exports.useMemo(function(){return m!==null&&m<=0?1:m},[m]),fe=Nn.exports.useMemo(function(){return C===!0?pe:C>=0?C:!1},[C,pe]),se=Nn.exports.useMemo(function(){var ut=Object.keys(V||{});return ut.map(function(nt){var Ge=V[nt],at={value:Number(nt)};return Ge&&Yv(Ge)==="object"&&!Nn.exports.isValidElement(Ge)&&("label"in Ge||"style"in Ge)?(at.style=Ge.style,at.label=Ge.label):at.label=Ge,at}).filter(function(nt){var Ge=nt.label;return Ge||typeof Ge=="number"}).sort(function(nt,Ge){return nt.value-Ge.value})},[V]),de=J8(re,ce,pe,se,L,fe),be=bc(de,2),xe=be[0],ke=be[1],Re=N8(y,{value:b}),Ke=bc(Re,2),ze=Ke[0],Je=Ke[1],qe=Nn.exports.useMemo(function(){var ut=ze==null?[]:Array.isArray(ze)?ze:[ze],nt=bc(ut,1),Ge=nt[0],at=Ge===void 0?re:Ge,et=ze===null?[]:[at];if(x){if(et=dh(ut),w||ze===void 0){var lt=w>=0?w+1:2;for(et=et.slice(0,lt);et.length<lt;){var Ct;et.push((Ct=et[et.length-1])!==null&&Ct!==void 0?Ct:re)}}et.sort(function(Pt,$t){return Pt-$t})}return et.forEach(function(Pt,$t){et[$t]=xe(Pt)}),et},[ze,x,re,w,xe]),Ee=Nn.exports.useRef(qe);Ee.current=qe;var Ae=function(nt){return x?nt:nt[0]},Be=function(nt){var Ge=dh(nt).sort(function(at,et){return at-et});g&&!F8(Ge,Ee.current)&&g(Ae(Ge)),Je(Ge)},$e=function(nt){if(!c){var Ge=0,at=ce-re;qe.forEach(function(lt,Ct){var Pt=Math.abs(nt-lt);Pt<=at&&(at=Pt,Ge=Ct)});var et=dh(qe);et[Ge]=nt,x&&!qe.length&&w===void 0&&et.push(nt),T==null||T(Ae(et)),Be(et),M==null||M(Ae(et))}},xt=function(nt){nt.preventDefault();var Ge=ie.current.getBoundingClientRect(),at=Ge.width,et=Ge.height,lt=Ge.left,Ct=Ge.top,Pt=Ge.bottom,$t=Ge.right,je=nt.clientX,Oe=nt.clientY,mt;switch(te){case"btt":mt=(Pt-Oe)/et;break;case"ttb":mt=(Oe-Ct)/et;break;case"rtl":mt=($t-je)/at;break;default:mt=(je-lt)/at}var wt=re+mt*(ce-re);$e(xe(wt))},bt=Nn.exports.useState(null),Ne=bc(bt,2),st=Ne[0],_t=Ne[1],Ot=function(nt,Ge){if(!c){var at=ke(qe,nt,Ge);T==null||T(Ae(qe)),Be(at.values),M==null||M(Ae(at.values)),_t(at.value)}};Nn.exports.useEffect(function(){if(st!==null){var ut=qe.indexOf(st);ut>=0&&ae.current.focus(ut)}_t(null)},[st]);var Wt=Nn.exports.useMemo(function(){return k&&pe===null?!1:k},[k,pe]),Et=function(){M==null||M(Ae(Ee.current))},jt=G8(ie,te,qe,re,ce,xe,Be,Et,ke),Zt=bc(jt,4),Mt=Zt[0],At=Zt[1],ft=Zt[2],ot=Zt[3],Te=function(nt,Ge){ot(nt,Ge),T==null||T(Ae(Ee.current))},Le=Mt!==-1;Nn.exports.useEffect(function(){if(!Le){var ut=qe.lastIndexOf(At);ae.current.focus(ut)}},[Le]);var Ve=Nn.exports.useMemo(function(){return dh(ft).sort(function(ut,nt){return ut-nt})},[ft]),Qe=Nn.exports.useMemo(function(){return x?[Ve[0],Ve[Ve.length-1]]:[re,Ve[0]]},[Ve,x,re]),Me=bc(Qe,2),Ie=Me[0],He=Me[1];Nn.exports.useImperativeHandle(D,function(){return{focus:function(){ae.current.focus(0)},blur:function(){var nt=document,Ge=nt.activeElement;ie.current.contains(Ge)&&(Ge==null||Ge.blur())}}}),Nn.exports.useEffect(function(){n&&ae.current.focus(0)},[]);var Ye=Nn.exports.useMemo(function(){return{min:re,max:ce,direction:te,disabled:c,keyboard:f,step:pe,included:N,includedStart:Ie,includedEnd:He,range:x,tabIndex:ne,ariaLabelForHandle:ve,ariaLabelledByForHandle:$,ariaValueTextFormatterForHandle:j}},[re,ce,te,c,f,pe,N,Ie,He,x,ne,ve,$,j]);return wn($v.Provider,{value:Ye,children:Gi("div",{ref:ie,className:Nm(S,r,(e={},af(e,"".concat(S,"-disabled"),c),af(e,"".concat(S,"-vertical"),R),af(e,"".concat(S,"-horizontal"),!R),af(e,"".concat(S,"-with-marks"),se.length),e)),style:a,onMouseDown:xt,children:[wn("div",{className:"".concat(S,"-rail"),style:z}),wn(W8,{prefixCls:S,style:U,values:Ve,startPoint:G,onStartMove:Wt?Te:null}),wn(K8,{prefixCls:S,marks:se,dots:Z,style:B,activeStyle:H}),wn(H8,{ref:ae,prefixCls:S,style:Y,values:ft,draggingIndex:Mt,onStartMove:Te,onOffsetChange:Ot,onFocus:o,onBlur:l,handleRender:q}),wn(X8,{prefixCls:S,marks:se,onClick:$e})]})})});class Q8 extends Nn.exports.Component{render(){return wn("div",{children:Gi("header",{className:"App-header",children:[wn("h1",{className:"App-title",children:"React / Shiny / Plumber Frontend"}),Gi("div",{children:[wn("a",{href:"https://vitejs.dev",target:"_blank",children:wn("img",{src:"/vite.svg",className:"logo",alt:"Vite logo"})}),wn("a",{href:"https://reactjs.org",target:"_blank",children:wn("img",{src:_S,className:"logo react",alt:"React logo"})})]}),wn("h1",{children:"Vite + React"}),wn("p",{className:"read-the-docs",children:"Click on the Vite and React logos to learn more"})]})})}}function q8({content:A}){Nn.exports.useState(0);let D=!1;const[e,d]=Nn.exports.useState({rawdata:[{y:null,x:null,type:"bar"}]}),[S,r]=Nn.exports.useState(0),[a,u]=Nn.exports.useState(0),[c,t]=Nn.exports.useState(0),f=()=>{!!window&&window.hasOwnProperty("innerWidth")&&window.hasOwnProperty("innerHeight")&&(console.log("Update width to: "+window.innerWidth),r(window.innerWidth),console.log("Update height to: "+window.innerHeight),u(window.innerHeight),console.log("Update height/width ratio to: "+window.innerHeight/window.innerWidth),t(window.innerHeight/window.innerWidth))};Nn.exports.useEffect(()=>(window.addEventListener("load",f),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)),[]);function n(){if(!D){const l=document.getElementsByClassName("App")[0],h=l.childNodes[0]||null,i=typeof A=="function"?A():{childNodes:[]};console.log(h),console.log(i.childNodes),setTimeout(s=>{i.childNodes.forEach(p=>{console.log(p),s.insertBefore(p,h)})},53,l),D=!0}}Nn.exports.useEffect(n,[]);async function o(l){return console.log("what?"),I8.get("https://frontend.ruralopportunitymap.us/__api__/hist-raw",{params:{bins:l}}).then(h=>{console.log(h.data),console.log(`Render to plotly component:
<Plot
    data={`+e.rawdata+`}
    layout={{
        title: 'Histogram of waiting times',
        bargap: 0.01,
        autosize: false,
        width: (0.364583 * `+S+`),
        height: (0.234375 * `+S+`),
        xaxis: {
            title: 'Waiting time to next eruption (in mins)'
        },
        yaxis: {
            title: 'Frequency'
        },
        useResizeHandler: true,
        responsive: true
    }}
/>`),d({rawdata:[{y:h.data.map(i=>i.counts),x:h.data.map(i=>i.mids),type:"bar"}]})})}return Gi("div",{className:"App",children:[wn(Q8,{}),Gi("div",{className:"card",children:[wn(z8,{data:e.rawdata,layout:{title:"Histogram of waiting times",bargap:.01,autosize:!1,width:.364583*S,height:.234375*S,xaxis:{title:"Waiting time to next eruption (in mins)"},yaxis:{title:"Frequency"},useResizeHandler:!0,responsive:!0}}),wn($8,{id:"bins",onChange:xb.exports.debounce(o,60),min:1,max:50,marks:{1:"1",13:"13",26:"26",38:"38",50:"50"},toolTipVisibleAlways:!0}),wn("br",{}),wn("label",{htmlFor:"bins",className:"col-form-label",children:"Number of bins"})]}),wn("br",{})]})}const eL="react-app",jw=document.getElementById(eL),Ww=document.createElement("div"),Yw=A=>{for(const e of jw.childNodes){const d=e;e.nodeType===1?(console.log(e.nodeType,e),Ww.appendChild(d)):e.nodeType===3&&console.log(e.nodeType,e)}rA(jw).render(wn($l.StrictMode,{children:wn(q8,{content:()=>Ww})}))};typeof Shiny=="object"?document.body.addEventListener("cori.apps:init",Yw):(document.body.childNodes.forEach(A=>"data"in A&&A.data.match(/headContent/)!==null?document.body.removeChild(A):!0),Yw());
